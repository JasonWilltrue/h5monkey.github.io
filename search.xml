<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>äºŒå‰æ ‘çš„å±‚åºéå†</title>
      <link href="2021/02/21/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/"/>
      <url>2021/02/21/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¼šäºŒå‰æ ‘çš„å±‚åºéå†ï¼Œå¯ä»¥ä¸€å£æ°”æ’¸å®Œleetcodeä¸Šå…«é“é¢˜ç›®:</p><ul><li>107.äºŒå‰æ ‘çš„å±‚æ¬¡éå†II </li><li>199.äºŒå‰æ ‘çš„å³è§†å›¾</li><li>637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ </li><li>429.Nå‰æ ‘çš„å‰åºéå† </li><li>515.åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼</li><li>116.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ </li><li>117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆII</li></ul><a id="more"></a><h2 id="äºŒå‰æ ‘çš„å±‚æ¬¡éå†-II"><a href="#äºŒå‰æ ‘çš„å±‚æ¬¡éå†-II" class="headerlink" title="äºŒå‰æ ‘çš„å±‚æ¬¡éå† II"></a><strong>äºŒå‰æ ‘çš„å±‚æ¬¡éå†</strong> II</h2><p>é¢˜ç›®é“¾æ¥:<a class="link"   href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/" >https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/<i class="fas fa-external-link-alt"></i></a></p><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ã€‚ (å³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€ å±‚ä»å·¦å‘å³éå†)</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102211418559202021022114.png"                      alt="image-20210221141855920"                ></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>1.å‰é¢éƒ½æ˜¯å±‚æ¬¡éå†å¥—è·¯</p><p>2.æœ€åç»“æœå†ç”¨æ•°ç»„reverseæ–¹æ³•</p><h3 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102211439511272021022114.png"                      alt="image-20210221143951127"                ></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrderBottom = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!root) <span class="keyword">return</span> []</span><br><span class="line">   <span class="keyword">const</span> q = [[root,<span class="number">0</span>]]</span><br><span class="line">   <span class="keyword">const</span> res = []</span><br><span class="line">   <span class="keyword">while</span>(q.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">       <span class="keyword">const</span> [n,level] =q.shift()</span><br><span class="line">       <span class="keyword">if</span>(!res[level])&#123;</span><br><span class="line">         res.push([n.val])</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         res[level].push(n.val)  </span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>(n.left) q.push([n.left,level+<span class="number">1</span>])</span><br><span class="line">       <span class="keyword">if</span>(n.right)q.push([n.right,level+<span class="number">1</span>])</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//åè½¬</span></span><br><span class="line">   <span class="keyword">return</span> res.reverse()</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="199-äºŒå‰æ ‘çš„å³è§†å›¾"><a href="#199-äºŒå‰æ ‘çš„å³è§†å›¾" class="headerlink" title="199.äºŒå‰æ ‘çš„å³è§†å›¾"></a>199.<strong>äºŒå‰æ ‘çš„å³è§†å›¾</strong></h2><p>é¢˜ç›®é“¾æ¥:<a class="link"   href="https://leetcode-cn.com/problems/binary-tree-right-side-view/" >https://leetcode-cn.com/problems/binary-tree-right-side-view/<i class="fas fa-external-link-alt"></i></a></p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥:Â [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,null,<span class="number">5</span>,null,<span class="number">4</span>]</span><br><span class="line">è¾“å‡º:Â [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">è§£é‡Š:</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>            &lt;-<span class="comment">--</span></span><br><span class="line"> /   \</span><br><span class="line"><span class="number">2</span>     <span class="number">3</span>         &lt;-<span class="comment">--</span></span><br><span class="line"> \     \</span><br><span class="line">  <span class="number">5</span>     <span class="number">4</span>       &lt;-<span class="comment">--</span></span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol><li><p>å±‚åºéå†çš„æ—¶å€™ï¼Œ</p></li><li><p><code>åˆ¤æ–­æ˜¯å¦éå†åˆ°å•å±‚çš„æœ€åé¢çš„å…ƒç´ </code> (é‡ç‚¹åˆ†æ å¯¹æ¯ä¸€å±‚qçš„æ•°ç»„è¿›è¡Œwhile lenâ€“æ“ä½œ)</p></li><li><p>å¦‚æœæ˜¯ï¼Œå°±æ”¾è¿›resultæ•°ç»„ä¸­ï¼Œéšåè¿”å›result å°±å¯ä»¥äº†ã€‚</p></li></ol><h3 id="å›¾è§£-1"><a href="#å›¾è§£-1" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102211523112642021022115.png"                      alt="image-20210221152311264" style="zoom:80%;"                 ></p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rightSideView = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!root) <span class="keyword">return</span> []</span><br><span class="line">   <span class="keyword">const</span> q = [root]</span><br><span class="line">   <span class="keyword">const</span> res = []</span><br><span class="line">    <span class="keyword">while</span>(q.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> len = q.length</span><br><span class="line">        <span class="comment">//å¯¹æ¯ä¸€å±‚è¿›è¡Œéå† [1]  [2,3 ]  [4,5,6]   [7]</span></span><br><span class="line">        <span class="keyword">while</span>(len)&#123;</span><br><span class="line">          <span class="keyword">let</span> n = q.shift()</span><br><span class="line">            <span class="comment">//æ¯ä¸€å±‚æœ€åä¸€ä½</span></span><br><span class="line">            <span class="keyword">if</span>(len === <span class="number">1</span>) res.push(n.val)</span><br><span class="line">            <span class="keyword">if</span>(n.left) q.push(n.left)</span><br><span class="line">            <span class="keyword">if</span>(n.right) q.push(n.right)</span><br><span class="line">            len--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="637-äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼"><a href="#637-äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼" class="headerlink" title="637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼"></a>637.<strong>äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</strong></h2><p>é¢˜ç›®é“¾æ¥:<a class="link"   href="https://leetcode-cn.com/problems/average-of-levels-in-binary-tree/" >https://leetcode-cn.com/problems/average-of-levels-in-binary-tree/<i class="fas fa-external-link-alt"></i></a></p><p>ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘, è¿”å›ä¸€ä¸ªç”±æ¯å±‚èŠ‚ç‚¹å¹³å‡å€¼ç»„æˆçš„æ•°ç»„ã€‚</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line"> <span class="number"> 9 </span> 20</span><br><span class="line">    /  \</span><br><span class="line">  <span class="number"> 15 </span>  7</span><br><span class="line">è¾“å‡ºï¼š[3, 14.5, 11]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç¬¬<span class="number"> 0 </span>å±‚çš„å¹³å‡å€¼æ˜¯<span class="number"> 3 </span>,  ç¬¬1å±‚æ˜¯ 14.5 , ç¬¬2å±‚æ˜¯<span class="number"> 11 </span>ã€‚å› æ­¤è¿”å› [3, 14.5, 11] ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol><li><p>ç”¨å±‚åºéå†çš„æ–¹æ³•ã€‚ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—å»éå†èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨ for å¾ªç¯æ§åˆ¶ä¸€å±‚çš„èŠ‚ç‚¹é€ä¸ªå‡ºåˆ—ï¼ŒèŠ‚ç‚¹å€¼ç´¯åŠ æ±‚å’Œã€‚</p></li><li><p>èŠ‚ç‚¹å‡ºåˆ—çš„åŒæ—¶ï¼Œä¸‹ä¸€å±‚çš„å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œåœ¨ for å¾ªç¯ç»“æŸæ—¶ï¼Œé˜Ÿåˆ—ä¸­å°±å…¨æ˜¯ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ã€‚</p></li><li><p>æ­¤æ—¶å½“å‰å±‚çš„æ±‚å’Œä¹Ÿå¥½äº†ï¼Œé™¤ä»¥å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œå°±æ˜¯å½“å‰å±‚çš„å¹³å‡å€¼ï¼ŒåŠ å…¥ç»“æœæ•°ç»„ã€‚</p></li><li><p>æ¥ç€å¤„ç†ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œå°±æ„å»ºå¥½äº†ç»“æœæ•°ç»„ã€‚</p></li></ol><h3 id="å›¾è§£-2"><a href="#å›¾è§£-2" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2021-02-21%2015.56.07-38942632021022115.gif"                      alt="2021-02-21 15.56.07"                ></p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> averageOfLevels = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> []</span><br><span class="line">    <span class="keyword">const</span> p = [root]</span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(p.length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> size = p.length <span class="comment">//æ¯ä¸€å±‚çš„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;size;i++)&#123;</span><br><span class="line">             <span class="keyword">const</span> n = p.shift()</span><br><span class="line">              <span class="comment">//æ¯ä¸€å±‚çš„æ€»å’Œ</span></span><br><span class="line">              sum += n.val</span><br><span class="line">             <span class="keyword">if</span>(n.left) p.push(n.left)</span><br><span class="line">             <span class="keyword">if</span>(n.right) p.push(n.right)</span><br><span class="line">        &#125;</span><br><span class="line">        res.push(sum/size)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="429-Nå‰æ ‘çš„å±‚åºéå†"><a href="#429-Nå‰æ ‘çš„å±‚åºéå†" class="headerlink" title="429.Nå‰æ ‘çš„å±‚åºéå†"></a>429.N<strong>å‰æ ‘çš„å±‚åºéå†</strong></h2><p>é¢˜ç›®é“¾æ¥:<a class="link"   href="https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/" >https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/<i class="fas fa-external-link-alt"></i></a> </p><p>ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ã€‚ (å³ä»å·¦åˆ°å³ï¼Œé€å±‚éå†)ã€‚</p><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><h3 id="å›¾è§£-3"><a href="#å›¾è§£-3" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">   <span class="keyword">const</span> p = [root]</span><br><span class="line">   <span class="keyword">const</span> res = []</span><br><span class="line">   <span class="keyword">while</span>(p.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> size = p.length</span><br><span class="line">      <span class="keyword">const</span> temp = []</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; size;i++)&#123;</span><br><span class="line">          <span class="keyword">const</span> n = p.shift()</span><br><span class="line">          temp.push(n.val)</span><br><span class="line">          p.push(...n.children)</span><br><span class="line">      &#125;</span><br><span class="line">     res.push(temp)</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„å…ˆä¸­åå±‚åºéå†</title>
      <link href="2021/02/20/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%85%88%E4%B8%AD%E5%90%8E%E9%81%8D%E5%8E%86/"/>
      <url>2021/02/20/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%85%88%E4%B8%AD%E5%90%8E%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>äºŒå‰æ ‘çš„å››ç§éå†æ–¹å¼ï¼šå…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ã€å±‚åºéå†ã€‚</p><a id="more"></a><h3 id="æ¨¡æ‹Ÿä¸€æ£µäºŒå‰æ ‘"><a href="#æ¨¡æ‹Ÿä¸€æ£µäºŒå‰æ ‘" class="headerlink" title="æ¨¡æ‹Ÿä¸€æ£µäºŒå‰æ ‘"></a>æ¨¡æ‹Ÿä¸€æ£µäºŒå‰æ ‘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.root = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  left: &#123;</span><br><span class="line">    val: <span class="number">2</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">      val: <span class="number">4</span>,</span><br><span class="line">      left: <span class="literal">null</span>,</span><br><span class="line">      right: <span class="literal">null</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">      val: <span class="number">5</span>,</span><br><span class="line">      left: <span class="literal">null</span>,</span><br><span class="line">      right: <span class="literal">null</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  right: &#123;</span><br><span class="line">    val: <span class="number">3</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">      val: <span class="number">6</span>,</span><br><span class="line">      left: <span class="literal">null</span>,</span><br><span class="line">      right: <span class="literal">null</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">      val: <span class="number">7</span>,</span><br><span class="line">      left: <span class="literal">null</span>,</span><br><span class="line">      right: <span class="literal">null</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å…ˆåºéå†ç®—æ³•å£è¯€"><a href="#å…ˆåºéå†ç®—æ³•å£è¯€" class="headerlink" title="å…ˆåºéå†ç®—æ³•å£è¯€"></a>å…ˆåºéå†ç®—æ³•å£è¯€</h3><ol><li>è®¿é—®æ ¹èŠ‚ç‚¹</li><li>å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œå…ˆåºéå†</li><li>å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå†</li></ol><h3 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102210004234802021022100.png"                      alt="image-20210221000423480" style="zoom:50%;"                 ></p><h2 id="å…ˆåºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"><a href="#å…ˆåºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰" class="headerlink" title="å…ˆåºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"></a>å…ˆåºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> preorder = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(root)&#123;</span><br><span class="line">     <span class="comment">//éå†å·¦èŠ‚ç‚¹</span></span><br><span class="line">     preorder(root.left)</span><br><span class="line">     <span class="comment">//éå†å³èŠ‚ç‚¹</span></span><br><span class="line">     preorder(root.right)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…ˆåºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"><a href="#å…ˆåºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰" class="headerlink" title="å…ˆåºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"></a>å…ˆåºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰</h2><blockquote><p>æ€è·¯ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¿­ä»£çš„æ–¹å¼å®ç°æ–¹æ³•ä¸€çš„é€’å½’å‡½æ•°ï¼Œä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼ŒåŒºåˆ«åœ¨äºé€’å½’çš„æ—¶å€™éšå¼åœ°ç»´æŠ¤äº†ä¸€ä¸ªæ ˆï¼Œè€Œæˆ‘ä»¬åœ¨è¿­ä»£çš„æ—¶å€™éœ€è¦æ˜¾å¼åœ°å°†è¿™ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ¥ï¼Œå…¶ä½™çš„å®ç°ä¸ç»†èŠ‚éƒ½ç›¸åŒ</p></blockquote><h3 id="å›¾è§£-1"><a href="#å›¾è§£-1" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2021-02-21%2000.19.152021022100.gif"                      alt="2021-02-21 00.19.15"                ></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol><li><p>å‰åºéå†æ˜¯ä¸­å·¦å³ï¼Œæ¯æ¬¡å…ˆå¤„ç†çš„æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆå°†<strong><em>è·ŸèŠ‚ç‚¹</em></strong>æ”¾å…¥æ ˆä¸­ï¼Œ</p></li><li><p>ç„¶åå°†å³èŠ‚ç‚¹åŠ å…¥æ ˆï¼Œå†åŠ å…¥å·¦èŠ‚ç‚¹ã€‚</p></li><li><p>ä¸ºä»€ä¹ˆè¦å…ˆåŠ å…¥ å³èŠ‚ç‚¹ï¼Œå†åŠ å…¥å·¦èŠ‚ç‚¹å‘¢ï¼Ÿ å› ä¸ºè¿™æ ·å‡ºæ ˆçš„æ—¶å€™æ‰æ˜¯ä¸­å·¦å³çš„é¡ºåºã€‚</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> preorder = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">const</span> stack = [root]</span><br><span class="line">  <span class="keyword">while</span>(stack.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">   <span class="keyword">const</span> n = stack.pop()</span><br><span class="line">  <span class="comment">//æ‹¿åˆ°n.val</span></span><br><span class="line">  <span class="keyword">if</span>(n.right) stack.push(n.right) <span class="comment">//ä¸ºä»€ä¹ˆè¦å…ˆå­˜rightå€¼ å› ä¸ºæ•°ç»„åè¿›å…ˆå‡º</span></span><br><span class="line">  <span class="keyword">if</span>(n.left) stack.push(n.left)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åºéå†ç®—æ³•å£è¯€"><a href="#ä¸­åºéå†ç®—æ³•å£è¯€" class="headerlink" title="ä¸­åºéå†ç®—æ³•å£è¯€"></a>ä¸­åºéå†ç®—æ³•å£è¯€</h3><ol><li>å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œä¸­åºéå†</li><li>è®¿é—®æ ¹èŠ‚ç‚¹</li><li>å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå†</li></ol><h3 id="å›¾è§£-2"><a href="#å›¾è§£-2" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102210007115022021022100.png"                      alt="image-20210221000711502" style="zoom:50%;"                 ></p><h2 id="ä¸­åºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"><a href="#ä¸­åºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰" class="headerlink" title="ä¸­åºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"></a>ä¸­åºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inorderTraversal = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> midSort = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">     midSort(root.left)</span><br><span class="line">     res.push(root.val)</span><br><span class="line">     midSort(root.right)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> midSort(root)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸­åºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"><a href="#ä¸­åºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰" class="headerlink" title="ä¸­åºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"></a>ä¸­åºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰</h2><h3 id="å›¾è§£-3"><a href="#å›¾è§£-3" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2021-02-21%2000.42.122021022100.gif"                      alt="2021-02-21 00.42.12"                ></p><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ä¸­åºéå†æ˜¯<code>å·¦ä¸­å³</code>ï¼Œå…ˆè®¿é—®çš„æ˜¯äºŒå‰æ ‘é¡¶éƒ¨çš„èŠ‚ç‚¹ï¼Œç„¶åä¸€å±‚ä¸€å±‚å‘ä¸‹è®¿é—®ã€‚</p><p>ç›´åˆ°åˆ°è¾¾æ ‘å·¦é¢çš„æœ€åº•éƒ¨ï¼Œå†å¼€å§‹å¤„ç†èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯åœ¨æŠŠèŠ‚ç‚¹çš„æ•°å€¼æ”¾è¿›resultæ•°ç»„ä¸­ï¼‰ï¼Œè¿™å°±é€ æˆäº†å¤„ç†é¡ºåºå’Œè®¿é—®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inorderTraversal = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">   <span class="keyword">let</span> stack = []  <span class="comment">//è®¾ç½®ä¸€ä¸ªç©ºæ ˆ</span></span><br><span class="line">   <span class="keyword">let</span> p = root <span class="comment">//è®¾ç½®æŒ‡</span></span><br><span class="line">   <span class="keyword">while</span>(stack.length || p)&#123;</span><br><span class="line">      <span class="comment">/*****ä¸€ç›´æ‰¾å·¦èŠ‚ç‚¹****/</span>            </span><br><span class="line">       <span class="keyword">while</span>(p)&#123;</span><br><span class="line">          stack.push(p) <span class="comment">//æ¯å½“å·¦å­æ ‘æœ‰å€¼ [root left left left]</span></span><br><span class="line">          p = p.left</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="comment">/*****ä¸€ç›´æ‰¾å·¦èŠ‚ç‚¹****/</span></span><br><span class="line">    <span class="comment">//æ‰¾å®Œæ‰€æœ‰å·¦èŠ‚ç‚¹ æ¨å‡ºæ ˆ [root left1 left2 left3] ==&gt; [left3 left2 left1 root ]</span></span><br><span class="line">    <span class="keyword">const</span> n = stack.pop()</span><br><span class="line">    <span class="comment">//æ‹¿n.val</span></span><br><span class="line">    p = n.right</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ååºéå†ç®—æ³•å£è¯€"><a href="#ååºéå†ç®—æ³•å£è¯€" class="headerlink" title="ååºéå†ç®—æ³•å£è¯€"></a>ååºéå†ç®—æ³•å£è¯€</h3><ol><li>å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œä¸­åºéå†</li><li>å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå†</li><li>è®¿é—®æ ¹èŠ‚ç‚¹</li></ol><h3 id="å›¾è§£-4"><a href="#å›¾è§£-4" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102210008331602021022100.png"                      alt="image-20210221000833160" style="zoom:50%;"                 ></p><h2 id="ååºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"><a href="#ååºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰" class="headerlink" title="ååºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"></a>ååºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = []</span><br><span class="line"><span class="keyword">const</span> postorderTraversal = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">  postorderTraversal(root.left)</span><br><span class="line">  postorderTraversal(root.right)</span><br><span class="line">  res.push(root.val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ååºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"><a href="#ååºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰" class="headerlink" title="ååºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰"></a>ååºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰</h2><h3 id="æ€è·¯ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¨å·§çš„åŠæ³•ï¼‰"><a href="#æ€è·¯ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¨å·§çš„åŠæ³•ï¼‰" class="headerlink" title="æ€è·¯ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¨å·§çš„åŠæ³•ï¼‰"></a>æ€è·¯ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¨å·§çš„åŠæ³•ï¼‰</h3><ol><li>å¦‚æœæˆ‘ä»¬æŠŠå‰åºéå†çš„ list.push(node.val) å˜æ›´ä¸º list.unshift(node.val) ï¼ˆéå†ç»“æœé€†åºï¼‰ï¼Œ</li><li>é‚£ä¹ˆéå†é¡ºåºå°±ç”± æ ¹å·¦å³ å˜æ›´ä¸º å³å·¦æ ¹ã€‚</li><li>ç„¶åæˆ‘ä»¬ä»…éœ€å°† å³å·¦æ ¹ å˜æ›´ä¸º <code>å·¦å³æ ¹</code> å³å¯å®Œæˆååºé</li></ol><h3 id="å›¾è§£-5"><a href="#å›¾è§£-5" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102211144390252021022111.png"                      alt="image-20210221114439025"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2021-02-21%2012.18.14-tuya2021022113.gif"                      alt="2021-02-21 12.18.14-tuya"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postorderTraversal = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> list = [] <span class="comment">//éå†ç»“æœ</span></span><br><span class="line">    <span class="keyword">let</span> stack = [root] <span class="comment">//</span></span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">     <span class="keyword">while</span>(stack.length &gt;<span class="number">0</span>)&#123;</span><br><span class="line">       <span class="keyword">const</span> n = stack.pop() <span class="comment">// [n.left,n.right]</span></span><br><span class="line">       list.unshift(n.val) <span class="comment">//æ ¹æ˜¯æœ€ååŠ çš„ æœ€é‡Œé¢  [ n.left  n.right  n.val]</span></span><br><span class="line">       <span class="keyword">if</span>(n.left) stack.push(n.left)</span><br><span class="line">       <span class="keyword">if</span>(n.right) stack.push(n.right)</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">return</span> list</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å±‚åºéå†"><a href="#å±‚åºéå†" class="headerlink" title="å±‚åºéå†"></a>å±‚åºéå†</h2><blockquote><p>é¢˜ç›®æ¥æºï¼šLeetCodeï¼š102 äºŒå‰æ ‘çš„å±‚åºéå†</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202102211313433592021022113.png"                      alt="image-20210221131343359" style="zoom: 80%;"                 ></p><p>ğŸ‘‘ç±»ä¼¼å¹¿åº¦ä¼˜å…ˆéå†äºŒå‰æ ‘ã€‚</p><p>ğŸ‘‘éå†å·¥ç¨‹ä¸­ï¼Œè®°å½•<code>æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å±‚çº§</code>ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸åŒçš„æ•°ç»„ä¸­ã€‚</p><h3 id="å›¾è§£-6"><a href="#å›¾è§£-6" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/%E5%B1%82%E5%BA%8F2021022113.gif"                      alt="å±‚åº"                ></p><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å…ˆå†™ä¸€ä¸ªå¹¿åº¦ä¼˜å…ˆéå†</p><p>åŠ å…¥å±‚çº§è®¡ç®—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> []</span><br><span class="line">    <span class="keyword">const</span> q = [[root,<span class="number">0</span>]] <span class="comment">//æŠŠé¡¶å±‚åŠ å…¥æ ˆä¸­</span></span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(q.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="comment">//æ¨å‡ºæ¯ä¸€ä¸ªæ ˆä¸­é¡¶å±‚èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">const</span> [n,level]= q.shift()</span><br><span class="line">      <span class="keyword">if</span>(!res[level])&#123;</span><br><span class="line">          res.push([n.val])</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         res[level].push(n.val)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//å¦‚æœå·¦å³èŠ‚ç‚¹éƒ½å­˜åœ¨åˆ™å±‚çº§+1</span></span><br><span class="line">      <span class="keyword">if</span>(n.left) q.push([n.left,level+<span class="number">1</span>])</span><br><span class="line">      <span class="keyword">if</span>(n.right) q.push([n.right,level+<span class="number">1</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†</title>
      <link href="2021/02/19/%E7%AE%97%E6%B3%95-%E6%B7%B1%E5%BA%A6%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/"/>
      <url>2021/02/19/%E7%AE%97%E6%B3%95-%E6%B7%B1%E5%BA%A6%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>å…ˆæ¥å­¦ä¸€ä¸‹æ ‘çš„æ·±åº¦ä¸å¹¿åº¦ä¼˜å…ˆ</p><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021022017image-20210220170016966.png"                      alt="image-20210220170016966"                 ></p><h2 id="æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€"><a href="#æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€" class="headerlink" title="æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€"></a>æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€</h2><p>1.è®¿é—®æ ¹èŠ‚ç‚¹</p><p>2.å¯¹æ ¹èŠ‚ç‚¹chilidrenæŒ¨ä¸ªè¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†ï¼ˆé€’å½’ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dfs.js</span></span><br><span class="line"><span class="keyword">const</span> root = &#123;</span><br><span class="line">  val: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      val: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          val: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">          children: [],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          val: <span class="string">&#x27;d&#x27;</span>,</span><br><span class="line">          children: [],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      val: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          val: <span class="string">&#x27;f&#x27;</span>,</span><br><span class="line">          children: [],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          val: <span class="string">&#x27;g&#x27;</span>,</span><br><span class="line">          children: [],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="dfs"><a href="#dfs" class="headerlink" title="dfs"></a>dfs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dfs = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">   root.chilidren.forEach(dfs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€è¡Œä»£ç   æ˜¯ä¸æ˜¯å¾ˆç®€å•</p></blockquote><h2 id="å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€"><a href="#å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€"></a>å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021022017image-20210220170917519.png"                      alt="image-20210220170917519"                ></p><h3 id="bfs"><a href="#bfs" class="headerlink" title="bfs"></a>bfs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bfs = <span class="function">(<span class="params">root</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="comment">//æ–°å»ºé˜Ÿåˆ— å…¥é˜Ÿ</span></span><br><span class="line">   <span class="keyword">const</span> q = [root]</span><br><span class="line">   <span class="keyword">while</span>(q.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">       <span class="comment">//æŠŠé˜Ÿå¤´å‡ºé˜Ÿå qå°±ç©ºäº†</span></span><br><span class="line">       <span class="keyword">const</span> n = q.shift()</span><br><span class="line">       <span class="comment">//è¿™é‡Œå¯ä»¥æ‹¿åˆ°n.val,ç»§ç»­éå†children</span></span><br><span class="line">       n.children.forEach(<span class="function"><span class="params">child</span> =&gt;</span>&#123;</span><br><span class="line">           q.push(child)</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ ‘çš„éå†æ–¹å¼æ€»ä½“åˆ†ä¸ºä¸¤ç±»ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ï¼›</p><p>å¸¸è§çš„ DFS ï¼š å…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ï¼›<br>å¸¸è§çš„ BFS ï¼š å±‚åºéå†ï¼ˆå³æŒ‰å±‚éå†ï¼‰ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•å…¥é—¨æŒ‡å—</title>
      <link href="2021/02/18/%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8/"/>
      <url>2021/02/18/%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„é¢„ç®—æ³•:</p><p>æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨ã€äºŒå‰æ ‘ã€å †ã€è·³è¡¨ã€å›¾ã€Tire æ ‘<br>ç®—æ³•ï¼š é€’å½’ã€æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢ã€å“ˆå¸Œç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€å›æº¯ç®—æ³•ã€åŠ¨æ€è§„åˆ’ã€å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</p><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021022014image-20210220143950354.png"                      alt="image-20210220143950354"                ></p><h2 id="ç®—æ³•å¤æ‚åº¦"><a href="#ç®—æ³•å¤æ‚åº¦" class="headerlink" title="ç®—æ³•å¤æ‚åº¦"></a>ç®—æ³•å¤æ‚åº¦</h2><p>å¤æ‚åº¦åˆ†ææ³•åˆ™<br>1ï¼‰å•æ®µä»£ç çœ‹é«˜é¢‘ï¼šæ¯”å¦‚å¾ªç¯ã€‚<br>2ï¼‰å¤šæ®µä»£ç å–æœ€å¤§ï¼šæ¯”å¦‚ä¸€æ®µä»£ç ä¸­æœ‰å•å¾ªç¯å’Œå¤šé‡å¾ªç¯ï¼Œé‚£ä¹ˆå–å¤šé‡å¾ªç¯çš„å¤æ‚åº¦ã€‚<br>3ï¼‰åµŒå¥—ä»£ç æ±‚ä¹˜ç§¯ï¼šæ¯”å¦‚é€’å½’ã€å¤šé‡å¾ªç¯ç­‰<br>4ï¼‰å¤šä¸ªè§„æ¨¡æ±‚åŠ æ³•ï¼šæ¯”å¦‚æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°æ§åˆ¶ä¸¤ä¸ªå¾ªç¯çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆè¿™æ—¶å°±å–äºŒè€…å¤æ‚åº¦ç›¸åŠ ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><h4 id="O-1"><a href="#O-1" class="headerlink" title="O(1)"></a>O(1)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">i += <span class="number">1</span>;</span><br><span class="line"><span class="comment">//æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡</span></span><br></pre></td></tr></table></figure><h4 id="O-n"><a href="#O-n" class="headerlink" title="O(n)"></a>O(n)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-n-2"><a href="#O-n-2" class="headerlink" title="O(n^2)"></a>O(n^2)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i, j);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-logN"><a href="#O-logN" class="headerlink" title="O(logN)"></a>O(logN)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span>(i&lt; n)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">   i*=<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">2</span>çš„å¤šå°‘æ¬¡æ–¹ === N</span><br></pre></td></tr></table></figure><h3 id="ç©ºé—´å¤æ‚åº¦"><a href="#ç©ºé—´å¤æ‚åº¦" class="headerlink" title="ç©ºé—´å¤æ‚åº¦"></a>ç©ºé—´å¤æ‚åº¦</h3><blockquote><p>ç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦</p></blockquote><h4 id="0-1"><a href="#0-1" class="headerlink" title="0(1)"></a>0(1)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">i += <span class="number">1</span>;</span><br><span class="line"><span class="comment">//å£°æ˜äº†å•ä¸ªå˜é‡  å ç”¨å†…å­˜å°±æ˜¯1</span></span><br></pre></td></tr></table></figure><h4 id="O-n-1"><a href="#O-n-1" class="headerlink" title="O(n)"></a>O(n)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">  res.push(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//resçš„ç©ºé—´å ç”¨ å–å†³äº n</span></span><br></pre></td></tr></table></figure><h4 id="O-n-2-1"><a href="#O-n-2-1" class="headerlink" title="O(n^2)"></a>O(n^2)</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">  res.push(i);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">    res[i].push(j);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ç±»ä¼¼äºä¸€ä¸ªçŸ©é˜µ---- - å¤šç»´æ•°ç»„;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–æ¦‚å¿µ"><a href="#å…¶ä»–æ¦‚å¿µ" class="headerlink" title="å…¶ä»–æ¦‚å¿µ"></a>å…¶ä»–æ¦‚å¿µ</h2><h3 id="ä»€ä¹ˆæ˜¯çº¿æ€§"><a href="#ä»€ä¹ˆæ˜¯çº¿æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿æ€§"></a>ä»€ä¹ˆæ˜¯çº¿æ€§</h3><p>çº¿æ€§è¡¨: çº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„.æ¯ä¸ªç°è¡Œè¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘.å¸¸è§çš„çº¿æ€§è¡¨ç»“æ„ï¼šæ•°ç»„ï¼Œé“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆç­‰ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021022014image-20210220145243033.png"                      alt="image-20210220145243033"                ></p><h3 id="ä»€ä¹ˆæ˜¯éçº¿æ€§"><a href="#ä»€ä¹ˆæ˜¯éçº¿æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯éçº¿æ€§"></a>ä»€ä¹ˆæ˜¯éçº¿æ€§</h3><p>é€’å½’ï¼šæ¯”å¦‚äºŒå‰æ ‘éå†å°±æ˜¯å…¸å‹çš„éçº¿æ€§éå†ç»“æ„</p><h2 id="åˆ·é¢˜æŒ‡å—"><a href="#åˆ·é¢˜æŒ‡å—" class="headerlink" title="åˆ·é¢˜æŒ‡å—"></a>åˆ·é¢˜æŒ‡å—</h2><blockquote><p>æ•°æ®ç»“æ„æ˜¯å·¥å…·ï¼Œç®—æ³•æ˜¯é€šè¿‡åˆé€‚çš„å·¥å…·è§£å†³ç‰¹å®šé—®é¢˜çš„åŠæ³•</p></blockquote><p><strong>å…ˆåˆ·äºŒå‰æ ‘ï¼Œå…ˆåˆ·äºŒå‰æ ‘ï¼Œå…ˆåˆ·äºŒå‰æ ‘ï¼Œ</strong></p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å› ä¸ºäºŒå‰æ ‘æ˜¯æœ€å®¹æ˜“åŸ¹å…»æ¡†æ¶æ€ç»´çš„ï¼Œè€Œä¸”å¤§éƒ¨åˆ†å¸¸è€ƒç®—æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯æ ‘çš„éå†é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-nextTickåŸç†</title>
      <link href="2020/12/15/Vue-nextTick%E5%8E%9F%E7%90%86/"/>
      <url>2020/12/15/Vue-nextTick%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>1.äº†è§£nextTickçš„å®ç°åŸç†</p><p>2.äº†è§£æ•°æ®å˜åŒ–åˆ°DOMçš„å˜åŒ–æ˜¯å¼‚æ­¥è¿‡ç¨‹</p><a id="more"></a><h2 id="å…ˆäº†è§£ä¸‹å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#å…ˆäº†è§£ä¸‹å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="å…ˆäº†è§£ä¸‹å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>å…ˆäº†è§£ä¸‹å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h2><table><thead><tr><th><strong>å¸¸è§**</strong>å®ä»»åŠ¡**</th><th>setTimeout  setInterval  setImmediate    script    MessageChannel</th></tr></thead><tbody><tr><td><strong>å¸¸è§**</strong>å¾®ä»»åŠ¡**</td><td>Promise    MutationObserver        Object.observe(åºŸå¼ƒ)      process.nextTickï¼ˆnodeï¼‰</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.nextTick = nextTick; <span class="comment">//èµ‹å€¼ç»™å¤§Vueçš„é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment">//å…¨å±€æŒ‚è½½</span></span><br><span class="line"> Vue.prototype.$nextTick = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> nextTick(fn, <span class="built_in">this</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæŸ¥çœ‹æ˜¯å¦æµè§ˆå™¨æ”¯æŒ<code>setImmediate</code>è¿˜æœ‰<code>Promise</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Promise</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; isNative(<span class="built_in">Promise</span>)) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="built_in">Promise</span>.resolve();</span><br><span class="line">  timerFunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    p.then(flushCallbacks);</span><br><span class="line">    <span class="keyword">if</span> (isIOS) &#123; <span class="built_in">setTimeout</span>(noop); &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  isUsingMicroTask = <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isIE &amp;&amp; <span class="keyword">typeof</span> MutationObserver !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; (</span><br><span class="line">  isNative(MutationObserver) ||</span><br><span class="line">  <span class="comment">// PhantomJS and iOS 7.x</span></span><br><span class="line">  MutationObserver.toString() === <span class="string">&#x27;[object MutationObserverConstructor]&#x27;</span></span><br><span class="line">)) &#123;</span><br><span class="line">  <span class="comment">// Use MutationObserver where native Promise is not available,</span></span><br><span class="line">  <span class="comment">// e.g. PhantomJS, iOS7, Android 4.4</span></span><br><span class="line">  <span class="comment">// (#6466 MutationObserver is unreliable in IE11)</span></span><br><span class="line">  <span class="keyword">var</span> counter = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> observer = <span class="keyword">new</span> MutationObserver(flushCallbacks);</span><br><span class="line">  <span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(<span class="built_in">String</span>(counter));</span><br><span class="line">  observer.observe(textNode, &#123;</span><br><span class="line">    characterData: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">  timerFunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    counter = (counter + <span class="number">1</span>) % <span class="number">2</span>;</span><br><span class="line">    textNode.data = <span class="built_in">String</span>(counter);</span><br><span class="line">  &#125;;</span><br><span class="line">  isUsingMicroTask = <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> setImmediate !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; isNative(setImmediate)) &#123;</span><br><span class="line">  <span class="comment">// Fallback to setImmediate.</span></span><br><span class="line">  <span class="comment">// Technically it leverages the (macro) task queue,</span></span><br><span class="line">  <span class="comment">// but it is still a better choice than setTimeout.</span></span><br><span class="line">  timerFunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setImmediate(flushCallbacks);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// Fallback to setTimeout.</span></span><br><span class="line">  timerFunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(flushCallbacks, <span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> callbacks = [] <span class="comment">//ç¼“å­˜è¿›æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextTick</span> (<span class="params">cb, ctx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _resolve;</span><br><span class="line">  callbacks.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        cb.call(ctx);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        handleError(e, ctx, <span class="string">&#x27;nextTick&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_resolve) &#123;</span><br><span class="line">      _resolve(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (!pending) &#123;</span><br><span class="line">    pending = <span class="literal">true</span>;</span><br><span class="line">    timerFunc();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å¦‚æœæ²¡æœ‰ä¼ cb  åˆ™è¿”å›promise å¯ä»¥æ¥.thenï¼ˆï¼‰æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (!cb &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">Promise</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">      _resolve = resolve;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡åˆ¤æ–­ <code>pending</code> æ¥ç¡®å®šæ˜¯å¦éœ€è¦æ³¨å†Œå®å¾®ä»»åŠ¡ ã€‚</p><p>å½“ç¬¬ä¸€æ¬¡æ³¨å†Œçš„æ—¶å€™ï¼ŒæŠŠ <code>pending</code> è®¾ç½®ä¸º <code>true</code>ï¼Œè¡¨ç¤ºä»»åŠ¡é˜Ÿåˆ—å·²ç»åœ¨å¼€å§‹äº†ï¼ŒåŒä¸€æ—¶æœŸå†…æ— éœ€æ³¨å†Œäº†</p><p>ç„¶ååœ¨ ä»»åŠ¡é˜Ÿåˆ— æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†æŠŠ pending è®¾ç½®ä¸º <code>false</code>ï¼ˆåœ¨ <code>flushCallbacks</code> ä¸­ï¼‰</p><h2 id="flushCallbacks"><a href="#flushCallbacks" class="headerlink" title="flushCallbacks"></a>flushCallbacks</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> callbacks = [];</span><br><span class="line"><span class="keyword">var</span> pending = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flushCallbacks</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  pending = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> copies = callbacks.slice(<span class="number">0</span>);</span><br><span class="line">  callbacks.length = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; copies.length; i++) &#123;</span><br><span class="line">    copies[i]();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä»»åŠ¡å’Œ å¾®ä»»åŠ¡ çš„å›è°ƒï¼Œéƒ½æ˜¯æ‰§è¡Œè¿™ä¸ª flushCallbacksï¼Œè¿™ä¸ªæ–¹æ³•ä½œç”¨ï¼š</p><p>1ã€å¤åˆ¶ä¸€é callbacks </p><p>2ã€æŠŠ åŸæ¥ callbacks æ¸…ç©º</p><p>3ã€éå† å¤åˆ¶çš„ callbacks ï¼Œç„¶åé€ä¸ªæ‰§è¡Œ</p><h2 id="ä¸€ä¸ªæœ‰æ„æ€çš„å°æµ‹è¯•"><a href="#ä¸€ä¸ªæœ‰æ„æ€çš„å°æµ‹è¯•" class="headerlink" title="ä¸€ä¸ªæœ‰æ„æ€çš„å°æµ‹è¯•"></a>ä¸€ä¸ªæœ‰æ„æ€çš„å°æµ‹è¯•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  retrun &#123;</span><br><span class="line">      msg: <span class="string">&quot;This is NextTick Page&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">change () &#123;</span><br><span class="line">      <span class="built_in">this</span>.msg = <span class="string">&quot;hello vue&quot;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;sync:&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText)   <span class="comment">// &#x27;This is NextTick Page&#x27;</span></span><br><span class="line">       <span class="built_in">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;nextTick&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText) <span class="comment">// &#x27;hello vue&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">this</span>.$nextTick().then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText) <span class="comment">// &#x27;hello vue&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">change1 () &#123;</span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;nextTick&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText) <span class="comment">// &#x27;This is NextTick Page&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">this</span>.msg = <span class="string">&quot;hello vue&quot;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;sync:&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText) <span class="comment">// &#x27;This is NextTick Page&#x27;</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick().then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>,<span class="built_in">this</span>.$refs.msg.innerText) <span class="comment">// &#x27;hello vue&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Œå› ä¸ºcallbackå‡½æ•°ä¼šä¼˜å…ˆpushè¿›å»$nextTickçš„cbå‡½æ•°ï¼Œä½†è¿™æ—¶å€™this.msgæ‰å¼€å§‹é‡æ–°èµ‹å€¼åŠ å…¥<code>flushSchedulerQueue</code>å‡½æ•°ï¼Œé‡æ–°æ¸²æŸ“æ˜¯å†åé¢ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªnextTickæ‹¿åˆ°çš„è¿˜æ˜¯æ—§çš„å€¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>nextTick</code>æ˜¯è¦æŠŠæ‰§è¡Œçš„ä»»åŠ¡æ¨å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå†ä¸‹ä¸€ä¸ªtickåŒæ­¥æ‰§è¡Œ</p><p>æ•°æ®æ”¹å˜åè§¦å‘äº†æ¸²æŸ“watcherçš„updateï¼Œä½†æ˜¯watcherçš„flushæ˜¯å†nexttIckåï¼Œæ‰€ä»¥é‡æ–°æ¸²æŸ“æ˜¯å¼‚æ­¥çš„</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-æ•°ç»„åŠ«æŒç›‘å¬åŸç†</title>
      <link href="2020/12/11/Vue-%E6%95%B0%E7%BB%84%E5%8A%AB%E6%8C%81%E7%9B%91%E5%90%AC%E5%8E%9F%E7%90%86/"/>
      <url>2020/12/11/Vue-%E6%95%B0%E7%BB%84%E5%8A%AB%E6%8C%81%E7%9B%91%E5%90%AC%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å“åº”å¼æ•°æ®ä¸­å¯¹äºå¯¹è±¡<code>æ–°å¢åˆ é™¤å±æ€§</code>åŠæ•°ç»„çš„ä¸‹æ ‡è®¿é—®ä¿®æ”¹æ ¸æ·»åŠ æ•°æ®ç­‰å˜åŒ–æ˜¯è§‚å¯Ÿä¸åˆ°çš„</p></li><li><p>é€šè¿‡Vue.setä»¥åŠæ•°ç»„çš„Apiå¯ä»¥è§£å†³è¿™äº›é—®é¢˜æœ¬è´¨ä¸Šä»–ä»¬å†…éƒ¨æ‰‹åŠ¨åšäº†ä¾èµ–æ›´æ–°çš„æ´¾å‘</p></li></ol><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆç›‘å¬ä¸äº†"><a href="#ä¸ºä»€ä¹ˆç›‘å¬ä¸äº†" class="headerlink" title="ä¸ºä»€ä¹ˆç›‘å¬ä¸äº†"></a>ä¸ºä»€ä¹ˆç›‘å¬ä¸äº†</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121009image-20201210093723350.png"                      alt="image-20201210093723350" style="zoom:50%;"                 ></p><p>ä»ä¸Šé¢ä»£ç é‡Œï¼Œé¦–å…ˆç›‘å¬äº†modelæ•°ç»„é‡Œæ‰€æœ‰çš„å±æ€§ï¼Œç„¶åé€šè¿‡å„ç§æ•°ç»„çš„æ–¹æ³•æ¥ä¿®æ”¹å½“å‰æ•°ç»„ï¼Œå¾—å‡ºä»¥ä¸‹å‡ ä¸ªç»“è®ºã€‚</p><p>1ã€==ç›´æ¥ä¿®æ”¹æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ æ˜¯å¯ä»¥è¢«ç›‘å¬çš„==ã€‚</p><p>2ã€æ•°ç»„çš„æ“ä½œæ–¹æ³•å¦‚æœæ˜¯æ“ä½œå·²ç»å­˜åœ¨çš„è¢«ç›‘å¬çš„å…ƒç´ ä¹Ÿæ˜¯å¯ä»¥è§¦å‘setterè¢«ç›‘å¬çš„ã€‚</p><p>3ã€åªæœ‰pushã€lengthã€popä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•ç¡®å®ä¸èƒ½è§¦å‘setterï¼Œè¿™è·Ÿæ–¹æ³•çš„å†…éƒ¨å®ç°ä¸Object.definePropertyçš„setteré’©å­çš„è§¦å‘å®ç°æœ‰å…³ç³»ï¼Œæ˜¯è¯­è¨€å±‚é¢çš„åŸå› ã€‚</p><p>4ã€==æ”¹å˜è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸‹æ ‡çš„å€¼æ—¶ï¼Œå€¼å˜åŒ–æ˜¯ä¸èƒ½ç›‘å¬åˆ°çš„==ã€‚è¿™ä¸ªå…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸å­˜åœ¨çš„å±æ€§å½“ç„¶æ˜¯ä¸èƒ½ç›‘å¬åˆ°ï¼Œå› ä¸ºç»‘å®šç›‘å¬æ“ä½œåœ¨ä¹‹å‰å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œåæ·»åŠ çš„å…ƒç´ å±æ€§åœ¨ç»‘å®šå½“æ—¶éƒ½è¿˜æ²¡æœ‰å­˜åœ¨ï¼Œå½“ç„¶æ²¡æœ‰åŠæ³•æå‰å»ç›‘å¬å®ƒäº†ã€‚</p><p>æ‰€ä»¥ç»¼ä¸Šï¼ŒObject.definePropertyä¸èƒ½ç›‘å¬åˆ°æ•°ç»„å†…çš„å€¼å˜åŒ–çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼ŒåŒæ—¶ä¹Ÿå¾—å‡ºäº†aé—®é¢˜çš„ç­”æ¡ˆï¼Œè¯­è¨€å±‚é¢ä¸æ”¯æŒç”¨Object.definePropertyç›‘å¬ä¸å­˜åœ¨çš„æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”é€šè¿‡ä¸€äº›èƒ½é€ æˆæ•°ç»„çš„æ–¹æ³•é€ æˆæ•°ç»„æ”¹å˜ä¹Ÿä¸èƒ½ç›‘å¬åˆ°ã€‚</p><h2 id="Vueç›‘å¬Arrayä¸‰æ­¥æ›²"><a href="#Vueç›‘å¬Arrayä¸‰æ­¥æ›²" class="headerlink" title="Vueç›‘å¬Arrayä¸‰æ­¥æ›²"></a>Vueç›‘å¬Arrayä¸‰æ­¥æ›²</h2><p>ç¬¬ä¸€æ­¥ï¼šå…ˆè·å–åŸç”Ÿ Array çš„åŸå‹æ–¹æ³•ï¼Œå› ä¸ºæ‹¦æˆªåè¿˜æ˜¯éœ€è¦åŸç”Ÿçš„æ–¹æ³•å¸®æˆ‘ä»¬å®ç°æ•°ç»„çš„å˜åŒ–ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šå¯¹ Array çš„åŸå‹æ–¹æ³•ä½¿ç”¨ Object.defineProperty åšä¸€äº›æ‹¦æˆªæ“ä½œã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼š==æŠŠéœ€è¦è¢«æ‹¦æˆªçš„ Array ç±»å‹çš„æ•°æ®åŸå‹æŒ‡å‘æ”¹é€ ååŸå‹==ã€‚8888</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> arrayProto = <span class="built_in">Array</span>.prototype <span class="comment">// è·å–Arrayçš„åŸå‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">def</span> (<span class="params">obj, key</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(key); <span class="comment">// æ§åˆ¶å°è¾“å‡º push</span></span><br><span class="line">      <span class="built_in">console</span>.log(args); <span class="comment">// æ§åˆ¶å°è¾“å‡º [Array(2), 7, &quot;hello!&quot;]</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è·å–åŸç”Ÿçš„æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">let</span> original = arrayProto[key];</span><br><span class="line">      <span class="comment">// å°†å¼€å‘è€…çš„å‚æ•°ä¼ ç»™åŸç”Ÿçš„æ–¹æ³•ï¼Œä¿è¯æ•°ç»„æŒ‰ç…§å¼€å‘è€…çš„æƒ³æ³•è¢«æ”¹å˜</span></span><br><span class="line">      <span class="keyword">const</span> result = original.apply(<span class="built_in">this</span>, args);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// do something æ¯”å¦‚é€šçŸ¥Vueè§†å›¾è¿›è¡Œæ›´æ–°</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘çš„æ•°æ®è¢«æ”¹å˜äº†ï¼Œè§†å›¾è¯¥æ›´æ–°å•¦&#x27;</span>);</span><br><span class="line">      <span class="built_in">this</span>.text = <span class="string">&#x27;hello Vue&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°çš„åŸå‹</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="function"><span class="title">push</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡å†™èµ‹å€¼</span></span><br><span class="line">def(obj, <span class="string">&#x27;push&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹çš„æŒ‡å‘é‡å†™</span></span><br><span class="line">arr.__proto__ = obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œpush</span></span><br><span class="line">arr.push([<span class="number">1</span>, <span class="number">2</span>], <span class="number">7</span>, <span class="string">&#x27;hello!&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure><p>é‚£å¿…é¡»æƒ³ä¸ªåŠæ³•â€“æ‹¦æˆªå™¨è¦†ç›–Array.prototypeã€‚</p><blockquote><p>é€šè¿‡Vue.setå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬è´¨ä¸Šå†…éƒ¨æ‰‹åŠ¨å»åšäº†==ä¾èµ–æ›´æ–°çš„æ´¾å‘==</p></blockquote><h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><blockquote><p>Arrayåœ¨<code>getter</code>ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨æ‹¦æˆªå™¨ä¸­è§¦å‘ä¾èµ–</p></blockquote><p>æœ€åï¼Œæ›´æ–°åŠ«æŒæ•°ç»„å®ä¾‹çš„åŸå‹ï¼Œåœ¨ ES6 ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨ç§æœ‰å±æ€§ proto æŒ‡å®šåŸå‹ï¼Œä¹‹åï¼Œä¾¿å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.setPrototypeOf(arr, injackingPrototype)</span><br></pre></td></tr></table></figure><p>æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå…¶ä¸‹æ ‡å®é™…ä¸Šå°±æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ˜¯å¯ä»¥é‡‡ç”¨ Object.defineProperty() æ–¹æ³•å¤„ç†æ•°ç»„å¯¹è±¡ã€‚</p><p>ä½†æ˜¯ Vue å¹¶æ²¡æœ‰é‡‡ç”¨ä¸Šè¿°æ–¹æ³•åŠ«æŒæ•°ç»„å¯¹è±¡ï¼Œç¬”è€…çŒœæµ‹ä¸»è¦ç”±äºä»¥ä¸‹ä¸¤ç‚¹ï¼šï¼ˆè¯»è€…æœ‰æ›´å¥½çš„è§è§£ï¼Œæ¬¢è¿ç•™è¨€ã€‚ï¼‰</p><p><strong>1ã€ç‰¹æ®Šçš„ length å±æ€§</strong></p><p>æ•°ç»„å¯¹è±¡çš„ length å±æ€§çš„æè¿°ç¬¦å¤©ç”Ÿç‹¬ç‰¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(arr, <span class="string">&#x27;length&#x27;</span>).configurable <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ„å‘³ç€æ— æ³•é€šè¿‡ Object.defineProperty() æ–¹æ³•åŠ«æŒ length å±æ€§çš„è¯»å–å’Œè®¾ç½®æ–¹æ³•ã€‚</p><p>ç›¸æ¯”è¾ƒå¯¹è±¡çš„å±æ€§ï¼Œæ•°ç»„ä¸‹æ ‡å˜åŒ–åœ°ç›¸å¯¹é¢‘ç¹ï¼Œå¹¶ä¸”æ”¹å˜æ•°ç»„é•¿åº¦çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒçµæ´»ï¼Œä¸€æ—¦æ•°ç»„çš„é•¿åº¦å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆåœ¨æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œå¼€å‘è€…åªèƒ½æ‰‹åŠ¨æ›´æ–°æ–°å¢çš„æ•°ç»„ä¸‹æ ‡ï¼Œè¿™å¯æ˜¯ä¸€ä¸ªå¾ˆç¹ççš„å·¥ä½œã€‚</p><p><strong>2ã€æ•°ç»„çš„æ“ä½œåœºæ™¯</strong></p><p>æ•°ç»„ä¸»è¦çš„æ“ä½œåœºæ™¯è¿˜æ˜¯éå†ï¼Œè€Œå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ éƒ½æŒ‚è½½ä¸€ä¸ª get å’Œ set æ–¹æ³•ï¼Œææ€•ä¹Ÿæ˜¯ä¸å°çš„æ€§èƒ½è´Ÿæ‹…ã€‚</p><p><strong>3ã€æ•°ç»„æ–¹æ³•çš„åŠ«æŒ</strong></p><p>æœ€ç»ˆ Vue é€‰æ‹©åŠ«æŒä¸€äº›å¸¸ç”¨çš„æ•°ç»„æ“ä½œæ–¹æ³•ï¼Œä»è€ŒçŸ¥æ™“æ•°ç»„çš„å˜åŒ–æƒ…å†µï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> methods = [ <span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;unshift&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>, <span class="string">&#x27;reverse&#x27;</span>, <span class="string">&#x27;splice&#x27;</span>]</span><br></pre></td></tr></table></figure><p>æ•°ç»„æ–¹æ³•çš„åŠ«æŒæ¶‰åŠåˆ°åŸå‹ç›¸å…³çš„çŸ¥è¯†ï¼Œé¦–å…ˆæ•°ç»„å®ä¾‹å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯æ¥æºäº Array.prototype å¯¹è±¡ã€‚</p><p>ä½†æ˜¯è¿™é‡Œä¸èƒ½ç›´æ¥ç¯¡æ”¹ Array.prototype å¯¹è±¡ï¼Œè¿™æ ·ä¼šå½±å“æ‰€æœ‰çš„æ•°ç»„å®ä¾‹ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦é‡‡ç”¨åŸå‹ç»§æ‰¿å¾—åˆ°ä¸€ä¸ªæ–°çš„åŸå‹å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayProto = <span class="built_in">Array</span>.prototypeconst injackingPrototype = <span class="built_in">Object</span>.create(arrayProto)</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°æ–°çš„åŸå‹å¯¹è±¡ä¹‹åï¼Œå†é‡å†™è¿™äº›å¸¸ç”¨çš„æ“ä½œæ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">methods.forEach(<span class="function"><span class="params">method</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">const</span> originArrayMethod = arrayProto[method]</span><br><span class="line"> injackingPrototype[method] = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = originArrayMethod.apply(<span class="built_in">this</span>, args)</span><br><span class="line">  <span class="keyword">let</span> inserted</span><br><span class="line">  <span class="keyword">switch</span> (method) &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="string">&#x27;push&#x27;</span>:</span><br><span class="line">   <span class="keyword">case</span> <span class="string">&#x27;unshift&#x27;</span>:</span><br><span class="line">    inserted = args</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">   <span class="keyword">case</span> <span class="string">&#x27;splice&#x27;</span>:</span><br><span class="line">    inserted = args.slice(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (inserted) &#123;</span><br><span class="line">   <span class="comment">// å¯¹äºæ–°å¢çš„å…ƒç´ ï¼Œç»§ç»­åŠ«æŒ</span></span><br><span class="line">   <span class="comment">// ob.observeArray(inserted)</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šçŸ¥å˜åŒ–</span></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ›´æ–°åŠ«æŒæ•°ç»„å®ä¾‹çš„åŸå‹ï¼Œåœ¨ ES6 ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨ç§æœ‰å±æ€§ proto æŒ‡å®šåŸå‹ï¼Œä¹‹åï¼Œä¾¿å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.setPrototypeOf(arr, injackingPrototype)</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œé‡‡ç”¨ Vue.set() æ–¹æ³•è®¾ç½®æ•°ç»„å…ƒç´ æ—¶ï¼ŒVue å†…éƒ¨å®é™…ä¸Šæ˜¯è°ƒç”¨åŠ«æŒåçš„ splice() æ–¹æ³•æ¥è§¦å‘æ›´æ–°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//api:æ•°ç»„setæ–¹å¼æ•°æ®æ”¹å˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span> (<span class="params">target, key, val</span>) </span>&#123;</span><br><span class="line">  .............</span><br><span class="line">  <span class="comment">//isValidArrayIndex åˆ¤æ–­æ•°ç»„æ˜¯æœ‰æ•ˆçš„ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(target) &amp;&amp; isValidArrayIndex(key)) &#123;</span><br><span class="line">    target.length = <span class="built_in">Math</span>.max(target.length, key);</span><br><span class="line">    target.splice(key, <span class="number">1</span>, val);</span><br><span class="line">    <span class="comment">// debugger</span></span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  .............</span><br><span class="line">  <span class="keyword">var</span> ob = (target).__ob__;</span><br><span class="line">  <span class="keyword">if</span> (target._isVue || (ob &amp;&amp; ob.vmCount)) &#123;</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!ob) &#123;</span><br><span class="line">    target[key] = val;</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å˜æˆå“åº”å¼å¯¹è±¡</span></span><br><span class="line">  defineReactive(ob.value, key, val);</span><br><span class="line">  <span class="comment">// é€šçŸ¥ä¾èµ–æ›´æ–°</span></span><br><span class="line">  ob.dep.notify();</span><br><span class="line">  <span class="keyword">return</span> val</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="defineReactive"><a href="#defineReactive" class="headerlink" title="defineReactive"></a>defineReactive</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  obj,</span></span></span><br><span class="line"><span class="function"><span class="params">  key,</span></span></span><br><span class="line"><span class="function"><span class="params">  val,</span></span></span><br><span class="line"><span class="function"><span class="params">  customSetter,</span></span></span><br><span class="line"><span class="function"><span class="params">  shallow</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> dep = <span class="keyword">new</span> Dep();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> property = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, key);</span><br><span class="line">  <span class="keyword">if</span> (property &amp;&amp; property.configurable === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> getter = property &amp;&amp; property.get;</span><br><span class="line">  <span class="keyword">var</span> setter = property &amp;&amp; property.set;</span><br><span class="line">  <span class="keyword">if</span> ((!getter || setter) &amp;&amp; <span class="built_in">arguments</span>.length === <span class="number">2</span>) &#123;</span><br><span class="line">    val = obj[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> childOb = !shallow &amp;&amp; observe(val);</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> <span class="title">reactiveGetter</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> value = getter ? getter.call(obj) : val;</span><br><span class="line">      <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">        dep.depend();</span><br><span class="line">        <span class="keyword">if</span> (childOb) &#123;</span><br><span class="line">          <span class="comment">// debugger å¦‚æœä¸‹é¢æ²¡æœ‰ä¾èµ–æ”¶é›† åˆ™ä¹…ä¸ä¼šæ›´æ–°</span></span><br><span class="line">          <span class="comment">// â¤ï¸â¤ï¸â¤ï¸â¤ï¸å¾ˆå…³é”® ä¾èµ–æ”¶é›†</span></span><br><span class="line">         childOb.dep.depend(); </span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">            dependArray(value);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> <span class="title">reactiveSetter</span> (<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> value = getter ? getter.call(obj) : val;</span><br><span class="line">      <span class="keyword">if</span> (setter) &#123;</span><br><span class="line">        setter.call(obj, newVal);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        val = newVal;</span><br><span class="line">      &#125;</span><br><span class="line">      childOb = !shallow &amp;&amp; observe(newVal);</span><br><span class="line">      dep.notify();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="methodsToPatch"><a href="#methodsToPatch" class="headerlink" title="methodsToPatch"></a>methodsToPatch</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®°å½•åŸå§‹Arrayæœªé‡å†™ä¹‹å‰çš„APIåŸå‹æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> arrayProto = <span class="built_in">Array</span>.prototype</span><br><span class="line"><span class="comment">// æ‹·è´ä¸€ä»½ä¸Šé¢çš„åŸå‹å‡ºæ¥</span></span><br><span class="line"><span class="keyword">const</span> arrayMethods = <span class="built_in">Object</span>.create(arrayProto)</span><br><span class="line"><span class="comment">// å°†è¦é‡å†™çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> methodsToPatch = [ <span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;unshift&#x27;</span>, <span class="string">&#x27;splice&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>, <span class="string">&#x27;reverse&#x27;</span> ]</span><br><span class="line"></span><br><span class="line">methodsToPatch.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">method</span>) </span>&#123;</span><br><span class="line">  def(arrayMethods, method, <span class="function"><span class="keyword">function</span> <span class="title">mutator</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åŸæœ‰çš„æ•°ç»„æ–¹æ³•è°ƒç”¨æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">const</span> result = arrayProto[method].apply(<span class="built_in">this</span>, args)</span><br><span class="line">    <span class="keyword">const</span> ob = <span class="built_in">this</span>.__ob__</span><br><span class="line">    <span class="keyword">let</span> inserted</span><br><span class="line">    <span class="keyword">switch</span> (method) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;push&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;unshift&#x27;</span>:</span><br><span class="line">        inserted = args</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;splice&#x27;</span>:</span><br><span class="line">        inserted = args.slice(<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æ’å…¥çš„æ•°æ®ï¼Œå°†å…¶å†æ¬¡ç›‘å¬èµ·æ¥</span></span><br><span class="line">    <span class="keyword">if</span> (inserted) ob.observeArray(inserted)</span><br><span class="line">    <span class="comment">// è§¦å‘è®¢é˜…ï¼Œåƒé¡µé¢æ›´æ–°å“åº”å°±åœ¨è¿™é‡Œè§¦å‘</span></span><br><span class="line">    ob.dep.notify()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨è°ƒç”¨:star::star::star:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ob.dep.notify()<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæ•°ç»„å˜åŒ–å†…éƒ¨ç”¨splice å¤–éƒ¨å¯ä»¥ç”¨pushéƒ½å¯ä»¥æ”¹å˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">target.splice(key, <span class="number">1</span>, val);</span><br><span class="line"><span class="built_in">this</span>.array.push(<span class="number">100</span>)  <span class="comment">//æ•°ç»„çš„æ·»åŠ </span></span><br></pre></td></tr></table></figure><h2 id="æœ€åçœ‹çœ‹å°¤å¤§çš„å›ç­”"><a href="#æœ€åçœ‹çœ‹å°¤å¤§çš„å›ç­”" class="headerlink" title="æœ€åçœ‹çœ‹å°¤å¤§çš„å›ç­”"></a>æœ€åçœ‹çœ‹å°¤å¤§çš„å›ç­”</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121009image-20201210095216449.png"                      alt="image-20201210095216449"                ></p><h2 id="12æœˆæ›´æ–°â€“æ‰©å±•ä¸€ä¸‹Vue3-0çš„æ•°ç»„ç›‘å¬"><a href="#12æœˆæ›´æ–°â€“æ‰©å±•ä¸€ä¸‹Vue3-0çš„æ•°ç»„ç›‘å¬" class="headerlink" title="12æœˆæ›´æ–°â€“æ‰©å±•ä¸€ä¸‹Vue3.0çš„æ•°ç»„ç›‘å¬"></a>12æœˆæ›´æ–°â€“æ‰©å±•ä¸€ä¸‹Vue3.0çš„æ•°ç»„ç›‘å¬</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> model = &#123;</span><br><span class="line">  name: <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    val: <span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  list: [<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObj</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç›‘æ§å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å°†å±æ€§éƒ½åšç›‘æ§</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(data).map(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isObj(data[key])) &#123;</span><br><span class="line">      <span class="comment">// å¯¹è±¡ç±»å‹çš„ç»§ç»­ç›‘å¬å®ƒçš„å±æ€§</span></span><br><span class="line">      data[key] = observe(data[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> defineProxy(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”ŸæˆProxyä»£ç†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineProxy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">obj, key, val</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`å±æ€§<span class="subst">$&#123;key&#125;</span>å˜åŒ–ä¸º<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">      compile(obj, key, val);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(...arguments);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è§£æå™¨ï¼Œå“åº”é¡µé¢å˜åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compile</span>(<span class="params">obj, id, val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(obj)) &#123; <span class="comment">// æ•°ç»„å˜åŒ–</span></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#list&#x27;</span>).value = model.list;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">`#<span class="subst">$&#123;id&#125;</span>`</span>).value = val;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">model= observe(model);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueâ€”WatchåŸç†</title>
      <link href="2020/12/09/Vue-Watch%E5%8E%9F%E7%90%86/"/>
      <url>2020/12/09/Vue-Watch%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åˆ†æä¸‹Watchçš„å†…éƒ¨åŸç†</p><a id="more"></a><blockquote><p>å¸¦ç€é—®é¢˜çœ‹æºç </p><p>1ã€ç›‘å¬çš„æ•°æ®æ”¹å˜çš„æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ</p><p>2ã€è®¾ç½® immediate æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ</p><p>3ã€è®¾ç½®äº† deep æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ</p></blockquote><h2 id="å¸¸è§çš„apiä½¿ç”¨æƒ…å†µ"><a href="#å¸¸è§çš„apiä½¿ç”¨æƒ…å†µ" class="headerlink" title="å¸¸è§çš„apiä½¿ç”¨æƒ…å†µ"></a>å¸¸è§çš„apiä½¿ç”¨æƒ…å†µ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">   <span class="comment">//å‡½æ•°</span></span><br><span class="line">   <span class="function"><span class="title">useless</span>(<span class="params">newValue</span>)</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;useless&#x27;</span>,newValue)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//å¯¹è±¡</span></span><br><span class="line">   name:&#123;</span><br><span class="line">     immediate:<span class="literal">true</span>,  </span><br><span class="line">     <span class="function"><span class="title">handler</span>(<span class="params">newValue</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;name&#x27;</span>,newValue)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   nestect:&#123;</span><br><span class="line">     deep:<span class="literal">true</span>,</span><br><span class="line">     <span class="function"><span class="title">handler</span>(<span class="params">newValue</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;nestect&#x27;</span>,newValue)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–"><a href="#ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–" class="headerlink" title="ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–"></a>ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initState</span> (<span class="params">vm</span>) </span>&#123;</span><br><span class="line">  vm._watchers = [];</span><br><span class="line">  <span class="keyword">var</span> opts = vm.$options;</span><br><span class="line">  ....</span><br><span class="line">  <span class="keyword">if</span> (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123;</span><br><span class="line">    initWatch(vm, opts.watch);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>opts.watch !== nativeWatch</code>çš„æ„æ€æ˜¯ä¸ç­‰äºæµè§ˆå™¨åŸç”Ÿçš„watchï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·å†™ï¼Ÿ</p><p>å› ä¸ºFirefoxæµè§ˆå™¨ä¸­Object.prototypeä¸­æœ‰ä¸ªwatchæ–¹æ³•ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®watchï¼Œåˆ™opts.watch å°†æ˜¯Object.prototype.watch</p><h2 id="initWatch"><a href="#initWatch" class="headerlink" title="initWatch"></a>initWatch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initWatch</span> (<span class="params">vm, watch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> watch) &#123;</span><br><span class="line">    <span class="comment">//handler ç±»å‹æ˜¯ä¸ç¡®å®šçš„ å¯ä»¥æ˜¯ å¯¹è±¡ æ–¹æ³•  å­—ç¬¦ä¸² æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> handler = watch[key];</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(handler)) &#123;</span><br><span class="line">      <span class="comment">//å¦‚æœæ˜¯æ•°ç»„éå†æ¯ä¸€é¡¹æ¥åˆ›å»ºwatcher</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class="line">        createWatcher(vm, key, handler[i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      createWatcher(vm, key, handler);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="createWatcher"><a href="#createWatcher" class="headerlink" title="createWatcher"></a>createWatcher</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWatcher</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  vm,  <span class="comment">//vueå®ä¾‹</span></span></span></span><br><span class="line"><span class="function"><span class="params">  expOrFn, <span class="comment">//è¡¨è¾¾å¼ æˆ–è€… è®¡ç®—å±æ€§å‡½æ•°</span></span></span></span><br><span class="line"><span class="function"><span class="params">  handler, <span class="comment">//å›è°ƒå‡½æ•°  æˆ–è€… å­—ç¬¦ä¸²</span></span></span></span><br><span class="line"><span class="function"><span class="params">  options <span class="comment">//ä¼ é€’ç»™vm.$watché€‰é¡¹å¯¹è±¡</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isPlainObject(handler)) &#123;</span><br><span class="line">    options = handler;</span><br><span class="line">    handler = handler.handler;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> handler === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    handler = vm[handler];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> vm.$watch(expOrFn, handler, options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>watch åœ¨ä¸€å¼€å§‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼š <strong>è¯»å–</strong> ä¸€é ç›‘å¬çš„æ•°æ®çš„å€¼ï¼Œäºæ˜¯ï¼Œæ­¤æ—¶ é‚£ä¸ªæ•°æ®å°±æ”¶é›†åˆ° watch çš„ watcher äº†</p><p>ç„¶å ä½ ç»™ watch è®¾ç½®çš„ handler ï¼Œwatch ä¼šæ”¾å…¥ watcher çš„æ›´æ–°å‡½æ•°ä¸­</p><p>å½“ æ•°æ®æ”¹å˜æ—¶ï¼Œé€šçŸ¥ watch çš„ watcher è¿›è¡Œæ›´æ–°ï¼Œäºæ˜¯ ä½ è®¾ç½®çš„ handler å°±è¢«è°ƒç”¨äº†</p><p>  <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121715image-20201217154210438.png"                      alt="image-20201217154210438"                ></p><h2 id="watch"><a href="#watch" class="headerlink" title="$watch"></a>$watch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  Vue.prototype.$watch = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    expOrFn,</span></span></span><br><span class="line"><span class="function"><span class="params">    cb,</span></span></span><br><span class="line"><span class="function"><span class="params">    options</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> vm = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (isPlainObject(cb)) &#123;</span><br><span class="line">      <span class="keyword">return</span> createWatcher(vm, expOrFn, cb, options)</span><br><span class="line">    &#125;</span><br><span class="line">    options = options || &#123;&#125;;</span><br><span class="line">    options.user = <span class="literal">true</span>; <span class="comment">// ä»£è¡¨watcher ä¸º userWatcher</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºwatcherå®ä¾‹ è¿™æ˜¯ä¸€ä¸ª user watcherï¼Œå› ä¸º options.user = true</span></span><br><span class="line">    <span class="keyword">var</span> watcher = <span class="keyword">new</span> Watcher(vm, expOrFn, cb, options);</span><br><span class="line">    <span class="comment">//immediate = true åˆ™å‡½æ•°ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (options.immediate) &#123;</span><br><span class="line">      cb.call(vm, watcher.value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unwatchFn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//é”€æ¯watcherå‡½æ•°</span></span><br><span class="line">      watcher.teardown();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1ã€åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œç›‘å¬å›è°ƒ</strong></p><p>å¦‚æœä½ è®¾ç½®äº† <code>immediate</code> çš„è¯ï¼Œè¡¨ç¤ºä¸ç”¨ç­‰æˆ‘æ•°æ®å˜åŒ–ï¼Œåˆå§‹åŒ–æ—¶é©¬ä¸Šæ‰§è¡Œä¸€éï¼Œæ‰§è¡Œçš„ä»£ç å°±æ˜¯ç›´æ¥è°ƒç”¨ å›è°ƒï¼Œç»‘å®šä¸Šä¸‹æ–‡ï¼Œä¼ å…¥ç›‘å¬å€¼</p><p><strong>2ã€æ¯ä¸ª watch é…å‘ watcher</strong></p><h2 id="new-Watcher"><a href="#new-Watcher" class="headerlink" title="new Watcher"></a>new Watcher</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Watcher = <span class="function"><span class="keyword">function</span> <span class="title">Watcher</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  vm,</span></span></span><br><span class="line"><span class="function"><span class="params">  expOrFn,</span></span></span><br><span class="line"><span class="function"><span class="params">  cb,</span></span></span><br><span class="line"><span class="function"><span class="params">  options,</span></span></span><br><span class="line"><span class="function"><span class="params">  isRenderWatcher</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.vm = vm;</span><br><span class="line">  <span class="keyword">if</span> (isRenderWatcher) &#123;</span><br><span class="line">    vm._watcher = <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  vm._watchers.push(<span class="built_in">this</span>);</span><br><span class="line">  <span class="comment">// options</span></span><br><span class="line">  <span class="keyword">if</span> (options) &#123;</span><br><span class="line">    <span class="built_in">this</span>.deep = !!options.deep;</span><br><span class="line">    <span class="built_in">this</span>.user = !!options.user;</span><br><span class="line">    <span class="built_in">this</span>.computed = !!options.computed;</span><br><span class="line">    <span class="built_in">this</span>.sync = !!options.sync;</span><br><span class="line">    <span class="built_in">this</span>.before = options.before;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.deep = <span class="built_in">this</span>.user = <span class="built_in">this</span>.computed = <span class="built_in">this</span>.sync = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.cb = cb;</span><br><span class="line">  <span class="built_in">this</span>.id = ++uid$<span class="number">1</span>; <span class="comment">// uid for batching</span></span><br><span class="line">  <span class="built_in">this</span>.active = <span class="literal">true</span>;</span><br><span class="line">  <span class="built_in">this</span>.dirty = <span class="built_in">this</span>.computed; <span class="comment">// for computed watchers</span></span><br><span class="line">  <span class="built_in">this</span>.deps = [];</span><br><span class="line">  <span class="built_in">this</span>.newDeps = [];</span><br><span class="line">  <span class="built_in">this</span>.depIds = <span class="keyword">new</span> _Set();</span><br><span class="line">  <span class="built_in">this</span>.newDepIds = <span class="keyword">new</span> _Set();</span><br><span class="line">  <span class="built_in">this</span>.expression = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line">    ? expOrFn.toString()</span><br><span class="line">    : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="comment">// parse expression for getter</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> expOrFn === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.getter = expOrFn;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getter = parsePath(expOrFn);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.getter) &#123;</span><br><span class="line">      <span class="built_in">this</span>.getter = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.computed) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">// ä¾èµ–æ”¶é›†</span></span><br><span class="line">    <span class="built_in">this</span>.dep = <span class="keyword">new</span> Dep();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = <span class="built_in">this</span>.get();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p> <strong>this.getter çš„å‡½æ•°è¿›è¡Œç†è§£ï¼Œä»–çš„æœ¬è´¨æ˜¯ä¸ºäº†è·å–å¯¹è±¡çš„keyå€¼.</strong></p><p>å½“ watch.getter æ‰§è¡Œï¼Œè€Œè¯»å–äº† <code>vm.name</code> çš„æ—¶å€™ï¼Œ==nameçš„ä¾èµ–æ”¶é›†å™¨å°±ä¼šæ”¶é›†åˆ° watch-watcher==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Watcher.prototype.get = <span class="function"><span class="keyword">function</span> <span class="title">get</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  pushTarget(<span class="built_in">this</span>);</span><br><span class="line">  <span class="keyword">var</span> value;</span><br><span class="line">  <span class="keyword">var</span> vm = <span class="built_in">this</span>.vm;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    value = <span class="built_in">this</span>.getter.call(vm, vm);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) &#123;</span><br><span class="line">      handleError(e, vm, (<span class="string">&quot;getter for watcher \&quot;&quot;</span> + (<span class="built_in">this</span>.expression) + <span class="string">&quot;\&quot;&quot;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> e</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// &quot;touch&quot; every property so they are all tracked as</span></span><br><span class="line">    <span class="comment">// dependencies for deep watching</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.deep) &#123;</span><br><span class="line">      traverse(value);</span><br><span class="line">    &#125;</span><br><span class="line">    popTarget();</span><br><span class="line">    <span class="built_in">this</span>.cleanupDeps();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Watch åœ¨ç»“å°¾ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ watcher.getï¼Œå…¶ä¸­ä¾¿ä¼šæ‰§è¡Œ getterï¼Œä¾¿ä¼šæ ¹æ®ä½ ç›‘å¬çš„keyï¼Œå»å®ä¾‹ä¸Šè¯»å–å¹¶è¿”å›ï¼Œå­˜æ”¾åœ¨ watcher.value ä¸Š</p><h2 id="deepæ·±åº¦ç›‘å¬"><a href="#deepæ·±åº¦ç›‘å¬" class="headerlink" title="deepæ·±åº¦ç›‘å¬"></a>deepæ·±åº¦ç›‘å¬</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">if</span> (<span class="built_in">this</span>.deep) &#123;</span><br><span class="line">      traverse(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverse</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  _traverse(val, seenObjects);</span><br><span class="line">  seenObjects.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_traverse</span> (<span class="params">val, seen</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i, keys;</span><br><span class="line">  <span class="keyword">var</span> isA = <span class="built_in">Array</span>.isArray(val);</span><br><span class="line">  <span class="keyword">if</span> ((!isA &amp;&amp; !isObject(val)) || <span class="built_in">Object</span>.isFrozen(val) || val <span class="keyword">instanceof</span> VNode) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­å€¼æ˜¯å¦å·²ç»å“åº”å¼</span></span><br><span class="line">  <span class="keyword">if</span> (val.__ob__) &#123;</span><br><span class="line">    <span class="keyword">var</span> depId = val.__ob__.dep.id;</span><br><span class="line">    <span class="keyword">if</span> (seen.has(depId)) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    seen.add(depId);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (isA) &#123;</span><br><span class="line">    i = val.length;</span><br><span class="line">    <span class="keyword">while</span> (i--) &#123; _traverse(val[i], seen); &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//é€’å½’éå†å¯¹è±¡</span></span><br><span class="line">    keys = <span class="built_in">Object</span>.keys(val);</span><br><span class="line">    i = keys.length;</span><br><span class="line">    <span class="keyword">while</span> (i--) &#123; _traverse(val[keys[i]], seen); &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯æ·±å±‚çº§çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„æ¯ä¸ªå±æ€§ä¹Ÿéƒ½æ˜¯å“åº”å¼çš„ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±çš„ä¾èµ–æ”¶é›†å™¨</p><p>é€šè¿‡ä¸æ–­æ·±å…¥çš„è¯»å–æ¯ä¸ªå±æ€§ï¼Œè¿™æ ·æ¯ä¸ªå±æ€§å°±éƒ½å¯ä»¥æ”¶é›†åˆ° <code>watch-watcher</code> äº†</p><p>è¿™æ ·ä¸ç®¡å¯¹è±¡å†…å¤šæ·±çš„å±æ€§å˜åŒ–ï¼Œéƒ½ä¼šé€šçŸ¥åˆ° <code>watch-watcher</code></p><h2 id="å›è°ƒæ›´æ–°"><a href="#å›è°ƒæ›´æ–°" class="headerlink" title="å›è°ƒæ›´æ–°"></a>å›è°ƒæ›´æ–°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Watcher.prototype.update = <span class="function"><span class="keyword">function</span> <span class="title">update</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>()&#123;&#125;</span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.sync) &#123;</span><br><span class="line">    <span class="built_in">this</span>.run(); <span class="comment">//åŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    queueWatcher(<span class="built_in">this</span>); <span class="comment">//å…ˆæ‰§è¡Œè¿™é‡Œ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Watcher.prototype.run = <span class="function"><span class="keyword">function</span> <span class="title">run</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.active) &#123;</span><br><span class="line">    <span class="built_in">this</span>.getAndInvoke(<span class="built_in">this</span>.cb);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹æ¯”è®¡ç®—å±æ€§è¿”å›å€¼</span></span><br><span class="line">Watcher.prototype.getAndInvoke = <span class="function"><span class="keyword">function</span> <span class="title">getAndInvoke</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="built_in">this</span>.get();</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    value !== <span class="built_in">this</span>.value ||</span><br><span class="line">    isObject(value) ||</span><br><span class="line">    <span class="built_in">this</span>.deep</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="comment">// set new value</span></span><br><span class="line">    <span class="keyword">var</span> oldValue = <span class="built_in">this</span>.value;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">    <span class="built_in">this</span>.dirty = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line">        cb.call(<span class="built_in">this</span>.vm, value, oldValue);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        handleError(e, <span class="built_in">this</span>.vm, (<span class="string">&quot;callback for watcher \&quot;&quot;</span> + (<span class="built_in">this</span>.expression) + <span class="string">&quot;\&quot;&quot;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cb.call(<span class="built_in">this</span>.vm, value, oldValue);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121616image-20201216161914318.png"                      alt="image-20201216161914318"                ></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>watcherå±æ€§æœ¬è´¨å°±æ˜¯<code>user watcher</code>ï¼Œå®ƒè¿˜æ”¯æŒdeepï¼Œsyncï¼Œimmediateç­‰é…ç½®ï¼Œç›‘å¬å±æ€§é€‚åˆè§‚å¯ŸæŸä¸ªå€¼å¾—å˜åŒ–å»å®Œæˆä¸€æ®µå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å¦‚ä½•å®ç°watchç›‘å¬ï¼Ÿ<code>æ­£æ˜¯å› ä¸ºwatchå¯¹åº”keyæ˜¯è¢«æ•°æ®æ‹¦æˆªçš„å±æ€§</code>ï¼Œåœ¨é€‰é¡¹watchä¸‹ï¼š</p><ul><li>æ¯ä¸€ä¸ªkeyéƒ½ä¼šå¯¹åº”ä¸€ä¸ªwatcherå¯¹è±¡</li><li>watcherå¯¹è±¡çš„getterå‡½æ•°å°±æ˜¯è·å–å½“å‰keyå¯¹åº”çš„å€¼ï¼Œä»è€Œå»ºç«‹keyå¯¹åº”Depå¯¹è±¡ä¸å½“å‰watcherå¯¹è±¡å»ºç«‹è”ç³»</li><li>å½“keyæ”¹å˜æ—¶å°±ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä»è€Œæ‰§è¡Œkeyå¯¹åº”çš„å›è°ƒå‡½æ•°</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ</title>
      <link href="2020/12/08/%E5%90%84%E7%A7%8D%E7%A7%BB%E5%8A%A8%E7%AB%AFBug%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2020/12/08/%E5%90%84%E7%A7%8D%E7%A7%BB%E5%8A%A8%E7%AB%AFBug%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1 id="å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆæŒç»­æ›´æ–°"><a href="#å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆæŒç»­æ›´æ–°" class="headerlink" title="å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆæŒç»­æ›´æ–°"></a>å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆæŒç»­æ›´æ–°</h1><p><a class="link"   href="https://www.notion.so/Bug-075fd58447e94728a6e1ac2b84e10764" >å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueâ€”propsåŸç†</title>
      <link href="2020/12/06/Vue-props%E5%8E%9F%E7%90%86/"/>
      <url>2020/12/06/Vue-props%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åˆ†æä¸‹propsçš„å†…éƒ¨åŸç†</p><a id="more"></a><blockquote><p>å¸¦ç€é—®é¢˜çœ‹æºç </p><p>1ã€çˆ¶ç»„ä»¶ æ€ä¹ˆä¼ å€¼ç»™ å­ç»„ä»¶çš„ props</p><p>2ã€å­ç»„ä»¶å¦‚ä½•è¯»å–props</p><p>3ã€çˆ¶ç»„ä»¶ data æ›´æ–°ï¼Œå­ç»„ä»¶çš„props å¦‚ä½•æ›´æ–°</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//parent.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">       &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line">          &lt;h1&gt;åˆ†æprops&lt;/h1&gt;</span><br><span class="line">          &lt;hello-world :msg=<span class="string">&quot;parentMsg&quot;</span>&gt;&lt;/hello-world&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//child.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg:&#123;</span><br><span class="line">      type:<span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿è§£æè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ ‡ç­¾çš„åå­—æ˜¯ç»„ä»¶åï¼Œè™šæ‹ŸDOMæ¸²æŸ“è¿‡ç¨‹ä¸­ä¼šå°†<code>å­ç»„ä»¶å®ä¾‹åŒ–</code>ï¼Œæ¨¡æ¿è§£ææ—¶å€™ä»æ ‡ç­¾å±æ€§ä¸Šè§£æå‡ºæ•°æ®å½“åšå‚æ•°ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå…¶ä¸­å°±åŒ…æ‹¬<code>propsæ•°æ®</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è§£æçˆ¶ç»„ä»¶</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;    </span><br><span class="line">    <span class="function"><span class="title">with</span>(<span class="params"><span class="built_in">this</span></span>)</span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> _c(<span class="string">&#x27;div&#x27;</span>,&#123;<span class="attr">staticClass</span>:<span class="string">&quot;parent&quot;</span>&#125;,[</span><br><span class="line">            _c(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">attrs</span>:&#123;&#125;&#125;)</span><br><span class="line">            _c(<span class="string">&#x27;hello-world&#x27;</span>,&#123;<span class="attr">attrs</span>:&#123;<span class="string">&quot;msg&quot;</span>:parentMsg&#125;&#125;)</span><br><span class="line">        ],<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p>with çš„ä½œç”¨æ˜¯ï¼Œç»‘å®šå¤§æ‹¬å·å†…ä»£ç çš„ <strong>å˜é‡è®¿é—®ä½œç”¨åŸŸ</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;    </span><br><span class="line">    <span class="function"><span class="title">with</span>(<span class="params"><span class="built_in">this</span></span>)</span>&#123; <span class="built_in">console</span>.log(parentName) &#125;</span><br><span class="line">&#125;</span><br><span class="line">test.call(&#123;<span class="attr">parentName</span>:<span class="string">&quot;æµ‹è¯•åå­—&quot;</span>&#125;)  <span class="comment">//æµ‹è¯•åå­—</span></span><br></pre></td></tr></table></figure><p>propsçš„å®ç°åŸç†ç®€å•çš„ç†è§£ï¼šçˆ¶ç»„ä»¶æä¾›æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡propså­—æ®µé€‰æ‹©ç»„ä»¶éœ€è¦å“ªäº›å†…å¦‚ï¼Œé€šè¿‡å­ç»„ä»¶propsé€‰é¡¹å°†éœ€è¦çš„æ•°æ®ç­›é€‰å‡ºæ¥æ·»åŠ åˆ°å­ç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸­</p><h2 id="normalizeProps"><a href="#normalizeProps" class="headerlink" title="normalizeProps"></a>normalizeProps</h2><p>Vue.component()æ³¨å†Œç»„ä»¶çš„æ—¶å€™ä¼šè°ƒç”¨Vue.extend()ç”Ÿæˆä¸€ä¸ªVueåŸºç¡€æ„é€ å™¨ï¼Œå†…éƒ¨ä¼šè°ƒç”¨mergeOptionså‡½æ•°åˆå¹¶å±æ€§ï¼Œ mergeOptionsåˆä¼šè°ƒç”¨normalizePropså¯¹propsçš„å±æ€§è¿›è¡Œä¸€äº›è§„èŒƒåŒ–çš„ä¿®é¥°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeProps</span> (<span class="params">options, vm</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> props = options.props;</span><br><span class="line">  <span class="keyword">if</span> (!props) &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">  <span class="keyword">var</span> res = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> i, val, name;</span><br><span class="line">  <span class="comment">//å¦‚æœpropsæ˜¯ä¸ªæ•°ç»„ </span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(props)) &#123;</span><br><span class="line">    i = props.length;</span><br><span class="line">    <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">      val = props[i];</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        name = camelize(val);</span><br><span class="line">        <span class="comment">//ä¿å­˜åˆ°resé‡Œé¢  ä¾‹å¦‚:&#123; msg: &#123;type: null&#125; &#125;</span></span><br><span class="line">        res[name] = &#123; <span class="attr">type</span>: <span class="literal">null</span> &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">//...é”™è¯¯å¤„ç†</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœpropsæ˜¯ä¸ªå¯¹è±¡  </span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPlainObject(props)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> props) &#123;</span><br><span class="line">      val = props[key];</span><br><span class="line">      name = camelize(key);</span><br><span class="line">      res[name] = isPlainObject(val)</span><br><span class="line">        ? val</span><br><span class="line">        : &#123; <span class="attr">type</span>: val &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">   <span class="comment">//...é”™è¯¯å¤„ç†</span></span><br><span class="line">  &#125;</span><br><span class="line">  options.props = res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ç»è¿‡normalizePropsè§„èŒƒåï¼Œpropsè¢«ä¿®é¥°ä¸ºä¸€ä¸ªå¯¹è±¡æ ¼å¼ï¼Œä¾‹å­é‡Œçš„æ‰§è¡Œåˆ°è¿™é‡Œç­‰äº:<code>&#123; msg: &#123;type: null&#125; &#125;</code></p><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    initState(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initState</span>(<span class="params">vm</span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">var</span> opts = vm.$options;    </span><br><span class="line">    <span class="keyword">if</span> (opts.props) &#123;</span><br><span class="line">        initProps(vm, opts.props);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="initProps"><a href="#initProps" class="headerlink" title="initProps"></a>initProps</h2><p>initPropsæ¥å—2ä¸ªå‚ï¼š<code>vm</code>  <code>propsOptions</code>ã€‚</p><p>ç¬¬ä¸€ä¸ªå‚æ˜¯ vmå®ä¾‹ã€‚</p><p>ç¬¬äºŒä¸ªå‚æ˜¯ è§„æ ¼åŒ–åçš„propsé€‰é¡¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initProps</span> (<span class="params">vm, propsOptions</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> propsData = vm.$options.propsData || &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> props = vm._props = &#123;&#125;;</span><br><span class="line">  <span class="comment">//ç¼“å­˜propsçš„key</span></span><br><span class="line">  <span class="keyword">var</span> keys = vm.$options._propKeys = [];</span><br><span class="line">  <span class="keyword">var</span> isRoot = !vm.$parent;</span><br><span class="line">  <span class="comment">//å¦‚æœä¸æ˜¯æ ¹ç»„ä»¶åˆ™å˜æˆå“åº”å¼</span></span><br><span class="line">  <span class="keyword">if</span> (!isRoot) &#123;</span><br><span class="line">    toggleObserving(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"> key </span>) </span>&#123;</span><br><span class="line">    keys.push(key);</span><br><span class="line">    <span class="keyword">var</span> value = validateProp(key, propsOptions, propsData, vm);</span><br><span class="line">    <span class="comment">/* istanbul ignore else */</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> hyphenatedKey = hyphenate(key);</span><br><span class="line">       <span class="comment">//...é”™è¯¯å¤„ç†</span></span><br><span class="line">      defineReactive(props, key, value, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//...é”™è¯¯å¤„ç†</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      defineReactive(props, key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!(key <span class="keyword">in</span> vm)) &#123;</span><br><span class="line">      <span class="comment">//è®¾ç½®ä»£ç† æŠŠvm.x è®¿é—® vm._props.x</span></span><br><span class="line">      proxy(vm, <span class="string">&quot;_props&quot;</span>, key);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> propsOptions) loop( key );</span><br><span class="line">  toggleObserving(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ¯ä¸€ä¸ª å®ä¾‹éƒ½ä¼šæœ‰ ä¸€ä¸ª _props çš„åŒæ—¶ï¼Œä¹Ÿä¼šæŠŠå±æ€§ç›´æ¥æ”¾åœ¨ å®ä¾‹ä¸Šã€‚</p><table><thead><tr><th style="text-align:left">propsData</th><th style="text-align:left">ä¿å­˜é€šè¿‡çˆ¶ç»„ä»¶ä¼ å…¥æˆ–è€…ç”¨æˆ·é€šè¿‡propsDataä¼ å…¥çš„propsæ•°æ®</th></tr></thead><tbody><tr><td style="text-align:left">props</td><td style="text-align:left">æŒ‡å‘vm._propsæŒ‡é’ˆã€‚æ‰€æœ‰è®¾ç½®åˆ°propså˜é‡ä¸­çš„å±æ€§ä¿å­˜åˆ°vm.props</td></tr><tr><td style="text-align:left">keys</td><td style="text-align:left">æŒ‡å‘ vm.$options._propskeys</td></tr><tr><td style="text-align:left">isRoot</td><td style="text-align:left">åˆ¤æ–­æ˜¯å¦æ˜¯æ ¹ç»„ä»¶</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleObserving</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  shouldObserve = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸»è¦åšäº†ä¸‰ä»¶äº‹</p><p>1ã€éå† props</p><p>2ã€ç»™ props è®¾ç½®å“åº”å¼</p><p>3ã€ç»™ props è®¾ç½®ä»£ç† (æŠŠvm.x è®¿é—® vm._props.x)</p><h2 id="validateProp"><a href="#validateProp" class="headerlink" title="validateProp"></a>validateProp</h2><p>è°ƒç”¨è¿™ä¸ªå‡½æ•°å¾—åˆ°çš„propsæ•°æ®é€šè¿‡defineReactiveå‡½æ•°è®¾ç½®åˆ°vm._propsä¸­ï¼Œç›®çš„å°±æ˜¯<code>æ ¡éªŒ</code>ï¼Œå°±æ˜¯æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬ä¼ é€’çš„æ•°æ®æ˜¯å¦æ»¡è¶³ <code>prop</code>çš„å®šä¹‰è§„èŒƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡ŒvalidatePropæ£€æŸ¥propsDataé‡Œçš„keyå€¼æ˜¯å¦ç¬¦åˆpropsOptionsé‡Œå¯¹åº”çš„è¦æ±‚ï¼Œå¹¶å°†å€¼ä¿å­˜åˆ°valueé‡Œé¢</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validateProp</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  key,</span></span></span><br><span class="line"><span class="function"><span class="params">  propOptions,</span></span></span><br><span class="line"><span class="function"><span class="params">  propsData,</span></span></span><br><span class="line"><span class="function"><span class="params">  vm</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prop = propOptions[key];</span><br><span class="line">  <span class="keyword">var</span> absent = !hasOwn(propsData, key);</span><br><span class="line">  <span class="keyword">var</span> value = propsData[key];</span><br><span class="line">  <span class="comment">// boolean casting</span></span><br><span class="line">  <span class="keyword">var</span> booleanIndex = getTypeIndex(<span class="built_in">Boolean</span>, prop.type);</span><br><span class="line">  <span class="keyword">if</span> (booleanIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (absent &amp;&amp; !hasOwn(prop, <span class="string">&#x27;default&#x27;</span>)) &#123;</span><br><span class="line">      value = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span> || value === hyphenate(key)) &#123;</span><br><span class="line">      <span class="comment">// only cast empty string / same name to boolean if</span></span><br><span class="line">      <span class="comment">// boolean has higher priority</span></span><br><span class="line">      <span class="keyword">var</span> stringIndex = getTypeIndex(<span class="built_in">String</span>, prop.type);</span><br><span class="line">      <span class="keyword">if</span> (stringIndex &lt; <span class="number">0</span> || booleanIndex &lt; stringIndex) &#123;</span><br><span class="line">        value = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//âœ…âœ…âœ…æ£€æµ‹å¦‚æœ prop æ²¡æœ‰å®šä¹‰ default å±æ€§ï¼Œé‚£ä¹ˆè¿”å› undefinedï¼Œé€šè¿‡è¿™å—é€»è¾‘æˆ‘ä»¬çŸ¥é“é™¤äº† Boolean ç±»å‹çš„æ•°æ®ï¼Œå…¶ä½™æ²¡æœ‰è®¾ç½®    default å±æ€§çš„ prop é»˜è®¤å€¼éƒ½æ˜¯ undefinedã€‚</span></span><br><span class="line">  <span class="keyword">if</span> (value === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    value = getPropDefaultValue(vm, prop, key);</span><br><span class="line">    <span class="comment">// since the default value is a fresh copy,</span></span><br><span class="line">    <span class="comment">// make sure to observe it.</span></span><br><span class="line">    <span class="keyword">var</span> prevShouldObserve = shouldObserve;</span><br><span class="line">    toggleObserving(<span class="literal">true</span>);</span><br><span class="line">    observe(value);</span><br><span class="line">    toggleObserving(prevShouldObserve);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class="line">    <span class="comment">// skip validation for weex recycle-list child component props</span></span><br><span class="line">    !(<span class="literal">false</span> &amp;&amp; isObject(value) &amp;&amp; (<span class="string">&#x27;@binding&#x27;</span> <span class="keyword">in</span> value))</span><br><span class="line">  ) &#123;</span><br><span class="line">    assertProp(prop, key, value, vm, absent);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸»è¦å°±åš 3 ä»¶äº‹æƒ…ï¼š</p><ol><li>å¤„ç† <code>Boolean</code> ç±»å‹çš„æ•°æ®ã€‚</li><li>å¤„ç†é»˜è®¤æ•°æ®ã€‚</li><li><code>prop</code> æ–­è¨€ï¼Œå¹¶æœ€ç»ˆè¿”å› <code>prop</code> çš„å€¼ã€‚</li></ol><h2 id="proxyä»£ç†"><a href="#proxyä»£ç†" class="headerlink" title="proxyä»£ç†"></a><strong>proxy</strong>ä»£ç†</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxy</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    target, sourceKey, key</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;    </span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(target, key, &#123;</span><br><span class="line">      <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;            </span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>[sourceKey][key]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">set</span>(<span class="params">val</span>)</span> &#123;            </span><br><span class="line">          <span class="built_in">this</span>[sourceKey][key] = val;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¿™æ®µä»£ç åšäº†2 ä¸ªäº‹</strong></p><p>1ã€ä½¿ç”¨ props åœ¨ vm ä¸Šå ä½ï¼Œä½¿å¾—å¯ä»¥é€šè¿‡ vm.xxx çš„å½¢å¼è®¿é—®åˆ° props </p><p>2ã€è®¾ç½® [Object.defineProperty] çš„ get å’Œ set ï¼Œé—´æ¥è·å–å’Œèµ‹å€¼ vm._props</p><h2 id="defineReactiveå“åº”å¼"><a href="#defineReactiveå“åº”å¼" class="headerlink" title="defineReactiveå“åº”å¼"></a>defineReactiveå“åº”å¼</h2><p>åœ¨ <code>defineReactive</code> çš„æ—¶å€™ä¼šæ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ <code>setter</code>ï¼Œå½“æˆ‘ä»¬ç›´æ¥å¯¹ <code>prop</code> èµ‹å€¼çš„æ—¶å€™ä¼šè¾“å‡ºè­¦å‘Šã€‚</p><p><code>prop</code> çš„å“åº”å¼æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯å½“ <code>vm</code> æ˜¯éæ ¹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œ <code>toggleObserving(false)</code>ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å“åº”å¼çš„ä¼˜åŒ–</p><h2 id="Props-æ›´æ–°"><a href="#Props-æ›´æ–°" class="headerlink" title="Props æ›´æ–°"></a>Props æ›´æ–°</h2><p> å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œæ˜¯è¿™ä¸ªæµç¨‹</p><ol><li>çˆ¶ç»„ä»¶æ•°æ®æ”¹å˜ï¼Œåªä¼šæŠŠæ–°çš„æ•°æ®ä¼ ç»™å­ç»„ä»¶</li><li>å­ç»„ä»¶æ‹¿åˆ°æ–°æ•°æ®ï¼Œå°±ä¼šç›´æ¥æ›¿æ¢åˆ°åŸæ¥çš„ props</li><li>æ›¿æ¢å°±æ˜¯ç›´æ¥ç­‰å“ˆï¼Œçœ‹ä¸‹æºç ï¼Œé‡è¦è¯­å¥æ ‡çº¢</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateChildComponent</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    vm, propsData</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">if</span> (propsData &amp;&amp; vm.$options.props) &#123;        </span><br><span class="line">      <span class="comment">// ä¿å­˜ props çš„åœ°æ–¹ï¼Œç”¨äºè®¿é—®è½¬æ¥ï¼Œå…·ä½“çœ‹æ–‡ç« ä¸‹é¢</span></span><br><span class="line">      <span class="keyword">var</span> props = vm._props;        </span><br><span class="line">      <span class="comment">// æ‰€æœ‰å­ç»„ä»¶ä¸Šè®¾ç½®çš„ props çš„ key</span></span><br><span class="line">      <span class="keyword">var</span> propKeys = vm.$options._propKeys || [];        </span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; propKeys.length; i++) &#123;            </span><br><span class="line">        <span class="keyword">var</span> key = propKeys[i];</span><br><span class="line">        props[key] = propsData[key]</span><br><span class="line">      &#125;</span><br><span class="line">     vm.$options.propsData = propsData;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å¯¹è±¡ï¼Œæ˜¯è¿™ä¸ªæµç¨‹</p><ol><li>çˆ¶ç»„ä»¶ä¼  å¯¹è±¡ ç»™ å­ç»„ä»¶ï¼Œå¹¶ä¸”çˆ¶å­ç»„ä»¶ é¡µé¢éƒ½ä½¿ç”¨åˆ°äº†è¿™ä¸ªæ•°æ®</li><li>ç»“æœé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ï¼Œä¼šæ”¶é›†åˆ° çˆ¶å­ç»„ä»¶çš„ watcher</li><li>æ‰€ä»¥å½“ å¯¹è±¡å†…éƒ¨è¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œä¼šé€šçŸ¥åˆ° çˆ¶å’Œå­ æ›´æ–°ã€‚</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>1ã€çˆ¶ç»„ä»¶ data çš„å€¼ å’Œ å­ç»„ä»¶çš„ props <strong>æ²¡æœ‰ä»»ä½•è”ç³»</strong>ï¼Œæ›´æ”¹ props ä¸å½±å“çˆ¶ç»„ä»¶ data ï¼ˆå…¶å®ä¹Ÿå½±å“å¦‚æœdataæ˜¯ä¸ªå¯¹è±¡ï¼‰</p><p>2ã€props ä¹Ÿæ˜¯<strong>å“åº”å¼</strong>çš„ï¼Œè·Ÿ data æœ¬è´¨ å·®ä¸å¤š</p><p>3ã€props ä¼šè®¿é—®è½¬æ¥ï¼Œèµ‹å€¼è½¬æ¥ ï¼Œå…¶å®æ“ä½œçš„æ˜¯ <strong>vm._props</strong> çš„å±æ€§</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueâ€”å“åº”å¼å¯¹è±¡</title>
      <link href="2020/12/04/Vue-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1/"/>
      <url>2020/12/04/Vue-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p>è¢«Object.definePropertyç»‘å®šè¿‡çš„å¯¹è±¡ï¼Œä¼šå˜æˆã€Œå“åº”å¼ã€åŒ–ã€‚ä¹Ÿå°±æ˜¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ä¼šè§¦å‘getå’Œsetäº‹ä»¶ã€‚è¿›è€Œè§¦å‘ä¸€äº›è§†å›¾æ›´æ–°</p><a id="more"></a><blockquote><p>å¸¦ç€é—®é¢˜çœ‹æºç </p><p>1ã€Vue æ˜¯æ€ä¹ˆçŸ¥é“æ•°æ®æ”¹å˜ï¼Ÿ</p><p>2ã€Vue åœ¨æ•°æ®æ”¹å˜æ—¶ï¼Œæ€ä¹ˆçŸ¥é“é€šçŸ¥å“ªäº›è§†å›¾æ›´æ–°ï¼Ÿ</p><p>3ã€Vue åœ¨æ•°æ®æ”¹å˜æ—¶ï¼Œè§†å›¾æ€ä¹ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™æ›´æ–°ï¼Ÿ</p></blockquote><h2 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    get: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘è¢«è¯»äº†ï¼Œæˆ‘è¦ä¸è¦åšç‚¹ä»€ä¹ˆå¥½?&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="params">newVal</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (val === newVal) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      val = newVal;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;æ•°æ®è¢«æ”¹å˜äº†ï¼Œæˆ‘è¦æŠŠæ–°çš„å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">  text: <span class="string">&#x27;hello world&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹dataä¸Šçš„textå±æ€§è¿›è¡Œç»‘å®š</span></span><br><span class="line">defineReactive(data, <span class="string">&#x27;text&#x27;</span>, data.text);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data.text); <span class="comment">// æ§åˆ¶å°è¾“å‡º &lt;æˆ‘è¢«è¯»äº†ï¼Œæˆ‘è¦ä¸è¦åšç‚¹ä»€ä¹ˆå¥½?&gt;</span></span><br><span class="line">data.text = <span class="string">&#x27;hello Vue&#x27;</span>; <span class="comment">// æ§åˆ¶å°è¾“å‡º &lt;hello Vue &amp;&amp; æ•°æ®è¢«æ”¹å˜äº†ï¼Œæˆ‘è¦æŠŠæ–°çš„å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»!&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Observer-ã€Œå“åº”å¼ã€"><a href="#Observer-ã€Œå“åº”å¼ã€" class="headerlink" title="Observer ã€Œå“åº”å¼ã€"></a><strong>Observer ã€Œå“åº”å¼ã€</strong></h2><p>Vueä¸­ç”¨Observerç±»æ¥ç®¡ç†ä¸Šè¿°å“åº”å¼åŒ–Object.definePropertyçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹ä»£ç æ¥æè¿°ï¼Œå°†this.dataä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨Vueä»£ç ä¸­å®šä¹‰çš„dataå±æ€§å…¨éƒ¨è¿›è¡Œã€Œå“åº”å¼ã€ç»‘å®šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å“åº”å¼ç»‘å®šæ•°æ®é€šè¿‡æ–¹æ³•</span></span><br><span class="line">   observe(<span class="built_in">this</span>.data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">observe</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(data);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="comment">// å°†dataä¸­æˆ‘ä»¬å®šä¹‰çš„æ¯ä¸ªå±æ€§è¿›è¡Œå“åº”å¼ç»‘å®š</span></span><br><span class="line">    defineReactive(obj, keys[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æºç ä¸­"><a href="#æºç ä¸­" class="headerlink" title="æºç ä¸­"></a>æºç ä¸­</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shouldObserve = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleObserving</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  shouldObserve = value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   å°è¯•ä¸ºä¸€ä¸ªå€¼åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…å®ä¾‹ï¼› </span></span><br><span class="line"><span class="comment"> *  å¦‚æœæˆåŠŸè§‚å¯Ÿåˆ°ï¼Œåˆ™è¿”å›æ–°è§‚å¯Ÿè€…ï¼› </span></span><br><span class="line"><span class="comment"> *  å¦‚æœè¯¥å€¼å·²ç»å…·æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œåˆ™è¿”å›ç°æœ‰è§‚å¯Ÿè€…ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span> (<span class="params">value, asRootData</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// valueæ˜¯ä¸æ˜¯object ä¸èƒ½æ˜¯vnodeå®ä¾‹</span></span><br><span class="line">  <span class="keyword">if</span> (!isObject(value) || value <span class="keyword">instanceof</span> VNode) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> ob;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­å¸¦ä¸å¸¦ obæ ‡è¯†</span></span><br><span class="line">  <span class="keyword">if</span> (hasOwn(value, <span class="string">&#x27;__ob__&#x27;</span>) &amp;&amp; value.__ob__ <span class="keyword">instanceof</span> Observer) &#123;</span><br><span class="line">    ob = value.__ob__;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">    shouldObserve &amp;&amp;   <span class="comment">//å…¨å±€æ§åˆ¶ shouldObserve === false </span></span><br><span class="line">    !isServerRendering() &amp;&amp;</span><br><span class="line">    (<span class="built_in">Array</span>.isArray(value) || isPlainObject(value)) &amp;&amp;</span><br><span class="line">    <span class="built_in">Object</span>.isExtensible(value) &amp;&amp;   <span class="comment">//å¯æ‰©å±•å±æ€§</span></span><br><span class="line">    !value._isVue       <span class="comment">//ä¸æ˜¯vueå®ä¾‹</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    ob = <span class="keyword">new</span> Observer(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (asRootData &amp;&amp; ob) &#123;</span><br><span class="line">    ob.vmCount++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ob</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a>Observer</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> é™„åŠ åˆ°æ¯ä¸ªè§‚å¯Ÿå¯¹è±¡çš„è§‚å¯Ÿè€…ç±»ã€‚é™„åŠ åï¼Œ</span></span><br><span class="line"><span class="comment"> è§‚å¯Ÿè€…ä¼šå°†ç›®æ ‡å¯¹è±¡çš„å±æ€§é”®è½¬æ¢ä¸ºç”¨äºæ”¶é›†ä¾èµ–é¡¹å¹¶è°ƒåº¦æ›´æ–°çš„getter / setterã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> Observer = <span class="function"><span class="keyword">function</span> <span class="title">Observer</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.value = value;</span><br><span class="line">  <span class="built_in">this</span>.dep = <span class="keyword">new</span> Dep(); <span class="comment">//åˆ›å»ºdepå®ä¾‹ åé¢å†è¯´å…ˆè·³è¿‡</span></span><br><span class="line">  <span class="built_in">this</span>.vmCount = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">//ç›®çš„ ä¸ºvaluæ·»åŠ obæ ‡è¯† å˜æˆå“åº”å¼ å¹¶ä¸”thisæŒ‡å‘å½“å‰å®ä¾‹</span></span><br><span class="line">  <span class="comment">//ä¸‹ä¸€æ¬¡æ‰§è¡Œä¸Šé¢çš„hasOwn(value, &#x27;__ob__&#x27;) ç›´æ¥trueäº†</span></span><br><span class="line">  def(value, <span class="string">&#x27;__ob__&#x27;</span>, <span class="built_in">this</span>);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasProto) &#123;</span><br><span class="line">      protoAugment(value, arrayMethods);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      copyAugment(value, arrayMethods, arrayKeys);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.observeArray(value);  <span class="comment">//éå†æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´  é€’å½’æŠŠä»–ä»¬éƒ½è§‚å¯Ÿèµ·æ¥</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.walk(value);<span class="comment">//éå†å¯¹è±¡æ¯ä¸€ä¸ªå±æ€§</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//enumerable æ˜¯ä¸å¯æšä¸¾ å¦‚æœä¸ä¼ åˆ™æ˜¯ undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">def</span> (<span class="params">obj, key, val, enumerable</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    value: val,</span><br><span class="line">    enumerable: !!enumerable,  <span class="comment">//false ä»£è¡¨ä¸å¯æšä¸¾ ä¸èƒ½åŠ å…¥forå¾ªç¯</span></span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è§‚å¯Ÿæ•°ç»„é¡¹çš„åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> Observer.prototype.observeArray = <span class="function"><span class="keyword">function</span> <span class="title">observeArray</span> (<span class="params">items</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = items.length; i &lt; l; i++) &#123;</span><br><span class="line">     observe(items[i]);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * éå†æ‰€æœ‰å±æ€§å¹¶å°†å®ƒä»¬è½¬æ¢ä¸º* getter / setterã€‚</span></span><br><span class="line"><span class="comment">  * ä»…å½“*å€¼ç±»å‹ä¸ºObjectæ—¶ï¼Œæ‰åº”è°ƒç”¨æ­¤æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> Observer.prototype.walk = <span class="function"><span class="keyword">function</span> <span class="title">walk</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">     defineReactive$$1(obj, keys[i]);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><h2 id="defineReactive-1"><a href="#defineReactive-1" class="headerlink" title="defineReactive$$1"></a>defineReactive$$1</h2><p>å°±æ˜¯æŠŠå¯¹è±¡å˜æˆå“åº”å¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Define a reactive property on an Object.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">defineReactive$$1</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">   obj,</span></span></span><br><span class="line"><span class="function"><span class="params">   key,</span></span></span><br><span class="line"><span class="function"><span class="params">   val,</span></span></span><br><span class="line"><span class="function"><span class="params">   customSetter,</span></span></span><br><span class="line"><span class="function"><span class="params">   shallow</span></span></span><br><span class="line"><span class="function"><span class="params"> </span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> dep = <span class="keyword">new</span> Dep();</span><br><span class="line">   ...</span><br><span class="line">   <span class="comment">// å¦‚æœæœ‰childe  åˆ™é€’å½’è°ƒç”¨observe</span></span><br><span class="line">   <span class="keyword">var</span> childOb = !shallow &amp;&amp; observe(val);</span><br><span class="line">   <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">     enumerable: <span class="literal">true</span>,</span><br><span class="line">     configurable: <span class="literal">true</span>,</span><br><span class="line">     get: <span class="function"><span class="keyword">function</span> <span class="title">reactiveGetter</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">var</span> value = getter ? getter.call(obj) : val;</span><br><span class="line">       <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">         dep.depend();    <span class="comment">//ä¾èµ–æ”¶é›†</span></span><br><span class="line">         <span class="keyword">if</span> (childOb) &#123;</span><br><span class="line">           childOb.dep.depend();</span><br><span class="line">           <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">             dependArray(value);</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> value</span><br><span class="line">     &#125;,</span><br><span class="line">     set: <span class="function"><span class="keyword">function</span> <span class="title">reactiveSetter</span> (<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">var</span> value = getter ? getter.call(obj) : val;</span><br><span class="line">       <span class="comment">/* eslint-disable no-self-compare */</span></span><br><span class="line">       <span class="keyword">if</span> (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;</span><br><span class="line">         <span class="keyword">return</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">/* eslint-enable no-self-compare */</span></span><br><span class="line">       <span class="keyword">if</span> (customSetter) &#123;</span><br><span class="line">         customSetter();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// #7981: for accessor properties without setter</span></span><br><span class="line">       <span class="keyword">if</span> (getter &amp;&amp; !setter) &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">       <span class="keyword">if</span> (setter) &#123;</span><br><span class="line">         setter.call(obj, newVal);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         val = newVal;</span><br><span class="line">       &#125;</span><br><span class="line">       childOb = !shallow &amp;&amp; observe(newVal);</span><br><span class="line">       dep.notify();  <span class="comment">//æ´¾å‘æ›´æ–°</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å“åº”å¼å¯¹è±¡å°±æ˜¯ç»™å®ƒå¯¹è±¡ä¸Šçš„å±æ€§æ·»åŠ getter/setter,æ— è®ºè®¿é—®è¿˜æ˜¯ä¿®æ”¹å®ƒéƒ½æœ‰ä¸€å®šçš„é€»è¾‘éœ€è¦æ‰§è¡Œ</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121014image-20201210145546930.png"                      alt="image-20201210145546930" style="zoom:70%;"                 ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121015image-20201210150502903.png"                      alt="image-20201210150502903" style="zoom:70%;"                 ></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>1ã€data ä¸­æ¯ä¸ªå£°æ˜çš„å±æ€§ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª ä¸“å±çš„ä¾èµ–æ”¶é›†å™¨ <code>subs</code></p><p>2ã€å½“é¡µé¢ä½¿ç”¨åˆ° æŸä¸ªå±æ€§æ—¶ï¼Œé¡µé¢çš„ <code>watcher</code> å°±ä¼šè¢« æ”¾åˆ° ä¾èµ–æ”¶é›†å™¨ <code>subs</code> ä¸­</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020121015image-20201210150707130.png"                      alt="image-20201210150707130"                ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueâ€”DOMæŒ‚è½½æœºåˆ¶</title>
      <link href="2020/12/03/Vue-DOM%E6%8C%82%E8%BD%BD%E6%9C%BA%E5%88%B6/"/>
      <url>2020/12/03/Vue-DOM%E6%8C%82%E8%BD%BD%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>Vue ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡ <code>$mount</code> å®ä¾‹æ–¹æ³•å»æŒ‚è½½ <code>vm</code> çš„<br><a id="more"></a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Temp <span class="keyword">from</span> <span class="string">&#x27;./Temp.vue&#x27;</span>;</span><br><span class="line"><span class="built_in">window</span>.vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">// elæ˜¯å®ä¾‹æŒ‚è½½ç‚¹ï¼Œä¼šå°†æ ¹ç»„ä»¶æ›¿æ¢æ‰åŸæ–‡æ¡£ä¸­idä¸º app æ ‡ç­¾</span></span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="comment">// é€šè¿‡renderå‡½æ•°æ¸²æŸ“</span></span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡ŒAppæ˜¯æ ¹ç»„ä»¶</span></span><br><span class="line">        h(App)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Temp.vue</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line"> è¿™æ˜¯æ¶ˆæ¯ï¼š&#123;&#123;message&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="initMixin"><a href="#initMixin" class="headerlink" title="initMixin"></a>initMixin</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMixin</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  Vue.prototype._init = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> vm = <span class="built_in">this</span>;</span><br><span class="line">    <span class="comment">// a uid</span></span><br><span class="line">    vm._uid = uid$<span class="number">3</span>++;</span><br><span class="line">    <span class="comment">// a flag to avoid this being observed</span></span><br><span class="line">    vm._isVue = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// expose real self  åˆå§‹åŒ–</span></span><br><span class="line">    vm._self = vm;</span><br><span class="line">    <span class="comment">/******************/</span></span><br><span class="line">    initLifecycle(vm);</span><br><span class="line">    initEvents(vm);</span><br><span class="line">    initRender(vm);</span><br><span class="line">    callHook(vm, <span class="string">&#x27;beforeCreate&#x27;</span>);</span><br><span class="line">    initInjections(vm); <span class="comment">// resolve injections before data/props</span></span><br><span class="line">    initState(vm);</span><br><span class="line">    initProvide(vm); <span class="comment">// resolve provide after data/props</span></span><br><span class="line">    <span class="comment">/**************************/</span></span><br><span class="line">    callHook(vm, <span class="string">&#x27;created&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (vm.$options.el) &#123;</span><br><span class="line">      <span class="comment">//è·³è½¬ 10976è¡Œ</span></span><br><span class="line">      vm.$mount(vm.$options.el);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><h2 id="mount"><a href="#mount" class="headerlink" title="$mount"></a>$mount</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.$mount = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  el,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrating</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  el = el &amp;&amp; inBrowser ? query(el) : <span class="literal">undefined</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> mountComponent(<span class="built_in">this</span>, el, hydrating)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mount = Vue.prototype.$mount;</span><br><span class="line">Vue.prototype.$mount = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  el,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrating</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  el = el &amp;&amp; query(el);</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> options = <span class="built_in">this</span>.$options;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">//å¦‚æœæ²¡æœ‰renderå‡½æ•°ï¼Œé‚£ä¹ˆè·å–æ¨¡æ¿å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°</span></span><br><span class="line">  <span class="keyword">if</span> (!options.render) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> mount.call(<span class="built_in">this</span>, el, hydrating)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†vueåŸå‹ä¸Šçš„<code>$mount</code>æ–¹æ³•ä¿å­˜åœ¨mountä¸­ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012121629474342020121216.png"                      alt="image-20201212162947434"                ></p><p>ç„¶åVueåŸå‹ä¸Š<code>$mount</code>æ–¹æ³•ä¸Šè¢«ä¸€ä¸ª<code>æ–°çš„æ–¹æ³•è¦†ç›–</code>äº†ã€‚æ–°æ–¹æ³•ä¼šè°ƒç”¨åŸå§‹çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸è¢«ç§°ä¸º<code>å‡½æ•°åŠ«æŒ</code>ã€‚é€šå¸¸å‡½æ•°åŠ«æŒå¯ä»¥åœ¨åŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Š<code>æ–°å¢å…¶ä»–åŠŸèƒ½</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> el === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> selected = <span class="built_in">document</span>.querySelector(el);</span><br><span class="line">    <span class="keyword">if</span> (!selected) &#123;</span><br><span class="line">      process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; warn(</span><br><span class="line">        <span class="string">&#x27;Cannot find element: &#x27;</span> + el</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> el</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>queryçš„ä¸»è¦ä½œç”¨æ˜¯è·å–DOMå…ƒç´ </p><h2 id="mountComponent"><a href="#mountComponent" class="headerlink" title="mountComponent"></a>mountComponent</h2><p>$mountæ–¹æ³•å°†idè½¬æ¢ä¸ºdomå…ƒç´ åï¼Œä½¿ç”¨mountComponentå‡½æ•°å°†Vue.jså®ä¾‹æŒ‚è½½åˆ°DOMä¸Šã€‚</p><blockquote><p>å®ä¾‹æŒ‚è½½åˆ°DOMä¸Šå®é™…å°±æ˜¯å°†æ¨¡æ¿æ¸²æŸ“åˆ°æŒ‡å®šDOMå…ƒç´ ä¸­ã€‚è€Œä¸”æ˜¯æŒç»­æ€§çš„ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥é‡æ–°è§¦å‘æ¸²æŸ“åˆ°æŒ‡å®šDOMå…ƒç´ ä¸­</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mountComponent</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  vm,</span></span></span><br><span class="line"><span class="function"><span class="params">  el,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrating</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  vm.$el = el;</span><br><span class="line">  <span class="keyword">if</span> (!vm.$options.render) &#123;</span><br><span class="line">    vm.$options.render = createEmptyVNode;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">//å¼€å‘ç¯å¢ƒä¼šå‘å‡ºâš ï¸è­¦å‘Š</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeMountæ–¹æ³•</span></span><br><span class="line">  callHook(vm, <span class="string">&#x27;beforeMount&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®šä¹‰æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">var</span> updateComponent;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; config.performance &amp;&amp; mark) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//æŒ‚è½½</span></span><br><span class="line">    updateComponent = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//vm._render() ==&gt; ç”Ÿæˆvnode  ä¼ å…¥update</span></span><br><span class="line">      vm._update(vm._render(), hydrating);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> Watcher(vm, updateComponent, noop, &#123;</span><br><span class="line">    before: <span class="function"><span class="keyword">function</span> <span class="title">before</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (vm._isMounted) &#123;</span><br><span class="line">        callHook(vm, <span class="string">&#x27;beforeUpdate&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="literal">true</span> <span class="comment">/* isRenderWatcher */</span>);</span><br><span class="line">  hydrating = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (vm.$vnode == <span class="literal">null</span>) &#123;</span><br><span class="line">    vm._isMounted = <span class="literal">true</span>;</span><br><span class="line">    callHook(vm, <span class="string">&#x27;mounted&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> vm  <span class="comment">//è¿”å›vmå®ä¾‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>vm._update</code>çš„ä½œç”¨è°ƒç”¨è™šæ‹ŸDOMä¸­<code>patchæ–¹æ³•</code>å»æ‰§è¡Œ<code>èŠ‚ç‚¹å¯¹æ¯”</code>ä¸<code>æ¸²æŸ“æ“ä½œ</code></p><p><code>vm._render()</code>æ‰§è¡Œæ¸²æŸ“å‡½æ•°å¾—åˆ°ä¸€ä»½æœ€æ–°çš„<code>VNodeèŠ‚ç‚¹æ ‘</code></p><p>==å…ˆæ‰§è¡Œæ¸²æŸ“å‡½æ•°å¾—åˆ°ä¸€ä»½æœ€æ–°çš„nodeèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡_updateæ–¹æ³•å¯¹æœ€æ–°çš„Vnodeå’Œæ—§Vnodeè¿›è¡Œå¯¹æ¯”å¹¶æ›´æ–°domèŠ‚ç‚¹ã€‚==</p><h2 id="new-Watcher"><a href="#new-Watcher" class="headerlink" title="new Watcher"></a>new Watcher</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Watcher(vm, updateComponent, noop, &#123;</span><br><span class="line">    before: <span class="function"><span class="keyword">function</span> <span class="title">before</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (vm._isMounted) &#123;</span><br><span class="line">        callHook(vm, <span class="string">&#x27;beforeUpdate&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="literal">true</span> <span class="comment">/* isRenderWatcher */</span>);</span><br></pre></td></tr></table></figure><p>åœ¨new Watcherä¸­å¾ˆé‡è¦çš„ä¸€æ­¥å°±æ˜¯å°†<code>updateComponent</code> èµ‹å€¼ç»™<code>watcher.getter</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Watcher = <span class="function"><span class="keyword">function</span> <span class="title">Watcher</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  vm,</span></span></span><br><span class="line"><span class="function"><span class="params">  expOrFn,</span></span></span><br><span class="line"><span class="function"><span class="params">  cb,</span></span></span><br><span class="line"><span class="function"><span class="params">  options,</span></span></span><br><span class="line"><span class="function"><span class="params">  isRenderWatcher</span></span></span><br><span class="line"><span class="function"><span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">typeof</span> expOrFn === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.getter = expOrFn;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.getter = parsePath(expOrFn);</span><br><span class="line">    </span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012121655076302020121216.png"                      alt="image-20201212165507630"                ></p><p><strong>æŒ‚è½½æ˜¯æŒç»­æ€§çš„ï¼Œè¿™ä¸ªå…³é”®åœ¨äºç”¨new watcherï¼Œå½“å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°<code>updateComponent</code> æ”¯æŒå‡½æ•°ï¼Œå®ƒä¼šåŒæ—¶è§‚å¯Ÿå‡½æ•°ä¸­è¯»å–æ‰€æœ‰vueå®ä¾‹ä¸Šçš„å“åº”å¼æ•°æ®</strong></p><p>æŒ‚è½½å®Œæ¯•åè¿˜æœ‰æ‰§è¡Œ<code>mounted</code>é’©å­å‡½æ•°</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012131047035452020121310.png"                      alt="image-20201213104703545" style="zoom:50%;"                 ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-åˆå§‹åŒ–åŸç†</title>
      <link href="2020/12/01/Vue-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8E%9F%E7%90%86/"/>
      <url>2020/12/01/Vue-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>Vueçš„åˆå§‹åŒ–é€»è¾‘å†™çš„éå¸¸æ¸…æ¥šï¼ŒæŠŠä¸åŒçš„åŠŸèƒ½é€»è¾‘æ‹†æˆä¸€äº›å•ç‹¬çš„å‡½æ•°æ‰§è¡Œï¼Œè®©ä¸»çº¿é€»è¾‘ä¸€ç›®äº†ç„¶ï¼Œè¿™æ ·çš„ç¼–ç¨‹æ€æƒ³æ˜¯éå¸¸å€¼å¾—å€Ÿé‰´å’Œå­¦ä¹ çš„ã€‚</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class="line">    !(<span class="built_in">this</span> <span class="keyword">instanceof</span> Vue)</span><br><span class="line">  ) &#123;</span><br><span class="line">    warn(<span class="string">&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>._init(options);</span><br><span class="line">&#125;</span><br><span class="line">initMixin(Vue);</span><br><span class="line">stateMixin(Vue);</span><br><span class="line">eventsMixin(Vue);</span><br><span class="line">lifecycleMixin(Vue);</span><br><span class="line">renderMixin(Vue);</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ä¸­é¦–å…ˆè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œç„¶åè¿›è¡Œ_initåˆå§‹åŒ–</p><h2 id="init"><a href="#init" class="headerlink" title="_init"></a>_init</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMixin</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  Vue.prototype._init = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> vm = <span class="built_in">this</span>;</span><br><span class="line">    vm.$options = mergeOptions(</span><br><span class="line">        resolveConstructorOptions(vm.constructor),</span><br><span class="line">        options || &#123;&#125;,</span><br><span class="line">        vm</span><br><span class="line">        ...</span><br><span class="line">    vm._self = vm;</span><br><span class="line">    initLifecycle(vm);</span><br><span class="line">    initEvents(vm);</span><br><span class="line">    initRender(vm);</span><br><span class="line">    callHook(vm, <span class="string">&#x27;beforeCreate&#x27;</span>);</span><br><span class="line">    initInjections(vm); <span class="comment">// åœ¨æ•°æ®/é“å…·ä¹‹å‰è§£å†³æ³¨å…¥é—®é¢˜</span></span><br><span class="line">    initState(vm);</span><br><span class="line">    initProvide(vm); <span class="comment">// è§£å†³æä¾›æ•°æ®/é“å…·åçš„é—®é¢˜</span></span><br><span class="line">    callHook(vm, <span class="string">&#x27;created&#x27;</span>); </span><br><span class="line">    </span><br><span class="line">      <span class="comment">//å¦‚æœæ²¡æœ‰elé€‰é¡¹ï¼Œå®ƒå°±å¤„äºæœªæŒ‚è½½çŠ¶æ€ï¼Œæ²¡æœ‰å…³è”çš„domï¼Œ</span></span><br><span class="line">      <span class="keyword">if</span> (vm.$options.el) &#123;</span><br><span class="line">         <span class="comment">//è°ƒç”¨mountæŒ‚è½½vmï¼Œæ¸²æŸ“æˆçœŸå®dom</span></span><br><span class="line">         vm.$mount(vm.$options.el);</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å‡½æ•°initMixinè¢«è°ƒç”¨ï¼Œä¼šå‘vueæ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æ·»åŠ <code>init</code>æ–¹æ³•ï¼Œå½“æ‰§è¡Œnew Vue(),å°±ä¼šè°ƒç”¨_initæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®ç°ä¸€ç³»åˆ—åˆå§‹åŒ–æ“ä½œï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸï¼ŒåŠå“åº”å¼ç³»ç»Ÿæµç¨‹çš„å¯åŠ¨ç­‰</p><h3 id="mergeOptions"><a href="#mergeOptions" class="headerlink" title="mergeOptions"></a>mergeOptions</h3><p>è¿™ä¸ªå‡½æ•°çš„ç›®çš„å°†ç”¨æˆ·ä¼ é€’çš„<code>options</code>,ä¸å½“å‰æ„é€ å‡½æ•°çš„<code>options</code>åŠ==çˆ¶çº§å®ä¾‹==æ„é€ å‡½æ•°çš„<code>options</code>åˆå¹¶æˆä¸€ä¸ªæ–°çš„<code>options</code> èµ‹å€¼ç»™<code>$options</code>å±æ€§ï¼Œ</p><p>ä¸ºä»€ä¹ˆä¼šæœ‰çˆ¶çº§ï¼Ÿ </p><p>å› ä¸ºvue.jså¯èƒ½æ˜¯ä¸€ä¸ªå­ç»„ä»¶</p><p>åˆå§‹åŒ–äº‹ä»¶ä¸å±æ€§åè§¦å‘ç”Ÿå‘½å‘¨æœŸ<code>beforeCreate</code>ï¼Œ</p><p>éšååˆå§‹åŒ–provide/injectå’Œstateåè§¦å‘<code>created</code></p><h2 id="callHookå‡½æ•°åŸç†"><a href="#callHookå‡½æ•°åŸç†" class="headerlink" title="callHookå‡½æ•°åŸç†"></a>callHookå‡½æ•°åŸç†</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callHook</span> (<span class="params">vm, hook</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// #7573 disable dep collection when invoking lifecycle hooks</span></span><br><span class="line">  pushTarget();</span><br><span class="line">  <span class="keyword">var</span> handlers = vm.$options[hook];</span><br><span class="line">  <span class="keyword">if</span> (handlers) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = handlers.length; i &lt; j; i++) &#123;</span><br><span class="line">      <span class="comment">//æ•è·é’©å­å‡½æ•°å‘ç”Ÿçš„é”™è¯¯ jså•çº¿ç¨‹å¦‚æœé”™è¯¯äº†å°±ä¼šåœæ­¢å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        handlers[i].call(vm);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        handleError(e, vm, (hook + <span class="string">&quot; hook&quot;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (vm._hasHookEvent) &#123;</span><br><span class="line">    vm.$emit(<span class="string">&#x27;hook:&#x27;</span> + hook);</span><br><span class="line">  &#125;</span><br><span class="line">  popTarget();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>callHookçš„ä½œç”¨æ˜¯è§¦å‘ç”¨æˆ·è®¾ç½®ç”Ÿå‘½å‘¨æœŸé’©å­</code>ï¼Œè€Œç”¨æˆ·è®¾ç½®çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¼šåœ¨new Vueï¼ˆï¼‰é€šè¿‡å‚æ•°ä¼ é€’ç»™vueï¼Œå¯ä»¥é€šè¿‡optionså‚æ•°å¾—åˆ°ç”¨æˆ·è®¾ç½®çš„ç”Ÿå‘½å‘¨æœŸé’©å­<code>ï¼ˆvm.$options.createdè·å–åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«é’©å­å‡½æ•°ï¼‰</code></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012112320016442020121123.png"                      alt="image-20201211232001644"                ></p><h3 id="ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­è½¬æ¢æˆæ•°ç»„ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­è½¬æ¢æˆæ•°ç»„ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­è½¬æ¢æˆæ•°ç»„ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­è½¬æ¢æˆæ•°ç»„ï¼Ÿ</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨Vue.mixinä¸­ä¹Ÿå¯ä»¥å†™å…¥ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¦‚æœä¸ä¸€ä¸ªç»„ä»¶ä¸€èµ·æ··ç”¨ï¼Œéœ€è¦åŒæ—¶è§¦å‘2ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè€Œè½¬æˆæ•°ç»„åï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­åˆ—è¡¨ä¸­ä¿å­˜å¤šä¸ªç”Ÿå‘½å‘¨æœŸé’©å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mixin</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mixin <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mixins:[mixin],</span><br><span class="line">    name:<span class="string">&quot;temp&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">         msg:<span class="string">&quot;hello vue&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;created&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012112330004232020121123.png"                      alt="image-20201211233000423"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012112332129822020121123.png"                      alt="image-20201211233212982"                ></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>å„ç§åˆå§‹åŒ–é€»è¾‘æˆ‘ä»¬å…ˆä¸çœ‹ã€‚åœ¨åˆå§‹åŒ–çš„æœ€åï¼Œæ£€æµ‹åˆ°å¦‚æœæœ‰elå±æ€§ï¼Œåˆ™è°ƒç”¨vm.$mountæ–¹æ³•æŒ‚è½½vmï¼ŒæŒ‚è½½çš„ç›®æ ‡å°±æ˜¯==æŠŠæ¨¡æ¿æ¸²æŸ“æˆæœ€ç»ˆçš„ DOM==</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„</title>
      <link href="2020/11/15/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%9A%84%E6%9E%B6%E6%9E%84/"/>
      <url>2020/11/15/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%9A%84%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„"><a href="#1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„"></a>1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„</h2><p> é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œ<code>æ¶æ„æ˜¯ä¸ºéœ€æ±‚æœåŠ¡çš„</code>ã€‚</p><a id="more"></a><p> å‰ç«¯æ¶æ„å­˜åœ¨çš„ç›®çš„ï¼Œå°±æˆ‘ä¸ªäººç†è§£æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>  1ã€æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä»£ç çš„å¯è¯»æ€§ä¸€å®šæ˜¯å¾ˆå¼ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªæ–°äººåŠ å…¥å›¢é˜Ÿï¼Œé‚£ä¹ˆä»–æ¥æ‰‹è¿™ä¸ªé¡¹ç›®ï¼Œä¸€å®šæ˜¯å®¹æ˜“ä¸Šæ‰‹çš„ï¼Œèƒ½ç®€å•è½»æ¾çš„äº†è§£æ•´ä¸ªå‰ç«¯éƒ¨åˆ†çš„ç›¸äº’å…³ç³»ï¼Œä»è€Œæ‰¾åˆ°è‡ªå·±éœ€è¦é‡ç‚¹å…³æ³¨çš„ç‚¹ã€‚è€Œä¸æ˜¯éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´å»ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®çš„å¾ˆå¤šç»†èŠ‚ï¼Œæ‰èƒ½å¼€å§‹ä¸Šæ‰‹åšä¸œè¥¿ã€‚å°±æ–‡ä»¶æ¥è¯´ï¼Œå¯ä»¥ä»æ–‡ä»¶åä¸Šï¼Œåˆ†æ¸…å“ªäº›æ˜¯é¡µé¢ã€å“ªäº›æ˜¯é€»è¾‘ã€å“ªäº›æ˜¯æ ·å¼ã€å“ªäº›æ˜¯å¯ä»¥å¤ç”¨çš„ç»„ä»¶ã€å“ªäº›æ˜¯å›¾æ ‡ç»„ã€åˆæœ‰å“ªäº›æ˜¯ç§»åŠ¨ç«¯æˆ–æ˜¯PCç«¯ä¸“äº«çš„æ ·å¼/é€»è¾‘ç­‰ã€‚å°±ä»£ç æ¥è¯´ï¼ŒåŒ…æ‹¬ç»Ÿä¸€çš„å‘½åé£æ ¼ï¼Œå°è£…åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œçš„ä»£ç çš„ç›¸å…³æ€§è¶³å¤Ÿå¼ºç­‰ã€‚</p><p>  2ã€æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä¸€å®šæ˜¯æ˜“äºç»´æŠ¤çš„ï¼Œä¾‹å¦‚åœ¨æ–°å¢éœ€æ±‚ã€æ›´æ”¹éœ€æ±‚ã€ä¿®æ­£bugï¼Œéƒ½ä¸ä¼šé€ æˆæ„æ–™ä¹‹å¤–çš„å˜åŒ–ï¼Œæ¯”å¦‚è¯´ä¿®æ”¹äº†ä¸€ä¸ªé¡µé¢ç»„ä»¶çš„å†…å®¹ï¼Œå´å¯¼è‡´å¦å¤–ä¸€ä¸ªé¡µé¢ç»„ä»¶å‘ç”Ÿå˜åŒ–ï¼ˆè¿™ä¹Ÿå¤ªå‘äº†ï¼‰ã€‚å› æ­¤ï¼Œè¦ä½è€¦åˆï¼Œé«˜å†…èšï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºæ˜¯å¯é¢„æœŸçš„ã€‚</p><p>  3ã€æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä¸€å®šæ‰©å±•æ€§è¦å¼ºï¼Œä¸èƒ½å†™æ­»ã€‚éœ€æ±‚å˜æ›´å¤ªTMæ­£å¸¸äº†ï¼Œæ–°å¢éœ€æ±‚ä¹Ÿå¤ªTMæ­£å¸¸äº†ã€‚å› æ­¤å¥½çš„æ¶æ„ï¼Œå¿…é¡»è¦è€ƒè™‘åˆ°è¿™äº›æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºä»–ä»¬æ˜¯ä¸€å®šä¼šå‘ç”Ÿçš„ã€‚æ‰€ä»¥ï¼Œ<code>ä¸€å®šè¦é¿å…æŠŠä»£ç å†™æ­»</code>ã€‚æ¯”å¦‚é¡µé¢ç»„ä»¶Aé‡Œéœ€è¦æœ‰ä¸€ä¸ªæ—¥å†ç»„ä»¶ï¼Œè€Œè¿™ä¸ªæ—¥å†ç»„ä»¶å¼•ç”¨çš„æ˜¯åˆ«äººçš„ï¼ˆæ¯”å¦‚ä»githubä¸Šæ‰¾çš„ï¼‰ã€‚é‚£ä¹ˆå°½é‡ä¸è¦ç›´æ¥åœ¨é¡µé¢ç»„ä»¶Aé‡Œé¢ç›´æ¥å¼•ç”¨è¿™ä¸ªæ—¥å†ç»„ä»¶ï¼Œè€Œæ˜¯å°†å†™ä¸€ä¸ªæ—¥å†ç»„ä»¶Bï¼Œåœ¨è¿™ä¸ªæ—¥å†ç»„ä»¶Bé‡Œå°è£…ä½ å¼•ç”¨çš„æ—¥å†ç»„ä»¶Cï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ—¥å†ç»„ä»¶Bæ¥è¿›è¡Œæ“ä½œã€‚<code>åŸå› å¾ˆç®€å•ï¼Œå‡å¦‚æŸå¤©äº§å“ç»ç†è¯´ï¼Œè¿™ä¸ªæ—¥å†ç»„ä»¶å¤ªä¸‘äº†ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªå§ã€‚å¦‚æœä½ ç›´æ¥åœ¨é¡µé¢ç»„ä»¶Aé‡Œå†…åµŒè¿™ä¸ªå¼•ç”¨çš„æ—¥å†ç»„ä»¶Cï¼Œä½ å¾ˆå¯èƒ½å°±è¦æ”¹å¾ˆå¤šä»£ç ï¼ˆå› ä¸ºä¸åŒæ—¥å†ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•å’Œæš´éœ²çš„æ¥å£å¯èƒ½ä¸åŒï¼‰</code>ã€‚å‡å¦‚ä½ è¿˜åœ¨å…¶ä»–å¤šä¸ªåœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªæ—¥å†ç»„ä»¶ï¼Œé‚£å°±æ›´ç³Ÿç³•äº†ï¼æ¯ä¸ªåœ°æ–¹éƒ½è¦æ”¹ã€‚è€Œè‹¥æ˜¯å°†å¼•ç”¨çš„æ—¥å†ç»„ä»¶Cå°è£…åˆ°è‡ªå·±å†™çš„æ—¥å†ç»„ä»¶Bä¹‹ä¸­ï¼Œé‚£ä¹ˆä½ åªéœ€è¦æ”¹æ—¥å†ç»„ä»¶Bé‡Œçš„ç›¸åº”ä»£ç å³å¯ï¼Œè€Œå› ä¸ºæ—¥å†ç»„ä»¶Bæš´éœ²çš„æ¥å£æ˜¯ä¸å˜çš„ï¼Œé‚£ä¹ˆè‡ªç„¶ä¸ç”¨ä¿®æ”¹é¡µé¢ä¸­çš„ä»£ç äº†ã€‚</p><p> é™„å›¾ï¼Œä»¥æ—¥å†ç»„ä»¶ä¸ºä¾‹ï¼Œæ˜¯å¦è€ƒè™‘åˆ°æ‰©å±•æ€§çš„ç»“æœ</p><p> <strong>æœªè€ƒè™‘åˆ°æ‰©å±•æ€§</strong></p><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011302242444772020113022.png"                      alt="image-20201130224244477"                ></p><p> <strong>è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼š</strong></p><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011302243019392020113022.png"                      alt="image-20201130224301939"                ></p><p>  4ã€ä¾¿äºååŒã€‚åŒ…æ‹¬å‰ç«¯å’Œåç«¯çš„ååŒï¼Œå‰ç«¯å’Œå‰ç«¯ä¹‹é—´çš„ååŒã€‚å…·ä½“æ¥è¯´ï¼Œå‰åç«¯çš„ååŒé€šå¸¸æ˜¯ä»¥ajaxä¸ºäº¤äº’ï¼Œé‚£ä¹ˆåº”è‡³å°‘æœ‰ä¸€ä¸ªç”¨äºä¸“é—¨å°è£…äº†æ‰€æœ‰ajaxè¯·æ±‚çš„æ–‡ä»¶ï¼Œæ‰€æœ‰ajaxè¯·æ±‚éƒ½å°è£…åœ¨è¿™é‡Œã€‚åœ¨å¼€å‘æ—¶ï¼Œè¿™é‡Œå°è£…çš„æ–¹æ³•åº”è¯¥å¯ä»¥æ¨¡æ‹Ÿå‘é€å’Œæ¥æ”¶çº¦å®šå¥½çš„äº¤äº’å†…å®¹ï¼Œæ–¹ä¾¿å¼€å‘è”è°ƒã€‚è€Œå‰ç«¯å’Œå‰ç«¯çš„ååŒï¼Œä¸»è¦ä½“ç°åœ¨åŒæ—¶åœ¨æ›´æ”¹ä»£ç æ—¶ï¼Œä¸ä¼šå½±å“å¯¹æ–¹ä»£ç çš„æ­£å¸¸è¿è¡Œã€‚å› æ­¤è¦æ±‚å°è£…ã€è§£è€¦ä»¥åŠä½å¹²æ‰°åº¦æ˜¯å¿…é¡»çš„ã€‚</p><p>  5ã€è‡ªåŠ¨åŒ–è‡ªåŠ¨æ‰“åŒ…ï¼Œå‹ç¼©ï¼Œæ··æ·†ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå†åŠ ä¸Šè‡ªåŠ¨å•å…ƒæµ‹è¯•ã€‚</p><p>  æ€»ç»“ï¼šæ€»ç»“æ¥è¯´ï¼Œä¸€ä¸ªå¥½çš„æ¶æ„çš„ç›®çš„æ˜¯ï¼Œè®©å‰ç«¯å†™ä»£ç å†™çš„èˆ’æœï¼Œè®©åç«¯è”è°ƒçš„èˆ’æœï¼Œè®©äº§å“ç»ç†æ”¹éœ€æ±‚æ”¹çš„èˆ’æœã€‚</p><h2 id="2ã€æˆ‘å¦‚ä½•è®¾è®¡æ¶æ„"><a href="#2ã€æˆ‘å¦‚ä½•è®¾è®¡æ¶æ„" class="headerlink" title="2ã€æˆ‘å¦‚ä½•è®¾è®¡æ¶æ„"></a>2ã€æˆ‘å¦‚ä½•è®¾è®¡æ¶æ„</h2><p> æˆ‘ä¸æ•¢è¯´è‡ªå·±çš„æ¶æ„æ˜¯å¥½çš„æ¶æ„ï¼ˆæ˜¾ç„¶ä¸æ˜¯å•¦ï¼‰ï¼Œåªèƒ½åˆ†äº«è‡ªå·±æœ€è¿‘åšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œå®ƒçš„æ¶æ„çš„å¦‚ä½•åšçš„ã€‚</p><h3 id="é¦–å…ˆï¼Œç¡®å®šéœ€æ±‚ï¼š"><a href="#é¦–å…ˆï¼Œç¡®å®šéœ€æ±‚ï¼š" class="headerlink" title="é¦–å…ˆï¼Œç¡®å®šéœ€æ±‚ï¼š"></a><strong>é¦–å…ˆï¼Œç¡®å®šéœ€æ±‚ï¼š</strong></h3><p>  1ã€ä¸€ä¸ªä¸­å°å‹ç½‘ç«™ï¼ŒåŒæ—¶é¢å‘ç§»åŠ¨ç«¯å’ŒPCç«¯ï¼ˆå•ç«¯å¤§æ¦‚15ä¸ªé¡µé¢ï¼Œç®—ä¸Šå¼¹çª—å¤§çº¦20ä¸ªï¼‰ã€‚2ã€é¢„ç®—æœ‰é™ï¼ˆç»™çš„é’±å°‘ï¼‰ï¼Œå¼€å‘æ—¶é—´æœ‰é™ï¼ˆä¸€ä¸ªæœˆï¼‰ã€‚3ã€å¯èƒ½å­˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šçš„éœ€æ±‚å˜æ›´ï¼ˆæ¯”å¦‚å¢åŠ é¡µé¢æˆ–ä¿®æ”¹æŸäº›é¡µé¢å†…å®¹ï¼‰ã€‚4ã€å®¢æˆ·å¯èƒ½ä¸å¤ªåœ¨ä¹ä¼˜åŒ–ï¼ˆä½†æ˜¯æˆ‘è‡ªå·±åœ¨ä¹å•Šï¼ï¼‰5ã€è¦æ±‚å…¼å®¹IE9ä»¥ä¸Šã€‚</p><h3 id="å…¶æ¬¡å¼€å§‹å†³å®šï¼š"><a href="#å…¶æ¬¡å¼€å§‹å†³å®šï¼š" class="headerlink" title="å…¶æ¬¡å¼€å§‹å†³å®šï¼š"></a><strong>å…¶æ¬¡å¼€å§‹å†³å®šï¼š</strong></h3><p>  1ã€å…¼å®¹IE9ä»¥ä¸Šè¯´æ˜å¯ä»¥ä½¿ç”¨ä¸»æµæ¡†æ¶ï¼Œè€Œæ— éœ€å¿…é¡»ä½¿ç”¨jqueryã€‚å› æ­¤æˆ‘é‡‡ç”¨äº†vueï¼Œç‰ˆæœ¬æ˜¯2.0ï¼›2ã€é¢„ç®—æœ‰é™ï¼Œæ—¶é—´æœ‰é™ï¼Œå› æ­¤PCç«¯å’Œç§»åŠ¨ç«¯å…±htmlå’Œjsï¼Œç‹¬ç«‹cssã€‚3ã€é¡µé¢æœ‰é™ï¼Œå› æ­¤æ— éœ€å°†æ¶æ„å±‚çº§åˆ’åˆ†çš„æ¯”è¾ƒç»†ï¼Œåªéœ€è¦æŒ‰å…¶ç±»å‹åˆ’åˆ†å³å¯ï¼›4ã€æ ¹æ®åŸå‹å›¾æ¥çœ‹ï¼Œé¡µé¢å¤æ‚ç¨‹åº¦æœ‰é™ï¼Œå¤ç”¨éƒ¨åˆ†ä¸æ˜¯å¾ˆå¤šï¼Œå› æ­¤å¯ä»¥ç¡®å®šå“ªäº›ä¸œè¥¿éœ€è¦å°è£…å¤ç”¨ï¼Œå“ªäº›æ¯”è¾ƒå¤æ‚éœ€è¦ç‹¬ç«‹å°è£…ï¼Œå“ªäº›æ¯”è¾ƒç®€å•ä¸ºäº†ç®€åŒ–å¼€å‘éš¾åº¦å¯ä»¥ç›´æ¥è€¦åˆã€‚5ã€è‡ªå·±æ¯”è¾ƒç†Ÿç»ƒå•é¡µé¢ç½‘ç«™ï¼Œå› æ­¤é‡‡ç”¨ä»¥å•é¡µé¢ä¸ºä¸»ï¼Œå¼‚æ­¥åŠ è½½å…¶ä»–é¡µé¢çš„å½¢å¼ã€‚</p><p> äºæ˜¯ä½¿ç”¨ç›¸å…³é…å¥—çš„ä¸œè¥¿ï¼Œæ¯”å¦‚webpackï¼Œvue-routerç­‰ï¼Œå¦å¤–ä¸ºäº†å¼€å‘å’Œç”Ÿäº§çš„æ–¹ä¾¿æ€§ï¼Œé‡‡ç”¨ä»¥ä¸‹æ¨¡å¼è¿›è¡Œå¼€å‘ã€‚</p><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011302243206212020113022.png"                      alt="image-20201130224320621"                ></p><hr><h3 id="ç¬¬ä¸‰ï¼Œåˆ’åˆ†åŠŸèƒ½ã€‚"><a href="#ç¬¬ä¸‰ï¼Œåˆ’åˆ†åŠŸèƒ½ã€‚" class="headerlink" title="ç¬¬ä¸‰ï¼Œåˆ’åˆ†åŠŸèƒ½ã€‚"></a><strong>ç¬¬ä¸‰ï¼Œåˆ’åˆ†åŠŸèƒ½ã€‚</strong></h3><p> é¦–å…ˆæœ‰ä¸€ä¸ªæ ¹htmlï¼Œç”¨æˆ·éœ€è¦é€šè¿‡è®¿é—®å®ƒæ¥åŠ è½½æˆ‘ä»¬çš„jsé€»è¾‘ï¼Œå› æ­¤jsé€»è¾‘çš„ä»£ç è¢«å†™åœ¨main.jsä¹‹ä¸­ã€‚</p><p> åœ¨main.jsä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„å‰ç«¯ä»£ç å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p><ol><li>ç»„ä»¶æ ‘ï¼›</li><li>åŠŸèƒ½æ¨¡å—ï¼›</li><li><p>å„ç§èµ„æºï¼›</p><p>å¦‚ä¸‹å›¾ï¼š</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011302243474002020113022.png"                      alt="image-20201130224347400"                ></p><p>åŠŸèƒ½åˆ’åˆ†å¥½ä¹‹åï¼Œç›¸åŒåŠŸèƒ½çš„æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå‘½åé£æ ¼åº”è¯¥ç±»ä¼¼ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œç»„ä»¶æ ‘ç›¸å…³çš„ä¸œè¥¿ï¼Œé€šå¸¸æ˜¯ä»¥.vueç»“å°¾ï¼Œæ”¾ç½®åœ¨componentsæ–‡ä»¶å¤¹ä¸‹ï¼›èµ„æºï¼Œæœ‰å›¾ç‰‡æˆ–è€…å›½é™…åŒ–èµ„æºç­‰ï¼Œä»¥.pngæˆ–è€….jsæˆ–.jsonç»“å°¾ï¼Œæ”¾ç½®åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹ï¼›è€ŒåŠŸèƒ½æ’ä»¶ã€æœåŠ¡ç­‰ï¼Œå› ä¸ºå¯èƒ½è¢«å¤šå¤„å¼•ç”¨ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿å¼•ç”¨ï¼Œæ”¾åœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶å¤¹æ˜¯componentsæ–‡ä»¶å¤¹å’Œresourcesæ–‡ä»¶å¤¹çš„ä¸Šçº§æ–‡ä»¶å¤¹ï¼›</p></li></ol><hr><h3 id="ç¬¬å››ã€ç»†åŒ–åŠŸèƒ½æ¨¡å—"><a href="#ç¬¬å››ã€ç»†åŒ–åŠŸèƒ½æ¨¡å—" class="headerlink" title="ç¬¬å››ã€ç»†åŒ–åŠŸèƒ½æ¨¡å—"></a><strong>ç¬¬å››ã€ç»†åŒ–åŠŸèƒ½æ¨¡å—</strong></h3><p> åŠŸèƒ½ã€ç»„ä»¶æ ‘ä»¥åŠèµ„æºï¼Œæˆ‘ä»¬å·²ç»æ˜ç¡®äº†æœ‰å“ªäº›ä¸œè¥¿ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ˜ç¡®è¿™äº›ä¸œè¥¿è¯¥å¦‚ä½•ä»¥æ–‡ä»¶çš„å½¢å¼æ¥åˆ’åˆ†ã€‚</p><p> å¦‚ä¸‹å›¾ï¼š</p><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011302244049912020113022.png"                      alt="image-20201130224404991"                ></p><h3 id="1ã€é¡¹ç›®æ„å»ºç›¸å…³"><a href="#1ã€é¡¹ç›®æ„å»ºç›¸å…³" class="headerlink" title="1ã€é¡¹ç›®æ„å»ºç›¸å…³"></a><strong>1ã€é¡¹ç›®æ„å»ºç›¸å…³</strong></h3><p> å› ä¸ºè¦ä½¿ç”¨vue.jsï¼Œä¹Ÿè¦ä½¿ç”¨es6è¯­æ³•ï¼Œå› æ­¤<strong>babel</strong>æ˜¯å¿…é¡»çš„ï¼›åˆå› ä¸ºè¦è‡ªåŠ¨åŒ–æ··æ·†æ‰“åŒ…ï¼Œå› æ­¤<strong>webpack</strong>ä¹Ÿæ˜¯å¿…é¡»çš„ï¼›æœ€åå› ä¸ºè¦æ–¹ä¾¿å¤šäººååŒï¼Œå› æ­¤npmçš„<strong>package.json</strong>çš„é…ç½®ï¼Œæ–¹ä¾¿ä¸åŒäººå¯ä»¥å¿«é€Ÿè‡ªåŠ¨åŒ–é€šè¿‡npm installæ¥å®‰è£…ä¾èµ–ï¼Œä¹Ÿæ˜¯å¿…é¡»çš„ï¼›</p><h3 id="2ã€CDNç›¸å…³"><a href="#2ã€CDNç›¸å…³" class="headerlink" title="2ã€CDNç›¸å…³"></a><strong>2ã€CDNç›¸å…³</strong></h3><p> è€Œåˆå› ä¸ºæˆ‘ä»¬è¦é‡‡ç”¨å¤–éƒ¨å­—ä½“ï¼ˆéœ€æ±‚è¦æ±‚å¼•å…¥éå¸¸è§å­—ä½“ï¼‰ï¼Œå› æ­¤<strong>CDNåŠ é€Ÿ</strong>æ˜¯å¿…é¡»çš„ï¼Œè¯¥å­—ä½“æ–‡ä»¶æ”¾åœ¨htmlä¸­æ¥é…ç½®å¼•ç”¨å³å¯ï¼›</p><h3 id="3ã€é…ç½®å’Œæ’ä»¶"><a href="#3ã€é…ç½®å’Œæ’ä»¶" class="headerlink" title="3ã€é…ç½®å’Œæ’ä»¶"></a><strong>3ã€é…ç½®å’Œæ’ä»¶</strong></h3><p> æˆ‘ä»¬éœ€è¦ç›´æ¥å¼•å…¥ä¸€äº›æ’ä»¶å’Œé…ç½®æ–‡ä»¶ï¼›ä¸ºäº†ä½¿ç”¨vueï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œé‚£ä¹ˆå°±æ˜¯<strong>App.vue</strong>ï¼›ä½¿ç”¨vue-routerï¼Œæˆ‘ä»¬éœ€è¦é…ç½®è·¯ç”±æ–‡ä»¶ï¼Œå› æ­¤<strong>router-config.js</strong>è¿™ä¸ªè·¯ç”±é…ç½®ä¹Ÿæ˜¯å¿…é¡»çš„ï¼›ç„¶åæˆ‘ä»¬è¿˜éœ€è¦ä»¥æ’ä»¶å½¢å¼å¼•å…¥ä¸€äº›åŠŸèƒ½å’ŒæœåŠ¡ï¼Œå› æ­¤æœ‰äº†<strong>Plugin-å¼€å¤´çš„è‹¥å¹²ä¸ªvueæ’ä»¶</strong>ï¼Œè¿™äº›éƒ½æ˜¯æ ¹æ®éœ€è¦å°è£…å¥½çš„ä½è€¦åˆé«˜å†…èšæ–¹æ³•ï¼›</p><h3 id="4ã€éœ€è¦çš„npmä¾èµ–"><a href="#4ã€éœ€è¦çš„npmä¾èµ–" class="headerlink" title="4ã€éœ€è¦çš„npmä¾èµ–"></a><strong>4ã€éœ€è¦çš„npmä¾èµ–</strong></h3><p> å½“ç„¶ï¼Œè¦ä½¿ç”¨vueè‚¯å®šè¦å¼•å…¥<strong>vue.js</strong>ï¼›ç±»ä¼¼çš„è¿˜æœ‰<strong>vue-router.js</strong>å’Œå„ç§å…¼å®¹æ€§<strong>polyfill</strong>å’Œå…¨å±€æ’ä»¶ï¼›</p><h3 id="5ã€æŠ½ç¦»å‡ºçš„åŠŸèƒ½æ¨¡å—"><a href="#5ã€æŠ½ç¦»å‡ºçš„åŠŸèƒ½æ¨¡å—" class="headerlink" title="5ã€æŠ½ç¦»å‡ºçš„åŠŸèƒ½æ¨¡å—"></a><strong>5ã€æŠ½ç¦»å‡ºçš„åŠŸèƒ½æ¨¡å—</strong></h3><p> é™¤äº†ç›´æ¥å¼•ç”¨çš„è¿™äº›æ’ä»¶ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›å’Œé¡¹ç›®é«˜åº¦è€¦åˆçš„åŠŸèƒ½æœåŠ¡ï¼Œæˆ‘è®¤ä¸ºä¸èƒ½ä½œä¸ºæ’ä»¶ï¼Œä½†ä¾ç„¶éœ€è¦æŠ½ç¦»å‡ºæ¥å°è£…å¥½ï¼Œæ–¹ä¾¿ä½¿ç”¨å’Œä¿®æ”¹ï¼›å¦‚å°è£…ajaxè¯·æ±‚çš„<strong>ajax.js</strong>ï¼Œæ‰€æœ‰çš„ajaxè¯·æ±‚éƒ½æ”¾ç½®å…¶ä¸­ï¼Œåªå¯¹å¤–æš´éœ²æ¥å£ï¼Œæ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ï¼›åˆå¦‚å®æ—¶å›½é™…åŒ–åŠŸèƒ½çš„ç»„ä»¶<strong>LanguageManager.js</strong>ï¼Œä»–éœ€è¦å¼•å…¥å›½é™…åŒ–èµ„æºå’Œç®¡ç†å›½é™…åŒ–èµ„æºçš„åŠ è½½ï¼›åˆä¾‹å¦‚å®ç°è·¨ç»„ä»¶é€šä¿¡çš„<strong>event-bus.js</strong>åˆæ¯”å¦‚ç®¡ç†ç”¨æˆ·ä¿¡æ¯çš„<strong>user.js</strong></p><h3 id="6ã€æ€»ç»“"><a href="#6ã€æ€»ç»“" class="headerlink" title="6ã€æ€»ç»“"></a><strong>6ã€æ€»ç»“</strong></h3><p> è€Œè¿™äº›åˆ’åˆ†ï¼Œéƒ½ä½“ç°åœ¨ä¸Šå›¾ä¹‹ä¸­ã€‚è¿™å°±æ˜¯<strong>srcç›®å½•ä¸‹çš„åŠŸèƒ½æ¨¡å—æ–‡ä»¶</strong>ï¼Œæˆ‘ä»¬éœ€è¦çš„ç»å¤§å¤šæ•°åŠŸèƒ½éƒ½å¯ä»¥åŒ…æ‹¬åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§å®é™…å¼€å‘ä¸­çš„éœ€è¦ï¼Œå°†å¯¹åº”çš„åŠŸèƒ½å†™å…¥åœ¨è¿™äº›æ–‡ä»¶ä¸­å¹¶å¼•ç”¨å³å¯ï¼›</p><h3 id="ç¬¬äº”ã€ç»„ä»¶æ ‘"><a href="#ç¬¬äº”ã€ç»„ä»¶æ ‘" class="headerlink" title="ç¬¬äº”ã€ç»„ä»¶æ ‘"></a><strong>ç¬¬äº”ã€ç»„ä»¶æ ‘</strong></h3><p> ä¹‹å‰è°ˆäº†åŠŸèƒ½æ¨¡å—çš„åˆ’åˆ†ï¼Œæ¥ä¸‹æ¥æ˜¯ç»„ä»¶æ ‘ï¼›</p><p> å› æ­¤æ˜¯ä¸­å°å‹é¡µé¢ï¼Œå› æ­¤ç»„ä»¶æ ‘çš„å±‚çº§æ— éœ€å¤ªæ·±ï¼Œä½†è¯¥æŠ½ç¦»å‡ºæ¥çš„ä¾ç„¶è¿˜æ˜¯è¦æŠ½ç¦»ï¼Œå°½é‡ä¿è¯æŠ½ç¦»å‡ºæ¥çš„ç»„ä»¶è§£è€¦ä»¥åŠä¸€ä¸ªé¡µé¢ç»„ä»¶çš„é€»è¾‘ä¸è¦å¤ªå¤šï¼›</p><p> å¦‚ä¸‹å›¾ï¼š</p><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/SouthEast2020113022.png"                      alt="img"                ></p><h3 id="0ã€æ ¹ç»„ä»¶"><a href="#0ã€æ ¹ç»„ä»¶" class="headerlink" title="0ã€æ ¹ç»„ä»¶"></a><strong>0ã€æ ¹ç»„ä»¶</strong></h3><p> æ‰€æœ‰ç»„ä»¶æœ€ç»ˆå¾€ä¸Šæ‰¾ï¼Œéƒ½ä¼šæ‰¾åˆ°å…±åŒçš„æ ¹ç»„ä»¶App.vueï¼Œæ ¹ç»„ä»¶åªè´Ÿè´£ç®¡ç†ä»–çš„ç›´æ¥å­ç»„ä»¶ï¼›æ¯ä¸ªç»„ä»¶éƒ½åªè´Ÿè´£ç®¡ç†è‡ªå·±çš„ç›´æ¥å­ç»„ä»¶ï¼Œä¸è·¨çº§ç®¡ç†ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºè‡ªå·±çš„å­ç»„ä»¶ï¼ˆå¦åˆ™å¯èƒ½å› ä¸ºå­ç»„ä»¶çš„æœªåŠ è½½æˆ–é”™è¯¯è€Œå¯¼è‡´çˆ¶ç»„ä»¶é”™è¯¯ï¼‰ï¼Œåšåˆ°è§£è€¦å’Œå†…èšï¼›</p><h3 id="1ã€å¼¹çª—dialogå’Œå¼¹çª—tips"><a href="#1ã€å¼¹çª—dialogå’Œå¼¹çª—tips" class="headerlink" title="1ã€å¼¹çª—dialogå’Œå¼¹çª—tips"></a><strong>1ã€å¼¹çª—dialogå’Œå¼¹çª—tips</strong></h3><p> å› ä¸ºå¼¹çª—dialogå’Œå¼¹çª—æç¤ºtipså¯èƒ½åŒæ—¶å­˜åœ¨ï¼Œå› æ­¤å°†å…¶åˆ’åˆ†ä¸º2ä¸ªç»„ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†ï¼›</p><h3 id="2ã€æœªç™»å½•é¡µé¢å’Œç™»å½•é¡µé¢"><a href="#2ã€æœªç™»å½•é¡µé¢å’Œç™»å½•é¡µé¢" class="headerlink" title="2ã€æœªç™»å½•é¡µé¢å’Œç™»å½•é¡µé¢"></a><strong>2ã€æœªç™»å½•é¡µé¢å’Œç™»å½•é¡µé¢</strong></h3><p> å› ä¸ºé¡µé¢å­˜åœ¨ç™»å½•å’Œæœªç™»å½•çŠ¶æ€ï¼Œè€Œä¸ºäº†åŠ è½½é€Ÿåº¦è€ƒè™‘ï¼Œå½“æœªç™»å½•æ—¶ï¼Œä¸åŠ è½½å·²ç™»å½•é¡µé¢ï¼Œå› æ­¤éœ€è¦åˆ’åˆ†å‡ºæ¥ï¼Œå¹¶è¿›è¡Œå¼‚æ­¥åŠ è½½å¤„ç†ï¼›</p><h3 id="3ã€æœªç™»å½•é¡µé¢"><a href="#3ã€æœªç™»å½•é¡µé¢" class="headerlink" title="3ã€æœªç™»å½•é¡µé¢"></a><strong>3ã€æœªç™»å½•é¡µé¢</strong></h3><p> æœªç™»å½•é¡µé¢åˆåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š1ã€åˆå§‹é¡µé¢ï¼šæ¯«æ— ç–‘é—®è¦ç›´æ¥åŠ è½½2ã€ç™»å½•å¼¹çª—ï¼šç‚¹å‡»ç™»å½•æ—¶åŠ è½½ï¼ˆå¼‚æ­¥ï¼‰3ã€æ³¨å†Œå¼¹çª—ï¼šç‚¹å‡»æ³¨å†Œæ—¶åŠ è½½ï¼ˆå¼‚æ­¥ï¼‰ä¹‹æ‰€ä»¥åˆ†æ‹†å¼€ï¼Œæ˜¯å› ä¸ºæ ¹æ®éœ€æ±‚ï¼Œå·²ç™»å½•ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥ç™»å½•åé¡µé¢ï¼Œå› æ­¤æ— éœ€ç™»å½•å’Œæ³¨å†Œï¼Œè¿™ç§å¤„ç†å¯ä»¥å‡å°‘æµé‡æ¶ˆè€—ï¼Œæå‡åŠ è½½é¡µé¢åŠ è½½é€Ÿåº¦ï¼ˆç‰¹åˆ«æ˜¯æ³¨å†Œå¼¹çª—éœ€è¦åŠ è½½çš„å†…å®¹è¿˜æ¯”è¾ƒå¤šï¼‰ï¼›</p><h3 id="4ã€å·²ç™»å½•é¡µé¢"><a href="#4ã€å·²ç™»å½•é¡µé¢" class="headerlink" title="4ã€å·²ç™»å½•é¡µé¢"></a><strong>4ã€å·²ç™»å½•é¡µé¢</strong></h3><p> å·²ç™»å½•é¡µé¢æœ‰è¾ƒå¤šé¡µé¢ï¼Œé‡‡ç”¨é»˜è®¤åŠ è½½åˆå§‹é¡µï¼Œç„¶åå¼‚æ­¥åŠ è½½å…¶ä»–é¡µé¢ï¼ˆè®¿é—®æ—¶ï¼‰ï¼›</p><h3 id="5ã€å¼¹çª—dialog"><a href="#5ã€å¼¹çª—dialog" class="headerlink" title="5ã€å¼¹çª—dialog"></a><strong>5ã€å¼¹çª—dialog</strong></h3><p> ç”±äºé€»è¾‘è¾ƒå°‘ï¼Œä»£ç é‡ä¸å¤šï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œç»Ÿä¸€å°†å…¶åˆå¹¶åœ¨ä¸€ä¸ªvueæ–‡ä»¶ä¸­ï¼Œå…±åŒç›¸åŒçš„æ‰“å¼€é€»è¾‘ï¼Œæ ¹æ®ä¼ é€’çš„keyå†³å®šæ‰“å¼€å“ªä¸€ä¸ªã€‚è¿™æ ·åœ¨æ–°å¢å¼¹çª—æ—¶ï¼Œæ— éœ€å†å»å†™å¼¹çª—çš„æ‰“å¼€ã€å…³é—­é€»è¾‘ã€‚å‡å¦‚æœ‰è¾ƒå¤æ‚çš„å¼¹çª—ï¼Œå¯ä»¥ä»¥å­ç»„ä»¶çš„å½¢å¼å¼•å…¥åˆ°å½“å‰vueæ–‡ä»¶ä¸­ï¼Œå¦‚æ­¤ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼›</p><h3 id="6ã€å›½é™…åŒ–ç®¡ç†"><a href="#6ã€å›½é™…åŒ–ç®¡ç†" class="headerlink" title="6ã€å›½é™…åŒ–ç®¡ç†"></a><strong>6ã€å›½é™…åŒ–ç®¡ç†</strong></h3><p> å’Œé¡µé¢é«˜è€¦åˆï¼Œè´Ÿè´£åŠ è½½å¯¹åº”çš„å›½é™…åŒ–èµ„æºï¼Œå¹¶è¿›è¡Œåˆ‡æ¢ç®¡ç†ï¼›</p><h3 id="7ã€é¡µé¢ç»„ä»¶"><a href="#7ã€é¡µé¢ç»„ä»¶" class="headerlink" title="7ã€é¡µé¢ç»„ä»¶"></a><strong>7ã€é¡µé¢ç»„ä»¶</strong></h3><p> å¯èƒ½æœ‰å­é¡µé¢å’Œå¤ç”¨çš„ç»„ä»¶ï¼ŒæŒ‰ç…§æ­£å¸¸æ–¹å¼å¼•ç”¨å³å¯ã€‚</p><h3 id="8ã€æ ·å¼æ–‡ä»¶"><a href="#8ã€æ ·å¼æ–‡ä»¶" class="headerlink" title="8ã€æ ·å¼æ–‡ä»¶"></a><strong>8ã€æ ·å¼æ–‡ä»¶</strong></h3><p> å¯ä»¥ç‹¬ç«‹å†™ä¸º.cssæ–‡ä»¶ï¼Œä½†å› ä¸ºæˆ‘çš„å…¬å…±æ ·å¼æ–‡ä»¶æ¯”è¾ƒå°‘ï¼Œå› æ­¤æˆ‘è¿˜æ˜¯å°†å…¶æ”¾åœ¨ä¸€ä¸ª.vueæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨App.vueé‡Œæ¥å¼•ç”¨</p><h3 id="8ã€é¡µé¢ç»„ä»¶èµ·å"><a href="#8ã€é¡µé¢ç»„ä»¶èµ·å" class="headerlink" title="8ã€é¡µé¢ç»„ä»¶èµ·å"></a><strong>8ã€é¡µé¢ç»„ä»¶èµ·å</strong></h3><p> é€šå¸¸ä»¥.vueä¸ºç»“å°¾ï¼Œé™¤äº†å›½é™…åŒ–LanguageManager.jså› ä¸ºé«˜è€¦åˆåº¦ï¼Œå› æ­¤ä»¥.jsç»“å°¾å¹¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„vueå®ä¾‹ï¼Œè¡¨ç¤ºä»–æ›´åƒæ˜¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªvueçš„é¡µé¢ç»„ä»¶ï¼›</p><p> åŸºç¡€é¡µé¢ï¼Œå¦‚ç™»å½•å’Œæœªç™»å½•é¡µé¢ï¼Œ<code>å…¬å…±ç»„ä»¶ï¼ˆå¹¶ä¸”æ˜¯headerå’Œfooterè¿™ç§ï¼‰ï¼Œä»¥**base-**å¼€å¤´ï¼›å¼¹çª—ç»Ÿä¸€ä»¥**box-**ä¸ºå¼€å¤´;å¯å¤ç”¨çš„ç»„ä»¶ä»¥**extend-**å¼€å¤´ï¼›å¼•å…¥çš„å¤–éƒ¨ç»„ä»¶ä»¥**import-**å¼€å¤´</code>ï¼›<code>æ™®é€šé¡µé¢ç»„ä»¶ä»¥**page-**å¼€å¤´</code>ï¼ˆè¿™äº›é¡µé¢å¾€å¾€æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡µé¢ï¼Œå¹¶ä¸”æŒ‚é åœ¨ç™»å½•æˆ–æœªç™»å½•é¡µé¢ä¸‹ï¼‰ï¼›æ³¨å†Œå¼¹çª—å› ä¸ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”åŒç±»è¾ƒå¤šï¼Œå› æ­¤ä»¥<strong>register-</strong>ä¸ºå¼€å¤´ï¼›</p><p> é€šè¿‡ä»¥æ–‡ä»¶åæ¥åˆ’åˆ†ï¼Œä¸åŒçš„é¡µé¢ç»„ä»¶ä¹‹é—´çš„åŒºåˆ†å¯ä»¥è¯´æ˜¯ä¸€ç›®äº†ç„¶ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼›</p><hr><h1 id="3ã€è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹"><a href="#3ã€è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹" class="headerlink" title="3ã€è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹"></a><strong>3ã€è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹</strong></h1><p> æƒ³äº†æƒ³ï¼Œç›®å‰è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>  1ã€è·¯ç”±ï¼šä»¥è·¯ç”±ä¸ºé©±åŠ¨æ¥å†™é¡µé¢ï¼Œä¼¼ä¹æ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼›å¥½å¤„æ˜¯åªéœ€è¦é€šè¿‡æŸ¥çœ‹è·¯ç”±çš„é…ç½®æ–‡ä»¶router-config.jsï¼Œå°±å¯ä»¥äº†è§£é¡µé¢ç»„ä»¶çš„æ¶æ„ï¼›ä¸è¿‡æˆ‘è‡ªå·±å…³äºvue-routerçš„å®è·µç»éªŒæ¯”è¾ƒå°‘ï¼Œå› æ­¤å°±ç•¥è¿‡ä¸è°ˆäº†ï¼›</p><p>  2ã€å•å…ƒæµ‹è¯•ï¼šæŒ‰é“ç†è¯´ï¼Œå•å…ƒæµ‹è¯•æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå› æ­¤åœ¨è¿›è¡Œæ¶æ„è®¾è®¡æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼›ä¸è¿‡ä½œè€…æˆ‘ç›®å‰åœ¨çš„å…¬å¸å…³äºå‰ç«¯æ–¹é¢éƒ½ä¸å¤ªæ­£è§„ï¼Œå®åœ¨æ²¡è¿™æ–¹é¢çš„ç»éªŒï¼Œåˆå› ä¸ºä½œè€…æˆ‘æœ¬äººè½¬è¡Œåšå‰ç«¯çš„æ—¶é—´ä¹Ÿæ¯”è¾ƒçŸ­ï¼Œè™½ç„¶å‘¨å‘¨9.12.7ï¼Œä½†ä¹Ÿæ²¡æ¥å¾—åŠå­¦ä¹ è¿™æ–¹é¢çš„çŸ¥è¯†ï¼ˆæ²¡æœ‰éœ€æ±‚é©±åŠ¨ï¼Œè¿™æ–¹é¢åŠ¨åŠ›ä¸è¶³å“ˆå“ˆï¼‰</p><p>  3ã€è‡ªåŠ¨åŒ–é…ç½®ï¼šå…³äºwebpackçš„è‡ªåŠ¨åŒ–ï¼Œæ˜¯å‰ç«¯æ¶æ„çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤é…ç½®ä¹Ÿæ˜¯è›®é‡è¦çš„ï¼›ä¸è¿‡ä¸€æ˜¯è¿™æ–¹é¢éœ€è¦å¾ˆå¤šç¬”å¢¨çš„ï¼ŒäºŒæ˜¯ç½‘ä¸Šä¹Ÿæœ‰ä¸€äº›åˆ«äººåˆ†äº«çš„æ–‡ç« ï¼ˆè‚¯å®šæ¯”æˆ‘çš„å¥½ï¼‰ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼›</p><p>  4ã€ä¸€äº›è‡ªåŠ¨åŒ–å·¥å…·ï¼šä¾ç„¶å°´å°¬ï¼Œæ²¡æœ‰å¤§å‚ç»éªŒï¼Œè·¯å­æ¯”è¾ƒé‡ï¼Œæ‰€ä»¥å¤§å‚ä¸“æœ‰çš„ä¸€äº›å·¥å…·æ˜¯æœ¨æœ‰çš„ï¼Œè€Œè‡ªå·±æ‰¾çš„è¯åˆå«Œéº»çƒ¦ï¼Œæ‰€ä»¥æ²¡æœ‰ä¼˜åŒ–åˆ°æè‡´ï¼Œåªåšåˆ°äº†åŸºæœ¬æ»¡è¶³ç›®å‰é¡¹ç›®éœ€æ±‚çš„ç¨‹åº¦ï¼Œè§è°…è§è°…ï¼›ç­‰ä»¥åæœ‰è¿™æ–¹é¢ç»éªŒçš„è¯æˆ‘å†å†™åšå®¢æ¥åˆ†äº«å§~</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡æœåŠ¡å™¨æ•°æ®è¢«é»‘ ğŸ˜‚</title>
      <link href="2020/09/16/%E6%95%B0%E6%8D%AEMoogose%E8%A2%AB%E9%BB%91/"/>
      <url>2020/09/16/%E6%95%B0%E6%8D%AEMoogose%E8%A2%AB%E9%BB%91/</url>
      
        <content type="html"><![CDATA[<p>å¹¸äºè¿™æ¬¡ä¸¢å¤±çš„æ•°æ®ä¸å¤šï¼Œä¹Ÿåªæ˜¯è‡ªå·±ä¸ªäººçš„æµ‹è¯•æ•°æ®ï¼Œå¦‚æœæ˜¯å…¬å¸çš„å•†ç”¨æ•°æ®åº“æ•°æ®ï¼Œé‚£è¢«å‹’ç´¢å¤šå°‘ BTC ä¹Ÿå¾—ç»™å•Š ğŸ˜</p><a id="more"></a><h2 id="æœåŠ¡å™¨åˆä¸€æ¬¡è¢«æ¶æ„æ”»å‡»ï¼ŒMongoDB-è¢«åˆ åº“"><a href="#æœåŠ¡å™¨åˆä¸€æ¬¡è¢«æ¶æ„æ”»å‡»ï¼ŒMongoDB-è¢«åˆ åº“" class="headerlink" title="æœåŠ¡å™¨åˆä¸€æ¬¡è¢«æ¶æ„æ”»å‡»ï¼ŒMongoDB è¢«åˆ åº“"></a>æœåŠ¡å™¨åˆä¸€æ¬¡è¢«æ¶æ„æ”»å‡»ï¼ŒMongoDB è¢«åˆ åº“</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2009%2016%2016%2028%2027%201600244907.png"                      alt="image-20200915164254240"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2009%2016%2016%2028%2022%201600244902.png"                      alt="image-20200915164549369"                ></p><h2 id="æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯"><a href="#æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯"></a>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mongo --version</span><br><span class="line">MongoDB shell version v4<span class="number">.0</span><span class="number">.6</span></span><br><span class="line">git version: caa42a1f75a56c7643d0b68d3880444375ec42e3</span><br><span class="line">OpenSSL version: OpenSSL <span class="number">1.0</span><span class="number">.1f</span> <span class="number">6</span> Jan <span class="number">2014</span></span><br><span class="line">allocator: tcmalloc</span><br><span class="line">modules: none</span><br><span class="line">build environment:</span><br><span class="line">    distmod: ubuntu1404</span><br><span class="line">    distarch: x86_64</span><br><span class="line">    target_arch: x86_64</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°å¸è½½"><a href="#é‡æ–°å¸è½½" class="headerlink" title="é‡æ–°å¸è½½"></a>é‡æ–°å¸è½½</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœæ­¢æœåŠ¡ï¼š</span><br><span class="line">sudo service mongod stop</span><br><span class="line">åˆ é™¤è½¯ä»¶åŒ…ï¼š</span><br><span class="line">sudo yum erase $(rpm -qa | grep mongodb-org)</span><br><span class="line"> åˆ é™¤æ•°æ®å’Œæ—¥å¿—ç›®å½•ï¼š</span><br><span class="line">sudo rm -r /<span class="keyword">var</span>/log/mongodbï¼ˆæ—¥å¿—ï¼‰</span><br><span class="line">sudo rm -r /<span class="keyword">var</span>/lib/mongoï¼ˆæ•°æ®ï¼‰</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…é‡å¯æœåŠ¡"><a href="#å®‰è£…é‡å¯æœåŠ¡" class="headerlink" title="å®‰è£…é‡å¯æœåŠ¡"></a>å®‰è£…é‡å¯æœåŠ¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#å®‰è£…</span><br><span class="line">sudo apt-get install -y mongodb-org</span><br><span class="line"></span><br><span class="line"># å¼€å¯æœåŠ¡</span><br><span class="line">sudo service mongod start</span><br><span class="line"></span><br><span class="line"># åœæ­¢æœåŠ¡</span><br><span class="line">sudo service mognod stop</span><br><span class="line"></span><br><span class="line"># é‡å¯æœåŠ¡</span><br><span class="line">sudo service mongod restart</span><br></pre></td></tr></table></figure><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶ä¿¡æ¯"><a href="#é…ç½®æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="é…ç½®æ–‡ä»¶ä¿¡æ¯"></a>é…ç½®æ–‡ä»¶ä¿¡æ¯</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dbPath</span>=ã€‚ã€‚ã€‚ <span class="comment">#æ•°æ®æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line"><span class="attr">path</span>=ã€‚ã€‚ã€‚ <span class="comment">#æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">27017</span> <span class="comment">#ç«¯å£å·</span></span><br><span class="line"><span class="attr">fork</span>=<span class="literal">true</span> <span class="comment">#ä»¥å®ˆæŠ¤ç¨‹åºçš„æ–¹å¼å¯ç”¨,å³åœ¨åå°è¿è¡Œ</span></span><br><span class="line"><span class="attr">logappend</span> = <span class="literal">true</span> <span class="comment">#æ—¥å¿—ä»¥è¿½åŠ çš„å½¢å¼æ·»åŠ </span></span><br><span class="line"><span class="attr">bind_ip</span> = <span class="number">0.0</span>.<span class="number">0.0</span> <span class="comment">#å¯ä»¥è®¿é—®çš„åœ°å€. 127.0.0.1è¡¨ç¤ºè‡ªå·±è®¿é—®, 0.0.0.0 è¡¨ç¤ºæ‰€æœ‰äººéƒ½èƒ½è®¿é—®</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ç«¯å£"><a href="#ä¿®æ”¹ç«¯å£" class="headerlink" title="ä¿®æ”¹ç«¯å£"></a>ä¿®æ”¹ç«¯å£</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹etc/mongod.confæ–‡ä»¶å†…çš„é…ç½®ä¿¡æ¯</span><br><span class="line">net:</span><br><span class="line">  port: <span class="number">12345</span> <span class="comment">//ç«¯å£å·</span></span><br><span class="line">  bindIp: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>,<span class="number">1</span>**<span class="number">.16</span>*<span class="number">.1</span>**<span class="number">.18</span>   <span class="comment">//å†…ç½‘</span></span><br><span class="line"></span><br><span class="line">  # é‡å¯æœåŠ¡</span><br><span class="line">sudo service mongod restart</span><br><span class="line">æç¤º</span><br><span class="line">mongod stop/waiting</span><br><span class="line">mongod start/running, process <span class="number">19206</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿æ¥MongoDBå¹¶æŒ‡å®šç«¯å£</span></span><br><span class="line">mongo <span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span>:<span class="number">12345</span></span><br></pre></td></tr></table></figure><h2 id="é™åˆ¶ç«¯å£è®¿é—®"><a href="#é™åˆ¶ç«¯å£è®¿é—®" class="headerlink" title="é™åˆ¶ç«¯å£è®¿é—®"></a>é™åˆ¶ç«¯å£è®¿é—®</h2><p>æƒ³è¦å®ç°ï¼š</p><p>é™åˆ¶å¤–ç½‘è®¿é—® mongoï¼Œåªå…è®¸ç‰¹å®šçš„ IP è¿›æ¥è®¿é—® mongo çš„è¯ï¼Œåˆ™ï¼š</p><p>Mongo çš„é…ç½®ä¸­ï¼Œæ˜¯æ— æ³•å®ç°è¿™ä¸ªæ•ˆæœçš„ã€‚</p><p>åªèƒ½æ¢ç”¨å…¶ä»–åŠæ³•ï¼Œæ¯”å¦‚ï¼š</p><p>é€šè¿‡è®¾ç½®é˜²ç«å¢™ï¼Œæ·»åŠ ï¼š</p><p>åªå…è®¸æŸäº› IPï¼Œå…¥ç½‘æ–¹å‘ï¼Œèƒ½å¤Ÿè®¿é—® mongo çš„å¯¹åº”çš„ç«¯å£</p><p>ä»è€Œç¦æ­¢æ‰å…¶ä»–çš„ IP è®¿é—® mongo</p><p>è€Œæ­¤å¤„çš„é˜¿é‡Œäº‘çš„ ECS æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å®‰å…¨ç»„ï¼Œå®ç°å’Œé˜²ç«å¢™ä¸€æ ·çš„æ•ˆæœã€‚</p><p>å…·ä½“è®¾ç½®åŠæ³•ï¼š</p><p>è¿›å»é˜¿é‡Œäº‘æ§åˆ¶åå°-ã€‹äº‘æœåŠ¡å™¨ ECS-ã€‹å®‰å…¨ç»„-ã€‰ä½ çš„ ECS æœåŠ¡å™¨æ‰€åœ¨çš„åŒºåŸŸ-ã€‹å¯¹åº”çš„ ECS æœåŠ¡å™¨-ã€‰é…ç½®è§„åˆ™ï¼š</p><p>å¢åŠ  2 ä¸ªè§„åˆ™ï¼š</p><p>ï¼ˆ1ï¼‰è§„åˆ™ 1ï¼š å…è®¸ç‰¹å®šçš„ IPï¼ˆå•ä¸ª IPï¼ŒæŸä¸ª IP åœ°å€æ®µï¼ˆå†…çš„æ‰€æœ‰çš„ IPï¼‰ï¼ŒæŸå‡ ä¸ª IPï¼‰å…è®¸è®¿é—®æŸç«¯å£</p><p>ï¼ˆ2ï¼‰è§„åˆ™ 2ï¼šç¦æ­¢æ‰ï¼Œå…¶ä»–çš„ IP è®¿é—®è¯¥ç«¯å£</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2009%2016%2016%2028%2003%201600244883.png"                      alt="image-20200916131318130"                ></p><h2 id="é…ç½®ç®¡ç†å‘˜è´¦å·"><a href="#é…ç½®ç®¡ç†å‘˜è´¦å·" class="headerlink" title="é…ç½®ç®¡ç†å‘˜è´¦å·"></a>é…ç½®ç®¡ç†å‘˜è´¦å·</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># åˆ‡æ¢åˆ° admin æ•°æ®åº“</span><br><span class="line">use admin</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºç”¨æˆ·</span><br><span class="line">db.createUser(&#123;<span class="attr">user</span>: <span class="string">&#x27;tanya&#x27;</span>, <span class="attr">pwd</span>: <span class="string">&#x27;tanya&#x27;</span>, <span class="attr">roles</span>: [&#123;<span class="attr">role</span>: <span class="string">&#x27;userAdminAnyDatabase&#x27;</span>, <span class="attr">db</span>: <span class="string">&#x27;admin&#x27;</span>&#125;]&#125;)</span><br><span class="line"></span><br><span class="line"># æˆæƒ</span><br><span class="line">db.auth(<span class="string">&#x27;tanya&#x27;</span>, <span class="string">&#x27;tanya&#x27;</span>)</span><br><span class="line"></span><br><span class="line"># åˆ‡æ¢åˆ°å…¶ä»–æ•°æ®åº“</span><br><span class="line">use dream-wall</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºç”¨æˆ·</span><br><span class="line">db.createUser(&#123;<span class="attr">user</span>: <span class="string">&#x27;tanya_dream-wall_runner&#x27;</span>, <span class="attr">pwd</span>: <span class="string">&#x27;tanya&#x27;</span>, <span class="attr">roles</span>: [&#123;<span class="attr">role</span>: <span class="string">&#x27;readWrite&#x27;</span>, <span class="attr">db</span>: <span class="string">&#x27;dream-wall&#x27;</span>&#125;]&#125;)</span><br><span class="line">db.createUser(&#123;<span class="attr">user</span>: <span class="string">&#x27;tanya_dream-wall_wheel&#x27;</span>, <span class="attr">pwd</span>: <span class="string">&#x27;tanya&#x27;</span>, <span class="attr">roles</span>: [&#123;<span class="attr">role</span>: <span class="string">&#x27;read&#x27;</span>, <span class="attr">db</span>: <span class="string">&#x27;dream-wall&#x27;</span>&#125;]&#125;)</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹é…ç½®ï¼Œå¼€å¯æˆæƒ</span><br><span class="line">sudo vi /etc/mongod.conf</span><br><span class="line"></span><br><span class="line">security:</span><br><span class="line">  authorization: <span class="string">&#x27;enabled&#x27;</span></span><br><span class="line"></span><br><span class="line"># é‡å¯ mongo æœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ</span><br><span class="line">sudo service mongod restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ¯æ¬¡è¦è¿›è¡Œæ•°æ®åº“æ“ä½œéƒ½éœ€è¦å…ˆè¿›è¡Œæˆæƒ db.auth(â€˜tanyaâ€™, â€˜tanyaâ€™)</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ç™»å½•åˆ°æŒ‡å®šæ•°æ®åº“ï¼Œæ— éœ€æˆæƒ</span><br><span class="line">mongo <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:xx/dream-wall -u tanya_dream-wall_runner -p tanya</span><br><span class="line"></span><br><span class="line"># éªŒè¯ä¸€ä¸‹</span><br><span class="line">show tables</span><br><span class="line">db.dreams.find()</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h4 id="å®‰å…¨äº‹æ•…çŒ›äºè™"><a href="#å®‰å…¨äº‹æ•…çŒ›äºè™" class="headerlink" title="å®‰å…¨äº‹æ•…çŒ›äºè™"></a>å®‰å…¨äº‹æ•…çŒ›äºè™</h4><p>è¿™é‡Œç»™å†æ¬¡ç»™è‡ªå·±ä¹Ÿç»™å¤§å®¶æä¸ªé†’ï¼Œå®‰å…¨äº‹æ•…çŒ›äºè™ï¼Œå®‰å…¨è´£ä»»é‡äºå±±ã€‚</p><ul><li>ä¸€å®šä¸è¦ä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå°±å¿½ç•¥æŸäº›å®‰å…¨é…ç½®ï¼Œå¹³æ—¶åšä»€ä¹ˆéƒ½è¦æœ‰å®‰å…¨æ„è¯†ã€‚</li><li>é‡è¦æ•°æ®åŠæ—¶å¤‡ä»½ã€‚</li><li>æœåŠ¡å™¨è®¾ç½® IP é»‘ç™½åå•ï¼Œå…³é—­ä¸€åˆ‡å¯ä»¥å…³é—­çš„ç«¯å£</li><li>å¦‚æœè·Ÿæˆ‘ä¼¼çš„ï¼Œè®¿é—®æœåŠ¡çš„ ip ç»å¸¸å˜ï¼Œå¯ä»¥è€ƒè™‘ä¿®æ”¹ä¸€äº›æœåŠ¡çš„é»˜è®¤ç«¯å£ï¼Œå¢åŠ è¢«æ‰«åˆ°çš„æ¦‚ç‡</li><li>ä¸€å®šè¦è®¾ç½®å¯†ç ï¼Œä¸ºäº†é˜²æ­¢è¢«çˆ†ï¼Œæœ€å¥½æ˜¯æ— è§„åˆ™çš„å¼ºå¯†ç </li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://blog.csdn.net/dandanfengyun/article/details/95497728" >https://blog.csdn.net/dandanfengyun/article/details/95497728<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.crifan.com/mongodb_add_restrict_ip_access/" >https://www.crifan.com/mongodb_add_restrict_ip_access/<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.bbsmax.com/A/x9J238pM56/" >https://www.bbsmax.com/A/x9J238pM56/<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://github.com/savoygu/blog/blob/master/åšå®¢/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ.md#52-ä¿®æ”¹-mongodb-é»˜è®¤ç«¯å£" >https://github.com/savoygu/blog/blob/master/åšå®¢/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ.md#52-ä¿®æ”¹-mongodb-é»˜è®¤ç«¯å£<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹Shell</title>
      <link href="2020/06/01/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B9%8BShell/"/>
      <url>2020/06/01/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B9%8BShell/</url>
      
        <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥å‰ç«¯æ˜¯ä¸€ä¸ªä¸å–„è¨€è¾å¹¶ä¸ä¼šä½¿ç”¨cmdçš„çš„ä¸€ç±»äººï¼Œå¼€ä¸ªç©ç¬‘ï¼ï¼ï¼</p><a id="more"></a><h1 id="å‰ç«¯é¡¹ç›®å‘å¸ƒæµç¨‹"><a href="#å‰ç«¯é¡¹ç›®å‘å¸ƒæµç¨‹" class="headerlink" title="å‰ç«¯é¡¹ç›®å‘å¸ƒæµç¨‹"></a><strong>å‰ç«¯é¡¹ç›®å‘å¸ƒæµç¨‹</strong></h1><ul><li>å¼€å‘æ–°åŠŸèƒ½å•¦ -&gt; åˆ‡æ–°åˆ†æ”¯ <code>git ck -b newBranch</code></li><li>å¼€å‘å®Œæˆå -&gt; æäº¤ä»£ç  <code>git add .</code> <code>git commit -m &#39;msg&#39;</code></li><li>åˆå¹¶åˆ°å†…å¤–ä¾§åˆ†æ”¯ -&gt; åˆå¹¶åˆ° <code>Rel</code> å†…å¤–ä¾§åˆ†æ”¯ <code>git marge rel</code></li><li>å°±æ‹¿ <code>Vue</code> <code>React</code> é¡¹ç›®æ¥è¯´ï¼Œå‘å¸ƒæµ‹è¯•ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦å°†ä¹‹å‰ç”Ÿäº§çš„ä»£ç ç»™åˆ é™¤ï¼Œä¸ç„¶ä½“ç§¯ä¼šè¶Šæ¥è¶Šå¤§ <code>rm -rf /linuxç›®å½•è·¯å¾„~å½“å‰é¡¹ç›®/*</code></li><li>å‘å¸ƒå†…å¤–ä¾§ï¼ˆè¿˜æœ‰ä¸ªé¢„å‘å¸ƒï¼‰ï¼Œ<code>build - FileZilla | ZOC7 - ä¸Šä¼ </code> ä¸ç®¡ä½ æ˜¯æ‹–æ‹½ï¼Œè¿˜æ˜¯linuxå‘½ä»¤éƒ½å¯ä»¥ï¼Œå¼€å¿ƒå°±å¥½å˜›</li></ul><p>ä¸Šé¢å°±æ˜¯å‘å¸ƒä¸€ä¸ªæ–°åŠŸèƒ½çš„æµç¨‹ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œä½ è®©æˆ‘ä¸€å¤©åšä¸€æ¬¡è¿˜èƒ½æ¥å—ï¼Œè¦æ˜¯éš”å‡ åˆ†é’Ÿæ¥ä¸€æ¬¡è°å—å¾—äº†ï¼Ÿå½“ç„¶ç°å®å°±æ˜¯è¿™æ ·çš„æ“ä½œéš”å‡ åˆ†é’Ÿå°±ä¼šæ¥ä¸€æ¬¡ï¼ï¼ï¼å¹¶ä¸”åŒæ—¶æ”¹å‡ ä¸ªé¡¹ç›®ä¹Ÿæ˜¯å­˜åœ¨çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ“ä½œè¦æŠŠäººæ•´ç¥â€¦</p><h2 id="è¯´ä¸ªæ•…äº‹"><a href="#è¯´ä¸ªæ•…äº‹" class="headerlink" title="è¯´ä¸ªæ•…äº‹"></a>è¯´ä¸ªæ•…äº‹</h2><p>æœ‰ä¸€å¤©æˆ‘å¼€å‘äº†ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŒ‰ç…§ä¸Šé¢æµç¨‹æŠŠä»£ç å‘å¸ƒåˆ°äº†å†…å¤–ä¾§ï¼Œè¿™æ—¶å€™æµ‹è¯•å§å§æµ‹è¯•äº†ï¼Œå‘ç°æˆ‘æŠŠ<strong>ç™»å½•å†™æˆç™»é™†</strong>äº†ï¼Œé€šçŸ¥åˆ°æˆ‘ï¼Œä½ æœ‰ä¸€ä¸ªè¶…çº§ä¸¥é‡çš„bugï¼Œéœ€è¦ç°åœ¨æ”¹ï¼Œæ”¹å¥½å°±ä¼ ï¼Œæˆ‘æ”¶åˆ°è¿™æ¡æŒ‡ä»¤ï¼ŒèŠèŠ±ä¸ç”±å¾—ä¸€ç´§ï¼Œæˆ‘å½“æœºç«‹æ–­åˆ‡æ¢åˆ†æ”¯ï¼Œæ”¹èµ·æˆ‘çš„ä»£ç æ¥ï¼Œæ—¶é—´ä¸€åˆ†ä¸€ç§’è¿‡å»ï¼Œåœ¨ä¸€åˆ†é’Ÿçš„æ—¶é—´å†…æˆ‘å°±æ”¹å®Œbugï¼Œæ¯•ç«Ÿæ‹§èºä¸éå¸¸ç®€å•ã€‚</p><p>è¯¥ä¸Šä¼ ä»£ç äº†ï¼Œä¸Šä¼ æ“ä½œç”¨äº†æˆ‘10åˆ†é’Ÿï¼Œåœ¨æµ‹è¯•å§å§çœ‹æ¥ï¼Œæˆ‘ä¿®æ”¹è¿™ä¸ªä»£ç ç”¨äº†11åˆ†é’Ÿï¼Œæµ‹è¯•å§å§å¿ƒé‡Œè‚¯å®šå°±åœ¨æƒ³è¿™ä¸ªèœé€¼ï¼Œæ”¹ä¸ªå­—è¦è¿™ä¹ˆä¹…ï¼Ÿæˆ‘ç­‰ç€è¿™ä¹ˆçƒ¦ï¼Œåé¢ç»™ä»–æ‰“åˆ†å¾€ä½äº†æ‰“ï¼Œå“¼~~ï¼Œè®©æŸæŸå‰ç«¯å´½å„¿æ‹¿ä¸åˆ°å¥–é‡‘ã€‚</p><p>æˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Šï¼ï¼ï¼</p><h2 id="Shellç¥å™¨"><a href="#Shellç¥å™¨" class="headerlink" title="Shellç¥å™¨"></a>Shellç¥å™¨</h2><p>å…¶å®æœ‰å¾ˆå¤šåç«¯åœ¨ç”¨çš„ä¸œè¥¿ï¼Œå‰ç«¯éƒ½èƒ½æ‹¿æ¥å‡å°‘è‡ªå·±å¹³æ—¶å¼€å‘çš„é‡å¤å·¥ä½œï¼ŒShellå°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚</p><p>å…³äºShellçŸ¥è¯†çš„è¯ï¼Œå¾ˆå¤šæ•™ç¨‹å•¦ï¼Œå»å­¦ä¹ å§ï¼Œæˆ‘æŠŠæˆ‘çš„è„šæœ¬æ‹¿å‡ºæ¥å’Œå¤§å®¶äº¤æµäº¤æµã€‚</p><h2 id="æˆ‘çš„è‡ªåŠ¨åŒ–è„šæœ¬"><a href="#æˆ‘çš„è‡ªåŠ¨åŒ–è„šæœ¬" class="headerlink" title="æˆ‘çš„è‡ªåŠ¨åŒ–è„šæœ¬"></a>æˆ‘çš„è‡ªåŠ¨åŒ–è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># åœ¨&quot;set -e&quot;ä¹‹åå‡ºç°çš„ä»£ç ï¼Œä¸€æ—¦å‡ºç°äº†è¿”å›å€¼éé›¶ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šç«‹å³é€€å‡ºï¼Œé‚£ä¹ˆå°±å¯ä»¥é¿å…ä¸€äº›è„šæœ¬çš„å±é™©æ“ä½œã€‚</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;shellè„šæœ¬æœ¬èº«çš„åå­—: <span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ä¼ ç»™shellçš„ç¬¬ä¸€ä¸ªå‚æ•°: <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ä¼ ç»™shellçš„ç¬¬äºŒä¸ªå‚æ•°: <span class="variable">$2</span>&quot;</span></span><br><span class="line"><span class="comment">#è·å–å½“å‰åˆ†æ”¯</span></span><br><span class="line">branch=$(git symbolic-ref --short HEAD)</span><br><span class="line"><span class="comment">#è·å–å½“å‰åˆ†æ”¯å®Œæ•´è·¯å¾„</span></span><br><span class="line"><span class="built_in">echo</span> -e $(git symbolic-ref HEAD)</span><br><span class="line"><span class="comment"># refs/heads/master</span></span><br><span class="line"><span class="built_in">echo</span> -e $(git symbolic-ref --short HEAD)</span><br><span class="line"><span class="comment"># master</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x != <span class="string">&quot;devx&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x != <span class="string">&quot;testx&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x != <span class="string">&quot;prex&quot;</span> ]&amp;&amp; [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> != <span class="string">&quot;master&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[41;37m ä¸å­˜åœ¨ <span class="variable">$1</span> ç¯å¢ƒ  åªæœ‰ -&gt; dev(å†…æµ‹) test(å¤–ä¾§) pre(é¢„å‘å¸ƒ) \\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># é“¾æ¥æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">devFn</span></span>() &#123;</span><br><span class="line">    ssh -p 22 root@120.27.2x0.xxx rm -rf /home/chan/koa2/*</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m è¿æ¥æˆåŠŸï¼Œå¼€å§‹ä¸Šä¼ ä»£ç ....... \\033[0m&quot;</span></span><br><span class="line">    <span class="comment">#rsync ä¸‰ç§æ¨¡å¼ï¼šæœ¬åœ°æ¨¡å¼ã€ssh æ¨¡å¼ã€rsync æ¨¡å¼ã€‚</span></span><br><span class="line">    <span class="comment">#rsync -e &quot;ssh -p 1876&quot;  --exclude=storage -a  /Users/lovewcc/Documents/04_Vue/easy-vue/dist/*      root@120.27.220.173:/home/chan/koa2/</span></span><br><span class="line">    rsync -avz -e ssh /Users/lovewcc/Documents/04_Vue/easy-vue/dist/* root@120.27.220.173:/home/chan/koa2/</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m ä¸Šä¼ æˆåŠŸ,é¢„è§ˆè¯•è¯•å§ \\033[0m\\n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">testFn</span></span>() &#123;</span><br><span class="line">    ssh -p ç«¯å£ root@ip rm -rf æœåŠ¡å™¨é¡¹ç›®è·¯å¾„/*</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m è¿æ¥æˆåŠŸï¼Œä¸Šä¼ ä»£ç ä¸­... \\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">    rsync -e <span class="string">&quot;ssh -p 873&quot;</span>  --exclude=storage -a  æœ¬åœ°ä»£ç è·¯å¾„/dist/*      root@ip:æœåŠ¡å™¨é¡¹ç›®è·¯å¾„/</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m å¤–ä¾§ä¸Šä¼ æˆåŠŸ \\033[0m\\n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">preFn</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;æ‰§è¡Œé“¾æ¥é¢„å‘å¸ƒæœåŠ¡å™¨&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">build</span></span>() &#123;</span><br><span class="line">    <span class="comment"># cd source</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;master&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">     <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m&quot;</span><span class="variable">$1</span><span class="string">&quot;æ”¯æ‰“åŒ…å¼€å§‹ \\033[0m&quot;</span></span><br><span class="line">          yarn run build</span><br><span class="line">    <span class="keyword">else</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x == <span class="string">&quot;testx&quot;</span> ]</span><br><span class="line">          yarn run build:<span class="variable">$1</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m æ‰“åŒ…å®Œæ¯• \\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m è¿æ¥ <span class="variable">$1</span> æœåŠ¡å™¨ \\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;master&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        devFn</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x == <span class="string">&quot;devx&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        devFn</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x == <span class="string">&quot;testx&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        testFn</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x == <span class="string">&quot;prex&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        preFn</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\\033[41;37m åº”è¯¥ä¸ä¼šèµ°åˆ°è¿™é‡Œæ¥å§... \\033[0m&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ¤æ–­æ˜¯å¦æ˜¯relåˆ†æ”¯</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;branch&#125;</span> == <span class="string">&quot;master&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m å½“å‰åœ¨relåˆ†æ”¯\\n ä¸å‡ºæ„å¤–åº”è¯¥åˆšå‘å¸ƒè¿‡å†…æµ‹\\n æ‰€ä»¥æ— éœ€æ‰§è¡Œgitæ“ä½œ\\n æ‰€ä»¥æ˜¯å¦ç›´æ¥å‘å¸ƒ <span class="variable">$1</span> ç¯å¢ƒ\\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">read</span> -p $<span class="string">&#x27;\\n\\033[31mæ˜¯å¦ç›´æ¥æ‰“åŒ…ä¸Šä¼ ï¼Ÿy or n: \\033[0m&#x27;</span> isbuild</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$isbuild</span>&quot;</span> != <span class="string">&#x27;y&#x27;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    build <span class="variable">$1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment">#æ­¤shè„šæœ¬åªé€‚ç”¨äºå•å­å‘å¸ƒrelç¯å¢ƒ,æé†’</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[31m dev(å†…æµ‹) test(å¤–ä¾§) pre(é¢„å‘å¸ƒ) \\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[31m å½“å‰éœ€è¦å‘å¸ƒ <span class="variable">$1</span> ç¯å¢ƒ \\033[0m&quot;</span></span><br><span class="line">    <span class="comment">#è¯¢é—®æ˜¯å¦ç»§ç»­å‘å¸ƒå½“å‰ç¯å¢ƒ</span></span><br><span class="line">    <span class="built_in">read</span> -p $<span class="string">&#x27;\\n\\033[31mæ˜¯å¦ç»§ç»­æ“ä½œï¼Ÿy or n: \\033[0m&#x27;</span> isVersion</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$isVersion</span>&quot;</span> != <span class="string">&#x27;y&#x27;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m å·²ç¡®è®¤ç¯å¢ƒ \\033[0m\\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[31m <span class="variable">$1</span> ç¯å¢ƒï¼Œå½“å‰åˆ†æ”¯ä¸ºï¼š <span class="variable">$&#123;branch&#125;</span> \\033[0m&quot;</span></span><br><span class="line">    <span class="comment">#ç¡®è®¤å½“å‰åˆ†æ”¯ï¼Œæ˜¯å¦ç»§ç»­</span></span><br><span class="line">    <span class="built_in">read</span> -p $<span class="string">&#x27;\\n\\033[31mè¯·ç¡®è®¤åˆ†æ”¯ï¼Œæ˜¯å¦ç»§ç»­æ“ä½œï¼Ÿy or n: \\033[0m&#x27;</span> isContinue</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$isContinue</span>&quot;</span> != <span class="string">&#x27;y&#x27;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m å·²ç¡®è®¤åˆ†æ”¯ï¼Œåˆ†æ”¯ä¸º -&gt; <span class="variable">$&#123;branch&#125;</span> \\033[0m\\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m å¼€å§‹æäº¤ <span class="variable">$&#123;branch&#125;</span> åˆ†æ”¯ä»£ç ï¼Œæ‰§è¡Œ add commit  \\033[0m\\n&quot;</span></span><br><span class="line">    git add .</span><br><span class="line">    <span class="built_in">read</span> -p $<span class="string">&#x27;\\n\\033[31mè¯·è¾“å…¥æœ¬æ¬¡commitä¿¡æ¯ï¼š\\033[0m&#x27;</span> commitInfo</span><br><span class="line">    git commit -m <span class="variable">$&#123;commitInfo&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m å¼€å§‹åˆ‡æ¢åˆ†æ”¯ \\033[0m\\n&quot;</span></span><br><span class="line">    git checkout rel</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m å¼€å§‹æ‹‰å– rel origin \\033[0m\\n&quot;</span></span><br><span class="line">    git pull origin rel</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m å¼€å§‹ merge ä¿®æ”¹è‡³ rel \\033[0m\\n&quot;</span></span><br><span class="line">    git merge <span class="variable">$&#123;branch&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#åˆ¤æ–­mergeæ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> [ $? == 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\\033[32m merge <span class="variable">$&#123;branch&#125;</span> -&gt; rel æˆåŠŸ \\033[0m\\n&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m å¼€å§‹æ¨é€ rel è‡³è¿œç«¯ origin \\033[0m\\n&quot;</span></span><br><span class="line"></span><br><span class="line">        git push origin rel</span><br><span class="line"></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m æ¨é€ rel è‡³è¿œç«¯ origin æˆåŠŸ \\033[0m\\n&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\\n\\033[32m æ‰§è¡Œæ‰“åŒ… \\033[0m\\n&quot;</span></span><br><span class="line"></span><br><span class="line">        build <span class="variable">$1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e  <span class="string">&quot;\\033[31m mergeå¤±è´¥ï¼Œè¯·æ£€æŸ¥ \\033[0m&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./shell.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»</title>
      <link href="2020/04/15/vue%E4%B8%AD%E8%AE%BE%E7%BD%AE%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2%E6%97%B6%E7%9A%84%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/"/>
      <url>2020/04/15/vue%E4%B8%AD%E8%AE%BE%E7%BD%AE%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2%E6%97%B6%E7%9A%84%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»"><a href="#vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»" class="headerlink" title="vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»"></a>vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»</h1><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;!-- é¡µé¢åˆ‡æ¢åŠ¨ç”»transitionName --&gt;</span><br><span class="line">    &lt;transition :name=<span class="string">&quot;transitionName&quot;</span>&gt;</span><br><span class="line">      &lt;!-- ç¼“å­˜æ•°æ® &lt;router-view&gt; --&gt;</span><br><span class="line">      &lt;keep-alive&gt;</span><br><span class="line">        &lt;router-view v-<span class="keyword">if</span>=<span class="string">&quot;$route.meta.keepAlive&quot;</span>&gt;&lt;/router-view&gt;</span><br><span class="line">      &lt;/keep-alive&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">    &lt;transition :name=<span class="string">&quot;transitionName&quot;</span>&gt;</span><br><span class="line">      &lt;router-view v-<span class="keyword">if</span>=<span class="string">&quot;!$route.meta.keepAlive&quot;</span>&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;App&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      transitionName: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">create</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.body.scrollHeight &gt;= <span class="built_in">document</span>.documentElement.clientHeight) &#123;</span><br><span class="line">      <span class="built_in">document</span>.body.style.height = <span class="built_in">document</span>.body.scrollHeight + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">document</span>.body.style.height = <span class="built_in">document</span>.documentElement.clientHeight + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* é¡µé¢åˆ‡æ¢åŠ¨ç”» */</span></span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨watch ç›‘å¬$routerçš„å˜åŒ–</span></span><br><span class="line">    $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">      <span class="comment">//console.log(&quot;to=&quot; + to.meta.index, &quot;from=&quot; + from.meta.index);</span></span><br><span class="line">      <span class="comment">//(1) å¦‚æœtoçš„ç´¢å¼•å€¼ä¸º0ï¼Œä¸æ·»åŠ ä»»ä½•åŠ¨ç”»ï¼›å¦‚æœtoç´¢å¼•å¤§äºfromç´¢å¼•,åˆ¤æ–­ä¸ºå‰è¿›çŠ¶æ€,åä¹‹åˆ™ä¸ºåé€€çŠ¶æ€</span></span><br><span class="line">      <span class="keyword">if</span> (to.meta.index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (to.meta.index &lt; <span class="keyword">from</span>.meta.index) &#123;</span><br><span class="line">          <span class="built_in">this</span>.transitionName = <span class="string">&quot;slide-right&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.transitionName = <span class="string">&quot;slide-left&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (to.meta.index == <span class="number">0</span> &amp;&amp; <span class="keyword">from</span>.meta.index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.transitionName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//(2) å½“ç„¶ï¼Œå¦‚æœä½ æ²¡æœ‰éœ€è¦è®¾ç½®ç´¢å¼•å€¼ä¸º0çš„é¡µé¢å¯ä»¥ç›´æ¥ç”¨ç€ä¸€æ®µ</span></span><br><span class="line">      <span class="comment">// if (to.meta.index &lt; from.meta.index) &#123;</span></span><br><span class="line">      <span class="comment">//   this.transitionName = &quot;slide-right&quot;;</span></span><br><span class="line">      <span class="comment">// &#125; else &#123;</span></span><br><span class="line">      <span class="comment">//   this.transitionName = &quot;slide-left&quot;;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">* &#123;</span><br><span class="line">  margin: <span class="number">0</span>;</span><br><span class="line">  padding: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">html,</span><br><span class="line">body &#123;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">#app &#123;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  width: <span class="number">100</span>%;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/********é¡µé¢åˆ‡æ¢åŠ¨ç”» *********/</span></span><br><span class="line">.slide-right-enter-active,</span><br><span class="line">.slide-right-leave-active,</span><br><span class="line">.slide-left-enter-active,</span><br><span class="line">.slide-left-leave-active &#123;</span><br><span class="line">  <span class="comment">/* will-changeå±æ€§å¯ä»¥æå‰é€šçŸ¥æµè§ˆå™¨æˆ‘ä»¬è¦å¯¹å…ƒç´ åšä»€ä¹ˆåŠ¨ç”»ï¼Œè¿™æ ·æµè§ˆå™¨å¯ä»¥æå‰å‡†å¤‡åˆé€‚çš„ä¼˜åŒ–è®¾ç½® */</span></span><br><span class="line">  will-change: transform;</span><br><span class="line">  transition: all ease <span class="number">0.</span>4s;</span><br><span class="line">  -webkit-transition: all ease <span class="number">0.</span>4s;</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: <span class="number">100</span>%;</span><br><span class="line">  left: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.slide-right-enter &#123;</span><br><span class="line">  transform: translateX(-<span class="number">100</span>%);</span><br><span class="line">  -webkit-transform: translateX(-<span class="number">100</span>%);</span><br><span class="line">&#125;</span><br><span class="line">.slide-right-leave-active &#123;</span><br><span class="line">  transform: translateX(<span class="number">100</span>%);</span><br><span class="line">  -webkit-transform: translateX(<span class="number">100</span>%);</span><br><span class="line">&#125;</span><br><span class="line">.slide-left-enter &#123;</span><br><span class="line">  transform: translateX(<span class="number">100</span>%);</span><br><span class="line">  -webkit-transform: translateX(<span class="number">100</span>%);</span><br><span class="line">&#125;</span><br><span class="line">.slide-left-leave-active &#123;</span><br><span class="line">  transform: translateX(-<span class="number">100</span>%);</span><br><span class="line">  -webkit-transform: translateX(-<span class="number">100</span>%);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/********é¡µé¢åˆ‡æ¢åŠ¨ç”» *********/</span></span><br><span class="line">...</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011281723430302020112915.png"                      alt="image-20201128172343030" style="zoom:50%;"                 ></p><p>æœ‰ä¸ªbugå¦‚æœå­é¡µé¢æ²¡æœ‰é«˜åº¦ï¼Œè¿›å…¥å­é¡µé¢å†è¿”å›åº•éƒ¨å¯¼èˆªä¼šæœ‰æŠ–åŠ¨bug</p><p>æ¯”å¦‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%8A%96%E5%8A%A82020112915.gif"                      alt="åº•éƒ¨å¯¼èˆªæŠ–åŠ¨" style="zoom: 50%;"                 ></p><p>åŠ ä¸Šä¸€å®šé«˜åº¦å</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.promise</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2020-11-28%2016.32.422020112915.gif"                      alt="2020-11-28 16.32.42" style="zoom: 50%;"                 ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueé˜…è¯»æºç å‡†å¤‡äº†ä»€ä¹ˆ</title>
      <link href="2020/03/15/Vue%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81%E5%87%86%E5%A4%87%E4%BA%86%E4%BB%80%E4%B9%88/"/>
      <url>2020/03/15/Vue%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81%E5%87%86%E5%A4%87%E4%BA%86%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€æŒæ¡-Vue-æ‰€æœ‰API"><a href="#1ã€æŒæ¡-Vue-æ‰€æœ‰API" class="headerlink" title="1ã€æŒæ¡ Vue æ‰€æœ‰API"></a>1ã€æŒæ¡ Vue æ‰€æœ‰API</h2><p>â€‹    æˆ‘æŠŠ Vue çš„æ‰€æœ‰ API éƒ½è¯¦ç»†ç ”ç©¶ä½¿ç”¨è¿‡äº†ä¸€éï¼Œè€Œä¸”å°½é‡åœ¨é¡¹ç›®ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œè®©è‡ªå·±æœ‰æ·±ä¸€ç‚¹çš„ä½“ä¼š</p><p>â€‹    è€Œä¸”æˆ‘å¯¹ç€å®˜æ–¹æ–‡æ¡£ï¼Œä¸€ä¸ªä¸ªåšäº†è¯¦ç»†çš„ç¬”è®°ï¼Œè€Œä¸”è”æƒ³è¿‡äº†ä½¿ç”¨åœºæ™¯ã€‚</p><a id="more"></a><h2 id="2ã€JavaScript-æ‰å®åŸºç¡€"><a href="#2ã€JavaScript-æ‰å®åŸºç¡€" class="headerlink" title="2ã€JavaScript æ‰å®åŸºç¡€"></a>2ã€JavaScript æ‰å®åŸºç¡€</h2><p>â€‹    å¹¸å¥½è‡ªå·±ä¹‹å‰èŠ±äº†å¤§åŠ›æ°”å»ç»™è‡ªå·±æ‰“åŸºç¡€ï¼Œè®©è‡ªå·±ç°åœ¨çš„ JavaScript åŸºç¡€è¿˜ç®—ä¸é”™ã€‚</p><p>é€¼ç€è‡ªå·±æŠŠå¾ˆå¤šæœ¬ JavaScript ä¹¦éƒ½çœ‹å®Œäº†ï¼Œå¹¶ä¸”åšäº†è¯¦ç»†ç¬”è®°ã€‚åƒæ˜¯ã€ JavaScriptæ˜“ç»´æŠ¤ã€‘ã€JavaScriptæ€§èƒ½ ã€‘ï¼Œã€JavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‘ã€å·´è²ç‰¹ç»™è‚¡ä¸œçš„ä¿¡ã€‘çœ‹äº†ä¸¤éï¼Œè¯´ä¸ä¸Šç²¾é€šï¼Œä¹Ÿç®—æ˜¯è¿˜å¯ä»¥ï¼Ÿ</p><h2 id="3ã€çœ‹å®Œ-JavaScript-è®¾è®¡æ¨¡å¼"><a href="#3ã€çœ‹å®Œ-JavaScript-è®¾è®¡æ¨¡å¼" class="headerlink" title="3ã€çœ‹å®Œ JavaScript è®¾è®¡æ¨¡å¼"></a>3ã€çœ‹å®Œ JavaScript è®¾è®¡æ¨¡å¼</h2><p>â€‹    å…‰æ˜¯ JavaScript è®¾è®¡æ¨¡å¼ è¿™æœ¬ä¹¦ æˆ‘å°±çœ‹äº†ä¸€å¹´åŠï¼Œä¸èƒ½è¯´è‡ªå·±æŠŠæ‰€æœ‰è®¾è®¡æ¨¡å¼éƒ½æŒæ¡äº†ï¼ŒæŒæ¡äº†å¤§éƒ¨åˆ†å§ï¼Œè®¾è®¡æ¨¡å¼æ¸¯çœŸçœŸçš„å¾ˆæœ‰è¶£ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸ä¼šå†³å¿ƒå­¦</p><p>â€‹    åœ¨è¿™é‡Œæ¨è å¼ å®¹é“­çš„ ã€JavaScriptè®¾è®¡æ¨¡å¼ã€‘ï¼Œä¹¦è®²å¾—éå¸¸é€å½»å’Œè¯¦ç»†ï¼Œæˆ‘æ˜¯ä»å®Œå…¨ä¸æ‡‚å¼€å§‹çœ‹çš„</p><p>â€‹    ä¹Ÿç»å¸¸ä½¿ç”¨ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä¸€ç›´ä»¥è®¾è®¡æ¨¡å¼ä¸ºæˆ‘çš„é¡¹ç›®åŸºæ„ã€‚å°±æ˜¯ èƒ½ç”¨è®¾è®¡æ¨¡å¼çš„åœ°æ–¹ï¼Œæˆ‘éƒ½å°½é‡ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚</p><p>â€‹    è®¾è®¡æ¨¡å¼çœ‹èµ·æ¥å°±åƒæ˜¯ å‰‘å®¢ çš„å‰‘è°±ï¼Œæœ‰æ‹›æœ‰å¼ï¼Œè¿äººå®¶æ­¦ä¾ å‰§å‘åŠŸçš„æ—¶å€™éƒ½çŸ¥é“ å–Šå‡º æ‹›å¼çš„åå­—â€¦ é™é¾™åå…«æŒï¼ï¼ï¼ï¼</p><p>â€‹    é‡è·¯å­éš¾ç™»å¤§é›…ä¹‹å ‚ï¼Œä¸»è¦æ˜¯ä¸å¥½çœ‹å•Šï¼Œä»£ç ä¸ºäº†å¥½ç»´æŠ¤ï¼Œæ˜“æ‰©å±•</p><h2 id="4ã€å­¦ä¼šè°ƒè¯•"><a href="#4ã€å­¦ä¼šè°ƒè¯•" class="headerlink" title="4ã€å­¦ä¼šè°ƒè¯•"></a>4ã€å­¦ä¼šè°ƒè¯•</h2><p>â€‹    æˆ‘å¾ˆå¤§èƒ†åœ°è¯´ï¼Œå¦‚æœä½ ä¸ä¼šè°ƒè¯•ï¼Œä½ çœ‹ Vue æºç ï¼Œæˆ–è€…ä½ ä¼šæƒ³æ­»ï¼Œä½ ä¼šå‡ºç°è¿™ä¸ªåœºæ™¯â€¦</p><blockquote><p>MMPï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ€ä¹ˆè·³åˆ° é‚£ä¸ªæ–¹æ³•çš„ï¼Œé‚£ä¸ªæ–¹æ³•å’Œ è¿™ä¸ªæ–¹æ³•åˆæ˜¯æ€ä¹ˆè”ç³»èµ·æ¥çš„ï¼Ÿ</p></blockquote><p>â€‹    ä¹Ÿè®¸ä½ å¯ä»¥æ…¢æ…¢ ä½¿ç”¨ å‡½æ•°åå­— å»å¯»æ‰¾ï¼Œä½†æ˜¯æ— ç–‘ä½ ä¼šå¤šæ¶ˆè€—å‡ å€æ—¶é—´ï¼Œè€Œä¸”ä½ ä¼šæ›´çƒ¦</p><p>â€‹    ä½¿ç”¨è°ƒè¯•çœŸçš„æ–¹ä¾¿ï¼Œä»¥å‰æˆ‘ä¹ŸçœŸçš„ä¸å–œæ¬¢è°ƒè¯•ï¼Œè§‰å¾—å¥½åƒå¾ˆéš¾ï¼Ÿï¼Ÿï¼Ÿ</p><p>â€‹    æ›´å–œæ¬¢ä½¿ç”¨ console.log å»æ‰“å°ä¿¡æ¯â€¦..</p><p>â€‹    æ˜¯å•Šï¼Œæˆ‘è‡ªå·±å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä¼šä½¿ç”¨ console.log å»è°ƒè¯•â€¦â€¦.</p><p>â€‹    é‚£æ˜¯å› ä¸ºæˆ‘è‡ªå·±ä»£ç ï¼Œæˆ‘çŸ¥é“æ€ä¹ˆè·‘ï¼Œä½  çœ‹åˆ«äººçš„ä»£ç ï¼Œè¿˜æ˜¯è¶…çº§æŠ½è±¡çš„æ¡†æ¶ï¼Œä½¿ç”¨ console.log çš„æ–¹å¼â€¦..</p><p>â€‹    æ”¾å¿ƒï¼Œç›¸ä¿¡æˆ‘ï¼Œä½ ä¼šæ‰å¾ˆå¤šå¤´å‘â€¦â€¦â€¦</p><p>â€‹    è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ VSCode å»è°ƒè¯•ï¼ŒçœŸçš„ç®€å•åˆæ–¹ä¾¿ï¼Œæˆ‘å½“æ—¶ä¹ŸçœŸçš„å¾ˆéš¾å»è®©è‡ªå·±åˆè¦å­¦ä¸€ä¸ªä¸œè¥¿</p><p>â€‹    ä½†æ˜¯æˆ‘å’¬å’¬ç‰™ï¼Œæˆ‘è¿˜æ˜¯å­¦äº†ï¼Œæ„Ÿè°¢è‡ªå·±â€¦â€¦</p><p>â€‹    æˆ‘å¯ä»¥ä¿è¯ï¼Œä½ ä»ä¸æ‡‚åˆ°æŒæ¡ï¼Œåªè¦ä¸åˆ°ååˆ†é’Ÿï¼Œç®€ç›´å°±æ˜¯ ç°å®ç‰ˆçš„ ååˆ†é’Ÿç²¾é€šåˆ°å…¥é—¨</p><p>â€‹    å¥½å§ï¼Œä¸‹é¢å¼€å§‹è¯´ï¼ŒVue çš„ç®€å•æ€»ç»“ã€‚</p><p><strong>Vue æºç çš„ç®€çŸ­çš„æ€»ç»“</strong></p><h3 id="1ã€å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„å‡½æ•°ï¼"><a href="#1ã€å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„å‡½æ•°ï¼" class="headerlink" title="1ã€å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„å‡½æ•°ï¼"></a>1ã€å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„å‡½æ•°ï¼</h3><p>ä¸ºäº† å¤ç”¨ ä¸” æ˜“ç»´æŠ¤</p><p>å¸¸ç”¨çš„ç±»å‹åˆ¤æ–­ã€ ç±»å‹è½¬æ¢ ã€æ•°æ®æ ¼å¼è½¬æ¢ï¼ˆæ•°ç»„è½¬å¯¹è±¡ï¼‰â€¦..</p><p>ä¸¾äº›ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">obj</span>) </span>&#123;    <span class="keyword">return</span> obj !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUndef</span>(<span class="params">v</span>) </span>&#123;    <span class="keyword">return</span> v === <span class="literal">undefined</span> || v === <span class="literal">null</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDef</span>(<span class="params">v</span>) </span>&#123;    <span class="keyword">return</span> v !== <span class="literal">undefined</span> &amp;&amp; v !== <span class="literal">null</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span>(<span class="params">val</span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> val == <span class="literal">null</span> ?    <span class="string">&#x27;&#x27;</span> :    </span><br><span class="line">    <span class="keyword">typeof</span> val === <span class="string">&#x27;object&#x27;</span> ?    </span><br><span class="line">    <span class="built_in">JSON</span>.stringify(val, <span class="literal">null</span>, <span class="number">2</span>) :    <span class="built_in">String</span>(val)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toObject</span>(<span class="params">arr</span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">var</span> res = &#123;&#125;;    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;        </span><br><span class="line">        <span class="keyword">if</span> (arr[i]) &#123;</span><br><span class="line">            extend(res, arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">....</span><br></pre></td></tr></table></figure><p>â€‹    ä½ è¯´è¯´ä¸å®šè¿‡äº†å‡ å¹´ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸å†æ˜¯ ä»€ä¹ˆ typeof obj==â€objectâ€</p><p>â€‹    å¦‚æœæ²¡æœ‰å°è£…ï¼Œé‚£å²‚ä¸æ˜¯æ‰€æœ‰ä»£ç æ¶‰åŠåˆ°çš„éƒ½è¦æ”¹ä¸€éï¼Œä¸”ä¸è¯´å¦‚æœæœ‰å¾ˆå¤šä¸ªéƒ½å˜äº†â€¦..é‚£ä½ å°±å¤´å¤§äº†</p><h3 id="èŠ‚ç‚¹æ“ä½œå…¼å®¹å‡½æ•°"><a href="#èŠ‚ç‚¹æ“ä½œå…¼å®¹å‡½æ•°" class="headerlink" title="èŠ‚ç‚¹æ“ä½œå…¼å®¹å‡½æ•°"></a>èŠ‚ç‚¹æ“ä½œå…¼å®¹å‡½æ•°</h3><p>addClass ,removeClassï¼ŒcreateElementï¼ŒappendChildï¼ŒremoveChild </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">el, cls</span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">if</span> (!cls || !(cls = cls.trim())) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> (el.classList) &#123;        </span><br><span class="line">        <span class="keyword">if</span> (cls.indexOf(<span class="string">&#x27; &#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">            cls.split(<span class="regexp">/\s+/</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123; <span class="keyword">return</span> el.classList.add(c); &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            el.classList.add(cls);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;        </span><br><span class="line">       <span class="keyword">var</span> cur = <span class="string">&quot; &quot;</span> + (el.getAttribute(<span class="string">&#x27;class&#x27;</span>) || <span class="string">&#x27;&#x27;</span>) + <span class="string">&quot; &quot;</span>;        </span><br><span class="line">       <span class="keyword">if</span> (cur.indexOf(<span class="string">&#x27; &#x27;</span> + cls + <span class="string">&#x27; &#x27;</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            el.setAttribute(<span class="string">&#x27;class&#x27;</span>, (cur + cls).trim());</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">....</span><br></pre></td></tr></table></figure><p>è¿™äº›å‡½æ•°éƒ½å¾ˆæœ‰ç”¨ï¼Œæ‰€ä»¥æˆ‘éƒ½è®°ä¸‹æ¥äº†ï¼Œæ¯•ç«Ÿæ˜¯ æ¡†æ¶å°è£…çš„ï¼Œè‚¯å®šæ˜¯æœ€å®Œå–„çš„</p><h3 id="2ã€çœŸçš„ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼"><a href="#2ã€çœŸçš„ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼" class="headerlink" title="2ã€çœŸçš„ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼"></a>2ã€çœŸçš„ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼</h3><p>å°±æˆ‘çœ‹åˆ°çš„è®¾è®¡æ¨¡å¼å°±æœ‰</p><p> Vueæ¶‰åŠçš„è®¾è®¡æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€èŠ‚æµæ¨¡å¼ã€å‚ä¸è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€å•ä¾‹æ¨¡å¼è£…é¥°è€…æ¨¡å¼ã€ç»„åˆç»§æ‰¿æ¨¡å¼ã€é“¾æ¨¡å¼â€¦â€¦â€¦</p><p>æˆ‘æ€€ç–‘ Vue æŠŠæ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½ç”¨å®Œäº†â€¦. çœŸçš„â€¦.. å¦‚æœä½ ä¸æ‡‚è®¾è®¡æ¨¡å¼</p><p>ä½ çœŸä¸ä¼šé¢†æ‚Ÿåˆ°ä»–è¿™ä¹ˆå†™çš„ç²¾é«“</p><p>æˆ‘å°±é€‰ Vue å¸¸ç”¨çš„ä¸€ä¸ªè®¾è®¡æ¨¡å¼æ¥è®²</p><p>ã€å‚ä¸è€…æ¨¡å¼ã€‘</p><p>Vue å°è£…çš„å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç”¨äº† å‚ä¸è€…æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥å«åšæŸ¯é‡ŒåŒ–</p><p>å…ˆæ¥ç®€å•è§£é‡Šä¸‹ å‚ä¸è€…æ¨¡å¼</p><p>1ã€ä¿å­˜ç¬¬ä¸€æ¬¡è°ƒç”¨ ä¼ å…¥å‚æ•°</p><p>2ã€è¿”å›å®šåˆ¶å‡½æ•°ï¼Œå‡½æ•°å†…ä½¿ç”¨ å‚æ•°</p><blockquote><p><a class="link"   href="https://blog.csdn.net/Forever201295/article/details/104032369" >https://blog.csdn.net/Forever201295/article/details/104032369<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>ç®€å•å®ç°åƒè¿™æ ·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a</span>)</span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123; <span class="keyword">return</span> a+b &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸ºäº†å®šåˆ¶å‡½æ•°ï¼ŒæŠŠç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶çš„å‚æ•°é—­åŒ…ä¿å­˜</span></span><br><span class="line">add5 = add(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">var</span> result  = add5(<span class="number">9</span>)</span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹ Vueå…¶ä¸­ä¸€ä¸ª ä½¿ç”¨æŸ¯é‡ŒåŒ– çš„å°è£…å‡½æ•°</p><p><strong>makeMap</strong></p><p>åˆ›å»º å¯¹è±¡ mapï¼Œè¿”å›å‡½æ•°ï¼Œç”¨äºåé¢æŸ¥æ‰¾ æŸä¸ªä¸œè¥¿æ˜¯å¦å­˜åœ¨ map ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeMap</span>(<span class="params"> str,  expectsLowerCase </span>) </span>&#123;    </span><br><span class="line">    <span class="keyword">var</span> map = <span class="built_in">Object</span>.create(<span class="literal">null</span>);   </span><br><span class="line">    <span class="keyword">var</span> list = str.split(<span class="string">&#x27;,&#x27;</span>);    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">        map[list[i]] = <span class="literal">true</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">return</span> expectsLowerCase ?        </span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123; <span class="keyword">return</span> map[val.toLowerCase()]; &#125; :        </span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123; <span class="keyword">return</span> map[val]; &#125;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// åº”ç”¨</span></span><br><span class="line"><span class="keyword">var</span> isUnaryTag = makeMap(   </span><br><span class="line"> <span class="string">&#x27;area,base,br,col,embed,frame,hr,img,input,isindex,keygen,&#x27;</span> +  </span><br><span class="line"> <span class="string">&#x27;link,meta,param,source,track,wbr&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ area æ ‡ç­¾æ˜¯å¦å­˜åœ¨ ä¸Šé¢ä¿å­˜è¿‡çš„ å­—ç¬¦ä¸²ä¸­</span></span><br><span class="line">isUnaryTag(<span class="string">&#x27;area&#x27;</span>)</span><br></pre></td></tr></table></figure><p>**3ã€ä½¿ç”¨å¾ˆå¤šé—­åŒ…ï¼</p><p>æ®æˆ‘çœ‹è¿‡çš„åœ°æ–¹</p><p>1ã€è§£æç»„ä»¶æ¨¡æ¿ ä½¿ç”¨äº†é—­åŒ…ä½œä¸ºç¼“å­˜ï¼Œä¸ºäº†é‡å¤è§£æ</p><p>2ã€cached å‡½æ•°ï¼Œä¸€ä¸ªä¸“é—¨ä½¿ç”¨é—­åŒ… ä¸ºç¼“å­˜çš„å‡½æ•°</p><p>3ã€ä¸Šé¢æ‰€è®²åˆ° çš„ æŸ¯é‡ŒåŒ–æ‰€æœ‰æ¶‰åŠçš„å‡½æ•°ï¼ŒmakeMap,parthPath,</p><p>4ã€createPatchFunction å½“å±ç¯‡å¹…æœ€å¤§çš„ä½¿ç”¨é—­åŒ…çš„å‡½æ•°äº†ï¼ŒæŠŠä¸€å †å‡½æ•°ä½œä¸ºé—­åŒ…ï¼Œç„¶åè¿”å› ä¸€ä¸ªå‡½æ•°ã€‚ä»–æœ€å¤§çš„ä½œç”¨æ˜¯ æ¯”è¾ƒæ›´æ–°DOM èŠ‚ç‚¹</p><p><strong>4ã€ä½¿ç”¨å¾ˆå¤šæ ‡å¿—ä½</strong></p><p>Vue å¸¸ç”¨æ ‡å¿—ä½æ¥</p><p><strong>1ã€è¡¨æ˜æ˜¯å¦å·²ç»åšäº†æŸä»¶äº‹</strong></p><p> _isMountedï¼šdom æ˜¯å¦å·²ç»æŒ‚è½½</p><p>_isDestroyed ï¼šç»„ä»¶æ˜¯å¦å·²ç»æ‘§æ¯</p><p>pendingï¼šè¡¨æ˜æ›´æ–°å›è°ƒçš„ setTimeout å·²ç»æ‰§è¡Œ</p><p>waitingï¼šæ˜¯å¦å·²ç»åˆå§‹åŒ–æ›´æ–°é˜Ÿåˆ—ï¼Œåœ¨ç­‰å¾…æ–°çš„æˆå‘˜è¿›å…¥å¯¹å’</p><p>flushingï¼šæ›´æ–°é˜Ÿåˆ—æ˜¯å¦å·²ç»å¼€å§‹é€ä¸ªæ›´æ–°æˆå‘˜</p><p>â€¦â€¦</p><p><strong>2ã€æŒ‡æ˜å½“å‰ä¸œè¥¿çš„èº«ä»½</strong></p><p>isStaticï¼šæ˜¯å¦æ˜¯é™æ€èŠ‚ç‚¹</p><p>isCommentï¼šæ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹</p><p>isClonedï¼šæ˜¯å¦æ˜¯å…‹éš†èŠ‚ç‚¹</p><p>isOnceï¼šæ˜¯å¦æœ‰v-once æŒ‡ä»¤ï¼ˆå¦‚æœæœ‰å½“å‰æŒ‡ä»¤ï¼Œä¼šè·³è¿‡ç¼–è¯‘ï¼‰</p><p>_isComponentï¼šæ˜¯å¦æ˜¯ç»„ä»¶</p><p>â€¦..</p><p>â€‹    å¤šç”¨æ ‡å¿—ä½ï¼Œæ§åˆ¶æµç¨‹ï¼Œæ›¿ä»£å¤šä½™çš„åˆ¤æ–­ï¼ˆç›´æ¥åˆ¤æ–­æ ‡å¿—ä½æ¥ç¡®è®¤èº«ä»½ï¼Œä¸ç”¨åšå¤ªå¤šçš„åˆ¤æ–­ï¼‰ï¼Œå‡å°‘å¼€é”€</p><p>â€‹    ä¸Šé¢é‚£äº›å˜é‡ï¼Œå¤§å®¶æ²¡çœ‹æºç ï¼Œå¯èƒ½æœ‰äº›æ‡µé€¼ï¼Œæ²¡å…³ç³»ï¼Œå°±å½“å…ˆçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿å°±å¥½äº†</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202012121140537732020121211.png"                      alt="image-20201212114053773"                ></p><h2 id="Vue-æºç åˆ†å‡ æ­¥èµ°"><a href="#Vue-æºç åˆ†å‡ æ­¥èµ°" class="headerlink" title="Vue æºç åˆ†å‡ æ­¥èµ°"></a>Vue æºç åˆ†å‡ æ­¥èµ°</h2><p>æˆ‘ç»™è‡ªå·±å®šçš„ä»»åŠ¡æ˜¯ åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†</p><p><strong>Vue çš„ä¸»ä½“å†…å®¹</strong></p><p>1ã€Vueåˆå§‹åŒ–åˆå§‹åŒ–åŸç†</p><p>2ã€renderæ¸²æŸ“æœºåˆ¶ </p><p>3ã€ä¾èµ–æ”¶é›† </p><p>4ã€ä¾èµ–æ›´æ–°</p><p>5ã€Virtual DOM ï¼Œdom èŠ‚ç‚¹ ç”Ÿæˆè™šæ‹ŸVnode èŠ‚ç‚¹</p><p>6ã€Diffã€Patchï¼Œ èŠ‚ç‚¹æ¯”è¾ƒæ›´æ–°</p><p>7ã€Compileï¼Œ æ¨¡æ¿ç¼–è¯‘</p><p>8ã€NextTick ï¼Œå»¶è¿Ÿæ‰§è¡Œå›è°ƒ</p><p>9ã€LifeCircle ï¼Œç”Ÿå‘½å‘¨æœŸ</p><p>10ã€Model ï¼ŒåŒå‘ç»‘å®š</p><p>11ã€Event ï¼Œäº‹ä»¶æœºåˆ¶</p><p><strong>Vue ç»„ä»¶é€‰é¡¹</strong></p><p>1ã€computed</p><p>2ã€filter</p><p>3ã€mixin</p><p>4ã€directive</p><p>5ã€slot</p><p>6ã€props</p><p>7ã€watch</p><p>â€‹    æˆ‘å°±å¤§çº¦ä»¥è¿™äº›ä¸ºæˆ‘çš„å­¦ä¹ ç›®æ ‡è¿›è¡Œ æºç é˜…è¯»çš„ï¼Œæ¯ä¸€å—éƒ½æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„å†…å®¹ï¼Œæ¯ä¸€å—å†…å®¹éƒ½ä¸æ˜¯å‡ å¤©èƒ½çœ‹å®Œçš„ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦ä¸€ç‚¹çµæ„Ÿã€‚å½“ç„¶è¿˜æœ‰å¾ˆå¤šå†…å®¹ï¼Œä½†æ˜¯æˆ‘çš„ç›®æ ‡ä¹Ÿå¹¶ä¸æ˜¯å…¨éƒ¨ï¼Œä¸€å­—ä¸æ¼è¯»å®Œï¼Œæˆ‘è¦çš„æ˜¯ä»–çš„ç²¾é«“å³å¯ï¼Œæˆ–è®¸ç­‰æˆ‘æŒæ¡äº†è¿™äº›ï¼Œå†å»å¼€å‘å…¶ä»–çš„å†…å®¹ï¼Œè¿™æ ·æˆ–è®¸æ›´ç®€å•</p><p>â€‹    åæ­£æˆ‘å§‹ç»ˆæé†’è‡ªå·±ä¸è¦ç„¦èºï¼Œå› ä¸ºè¿™ä¸ªä¸œè¥¿çœŸçš„æ˜¯æ€¥ä¸æ¥ï¼Œé•¿æœŸä»¥å¾€ï¼Œä¸è¦å¦„æƒ³ä¸€æ­¥ç™»å¤©ï¼Œä¸€å¼€å§‹æ€»ä¼šå¾ˆéš¾ï¼Œä½†æ˜¯ä¹…äº†ä¹Ÿä¸€æ ·å¾ˆéš¾ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ</p><p>â€‹    å¦‚æœä½ æœ‰å…´è¶£ä¹Ÿè¯»æºç ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·è®¨è®ºå­¦ä¹ â€¦.</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://mmbiz.qpic.cn/mmbiz_jpg/HCyqJSXNAiaRKWRsWg3Muds9Z1oZORoMTy7z0N25rrNAbxhmqd6wpaicib4gtYUoN9hYxicxQlSzZyicMgDEDQaIppQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1"                      alt="img" style="zoom: 25%;"                 ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œäº‘ http å‡çº§ https</title>
      <link href="2020/03/13/%E9%98%BF%E9%87%8C%E4%BA%91http%E5%8D%87%E7%BA%A7https/"/>
      <url>2020/03/13/%E9%98%BF%E9%87%8C%E4%BA%91http%E5%8D%87%E7%BA%A7https/</url>
      
        <content type="html"><![CDATA[<blockquote><p>HTTP åè®®ä»¥æ˜æ–‡æ–¹å¼å‘é€å†…å®¹ï¼Œä¸æä¾›ä»»ä½•æ–¹å¼çš„æ•°æ®åŠ å¯†ã€‚ä¸ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼ŒHTTPS åœ¨ HTTP çš„åŸºç¡€ä¸ŠåŠ å…¥äº† SSL åè®®ï¼ŒSSL ä¾é è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åŠ å¯†ã€‚</p></blockquote><a id="more"></a><h2 id="ç”³è¯·è¯ä¹¦"><a href="#ç”³è¯·è¯ä¹¦" class="headerlink" title="ç”³è¯·è¯ä¹¦"></a>ç”³è¯·è¯ä¹¦</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200313231641.png"                      alt=""                ></p><p>ç„¶ååœ¨ SSL è¯ä¹¦ä¸­ä¸‹è½½ç”³è¯·æ¥çš„è¯ä¹¦</p><p>æœ‰ 2 ä¸ªï¼š</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200313231806.png"                      alt=""                ></p><h3 id="é…ç½®é˜¿é‡Œäº‘-nginx"><a href="#é…ç½®é˜¿é‡Œäº‘-nginx" class="headerlink" title="é…ç½®é˜¿é‡Œäº‘ nginx"></a>é…ç½®é˜¿é‡Œäº‘ nginx</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200313232143.png"                      alt=""                ></p><p>æˆ‘çš„é…ç½®æ–‡ä»¶åœ¨<code>/ect/nginx</code>ï¼Œç°åœ¨æŠŠåˆšæ‰çš„ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶å¤åˆ¶è¿‡æ¥ï¼Œå¾…ä¼šç›´æ¥é…ç½®ä½¿ç”¨å°±è¡Œäº†ã€‚nginx çš„é…ç½®æ–‡ä»¶æ˜¯<code>nginx.conf</code>ï¼Œé‡Œé¢çš„é…ç½®å†…å®¹æœ‰ä»¥ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line">    #keepalive_timeout  <span class="number">0</span>;</span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line">    #gzip  on;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  www.xxx.cn;</span><br><span class="line"># åœ¨è¿™é‡Œï¼Œæˆ‘åšäº†httpså…¨åŠ å¯†å¤„ç†ï¼Œåœ¨è®¿é—®httpçš„æ—¶å€™è‡ªåŠ¨è·³è½¬åˆ°https</span><br><span class="line">   rewrite ^(.*) https:<span class="comment">//$host$1 permanent;</span></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /home/chan/www;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  <span class="number">404</span>              /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&#x27;s document root</span><br><span class="line">        # concurs with nginx&#x27;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server é…ç½®httpså°±çœ‹è¿™é‡Œå•¦</span><br><span class="line">    #</span><br><span class="line">     server &#123;</span><br><span class="line">        listen <span class="number">443</span>;</span><br><span class="line">        server_name www.xxx.cn;</span><br><span class="line">        ssl on;</span><br><span class="line">        #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span><br><span class="line">        root  /home/chan/www;</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">        ssl_certificate      cert/ssl.pem;</span><br><span class="line">        ssl_certificate_key  cert/ssl.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">            #index index.html index.htm;</span><br><span class="line">           # proxy_pass http://127.0.0.1:8081;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        error_page  <span class="number">404</span>              /<span class="number">404.</span>html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure><p>è¿è¡Œæµè§ˆå™¨</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200313232516.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitFlow å·¥ä½œæµ</title>
      <link href="2020/02/25/GitFlow%E5%B7%A5%E4%BD%9C%E6%B5%81/"/>
      <url>2020/02/25/GitFlow%E5%B7%A5%E4%BD%9C%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<p>GitFlow å·¥ä½œæµå®šä¹‰äº†ä¸€ä¸ªå›´ç»•é¡¹ç›®å‘å¸ƒçš„ä¸¥æ ¼åˆ†æ”¯æ¨¡å‹ã€‚è™½ç„¶æ¯”åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµå¤æ‚å‡ åˆ†ï¼Œä½†æä¾›äº†ç”¨äºä¸€ä¸ªå¥å£®çš„ç”¨äºç®¡ç†å¤§å‹é¡¹ç›®çš„æ¡†æ¶ã€‚</p><a id="more"></a><h2 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h2><p><a class="link"   href="https://www.bilibili.com/video/av32573821/" >Git å·¥ä½œæµæŒ‡å— - GitFlow å·¥ä½œæµ<i class="fas fa-external-link-alt"></i></a></p><p><iframe src="//player.bilibili.com/player.html?aid=32573821&cid=56999550&page=1"  width="800px" height="550px" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"><br> </iframe></p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><hr><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225120815.png"                      alt=""                ></p><p>GitFlow å·¥ä½œæµæ²¡æœ‰ç”¨è¶…å‡ºåŠŸèƒ½åˆ†æ”¯å·¥ä½œæµçš„æ¦‚å¿µå’Œå‘½ä»¤ï¼Œè€Œæ˜¯ä¸ºä¸åŒçš„åˆ†æ”¯åˆ†é…ä¸€ä¸ªå¾ˆæ˜ç¡®çš„è§’è‰²ï¼Œå¹¶å®šä¹‰åˆ†æ”¯ä¹‹é—´å¦‚ä½•å’Œä»€ä¹ˆæ—¶å€™è¿›è¡Œäº¤äº’ã€‚é™¤äº†ä½¿ç”¨åŠŸèƒ½åˆ†æ”¯ï¼Œåœ¨åšå‡†å¤‡ã€ç»´æŠ¤å’Œè®°å½•å‘å¸ƒä¹Ÿä½¿ç”¨å„è‡ªçš„åˆ†æ”¯ã€‚å½“ç„¶ä½ å¯ä»¥ç”¨ä¸ŠåŠŸèƒ½åˆ†æ”¯å·¥ä½œæµæ‰€æœ‰çš„å¥½å¤„ï¼šPull Requestsã€éš”ç¦»å®éªŒæ€§å¼€å‘å’Œæ›´é«˜æ•ˆçš„åä½œã€‚</p><h2 id="å·¥ä½œæ–¹å¼"><a href="#å·¥ä½œæ–¹å¼" class="headerlink" title="å·¥ä½œæ–¹å¼"></a>å·¥ä½œæ–¹å¼</h2><p>GitFlow å·¥ä½œæµä»ç„¶ç”¨ä¸­å¤®ä»“åº“ä½œä¸ºæ‰€æœ‰å¼€å‘è€…çš„äº¤äº’ä¸­å¿ƒã€‚å’Œå…¶å®ƒçš„å·¥ä½œæµä¸€æ ·ï¼Œå¼€å‘è€…åœ¨æœ¬åœ°å·¥ä½œå¹¶ push åˆ†æ”¯åˆ°ä¸­å¤®ä»“åº“ä¸­ã€‚</p><h3 id="å†å²åˆ†æ”¯"><a href="#å†å²åˆ†æ”¯" class="headerlink" title="å†å²åˆ†æ”¯"></a>å†å²åˆ†æ”¯</h3><p>ç›¸å¯¹ä½¿ç”¨ä»…æœ‰çš„ä¸€ä¸ª master åˆ†æ”¯ï¼ŒGitFlow å·¥ä½œæµä½¿ç”¨ 2 ä¸ªåˆ†æ”¯æ¥è®°å½•é¡¹ç›®çš„å†å²ã€‚master åˆ†æ”¯å­˜å‚¨äº†æ­£å¼å‘å¸ƒçš„å†å²ï¼Œè€Œ develop åˆ†æ”¯ä½œä¸ºåŠŸèƒ½çš„é›†æˆåˆ†æ”¯ã€‚è¿™æ ·ä¹Ÿæ–¹ä¾¿ master åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤åˆ†é…ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130619.png"                      alt=""                ></p><p>å‰©ä¸‹è¦è¯´æ˜çš„é—®é¢˜å›´ç»•ç€è¿™ 2 ä¸ªåˆ†æ”¯çš„åŒºåˆ«å±•å¼€ã€‚</p><h3 id="åŠŸèƒ½åˆ†æ”¯"><a href="#åŠŸèƒ½åˆ†æ”¯" class="headerlink" title="åŠŸèƒ½åˆ†æ”¯"></a>åŠŸèƒ½åˆ†æ”¯</h3><p>æ¯ä¸ªæ–°åŠŸèƒ½ä½äºä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯ï¼Œè¿™æ ·å¯ä»¥ push åˆ°<code>ä¸­å¤®ä»“åº“</code>ä»¥å¤‡ä»½å’Œåä½œã€‚ä½†åŠŸèƒ½åˆ†æ”¯ä¸æ˜¯ä» master åˆ†æ”¯ä¸Šæ‹‰å‡ºæ–°åˆ†æ”¯ï¼Œè€Œæ˜¯ä½¿ç”¨ develop åˆ†æ”¯ä½œä¸ºçˆ¶åˆ†æ”¯ã€‚å½“æ–°åŠŸèƒ½å®Œæˆæ—¶ï¼Œåˆå¹¶å› develop åˆ†æ”¯ã€‚æ–°åŠŸèƒ½æäº¤åº”è¯¥ä»ä¸ç›´æ¥ä¸ master åˆ†æ”¯äº¤äº’ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130648.png"                      alt=""                ></p><p>æ³¨æ„ï¼Œä»å„ç§å«ä¹‰å’Œç›®çš„ä¸Šæ¥çœ‹ï¼ŒåŠŸèƒ½åˆ†æ”¯åŠ ä¸Š develop åˆ†æ”¯å°±æ˜¯åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµçš„ç”¨æ³•ã€‚ä½† GitFlow å·¥ä½œæµæ²¡æœ‰åœ¨è¿™é‡Œæ­¢æ­¥ã€‚</p><h3 id="å‘å¸ƒåˆ†æ”¯"><a href="#å‘å¸ƒåˆ†æ”¯" class="headerlink" title="å‘å¸ƒåˆ†æ”¯"></a>å‘å¸ƒåˆ†æ”¯</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130727.png"                      alt=""                ></p><p>ä¸€æ—¦ develop åˆ†æ”¯ä¸Šæœ‰äº†åšä¸€æ¬¡å‘å¸ƒï¼ˆæˆ–è€…è¯´å¿«åˆ°äº†æ—¢å®šçš„å‘å¸ƒæ—¥ï¼‰çš„è¶³å¤ŸåŠŸèƒ½ï¼Œå°±ä» develop åˆ†æ”¯ä¸Š fork ä¸€ä¸ªå‘å¸ƒåˆ†æ”¯ã€‚æ–°å»ºçš„åˆ†æ”¯ç”¨äºå¼€å§‹å‘å¸ƒå¾ªç¯ï¼Œæ‰€ä»¥ä»è¿™ä¸ªæ—¶é—´ç‚¹å¼€å§‹ä¹‹åæ–°çš„åŠŸèƒ½ä¸èƒ½å†åŠ åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Š â€”â€” è¿™ä¸ªåˆ†æ”¯åªåº”è¯¥åš Bug ä¿®å¤ã€æ–‡æ¡£ç”Ÿæˆå’Œå…¶å®ƒé¢å‘å‘å¸ƒä»»åŠ¡ã€‚ä¸€æ—¦å¯¹å¤–å‘å¸ƒçš„å·¥ä½œéƒ½å®Œæˆäº†ï¼Œå‘å¸ƒåˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯å¹¶åˆ†é…ä¸€ä¸ªç‰ˆæœ¬å·æ‰“å¥½ Tagã€‚å¦å¤–ï¼Œè¿™äº›ä»æ–°å»ºå‘å¸ƒåˆ†æ”¯ä»¥æ¥çš„åšçš„ä¿®æ”¹è¦åˆå¹¶å› develop åˆ†æ”¯ã€‚</p><p>ä½¿ç”¨ä¸€ä¸ªç”¨äºå‘å¸ƒå‡†å¤‡çš„ä¸“é—¨åˆ†æ”¯ï¼Œä½¿å¾—ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥åœ¨å®Œå–„å½“å‰çš„å‘å¸ƒç‰ˆæœ¬çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥ç»§ç»­å¼€å‘ä¸‹ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½ã€‚è¿™ä¹Ÿæ‰“é€ å®šä¹‰è‰¯å¥½çš„å¼€å‘é˜¶æ®µï¼ˆæ¯”å¦‚ï¼Œå¯ä»¥å¾ˆè½»æ¾åœ°è¯´ï¼Œã€è¿™å‘¨æˆ‘ä»¬è¦åšå‡†å¤‡å‘å¸ƒç‰ˆæœ¬ 4.0ã€ï¼Œå¹¶ä¸”åœ¨ä»“åº“çš„ç›®å½•ç»“æ„ä¸­å¯ä»¥å®é™…çœ‹åˆ°ï¼‰ã€‚</p><p>å¸¸ç”¨çš„åˆ†æ”¯çº¦å®šï¼š</p><ul><li>ç”¨äºæ–°å»ºå‘å¸ƒåˆ†æ”¯çš„åˆ†æ”¯: <code>develop</code></li><li>ç”¨äºåˆå¹¶çš„åˆ†æ”¯: <code>master</code></li><li>åˆ†æ”¯å‘½å: <code>release</code>-_ æˆ– release/_</li></ul><h3 id="ç»´æŠ¤åˆ†æ”¯"><a href="#ç»´æŠ¤åˆ†æ”¯" class="headerlink" title="ç»´æŠ¤åˆ†æ”¯"></a>ç»´æŠ¤åˆ†æ”¯</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130815.png"                      alt=""                ></p><p>ç»´æŠ¤åˆ†æ”¯æˆ–è¯´æ˜¯çƒ­ä¿®å¤ï¼ˆhotfixï¼‰åˆ†æ”¯ç”¨äºç”Ÿæˆå¿«é€Ÿç»™äº§å“å‘å¸ƒç‰ˆæœ¬ï¼ˆproduction releasesï¼‰æ‰“è¡¥ä¸ï¼Œè¿™æ˜¯å”¯ä¸€å¯ä»¥ç›´æ¥ä» master åˆ†æ”¯ fork å‡ºæ¥çš„åˆ†æ”¯ã€‚ä¿®å¤å®Œæˆï¼Œä¿®æ”¹åº”è¯¥é©¬ä¸Šåˆå¹¶å› master åˆ†æ”¯å’Œ develop åˆ†æ”¯ï¼ˆå½“å‰çš„å‘å¸ƒåˆ†æ”¯ï¼‰ï¼Œmaster åˆ†æ”¯åº”è¯¥ç”¨æ–°çš„ç‰ˆæœ¬å·æ‰“å¥½ Tagã€‚</p><p>ä¸º Bug ä¿®å¤ä½¿ç”¨ä¸“é—¨åˆ†æ”¯ï¼Œè®©å›¢é˜Ÿå¯ä»¥å¤„ç†æ‰é—®é¢˜è€Œä¸ç”¨æ‰“æ–­å…¶å®ƒå·¥ä½œæˆ–æ˜¯ç­‰å¾…ä¸‹ä¸€ä¸ªå‘å¸ƒå¾ªç¯ã€‚ä½ å¯ä»¥æŠŠç»´æŠ¤åˆ†æ”¯æƒ³æˆæ˜¯ä¸€ä¸ªç›´æ¥åœ¨ master åˆ†æ”¯ä¸Šå¤„ç†çš„ä¸´æ—¶å‘å¸ƒã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºæœ¬å·¥ä½œæµå¦‚ä½•ç”¨äºç®¡ç†å•ä¸ªå‘å¸ƒå¾ªç¯ã€‚å‡è®¾ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ª<code>ä¸­å¤®ä»“åº“</code>ã€‚</p><h3 id="åˆ›å»ºå¼€å‘åˆ†æ”¯"><a href="#åˆ›å»ºå¼€å‘åˆ†æ”¯" class="headerlink" title="åˆ›å»ºå¼€å‘åˆ†æ”¯"></a>åˆ›å»ºå¼€å‘åˆ†æ”¯</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130837.png"                      alt=""                ></p><p>ç¬¬ä¸€æ­¥ä¸º master åˆ†æ”¯é…å¥—ä¸€ä¸ª develop åˆ†æ”¯ã€‚ç®€å•æ¥åšå¯ä»¥æœ¬åœ°åˆ›å»ºä¸€ä¸ªç©ºçš„ develop åˆ†æ”¯ï¼Œpush åˆ°æœåŠ¡å™¨ä¸Šï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch develop</span><br><span class="line">git <span class="built_in">push</span> -u <span class="built_in">origin</span> develop</span><br></pre></td></tr></table></figure><p>ä»¥åè¿™ä¸ªåˆ†æ”¯å°†ä¼šåŒ…å«äº†é¡¹ç›®çš„å…¨éƒ¨å†å²ï¼Œè€Œ master åˆ†æ”¯å°†åªåŒ…å«äº†éƒ¨åˆ†å†å²ã€‚å…¶å®ƒå¼€å‘è€…è¿™æ—¶åº”è¯¥å…‹éš†ä¸­å¤®ä»“åº“ï¼Œå»ºå¥½ develop åˆ†æ”¯çš„è·Ÿè¸ªåˆ†æ”¯ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone ssh:<span class="regexp">//u</span>ser@host<span class="regexp">/path/</span>to/repo.git</span><br><span class="line">git checkout -b develop origin/develop</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ¯ä¸ªå¼€å‘éƒ½æœ‰äº†è¿™äº›å†å²åˆ†æ”¯çš„æœ¬åœ°æ‹·è´ã€‚</p><h3 id="å°çº¢å’Œå°æ˜å¼€å§‹å¼€å‘æ–°åŠŸèƒ½"><a href="#å°çº¢å’Œå°æ˜å¼€å§‹å¼€å‘æ–°åŠŸèƒ½" class="headerlink" title="å°çº¢å’Œå°æ˜å¼€å§‹å¼€å‘æ–°åŠŸèƒ½"></a>å°çº¢å’Œå°æ˜å¼€å§‹å¼€å‘æ–°åŠŸèƒ½</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225130957.png"                      alt=""                ></p><p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå°çº¢å’Œå°æ˜å¼€å§‹å„è‡ªçš„åŠŸèƒ½å¼€å‘ã€‚ä»–ä»¬éœ€è¦ä¸ºå„è‡ªçš„åŠŸèƒ½åˆ›å»ºç›¸åº”çš„åˆ†æ”¯ã€‚æ–°åˆ†æ”¯ä¸æ˜¯åŸºäº master åˆ†æ”¯ï¼Œè€Œæ˜¯åº”è¯¥åŸºäº <code>develop</code> åˆ†æ”¯ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b <span class="built_in">some</span>-<span class="built_in">feature</span> develop</span><br></pre></td></tr></table></figure><p>ä»–ä»¬ç”¨è€å¥—è·¯æ·»åŠ æäº¤åˆ°å„è‡ªåŠŸèƒ½åˆ†æ”¯ä¸Šï¼šç¼–è¾‘ã€æš‚å­˜ã€æäº¤ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">git <span class="keyword">add</span></span><br><span class="line">git <span class="keyword">commit</span></span><br></pre></td></tr></table></figure><h3 id="å°çº¢å®ŒæˆåŠŸèƒ½å¼€å‘"><a href="#å°çº¢å®ŒæˆåŠŸèƒ½å¼€å‘" class="headerlink" title="å°çº¢å®ŒæˆåŠŸèƒ½å¼€å‘"></a>å°çº¢å®ŒæˆåŠŸèƒ½å¼€å‘</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225131037.png"                      alt=""                ></p><p>æ·»åŠ äº†æäº¤åï¼Œå°çº¢è§‰å¾—å¥¹çš„åŠŸèƒ½ OK äº†ã€‚å¦‚æœå›¢é˜Ÿä½¿ç”¨ Pull Requestsï¼Œè¿™æ—¶å€™å¯ä»¥å‘èµ·ä¸€ä¸ªç”¨äºåˆå¹¶åˆ° develop åˆ†æ”¯ã€‚å¦åˆ™å¥¹å¯ä»¥ç›´æ¥åˆå¹¶åˆ°å¥¹æœ¬åœ°çš„ develop åˆ†æ”¯å push åˆ°ä¸­å¤®ä»“åº“ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git pull <span class="built_in">origin</span> develop</span><br><span class="line">git checkout develop</span><br><span class="line">git merge <span class="built_in">some</span>-<span class="built_in">feature</span></span><br><span class="line">git <span class="built_in">push</span></span><br><span class="line">git branch -d <span class="built_in">some</span>-<span class="built_in">feature</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¡å‘½ä»¤åœ¨åˆå¹¶åŠŸèƒ½å‰ç¡®ä¿ develop åˆ†æ”¯æ˜¯æœ€æ–°çš„ã€‚æ³¨æ„ï¼ŒåŠŸèƒ½å†³ä¸åº”è¯¥ç›´æ¥åˆå¹¶åˆ° master åˆ†æ”¯ã€‚å†²çªè§£å†³æ–¹æ³•å’Œé›†ä¸­å¼å·¥ä½œæµä¸€æ ·ã€‚</p><h2 id="å°çº¢å¼€å§‹å‡†å¤‡å‘å¸ƒ"><a href="#å°çº¢å¼€å§‹å‡†å¤‡å‘å¸ƒ" class="headerlink" title="å°çº¢å¼€å§‹å‡†å¤‡å‘å¸ƒ"></a>å°çº¢å¼€å§‹å‡†å¤‡å‘å¸ƒ</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225131059.png"                      alt=""                ></p><p>è¿™ä¸ªæ—¶å€™å°æ˜æ­£åœ¨å®ç°ä»–çš„åŠŸèƒ½ï¼Œå°çº¢å¼€å§‹å‡†å¤‡å¥¹çš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ­£å¼å‘å¸ƒã€‚åƒåŠŸèƒ½å¼€å‘ä¸€æ ·ï¼Œå¥¹ç”¨ä¸€ä¸ªæ–°çš„åˆ†æ”¯æ¥åšå‘å¸ƒå‡†å¤‡ã€‚è¿™ä¸€æ­¥ä¹Ÿç¡®å®šäº†å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> checkout -b release-<span class="number">0</span>.<span class="number">1</span> develop</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåˆ†æ”¯æ˜¯æ¸…ç†å‘å¸ƒã€æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ã€æ›´æ–°æ–‡æ¡£å’Œå…¶å®ƒä¸ºä¸‹ä¸ªå‘å¸ƒåšå‡†å¤‡æ“ä½œçš„åœ°æ–¹ï¼Œåƒæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¹å–„å‘å¸ƒçš„åŠŸèƒ½åˆ†æ”¯ã€‚</p><p>åªè¦å°çº¢åˆ›å»ºè¿™ä¸ªåˆ†æ”¯å¹¶ push åˆ°ä¸­å¤®ä»“åº“ï¼Œè¿™ä¸ªå‘å¸ƒå°±æ˜¯åŠŸèƒ½å†»ç»“çš„ã€‚ä»»ä½•ä¸åœ¨ develop åˆ†æ”¯ä¸­çš„æ–°åŠŸèƒ½éƒ½æ¨åˆ°ä¸‹ä¸ªå‘å¸ƒå¾ªç¯ä¸­ã€‚</p><h3 id="å°çº¢å®Œæˆå‘å¸ƒ"><a href="#å°çº¢å®Œæˆå‘å¸ƒ" class="headerlink" title="å°çº¢å®Œæˆå‘å¸ƒ"></a>å°çº¢å®Œæˆå‘å¸ƒ</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225131203.png"                      alt=""                ></p><p>ä¸€æ—¦å‡†å¤‡å¥½äº†å¯¹å¤–å‘å¸ƒï¼Œå°çº¢åˆå¹¶ä¿®æ”¹åˆ° master åˆ†æ”¯å’Œ develop åˆ†æ”¯ä¸Šï¼Œåˆ é™¤å‘å¸ƒåˆ†æ”¯ã€‚åˆå¹¶å› develop åˆ†æ”¯å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨å‘å¸ƒåˆ†æ”¯ä¸­å·²ç»æäº¤çš„æ›´æ–°éœ€è¦åœ¨åé¢çš„æ–°åŠŸèƒ½ä¸­ä¹Ÿè¦æ˜¯å¯ç”¨çš„ã€‚å¦å¤–ï¼Œå¦‚æœå°çº¢çš„å›¢é˜Ÿè¦æ±‚ Code Reviewï¼Œè¿™æ˜¯ä¸€ä¸ªå‘èµ· Pull Request çš„ç†æƒ³æ—¶æœºã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> checkout master</span><br><span class="line"><span class="attribute">git</span> merge release-<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">git</span> push</span><br><span class="line"><span class="attribute">git</span> checkout develop</span><br><span class="line"><span class="attribute">git</span> merge release-<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">git</span> push</span><br><span class="line"><span class="attribute">git</span> branch -d release-<span class="number">0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure><p>å‘å¸ƒåˆ†æ”¯æ˜¯ä½œä¸ºåŠŸèƒ½å¼€å‘ï¼ˆdevelop åˆ†æ”¯ï¼‰å’Œå¯¹å¤–å‘å¸ƒï¼ˆmaster åˆ†æ”¯ï¼‰é—´çš„ç¼“å†²ã€‚åªè¦æœ‰åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œå°±åº”è¯¥æ‰“å¥½ Tag ä»¥æ–¹ä¾¿è·Ÿè¸ªã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">tag</span> <span class="title">-a</span> <span class="number">0.1</span> -m <span class="string">&quot;Initial public release&quot;</span> <span class="literal">master</span></span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure><p>Git æœ‰æä¾›å„ç§å‹¾å­ï¼ˆhookï¼‰ï¼Œå³ä»“åº“æœ‰äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘æ‰§è¡Œçš„è„šæœ¬ã€‚å¯ä»¥é…ç½®ä¸€ä¸ªå‹¾å­ï¼Œåœ¨ä½  push ä¸­å¤®ä»“åº“çš„ master åˆ†æ”¯æ—¶ï¼Œè‡ªåŠ¨æ„å»ºå¥½å¯¹å¤–å‘å¸ƒã€‚</p><h3 id="æœ€ç»ˆç”¨æˆ·å‘ç°-Bug"><a href="#æœ€ç»ˆç”¨æˆ·å‘ç°-Bug" class="headerlink" title="æœ€ç»ˆç”¨æˆ·å‘ç° Bug"></a>æœ€ç»ˆç”¨æˆ·å‘ç° Bug</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200225131248.png"                      alt=""                ></p><p>å¯¹å¤–å‘å¸ƒåï¼Œå°çº¢å›å»å’Œå°æ˜ä¸€èµ·åšä¸‹ä¸ªå‘å¸ƒçš„æ–°åŠŸèƒ½å¼€å‘ï¼Œç›´åˆ°æœ‰æœ€ç»ˆç”¨æˆ·å¼€äº†ä¸€ä¸ª <code>Issues</code> æŠ±æ€¨å½“å‰ç‰ˆæœ¬çš„ä¸€ä¸ª Bugã€‚ä¸ºäº†å¤„ç† Bugï¼Œå°çº¢ï¼ˆæˆ–å°æ˜ï¼‰ä» master åˆ†æ”¯ä¸Šæ‹‰å‡ºäº†ä¸€ä¸ª<code>ç»´æŠ¤åˆ†æ”¯</code>ï¼Œæäº¤ä¿®æ”¹ä»¥è§£å†³é—®é¢˜ï¼Œç„¶åç›´æ¥åˆå¹¶å› master åˆ†æ”¯ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b issue-<span class="comment">#001 master</span></span><br><span class="line"><span class="comment"># Fix the bug</span></span><br><span class="line">git checkout <span class="literal">master</span></span><br><span class="line">git merge issue-<span class="comment">#001</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>å°±åƒå‘å¸ƒåˆ†æ”¯ï¼Œç»´æŠ¤åˆ†æ”¯ä¸­æ–°åŠ è¿™äº›é‡è¦ä¿®æ”¹éœ€è¦åŒ…å«åˆ° develop åˆ†æ”¯ä¸­ï¼Œæ‰€ä»¥å°çº¢è¦æ‰§è¡Œä¸€ä¸ªåˆå¹¶æ“ä½œã€‚ç„¶åå°±å¯ä»¥å®‰å…¨åœ°åˆ é™¤è¿™ä¸ªåˆ†æ”¯äº†ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge issue-<span class="meta">#001</span></span><br><span class="line">git <span class="keyword">push</span></span><br><span class="line">git branch -d issue-<span class="meta">#001</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆ°äº†è¿™é‡Œï¼Œ GitFlow å·¥ä½œæµå·²ç»æ„Ÿè§‰å¾ˆèˆ’é€‚äº†ã€‚ä½ åº”è¯¥ä¹Ÿç‰¢å›ºçš„æŒæ¡äº†æœ¬åœ°ä»“åº“çš„æ½œèƒ½ï¼Œpush/pull æ¨¡å¼å’Œ Git å¥å£®çš„åˆ†æ”¯å’Œåˆå¹¶æ¨¡å‹ã€‚</p><p>è®°ä½ï¼Œè¿™é‡Œæ¼”ç¤ºçš„å·¥ä½œæµåªæ˜¯å¯èƒ½ç”¨æ³•çš„ä¾‹å­ï¼Œè€Œä¸æ˜¯åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨ Git ä¸å¯è¿é€†çš„æ¡ä¾‹ã€‚æ‰€ä»¥ä¸è¦ç•æƒ§æŒ‰è‡ªå·±éœ€è¦å¯¹å·¥ä½œæµçš„ç”¨æ³•åšå–èˆã€‚ä¸å˜çš„ç›®æ ‡å°±æ˜¯è®© Git ä¸ºä½ æ‰€ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>koa2+mysql+router åå°å¼€å‘é¡¹ç›®</title>
      <link href="2020/02/24/koa2+mysql%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE/"/>
      <url>2020/02/24/koa2+mysql%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p>koa2 ä¸ mysql åœ¨ä¸ªäººé¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°è®°å½•ä¸€ä¸‹</p><a id="more"></a><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><h3 id="1-å»ºç«‹æ–‡ä»¶å¤¹åä¸º-koa-decorator-ç›®å½•å¦‚ä¸‹"><a href="#1-å»ºç«‹æ–‡ä»¶å¤¹åä¸º-koa-decorator-ç›®å½•å¦‚ä¸‹" class="headerlink" title="1.å»ºç«‹æ–‡ä»¶å¤¹åä¸º koa-decorator ç›®å½•å¦‚ä¸‹"></a>1.å»ºç«‹æ–‡ä»¶å¤¹åä¸º koa-decorator ç›®å½•å¦‚ä¸‹</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ dist----------------------------------- ç¼–è¯‘åçš„</span><br><span class="line">â”œâ”€â”€ src ----------------------------------- é¡¹ç›®çš„æ‰€æœ‰ä»£ç </span><br><span class="line">â”‚ â”œâ”€â”€config ----------------------------- é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚ â”œâ”€â”€controller ------------------------- æ§åˆ¶å™¨</span><br><span class="line">â”‚ â”œâ”€â”€lib -------------------------------- ä¸€äº›é¡¹ç›®çš„æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¦‚è·¯ç”±çš„è£…é¥°å™¨æ–‡ä»¶å°±åœ¨è¿™é‡Œï¼‰</span><br><span class="line">â”‚ â”œâ”€â”€logic ------------------------------ ä¸€äº›æ•°æ®æ ¡éªŒ</span><br><span class="line">â”‚ â”œâ”€â”€middleware ------------------------- ä¸­é—´ä»¶</span><br><span class="line">â”‚ â”œâ”€â”€models------------------------------ æ“ä½œæ•°æ®è¡¨ç›¸å…³é€»è¾‘ä»£ç (æ ¹æ®é¡¹ç›®å¤æ‚åº¦å¯ä»¥å†åˆ†Serviceå±‚)</span><br><span class="line">â”‚ â”œâ”€â”€util-------------------------------- ç›¸å…³çš„å·¥å…·æ–‡ä»¶</span><br><span class="line">â”‚ â”œâ”€â”€index.js---------------------------- é¡¹ç›®çš„å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ View --------------------------------- ä¸€äº›é™æ€æ–‡ä»¶(ä¸Šä¼ çš„å›¾ç‰‡)</span><br><span class="line">â”œâ”€â”€ .babelrc ------------------------------ babelrc çš„ç›¸å…³é…ç½®</span><br><span class="line">â”œâ”€â”€ .gitignore ---------------------------- git çš„å¿½ç•¥é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ dev.js -------------------------------- å¼€å‘ç¯å¢ƒçš„å¯åŠ¨æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ production.js ------------------------- ç”Ÿäº§ç¯å¢ƒçš„å¯åŠ¨æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="2-å…¥å£æ–‡ä»¶"><a href="#2-å…¥å£æ–‡ä»¶" class="headerlink" title="2.å…¥å£æ–‡ä»¶"></a>2.å…¥å£æ–‡ä»¶</h3><p>ç¼–å†™å¼€å‘ç¯å¢ƒ dev.js å’Œ ç”Ÿäº§ç¯å¢ƒçš„ production.js çš„å¯åŠ¨æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> dev.js</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;babel-register&quot;</span>);</span><br><span class="line">process.env.NODE_ENV = <span class="string">&quot;development&quot;</span>;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./src&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> production.js</span><br><span class="line">process.env.NODE_ENV = <span class="string">&quot;production&quot;</span>;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./dist&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®-package-json"><a href="#3-é…ç½®-package-json" class="headerlink" title="3.é…ç½® package.json"></a>3.é…ç½® package.json</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">   <span class="string">&quot;build&quot;</span>: <span class="string">&quot;babel src  --out-dir dist&quot;</span>,</span><br><span class="line">   <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;set NODE_ENV=development &amp;&amp;  supervisor  --watch src dev.js&quot;</span>,</span><br><span class="line">   <span class="string">&quot;start&quot;</span>: <span class="string">&quot;npm run build &amp;&amp; set NODE_ENV=production  &amp;&amp; supervisor --watch dist production.js&quot;</span>,</span><br><span class="line">   <span class="string">&quot;pm2&quot;</span>: <span class="string">&quot;pm2 start production.js --name &amp;#39;wx-node&amp;#39; --env  NODE_ENV=&amp;#39;production&amp;#39; --output ./logs/logs-out.log  --error ./logs/logs-error.log  --watch dist&quot;</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><ol><li><p>è¿è¡Œ npm run build : æ˜¯ç”¨ babel ç›´æ¥å°† src ç›®å½•ç¼–è¯‘åœ¨ dist ç›®å½•</p></li><li><p>è¿è¡Œ npm run dev ï¼š æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡ä¸º development å¹¶ä¸”ç›‘å¬ src ç›®å½•ï¼Œå¯åŠ¨ dev.js è¿è¡Œï¼Œä¸ºå¼€å‘ç¯å¢ƒ</p></li><li><p>è¿è¡Œ npm run start : æ˜¯ è¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ npm run build å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡ä¸º production  ç›‘å¬ dist ç›®å½•,å¯åŠ¨ production.js è¿è¡Œï¼Œä¸ºç”Ÿäº§æˆ–è€…æµ‹è¯•ç¯å¢ƒ</p></li><li><p>è¿è¡Œ npm run pm2ï¼š è¿™æ˜¯ä½¿ç”¨ pm2 æ¥å®ˆæŠ¤é¡¹ç›®è¿›ç¨‹,å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡å’Œæ—¥å¿—è®°</p></li></ol><h3 id="4-nodejs-å…¥å£æ–‡ä»¶"><a href="#4-nodejs-å…¥å£æ–‡ä»¶" class="headerlink" title="4.nodejs å…¥å£æ–‡ä»¶"></a>4.nodejs å…¥å£æ–‡ä»¶</h3><p>åˆ›å»º server æ–‡ä»¶ä¸‹ index,js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&amp;#39;koa&amp;#39;);</span><br><span class="line">const &#123; resolve &#125; = require(&amp;#39;path&amp;#39;);</span><br><span class="line">const views = require(&amp;#39;koa-views&amp;#39;);</span><br><span class="line">const R = require(&amp;#39;ramda&amp;#39;);</span><br><span class="line">const MIDDLEWARES = [ &amp;#39;common&amp;#39;, &amp;#39;router&amp;#39; ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useMiddlewares = <span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">  R.map(</span><br><span class="line">    R.compose(R.forEachObjIndexed(<span class="function">(<span class="params">initWith</span>) =&gt;</span> initWith(app)), <span class="built_in">require</span>, <span class="function">(<span class="params">name</span>) =&gt;</span></span><br><span class="line">      resolve(__dirname, <span class="string">`./middlewares/<span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">    )</span><br><span class="line">  )(MIDDLEWARES);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">//åˆ›å»ºå®ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">  <span class="comment">//views</span></span><br><span class="line">  app.use(</span><br><span class="line">    views(resolve(__dirname, &amp;#39;../views&amp;#39;), &#123;</span><br><span class="line">      extension : &amp;#39;html&amp;#39;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// error logger</span></span><br><span class="line">  app.on(&amp;#39;error&amp;#39;, (err, ctx) =&gt; &#123;</span><br><span class="line">    console.log(&amp;#39;error occured:&amp;#39;, err);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> useMiddlewares(app);</span><br><span class="line">  <span class="comment">// ç›‘å¬ç«¯å£</span></span><br><span class="line">  app.listen(<span class="number">4455</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    console.log(&amp;#39;http://127.0.0.1:4455 is runing&amp;#39;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="5-Router-è·¯ç”±äºŒæ¬¡å°è£…é…ç½®"><a href="#5-Router-è·¯ç”±äºŒæ¬¡å°è£…é…ç½®" class="headerlink" title="5.Router è·¯ç”±äºŒæ¬¡å°è£…é…ç½®"></a>5.Router è·¯ç”±äºŒæ¬¡å°è£…é…ç½®</h3><p>åœ¨ lib æ–‡ä»¶ä¸­åˆ›å»º decorator.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">&quot;koa-router&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">&quot;lodash&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">&quot;glob&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> R = <span class="built_in">require</span>(<span class="string">&quot;ramda&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> symbolPrefix = <span class="built_in">Symbol</span>(<span class="string">&quot;prefix&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> routerMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isArray = <span class="function"><span class="params">c</span> =&gt;</span> (_.isArray(c) ? c : [c]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Route</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">app, apiPath</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.app = app;</span><br><span class="line">    <span class="built_in">this</span>.apiPath = apiPath;</span><br><span class="line">    <span class="built_in">this</span>.router = <span class="keyword">new</span> Router();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    glob.sync(resolve(<span class="built_in">this</span>.apiPath, <span class="string">&quot;./**/*.js&quot;</span>)).forEach(<span class="built_in">require</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> [conf, controller] <span class="keyword">of</span> routerMap) &#123;</span><br><span class="line">      <span class="keyword">const</span> controllers = isArray(controller);</span><br><span class="line">      <span class="keyword">let</span> prefixPath = conf.target[symbolPrefix];</span><br><span class="line">      <span class="keyword">if</span> (prefixPath) prefixPath = normalizePath(prefixPath);</span><br><span class="line">      <span class="keyword">const</span> routerPath = prefixPath + conf.path;</span><br><span class="line">      <span class="built_in">this</span>.router[conf.method](routerPath, ...controllers);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.app.use(<span class="built_in">this</span>.router.routes());</span><br><span class="line">    <span class="built_in">this</span>.app.use(<span class="built_in">this</span>.router.allowedMethods());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> normalizePath = <span class="function"><span class="params">path</span> =&gt;</span> (path.startsWith(<span class="string">&quot;/&quot;</span>) ? path : <span class="string">`/<span class="subst">$&#123;path&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="function"><span class="params">conf</span> =&gt;</span> <span class="function">(<span class="params">target, key, descriptor</span>) =&gt;</span> &#123;</span><br><span class="line">  conf.path = normalizePath(conf.path);</span><br><span class="line"></span><br><span class="line">  routerMap.set(</span><br><span class="line">    &#123;</span><br><span class="line">      target: target,</span><br><span class="line">      ...conf</span><br><span class="line">    &#125;,</span><br><span class="line">    target[key]</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> controller = <span class="function"><span class="params">path</span> =&gt;</span> <span class="function"><span class="params">target</span> =&gt;</span> (target.prototype[symbolPrefix] = path);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> get = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> post = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> put = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;put&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> del = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;delete&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> use = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;use&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> all = <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">  router(&#123;</span><br><span class="line">    method: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">    path: path</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> decorate = <span class="function">(<span class="params">args, middleware</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> [target, key, descriptor] = args;</span><br><span class="line"></span><br><span class="line">  target[key] = isArray(target[key]);</span><br><span class="line">  target[key].unshift(middleware);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> convert = <span class="function"><span class="params">middleware</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> decorate(args, middleware);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> auth = convert(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ctx.session.user&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.session.user);</span><br><span class="line">  <span class="keyword">if</span> (!ctx.session.user) &#123;</span><br><span class="line">    <span class="keyword">return</span> (ctx.body = &#123;</span><br><span class="line">      success: <span class="literal">false</span>,</span><br><span class="line">      code: <span class="number">401</span>,</span><br><span class="line">      err: <span class="string">&quot;ç™»å½•ä¿¡æ¯å¤±æ•ˆï¼Œé‡æ–°ç™»å½•&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> admin = <span class="function"><span class="params">roleExpected</span> =&gt;</span></span><br><span class="line">  convert(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; role &#125; = ctx.session.user;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;admin session&quot;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(ctx.session.user);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!role || role !== roleExpected) &#123;</span><br><span class="line">        <span class="keyword">return</span> (ctx.body = &#123;</span><br><span class="line">          success: <span class="literal">false</span>,</span><br><span class="line">          code: <span class="number">403</span>,</span><br><span class="line">          err: <span class="string">&quot;ä½ æ²¡æœ‰æƒé™ï¼Œæ¥é”™åœ°æ–¹äº†&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">await</span> next();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">return</span> (ctx.body = &#123;</span><br><span class="line">        success: <span class="literal">false</span>,</span><br><span class="line">        code: <span class="number">505</span>,</span><br><span class="line">        err: <span class="string">&quot;Cannot destructure property `role` of &#x27;undefined&#x27; or &#x27;null&#x27;.&quot;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> required = <span class="function"><span class="params">rules</span> =&gt;</span></span><br><span class="line">  convert(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> errors = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> checkRules = R.forEachObjIndexed(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">      errors = R.filter(<span class="function"><span class="params">i</span> =&gt;</span> !R.has(i, ctx, ctx.request[key]))(value);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    checkRules(rules);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (errors.length) &#123;</span><br><span class="line">      ctx.body = &#123;</span><br><span class="line">        success: <span class="literal">false</span>,</span><br><span class="line">        code: <span class="number">412</span>,</span><br><span class="line">        err: <span class="string">`<span class="subst">$&#123;errors.join(<span class="string">&quot;,&quot;</span>)&#125;</span> is required`</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>middle æ–‡ä»¶å¤¹ä¸­åˆ›å»º route.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; Route &#125; = <span class="built_in">require</span>(<span class="string">&quot;../lib/decorator&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> router = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> apiPath = resolve(__dirname, <span class="string">&quot;../routes&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> router = <span class="keyword">new</span> Route(app, apiPath);</span><br><span class="line"></span><br><span class="line">  router.init();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆ›å»º routes æ–‡ä»¶å¤¹ä¸‹ user.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; controller, get, post, put &#125; = <span class="built_in">require</span>(<span class="string">&quot;../lib/decorator&quot;</span>);</span><br><span class="line"></span><br><span class="line">@controller(<span class="string">&quot;/api/v0/user&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">userController</span> </span>&#123;</span><br><span class="line">  @get(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">ctx, next</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (ctx.body = &#123;</span><br><span class="line">      success: <span class="literal">false</span>,</span><br><span class="line">      err: <span class="string">&quot;ç”¨æˆ·&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-mysql-é…ç½®"><a href="#6-mysql-é…ç½®" class="headerlink" title="6.mysql é…ç½®"></a>6.mysql é…ç½®</h3><p>åˆ›å»º config æ–‡ä»¶å¤¹â€“&gt;default.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœåŠ¡å™¨é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  port: <span class="number">4455</span>,</span><br><span class="line">  database: &#123;</span><br><span class="line">    DATABASE: <span class="string">&quot;order_test&quot;</span>,</span><br><span class="line">    USERNAME: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">    PASSWORD: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    PORT: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line">    HOST: <span class="string">&quot;localhost&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure><p>åˆ›å»º lib æ–‡ä»¶å¤¹ä¸­ mysql.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">&#x27;../config/default.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pool = mysql.createPool(&#123;</span><br><span class="line">  host     : config.database.HOST,</span><br><span class="line">  user     : config.database.USERNAME,</span><br><span class="line">  password : config.database.PASSWORD,</span><br><span class="line">  database : config.database.DATABASE,</span><br><span class="line">  port     : config.database.PORT</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> query = <span class="function">(<span class="params">sql, values</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsqlè„šæœ¬å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™</span></span><br><span class="line">    pool.getConnection(<span class="function">(<span class="params">err, connection</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        connection.query(sql, values, <span class="function">(<span class="params">err, rows</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            reject(err);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;æ•°æ®åº“è¿æ¥æ­£å¸¸&#x27;</span>);</span><br><span class="line">            resolve(rows);</span><br><span class="line">          &#125;</span><br><span class="line">          connection.release();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®åº“è¡¨æ ¼åˆ›å»º</span></span><br><span class="line"><span class="keyword">const</span> createTables = &#123;</span><br><span class="line">  users          : <span class="string">`CREATE TABLE IF NOT EXISTS user_info (</span></span><br><span class="line"><span class="string">      id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;,</span></span><br><span class="line"><span class="string">      user_id VARCHAR ( 100 ) NOT NULL COMMENT &#x27;è´¦å·&#x27;,</span></span><br><span class="line"><span class="string">      user_name VARCHAR ( 100 ) NOT NULL COMMENT &#x27;ç”¨æˆ·å&#x27;,</span></span><br><span class="line"><span class="string">      user_pwd VARCHAR ( 100 ) NOT NULL COMMENT &#x27;å¯†ç &#x27;,</span></span><br><span class="line"><span class="string">      user_head VARCHAR ( 225 ) COMMENT &#x27;å¤´åƒ&#x27;,</span></span><br><span class="line"><span class="string">      user_mobile VARCHAR ( 20 ) COMMENT &#x27;æ‰‹æœº&#x27;,</span></span><br><span class="line"><span class="string">      user_email VARCHAR ( 64 ) COMMENT &#x27;é‚®ç®±&#x27;,</span></span><br><span class="line"><span class="string">      user_creatdata TIMESTAMP NOT NULL DEFAULT NOW( ) COMMENT &#x27;æ³¨å†Œæ—¥æœŸ&#x27;,</span></span><br><span class="line"><span class="string">      user_login_time TIMESTAMP DEFAULT NOW( ) COMMENT &#x27;ç™»å½•æ—¶é—´&#x27;,</span></span><br><span class="line"><span class="string">      user_count INT COMMENT &#x27;ç™»å½•æ¬¡æ•°&#x27;</span></span><br><span class="line"><span class="string">    ) ENGINE = INNODB charset = utf8;`</span>,</span><br><span class="line">  role           : <span class="string">`CREATE TABLE IF NOT EXISTS role_info (</span></span><br><span class="line"><span class="string">      id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;,</span></span><br><span class="line"><span class="string">      role_name VARCHAR ( 20 ) NOT NULL COMMENT &#x27;è§’è‰²å&#x27;,</span></span><br><span class="line"><span class="string">      role_description VARCHAR ( 255 ) DEFAULT NULL COMMENT &#x27;æè¿°&#x27;</span></span><br><span class="line"><span class="string">    ) ENGINE = INNODB charset = utf8;`</span>,</span><br><span class="line">  permission     : <span class="string">`CREATE TABLE IF NOT EXISTS permission_info (</span></span><br><span class="line"><span class="string">      id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;,</span></span><br><span class="line"><span class="string">      permission_name VARCHAR ( 20 ) NOT NULL COMMENT &#x27;æƒé™å&#x27;,</span></span><br><span class="line"><span class="string">      permission_description VARCHAR ( 255 ) DEFAULT NULL COMMENT &#x27;æè¿°&#x27;</span></span><br><span class="line"><span class="string">    ) ENGINE = INNODB charset = utf8;`</span>,</span><br><span class="line">  userRole       : <span class="string">`CREATE TABLE IF NOT EXISTS user_role (</span></span><br><span class="line"><span class="string">      id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;,</span></span><br><span class="line"><span class="string">      user_id INT NOT NULL COMMENT &#x27;å…³è”ç”¨æˆ·&#x27;,</span></span><br><span class="line"><span class="string">      role_id INT NOT NULL COMMENT &#x27;å…³è”è§’è‰²&#x27;,</span></span><br><span class="line"><span class="string">      KEY fk_user_role_role_info_1 ( role_id ),</span></span><br><span class="line"><span class="string">      KEY fk_user_role_user_info_1 ( user_id ),</span></span><br><span class="line"><span class="string">      CONSTRAINT fk_user_role_role_info_1 FOREIGN KEY ( role_id ) REFERENCES role_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE,</span></span><br><span class="line"><span class="string">      CONSTRAINT fk_user_role_user_info_1 FOREIGN KEY ( user_id ) REFERENCES user_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE</span></span><br><span class="line"><span class="string">    ) ENGINE = INNODB charset = utf8;`</span>,</span><br><span class="line">  rolePermission : <span class="string">`CREATE TABLE IF NOT EXISTS role_permission (</span></span><br><span class="line"><span class="string">      id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;,</span></span><br><span class="line"><span class="string">      role_id INT NOT NULL COMMENT &#x27;å…³è”è§’è‰²&#x27;,</span></span><br><span class="line"><span class="string">      permission_id INT NOT NULL COMMENT &#x27;å…³è”æƒé™&#x27;,</span></span><br><span class="line"><span class="string">      KEY fk_role_permission_role_info_1 ( role_id ),</span></span><br><span class="line"><span class="string">      KEY fk_role_permission_permission_info_1 ( permission_id ),</span></span><br><span class="line"><span class="string">      CONSTRAINT fk_role_permission_role_info_1 FOREIGN KEY ( role_id ) REFERENCES role_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE,</span></span><br><span class="line"><span class="string">      CONSTRAINT fk_role_permission_permission_info_1 FOREIGN KEY ( permission_id ) REFERENCES permission_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE</span></span><br><span class="line"><span class="string">    ) ENGINE = INNODB charset = utf8;`</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> createTable = <span class="function">(<span class="params">sql</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> query(sql, []);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºè¡¨ ----åˆ›å»ºä¸€æ¬¡ä¹‹åå¯ä»¥æ³¨é‡Šä¸éœ€è¦</span></span><br><span class="line">createTable(createTables.users);</span><br><span class="line">createTable(createTables.role);</span><br><span class="line">createTable(createTables.permission);</span><br><span class="line">createTable(createTables.userRole);</span><br><span class="line">createTable(createTables.rolePermission);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡åå­—æŸ¥æ‰¾ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">const</span> findDataByName = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> _sql = <span class="string">`select * from user_info where user_name=&quot;<span class="subst">$&#123;name&#125;</span>&quot;;`</span>;</span><br><span class="line">  <span class="keyword">return</span> query(_sql);</span><br><span class="line">&#125;;</span><br><span class="line">findDataByName(<span class="string">&#x27;jack&#x27;</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"><span class="comment">//å…¶ä»–æ–¹æ³•ç›¸ä¼¼</span></span><br></pre></td></tr></table></figure><p>åœ¨è·¯ç”±æ–‡ä»¶ä¸­ router æ–‡ä»¶å¤¹ä¸‹â€“&gt;user.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; controller, get, post, put &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../lib/decorator&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> userModel = <span class="built_in">require</span>(<span class="string">&#x27;../lib/mysql.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line">@controller(<span class="string">&#x27;/api/v0/user&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">userController</span> </span>&#123;</span><br><span class="line">  @get(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">ctx, next</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> userModel.findDataByName(<span class="string">&#x27;jack&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    <span class="keyword">return</span> (ctx.body = &#123;</span><br><span class="line">      success : <span class="literal">false</span>,</span><br><span class="line">      data    : result</span><br><span class="line">      err     : <span class="string">&#x27;ç”¨æˆ·&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.....</span><br><span class="line"><span class="comment">//å…¶ä»–æ“ä½œç±»å‹</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://segmentfault.com/a/1190000018535128#item-1-5" >koa2+vue+mysql å…¨æ ˆå¼€å‘è®°å½•<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>koa2 ä½¿ç”¨ es7 çš„è£…é¥°å™¨ decorator</title>
      <link href="2020/02/23/koa2%E4%BD%BF%E7%94%A8es7%20%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8decorator/"/>
      <url>2020/02/23/koa2%E4%BD%BF%E7%94%A8es7%20%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8decorator/</url>
      
        <content type="html"><![CDATA[<p>ç›®å‰ JavaScript å¯¹ decorator æ˜¯ä¸æ”¯æŒï¼Œä½†æ˜¯å¯ä»¥ç”¨ babel  æ¥ç¼–è¯‘.</p><a id="more"></a><h2 id="è£…é¥°å™¨é…ç½®"><a href="#è£…é¥°å™¨é…ç½®" class="headerlink" title="è£…é¥°å™¨é…ç½®"></a>è£…é¥°å™¨é…ç½®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@babel/cli&quot;</span>: <span class="string">&quot;^7.8.4&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@babel/core&quot;</span>: <span class="string">&quot;^7.8.4&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>: <span class="string">&quot;^7.8.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>: <span class="string">&quot;^7.8.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@babel/register&quot;</span>: <span class="string">&quot;^7.8.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;babel-preset-env&quot;</span>: <span class="string">&quot;^1.7.0&quot;</span> <span class="comment">//æ”¯æŒimport å¯¼å…¥</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>babel é…ç½®æ–‡ä»¶ .babelrc</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123;</span><br><span class="line">      <span class="string">&quot;legacy&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>, &#123;</span><br><span class="line">      <span class="string">&quot;loose&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Boy</span> </span>&#123;</span><br><span class="line">  @speak(<span class="string">&quot;Chinese&quot;</span>)</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;====================================&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;i can run !&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;====================================&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>target | æŒ‡è£…é¥°çš„å¯¹è±¡ boy speakç´§è·Ÿçš„class</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>key |  ä¿®é¥°çš„æ–¹æ³•  run</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>descriptor |  ç‰¹å®šçš„æè¿°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">language</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target, key, descriptor</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(target);</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">    <span class="built_in">console</span>.log(descriptor);</span><br><span class="line"></span><br><span class="line">    target.language = language;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Boy();</span><br><span class="line"></span><br><span class="line">luke.run();</span><br></pre></td></tr></table></figure><p>å…¥å£æ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line">require(&amp;#39;@babel/register&amp;#39;);</span><br><span class="line"><span class="comment">// å¼•å…¥è¢«æ‰§è¡Œçš„æ–‡ä»¶</span></span><br><span class="line">require(&amp;#39;./server/index.js&amp;#39;);</span><br></pre></td></tr></table></figure><h2 id="import-æ”¯æŒ"><a href="#import-æ”¯æŒ" class="headerlink" title="import æ”¯æŒ"></a>import æ”¯æŒ</h2><p>nodejs ä»æœªæ”¯æŒ import/export è¯­æ³•ï¼Œéœ€è¦å®‰è£…å¿…è¦çš„ npm åŒ…â€“babelï¼Œä½¿ç”¨ babel å°† js æ–‡ä»¶ç¼–è¯‘æˆ node.js æ”¯æŒçš„ commonjs æ ¼å¼çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-register babel-preset-env -D</span><br></pre></td></tr></table></figure><p>babel é…ç½®æ–‡ä»¶ .babelrc</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;transform-es2015-modules-commonjs&quot;</span></span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><h3 id="1-å…¥å£æ–‡ä»¶"><a href="#1-å…¥å£æ–‡ä»¶" class="headerlink" title="### 1.å…¥å£æ–‡ä»¶"></a>### 1.å…¥å£æ–‡ä»¶</h3><p>ç¼–å†™å¼€å‘ç¯å¢ƒ dev.js å’Œ ç”Ÿäº§ç¯å¢ƒçš„ production.js çš„å¯åŠ¨æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> dev.js</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;babel-register&quot;</span>);</span><br><span class="line">process.env.NODE_ENV = <span class="string">&quot;development&quot;</span>;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./src&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> production.js</span><br><span class="line">process.env.NODE_ENV = <span class="string">&quot;production&quot;</span>;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./dist&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®-package-json"><a href="#2-é…ç½®-package-json" class="headerlink" title="2.é…ç½® package.json"></a>2.é…ç½® package.json</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">   <span class="string">&quot;build&quot;</span>: <span class="string">&quot;babel src  --out-dir dist&quot;</span>,</span><br><span class="line">   <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;set NODE_ENV=development &amp;&amp;  supervisor  --watch src dev.js&quot;</span>,</span><br><span class="line">   <span class="string">&quot;start&quot;</span>: <span class="string">&quot;npm run build &amp;&amp; set NODE_ENV=production  &amp;&amp; supervisor --watch dist production.js&quot;</span>,</span><br><span class="line">   <span class="string">&quot;pm2&quot;</span>: <span class="string">&quot;pm2 start production.js --name &#x27;wx-node&#x27; --env  NODE_ENV=&#x27;production&#x27; --output ./logs/logs-out.log  --error ./logs/logs-error.log  --watch dist&quot;</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><ol><li><p>è¿è¡Œ npm run build : æ˜¯ç”¨ babel ç›´æ¥å°† src ç›®å½•ç¼–è¯‘åœ¨ dist ç›®å½•</p></li><li><p>è¿è¡Œ npm run dev ï¼š æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡ä¸º development å¹¶ä¸”ç›‘å¬ src ç›®å½•ï¼Œå¯åŠ¨ dev.js è¿è¡Œï¼Œä¸ºå¼€å‘ç¯å¢ƒ</p></li><li><p>è¿è¡Œ npm run start : æ˜¯ è¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ npm run build å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡ä¸º production  ç›‘å¬ dist ç›®å½•,å¯åŠ¨ production.js è¿è¡Œï¼Œä¸ºç”Ÿäº§æˆ–è€…æµ‹è¯•ç¯å¢ƒ</p></li><li><p>è¿è¡Œ npm run pm2ï¼š è¿™æ˜¯ä½¿ç”¨ pm2 æ¥å®ˆæŠ¤é¡¹ç›®è¿›ç¨‹,å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡å’Œæ—¥å¿—è®°</p></li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://www.cnblogs.com/beyonds/p/11190359.html" >koa2 ä½¿ç”¨ es7 çš„è£…é¥°å™¨ decorator - å¤©é«˜ä»»é¸Ÿé£å§ - åšå®¢å›­<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨çš„ CSS å°æŠ€å·§</title>
      <link href="2020/02/02/%E5%B8%B8%E7%94%A8%E7%9A%84CSS%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>2020/02/02/%E5%B8%B8%E7%94%A8%E7%9A%84CSS%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="css-ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦"><a href="#css-ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦" class="headerlink" title="css ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦"></a>css ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="IOS-æ‰‹æœºå®¹å™¨æ»šåŠ¨æ¡æ»‘åŠ¨ä¸æµç•…"><a href="#IOS-æ‰‹æœºå®¹å™¨æ»šåŠ¨æ¡æ»‘åŠ¨ä¸æµç•…" class="headerlink" title="IOS æ‰‹æœºå®¹å™¨æ»šåŠ¨æ¡æ»‘åŠ¨ä¸æµç•…"></a>IOS æ‰‹æœºå®¹å™¨æ»šåŠ¨æ¡æ»‘åŠ¨ä¸æµç•…</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: auto;</span><br><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼"><a href="#ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼" class="headerlink" title="ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼"></a>ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼</h2><p>éšè— div å…ƒç´ çš„æ»šåŠ¨æ¡</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line">//======å¦ä¸€ç§==========</span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="calc"><a href="#calc" class="headerlink" title="calc"></a>calc</h2><p>è¿™æ˜¯ä¸€ä¸ª css å±æ€§ï¼Œæˆ‘ä¸€èˆ¬ç§°ä¹‹ä¸º css è¡¨è¾¾å¼ã€‚å¯ä»¥è®¡ç®— css çš„å€¼ã€‚æœ€æœ‰è¶£çš„æ˜¯ä»–å¯ä»¥è®¡ç®—ä¸åŒå•ä½çš„å·®å€¼ã€‚å¾ˆå¥½ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç¼ºç‚¹æ˜¯ä¸å®¹æ˜“é˜…è¯»ã€‚æ¥ç›˜ä¾ æ²¡åŠæ³•ä¸€çœ¼çœ‹å‡º 20px æ˜¯å•¥ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">25%</span> - <span class="number">20px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šè¡Œæ¢è¡Œ"><a href="#å¤šè¡Œæ¢è¡Œ" class="headerlink" title="å¤šè¡Œæ¢è¡Œ"></a>å¤šè¡Œæ¢è¡Œ</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120811image-20201208112820957.png"                      alt="image-20201208112820957" style="zoom:67%;"                 ></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">display: -webkit-box;</span><br><span class="line">-webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure><h2 id="æ¶ˆæ¯å°ä¸‰è§’"><a href="#æ¶ˆæ¯å°ä¸‰è§’" class="headerlink" title="æ¶ˆæ¯å°ä¸‰è§’"></a>æ¶ˆæ¯å°ä¸‰è§’</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142457817.png"                      alt="image-20201208142457817" style="zoom:67%;"                 ></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">22px</span> <span class="number">22px</span> <span class="number">22px</span> <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent <span class="number">#fff</span> transparent transparent;</span><br><span class="line">  <span class="comment">/* å®šä½ */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">36px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CSS-flex-å¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„-N-ç§æ–¹æ³•"><a href="#CSS-flex-å¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„-N-ç§æ–¹æ³•" class="headerlink" title="CSS flex å¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„ N ç§æ–¹æ³•"></a>CSS flex å¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„ N ç§æ–¹æ³•</h2><p>æˆ‘ä»¬å¸ƒå±€ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142529643.png"                      alt="image-20201208142529643" style="zoom:50%;"                 ></p><p>æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ space-between å’Œé—´éš™</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">24%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>n)) &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="built_in">calc</span>(<span class="number">4%</span> / <span class="number">3</span>); //é—´éš™éš”å¼€</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142556100.png"                      alt="image-20201208142556100" style="zoom:50%;"                 ></p><p><strong>é¦–å…ˆæœ€åä¸€è¡Œéœ€è¦å·¦å¯¹é½çš„å¸ƒå±€æ›´é€‚åˆä½¿ç”¨ CSS grid å¸ƒå±€å®ç°</strong>ï¼Œä½†æ˜¯ï¼Œrepeat()å‡½æ•°å…¼å®¹æ€§æœ‰äº›è¦æ±‚ï¼ŒIE æµè§ˆå™¨å¹¶ä¸æ”¯æŒã€‚å¦‚æœé¡¹ç›®éœ€è¦å…¼å®¹ IEï¼Œåˆ™æ­¤æ–¹æ³•éœ€è¦æ–Ÿé…Œã€‚</p><p>æ–¹æ³•äºŒï¼šæ ¹æ®ä¸ªæ•°æœ€åä¸€ä¸ªå…ƒç´ åŠ¨æ€ margin</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æ¯è¡Œ 4 ä¸ªå…ƒç´ ï¼Œç»“æœæœ€åä¸€è¡Œåªæœ‰ 3 ä¸ªå…ƒç´ ï¼Œåˆ™æœ€åä¸€ä¸ªå…ƒç´ çš„ margin-right å¤§å°æ˜¯â€œåˆ—è¡¨å®½åº¦+é—´éš™å¤§å°â€çš„è¯ï¼Œé‚£æœ€å 3 ä¸ªå…ƒç´ ä¹Ÿæ˜¯å¯ä»¥å®Œç¾å·¦å¯¹é½çš„ã€‚</p><ul><li><code>.list:last-child:nth-child(4n - 1)</code>è¯´æ˜æœ€åä¸€è¡Œï¼Œè¦ä¹ˆ 3 ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆ 7 ä¸ªå…ƒç´ â€¦â€¦</li><li><code>.list:last-child:nth-child(4n - 2)</code>è¯´æ˜æœ€åä¸€è¡Œï¼Œè¦ä¹ˆ 2 ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆ 6 ä¸ªå…ƒç´ â€¦â€¦</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="comment">/* ä¸¤ç«¯å¯¹é½ */</span></span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">24%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å¦‚æœæœ€åä¸€è¡Œæ˜¯3ä¸ªå…ƒç´  */</span></span><br><span class="line"><span class="selector-class">.list</span><span class="selector-pseudo">:last-child</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>n - <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="built_in">calc</span>(<span class="number">24%</span> + <span class="number">4%</span> / <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å¦‚æœæœ€åä¸€è¡Œæ˜¯2ä¸ªå…ƒç´  */</span></span><br><span class="line"><span class="selector-class">.list</span><span class="selector-pseudo">:last-child</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>n - <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="built_in">calc</span>(<span class="number">48%</span> + <span class="number">8%</span> / <span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142648370.png"                      alt="image-20201208142648370" style="zoom:50%;"                 ></p><h2 id="flex-é¡¹ä¸­å­å…ƒç´ æ–‡æœ¬æˆªæ–­-text-overflow-ellipsis-å¤±æ•ˆè¿™ä¸ªå°-â€œbugâ€"><a href="#flex-é¡¹ä¸­å­å…ƒç´ æ–‡æœ¬æˆªæ–­-text-overflow-ellipsis-å¤±æ•ˆè¿™ä¸ªå°-â€œbugâ€" class="headerlink" title="flex é¡¹ä¸­å­å…ƒç´ æ–‡æœ¬æˆªæ–­ text-overflow:ellipsis å¤±æ•ˆè¿™ä¸ªå° â€œbugâ€"></a>flex é¡¹ä¸­å­å…ƒç´ æ–‡æœ¬æˆªæ–­ text-overflow:ellipsis å¤±æ•ˆè¿™ä¸ªå° â€œbugâ€</h2><p>æ —å­ ğŸŒ°</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142712205.png"                      alt="image-20201208142712205" style="zoom:70%;"                 ></p><p>æˆ‘ä»¬ä¸èƒ½ä¸º .item-con å…ƒç´ è®¾ç½®ä¸ªå®½åº¦ï¼Œè¿™æ ·å°±æ— æ³•é€‚åº”ä¸åŒå±å¹•å°ºå¯¸çš„ç»ˆç«¯è®¾å¤‡ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨ flex é¡¹ä¸­è®¾ç½® min-width: 0;</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">320px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span> <span class="selector-class">.col1</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span> <span class="selector-class">.col2</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">0</span>; <span class="comment">/*è§£å†³æ–¹æ¡ˆ*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span> <span class="selector-class">.col2</span> <span class="selector-class">.item-con</span> &#123;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142744995.png"                      alt="image-20201208142744995" style="zoom:70%;"                 ></p><h2 id="css-ç«–å‘å­å…ƒç´ ä¸Šä¸‹å¹³å‡åˆ†é…ç©ºé—´"><a href="#css-ç«–å‘å­å…ƒç´ ä¸Šä¸‹å¹³å‡åˆ†é…ç©ºé—´" class="headerlink" title="css ç«–å‘å­å…ƒç´ ä¸Šä¸‹å¹³å‡åˆ†é…ç©ºé—´"></a>css ç«–å‘å­å…ƒç´ ä¸Šä¸‹å¹³å‡åˆ†é…ç©ºé—´</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208142826701.png"                      alt="image-20201208142826701" style="zoom:70%;"                 ></p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios æºç è§£æ</title>
      <link href="2020/01/22/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
      <url>2020/01/22/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="é¦–å…ˆå¯¹-axios-æå‡ºå‡ ä¸ªé—®é¢˜"><a href="#é¦–å…ˆå¯¹-axios-æå‡ºå‡ ä¸ªé—®é¢˜" class="headerlink" title="é¦–å…ˆå¯¹ axios æå‡ºå‡ ä¸ªé—®é¢˜"></a>é¦–å…ˆå¯¹ axios æå‡ºå‡ ä¸ªé—®é¢˜</h2><ol><li>ä¸ºä»€ä¹ˆ <code>axios</code> æ—¢å¯ä»¥å½“å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“å¯¹è±¡ä½¿ç”¨ï¼Œæ¯”å¦‚<code>axios(&#123;url,method&#125;)</code>ã€<code>axios.get</code>ã€‚</li><li>ç®€è¿° axios è°ƒç”¨æµç¨‹ã€‚</li><li>æœ‰ç”¨è¿‡æ‹¦æˆªå™¨å—ï¼ŸåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ</li><li>æœ‰ä½¿ç”¨ axios çš„å–æ¶ˆåŠŸèƒ½å—ï¼Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæ”¯æŒæµè§ˆå™¨ä¸­å‘é€è¯·æ±‚ä¹Ÿæ”¯æŒ node å‘é€è¯·æ±‚ï¼Ÿ</li></ol><p>å¸¦ç€é—®é¢˜æˆ‘ä»¬è¿›å…¥æºç å»çœ‹çœ‹å§</p><a id="more"></a><h2 id="axios-ç®€ä»‹"><a href="#axios-ç®€ä»‹" class="headerlink" title="axios ç®€ä»‹"></a>axios ç®€ä»‹</h2><p><code>axios</code> æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ <code>HTTP</code> è¯·æ±‚åº“ï¼Œå³å¯ä»¥ç”¨äºå‰ç«¯æµè§ˆå™¨ä¹Ÿå¯ä»¥åœ¨åç«¯ <code>node.js</code> ä¸­ä½¿ç”¨ï¼Œåœ¨ <code>github</code> ä¸Šçš„ <code>star</code> æ•°å·²ç»æœ‰ <code>6w+</code> äº†ï¼Œå®ƒä¹Ÿæ˜¯ <code>vue.js</code> å®˜æ–¹æåŠ›æ¨èçš„ï¼Œå‰ç«¯ï¼ˆå…¨æ ˆï¼‰å¼€å‘å¿…ä¸å¯å°‘çš„åº“ï¼Œå®ƒçš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬</p><ul><li>åŸºäº <code>Promise</code></li><li>æ”¯æŒ å‰ç«¯æµè§ˆå™¨ç¯å¢ƒ å’Œ åç«¯ <code>node.js</code> ç¯å¢ƒ</li><li>å¯æ·»åŠ æ‹¦æˆªå™¨è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</li><li>æ”¯æŒè¯·æ±‚å–æ¶ˆ</li><li>è‡ªåŠ¨è½¬æ¢ <code>JSON</code> æ•°æ®</li><li>å®¢æˆ·ç«¯æ”¯æŒé˜²èŒƒ <code>XSRF</code></li><li>æ”¯æŒå„ä¸»æµæµè§ˆå™¨ä»¥åŠ <code>IE8+</code></li></ul><h2 id="axios-è¿”å›ä¿¡æ¯"><a href="#axios-è¿”å›ä¿¡æ¯" class="headerlink" title="axios è¿”å›ä¿¡æ¯"></a>axios è¿”å›ä¿¡æ¯</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200121123122.png"                      alt=""                ></p><h2 id="çŸ¥è¯†è¦ç‚¹"><a href="#çŸ¥è¯†è¦ç‚¹" class="headerlink" title="çŸ¥è¯†è¦ç‚¹"></a>çŸ¥è¯†è¦ç‚¹</h2><ul><li>XMLHttpRequest</li><li>Promise å¼‚æ­¥ç¼–ç¨‹</li><li>å·¥å…·å‡½æ•°åº“ï¼šbindã€extendã€deepCopyã€deepMergeâ€¦â€¦</li><li>æ‹¦æˆªå™¨ï¼šInterceptor</li><li>æ‹¦æˆªå™¨ç®¡ç†ï¼šInterceptorManager</li><li>é€‚é…å™¨ï¼šAdaptor</li><li>å·¥å‚å‡½æ•°ï¼šcreateInstance</li></ul><h2 id="ä¸ºä»€ä¹ˆ-axios-æ”¯æŒå¯¹è±¡åˆæ”¯æŒå‡½æ•°"><a href="#ä¸ºä»€ä¹ˆ-axios-æ”¯æŒå¯¹è±¡åˆæ”¯æŒå‡½æ•°" class="headerlink" title="ä¸ºä»€ä¹ˆ axios æ”¯æŒå¯¹è±¡åˆæ”¯æŒå‡½æ•°"></a>ä¸ºä»€ä¹ˆ axios æ”¯æŒå¯¹è±¡åˆæ”¯æŒå‡½æ•°</h2><blockquote><p>axios æœ¬è´¨æ˜¯å‡½æ•°ï¼Œèµ‹å€¼äº†ä¸€äº›åˆ«åæ–¹æ³•ï¼Œæ¯”å¦‚ getã€post æ–¹æ³•ï¼Œå¯è¢«è°ƒç”¨ï¼Œæœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯ Axios.prototype.request å‡½æ•°ã€‚</p></blockquote><h3 id="axios-ä¸-Axios-çš„å…³ç³»"><a href="#axios-ä¸-Axios-çš„å…³ç³»" class="headerlink" title="axios ä¸ Axios çš„å…³ç³»"></a>axios ä¸ Axios çš„å…³ç³»</h3><ol><li>ä»åŠŸèƒ½è¯´ axios æ˜¯ Axios çš„å®ä¾‹ (æ‹¥æœ‰åŠŸèƒ½,æœ‰å±æ€§)</li><li>ä»è¯­æ³•è¯´ axios ä¸æ˜¯ Axios çš„å®ä¾‹ (æ˜¯ä¸ªå‡½æ•°)</li><li>axios æ˜¯ Axios.prototype.request å‡½æ•° bind()è¿”å›çš„å‡½æ•°</li><li>axios ä½œä¸ºå¯¹è±¡æœ‰ Axios åŸå‹ä¸Šçš„æ‰€æœ‰æ–¹æ³•.æœ‰ Axios å¯¹è±¡ä¸Šæ‰€æœ‰å±æ€§</li></ol><h3 id="instance-ä¸-axios-çš„åŒºåˆ«"><a href="#instance-ä¸-axios-çš„åŒºåˆ«" class="headerlink" title="instance ä¸ axios çš„åŒºåˆ«?"></a>instance ä¸ axios çš„åŒºåˆ«?</h3><p>ç›¸åŒ:</p><ul><li>éƒ½æ˜¯ä¸€ä¸ªèƒ½å‘ä»»æ„è¯·æ±‚çš„å‡½æ•°:request</li><li>éƒ½æœ‰å‘ç‰¹å®šè¯·æ±‚çš„æ–¹æ³•:get post put delete</li><li>éƒ½æœ‰é»˜è®¤é…ç½®å‚æ•°ä¸æ‹¦æˆªå™¨å±æ€§</li></ul><p>ä¸åŒ:</p><ul><li>é»˜è®¤é…ç½®å¯èƒ½ä¸ä¸€æ ·</li><li>æ²¡æœ‰ create cancelToken all æ–¹æ³•</li></ul><h3 id="åˆ©ç”¨-å·¥å‚å‡½æ•°åŒ…è£…"><a href="#åˆ©ç”¨-å·¥å‚å‡½æ•°åŒ…è£…" class="headerlink" title="åˆ©ç”¨ å·¥å‚å‡½æ•°åŒ…è£…"></a>åˆ©ç”¨ å·¥å‚å‡½æ•°åŒ…è£…</h3><p>é€šè¿‡å·¥å‚å‡½æ•°å¯¹å®ä¾‹åŒ–å¯¹è±¡è¿‡ç¨‹è¿›è¡ŒåŒ…è£…</p><ul><li>request æ–¹æ³•å¤„ç†</li><li>å®ä¾‹æŒ‚è½½<ul><li>this çš„å¤„ç†</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createInstance</span>(<span class="params">defaultConfig</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  åˆ›å»ºAxiosçš„å®ä¾‹</span></span><br><span class="line"><span class="comment">      åŸå‹å¯¹è±¡ä¸Šæœ‰ä¸€äº›ç”¨æ¥å‘è¯·æ±‚çš„æ–¹æ³•: get()/post()/put()/delete()/request()</span></span><br><span class="line"><span class="comment">      è‡ªèº«ä¸Šæœ‰2ä¸ªé‡è¦å±æ€§: defaults/interceptors</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">var</span> context = <span class="keyword">new</span> Axios(defaultConfig);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// axioså’Œaxios.create()å¯¹åº”çš„å°±æ˜¯requestå‡½æ•°</span></span><br><span class="line">  <span class="comment">// ä¸‹é¢è¿™å¥è¯ç›¸å½“äº ===&gt; Axios.prototype.request.bind(context)</span></span><br><span class="line">  <span class="keyword">var</span> instance = bind(Axios.prototype.request, context);</span><br><span class="line">   <span class="comment">// è¿”å›æ–°å‡½æ•°,æ–°å‡½æ•°å†…éƒ¨è°ƒç”¨request,é‡Œé¢çš„this æŒ‡å‘ context ä¹Ÿå°±æ˜¯Axiosçš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†AxiosåŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•æ‹·è´åˆ°instanceä¸Š: request()/get()/post()/put()/delete()</span></span><br><span class="line">  <span class="comment">//===&gt; å°±å¯ä»¥ä½¿ç”¨axios.get()</span></span><br><span class="line">  <span class="comment">//===&gt; request() === axios.request(&#123;&#125;) === axios(&#123;&#125;)</span></span><br><span class="line">  utils.extend(instance, Axios.prototype, context);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†Axioså®ä¾‹å¯¹è±¡ä¸Šçš„å±æ€§æ‹·è´åˆ°instanceä¸Š: defaultså’Œinterceptorså±æ€§</span></span><br><span class="line">  utils.extend(instance, context);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">var</span> axios = createInstance(defaults);</span><br><span class="line">...</span><br><span class="line"><span class="comment">//æºç ä¸­å¯¼å‡º</span></span><br><span class="line"><span class="built_in">module</span>.exports = axios;</span><br></pre></td></tr></table></figure><h4 id="Axios-prototype-request-æ˜¯ä»€ä¹ˆå‘¢"><a href="#Axios-prototype-request-æ˜¯ä»€ä¹ˆå‘¢" class="headerlink" title="Axios.prototype.request æ˜¯ä»€ä¹ˆå‘¢?"></a>Axios.prototype.request æ˜¯ä»€ä¹ˆå‘¢?</h4><p>æ˜¯ä¸ªå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨äºå‘è¯·æ±‚çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬ä½¿ç”¨çš„axioså°±æ˜¯æ­¤å‡½æ•°bind()è¿”å›çš„å‡½æ•°</span></span><br><span class="line">Axios.prototype.request = <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*eslint no-param-reassign:0*/</span></span><br><span class="line">  <span class="comment">// Allow for axios(&#x27;example/url&#x27;[, config]) a la fetch API</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> config === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    config = <span class="built_in">arguments</span>[<span class="number">1</span>] || &#123;&#125;;</span><br><span class="line">    config.url = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    config = config || &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">// ç»™åŸå‹å¯¹è±¡æ·»åŠ  å››ä¸ªæ–¹æ³•</span></span><br><span class="line">    utils.forEach([<span class="string">&#x27;delete&#x27;</span>, <span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;head&#x27;</span>, <span class="string">&#x27;options&#x27;</span>], <span class="function"><span class="keyword">function</span> <span class="title">forEachMethodNoData</span>(<span class="params">method</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*eslint func-names:0*/</span></span><br><span class="line">      Axios.prototype[method] = <span class="function"><span class="keyword">function</span>(<span class="params">url, config</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.request(utils.merge(config || &#123;&#125;, &#123;</span><br><span class="line">          method: method,</span><br><span class="line">          url: url</span><br><span class="line">        &#125;));</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200122102604.png"                      alt=""                ></p><h2 id="axios-è°ƒç”¨æµç¨‹"><a href="#axios-è°ƒç”¨æµç¨‹" class="headerlink" title="axios è°ƒç”¨æµç¨‹"></a>axios è°ƒç”¨æµç¨‹</h2><blockquote><p>å®é™…æ˜¯è°ƒç”¨çš„ Axios.prototype.request æ–¹æ³•ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ promise é“¾å¼è°ƒç”¨ï¼Œå®é™…è¯·æ±‚æ˜¯åœ¨ dispatchRequest ä¸­æ´¾å‘çš„ã€‚</p></blockquote><p>å› ä¸º <code>axios</code> æ˜¯å¯¹å¼‚æ­¥ä»»åŠ¡çš„å°è£…ï¼Œæ‰€ä»¥å¿…ä¸å¯å°‘çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Promise</code> æ¥è¿›è¡ŒåŒ…è£…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">request(config) å°†è¯·æ±‚æ‹¦æˆªå™¨/dispatchRequest()/å“åº”æ‹¦æˆªå™¨ é€šè¿‡Promiseé“¾ä¸²èµ·æ¥,è¿”å›Promise dispatchRequest(config)</span><br><span class="line">è½¬æ¢è¯·æ±‚æ•°æ® ===&gt; è°ƒç”¨xhrAdapter()å‘è¯·æ±‚ ===&gt; è¯·æ±‚è¿”å›åè½¬åŒ–å“åº”æ•°æ®,è¿”å›Promise xhrAdapter(config)</span><br><span class="line">åˆ›å»ºXHRå¯¹è±¡,æ ¹æ®configè¿›è¡Œç›¸åº”è®¾ç½®,å‘é€ç‰¹å®šè¯·æ±‚,å¹¶æ¥å—å“åº”æ•°æ®,è¿”å›Promise request(config) ==&gt; dispatchRequest(config)</span><br><span class="line">==&gt; xhrAdapter(config)</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200122164443.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200122134727.png"                      alt=""                ></p><h2 id="æ‹¦æˆªå™¨-Interceptor-åŸç†"><a href="#æ‹¦æˆªå™¨-Interceptor-åŸç†" class="headerlink" title="æ‹¦æˆªå™¨ - Interceptor åŸç†"></a>æ‹¦æˆªå™¨ - Interceptor åŸç†</h2><blockquote><p>ç”¨ axios.interceptors.request.use æ·»åŠ è¯·æ±‚æˆåŠŸå’Œå¤±è´¥æ‹¦æˆªå™¨å‡½æ•°ï¼Œç”¨ axios.interceptors.response.use æ·»åŠ å“åº”æˆåŠŸå’Œå¤±è´¥æ‹¦æˆªå™¨å‡½æ•°ã€‚åœ¨ Axios.prototype.request å‡½æ•°ç»„æˆ promise é“¾å¼è°ƒç”¨æ—¶ï¼ŒInterceptors.protype.forEach éå†è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨æ·»åŠ åˆ°çœŸæ­£å‘é€è¯·æ±‚ dispatchRequest çš„ä¸¤ç«¯ï¼Œä»è€Œåšåˆ°è¯·æ±‚å‰æ‹¦æˆªå’Œå“åº”åæ‹¦æˆªã€‚æ‹¦æˆªå™¨ä¹Ÿæ”¯æŒç”¨ Interceptors.protype.eject æ–¹æ³•ç§»é™¤ã€‚</p></blockquote><p>ç»™å®ä¾‹å¯¹è±¡æ·»åŠ  <code>request</code> å’Œ <code>response</code> æ‹¦æˆªå™¨</p><p>æ„é€ å‡½æ•° Axios</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Axios</span>(<span class="params">instanceConfig</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line">  <span class="built_in">this</span>.defaults = instanceConfig;</span><br><span class="line">  <span class="comment">// æ‹¦æˆªå™¨ è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">  <span class="built_in">this</span>.interceptors = &#123;</span><br><span class="line">    request: <span class="keyword">new</span> InterceptorManager(),</span><br><span class="line">    response: <span class="keyword">new</span> InterceptorManager()</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Interceptor"><a href="#Interceptor" class="headerlink" title="Interceptor"></a>Interceptor</h3><p>æ‹¦æˆªå™¨å¯¹è±¡ï¼Œç”¨æ¥æ³¨å†Œå’Œç®¡ç†æ‹¦æˆªå™¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚å‰æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚åæ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ä¸­ InterceptorManager çš„å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorManager</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.handlers = []; <span class="comment">//æä¾›æ•°ç»„</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç±»ä¼¼ä¸å›è°ƒå‡½æ•°1  å›è°ƒå‡½æ•°2</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param </span>resolvedHandler  å›è°ƒå‡½æ•°1</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param </span>rejectedHandler  å›è°ƒå‡½æ•°2</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">use</span>(<span class="params">resolvedHandler, rejectedHandler</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.handlers.push(&#123;</span><br><span class="line">      resolvedHandler,</span><br><span class="line">      rejectedHandler</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="InterceptorManager-prototype-forEach-éå†"><a href="#InterceptorManager-prototype-forEach-éå†" class="headerlink" title="InterceptorManager.prototype.forEach éå†"></a>InterceptorManager.prototype.forEach éå†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  åˆ›å»ºç”¨äºä¿å­˜è¯·æ±‚/å“åº”æ‹¦æˆªå‡½æ•°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">  æ•°ç»„çš„ä¸­é—´æ”¾å‘é€è¯·æ±‚çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">  æ•°ç»„çš„å·¦è¾¹æ”¾è¯·æ±‚æ‹¦æˆªå™¨å‡½æ•°(æˆåŠŸ/å¤±è´¥)</span></span><br><span class="line"><span class="comment">  æ•°ç»„çš„å³è¾¹æ”¾å“åº”æ‹¦æˆªå™¨å‡½æ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">var</span> chain = [dispatchRequest, <span class="literal">undefined</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = <span class="built_in">Promise</span>.resolve(config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åæ·»åŠ çš„è¯·æ±‚æ‹¦æˆªå™¨ä¿å­˜åœ¨æ•°ç»„çš„å‰é¢</span></span><br><span class="line"><span class="built_in">this</span>.interceptors.request.forEach(<span class="function"><span class="keyword">function</span> <span class="title">unshiftRequestInterceptors</span>(<span class="params">interceptor</span>) </span>&#123;</span><br><span class="line">  chain.unshift(interceptor.fulfilled, interceptor.rejected);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// åæ·»åŠ çš„å“åº”æ‹¦æˆªå™¨ä¿å­˜åœ¨æ•°ç»„çš„åé¢</span></span><br><span class="line"><span class="built_in">this</span>.interceptors.response.forEach(<span class="function"><span class="keyword">function</span> <span class="title">pushResponseInterceptors</span>(<span class="params">interceptor</span>) </span>&#123;</span><br><span class="line">  chain.push(interceptor.fulfilled, interceptor.rejected);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡promiseçš„then()ä¸²è¿èµ·æ‰€æœ‰çš„è¯·æ±‚æ‹¦æˆªå™¨/è¯·æ±‚æ–¹æ³•/å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">while</span> (chain.length) &#123;</span><br><span class="line">  promise = promise.then(chain.shift(), chain.shift());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æ„<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200122094434.png"                      alt=""                ></p><h3 id="å¼‚æ­¥ä»»åŠ¡é“¾"><a href="#å¼‚æ­¥ä»»åŠ¡é“¾" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡é“¾"></a>å¼‚æ­¥ä»»åŠ¡é“¾</h3><p>æŠŠè¯·æ±‚åŒ…è£…åœ¨ <code>Promise</code> ä»»åŠ¡é“¾ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="built_in">Promise</span>.resolve(configs);</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.interceptors.request.handlers.forEach(<span class="function"><span class="params">handler</span> =&gt;</span> &#123;</span><br><span class="line">  promise = promise.then(handler.resolvedHandler, handler.rejectedHandler);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise = promise.then(<span class="built_in">this</span>.dispatch, <span class="literal">undefined</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.interceptors.response.handlers.forEach(<span class="function"><span class="params">handler</span> =&gt;</span> &#123;</span><br><span class="line">  promise = promise.then(handler.resolvedHandler, handler.rejectedHandler);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol><li>è¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªå™¨å¯ä»¥å†™ Promiseã€‚</li><li>å¦‚æœè®¾ç½®äº†å¤šä¸ª<strong>è¯·æ±‚</strong>å“åº”å™¨ï¼Œ<strong>åè®¾ç½®çš„å…ˆæ‰§è¡Œ</strong>ã€‚</li><li>å¦‚æœè®¾ç½®äº†å¤šä¸ª<strong>å“åº”</strong>æ‹¦æˆªå™¨ï¼Œ<strong>å…ˆè®¾ç½®çš„å…ˆæ‰§è¡Œ</strong>ã€‚</li></ol><h2 id="axios-å¦‚ä½•å–æ¶ˆè¯·æ±‚"><a href="#axios-å¦‚ä½•å–æ¶ˆè¯·æ±‚" class="headerlink" title="axios å¦‚ä½•å–æ¶ˆè¯·æ±‚?"></a>axios å¦‚ä½•å–æ¶ˆè¯·æ±‚?</h2><blockquote><p>é€šè¿‡ä¼ é€’ config é…ç½® cancelToken çš„å½¢å¼ï¼Œæ¥å–æ¶ˆçš„ã€‚åˆ¤æ–­æœ‰ä¼  cancelTokenï¼Œåœ¨ promise é“¾å¼è°ƒç”¨çš„ dispatchRequest æŠ›å‡ºé”™è¯¯ï¼Œåœ¨ adapter ä¸­ request.abort()å–æ¶ˆè¯·æ±‚ï¼Œä½¿ promise èµ°å‘ rejectedï¼Œè¢«ç”¨æˆ·æ•è·å–æ¶ˆä¿¡æ¯ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cancel; <span class="comment">// ç”¨äºä¿å­˜å–æ¶ˆè¯·æ±‚çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProducts1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  axios(&#123;</span><br><span class="line">    url: <span class="string">&quot;http://localhost:4000/products1&quot;</span>,</span><br><span class="line">    cancelToken: <span class="keyword">new</span> axios.CancelToken(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// cæ˜¯ç”¨äºå–æ¶ˆå½“å‰è¯·æ±‚çš„å‡½æ•°</span></span><br><span class="line">      <span class="comment">// ä¿å­˜å–æ¶ˆå‡½æ•°, ç”¨äºä¹‹åå¯èƒ½éœ€è¦å–æ¶ˆå½“å‰è¯·æ±‚</span></span><br><span class="line">      cancel = c;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).then(</span><br><span class="line">    response =&gt; &#123;</span><br><span class="line">      cancel = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;è¯·æ±‚1æˆåŠŸäº†&quot;</span>, response.data);</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">      cancel = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;è¯·æ±‚1å¤±è´¥äº†&quot;</span>, error.message, error);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="new-axios-CancelToken-åšäº†ä»€ä¹ˆ"><a href="#new-axios-CancelToken-åšäº†ä»€ä¹ˆ" class="headerlink" title="new axios.CancelToken åšäº†ä»€ä¹ˆ"></a>new axios.CancelToken åšäº†ä»€ä¹ˆ</h3><p><strong>å½“é…ç½®äº†<code>cancelToken</code>å¯¹è±¡æ—¶</strong></p><ol><li>åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå°†æ¥å–æ¶ˆè¯·æ±‚çš„ cacelPromise</li><li>å¹¶å®šä¹‰äº†ä¸€ä¸ªç”¨äºå–æ¶ˆè¯·æ±‚çš„ cancel å‡½æ•°</li><li>å°† cancel å‡½æ•°ä¼ é€’å‡ºæ¥</li></ol><p><strong>å–æ¶ˆè¯·æ±‚</strong></p><ol><li>æ‰§è¡Œ cancel å‡½æ•°,ä¼ å…¥é”™è¯¯çš„ message</li><li>å†…éƒ¨ä¼šè®© cancelPromise å˜æˆæˆåŠŸ,ä¸”æˆåŠŸçš„å€¼ä¸ºä¸€ä¸ª Cancel å¯¹è±¡</li><li>åœ¨ cancelPromise çš„æˆåŠŸå›è°ƒä¸­,ä¸­æ–­è¯·æ±‚,å¹¶è®©å‘è¯·æ±‚çš„ promise å¤±è´¥,å¤±è´¥çš„ reason ä¸º Cancel å¯¹è±¡</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CancelToken</span>(<span class="params">executor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> executor !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;executor must be a function.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¸ºå°†æ¥å–æ¶ˆè¯·æ±‚å‡†å¤‡ä¸€ä¸ªpromiseå¯¹è±¡, å¹¶ä¿å­˜resolveå‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> resolvePromise;</span><br><span class="line">  <span class="built_in">this</span>.promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> <span class="title">promiseExecutor</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    resolvePromise = resolve;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿å­˜å½“å‰tokenå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">var</span> token = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç«‹å³æ‰§è¡Œæ¥æ”¶çš„æ‰§è¡Œå™¨å‡½æ•°, å¹¶ä¼ å…¥ç”¨äºå–æ¶ˆè¯·æ±‚çš„cancelå‡½æ•°</span></span><br><span class="line">  executor(<span class="function"><span class="keyword">function</span> <span class="title">cancel</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœtokenä¸­æœ‰reasonäº†, è¯´æ˜è¯·æ±‚å·²å–æ¶ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (token.reason) &#123;</span><br><span class="line">      <span class="comment">// Cancellation has already been requested</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†tokençš„reasonæŒ‡å®šä¸ºä¸€ä¸ªCancelå¯¹è±¡</span></span><br><span class="line">    token.reason = <span class="keyword">new</span> Cancel(message);</span><br><span class="line">    <span class="comment">// å°†å–æ¶ˆè¯·æ±‚çš„promiseæŒ‡å®šä¸ºæˆåŠŸ, å€¼ä¸ºreason</span></span><br><span class="line">    resolvePromise(token.reason);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Cancel å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cancel</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.message = message;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Cancel.prototype.toString = <span class="function"><span class="keyword">function</span> <span class="title">toString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Cancel&quot;</span> + (<span class="built_in">this</span>.message ? <span class="string">&quot;: &quot;</span> + <span class="built_in">this</span>.message : <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºæ ‡è¯†æ˜¯ä¸€ä¸ªå–æ¶ˆçš„error</span></span><br><span class="line">Cancel.prototype.__CANCEL__ = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Cancel;</span><br></pre></td></tr></table></figure><p>åœ¨ xhr.js ä¸­è°ƒç”¨ CancelToken å‡½æ•°ä¸­çš„ promise çš„ then</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> å¦‚æœé…ç½®äº†cancelToken</span><br><span class="line">    <span class="keyword">if</span> (config.cancelToken) &#123;</span><br><span class="line">      <span class="regexp">//</span> æŒ‡å®šç”¨äºä¸­æ–­è¯·æ±‚çš„å›è°ƒå‡½æ•°</span><br><span class="line">      config.cancelToken.promise.then(<span class="keyword">function</span> onCanceled(cancel) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!request) &#123;</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="regexp">//</span> ä¸­æ–­è¯·æ±‚</span><br><span class="line">        request.abort();</span><br><span class="line">        <span class="regexp">//</span> è®©è¯·æ±‚çš„promiseå¤±è´¥</span><br><span class="line">        reject(cancel);</span><br><span class="line">        <span class="regexp">//</span> Clean up request</span><br><span class="line">        request = null;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ cancel å¯¹è±¡å“ªé‡Œæ¥çš„å‘¢?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">token.reason = <span class="keyword">new</span> Cancel(message);</span><br><span class="line">resolvePromise(token.reason);</span><br></pre></td></tr></table></figure><h2 id="é€‚é…å™¨-æ”¯æŒæµè§ˆå™¨ä¹Ÿæ”¯æŒ-node-ç¯å¢ƒ-Adapter"><a href="#é€‚é…å™¨-æ”¯æŒæµè§ˆå™¨ä¹Ÿæ”¯æŒ-node-ç¯å¢ƒ-Adapter" class="headerlink" title="é€‚é…å™¨(æ”¯æŒæµè§ˆå™¨ä¹Ÿæ”¯æŒ node ç¯å¢ƒ) - Adapter"></a>é€‚é…å™¨(æ”¯æŒæµè§ˆå™¨ä¹Ÿæ”¯æŒ node ç¯å¢ƒ) - Adapter</h2><blockquote><p>axios.defaults.adapter é»˜è®¤é…ç½®ä¸­æ ¹æ®ç¯å¢ƒåˆ¤æ–­æ˜¯æµè§ˆå™¨è¿˜æ˜¯ node ç¯å¢ƒï¼Œä½¿ç”¨å¯¹åº”çš„é€‚é…å™¨ã€‚é€‚é…å™¨æ”¯æŒè‡ªå®šä¹‰ã€‚</p></blockquote><ul><li>browser : XMLHttpRequest / Fetch</li><li>node : http / https</li></ul><h2 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h2><p>è¯·æ±‚æ•°æ®è½¬æ¢ : <code>transformRequest</code></p><p>å“åº”æ•°æ®è½¬æ¢ : <code>transformResponse</code></p><p><code>axios.defaults.transformResponse</code> æ•°ç»„ä¸­é»˜è®¤å°±æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨ concat é“¾æ¥è‡ªå®šä¹‰çš„å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  baseURL: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  url: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  method: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  transformResponse: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//é…ç½®é¡¹å¯¹æ•°æ®å¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> ISO_8601 = <span class="regexp">/(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;)T(\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;)Z/</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> d.getMonth() + <span class="number">1</span> + <span class="string">&quot;/&quot;</span> + d.getDate() + <span class="string">&quot;/&quot;</span> + d.getFullYear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰©å±•é…ç½®  å¯¹å“åº”æ•°æ®æ ¼å¼åŒ–è½¬æ¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">data</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">axios</span><br><span class="line">  .get(<span class="string">&quot;https://api.github.com/users/mzabriskie&quot;</span>, &#123;</span><br><span class="line">    transformResponse: axios.defaults.transformResponse.concat(<span class="function"><span class="keyword">function</span>(<span class="params">data, headers</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">k</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ISO_8601.test(data[k])) &#123;</span><br><span class="line">          data[k] = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(data[k]));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;created&quot;</span>).innerHTML = formatDate(res.data.created_at);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h2 id="å‡ ä¸ªå¥½ç”¨çš„å·¥å…·æ–¹æ³•"><a href="#å‡ ä¸ªå¥½ç”¨çš„å·¥å…·æ–¹æ³•" class="headerlink" title="å‡ ä¸ªå¥½ç”¨çš„å·¥å…·æ–¹æ³•"></a>å‡ ä¸ªå¥½ç”¨çš„å·¥å…·æ–¹æ³•</h2><h3 id="deepCopy-å‡½æ•°"><a href="#deepCopy-å‡½æ•°" class="headerlink" title="- deepCopy å‡½æ•°"></a>- deepCopy å‡½æ•°</h3><p>åŸºäºä¸Šé¢è¯´çš„ï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ·±åº¦å…‹éš†å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> deepCopy = <span class="function"><span class="params">source</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> target = <span class="built_in">Array</span>.isArray(source) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">    <span class="keyword">if</span> (source.hasOwnProperty(key)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> source[key] === <span class="string">&quot;object&quot;</span> &amp;&amp; source !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//é€’å½’</span></span><br><span class="line">        target[key] = deepCopy(source[key]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        target[key] = source[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="configMerge-å‡½æ•°"><a href="#configMerge-å‡½æ•°" class="headerlink" title="- configMerge å‡½æ•°"></a>- configMerge å‡½æ•°</h3><p>å¯¹äºé…ç½®åˆå¹¶ï¼Œå¹¶ä¸èƒ½ç®€å•çš„è¿›è¡Œå¤„ç†ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒçš„é…ç½®è¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œæœ‰çš„æ˜¯è¦†ç›–ï¼Œæœ‰çš„åˆå¹¶</p><ul><li><code>baseURL</code>ã€<code>url</code>ã€ <code>method</code> ç­‰æ˜¯ç›´æ¥è¦†ç›–çš„</li><li><code>headers</code> æ˜¯éœ€è¦è¿›è¡Œåˆå¹¶å¤„ç†çš„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mergeConfig = <span class="function">(<span class="params">obj1, obj2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> target = deepCopy(obj1);</span><br><span class="line">  <span class="keyword">let</span> source = deepCopy(obj2);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.keys(source).reduce(<span class="function">(<span class="params">t, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">&quot;url&quot;</span>, <span class="string">&quot;method&quot;</span>, <span class="string">&quot;baseURL&quot;</span>].includes(k)) &#123;</span><br><span class="line">      t[k] = source[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">&quot;headers&quot;</span>].includes(k)) &#123;</span><br><span class="line">      <span class="comment">// console.log(&#x27;target&#x27;, target.headers);</span></span><br><span class="line">      <span class="comment">// console.log(&#x27;source&#x27;, source.headers);</span></span><br><span class="line">      t[k] = <span class="built_in">Object</span>.assign(target[k], source[k]);</span><br><span class="line">      <span class="comment">// console.log(&#x27;t&#x27;, t);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;, target);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æœ€åçœ‹ä¸‹æ•´ä¸ªæµç¨‹å›¾"><a href="#æœ€åçœ‹ä¸‹æ•´ä¸ªæµç¨‹å›¾" class="headerlink" title="æœ€åçœ‹ä¸‹æ•´ä¸ªæµç¨‹å›¾"></a>æœ€åçœ‹ä¸‹æ•´ä¸ªæµç¨‹å›¾</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200122112713.png"                      alt=""                ></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://juejin.im/post/5df349b5518825123751ba66#heading-15" >å­¦ä¹  axios æºç æ•´ä½“æ¶æ„â€¦<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axioså°è£…</title>
      <link href="2020/01/22/Axios%E5%B0%81%E8%A3%85/"/>
      <url>2020/01/22/Axios%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="2020-11-14æ›´æ–°"><a href="#2020-11-14æ›´æ–°" class="headerlink" title="2020.11.14æ›´æ–°"></a>2020.11.14æ›´æ–°</h2><p>axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚è¿™é‡Œéå¸¸æ„Ÿè°¢è¯„è®ºé‡Œä¸€äº›å¾ˆä¸­è‚¯çš„å»ºè®®ï¼Œæˆ‘ä¹Ÿå¯¹æ­¤è¿›è¡Œäº†æ€è€ƒå’Œé’ˆå¯¹ä¸åŒéœ€æ±‚çš„æ”¹å–„ã€‚ä¸»è¦æœ‰ä»¥ä¸‹æ”¹å˜ï¼š</p><p><strong>1.ä¼˜åŒ–axioså°è£…ï¼Œå»æ‰ä¹‹å‰çš„getå’Œpost</strong></p><p><strong>2.æ–­ç½‘æƒ…å†µå¤„ç†</strong></p><p><strong>3.æ›´åŠ æ¨¡å—åŒ–çš„apiç®¡ç†</strong></p><p><strong>4.æ¥å£åŸŸåæœ‰å¤šä¸ªçš„æƒ…å†µ</strong></p><p><strong>5.apiæŒ‚è½½åˆ°vue.prototypeä¸Šçœå»å¼•å…¥çš„æ­¥éª¤</strong></p><a id="more"></a><p>base.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base = &#123;    </span><br><span class="line">    sq: <span class="string">&#x27;https://alibaba.com/api/v1&#x27;</span>,    </span><br><span class="line">    bd: <span class="string">&#x27;http://alibaba.com/api/test&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> base;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>articleApi.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base <span class="keyword">from</span> <span class="string">&#x27;./base&#x27;</span>; <span class="comment">// å¯¼å…¥æ¥å£åŸŸååˆ—è¡¨</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;./http&#x27;</span>; <span class="comment">// å¯¼å…¥httpä¸­åˆ›å»ºçš„axioså®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>; <span class="comment">// æ ¹æ®éœ€æ±‚æ˜¯å¦å¯¼å…¥qsæ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> article = &#123;    </span><br><span class="line">    <span class="comment">// æ–°é—»åˆ—è¡¨    </span></span><br><span class="line">    articleList () &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.get(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/topics`</span>);    </span><br><span class="line">    &#125;,    </span><br><span class="line">    <span class="comment">// æ–°é—»è¯¦æƒ…,æ¼”ç¤º    </span></span><br><span class="line">    articleDetail (id, params) &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.get(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/topic/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;            </span><br><span class="line">            params: params        </span><br><span class="line">        &#125;);    </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// postæäº¤    </span></span><br><span class="line">    login (params) &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.post(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/accesstoken`</span>, qs.stringify(params));    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å…¶ä»–æ¥å£â€¦â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> article;</span><br></pre></td></tr></table></figure><p>http.jsä¸­axioså°è£…çš„ä¼˜åŒ–ï¼Œå…ˆç›´æ¥è´´ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * axioså°è£…</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/index&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Toast &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * æç¤ºå‡½æ•° </span></span><br><span class="line"><span class="comment"> * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> tip = <span class="function"><span class="params">msg</span> =&gt;</span> &#123;    </span><br><span class="line">    Toast(&#123;        </span><br><span class="line">        message: msg,        </span><br><span class="line">        duration: <span class="number">1000</span>,        </span><br><span class="line">        forbidClick: <span class="literal">true</span>    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line"><span class="comment"> * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toLogin = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    router.replace(&#123;</span><br><span class="line">        path: <span class="string">&#x27;/login&#x27;</span>,        </span><br><span class="line">        query: &#123;</span><br><span class="line">            redirect: router.currentRoute.fullPath</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> errorHandle = <span class="function">(<span class="params">status, other</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// çŠ¶æ€ç åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">        <span class="comment">// 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">            toLogin();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// 403 tokenè¿‡æœŸ</span></span><br><span class="line">        <span class="comment">// æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">            tip(<span class="string">&#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span>);</span><br><span class="line">            <span class="built_in">localStorage</span>.removeItem(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">            store.commit(<span class="string">&#x27;loginSuccess&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                toLogin();</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// 404è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">            tip(<span class="string">&#x27;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&#x27;</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">console</span>.log(other);   </span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> instance = axios.create(&#123;    <span class="attr">timeout</span>: <span class="number">1000</span> * <span class="number">12</span>&#125;);</span><br><span class="line"><span class="comment">// è®¾ç½®postè¯·æ±‚å¤´</span></span><br><span class="line">instance.defaults.headers.post[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>;</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªå™¨ </span></span><br><span class="line"><span class="comment"> * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token </span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line">instance.interceptors.request.use(    </span><br><span class="line">    config =&gt; &#123;        </span><br><span class="line">        <span class="comment">// ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ        </span></span><br><span class="line">        <span class="comment">// ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token        </span></span><br><span class="line">        <span class="comment">// åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç         </span></span><br><span class="line">        <span class="comment">// è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚        </span></span><br><span class="line">        <span class="keyword">const</span> token = store.state.token;        </span><br><span class="line">        token &amp;&amp; (config.headers.Authorization = token);        </span><br><span class="line">        <span class="keyword">return</span> config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    error =&gt; <span class="built_in">Promise</span>.error(error))</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">instance.interceptors.response.use(    </span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    res =&gt; res.status === <span class="number">200</span> ? <span class="built_in">Promise</span>.resolve(res) : <span class="built_in">Promise</span>.reject(res),    </span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; response &#125; = error;</span><br><span class="line">        <span class="keyword">if</span> (response) &#123;</span><br><span class="line">            <span class="comment">// è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ </span></span><br><span class="line">            errorHandle(response.status, response.data.message);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†æ–­ç½‘çš„æƒ…å†µ</span></span><br><span class="line">            <span class="comment">// eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€</span></span><br><span class="line">            <span class="comment">// networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—</span></span><br><span class="line">            <span class="comment">// å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜</span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">window</span>.navigator.onLine) &#123;</span><br><span class="line">               store.commit(<span class="string">&#x27;changeNetwork&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br></pre></td></tr></table></figure><p>Index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> article <span class="keyword">from</span> <span class="string">&#x27;./articleApi&#x27;</span>;</span><br><span class="line"><span class="comment">// å…¶ä»–æ¨¡å—çš„æ¥å£â€¦â€¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;    </span><br><span class="line">    article,</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $api <span class="keyword">from</span> <span class="string">&#x27;./utils/http&#x27;</span></span><br><span class="line">Vue.prototype.$api = $api</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ä¸­ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line"><span class="function"><span class="title">onRefresh</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>.$api.article.articleDetail(<span class="string">&#x27;id&#x27;</span>, &#123;        </span><br><span class="line">        api: <span class="number">123</span>      </span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ‰§è¡ŒæŸäº›æ“ä½œ   </span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;res :&gt;&gt; &#x27;</span>, res);   </span><br><span class="line">    &#125;)  </span><br><span class="line">  <span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   this.isLoading = false;</span></span><br><span class="line">  <span class="comment">//   this.count++;</span></span><br><span class="line">  <span class="comment">// &#125;, 1000);</span></span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="axioså–æ¶ˆæ¥å£è¯·æ±‚"><a href="#axioså–æ¶ˆæ¥å£è¯·æ±‚" class="headerlink" title="axioså–æ¶ˆæ¥å£è¯·æ±‚"></a>axioså–æ¶ˆæ¥å£è¯·æ±‚</h2><p><strong>1.åº”ç”¨åœºæ™¯ï¼Œä¸ºä»€ä¹ˆè¦å–æ¶ˆè¯·æ±‚</strong><br>æˆ‘ç»™ä½ è¿™æ ·ä¸€ä¸ªåœºæ™¯ä½ å˜èƒ½ç†è§£ä¸ºä»€ä¹ˆéœ€è¦å–æ¶ˆè¯·æ±‚è¿™ç§éªšæ“ä½œäº†ï¼ˆéå¸¸å¸¸è§çš„åœºæ™¯ï¼Œè¿™é‡Œæ˜¯ç”¨vueå†™çš„ï¼‰</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/image-202011291005412982020112915.png"                      alt="image-20201129100541298" style="zoom: 50%;"                 ></p><p>1.å½“æˆ‘ç‚¹å‡»åŠ¨æ€æ çš„æ—¶å€™ï¼Œ<code>é€šè¿‡ajaxè·å–å½“å‚æ•°</code>ä¸º2çš„æ—¶å€™çš„æ•°æ®ï¼Œç„¶ååœ¨å°†åŸæœ¬å‚æ•°ä¸º1çš„tabé¡µçš„æ•°æ®æ¸…ç©ºï¼ˆé»˜è®¤è¿›æ¥å±•ç¤ºçš„tab1ï¼‰ï¼Œ</p><p>2.æ¸²æŸ“tab2çš„é¡µé¢ï¼Œæˆ‘ä»¬çŸ¥é“ajaxæ˜¯å¼‚æ­¥æ“ä½œçš„ï¼Œè·å–çš„æ•°æ®è¿‡å¤šæˆ–è€…ç”¨æˆ·ç½‘é€Ÿè¾ƒå·®çš„æ—¶å€™ï¼Œè¿™ä¸ªè·å–æ•°æ®çš„ajaxæ“ä½œéœ€è¦ä¸€å®šçš„æ—¶é—´æ¥å°†æ•°æ®æ‹¿åˆ°å†æ¸²æŸ“åˆ°é¡µé¢ä¸Š</p><p>3.åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œå¦‚æœæˆ‘å†æ¬¡ç‚¹å‡»tab3ä¹Ÿå°±æ˜¯â€œç³»ç»Ÿå…¬å‘Šâ€çš„æ—¶å€™ï¼Œä»£ç åˆå°†id=3çš„å‚æ•°ä¼ ç»™åå°ï¼Œå»è·å–tab3çš„æ•°æ®ï¼Œè€Œid=2çš„æ—¶å€™çš„æ¥å£æ•°æ®æˆ–è®¸è¿˜åœ¨ä»æœåŠ¡å™¨å›åˆ°å‰å°çš„è·¯ä¸Š</p><p>4.å°±æƒ³ä»tab1åˆ°tab2ä¸€æ ·çš„æˆ‘ä»¬å»æ¸…ç©ºæ•°ç»„ä¸­ç››æ”¾çš„tab2çš„æ•°æ®ï¼Œæ¸…ç©ºçš„æ˜¯ä»€ä¹ˆï¼Ÿtab2çš„æ•°æ®è¿˜åœ¨è¿”å›æ¥çš„è·¯ä¸Šè¿˜æ²¡è¢«pushè¿›æ•°ç»„å‘¢ï¼æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æ¸…ç©ºäº†ä¸€æ¬¡ç©ºæ•°ç»„ï¼ï¼ï¼</p><p>5.æ­¤æ—¶æˆ‘ä»¬é¡µé¢æ˜¯å¤„åœ¨tab3äº†ï¼Œé‡Œé¢çš„æ•°æ®å› ä¸ºæ˜¯è¢«pushè¿›å»æˆ‘ä»¬æœ¬åœ°ç”¨æ¥ç››æ”¾æ•°æ®çš„æ•°ç»„çš„ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶çš„æ•°æ®ä¼šæ˜¯id=2çš„æ•°æ® &amp;&amp; id=3çš„æ•°æ®ï¼Œè¿™æ ·ï¼Œé—®é¢˜å°±æš´éœ²å‡ºæ¥äº†ï¼</p><h3 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h3><blockquote><p>ç°åœ¨æˆ‘å¾—åˆ°çš„æ•°æ®å¤šä½™æˆ‘è¦çš„ &gt; å¤šå‡ºæ¥çš„æ•°æ®æ˜¯å› ä¸ºä¸Šä¸€ä¸ªtabé¡µè¯·æ±‚å»¶è¿Ÿé€ æˆçš„ &gt; é‚£æˆ‘å°±åœ¨å½“å‰é¡µè¯·æ±‚æ•°æ®çš„æ—¶å€™ææ–­ä¸Šä¸€ä¸ªé¡µé¢è¿˜æ²¡å®Œæˆçš„è¯·æ±‚å°±å¥½äº†</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2020-11-29%2011.52.36-tuya2020112915.gif"                      alt="2020-11-29 11.52.36-tuya"                ></p><h3 id="åœ¨axiosä¸­å–æ¶ˆæ¥å£è¯·æ±‚æ“ä½œ"><a href="#åœ¨axiosä¸­å–æ¶ˆæ¥å£è¯·æ±‚æ“ä½œ" class="headerlink" title="åœ¨axiosä¸­å–æ¶ˆæ¥å£è¯·æ±‚æ“ä½œ"></a>åœ¨axiosä¸­å–æ¶ˆæ¥å£è¯·æ±‚æ“ä½œ</h3><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æ‰æ˜¯æˆ‘ä»¬çš„ä¸»é¢˜ï¼ŒAxioså®˜æ–¹æä¾›äº†ä¸€ä¸ªå–æ¶ˆæ¥å£è¯·æ±‚çš„æ–¹æ³•ï¼Œä½†æ˜¯æ€ä¹ˆç”¨è¿™ä¸ªæ–¹æ³•å®˜ç½‘å†™çš„å¾ˆç®€ç•¥ï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ²¡æ‰¾å…¨çš„é—®é¢˜ï¼‰ï¼Œåæ­£å®˜ç½‘çš„axioså–æ¶ˆæ¥å£è¯·æ±‚ç´¯çš„åŠæ­»æ²¡çœ‹æ‡‚ï¼Œåæ¥æ˜¯æ‰’äº†å¾ˆå¤šå¤§ä½¬çš„åšå®¢ï¼Œæ‰è‡ªå·±ç†è§£å‡ºæ¥çš„<br> Axios æä¾›äº†ä¸€ä¸ª CancelTokençš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å–æ¶ˆæ¥å£è¯·æ±‚çš„ï¼Œè‡³äºæ€ä¹ˆç”¨ï¼Œçœ‹ä»£ç å§ï¼Œæˆ‘åœ¨ä»£ç ä¸­å†™äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;page&quot;</span> id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;getMsg&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;get-msg&quot;</span>&gt;è·å–æ•°æ®&lt;/button&gt;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;cancelGetMsg&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;cancel&quot;</span>&gt;å–æ¶ˆè·å–&lt;/button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;item in items&quot;</span>&gt;&#123;&#123;item.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      message: <span class="string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="line">      items: [],</span><br><span class="line">      cancel: <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      getMsg () &#123;</span><br><span class="line">        <span class="keyword">let</span> CancelToken = axios.CancelToken</span><br><span class="line">        <span class="keyword">let</span> self = <span class="built_in">this</span></span><br><span class="line">        axios.get(<span class="string">&#x27;http://jsonplaceholder.typicode.com/comments&#x27;</span>, &#123;</span><br><span class="line">          cancelToken: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">            self.cancel = c</span><br><span class="line">            <span class="built_in">console</span>.log(c)</span><br><span class="line">            <span class="comment">// è¿™ä¸ªå‚æ•° c å°±æ˜¯CancelTokenæ„é€ å‡½æ•°é‡Œé¢è‡ªå¸¦çš„å–æ¶ˆè¯·æ±‚çš„å‡½æ•°ï¼Œè¿™é‡ŒæŠŠè¯¥å‡½æ•°å½“å‚æ•°ç”¨</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.items = res.data</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//æ‰‹é€Ÿå¤Ÿå¿«å°±ä¸ç”¨å†™è¿™ä¸ªå®šæ—¶å™¨äº†ï¼Œç‚¹å‡»å–æ¶ˆè·å–å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="comment">//åªè¦æˆ‘ä»¬å»è°ƒç”¨äº†è¿™ä¸ªcancel()æ–¹æ³•ï¼Œæ²¡æœ‰å®Œæˆè¯·æ±‚çš„æ¥å£ä¾¿ä¼šåœæ­¢è¯·æ±‚</span></span><br><span class="line">          self.cancel()</span><br><span class="line">        &#125;, <span class="number">100</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//cancelGetMsg æ–¹æ³•è·Ÿä¸Šé¢çš„setTimeoutå‡½æ•°æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œå› ä¸ºæ‰‹é€Ÿä¸å¤Ÿå¿«ï¼Œå“¦ä¸ï¼Œæ˜¯å› ä¸ºç½‘é€Ÿå¤ªå¿«ï¼Œå¯¼è‡´æˆ‘æ¥ä¸åŠç‚¹å–æ¶ˆè·å–æŒ‰é’®ï¼Œæ•°æ®å°±è·å–æˆåŠŸäº†</span></span><br><span class="line">      cancelGetMsg () &#123;</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œå»åˆ¤æ–­ä½ çš„id 1 2 3ï¼Œä½ é»˜è®¤æ˜¯å±•ç¤ºçš„tab1ï¼Œç‚¹å‡»çš„æ—¶å€™ä¸ç®¡ä½ ä¸Šä¸€ä¸ªè¯·æ±‚æœ‰æ²¡æœ‰æ‰§è¡Œå®Œéƒ½å»è°ƒç”¨è¿™ä¸ªcancel()ï¼Œ</span></span><br><span class="line">        <span class="built_in">this</span>.cancel()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="é‡å¤ç‚¹å‡»é—®é¢˜"><a href="#é‡å¤ç‚¹å‡»é—®é¢˜" class="headerlink" title="é‡å¤ç‚¹å‡»é—®é¢˜"></a><strong>é‡å¤ç‚¹å‡»é—®é¢˜</strong></h3><p>é‚£æˆ‘ä»¬ç»å¸¸å¼€å‘çš„æ—¶å€™ä¼šé‡åˆ°ä¸€ä¸ªé‡å¤ç‚¹å‡»çš„é—®é¢˜ï¼ŒçŸ­æ—¶é—´å†…å¤šæ¬¡ç‚¹å‡»åŒä¸€ä¸ªæŒ‰é’®å‘é€è¯·æ±‚ä¼šåŠ é‡æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œæ¶ˆè€—æµè§ˆå™¨çš„æ€§èƒ½ï¼Œå¤šä»¥ç»å¤§å¤šæ•°çš„æ—¶å€™æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªå–æ¶ˆé‡å¤ç‚¹å‡»çš„æ“ä½œ<br> åœ¨vueå¼€å‘ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•ä¸€æ ·å®Œç¾è§£å†³è¿™ä¸€é—®é¢˜ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°è£…ä¸€éaxiosï¼Œè¿™é‡Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†æ­¤åŠŸèƒ½å°è£…åˆ°æ‹¦æˆªå™¨é‡Œé¢å»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  axios.defaults.timeout = <span class="number">5000</span>;</span><br><span class="line">  axios.defaults.baseURL =<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pending = []; <span class="comment">//å£°æ˜ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªajaxè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œajaxæ ‡è¯†</span></span><br><span class="line">  <span class="keyword">let</span> cancelToken = axios.CancelToken;</span><br><span class="line">  <span class="keyword">let</span> removePending = <span class="function">(<span class="params">ever</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> p <span class="keyword">in</span> pending)&#123;</span><br><span class="line">          <span class="keyword">if</span>(pending[p].u === ever.url + <span class="string">&#x27;&amp;&#x27;</span> + ever.method) &#123; <span class="comment">//å½“å½“å‰è¯·æ±‚åœ¨æ•°ç»„ä¸­å­˜åœ¨æ—¶æ‰§è¡Œå‡½æ•°ä½“</span></span><br><span class="line">              pending[p].f(); <span class="comment">//æ‰§è¡Œå–æ¶ˆæ“ä½œ</span></span><br><span class="line">              pending.splice(p, <span class="number">1</span>); <span class="comment">//æŠŠè¿™æ¡è®°å½•ä»æ•°ç»„ä¸­ç§»é™¤</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//http request æ‹¦æˆªå™¨</span></span><br><span class="line">  axios.interceptors.request.use(</span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    config.data = <span class="built_in">JSON</span>.stringify(config.data);</span><br><span class="line">    config.headers = &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ------------------------------------------------------------------------------------</span></span><br><span class="line">    removePending(config); <span class="comment">//åœ¨ä¸€ä¸ªajaxå‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ</span></span><br><span class="line">    config.cancelToken = <span class="keyword">new</span> cancelToken(<span class="function">(<span class="params">c</span>)=&gt;</span>&#123;</span><br><span class="line">       <span class="comment">// è¿™é‡Œçš„ajaxæ ‡è¯†æˆ‘æ˜¯ç”¨è¯·æ±‚åœ°å€&amp;è¯·æ±‚æ–¹å¼æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œå½“ç„¶ä½ å¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¸€äº›æ–¹å¼</span></span><br><span class="line">       pending.push(&#123; <span class="attr">u</span>: config.url + <span class="string">&#x27;&amp;&#x27;</span> + config.method, <span class="attr">f</span>: c &#125;);  </span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// -----------------------------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">//http response æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    <span class="comment">// ------------------------------------------------------------------------------------------</span></span><br><span class="line">    removePending(res.config);  <span class="comment">//åœ¨ä¸€ä¸ªajaxå“åº”åå†æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œï¼ŒæŠŠå·²ç»å®Œæˆçš„è¯·æ±‚ä»pendingä¸­ç§»é™¤</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span>(response.data.errCode ==<span class="number">2</span>)&#123;</span><br><span class="line">      router.push(&#123;</span><br><span class="line">        path:<span class="string">&quot;/login&quot;</span>,</span><br><span class="line">        querry:&#123;<span class="attr">redirect</span>:router.currentRoute.fullPath&#125;<span class="comment">//ä»å“ªä¸ªé¡µé¢è·³è½¬</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ˜¯æˆ‘è‡ªå·±é¡¹ç›®ç”¨æ¥å°è£…axiosçš„ä»£ç ï¼Œé‡Œé¢åŠ å…¥äº†å–æ¶ˆé‡å¤ç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•ï¼ˆçµæ„Ÿæ¥æºäº å¤§ç”°è§’<a class="link"   href="https://www.jianshu.com/p/4445595488e2ï¼‰ï¼Œä»¥åå†™é¡¹ç›®ä¸€åŠ³æ°¸é€¸å•¦ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ä»£ç é‡å¤è¯·æ±‚çš„é—®é¢˜å•¦ï¼ï¼" >https://www.jianshu.com/p/4445595488e2ï¼‰ï¼Œä»¥åå†™é¡¹ç›®ä¸€åŠ³æ°¸é€¸å•¦ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ä»£ç é‡å¤è¯·æ±‚çš„é—®é¢˜å•¦ï¼ï¼<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>å®Œæ•´çš„ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * axioså°è£…</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;../../router/index&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;../../store/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æç¤ºå‡½æ•°</span></span><br><span class="line"><span class="comment"> * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> tip = <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  Toast(&#123;</span><br><span class="line">    message: msg,</span><br><span class="line">    duration: <span class="number">1000</span>,</span><br><span class="line">    forbidClick: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line"><span class="comment"> * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toLogin = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  router.replace(&#123;</span><br><span class="line">    path: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">      redirect: router.currentRoute.fullPath,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> errorHandle = <span class="function">(<span class="params">status, other</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// çŠ¶æ€ç åˆ¤æ–­</span></span><br><span class="line">  <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">    <span class="comment">// 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">      toLogin();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// 403 tokenè¿‡æœŸ</span></span><br><span class="line">    <span class="comment">// æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">      tip(<span class="string">&quot;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&quot;</span>);</span><br><span class="line">      <span class="built_in">localStorage</span>.removeItem(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">      store.commit(<span class="string">&quot;loginSuccess&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        toLogin();</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// 404è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">      tip(<span class="string">&quot;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(other);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å£°æ˜ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œaxiosæ ‡è¯†</span></span><br><span class="line"><span class="keyword">let</span> pending = [];</span><br><span class="line"><span class="keyword">let</span> cancelToken = axios.CancelToken;</span><br><span class="line"><span class="keyword">let</span> removePending = <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæˆªå–è¯·æ±‚è¿™æ ·çš„ï¼šhttp://jsonplaceholder.typicode.com/posts?userId=2</span></span><br><span class="line">    <span class="keyword">const</span> nurl = config.url.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œaxiosæ ‡è¯† :&gt;&gt; &#x27;</span>, pending);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">in</span> pending) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;p :&gt;&gt; &#x27;</span>, p);</span><br><span class="line">    <span class="comment">//å½“å‰è¯·æ±‚åœ¨æ•°ç»„ä¸­å­˜åœ¨æ—¶æ‰§è¡Œå‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">if</span> (pending[p].u === nurl + <span class="string">&quot;&amp;&quot;</span> + config.method) &#123;</span><br><span class="line">      pending[p].f(); <span class="comment">//æ‰§è¡Œå–æ¶ˆæ“ä½œ</span></span><br><span class="line">      pending.splice(p, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> instance = axios.create(&#123; <span class="attr">timeout</span>: <span class="number">1000</span> * <span class="number">12</span> &#125;);</span><br><span class="line"><span class="comment">// è®¾ç½®postè¯·æ±‚å¤´</span></span><br><span class="line">instance.defaults.headers.post[<span class="string">&quot;Content-Type&quot;</span>] =</span><br><span class="line">  <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    <span class="comment">// ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ</span></span><br><span class="line">    <span class="comment">// ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token</span></span><br><span class="line">    <span class="comment">// åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç </span></span><br><span class="line">    <span class="comment">// è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚</span></span><br><span class="line">    <span class="comment">/**********å–æ¶ˆè¯·æ±‚*********/</span></span><br><span class="line">    removePending(config); <span class="comment">//åœ¨ä¸€ä¸ªaxioså‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åœ¨æ¯ä¸€ä¸ªaxioså‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ :&gt;&gt; &quot;</span>);</span><br><span class="line">    config.cancelToken = <span class="keyword">new</span> cancelToken(<span class="function">(<span class="params">c</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œçš„axiosæ ‡è¯†æˆ‘æ˜¯ç”¨è¯·æ±‚åœ°å€&amp;è¯·æ±‚æ–¹å¼æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œå½“ç„¶ä½ å¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¸€äº›æ–¹å¼</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;cå°±æ˜¯cancelå‡½æ•° :&gt;&gt; &#x27;</span>, c);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;config.method :&gt;&gt; &#x27;</span>, config.method);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;config.url :&gt;&gt; &#x27;</span>, config.url);</span><br><span class="line">      <span class="keyword">const</span> nurl = config.url.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  </span><br><span class="line">      pending.push(&#123; <span class="attr">u</span>: nurl + <span class="string">&quot;&amp;&quot;</span> + config.method, <span class="attr">f</span>: c &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">/************************/</span></span><br><span class="line">    <span class="keyword">const</span> token = store.state.token;</span><br><span class="line">    token &amp;&amp; (config.headers.Authorization = token);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; <span class="built_in">Promise</span>.error(error)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">instance.interceptors.response.use(</span><br><span class="line">  <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">  <span class="comment">//   (res) =&gt; (res.status === 200 ? Promise.resolve(res) : Promise.reject(res)),</span></span><br><span class="line">  (res) =&gt; &#123;</span><br><span class="line">    removePending(res.config); <span class="comment">//åœ¨ä¸€ä¸ªaxioså“åº”åå†æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œï¼ŒæŠŠå·²ç»å®Œæˆçš„è¯·æ±‚ä»pendingä¸­ç§»é™¤</span></span><br><span class="line">    <span class="keyword">return</span> res.status === <span class="number">200</span> ? <span class="built_in">Promise</span>.resolve(res) : <span class="built_in">Promise</span>.reject(res);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;error :&gt;&gt; &#x27;</span>, error);</span><br><span class="line">    <span class="keyword">const</span> &#123; response &#125; = error;</span><br><span class="line">    <span class="keyword">if</span> (response) &#123;</span><br><span class="line">      <span class="comment">// è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;error :&gt;&gt; &#x27;</span>, response);</span><br><span class="line">      errorHandle(response.status, response.data.message);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†æ–­ç½‘çš„æƒ…å†µ</span></span><br><span class="line">      <span class="comment">// eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€</span></span><br><span class="line">      <span class="comment">// networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—</span></span><br><span class="line">      <span class="comment">// å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜</span></span><br><span class="line">      <span class="keyword">if</span> (!<span class="built_in">window</span>.navigator.onLine) &#123;</span><br><span class="line">        store.commit(<span class="string">&quot;changeNetwork&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è§£å†³ä¹‹åæ•ˆæœ"><a href="#è§£å†³ä¹‹åæ•ˆæœ" class="headerlink" title="è§£å†³ä¹‹åæ•ˆæœ"></a>è§£å†³ä¹‹åæ•ˆæœ</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/fuckb/2020-11-29%2014.59.42-tuya2020112915.gif"                      alt="2020-11-29 14.59.42-tuya"                ></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://juejin.cn/post/6844903652881072141#heading-10" >æ˜é‡‘<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.jb51.net/article/163434.htm" >vue axiosé‡å¤ç‚¹å‡»å–æ¶ˆä¸Šä¸€æ¬¡è¯·æ±‚å°è£…çš„æ–¹æ³•<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•-åŸå‹åŠåŸå‹é“¾</title>
      <link href="2020/01/02/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E5%8E%9F%E5%9E%8B%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
      <url>2020/01/02/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E5%8E%9F%E5%9E%8B%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<p>2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†</p><a id="more"></a><h2 id="7å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•"><a href="#7å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•" class="headerlink" title="7å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•"></a>7å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•</h2><p>é€šå¸¸ä¸‰ç§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//======1</span></span><br><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">name</span>: <span class="string">&quot;jack&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;jack&quot;</span> &#125;);</span><br><span class="line"><span class="comment">//======2</span></span><br><span class="line"><span class="keyword">var</span> B = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;love&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> B();</span><br><span class="line"><span class="comment">//======3</span></span><br><span class="line"><span class="keyword">var</span> c = &#123; <span class="attr">name</span>: <span class="string">&quot;petter&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> c1 = <span class="built_in">Object</span>.create(c);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324141429.png"                      alt=""                ><br><strong>æ„é€ å‡½æ•°â€“ä½¿ç”¨ new è¿ç®—ç¬¦-&gt;ç”Ÿæˆä¸€ä¸ªå®ä¾‹</strong>ã€‚</p><p>å‡½æ•°éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å±æ€§ï¼Œåˆ›å»ºå‡½æ•°çš„æ—¶å€™ js è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™ä¸ªå±æ€§ä¼š<code>åˆ›å»ºä¸€ä¸ª ç©ºå¯¹è±¡</code>å°±<code>æ˜¯åŸå‹å¯¹è±¡</code>ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324143532.png"                      alt=""                ><br>åŸå‹å¯¹è±¡å¦‚ä½•<code>åŒºåˆ†</code>æˆ‘æ˜¯è¢«<code>å“ªä¸ªæ„é€ å‡½æ•°æ‰€å¼•ç”¨</code>ï¼ŒåŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª<code>(æ„é€ å™¨)constructor</code>ä¼šé»˜è®¤ä½ å£°æ˜(æˆ–è€…æŒ‡å‘)çš„é‚£ä¸ªå‡½æ•°ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324143151.png"                      alt=""                ></p><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><p>æˆ‘ä»æˆ‘çš„åŸå‹å¯¹è±¡å‘ä¸Šæ‰¾<code>æ„é€ è¿™ä¸ªå®ä¾‹</code>çš„ç›¸å…³è”çš„å¯¹è±¡ï¼›è¿™ä¸ªå…³è”çš„å¯¹è±¡å†å¾€ä¸Šæ‰¾å®ƒåˆæœ‰<code>åˆ›é€ å®ƒçš„çš„åŸå‹å¯¹è±¡</code>ï¼Œä»¥æ­¤ç±»æ¨ä¸€ç›´åˆ° Object.prototype ä¸ºæ­¢.åŸå‹é“¾çš„é¡¶ç«¯ Object.prototypeï¼Œ</p><blockquote><p>åŸå‹é“¾é ä»€ä¹ˆå‘ä¸Šæ‰¾çš„è¿‡ç¨‹ï¼šå‘ä¸Šæ‰¾ä¸»è¦é  prototype å’Œâ€”â€”proto-è¿™äºŒä¸ª</p></blockquote><p>åŸå‹å¯¹è±¡ä¸åŸå‹é“¾èµ·äº†ä»€ä¹ˆä½œä¸š<br>å½“æˆ‘æ„é€ å‡½æ•°ä¸­æœ‰å¾ˆå¤šå±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘çš„å®ä¾‹å°±å¯ä»¥å…±ç”¨è¿™äº›ä¸œè¥¿<br>å½“æˆ‘åˆ›å»ºå¾ˆå¤šå®ä¾‹ï¼Œè¦å»å…±ç”¨è¿™äº›æ–¹æ³•å’Œå±æ€§ã€‚æˆ‘ä¸èƒ½æ¯ä¸ªå®ä¾‹éƒ½æ‹·è´è¿™äº›å±æ€§å’Œæ–¹æ³•ï¼›ä»–ä»¬ä¹‹é—´å…¶å®å¯ä»¥å…±åŒå­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ˆåŸå‹å¯¹è±¡ï¼‰</p><p>ä»»ä½•ä¸€ä¸ªå®ä¾‹å¯¹è±¡é€šè¿‡åŸå‹é“¾æ‰¾åˆ°å®ƒä¸Šé¢çš„åŸå‹å¯¹è±¡çš„<code>å±æ€§å’Œæ–¹æ³•</code>è¿™ä¸ªæ˜¯è¢«å®ä¾‹æ‰€å…±äº«çš„ï¼›</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324145426.png"                      alt=""                ></p><blockquote><p>ä¸€ä¸ªå®ä¾‹æ²¡æœ‰æ‰¾åˆ°å±æ€§æˆ–æ–¹æ³•å®ƒå°±å‘åŸå‹å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœä¸Šçº§åŸå‹å¯¹è±¡æ‰¾ä¸åˆ°åˆ™ä¼šæ ¹æ®åŸå‹å¯¹è±¡çš„â€”â€”proto-çš„åŸå‹å¯¹è±¡ä¸Šå»æ‰¾</p></blockquote><p>æ³¨æ„ï¼š</p><ol><li>æ„é€ å‡½æ•°æ‰ä¼šæœ‰ prototypeï¼Œå¯¹è±¡æ²¡æœ‰ prototypeã€‚</li><li>å®ä¾‹å¯¹è±¡æ‰ä¼šæœ‰â€”â€”proto-ï¼Œå¦‚æœå‘ç°å‡½æ•°ä¹Ÿæœ‰-proto-ã€‚</li><li>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡,</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A._proto_ === <span class="built_in">Function</span>.prototype; <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>A çš„åŸå‹å¯¹è±¡å°±æ˜¯ Function çš„åŸå‹å¯¹è±¡</p><h2 id="instanceof-çš„åŸç†"><a href="#instanceof-çš„åŸç†" class="headerlink" title="instanceof çš„åŸç†"></a>instanceof çš„åŸç†</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324151128.png"                      alt=""                ><br><strong>å®ä¾‹å¯¹è±¡çš„ï¼ˆ-proto-ï¼‰å’Œæ„é€ å‡½æ•°çš„ prototype æ˜¯ä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªåœ°å€</strong><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324151805.png"                      alt=""                ><br>a ç»§æ‰¿ bï¼Œb ç»§æ‰¿ c<br>a ç»§æ‰¿çš„å¯¹è±¡ç”¨ instanceof åˆ¤æ–­ b æˆ–è€… c éƒ½è¿”å› trueï¼Œæ€ä¹ˆåŒºåˆ†æ˜¯ b çš„å®ä¾‹è¿˜æ˜¯ c çš„å®ä¾‹å‘¢ï¼Ÿ<br>è¿™å°±ç”¨åˆ° constructor çš„å±æ€§æ˜¯å“ªä¸ªæ„é€ å‡½æ•°<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190324152232.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021012817image-20210128171034712.png"                      alt="image-20210128171034712"                ></p><h2 id="new-è¿ç®—ç¬¦èƒŒååŸç†"><a href="#new-è¿ç®—ç¬¦èƒŒååŸç†" class="headerlink" title="new è¿ç®—ç¬¦èƒŒååŸç†"></a>new è¿ç®—ç¬¦èƒŒååŸç†</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2021012817image-20210128171705889.png"                      alt="image-20210128171705889"                ></p><ol><li>new è¿ç®—ç¬¦åé¢è·Ÿçš„æ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ–°å¯¹è±¡è¢«åˆ›å»ºï¼Œç»§æ‰¿è¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡(foo.prototype)</li><li>æ„é€ å‡½æ•° foo è¢«æ‰§è¡Œï¼Œæ‰§è¡Œçš„æ—¶å€™ç›¸åº”çš„ä¼ å‚ï¼ŒåŒæ—¶ä¸Šä¸‹æ–‡ this è¢«æŒ‡å®šè¿™ä¸ªæ–°å®ä¾‹ï¼Œnewfoo ç­‰åŒäº new foo();åªèƒ½ç”¨åœ¨ä¸ä¼ å‚çš„æƒ…å†µä¸‹</li><li>å¦‚æœæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªæ–°â€™å¯¹è±¡â€˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šå–ä»£ new å‡ºæ¥çš„ç»“æœï¼Œå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œé‚£ä¹ˆ new å‡ºæ¥çš„ç»“æœä¸ºæ­¥éª¤ 1 åˆ›å»ºçš„å¯¹è±¡</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> new2 = <span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="built_in">Object</span>.create(func.prototype);</span><br><span class="line">  <span class="keyword">var</span> k = func.call(o);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> k == <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> k;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>è¯´åˆ°åŸå‹é“¾è¿˜å¯ä»¥è”ç³»åˆ°ç»§æ‰¿</p><blockquote><p>é¢è¯•é¢˜ï¼šåŸå‹å¦‚ä½•å®ç°ç»§æ‰¿ï¼ŸClass å¦‚ä½•å®ç°ç»§æ‰¿ï¼ŸClass æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><h3 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h3>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•-React</title>
      <link href="2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-React/"/>
      <url>2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-React/</url>
      
        <content type="html"><![CDATA[<p>èƒ½åŠ›é‡åˆ°ç“¶é¢ˆï¼Œ2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†<br><a id="more"></a></p><h3 id="Vdom"><a href="#Vdom" class="headerlink" title="Vdom"></a>Vdom</h3><h3 id="Jsxçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"><a href="#Jsxçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="Jsxçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"></a>Jsxçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ</h3><p>React.createElement å³æ˜¯hå‡½æ•°ï¼Œè¿”å›vnode</p><p>patch(el,vnode) å’Œ patch(vnode,newvnode)æ›´æ–°</p><p>ç¬¬ä¸€ä¸ªå‚æ•°å¯èƒ½æ˜¯ç»„ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯html tag</p><h4 id="Reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Œ16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Ÿ"><a href="#Reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Œ16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Ÿ" class="headerlink" title="Reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Œ16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Ÿ"></a>Reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Œ16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Ÿ</h4><h4 id="setStateæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ"><a href="#setStateæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ" class="headerlink" title="setStateæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ"></a>setStateæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ</h4><p>æœ‰æ—¶å¼‚æ­¥ï¼ˆæ™®é€šä½¿ç”¨ï¼‰ æœ‰æ—¶åŒæ­¥ï¼ˆsettimeout  è‡ªå·±å®šä¹‰çš„Domäº‹ä»¶ï¼‰</p><p>æœ‰æ—¶åˆå¹¶ï¼ˆå¯¹è±¡å½¢å¼ï¼‰ æœ‰æ—¶ä¸åˆå¹¶ï¼ˆå‡½æ•°å½¢å¼ï¼‰</p><p>åè€…æ¯”è¾ƒå¥½ç†è§£ï¼ˆåƒobject.assign) </p><h5 id="setStateä¸»æµç¨‹"><a href="#setStateä¸»æµç¨‹" class="headerlink" title="setStateä¸»æµç¨‹"></a>setStateä¸»æµç¨‹</h5><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2013%2004%2058%201588136698.png"                      alt="image-20200429130431692" style="zoom:40%;"                 ></p><p> æ¯”å¦‚å¯¹æ¯”ä¸‹<code>åŒæ­¥</code>å’Œ<code>å¼‚æ­¥</code></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2013%2006%2043%201588136803.png"                      alt="image-20200429130631548" style="zoom:40%;"                 ></p><p>å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šåˆå§‹ä¸€ä¸ª<code>isBatchingUpdate</code>è¿™ä¸ªå€¼ä¸ºtrueï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œè®¾ç½®falseï¼Œsettimeoutå’Œè‡ªå®šä¹‰äº‹ä»¶æ‰§è¡Œååœ¨è§¦å‘setStateå‡½æ•°çš„æ—¶å€™å·²ç»æ˜¯falseäº†ï¼Œæ‰€ä»¥èµ°å³è¾¹çš„è·¯çº¿</p><h4 id="batchUpdateæœºåˆ¶"><a href="#batchUpdateæœºåˆ¶" class="headerlink" title="batchUpdateæœºåˆ¶"></a>batchUpdateæœºåˆ¶</h4><ul><li>ç”Ÿå‘½å‘¨æœŸå’Œå®ƒè°ƒç”¨çš„å‡½æ•°</li><li>Reactæ³¨å†Œçš„äº‹ä»¶</li><li><strong>Reactå¯ä»¥ç®¡ç†çš„å…¥å£</strong></li></ul><h4 id="ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­å¤šæ¬¡-setStateåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­å¤šæ¬¡-setStateåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­å¤šæ¬¡ setStateåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Ÿ"></a>ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­å¤šæ¬¡ setStateåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Ÿ</h4><h4 id="Reactå¦‚ä½•å®ç°è‡ªå·±çš„äº‹ä»¶æœºåˆ¶ï¼Ÿ"><a href="#Reactå¦‚ä½•å®ç°è‡ªå·±çš„äº‹ä»¶æœºåˆ¶ï¼Ÿ" class="headerlink" title="Reactå¦‚ä½•å®ç°è‡ªå·±çš„äº‹ä»¶æœºåˆ¶ï¼Ÿ"></a>Reactå¦‚ä½•å®ç°è‡ªå·±çš„äº‹ä»¶æœºåˆ¶ï¼Ÿ</h4><p>åˆæˆæœºåˆ¶</p><ol><li>eventæ˜¯SyntheticEvent ï¼ˆç”Ÿæ•£é¢˜k-evntï¼‰æ¨¡æ‹ŸdomåŸç”Ÿäº‹ä»¶</li><li>event.nativeEventæ˜¯åŸç”Ÿäº‹ä»¶å¯¹è±¡</li><li>æ‰€æœ‰äº‹ä»¶éƒ½è¢«æŒ‚è½½åˆ°doucumentä¸Š</li><li>å’Œdomäº‹ä»¶ä¸ä¸€æ ·ï¼Œå’Œvueäº‹ä»¶ä¹Ÿä¸ä¸€æ ·</li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2012%2042%2019%201588135339.png"                      alt="image-20200429124142293" style="zoom:40%;"                 ></p><p>é€šè¿‡åˆæˆäº‹ä»¶å»æ´¾å‘äº‹ä»¶ï¼ˆé€šè¿‡event.targetçŸ¥é“é‚£ä¸ªåŸç”Ÿè§¦å‘çš„ï¼Œæ‰¾åˆ°å¯¹åº”ç»„ä»¶ï¼Œç»„ä»¶ä¸­é‚£ä¸ªè§¦å‘onclikäº‹ä»¶ï¼‰</p><p>æŠŠeventä¼ ç»™å¯¹åº”è§¦å‘çš„äº‹ä»¶å‡½æ•°</p><h4 id="ä¸ºä»€ä¹ˆè¦ç”¨åˆæˆäº‹ä»¶æœºåˆ¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨åˆæˆäº‹ä»¶æœºåˆ¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨åˆæˆäº‹ä»¶æœºåˆ¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨åˆæˆäº‹ä»¶æœºåˆ¶ï¼Ÿ</h4><p>æ›´å¥½çš„å…¼å®¹æ€§å’Œè·¨å¹³å°ã€‚ï¼ˆæ‘†è„±domäº‹ä»¶é€»è¾‘ï¼‰</p><p>æŒ‚è½½åˆ°documentï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œé¿å…é¢‘ç¹è§£ç»‘ï¼Œï¼ˆæ»šåŠ¨æˆ–è€…ç€‘å¸ƒæµäº‹ä»¶ï¼ŒæŒ‚è½½åˆ°æœ€å¤–å±‚ï¼Œå½“ç»„ä»¶é”€æ¯æ—¶å€™å°±ä¸éœ€è¦å»è§£ç»‘domäº‹ä»¶ï¼‰</p><p>æ–¹ä¾¿äº‹ä»¶çš„ç»Ÿä¸€ç®¡ç†<strong>ï¼ˆäº‹åŠ¡æœºåˆ¶ï¼‰</strong></p><h4 id="ä¸ºä½•-Reactäº‹ä»¶è¦è‡ªå·±ç»‘å®š-thisï¼Ÿ"><a href="#ä¸ºä½•-Reactäº‹ä»¶è¦è‡ªå·±ç»‘å®š-thisï¼Ÿ" class="headerlink" title="ä¸ºä½• Reactäº‹ä»¶è¦è‡ªå·±ç»‘å®š thisï¼Ÿ"></a>ä¸ºä½• Reactäº‹ä»¶è¦è‡ªå·±ç»‘å®š thisï¼Ÿ</h4><p>åœ¨ä¸Šé¢æåˆ°çš„äº‹ä»¶å¤„ç†æµç¨‹ä¸­ï¼Œ <code>React</code>åœ¨ <code>document</code>ä¸Šè¿›è¡Œç»Ÿä¸€çš„äº‹ä»¶åˆ†å‘ï¼Œ <code>dispatchEvent</code>é€šè¿‡å¾ªç¯è°ƒç”¨æ‰€æœ‰å±‚çº§çš„äº‹ä»¶æ¥æ¨¡æ‹Ÿäº‹ä»¶å†’æ³¡å’Œæ•è·ã€‚</p><p>åœ¨ <code>React</code>æºç ä¸­ï¼Œå½“å…·ä½“åˆ°æŸä¸€äº‹ä»¶å¤„ç†å‡½æ•°å°†è¦è°ƒç”¨æ—¶ï¼Œå°†è°ƒç”¨ <code>invokeGuardedCallback</code>æ–¹æ³•ã€‚</p><p>å¯è§ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ç›´æ¥è°ƒç”¨çš„ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šè°ƒç”¨çš„ç»„ä»¶ï¼Œæ‰€ä»¥ä¸è¿›è¡Œæ‰‹åŠ¨ç»‘å®šçš„æƒ…å†µä¸‹ç›´æ¥è·å–åˆ°çš„ <code>this</code>æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å½“å‰ç»„ä»¶ç»‘å®šåˆ° <code>this</code>ä¸Šã€‚</p><h4 id="åŸç”Ÿäº‹ä»¶å’Œ-Reactäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ"><a href="#åŸç”Ÿäº‹ä»¶å’Œ-Reactäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="åŸç”Ÿäº‹ä»¶å’Œ Reactäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ"></a>åŸç”Ÿäº‹ä»¶å’Œ Reactäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ</h4><ul><li><code>React</code> äº‹ä»¶ä½¿ç”¨é©¼å³°å‘½åï¼Œè€Œä¸æ˜¯å…¨éƒ¨å°å†™ã€‚</li><li>é€šè¿‡ <code>JSX</code> , ä½ ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li><li>åœ¨ <code>React</code> ä¸­ä½ ä¸èƒ½é€šè¿‡è¿”å› <code>false</code> æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚å¿…é¡»æ˜ç¡®è°ƒç”¨ <code>preventDefault</code>ã€‚</li></ul><h4 id="Reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥æ··ç”¨å—ï¼Ÿ"><a href="#Reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥æ··ç”¨å—ï¼Ÿ" class="headerlink" title="Reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥æ··ç”¨å—ï¼Ÿ"></a>Reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥æ··ç”¨å—ï¼Ÿ</h4><p><code>React</code>çš„æ‰€æœ‰äº‹ä»¶éƒ½é€šè¿‡ <code>document</code>è¿›è¡Œç»Ÿä¸€åˆ†å‘ã€‚å½“çœŸå® <code>Dom</code>è§¦å‘äº‹ä»¶åå†’æ³¡åˆ° <code>document</code>åæ‰ä¼šå¯¹ <code>React</code>äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚</p><p>æ‰€ä»¥åŸç”Ÿçš„äº‹ä»¶ä¼šå…ˆæ‰§è¡Œï¼Œç„¶åæ‰§è¡Œ <code>React</code>åˆæˆäº‹ä»¶ï¼Œæœ€åæ‰§è¡ŒçœŸæ­£åœ¨ <code>document</code>ä¸ŠæŒ‚è½½çš„äº‹ä»¶</p><p><code>React</code>äº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶æœ€å¥½ä¸è¦æ··ç”¨ã€‚åŸç”Ÿäº‹ä»¶ä¸­å¦‚æœæ‰§è¡Œäº† <code>stopPropagation</code>æ–¹æ³•ï¼Œåˆ™ä¼šå¯¼è‡´å…¶ä»– <code>React</code>äº‹ä»¶å¤±æ•ˆã€‚å› ä¸ºæ‰€æœ‰å…ƒç´ çš„äº‹ä»¶å°†æ— æ³•å†’æ³¡åˆ° <code>document</code>ä¸Šï¼Œå¯¼è‡´æ‰€æœ‰çš„ <code>React</code>äº‹ä»¶éƒ½å°†æ— æ³•è¢«è§¦å‘ã€‚ã€‚</p><h4 id="Reactç»„ä»¶çš„æ¸²æŸ“æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Reactç»„ä»¶çš„æ¸²æŸ“æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Reactç»„ä»¶çš„æ¸²æŸ“æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Reactç»„ä»¶çš„æ¸²æŸ“æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ol><li>ä½¿ç”¨ <code>React.createElement</code>æˆ– <code>JSX</code>ç¼–å†™ <code>React</code>ç»„ä»¶ï¼Œå®é™…ä¸Šæ‰€æœ‰çš„ <code>JSX</code>ä»£ç æœ€åéƒ½ä¼šè½¬æ¢æˆ <code>React.createElement(...)</code>ï¼Œ <code>Babel</code>å¸®åŠ©æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹ã€‚</li><li><code>createElement</code>å‡½æ•°å¯¹ <code>key</code>å’Œ <code>ref</code>ç­‰ç‰¹æ®Šçš„ <code>props</code>è¿›è¡Œå¤„ç†ï¼Œå¹¶è·å– <code>defaultProps</code>å¯¹é»˜è®¤ <code>props</code>è¿›è¡Œèµ‹å€¼ï¼Œå¹¶ä¸”å¯¹ä¼ å…¥çš„å­©å­èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆæ„é€ æˆä¸€ä¸ª <code>ReactElement</code>å¯¹è±¡ï¼ˆæ‰€è°“çš„è™šæ‹Ÿ <code>DOM</code>ï¼‰ã€‚</li><li>ReactDOM.render<code>å°†ç”Ÿæˆå¥½çš„è™šæ‹Ÿ</code>DOM<code>æ¸²æŸ“åˆ°æŒ‡å®šå®¹å™¨ä¸Šï¼Œå…¶ä¸­é‡‡ç”¨äº†æ‰¹å¤„ç†ã€äº‹åŠ¡ç­‰æœºåˆ¶å¹¶ä¸”å¯¹ç‰¹å®šæµè§ˆå™¨è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œæœ€ç»ˆè½¬æ¢ä¸ºçœŸå®</code>DOM`ã€‚</li></ol><h4 id="Reactæ›´æ–°è¿‡ç¨‹æ€ä¹ˆæ ·"><a href="#Reactæ›´æ–°è¿‡ç¨‹æ€ä¹ˆæ ·" class="headerlink" title="Reactæ›´æ–°è¿‡ç¨‹æ€ä¹ˆæ ·"></a>Reactæ›´æ–°è¿‡ç¨‹æ€ä¹ˆæ ·</h4><p>é¦–å…ˆprops stateæ›´æ–° â€”&gt; dirComponents(å¯èƒ½æ˜¯å­ç»„ä»¶)</p><p>render()ç”Ÿæˆnewvnode</p><p>patch(el,vnode)</p><p>æ›´æ–°åˆ†2ä¸ªèŠ‚ç‚¹ ï¼š reconciliationï¼ˆå’Œè§£ï¼‰é˜¶æ®µï¼ˆæ‰§è¡Œdiff jsè®¡ç®—ï¼‰ å’Œ commité˜¶æ®µ</p><p>å½“ç»„ä»¶è¶³å¤Ÿå¤æ‚ï¼Œç»„ä»¶æ›´æ–°æ—¶è®¡ç®—å’Œæ¸²æŸ“å‹åŠ›å¤§ï¼ŒåŒæ—¶å†æœ‰domæ“ä½œåŠ¨ç”»æˆ–é¼ æ ‡éœ€æ±‚å°†å¡é¡¿</p><p>è§£å†³æ–¹æ¡ˆfiber</p><p>å°†reconciliationé˜¶æ®µè¿›è¡Œä»»åŠ¡æ‹†åˆ†ï¼ˆcommitæ— æ³•æ‹†åˆ†ï¼‰</p><p>æµè§ˆå™¨éœ€è¦æ”¯æŒ<code>requestIdleCallback</code>ã€‚</p><h4 id="è™šæ‹ŸDomæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#è™šæ‹ŸDomæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è™šæ‹ŸDomæ˜¯ä»€ä¹ˆï¼Ÿ"></a>è™šæ‹ŸDomæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>è€Œ <code>React</code>ä¼šå…ˆå°†ä½ çš„jsxä»£ç è½¬æ¢æˆä¸€ä¸ª <code>JavaScript</code>å¯¹è±¡ï¼Œç„¶åè¿™ä¸ª <code>JavaScript</code>å¯¹è±¡å†è½¬æ¢æˆçœŸå® <code>DOM</code>ã€‚è¿™ä¸ª <code>JavaScript</code>å¯¹è±¡å°±æ˜¯æ‰€è°“çš„è™šæ‹Ÿ <code>DOM</code></p><h4 id="è™šæ‹ŸDomæ¯”-æ™®é€šDomæ›´å¿«å—ï¼Ÿ"><a href="#è™šæ‹ŸDomæ¯”-æ™®é€šDomæ›´å¿«å—ï¼Ÿ" class="headerlink" title="è™šæ‹ŸDomæ¯” æ™®é€šDomæ›´å¿«å—ï¼Ÿ"></a>è™šæ‹ŸDomæ¯” æ™®é€šDomæ›´å¿«å—ï¼Ÿ</h4><p>é¦–æ¬¡æ¸²æŸ“ï¼Œ <code>VitrualDom</code>ä¸å…·æœ‰ä»»ä½•ä¼˜åŠ¿ï¼Œç”šè‡³å®ƒè¦è¿›è¡Œæ›´å¤šçš„è®¡ç®—ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚</p><p><code>VitrualDom</code>çš„ä¼˜åŠ¿åœ¨äº <code>React</code>çš„ <code>Diff</code>ç®—æ³•å’Œæ‰¹å¤„ç†ç­–ç•¥ï¼Œ <code>React</code>åœ¨é¡µé¢æ›´æ–°ä¹‹å‰ï¼Œæå‰è®¡ç®—å¥½äº†å¦‚ä½•è¿›è¡Œæ›´æ–°å’Œæ¸²æŸ“ <code>DOM</code>ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹æˆ‘ä»¬åœ¨ç›´æ¥æ“ä½œ <code>DOM</code>æ—¶ï¼Œä¹Ÿæ˜¯å¯ä»¥è‡ªå·±åˆ¤æ–­å’Œå®ç°çš„ï¼Œä½†æ˜¯ä¸€å®šä¼šè€—è´¹éå¸¸å¤šçš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œè€Œä¸”å¾€å¾€æˆ‘ä»¬è‡ªå·±åšçš„æ˜¯ä¸å¦‚ <code>React</code>å¥½çš„ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ <code>React</code>å¸®åŠ©æˆ‘ä»¬â€æå‡äº†æ€§èƒ½â€ã€‚</p><p><code>è™šæ‹ŸDom</code>ä¸­çš„ <code>$$typeof</code>å±æ€§çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><h4 id="ä¸ºä»€ä¹ˆä»£ç ä¸­ä¸€å®šè¦å¼•å…¥-Reactï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä»£ç ä¸­ä¸€å®šè¦å¼•å…¥-Reactï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä»£ç ä¸­ä¸€å®šè¦å¼•å…¥ Reactï¼Ÿ"></a>ä¸ºä»€ä¹ˆä»£ç ä¸­ä¸€å®šè¦å¼•å…¥ Reactï¼Ÿ</h4><p><code>JSX</code>åªæ˜¯ä¸º <code>React.createElement(component,props,...children)</code>æ–¹æ³•æä¾›çš„è¯­æ³•ç³–ã€‚</p><p>æ‰€æœ‰çš„ <code>JSX</code>ä»£ç æœ€åéƒ½ä¼šè½¬æ¢æˆ <code>React.createElement(...)</code>ï¼Œ <code>Babel</code>å¸®åŠ©æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹ã€‚</p><p>æ‰€ä»¥ä½¿ç”¨äº† <code>JSX</code>çš„ä»£ç éƒ½å¿…é¡»å¼•å…¥ <code>React</code>ã€‚</p><h4 id="ä¸ºä»€ä¹ˆ-Reactç»„ä»¶é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-Reactç»„ä»¶é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ Reactç»„ä»¶é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ Reactç»„ä»¶é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Ÿ</h4><p><code>babel</code>åœ¨ç¼–è¯‘æ—¶ä¼šåˆ¤æ–­ <code>JSX</code>ä¸­ç»„ä»¶çš„<code>é¦–å­—æ¯</code>ï¼Œå½“é¦–å­—æ¯ä¸ºå°å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºåŸç”Ÿ <code>DOM</code>æ ‡ç­¾ï¼Œ <code>createElement</code>çš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå­—ç¬¦ä¸²ï¼›å½“é¦–å­—æ¯ä¸ºå¤§å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œ <code>createElement</code>çš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå¯¹è±¡ï¼›</p><p><code>React</code>åœ¨æ¸²æŸ“ <code>çœŸå®Dom</code>æ—¶åšäº†å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</p><p>ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</p><p><code>HOC</code>åœ¨ä¸šåŠ¡åœºæ™¯ä¸­æœ‰å“ªäº›å®é™…åº”ç”¨åœºæ™¯ï¼Ÿ</p><p>é«˜é˜¶ç»„ä»¶( <code>HOC</code>)å’Œ <code>Mixin</code>çš„å¼‚åŒç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><code>Hook</code>æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</p><h3 id="å¼‚æ­¥ç»„ä»¶"><a href="#å¼‚æ­¥ç»„ä»¶" class="headerlink" title="å¼‚æ­¥ç»„ä»¶"></a>å¼‚æ­¥ç»„ä»¶</h3><p>æŒ‰éœ€åŠ è½½ </p><p> Reloadableåº“  ï¼ˆimport â€˜xx.pageâ€™).then</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•-JS äº‹ä»¶å¾ªç¯ EventLoop</title>
      <link href="2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
      <url>2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
      
        <content type="html"><![CDATA[<p>2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†</p><a id="more"></a><h1 id="JS-è¿è¡Œæœºåˆ¶"><a href="#JS-è¿è¡Œæœºåˆ¶" class="headerlink" title="JS è¿è¡Œæœºåˆ¶"></a>JS è¿è¡Œæœºåˆ¶</h1><h2 id="æ¨è-2-åˆ†é’Ÿè§†é¢‘è®²çš„çœŸä¸é”™"><a href="#æ¨è-2-åˆ†é’Ÿè§†é¢‘è®²çš„çœŸä¸é”™" class="headerlink" title="æ¨è 2 åˆ†é’Ÿè§†é¢‘è®²çš„çœŸä¸é”™"></a>æ¨è 2 åˆ†é’Ÿè§†é¢‘è®²çš„çœŸä¸é”™</h2><iframe src="//player.bilibili.com/player.html?aid=285227869&bvid=BV1kf4y1U7Ln&cid=177957175&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="äº‹ä»¶å¾ªç¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿"><a href="#äº‹ä»¶å¾ªç¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿" class="headerlink" title="äº‹ä»¶å¾ªç¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿"></a>äº‹ä»¶å¾ªç¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</h2><p>å°±æˆ‘ä»¬æ‰€çŸ¥ï¼Œæµè§ˆå™¨çš„ js æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šä¹Ÿåªæœ‰ä¸€ä¸ªä»£ç æ®µåœ¨æ‰§è¡Œï¼Œå¯æ˜¯æµè§ˆå™¨åˆèƒ½å¾ˆå¥½çš„å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å…³äºæ‰§è¡Œä¸­çš„çº¿ç¨‹ï¼š</p><p>ä¸»çº¿ç¨‹ï¼šä¹Ÿå°±æ˜¯ js å¼•æ“æ‰§è¡Œçš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œé¡µé¢æ¸²æŸ“ã€å‡½æ•°å¤„ç†éƒ½åœ¨è¿™ä¸ªä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚<br>å·¥ä½œçº¿ç¨‹ï¼šä¹Ÿç§°å¹•åçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹å¯èƒ½å­˜åœ¨äºæµè§ˆå™¨æˆ– js å¼•æ“å†…ï¼Œä¸ä¸»çº¿ç¨‹æ˜¯åˆ†å¼€çš„ï¼Œå¤„ç†æ–‡ä»¶è¯»å–ã€ç½‘ç»œè¯·æ±‚ç­‰å¼‚æ­¥äº‹ä»¶ã€‚</p><h2 id="äº†è§£ä¸‹é˜»å¡è¿˜æ˜¯éé˜»å¡"><a href="#äº†è§£ä¸‹é˜»å¡è¿˜æ˜¯éé˜»å¡" class="headerlink" title="äº†è§£ä¸‹é˜»å¡è¿˜æ˜¯éé˜»å¡"></a>äº†è§£ä¸‹é˜»å¡è¿˜æ˜¯éé˜»å¡</h2><p>å…³äº js é˜»å¡è¿˜æ˜¯éé˜»å¡çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸å¤Ÿåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†è§£ä¸‹åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡è¿˜æ˜¯éé˜»å¡çš„è§£é‡Šï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€æ®µæè¿°çš„éå¸¸å¥½ï¼Œå¼•ç”¨ä¸‹</p><blockquote><p>åŒæ­¥é˜»å¡ï¼šå°æ˜ä¸€ç›´ç›¯ç€ä¸‹è½½è¿›åº¦æ¡ï¼Œåˆ° 100% çš„æ—¶å€™å°±å®Œæˆã€‚<br>åŒæ­¥éé˜»å¡ï¼šå°æ˜æäº¤ä¸‹è½½ä»»åŠ¡åå°±å»å¹²åˆ«çš„ï¼Œæ¯è¿‡ä¸€æ®µæ—¶é—´å°±å»ç„ä¸€çœ¼è¿›åº¦æ¡ï¼Œçœ‹åˆ° 100% å°±å®Œæˆã€‚ï¼ˆè½®è¯¢ï¼‰<br>å¼‚æ­¥é˜»å¡ï¼šå°æ˜æ¢äº†ä¸ªæœ‰ä¸‹è½½å®Œæˆé€šçŸ¥åŠŸèƒ½çš„è½¯ä»¶ï¼Œä¸‹è½½å®Œæˆå°±â€œå®â€ä¸€å£°ã€‚ä¸è¿‡å°æ˜ä»ç„¶ä¸€ç›´ç­‰å¾…â€œå®â€çš„å£°éŸ³ï¼ˆçœ‹èµ·æ¥å¾ˆå‚»ï¼Œä¸æ˜¯å—æœ€è ¢ï¼‰<br>å¼‚æ­¥éé˜»å¡ï¼šä»ç„¶æ˜¯é‚£ä¸ªä¼šâ€œå®â€ä¸€å£°çš„ä¸‹è½½è½¯ä»¶ï¼Œå°æ˜æäº¤ä¸‹è½½ä»»åŠ¡åå°±å»å¹²åˆ«çš„ï¼Œå¬åˆ°â€œå®â€çš„ä¸€å£°å°±çŸ¥é“å®Œæˆäº†ã€‚ï¼ˆæœ€æœºæ™ºï¼‰</p></blockquote><h3 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h3><p><strong><em>åŒæ­¥ä»»åŠ¡ä¼˜å…ˆäºå¼‚æ­¥ä»»åŠ¡ã€‚</em></strong></p><ul><li>åœ¨åŒæ­¥é˜Ÿåˆ—è¢«æ‰§è¡Œå®Œä¹‹å‰ï¼Œä»»ä½•å¼‚æ­¥çš„æ“ä½œéƒ½ä¸ä¼šè¢«æ‰§è¡Œ</li><li>åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡</li></ul><h3 id="è¿è¡Œæœºåˆ¶"><a href="#è¿è¡Œæœºåˆ¶" class="headerlink" title="è¿è¡Œæœºåˆ¶"></a>è¿è¡Œæœºåˆ¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(vari=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&lt;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) [</span></span><br><span class="line"><span class="function"><span class="title">console</span>.<span class="title">log</span>(<span class="params">i</span>)</span>;</span><br><span class="line">), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>æ¶‰åŠå¼‚æ­¥é˜Ÿåˆ—æ¶‰åŠçš„æ—¶é—´ï¼Œæµè§ˆå™¨å‘ç° settimeout ä¸ä¼šé©¬ä¸Šæ”¾åˆ°è¿è¡Œæ ˆé‡Œå»ï¼Œfor å¾ªç¯ä½“æ‰§è¡Œå®Œæ‰å»æ‰§è¡Œå¼‚æ­¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥é˜Ÿåˆ—æ²¡æœ‰åˆ°æ—¶é—´å»æ”¶ç¼– settimeoutï¼Œå†ç­‰å¾…äº‹ä»¶å¾ªç¯é‡Œå¤„ç†</p><p>Event Loop äº‹ä»¶å¾ªç¯</p><ol><li>è¿è¡Œæ ˆè¿è¡Œçš„æ˜¯åŒæ­¥ä»»åŠ¡ã€‚</li><li>æµè§ˆå™¨è¯†åˆ«äº†äº‹ä»¶æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä»–ä¸ä¼šæŠŠä»–æ”¾åœ¨è¿è¡Œæ ˆé‡Œï¼Œè€Œæ˜¯æ‹¿èµ°ã€‚</li><li>æ‹¿èµ°äº†ä¹‹åä¹Ÿä¸æ˜¯ç«‹é©¬æ”¾åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä»¥åï¼Œå†æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ã€‚</li><li>è¿è¡Œæ ˆé‡Œæ²¡æœ‰ä»»åŠ¡äº†ï¼Œå°±å¼€å§‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</li><li>æ‰§è¡Œå®Œåå¦‚æœè¿è¡Œæ ˆé‡Œæ²¡æœ‰ä»»åŠ¡äº†ï¼Œå†ç›‘å¬å¼‚æ­¥é˜Ÿåˆ—ã€‚</li><li>è¿™ä¸ªå¾ªç¯çš„è¿‡ç¨‹å°±æ˜¯ EventLoop<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190329001003.png"                      alt=""                ></li><li>å¼‚æ­¥ä»»åŠ¡<br>setTimeout å’Œ setInterval<br>DOM äº‹ä»¶<br>Promise</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;one:&quot;</span> + i);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i + <span class="number">1</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;two:&quot;</span> + (i + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="async-await-åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢-ï¼Ÿ"><a href="#async-await-åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢-ï¼Ÿ" class="headerlink" title="async/await åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ ï¼Ÿ"></a>async/await åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ ï¼Ÿ</h2><p>async/awaitï¼š è¿™å“¥ä¿©ä¸ªå…¶å®æ˜¯ Promise å’Œ Generator çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒä»¬è½¬æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ Promise</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäºä¸‹é¢</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve(async2()).then(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190329002750.png"                      alt=""                ></p><h2 id="åˆ†æä¸€é“é¢˜"><a href="#åˆ†æä¸€é“é¢˜" class="headerlink" title="åˆ†æä¸€é“é¢˜"></a>åˆ†æä¸€é“é¢˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">reslove, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">  reslove(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  fun1();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">  p.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    fun3();</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fun3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> fun4();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fun2();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 0 1 3 7 10 5 9 6 2 8</span></span><br></pre></td></tr></table></figure><ol><li>åˆ†æå¦‚ä¸‹æ‰§è¡Œç¬¬ä¸€æ¡è¯­å¥ new Promise å‡½æ•°ä¸»åŠ¨è§¦å‘æ‰“å°â€™4â€™</li><li>èµ°åˆ°åº•éƒ¨çš„ setTimeout é‡åˆ° fn2()æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ‰§è¡Œâ€™0â€™</li><li>è°ƒç”¨æ ˆæ¸…ç©ºï¼Œæ‰§è¡Œ fn2()å‡½æ•°ï¼Œé‡åˆ° etTimeout ç»§ç»­æŠŠé‡Œé¢çš„å‡½æ•°æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—</li><li>æ‰§è¡Œ fun1()ï¼Œæ‰“å°â€™1â€™ï¼Œå¼¹å‡º fun1</li><li>æ‰§è¡Œâ€™3â€™ 6.é‡åˆ° then()æ”¾åˆ°å¾®ä»»åŠ¡ä¸­å»ï¼Œ</li><li>è°ƒç”¨æ ˆåˆæ¸…ç©ºäº†ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ä¸­çš„é˜Ÿåˆ—ï¼Œfun3()æ‰§è¡Œï¼Œæ‰“å°â€™7â€™</li><li>é‡åˆ° awai ä»»åŠ¡è¿›å»æ‰§è¡Œï¼Œåˆé‡åˆ° setTimeoutï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ’é˜Ÿâ€™8â€™, æ‰§è¡Œâ€™10â€˜</li><li>å›åˆ°åˆšæ‰çš„åœ°æ–¹æ‰§è¡Œ console.log(res)ï¼Œæ‰“å°â€™5â€˜</li><li>æ‰§è¡Œâ€™9â€™,ç»§ç»­æ‰§è¡Œç¬¬äºŒä¸ª then æ‰“å°â€˜6â€™ 11.è°ƒç”¨æ ˆæ¸…ç©ºï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ¸…ç©ºï¼Œæœ€åæ‰§è¡Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„â€˜2â€™ï¼Œâ€˜8â€™</li></ol><h2 id="ä¸ºä»€ä¹ˆ-JavaScript-æ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-JavaScript-æ˜¯å•çº¿ç¨‹çš„ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</h2><p>å•çº¿ç¨‹æ„æ€å°±æ˜¯è¯´åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚é‚£è¿™æ ·çš„è¯æ•ˆç‡ä¸æ˜¯å¾ˆä½ï¼Ÿä¹Ÿæ²¡æœ‰å•¦ï¼Œå…¶å® javascript çš„å•çº¿ç¨‹ç‰¹ç‚¹æ˜¯è·Ÿä»–çš„ç”¨é€”æœ‰å…³çš„ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScript çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œ DOMã€‚å‡å¦‚ä¸æ˜¯å•çº¿ç¨‹çš„è¯ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹å½“æˆ‘ä»¬åœ¨ç»™æŸä¸ª DOM èŠ‚ç‚¹å¢åŠ å†…å®¹çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨åˆ é™¤è¿™ä¸ª DOM èŠ‚ç‚¹çš„å†…å®¹ï¼Œé‚£è¿˜å¾—äº†ï¼Œé‚£ä¸æ˜¯ä¹±å¥—äº†å—ã€‚æ‰€ä»¥ javascript åªèƒ½æ˜¯å•çº¿ç¨‹æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚</p><p>æ€»ç»“ï¼š</p><p>ç†è§£ js å•çº¿ç¨‹çš„æ¦‚å¿µ ä¸€ä¸ªæ—¶é—´åªèƒ½å¹²ä¸€ä»¶äº‹<br>ç†è§£ä»»åŠ¡é˜Ÿåˆ—<br>EventLoop<br>å“ªäº›ä¼šè¢«æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—<br>æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—çš„æ—¶æœº</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•-ç®—æ³•</title>
      <link href="2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E7%AE%97%E6%B3%95/"/>
      <url>2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><strong>æƒ³å­¦å¥½å‰ç«¯ï¼Œå…ˆç»ƒå¥½å†…åŠŸï¼Œåªæœ‰å†…åŠŸæ·±åšè€…ï¼Œå‰ç«¯ä¹‹è·¯æ‰ä¼šèµ°å¾—æ›´è¿œ</strong>ã€‚<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2011%2025%2044%201588130744.png"                      alt="202004262253311587912811"                ></p><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³"><a href="#åŸºæœ¬æ€æƒ³" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>1.é»˜è®¤ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€å°å€¼ï¼Œ</p><p>2.å†…å¾ªç¯ä»ç¬¬äºŒä¸ªï¼ˆi+1ï¼‰å…ƒç´ å¼€å§‹éå†æ‰¾åˆ°æ¯”ç¬¬ä¸€ä¸ªå…ƒç´ å°çš„ï¼Œè°ƒæ¢ä½ç½®</p><p>3.ç»§ç»­å¾ªç¯</p><p>ç‰¹ç‚¹å°±æ˜¯æœ€å¿«æ‰¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">array</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkArray</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(array);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½ç½®äº¤æ¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">array</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">left</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">right</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left &gt; array.length - <span class="number">1</span> || right &gt; array.length - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">  &#125;</span><br><span class="line">  [ array[left], array[right] ] = [ array[right], array[left] ];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment"> * ä¸æ–­çš„ä»å·¦è¾¹ä½ç½®åæ‰¾æœ€å°å€¼</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ç¬¬ä¸€è½®æ’åºå°±å·²ç»æ‰¾åˆ°äº†æœ€å°å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selection</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!checkArray(arr)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//åˆå§‹æœ€å°å€¼ æœ€å°å€¼å¾€å·¦æ’ï¼Œ</span></span><br><span class="line">    <span class="keyword">let</span> miniIndex = i;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡æ’ä½ä¸€ä¸ª i+1ä½ç½®ç»§ç»­æ’åˆ—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">      minIndex = arr[j] &lt; arr[minIndex] ? j : minIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(arr, i, miniIndex);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(selection([ <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">8</span> ]));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-1"><a href="#åŸºæœ¬æ€æƒ³-1" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>1.ä¾æ¬¡æ¯”è¾ƒå·¦å³ç›¸é‚»2ä¸ªä½ç½®å¤§å°ï¼Œ</p><p>2.å¦‚æœå¤§å°±æ¢ä¸ªä½ç½®ç»§ç»­æ¯”è¾ƒã€‚</p><p>3.å¤–å¾ªç¯æ¯”è¾ƒiæ˜¯æ•°ç»„é•¿åº¦ é€’å‡â€“ï¼Œè¿™æ ·å†…å¾ªç¯æ¯æ¬¡å°±ç¼©å°æ¯”è¾ƒèŒƒå›´</p><blockquote><p>èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼š1.æŸ¥æ‰¾æ•°ç»„é—´æœ€å¤§å·®å€¼ 2ã€‚å¥‡å¶æ’åº è®¾ç½®2ä¸ªæ¸¸æ ‡ åˆ†åˆ«æŒ‡å‘å¥‡ å¶æ¸¸æ ‡</p></blockquote><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ç¬¬ä¸€è½®æ’åºå°±èƒ½æ‰¾åˆ°æœ€å³è¾¹çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> a = [ <span class="number">5</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!checkArray(arr)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="comment">// ä¸‹é¢çš„iæ˜¯ä½ ä¸‹æ¬¡è¦éå†çš„æœ€å¤§è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">        swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(bubble(a));</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-2"><a href="#åŸºæœ¬æ€æƒ³-2" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>1.æ’åºé»˜è®¤ä»ç¬¬äºŒä¸ªå¼€å§‹éå†</p><p>2.æ¯ä¸€æ¬¡éå†åºå·ä¹‹å‰çš„å…ƒç´ å…¨éƒ¨éå†ä¸€éï¼Œæ¯”è¾ƒå¤§å°ï¼Œäº¤æ¢ä½ç½®</p><h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment"> * é€‚åˆå°å‹æ•°ç»„ ç®—æ³•æ¯”é€‰æ‹©å’Œå†’æ³¡æ€§èƒ½å¥½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>array </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertionSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; length &#125; = array;</span><br><span class="line">  <span class="keyword">let</span> temp;</span><br><span class="line">  <span class="comment">//æ³¨æ„æ˜¯ä»ç¬¬äºŒä¸ªä½ç½®å¼€å§‹</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> j = i;</span><br><span class="line">    temp = array[i]; <span class="comment">//å‚¨å­˜ä¸€ä¸ªä¸´æ—¶å˜é‡</span></span><br><span class="line">    <span class="comment">//æ¯ä¸€æ¬¡éƒ½æ¯”è¾ƒå½“å‰ç´¢å¼•ä¹‹å‰çš„åºåˆ—å…¨éƒ½æ¯”è¾ƒä¸€é</span></span><br><span class="line">    <span class="comment">//æ¯”å¦‚ã€3ï¼Œ2ï¼Œ1ï¼Œ5ã€‘ï¼Œå½“å‰1 è¦è·Ÿ 2 3éƒ½æ¯”è¾ƒä¸€é ä¸‹ä¸€æ¬¡5 è·Ÿ 3ï¼Œ2ï¼Œ1 éƒ½æ¯”è¾ƒä¸€é</span></span><br><span class="line">    <span class="comment">//array[j - 1] æ˜¯å‰é¢ä¸€ä¸ªæ•° tempåé¢ä¸€ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; array[j - <span class="number">1</span>] &gt; temp) &#123;</span><br><span class="line">      array[j] = array[j - <span class="number">1</span>];</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">    array[j] = temp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [ <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span> ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(insertionSort(array));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-3"><a href="#åŸºæœ¬æ€æƒ³-3" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>æ„é€ ä¸€ä¸ªå¤§é¡¶å †ï¼Œå–å †é¡¶ä¹Ÿå°±æ˜¯æœ€å¤§å€¼</p><p>å†å°†å‰©ä¸‹çš„æ•°å­—æ„å»ºä¸€ä¸ªå¤§é¡¶å †ï¼Œå–å †é¡¶æ•°å­—</p><p>é‡å¤ä»¥ä¸Šæ“ä½œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª<code>ä»å¤§åˆ°å°</code>çš„æ•°ç»„</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2023%2057%2004%201588175824.png"                      alt="image-20200429235650713" style="zoom:40%;"                 ></p><h3 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>];</span><br><span class="line"><span class="comment">// å †æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapSort</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;å †æ’åºè€—æ—¶&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å¤§é¡¶å †ï¼Œä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="built_in">Math</span>.floor(array.length / <span class="number">2</span> - <span class="number">1</span>); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">heapify(array, i, array.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ’åºï¼Œæ¯ä¸€æ¬¡ for å¾ªç¯æ‰¾å‡ºä¸€ä¸ªå½“å‰æœ€å¤§å€¼ï¼Œæ•°ç»„é•¿åº¦å‡ä¸€</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="built_in">Math</span>.floor(array.length - <span class="number">1</span>); i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line"><span class="comment">// æ ¹èŠ‚ç‚¹ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢</span></span><br><span class="line">swap(array, <span class="number">0</span>, i);</span><br><span class="line"><span class="comment">// ä»æ ¹èŠ‚ç‚¹å¼€å§‹è°ƒæ•´ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªç»“ç‚¹å·²ç»ä¸ºå½“å‰æœ€å¤§å€¼ï¼Œä¸éœ€è¦å†å‚ä¸æ¯”è¾ƒï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º iï¼Œå³æ¯”è¾ƒåˆ°æœ€åä¸€ä¸ªç»“ç‚¹å‰ä¸€ä¸ªå³å¯</span></span><br><span class="line">heapify(array, <span class="number">0</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;å †æ’åºè€—æ—¶&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> array;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªå¤§é¡¶å †</span></span><br><span class="line"><span class="keyword">const</span> heapify = <span class="function">(<span class="params">array, i, length</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> temp = array[i]; <span class="comment">// å½“å‰çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// j &lt; length çš„ç›®çš„æ˜¯å¯¹ç»“ç‚¹ i ä»¥ä¸‹çš„ç»“ç‚¹å…¨éƒ¨åšé¡ºåºè°ƒæ•´</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">2</span> * i + <span class="number">1</span>; j &lt; length; j = <span class="number">2</span> * j + <span class="number">1</span>) &#123;</span><br><span class="line">temp = array[i]; <span class="comment">// å°† array[i] å–å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹ç›¸å½“äºæ‰¾åˆ° array[i] åº”å¤„äºçš„ä½ç½®</span></span><br><span class="line"><span class="keyword">if</span> (j + <span class="number">1</span> &lt; length &amp;&amp; array[j] &lt; array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">j++; <span class="comment">// æ‰¾åˆ°ä¸¤ä¸ªå­©å­ä¸­è¾ƒå¤§çš„ä¸€ä¸ªï¼Œå†ä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (temp &lt; array[j]) &#123;</span><br><span class="line">swap(array, i, j); <span class="comment">// å¦‚æœçˆ¶èŠ‚ç‚¹å°äºå­èŠ‚ç‚¹:äº¤æ¢ï¼›å¦åˆ™è·³å‡º</span></span><br><span class="line">i = j; <span class="comment">// äº¤æ¢åï¼Œtemp çš„ä¸‹æ ‡å˜ä¸º j</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(heapSort(array));</span><br></pre></td></tr></table></figure><h2 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-4"><a href="#åŸºæœ¬æ€æƒ³-4" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><blockquote><p>å¸Œå°”æ’åºæ˜¯å¯¹ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¼˜åŒ–å’Œå‡çº§</p></blockquote><ul><li><p>å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—ã€‚</p></li><li><p>åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</p></li><li><p>å¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•åŸºæœ¬æœ‰åºæ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2030%2009%2034%2009%201588210449.png"                      alt="image-20200430093356206" style="zoom:33%;"                 ></p></li></ul><h3 id="ä»£ç å®ç°-4"><a href="#ä»£ç å®ç°-4" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [ <span class="number">98</span>, <span class="number">42</span>, <span class="number">25</span>, <span class="number">54</span>, <span class="number">15</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">72</span>, <span class="number">41</span>, <span class="number">10</span>, <span class="number">121</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shellSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–æ­¥é•¿ arré•¿åº¦çš„ä¸€åŠ</span></span><br><span class="line">  <span class="keyword">let</span> gap = <span class="built_in">Math</span>.floor(array.length / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span> &lt;= gap) &#123;</span><br><span class="line">    <span class="comment">// æŠŠè·ç¦»ä¸º gap çš„å…ƒç´ ç¼–ä¸ºä¸€ä¸ªç»„ï¼Œæ‰«ææ‰€æœ‰ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = gap; i &lt; array.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">let</span> temp = array[i]; <span class="comment">//ä¾æ¬¡3, 25, 72, 41, 10, 121</span></span><br><span class="line">      <span class="comment">// å¯¹è·ç¦»ä¸º gap çš„å…ƒç´ ç»„è¿›è¡Œæ’åº</span></span><br><span class="line">      <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; temp &lt; array[j]; j -= gap) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå³è¾¹æ¯”å·¦è¾¹å°åˆ™äº¤æ¢ä½ç½®</span></span><br><span class="line">        swap(array, j, j + gap);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    gap = <span class="built_in">Math</span>.floor(gap / <span class="number">2</span>); <span class="comment">// å‡å°å¢é‡</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shellSort(arr));</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-5"><a href="#åŸºæœ¬æ€æƒ³-5" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><h3 id="ä»£ç å®ç°-5"><a href="#ä»£ç å®ç°-5" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½’å¹¶æ’åº</span></span><br><span class="line"><span class="comment"> * æ€æƒ³å°†åºåˆ—ä¸­å¸¦åºå·æ•°å­—åˆ†æˆè‹¥å¹²ç»„ï¼Œæ¯ä¸ªæ•°å­—åˆ†ä¸€ç»„</span></span><br><span class="line"><span class="comment"> * å°†è‹¥å¹²ç»„22 åˆå¹¶ åˆå¹¶åä¿è¯æœ‰åº</span></span><br><span class="line"><span class="comment"> * é‡å¤ç¬¬äºŒæ­¥ç›´åˆ°åªå‰©ä¸€ç»„ æ’åºå®Œæˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [ <span class="number">19</span>, <span class="number">97</span>, <span class="number">09</span>, <span class="number">17</span>, <span class="number">01</span>, <span class="number">08</span>, <span class="number">02</span> ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ•°ç»„é•¿åº¦1 è¡¨ç¤ºå·²ç»åˆ†ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (array.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; length &#125; = array;</span><br><span class="line">    <span class="comment">//æ‰¾ä¸­é—´å…ƒç´ </span></span><br><span class="line">    <span class="keyword">const</span> middle = <span class="built_in">Math</span>.floor(length / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//åˆ†å·¦å³äºŒç»„</span></span><br><span class="line">    <span class="keyword">const</span> left = mergeSort(array.slice(<span class="number">0</span>, middle));</span><br><span class="line">    <span class="keyword">const</span> right = mergeSort(array.slice(middle, length));</span><br><span class="line">    array = merge(left, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">while</span> (i &lt; left.length &amp;&amp; j &lt; right.length) &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ¯ä¸€ä¸ªæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ å·¦è¾¹å¤§è¿˜æ˜¯å³è¾¹å¤§ æ¯”å¦‚ [3,4,5] [1,2]</span></span><br><span class="line">    <span class="comment">//æ¯”è¾ƒåæŠŠé‚£ä¸ªå¤§çš„æ•°ç»„åé¢çš„æ•°å­—ä¹Ÿä¸€åŒåŠ å…¥æ–°æ•°ç»„ä¸­</span></span><br><span class="line">    result.push(left[i] &lt; right[j] ? left[i++] : right[j++]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result.concat(i &lt; left.length ? left.slice(i) : right.slice(j));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(mergeSort(arr));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-6"><a href="#åŸºæœ¬æ€æƒ³-6" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><ol><li><p>ä»ä¸­é—´æ•°ç»„æ‰¾ä¸€ä¸ªå€¼</p></li><li><p>è®¾è®¡2ä¸ªåŒæŒ‡é’ˆå·¦å³å„ä¸€ä¸ª</p></li><li>å·¦è¾¹æ‰¾æ¯”ä¸­é—´å€¼å°çš„å…ƒç´ ï¼Œå³è¾¹æ‰¾æ¯”å®ƒå¤§çš„å…ƒç´  äº¤æ¢ä»–ä»¬</li><li>å·¦è¾¹è¶…è¿‡å³è¾¹åˆ™åœæ­¢æ¯”è¾ƒ</li></ol><h3 id="ä»£ç å®ç°-6"><a href="#ä»£ç å®ç°-6" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="comment"> * ä»ä¸­é—´æ•°ç»„æ‰¾ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="comment"> * è®¾è®¡2ä¸ªåŒæŒ‡é’ˆå·¦å³å„ä¸€ä¸ª</span></span><br><span class="line"><span class="comment"> * å·¦è¾¹æ‰¾æ¯”ä¸­é—´å€¼å°çš„å…ƒç´ ï¼Œå³è¾¹æ‰¾æ¯”å®ƒå¤§çš„å…ƒç´  äº¤æ¢ä»–ä»¬</span></span><br><span class="line"><span class="comment"> * ç›´åˆ°å·¦è¶…è¿‡äº†å³è¾¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//ä¼ æ•°ç»„çš„ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">return</span> quick(array, <span class="number">0</span>, array.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quick</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="keyword">if</span> (array.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    index = partition(array, left, right);</span><br><span class="line">    <span class="keyword">if</span> (left &lt; index - <span class="number">1</span>) &#123;</span><br><span class="line">      quick(array, left, index - <span class="number">1</span>); <span class="comment">//[3,5,1,2,4]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; right) &#123;</span><br><span class="line">      quick(array, index, right);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‰¾åˆ°ä¸­å¿ƒè½´çš„æ•°å­—</span></span><br><span class="line">  <span class="keyword">const</span> pivot = array[<span class="built_in">Math</span>.floor((right + left) / <span class="number">2</span>)];</span><br><span class="line">  <span class="comment">// åŒæŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">let</span> i = left;</span><br><span class="line">  <span class="keyword">let</span> j = right;</span><br><span class="line">  <span class="comment">// æ»¡è¶³åŒæŒ‡é’ˆé‡åˆå°±åœæ­¢</span></span><br><span class="line">  <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æ¯”ä¸­å¿ƒè½´å°çš„æ•°å­—åˆ™æ”¾å·¦è¾¹ï¼Œç»§ç»­++</span></span><br><span class="line">    <span class="keyword">while</span> (array[i] &lt; pivot) &#123;</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æ¯”ä¸­å¿ƒè½´å¤§çš„æ•°å­—åˆ™æ”¾å³è¾¹ï¼Œç»§ç»­--</span></span><br><span class="line">    <span class="keyword">while</span> (array[j] &gt; pivot) &#123;</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &lt;= j) &#123;</span><br><span class="line">      swap(array, i, j);</span><br><span class="line">      i++;</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(quickSort([ <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">2</span> ]));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-7"><a href="#åŸºæœ¬æ€æƒ³-7" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><h3 id="ä»£ç å®ç°-7"><a href="#ä»£ç å®ç°-7" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¡¶æ’åº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bucketSort</span>(<span class="params">array, bucketSize = <span class="number">5</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> array;</span><br><span class="line">  <span class="keyword">const</span> bucket = createBuckets(array, bucketSize);</span><br><span class="line">  <span class="keyword">return</span> sortBuckets(buckets);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createBuckets</span>(<span class="params">array, bucketSize</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–æœ€å¤§å€¼æœ€å°å€¼</span></span><br><span class="line">  <span class="keyword">let</span> miniValue = array[<span class="number">0</span>],</span><br><span class="line">    maxValue = array[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// å¯»æ‰¾æœ€å¤§å€¼æœ€å°å€¼;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] &lt; miniValue) &#123;</span><br><span class="line">      miniValue = array[i];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (array[i] &gt; maxValue) &#123;</span><br><span class="line">      maxValue = array[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//åˆ†é…æ¯ä¸€ä¸ªæ¡¶çš„å®¹é‡å¤§å°</span></span><br><span class="line">  <span class="keyword">const</span> bucketCount = <span class="built_in">Math</span>.floor((maxValue - miniValue) / bucketSize + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> buckets = [];</span><br><span class="line">  <span class="comment">//åˆ†é…æ¡¶</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucketCount; i++) &#123;</span><br><span class="line">    buckets[i] = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠŠæ•°ç»„ä¸­çš„å€¼æ”¾å…¥ç›¸åº”çš„æ¡¶ä¸­</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="comment">//è®¡ç®—å°†å…ƒç´ æ”¾åˆ°å“ªä¸ªæ¡¶ä¸­</span></span><br><span class="line">    <span class="keyword">const</span> bucketIndex = <span class="built_in">Math</span>.floor((array[i] - miniValue) / bucketSize);</span><br><span class="line">    buckets[bucketIndex].push(array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> buckets;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¯ä¸€ä¸ªæ¡¶æ’åº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>buckets </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortBuckets</span>(<span class="params">buckets</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªæ–°æ•°ç»„</span></span><br><span class="line">  <span class="keyword">const</span> sortedArray = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (buckets[i] != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">//æ’å…¥æ’åº</span></span><br><span class="line">      insertionSort(buckets[i]);</span><br><span class="line">      <span class="comment">//åŠ å…¥æ–°æ•°ç»„</span></span><br><span class="line">      sortedArray.push(...buckets[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sortedArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-8"><a href="#åŸºæœ¬æ€æƒ³-8" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><ol><li><p>æ±‚æœ€å¤§å€¼å°±çŸ¥é“éœ€è¦çš„æ•°ç»„æœ‰å¤šé•¿ï¼ˆéå¸¸æ¶ˆè€—å†…å­˜ï¼Œå¼€è¾Ÿæ•°ç»„åœ¨å†…å­˜ç©ºé—´å¤§å°ï¼‰</p></li><li><p>æŠŠæ¯ä¸€ä¸ªå€¼ä½œä¸º<code>ä¸‹æ ‡</code>æ”¾å…¥å¯¹åº”countsæ•°ç»„ä¸­ï¼Œå‡ºç°çš„æ¬¡æ•°ä½œä¸º<code>å€¼</code>,æ¬¡æ•°è¶Šå¤šå€¼è¶Šå¤§</p></li><li><p>å¾ªç¯countsæŠŠä¸‹æ ‡æŠŠå€¼éƒ½æ”¾å…¥arrayæ•°ç»„ä¸­ï¼Œè¿”å›arrayå°±æ˜¯æ’å¥½åºçš„æ•°ç»„</p></li></ol><h3 id="ä»£ç å®ç°-8"><a href="#ä»£ç å®ç°-8" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡æ•°æ’åº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMaxValue</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = array[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] &gt; max) &#123;</span><br><span class="line">      max = array[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countingSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> maxValue = findMaxValue(array);</span><br><span class="line">  <span class="comment">//åˆ›å»ºè®¡æ•°æ•°ç»„ æ•°ç»„ä»0å¼€å§‹ æ‰€ä»¥è¦+1</span></span><br><span class="line">  <span class="keyword">const</span> counts = <span class="keyword">new</span> <span class="built_in">Array</span>(maxValue + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  array.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//itemæ˜¯ä¸‹æ ‡å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆå§‹ä¸º0</span></span><br><span class="line">    <span class="keyword">if</span> (!counts[item]) &#123;</span><br><span class="line">      counts[item] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¥ç€+1 æ¬¡</span></span><br><span class="line">    counts[item]++;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ç´¢å¼•</span></span><br><span class="line">  <span class="keyword">let</span> sortedIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  counts.forEach(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//itemæ˜¯å‡ºç°çš„æ¬¡æ•°ç›´åˆ°å‰ªåˆ°0æ¬¡ å¦‚ã€1ï¼Œ2ï¼Œ2ã€‘</span></span><br><span class="line">    <span class="keyword">while</span> (item &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      array[sortedIndex++] = i;</span><br><span class="line">      item--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(countingSort([ <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span> ]));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-9"><a href="#åŸºæœ¬æ€æƒ³-9" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>å…¶å®å°±æ˜¯æ¡¶æ€æƒ³çš„ä¸€ç§</p><p>å…ˆæ’ä¸ªä½æ•°ï¼Œåä½æ•°  ç™¾ä½æ•° åƒä½æ•°ã€‚ã€‚æ”¾å…¥æ¡¶é‡Œ</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/uPic/2020%2004%2029%2011%2026%2050%201588130810.png"                      alt="202004271241311587962491"                ></p><p>å¦‚ä½•å»åˆ¤æ–­ä¸ªä½æ•° åä½æ•° ç™¾ä½æ•°</p><p>æ¯”å¦‚ 421 ä¸ªä½æ•°æ˜¯1 ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å–æ¨¡ï¼Œ 421 /1 = 42 ä½™æ•°å°±æ˜¯1ï¼Œåä½æ•° 421 /10 ä½™æ•°æ˜¯ 2  ç™¾ä½æ•° 421 /100 ä½™æ•°æ˜¯4</p><h3 id="ä»£ç å®ç°-9"><a href="#ä»£ç å®ç°-9" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [ <span class="number">19</span>, <span class="number">240</span>, <span class="number">100</span>, <span class="number">532</span>, <span class="number">305</span>, <span class="number">430</span>, <span class="number">124</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMinValue</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMaxValue</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†å¸ƒå¼æ’åºç®—æ³•</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è¿›åˆ¶å»é€‰æ‹©  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;&#x27;*&#x27;&#125;</span> </span>array </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>radixBase 10è¿›åˆ¶ å°±å‚æ•°10 8è¿›åˆ¶å°±é€‰8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">radixSort</span>(<span class="params">array, radixBase = <span class="number">10</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> minValue = findMinValue(array);</span><br><span class="line">  <span class="keyword">const</span> maxValue = findMaxValue(array);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä»æœ€åä¸€ä½å¼€å§‹æ’åºæ‰€æœ‰æ•°</span></span><br><span class="line">  <span class="keyword">let</span> significantDigit = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// åç»­è¿›è¡Œç¬¬äºŒä¸ªæœ‰æ•ˆä½æ•°æ’åº ç¬¬ä¸‰ä¸ªæœ‰æ•ˆä½æ•°æ’åº ç›´åˆ°æ²¡æœ‰å¾…æ’åºçš„æœ‰æ•ˆä½</span></span><br><span class="line">  <span class="comment">// æ¯”å¦‚ ï¼ˆ999 - 900ï¼‰ /1 /10 /100 ï¼ˆ99-19ï¼‰ /1 /10 ä½†æ˜¯/100å°±ä¸è¡Œäº†</span></span><br><span class="line">  <span class="keyword">while</span> ((maxValue - minValue) / significantDigit &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">//è·å–æ¯ä¸€æ¬¡æœ‰æ•ˆä½åæ’å¥½çš„æ•°ç»„ï¼Œç›´åˆ°æœ€åæ²¡æœ‰æœ‰æ•ˆä½</span></span><br><span class="line">    array = countingSortForRadix(array, radixBase, significantDigit, minValue);</span><br><span class="line">    significantDigit *= radixBase;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countingSortForRadix</span>(<span class="params">array, radixBase, significantDigit, minValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> bucketsIndex;</span><br><span class="line">  <span class="comment">// åŸºæ•°åˆå§‹åŒ–æ¡¶</span></span><br><span class="line">  <span class="keyword">const</span> buckets = [];</span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸´æ—¶æ•°ç»„ ä½œç”¨ï¼šå¸®åŠ©åé¢ç§»å€¼åˆ°åŸå§‹æ•°ç»„ä¸­</span></span><br><span class="line">  <span class="keyword">const</span> tmp = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; radixBase; i++) &#123;</span><br><span class="line">    buckets[i] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//[ 421, 240, 100, 532, 305, 430, 124 ]</span></span><br><span class="line">  <span class="comment">//ç¬¬äºŒæ¬¡ ã€240,100,430,421,532,124,305ã€‘</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="comment">//è®¡ç®—æœ‰æ•ˆä½è¿›è¡Œè®¡æ•°æ’åº</span></span><br><span class="line">    bucketsIndex = <span class="built_in">Math</span>.floor(((array[i] - minValue) / significantDigit) % radixBase);</span><br><span class="line">    <span class="comment">//ç´¯è®¡å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    buckets[bucketsIndex]++;</span><br><span class="line">    <span class="comment">// ==== 0   1   2  3 4 5....</span></span><br><span class="line">    <span class="comment">//      1æ¬¡ 2æ¬¡  0æ¬¡ã€‚ã€‚ã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  ç¬¬ä¸€æ¬¡å¾ªç¯ä¸ªä½æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">  <span class="comment">// 0:3</span></span><br><span class="line">  <span class="comment">// 1:1</span></span><br><span class="line">  <span class="comment">// 2:1</span></span><br><span class="line">  <span class="comment">// 3:0</span></span><br><span class="line">  <span class="comment">// 4:1</span></span><br><span class="line">  <span class="comment">// 5:1</span></span><br><span class="line">  <span class="comment">// 6:0</span></span><br><span class="line">  <span class="comment">// 7:0</span></span><br><span class="line">  <span class="comment">// 8:0</span></span><br><span class="line">  <span class="comment">// 9:0</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç´¯ç§¯ç»“æœå¾—åˆ°è®¡æ•°å€¼</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; radixBase; i++) &#123;</span><br><span class="line">    buckets[i] += buckets[i - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;ç´¯ç§¯ç»“æœå¾—åˆ°è®¡æ•°å€¼&#x27;</span>, buckets);</span><br><span class="line">  <span class="comment">// å€’å™é‡æ–°æ”¾å…¥ä¸´æ—¶æ•°ç»„;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="comment">//è®¡ç®—æœ‰æ•ˆä½è¿›è¡Œè®¡æ•°æ’åº</span></span><br><span class="line">    bucketsIndex = <span class="built_in">Math</span>.floor(((array[i] - minValue) / significantDigit) % radixBase);</span><br><span class="line">    <span class="comment">//æ‰¾bucketsä¸­æœ‰æ•ˆä½å¯¹åº”çš„ä¸‹æ ‡</span></span><br><span class="line">    tmp[--buckets[bucketsIndex]] = array[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠŠä¸´æ—¶æ•°ç»„æ–°æ’å¥½ç»™array</span></span><br><span class="line">  <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(radixSort(array));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://juejin.im/post/5d371aa6e51d455d850d3bbe#heading-3" >ç®—æ³•ä¹‹ç¾<i class="fas fa-external-link-alt"></i></a></p><p><a href="">JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ç¬¬ä¸‰ç‰ˆ</a></p><p><a href="">bilibiliç½‘ä¸Šæ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•-CSS ç›¸å…³</title>
      <link href="2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-CSS%E7%9B%B8%E5%85%B3/"/>
      <url>2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-CSS%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<p>2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†</p><a id="more"></a><h2 id="CSS-ç›’æ¨¡å‹"><a href="#CSS-ç›’æ¨¡å‹" class="headerlink" title="CSS ç›’æ¨¡å‹"></a>CSS ç›’æ¨¡å‹</h2><p>æ ‡å‡†æ¨¡å‹å’Œ IE æ¨¡å‹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322194544.png"                      alt=""                ></p><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><p>æ ‡å‡†ç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹çš„å®½åº¦ï¼ˆcontentï¼‰+ border + padding + margin<br>ä½ç‰ˆæœ¬ IE ç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹å®½åº¦ï¼ˆcontent+border+paddingï¼‰+ margin</p><h4 id="css-å¦‚ä½•è®¾ç½®è¿™-2-ç§æ¨¡å‹"><a href="#css-å¦‚ä½•è®¾ç½®è¿™-2-ç§æ¨¡å‹" class="headerlink" title="css å¦‚ä½•è®¾ç½®è¿™ 2 ç§æ¨¡å‹"></a>css å¦‚ä½•è®¾ç½®è¿™ 2 ç§æ¨¡å‹</h4><p>box-sizingï¼šcontent-box æ ‡å‡†æ¨¡å‹ ï¼ˆé»˜è®¤ï¼‰<br>box-sizingï¼šborder-box ie æ¨¡å‹</p><p>æ¯”å¦‚ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323001804.png"                      alt=""                ><br>å¯¹æ¯”<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323002442.png"                      alt=""                ></p><h2 id="CSS-é€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ"><a href="#CSS-é€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ" class="headerlink" title="CSS é€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ"></a>CSS é€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ</h2><p>CSS é€‰æ‹©ç¬¦ï¼š</p><ol><li>id é€‰æ‹©å™¨(#myid)</li><li>ç±»é€‰æ‹©å™¨(.myclassname)</li><li>æ ‡ç­¾é€‰æ‹©å™¨(div, h1, p)</li><li>ç›¸é‚»é€‰æ‹©å™¨(h1 + p)</li><li>å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰</li><li>åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰</li><li>é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰</li><li>å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel=â€externalâ€]ï¼‰</li><li>ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰</li></ol><p>å¯ç»§æ‰¿çš„å±æ€§ï¼šfont-size, font-family, color</p><p>ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼šborder, padding, margin, width, height</p><p>ä¼˜å…ˆçº§ï¼ˆå°±è¿‘åŸåˆ™ï¼‰ï¼š!important &gt; [ id &gt; class &gt; tag ] <code>!important æ¯”å†…è”ä¼˜å…ˆçº§é«˜</code></p><h2 id="CSS3-æ–°å¢ä¼ªç±»æœ‰é‚£äº›"><a href="#CSS3-æ–°å¢ä¼ªç±»æœ‰é‚£äº›" class="headerlink" title="CSS3 æ–°å¢ä¼ªç±»æœ‰é‚£äº›?"></a>CSS3 æ–°å¢ä¼ªç±»æœ‰é‚£äº›?</h2><p>p:first-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ªå…ƒç´ <br>p:last-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€åå…ƒç´ <br>p:only-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„å…ƒç´ <br>p:only-child é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ <br>p:nth-child(2) é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ <br>:enabled :disabled è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚<br>:checked å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚</p><h2 id="display-æœ‰å“ªäº›å€¼ï¼Ÿ-position-çš„å€¼ï¼Ÿ"><a href="#display-æœ‰å“ªäº›å€¼ï¼Ÿ-position-çš„å€¼ï¼Ÿ" class="headerlink" title="display æœ‰å“ªäº›å€¼ï¼Ÿ position çš„å€¼ï¼Ÿ"></a>display æœ‰å“ªäº›å€¼ï¼Ÿ position çš„å€¼ï¼Ÿ</h2><p>inlineï¼ˆé»˜è®¤ï¼‰â€“å†…è”<br>noneâ€“éšè—<br>blockâ€“å—æ˜¾ç¤º<br>tableâ€“è¡¨æ ¼æ˜¾ç¤º<br>list-itemâ€“é¡¹ç›®åˆ—è¡¨<br>inline-block</p><p>staticï¼ˆé»˜è®¤ï¼‰ï¼šæŒ‰ç…§æ­£å¸¸æ–‡æ¡£æµè¿›è¡Œæ’åˆ—ï¼›<br>relativeï¼ˆç›¸å¯¹å®šä½ï¼‰ï¼šä¸è„±ç¦»æ–‡æ¡£æµï¼Œå‚è€ƒè‡ªèº«é™æ€ä½ç½®é€šè¿‡ top, bottom, left, right å®šä½ï¼›<br>absolute(ç»å¯¹å®šä½)ï¼šå‚è€ƒè·å…¶æœ€è¿‘ä¸€ä¸ªä¸ä¸º static çš„çˆ¶çº§å…ƒç´ é€šè¿‡ top, bottom, left, right å®šä½ï¼›<br>fixed(å›ºå®šå®šä½)ï¼šæ‰€å›ºå®šçš„å‚ç…§å¯¹åƒæ˜¯å¯è§†çª—å£ã€‚</p><h2 id="display-none-ä¸-visibilityï¼šhidden-çš„åŒºåˆ«ï¼Ÿ"><a href="#display-none-ä¸-visibilityï¼šhidden-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="display:none ä¸ visibilityï¼šhidden çš„åŒºåˆ«ï¼Ÿ"></a>display:none ä¸ visibilityï¼šhidden çš„åŒºåˆ«ï¼Ÿ</h2><p>displayï¼šnone ä¸æ˜¾ç¤ºå¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†åˆ†é…ç©ºé—´ï¼ˆå›æµ+é‡ç»˜ï¼‰</p><p>visibilityï¼šhidden éšè—å¯¹åº”å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ï¼ˆé‡ç»˜ï¼‰</p><h2 id="position-fixed-åœ¨-android-ä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#position-fixed-åœ¨-android-ä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="position:fixed;åœ¨ android ä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ"></a>position:fixed;åœ¨ android ä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta</span><br><span class="line">  name=<span class="string">&quot;viewport&quot;</span></span><br><span class="line">  content=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h2 id="å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"><a href="#å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"></a>å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h2><p>å¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘ç‡æ˜¯ 60Hzï¼Œå³ 1 ç§’åˆ·æ–° 60 æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º 1/60ï¼Š1000ms ï¼ 16.7msã€‚</p><h2 id="CSS-å±æ€§-overflow-å±æ€§å®šä¹‰æº¢å‡ºå…ƒç´ å†…å®¹åŒºçš„å†…å®¹ä¼šå¦‚ä½•å¤„ç†"><a href="#CSS-å±æ€§-overflow-å±æ€§å®šä¹‰æº¢å‡ºå…ƒç´ å†…å®¹åŒºçš„å†…å®¹ä¼šå¦‚ä½•å¤„ç†" class="headerlink" title="CSS å±æ€§ overflow å±æ€§å®šä¹‰æº¢å‡ºå…ƒç´ å†…å®¹åŒºçš„å†…å®¹ä¼šå¦‚ä½•å¤„ç†?"></a>CSS å±æ€§ overflow å±æ€§å®šä¹‰æº¢å‡ºå…ƒç´ å†…å®¹åŒºçš„å†…å®¹ä¼šå¦‚ä½•å¤„ç†?</h2><p>å‚æ•°æ˜¯ scroll æ—¶å€™ï¼Œå¿…ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚<br>å‚æ•°æ˜¯ auto æ—¶å€™ï¼Œå­å…ƒç´ å†…å®¹å¤§äºçˆ¶å…ƒç´ æ—¶å‡ºç°æ»šåŠ¨æ¡ã€‚<br>å‚æ•°æ˜¯ visible æ—¶å€™ï¼Œæº¢å‡ºçš„å†…å®¹å‡ºç°åœ¨çˆ¶å…ƒç´ ä¹‹å¤–ã€‚<br>å‚æ•°æ˜¯ hidden æ—¶å€™ï¼Œæº¢å‡ºéš</p><h2 id="JS-å¦‚ä½•è·å–ç›’æ¨¡å‹çš„å®½å’Œé«˜"><a href="#JS-å¦‚ä½•è·å–ç›’æ¨¡å‹çš„å®½å’Œé«˜" class="headerlink" title="JS å¦‚ä½•è·å–ç›’æ¨¡å‹çš„å®½å’Œé«˜"></a>JS å¦‚ä½•è·å–ç›’æ¨¡å‹çš„å®½å’Œé«˜</h2><p>dom.style.widht/height (åªé™å†…è”æ ·å¼çš„å®½å’Œé«˜ï¼‰</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323003602.png"                      alt=""                ><br>å¦‚æœä¸æ˜¯å†…è”å…ƒç´ å°±å–ä¸åˆ°å¯¹åº”çš„å€¼<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323003805.png"                      alt=""                ></p><p>ç„¶åæˆ‘ä»¬è¯•è¯•è¿™ä¸ª<br>dom.currentStyle.width/height (æ¸²æŸ“ä»¥åå¾—åˆ°çš„å®½å’Œé«˜ï¼‰ åªæœ‰ ie æ”¯æŒ<br>window.getComputedStyle(dom).width/height è°·æ­Œç«ç‹æ”¯æŒ</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323004345.png"                      alt=""                ></p><p>dom.getBoundClientRect().width/height éå¸¸é‡è¦ è®¡ç®—å…ƒç´ çš„ç»å¯¹ä½ç½® ï¼ˆè§†çª—å·¦ä¸Šè§’ç›¸å¯¹å…ƒç´ çš„ä½ç½®ï¼‰<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323004802.png"                      alt=""                ></p><p>æ€è€ƒä¸€ä¸ªé—®é¢˜<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323010536.png"                      alt=""                ></p><p>ä¸ºä»€ä¹ˆ bottom ä¸ left çš„å€¼ä¸ä¸€æ ·ï¼Ÿï¼Ÿ</p><h4 id="ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å "><a href="#ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å " class="headerlink" title="ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å "></a>ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å </h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322200649.png"                      alt=""                ></p><h2 id="BFC-è¾¹è·é‡å è§£å†³æ–¹æ¡ˆ"><a href="#BFC-è¾¹è·é‡å è§£å†³æ–¹æ¡ˆ" class="headerlink" title="BFC è¾¹è·é‡å è§£å†³æ–¹æ¡ˆ"></a>BFC è¾¹è·é‡å è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ¦‚å¿µï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰"><a href="#æ¦‚å¿µï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰" class="headerlink" title="æ¦‚å¿µï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰"></a>æ¦‚å¿µï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰</h3><blockquote><p>è¾¹ç•Œé‡å æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªç›’å­(å¯èƒ½ç›¸é‚»ä¹Ÿå¯èƒ½åµŒå¥—)çš„ç›¸é‚»è¾¹ç•Œ(å…¶é—´æ²¡æœ‰ä»»ä½•éç©ºå†…å®¹ã€è¡¥ç™½ã€è¾¹æ¡†)é‡åˆåœ¨ä¸€èµ·è€Œå½¢æˆä¸€ä¸ªå•ä¸€è¾¹ç•Œã€‚ä¸¤ä¸ªæˆ–å¤šä¸ªå—çº§ç›’å­çš„<code>å‚ç›´</code>ç›¸é‚»è¾¹ç•Œä¼šé‡åˆï¼Œå®ƒä»¬çš„è¾¹ç•Œå®½åº¦æ˜¯ç›¸é‚»è¾¹ç•Œå®½åº¦ä¸­çš„<code>æœ€å¤§å€¼</code>ã€‚æ³¨æ„æ°´å¹³è¾¹ç•Œæ˜¯ä¸ä¼šé‡åˆçš„ã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322200939.png"                      alt=""                ><br>å…„å¼Ÿå…ƒç´ é‡å  å–æœ€å¤§å€¼ï¼ˆä¸Šä¸‹ï¼‰<br>ç©ºå…ƒç´  è¾¹è·é‡å </p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><ol><li>bfc è¿™ä¸ªå…ƒç´ çš„å‚ç›´æ–¹å‘çš„è¾¹è·ä¼šå‘ç”Ÿé‡å </li><li>bfc çš„åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨å…ƒç´ çš„åŒºåŸŸé‡å  ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰</li><li>bfc çš„é¡µé¢æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ å¤–é¢çš„å…ƒç´ ä¸ä¼šå½±å“é‡Œé¢çš„å…ƒç´ </li><li>è®¡ç®— bfc é«˜åº¦çš„æ—¶å€™ æµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®—</li></ol><h3 id="åˆ›å»º-BFC"><a href="#åˆ›å»º-BFC" class="headerlink" title="åˆ›å»º BFC"></a>åˆ›å»º BFC</h3><p>float å€¼ä¸ä¸º none åªè¦åˆ›å»ºäº†æµ®åŠ¨å°±åˆ›å»ºäº† BFC<br>overflowï¼šhidden<br>position ä¸æ˜¯ realtive æˆ–è€…<br>display table flex</p><h3 id="BFC-çš„ä½¿ç”¨åœºæ™¯"><a href="#BFC-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="BFC çš„ä½¿ç”¨åœºæ™¯"></a>BFC çš„ä½¿ç”¨åœºæ™¯</h3><p>ä¸€ç§æƒ…å†µ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      * &#123;</span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      #wrapper &#123;</span><br><span class="line"><span class="css">        <span class="attribute">background</span>: lightpink;</span></span><br><span class="line"><span class="css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-id">#wrapper</span> &gt; <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">5px</span> auto <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background</span>: green;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322232523.png"                      alt=""                ></p><p>ç»™å­å…ƒç´ çš„å¢åŠ ä¸€ä¸ªçˆ¶çº§ï¼Œçˆ¶çº§è®¾ç½®<code>overflow: hidden</code>å¯ä»¥è§£å†³è¿™ä¸ªä¸Šä¸‹è¾¹è·é‡å çš„é—®é¢˜<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322232756.png"                      alt=""                ></p><p>å¦ä¸€ç§æƒ…å†µ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322233847.png"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;float&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .float &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#008000</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">110px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: peru;</span></span><br><span class="line"><span class="css">      <span class="attribute">overflow</span>: auto;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»º bfc ä¹‹åçš„æ•ˆæœ</strong><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322234320.png"                      alt=""                ></p><p>ç¬¬ä¸‰ç§åœºæ™¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;float&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .float &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: hotpink;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#008000</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>æµ®åŠ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322235259.png"                      alt=""                ></p><blockquote><p>BFC å­å…ƒç´ æ—¢æ˜¯ float å…ƒç´ ä¹Ÿä¼šå‚ä¸é«˜åº¦è®¡ç®—</p></blockquote><p>å¦‚å›¾ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190323000027.png"                      alt=""                ></p><h2 id="æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­"></a>æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191009134453.png"                      alt=""                ></p><h3 id="æ°´å¹³å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­"></a>æ°´å¹³å±…ä¸­</h3><h3 id="1-1-è¡Œå†…å…ƒç´ "><a href="#1-1-è¡Œå†…å…ƒç´ " class="headerlink" title="1.1 è¡Œå†…å…ƒç´ "></a>1.1 è¡Œå†…å…ƒç´ </h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-å—çº§å…ƒç´ "><a href="#1-2-å—çº§å…ƒç´ " class="headerlink" title="1.2 å—çº§å…ƒç´ "></a>1.2 å—çº§å…ƒç´ </h3><h4 id="1-2-1-å—çº§å…ƒç´ ä¸€èˆ¬å±…ä¸­æ–¹æ³•"><a href="#1-2-1-å—çº§å…ƒç´ ä¸€èˆ¬å±…ä¸­æ–¹æ³•" class="headerlink" title="1.2.1 å—çº§å…ƒç´ ä¸€èˆ¬å±…ä¸­æ–¹æ³•"></a>1.2.1 å—çº§å…ƒç´ ä¸€èˆ¬å±…ä¸­æ–¹æ³•</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-2-å­å…ƒç´ å«-float"><a href="#1-2-2-å­å…ƒç´ å«-float" class="headerlink" title="1.2.2 å­å…ƒç´ å« float"></a>1.2.2 å­å…ƒç´ å« float</h4><p>fit-content<br>ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹çš„è¾ƒå¤§å€¼:</p><p>1.å›ºæœ‰çš„æœ€å°å®½åº¦ 2.å›ºæœ‰é¦–é€‰å®½åº¦ï¼ˆmax-contentï¼‰å’Œå¯ç”¨å®½åº¦ï¼ˆavailableï¼‰çš„è¾ƒå°å€¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">  foat: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-3-Flex-å¼¹æ€§ç›’å­"><a href="#1-2-3-Flex-å¼¹æ€§ç›’å­" class="headerlink" title="1.2.3 Flex å¼¹æ€§ç›’å­"></a>1.2.3 Flex å¼¹æ€§ç›’å­</h4><p>1ï¼‰ flex 2012 ç‰ˆ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-4-ç»å¯¹å®šä½"><a href="#1-2-4-ç»å¯¹å®šä½" class="headerlink" title="1.2.4 ç»å¯¹å®šä½"></a>1.2.4 ç»å¯¹å®šä½</h4><p>1ï¼‰transform</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ï¼‰left: 50%</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: å®½åº¦;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">0.5</span>*å®½åº¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ï¼‰left/right: 0</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: å®½åº¦;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒã€å‚ç›´å±…ä¸­"><a href="#äºŒã€å‚ç›´å±…ä¸­" class="headerlink" title="äºŒã€å‚ç›´å±…ä¸­"></a>äºŒã€å‚ç›´å±…ä¸­</h3><h4 id="2-1-è¡Œå†…å…ƒç´ "><a href="#2-1-è¡Œå†…å…ƒç´ " class="headerlink" title="2.1 è¡Œå†…å…ƒç´ "></a>2.1 è¡Œå†…å…ƒç´ </h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: é«˜åº¦;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: é«˜åº¦;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼šâ‘  å­å…ƒç´  line-height å€¼ä¸ºçˆ¶å…ƒç´  height å€¼ã€‚â‘¡ å•è¡Œæ–‡æœ¬ã€‚</strong></p><h4 id="2-2-å—çº§å…ƒç´ "><a href="#2-2-å—çº§å…ƒç´ " class="headerlink" title="2.2 å—çº§å…ƒç´ "></a>2.2 å—çº§å…ƒç´ </h4><h5 id="2-2-1-è¡Œå†…å—çº§å…ƒç´ "><a href="#2-2-1-è¡Œå†…å—çº§å…ƒç´ " class="headerlink" title="2.2.1 è¡Œå†…å—çº§å…ƒç´ "></a>2.2.1 è¡Œå†…å—çº§å…ƒç´ </h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span><span class="selector-pseudo">::after</span>, <span class="selector-class">.son</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>:middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€‚åº” IE7ã€‚</p><h5 id="2-2-2-table"><a href="#2-2-2-table" class="headerlink" title="2.2.2 table"></a>2.2.2 table</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ul><li>å…ƒç´ é«˜åº¦å¯ä»¥åŠ¨æ€æ”¹å˜, ä¸éœ€å† CSS ä¸­å®šä¹‰, å¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰è¶³å¤Ÿç©ºé—´æ—¶, è¯¥å…ƒç´ å†…å®¹ä¹Ÿä¸ä¼šè¢«æˆªæ–­ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>IE6~7, ç”šè‡³ IE8 beta ä¸­æ— æ•ˆã€‚</li></ul><h5 id="2-2-3-Flex-å¼¹æ€§ç›’å­"><a href="#2-2-3-Flex-å¼¹æ€§ç›’å­" class="headerlink" title="2.2.3 Flex å¼¹æ€§ç›’å­"></a>2.2.3 Flex å¼¹æ€§ç›’å­</h5><p>1ï¼‰flex 2012 ç‰ˆ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ul><li>å†…å®¹å—çš„å®½é«˜ä»»æ„, ä¼˜é›…çš„æº¢å‡ºã€‚</li><li>å¯ç”¨äºæ›´å¤æ‚é«˜çº§çš„å¸ƒå±€æŠ€æœ¯ä¸­ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>IE8/IE9 ä¸æ”¯æŒã€‚</li><li>éœ€è¦æµè§ˆå™¨å‚å•†å‰ç¼€ã€‚</li><li>æ¸²æŸ“ä¸Šå¯èƒ½ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚</li></ul><h5 id="2-2-4-ç»å¯¹å®šä½"><a href="#2-2-4-ç»å¯¹å®šä½" class="headerlink" title="2.2.4 ç»å¯¹å®šä½"></a>2.2.4 ç»å¯¹å®šä½</h5><p>1ï¼‰transform</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>( <span class="number">0</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ul><li>ä»£ç å°‘ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>IE8 ä¸æ”¯æŒ, å±æ€§éœ€è¦è¿½åŠ æµè§ˆå™¨å‚å•†å‰ç¼€, å¯èƒ½å¹²æ‰°å…¶ä»– transform æ•ˆæœ, æŸäº›æƒ…å½¢ä¸‹ä¼šå‡ºç°æ–‡æœ¬æˆ–å…ƒç´ è¾¹ç•Œæ¸²æŸ“æ¨¡ç³Šçš„ç°è±¡ã€‚</li></ul><p>2ï¼‰top: 50%</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: é«˜åº¦;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">0.5</span>é«˜åº¦;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ul><li>é€‚ç”¨äºæ‰€æœ‰æµè§ˆå™¨ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>çˆ¶å…ƒç´ ç©ºé—´ä¸å¤Ÿæ—¶, å­å…ƒç´ å¯èƒ½ä¸å¯è§ (å½“æµè§ˆå™¨çª—å£ç¼©å°æ—¶, æ»šåŠ¨æ¡ä¸å‡ºç°æ—¶). å¦‚æœå­å…ƒç´ è®¾ç½®äº† overflow:auto, åˆ™é«˜åº¦ä¸å¤Ÿæ—¶, ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚</li></ul><p>3ï¼‰top/bottom: 0;</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ul><li>ç®€å•ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>æ²¡æœ‰è¶³å¤Ÿç©ºé—´æ—¶, å­å…ƒç´ ä¼šè¢«æˆªæ–­, ä½†ä¸ä¼šæœ‰æ»šåŠ¨æ¡ã€‚</li></ul><h2 id="ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•"><a href="#ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•" class="headerlink" title="ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•"></a>ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•</h2><p><code>å·²çŸ¥é«˜åº¦</code>, <code>å·¦å³è·ç¦»å›ºå®š</code>, <code>ä¸­é—´è‡ªé€‚åº”</code>ä¸‰æ å¸ƒå±€åœ¨ html å¾ˆå¸¸è§ï¼ŒåŸºç¡€çŸ¥è¯†å›é¡¾</p><blockquote><p>åŒé£ç¿¼å¸ƒå±€ä¸åœ£æ¯å¸ƒå±€çš„ä¸åŒä¹‹å¤„ï¼Œåœ£æ¯å¸ƒå±€çš„çš„å·¦ä¸­å³ä¸‰åˆ—å®¹å™¨ï¼Œä¸­é—´ middle å¤šäº†ä¸€ä¸ªå­å®¹å™¨å­˜åœ¨ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ã€‚</p></blockquote><h2 id="æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•"><a href="#æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•" class="headerlink" title="æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•"></a>æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•</h2><p>å…³é”®ç‚¹</p><ol><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left ä¸ left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®</li><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ éœ€è¦è®¾ç½® padding</li><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„</li></ol><html><br><iframe width="100%" height="300" src="//jsrun.net/ZYXKp/embedded/all/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><br></html><h2 id="æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•"><a href="#æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•" class="headerlink" title="æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•"></a>æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•</h2><p>å…³é”®ç‚¹</p><ol><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦</li><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ ä¸éœ€è¦è®¾ç½® padding</li><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„</li></ol><iframe width="100%" height="300" src="//jsrun.net/hYXKp/embedded/all/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><h4 id="æµ®åŠ¨å¸ƒå±€æ–¹æ³•"><a href="#æµ®åŠ¨å¸ƒå±€æ–¹æ³•" class="headerlink" title="æµ®åŠ¨å¸ƒå±€æ–¹æ³•-"></a>æµ®åŠ¨å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout float&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.float .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.float .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.float .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ®åŠ¨è§£å†³æ–¹æ¡ˆ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="table-cell-å¸ƒå±€æ–¹æ³•"><a href="#table-cell-å¸ƒå±€æ–¹æ³•" class="headerlink" title="table-cell å¸ƒå±€æ–¹æ³•-"></a>table-cell å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout table&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.table .left-mid-right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.layout</span><span class="selector-class">.table</span> <span class="selector-class">.left-mid-right</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table-cell;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.table .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.table .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.table .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexboxå¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="flex-å¸ƒå±€æ–¹æ³•"><a href="#flex-å¸ƒå±€æ–¹æ³•" class="headerlink" title="flex å¸ƒå±€æ–¹æ³•-"></a>flex å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout flexbox&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.flexbox &#123;</span><br><span class="line"><span class="css">      <span class="attribute">margin-top</span>: <span class="number">130px</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flexbox .left-mid-right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flexbox .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flexbox .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flexbox .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexboxå¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å®šä½å¸ƒå±€æ–¹æ³•"><a href="#å®šä½å¸ƒå±€æ–¹æ³•" class="headerlink" title="å®šä½å¸ƒå±€æ–¹æ³•-"></a>å®šä½å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout absolute&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.layout</span><span class="selector-class">.absolute</span> <span class="selector-class">.left-mid-right</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.absolute .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.absolute .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.absolute .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç»å¯¹å®šä½<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="grid-å¸ƒå±€æ–¹æ³•"><a href="#grid-å¸ƒå±€æ–¹æ³•" class="headerlink" title="grid å¸ƒå±€æ–¹æ³•-"></a>grid å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout grid&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.grid .left-mid-right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">      grid-template-rows: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">      grid-template-<span class="attribute">columns</span>: <span class="number">300px</span> auto <span class="number">300px</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.grid .left &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.grid .right &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.grid .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç½‘æ ¼å¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ‰©å±•é—®é¢˜"><a href="#æ‰©å±•é—®é¢˜" class="headerlink" title="æ‰©å±•é—®é¢˜"></a>æ‰©å±•é—®é¢˜</h4><ol><li>æ‰©å±•æ¯ä¸ªå¸ƒå±€çš„ä¼˜ç¼ºç‚¹<br>æµ®åŠ¨ï¼šè„±ç¦»æ–‡æ¡£æµï¼ˆå¿…é¡»æ¸…æµ®åŠ¨ï¼‰ ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ¯”è¾ƒå¥½<br>å®šä½ï¼šè„±ç¦»æ–‡æ¡£æµ ä½ åé¢çš„å­å…ƒç´ ä¹Ÿå¿…é¡»è„±ç¦»æ–‡æ¡£æµï¼Œæ•ˆæœæ¯”è¾ƒå·® ä¼˜ç‚¹ï¼šå¿«æ·ã€<br>flexï¼šcss3 ä¸­å‡ºç°è§£å†³ä¸Šè¿° 2 ç§å¸ƒå±€çš„ç¼ºç‚¹ï¼›<br>è¡¨æ ¼ï¼šä¼˜ç‚¹ï¼šåœ¨ä¸€å®šçš„åœºæ™¯ä¸‹å…¼å®¹æ€§è¿˜ä¸é”™ï¼Œç¼ºç‚¹å¦‚æœæŸä¸€åˆ—çš„é«˜åº¦å¢åŠ äº†åˆ™å…¶ä»– 2 åˆ—çš„é«˜åº¦ä¹Ÿä¼šåŒæ ·å¢åŠ <br>ç½‘æ ¼ï¼šæ–°æŠ€æœ¯ï¼Œç½‘æ ¼å¸ƒå±€ ä¼˜ç¼ºç‚¹. ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ grid</li><li>é«˜åº¦å»æ‰ä¹‹å å“ªä¸ªæ–¹æ¡ˆå°±ä¸é€‚ç”¨äº†<br>æµ®åŠ¨ x<br> æ‰©å±•ç‚¹ï¼š æµ®åŠ¨å¦‚ä½•æ¸…é™¤ BFC æ˜¯ä»€ä¹ˆ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190322132630.png"                      alt=""                ><br>å®šä½ x<br>flex âœ”ï¸<br>è¡¨æ ¼ âœ”ï¸<br>grid x</li><li>å…¼å®¹æ€§å“ªä¸ªæ¯”è¾ƒå¥½ï¼Œé¡¹ç›®ä¸­ç”¨å“ªä¸ªæœ€å¥½ï¼Ÿ</li></ol><blockquote><p>å†™é¡µé¢çš„æ—¶å€™è¿˜éœ€è¦æ³¨æ„è¯­ä¹‰åŒ–ï¼š<code>section</code> ç«  ï¼Œ<code>article</code> å®¹å™¨</p></blockquote><h2 id="ä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”"><a href="#ä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”" class="headerlink" title="ä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”"></a>ä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”</h2><p>å®šä½å¸ƒå±€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout abosult&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.abosult .top-mid-bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#14e014</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .layout.abosult .top &#123;</span><br><span class="line"><span class="css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .layout.abosult .bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .layout.abosult .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">top</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">bottom</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;top-mid-bottom&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å®šä½è§£å†³æ–¹æ¡ˆ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>flex å¸ƒå±€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout flex&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.flex .top-mid-bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#14e014</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flex .top &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flex .bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.flex .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;top-mid-bottom&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexè§£å†³æ–¹æ¡ˆ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>table å¸ƒå±€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;table-top-center-bottom&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line">    .table-top-center-bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .table-top &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table-row;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .table-center &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table-row;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#ff3c4a</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .table-bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: table-row;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#49a094</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-top&quot;</span>&gt;</span>ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-center&quot;</span>&gt;</span>table-å¸ƒå±€ -ä¸­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-bottom&quot;</span>&gt;</span>ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>grid å¸ƒå±€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout grid&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .layout.grid .top-mid-bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="css">      grid-template-row: <span class="number">300px</span> auto <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: <span class="number">#14e014</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .layout.grid .top &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.grid .bottom &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .layout.grid .mid &#123;</span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;top-mid-bottom&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexè§£å†³æ–¹æ¡ˆ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><h1 id="ã€Š50é“CSSåŸºç¡€é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰ã€‹ä¸­çš„ç­”æ¡ˆçœŸçš„å°±åªæ˜¯ç­”æ¡ˆå—ï¼Ÿ"><a href="#ã€Š50é“CSSåŸºç¡€é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰ã€‹ä¸­çš„ç­”æ¡ˆçœŸçš„å°±åªæ˜¯ç­”æ¡ˆå—ï¼Ÿ" class="headerlink" title="ã€Š50é“CSSåŸºç¡€é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰ã€‹ä¸­çš„ç­”æ¡ˆçœŸçš„å°±åªæ˜¯ç­”æ¡ˆå—ï¼Ÿ"></a><a class="link"   href="https://segmentfault.com/a/1190000013860482" >ã€Š50é“CSSåŸºç¡€é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰ã€‹ä¸­çš„ç­”æ¡ˆçœŸçš„å°±åªæ˜¯ç­”æ¡ˆå—ï¼Ÿ<i class="fas fa-external-link-alt"></i></a></h1>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker åˆä½“éªŒæ‰“é€ è¶…æºœçš„å‰ç«¯ç¯å¢ƒ</title>
      <link href="2019/12/31/Docker%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>2019/12/31/Docker%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“ä¸€ä¸‹æœ‰å¦‚ä¸‹é—®é¢˜ï¼š<br>æ‰‹åŠ¨éƒ¨ç½²æˆæœ¬å¤ªé«˜ï¼Œæ”¹é”™åˆ«å­—éƒ½å¾ˆéº»çƒ¦<br>ä¸€å°æœåŠ¡å™¨ç”±äºæ—¶é—´ç´¯ç§¯å¯¼è‡´ç¯å¢ƒå˜å¾—â€œè„ä¹±å·®â€<br>é‡è£…ç³»ç»Ÿæˆæœ¬å¤ªé«˜ï¼Œéš¾ä»¥è¿ç§»</p><a id="more"></a><p>è€Œ Dockerï¼Œæ­£æ˜¯æˆ‘è§£å†³æ‰€æœ‰é—®é¢˜ SCP-500 ä¸‡èƒ½è¯ï¼<br>é‚£ä¹ˆ Docker æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿ<br>é•œåƒä¸å®¹å™¨<br>Docker ä¸­æœ‰ä¸¤ä¸ªé‡è¦æ¦‚å¿µã€‚<br>ä¸€ä¸ªæ˜¯å®¹å™¨ï¼ˆContainerï¼‰ï¼šå®¹å™¨ç‰¹åˆ«åƒä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­è¿è¡Œç€ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å¯ä»¥åœ¨å®¹å™¨ä¸­è£… Nodejsï¼Œå¯ä»¥æ‰§è¡Œ npm installï¼Œå¯ä»¥åšä¸€åˆ‡ä½ å½“å‰æ“ä½œç³»ç»Ÿèƒ½åšçš„äº‹æƒ…<br>å¦ä¸€ä¸ªæ˜¯é•œåƒï¼ˆImageï¼‰ï¼šé•œåƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæ˜¯ç”¨æ¥åˆ›å»ºå®¹å™¨çš„ã€‚å¦‚æœä½ æœ‰è£…è¿‡ Windows æ“ä½œç³»ç»Ÿï¼Œé‚£ä¹ˆ Docker é•œåƒç‰¹åˆ«åƒâ€œWin7 çº¯å‡€ç‰ˆ.rarâ€æ–‡ä»¶<br>ä¸Šè¾¹å°±æ˜¯ä½ æ‰€éœ€è¦äº†è§£çš„ Docker å…¨éƒ¨åŸºç¡€çŸ¥è¯†ã€‚å°±è¿™ä¹ˆç®€å•<br>é¡ºä¾¿ä¸€æï¼Œåœ¨ Docker ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä½ å½“å‰ä½¿ç”¨çš„çœŸå®æ“ä½œç³»ç»Ÿä¸ºâ€œå®¿ä¸»æœºâ€(Host)</p><h2 id="å†™ä¸ª-vue-node-çš„æ¡ˆä¾‹å®æˆ˜ä¸‹"><a href="#å†™ä¸ª-vue-node-çš„æ¡ˆä¾‹å®æˆ˜ä¸‹" class="headerlink" title="å†™ä¸ª vue+node çš„æ¡ˆä¾‹å®æˆ˜ä¸‹"></a>å†™ä¸ª vue+node çš„æ¡ˆä¾‹å®æˆ˜ä¸‹</h2><p><strong>ç›®å½•ç»“æ„</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ vue_docker    <span class="comment">//vueé¡¹ç›®</span></span><br><span class="line">â”‚   â”œâ”€â”€ Dockerfile</span><br><span class="line">â”‚   â”œâ”€â”€ README.md</span><br><span class="line">â”‚   â”œâ”€â”€ babel.config.js</span><br><span class="line">â”‚   â”œâ”€â”€ dist</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ css</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ img</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.html</span><br><span class="line">â”‚   â”‚   â””â”€â”€ js</span><br><span class="line">â”‚   â”œâ”€â”€ docker-compose.debug.yml</span><br><span class="line">â”‚   â”œâ”€â”€ docker-compose.yml</span><br><span class="line">â”‚   â”œâ”€â”€ nginx             <span class="comment">//nginxé…ç½®ä¿¡æ¯</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ <span class="keyword">default</span>.conf</span><br><span class="line">â”‚   â”œâ”€â”€ package.json</span><br><span class="line">â”‚   â”œâ”€â”€ public</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.html</span><br><span class="line">â”‚   â”œâ”€â”€ src</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ assets</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ components</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ main.js</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ router</span><br><span class="line">â”‚   â”‚   â””â”€â”€ views</span><br><span class="line">â”‚   â””â”€â”€ yarn.lock</span><br><span class="line">â””â”€â”€ vue_docker_server   <span class="comment">//nodeé¡¹ç›®</span></span><br><span class="line">    â”œâ”€â”€ Dockerfile</span><br><span class="line">    â”œâ”€â”€ docker-compose.debug.yml</span><br><span class="line">    â”œâ”€â”€ docker-compose.yml</span><br><span class="line">    â”œâ”€â”€ package.json</span><br><span class="line">    â”œâ”€â”€ server.js</span><br><span class="line">    â”œâ”€â”€ test.txt</span><br><span class="line">    â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²-vue"><a href="#éƒ¨ç½²-vue" class="headerlink" title="éƒ¨ç½² vue"></a>éƒ¨ç½² vue</h3><p>è¿‡ç¨‹çœç•¥äº†å†™è¿‡ vue çš„éƒ½çŸ¥é“â€¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191231220957.png"                      alt=""                ></p><h3 id="éƒ¨ç½²-node"><a href="#éƒ¨ç½²-node" class="headerlink" title="éƒ¨ç½² node"></a>éƒ¨ç½² node</h3><p>åˆ›å»º server.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&quot;koa&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&quot;koa-router&quot;</span>)();</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&quot;koa-bodyparser&quot;</span>);</span><br><span class="line">app.use(bodyParser());</span><br><span class="line">app.use(router.routes());</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&quot;/&quot;</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.response.body = <span class="string">&quot;hello,word&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&quot;/api/json&quot;</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.body = &#123;</span><br><span class="line">    code: <span class="number">0</span>,</span><br><span class="line">    data: <span class="string">&quot;This is message from node container&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">8000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;http://localhost:8000&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="éƒ¨ç½²-nginx-config-é…ç½®æ–‡ä»¶"><a href="#éƒ¨ç½²-nginx-config-é…ç½®æ–‡ä»¶" class="headerlink" title="éƒ¨ç½² nginx config é…ç½®æ–‡ä»¶"></a>éƒ¨ç½² nginx config é…ç½®æ–‡ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·¯å¾„:/nginx/default.conf/</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    access_log  /<span class="keyword">var</span>/log/nginx/host.access.log  main;</span><br><span class="line">    error_log  /<span class="keyword">var</span>/log/nginx/error.log  error;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        # è¿™ä¸ªæ˜¯nginxçš„é»˜è®¤æ–‡ä»¶è·¯å¾„</span><br><span class="line">        # root   /usr/share/nginx/html;</span><br><span class="line">        # è‡ªå®šä¹‰çš„nginxæ˜¾ç¤ºè·¯å¾„</span><br><span class="line">        root   /home/web/app;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># ä»£ç†ä»¥ api ä¸ºå‰ç¼€çš„è¯·æ±‚</span><br><span class="line"> location ~^/api &#123;</span><br><span class="line">proxy_pass http:<span class="comment">//192.168.8.93:8000;</span></span><br><span class="line">proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    #error_page  <span class="number">404</span>              /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        # root   /usr/share/nginx/html;</span><br><span class="line">        root   /home/web/app;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="docker-äºŒç§å¯åŠ¨æ¨¡å¼"><a href="#docker-äºŒç§å¯åŠ¨æ¨¡å¼" class="headerlink" title="docker äºŒç§å¯åŠ¨æ¨¡å¼"></a>docker äºŒç§å¯åŠ¨æ¨¡å¼</h2><h3 id="Dockerfile-å¯åŠ¨"><a href="#Dockerfile-å¯åŠ¨" class="headerlink" title="Dockerfile å¯åŠ¨"></a>Dockerfile å¯åŠ¨</h3><p>åœ¨ vue é¡¹ç›®æ ¹ç›®å½•åˆ›å»º Dockerfile æ–‡ä»¶é…ç½®å¦‚ä¸‹</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">COPY</span> dist<span class="regexp">/ /u</span>sr<span class="regexp">/share/</span>nginx<span class="regexp">/html/</span></span><br><span class="line"><span class="keyword">COPY</span> nginx<span class="regexp">/default.conf /</span>etc<span class="regexp">/nginx/</span>conf.d/<span class="keyword">default</span>.conf</span><br></pre></td></tr></table></figure><ol><li>è‡ªå®šä¹‰æ„å»ºé•œåƒçš„æ—¶å€™åŸºäº<code>Dockerfile</code>æ¥æ„å»ºã€‚</li><li>FROM nginx å‘½ä»¤çš„æ„æ€è¯¥é•œåƒæ˜¯åŸºäº <code>nginx:latest</code> é•œåƒè€Œæ„å»ºçš„ã€‚</li><li>COPY dist/ /usr/share/nginx/html/ å‘½ä»¤çš„æ„æ€æ˜¯å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ /usr/share/nginx/html/ ç›®å½•ä¸‹ã€‚</li><li>COPY nginx/default.conf /etc/nginx/conf.d/default.conf å‘½ä»¤çš„æ„æ€æ˜¯å°† nginx ç›®å½•ä¸‹çš„ default.conf å¤åˆ¶åˆ° etc/nginx/conf.d/default.confï¼Œç”¨æœ¬åœ°çš„ default.conf é…ç½®æ¥æ›¿æ¢ nginx é•œåƒé‡Œçš„é»˜è®¤é…ç½®ã€‚</li></ol><p><strong>æ‰§è¡Œå‘½ä»¤</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t vuenginxcontainer .</span><br></pre></td></tr></table></figure><p><strong><code>-t</code> æ˜¯ç»™é•œåƒå‘½å <code>.</code>æ˜¯åŸºäºå½“å‰ç›®å½•çš„ Dockerfile æ¥æ„å»ºé•œåƒ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image ls | grep vuenginxcontainer</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤æ—¶æˆ‘ä»¬çš„ vue åº”ç”¨é•œåƒ vuenginxcontainer å·²ç»æˆåŠŸåˆ›å»ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŸºäºè¯¥é•œåƒå¯åŠ¨ä¸€ä¸ª docker å®¹å™¨ã€‚</p><p>åŸºäº vuenginxcontainer é•œåƒå¯åŠ¨å®¹å™¨ï¼Œè¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p <span class="number">3000</span>:<span class="number">80</span> \</span><br><span class="line">-d --name vueApp \</span><br><span class="line">vuenginxcontainer</span><br></pre></td></tr></table></figure><ol><li><code>docker run</code> åŸºäºé•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨</li><li><code>-p 3000:80</code> ç«¯å£æ˜ å°„ï¼Œå°†å®¿ä¸»çš„ 3000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£</li><li><code>-d</code> åå°æ–¹å¼è¿è¡Œ</li><li><code>--name</code> å®¹å™¨å æŸ¥çœ‹ docker è¿›ç¨‹</li></ol><p><code>docker ps</code>å¯ä»¥å‘ç°åä¸º vueApp çš„å®¹å™¨å·²ç»è¿è¡Œèµ·æ¥ã€‚æ­¤æ—¶è®¿é—® <a class="link"   href="http://localhost:3000" >http://localhost:3000<i class="fas fa-external-link-alt"></i></a> åº”è¯¥å°±èƒ½è®¿é—®åˆ°è¯¥ vue åº”ç”¨</p><h4 id="node-docker-éƒ¨ç½²"><a href="#node-docker-éƒ¨ç½²" class="headerlink" title="node_docker éƒ¨ç½²"></a>node_docker éƒ¨ç½²</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM node</span><br><span class="line"></span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line"></span><br><span class="line">COPY package*.json ./</span><br><span class="line"></span><br><span class="line">RUN npm install</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">EXPOSE <span class="number">8080</span></span><br><span class="line">CMD [ <span class="string">&quot;npm&quot;</span>, <span class="string">&quot;start&quot;</span> ]</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t nodewebserver .</span><br></pre></td></tr></table></figure><p><strong>å¯åŠ¨</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p <span class="number">5000</span>:<span class="number">8080</span> \</span><br><span class="line">-d --name nodeserver \</span><br><span class="line">nodewebserver</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200102132305.png"                      alt=""                ></p><h4 id="docker-compose-å¯åŠ¨"><a href="#docker-compose-å¯åŠ¨" class="headerlink" title="docker-compose å¯åŠ¨"></a>docker-compose å¯åŠ¨</h4><h5 id="vue-é¡¹ç›®-docker-compose-é…ç½®"><a href="#vue-é¡¹ç›®-docker-compose-é…ç½®" class="headerlink" title="vue é¡¹ç›® docker-compose é…ç½®"></a>vue é¡¹ç›® docker-compose é…ç½®</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;2&quot;</span></span><br><span class="line">services:</span><br><span class="line">  # æœåŠ¡åç§°</span><br><span class="line">  nginx:</span><br><span class="line">    # é•œåƒ:ç‰ˆæœ¬</span><br><span class="line">    image: nginx</span><br><span class="line">    # æ˜ å°„å®¹å™¨80ç«¯å£åˆ°æœ¬åœ°80ç«¯å£</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;3000:80&quot;</span></span><br><span class="line">    # æ•°æ®å· æ˜ å°„æœ¬åœ°æ–‡ä»¶åˆ°å®¹å™¨</span><br><span class="line">    volumes:</span><br><span class="line">      # æ˜ å°„nginx.confæ–‡ä»¶åˆ°å®¹å™¨çš„/etc/nginx/conf.dç›®å½•å¹¶è¦†ç›–default.confæ–‡ä»¶</span><br><span class="line">      - ./nginx/<span class="keyword">default</span>.conf:<span class="regexp">/etc/</span>nginx/conf.d/<span class="keyword">default</span>.conf</span><br><span class="line">      # æ˜ å°„buildæ–‡ä»¶å¤¹åˆ°å®¹å™¨çš„/usr/share/nginx/htmlæ–‡ä»¶å¤¹ä¸configä¸­çš„rootè·¯å¾„ä¸€è‡´</span><br><span class="line">      - ./dist:<span class="regexp">/home/</span>web/app</span><br><span class="line">    # è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</span><br><span class="line">    command: <span class="regexp">/bin/</span>bash -c <span class="string">&quot;nginx -g &#x27;daemon off;&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>å…³é—­</span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h4 id="node-é¡¹ç›®-docker-compose-é…ç½®"><a href="#node-é¡¹ç›®-docker-compose-é…ç½®" class="headerlink" title="node é¡¹ç›® docker-compose é…ç½®"></a>node é¡¹ç›® docker-compose é…ç½®</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    image: node:<span class="number">10.13</span>-alpine</span><br><span class="line">    user: node</span><br><span class="line">    working_dir: <span class="regexp">/home/</span>node/app</span><br><span class="line">    environment:</span><br><span class="line">      - PORT=<span class="number">8000</span></span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/home/node/app # å°†æœ¬åœ°ç›®å½•æ˜ å°„åˆ°å®¹å™¨å†…</span><br><span class="line">    command: [&quot;node&quot;, &quot;server.js&quot;] # è¿è¡Œå‘½ä»¤</span><br><span class="line">    ports:</span><br><span class="line">      - 8000:8000 # æœ¬åœ°ç«¯å£:å®¹å™¨ç«¯å£</span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>å…³é—­</span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h4 id="è·¨åŸŸè½¬å‘"><a href="#è·¨åŸŸè½¬å‘" class="headerlink" title="è·¨åŸŸè½¬å‘"></a>è·¨åŸŸè½¬å‘</h4><p>æƒ³è¦å°† vueApp å®¹å™¨ ä¸Šçš„è¯·æ±‚è½¬å‘åˆ° nodeserver å®¹å™¨ä¸Šã€‚é¦–å…ˆéœ€è¦çŸ¥é“ nodeserver å®¹å™¨çš„ ip åœ°å€å’Œç«¯å£ï¼Œç›®å‰å·²çŸ¥ nodeserver å®¹å™¨å†…éƒ¨æœåŠ¡ç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œè¿˜éœ€è¦çŸ¥é“ ip å³å¯ã€‚</p><p>å¦‚ä½•æŸ¥çœ‹å®¹å™¨åœ°å€?</p><p><code>docker inspect 02277acc3efc</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># ä»£ç†ä»¥ api ä¸ºå‰ç¼€çš„è¯·æ±‚</span><br><span class="line">  location ~^/api &#123;</span><br><span class="line">         proxy_pass http:<span class="comment">//192.168.8.93:8000;</span></span><br><span class="line">         proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">         proxy_set_header Host $http_host;</span><br><span class="line">         proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191231222101.png"                      alt=""                ></p><h2 id="docker-compose-yml-é…ç½®è¯¦è§£"><a href="#docker-compose-yml-é…ç½®è¯¦è§£" class="headerlink" title="docker-compose.yml é…ç½®è¯¦è§£"></a>docker-compose.yml é…ç½®è¯¦è§£</h2><p>æ¯ä¸ª docker-compose.yml å¿…é¡»å®šä¹‰ image æˆ–è€… build ä¸­çš„ä¸€ä¸ªï¼Œå…¶å®ƒçš„æ˜¯å¯é€‰çš„ã€‚</p><p>image<br>æŒ‡å®šé•œåƒ tag æˆ–è€… IDã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">image: redis æˆ–è€… node æˆ–è€… nginx</span><br><span class="line">image: ubuntu:<span class="number">14.04</span></span><br><span class="line">image: tutum/influxdb</span><br><span class="line">image: example-registry.com:<span class="number">4000</span>/postgresql</span><br><span class="line">image: a4bc65fd</span><br></pre></td></tr></table></figure><h3 id="è„šæœ¬æ‰§è¡Œ"><a href="#è„šæœ¬æ‰§è¡Œ" class="headerlink" title="è„šæœ¬æ‰§è¡Œ"></a>è„šæœ¬æ‰§è¡Œ</h3><p>å†…å®¹åªæ˜¯æŠŠä»¥ä¸Šå‘½ä»¤æ•´åˆåˆ°ä¸€èµ·æ‰§è¡Œï¼š</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤‡ä»½åŸä»£ç </span></span><br><span class="line">tar -zcvf gentle-vue.tar ./gentle-vue</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åŸä»£ç æ–‡ä»¶å¤¹</span></span><br><span class="line">rm -rf gentle-vue</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–ä»£ç </span></span><br><span class="line">git <span class="built_in">clone</span> https://gitee.com/FJ_WoMenDeShiJie/gentle-vue.git</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\nä»£ç æ‹‰å–\n\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´ node_modules</span></span><br><span class="line">cp ./node.tar ./gentle-vue</span><br><span class="line"></span><br><span class="line"><span class="comment"># build æ‰“åŒ… vue é¡¹ç›®ï¼Œç”Ÿæˆ dist æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">cd</span> ./gentle-vue</span><br><span class="line">tar -zxvf node.tar</span><br><span class="line">npm run build</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\nvueé¡¹ç›®æ‰“åŒ…å®Œæˆ\n\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åŸé•œåƒ</span></span><br><span class="line">docker rmi gentle-vue &amp;&gt; /dev/null</span><br><span class="line"><span class="built_in">echo</span>  -e <span class="string">&quot;\033[32m\nåˆ é™¤åŸé•œåƒæ–‡ä»¶\n\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´ dockerfile åˆ°å·¥ç¨‹ç›®å½•ä¸‹</span></span><br><span class="line">cp ../dockerfile ./</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºé•œåƒ</span></span><br><span class="line">docker build -t gentle-vue .</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\næ–°é•œåƒæ„å»ºæˆåŠŸ\n\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åŸå®¹å™¨</span></span><br><span class="line">docker rm -f gentle-vue</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker run -p 3000:80 -d --name gentle-vue gentle-vue</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\nå‰ç«¯å·¥ç¨‹éƒ¨ç½²å®Œæˆ\n\033[0m&quot;</span></span><br><span class="line">è¿™æ ·éƒ¨ç½²å°±æ–¹ä¾¿å¤šäº†ã€‚</span><br></pre></td></tr></table></figure><h2 id="Docker-çš„å¸¸ç”¨å‘½ä»¤"><a href="#Docker-çš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Docker çš„å¸¸ç”¨å‘½ä»¤"></a>Docker çš„å¸¸ç”¨å‘½ä»¤</h2><h3 id="é•œåƒå¸¸ç”¨å‘½ä»¤"><a href="#é•œåƒå¸¸ç”¨å‘½ä»¤" class="headerlink" title="é•œåƒå¸¸ç”¨å‘½ä»¤"></a>é•œåƒå¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker pull [é•œåƒåç§°:ç‰ˆæœ¬] æ‹‰å–é•œåƒ</span><br><span class="line">docker images  é•œåƒåˆ—è¡¨</span><br><span class="line">docker rmi [é•œåƒåç§°:ç‰ˆæœ¬] åˆ é™¤é•œåƒ</span><br><span class="line">docker history [é•œåƒåç§°] é•œåƒæ“ä½œè®°å½•</span><br><span class="line">docker tag [é•œåƒåç§°:ç‰ˆæœ¬][æ–°é•œåƒåç§°:æ–°ç‰ˆæœ¬]</span><br><span class="line">docker inspect [é•œåƒåç§°:ç‰ˆæœ¬] æŸ¥çœ‹é•œåƒè¯¦ç»†</span><br><span class="line">docker search [å…³é”®å­—] æœç´¢é•œåƒ</span><br><span class="line">docker login é•œåƒç™»é™†</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®¹å™¨å¸¸ç”¨å‘½ä»¤"><a href="#å®¹å™¨å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å¸¸ç”¨å‘½ä»¤"></a>å®¹å™¨å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a å®¹å™¨åˆ—è¡¨(æ‰€æœ‰å®¹å™¨)</span><br><span class="line">docker ps  æŸ¥çœ‹æ‰€æœ‰(è¿è¡Œçš„)å®¹å™¨</span><br><span class="line">docker exec -ti &lt;id&gt; bash  ä»¥ bash å‘½ä»¤è¿›å…¥å®¹å™¨å†…</span><br><span class="line">docker run -ti --name [å®¹å™¨åç§°][é•œåƒåç§°:ç‰ˆæœ¬] bash å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥</span><br><span class="line">docker logs æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span><br><span class="line">docker top &lt;container_id&gt; æŸ¥çœ‹å®¹å™¨æœ€è¿‘çš„ä¸€ä¸ªè¿›ç¨‹</span><br><span class="line">docker run -ti --name [å®¹å™¨åç§°] -p 8080:80 [é•œåƒåç§°:ç‰ˆæœ¬] bash  ç«¯å£æ˜ å°„</span><br><span class="line">docker rm &lt;container_id&gt; åˆ é™¤å®¹å™¨</span><br><span class="line">docker stop &lt;container_id&gt; åœæ­¢å®¹å™¨</span><br><span class="line">docker start &lt;container_id&gt; å¼€å¯å®¹å™¨</span><br><span class="line">docker restart &lt;container_id&gt; é‡å¯å®¹å™¨</span><br><span class="line">docker inspect &lt;container_id&gt; æŸ¥çœ‹å®¹å™¨è¯¦æƒ…</span><br><span class="line">docker commit [å®¹å™¨åç§°] my_image:v1.0  å®¹å™¨æäº¤ä¸ºæ–°çš„é•œåƒ</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://mp.weixin.qq.com/s/LCUFcIAfyiRmFPsYjyjYnQ" >å‰ç«¯å·¥ç¨‹å¸ˆå­¦ Docker ï¼Ÿ çœ‹è¿™ç¯‡å°±å¤Ÿäº†<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://mp.weixin.qq.com/s/AcjsHdg8ivgXN7FMA7jeYg" >Docker æ­å»ºä½ çš„ç¬¬ä¸€ä¸ª Node é¡¹ç›®åˆ°æœåŠ¡å™¨<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://github.com/axetroy/blog/issues/178" >Docker æ‰“é€ è¶…æºœçš„å‰ç«¯ç¯å¢ƒ<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://beginor.github.io/2017/06/08/use-compose-instead-of-run.html" >ä½¿ç”¨ docker-compose æ›¿ä»£ docker run<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://docs.docker.com/compose/compose-file/" >å®˜æ–¹æ–‡æ¡£<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°</title>
      <link href="2019/12/15/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>2019/12/15/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å•é¡µåº”ç”¨å¦‚æ­¤æµè¡Œçš„ä»Šå¤©ï¼Œæ›¾ç»ä»¤äººæƒŠå¹çš„å‰ç«¯è·¯ç”±å·²ç»æˆä¸ºå„å¤§æ¡†æ¶çš„åŸºç¡€æ ‡é…ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æä¾›äº†å¼ºå¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æƒ³è¦ææ‡‚è·¯ç”±å†…éƒ¨å®ç°è¿˜æ˜¯æœ‰äº›å›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœåªæƒ³äº†è§£è·¯ç”±å®ç°åŸºæœ¬åŸç†è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æœ¬æ–‡é’ˆå¯¹å‰ç«¯è·¯ç”±ä¸»æµçš„å®ç°æ–¹å¼ hash å’Œ historyï¼Œæä¾›äº†åŸç”Ÿ JS/React/Vue å…±è®¡å…­ä¸ªç‰ˆæœ¬ä¾›å‚è€ƒï¼Œæ¯ä¸ªç‰ˆæœ¬çš„å®ç°ä»£ç çº¦ 25~40 è¡Œå·¦å³ï¼ˆå«ç©ºè¡Œï¼‰ã€‚</p></blockquote><a id="more"></a><h2 id="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ</h2><p>è·¯ç”±çš„æ¦‚å¿µæ¥æºäºæœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯ä¸­è·¯ç”±æè¿°çš„æ˜¯ URL ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„<code>æ˜ å°„å…³ç³»</code>ã€‚</p><p>åœ¨ Web å‰ç«¯å•é¡µåº”ç”¨ SPA(Single Page Application)ä¸­ï¼Œè·¯ç”±æè¿°çš„æ˜¯ URL ä¸ UI ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè¿™ç§æ˜ å°„æ˜¯å•å‘çš„ï¼Œå³ URL å˜åŒ–å¼•èµ· UI æ›´æ–°ï¼ˆæ— éœ€åˆ·æ–°é¡µé¢ï¼‰ã€‚</p><h2 id="å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿ"><a href="#å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿ"></a>å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿ</h2><h3 id="è¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒï¼š"><a href="#è¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒï¼š" class="headerlink" title="è¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒï¼š"></a>è¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒï¼š</h3><ol><li><p>â­ å¦‚ä½•æ”¹å˜ URL å´ä¸å¼•èµ·é¡µé¢åˆ·æ–°ï¼Ÿ</p></li><li><p>â­ å¦‚ä½•æ£€æµ‹ URL å˜åŒ–äº†ï¼Ÿ</p></li></ol><p>ä¸‹é¢åˆ†åˆ«ä½¿ç”¨ hash å’Œ history ä¸¤ç§å®ç°æ–¹å¼å›ç­”ä¸Šé¢çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚</p><h4 id="hash-å®ç°"><a href="#hash-å®ç°" class="headerlink" title="hash å®ç°"></a>hash å®ç°</h4><p>hash æ˜¯ URL ä¸­ hash (#) åŠåé¢çš„é‚£éƒ¨åˆ†ï¼Œå¸¸ç”¨ä½œé”šç‚¹åœ¨é¡µé¢å†…è¿›è¡Œå¯¼èˆªï¼Œæ”¹å˜ URL ä¸­çš„ <code>hash</code> éƒ¨åˆ†<code>ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°</code><br><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191121170151.png"                      alt=""                ><br>é€šè¿‡ <code>hashchange</code> äº‹ä»¶ç›‘å¬ URL çš„å˜åŒ–ï¼Œæ”¹å˜ URL çš„æ–¹å¼åªæœ‰è¿™å‡ ç§ï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URLã€é€šè¿‡<a/>æ ‡ç­¾æ”¹å˜ URLã€é€šè¿‡ window.location æ”¹å˜ URLï¼Œè¿™å‡ ç§æƒ…å†µæ”¹å˜ URL éƒ½ä¼šè§¦å‘ hashchange äº‹ä»¶</p><h4 id="history-å®ç°"><a href="#history-å®ç°" class="headerlink" title="history å®ç°"></a>history å®ç°</h4><p>history æä¾›äº† <code>pushState</code> å’Œ <code>replaceState</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ”¹å˜ URL çš„ path éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°</p><p>history æä¾›ç±»ä¼¼ hashchange äº‹ä»¶çš„ popstate äº‹ä»¶ï¼Œä½† <code>popstate</code> äº‹ä»¶æœ‰äº›ä¸åŒï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URL æ—¶ä¼šè§¦å‘ popstate äº‹ä»¶ï¼Œé€šè¿‡ pushState/replaceState æˆ–<a/>æ ‡ç­¾æ”¹å˜ URL ä¸ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚å¥½åœ¨æˆ‘ä»¬å¯ä»¥<strong>æ‹¦æˆª pushState/replaceState çš„è°ƒç”¨</strong>å’Œ<a/>æ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶æ¥æ£€æµ‹ URL å˜åŒ–ï¼Œæ‰€ä»¥ç›‘å¬ URL å˜åŒ–å¯ä»¥å®ç°ï¼Œåªæ˜¯æ²¡æœ‰ hashchange é‚£ä¹ˆæ–¹ä¾¿ã€‚</p><h3 id="åŸç”Ÿ-JS-ç‰ˆå‰ç«¯è·¯ç”±å®ç°"><a href="#åŸç”Ÿ-JS-ç‰ˆå‰ç«¯è·¯ç”±å®ç°" class="headerlink" title="åŸç”Ÿ JS ç‰ˆå‰ç«¯è·¯ç”±å®ç°"></a>åŸç”Ÿ JS ç‰ˆå‰ç«¯è·¯ç”±å®ç°</h3><h4 id="åŸºäº-hash-å®ç°"><a href="#åŸºäº-hash-å®ç°" class="headerlink" title="åŸºäº hash å®ç°"></a>åŸºäº hash å®ç°</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191121170422.png"                      alt=""                ></p><p>HTML éƒ¨åˆ†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰è·¯ç”± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;routeView&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>JavaScript éƒ¨åˆ†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;DOMContentLoaded&quot;</span>, onLoad);</span><br><span class="line"><span class="comment">// ç›‘å¬è·¯ç”±å˜åŒ–</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;hashchange&quot;</span>, onHashChange);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±è§†å›¾</span></span><br><span class="line"><span class="keyword">let</span> routerView = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onLoad</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  routerView = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#routeView&quot;</span>);</span><br><span class="line">  onHashChange();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onHashChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;location.hash&quot;</span>, location.hash);</span><br><span class="line">  <span class="keyword">switch</span> (location.hash) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;#/home&quot;</span>:</span><br><span class="line">      routerView.innerHTML = <span class="string">&quot;Home&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;#/about&quot;</span>:</span><br><span class="line">      routerView.innerHTML = <span class="string">&quot;About&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¥å……:</strong></p><blockquote><p>DOMContentLoaded é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•ã€‚é‚£ä»€ä¹ˆæ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•å‘¢ï¼Ÿæˆ‘ä»¬ä»æ‰“å¼€ä¸€ä¸ªç½‘é¡µè¯´èµ·ã€‚å½“è¾“å…¥ä¸€ä¸ª URLï¼Œé¡µé¢çš„å±•ç¤ºé¦–å…ˆæ˜¯ç©ºç™½çš„ï¼Œç„¶åè¿‡ä¸€ä¼šï¼Œé¡µé¢ä¼šå±•ç¤ºå‡ºå†…å®¹ï¼Œä½†æ˜¯é¡µé¢çš„æœ‰äº›èµ„æºæ¯”å¦‚è¯´å›¾ç‰‡èµ„æºè¿˜æ— æ³•çœ‹åˆ°ï¼Œæ­¤æ—¶é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸çš„äº¤äº’ï¼Œè¿‡ä¸€æ®µæ—¶é—´åï¼Œå›¾ç‰‡æ‰å®Œæˆæ˜¾ç¤ºåœ¨é¡µé¢ã€‚ä»é¡µé¢ç©ºç™½åˆ°å±•ç¤ºå‡ºé¡µé¢å†…å®¹ï¼Œä¼šè§¦å‘ DOMContentLoaded äº‹ä»¶ã€‚è€Œè¿™æ®µæ—¶é—´å°±æ˜¯ HTML æ–‡æ¡£è¢«åŠ è½½å’Œè§£æå®Œæˆã€‚<br>å‚è€ƒ<br><a class="link"   href="https://www.cnblogs.com/caizhenbo/p/6679478.html" >DOMContentLoaded ä¸ load çš„åŒºåˆ«<i class="fas fa-external-link-alt"></i></a></p></blockquote><h4 id="åŸºäº-history-å®ç°"><a href="#åŸºäº-history-å®ç°" class="headerlink" title="åŸºäº history å®ç°"></a>åŸºäº history å®ç°</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191121173104.png"                      alt=""                ></p><p>html éƒ¨åˆ†:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;routeView&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js éƒ¨åˆ†:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;DOMContentLoaded&quot;</span>, onLoad);</span><br><span class="line"><span class="comment">// ç›‘å¬è·¯ç”±å˜åŒ–</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;popstate&quot;</span>, onPopState);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±è§†å›¾</span></span><br><span class="line"><span class="keyword">var</span> routerView = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onLoad</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  routerView = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#routeView&quot;</span>);</span><br><span class="line">  onPopState();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸæ‹¦æˆª &lt;a/&gt; æ ‡ç­¾ç‚¹å‡»äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼Œ ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UIï¼Œä»è€Œå®ç°ç‚¹å‡»é“¾æ¥æ›´æ–° URL å’Œ UI çš„æ•ˆæœã€‚</span></span><br><span class="line">  <span class="keyword">var</span> linkList = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;a[href]&quot;</span>);</span><br><span class="line">  linkList.forEach(<span class="function"><span class="params">el</span> =&gt;</span></span><br><span class="line">    el.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//é˜»æ­¢é»˜è®¤äº‹ä»¶</span></span><br><span class="line">      e.preventDefault();</span><br><span class="line">      <span class="comment">//historyç³»ç»Ÿè‡ªå¸¦å±æ€§</span></span><br><span class="line">      history.pushState(<span class="string">&quot;è¿™é‡Œæ˜¯å¦å¯ä»¥æ·»åŠ stateçŠ¶æ€&quot;</span>, <span class="string">&quot;&quot;</span>, el.getAttribute(<span class="string">&quot;href&quot;</span>));</span><br><span class="line">      <span class="comment">//el.getAttribute(&#x27;href&#x27;) ---&gt;  ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UI/home æˆ–è€… /about</span></span><br><span class="line">      onPopState();</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onPopState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;location.pathname&quot;</span>, location.pathname); <span class="comment">// location.pathname /home</span></span><br><span class="line">  <span class="keyword">switch</span> (location.pathname) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;/home&quot;</span>:</span><br><span class="line">      routerView.innerHTML = <span class="string">&quot;Home&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;/about&quot;</span>:</span><br><span class="line">      routerView.innerHTML = <span class="string">&quot;About&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191121174354.png"                      alt=""                ></p><h3 id="React-ç‰ˆå‰ç«¯è·¯ç”±å®ç°"><a href="#React-ç‰ˆå‰ç«¯è·¯ç”±å®ç°" class="headerlink" title="React ç‰ˆå‰ç«¯è·¯ç”±å®ç°"></a>React ç‰ˆå‰ç«¯è·¯ç”±å®ç°</h3><h4 id="åŸºäº-hash-å®ç°-1"><a href="#åŸºäº-hash-å®ç°-1" class="headerlink" title="åŸºäº hash å®ç°"></a>åŸºäº hash å®ç°</h4><p>html éƒ¨åˆ†:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">render</span>=<span class="string">&#123;()</span> =&gt;</span> <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>&#125; /&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">render</span>=<span class="string">&#123;()</span> =&gt;</span> <span class="tag">&lt;<span class="name">h2</span>&gt;</span>About<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>&#125; /&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js éƒ¨åˆ†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BrowserRouter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    currentPath: utils.extractHashPath(<span class="built_in">window</span>.location.href)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  onHashChange = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentPath = utils.extractHashPath(e.newURL);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onHashChange:&quot;</span>, currentPath);</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; currentPath &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;hashchange&quot;</span>, <span class="built_in">this</span>.onHashChange);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&quot;hashchange&quot;</span>, <span class="built_in">this</span>.onHashChange);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// window.location.href  http://localhost:3000/#/home</span></span><br><span class="line">    <span class="comment">//onPopState  undefined</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouteContext.Provider value=&#123;&#123; <span class="attr">currentPath</span>: <span class="built_in">this</span>.state.currentPath &#125;&#125;&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.children&#125;</span><br><span class="line">      &lt;/RouteContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Route-å®ç°"><a href="#Route-å®ç°" class="headerlink" title="Route å®ç°"></a>Route å®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; path, render &#125;) =&gt; (</span><br><span class="line">  &lt;RouteContext.Consumer&gt;&#123;<span class="function">(<span class="params">&#123; currentPath &#125;</span>) =&gt;</span> currentPath === path &amp;&amp; render()&#125;&lt;/RouteContext.Consumer&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="Link-å®ç°"><a href="#Link-å®ç°" class="headerlink" title="Link å®ç°"></a>Link å®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; to, ...props &#125;) =&gt; <span class="xml"><span class="tag">&lt;<span class="name">a</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">href</span>=<span class="string">&#123;</span>&quot;#&quot; + <span class="attr">to</span>&#125; /&gt;</span></span>;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/Users/lovewcc/Documents/02_Project/04_åšå®¢/source/_posts/20191121185918.png"                      alt=""                ></p><h3 id="åŸºäº-history-å®ç°-1"><a href="#åŸºäº-history-å®ç°-1" class="headerlink" title="åŸºäº history å®ç°"></a>åŸºäº history å®ç°</h3><p>ä½¿ç”¨æ–¹å¼å’Œ react-router ç±»ä¼¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;HistoryRouter&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;Link to=<span class="string">&quot;/home&quot;</span>&gt;home&lt;/Link&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;Link to=<span class="string">&quot;/about&quot;</span>&gt;about&lt;/Link&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Route path=<span class="string">&quot;/home&quot;</span> render=&#123;<span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>&#125; /&gt;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/about&quot;</span> render=&#123;<span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>About<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>&#125; /&gt;</span><br><span class="line">&lt;/HistoryRouter&gt;</span><br></pre></td></tr></table></figure><h4 id="HistoryRouter-å®ç°"><a href="#HistoryRouter-å®ç°" class="headerlink" title="HistoryRouter å®ç°"></a>HistoryRouter å®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HistoryRouter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    currentPath: utils.extractUrlPath(<span class="built_in">window</span>.location.href)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  onPopState = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentPath = utils.extractUrlPath(<span class="built_in">window</span>.location.href);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onPopState:&quot;</span>, currentPath);</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; currentPath &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;popstate&quot;</span>, <span class="built_in">this</span>.onPopState);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&quot;popstate&quot;</span>, <span class="built_in">this</span>.onPopState);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouteContext.Provider value=&#123;&#123; <span class="attr">currentPath</span>: <span class="built_in">this</span>.state.currentPath, <span class="attr">onPopState</span>: <span class="built_in">this</span>.onPopState &#125;&#125;&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.children&#125;</span><br><span class="line">      &lt;/RouteContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Route-å®ç°-1"><a href="#Route-å®ç°-1" class="headerlink" title="Route å®ç°"></a>Route å®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; path, render &#125;) =&gt; (</span><br><span class="line">  &lt;RouteContext.Consumer&gt;&#123;<span class="function">(<span class="params">&#123; currentPath &#125;</span>) =&gt;</span> currentPath === path &amp;&amp; render()&#125;&lt;/RouteContext.Consumer&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="Link-å®ç°-åŒºåˆ«åœ¨è¿™é‡Œ"><a href="#Link-å®ç°-åŒºåˆ«åœ¨è¿™é‡Œ" class="headerlink" title="Link å®ç° (åŒºåˆ«åœ¨è¿™é‡Œ)"></a>Link å®ç° (åŒºåˆ«åœ¨è¿™é‡Œ)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; to, ...props &#125;) =&gt; (</span><br><span class="line">  &lt;RouteContext.Consumer&gt;</span><br><span class="line">    &#123;<span class="function">(<span class="params">&#123; onPopState &#125;</span>) =&gt;</span> (</span><br><span class="line">      &lt;a</span><br><span class="line">        href=<span class="string">&quot;&quot;</span></span><br><span class="line">        &#123;...props&#125;</span><br><span class="line">        onClick=&#123;<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//é˜»æ­¢é»˜è®¤äº‹ä»¶</span></span><br><span class="line">          e.preventDefault();</span><br><span class="line">          <span class="comment">//æ”¹å˜æµè§ˆå™¨çš„è·¯å¾„</span></span><br><span class="line">          <span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="string">&quot;&quot;</span>, to);</span><br><span class="line">          onPopState();</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">  &lt;/RouteContext.Consumer&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒå®ç°åŸç†å¾ˆç®€å•ï¼Œä½†æ˜¯ç»“åˆå…·ä½“æ¡†æ¶åï¼Œæ¡†æ¶å¢åŠ äº†å¾ˆå¤šç‰¹æ€§ï¼Œå¦‚åŠ¨æ€è·¯ç”±ã€è·¯ç”±å‚æ•°ã€è·¯ç”±åŠ¨ç”»ç­‰ç­‰ï¼Œè¿™äº›å¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æœ¬æ–‡å»ç²—å–ç²¾åªé’ˆå¯¹å‰ç«¯è·¯ç”±æœ€æ ¸å¿ƒéƒ¨åˆ†çš„å®ç°è¿›è¡Œåˆ†æï¼Œå¹¶åŸºäº hash å’Œ history ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«æä¾›åŸç”Ÿ JS/React ä¸‰ç§å®ç°ï¼Œå…±è®¡å››ä¸ªå®ç°ç‰ˆæœ¬ä¾›å‚è€ƒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[ã€ç¬¬ 1611 æœŸã€‘å‰ç«¯è·¯ç”±åŸç†è§£æ](</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reduxæºç æ¢ç´¢-applyMiddleware</title>
      <link href="2019/12/03/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-applyMiddleware/"/>
      <url>2019/12/03/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-applyMiddleware/</url>
      
        <content type="html"><![CDATA[<p>é¡¾åæ€ä¹‰ï¼ŒapplyMiddleware å°±æ˜¯ä¸­é—´ä»¶çš„æ„æ€ã€‚applyMiddleware æ¥æ”¶ä¸­é—´ä»¶ä¸ºå‚æ•°ï¼Œå¹¶<code>è¿”å›</code>ä¸€ä¸ªä»¥<code>createStoreä¸ºå‚æ•°çš„å‡½æ•°</code>ï¼›</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/ applyMiddleware.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> store = createStore(...args)</span><br><span class="line">    <span class="keyword">let</span> dispatch = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">        <span class="string">&#x27;Dispatching while constructing your middleware is not allowed. &#x27;</span> +</span><br><span class="line">          <span class="string">&#x27;Other middleware would not be applied to this dispatch.&#x27;</span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> middlewareAPI = &#123;</span><br><span class="line">      getState: store.getState,</span><br><span class="line">      dispatch: <span class="function">(<span class="params">...args</span>) =&gt;</span> dispatch(...args)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// middlewareAPI ä½œä¸ºå‚æ•°æ‰§è¡Œä¸€éæ‰€æœ‰çš„ä¸­é—´ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class="line">    <span class="comment">// æ ¹æ® compose ç”Ÿäº§çš„å…¶å®æ˜¯ç±»ä¼¼ mid1(mid2(mid3(store.dispatch)))</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥åœ¨æ•°ç»„æœ€åçš„ middleware å…¶å®æ˜¯ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„</span></span><br><span class="line">    dispatch = compose(...chain)(store.dispatch)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...store,</span><br><span class="line">      dispatch</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¦ç»“åˆå®é™…çš„ä¸­é—´ä»¶æ¥ç†è§£ï¼Œä¸‹é¢æ˜¯ <code>logger</code> ä¸­é—´ä»¶çš„ç¤ºä¾‹ä»£ç :</p><ol><li>å¯ä»¥çœ‹åˆ°ä¸­é—´ä»¶ logger å…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸º dispatch å’Œ getStateï¼Œè¿™ä¸ªå¯¹åº”ä¸Šé¢çš„ <code>middlewareAPI</code>.</li><li>middleware(middlewareAPI) æ‰§è¡Œåå¾—åˆ°çš„è¿˜æ˜¯ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ nextï¼Œçœ‹ä¸Šé¢çš„ compose, è¿™ä¸ª next å…¶å®å°±æ˜¯ store.dispatchï¼Œè¿”å›çš„æ˜¯æ–°çš„ dispatch.</li><li>å‡å¦‚æ˜¯ newDispatch,æ ¹æ®ä¸Šé¢çš„ composeï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ª newDispatch æ˜¯ä½œä¸ºä¸­é—´ä»¶é“¾çš„ä¸‹ä¸€ä¸ª middleware çš„å‚æ•°å€¼ï¼ˆå°±æ˜¯ nextï¼‰è¿™æ ·ä¸€ç¯æ‰£ä¸€ç¯ï¼Œå¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„ dispatch</li><li>åœ¨å®é™…è°ƒç”¨æœ€ç»ˆçš„ dispatch æ—¶ï¼Œä½ ä¼šå‘ç°ï¼Œmiddleware çš„æ‰§è¡Œé¡ºåºåˆå˜æˆæ˜¯ä»å·¦å¾€å³äº†ï¼ˆå› ä¸ºæœ€ç»ˆè¿”å›çš„ dispatch æ˜¯ç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„å‡½æ•°ï¼‰</li><li>æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ° next(action)ï¼Œè¿™æ—¶å€™å…¶å®å°±æ˜¯å³è¾¹ä¸€ä¸ª middleware çš„è¿”å›çš„ dispatchï¼Œæ§åˆ¶æƒå°±è½¬åˆ°è¿™ä¸ª middleware äº†ï¼Œ</li><li>è¿™æ ·æ‰§è¡Œåˆ°æœ€åï¼Œæ§åˆ¶æƒè¿”å›ï¼Œå†æ‰§è¡Œ next åé¢çš„ä»£ç </li><li>æœ€ç»ˆå°±æ˜¯å½¢æˆäº†ä¸­é—´ä»¶çš„æ´‹è‘±æ¨¡å‹ï¼Œçœ‹ä¸‹é¢çš„ç¤ºæ„å›¾</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logger ä¸­é—´ä»¶çš„ç¤ºä¾‹ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> logger = <span class="function">(<span class="params">&#123; getState, dispatch &#125;</span>) =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;dispatching&quot;</span>, action);</span><br><span class="line">  <span class="keyword">let</span> result = next(action);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;next state&quot;</span>, store.getState());</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ´‹è‘±æ¨¡å‹ç¤ºæ„å›¾</span></span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">|   mid21                                                     |</span><br><span class="line">|         +---------------------------------------------+     |</span><br><span class="line">|         | mid2    +-----------------------------+     |     |</span><br><span class="line">|         |         | mid2   +-------------+      |     |     |</span><br><span class="line">|         |         |        |             |      |     |     |</span><br><span class="line">-&gt; next() -&gt; next() -&gt;next() -&gt; dispatch() -&gt;    -&gt;    -&gt;    -&gt;</span><br><span class="line">|         |         |        |             |      |     |     |</span><br><span class="line">|         |         |        +-------------+      |     |     |</span><br><span class="line">|         |         +-----------------------------+     |     |</span><br><span class="line">|         +---------------------------------------------+     |</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚è¿™ä¸ª logger ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºä¼šæ˜¯ æ‰“å° dispatching -&gt; ç­‰å¾… next æ‰§è¡Œè¿”å› -&gt; æ‰“å° next state</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ç†Ÿæ‚‰ redux çš„æºç ï¼Œæˆ‘ä»¬ä¹Ÿå¯¹ redux çš„ä»£ç ç»“æ„æœ¬èº«æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ redux çš„æ•´ä¸ªå·¥ä½œæµç¨‹ï¼š</p><ol><li>è®¾è®¡å…¨å±€ state çš„æ•°æ®ç»“æ„çŠ¶æ€æ ‘</li><li>è®¾è®¡æ›´æ”¹ state æ•°æ®ã€çŠ¶æ€çš„ actionType å¸¸é‡</li><li>æ ¹æ® actionTypeï¼Œç¼–å†™ actionCreator</li><li>æ ¹æ®å„ä¸ª actionCreator çš„è¿”å›å€¼ï¼Œç”¨ reducer åšæ•°æ®å¤„ç†</li><li>æœ‰ä¸ª reducer ä¹‹åï¼Œæˆ‘ä»¬ç”¨ createStore æ¥å¾—åˆ°å…¨å±€å”¯ä¸€çš„ storeï¼Œæ¥ç®¡ç† state</li><li>ç”¨ bindActionCreator å‡½æ•°å°† actionCreator å’Œ store.dispatch ç»‘å®šèµ·æ¥ï¼Œå¾—åˆ°ä¸€ç»„èƒ½æ›´æ”¹ state çš„å‡½æ•°</li><li>åˆ†å‘ä½¿ç”¨å„ä¸ªçŠ¶æ€ä¿®æ”¹å‡½æ•°ï¼ˆdispatchï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reduxæºç æ¢ç´¢-bindActionCreators</title>
      <link href="2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-bindActionCreators/"/>
      <url>2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-bindActionCreators/</url>
      
        <content type="html"><![CDATA[<p>bindActionCreators çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å°† actionCreator å’Œ dispatch è”ç»“åœ¨ä¸€èµ·ã€‚</p><a id="more"></a><p>å¯¹äºå¤šä¸ª actionCreatorï¼Œæˆ‘ä»¬å¯ä»¥åƒ reducers ä¸€æ ·ï¼Œç»„ç»‡æˆä¸€ä¸ª key/action çš„ç»„åˆã€‚ç”±äºå¾ˆå¤šæƒ…å†µä¸‹ï¼Œaction æ˜¯ actionCreator è¿”å›çš„ï¼Œå®é™…ä¸Šè¦è¿™æ ·è°ƒç”¨ <code>store.dispatch(actionCreator(...args))</code>ï¼Œå¾ˆéº»çƒ¦æ˜¯å§ï¼Ÿåªèƒ½å†å°è£…ä¸€å±‚å‘—ï¼Œè¿™å°±æ˜¯å‡½æ•°å¼æ€æƒ³çš„ä½“ç°ï¼Œé€šè¿‡åå¤ç»„åˆï¼Œå°†åµŒå¥—å‡½æ•°åˆ†ç¦»ã€‚ï¼ˆåœ¨è¿™é‡Œï¼Œæˆ‘ä¸å¾—ä¸å†å¤¸ä¸€æ¬¡ redux çš„ä½œè€…ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bindActionCreators.js éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•çš„åšç”¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å†™çš„è°ƒç”¨æ–¹æ³•ï¼Œæ–¹ä¾¿ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// ç»“æœå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°: `dispatch(actionCreator(xxx))`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dispatch(actionCreator.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="compose-js"><a href="#compose-js" class="headerlink" title="compose.js"></a>compose.js</h4><p>compose çš„ä»£ç ä¸éš¾ç†è§£ï¼Œå®ƒè°ƒç”¨äº† ES5 çš„ Array.prototype.reduce æ–¹æ³•ï¼Œå°†å½¢å¦‚ fn(arg1)(arg2)(arg3)â€¦çš„æŸ¯é‡ŒåŒ–å‡½æ•°æŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...funcs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> a(b(...args)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reduxæºç æ¢ç´¢-combineReducers</title>
      <link href="2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-combineReducers/"/>
      <url>2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-combineReducers/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªå‡½æ•°å¯ä»¥ç»„åˆä¸€ç»„ reducersï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ reducerã€‚</p><a id="more"></a><p>ç”±äº redux åªç»´æŠ¤<code>å”¯ä¸€</code>çš„ stateï¼Œéšç€æ•´ä¸ªé¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œstate çŠ¶æ€æ ‘ä¹Ÿä¼šè¶Šæ¥è¶Šåºå¤§ï¼Œstate çš„å±‚çº§ä¹Ÿä¼šè¶Šæ¥è¶Šæ·±ï¼Œå½“æŸä¸ª action.type æ‰€å¯¹åº”çš„ case åªæ˜¯è¦ä¿®æ”¹ state.a.b.c.d.e.f è¿™ä¸ªå±æ€§æ—¶ï¼Œæˆ‘çš„ handleCase å‡½æ•°å†™èµ·æ¥å°±éå¸¸éš¾çœ‹ï¼Œæˆ‘<code>å¿…é¡»</code>åœ¨è¿™ä¸ªå‡½æ•°çš„å¤´éƒ¨éªŒè¯ <code>state å¯¹è±¡æœ‰æ²¡æœ‰é‚£ä¸ªå±æ€§</code>ã€‚è¿™æ˜¯è®©å¼€å‘è€…éå¸¸å¤´ç–¼çš„ä¸€ä»¶äº‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªåˆå¹¶åçš„ reducer å‡½æ•°, state é»˜è®¤å€¼ä¸ºç©ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (shapeAssertionError) &#123;</span><br><span class="line">    <span class="keyword">throw</span> shapeAssertionError;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//.....</span></span><br><span class="line">  <span class="keyword">let</span> hasChanged = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">const</span> nextState = &#123;&#125;;</span><br><span class="line">  <span class="comment">// å¾ªç¯æ‰§è¡Œ reducerï¼Œè¿™éƒ¨åˆ†å†™çš„å¾ˆæ¸…æ™°</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = finalReducerKeys[i];</span><br><span class="line">    <span class="keyword">const</span> reducer = finalReducers[key];</span><br><span class="line">    <span class="keyword">const</span> previousStateForKey = state[key];</span><br><span class="line">    <span class="keyword">const</span> nextStateForKey = reducer(previousStateForKey, action);</span><br><span class="line">    <span class="comment">// è¿™é‡ŒéªŒè¯æ˜¯å¦ä¼šæ²¡æœ‰ state è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> nextStateForKey === <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> errorMessage = getUndefinedStateErrorMessage(key, action);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(errorMessage);</span><br><span class="line">    &#125;</span><br><span class="line">    nextState[key] = nextStateForKey;</span><br><span class="line">    hasChanged = hasChanged || nextStateForKey !== previousStateForKey;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// state æœ‰æ”¹å˜è¿”å›ä¸‹ä¸€ä¸ª stateï¼Œå¦åˆ™è¿”å›åŸæ¥çš„ state</span></span><br><span class="line">  <span class="keyword">return</span> hasChanged ? nextState : state;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>combineReducers</code>å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œå®ƒéå†ä¼ å…¥çš„ reducersï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ reducerï¼Œè¿™ä¸ªæ–°å¯¹è±¡çš„ key è·Ÿä¼ å…¥çš„ reducers ä¸€æ ·ï¼Œå®ƒçš„ value åˆ™æ˜¯ä¼ å…¥çš„ reducers çš„ä¸åŒ key å¯¹åº”çš„ value å±•å¼€çš„{ key: value }ã€‚è²Œä¼¼è®²çš„æœ‰ç‚¹ç»•å•Š~ï¼Œä¸¾ä¸ªä¾‹å­å¥½è®²æ˜ç™½ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reducers = &#123;</span><br><span class="line">    todos: (state, action) &#123; <span class="comment">// æ­¤å¤„çš„ state å‚æ•°æ˜¯å…¨å±€ state.todoså±æ€§</span></span><br><span class="line">        <span class="keyword">switch</span> (action.type) &#123;...&#125; <span class="comment">// è¿”å›çš„ new state æ›´æ–°åˆ°å…¨å±€ state.todos å±æ€§ä¸­</span></span><br><span class="line">    &#125;,</span><br><span class="line">    activeFilter: (state, action) &#123; <span class="comment">// æ‹¿åˆ° state.activeFilter ä½œä¸ºæ­¤å¤„çš„ state</span></span><br><span class="line">        <span class="keyword">switch</span> (action.type) &#123;...&#125; <span class="comment">// new state æ›´æ–°åˆ°å…¨å±€ state.activeFilter å±æ€§ä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> rootReducer = combineReducers(reducers)</span><br></pre></td></tr></table></figure><p><strong>ä¸è¶³</strong><br><code>combineReducers</code>æ˜¯æœ‰ç¼ºé™·çš„ï¼Œæºç ä¸­ mapValues åªæ˜¯ä¸€çº§æ·±åº¦çš„æ˜ å°„ï¼Œç›®å‰ redux å¹¶æ²¡æœ‰æä¾›ç®€ä¾¿çš„æ˜ å°„åˆ° state.a.b ä¸€çº§ä»¥ä¸Šæ·±åº¦çš„ state çš„æ–¹æ³•ã€‚è¿™æ˜¯å®ƒç›®å‰çš„ä¸è¶³ä¹‹å¤„ã€‚æˆ‘ä»¬åœ¨ä¸æ”¹æºç çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡åµŒå¥— combineReducers æ¥è¾¾åˆ°ç›®çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> todosReducers = &#123;</span><br><span class="line">  active: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°å…¨å±€ state.todos.active</span></span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> A: <span class="comment">//å¤„ç† A åœºæ™¯</span></span><br><span class="line">        <span class="keyword">return</span> handleA(state);</span><br><span class="line">      <span class="keyword">case</span> B: <span class="comment">//å¤„ç† B åœºæ™¯</span></span><br><span class="line">        <span class="keyword">return</span> handleB(state);</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  completed: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°å…¨å±€ state.todos.completed</span></span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> C: <span class="comment">//å¤„ç† C åœºæ™¯</span></span><br><span class="line">        <span class="keyword">return</span> handleC(state);</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> todosRootReducer = combineReducers(todosReducers);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reducers = &#123;</span><br><span class="line">  todos: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°å…¨å±€ state.todos</span></span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> A:</span><br><span class="line">      <span class="keyword">case</span> B:</span><br><span class="line">      <span class="keyword">case</span> C:</span><br><span class="line">        <span class="comment">// A B C åœºæ™¯éƒ½ä¼ é€’ç»™ todosRootReducer</span></span><br><span class="line">        <span class="keyword">return</span> todosRootReducer(state, action);</span><br><span class="line">      <span class="keyword">case</span> D:</span><br><span class="line">      <span class="comment">//...handle state</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//rootReducer(state, action) è¿™é‡Œçš„ state æ˜¯çœŸæ­£çš„å…¨å±€ state</span></span><br><span class="line"><span class="keyword">var</span> rootReducer = combineReducers(reducers);</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://github.com/WisestCoder/blog/issues/1" >redux æºç åˆ†æä¸è®¾è®¡æ€è·¯å‰–æ<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://blog.hhking.cn/2019/07/12/redux-interpretation/" >Redux æºç è§£è¯»<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reduxæºç æ¢ç´¢-createStore</title>
      <link href="2019/12/01/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-createStore/"/>
      <url>2019/12/01/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-createStore/</url>
      
        <content type="html"><![CDATA[<p>redux çš„æºç éå¸¸çš„ç®€æ´ï¼Œæ€»å…±åŠ èµ·æ¥å°±å‡ ç™¾è¡Œï¼Œæ‰€ä»¥ä¸éš¾ç†è§£ï¼›å»ºè®®å…ˆå»ç†Ÿæ‚‰ redux çš„ API å’Œç”¨æ³•å†æ¥çœ‹æœ¬æ–‡ï¼Œä¼šæ›´å¾—å¿ƒåº”æ‰‹ã€‚</p><a id="more"></a><p>å¤§å®¶çœ‹ç›®å½•ç»“æ„ï¼Œä¸€å…±æœ‰ 6 ä¸ªé—®ä»¶ã€‚å…ˆè¯´ä¸‹å„ä¸ªæ–‡ä»¶å¤§æ¦‚åŠŸèƒ½ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">â”œâ”€â”€ utils                #å·¥å…·å‡½æ•° åŒ…æ‹¬æ§åˆ¶å°è¾“å‡ºä¸€ä¸ªè­¦å‘Šï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨çœ‹</span><br><span class="line">â”œâ”€â”€ applyMiddleware.js   #ä½¿ç”¨è‡ªå®šä¹‰çš„ middleware æ¥æ‰©å±• Redux</span><br><span class="line">â”œâ”€â”€ bindActionCreators.js #æŠŠ action creators è½¬æˆæ‹¥æœ‰åŒå keys çš„å¯¹è±¡,ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨</span><br><span class="line">â”œâ”€â”€ combineReducers.js     #ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åº”ç”¨ï¼Œéœ€è¦å¯¹ reducer å‡½æ•° è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† state çš„ä¸€éƒ¨åˆ†</span><br><span class="line">â”œâ”€â”€ compose.js       #ä»å³åˆ°å·¦æ¥ç»„åˆå¤šä¸ªå‡½æ•°ï¼Œå‡½æ•°ç¼–ç¨‹ä¸­å¸¸ç”¨åˆ°</span><br><span class="line">â”œâ”€â”€ createStore.js   #åˆ›å»ºä¸€ä¸ª Redux Store æ¥æ”¾æ‰€æœ‰çš„state</span><br><span class="line">â””â”€â”€ index.js             #å…¥å£ js</span><br></pre></td></tr></table></figure><p>createStore æ˜¯ redux éå¸¸é‡è¦çš„ä¸€ä¸ª APIï¼ŒcreateStore ä¼šç”Ÿæˆä¸€ä¸ª storeï¼Œç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ stateã€‚store ä½œä¸ºä¸€ä¸ª<code>å¯¹è±¡</code>,æä¾›äº†ç›´æ¥è·å–å¯¹è±¡é¡µé¢æ•°æ®<code>getState</code>æ–¹æ³•,è§¦å‘æ›´æ–°äº† store çš„<code>dispatch</code>æ–¹æ³•,ä»¥åŠè®¢é˜… store çŠ¶æ€å˜åŒ–çš„<code>subscribe</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = &#123;</span><br><span class="line">  dispatch,</span><br><span class="line">  getState,</span><br><span class="line">  subscribe,</span><br><span class="line">  replaceReducer</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ€è€ƒå¦‚ä½•å®ç° store?åˆ›å»º store ä»<code>createStore</code>å‡½æ•°å…¥æ‰‹,ä¸€èˆ¬ç®€å•éœ€è¦æ¥å—<code>reducer</code>å‡½æ•°ä½œä¸ºå‚æ•°.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> reduce <span class="keyword">from</span> <span class="string">&quot;./reduce&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> store = createStore(reduce);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure><p>createStore è¿”å›ä¸€ä¸ªå®Œæ•´çš„ store å¯¹è±¡,æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª getState,dispatch å’Œ subscribe æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ¥å—çš„å‚æ•°ä¸ªæ•°ï¼Œæ¥æŒ‡å®š reducer ã€ preloadedState å’Œ enhancer</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    enhancer = preloadedState</span><br><span class="line">    preloadedState = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœ enhancer å­˜åœ¨å¹¶ä¸”é€‚åˆåˆæ³•çš„å‡½æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨ enhancerï¼Œå¹¶ä¸”ç»ˆæ­¢å½“å‰å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Expected the enhancer to be a function.&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> reducer !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Expected the reducer to be a function.&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‚¨å­˜å½“å‰çš„ currentReducer</span></span><br><span class="line">  <span class="keyword">var</span> currentReducer = reducer</span><br><span class="line">  <span class="comment">// å‚¨å­˜å½“å‰çš„çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">var</span> currentState = preloadedState</span><br><span class="line">  <span class="comment">// å‚¨å­˜å½“å‰çš„ç›‘å¬å‡½æ•°åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">var</span> currentListeners = []</span><br><span class="line">  <span class="comment">// å‚¨å­˜ä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">var</span> nextListeners = currentListeners</span><br><span class="line">  <span class="keyword">var</span> isDispatching = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå‡½æ•°å¯ä»¥æ ¹æ®å½“å‰ç›‘å¬å‡½æ•°çš„åˆ—è¡¨ç”Ÿæˆæ–°çš„ä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨å¼•ç”¨</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ensureCanMutateNextListeners</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nextListeners === currentListeners) &#123;</span><br><span class="line">      nextListeners = currentListeners.slice()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ... getState ...</span><br><span class="line"></span><br><span class="line">  ... subscribe ...</span><br><span class="line"></span><br><span class="line">  ... dispatch ...</span><br><span class="line"></span><br><span class="line">  ... replaceReducer ...</span><br><span class="line"></span><br><span class="line">  ... observable ...</span><br><span class="line"></span><br><span class="line">  dispatch(&#123; <span class="attr">type</span>: ActionTypes.INIT &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    dispatch,</span><br><span class="line">    subscribe,</span><br><span class="line">    getState,</span><br><span class="line">    replaceReducer,</span><br><span class="line">    [$$observable]: observable</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ createStore çš„åŸºæœ¬é›å½¢,å®é™…ä¸Šå°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„<code>å‘å¸ƒè®¢é˜…æ¨¡å¼</code></p><p>ä»¥ä¸Šåªæ˜¯æœ¬äººç®€å•çš„åˆ†æä¸æºç ä¸­è¿˜æ˜¯æœ‰ä¸€äº›å‡ºå…¥.</p><p><code>æºç </code>ä¸­ createStore æ¥å— 3 ä¸ªå‚æ•°ï¼š<code>reducer</code>, <code>preloadedState</code>, <code>enhancer</code>ï¼›ç¬¬ä¸€ä¸ªå‚æ•° reducer å’Œç¬¬ä¸‰ä¸ªå‚æ•° enhancer æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šå…·ä½“ä»‹ç»ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>preloadedStateï¼Œå®ƒæ˜¯ state çš„åˆå§‹å€¼</strong>ã€‚</p><p>createStore çš„è¿”å›å€¼æ˜¯ dispatchï¼Œsubscribeï¼ŒgetStateï¼ŒreplaceReducerï¼Œ[$$observable]: observableï¼Œå…±åŒç»„æˆäº†ä¸€ä¸ª storeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¹Ÿä¼šè®²åˆ°è®²è¿™äº›æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æºç ä¸­æœ€åreturn</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  dispatch,</span><br><span class="line">  subscribe,</span><br><span class="line">  getState,</span><br><span class="line">  replaceReducer,</span><br><span class="line">  [$$observable]: observable</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="1-action"><a href="#1-action" class="headerlink" title="1. action"></a>1. action</h4><p>action ä»£è¡¨çš„æ˜¯ç”¨æˆ·çš„æ“ä½œã€‚redux è§„å®š action ä¸€å®šè¦åŒ…å«ä¸€ä¸ª type å±æ€§ï¼Œä¸” type å±æ€§ä¹Ÿè¦å”¯ä¸€ï¼Œç›¸åŒçš„ typeï¼Œredux è§†ä¸ºåŒä¸€ç§æ“ä½œï¼Œå› ä¸ºå¤„ç† action çš„å‡½æ•° reducer åªåˆ¤æ–­ action ä¸­çš„ type å±æ€§ã€‚</p><h4 id="2-reducer"><a href="#2-reducer" class="headerlink" title="2. reducer"></a>2. reducer</h4><p>reducer æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œstate ä»¥åŠ action å‡½æ•°è¿”å›çš„ action å¯¹è±¡ï¼Œå¹¶è¿”å›æœ€æ–°çš„ stateï¼Œå¦‚ä¸‹ reducer çš„ demo</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> A:</span><br><span class="line">      <span class="keyword">return</span> handleA(state);</span><br><span class="line">    <span class="keyword">case</span> B:</span><br><span class="line">      <span class="keyword">return</span> handleB(state);</span><br><span class="line">    <span class="keyword">case</span> C:</span><br><span class="line">      <span class="keyword">return</span> handleC(state);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state; <span class="comment">// å¦‚æœæ²¡æœ‰åŒ¹é…ä¸Šå°±ç›´æ¥è¿”å›åŸ state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>reducer åªæ˜¯ä¸€ä¸ªæ¨¡å¼åŒ¹é…çš„ä¸œè¥¿ï¼ŒçœŸæ­£å¤„ç†æ•°æ®çš„å‡½æ•°ï¼Œ<code>ä¸€èˆ¬æ˜¯é¢å¤–åœ¨åˆ«çš„åœ°æ–¹å†™</code>çš„ï¼ˆå½“ç„¶ç›´æ¥å†™åœ¨ reducer ä¸­ä¹Ÿæ²¡é—®é¢˜ï¼Œåªæ˜¯ä¸åˆ©äºåæœŸç»´æŠ¤ï¼‰ï¼Œåœ¨ reducer ä¸­è°ƒç”¨ç½¢äº†ã€‚</p><p><code>reducer ä¸ºä»€ä¹ˆå« reducer å‘¢</code>ï¼Ÿå› ä¸º action å¯¹è±¡å„ç§å„æ ·ï¼Œæ¯ç§å¯¹åº”æŸä¸ª case ï¼Œä½†æœ€åéƒ½æ±‡æ€»åˆ° state å¯¹è±¡ä¸­ï¼Œä»å¤šåˆ°ä¸€ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡å°‘( reduce )çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹çš„å‡½æ•°å« reducerã€‚</p><h4 id="3-getState"><a href="#3-getState" class="headerlink" title="3 getState"></a>3 getState</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> currentState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•´ä¸ªé¡¹ç›®çš„<code>currentState</code> æ˜¯å¤„äºä¸€ä¸ª<code>é—­åŒ…</code>ä¹‹ä¸­ï¼Œæ‰€ä»¥èƒ½ä¸€ç›´å­˜åœ¨ï¼ŒgetState ä¼šè¿”å›å½“å‰æœ€æ–°çš„ stateã€‚</p><h4 id="4-subscribe"><a href="#4-subscribe" class="headerlink" title="4 subscribe"></a>4 subscribe</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="comment">// æ ‡è®°è®¢é˜…çŠ¶æ€ï¼Œå–æ¶ˆè®¢é˜…æ—¶é¿å…é‡å¤å–æ¶ˆè®¢é˜…çš„é€»è¾‘æ‰§è¡Œï¼Œé€ æˆçš„æ€§èƒ½æŸè€—</span></span><br><span class="line">  <span class="keyword">let</span> isSubscribed = <span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// æ·»åŠ  listener ä¹‹å‰ï¼Œç¡®ä¿ä¸æ”¹åŠ¨ currentListenersï¼Œè€Œæ˜¯ currentListeners çš„å¤åˆ¶å‡ºæ¥çš„ nextListeners</span></span><br><span class="line">  ensureCanMutateNextListeners();</span><br><span class="line">  <span class="comment">// æ·»åŠ å›è°ƒå‡½æ•° listener åˆ° nextListeners</span></span><br><span class="line">  nextListeners.push(listener);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸŒŸğŸŒŸè®¢é˜…çš„è¿”å›å€¼æ˜¯ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªè¿”å›å€¼æ¥å–æ¶ˆè®¢é˜…ï¼ˆç±»ä¼¼äº setTimeout çš„è¿”å›å€¼å¯ä»¥ç”¨æ¥å–æ¶ˆå®šæ—¶å™¨ï¼‰</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!isSubscribed) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// reducer æ‰§è¡Œæ—¶ä¸èƒ½å–æ¶ˆè®¢é˜…</span></span><br><span class="line">    <span class="keyword">if</span> (isDispatching) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">        <span class="string">&quot;You may not unsubscribe from a store listener while the reducer is executing. &quot;</span> +</span><br><span class="line">          <span class="string">&quot;See https://redux.js.org/api-reference/store#subscribe(listener) for more details.&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ‡è®°ä¸ºæœªè®¢é˜…</span></span><br><span class="line">    isSubscribed = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¼šå†æ¬¡ç¡®è®¤ nextListeners å’Œ currentListeners æ—¶ï¼Œæµ…å¤åˆ¶ä¸€ä»½æ–°çš„ nextListeners å‡ºæ¥</span></span><br><span class="line">    ensureCanMutateNextListeners();</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°éœ€è¦å–æ¶ˆè®¢é˜…çš„ listenerï¼Œé€šè¿‡ splice ä»æ•°ç»„ä¸­åˆ é™¤ï¼Œå˜åŒ–ä½“ç°åœ¨ nextListeners æ•°ç»„ä¸­</span></span><br><span class="line">    <span class="keyword">const</span> index = nextListeners.indexOf(listener);</span><br><span class="line">    nextListeners.splice(index, <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>subscribe æ¥æ”¶ä¸€ä¸ª listenerï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™ store æ·»åŠ ç›‘å¬å‡½æ•°ã€‚nextListeners å‚¨å­˜äº†æ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨ã€‚ subscribe çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª unsubscribeï¼Œæ˜¯ä¸€ä¸ªè§£ç»‘å‡½æ•°ï¼Œè°ƒç”¨è¯¥è§£ç»‘å‡½æ•°ï¼Œä¼šå°†å·²ç»æ·»åŠ çš„ç›‘å¬å‡½æ•°åˆ é™¤ï¼Œè¯¥ç›‘å¬å‡½æ•°å¤„äºä¸€ä¸ªé—­åŒ…ä¹‹ä¸­ï¼Œä¼šä¸€ç›´å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨è§£ç»‘å‡½æ•°ä¸­èƒ½åˆ é™¤è¯¥ç›‘å¬å‡½æ•°ã€‚ï¼ˆç”±æ­¤å¯è§ redux æºç è®¾è®¡çš„ç²¾å·§ï¼Œå¤šå¤„åœ°æ–¹å·§ç”¨é—­åŒ…ï¼Œç²¾ç®€äº†è®¸å¤šä»£ç ã€‚ï¼‰</p><p>è¿™é‡Œæ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•° ensureCanMutateNextListenersï¼Œæ˜¯å¹²å˜›ç”¨çš„å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// createStore.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ensureCanMutateNextListeners</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (nextListeners === currentListeners) &#123;</span><br><span class="line">    nextListeners = currentListeners.slice();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ƒè™‘ä¸‹é¢è¿™ç§åœºæ™¯ï¼š</p><ol><li>dispatch è¿‡ç¨‹ä¸­ï¼Œç›‘å¬å›è°ƒ listener æ•°ç»„ [ a, b, c ,d ] åœ¨å¾ªç¯æ‰§è¡Œï¼Œä½†æ˜¯åˆšæ‰§è¡Œå®Œ aï¼Œa è¢«å–æ¶ˆç›‘å¬äº†ï¼Œè¿™æ—¶å€™æ•°ç»„å°±ä¼šå˜æˆ [ b, c ,d ]ï¼Œc æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹äº†ã€‚åŸæœ¬è¦æ‰§è¡Œç¬¬äºŒé¡¹çš„ b å°±è¢«è·³è¿‡äº†ï¼Œè€Œå»æ‰§è¡Œ c å»äº†ã€‚</li><li>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä¸ºäº†ä¿è¯åœ¨ dispatch è¿‡ç¨‹ä¸­ï¼Œæ–°å¢æˆ–è€…å–æ¶ˆè®¢é˜…ä¸ä¼šå½±å“åˆ°å½“å‰çš„ dispatchï¼Œé¿å…ç±»ä¼¼è¿™ç§åœºæ™¯ä¸‹ bug çš„äº§ç”Ÿã€‚</li><li>æµ…å¤åˆ¶ä¸€ä»½ currentListenersï¼Œä¿è¯å½“å‰çš„ dispatch çš„ä¸å˜ï¼Œæ–°å¢æˆ–è€…å–æ¶ˆçš„ä¼šåœ¨ nextListeners ä¸­ä½“ç°ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ¬¡ dispatch æ—¶ã€‚ (subscribe çš„æ³¨é‡Šé‡Œä¹Ÿæœ‰è¯´æ˜)</li></ol><h4 id="5-dispatch"><a href="#5-dispatch" class="headerlink" title="5 dispatch"></a>5 dispatch</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å§‹æ‰§è¡Œ reducer</span></span><br><span class="line">    isDispatching = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// reducer çš„å‚æ•°æ˜¯å½“å‰çš„ state å’ŒæŒ‡å®šçš„ actionï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„ state, æ‰€ä»¥è¦ä¿è¯ reducer ä¸€å®šè¦æœ‰ state è¿”å›</span></span><br><span class="line">    currentState = currentReducer(currentState, action);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// reducer æ‰§è¡Œå®Œæˆ</span></span><br><span class="line">    isDispatching = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è¿™é‡Œè·å–æœ€æ–°çš„å›è°ƒå‡½æ•°æ•°ç»„, ç„¶åå¾ªç¯é€ä¸ªæ‰§è¡Œ.</span></span><br><span class="line"><span class="comment">   * è¿™é‡Œè®© currentListeners = nextListeners, å¦‚æœè¿™æ—¶å€™å‡ºç°æ–°å¢æˆ–è€…å–æ¶ˆè®¢é˜…, ä¹‹å‰çš„ ensureCanMutateNextListeners å°±èµ·ä½œç”¨äº†,</span></span><br><span class="line"><span class="comment">   * æ”¹åŠ¨ä¸ä¼šå½±å“å½“å‰æ‰§è¡Œçš„æ•°ç»„, ä¸‹æ¬¡æ‰§è¡Œ dispatch æ‰ä¼šæ‹¿åˆ°æ”¹è¿‡åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> listeners = (currentListeners = nextListeners);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> listener = listeners[i];</span><br><span class="line">    listener();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> action;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dispatch æ¥æ”¶ä¸€ä¸ªå‚æ•° actionã€‚ä»£ç ä¼šå…ˆè°ƒç”¨ createStore ä¼ å…¥çš„å‚æ•° reducer æ–¹æ³•ï¼Œreducer æ¥å—å½“å‰ state å’Œ actionï¼Œé€šè¿‡åˆ¤æ–­ actionTypeï¼Œæ¥åšå¯¹åº”çš„æ“ä½œï¼Œå¹¶è¿”å›æœ€æ–°çš„ currentStateã€‚dispatch è¿˜ä¼šè§¦å‘æ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨ï¼Œæ‰€ä»¥æœ€åæ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨éƒ½ä¼šæŒ‰é¡ºåºæ‰§è¡Œä¸€éã€‚<code>dispatchè¿”å›å€¼å°±æ˜¯ä¼ å…¥çš„action</code>ã€‚</p><h4 id="6-replaceReducer"><a href="#6-replaceReducer" class="headerlink" title="6 replaceReducer"></a>6 replaceReducer</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceReducer</span>(<span class="params">nextReducer</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> nextReducer !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Expected the nextReducer to be a function.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  currentReducer = nextReducer;</span><br><span class="line">  dispatch(&#123; <span class="attr">type</span>: ActionTypes.INIT &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>replaceReducer</code>æ˜¯æ›¿æ¢å½“å‰çš„ reducer çš„å‡½æ•°ï¼ŒreplaceReducer æ¥å—ä¸€ä¸ª<code>æ–°çš„reducer</code>ï¼Œæ›¿æ¢å®Œæˆä¹‹åï¼Œä¼šæ‰§è¡Œ dispatch({ type: ActionTypes.INIT }) ï¼Œç”¨æ¥åˆå§‹åŒ– store çš„çŠ¶æ€ã€‚å®˜æ–¹ä¸¾å‡ºäº†ä¸‰ç§ replaceReducer çš„ä½¿ç”¨åœºæ™¯ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li>å½“ä½ çš„ç¨‹åºè¦è¿›è¡Œä»£ç åˆ†å‰²çš„æ—¶å€™</li><li>å½“ä½ è¦åŠ¨æ€çš„åŠ è½½ä¸åŒçš„ reducer çš„æ—¶å€™</li><li>å½“ä½ è¦å®ç°ä¸€ä¸ªå®æ—¶ reloading æœºåˆ¶çš„æ—¶å€™</li></ol><h4 id="7-observable"><a href="#7-observable" class="headerlink" title="7 observable"></a>7 observable</h4><p>è¿™ä¸ª API å¹¶ä¸æ˜¯æš´éœ²ç»™ä½¿ç”¨è€…çš„ï¼Œè¿™ä¸ªæ˜¯ redux å†…éƒ¨ç”¨çš„ï¼Œå¤§å®¶ä¸ç”¨æ·±ç©¶ï¼ˆåƒä¸‡ä¸è¦æ­»è„‘ç­‹å•Š~~~ï¼‰ã€‚ä»€ä¹ˆï¼Œä½ ä¸ä¿¡ï¼Ÿå¥½å§ï¼Œå®è¯å‘Šè¯‰ä½ ï¼Œå°±æ˜¯å†…éƒ¨ç”¨çš„ï¼Œåœ¨æµ‹è¯•ä»£ç ä¸­ä¼šç”¨åˆ°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å» test ç›®å½•ä¸‹æŸ¥çœ‹ã€‚</p><p>ä»Šå¤©å°±å…ˆåˆ†æåˆ°è¿™é‡Œâ€¦..æ‹œé‡Œä¸ªæ‹œ~ğŸ’¤</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://github.com/WisestCoder/blog/issues/1" >redux æºç åˆ†æä¸è®¾è®¡æ€è·¯å‰–æ<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://blog.hhking.cn/2019/07/12/redux-interpretation/" >Redux æºç è§£è¯»<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React2019 å¹´æœ€åŠ²çˆ†çš„æ–°ç‰¹æ€§ React-Hooks</title>
      <link href="2019/11/28/React%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%8A%B2%E7%88%86%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7React%20Hooks/"/>
      <url>2019/11/28/React%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%8A%B2%E7%88%86%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7React%20Hooks/</url>
      
        <content type="html"><![CDATA[<p>React åœ¨ v16.8 çš„ç‰ˆæœ¬ä¸­æ¨å‡ºäº† React Hooks æ–°ç‰¹æ€§ï¼Œè™½ç„¶ç¤¾åŒºè¿˜æ²¡æœ‰æœ€ä½³å®è·µå¦‚ä½•åŸºäº React Hooks æ¥æ‰“é€ å¤æ‚åº”ç”¨(è‡³å°‘æˆ‘è¿˜æ²¡æœ‰)ï¼Œå‡­å€Ÿç€é˜…è¯»ç¤¾åŒºä¸­å¤§é‡çš„å…³äºè¿™æ–¹é¢çš„æ–‡ç« ï¼Œä¸‹é¢æˆ‘å°†é€šè¿‡åä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ è®¤è¯†ç†è§£å¹¶å¯ä»¥ç†Ÿç»ƒè¿ç”¨ React Hooks å¤§éƒ¨åˆ†ç‰¹æ€§ã€‚</p><a id="more"></a><h3 id="ä¸ºä»€ä¹ˆ-React-è¦æä¸€ä¸ª-Hooksï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-React-è¦æä¸€ä¸ª-Hooksï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ React è¦æä¸€ä¸ª Hooksï¼Ÿ"></a>ä¸ºä»€ä¹ˆ React è¦æä¸€ä¸ª Hooksï¼Ÿ</h3><blockquote><p>æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼</p></blockquote><p>react éƒ½æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œ<a href="">å°†ä¸€ä¸ªé¡µé¢æ‹†æˆä¸€å †ç‹¬ç«‹çš„ï¼Œå¯å¤ç”¨çš„ç»„ä»¶</a>ï¼Œå¹¶ä¸”ç”¨<code>è‡ªä¸Šè€Œä¸‹</code>çš„å•å‘æ•°æ®æµçš„å½¢å¼å°†è¿™äº›ç»„ä»¶ä¸²è”èµ·æ¥ã€‚ä½†å‡å¦‚ä½ åœ¨å¤§å‹çš„å·¥ä½œé¡¹ç›®ä¸­ç”¨ reactï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ä¸­å®é™…ä¸Šå¾ˆå¤š react ç»„ä»¶å†—é•¿ä¸”éš¾ä»¥å¤ç”¨ã€‚å°¤å…¶æ˜¯é‚£äº›å†™æˆ class çš„ç»„ä»¶ï¼Œå®ƒä»¬æœ¬èº«åŒ…å«äº†çŠ¶æ€ï¼ˆstateï¼‰ï¼Œæ‰€ä»¥å¤ç”¨è¿™ç±»ç»„ä»¶å°±å˜å¾—å¾ˆéº»çƒ¦ã€‚<br>é‚£ä¹‹å‰ï¼Œå®˜æ–¹æ¨èæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p><strong>ç­”æ¡ˆ</strong>æ˜¯ï¼š<code>æ¸²æŸ“å±æ€§</code>ï¼ˆRender Propsï¼‰å’Œ<code>é«˜é˜¶ç»„ä»¶</code>ï¼ˆHigher-Order Componentsï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä¸¾ä¾‹è¿™ä¸¤ç§æ¨¡å¼ã€‚</p><h4 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h4><p>æ¸²æŸ“å±æ€§æŒ‡çš„æ˜¯ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop æ¥ä¼ é€’éœ€è¦åŠ¨æ€æ¸²æŸ“çš„ nodes æˆ–ç»„ä»¶ã€‚å¦‚ä¸‹é¢çš„ä»£ç å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ DataProvider ç»„ä»¶åŒ…å«äº†æ‰€æœ‰è·ŸçŠ¶æ€ç›¸å…³çš„ä»£ç ï¼Œè€Œ Cat ç»„ä»¶åˆ™å¯ä»¥æ˜¯ä¸€ä¸ªå•çº¯çš„å±•ç¤ºå‹ç»„ä»¶ï¼Œè¿™æ ·ä¸€æ¥ DataProvider å°±å¯ä»¥å•ç‹¬å¤ç”¨äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cat <span class="keyword">from</span> <span class="string">&#x27;components/cat&#x27;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataProvider</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123; <span class="attr">target</span>: <span class="string">&#x27;Zac&#x27;</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.render(<span class="built_in">this</span>.state)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;DataProvider render=&#123;<span class="function"><span class="params">data</span> =&gt;</span> (</span><br><span class="line">  &lt;Cat target=&#123;data.target&#125; /&gt;</span><br><span class="line">)&#125;/&gt;</span><br><span class="line"></span><br><span class="line">============æ”¹å†™ä¸‹=======</span><br><span class="line">&lt;DataProvider&gt;</span><br><span class="line">  &#123;<span class="function"><span class="params">data</span> =&gt;</span> (</span><br><span class="line">    &lt;Cat target=&#123;data.target&#125; /&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/DataProvider&gt;</span><br></pre></td></tr></table></figure><h4 id="Higher-Order-Components"><a href="#Higher-Order-Components" class="headerlink" title="Higher-Order Components"></a>Higher-Order Components</h4><p>é«˜é˜¶ç»„ä»¶è¿™ä¸ªæ¦‚å¿µå°±æ›´å¥½ç†è§£äº†ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œç»è¿‡ä¸€ç³»åˆ—åŠ å·¥åï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚çœ‹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼ŒwithUser å‡½æ•°å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å…·æœ‰äº†å®ƒæä¾›çš„è·å–ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> withUser = <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> user = sessionStorage.getItem(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">props</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">user</span>=<span class="string">&#123;user&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> UserPage = <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">  <span class="comment">//å¤ç”¨æ¯ä¸€ä¸ªç»„ä»¶éƒ½éœ€è¦è·å–userå‚æ•°</span></span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;user-container&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;My name is &#123;props.user&#125;!&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withUser(UserPage);</span><br></pre></td></tr></table></figure><p>å¾ˆå¤šåº“ä¹Ÿè¿ç”¨äº†è¿™ç§æ¨¡å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ React Routerã€‚ä½†æˆ‘ä»¬ä»”ç»†çœ‹è¿™ä¸¤ç§æ¨¡å¼ï¼Œä¼šå‘ç°å®ƒä»¬ä¼šå¢åŠ æˆ‘ä»¬ä»£ç çš„<code>å±‚çº§å…³ç³»</code>ã€‚æœ€ç›´è§‚çš„ä½“ç°ï¼Œæ‰“å¼€ devtool çœ‹çœ‹ä½ çš„ç»„ä»¶å±‚çº§åµŒå¥—æ˜¯ä¸æ˜¯å¾ˆå¤¸å¼ å§<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025132524.png"                      alt=""                ></p><h4 id="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„é€»è¾‘å¤ªæ··ä¹±"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„é€»è¾‘å¤ªæ··ä¹±" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„é€»è¾‘å¤ªæ··ä¹±"></a>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„é€»è¾‘å¤ªæ··ä¹±</h4><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ componentDidMount ä¸­å‘èµ· ajax è¯·æ±‚è·å–æ•°æ®ï¼Œç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬ç­‰ç­‰ã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åœ¨ componentDidUpdate åšä¸€éåŒæ ·çš„äº‹æƒ…ã€‚å½“é¡¹ç›®å˜å¤æ‚åï¼Œè¿™ä¸€å—çš„ä»£ç ä¹Ÿå˜å¾—ä¸é‚£ä¹ˆç›´è§‚ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="comment">//æ³¨å†Œ</span></span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">         <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">           count: <span class="built_in">this</span>.state.count+<span class="number">1</span></span><br><span class="line">         &#125;)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">//é”€æ¯</span></span><br><span class="line">     <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="class-ä¸­çš„-this-ç»‘å®š"><a href="#class-ä¸­çš„-this-ç»‘å®š" class="headerlink" title="class ä¸­çš„ this ç»‘å®š"></a>class ä¸­çš„ this ç»‘å®š</h4><p>ç”¨ class æ¥åˆ›å»º react ç»„ä»¶æ—¶ï¼Œè¿˜æœ‰ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå°±æ˜¯ this çš„æŒ‡å‘é—®é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.handleClick(e)&#125;&gt;</span><br></pre></td></tr></table></figure><h4 id="éœ€æ±‚å˜æ›´"><a href="#éœ€æ±‚å˜æ›´" class="headerlink" title="éœ€æ±‚å˜æ›´"></a>éœ€æ±‚å˜æ›´</h4><p>é¡¹ç›®ä¸­éœ€æ±‚å˜æ›´æ˜¯éå¸¸å¸¸è§çš„é—®é¢˜,ä¹‹å‰ç»„ä»¶å†™æˆæ— çŠ¶æ€ç»„ä»¶çš„å½¢å¼ï¼Œå› ä¸ºå®ƒä»¬æ›´æ–¹ä¾¿å¤ç”¨ï¼Œå¯ç‹¬ç«‹æµ‹è¯•ã€‚ç„¶è€Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ function å†™äº†ä¸€ä¸ªç®€æ´å®Œç¾çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåæ¥å› ä¸ºéœ€æ±‚å˜åŠ¨è¿™ä¸ªç»„ä»¶å¿…é¡»å¾—æœ‰è‡ªå·±çš„ stateï¼Œæˆ‘ä»¬åˆå¾—å¾ˆéº»çƒ¦çš„æŠŠ function æ”¹æˆ classã€‚</p><blockquote><p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒHooks ä¾¿æ¨ªç©ºå‡ºä¸–äº†ï¼</p></blockquote><h3 id="å…ˆä»ç®€å•çš„-Hooks-è¯´èµ·â€“useState"><a href="#å…ˆä»ç®€å•çš„-Hooks-è¯´èµ·â€“useState" class="headerlink" title="å…ˆä»ç®€å•çš„ Hooks è¯´èµ·â€“useState"></a>å…ˆä»ç®€å•çš„ Hooks è¯´èµ·â€“useState</h3><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹åŸæ¥ç®€å•çš„æœ‰çŠ¶æ€ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        <span class="comment">//æ ¹æ®stateçš„æ”¹å˜é‡æ–°æ¸²æŸ“</span></span><br><span class="line">        &lt;p&gt;You clicked &#123;<span class="built_in">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.setState(&#123; <span class="attr">count</span>: <span class="built_in">this</span>.state.count + <span class="number">1</span> &#125;)&#125;&gt;Click me&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ hooks ä¹‹å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">========æˆ–è€…==========</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> [state, setState] = useState(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//é»˜è®¤åªæ‰§è¡Œä¸€æ¬¡console.log(&#x27;åªæ‰§è¡Œåˆå§‹åŒ–ä¸€æ¬¡&#x27;);</span></span><br><span class="line"><span class="keyword">const</span> initialState = someExpensiveComputation(props)</span><br><span class="line"><span class="keyword">return</span> initialState</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line">setState(<span class="function">(<span class="params">preState</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;...prevState, ...updatedValues&#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹:</p><ol><li>setState ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ä¸ä¼šå˜åŒ–ï¼ŒuseState è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å§‹ç»ˆæ˜¯<code>æœ€æ–°</code>çš„ state</li><li>state å¦‚æœæ˜¯å¯¹è±¡ï¼Œå½“åªæ›´æ–°å¯¹è±¡éƒ¨åˆ†å±æ€§æ—¶ï¼Œstate æ›´æ–°ä¸ä¼šåˆå¹¶å¯¹è±¡</li><li>å¦‚æœ state ä¸å‘ç”Ÿå˜åŒ–ï¼Œè°ƒç”¨ setState å°†è·³è¿‡æ›´æ–°</li><li>å»ºè®®ï¼šå°†åŒä¸€æ—¶é—´æ®µæ›´æ–°çš„ stateï¼Œ ç»„åˆåˆå§‹åŒ–åœ¨ä¸€èµ·</li></ol><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> result + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>); <span class="comment">//1</span></span><br><span class="line">add(<span class="number">1</span>); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>æ™®é€šå‡½æ•°æ˜¯è®°å¿†ä¸ä½<code>result</code>çš„å˜é‡çš„.</p><h4 id="ä¸ºä»€ä¹ˆ-useState-å¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-useState-å¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ useState å¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ useState å¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼Ÿ</h4><p>useState æ¥æ”¶çš„åˆå§‹å€¼æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯ string/number/boolean è¿™ç§ç®€å•æ•°æ®ç±»å‹ï¼Œå®ƒå®Œå…¨å¯ä»¥æ¥æ”¶å¯¹è±¡æˆ–è€…æ•°ç»„ä½œä¸ºå‚æ•°ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œä¹‹å‰æˆ‘ä»¬çš„ this.setState åšçš„æ˜¯åˆå¹¶çŠ¶æ€åè¿”å›ä¸€ä¸ªæ–°çŠ¶æ€ï¼Œè€Œ useState æ˜¯ç›´æ¥æ›¿æ¢è€çŠ¶æ€åè¿”å›æ–°çŠ¶æ€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExampleWithManyStates</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = useState(<span class="number">42</span>);</span><br><span class="line">  <span class="keyword">const</span> [fruit, setFruit] = useState(<span class="string">&#x27;banana&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [todos, setTodos] = useState([&#123; <span class="attr">text</span>: <span class="string">&#x27;Learn Hooks&#x27;</span> &#125;]);</span><br></pre></td></tr></table></figure><p>useState æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚ä¸åŒç»„ä»¶è°ƒç”¨åŒä¸€ä¸ª hook ä¹Ÿèƒ½ä¿è¯å„è‡ªçŠ¶æ€çš„ç‹¬ç«‹æ€§ã€‚<br>react æ˜¯æ€ä¹ˆä¿è¯å¤šä¸ª useState çš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>); <span class="comment">//å°†ageåˆå§‹åŒ–ä¸º42</span></span><br><span class="line">useState(<span class="string">&quot;banana&quot;</span>); <span class="comment">//å°†fruitåˆå§‹åŒ–ä¸ºbanana</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">&quot;Learn Hooks&quot;</span> &#125;]); <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒæ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>); <span class="comment">//è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line">useState(<span class="string">&quot;banana&quot;</span>); <span class="comment">//è¯»å–çŠ¶æ€å˜é‡fruitçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°bananaç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">&quot;Learn Hooks&quot;</span> &#125;]); <span class="comment">//...</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025134656.png"                      alt=""                ></p><p>å‡å¦‚æˆ‘ä»¬æ”¹ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> showFruit = <span class="literal">true</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExampleWithManyStates</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = useState(<span class="number">42</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (showFruit) &#123;</span><br><span class="line">    <span class="keyword">const</span> [fruit, setFruit] = useState(<span class="string">&quot;banana&quot;</span>);</span><br><span class="line">    showFruit = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [todos, setTodos] = useState([&#123; <span class="attr">text</span>: <span class="string">&quot;Learn Hooks&quot;</span> &#125;]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025134456.png"                      alt=""                ></p><blockquote><p>react æ˜¯æ ¹æ® useState å‡ºç°çš„é¡ºåºæ¥å®šçš„</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>); <span class="comment">//å°†ageåˆå§‹åŒ–ä¸º42</span></span><br><span class="line">useState(<span class="string">&quot;banana&quot;</span>); <span class="comment">//å°†fruitåˆå§‹åŒ–ä¸ºbanana</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">&quot;Learn Hooks&quot;</span> &#125;]); <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒæ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>); <span class="comment">//è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line"><span class="comment">// useState(&#x27;banana&#x27;);</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">&quot;Learn Hooks&quot;</span> &#125;]); <span class="comment">//è¯»å–åˆ°çš„å´æ˜¯çŠ¶æ€å˜é‡fruitçš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™</span></span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯-Effect-Hooks"><a href="#ä»€ä¹ˆæ˜¯-Effect-Hooks" class="headerlink" title="ä»€ä¹ˆæ˜¯ Effect Hooks?"></a>ä»€ä¹ˆæ˜¯ Effect Hooks?</h3><p>useEffect ç»„ä»¶æ¸²æŸ“ä¹‹åå¼‚æ­¥æ‰§è¡Œå›è°ƒï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰æ‰§è¡Œ<br>useLayoutEffect ç»„ä»¶æ¸²æŸ“ä¹‹ååŒæ­¥æ‰§è¡Œå›è°ƒ<br>æ¯”å¦‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(callback); <span class="comment">//ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆ useEffect</span></span><br><span class="line">useEffect(callback, [ä¾èµ–å‚æ•°]); <span class="comment">//ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ä¹‹åï¼Œæ ¹æ®ä¾èµ–å‚æ•°åˆ¤æ–­æ˜¯å¦é‡æ–°ç”Ÿæˆ useEffect</span></span><br><span class="line">useEffect(callback, []); <span class="comment">// åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†™çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ· ajax è¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹ dom ç­‰ç­‰ã€‚æˆ‘ä»¬ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚ componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmountã€‚è€Œç°åœ¨çš„ useEffect å°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚å®ƒä»¥ä¸€æŠµä¸‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»ä¼¼äºcomponentDidMount å’Œ componentDidUpdate:</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> setCount(count + <span class="number">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>useEffect Hook å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼š</p><ol><li>componentDidMount</li><li>componentDidUpdate</li><li>componentWillUnmount</li></ol><p>å†æ¢³ç†ä¸€éä¸‹é¢ä»£ç çš„é€»è¾‘ï¼š</p><ol><li>æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªçŠ¶æ€å˜é‡ countï¼Œå°†å®ƒçš„åˆå§‹å€¼è®¾ä¸º 0ã€‚</li><li>ç„¶åæˆ‘ä»¬å‘Šè¯‰ reactï¼Œæˆ‘ä»¬çš„è¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ã€‚æˆ‘ä»¬ç»™ useEffecthook ä¼ äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨ã€‚</li><li>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬çš„å‰¯ä½œç”¨æ˜¯è°ƒç”¨ browser API æ¥ä¿®æ”¹æ–‡æ¡£æ ‡é¢˜ã€‚</li><li>å½“ react è¦æ¸²æŸ“æˆ‘ä»¬çš„ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå…ˆè®°ä½æˆ‘ä»¬ç”¨åˆ°çš„å‰¯ä½œç”¨ã€‚ç­‰ react æ›´æ–°äº† DOM ä¹‹åï¼Œå®ƒå†ä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°ã€‚</li></ol><p><strong>è¿™é‡Œè¦æ³¨æ„å‡ ç‚¹ï¼š</strong></p><p>ç¬¬ä¸€ï¼Œreact é¦–æ¬¡æ¸²æŸ“å’Œä¹‹åçš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€éä¼ ç»™ useEffect çš„å‡½æ•°ã€‚è€Œä¹‹å‰æˆ‘ä»¬è¦ç”¨ä¸¤ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°æ¥åˆ†åˆ«è¡¨ç¤º<code>é¦–æ¬¡æ¸²æŸ“</code>ï¼ˆcomponentDidMountï¼‰ï¼Œå’Œä¹‹åçš„<code>æ›´æ–°å¯¼è‡´çš„é‡æ–°æ¸²æŸ“</code>ï¼ˆcomponentDidUpdateï¼‰<br>ç¬¬äºŒï¼ŒuseEffect ä¸­å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè€Œä¹‹å‰çš„ componentDidMount æˆ– componentDidUpdate ä¸­çš„ä»£ç åˆ™æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚è¿™ç§å®‰æ’å¯¹å¤§å¤šæ•°å‰¯ä½œç”¨è¯´éƒ½æ˜¯åˆç†çš„</p><h4 id="useEffect-æ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨"><a href="#useEffect-æ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨" class="headerlink" title="useEffect æ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨"></a>useEffect æ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨</h4><p>è¿™ç§åœºæ™¯å¾ˆå¸¸è§ï¼Œå½“æˆ‘ä»¬åœ¨ componentDidMount é‡Œæ·»åŠ äº†ä¸€ä¸ªæ³¨å†Œï¼Œæˆ‘ä»¬å¾—é©¬ä¸Šåœ¨ componentWillUnmount ä¸­ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶è¢«æ³¨é”€ä¹‹å‰æ¸…é™¤æ‰æˆ‘ä»¬æ·»åŠ çš„æ³¨å†Œï¼Œå¦åˆ™å†…å­˜æ³„æ¼çš„é—®é¢˜å°±å‡ºç°äº†ã€‚</p><p><strong>æ€ä¹ˆæ¸…é™¤å‘¢ï¼Ÿ</strong>è®©æˆ‘ä»¬ä¼ ç»™ useEffect çš„å‰¯ä½œç”¨å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å³å¯ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°å°†ä¼šåœ¨ç»„ä»¶<code>ä¸‹ä¸€æ¬¡é‡æ–°æ¸²æŸ“ä¹‹å</code>æ‰§è¡Œã€‚è¿™ç§æ¨¡å¼åœ¨ä¸€äº› pubsub æ¨¡å¼çš„å®ç°ä¸­å¾ˆå¸¸è§ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendStatus</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">    setIsOnline(status.isOnline);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    <span class="comment">// ä¸€å®šæ³¨æ„ä¸‹è¿™ä¸ªé¡ºåºï¼šå‘Šè¯‰reactåœ¨ä¸‹æ¬¡é‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹åï¼ŒåŒæ—¶æ˜¯ä¸‹æ¬¡è°ƒç”¨ChatAPI.subscribeToFriendStatusä¹‹å‰æ‰§è¡Œcleanup</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">cleanup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isOnline === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Loading...&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> isOnline ? <span class="string">&quot;Online&quot;</span> : <span class="string">&quot;Offline&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†ä¸¾ä¸ªå°æå­<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025141139.png"                      alt=""                ></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¸…ç†äº‹ä»¶ç»‘å®š</span></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">&quot;#size&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, changeName, <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">//æ¸…ç†äº‹ä»¶ç»‘å®š</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">&quot;#size&quot;</span>).removeEventListener(<span class="string">&quot;click&quot;</span>, changeName, <span class="literal">false</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="è¿™ç§è§£ç»‘çš„æ¨¡å¼ä¸-componentWillUnmount-åŒºåˆ«"><a href="#è¿™ç§è§£ç»‘çš„æ¨¡å¼ä¸-componentWillUnmount-åŒºåˆ«" class="headerlink" title="è¿™ç§è§£ç»‘çš„æ¨¡å¼ä¸ componentWillUnmount åŒºåˆ«?"></a>è¿™ç§è§£ç»‘çš„æ¨¡å¼ä¸ componentWillUnmount åŒºåˆ«?</h4><p>componentWillUnmount åªä¼šåœ¨ç»„ä»¶è¢«<code>é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡</code>è€Œå·²ï¼Œè€Œ useEffect é‡Œçš„å‡½æ•°ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒåŒ…æ‹¬å‰¯ä½œç”¨å‡½æ•°è¿”å›çš„è¿™ä¸ªæ¸…ç†å‡½æ•°ä¹Ÿä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä¸ºä»€ä¹ˆè¦è®©å‰¯ä½œç”¨å‡½æ•°æ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½æ‰§è¡Œä¸€éï¼Ÿ<br>æˆ‘ä»¬åœ¨ componentDidMount æ³¨å†Œï¼Œå†åœ¨ componentWillUnmount æ¸…é™¤æ³¨å†Œã€‚ä½†å‡å¦‚è¿™æ—¶å€™ props.friend.id å˜äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¸å¾—ä¸å†æ·»åŠ ä¸€ä¸ª componentDidUpdate æ¥å¤„ç†è¿™ç§æƒ…å†µï¼š<br>åŸæ¥çš„åšæ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   ChatAPI.subscribeToFriendStatus(</span><br><span class="line">     <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">     <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//å¢åŠ ä¸€æ­¥åŠ¨æ€æ”¹å˜id</span></span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps</span>)</span> &#123;</span><br><span class="line">   <span class="comment">// å…ˆæŠŠä¸Šä¸€ä¸ªfriend.idè§£ç»‘</span></span><br><span class="line">   ChatAPI.unsubscribeFromFriendStatus(</span><br><span class="line">     prevProps.friend.id,</span><br><span class="line">     <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">   );</span><br><span class="line">   <span class="comment">// å†é‡æ–°æ³¨å†Œæ–°ä½†friend.id</span></span><br><span class="line">   ChatAPI.subscribeToFriendStatus(</span><br><span class="line">     <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">     <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   ChatAPI.unsubscribeFromFriendStatus(</span><br><span class="line">     <span class="built_in">this</span>.props.friend.id,</span><br><span class="line">     <span class="built_in">this</span>.handleStatusChange</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°äº†å—ï¼Ÿå¾ˆç¹çï¼Œè€Œæˆ‘ä»¬ä½† useEffect åˆ™æ²¡è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°åéƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ‰€ä»¥ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p><p>1.é¡µé¢é¦–æ¬¡æ¸²æŸ“ 2.æ›¿ friend.id=1 çš„æœ‹å‹æ³¨å†Œ 3.çªç„¶ friend.id å˜æˆäº† 2 4.é¡µé¢é‡æ–°æ¸²æŸ“ 5.æ¸…é™¤ friend.id=1 çš„ç»‘å®š 6.æ›¿ friend.id=2 çš„æœ‹å‹æ³¨å†Œ<br>â€¦</p><h4 id="æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"><a href="#æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°" class="headerlink" title="æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"></a>æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°</h4><p>æˆ‘ä»¬åªéœ€è¦ç»™ useEffect ä¼ ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰ react åªæœ‰å½“è¿™ä¸ªå‚æ•°çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘ä»¬ä¼ çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;, [count]); <span class="comment">// åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€å¥</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ª<code>ç©ºæ•°ç»„[]</code>æ—¶ï¼Œå…¶å®å°±ç›¸å½“äºåªåœ¨<code>é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œ</code>ã€‚ä¹Ÿå°±æ˜¯ componentDidMount åŠ  componentWillUnmount çš„æ¨¡å¼ã€‚ä¸è¿‡è¿™ç§ç”¨æ³•å¯èƒ½å¸¦æ¥ bugï¼Œå°‘ç”¨ã€‚</p><h3 id="æ€ä¹ˆå†™è‡ªå®šä¹‰çš„-Effect-Hooks"><a href="#æ€ä¹ˆå†™è‡ªå®šä¹‰çš„-Effect-Hooks" class="headerlink" title="æ€ä¹ˆå†™è‡ªå®šä¹‰çš„ Effect Hooks?"></a>æ€ä¹ˆå†™è‡ªå®šä¹‰çš„ Effect Hooks?</h3><p>ä¸ºä»€ä¹ˆè¦è‡ªå·±å»å†™ä¸€ä¸ª Effect Hooks? è¿™æ ·æˆ‘ä»¬æ‰èƒ½æŠŠå¯ä»¥å¤ç”¨çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå¯ä»¥éšæ„æ’æ‹”çš„â€œæ’é”€â€ï¼Œå“ªä¸ªç»„ä»¶è¦ç”¨æ¥ï¼Œæˆ‘å°±æ’è¿›å“ªä¸ªç»„ä»¶é‡Œï¼Œso easyï¼çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œä½ å°±æ˜ç™½äº†ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢å†™çš„ FriendStatus ç»„ä»¶ä¸­åˆ¤æ–­æœ‹å‹æ˜¯å¦åœ¨çº¿çš„åŠŸèƒ½æŠ½å‡ºæ¥ï¼Œæ–°å»ºä¸€ä¸ª useFriendStatus çš„ hook ä¸“é—¨ç”¨æ¥åˆ¤æ–­æŸä¸ª id æ˜¯å¦åœ¨çº¿ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFriendStatus</span>(<span class="params">friendID</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">    setIsOnline(status.isOnline);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> isOnline;</span><br><span class="line">&#125;</span><br><span class="line">============è¿™æ—¶å€™FriendStatusç»„ä»¶å°±å¯ä»¥ç®€å†™ä¸ºï¼š</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendStatus</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isOnline === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Loading...&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> isOnline ? <span class="string">&#x27;Online&#x27;</span> : <span class="string">&#x27;Offline&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡å¦‚åˆ«çš„ç»„ä»¶éœ€è¦ä¸€ä¸ªæœ‹å‹åˆ—è¡¨ä¹Ÿéœ€è¦æ˜¾ç¤ºæ˜¯å¦åœ¨çº¿çš„ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendListItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å¼•å…¥æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">isOnline</span> ? &quot;<span class="attr">green</span>&quot; <span class="attr">:</span> &quot;<span class="attr">black</span>&quot; &#125;&#125;&gt;</span>&#123;props.friend.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯-useContext"><a href="#ä»€ä¹ˆæ˜¯-useContext" class="headerlink" title="ä»€ä¹ˆæ˜¯ useContext"></a>ä»€ä¹ˆæ˜¯ useContext</h3><p>ç”¨æ¥å¤„ç†å¤šå±‚çº§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œåœ¨ä»¥å‰ç»„ä»¶æ ‘ç§ï¼Œè·¨å±‚çº§ç¥–å…ˆç»„ä»¶æƒ³è¦ç»™å­™å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œé™¤äº†ä¸€å±‚å±‚ props å¾€ä¸‹é€ä¼ ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ React Context API æ¥å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; Provider, Consumer &#125; = React.createContext(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Consumer</span>&gt;</span>&#123;color =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">Consumer</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Provider value=&#123;<span class="string">&quot;grey&quot;</span>&#125;&gt;</span><br><span class="line">      &lt;Foo /&gt;</span><br><span class="line">    &lt;/Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025141519.png"                      alt=""                ></p><p>React Hooks ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useContext è¿›è¡Œæ”¹é€ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ¥å—è¿™ä¸ªå˜é‡</span></span><br><span class="line">  <span class="keyword">const</span> color = useContext(colorContext);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¦–å…ˆå£°æ˜ä¸€ä¸ªå˜é‡</span></span><br><span class="line"><span class="keyword">const</span> colorContext = React.createContext(<span class="string">&quot;gray&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;colorContext.Provider value=&#123;<span class="string">&quot;red&quot;</span>&#125;&gt;</span><br><span class="line">      &lt;Foo /&gt;</span><br><span class="line">    &lt;/colorContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025141949.png"                      alt=""                ><br>ä¼ é€’ç»™ useContext çš„æ˜¯ context è€Œä¸æ˜¯ consumerï¼Œè¿”å›å€¼å³æ˜¯æƒ³è¦é€ä¼ çš„æ•°æ®äº†ã€‚ç”¨æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ useContext å¯ä»¥è§£å†³ Consumer å¤šçŠ¶æ€åµŒå¥—çš„é—®é¢˜ã€‚</p><p>åŸæœ¬åµŒå¥—çš„æ–¹æ³•å±‚çº§å¤ªå¤š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HeaderBar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;CurrentUser.Consumer&gt;</span><br><span class="line">      &#123;<span class="function"><span class="params">user</span> =&gt;</span></span><br><span class="line">        &lt;Notifications.Consumer&gt;</span><br><span class="line">          &#123;<span class="function"><span class="params">notifications</span> =&gt;</span></span><br><span class="line">            &lt;header&gt;</span><br><span class="line">              Welcome back, &#123;user.name&#125;!</span><br><span class="line">              You have &#123;notifications.length&#125; notifications.</span><br><span class="line">            &lt;/header&gt;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/CurrentUser.Consumer&gt;</span><br><span class="line">  );&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ç”¨ useContext</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HeaderBar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æƒ³è¦ä¼ è¿‡æ¥çš„å€¼ç›´æ¥ç”¨useContextè¯»å–å³å¯,å¯è¯»æ€§å¤§å¤§å¢åŠ </span></span><br><span class="line">  <span class="keyword">const</span> user = useContext(CurrentUser);</span><br><span class="line">  <span class="keyword">const</span> notifications = useContext(Notifications);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">      Welcome back, &#123;user.name&#125;! You have &#123;notifications.length&#125; notifications.</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯-useReducer"><a href="#ä»€ä¹ˆæ˜¯-useReducer" class="headerlink" title="ä»€ä¹ˆæ˜¯ useReducer"></a>ä»€ä¹ˆæ˜¯ useReducer</h3><p>è¿™ä¸ª Hooks åœ¨ä½¿ç”¨ä¸Šå‡ ä¹è·Ÿ Redux/React-Redux ä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€ç¼ºå°‘çš„å°±æ˜¯æ— æ³•ä½¿ç”¨ redux æä¾›çš„ä¸­é—´ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="keyword">const</span> initData = &#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;add&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.count + action.payload &#125;;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;remove&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.count - action.payload &#125;;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;é”™è¯¯&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initData);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;h1&gt;Count:&#123;state.count&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;add&quot;</span>, <span class="attr">payload</span>: <span class="number">5</span> &#125;)&#125;&gt;å¢åŠ &lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;remove&quot;</span>, <span class="attr">payload</span>: <span class="number">1</span> &#125;)&#125;&gt;å‡å°‘&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2019-10-25 14.51.21.gif"                      alt=""                ><br><strong>ç”¨æ³•è·Ÿ Redux åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œç®—æ˜¯æä¾›ä¸€ä¸ª mini çš„ Redux ç‰ˆæœ¬ã€‚</strong></p><h3 id="ä»€ä¹ˆæ˜¯-useCallback"><a href="#ä»€ä¹ˆæ˜¯-useCallback" class="headerlink" title="ä»€ä¹ˆæ˜¯ useCallback"></a>ä»€ä¹ˆæ˜¯ useCallback</h3><p>å››ä¸ªå­—:è®°å¿†å‡½æ•°<br>åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çŠ¯ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;SomeComponent</span><br><span class="line">          style=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">14</span> &#125;&#125;</span><br><span class="line">          doSomething=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;do something&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2019-10-25 15.02.04.gif"                      alt=""                ><br>è¿™æ ·å†™æœ‰ä»€ä¹ˆåå¤„å‘¢ï¼Ÿä¸€æ—¦ App ç»„ä»¶çš„ props æˆ–è€…çŠ¶æ€æ”¹å˜äº†å°±ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå³ä½¿è·Ÿ SomeComponent ç»„ä»¶ä¸ç›¸å…³ï¼Œç”±äºæ¯æ¬¡ render éƒ½ä¼šäº§ç”Ÿæ–°çš„ style å’Œ doSomethingï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ SomeComponent é‡æ–°æ¸²æŸ“ï¼Œå€˜è‹¥ <strong>SomeComponent æ˜¯ä¸€ä¸ªå¤§å‹çš„ç»„ä»¶æ ‘</strong>ï¼Œè¿™æ ·çš„ Virtual Dom çš„æ¯”è¾ƒæ˜¾ç„¶æ˜¯å¾ˆæµªè´¹çš„ï¼Œè§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°†å‚æ•°æŠ½ç¦»æˆå˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fontSizeStyle = &#123; <span class="attr">fontSize</span>: <span class="number">14</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">  doSomething = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;do something&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;SomeComponent style=&#123;fontSizeStyle&#125; doSomething=&#123;<span class="built_in">this</span>.doSomething&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ this è¿™ä¸ªå¯¹è±¡æ¥å­˜å‚¨å‡½æ•°ï¼Œè€Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ²¡åŠæ³•è¿›è¡ŒæŒ‚è½½äº†ã€‚æ‰€ä»¥å‡½æ•°ç»„ä»¶åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™å¦‚æœæœ‰ä¼ é€’å‡½æ•°çš„è¯<code>éƒ½ä¼šé‡æ¸²æŸ“å­ç»„ä»¶</code>ã€‚</p><p>è€Œæœ‰äº† <code>useCallback</code> å°±ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥é€šè¿‡ useCallback è·å¾—ä¸€ä¸ªè®°å¿†åçš„å‡½æ•°ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2019-10-25 15.26.00.gif"                      alt=""                ></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> memoizedHandleClick = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Click happened&quot;</span>);</span><br><span class="line">    setCount(count + <span class="number">1</span>);</span><br><span class="line">  &#125;, []); <span class="comment">// ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      Count:&#123;count&#125;</span><br><span class="line">      &lt;SomeComponent doSomething=&#123;memoizedHandleClick&#125;&gt;Click Me&lt;/SomeComponent&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€è§„çŸ©ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¸€æ—¦å€¼æˆ–è€…å¼•ç”¨å‘ç”Ÿæ”¹å˜ï¼ŒuseCallback å°±ä¼šé‡æ–°è¿”å›ä¸€ä¸ªæ–°çš„è®°å¿†å‡½æ•°æä¾›ç»™åé¢è¿›è¡Œæ¸²æŸ“ã€‚</p><p>è¿™æ ·åªè¦å­ç»„ä»¶ç»§æ‰¿äº† PureComponent æˆ–è€…ä½¿ç”¨ React.memo å°±å¯ä»¥æœ‰æ•ˆé¿å…ä¸å¿…è¦çš„ VDOM æ¸²æŸ“ã€‚<br>è¿˜æœ‰ä¸€äº›æ³¨æ„çš„äº‹æƒ…å¦‚æœæ­¤æ—¶å­ç»„ä»¶å†ä¼ å…¥å…¶ä»–çš„å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> memoizedHandleClick = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Click happened&quot;</span>);</span><br><span class="line">    setCount(count + <span class="number">1</span>);</span><br><span class="line">  &#125;, []); <span class="comment">// ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      Count:&#123;count&#125;</span><br><span class="line">      &lt;SomeComponent doSomething=&#123;memoizedHandleClick&#125; count=&#123;count&#125;&gt;</span><br><span class="line">        Click Me</span><br><span class="line">      &lt;/SomeComponent&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªæ‰§è¡Œä¸€æ¬¡å› ä¸ºæ•°ç»„ä¸ºç©ºä»£è¡¨åªæ‰§è¡Œä¸€æ¬¡<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025153344.png"                      alt=""                ></p><h3 id="ä»€ä¹ˆæ˜¯-useMemo"><a href="#ä»€ä¹ˆæ˜¯-useMemo" class="headerlink" title="ä»€ä¹ˆæ˜¯ useMemo"></a>ä»€ä¹ˆæ˜¯ useMemo</h3><p>useCallback çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ç”± useMemo æ‰€å–ä»£ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ä½¿ç”¨ useMemo è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> memoizedHandleClick = useMemo(</span><br><span class="line">  () =&gt; <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Click happened&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (count &lt; <span class="number">3</span>) &#123;</span><br><span class="line">      setCount(count + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  [count]</span><br><span class="line">); <span class="comment">// ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br></pre></td></tr></table></figure><p>å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼š</p><ol><li>useCallback <code>ä¸ä¼šæ‰§è¡Œ</code>ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ï¼Œè€Œæ˜¯å°†å®ƒè¿”å›ç»™ä½ ï¼Œ</li><li>useMemo <code>ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°</code>å¹¶ä¸”å°†å‡½æ•°æ‰§è¡Œç»“æœè¿”å›ç»™ä½ ã€‚<br>æ‰€ä»¥åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥è¿”å› handleClick æ¥è¾¾åˆ°å­˜å‚¨å‡½æ•°çš„ç›®çš„ã€‚</li></ol><p><strong> useCallback å¸¸ç”¨è®°å¿†äº‹ä»¶å‡½æ•°ï¼Œç”Ÿæˆè®°å¿†åçš„äº‹ä»¶å‡½æ•°å¹¶ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚</strong><br><strong> useMemo æ›´é€‚åˆç»è¿‡å‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæ¯”å¦‚è®°å¿†ç»„ä»¶ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">&#123; a, b &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Only re-rendered if `a` changes:</span></span><br><span class="line">  <span class="keyword">const</span> child1 = useMemo(<span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Child1</span> <span class="attr">a</span>=<span class="string">&#123;a&#125;</span> /&gt;</span></span>, [a]);</span><br><span class="line">  <span class="comment">// Only re-rendered if `b` changes:</span></span><br><span class="line">  <span class="keyword">const</span> child2 = useMemo(<span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Child2</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;</span> /&gt;</span></span>, [b]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &#123;child1&#125;</span><br><span class="line">      &#123;child2&#125;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ a/b æ”¹å˜æ—¶ï¼Œchild1/child2 æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚ä»ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œåªæœ‰åœ¨ç¬¬äºŒä¸ªå‚æ•°æ•°ç»„çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-useRef"><a href="#ä»€ä¹ˆæ˜¯-useRef" class="headerlink" title="ä»€ä¹ˆæ˜¯ useRef"></a>ä»€ä¹ˆæ˜¯ useRef</h3><p>useRef è·Ÿ createRef ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆå¯¹ DOM å¯¹è±¡çš„å¼•ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [name, setName] = useState(<span class="string">&quot;Nate&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> nameRef = useRef();</span><br><span class="line">  <span class="keyword">const</span> submitButton = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setName(nameRef.current.value);</span><br><span class="line">    nameRef.current.value = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;p&gt;&#123;name&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input ref=&#123;nameRef&#125; type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;button&quot;</span> onClick=&#123;submitButton&#125;&gt;</span><br><span class="line">          Submit</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2019-10-25 15.51.16.gif"                      alt=""                ><br>useRef è¿”å›çš„å€¼ä¼ é€’ç»™ç»„ä»¶æˆ–è€… DOM çš„ ref å±æ€§ï¼Œå°±å¯ä»¥é€šè¿‡ ref.current å€¼è®¿é—®ç»„ä»¶æˆ–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥å¯¹ DOM è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚</p><p>å½“ç„¶ useRef è¿œæ¯”ä½ æƒ³è±¡ä¸­çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒuseRef çš„åŠŸèƒ½æœ‰ç‚¹åƒç±»å±æ€§ï¼Œæˆ–è€…è¯´æ‚¨æƒ³è¦åœ¨ç»„ä»¶ä¸­è®°å½•ä¸€äº›å€¼ï¼Œå¹¶ä¸”è¿™äº›å€¼åœ¨ç¨åå¯ä»¥æ›´æ”¹ã€‚</p><p>åˆ©ç”¨ useRef å°±å¯ä»¥ç»•è¿‡ Capture Value çš„ç‰¹æ€§ã€‚å¯ä»¥è®¤ä¸º ref åœ¨æ‰€æœ‰ Render è¿‡ç¨‹ä¸­ä¿æŒç€å”¯ä¸€å¼•ç”¨ï¼Œå› æ­¤æ‰€æœ‰å¯¹ ref çš„èµ‹å€¼æˆ–å–å€¼ï¼Œæ‹¿åˆ°çš„éƒ½åªæœ‰ä¸€ä¸ªæœ€ç»ˆçŠ¶æ€ï¼Œè€Œä¸ä¼šåœ¨æ¯ä¸ª Render é—´å­˜åœ¨éš”ç¦»ã€‚å‚è€ƒä¾‹å­ï¼šç²¾è¯»ã€ŠFunction VS Class ç»„ä»¶ã€‹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025155425.png"                      alt=""                ></p><h4 id="ä»€ä¹ˆæ˜¯-React-Hooks-ä¸­å­˜åœ¨-Capture-Value-çš„ç‰¹æ€§"><a href="#ä»€ä¹ˆæ˜¯-React-Hooks-ä¸­å­˜åœ¨-Capture-Value-çš„ç‰¹æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯ React Hooks ä¸­å­˜åœ¨ Capture Value çš„ç‰¹æ€§"></a>ä»€ä¹ˆæ˜¯ React Hooks ä¸­å­˜åœ¨ Capture Value çš„ç‰¹æ€§</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MessageThread</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> showMessage = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;You said: &quot;</span> + message);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleSendClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(showMessage, <span class="number">3000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleMessageChange = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    setMessage(e.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;input value=&#123;message&#125; onChange=&#123;handleMessageChange&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleSendClick&#125;&gt;Send&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç‚¹å‡» Send æŒ‰é’®å,å†æ¬¡ä¿®æ”¹è¾“å…¥æ¡†çš„å€¼ï¼Œ3 ç§’åçš„è¾“å‡ºä¾ç„¶æ˜¯ç‚¹å‡»å‰è¾“å…¥æ¡†çš„å€¼ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ capture value çš„ç‰¹æ€§ã€‚<br>è€Œåœ¨ç±»ç»„ä»¶ä¸­ 3 ç§’åè¾“å‡ºçš„å°±æ˜¯ä¿®æ”¹åçš„å€¼ï¼Œå› ä¸ºè¿™æ—¶å€™ message æ˜¯æŒ‚è½½åœ¨ this å˜é‡ä¸Šï¼Œå®ƒä¿ç•™çš„æ˜¯ä¸€ä¸ªå¼•ç”¨å€¼ï¼Œå¯¹ this å±æ€§çš„è®¿é—®éƒ½ä¼šè·å–åˆ°æœ€æ–°çš„å€¼ã€‚<br>è®²åˆ°è¿™é‡Œä½ åº”è¯¥å°±æ˜ç™½äº†ï¼ŒuseRef åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå°±å¯ä»¥æœ‰æ•ˆè§„é¿ React Hooks ä¸­ Capture Value ç‰¹æ€§,<code>refæ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„å€¼</code>.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MessageThread</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> latestMessage = useRef(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> showMessage = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;You said: &quot;</span> + latestMessage.current);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleSendClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(showMessage, <span class="number">3000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleMessageChange = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    latestMessage.current = e.target.value;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;input value=&#123;latestMessage.current.value&#125; onChange=&#123;handleMessageChange&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleSendClick&#125;&gt;Send&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦å°†èµ‹å€¼ä¸å–å€¼çš„å¯¹è±¡å˜æˆ useRefï¼Œè€Œä¸æ˜¯ useStateï¼Œå°±å¯ä»¥èº²è¿‡ capture value ç‰¹æ€§ï¼Œåœ¨ 3 ç§’åå¾—åˆ°æœ€æ–°çš„å€¼ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-useImperativeMethods"><a href="#ä»€ä¹ˆæ˜¯-useImperativeMethods" class="headerlink" title="ä»€ä¹ˆæ˜¯ useImperativeMethods"></a>ä»€ä¹ˆæ˜¯ useImperativeMethods</h3><p>é€šè¿‡ useImperativeHandle ç”¨äºè®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…çš„ç´¢</p><h3 id="ä»€ä¹ˆæ˜¯-useMutationEffect"><a href="#ä»€ä¹ˆæ˜¯-useMutationEffect" class="headerlink" title="ä»€ä¹ˆæ˜¯ useMutationEffect"></a>ä»€ä¹ˆæ˜¯ useMutationEffect</h3><h3 id="ä»€ä¹ˆæ˜¯-useLayoutEffect"><a href="#ä»€ä¹ˆæ˜¯-useLayoutEffect" class="headerlink" title="ä»€ä¹ˆæ˜¯ useLayoutEffect"></a>ä»€ä¹ˆæ˜¯ useLayoutEffect</h3><p>useLayoutEffect åŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨<br>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ useEffect å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŒæ­¥è°ƒç”¨ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¯¹ DOM çš„æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect, useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [width, setWidth] = useState(<span class="number">0</span>);</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;useEffect&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> title = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#title&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> titleWidth = title.getBoundingClientRect().width;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;useLayoutEffect&quot;</span>, width, titleWidth, title.getBoundingClientRect());</span><br><span class="line">    <span class="keyword">if</span> (width !== titleWidth) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        setWidth(titleWidth);</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1 id=<span class="string">&quot;title&quot;</span>&gt;hello&lt;/h1&gt;</span><br><span class="line">      &lt;h2&gt;&#123;width&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191025162213.png"                      alt=""                ></p><h5 id="åŠ å…¥å®šæ—¶å™¨åå†çœ‹çœ‹æ‰§è¡Œé¡ºåº"><a href="#åŠ å…¥å®šæ—¶å™¨åå†çœ‹çœ‹æ‰§è¡Œé¡ºåº" class="headerlink" title="åŠ å…¥å®šæ—¶å™¨åå†çœ‹çœ‹æ‰§è¡Œé¡ºåº"></a>åŠ å…¥å®šæ—¶å™¨åå†çœ‹çœ‹æ‰§è¡Œé¡ºåº</h5><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2019-10-25 16.25.50.gif"                      alt=""                ></p><h2 id="React-Hooks-ä¸è¶³"><a href="#React-Hooks-ä¸è¶³" class="headerlink" title="React Hooks ä¸è¶³"></a>React Hooks ä¸è¶³</h2><p>å°½ç®¡æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä¾‹å­çœ‹åˆ° React Hooks çš„å¼ºå¤§ä¹‹å¤„ï¼Œä¼¼ä¹ç±»ç»„ä»¶å®Œå…¨éƒ½å¯ä»¥ä½¿ç”¨ React Hooks é‡å†™ã€‚ä½†æ˜¯å½“ä¸‹ v16.8 çš„ç‰ˆæœ¬ä¸­ï¼Œè¿˜æ— æ³•å®ç° <code>getSnapshotBeforeUpdate</code> å’Œ <code>componentDidCatch</code> è¿™ä¸¤ä¸ªåœ¨ç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å®˜æ–¹ä¹Ÿè®¡åˆ’åœ¨ä¸ä¹…çš„å°†æ¥åœ¨ React Hooks è¿›è¡Œå®ç°,<strong>æœŸå¾…å§!</strong>ğŸ˜„ğŸ’ªğŸ»</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redux å¼‚æ­¥æ–¹æ¡ˆé€‰å‹</title>
      <link href="2019/10/27/Redux%E5%BC%82%E6%AD%A5%E6%96%B9%E6%A1%88%E9%80%89%E5%9E%8B/"/>
      <url>2019/10/27/Redux%E5%BC%82%E6%AD%A5%E6%96%B9%E6%A1%88%E9%80%89%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„ Redux å¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚</p><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/reduxWorkStep.jpg"                      alt=""                ></p><blockquote><p>ç”±äº Redux çš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚</p></blockquote><h3 id="redux-thunkï¼šæŒ‡è·¯å…ˆé©±"><a href="#redux-thunkï¼šæŒ‡è·¯å…ˆé©±" class="headerlink" title="redux-thunkï¼šæŒ‡è·¯å…ˆé©±"></a>redux-thunkï¼šæŒ‡è·¯å…ˆé©±</h3><blockquote><p>Redux æœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„ Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„ actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€š Actionï¼Œä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰ Redux çš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p></blockquote><p><strong>ç¼ºç‚¹</strong>:å°±æ˜¯é‡å¤çš„æ¨¡æ¿ä»£ç å¤ªå¤šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Button, Progress,Loading&#125; <span class="keyword">from</span> <span class="string">&#x27;element-react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  onGetData,</span><br><span class="line">  onGetDataSuccess,</span><br><span class="line">  onGetDataFAILED,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      onAdd,</span><br><span class="line">      data,</span><br><span class="line">      loaddingVisible,</span><br><span class="line">    &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;counter_wrap&quot;</span>&gt;</span><br><span class="line">      ...</span><br><span class="line">              &lt;Button type=<span class="string">&quot;primary&quot;</span> onClick=&#123;onAsyncGetData&#125;&gt;å¼‚æ­¥åŠ è½½&lt;/Button&gt;</span><br><span class="line">        &lt;Loading text=<span class="string">&quot;æ‹¼å‘½åŠ è½½ä¸­&quot;</span> loading=&#123;!!loaddingVisible&#125;&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            data.length === <span class="number">0</span> ? <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>åŠ è½½ä¹‹åå¯è§<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data[0].name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">          &#125;</span><br><span class="line">        &lt;/Loading&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;value,loaddingVisible,data&#125; = state;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value:value,</span><br><span class="line">    data:data,</span><br><span class="line">    loaddingVisible:loaddingVisible</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    onAsyncGetData:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">       dispatch(onGetData())</span><br><span class="line">      fetch(<span class="string">&#x27;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&#x27;</span>, &#123;</span><br><span class="line">        method: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">        body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">        headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">        .then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(data)</span><br><span class="line">          <span class="keyword">const</span> &#123;success,results&#125; = data;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            dispatch(onGetDataSuccess(results))</span><br><span class="line">          &#125;,<span class="number">2000</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(error)</span><br><span class="line">          dispatch(onGetDataFAILED())</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(App)</span><br></pre></td></tr></table></figure><p>è¿™å·²ç»æ˜¯æœ€ç®€å•çš„åœºæ™¯äº†ï¼Œè¯·æ³¨æ„ï¼šæˆ‘ä»¬ç”šè‡³è¿˜<strong>æ²¡å†™ä¸€è¡Œä¸šåŠ¡é€»è¾‘</strong>ï¼Œå¦‚æœæ¯ä¸ªå¼‚æ­¥å¤„ç†éƒ½åƒè¿™æ ·ï¼Œé‡å¤ä¸”æ— æ„ä¹‰çš„å·¥ä½œä¼šå˜æˆæ˜æ˜¾çš„é˜»ç¢ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œåƒ<code>GET_DATA_SUCCESS</code>ã€<code>GET_DATA_FAILED</code>è¿™æ ·çš„å­—ç¬¦ä¸²å£°æ˜ä¹Ÿéå¸¸æ— è¶£ä¸”æ˜“é”™ã€‚<br>å¦‚æœä¸€ä¸ªå¼‚æ­¥éœ€è¦é‚£ä¹ˆå¤šçŠ¶æ€,é‚£ä¹ˆ 5,6 ä¸ªå¼‚æ­¥éƒ½éœ€è¦é‚£ä¹ˆå¤šçŠ¶æ€.å¤ªç¹çäº†</p><h3 id="redux-actionsï¼šç®€åŒ–-redux-çš„ä½¿ç”¨"><a href="#redux-actionsï¼šç®€åŒ–-redux-çš„ä½¿ç”¨" class="headerlink" title="redux-actionsï¼šç®€åŒ– redux çš„ä½¿ç”¨"></a>redux-actionsï¼šç®€åŒ– redux çš„ä½¿ç”¨</h3><p>Redux è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯é‡Œé¢è¿˜æ˜¯æœ‰äº›é‡å¤ä»£ç ï¼Œæ‰€ä»¥æœ‰äº† redux-actions æ¥ç®€åŒ–é‚£äº›é‡å¤ä»£ç ã€‚</p><p>è¿™éƒ¨åˆ†ç®€åŒ–å·¥ä½œä¸»è¦é›†ä¸­åœ¨æ„é€  action å’Œå¤„ç† reducers æ–¹é¢ã€‚</p><p>å…ˆæ¥çœ‹çœ‹åŸå…ˆçš„ actions</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> T <span class="keyword">from</span> <span class="string">&quot;./actionTypes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> changeBtnText = <span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: T.CHANGE_BTN_TEXT,</span><br><span class="line">    payload: text</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> changeBtnTextAsync = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!getState().isLoading) &#123;</span><br><span class="line">      dispatch(changeBtnText(<span class="string">&quot;æ­£åœ¨åŠ è½½ä¸­&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    axios</span><br><span class="line">      .get(<span class="string">&quot;http://test.com&quot;</span>)</span><br><span class="line">      .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getState().isLoading) &#123;</span><br><span class="line">          dispatch(changeBtnText(<span class="string">&quot;åŠ è½½å®Œæ¯•&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        dispatch(changeBtnText(<span class="string">&quot;åŠ è½½æœ‰è¯¯&quot;</span>));</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ¥çœ‹çœ‹ä¿®æ”¹åçš„ï¼š<br>è¿™é‡Œæ³¨æ„åˆ°ï¼Œå¼‚æ­¥çš„ action å°±ä¸è¦ç”¨ createActionï¼Œå› ä¸ºè¿™ä¸ª createAction è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå¯¼è‡´ redux-thunk çš„ä»£ç æ²¡æœ‰èµ·åˆ°ä½œç”¨ã€‚</p><p>è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ createActions è¿™ä¸ªå‡½æ•°åŒæ—¶åˆ›å»ºå¤šä¸ª actionï¼Œä½†æ˜¯è®²é“ç†ï¼Œè¿™ä¸ªè¯­æ³•å¾ˆå¥‡æ€ªï¼Œç”¨ createAction å°±å¥½ã€‚</p><p>åŒæ · redux-actions å¯¹ reducer çš„éƒ¨åˆ†ä¹Ÿè¿›è¡Œäº†å¤„ç†ï¼Œæ¯”å¦‚ handleAction ä»¥åŠ handelActionsã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> T <span class="keyword">from</span> <span class="string">&quot;./actionTypes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createAction &#125; <span class="keyword">from</span> <span class="string">&quot;redux-actions&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šactionä¼ å€¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> changeBtnText = createAction(T.CHANGE_BTN_TEXT, <span class="function"><span class="params">text</span> =&gt;</span> text);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> changeBtnTextAsync = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!getState().isLoading) &#123;</span><br><span class="line">      dispatch(changeBtnText(<span class="string">&quot;æ­£åœ¨åŠ è½½ä¸­&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    axios</span><br><span class="line">      .get(<span class="string">&quot;http://test.com&quot;</span>)</span><br><span class="line">      .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getState().isLoading) &#123;</span><br><span class="line">          dispatch(changeBtnText(<span class="string">&quot;åŠ è½½å®Œæ¯•&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        dispatch(changeBtnText(<span class="string">&quot;åŠ è½½æœ‰è¯¯&quot;</span>));</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>çœ‹çš„å‡ºæ¥<code>actions</code>çš„ä»£ç é‡ä¹Ÿæ²¡æœ‰å‘ç”Ÿå˜åŒ–,å†çœ‹çœ‹<code>reducers</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; handleActions &#125; <span class="keyword">from</span> <span class="string">&quot;redux-actions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> T <span class="keyword">from</span> <span class="string">&quot;./actionTypes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  btnText: <span class="string">&quot;æˆ‘æ˜¯æŒ‰é’®&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pageMainReducer = handleActions(</span><br><span class="line">  &#123;</span><br><span class="line">    [T.CHANGE_BTN_TEXT]: &#123;</span><br><span class="line">      <span class="function"><span class="title">next</span>(<span class="params">state, action</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          btnText: action.payload</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">throw</span>(state) &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  initialState</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pageMainReducer;</span><br></pre></td></tr></table></figure><h3 id="redux-promiseï¼šredux-actions-çš„å¥½åŸºå‹ï¼Œè½»æ¾åˆ›å»ºå’Œå¤„ç†å¼‚æ­¥-action"><a href="#redux-promiseï¼šredux-actions-çš„å¥½åŸºå‹ï¼Œè½»æ¾åˆ›å»ºå’Œå¤„ç†å¼‚æ­¥-action" class="headerlink" title="redux-promiseï¼šredux-actions çš„å¥½åŸºå‹ï¼Œè½»æ¾åˆ›å»ºå’Œå¤„ç†å¼‚æ­¥ action"></a>redux-promiseï¼šredux-actions çš„å¥½åŸºå‹ï¼Œè½»æ¾åˆ›å»ºå’Œå¤„ç†å¼‚æ­¥ action</h3><p>ç”±äº redux-thunk å†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚<code>redux-promise</code>åˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚</p><p>å®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ª middlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰ action çš„ payload å±æ€§æ˜¯ Promise å¯¹è±¡æ—¶ï¼Œå°±ä¼šï¼š</p><ol><li>è‹¥ resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤ action çš„æ‹·è´ï¼Œä½† payload ä¸º promise çš„ valueï¼Œå¹¶è®¾ status å±æ€§ä¸ºâ€successâ€</li><li>è‹¥ rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤ action çš„æ‹·è´ï¼Œä½† payload ä¸º promise çš„ reasonï¼Œå¹¶è®¾ status å±æ€§ä¸ºâ€errorâ€</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Button, Progress,Loading&#125; <span class="keyword">from</span> <span class="string">&#x27;element-react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createAction&#125;  <span class="keyword">from</span> <span class="string">&#x27;redux-actions&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  onAddToPromise,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      onAdd,</span><br><span class="line">      data,</span><br><span class="line">      error,</span><br><span class="line">      loaddingVisible,</span><br><span class="line">      onRemove,</span><br><span class="line">      onAddIfOdd,</span><br><span class="line">      onAsyncAddOne,</span><br><span class="line">      onAsyncGetData,</span><br><span class="line">      onPromise,</span><br><span class="line">    &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;counter_wrap&quot;</span>&gt;</span><br><span class="line">         ...</span><br><span class="line">        &lt;Button type=<span class="string">&quot;primary&quot;</span> onClick=&#123;onPromise&#125;&gt;<span class="built_in">Promise</span>å¼‚æ­¥åŠ è½½&lt;/Button&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          error.length &gt; <span class="number">0</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;error&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        &lt;h1&gt;&#123;data&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;value,loaddingVisible,data,error&#125; = state;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value:value,</span><br><span class="line">    data:data,</span><br><span class="line">    error:error,</span><br><span class="line">    loaddingVisible:loaddingVisible</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    onPromise:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      dispatch(onGetData())</span><br><span class="line">      <span class="comment">//createActionå‡½æ•°çš„ç¬¬ä¸€ä¸ªå°±æ˜¯typeå€¼ï¼Œåé¢æ¥å—ä¸€ä¸ªå‡½æ•°ã€‚</span></span><br><span class="line">      <span class="keyword">const</span> promise = createAction(<span class="string">&#x27;ADD_PROMISE&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">           <span class="keyword">return</span>  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">             fetch(<span class="string">&#x27;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&#x27;</span>, &#123;</span><br><span class="line">               method: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">               body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">               headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">                 <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">               &#125;)</span><br><span class="line">             &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">               .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                  resolve(data)</span><br><span class="line">               &#125;).catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">                  reject(error)</span><br><span class="line">             &#125;)</span><br><span class="line">           &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>,promise())</span><br><span class="line">      dispatch(promise())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(App)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†çœ‹æ¥æ¥ reducer å¾—å†™æ³•<br><code>handleActions</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„ key å°±æ˜¯ action çš„ type çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åˆå§‹å€¼çš„è®¾ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//reducers.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; handleActions &#125; <span class="keyword">from</span> <span class="string">&quot;redux-actions&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initData = &#123;</span><br><span class="line">  value: <span class="number">0</span>,</span><br><span class="line">  data: [],</span><br><span class="line">  loaddingVisible: <span class="literal">false</span>,</span><br><span class="line">  error: <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> handleActions(</span><br><span class="line">  &#123;</span><br><span class="line">    ADD_PROMISE: &#123;</span><br><span class="line">      <span class="comment">//è¯·æ±‚æˆåŠŸå¤„ç†</span></span><br><span class="line">      <span class="function"><span class="title">next</span>(<span class="params">state, action</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; results, success &#125; = action.payload;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          data: results[<span class="number">0</span>].name</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//é”™è¯¯å¤„ç†</span></span><br><span class="line">      <span class="keyword">throw</span>(state, action) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          error: action.payload.toString()</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  initData</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191028000303.png"                      alt=""                ></p><p>é”™è¯¯å¾—æƒ…å†µä¸‹å¦‚ä½•è¿”å›å‘¢?<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191028000431.png"                      alt=""                ></p><h3 id="redux-å¤šä¸ªæ¥å£åŒæ—¶è°ƒç”¨"><a href="#redux-å¤šä¸ªæ¥å£åŒæ—¶è°ƒç”¨" class="headerlink" title="redux å¤šä¸ªæ¥å£åŒæ—¶è°ƒç”¨"></a>redux å¤šä¸ªæ¥å£åŒæ—¶è°ƒç”¨</h3><h4 id="å¹¶å‘æ±‚å€¼"><a href="#å¹¶å‘æ±‚å€¼" class="headerlink" title="å¹¶å‘æ±‚å€¼"></a>å¹¶å‘æ±‚å€¼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> onPromiseAction = createAction(<span class="string">&quot;ADD_PROMISE&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.all([asyncGetMockTest(), asyncGetMockTest2()])</span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;data&quot;</span>, data);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> asyncGetMockTest = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fetch(<span class="string">&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&quot;</span>, &#123;</span><br><span class="line">      method: <span class="string">&quot;POST&quot;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">      body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">      headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">      .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> asyncGetMockTest2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fetch(<span class="string">&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test2&quot;</span>, &#123;</span><br><span class="line">      method: <span class="string">&quot;POST&quot;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">      body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">      headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">      .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å†çœ‹çœ‹ reducers ä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  ADD_PROMISE: &#123;</span><br><span class="line">    <span class="function"><span class="title">next</span>(<span class="params">state, action</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;action&#x27;</span>,action)</span><br><span class="line">      <span class="comment">// actionæ¥å—åˆ°æ•°ç»„å¯¹æ•°ç»„å±•å¼€æ±‚å€¼</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">       ...state,</span><br><span class="line"></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">throw</span>(state, action) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;, initData);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191028172557.png"                      alt=""                ></p><h4 id="è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»å¦‚ä½•å¤„ç†"><a href="#è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»å¦‚ä½•å¤„ç†" class="headerlink" title="è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»å¦‚ä½•å¤„ç†"></a>è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»å¦‚ä½•å¤„ç†</h4><p>æ ¹æ®è¯·æ±‚ 3 ä¹‹åå†è°ƒç”¨è¯·æ±‚ 4</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> onPromiseAction = createAction(<span class="string">&quot;ADD_PROMISE&quot;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> test3 = <span class="keyword">await</span> asyncGetMockTest3();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;test3&quot;</span>, test3);</span><br><span class="line">  <span class="keyword">if</span> (test3.success) &#123;</span><br><span class="line">    <span class="keyword">const</span> test4 = <span class="keyword">await</span> asyncGetMockTest4();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(test4);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//test3</span></span><br><span class="line"><span class="keyword">const</span> asyncGetMockTest3 = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> fetch(<span class="string">&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test2&quot;</span>, &#123;</span><br><span class="line">    method: <span class="string">&quot;POST&quot;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">    headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> error;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//test4</span></span><br><span class="line"><span class="keyword">const</span> asyncGetMockTest4 = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> fetch(<span class="string">&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&quot;</span>, &#123;</span><br><span class="line">    method: <span class="string">&quot;POST&quot;</span>, <span class="comment">// or &#x27;PUT&#x27;</span></span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;&#125;), <span class="comment">// data can be `string` or &#123;object&#125;!</span></span><br><span class="line">    headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> error;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191028174119.png"                      alt=""                ></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»çš„æ¥è¯´ï¼š</p><ol><li>redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„çŠ¶æ€å®¹å™¨ï¼Œ</li><li>react-redux æ˜¯å°† store å’Œ react ç»“åˆèµ·æ¥ï¼Œä½¿å¾—æ•°æ®å±•ç¤ºå’Œä¿®æ”¹å¯¹äº react é¡¹ç›®è€Œè¨€æ›´ç®€å•</li><li>redux ä¸­é—´ä»¶å°±æ˜¯åœ¨ dispatch action å‰å¯¹ action åšä¸€äº›å¤„ç†</li><li>redux-thunk ç”¨äºå¯¹å¼‚æ­¥åšæ“ä½œ</li><li>redux-actions ç”¨äºç®€åŒ– redux æ“ä½œ</li><li>redux-promise å¯ä»¥é…åˆ redux-actions ç”¨æ¥å¤„ç† Promise å¯¹è±¡ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œæ›´ç®€å•</li><li>redux-saga å¯ä»¥èµ·åˆ°ä¸€ä¸ªæ§åˆ¶å™¨çš„ä½œç”¨ï¼Œé›†ä¸­å¤„ç†è¾¹é™…æ•ˆç”¨ï¼Œå¹¶ä½¿å¾—å¼‚æ­¥æ“ä½œçš„å†™æ³•æ›´ä¼˜é›…ã€‚</li><li>OKï¼Œè™½ç„¶è¯´ä¸æƒ³å†™é‚£ä¹ˆå¤šï¼Œç»“æœè¿˜æ˜¯å†™äº†ä¸€å¤§å †ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€ç±»å‹æ¨æ–­</title>
      <link href="2019/10/05/TypeScript%20%E7%B3%BB%E5%88%97%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/"/>
      <url>2019/10/05/TypeScript%20%E7%B3%BB%E5%88%97%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç±»å‹æ˜¯åœ¨å“ªé‡Œå¦‚ä½•è¢«æ¨æ–­çš„?</p></blockquote><a id="more"></a><p>TypeScript é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹</p><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">3</span>;</span><br></pre></td></tr></table></figure><p>å˜é‡<code>x</code>çš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚ è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å€¼å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚</p><h3 id="é€šç”¨ç±»å‹"><a href="#é€šç”¨ç±»å‹" class="headerlink" title="é€šç”¨ç±»å‹"></a>é€šç”¨ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = [<span class="number">0</span>, <span class="number">1</span>, <span class="literal">null</span>];</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191010164115.png"                      alt=""                ></p><p>ä¸ºäº†æ¨æ–­ x çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚ è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š<code>number</code>å’Œ<code>null</code>ã€‚ è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> zoo = [<span class="keyword">new</span> Rhino(), <span class="keyword">new</span> Elephant(), <span class="keyword">new</span> Snake()];</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®©<code>zoo</code>è¢«æ¨æ–­ä¸º<code>Animal[]</code>ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯<code>Animal</code>ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚ ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> zoo: Animal[] = [<span class="keyword">new</span> Rhino(), <span class="keyword">new</span> Elephant(), <span class="keyword">new</span> Snake()];</span><br></pre></td></tr></table></figure><h3 id="ä¸Šä¸‹æ–‡ç±»å‹"><a href="#ä¸Šä¸‹æ–‡ç±»å‹" class="headerlink" title="ä¸Šä¸‹æ–‡ç±»å‹"></a>ä¸Šä¸‹æ–‡ç±»å‹</h3><p>è¿™ä¸ªä¾‹å­ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹é”™è¯¯ï¼ŒTypeScript ç±»å‹æ£€æŸ¥å™¨ä½¿ç”¨<code>Window.onmousedown</code>å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚ å› æ­¤ï¼Œå°±èƒ½æ¨æ–­å‡º<code>event</code>å‚æ•°çš„ç±»å‹äº†ã€‚ å¦‚æœå‡½æ•°è¡¨è¾¾å¼ä¸æ˜¯åœ¨<code>ä¸Šä¸‹æ–‡ç±»å‹çš„ä½ç½®</code>ï¼Œ<code>event</code>å‚æ•°çš„ç±»å‹éœ€è¦æŒ‡å®šä¸º<code>any</code>ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šæŠ¥é”™äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.clickTime); <span class="comment">//&lt;- Error</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191010163529.png"                      alt=""                ><br>ä¿®æ”¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params">mouseEvent: any</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(mouseEvent.button); <span class="comment">//&lt;- Now, no error is given</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>ä¸Šä¸‹æ–‡å½’ç±»</code>ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚ é€šå¸¸åŒ…å«<code>å‡½æ•°çš„å‚æ•°</code>ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚ ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  public numLen: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bee</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createZoo</span>(<span class="params"></span>): <span class="title">Animal</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="keyword">new</span> Bee(), <span class="keyword">new</span> Lion()];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€æšä¸¾</title>
      <link href="2019/09/24/TypeScript%E7%B3%BB%E5%88%97%E6%9E%9A%E4%B8%BE/"/>
      <url>2019/09/24/TypeScript%E7%B3%BB%E5%88%97%E6%9E%9A%E4%B8%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯æšä¸¾"><a href="#ä»€ä¹ˆæ˜¯æšä¸¾" class="headerlink" title="ä»€ä¹ˆæ˜¯æšä¸¾"></a>ä»€ä¹ˆæ˜¯æšä¸¾</h2><p>å¦‚ TypeScript å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œæšä¸¾ç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹é›†çš„<code>æ‰©å……</code>ã€‚å¯¹äºç†Ÿæ‚‰ C# çš„å¼€å‘è€…æ¥è¯´ï¼Œæšä¸¾ç±»å‹å¹¶ä¸é™Œç”Ÿï¼Œå®ƒèƒ½å¤Ÿç»™ä¸€ç³»åˆ—<code>æ•°å€¼é›†åˆ</code>æä¾›å‹å¥½çš„<code>åç§°</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æšä¸¾è¡¨ç¤ºçš„æ˜¯<code>ä¸€ä¸ªå‘½åå…ƒç´ çš„é›†åˆ</code>ï¼Œå› è€Œå®ƒèƒ½å¤Ÿä½¿æ‚¨çš„ç¨‹åºé¿å…å› ç¡¬ç¼–ç çš„å€¼è€Œæ˜¾æ‚ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚<br><a id="more"></a></p><h3 id="ç®€å•è¯´èµ·"><a href="#ç®€å•è¯´èµ·" class="headerlink" title="ç®€å•è¯´èµ·"></a>ç®€å•è¯´èµ·</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯åŸºäº 0 çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªå€¼æ˜¯ 0ï¼Œåé¢çš„å€¼ä¾æ¬¡é€’å¢ã€‚ä¸è¦æ‹…å¿ƒï¼Œå½“ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æ˜¾å¼æŒ‡å®šï¼Œåªè¦ä¸å‡ºç°é‡å¤å³å¯ï¼Œæ²¡æœ‰è¢«æ˜¾å¼æŒ‡å®šçš„å€¼ï¼Œéƒ½ä¼šåœ¨å‰ä¸€ä¸ªå€¼çš„åŸºç¡€ä¸Šé€’å¢ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Color </span><br><span class="line">&#123;Red, </span><br><span class="line">Green, </span><br><span class="line">Blue&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red = <span class="number">1</span>, Green, Blue = <span class="number">4</span>&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>æšä¸¾æœ‰ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç‰¹æ€§ï¼Œå°±æ˜¯æ‚¨ä¹Ÿå¯ä»¥å‘æšä¸¾ä¼ é€’ä¸€ä¸ªæ•°å€¼ï¼Œç„¶åè·å–å®ƒå¯¹åº”çš„åç§°å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼ 2ï¼Œä½†æ˜¯ä¸æ¸…æ¥šåœ¨ Color æšä¸¾ä¸­ä¸ä¹‹å¯¹åº”çš„åç§°æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ¥è¿›è¡Œæ£€ç´¢ï¼š</p><h3 id="åå‘æ˜ å°„"><a href="#åå‘æ˜ å°„" class="headerlink" title="åå‘æ˜ å°„"></a>åå‘æ˜ å°„</h3><p>é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§ååšä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡ä¹‹å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº† åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red = <span class="number">1</span>, Green, Blue&#125;</span><br><span class="line"><span class="keyword">let</span> colorName: string = Color[<span class="number">2</span>];  <span class="comment">// 2å€¼çš„ä¸æ˜¯ä¸‹æ ‡ è€Œæ˜¯greençš„å€¼ &#x27;Green&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åƒä¸Šé¢çš„è¿™ç§å†™æ³•ä¸æ˜¯å¤ªå¥½ï¼Œå› ä¸ºå¦‚æœæ‚¨ç»™å®šçš„æ•°å€¼æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„æšä¸¾é¡¹ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ undefinedã€‚æ‰€ä»¥ï¼Œå¦‚æœæ‚¨æƒ³è¦å¾—åˆ°æŒ‡å®šæšä¸¾é¡¹çš„å­—ç¬¦ä¸²åç§°ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colorName: string = Color[Color.Green];  <span class="comment">// &#x27;Green&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²æšä¸¾"><a href="#å­—ç¬¦ä¸²æšä¸¾" class="headerlink" title="å­—ç¬¦ä¸²æšä¸¾"></a>å­—ç¬¦ä¸²æšä¸¾</h3><p>å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„ è¿è¡Œæ—¶çš„å·®åˆ«ã€‚ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œ<code>æ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»</code>ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">    Up = <span class="string">&quot;UP&quot;</span>,</span><br><span class="line">    Down = <span class="string">&quot;DOWN&quot;</span>,</span><br><span class="line">    Left = <span class="string">&quot;LEFT&quot;</span>,</span><br><span class="line">    Right = <span class="string">&quot;RIGHT&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–,å­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚</p><h3 id="å¼‚æ„æšä¸¾-ä¸æ¨è"><a href="#å¼‚æ„æšä¸¾-ä¸æ¨è" class="headerlink" title="å¼‚æ„æšä¸¾(ä¸æ¨è)"></a>å¼‚æ„æšä¸¾(ä¸æ¨è)</h3><p>æšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜(æˆ‘ä»¬ä¸å»ºè®®ä½ æ€ä¹ˆåš)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum BooleanLikeHeterogeneousEnum &#123;</span><br><span class="line">    No = <span class="number">0</span>,</span><br><span class="line">    Yes = <span class="string">&quot;YES&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œæ—¶çš„æšä¸¾"><a href="#è¿è¡Œæ—¶çš„æšä¸¾" class="headerlink" title="è¿è¡Œæ—¶çš„æšä¸¾"></a>è¿è¡Œæ—¶çš„æšä¸¾</h3><p>æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enum E &#123;</span><br><span class="line">    X, Y, Z</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä½¿ç”¨<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">obj: &#123; X: number &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj.X;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="constæšä¸¾"><a href="#constæšä¸¾" class="headerlink" title="constæšä¸¾"></a>constæšä¸¾</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ constæšä¸¾ã€‚ å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ constä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> enum Enum &#123;</span><br><span class="line">    A = <span class="number">1</span>,</span><br><span class="line">    B = A * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤–éƒ¨æšä¸¾"><a href="#å¤–éƒ¨æšä¸¾" class="headerlink" title="å¤–éƒ¨æšä¸¾"></a>å¤–éƒ¨æšä¸¾</h3><p>å¤–éƒ¨æšä¸¾ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">declare enum Enum &#123;</span><br><span class="line">    A = <span class="number">1</span>,</span><br><span class="line">    B,</span><br><span class="line">    C = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜"><a href="#è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜" class="headerlink" title="è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜"></a>è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜</h3><p>æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½<code>å¸¦æœ‰ä¸€ä¸ªå€¼</code>ï¼Œå®ƒå¯ä»¥æ˜¯ å¸¸é‡æˆ– è®¡ç®—å‡ºæ¥çš„.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enum E &#123; X &#125;</span><br></pre></td></tr></table></figure><p>æšä¸¾æˆå‘˜ä½¿ç”¨ <code>å¸¸é‡æšä¸¾è¡¨è¾¾å¼åˆå§‹åŒ–</code>ã€‚ å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ˜¯TypeScriptè¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚ å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š</p><ol><li>ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰</li><li>ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰</li><li>å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li><li>ä¸€å…ƒè¿ç®—ç¬¦ +, -, ~å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li><li>å¸¸é‡æšä¸¾è¡¨è¾¾å¼åšä¸ºäºŒå…ƒè¿ç®—ç¬¦ +, -, *, /, %, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, &amp;, |, ^çš„æ“ä½œå¯¹è±¡ã€‚ è‹¥å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º NaNæˆ– Infinityï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">enum FileAccess &#123;</span><br><span class="line">    <span class="comment">// constant members</span></span><br><span class="line">    None,</span><br><span class="line">    Read    = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line">    Write   = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,</span><br><span class="line">    ReadWrite  = Read | Write,</span><br><span class="line">    <span class="comment">// computed member</span></span><br><span class="line">    G = <span class="string">&quot;123&quot;</span>.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a class="link"   href="https://www.jianshu.com/p/42241a597a50" >ç®€ä¹¦-TypeScript æ•°æ®ç±»å‹â€”â€”æšä¸¾ (Enum)<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€æ³›å‹</title>
      <link href="2019/09/12/TypeScript%E7%B3%BB%E5%88%97%E6%B3%9B%E5%9E%8B/"/>
      <url>2019/09/12/TypeScript%E7%B3%BB%E5%88%97%E6%B3%9B%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>ç»„ä»¶åœ¨æ„å»ºè¿‡ç¨‹ä¸ä»…è¦è€ƒè™‘å½“ä¸‹çš„<code>æ•°æ®ç±»å‹</code>,ä¹Ÿè¦è€ƒè™‘æœªæ¥çš„æ‰©å±•.è®©å…¶çµæ´»</p><p>åœ¨åƒ C#å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>æ³›å‹</code>æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œ<code>ä¸€ä¸ªç»„ä»¶</code>å¯ä»¥æ”¯æŒ<code>å¤šç§ç±»å‹çš„æ•°æ®</code>ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</p><a id="more"></a><h3 id="ä¸ç”¨æ³›å‹"><a href="#ä¸ç”¨æ³›å‹" class="headerlink" title="ä¸ç”¨æ³›å‹"></a>ä¸ç”¨æ³›å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>(<span class="params">arg: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€… æˆ‘ä»¬å¯ä»¥ç”¨any</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>(<span class="params">arg: any</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ any è¿™ç§ç±»å‹å¯ä»¥ç”¨ä»»ä½•ç±»å‹,è¿™æ ·å¯¼è‡´ä¼ å…¥çš„ç±»å‹å’Œè¿”å›çš„ç±»å‹å¯ä»¥ä¸ç»Ÿä¸€.</p><p>å› æ­¤æˆ‘ä»¬éœ€è¦å»<code>è§„å®š</code>è¿”å›ç±»å‹ä¸ä¼ å…¥ç±»å‹çš„ç›¸åŒ,æˆ‘ä»¬åªç”¨è¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼</p><h3 id="ä½¿ç”¨æ³›å‹"><a href="#ä½¿ç”¨æ³›å‹" class="headerlink" title="ä½¿ç”¨æ³›å‹"></a>ä½¿ç”¨æ³›å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»™è¿™ä¸ªæ–¹æ³•ä¼ å…¥ç±»å‹å˜é‡<code>T</code>,è¿™ä¸ª<code>T</code>å¸®æˆ‘ä»¬<code>è§„å®š</code>ä¼ å…¥çš„ç±»å‹(æ¯”å¦‚:number),ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹,ä¹‹åæˆ‘ä»¬å†æ¬¡ä½¿ç”¨è¿™ä¸ª<code>T</code>å½“è¿”å›å€¼ç±»å‹.</p><p>ä¸åŒä¸ any,å®ƒä¸ä¼šä¸¢å¤±ä¸€äº›è§„åˆ™.</p><p>æˆ‘ä»¬åœ¨å®šä¹‰äº†æ³›å‹å,å¯ä»¥ç”¨ 2 ç§æ–¹æ³•ä½¿ç”¨ 1.ä¼ å…¥æ‰€æœ‰çš„å‚æ•°,åŒ…å«ç±»å‹å‚æ•° 2.æ–¹æ³•æ›´æ™®é</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> output = identity &lt; string &gt; <span class="string">&#x27;myString&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€… åˆ©ç”¨äº†ç±»å‹æ¨è®º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šTçš„ç±»å‹</span></span><br><span class="line"><span class="keyword">let</span> output = identity(<span class="string">&#x27;myString&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³›å‹å˜é‡"><a href="#ä½¿ç”¨æ³›å‹å˜é‡" class="headerlink" title="ä½¿ç”¨æ³›å‹å˜é‡"></a>ä½¿ç”¨æ³›å‹å˜é‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg.length) <span class="comment">// Error: T doesn&#x27;t have .length</span></span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨ä¼šæŠ¥é”™è¯´æˆ‘ä»¬ä½¿ç”¨äº† arg çš„.length å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰åœ°æ–¹æŒ‡æ˜ arg å…·æœ‰è¿™ä¸ªå±æ€§ã€‚ è®°ä½ï¼Œè¿™äº›ç±»å‹å˜é‡ä»£è¡¨çš„æ˜¯<code>ä»»æ„ç±»å‹</code>ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„äººå¯èƒ½ä¼ å…¥çš„æ˜¯ä¸ª<code>æ•°å­—</code>ï¼Œè€Œæ•°å­—æ˜¯æ²¡æœ‰<code>.length</code>å±æ€§çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T[]</span>): <span class="title">T</span>[] </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg.length) <span class="comment">// Array has a .length, so no more error</span></span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥è¿™æ ·ç†è§£<code>loggingIdentity</code>çš„ç±»å‹ï¼šæ³›å‹å‡½æ•°<code>loggingIdentity</code>ï¼Œæ¥æ”¶ç±»å‹å‚æ•° T å’Œå‚æ•°<code>arg</code>ï¼Œå®ƒæ˜¯ä¸ªå…ƒç´ ç±»å‹æ˜¯<code>T</code>çš„æ•°ç»„ï¼Œå¹¶è¿”å›å…ƒç´ ç±»å‹æ˜¯ T çš„æ•°ç»„ã€‚ å¦‚æœæˆ‘ä»¬ä¼ å…¥æ•°å­—æ•°ç»„ï¼Œå°†è¿”å›ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œå› ä¸ºæ­¤æ—¶ T çš„çš„ç±»å‹ä¸º<code>number</code>ã€‚ è¿™å¯ä»¥è®©æˆ‘ä»¬æŠŠæ³›å‹å˜é‡ T å½“åšç±»å‹çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç±»å‹ï¼Œå¢åŠ äº†çµæ´»æ€§</p><h3 id="æ³›å‹ç±»å‹"><a href="#æ³›å‹ç±»å‹" class="headerlink" title="æ³›å‹ç±»å‹"></a>æ³›å‹ç±»å‹</h3><p>æ³›å‹å‡½æ•°çš„ç±»å‹ä¸éæ³›å‹å‡½æ•°çš„ç±»å‹æ²¡ä»€ä¹ˆä¸åŒï¼Œ<code>åªæ˜¯æœ‰ä¸€ä¸ªç±»å‹å‚æ•°åœ¨æœ€å‰é¢</code>ï¼Œåƒå‡½æ•°å£°æ˜ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myIdentity: &lt;T&gt;<span class="function">(<span class="params">arg: T</span>) =&gt;</span> T = identity</span><br><span class="line"><span class="comment">//ä¹Ÿå¯ä»¥ç”¨ä¸åŒçš„æ³›å‹å‚æ•°å</span></span><br><span class="line"><span class="keyword">let</span> myIdentity: &lt;U&gt;<span class="function">(<span class="params">arg: U</span>) =&gt;</span> U = identity</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥å†™ä¸ªæ³›å‹æ¥å£</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface GenericIdentityFn &#123;</span><br><span class="line">  &lt;T&gt;(arg: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»ä¼¼äºè¿™æ ·</span></span><br><span class="line"><span class="comment">//let myIdentity: &#123;&lt;T&gt;(arg:T):T&#125; = identity;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myIdentity: GenericIdentityFn = identity</span><br></pre></td></tr></table></figure><h3 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericNumber</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    zeroValue: T;</span><br><span class="line"></span><br><span class="line">    add: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGenericNumber = <span class="keyword">new</span> GenericNumber&lt;number&gt;();</span><br><span class="line">myGenericNumber.zeroValue = <span class="number">0</span>;</span><br><span class="line">myGenericNumber.add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"><span class="keyword">let</span> stringNumeric = <span class="keyword">new</span> GenericNumber&lt;string&gt;();</span><br><span class="line">stringNumeric.zeroValue = <span class="string">&quot;&quot;</span>;</span><br><span class="line">stringNumeric.add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line">alert(stringNumeric.add(stringNumeric.zeroValue, <span class="string">&quot;test&quot;</span>));</span><br></pre></td></tr></table></figure><p>ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚</p><h3 id="æ³›å‹çº¦æŸ"><a href="#æ³›å‹çº¦æŸ" class="headerlink" title="æ³›å‹çº¦æŸ"></a>æ³›å‹çº¦æŸ</h3><p>ä¹‹å‰çš„ä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg.length) <span class="comment">// Error: T doesn&#x27;t have .length</span></span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å¯ä»¥çº¦æŸä¸‹ arg çš„æŸä¸€ç§ç±»å‹æ˜¯å¯ä»¥åˆ lenght å±æ€§çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface Lengthwise &#123;</span><br><span class="line">    length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Lengthwise</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg.length);  <span class="comment">// Now we know it has a .length property, so no more error</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loggingIdentity(<span class="number">3</span>);  <span class="comment">// Error, number doesn&#x27;t have a .length property</span></span><br><span class="line">loggingIdentity(&#123;<span class="attr">length</span>: <span class="number">10</span>, <span class="attr">value</span>: <span class="number">3</span>&#125;);</span><br></pre></td></tr></table></figure><h3 id="åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹"><a href="#åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹" class="headerlink" title="åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹"></a>åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹</h3><p>ä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeeKeeper</span> </span>&#123;</span><br><span class="line">    hasMask: boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZooKeeper</span> </span>&#123;</span><br><span class="line">    nametag: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    numLegs: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bee</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    keeper: BeeKeeper;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    keeper: ZooKeeper;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createInstance</span>&lt;<span class="title">A</span> <span class="title">extends</span> <span class="title">Animal</span>&gt;(<span class="params">c: &#123;<span class="keyword">new</span> () =&gt; A&#125;</span>): <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> c();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createInstance(Lion).keeper.nametag;</span><br><span class="line">createInstance(Bee).keeper.hasMask;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€å‡½æ•°</title>
      <link href="2019/09/09/TypeScript%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0/"/>
      <url>2019/09/09/TypeScript%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>åŠ ç­!åŠ ç­!åŠ ç­! åˆå¥½ä¹…æ²¡æ›´äº† ğŸ˜“</p><a id="more"></a><blockquote><p>å‡½æ•°æ˜¯ JavaScript åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚ å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿç±»ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚ åœ¨ TypeScript é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰è¡Œä¸ºçš„åœ°æ–¹ã€‚ TypeScript ä¸º JavaScript å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ä½¿ç”¨</p></blockquote><h2 id="ç®€å•å‡½æ•°"><a href="#ç®€å•å‡½æ•°" class="headerlink" title="ç®€å•å‡½æ•°"></a>ç®€å•å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add1</span>(<span class="params">x: any, y: any</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + <span class="number">234</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°ç±»å‹åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p><ol><li>å‚æ•°ç±»å‹</li><li>è¿”å›å€¼ç±»å‹ã€‚</li></ol><p>å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚ æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚ è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç±»å‹ == å‚æ•°ç±»å‹ + è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> myAdd: <span class="function">(<span class="params">x: number, y: number</span>) =&gt;</span> number = <span class="function"><span class="keyword">function</span>(<span class="params">x: number, y: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹å‰ä½¿ç”¨(<code>=&gt;</code>)ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º<code>void</code>è€Œä¸èƒ½<code>ç•™ç©º</code>ã€‚</p><h2 id="æ¨æ–­ç±»å‹"><a href="#æ¨æ–­ç±»å‹" class="headerlink" title="æ¨æ–­ç±»å‹"></a>æ¨æ–­ç±»å‹</h2><p>ä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼š<code>è‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myAdd = <span class="function"><span class="keyword">function</span>(<span class="params">x: number, y: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myAdd: <span class="function">(<span class="params">baseValue: number, increment: number</span>) =&gt;</span> number = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"><a href="#å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"></a>å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</h2><p>åœ¨ TypeScript é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°åæ—ä½¿ç”¨?å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è®© last æ˜¯å¯é€‰çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName2</span>(<span class="params">first: string, last?: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> first + <span class="string">&quot;,&quot;</span> + last;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res3 = buildName2(<span class="string">&quot;jack&quot;</span>);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå‚æ•°æä¾›ä¸€ä¸ªé»˜è®¤å€¼å½“ç”¨æˆ·æ²¡æœ‰ä¼ é€’è¿™ä¸ªå‚æ•°æˆ–ä¼ é€’çš„å€¼æ˜¯ undefined æ—¶ã€‚ å®ƒä»¬å«åšæœ‰é»˜è®¤åˆå§‹åŒ–å€¼çš„å‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName3</span>(<span class="params">first = <span class="string">&quot;jack&quot;</span>, last?: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> first + <span class="string">&quot;,&quot;</span> + last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h2><p>æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ é€’è¿›æ¥ã€‚ åœ¨ JavaScript é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ arguments æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ TypeScript é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ,å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»º<code>å‚æ•°æ•°ç»„</code>ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·<code>ï¼ˆ...ï¼‰</code>åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: string, ...restOfName: string[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employeeName = buildName(<span class="string">&quot;Joseph&quot;</span>, <span class="string">&quot;Samuel&quot;</span>, <span class="string">&quot;Lucas&quot;</span>, <span class="string">&quot;MacKinzie&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: string, ...restOfName: string[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buildNameFun: <span class="function">(<span class="params">fname: string, ...rest: string[]</span>) =&gt;</span> string = buildName;</span><br></pre></td></tr></table></figure><h2 id="this-å’Œç®­å¤´å‡½æ•°"><a href="#this-å’Œç®­å¤´å‡½æ•°" class="headerlink" title="this å’Œç®­å¤´å‡½æ•°"></a>this å’Œç®­å¤´å‡½æ•°</h2><p>this çš„å€¼åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šæŒ‡å®šã€‚ è¿™æ˜¯ä¸ªæ—¢å¼ºå¤§åˆçµæ´»çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯ä½ éœ€è¦èŠ±ç‚¹æ—¶é—´å¼„æ¸…æ¥šå‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆã€‚ ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹ï¼Œå°¤å…¶æ˜¯åœ¨è¿”å›ä¸€ä¸ªå‡½æ•°æˆ–å°†å‡½æ•°å½“åšå‚æ•°ä¼ é€’çš„æ—¶å€™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  <span class="function"><span class="title">createCardPicker</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> pickerCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">const</span> pickedSuit = <span class="built_in">Math</span>.floor(pickerCard / <span class="number">13</span>);</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        suit: <span class="built_in">this</span>.suits[pickedSuit], <span class="comment">// this=&gt;æŒ‡å‘å…¨å±€ global undefined</span></span><br><span class="line">        card: pickerCard % <span class="number">13</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cardPicker = deck.createCardPicker();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pickerCard = cardPicker();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;card:&quot;</span> + pickerCard.card);</span><br></pre></td></tr></table></figure><p>è¿”å›çš„å‡½æ•°é‡Œçš„<code>this</code>è¢«è®¾ç½®æˆäº† window è€Œä¸æ˜¯ deck å¯¹è±¡ã€‚</p><h3 id="this-å‚æ•°"><a href="#this-å‚æ•°" class="headerlink" title="this å‚æ•°"></a>this å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡æ„ä¸Šé¢å‡½æ•°</span></span><br><span class="line">interface card &#123;</span><br><span class="line">  suit: string</span><br><span class="line">  card: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface deck &#123;</span><br><span class="line">  suits: string[]</span><br><span class="line">  card: number[]</span><br><span class="line">  createCardPicker(<span class="built_in">this</span>: deck): <span class="function">() =&gt;</span> card</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deck1 = &#123;</span><br><span class="line">  suits: [<span class="string">&#x27;hearts&#x27;</span>, <span class="string">&#x27;spades&#x27;</span>, <span class="string">&#x27;clubs&#x27;</span>, <span class="string">&#x27;diamonds&#x27;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  <span class="function"><span class="title">createCardPicker</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;this&#x27;</span>, <span class="built_in">this</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">this</span>: deck</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> pickerCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>)</span><br><span class="line">      <span class="keyword">const</span> pickedSuit = <span class="built_in">Math</span>.floor(pickerCard / <span class="number">13</span>)</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        suit: <span class="built_in">this</span>.suits[pickedSuit], <span class="comment">//this --&gt;deck</span></span><br><span class="line">        card: pickerCard % <span class="number">13</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›è°ƒå‡½æ•°é‡Œçš„-this-å‚æ•°"><a href="#å›è°ƒå‡½æ•°é‡Œçš„-this-å‚æ•°" class="headerlink" title="å›è°ƒå‡½æ•°é‡Œçš„ this å‚æ•°"></a>å›è°ƒå‡½æ•°é‡Œçš„ this å‚æ•°</h2><p>å½“å›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œ<code>this</code>å°†ä¸º<code>undefined</code>ã€‚ ç¨åšæ”¹åŠ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡ this å‚æ•°æ¥é¿å…é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface UIElement &#123;</span><br><span class="line">    addClickListener(onclick: <span class="function">(<span class="params"><span class="built_in">this</span>: <span class="keyword">void</span>, e: Event</span>) =&gt;</span> <span class="keyword">void</span>): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>this: void</code>æ„å‘³ç€<code>addClickListener</code>æœŸæœ› onclick æ˜¯ä¸€ä¸ªå‡½æ•°ä¸”å®ƒä¸éœ€è¦ä¸€ä¸ª this ç±»å‹ã€‚ ç„¶åï¼Œä¸ºè°ƒç”¨ä»£ç é‡Œçš„ this æ·»åŠ ç±»å‹æ³¨è§£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">  info: string;</span><br><span class="line">  <span class="function"><span class="title">onClickGood</span>(<span class="params"><span class="built_in">this</span>: <span class="keyword">void</span>, e: Event</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// can&#x27;t use this here because it&#x27;s of type void!</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;clicked!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> h = <span class="keyword">new</span> Handler();</span><br><span class="line">uiElement.addClickListener(h.onClickGood);</span><br></pre></td></tr></table></figure><p>å› ä¸º<code>onClickGood</code>æŒ‡å®šäº†<code>this</code>ç±»å‹ä¸º<code>void</code>ï¼Œå› æ­¤ä¼ é€’ addClickListener æ˜¯åˆæ³•çš„ã€‚ å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸èƒ½ä½¿ç”¨<code>this.info</code></p><p>å¦‚æœä½ ä¸¤è€…éƒ½æƒ³è¦ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">  info: string;</span><br><span class="line">  onClickGood = <span class="function">(<span class="params">e: Event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.info = e.message;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ª<code>Handler</code>å¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ–¹æ³•åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œæ·»åŠ åˆ° Handler çš„åŸå‹é“¾ä¸Šã€‚ å®ƒä»¬åœ¨ä¸åŒ Handler å¯¹è±¡é—´æ˜¯å…±äº«çš„ã€‚</p><h2 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h2><p>JavaScript é‡Œå‡½æ•°æ ¹æ®ä¼ å…¥<code>ä¸åŒçš„å‚æ•°</code>è€Œè¿”å›<code>ä¸åŒç±»å‹</code>çš„æ•°æ®æ˜¯å¾ˆå¸¸è§çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> suits = [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>];</span><br><span class="line"></span><br><span class="line">&lt;!--å‚æ•°ä¸ºå¯¹è±¡  == è¿”å› æ•°å­—--&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pickCard</span>(<span class="params">x: &#123;suit: string; card: number; &#125;[]</span>): <span class="title">number</span></span>;</span><br><span class="line">&lt;!--å‚æ•°ä¸ºæ•°å­—== è¿”å›å¯¹è±¡ --&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pickCard</span>(<span class="params">x: number</span>): </span>&#123;suit: string; card: number; &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pickCard</span>(<span class="params">x</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * x.length);</span><br><span class="line">        <span class="keyword">return</span> pickedCard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(x / <span class="number">13</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">suit</span>: suits[pickedSuit], <span class="attr">card</span>: x % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myDeck = [&#123; <span class="attr">suit</span>: <span class="string">&quot;diamonds&quot;</span>, <span class="attr">card</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;spades&quot;</span>, <span class="attr">card</span>: <span class="number">10</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;hearts&quot;</span>, <span class="attr">card</span>: <span class="number">4</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> pickedCard1 = myDeck[pickCard(myDeck)];</span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard1.card + <span class="string">&quot; of &quot;</span> + pickedCard1.suit);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pickedCard2 = pickCard(<span class="number">15</span>);</span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard2.card + <span class="string">&quot; of &quot;</span> + pickedCard2.suit);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œfunction pickCard(x): any å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™é‡Œåªæœ‰ä¸¤ä¸ªé‡è½½</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€ç±»</title>
      <link href="2019/09/01/TypeScript%E7%B3%BB%E5%88%97%E7%B1%BB/"/>
      <url>2019/09/01/TypeScript%E7%B3%BB%E5%88%97%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ECMAScript 2015ï¼Œä¹Ÿå°±æ˜¯ ECMAScript 6 å¼€å§‹ï¼ŒJavaScript ç¨‹åºå‘˜å°†èƒ½å¤Ÿä½¿ç”¨åŸºäºç±»çš„é¢å‘å¯¹è±¡çš„æ–¹å¼ã€‚ ä½¿ç”¨ TypeScriptï¼Œæˆ‘ä»¬å…è®¸å¼€å‘è€…ç°åœ¨å°±ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”ç¼–è¯‘åçš„ JavaScript å¯ä»¥åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œè€Œä¸éœ€è¦ç­‰åˆ°ä¸‹ä¸ª JavaScript ç‰ˆæœ¬ã€‚</p></blockquote><a id="more"></a><h2 id="ç”¨-ES6-åˆ›å»ºä¸€ä¸ªç®€å•ç±»"><a href="#ç”¨-ES6-åˆ›å»ºä¸€ä¸ªç®€å•ç±»" class="headerlink" title="ç”¨ ES6 åˆ›å»ºä¸€ä¸ªç®€å•ç±»"></a>ç”¨ ES6 åˆ›å»ºä¸€ä¸ªç®€å•ç±»</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line">  greeting: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">message: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.greeting = message</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">greet</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, &#x27;</span> + <span class="built_in">this</span>.greeting</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter = <span class="keyword">new</span> Greeter(<span class="string">&#x27;world&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»æœ‰ 3 ä¸ªæˆå‘˜ï¼š</p><ol><li>ä¸€ä¸ªå«åš greeting çš„å±æ€§ï¼Œ</li><li>ä¸€ä¸ªæ„é€ å‡½æ•°</li><li>ä¸€ä¸ª greet æ–¹æ³•ã€‚</li></ol><p>æˆ‘ä»¬åœ¨å¼•ç”¨ä»»ä½•ä¸€ä¸ªç±»æˆå‘˜çš„æ—¶å€™éƒ½ç”¨äº†<code>this</code>ã€‚å®ƒè¡¨ç¤ºæˆ‘ä»¬è®¿é—®çš„æ˜¯ç±»çš„æˆå‘˜ã€‚</p><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">move</span>(<span class="params">distance: number = <span class="number">0</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Animal moved <span class="subst">$&#123;distance&#125;</span>m.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">bark</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Woof! Woof!&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line">dog.bark()</span><br><span class="line">dog.move(<span class="number">10</span>)</span><br><span class="line">dog.bark()</span><br></pre></td></tr></table></figure><h2 id="å¤æ‚ç‰ˆç»§æ‰¿"><a href="#å¤æ‚ç‰ˆç»§æ‰¿" class="headerlink" title="å¤æ‚ç‰ˆç»§æ‰¿"></a>å¤æ‚ç‰ˆç»§æ‰¿</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  name: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">theName: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = theName</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">move</span>(<span class="params">distance: number = <span class="number">0</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span></span></span><br><span class="line"><span class="string">        moved <span class="subst">$&#123;distance&#125;</span>m.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Snake</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">move</span>(<span class="params">distanceInMeters = <span class="number">5</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Slithering...&#x27;</span>)</span><br><span class="line">    <span class="built_in">super</span>.move(distanceInMeters)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Horse</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">move</span>(<span class="params">distanceInMeters = <span class="number">45</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Galloping...&#x27;</span>)</span><br><span class="line">    <span class="built_in">super</span>.move(distanceInMeters)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sam = <span class="keyword">new</span> Snake(<span class="string">&#x27;Sammy the Python&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> tom: Animal = <span class="keyword">new</span> Horse(<span class="string">&#x27;Tommy the Palomino&#x27;</span>)</span><br><span class="line"></span><br><span class="line">sam.move()</span><br><span class="line">tom.move(<span class="number">34</span>)</span><br></pre></td></tr></table></figure><p>ä¸å‰ä¸€ä¸ªä¾‹å­çš„ä¸åŒç‚¹æ˜¯ï¼Œ<code>æ´¾ç”Ÿç±»</code>åŒ…å«äº†ä¸€ä¸ª<code>æ„é€ å‡½æ•°</code>ï¼Œå®ƒå¿…é¡»è°ƒç”¨<code>super()</code>ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® this çš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€å®šè¦è°ƒç”¨ super()ã€‚ è¿™ä¸ªæ˜¯ TypeScript å¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚</p><p><code>é‡å†™move</code>ä½¿å¾— move æ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼Œå³ä½¿ tom è¢«å£°æ˜ä¸º Animal ç±»å‹ï¼Œä½†å› ä¸ºå®ƒçš„å€¼æ˜¯ Horseï¼Œè°ƒç”¨ tom.move(34)æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ Horse é‡Œé‡å†™çš„æ–¹æ³•ï¼š</p><h2 id="å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦"><a href="#å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦" class="headerlink" title="å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦"></a>å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦</h2><p>é»˜è®¤ä¸º<code>public</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    public name: string;</span><br><span class="line">    public <span class="function"><span class="title">constructor</span>(<span class="params">theName: string</span>)</span> &#123; <span class="built_in">this</span>.name = theName; &#125;</span><br><span class="line">    public <span class="function"><span class="title">move</span>(<span class="params">distanceInMeters: number</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç†è§£<code>private</code></p><p><strong>è¡¨ç¤ºä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    private name: string;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">theName: string</span>)</span> &#123; <span class="built_in">this</span>.name = theName; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Animal(<span class="string">&quot;Cat&quot;</span>).name; <span class="comment">// é”™è¯¯: &#x27;name&#x27; æ˜¯ç§æœ‰çš„.</span></span><br></pre></td></tr></table></figure><p>ç†è§£<code>protected</code></p><p><code>protected</code>ä¿®é¥°ç¬¦ä¸<code>private</code>ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œ<code>protected</code>æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    protected name: string;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    private department: string;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: string, department: string</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name)</span><br><span class="line">        <span class="built_in">this</span>.department = department;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="function"><span class="title">getElevatorPitch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Hello, my name is <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> and I work in <span class="subst">$&#123;<span class="built_in">this</span>.department&#125;</span>.`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> howard = <span class="keyword">new</span> Employee(<span class="string">&quot;Howard&quot;</span>, <span class="string">&quot;Sales&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(howard.getElevatorPitch());</span><br><span class="line"><span class="built_in">console</span>.log(howard.name); <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure><h2 id="readonly-ä¿®é¥°ç¬¦"><a href="#readonly-ä¿®é¥°ç¬¦" class="headerlink" title="readonly ä¿®é¥°ç¬¦"></a>readonly ä¿®é¥°ç¬¦</h2><p>å¯ä»¥ä½¿ç”¨<code>readonly</code>å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ===========ã€‹readonly åªè¯» ä¿®é¥°ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PresonOnly</span> </span>&#123;</span><br><span class="line">  public readonly name: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> john = <span class="keyword">new</span> PresonOnly(<span class="string">&#x27;jon&#x27;</span>)</span><br><span class="line">john.name = <span class="string">&#x27;&#x27;</span>  <span class="comment">//error ä¸èƒ½ä¿®æ”¹</span></span><br></pre></td></tr></table></figure><h2 id="å­˜å–å™¨"><a href="#å­˜å–å™¨" class="headerlink" title="å­˜å–å™¨"></a>å­˜å–å™¨</h2><p>TypeScript æ”¯æŒé€šè¿‡ getters/setters æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> passcode = <span class="string">&quot;secret passcode&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    private _fullName: string;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title">fullName</span>(): <span class="title">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>._fullName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title">fullName</span>(<span class="params">newName: string</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (passcode &amp;&amp; passcode == <span class="string">&quot;secret passcode&quot;</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>._fullName = newName;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;Error: Unauthorized update of employee!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employee = <span class="keyword">new</span> Employee();</span><br><span class="line">employee.fullName = <span class="string">&quot;Bob Smith&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (employee.fullName) &#123;</span><br><span class="line">    alert(employee.fullName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ç‚¹:</strong></p><ol><li>é¦–å…ˆï¼Œå­˜å–å™¨è¦æ±‚ä½ å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡º ECMAScript 5 æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ° ECMAScript 3ã€‚</li><li>å…¶æ¬¡ï¼Œåªå¸¦æœ‰<code>get</code>ä¸å¸¦æœ‰<code>set</code>çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonly</li></ol><h2 id="é™æ€å±æ€§"><a href="#é™æ€å±æ€§" class="headerlink" title="é™æ€å±æ€§"></a>é™æ€å±æ€§</h2><p>å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§,æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š, æ¯ä¸ªå®ä¾‹æƒ³è¦è®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™ï¼Œéƒ½è¦åœ¨ origin å‰é¢åŠ ä¸Šç±»åã€‚ å¦‚åŒåœ¨å®ä¾‹å±æ€§ä¸Šä½¿ç”¨ this.å‰ç¼€æ¥è®¿é—®å±æ€§ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> origin = &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="title">calculateDistanceFromOrigin</span>(<span class="params">point: &#123;x: number; y: number;&#125;</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//çœ‹è¿™é‡Œ â¬‡ï¸</span></span><br><span class="line">        <span class="keyword">let</span> xDist = (point.x - Grid.origin.x);</span><br><span class="line">        <span class="keyword">let</span> yDist = (point.y - Grid.origin.y);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(xDist * xDist + yDist * yDist) / <span class="built_in">this</span>.scale;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title">constructor</span> (<span class="params">public scale: number</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> grid1 = <span class="keyword">new</span> Grid(<span class="number">1.0</span>);  <span class="comment">// 1x scale</span></span><br><span class="line"><span class="keyword">let</span> grid2 = <span class="keyword">new</span> Grid(<span class="number">5.0</span>);  <span class="comment">// 5x scale</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(grid1.calculateDistanceFromOrigin(&#123;<span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">10</span>&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(grid2.calculateDistanceFromOrigin(&#123;<span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">10</span>&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h2><p><code>abstract</code>å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Department</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">public name: string</span>)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printName(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Department name: &#x27;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    abstract printMeeting(): <span class="keyword">void</span>; <span class="comment">// å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccountingDepartment</span> <span class="keyword">extends</span> <span class="title">Department</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&#x27;Accounting and Auditing&#x27;</span>); <span class="comment">// åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printMeeting(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;The Accounting Department meets each Monday at 10am.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    generateReports(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Generating accounting reports...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> department: Department; <span class="comment">// å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨</span></span><br><span class="line">department = <span class="keyword">new</span> Department(); <span class="comment">// é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹</span></span><br><span class="line">department = <span class="keyword">new</span> AccountingDepartment(); <span class="comment">// å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼</span></span><br><span class="line">department.printName();</span><br><span class="line">department.printMeeting();</span><br><span class="line">department.generateReports(); <span class="comment">// é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€æ¥å£</title>
      <link href="2019/08/30/TypeScript%E7%B3%BB%E5%88%97%E6%8E%A5%E5%8F%A3/"/>
      <url>2019/08/30/TypeScript%E7%B3%BB%E5%88%97%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ TypeScript é‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦</p></blockquote><a id="more"></a><h2 id="ç®€å•çš„æ¥å£"><a href="#ç®€å•çš„æ¥å£" class="headerlink" title="ç®€å•çš„æ¥å£"></a>ç®€å•çš„æ¥å£</h2><p>æˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡å‚æ•°å®é™…ä¸Šä¼šåŒ…å«å¾ˆå¤šå±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨åªä¼šæ£€æŸ¥é‚£äº›å¿…éœ€çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”å…¶ç±»å‹æ˜¯å¦åŒ¹é…ã€‚ ç„¶è€Œï¼Œæœ‰äº›æ—¶å€™ TypeScript å´å¹¶ä¸ä¼šè¿™ä¹ˆå®½æ¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">interface NameInfo &#123;</span><br><span class="line">  firstname: string;</span><br><span class="line">  lastname: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getFullName = (&#123; ...obj &#125;: NameInfo): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> obj.firstname + obj.lastname;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  getFullName(&#123;</span><br><span class="line">    firstname: <span class="string">&quot;kac&quot;</span>,</span><br><span class="line">    lastname: <span class="string">&quot;123&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¦‚æœæ–¹æ³•ä¸­å¤šæ·»åŠ å±æ€§åˆ™ä¼šæŠ¥é”™<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190829235008.png"                      alt=""                ></p><h2 id="å¯é€‰å±æ€§"><a href="#å¯é€‰å±æ€§" class="headerlink" title="å¯é€‰å±æ€§"></a>å¯é€‰å±æ€§</h2><p>æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ã€‚ æœ‰äº›æ˜¯åªåœ¨æŸäº›æ¡ä»¶ä¸‹å­˜åœ¨ï¼Œæˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ã€‚ å¯é€‰å±æ€§åœ¨åº”ç”¨â€œ<code>option</code> bagsâ€æ¨¡å¼æ—¶å¾ˆå¸¸ç”¨ï¼Œå³ç»™å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸­åªæœ‰<code>éƒ¨åˆ†å±æ€§èµ‹å€¼</code>äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">interface Vegetables &#123;</span><br><span class="line">  color?: string;</span><br><span class="line">  type: string;</span><br><span class="line">  [prop: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getVegetables = <span class="function">(<span class="params">&#123; color, type &#125;: Vegetables</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> color ? <span class="string">`color,+<span class="subst">$&#123;color&#125;</span>,<span class="subst">$&#123;type&#125;</span>`</span> : <span class="string">&quot;æ²¡æœ‰ä¼ é¢œè‰²&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  getVegetables(&#123;</span><br><span class="line">    color: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">    type: <span class="string">&quot;çœ‹å¯æ˜¯ä½ &quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  getVegetables(&#123;</span><br><span class="line">    type: <span class="string">&quot;123&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="åªè¯»å±æ€§"><a href="#åªè¯»å±æ€§" class="headerlink" title="åªè¯»å±æ€§"></a>åªè¯»å±æ€§</h2><p>ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨<code>readonly</code>æ¥æŒ‡å®šåªè¯»å±æ€§:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Point &#123;</span><br><span class="line">    readonly x: number;</span><br><span class="line">    readonly y: number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1: Point = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;;</span><br><span class="line">p1.x = <span class="number">5</span>; <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><h2 id="readonly-vs-const"><a href="#readonly-vs-const" class="headerlink" title="readonly vs const"></a>readonly vs const</h2><p>æœ€ç®€å•åˆ¤æ–­è¯¥ç”¨<code>readonly</code>è¿˜æ˜¯<code>const</code>çš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡<code>ä½¿ç”¨</code>è¿˜æ˜¯åšä¸º<code>ä¸€ä¸ªå±æ€§</code>ã€‚ åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨ constï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨ readonlyã€‚</p><h2 id="æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å"><a href="#æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å" class="headerlink" title="æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å"></a>æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface SquareConfig &#123;</span><br><span class="line">  color?: string;</span><br><span class="line">  width?: number;</span><br><span class="line">  [propName: string]: any;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®²åˆ°ç´¢å¼•ç­¾åï¼Œä½†åœ¨è¿™æˆ‘ä»¬è¦è¡¨ç¤ºçš„æ˜¯ SquareConfig å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å±æ€§ï¼Œå¹¶ä¸”åªè¦å®ƒä»¬ä¸æ˜¯ color å’Œ widthï¼Œé‚£ä¹ˆå°±æ— æ‰€è°“å®ƒä»¬çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€TypeScript ç³»åˆ—ã€åŸºç¡€ç±»å‹</title>
      <link href="2019/08/29/TypeScript%E7%B3%BB%E5%88%97%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/"/>
      <url>2019/08/29/TypeScript%E7%B3%BB%E5%88%97%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€ç®€å•çš„æ•°æ®å•å…ƒï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œç»“æ„ä½“ï¼Œå¸ƒå°”å€¼ç­‰</p></blockquote><a id="more"></a><h2 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h2><p>ç®€å•çš„ true/false å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isBack: boolean = <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h2><p>å’Œ JavaScript ä¸€æ ·ï¼ŒTypeScript é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚ è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯<code>number</code>ã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ<code>TypeScript</code>è¿˜æ”¯æŒ ECMAScript 2015 ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decLiteral: number = <span class="number">6</span></span><br><span class="line"><span class="keyword">let</span> hexLiteral: number = <span class="number">0xf00d</span></span><br><span class="line"><span class="keyword">let</span> binaryLiteral: number = <span class="number">0b1010</span></span><br><span class="line"><span class="keyword">let</span> octalLiteral: number = <span class="number">0o744</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = [string, number]</span><br><span class="line"></span><br><span class="line">x = [<span class="string">&#x27;hje&#x27;</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.1ç‰ˆæœ¬ä¹‹åå°±ä¼šæŠ¥é”™  ç´¢å¼•è¶…è¿‡æœ€å¤§é•¿åº¦</span></span><br><span class="line">x[<span class="number">3</span>] = <span class="number">1</span> <span class="comment">//error</span></span><br><span class="line"></span><br><span class="line">x[<span class="number">6</span>] = <span class="literal">true</span> <span class="comment">// error è¶…è¿‡äº†2ç§ç±»å‹</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>æˆ‘ä»¬ä½¿ç”¨<code>string</code>è¡¨ç¤ºæ–‡æœ¬æ•°æ®ç±»å‹,ç”¨æ³•ä¸ JavaScript æ— åŒºåˆ«</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: string = <span class="string">&quot;bob&quot;</span>;</span><br><span class="line">name = <span class="string">&quot;smith&quot;</span>;</span><br><span class="line"></span><br><span class="line">I<span class="string">&#x27;ll be $&#123; age + 1 &#125; years old next month.`;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰æ•°ç»„ã€‚ ç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š<code>[]</code>ï¼Œè¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨æ•°ç»„æ³›å‹ï¼Œ<code>Array&lt;å…ƒç´ ç±»å‹&gt;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: <span class="built_in">Array</span>&lt;number&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h2 id="å…ƒç»„-Tuple"><a href="#å…ƒç»„-Tuple" class="headerlink" title="å…ƒç»„ Tuple"></a>å…ƒç»„ Tuple</h2><p>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ª<code>å·²çŸ¥å…ƒç´ </code>æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹<code>ä¸å¿…ç›¸åŒ</code>ã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º string å’Œ number ç±»å‹çš„å…ƒç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: [string, number]</span><br><span class="line"></span><br><span class="line">x = [<span class="string">&#x27;hello&#x27;</span>, <span class="number">10</span>] <span class="comment">// OK</span></span><br><span class="line">x = [<span class="number">10</span>, <span class="string">&#x27;hello&#x27;</span>] <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><p>å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(x[<span class="number">0</span>].substr(<span class="number">1</span>)) <span class="comment">// OK</span></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">1</span>].substr(<span class="number">1</span>)) <span class="comment">// Error, &#x27;number&#x27; does not have &#x27;substr&#x27;</span></span><br></pre></td></tr></table></figure><p>å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">3</span>] = <span class="string">&#x27;world&#x27;</span> <span class="comment">// OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">5</span>].toString()) <span class="comment">// OK, &#x27;string&#x27; å’Œ &#x27;number&#x27; éƒ½æœ‰ toString</span></span><br><span class="line"><span class="comment">//ä½†æ˜¯ä¸èƒ½è¶Šç•Œ</span></span><br><span class="line">x[<span class="number">6</span>] = <span class="literal">true</span> <span class="comment">// Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹</span></span><br></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p><code>enum</code>ç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚ åƒ C#ç­‰å…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red, Green, Blue&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br></pre></td></tr></table></figure><h2 id="ä»»æ„å€¼"><a href="#ä»»æ„å€¼" class="headerlink" title="ä»»æ„å€¼"></a>ä»»æ„å€¼</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> notSure: any = <span class="number">4</span></span><br><span class="line">notSure = <span class="string">&#x27;maybe a string instead&#x27;</span></span><br><span class="line">notSure = <span class="literal">false</span> <span class="comment">// okay, definitely a boolean</span></span><br></pre></td></tr></table></figure><p>å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®çš„ç±»å‹æ—¶ï¼Œ<code>any</code>ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚ æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸åŒçš„ç±»å‹çš„æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: any[] = [<span class="number">1</span>, <span class="literal">true</span>, <span class="string">&#x27;free&#x27;</span>]</span><br><span class="line"></span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">100</span></span><br></pre></td></tr></table></figure><h2 id="ç©ºå€¼"><a href="#ç©ºå€¼" class="headerlink" title="ç©ºå€¼"></a>ç©ºå€¼</h2><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ<code>void</code>ç±»å‹åƒæ˜¯ä¸<code>any</code>ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°<code>æ²¡æœ‰è¿”å›å€¼</code>æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ void</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;This is my warning message&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ undefined å’Œ nullï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusable: <span class="keyword">void</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><h2 id="Null-å’Œ-Undefined"><a href="#Null-å’Œ-Undefined" class="headerlink" title="Null å’Œ Undefined"></a>Null å’Œ Undefined</h2><p>TypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš undefined å’Œ nullã€‚ å’Œ void ç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹<code>null</code>å’Œ<code>undefined</code>æ˜¯<code>æ‰€æœ‰ç±»å‹</code>çš„<code>å­</code>ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™<code>numberç±»å‹</code>çš„å˜é‡ã€‚</p><h2 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h2><p><code>never</code>ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ never çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ never ç±»å‹ï¼ˆé™¤äº† never æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ any ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ neverã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: string</span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> error(<span class="string">&#x27;Something failed&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infiniteLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h2><p>ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ TypeScript ä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚</p><p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: any = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strLength: number = (&lt;string&gt;someValue).length;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¸º<code>as</code>è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: any = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strLength: number = (someValue <span class="keyword">as</span> string).length;</span><br></pre></td></tr></table></figure><h2 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h2><p>è‡ª ECMAScript 2015 èµ·ï¼Œ<code>symbol</code>æˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹</p><p><code>symbol</code>ç±»å‹çš„å€¼æ˜¯é€šè¿‡ Symbol<code>æ„é€ å‡½æ•°</code>åˆ›å»ºçš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sym1 = <span class="built_in">Symbol</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sym2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;key&#x27;</span>) <span class="comment">// å¯é€‰çš„å­—ç¬¦ä¸²key</span></span><br></pre></td></tr></table></figure><p>Symbols æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sym2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> sym3 = <span class="built_in">Symbol</span>(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line"></span><br><span class="line">sym2 === sym3 <span class="comment">// false, symbolsæ˜¯å”¯ä¸€çš„</span></span><br></pre></td></tr></table></figure><p>åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols ä¹Ÿå¯ä»¥è¢«ç”¨åšå¯¹è±¡å±æ€§çš„é”®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> prop2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> info2 = &#123;</span><br><span class="line">  [prop2]: <span class="string">&#x27;lison&#x27;</span>,</span><br><span class="line">  id: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">  age: <span class="string">&#x27;99&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.table(info2)</span><br></pre></td></tr></table></figure><p>Symbols ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åå£°æ˜ç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getClassNameSymbol = <span class="built_in">Symbol</span>()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  [getClassNameSymbol]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> C()</span><br><span class="line"><span class="keyword">let</span> className = c[getClassNameSymbol]() <span class="comment">// &quot;C&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Symbol-for"><a href="#Symbol-for" class="headerlink" title="Symbol.for"></a>Symbol.for</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> name2 = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name3 = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;jack&#x27;</span>) <span class="comment">//å…¨å±€èŒƒå›´ä¿æŠ¤å½“å‰é¡µé¢ ï¼ˆifram serverWorkï¼‰ å®ƒä¼šå»æ‰¾ä¹‹å‰æœ‰æ²¡æœ‰åˆ›å»ºè¿‡symbol å¦‚æœæœ‰åˆ™ä¸ä¼šåˆ›å»ºæ–°çš„</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name2 === name3) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name4 = <span class="built_in">Symbol</span>.keyFor(name3) <span class="comment">//æŸ¥è¯¢æ˜¯å¦å·²ç»åˆ›å»ºsysmbolå€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(name4) <span class="comment">// è¿”å›å±æ€§å</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹å¼‚æ­¥çš„ setState</title>
      <link href="2019/08/20/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E5%BC%82%E6%AD%A5%E7%9A%84setState/"/>
      <url>2019/08/20/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E5%BC%82%E6%AD%A5%E7%9A%84setState/</url>
      
        <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡æ˜ç¡®ï¼Œæˆ‘ä»¬è¦å®ç°ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>å¼‚æ­¥æ›´æ–° stateï¼Œå°†çŸ­æ—¶é—´å†…çš„å¤šä¸ª setState åˆå¹¶æˆä¸€ä¸ª</li><li>ä¸ºäº†è§£å†³å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„é—®é¢˜ï¼Œå¢åŠ å¦ä¸€ç§å½¢å¼çš„ setStateï¼šæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåœ¨å‡½æ•°ä¸­å¯ä»¥å¾—åˆ°å‰ä¸€ä¸ªçŠ¶æ€å¹¶è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€</li></ol><a id="more"></a><p>React ä¸­çš„ setState æ˜¯æ€ä¹ˆåšçš„?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      num: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123; <span class="attr">num</span>: <span class="built_in">this</span>.state.num + <span class="number">1</span> &#125;);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.num); <span class="comment">// ä¼šè¾“å‡º0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="built_in">this</span>.state.num&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœ: ç»„ä»¶æ¸²æŸ“çš„ç»“æœæ˜¯ 1ï¼Œå¹¶ä¸”åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº† 100 æ¬¡ 0ï¼Œè¯´æ˜æ¯ä¸ªå¾ªç¯ä¸­ï¼Œæ‹¿åˆ°çš„ state ä»ç„¶æ˜¯æ›´æ–°ä¹‹å‰çš„</p></blockquote><p>è¿™æ˜¯ React çš„ä¼˜åŒ–æ‰‹æ®µï¼Œä½†æ˜¯æ˜¾ç„¶å®ƒä¹Ÿä¼šåœ¨å¯¼è‡´ä¸€äº›ä¸ç¬¦åˆç›´è§‰çš„é—®é¢˜ï¼ˆå°±å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼‰ï¼Œæ‰€ä»¥é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒReact ç»™å‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šsetState æ¥æ”¶çš„å‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨<code>è¿™ä¸ªå‡½æ•°ä¸­</code>å¯ä»¥<code>æ‹¿å…ˆå‰çš„çŠ¶æ€</code>ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå‡½æ•°çš„<code>è¿”å›å€¼å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€</code>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥ä¿®æ­£ App ç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ ) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState( <span class="function"><span class="params">prevState</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log( prevState.num );</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                num: prevState.num + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(num ); <span class="comment">// è¿˜æ˜¯0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆå¹¶-setState"><a href="#åˆå¹¶-setState" class="headerlink" title="åˆå¹¶ setState"></a>åˆå¹¶ setState</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¹‹å‰çš„å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setState</span>(<span class="params"> stateChange </span>)</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign( <span class="built_in">this</span>.state, stateChange );</span><br><span class="line">    renderComponent( <span class="built_in">this</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡è°ƒç”¨ setState éƒ½ä¼šæ›´æ–° state å¹¶é©¬ä¸Šæ¸²æŸ“ä¸€æ¬¡ã€‚</p><h3 id="æ¨¡æ‹Ÿä¸€ä¸ª-setState-é˜Ÿåˆ—"><a href="#æ¨¡æ‹Ÿä¸€ä¸ª-setState-é˜Ÿåˆ—" class="headerlink" title="æ¨¡æ‹Ÿä¸€ä¸ª setState é˜Ÿåˆ—"></a>æ¨¡æ‹Ÿä¸€ä¸ª setState é˜Ÿåˆ—</h3><p>ä¸ºäº†åˆå¹¶ setStateï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜æ¯æ¬¡ setState çš„æ•°æ®ï¼Œç„¶ååœ¨ä¸€æ®µæ—¶é—´åï¼Œæ¸…ç©ºè¿™ä¸ªé˜Ÿåˆ—å¹¶æ¸²æŸ“ç»„ä»¶<br>åˆ›å»º<code>set_state_quene.js</code>æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> queue = []; <span class="comment">//é˜Ÿåˆ—æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueueSetState</span>(<span class="params"> stateChange, component </span>) </span>&#123;</span><br><span class="line">    queue.push( &#123;</span><br><span class="line">        stateChange,</span><br><span class="line">        component</span><br><span class="line">    &#125; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿®æ”¹Component.jsä¸­çš„setStateæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">setState</span>(<span class="params"> stateChange </span>)</span> &#123;</span><br><span class="line">    enqueueSetState( stateChange, <span class="built_in">this</span> ); <span class="comment">//this-&gt;Componentå®ä¾‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¸…ç©ºé˜Ÿåˆ—"><a href="#æ¸…ç©ºé˜Ÿåˆ—" class="headerlink" title="æ¸…ç©ºé˜Ÿåˆ—"></a>æ¸…ç©ºé˜Ÿåˆ—</h3><p>æ¥ä¸‹å»æ€è€ƒå¦‚ä½•æ¸…ç©ºé˜Ÿåˆ—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flush</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> item;</span><br><span class="line">  <span class="comment">//å–å‡ºæœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">while</span> ((item = setStateQueue.shift())) &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  stateChange å¯ä»¥æ˜¯å‡½æ•° æˆ–è€… å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> &#123; stateChange, component &#125; = item;</span><br><span class="line">    <span class="comment">//ä¿å­˜ä¹‹å‰çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (!component.prevState) &#123;</span><br><span class="line">      component.prevState = <span class="built_in">Object</span>.assign(&#123;&#125;, component.state);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//setstateæ˜¯ä¸ªæ–¹æ³• å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> stateChange === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;stateChangeæ˜¯ä¸ªå‡½æ•°&quot;</span>, stateChange);</span><br><span class="line">      <span class="built_in">Object</span>.assign(component.state, stateChange(component.prevState, component.props));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//  æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼ å…¥æ›´æ–°</span></span><br><span class="line">      <span class="built_in">Object</span>.assign(component.state, stateChange);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡å¾ªç¯ ä¿å­˜å½“å‰ä¸€æ¬¡çš„stateä½œä¸ºå‰ä¸€æ¬¡çš„state</span></span><br><span class="line">    component.prevState = component.state - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™åªæ˜¯å®ç°äº† state çš„æ›´æ–°ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰æ¸²æŸ“ç»„ä»¶ã€‚æ¸²æŸ“ç»„ä»¶ä¸èƒ½åœ¨éå†é˜Ÿåˆ—æ—¶è¿›è¡Œï¼Œå› ä¸ºåŒä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šå¤šæ¬¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦<code>å¦ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜æ‰€æœ‰ç»„ä»¶</code>ï¼Œä¸åŒä¹‹å¤„æ˜¯ï¼Œè¿™ä¸ªé˜Ÿåˆ—å†…ä¸ä¼šæœ‰é‡å¤çš„ç»„ä»¶ã€‚</p><p>æˆ‘ä»¬åœ¨ enqueueSetState æ—¶ï¼Œå°±å¯ä»¥åšè¿™ä»¶äº‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">enqueueSetState</span>(<span class="params">stateChange, component</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å¦‚æœrenderQueue æ²¡æœ‰ åˆ™æ·»åŠ é˜Ÿåˆ—</span></span><br><span class="line">  <span class="keyword">let</span> r = renderQueue.some(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (item = component);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//rä¸å­˜åœ¨è¯æ˜æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ </span></span><br><span class="line">  <span class="keyword">if</span> (!r) &#123;</span><br><span class="line">    renderQueue.push(component); <span class="comment">//æ·»åŠ ç»„ä»¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  çŸ­æ—¶é—´åˆå¹¶å¤šä¸ªsetState</span></span><br><span class="line">  setStateQueue.push(&#123;</span><br><span class="line">    stateChange,</span><br><span class="line">    component</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ flush æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éå† renderQueueï¼Œæ¥æ¸²æŸ“æ¯ä¸€ä¸ªç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flush</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> item, component;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">while</span> ((component = renderQueue.shift())) &#123;</span><br><span class="line">    renderComponent(component);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥æ‰§è¡Œ"><a href="#å¼‚æ­¥æ‰§è¡Œ" class="headerlink" title="å¼‚æ­¥æ‰§è¡Œ"></a>å¼‚æ­¥æ‰§è¡Œ</h3><p>æˆ‘ä»¬éœ€è¦åˆå¹¶ä¸€æ®µæ—¶é—´å†…æ‰€æœ‰çš„ setStateï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€æ®µæ—¶é—´åæ‰æ‰§è¡Œ flush æ–¹æ³•æ¥æ¸…ç©ºé˜Ÿåˆ—ï¼Œ<br>è¿™å°±è¡¨ç¤ºéœ€è¦å¼‚æ­¥æ‰§è¡Œ,ä¼šæƒ³åˆ°ä»€ä¹ˆå‘¢? setTimeout,Promise ?</p><p>å…ˆæ¥çœ‹è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="number">1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œç»“æœ 3 1 2</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨äº‹ä»¶é˜Ÿåˆ—ï¼Œè®© flush åœ¨æ‰€æœ‰åŒæ­¥ä»»åŠ¡åæ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueueSetState</span>(<span class="params">stateChange, component</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœqueueçš„é•¿åº¦æ˜¯0ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šæ¬¡flushæ‰§è¡Œä¹‹åç¬¬ä¸€æ¬¡å¾€é˜Ÿåˆ—é‡Œæ·»åŠ </span></span><br><span class="line">  <span class="keyword">if</span> (queue.length === <span class="number">0</span>) &#123;</span><br><span class="line">    defer(flush);</span><br><span class="line">  &#125;</span><br><span class="line">  queue.push(&#123;</span><br><span class="line">    stateChange,</span><br><span class="line">    component</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (!renderQueue.some(<span class="function"><span class="params">item</span> =&gt;</span> item === component)) &#123;</span><br><span class="line">    renderQueue.push(component);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º defer æ–¹æ³•ï¼Œåˆ©ç”¨ Promise.resolve</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defer</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve().then(fn);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨ä¸€æ¬¡â€œäº‹ä»¶å¾ªç¯â€œä¸­ï¼Œæœ€å¤šåªä¼šæ‰§è¡Œä¸€æ¬¡ flush äº†ï¼Œåœ¨è¿™ä¸ªâ€œäº‹ä»¶å¾ªç¯â€ä¸­ï¼Œæ‰€æœ‰çš„ setState éƒ½ä¼šè¢«åˆå¹¶ï¼Œå¹¶åªæ¸²æŸ“ä¸€æ¬¡ç»„ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹ diff ç®—æ³•</title>
      <link href="2019/08/18/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8Bdiff%E7%AE%97%E6%B3%95/"/>
      <url>2019/08/18/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8Bdiff%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™ç¯‡æ–‡ç« æ˜¯é‡‡ç”¨ preact çš„åšæ³•ï¼Œå¯¹æ¯”çœŸå® dom å’Œè™šæ‹Ÿ domï¼Œå¹¶ä¸”åœ¨å¯¹æ¯”çš„è¿‡ç¨‹ä¸­ç›´æ¥æ›´æ–°çœŸå® dom</p></blockquote><a id="more"></a><h3 id="diff-ç®—æ³•"><a href="#diff-ç®—æ³•" class="headerlink" title="diff ç®—æ³•"></a>diff ç®—æ³•</h3><p>diff ç®—æ³•?what?ä»€å¹ºç©æ„<br>å¦‚ä½•æ¸›å°‘ DOM æ›´æ–°:æˆ‘å€‘éœ€è¦æ‰¾å‡ºè« æŸ“å‰åçœŸæ­£å¤‰åŒ–çš„éƒ¨åˆ†,åªæ›´æ–°è¿™ä¸€éƒ¨åˆ†.<br>è€Œå¯¾æ¯”å¤‰åŒ–,æ‰¾å‡ºéœ€è¦<code>æ›´æ–°éƒ¨åˆ†çš„ç®—æ³•</code>ç§°ä¹‹ä¸º<code>diffç®—æ³•</code><br>å¯¾æ¯”ç­–ç•¥<br>åœ¨å‰é¢æˆ‘å€‘å®ç°äº†<em>render æ–¹æ³•,å®ƒèƒ½å°‡è™šä¼¼ DOM è£…æ›æˆçœŸæ­£çš„ DOM<br>ä½†æ˜¯æˆ‘å€‘éœ€è¦æ”¹è¿¸å®ƒ,ä¸è¦æ­¢å®ƒå„ªä¹ä¹åœ°é‡æ–°é€™æŸ“æ•´ä¸ª DOM æ‘,è€Œæ˜¯æ‰¾å‡ºçœŸæ­£<br>å¤‰åŒ–çš„éƒ¨åˆ†è¿¸è¡Œæ›¿æ›.<br>è¿™éƒ¨åˆ†å¾ˆå¤šç±» React æ¡†æ¶å®ç°æ–¹å¼éƒ½ä¸å¤ªä¸€æ ·ï¼Œæœ‰çš„æ¡†æ¶ä¼šè¿­æ‹ä¿å­˜ä¸Šæ¬¡<br>è« æŸ“çš„è™šä¼¼ DOMï¼Œç„¶åå¯¾æ¯”è™šæ‰¹ DOM å‰åçš„å¤‰åŒ–ï¼Œå¾—åˆ°ä¸€ç³»åˆ—<code>æ›´æ–°çš„æ•° æ®</code>ï¼Œç„¶åå†å°‡é€‘äº›æ›´æ–°åˆ°çœŸæ­£çš„ DOM</em>ä¸Šã€‚</p><p>ä¸ç®¡æ˜¯ DOM è¿˜æ˜¯è™šæ‹Ÿ DOMï¼Œå®ƒä»¬çš„ç»“æ„éƒ½æ˜¯ä¸€æ£µæ ‘ï¼Œå®Œå…¨å¯¹æ¯”ä¸¤æ£µæ ‘å˜åŒ–çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^3)ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬å¾ˆå°‘ä¼šè·¨å±‚çº§ç§»åŠ¨ DOMï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¯¹æ¯”åŒä¸€å±‚çº§çš„å˜åŒ–ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212203522.png"                      alt=""                ></p><p>æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„ diff ç®—æ³•æœ‰ä¸¤ä¸ªåŸåˆ™ï¼š</p><ul><li><p>å¯¹æ¯”å½“å‰çœŸå®çš„ DOM å’Œè™šæ‹Ÿ DOMï¼Œåœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­ç›´æ¥æ›´æ–°çœŸå® DOM</p></li><li><p>åªå¯¹æ¯”åŒä¸€å±‚çº§çš„å˜åŒ–</p></li></ul><h3 id="diff-æ–¹æ³•"><a href="#diff-æ–¹æ³•" class="headerlink" title="diff æ–¹æ³•"></a>diff æ–¹æ³•</h3><p>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª diff æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹æ¯”çœŸå® DOM å’Œè™šæ‹Ÿ DOMï¼Œæœ€åè¿”å›æ›´æ–°åçš„ DOM</p><p>æˆ‘ä»¬å…ˆæ¥ç®€å•çœ‹ä¸€ä¸‹çš„ä¸‰ç§è™šæ‹Ÿ dom ç»“æ„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸç”ŸDOMèŠ‚ç‚¹çš„vnode</span></span><br><span class="line">&#123;</span><br><span class="line">    tag: <span class="string">&#x27;div&#x27;</span>,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        className: <span class="string">&#x27;active&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡æœ¬èŠ‚ç‚¹çš„vnode</span></span><br><span class="line"><span class="string">&quot;hello,world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶çš„vnode</span></span><br><span class="line">&#123;</span><br><span class="line">    tag: ComponentConstrucotr,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        className: <span class="string">&#x27;active&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é¦–å…ˆè¦æ”¹å˜<code>render</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢åŠ domå‚æ•° åˆå§‹ä¸ºundefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">vnode, container,dom</span>) </span>&#123;</span><br><span class="line">  -  <span class="keyword">const</span> _vnode = _render(vnode); <span class="comment">//è¿”å›jsèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  +  <span class="keyword">const</span> _vnode =  diff(dom,vnode,container)</span><br><span class="line">  <span class="keyword">return</span> container.appendChild(_vnode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç®€å•çš„å®ç°æ˜¯å…ˆåˆ›å»ºä¸€ä¸ª diff æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diff</span>(<span class="params">dom, vnode, container</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å¯¹æ¯”èŠ‚ç‚¹çš„å˜åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> ret = diffNode(dom, vnode);</span><br><span class="line">  <span class="keyword">if</span> (container) &#123;</span><br><span class="line">    container.appendChild(ret);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffNode</span>(<span class="params">dom, vnode</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­"><a href="#æ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­" class="headerlink" title="æ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­"></a>æ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffNode</span>(<span class="params">dom, vnode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> out = dom; <span class="comment">//åˆå§‹domä¸ºundefined</span></span><br><span class="line">  <span class="comment">//åˆ¤æ–­vnodeæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">  <span class="keyword">if</span> (vnode === <span class="literal">undefined</span> || vnode === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">//å¦‚æœvnodeæ˜¯æ•°å­—ç±»å‹åˆ™å¼ºåˆ¶è½¬åŒ– stringç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">&quot;number&quot;</span>) vnode = <span class="built_in">String</span>(vnode);</span><br><span class="line">  <span class="comment">//åˆ¤æ–­vnodeæ˜¯å¦ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰çš„DOMå°±æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥æ›´æ–°å†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (dom &amp;&amp; dom.nodeType === <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (dom.textContent !== vnode) &#123;</span><br><span class="line">        dom.textContent = vnode;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å¦‚æœDOMä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œåˆ™æ–°å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹DOMï¼Œå¹¶ç§»é™¤æ‰åŸæ¥çš„</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      out = <span class="built_in">document</span>.createTextNode(vnode);</span><br><span class="line">      <span class="keyword">if</span> (dom &amp;&amp; dom.parentNode) &#123;</span><br><span class="line">        dom.parentNode.replaceChild(out, dom);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒæ²¡æœ‰å±æ€§ï¼Œä¹Ÿæ²¡æœ‰å­å…ƒç´ ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœäº†</p><h3 id="éæ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­"><a href="#éæ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­" class="headerlink" title="éæ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­"></a>éæ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­</h3><p>vnode è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªéæ–‡æœ¬çš„ DOM èŠ‚ç‚¹ï¼Œé‚£å°±è¦åˆ†ä¸¤ç§æƒ…å†µäº†ï¼š<br>ä¸€ï¼šå¦‚æœçœŸå® DOM ä¸å­˜åœ¨ï¼Œè¡¨ç¤ºæ­¤èŠ‚ç‚¹æ˜¯æ–°å¢çš„ï¼Œæˆ–è€…æ–°æ—§ä¸¤ä¸ªèŠ‚ç‚¹çš„ç±»å‹ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±æ–°å»ºä¸€ä¸ª DOM å…ƒç´ ï¼Œå¹¶å°†åŸæ¥çš„å­èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ç§»åŠ¨åˆ°æ–°å»ºçš„ DOM èŠ‚ç‚¹ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!dom) &#123;</span><br><span class="line">  out = <span class="built_in">document</span>.createElement(vnode.tag);</span><br><span class="line">  diffAttribute(out, vnode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="diffAttribute-å¯¹æ¯”å±æ€§"><a href="#diffAttribute-å¯¹æ¯”å±æ€§" class="headerlink" title="diffAttribute å¯¹æ¯”å±æ€§"></a>diffAttribute å¯¹æ¯”å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * dom çœŸå®dom</span></span><br><span class="line"><span class="comment"> * vnode è™šæ‹Ÿdom</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffAttribute</span>(<span class="params">dom, vnode</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//ä¿å­˜ä¹‹å‰çš„domæ‰€ä»¥å±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> oldAttrs = &#123;&#125;;</span><br><span class="line">  <span class="comment">//æ–°çš„å±æ€§å€¼</span></span><br><span class="line">  <span class="keyword">const</span> newAttrs = vnode.attrs;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;newAttrs&quot;</span>, newAttrs); <span class="comment">// &#123; className: &quot;active&quot;, title: &quot;123&quot; &#125;</span></span><br><span class="line">  <span class="comment">// dom åŸæœ‰èŠ‚ç‚¹å¯¹è±¡ vnode è™šæ‹ŸèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> domAttrs = dom.attributes;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;domAttrs&quot;</span>, domAttrs);</span><br><span class="line"></span><br><span class="line">  [...domAttrs].forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">    oldAttrs[item.name] = item.value; <span class="comment">//&#123;id:root&#125;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//å¦‚æœåŸæ¥çš„å±æ€§ä¸åœ¨æ–°çš„å±æ€§å½“ä¸­ï¼Œåˆ™å°†å…¶ç§»é™¤æ‰ï¼ˆå±æ€§å€¼è®¾ä¸ºundefinedï¼‰</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> newAttrs) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(key <span class="keyword">in</span> oldAttrs)) &#123;</span><br><span class="line">      <span class="comment">//ç§»é™¤dom</span></span><br><span class="line">      setAttribute(dom, key, <span class="literal">undefined</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æ›´æ–°å¯¹åº”å±æ€§ class=&quot;abc&quot; ==&gt; class=&quot;cba&quot;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> newAttrs) &#123;</span><br><span class="line">    <span class="comment">//å±æ€§å€¼ä¸ç›¸ç­‰çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (oldAttrs[key] !== newAttrs[key]) &#123;</span><br><span class="line">      <span class="comment">//å¢åŠ dom</span></span><br><span class="line">      setAttribute(dom, key, newAttrs[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äºŒï¼šå¦‚æœçœŸå® DOM å­˜åœ¨ï¼Œå¹¶ä¸”å’Œè™šæ‹Ÿ DOM æ˜¯åŒä¸€ç±»å‹çš„ï¼Œé‚£æˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦åšåˆ«çš„ï¼Œåªéœ€è¦ç­‰å¾…åé¢å¯¹æ¯”å±æ€§å’Œå¯¹æ¯”å­èŠ‚ç‚¹ã€‚</p><h3 id="å¯¹æ¯”å­èŠ‚ç‚¹çš„åˆ¤æ–­"><a href="#å¯¹æ¯”å­èŠ‚ç‚¹çš„åˆ¤æ–­" class="headerlink" title="å¯¹æ¯”å­èŠ‚ç‚¹çš„åˆ¤æ–­"></a>å¯¹æ¯”å­èŠ‚ç‚¹çš„åˆ¤æ–­</h3><p>è¿™é‡Œä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå‰é¢æˆ‘ä»¬å®ç°çš„ä¸åŒ diff æ–¹æ³•ï¼Œéƒ½æ˜¯æ˜ç¡®çŸ¥é“å“ªä¸€ä¸ªçœŸå® DOM å’Œè™šæ‹Ÿ DOM å¯¹æ¯”ï¼Œä½†æ˜¯å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»¬å¯èƒ½æ”¹å˜äº†é¡ºåºï¼Œæˆ–è€…æ•°é‡æœ‰æ‰€å˜åŒ–ï¼Œ<code>æˆ‘ä»¬å¾ˆéš¾ç¡®å®šè¦å’Œè™šæ‹ŸDOMå¯¹æ¯”çš„æ˜¯å“ªä¸€ä¸ª</code>ã€‚<br>ä¸ºäº†ç®€åŒ–é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç”¨æˆ·æä¾›ä¸€äº›çº¿ç´¢ï¼šç»™èŠ‚ç‚¹è®¾ä¸€ä¸ª key å€¼ï¼Œ<code>é‡æ–°æ¸²æŸ“æ—¶å¯¹æ¯”key</code>å€¼ç›¸åŒçš„èŠ‚ç‚¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¯”è¾ƒå­èŠ‚ç‚¹(domèŠ‚ç‚¹å’Œç»„ä»¶)</span></span><br><span class="line"><span class="keyword">if</span> ((vnode.children &amp;&amp; vnode.children.length &gt; <span class="number">0</span>) || (out.childNodes &amp;&amp; out.childNodes.length &gt; <span class="number">0</span>)) &#123;</span><br><span class="line">  <span class="comment">//å¯¹æ¯”ç»„ä»¶å’Œ å­èŠ‚ç‚¹</span></span><br><span class="line">  diffChildren(out, vnode.children);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="diffChildren"><a href="#diffChildren" class="headerlink" title="diffChildren"></a>diffChildren</h3><p>ä¸€å¼€å§‹ dom ä¸ºç©ºå€¼,åªå»åŠ è½½ vchildren,å¯¹ vchildren åšç›¸åº”æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffChildren</span>(<span class="params">dom, vchildren</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> domChildren = dom.childNodes;</span><br><span class="line">  <span class="keyword">const</span> children = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> keyed = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†æœ‰keyçš„èŠ‚ç‚¹å’Œæ²¡æœ‰keyçš„èŠ‚ç‚¹åˆ†å¼€</span></span><br><span class="line">  <span class="keyword">if</span> (domChildren.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; domChildren.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> child = domChildren[i];</span><br><span class="line">      <span class="keyword">const</span> key = child.key;</span><br><span class="line">      <span class="keyword">if</span> (key) &#123;</span><br><span class="line">        keyed[key] = child;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        children.push(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä¸€å¼€å§‹å…ˆèµ°è¿™é‡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (vchildren &amp;&amp; vchildren.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> min = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> childrenLen = children.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vchildren.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> vchild = vchildren[i];</span><br><span class="line">      <span class="keyword">const</span> key = vchild.key;</span><br><span class="line">      <span class="keyword">let</span> child;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæœ‰keyï¼Œæ‰¾åˆ°å¯¹åº”keyå€¼çš„èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (key) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyed[key]) &#123;</span><br><span class="line">          child = keyed[key];</span><br><span class="line">          keyed[key] = <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰keyï¼Œåˆ™ä¼˜å…ˆæ‰¾ç±»å‹ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (min &lt; childrenLen) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = min; j &lt; childrenLen; j++) &#123;</span><br><span class="line">          <span class="keyword">let</span> c = children[j];</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (c &amp;&amp; isSameNodeType(c, vchild)) &#123;</span><br><span class="line">            child = c;</span><br><span class="line">            children[j] = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (j === childrenLen - <span class="number">1</span>) childrenLen--;</span><br><span class="line">            <span class="keyword">if</span> (j === min) min++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¯¹æ¯”</span></span><br><span class="line">      child = diff(child, vchild);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ›´æ–°DOM</span></span><br><span class="line">      <span class="keyword">const</span> f = domChildren[i];</span><br><span class="line">      <span class="keyword">if</span> (child &amp;&amp; child !== dom &amp;&amp; child !== f) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ›´æ–°å‰çš„å¯¹åº”ä½ç½®ä¸ºç©ºï¼Œè¯´æ˜æ­¤èŠ‚ç‚¹æ˜¯æ–°å¢çš„</span></span><br><span class="line">        <span class="keyword">if</span> (!f) &#123;</span><br><span class="line">          dom.appendChild(child);</span><br><span class="line">          <span class="comment">// å¦‚æœæ›´æ–°åçš„èŠ‚ç‚¹å’Œæ›´æ–°å‰å¯¹åº”ä½ç½®çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸€æ ·ï¼Œè¯´æ˜å½“å‰ä½ç½®çš„èŠ‚ç‚¹è¢«ç§»é™¤äº†</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (child === f.nextSibling) &#123;</span><br><span class="line">          removeNode(f);</span><br><span class="line">          <span class="comment">// å°†æ›´æ–°åçš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// æ³¨æ„insertBeforeçš„ç”¨æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å·²å­˜åœ¨çš„èŠ‚ç‚¹</span></span><br><span class="line">          dom.insertBefore(child, f);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­æˆ‘ä»¬åœ¨ä¹‹å‰çš„<code>createElement</code>è¿”å›å€¼ä¸­å¢åŠ ä¸€ä¸ª key å€¼,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tag,attrs,...childrens</span>)</span>&#123;</span><br><span class="line">  + attrs = attrs || &#123;&#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      tag,</span><br><span class="line">      attrs,</span><br><span class="line">      childrens,</span><br><span class="line">   +  key:attrs.key || <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶çš„-diff"><a href="#ç»„ä»¶çš„-diff" class="headerlink" title="ç»„ä»¶çš„ diff"></a>ç»„ä»¶çš„ diff</h3><p>å¦‚æœ vnode æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–¹æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæ˜¯ å‡½æ•°ç»„ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> vnode.tag === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> diffComponent(dom, vnode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>diffComponent æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffComponent</span>(<span class="params">dom, vnode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> comp = dom &amp;&amp; dom._component;</span><br><span class="line">  <span class="keyword">let</span> oldDom = dom;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœç»„ä»¶ç±»å‹æ²¡æœ‰å˜åŒ–ï¼Œåˆ™é‡æ–°set props</span></span><br><span class="line">  <span class="keyword">if</span> (comp &amp;&amp; comp.constructor === vnode.tag) &#123;</span><br><span class="line">    setComponentProps(comp, vnode.attrs);</span><br><span class="line">    dom = comp.base;</span><br><span class="line">    <span class="comment">// å¦‚æœç»„ä»¶ç±»å‹å˜åŒ–ï¼Œåˆ™ç§»é™¤æ‰åŸæ¥ç»„ä»¶ï¼Œå¹¶æ¸²æŸ“æ–°çš„ç»„ä»¶</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (comp) &#123;</span><br><span class="line">      <span class="comment">//å¸è½½ç»„ä»¶</span></span><br><span class="line">      unmountComponent(comp);</span><br><span class="line">      oldDom = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºæ–°ç»„ä»¶</span></span><br><span class="line">    comp = createComponent(vnode.tag, vnode.attrs);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç»„ä»¶å±æ€§</span></span><br><span class="line">    setComponentProps(comp, vnode.attrs);</span><br><span class="line">    <span class="comment">//æŒ‚è½½æ–°ç»„ä»¶</span></span><br><span class="line">    dom = comp.base;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldDom &amp;&amp; dom !== oldDom) &#123;</span><br><span class="line">      oldDom._component = <span class="literal">null</span>;</span><br><span class="line">      removeNode(oldDom);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dom;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸è½½ç»„ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">component</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unmountComponent</span>(<span class="params">component</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (component.componentWillUnmount) component.componentWillUnmount();</span><br><span class="line">  removeNode(component.base);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡æ–°ä¿®æ”¹-renderComponent"><a href="#é‡æ–°ä¿®æ”¹-renderComponent" class="headerlink" title="é‡æ–°ä¿®æ”¹ renderComponent"></a>é‡æ–°ä¿®æ”¹ renderComponent</h3><p>å½“ç„¶æˆ‘ä»¬è¿˜éœ€è¦å»æ”¹<code>renderComponent</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">renderComponent</span>(<span class="params">comp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> base;</span><br><span class="line">  <span class="keyword">const</span> render = comp.render(); <span class="comment">//è¿”å›jsxå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (comp.base &amp;&amp; comp.componentWillUpdate) &#123;</span><br><span class="line">    comp.componentWillUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (comp.base) &#123;</span><br><span class="line">    <span class="comment">//ä»£è¡¨ç»„ä»¶å·²ç»æŒ‚è½½äº†</span></span><br><span class="line">    <span class="keyword">if</span> (comp.componentDidUpdate) comp.componentDidUpdate();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (comp.componentDidMount) &#123;</span><br><span class="line">    comp.componentDidMount();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  - base = _render(render); <span class="comment">//è¿”å›jsèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  + base = diffNode(comp.base,render)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;</span>, base);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åŸå…ˆæ•´ä¸ªdomæ›¿æ¢çš„æ–¹æ¡ˆå°±è¢«å‰”é™¤</span></span><br><span class="line">  - <span class="keyword">if</span> (comp.base &amp;&amp; comp.base.parentNode) &#123;</span><br><span class="line">  -   comp.base.parentNode.replaceChild(base, comp.base);</span><br><span class="line">  - &#125;</span><br><span class="line">  comp.base = base;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½“éªŒä¸‹-diff-ä¸æ²¡æœ‰-diff"><a href="#ä½“éªŒä¸‹-diff-ä¸æ²¡æœ‰-diff" class="headerlink" title="ä½“éªŒä¸‹ diff ä¸æ²¡æœ‰ diff"></a>ä½“éªŒä¸‹ diff ä¸æ²¡æœ‰ diff</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/2020-02-15 23.13.42.gif"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•</title>
      <link href="2019/08/15/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>2019/08/15/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>React ç”Ÿå‘½å‘¨æœŸä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µã€è¿è¡Œä¸­é˜¶æ®µå’Œé”€æ¯é˜¶æ®µï¼Œåœ¨ React ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œä¼šä¾æ¬¡è§¦å‘ä¸åŒçš„é’©å­å‡½æ•°ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹ React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><a id="more"></a><p>çœ‹ä¸€ä¸‹æµç¨‹å›¾</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200213171328.png"                      alt=""                ></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      num: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentWillMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç»„ä»¶å°†è¦åŠ è½½&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentWillReceiveProps</span>(<span class="params">nextProps</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;componentWillReceiveProps&quot;</span>, nextProps);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç»„ä»¶å³å°†æ›´æ–°&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps, prevState</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç»„ä»¶æ›´æ–°å®Œæˆ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç»„ä»¶åŠ è½½å®Œæˆ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç»„ä»¶å¸è½½&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      num: <span class="built_in">this</span>.state.num + <span class="number">1</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;active&quot;</span> title=<span class="string">&quot;123&quot;</span>&gt;</span><br><span class="line">        hello,<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯ç±»ç»„ä»¶react,&#123;this.state.num&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.add.bind(<span class="built_in">this</span>)&#125;&gt;ç‚¹å‡»æˆ‘,æ›´æ–°&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬åœ¨è°ƒç”¨<code>componentWillMount</code>çš„æ—¶å€™ç»„ä»¶æ˜¯ä¸æ˜¯<code>è¿˜æ²¡æœ‰è¢«æ¸²æŸ“</code>,æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æ˜¯å¦åœ¨<code>renderComponent</code>æ–¹æ³•ä¹‹å‰æ‰§è¡Œæˆ‘ä»¬çš„å°†è¦æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</p><h3 id="setComponentProps"><a href="#setComponentProps" class="headerlink" title="setComponentProps"></a>setComponentProps</h3><p>å¦‚ä½•åˆ¤æ–­ç»„ä»¶æ˜¯å¦å·²ç»æŒ‚è½½?<br>å¯ä»¥ä½¿ç”¨<code>comp.base</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setComponentProps</span>(<span class="params">comp, props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å®ç°ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!comp.base) &#123;</span><br><span class="line">    <span class="keyword">if</span> (comp.componentWillMount) comp.componentWillMount();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (comp.componentWillReceiveProps) &#123;</span><br><span class="line">    comp.componentWillReceiveProps();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æŒ‚è½½compä¸Šå±æ€§</span></span><br><span class="line">  comp.props = props;</span><br><span class="line">  <span class="comment">//  æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line">  renderComponent(comp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="renderComponent"><a href="#renderComponent" class="headerlink" title="renderComponent"></a>renderComponent</h3><p>é‚£ä¹ˆç»§ç»­è€ƒè™‘<code>componentWillUpdate</code>,<code>componentDidUpdate</code>,<code>componentDidMount</code>çš„ç”Ÿå‘½å‘¨æœŸåœ¨å“ªé‡Œå®ç°? åº”è¯¥åœ¨<code>renderComponent</code>æ–¹æ³•ä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">renderComponent</span>(<span class="params">comp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> base;</span><br><span class="line">  <span class="keyword">const</span> render = comp.render(); <span class="comment">//è¿”å›jsxå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (comp.base &amp;&amp;  ) &#123;</span><br><span class="line">    comp.componentWillUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (comp.base) &#123;</span><br><span class="line">    <span class="comment">//ä»£è¡¨ç»„ä»¶å·²ç»æŒ‚è½½äº†</span></span><br><span class="line">    <span class="keyword">if</span> (comp.componentDidUpdate) comp.componentDidUpdate();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (comp.componentDidMount) &#123;</span><br><span class="line">    comp.componentDidMount();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  base = _render(render); <span class="comment">//è¿”å›jsèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;</span>, base);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ›´æ”¹çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">if</span> (comp.base &amp;&amp; comp.base.parentNode) &#123;</span><br><span class="line">    comp.base.parentNode.replaceChild(base, comp.base);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  comp.base = base;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;comp&quot;</span>, comp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ˜¯æœ€ç®€å•çš„å®ç°,å¹¶æ²¡æœ‰è€ƒè™‘å¾ˆå¤šæƒ…å†µ,æ¯”å¦‚å­ç»„ä»¶æ›´æ–°å®Œæ‰èƒ½çˆ¶ç»„ä»¶æ›´æ–°â€¦</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹ç»„ä»¶å®ç°</title>
      <link href="2019/08/12/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0/"/>
      <url>2019/08/12/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>ç»„ä»¶åˆ†ä¸º<code>å‡½æ•°ç»„ä»¶</code>å’Œ<code>ç±»ç»„ä»¶</code></p><a id="more"></a><h3 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å‡½æ•°å¼ç»„ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;active&quot;</span> title=<span class="string">&quot;123&quot;</span>&gt;</span><br><span class="line">      hello,<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯å‡½æ•°react<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="headerlink" title="ç±»ç»„ä»¶"></a>ç±»ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home1</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      name: <span class="string">&quot;jack&quot;</span>,</span><br><span class="line">      num: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;active&quot;</span> title=<span class="string">&quot;123&quot;</span>&gt;</span><br><span class="line">        hello,<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯ç±»ç»„ä»¶react,&#123;this.state.num&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.add.bind(<span class="built_in">this</span>)&#125;&gt;ç‚¹å‡»æˆ‘,æ›´æ–°&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h4><p>ç»„ä»¶åŸºç±» React.Component åŒ…å«äº†ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„å˜é‡å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥åœ°å®ç°å®ƒï¼š<br>å…ˆå®šä¹‰ä¸€ä¸ª Component ç±»ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props = &#123;&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.props = props;</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Component;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å®šä¹‰ç»„ä»¶æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ <code>state &amp; props</code>å±æ€§,è¿›è¡Œåˆå§‹åŒ–</p><h4 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h4><p>ç»„ä»¶å†…éƒ¨è¿˜æœ‰ä¸ª<code>setState</code>æ–¹æ³•ä¿®æ”¹æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; renderComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;../react-dom/render&#x27;</span></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="title">setState</span>(<span class="params">stateChange</span>)</span> &#123;</span><br><span class="line">      <span class="comment">//æ›´æ–°æ•°æ®</span></span><br><span class="line">     <span class="built_in">Object</span>.assign(<span class="built_in">this</span>.state,stateChange)</span><br><span class="line">      <span class="comment">//é‡æ–°æ¸²æŸ“ç»„ä»¶  thisæŒ‡å½“å‰ç»„ä»¶</span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;Component-this&#x27;</span>, <span class="built_in">this</span>);</span><br><span class="line">       renderComponent(<span class="built_in">this</span>)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶æˆ‘ä»¬çŸ¥é“ setState æ˜¯å¼‚æ­¥çš„,æˆ‘ä»¬åªæ˜¯å…ˆå®ç°ä¸€ä¸ªæœ€ç®€å•ç²—æš´çš„ setState.åé¢ä¼šç»§ç»­è¿­ä»£è¿™ä¸ªæ–¹æ³•.</p><h4 id="render"><a href="#render" class="headerlink" title="render"></a>render</h4><p>æˆ‘ä»¬ç»§ç»­åˆ†æä¸€ä¸‹<code>render</code>æ–¹æ³•<br>æˆ‘ä»¬ç»§ç»­å°† render æ–¹æ³•åšä¸€äº›æ”¹å˜,å°å°çš„å°è£…ä¸€ä¸‹,è®¾ç½®ä¸€ä¸ª<code>_render</code>æ–¹æ³•è¿”å› jsx èŠ‚ç‚¹å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">vnode, container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _vnode = _render(vnode); <span class="comment">//è¿”å›jsèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> container.appendChild(_vnode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>react æ˜¯å¦‚ä½•åŒºåˆ†å¦‚ä½•åŒºåˆ†ä¸€ä¸ª<code>ç±»ç»„ä»¶</code>ä¸<code>å‡½æ•°ç»„ä»¶</code></p></blockquote><p>é¦–å…ˆå‡½æ•°ç»„ä»¶å¯ä»¥ç›´æ¥ new å‡½æ•°ç»„ä»¶.<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212161546.png"                      alt=""                ><br>é‚£ä¹ˆç±»ç»„ä»¶å¦‚ä½•åˆ¤æ–­?<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212161341.png"                      alt=""                ></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">home.prototype &amp;&amp; home.prototype.render;</span><br></pre></td></tr></table></figure><h5 id="render-1"><a href="#render-1" class="headerlink" title="_render"></a>_render</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params">vnode</span>) </span>&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">//åˆ¤æ–­ç»„ä»¶æ˜¯å‡½æ•°</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode.tag === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºç»„ä»¶</span></span><br><span class="line">     <span class="keyword">const</span> comp = createComponent(vnode.tag,vnode.attrs)</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;å‡½æ•°ç»„ä»¶&#x27;</span>,comp);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç»„ä»¶å±æ€§</span></span><br><span class="line">    setComponentProps(comp,vnode.attrs)</span><br><span class="line">    <span class="comment">//ç»„ä»¶æ¸²æŸ“èŠ‚ç‚¹ è¿”å›å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> comp.base</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  å°†è™šæ‹Ÿdomè½¬åŒ–æˆçœŸå®domæ‰“å°åˆ°é¡µé¢ä¸­</span></span><br><span class="line">  vnode.childrens.forEach(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">    render(child, dom);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶çš„æ¸²æŸ“"><a href="#ç»„ä»¶çš„æ¸²æŸ“" class="headerlink" title="ç»„ä»¶çš„æ¸²æŸ“"></a>ç»„ä»¶çš„æ¸²æŸ“</h3><p>ç”¨åˆ°äº†<code>createComponent</code>å’Œ<code>setComponentProps</code>ä¸¤ä¸ªæ–¹æ³•.æˆ‘ä»¬æ¥åˆ†æä¸‹</p><h4 id="createComponent"><a href="#createComponent" class="headerlink" title="createComponent"></a>createComponent</h4><p><code>createComponent</code>æ–¹æ³•ç”¨æ¥åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå¹¶ä¸”å°†å‡½æ•°å®šä¹‰ç»„ä»¶æ‰©å±•ä¸ºç±»å®šä¹‰ç»„ä»¶è¿›è¡Œå¤„ç†ï¼Œä»¥å…å…¶ä»–åœ°æ–¹éœ€è¦åŒºåˆ†ä¸åŒå®šä¹‰æ–¹å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºç»„ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComponent</span>(<span class="params">comp, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> inst;</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç±»å®šä¹‰ç»„ä»¶ï¼Œåˆ™ç›´æ¥è¿”å›å®ä¾‹</span></span><br><span class="line">  <span class="keyword">if</span> (comp.prototype &amp;&amp; comp.prototype.render) &#123;</span><br><span class="line">    <span class="comment">//ç±»ç»„ä»¶</span></span><br><span class="line">    inst = <span class="keyword">new</span> comp(props);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//å‡½æ•°ç»„ä»¶ æ‰©å±•æˆç±»ç»„ä»¶ æ„é€ ä¸€ä¸ªå®ä¾‹, ç»Ÿä¸€ç®¡ç†</span></span><br><span class="line">    inst = <span class="keyword">new</span> Component(props);</span><br><span class="line">    <span class="comment">//  æ„é€ å‡½æ•°çš„æŒ‡å‘</span></span><br><span class="line">    inst.constructor = comp;</span><br><span class="line">    <span class="comment">//å®šä¹‰renderå‡½æ•°</span></span><br><span class="line">    inst.render = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.constructor(props); <span class="comment">//==&gt; ç›¸å½“äºæ‰§è¡Œ ç±»ç»„ä»¶ä»² render()&#123;xxxxx&#125; æ–¹æ³•</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> inst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="setComponentProps"><a href="#setComponentProps" class="headerlink" title="setComponentProps"></a>setComponentProps</h4><p>setComponentProps æ–¹æ³•ç”¨æ¥æ›´æ–°<code>props</code>ï¼Œåœ¨å…¶ä¸­å¯ä»¥å®ç°<code>componentWillMount</code>ï¼Œ<code>componentWillReceiveProps</code>ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•(ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬ä¸‹æ¬¡å†è¯´)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setComponentProps</span>(<span class="params">comp, props</span>) </span>&#123;</span><br><span class="line">  comp.props = props;</span><br><span class="line">  <span class="comment">//  æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line">  renderComponent(comp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="renderComponent"><a href="#renderComponent" class="headerlink" title="renderComponent"></a>renderComponent</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderComponent</span>(<span class="params">comp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> base; <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ç”¨äºå­˜æ”¾èŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> render = comp.render(); <span class="comment">//è¿”å›jsxå¯¹è±¡</span></span><br><span class="line">  base = _render(render); <span class="comment">//è¿”å›jsèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;</span>, base);</span><br><span class="line">  comp.base = base;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;comp&quot;</span>, comp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212162504.png"                      alt=""                ></p><p>ç°åœ¨å¤§éƒ¨åˆ†å·¥ä½œå·²ç»å®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ¸²æŸ“ç»„ä»¶äº†ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212162717.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹ JSX å’Œè™šæ‹Ÿ DOM</title>
      <link href="2019/08/11/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8BJSX%E5%92%8C%E8%99%9A%E6%8B%9FDOM/"/>
      <url>2019/08/11/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8BJSX%E5%92%8C%E8%99%9A%E6%8B%9FDOM/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å¯ä»¥ä»æœ€ç®€å•åˆ†æä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(<span class="string">&quot;ele&quot;</span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä»¥ä¸Šä»£ç çš„æ„æ€å°±æ˜¯è¯´ä¼ å…¥<code>ä¸€ä¸ªå­—ç¬¦ä¸²</code>å’Œ<code>ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡</code>,å°†å­—ç¬¦ä¸²æŒ‚è½½åˆ°èŠ‚ç‚¹å¯¹è±¡ä¸­å¹¶æ˜¾ç¤ºåˆ°é¡µé¢ä¸­</p><p>é‚£ render çš„å«ä¹‰å…¶å®å°±æ˜¯<code>æ¸²æŸ“</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ReactDOM = &#123;</span><br><span class="line">  render</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;è™šæ‹Ÿdom/rootèŠ‚ç‚¹&#125;</span> <span class="variable">vnode</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;å®¹å™¨&#125;</span> <span class="variable">container</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">vnode, container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> container.appendChild(dom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬çš„å…ƒç´ å°±æŒ‚è½½å®Œæˆ</p><p>ä½† react è¿œè¿œä¸æ­¢é‚£ä¹ˆç®€å•å¯¹å§.æˆ‘ä»¬renderç¬¬ä¸€ä¸ªå‚æ•°ä¸­è¿˜å¯ä»¥ä¼ <code>å‡½æ•°ç»„ä»¶</code>å’Œ<code>ç±»ç»„ä»¶</code></p><h2 id="jsx-å¯¹è±¡"><a href="#jsx-å¯¹è±¡" class="headerlink" title="jsx å¯¹è±¡"></a>jsx å¯¹è±¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ele = (</span><br><span class="line">  &lt;div className=<span class="string">&quot;active&quot;</span> title=<span class="string">&quot;123&quot;</span>&gt;</span><br><span class="line">    hello,<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span> react<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> æ¨¡æ‹Ÿå‡ºä»¥ä¸‹ä»£ç </span></span><br><span class="line"><span class="comment"> var ele = React.createElement(&quot;div&quot;, &#123;</span></span><br><span class="line"><span class="comment">  cl: true,</span></span><br><span class="line"><span class="comment">  as: true,</span></span><br><span class="line"><span class="comment">  sName: &quot; active&quot;,</span></span><br><span class="line"><span class="comment">  title: &quot; 123 &quot;</span></span><br><span class="line"><span class="comment">&#125;, &quot;hello, &quot;, React.createElement(&quot;span&quot;, null, &quot; react&quot;));</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡è½¬åŒ–,åº”è¯¥æ˜¯è¿™æ ·çš„</p><p><strong>æˆ‘ä»¬æ¥çœ‹çœ‹ render å‡½æ•°æ˜¯å¦‚ä½•å®ç°?</strong></p><p><code>render</code>æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†è™šæ‹Ÿ DOM æ¸²æŸ“æˆçœŸå®çš„ DOM</p><p>æˆ‘ä»¬é¦–å…ˆè¦å°† ele ä¸­çš„ dom å¯¹è±¡è§£ææˆ jsx å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> React = &#123;</span><br><span class="line">  createElement</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tag, attrs, ...childrens</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    tag,</span><br><span class="line">    attrs,</span><br><span class="line">    childrens</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212004617.png"                      alt=""                ></p><p>å¦‚ä¸‹ä»£ç å®ç°<code>ReactDOM.render</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœ€ç®€å•çš„å®ç°</span></span><br><span class="line"><span class="keyword">const</span> ReactDOM = &#123;</span><br><span class="line">  render</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">vnode, container</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ReactDOM;</span><br></pre></td></tr></table></figure><h3 id="è™šæ‹ŸèŠ‚ç‚¹çš„æ ¡éªŒ"><a href="#è™šæ‹ŸèŠ‚ç‚¹çš„æ ¡éªŒ" class="headerlink" title="è™šæ‹ŸèŠ‚ç‚¹çš„æ ¡éªŒ"></a>è™šæ‹ŸèŠ‚ç‚¹çš„æ ¡éªŒ</h3><p>æ¥ä¸‹æ¥ç»§ç»­ç»†åŒ–æ¯ä¸€ä¸ªç»†èŠ‚,<code>render</code>ä¸­è¦æ ¡éªŒä¸€ä¸‹<code>vnode</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">vnode, container</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­vnodeæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">  <span class="keyword">if</span> (vnode === <span class="literal">undefined</span> || vnode === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">//å¦‚æœvnodeæ˜¯æ•°å­—ç±»å‹åˆ™å¼ºåˆ¶è½¬åŒ– stringç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">&quot;number&quot;</span>) vnode = <span class="built_in">String</span>(vnode);</span><br><span class="line">  <span class="comment">//åˆ¤æ–­vnodeæ˜¯å¦ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">const</span> textNode = <span class="built_in">document</span>.createTextNode(vnode);</span><br><span class="line">    <span class="keyword">return</span> container.appendChild(textNode);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  å¦åˆ™å°±æ˜¯è™šæ‹Ÿdomå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> &#123; tag, attrs &#125; = vnode;</span><br><span class="line">  <span class="comment">//åˆ›å»ºèŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> dom = <span class="built_in">document</span>.createElement(tag); <span class="comment">// &lt;div&gt;&lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> container.appendChild(dom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡æœ¬èŠ‚ç‚¹æ¸²æŸ“"><a href="#æ–‡æœ¬èŠ‚ç‚¹æ¸²æŸ“" class="headerlink" title="æ–‡æœ¬èŠ‚ç‚¹æ¸²æŸ“"></a>æ–‡æœ¬èŠ‚ç‚¹æ¸²æŸ“</h3><p>ç»§ç»­æˆ‘ä»¬å¯ä»¥è€ƒè™‘<code>&lt;div className=&quot;box&quot;,title=&quot;æ–‡æœ¬&quot;&gt;</code>èŠ‚ç‚¹å¯¹è±¡ä¸Šçš„å±æ€§å¦‚ä½•æ·»åŠ å‘¢é¥¿?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"> <span class="keyword">const</span> dom = <span class="built_in">document</span>.createElement(tag);</span><br><span class="line"> <span class="comment">//åˆ¤æ–­å¦‚æœæœ‰å±æ€§å€¼</span></span><br><span class="line"><span class="keyword">if</span> (attrs) &#123;</span><br><span class="line">  <span class="built_in">Object</span>.keys(attrs).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> value = attrs[key];</span><br><span class="line">    <span class="comment">//æ·»åŠ èŠ‚ç‚¹å±æ€§</span></span><br><span class="line">    setAttribute(dom, key, value);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»§ç»­åˆ†æä¸€ä¸‹<code>setAttribute</code>æ·»åŠ å±æ€§çš„æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹domä¸­çš„æ ‡ç­¾è®¾ç½®å±æ€§å   div class=&quot;root&quot; or div onclick=&quot;add()&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setAttribute</span>(<span class="params">dom, key, value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­classå±æ€§å</span></span><br><span class="line">  <span class="keyword">if</span> (key === <span class="string">&quot;className&quot;</span>) &#123;</span><br><span class="line">    key = <span class="string">&quot;class&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/on\w/</span>.test(key)) &#123;</span><br><span class="line">    key = key.toLocaleLowerCase(); <span class="comment">//onClick -&gt; onclick</span></span><br><span class="line">    dom[key] = value || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">&quot;style&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//ä¾‹å¦‚  div style=&quot;xxxx:xxxx&quot; or  stlye=&#123;&#123;&#125;&#125;</span></span><br><span class="line">    <span class="keyword">if</span> (!value || <span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      dom.style.cssText = value || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &amp;&amp; <span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> k <span class="keyword">in</span> value) &#123;</span><br><span class="line">        <span class="comment">//  &#123;width:20&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> value[k] === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">          dom.style[k] = value[k] + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          dom.style[k] = value[k];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//å…¶ä»–å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (key <span class="keyword">in</span> dom) &#123;</span><br><span class="line">      dom[key] = value || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ›´æ–°å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      dom.setAttribute(key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      dom.removeAttribute(key);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­èŠ‚ç‚¹æ¸²æŸ“"><a href="#å­èŠ‚ç‚¹æ¸²æŸ“" class="headerlink" title="å­èŠ‚ç‚¹æ¸²æŸ“"></a>å­èŠ‚ç‚¹æ¸²æŸ“</h3><p>æˆ‘ä»¬åœ¨<code>createElement</code>ä¸­æœ‰<code>childrens</code>å±æ€§,ä»£è¡¨å…¶ä»–å­èŠ‚ç‚¹å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½æ˜¯æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tag, attrs, ...childrens</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    tag,</span><br><span class="line">    attrs,</span><br><span class="line">    childrens <span class="comment">//å…¶ä»–å­èŠ‚ç‚¹</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ©ç”¨<code>é€’å½’</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">        æ¸²æŸ“å­èŠ‚ç‚¹  ç”¨é€’å½’</span></span><br><span class="line"><span class="comment">   *   &lt;div&gt;hello,&lt;span&gt;123&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="keyword">if</span> (vnode.childrens) &#123;</span><br><span class="line">  vnode.childrens.forEach(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">    render(child, dom);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> container.appendChild(dom);</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œæœ€ç®€å•çš„ jsx ä¸è™šæ‹Ÿ dom å°±åˆ†æåˆ°è¿™é‡Œ</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å®ç° react ä¹‹ä»‹ç»ä»¥åŠç›¸å…³é…ç½®</title>
      <link href="2019/08/09/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"/>
      <url>2019/08/09/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹åˆ›å»ºä¸€ä¸ª<code>miniReact</code>æ–‡ä»¶å¤¹,<br>åˆå§‹åŒ–é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn init -y</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä¸‹è½½ä¸€äº›ä¾èµ–</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add  -g parcel-bundler</span><br><span class="line"></span><br><span class="line">yarn add babel-core babel-preset-env babel-plugin-transform-react-jsx --dev</span><br></pre></td></tr></table></figure><p>parcel æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„é›¶é…ç½®æ‰“åŒ…å·¥å…·</p><p>æ¥ä¸‹æ¥æ–°å»º index.js å’Œ index.htmlï¼Œåœ¨ index.html ä¸­å¼•å…¥ index.jsã€‚</p><p>æ³¨æ„ä¸€ä¸‹ babel çš„é…ç½® <code>.babelrc</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>: [<span class="string">&quot;env&quot;</span>],</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        [<span class="string">&quot;transform-react-jsx&quot;</span>, &#123;</span><br><span class="line">            <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;React.createElement&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>transform-react-jsx</code>å°±æ˜¯å°†<code>jsxè½¬æ¢æˆjs</code>çš„ babel æ’ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸ª pragma é¡¹ï¼Œå¯ä»¥å®šä¹‰ jsx è½¬æ¢æ–¹æ³•çš„åç§°ï¼Œä½ ä¹Ÿå¯ä»¥å°†å®ƒæ”¹æˆ hï¼ˆè¿™æ˜¯å¾ˆå¤šç±» React æ¡†æ¶ä½¿ç”¨çš„åç§°)</p><p>å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤ parcel index.html å°†å®ƒè·‘èµ·æ¥äº†ï¼Œå½“ç„¶ï¼Œç°åœ¨å®ƒè¿˜ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20200212094747.png"                      alt=""                ></p><p>æˆ‘ä»¬å†ä¸‹ä¸€æ¬¡ä»‹ç»å¦‚ä½•è§£æ jsx</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCodeä¹¦å†™é¡¹ç›®é…ç½®eslint+prettier ç»Ÿä¸€ä»£ç é£æ ¼</title>
      <link href="2019/08/08/VS%20Code%E4%B9%A6%E5%86%99%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%20eslint+prettier%20%E7%BB%9F%E4%B8%80%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC/"/>
      <url>2019/08/08/VS%20Code%E4%B9%A6%E5%86%99%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%20eslint+prettier%20%E7%BB%9F%E4%B8%80%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®å†™çš„äººè¶Šæ¥è¶Šå¤šï¼Œç»Ÿä¸€ä»£ç è§„èŒƒçš„è¶‹åŠ¿è¶Šæ¥è¶Šé‡è¦ï¼Œç ”ç©¶ä¸‹eslintå§<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/166295c5abb096f9.jpg"                      alt=""                ></p><p>å…³äºeslintçš„å†å²<code>è°·æ­Œ</code>å§</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="built_in">global</span> add eslint </span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> eslint-<span class="built_in">demo</span></span><br><span class="line"></span><br><span class="line">cd eslint-<span class="built_in">demo</span></span><br><span class="line"></span><br><span class="line">eslint --init</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥æ™ºèƒ½é—®ç­”æ—¶é—´O(âˆ©_âˆ©)O~~</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">? How would you like to configure ESLint? Answer questions about your style</span><br><span class="line">? Are you using ECMAScript <span class="number">6</span> features? Yes</span><br><span class="line">? Are you using ES6 modules? Yes</span><br><span class="line">? Where will your code run? Browser</span><br><span class="line">? Do you use CommonJS? Yes</span><br><span class="line">? Do you use JSX? No</span><br><span class="line">? What style <span class="keyword">of</span> indentation <span class="keyword">do</span> you use? Tabs</span><br><span class="line">? What quotes <span class="keyword">do</span> you use <span class="keyword">for</span> strings? Single</span><br><span class="line">? What line endings <span class="keyword">do</span> you use? Windows</span><br><span class="line">? Do you <span class="built_in">require</span> semicolons? No</span><br><span class="line">? What format <span class="keyword">do</span> you want your config file to be <span class="keyword">in</span>? JavaScript</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¨éƒ¨å›ç­”ä¹‹åç”Ÿæˆä¸€ä¸ª.eslint.jsæ–‡ä»¶ï¼Œå†…å®¹é‡Œé¢å¾ˆå¤š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;commonjs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es6&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;indent&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tab&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;linebreak-style&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            <span class="string">&quot;windows&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;quotes&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            <span class="string">&quot;single&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;semi&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            <span class="string">&quot;never&quot;</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é‡Œé¢å¾ˆå¤šå‚æ•°ä¸€è„¸æ‡µé€¼ï¼Œæ²¡å…³ç³»å…¨åˆ äº†ï¼Œåªç•™ä¸‹ä¸€ä¸ª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">     <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;eslint:recommended&quot;</span></span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„demo.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="built_in">arguments</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">arguments</span>[i]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j <span class="keyword">in</span> m) ret[j] = m[j]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(merge(&#123; <span class="attr">a</span>: <span class="number">123</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">456</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">  b = <span class="string">&#x27;23444&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a &gt;= b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(a, b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> aaa = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(aaa())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åç»ˆç«¯è¾“å…¥</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint <span class="built_in">demo</span>.js</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¾ç¤º</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190822111018.png"                      alt=""                ></p><p>è§£å†³<code>no-undef</code>:å‡ºé”™çš„åŸå› æ˜¯å› ä¸ºJavaScriptæœ‰å¾ˆå¤šç§è¿è¡Œç¯å¢ƒ,<br>æ¯”å¦‚å¸¸è§çš„æœ‰æµè§ˆå™¨å’ŒNode.jsï¼Œå¦å¤–è¿˜æœ‰å¾ˆå¤šè½¯ä»¶ç³»ç»Ÿä½¿ç”¨JavaScriptä½œä¸ºå…¶è„šæœ¬å¼•æ“ï¼Œæ¯”å¦‚PostgreSQLå°±æ”¯æŒä½¿ç”¨JavaScriptæ¥ç¼–å†™å­˜å‚¨å¼•æ“ï¼Œè€Œè¿™äº›è¿è¡Œç¯å¢ƒå¯èƒ½å¹¶ä¸å­˜åœ¨consoleè¿™ä¸ªå¯¹è±¡ã€‚å¦å¤–åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ä¼šæœ‰windowå¯¹è±¡ï¼Œè€ŒNode.jsä¸‹æ²¡æœ‰ï¼›åœ¨Node.jsä¸‹ä¼šæœ‰processå¯¹è±¡ï¼Œè€Œæµè§ˆå™¨ç¯å¢ƒä¸‹æ²¡æœ‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="keyword">extends</span>: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">    env: &#123;</span><br><span class="line">        node: <span class="literal">true</span>, <span class="comment">//ç¨‹åºçš„è¿è¡Œç¯å¢ƒ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    rules: &#123;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å†è¿è¡Œ</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint <span class="built_in">demo</span>.js</span><br></pre></td></tr></table></figure><p>å°±æ²¡æœ‰é”™è¯¯äº†</p><h2 id="å¸¸ç”¨å‚æ•°"><a href="#å¸¸ç”¨å‚æ•°" class="headerlink" title="å¸¸ç”¨å‚æ•°"></a>å¸¸ç”¨å‚æ•°</h2><h4 id="env"><a href="#env" class="headerlink" title="env"></a>env</h4><p>å½“ç„¶envä¹Ÿå¯ä»¥åŠ å…¥å…¶ä»–ç¯å¢ƒ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">env: &#123;</span><br><span class="line">    <span class="string">&#x27;browser&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;commonjs&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;es6&#x27;</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h4 id="rulues"><a href="#rulues" class="headerlink" title="rulues"></a>rulues</h4><p>è§„åˆ™é”™è¯¯ç­‰çº§æœ‰ä¸‰ç§<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>æˆ–â€™offâ€™ï¼šå…³é—­è§„åˆ™ã€‚ </span><br><span class="line"><span class="number">1</span>æˆ–â€™warnâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªè­¦å‘Šï¼ˆå¹¶ä¸ä¼šå¯¼è‡´æ£€æŸ¥ä¸é€šè¿‡ï¼‰ã€‚ </span><br><span class="line"><span class="number">2</span>æˆ–â€™errorâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªé”™è¯¯ (é€€å‡ºç ä¸º<span class="number">1</span>ï¼Œæ£€æŸ¥ä¸é€šè¿‡)ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•°è¯´æ˜ï¼š </span><br><span class="line">å‚æ•°<span class="number">1</span> ï¼š é”™è¯¯ç­‰çº§ </span><br><span class="line">å‚æ•°<span class="number">2</span> ï¼š å¤„ç†æ–¹å¼</span><br></pre></td></tr></table></figure></p><h4 id="é…ç½®ä»£ç æ³¨é‡Šæ–¹å¼"><a href="#é…ç½®ä»£ç æ³¨é‡Šæ–¹å¼" class="headerlink" title="é…ç½®ä»£ç æ³¨é‡Šæ–¹å¼"></a>é…ç½®ä»£ç æ³¨é‡Šæ–¹å¼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å¿½ç•¥ no-undef æ£€æŸ¥ </span><br><span class="line"><span class="comment">/* eslint-disable no-undef */</span></span><br><span class="line"></span><br><span class="line">å¿½ç•¥ no-<span class="keyword">new</span> æ£€æŸ¥ </span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"></span><br><span class="line">è®¾ç½®æ£€æŸ¥ </span><br><span class="line"><span class="comment">/*eslint eqeqeq: off*/</span> </span><br><span class="line"><span class="comment">/*eslint eqeqeq: 0*/</span></span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®ä¸­é…ç½®eslintrc"><a href="#é¡¹ç›®ä¸­é…ç½®eslintrc" class="headerlink" title="é¡¹ç›®ä¸­é…ç½®eslintrc"></a>é¡¹ç›®ä¸­é…ç½®eslintrc</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">extends</span>: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  parser: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="comment">//å¼ºåˆ¶ä½¿ç”¨å•å¼•å·</span></span><br><span class="line">    quotes: [<span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;single&#x27;</span>],</span><br><span class="line">    <span class="comment">//å¼ºåˆ¶ä¸ä½¿ç”¨åˆ†å·ç»“å°¾</span></span><br><span class="line">    semi: [<span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;never&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vscodeä¸­å…¨å±€é…ç½®"><a href="#vscodeä¸­å…¨å±€é…ç½®" class="headerlink" title="vscodeä¸­å…¨å±€é…ç½®"></a>vscodeä¸­å…¨å±€é…ç½®</h2><p>å¿…é¡»å®‰è£…é¡¹ç›®é…ç½®äº†ä½¿ç”¨eslint<br>å¿…é¡»å®‰è£…Document Thisæ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;workbench.iconTheme&quot;</span>: <span class="string">&quot;vscode-icons-mac&quot;</span>,</span><br><span class="line"><span class="string">&quot;editor.renderIndentGuides&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">&quot;cSpell.ignoreWords&quot;</span>: [<span class="string">&quot;antd&quot;</span>],</span><br><span class="line"><span class="comment">//ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹æ—¶è‡ªåŠ¨ä¿å­˜æ›´æ–°åçš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">&quot;files.autoSave&quot;</span>: <span class="string">&quot;onFocusChange&quot;</span>,</span><br><span class="line"><span class="string">&quot;workbench.colorTheme&quot;</span>: <span class="string">&quot;Monokai&quot;</span>,</span><br><span class="line"><span class="string">&quot;git.confirmSync&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">&quot;window.title&quot;</span>: <span class="string">&quot;$&#123;activeEditorLong&#125;$&#123;separator&#125;$&#123;rootName&#125;&quot;</span>,</span><br><span class="line"><span class="string">&quot;window.zoomLevel&quot;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&quot;editor.fontSize&quot;</span>: <span class="number">14</span>,</span><br><span class="line"><span class="comment">//ä¸ºäº†ç¬¦åˆeslintçš„ä¸¤ä¸ªç©ºæ ¼é—´éš”åŸåˆ™</span></span><br><span class="line"><span class="string">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="comment">// æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š</span></span><br><span class="line"><span class="string">&quot;fileheader.Author&quot;</span>: <span class="string">&quot;Mario&quot;</span>,</span><br><span class="line"><span class="string">&quot;fileheader.LastModifiedBy&quot;</span>: <span class="string">&quot;mario&quot;</span>,</span><br><span class="line"><span class="comment">//å…³é—­ç¼–è¾‘å™¨é»˜è®¤ä»£ç æ£€æŸ¥,ä¸ºäº†ä¸è·Ÿeslinté…ç½®å†²çª</span></span><br><span class="line"><span class="string">&quot;editor.formatOnSave&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">&quot;javascript.format.enable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//eslint æ ¼å¼åŒ–æ’ä»¶ï¼Œä¿å­˜æ—¶åº”ç”¨eslintè§„åˆ™è‡ªåŠ¨æ ¼å¼åŒ–åä¿å­˜</span></span><br><span class="line"><span class="string">&quot;eslint.autoFixOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;prettier.eslintIntegration&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// å»æ‰ä»£ç ç»“å°¾åˆ†å·</span></span><br><span class="line"><span class="string">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">&quot;git.path&quot;</span>: <span class="string">&quot;/usr/bin/git&quot;</span>,</span><br><span class="line"><span class="string">&quot;editor.fontFamily&quot;</span>: <span class="string">&quot;Microsoft YaHeiï¼ŒMenlo, Monaco, &#x27;Courier New&#x27;, monospace&quot;</span>,</span><br><span class="line"><span class="string">&quot;editor.fontWeight&quot;</span>: <span class="string">&quot;bold&quot;</span>,</span><br><span class="line"><span class="string">&quot;javascript.updateImportsOnFileMove.enabled&quot;</span>: <span class="string">&quot;never&quot;</span>,</span><br><span class="line"><span class="string">&quot;explorer.confirmDragAndDrop&quot;</span>: <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML è·å–å±å¹•&amp;æµè§ˆå™¨&amp;é¡µé¢çš„é«˜åº¦å®½åº¦</title>
      <link href="2019/08/05/HTML%20%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95&amp;%E6%B5%8F%E8%A7%88%E5%99%A8&amp;%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6/"/>
      <url>2019/08/05/HTML%20%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95&amp;%E6%B5%8F%E8%A7%88%E5%99%A8&amp;%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»Webç¯å¢ƒä¸­å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢çš„é«˜åº¦ã€å®½åº¦ä¿¡æ¯ã€‚</p><h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a><strong>ç›®å½•</strong></h1><p>\1. <a class="link"   href="http://www.cnblogs.com/polk6/p/5051935.html#Menu1-Introduction" >ä»‹ç»<i class="fas fa-external-link-alt"></i></a>ï¼šä»‹ç»é¡µé¢çš„å®¹å™¨(å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢)ã€ç‰©ç†å°ºå¯¸ä¸åˆ†è¾¨ç‡ã€å±•ç¤ºç­‰å†…å®¹ã€‚</p><p>\2. <a class="link"   href="http://www.cnblogs.com/polk6/p/5051935.html#Menu2-Screen" >å±å¹•ä¿¡æ¯<i class="fas fa-external-link-alt"></i></a>ï¼šä»‹ç»å±å¹•å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šå±å¹•ã€è½¯ä»¶å¯ç”¨ä»¥åŠä»»åŠ¡æ çš„é«˜åº¦å’Œå®½åº¦ã€‚</p><p>\3. <a class="link"   href="http://www.cnblogs.com/polk6/p/5051935.html#Menu3-Window" >æµè§ˆå™¨ä¿¡æ¯<i class="fas fa-external-link-alt"></i></a>ï¼šä»‹ç»æµè§ˆå™¨å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šæµè§ˆå™¨ã€å†…éƒ¨é¡µé¢ä»¥åŠå·¥å…·æ çš„é«˜åº¦å’Œå®½åº¦ã€‚</p><p>\4. <a class="link"   href="http://www.cnblogs.com/polk6/p/5051935.html#Menu4-Body" >é¡µé¢ä¿¡æ¯<i class="fas fa-external-link-alt"></i></a>ï¼šä»‹ç»HTMLé¡µé¢å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šbodyæ€»çš„ã€å±•ç¤ºçš„é«˜åº¦å’Œå®½åº¦ã€‚</p><a id="more"></a><h1 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a><strong>ä¸€ã€ä»‹ç»</strong></h1><h2 id="1-å®¹å™¨"><a href="#1-å®¹å™¨" class="headerlink" title="1. å®¹å™¨"></a><strong>1. å®¹å™¨</strong></h2><p>ä¸€ä¸ªé¡µé¢çš„å±•ç¤ºï¼Œä»å¤–åˆ°å†…çš„å®¹å™¨ä¸ºï¼šå±å¹•ã€æµè§ˆå™¨ä»¥åŠé¡µé¢æœ¬èº«ã€‚</p><p>HTMLå…ƒç´ å±•ç°åœ¨é¡µé¢å†…ï¼Œé¡µé¢å±•ç°åœ¨æµè§ˆå™¨å†…ï¼Œè€Œæµè§ˆå™¨å±•ç°åœ¨å±å¹•å†…ã€‚</p><p>é€šè¿‡Jsçš„ä¸€äº›å¯¹è±¡å¯ä»¥è·å–è¿™äº›å®¹å™¨çš„é«˜åº¦ã€å®½åº¦ã€‚</p><h2 id="2-ç‰©ç†å°ºå¯¸å’Œåˆ†è¾¨ç‡"><a href="#2-ç‰©ç†å°ºå¯¸å’Œåˆ†è¾¨ç‡" class="headerlink" title="2. ç‰©ç†å°ºå¯¸å’Œåˆ†è¾¨ç‡"></a><strong>2. ç‰©ç†å°ºå¯¸å’Œåˆ†è¾¨ç‡</strong></h2><p>å®¹å™¨çš„å°ºå¯¸æ˜¯æŒ‡å½“å‰åˆ†è¾¨ç‡ä¸‹çš„é«˜åº¦ã€å®½åº¦ï¼Œè€Œä¸æ˜¯ç‰©ç†é«˜åº¦ã€å®½åº¦ã€‚</p><p>å¦‚ï¼šä¸€ä¸ª22å¯¸çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•åˆ†è¾¨ç‡ä¸º1366 * 768ï¼Œé‚£ä¹ˆè·å–åˆ°çš„å±å¹•é«˜åº¦ä¸º1366pxï¼Œå®½åº¦ä¸º768pxã€‚</p><h2 id="3-å±•ç¤ºå›¾"><a href="#3-å±•ç¤ºå›¾" class="headerlink" title="3. å±•ç¤ºå›¾"></a><strong>3. å±•ç¤ºå›¾</strong></h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208143610597.png"                      alt="image-20201208143610597"                ></p><h1 id="äºŒã€å±å¹•ä¿¡æ¯"><a href="#äºŒã€å±å¹•ä¿¡æ¯" class="headerlink" title="äºŒã€å±å¹•ä¿¡æ¯"></a><strong>äºŒã€å±å¹•ä¿¡æ¯</strong></h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208143554566.png"                      alt="image-20201208143554566" style="zoom:67%;"                 ></p><p><strong>screen.height ï¼š</strong>å±å¹•é«˜åº¦ã€‚</p><p><strong>screen.width ï¼š</strong>å±å¹•å®½åº¦ã€‚</p><p><strong>screen.availHeight ï¼š</strong>å±å¹•å¯ç”¨é«˜åº¦ã€‚å³å±å¹•é«˜åº¦å‡å»ä¸Šä¸‹ä»»åŠ¡æ åçš„é«˜åº¦ï¼Œå¯è¡¨ç¤ºä¸ºè½¯ä»¶æœ€å¤§åŒ–æ—¶çš„é«˜åº¦ã€‚</p><p><strong>screen.availWidth ï¼š</strong>å±å¹•å¯ç”¨å®½åº¦ã€‚å³å±å¹•å®½åº¦å‡å»å·¦å³ä»»åŠ¡æ åçš„å®½åº¦ï¼Œå¯è¡¨ç¤ºä¸ºè½¯ä»¶æœ€å¤§åŒ–æ—¶çš„å®½åº¦ã€‚</p><p><strong>ä»»åŠ¡æ é«˜/å®½åº¦ ï¼š</strong>å¯é€šè¿‡å±å¹•é«˜/å®½åº¦ å‡å» å±å¹•å¯ç”¨é«˜/å®½åº¦å¾—å‡ºã€‚å¦‚ï¼šä»»åŠ¡æ é«˜åº¦ = screen.height - screen.availHeight ã€‚</p><h1 id="ä¸‰ã€æµè§ˆå™¨ä¿¡æ¯"><a href="#ä¸‰ã€æµè§ˆå™¨ä¿¡æ¯" class="headerlink" title="ä¸‰ã€æµè§ˆå™¨ä¿¡æ¯"></a><strong>ä¸‰ã€æµè§ˆå™¨ä¿¡æ¯</strong></h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208143538236.png"                      alt="image-20201208143538236" style="zoom:50%;"                 ></p><p><strong>window.outerHeight ï¼š</strong>æµè§ˆå™¨é«˜åº¦ã€‚</p><p><strong>window.outerWidth ï¼š</strong>æµè§ˆå™¨å®½åº¦ã€‚</p><p><strong>window.innerHeight ï¼š</strong>æµè§ˆå™¨å†…é¡µé¢å¯ç”¨é«˜åº¦ï¼›æ­¤é«˜åº¦åŒ…å«äº†æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦(è‹¥å­˜åœ¨)ã€‚å¯è¡¨ç¤ºä¸ºæµè§ˆå™¨å½“å‰é«˜åº¦å»é™¤æµè§ˆå™¨è¾¹æ¡†ã€å·¥å…·æ¡åçš„é«˜åº¦ã€‚</p><p><strong>window.innerWidth ï¼š</strong>æµè§ˆå™¨å†…é¡µé¢å¯ç”¨å®½åº¦ï¼›æ­¤å®½åº¦åŒ…å«äº†å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦(è‹¥å­˜åœ¨)ã€‚å¯è¡¨ç¤ºä¸ºæµè§ˆå™¨å½“å‰å®½åº¦å»é™¤æµè§ˆå™¨è¾¹æ¡†åçš„å®½åº¦ã€‚</p><p><strong>å·¥å…·æ é«˜/å®½åº¦ ï¼š</strong>åŒ…å«äº†åœ°å€æ ã€ä¹¦ç­¾æ ã€æµè§ˆå™¨è¾¹æ¡†ç­‰èŒƒå›´ã€‚å¦‚ï¼šé«˜åº¦ï¼Œå¯é€šè¿‡æµè§ˆå™¨é«˜åº¦ - é¡µé¢å¯ç”¨é«˜åº¦å¾—å‡ºï¼Œå³ï¼šwindow.outerHeight - window.innerHeightã€‚</p><h1 id="å››ã€é¡µé¢ä¿¡æ¯"><a href="#å››ã€é¡µé¢ä¿¡æ¯" class="headerlink" title="å››ã€é¡µé¢ä¿¡æ¯"></a><strong>å››ã€é¡µé¢ä¿¡æ¯</strong></h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://typora.pp.52react.cn/h5web/2020120814image-20201208143521659.png"                      alt="image-20201208143521659" style="zoom:50%;"                 ></p><p><strong>body.offsetHeight ï¼š</strong>bodyæ€»é«˜åº¦ã€‚</p><p><strong>body.offsetWidth ï¼š</strong>bodyæ€»å®½åº¦ã€‚</p><p><strong>body.clientHeight ï¼š</strong>bodyå±•ç¤ºçš„é«˜åº¦ï¼›è¡¨ç¤ºbodyåœ¨æµè§ˆå™¨å†…æ˜¾ç¤ºçš„åŒºåŸŸé«˜åº¦ã€‚</p><p><strong>body.clientWidth ï¼š</strong>bodyå±•ç¤ºçš„å®½åº¦ï¼›è¡¨ç¤ºbodyåœ¨æµè§ˆå™¨å†…æ˜¾ç¤ºçš„åŒºåŸŸå®½åº¦ã€‚</p><p><strong>æ»šåŠ¨æ¡é«˜åº¦/å®½åº¦ ï¼š</strong>å¦‚é«˜åº¦ï¼Œå¯é€šè¿‡æµè§ˆå™¨å†…é¡µé¢å¯ç”¨é«˜åº¦ - bodyå±•ç¤ºé«˜åº¦å¾—å‡ºï¼Œå³window.innerHeight - body.clientHeightã€‚</p><hr>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£SQL</title>
      <link href="2019/08/04/%E7%90%86%E8%A7%A3SQL/"/>
      <url>2019/08/04/%E7%90%86%E8%A7%A3SQL/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•é«˜æ•ˆçš„å­˜å‚¨å’Œä½¿ç”¨è¿™äº›æ•°æ®ï¼Œè®©é¡µé¢å¯ä»¥çœ‹èµ·æ¥ä¸å¡<br><a id="more"></a></p><h2 id="cookieä¸localStorage"><a href="#cookieä¸localStorage" class="headerlink" title="cookieä¸localStorage"></a>cookieä¸localStorage</h2><table><thead><tr><th>cookie</th><th>localStorage</th></tr></thead><tbody><tr><td>é™åˆ¶4k</td><td>é™åˆ¶æœ€å¤§5M</td></tr><tr><td>â€”</td><td>â€”</td></tr><tr><td>æµè§ˆå™¨</td><td>å­˜æ”¾åœ¨æœ¬åœ°æ–‡ä»¶ä¸­</td></tr><tr><td></td><td>å­—ç¬¦ä¸²æ–¹å¼å­˜å–</td></tr></tbody></table><h2 id="webSQL"><a href="#webSQL" class="headerlink" title="webSQL"></a>webSQL</h2><h3 id="ä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Ÿ</h3><p>ç”±ä¸€å¼ å¼ äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“</p><h3 id="ä»€ä¹ˆæ˜¯SQLå‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SQLå‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯SQLå‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯SQLå‘¢ï¼Ÿ</h3><p>ä¸€ç§æ“ä½œå…³ç³»å‹çš„DBè¯­è¨€ï¼Œæ”¯æŒåˆ›å»ºè¡¨ï¼Œæ’å…¥è¡¨ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢<br>å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æœ‰ï¼š<code>MySQL,SQLite,SQLSever,Oracle</code></p><h4 id="åˆ›å»ºä¸€ä¸ªDB"><a href="#åˆ›å»ºä¸€ä¸ªDB" class="headerlink" title="åˆ›å»ºä¸€ä¸ªDB"></a>åˆ›å»ºä¸€ä¸ªDB</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = <span class="built_in">window</span>.openDatabase(</span><br><span class="line">    <span class="string">&quot;order_test&quot;</span>,    <span class="xml">&lt;----æ•°æ®åº“åç§°</span></span><br><span class="line">    &quot;1.0&quot;,           &lt;----ç‰ˆæœ¬</span><br><span class="line">    &quot;order map data&quot;,&lt;----æè¿°</span><br><span class="line">    &quot;2*1024*1024&quot;    &lt;----å¯ç”¨ç©ºé—´</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ª<code>dbå¯¹è±¡</code></p><h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table <span class="keyword">if</span> not exists order_data(order_id primary key,format_city,lat,lng,price,create_time)</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into order_data values($&#123;order.orderId&#125;,<span class="string">&#x27;$&#123;order.format_city&#125;&#x27;</span>,$&#123;order.lat&#125;,$&#123;order.lng&#125; ...);</span><br></pre></td></tr></table></figure><h4 id="ä¸»é”®å”¯ä¸€çº¦æŸ"><a href="#ä¸»é”®å”¯ä¸€çº¦æŸ" class="headerlink" title="ä¸»é”®å”¯ä¸€çº¦æŸ"></a>ä¸»é”®å”¯ä¸€çº¦æŸ</h4><p>ä¸€èˆ¬æˆ‘ä»¬è®¤ä¸ºä¸»é”®æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œmyslqå¯ä»¥æŒ‡å®šæŸä¸ªæ•´æ•°å­—æ®µä¸º<code>auto_increment</code>;è€ŒwebSQLä¸èƒ½æŒ‡å®šï¼Œéœ€è¦åˆ›å»ºæŒ‡å®šå½“å‰å­—æ®µä¸ºinteger<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table student(id integer primary key,age,score)</span><br></pre></td></tr></table></figure></p><h4 id="SelectæŸ¥è¯¢"><a href="#SelectæŸ¥è¯¢" class="headerlink" title="SelectæŸ¥è¯¢"></a>SelectæŸ¥è¯¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select format_city <span class="keyword">as</span> city,count(order_id) <span class="keyword">as</span> <span class="string">&#x27;count&#x27;</span>,sum(price) <span class="keyword">as</span> amount <span class="keyword">from</span> order_data by format_city order by date</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŸ¥è¯¢æŸä¸ªorderæ˜¯å¦å­˜åœ¨ï¼Œåˆ¤æ–­æ»¡è¶³åŠ¨æ€æ›´æ–°çš„éœ€æ±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select order_id <span class="keyword">from</span> order_data where order_id = $&#123;order.orderId&#125;</span><br></pre></td></tr></table></figure><h4 id="å»ºç«‹ç´¢å¼•"><a href="#å»ºç«‹ç´¢å¼•" class="headerlink" title="å»ºç«‹ç´¢å¼•"></a>å»ºç«‹ç´¢å¼•</h4><h5 id="ä¸ºä»€ä¹ˆè¦åˆ›å»ºç´¢å¼•ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ›å»ºç´¢å¼•ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ›å»ºç´¢å¼•ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åˆ›å»ºç´¢å¼•ï¼Ÿ</h5><p>ä¸ºäº†æé«˜æœç´¢æ•ˆç‡ï¼Œå¦‚æœæ²¡æœ‰å»ºç«‹ç´¢å¼•æŸ¥è¯¢æŸä¸ªå­—æ®µæ˜¯å¦ç­‰äºæŸä¸ªå€¼çš„æ•°æ®éœ€è¦éå†æ‰€æœ‰çš„æ•°æ®ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦<code>O(N)</code>,ä½†æ˜¯å¦‚æœå»ºç«‹ç´¢å¼•ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…å®ƒçš„å˜ç§ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦å˜<code>O(logN)</code>,Mysqlä½¿ç”¨çš„<code>B+æ ‘</code>ï¼Œå¦å¤–å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å“ˆå¸Œå˜æ•°å­—ï¼Œå­—ç¬¦ä¸²æ‰€ä»¥è¦æ¯”æ•°å­—ä½æ•ˆå¾ˆå¤š</p><h3 id="å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹"><a href="#å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹"></a>å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>1.æ”¯æŒå¤æ‚çš„æŸ¥è¯¢ï¼Œå¯ä»¥è”è¡¨æŸ¥è¯¢ï¼Œè¡¨è¾¾å¼æŸ¥è¯¢ï¼ŒåµŒè¡¨æŸ¥è¯¢</p><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>1.ä¸æ–¹ä¾¿æ¨ªå‘æ‰©å±•ï¼Œç»™æ•°æ®åº“æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¦‚æœæ•°æ®åº“è¾¾åˆ°äº¿çº§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œå¤æ‚æ€§å°±å¾ˆå·®äº†<br>2.æµ·é‡æ•°æ®SQLè”è¡¨æŸ¥è¯¢ï¼Œæ€§èƒ½ä¼šéå¸¸å·®<br>3.ä¸ºäº†ä¿æŒäº‹åŠ¡çš„ä¸€è‡´ç‰¹æ€§ï¼Œéš¾ä»¥åº”å¯¹é«˜å¹¶å‘</p><h2 id="éå…³ç³»å‹æ•°æ®åº“ä¹Ÿå«NoSQLæ•°æ®åº“"><a href="#éå…³ç³»å‹æ•°æ®åº“ä¹Ÿå«NoSQLæ•°æ®åº“" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“ä¹Ÿå«NoSQLæ•°æ®åº“"></a>éå…³ç³»å‹æ•°æ®åº“ä¹Ÿå«NoSQLæ•°æ®åº“</h2><p>ç‰¹ç‚¹ï¼š</p><blockquote><p>å­˜å‚¨æ¯”è¾ƒçµæ´»ï¼ŒæŸ¥æ‰¾æ²¡æœ‰åƒå…³ç³»å‹æ•°æ®åº“é‚£ä¹ˆå¥½ç”¨ï¼Œé€‚ç”¨äºæ•°æ®é‡å¾ˆå¤§ï¼Œåªéœ€è¦å•è¡¨keyæŸ¥è¯¢ï¼Œä¸€è‡´æ€§ä¸å¾ˆé«˜çš„åœºæ™¯</p></blockquote><h3 id="IndexedDB"><a href="#IndexedDB" class="headerlink" title="IndexedDB"></a>IndexedDB</h3><p>ä¸ºä»€ä¹ˆè¦å«IndexedDBæˆ–è€…ç´¢å¼•æ•°æ®åº“å‘¢ï¼Ÿ<br>å› ä¸ºå®ƒä¸»é¡µé€šè¿‡åˆ›å»ºç´¢å¼•æƒŠå–œæŸ¥è¯¢</p><p>IndexedDBå¯ä»¥æ”¯æŒæ’å…¥<code>JSONæ ¼å¼</code>çš„ä¸ä¸€æ ·çš„æ•°æ®</p><h3 id="éå…³ç³»å‹æ•°æ®åº“çš„æ¨ªå‘æ‰©å±•"><a href="#éå…³ç³»å‹æ•°æ®åº“çš„æ¨ªå‘æ‰©å±•" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“çš„æ¨ªå‘æ‰©å±•"></a>éå…³ç³»å‹æ•°æ®åº“çš„æ¨ªå‘æ‰©å±•</h3><p>å› ä¸ºå¯ä»¥æ¯ä¸ªæ•°æ®çš„ç±»å‹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ·»åŠ å­—æ®µçš„é—®é¢˜ï¼Œè€Œç›¸åŒçš„ç±»å‹å¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œæé«˜æœç´¢æ•ˆç‡ï¼›ä½†æ˜¯ä¹Ÿåˆå°é—®é¢˜ï¼ŒNoSql<code>åšä¸äº†</code>å¤æ‚æŸ¥è¯¢ï¼Œå¦‚æœè¦æ¯”å¦‚æŒ‰ç…§city/æ—¥æœŸå½’ç±»ï¼Œé‚£ä¹ˆéœ€è¦å¼€ä¸€ä¸ª<code>æ¸¸æ ‡å¾ªç¯</code>å¤„ç†ã€‚æ—¶é—´å’Œæ€§èƒ½å¼€é”€å¾ˆå¤§ï¼›</p><h3 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190810224204.png"                      alt=""                ></p><h2 id="æ•°æ®åº“ä¸Promise"><a href="#æ•°æ®åº“ä¸Promise" class="headerlink" title="æ•°æ®åº“ä¸Promise"></a>æ•°æ®åº“ä¸Promise</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“æ•°æ®åº“æ˜¯å¼‚æ­¥æ“ä½œï¼›å¦‚æœæˆ‘ä»¬å…ˆå‘ä¸€ä¸ªè¯·æ±‚è·å–æ•°æ®ï¼Œç„¶åæ’å…¥æ•°æ®ï¼Œé‡å¤Næ¬¡åï¼Œå†æŸ¥è¯¢æ•°æ®ã€‚å¦‚ä½•ä¿è¯æ¯æ¬¡éƒ½æˆåŠŸå†™å…¥æ•°æ®åº“å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Promiseæ¥è§£å†³</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promises = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span> ; i&lt;orders.length;i++)&#123;</span><br><span class="line">  <span class="keyword">var</span> order = orders[i]</span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">     dataProcess.executeSql(<span class="string">&#x27;æ’å…¥sqlè¯­å¥&#x27;</span>,<span class="function">(<span class="params">tx,results</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//æ•°æ®åº“è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span>(results.rows.lengthï¼‰&#123;</span><br><span class="line">          resolve()</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘æœåŠ¡å™¨ç»§ç»­è¯·æ±‚æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">var</span> order = orders[i]</span><br><span class="line">        dataProcess.queryAdderss(order)</span><br><span class="line">     &#125;ï¼‰</span><br><span class="line">  </span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//æ·»åŠ è¿›æ•°ç»„</span></span><br><span class="line">  promise.push(promise)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰€æœ‰çš„Prmiseéƒ½è¿”å›äº†åˆ™è°ƒç”¨finishedå‡½æ•°</span></span><br><span class="line">Prmise.all(promises).then(dataPromcess.finished)</span><br></pre></td></tr></table></figure><h2 id="SQLæ³¨å…¥æ”»å‡»"><a href="#SQLæ³¨å…¥æ”»å‡»" class="headerlink" title="SQLæ³¨å…¥æ”»å‡»"></a>SQLæ³¨å…¥æ”»å‡»</h2><p>æ¯”å¦‚ç½‘é¡µé“¾æ¥å­˜åœ¨å‚æ•°ä¼ é€’ï¼Œåå°å¹¶æ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´ç”¨æˆ·çš„è¾“å…¥ç›´æ¥è¢«SQLè§£é‡Šå™¨æ‰§è¡Œã€‚SQLæ³¨å…¥çš„äº§ç”Ÿæ¡ä»¶ï¼š<br>è¾“å…¥ä¸€æ®µsqlç‰‡æ®µ  æœ€ç»ˆæ‹¼æ¥æˆä¸€æ®µæ”»å‡»ä»£ç <br> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190810230252.png"                      alt=""                ><br> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190810230323.png"                      alt=""                ></p><h3 id="é˜²å¾¡SQLæ³¨å…¥"><a href="#é˜²å¾¡SQLæ³¨å…¥" class="headerlink" title="é˜²å¾¡SQLæ³¨å…¥"></a>é˜²å¾¡SQLæ³¨å…¥</h3><p>å½’æ ¹åˆ°åº•ï¼Œéœ€è¦å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå› ä¸ºåœ¨Webæ”»é˜²ä¸­ï¼Œæˆ‘ä»¬æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ 1ã€‚<br>1.ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼Œç»‘å®šå˜é‡ã€‚<br>2.ä½¿ç”¨å®‰å…¨çš„å­˜å‚¨è¿‡ç¨‹å¯¹æŠ—SQLæ³¨å…¥ã€‚<br>3.æ£€æŸ¥æ•°æ®ç±»å‹ã€‚<br>4.ä½¿ç”¨å®‰å…¨å‡½æ•°ã€‚</p><h2 id="åˆ†å¸ƒå¼æ•°æ®åº“"><a href="#åˆ†å¸ƒå¼æ•°æ®åº“" class="headerlink" title="åˆ†å¸ƒå¼æ•°æ®åº“"></a>åˆ†å¸ƒå¼æ•°æ®åº“</h2><p>ç®€å•ä»‹ç»ä¸‹ï¼šå¦‚æœä¸€ä¸ªç½‘ç«™è¶Šæ¥è¶Šç«ğŸ”¥ï¼Œä¸€ä¸ªæ•°æ®åº“æœåŠ¡å¾ˆå¯èƒ½ä¼šæ‰›ä¸ä½ï¼Œéœ€è¦å¤šæå‡ å°æœåŠ¡å™¨ç¼“è§£å‹åŠ›ï¼Œè¿™æ—¶å€™éœ€è¦å‡ ä¸ªæ•°æ®åº“<code>ä¸€è‡´æ€§</code>ï¼Œè§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œæœ€ç®€å•çš„æ˜¯Mysqlçš„<code>replication</code>ï¼›</p><h3 id="ä¸»è¦å·¥ä½œåŸç†"><a href="#ä¸»è¦å·¥ä½œåŸç†" class="headerlink" title="ä¸»è¦å·¥ä½œåŸç†"></a>ä¸»è¦å·¥ä½œåŸç†</h3><p>å‡å¦‚æœ‰ä¸‰å°æœåŠ¡å™¨ï¼Œä¸‰ä¸ªæ•°æ®åº“ï¼Œç”¨æˆ·ä¸€ä¸ªæ“ä½œå†™åˆ°äº†å…¶ä¸­ä¸€ä¸ª<code>ä¸»</code>æœåŠ¡å™¨ï¼Œè¿™ä¸ªåº“å«masterï¼Œå…¶ä»–äºŒä¸ªåº“å«<code>slave</code>ï¼Œä¸»åº“ä¼šæŠŠæ•°æ®åº“è¿œç¨‹å¤åˆ¶åˆ°å¦å¤–äºŒä¸ªåº“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£HTTPSè¿æ¥å‰å‡ æ¯«ç±³å‘ç”Ÿäº†ä»€ä¹ˆ</title>
      <link href="2019/08/01/%E7%90%86%E8%A7%A3HTTPS%E8%BF%9E%E6%8E%A5%E5%89%8D%E5%87%A0%E6%AF%AB%E7%A7%92%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"/>
      <url>2019/08/01/%E7%90%86%E8%A7%A3HTTPS%E8%BF%9E%E6%8E%A5%E5%89%8D%E5%87%A0%E6%AF%AB%E7%A7%92%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<p>1.ä¸ºä»€ä¹ˆè¯´HTTPSå®‰å…¨ï¼Œå®‰å…¨åœ¨å“ªé‡Œï¼Ÿ</p><p>2.HTTPSä½¿ç”¨è¯ä¹¦ä¿è¯å®ƒçš„å®‰å…¨å—ï¼Ÿ</p><p>3.ä¸ºä»€ä¹ˆè¯ä¹¦éœ€è¦è´­ä¹°ï¼Ÿ<br><a id="more"></a></p><h2 id="HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2><p>HTTPSè§£å†³äº†<code>ä¸­é—´äººæ”»å‡»</code></p><h3 id="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»"></a>ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190801224029.png"                      alt=""                ><br>ä½ å’ŒæœåŠ¡å™¨ä¼ è¾“æ•°æ®ä¹‹é—´ç»è¿‡äº†ä¸€ä¸ªä¸­é—´äººï¼Œæ•°æ®éƒ½è¢«ä¸­é—´äººæ‹¦æˆªæˆ–è€…çº‚æ”¹ä½ æ ¹æœ¬ä¸çŸ¥é“ï¼Œä¸­é—´äººå¯¹ä½ æ¥è¯´æ˜¯é€æ˜çš„</p><h3 id="ä¸­é—´äººæ”»å‡»æ–¹æ³•"><a href="#ä¸­é—´äººæ”»å‡»æ–¹æ³•" class="headerlink" title="ä¸­é—´äººæ”»å‡»æ–¹æ³•"></a>ä¸­é—´äººæ”»å‡»æ–¹æ³•</h3><p>1.åŸŸåæ±¡æŸ“<br>2.ARPæ¬ºéª—</p><h3 id="HTTPSæ˜¯åº”å¯¹ä¸­é—´äººæ”»å‡»çš„å”¯ä¸€æ–¹æ³•"><a href="#HTTPSæ˜¯åº”å¯¹ä¸­é—´äººæ”»å‡»çš„å”¯ä¸€æ–¹æ³•" class="headerlink" title="HTTPSæ˜¯åº”å¯¹ä¸­é—´äººæ”»å‡»çš„å”¯ä¸€æ–¹æ³•"></a>HTTPSæ˜¯åº”å¯¹ä¸­é—´äººæ”»å‡»çš„å”¯ä¸€æ–¹æ³•</h3><h4 id="HTTPSè¿æ¥è¿‡ç¨‹"><a href="#HTTPSè¿æ¥è¿‡ç¨‹" class="headerlink" title="HTTPSè¿æ¥è¿‡ç¨‹"></a>HTTPSè¿æ¥è¿‡ç¨‹</h4><p>ç®€å•æè¿°ï¼šHTTPSé“¾æ¥ï¼ŒæœåŠ¡å™¨å‘é€å®ƒçš„è¯ä¹¦ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç¡®è®¤<code>è¯ä¹¦</code>æ­£ç¡®ï¼Œå¹¶æ£€æŸ¥è¯ä¹¦ä¸­å¯¹åº”çš„ä¸»æœºåæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®åˆ™åŒæ–¹åŠ å¯†æ•°æ®åå‘é€ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹å†è¿›è¡Œè§£å¯†ï¼Œä¿è¯æ•°æ®æ˜¯ä¸é€æ˜çš„ã€‚</p><h4 id="å®Œæ•´è¿æ¥å»ºç«‹è¿‡ç¨‹"><a href="#å®Œæ•´è¿æ¥å»ºç«‹è¿‡ç¨‹" class="headerlink" title="å®Œæ•´è¿æ¥å»ºç«‹è¿‡ç¨‹"></a>å®Œæ•´è¿æ¥å»ºç«‹è¿‡ç¨‹</h4><h5 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h5><p>1.å»ºç«‹TCPè¿æ¥<br>2.æ‰‹æœºç«¯å‘é€ä¸€ä¸ªhello ç»™æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬å†æŠ“åŒ…ä¸­è§‚å¯Ÿï¼Œå°†helloé‡Œé¢æ‰‹æœºç«¯å‘ç»™æœåŠ¡ç«¯çš„ä¿¡æ¯ç½—åˆ—å‡ºæ¥ï¼š<br>A.ä½¿ç”¨äº†TLSç‰ˆæœ¬ä¸º1.2   å…¶ä»–ç‰ˆæœ¬æœ‰1.0 1.1 1.2ï¼ŒHTTPSåŠ å¯†é TLSå®‰å…¨ä¼ è¾“å±‚åè®®<br>B.æ‰‹æœºç«¯å½“å‰çš„æ—¶é—´å’Œä¸€ä¸ªéšæœºå¯†ç ä¸²ï¼Œ<br>C.SessionID ç¬¬ä¸€æ¬¡è¿æ¥ä¸º0ï¼Œå¦‚æœæœ‰SessionIDåˆ™å¯ä»¥æ¢å¤ä¼šè¯ï¼Œè€Œä¸ç”¨é‡å¤æ¡æ‰‹è¿‡ç¨‹ã€‚æœåŠ¡ç«¯ä¼šå‘ŠçŸ¥SessionIDï¼Œå†åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å°±ä¼šæŠŠè¿™ä¸ªSessionIDå¸¦ä¸Š<br>D.æµè§ˆå™¨æ”¯æŒåŠ å¯†ç»„åˆæ–¹å¼ã€‚æµè§ˆå™¨ä¸€å…±æ”¯æŒ22ç§åŠ å¯†ç»„åˆæ–¹å¼ï¼Œå‘é€ç»™æœåŠ¡å™¨è®©æœåŠ¡å™¨é€‰ä¸€ä¸ª<br>E.æœåŠ¡å™¨æ ¹æ®åŸŸåå‘é€ç›¸åº”çš„è¯ä¹¦ã€‚HTTPS= HTTP + TLS</p><blockquote><p>TLSä¸SSLä»€ä¹ˆå…³ç³»ï¼Ÿ SSLæ˜¯TLSçš„å‰èº«</p></blockquote><h5 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h5><p>1.æ—¶é—´ éšæœºæ•°ç­‰ï¼Œæ³¨æ„æœåŠ¡å™¨è¿˜å‘é€ä¸€ä¸ªSessionIDç»™æµè§ˆå™¨<br>2.æœåŠ¡å™¨åŠ å¯†æ–¹å¼ï¼ŒæœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯æä¾›çš„æ–¹å¼é‡Œé¢é€‰æ‹©äº†æŸç§æ–¹å¼ï¼Œ</p><h5 id="è¯ä¹¦"><a href="#è¯ä¹¦" class="headerlink" title="è¯ä¹¦"></a>è¯ä¹¦</h5><p>æ¥ç€æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯ä¹¦çš„åŒ…è¿‡å»ç»™æ‰‹æœºç«¯ï¼ŒæœåŠ¡å™¨å¯èƒ½å‘ä¸‰ä¸ªåŒ…ï¼Œä¸‰ä¸ªè¯ä¹¦æ˜¯ç›¸äº’ä¾èµ–<br>è¯ä¹¦é‡Œé¢æœ‰ä»€ä¹ˆå†…å®¹ï¼š<br>1.ç­¾å<br>2.æ¯ä¸ªè¯ä¹¦åŒ…å«ç­¾åçš„ç®—æ³•<br>3.è¢«ç­¾åçš„è¯ä¹¦</p><blockquote><p>è¯ä¹¦åŒ…æ‹¬ç”³è¯·è¯ä¹¦çš„å›½å®¶çœä»½åŸå¸‚ç»„ç»‡åç§°ï¼Œè¿˜æœ‰æœ‰æ•ˆæœŸï¼Œè¯ä¹¦çš„å…¬é’¥</p></blockquote><p>è¯ä¹¦çš„å…¬é’¥æ˜¯ä¸€ä¸ª16è¿›åˆ¶çš„ä»£ç ï¼›<br>å…¬é’¥ç”±<code>N</code> å’Œ <code>e</code>ç»„æˆ ===&gt; publicKey = (N,e)ï¼›<br>å…¶ä¸­Næ˜¯ä¸€ä¸ªå¤§æ•´æ•°ï¼Œç”±2ä¸ªè´¨æ•°ç›¸ä¹˜å¾—åˆ°ï¼š  <code>N = p * q</code></p><p>ä½¿ç”¨çš„æŠ€æœ¯æ˜¯<code>RSA</code>åˆå¯ä»¥å«åš<code>éå¯¹ç§°åŠ å¯†ç®—æ³•</code></p><h4 id="å½“æˆ‘è®¿é—®HTTPçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è·³è½¬åˆ°HTTPSï¼Ÿ"><a href="#å½“æˆ‘è®¿é—®HTTPçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è·³è½¬åˆ°HTTPSï¼Ÿ" class="headerlink" title="å½“æˆ‘è®¿é—®HTTPçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è·³è½¬åˆ°HTTPSï¼Ÿ"></a>å½“æˆ‘è®¿é—®HTTPçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è·³è½¬åˆ°HTTPSï¼Ÿ</h4><blockquote><p>è¿™æ˜¯å› ä¸ºåç«¯åšçš„é‡å®šå‘ï¼Œé€šè¿‡Nginxçš„<code>rewrite</code>æˆ–è€…<code>return</code>è§„åˆ™åšçš„é‡å®šå‘ï¼Œè¿”å›3å¼€å¤´çš„çŠ¶æ€ç è®©æµè§ˆå™¨<code>é‡å®šå‘</code></p></blockquote><h4 id="RSAä¸å¯†é’¥äº¤æ¢æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"><a href="#RSAä¸å¯†é’¥äº¤æ¢æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ" class="headerlink" title="RSAä¸å¯†é’¥äº¤æ¢æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"></a>RSAä¸å¯†é’¥äº¤æ¢æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h4><blockquote><p>RSAæ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œè€Œå¯†é’¥äº¤æ¢ç”¨çš„æ˜¯å¯¹ç§°åŠ å¯†ï¼Œåœ¨æŠ“åŒ…ä¸­æˆ‘ä»¬çœ‹åˆ°å®ƒä»¬ç”¨çš„æ˜¯è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼Œä¸ºäº†è®©äº¤æ¢ä¸å—ä¸­é—´äººæ”»å‡»ï¼ŒåŒæ–¹éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å³RSAå¯¹å¯†é’¥åŠ å¯†ã€‚åªæœ‰æ‹¥æœ‰æ­£ç¡®RSAå¯†é’¥çš„ä¸€æ–¹ï¼Œæ‰èƒ½çŸ¥é“äº¤äº’çš„å¯†é’¥æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><h4 id="TLSæ˜¯ä¼ è¾“å±‚åè®®å—ï¼Ÿ"><a href="#TLSæ˜¯ä¼ è¾“å±‚åè®®å—ï¼Ÿ" class="headerlink" title="TLSæ˜¯ä¼ è¾“å±‚åè®®å—ï¼Ÿ"></a>TLSæ˜¯ä¼ è¾“å±‚åè®®å—ï¼Ÿ</h4><p>ä¸€èˆ¬æŠŠTLSå½’ä¸ºå®‰å…¨ä¼ è¾“å±‚åè®®</p><h4 id="ä½¿ç”¨HTTPSçš„ä»£ä»·"><a href="#ä½¿ç”¨HTTPSçš„ä»£ä»·" class="headerlink" title="ä½¿ç”¨HTTPSçš„ä»£ä»·"></a>ä½¿ç”¨HTTPSçš„ä»£ä»·</h4><p>ä»æœ€å¼€å§‹çš„æ‰‹æœºç«¯hello ï¼Œ åˆ°æœ€åçš„åŒ…ï¼Œæ€»è€—æ—¶ä»4.99såˆ°5.299sï¼›è¿™ä¸ªå»ºç«‹HTPPSçš„è¿æ¥è¿‡ç¨‹ä¸º0.3sï¼›æ‰€ä»¥ä½¿ç”¨HTPPSçš„ä»£ä»·ï¼š<br>1.å»ºç«‹HTTPSçš„èŠ±è´¹æ—¶é—´<br>2.æ•°æ®éœ€è¦åŠ å¯†å’Œè§£å¯†ï¼Œå æ›´å¤šçš„CPU<br>3.æ•°æ®åŠ å¯†åæ¯”åŸä¿¡æ¯æ›´å¤§ï¼Œå ç”¨æ›´å¤šçš„å¸¦å®½</p><h4 id="æ€ä¹ˆç»•è¿‡HTTPS"><a href="#æ€ä¹ˆç»•è¿‡HTTPS" class="headerlink" title="æ€ä¹ˆç»•è¿‡HTTPS"></a>æ€ä¹ˆç»•è¿‡HTTPS</h4><p>ä½¿ç”¨<code>ssltrip</code>ï¼Œè¿™ä¸ªå·¥å…·çš„å®ç°åŸç†æ˜¯ä½¿ç”¨ARPæ¬ºéª—ä¸ç”¨æˆ·å»ºç«‹é“¾æ¥ï¼Œç„¶åå¼ºåˆ¶å°†ç”¨æˆ·è®¿é—®çš„HTTPSæ›¿æ¢æˆHTTPï¼Œè¿™æ ·ä¸­é—´äººå’Œç”¨æˆ·ä¹‹é—´ä½¿ç”¨HTTPï¼Œè€Œå’ŒæœåŠ¡ç«¯è¿˜æ˜¯ç”¨HTTPS</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJSä¸­é—´ä»¶åŸç†</title>
      <link href="2019/07/31/Nodejs%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8E%9F%E7%90%86/"/>
      <url>2019/07/31/Nodejs%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>åœ¨NodeJSä¸­ï¼Œä¸­é—´ä»¶ä¸»è¦æ˜¯æŒ‡å°è£…æ‰€æœ‰Httpè¯·æ±‚ç»†èŠ‚å¤„ç†çš„æ–¹æ³•ã€‚ä¸€æ¬¡Httpè¯·æ±‚é€šå¸¸åŒ…å«å¾ˆå¤šå·¥ä½œï¼Œå¦‚è®°å½•æ—¥å¿—ã€ipè¿‡æ»¤ã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€è¯·æ±‚ä½“è§£æã€Cookieå¤„ç†ã€æƒé™éªŒè¯ã€å‚æ•°éªŒè¯ã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œä½†å¯¹äºWebåº”ç”¨è€Œè¨€ï¼Œå¹¶ä¸å¸Œæœ›æ¥è§¦åˆ°è¿™ä¹ˆå¤šç»†èŠ‚æ€§çš„å¤„ç†ï¼Œå› æ­¤å¼•å…¥ä¸­é—´ä»¶æ¥ç®€åŒ–å’Œéš”ç¦»è¿™äº›åŸºç¡€è®¾æ–½ä¸ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ç»†èŠ‚ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå…³æ³¨åœ¨ä¸šåŠ¡çš„å¼€å‘ä¸Šï¼Œä»¥è¾¾åˆ°æå‡å¼€å‘æ•ˆç‡çš„ç›®çš„ã€‚<br><a id="more"></a></p><blockquote><p>ä¸­é—´ä»¶çš„è¡Œä¸ºæ¯”è¾ƒç±»ä¼¼Javaä¸­è¿‡æ»¤å™¨çš„å·¥ä½œåŸç†ï¼Œå°±æ˜¯åœ¨è¿›å…¥å…·ä½“çš„ä¸šåŠ¡å¤„ç†ä¹‹å‰ï¼Œå…ˆè®©è¿‡æ»¤å™¨å¤„ç†ã€‚å®ƒçš„å·¥ä½œæ¨¡å‹ä¸‹å›¾æ‰€ç¤ºã€‚</p></blockquote><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190801184341.png"                      alt=""                ></p><h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><h4 id="é¦–é¡µè®¾è®¡ä¸€ä¸ªç±»"><a href="#é¦–é¡µè®¾è®¡ä¸€ä¸ªç±»" class="headerlink" title="é¦–é¡µè®¾è®¡ä¸€ä¸ªç±»"></a>é¦–é¡µè®¾è®¡ä¸€ä¸ªç±»</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> slice = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LikeExpress</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.routes = &#123;</span><br><span class="line">      all: [],</span><br><span class="line">      get: [],</span><br><span class="line">      post: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">register</span>(<span class="params">path</span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">use</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">post</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//ç›‘å¬</span></span><br><span class="line">  <span class="function"><span class="title">listen</span>(<span class="params">...args</span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> LikeExpress();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¡«å……registeræ–¹æ³•"><a href="#å¡«å……registeræ–¹æ³•" class="headerlink" title="å¡«å……registeræ–¹æ³•"></a>å¡«å……registeræ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">path è·¯å¾„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="title">register</span>(<span class="params">path</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> info = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> path === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    info.path = path;</span><br><span class="line">    info.stack = slice(argument, <span class="number">1</span>); <span class="comment">//æ•°ç»„</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    info.path = <span class="string">&quot;/&quot;</span>;</span><br><span class="line">    info.stack = slice(argument, <span class="number">0</span>); <span class="comment">//æ•°ç»„</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//useæ–¹æ³•ä¸­è°ƒç”¨å°è£…å¥½çš„register</span></span><br><span class="line"><span class="function"><span class="title">use</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> info = <span class="built_in">this</span>.register.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">   <span class="comment">//å­˜å…¥allæ•°ç»„</span></span><br><span class="line">  <span class="built_in">this</span>.routes.all.push(info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ listen"><a href="#æ·»åŠ listen" class="headerlink" title="æ·»åŠ listen"></a>æ·»åŠ listen</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›‘å¬</span></span><br><span class="line">  <span class="function"><span class="title">listen</span>(<span class="params">...args</span>)</span> &#123;</span><br><span class="line">   <span class="comment">//æ·»åŠ ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> server = http.createServer(<span class="built_in">this</span>.callback());</span><br><span class="line">    server.listen(...args);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ callback"><a href="#æ·»åŠ callback" class="headerlink" title="æ·»åŠ callback"></a>æ·»åŠ callback</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">callback</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.json = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      res.setHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">      res.end(<span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> url = req.url;</span><br><span class="line">    <span class="keyword">const</span> method = req.method.toLowerCase();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒºåˆ†åŒ¹é…çš„è·¯å¾„</span></span><br><span class="line">    <span class="keyword">const</span> resultList = <span class="built_in">this</span>.match(method, url);</span><br><span class="line">    <span class="comment">//æ ¸å¿ƒ</span></span><br><span class="line">    <span class="built_in">this</span>.handle(req, res, resultList);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="matchåŒ¹é…ä¸€ä¸ªä¸­é—´ä»¶åˆ—è¡¨ç¬¦åˆå“ªäº›è¯·æ±‚æ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œ"><a href="#matchåŒ¹é…ä¸€ä¸ªä¸­é—´ä»¶åˆ—è¡¨ç¬¦åˆå“ªäº›è¯·æ±‚æ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œ" class="headerlink" title="matchåŒ¹é…ä¸€ä¸ªä¸­é—´ä»¶åˆ—è¡¨ç¬¦åˆå“ªäº›è¯·æ±‚æ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œ"></a>matchåŒ¹é…ä¸€ä¸ªä¸­é—´ä»¶åˆ—è¡¨ç¬¦åˆå“ªäº›è¯·æ±‚æ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">match</span>(<span class="params">method, url</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> stack = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">&quot;/favicon.ico&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> stack;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–routes</span></span><br><span class="line">    <span class="keyword">let</span> curRouters = [];</span><br><span class="line"></span><br><span class="line">    curRouters = curRouters.concat(<span class="built_in">this</span>.routes.all);</span><br><span class="line">    curRouters = curRouters.concat(<span class="built_in">this</span>.routes[method]);</span><br><span class="line"></span><br><span class="line">    curRouters.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (url.indexOf(item.path) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// url === &quot;/api/user&quot; &amp;&amp; item.path === &quot;/&quot;</span></span><br><span class="line">        stack = stack.concat(item.stack);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> stack;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒæ–¹æ³•å†™nextæ–¹æ³•"><a href="#æ ¸å¿ƒæ–¹æ³•å†™nextæ–¹æ³•" class="headerlink" title="æ ¸å¿ƒæ–¹æ³•å†™nextæ–¹æ³•"></a>æ ¸å¿ƒæ–¹æ³•å†™nextæ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¸å¿ƒ</span></span><br><span class="line">  <span class="function"><span class="title">handle</span>(<span class="params">req, res, resultList</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> next = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//æ¯æ¬¡æ‰§è¡Œè·å–ç¬¬ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">      <span class="keyword">const</span> middleware = resultList.shift();</span><br><span class="line">      <span class="keyword">if</span> (middleware) &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¸­é—´ä»¶</span></span><br><span class="line">        middleware(req, res, next);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="è§£æå›¾"><a href="#è§£æå›¾" class="headerlink" title="è§£æå›¾"></a>è§£æå›¾</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190801183926.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£WebSocketä¸TCP/IPğŸ”¥</title>
      <link href="2019/07/30/%E7%90%86%E8%A7%A3WebSocket%E4%B8%8ETCP-IP/"/>
      <url>2019/07/30/%E7%90%86%E8%A7%A3WebSocket%E4%B8%8ETCP-IP/</url>
      
        <content type="html"><![CDATA[<h2 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h2><p>é¦–å…ˆä»‹ç»ä¸‹Macä¸‹æŠ“å–ç«¯å£åŒ…çš„å·¥å…·è§’<code>tcpdump</code><br>å‘½ä»¤ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tcpdump  port <span class="number">8080</span> -n</span><br></pre></td></tr></table></figure><br><a id="more"></a></p><h3 id="ä¸€ä¸ªå®Œæ•´çš„httpé“¾æ¥"><a href="#ä¸€ä¸ªå®Œæ•´çš„httpé“¾æ¥" class="headerlink" title="ä¸€ä¸ªå®Œæ•´çš„httpé“¾æ¥"></a>ä¸€ä¸ªå®Œæ•´çš„httpé“¾æ¥</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æŠ“åˆ°åŒ…çš„æ•°æ®åˆ†æ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/httpå…³ç³».png"                      alt=""                ></p><h4 id="TCPçš„ä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPçš„ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPçš„ä¸‰æ¬¡æ¡æ‰‹"></a>TCPçš„ä¸‰æ¬¡æ¡æ‰‹</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190731225039.png"                      alt=""                ></p><ol><li>æ‰‹æœºç«¯â€“&gt;æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªtcpåŒ…ï¼Œå¸¦ä¸Šäº†<code>SYN</code>æ ‡å¿—ä½ï¼Œè¡¨ç¤ºå»ºç«‹è¿æ¥ï¼Œå¹¶æŒ‡ååŒ…å¼€å§‹åºåˆ—å·<code>seq</code>ï¼ˆå•ä½å­—èŠ‚ï¼‰</li><li>æœåŠ¡å™¨â€“&gt;æ‰‹æœºç«¯è¿›è¡Œå›å¤ï¼Œå‘é€äº†ä¸€ä¸ª<code>SYN+ACK</code>çš„æŠ¥æ–‡æ®µï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥</li><li>æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯å‘é€ä¸€ä¸ªACKï¼ŒåŒæ—¶æ”¹å˜æ¥å—çª—å£å¤§å°ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</li></ol><h4 id="TCPçš„ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#TCPçš„ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="TCPçš„ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"></a>TCPçš„ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h4><p>ä¸ºä»€ä¹ˆä¸æ˜¯äºŒæ¬¡æˆ–è€…å››æ¬¡å‘¢ï¼Ÿ</p><blockquote><p>å¦‚æœé‡‡å–ä¸¤æ¬¡æ¡æ‰‹ï¼Œç›¸å½“äºç¬¬äºŒæ¬¡æ¡æ‰‹ç»“æŸä¾¿å»ºç«‹è¿æ¥ï¼Œå¦‚æœå‘é€SYNçš„ä¸€æ–¹ä¸æƒ³è¿æ¥äº†ï¼Œä¹Ÿä¸ä¼šæœ‰åé¦ˆï¼Œå¦ä¸€æ–¹å´ä¸€ç›´åœ¨ç­‰å¾…ï¼Œæµªè´¹äº†æ—¶é—´ã€‚å½“ç„¶å¯ä»¥é‡‡å–4æ¬¡ç”šè‡³Næ¬¡æ¡æ‰‹ï¼Œä½†æ˜¯æœ‰å¿…è¦å—ï¼Ÿå»ºç«‹è¿æ¥çš„æ—¶é—´å¤ªé•¿ï¼Œæ•ˆæœä¹Ÿä¼šå¤§æ‰“æŠ˜æ‰£ã€‚æ‰€ä»¥3æ¬¡åªæ˜¯æŠ˜ä¸­æ–¹æ¡ˆï¼Œä¿è¯äº†å¯é æ€§ï¼ŒåˆèŠ‚ä¿­äº†å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚</p></blockquote><h4 id="ä»€ä¹ˆæ˜¯æ¥æ”¶çª—å£å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¥æ”¶çª—å£å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¥æ”¶çª—å£å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¥æ”¶çª—å£å‘¢ï¼Ÿ</h4><p>tcpæŠ¥æ–‡å¤´ï¼Œçª—å£å¤§å°åªæœ‰2ä¸ªå­—èŠ‚16ä½ï¼Œæœ€å¤§åªèƒ½2^16-1 = 64kbå¤§å°ï¼Œå½“åˆè®¾è®¡tcpçš„äººæ²¡æœ‰æƒ³åˆ°ç°ä»£ç½‘é€Ÿé‚£ä¹ˆå¿«ï¼Œæ‰€ä»¥å¯é€‰é¡¹åŠ äº†ä¸€ä¸ª<code>wscale</code>æŒ‡æ•°å­—æ®µï¼Œæœ€å¤§ä¸º14ï¼Œæœ€å¤§çª—å£å¤§å°ä¸º1G</p><h4 id="æ¥å—çª—å£ç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#æ¥å—çª—å£ç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="æ¥å—çª—å£ç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿ"></a>æ¥å—çª—å£ç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿ</h4><p>å®ƒæ ¹æ®è‡ªèº«ç½‘ç»œæƒ…å†µè®¾ç½®ä¸åŒå¤§å°çš„å€¼ç”¨æ¥æ§åˆ¶å¯¹æ–¹å‘é€é€Ÿåº¦ï¼Œé¿å…å¯¹æ–¹å‘é€å¤ªå¿«ï¼Œå¯¼è‡´ç½‘ç»œ<code>æ‹¥å¡</code></p><h3 id="å‘é€æ•°æ®"><a href="#å‘é€æ•°æ®" class="headerlink" title="å‘é€æ•°æ®"></a>å‘é€æ•°æ®</h3><p>å»ºç«‹å¥½tcpä¹‹å æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œå¸¦ä¸Š<code>PUSH</code>æ ‡å¿—ä½ï¼šè¡¨ç¤ºä¸€ä¸ªæ¯”è¾ƒç´§æ€¥çš„æŠ¥æ–‡ï¼Œå‘Šè¯‰æœåŠ¡å™¨ç«‹å³æŠŠæ•°æ®ä»ç¼“å­˜é‡Œå‘é€ç»™ç¨‹åºï¼Œä¸èƒ½å†ç»§ç»­ç¼“å­˜äº†<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190731224641.png"                      alt=""                ></p><h4 id="TCPçš„å››æ¬¡æŒ¥æ‰‹"><a href="#TCPçš„å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPçš„å››æ¬¡æŒ¥æ‰‹"></a>TCPçš„å››æ¬¡æŒ¥æ‰‹</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190731225127.png"                      alt=""                ><br>ä¸ºä»€ä¹ˆè¦æŒ¥æ‰‹å››æ¬¡ï¼Ÿ<br>å‰äºŒæ¬¡æŒ¥æ‰‹è®©è¿æ¥å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œæ­¤æ—¶æ‰‹æœºç«¯<code>ä¸å¯</code>å‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œè€ŒæœåŠ¡å™¨<code>å¯ä»¥ç»§ç»­</code>å‘æ‰‹æœºç«¯å‘é€æ•°æ®ï¼Œæ‰€ä»¥å››æ¬¡çš„åŸå› æ˜¯<code>å¯ä»¥æœ‰ä¸€ä¸ªå¤„äºåŠå…³é—­çš„çŠ¶æ€</code></p><ol><li>æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯ å‘é€ä¸€ä¸ª<code>FIN</code>ï¼Œè¦ç­‰30sæ‰èƒ½å…³é—­ï¼Œä¸ºä»€ä¹ˆè¦ç­‰30ç§’?å› ä¸ºè¿™ä¸ªæ˜¯ç”±<code>keep-alive</code>å­—æ®µå½±å“ï¼ŒåŒä¸€ä¸ªåŸŸå¯èƒ½è¦è¯·æ±‚å¤šä¸ªèµ„æºï¼Œä¸èƒ½ä¸€ä¸ªè¯·æ±‚å®Œäº†å°±é©¬ä¸Šå…³é—­</li><li>æœåŠ¡ç«¯â€“&gt;æ‰‹æœºç«¯ å‘é€<code>ACK</code> è¿™ä¸ªæ—¶å€™è¿æ¥å¤„äº<code>åŠå…³é—­çŠ¶æ€</code>ï¼Œæ‰‹æœºç«¯ä¸èƒ½å†å‘é€æ•°æ®ç»™æœåŠ¡ç«¯ï¼Œä½†æœåŠ¡ç«¯å¯ä»¥å‘æ‰‹æœºç«¯å‘é€</li><li>æœåŠ¡ç«¯â€“&gt;æ‰‹æœºç«¯ æŠŠè¿æ¥å…³é—­äº† äºæ˜¯å‘æ‰‹æœºç«¯å‘é€<code>FIN</code></li><li>æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯ å‘é€äº†ä¸€ä¸ªACKï¼Œæ­¤æ—¶é“¾æ¥å®Œå…¨å…³é—­ï¼Œæ‰‹æœºç«¯å…³é—­äº†è¿›å…¥<code>TIME_WAIT</code>çŠ¶æ€</li></ol><h4 id="ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸ç”¨è¿›å…¥TIME-WAITçŠ¶æ€"><a href="#ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸ç”¨è¿›å…¥TIME-WAITçŠ¶æ€" class="headerlink" title="ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸ç”¨è¿›å…¥TIME_WAITçŠ¶æ€?"></a>ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸ç”¨è¿›å…¥TIME_WAITçŠ¶æ€?</h4><blockquote><p>å› ä¸ºä¸€ä¸ªå®Œæ•´çš„<code>å¥—æ¥å­—</code>åŒ…æ‹¬å››ä¸ªå…ƒç´ ï¼šäº’è”åŒæ–¹çš„IP+ç«¯å£å·ï¼Œåªè¦ä¸€æ–¹è¢«ç ´åäº†å°±ä¸èƒ½æ„æˆ<code>ç›¸åŒçš„</code>å¥—æ¥å­—ã€‚é™åˆ¶æ‰‹æœºç«¯åº”è¯¥æ¯”è¾ƒåˆç†ï¼Œå› ä¸ºæœåŠ¡ç«¯å¯èƒ½è¿˜è¦ç»§ç»­ç›‘å¬é‚£ä¸ªç«¯å£</p></blockquote><h4 id="å‘é€çª—å£æ˜¯æ€ä¹ˆç®—çš„"><a href="#å‘é€çª—å£æ˜¯æ€ä¹ˆç®—çš„" class="headerlink" title="å‘é€çª—å£æ˜¯æ€ä¹ˆç®—çš„?"></a>å‘é€çª—å£æ˜¯æ€ä¹ˆç®—çš„?</h4><blockquote><p>wscaleæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æŒ‡æ•°ï¼Œwscale=5 è¡¨ç¤ºå·¦ç§»5ä½ === 2çš„5æ¬¡å¹‚</p></blockquote><h3 id="å››å±‚ç½‘ç»œåè®®"><a href="#å››å±‚ç½‘ç»œåè®®" class="headerlink" title="å››å±‚ç½‘ç»œåè®®"></a>å››å±‚ç½‘ç»œåè®®</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190731225646.png"                      alt=""                ></p><h2 id="å‡å¦‚è¦å‘é€ä¸€ä¸ªhttpæ–‡æœ¬ï¼Œæœ€åä¼šè¢«åŒ…è£…æˆ"><a href="#å‡å¦‚è¦å‘é€ä¸€ä¸ªhttpæ–‡æœ¬ï¼Œæœ€åä¼šè¢«åŒ…è£…æˆ" class="headerlink" title="å‡å¦‚è¦å‘é€ä¸€ä¸ªhttpæ–‡æœ¬ï¼Œæœ€åä¼šè¢«åŒ…è£…æˆ"></a>å‡å¦‚è¦å‘é€ä¸€ä¸ªhttpæ–‡æœ¬ï¼Œæœ€åä¼šè¢«åŒ…è£…æˆ</h2><h2 id="ç‰©ç†å¸§å¤´-IPæŠ¥å¤´æ–‡-TCPæŠ¥å¤´æ–‡-HTTPæŠ¥å¤´æ–‡-æ–‡æœ¬æ•°æ®"><a href="#ç‰©ç†å¸§å¤´-IPæŠ¥å¤´æ–‡-TCPæŠ¥å¤´æ–‡-HTTPæŠ¥å¤´æ–‡-æ–‡æœ¬æ•°æ®" class="headerlink" title="ç‰©ç†å¸§å¤´ | IPæŠ¥å¤´æ–‡ | TCPæŠ¥å¤´æ–‡ | HTTPæŠ¥å¤´æ–‡ | æ–‡æœ¬æ•°æ®"></a>ç‰©ç†å¸§å¤´ | IPæŠ¥å¤´æ–‡ | TCPæŠ¥å¤´æ–‡ | HTTPæŠ¥å¤´æ–‡ | æ–‡æœ¬æ•°æ®</h2><p>1.ç‰©ç†åœ°å€<br>æ¯ä¸ªç½‘å¡éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„ç‰©ç†åœ°å€ã€‚è·¯ç”±å™¨å‘å±€åŸŸç½‘æ‰€æœ‰ä¸»æœºå‘é€æ•°æ®ï¼Œç½‘å¡ä¼šæ¯”è¾ƒç‰©ç†åœ°å€æ˜¯å¦ä¸è‡ªå·±åœ°å€ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å°±æ¥å—ï¼Œå¦åˆ™ä¸¢å¼ƒã€‚</p><p>2.ç½‘é™…å±‚ARP<br>ARPæ˜¯ä¸€ä¸ªåœ°å€è§£æåè®®ï¼Œå½“æˆ‘è®¿é—®10.2.200.140çš„æ—¶å€™æˆ‘éœ€è¦çŸ¥é“å®ƒçš„ç‰©ç†è·¯å¾„åœ°å€ï¼Œå¦‚æœæ˜¯ä¸ªå±€åŸŸç½‘æˆ‘å°±å±€åŸŸç½‘å¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚ï¼Œç„¶åå°±ä¼šå‘Šè¯‰æˆ‘ï¼Œç‰©ç†åœ°å€</p><p>3.ç½‘é™…å±‚traceroute<br>å¯ä»¥è¿½è¸ªè·¯ç”±è·¯å¾„ï¼ŒåŸç†æ˜¯å‘ç›®æ ‡ä¸»æœºå‘é€ICMPæŠ¥æ–‡ï¼Œå‘é€ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ—¶ï¼Œè®¾ç½®TTL=0 æŠ¥æ–‡ç”Ÿå­˜æ—¶é—´ä¸º0ï¼Œä¸‹ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡åï¼Œä¸ä¼šç»§ç»­è½¬å‘äº†ï¼Œä¼šç»™åŸä¸»æœºå‘é€å‡ºé”™çš„æŠ¥æ–‡ã€‚å°±å¯çŸ¥é“ç¬¬ä¸€ä¸ªè·¯ç”±çš„ipåœ°å€ï¼ŒåŒé‡ŒTTLä¸º1 å°±å¯ä»¥çŸ¥é“ç¬¬äºŒä¸ªè·¯ç”±çš„IPåœ°å€</p><h3 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h3><p>ä»€ä¹ˆé˜»å¡æ§åˆ¶ï¼Ÿ</p><hr><p>æ¯”å¦‚æˆ‘æƒ³ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶è§‚å¯ŸæŠ¥æ–‡çš„å‘é€æƒ…å†µï¼Œåœ¨0ï¼Œ7sçš„æ—¶é—´å†… å‘é€1448*9 = 17kbçš„æ•°æ®ï¼›<br>è¿™ä¸ªæ—¶å€™ç½‘ç»œå¡é¡¿äº†ï¼Œåˆä¼šè¿™æ ·å‘¢ï¼Ÿåœ¨1.45sçš„æ—¶é—´å†…ï¼Œæ€»å…±å‘é€äº†9ä¸ªåŒ…===5kbæ•°æ®</p><p>1.æ¥å—çª—å£<br>ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸æ–­è°ƒæ•´å®ƒæ¥å—çš„çª—å£å¤§å°<br>2.æ‹¥å¡çª—å£<br>æˆ‘æœ¬åœ°æœ‰è‡ªå·±çš„ä¸€ä¸ªæ‹¥å¡çª—å£cwnd</p><p>å½“cwmd &gt; rwndçš„æ—¶å€™å¯¹æ–¹æ¥æ”¶èƒ½åŠ›é™åˆ¶äº†æˆ‘çš„å‘é€é€Ÿåº¦ï¼Œå½“rwnd &gt; cwndçš„æ—¶å€™ï¼Œæ˜¯æˆ‘çš„ç½‘ç»œæƒ…å†µé€ æˆå‘é€æ¯”è¾ƒæ…¢</p><p>æ…¢å¯åŠ¨ä¸é˜»å¡é¿å…<br>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªLinuxæœåŠ¡å™¨ï¼ŒæœåŠ¡åœ¨æ”¶åˆ°getè¯·æ±‚åè¿›è¡Œå“åº”ï¼Œç¬¬ä¸€æ¬¡åŒæ—¶åªå‘3ä¸ªåŒ…ï¼Œå¹¶ä¸”ä»æ—¶é—´é—´éš”ä¸Šçœ‹è‚¯å®šå®ƒæ˜¯æ•…æ„çš„ã€‚ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¼šæ˜¯3ä¸ªå‘¢ã€‚å› ä¸ºLinuxåˆå§‹åŒ–çª—å£å°±æ˜¯3MSSï¼Œè¯´æ˜ç¬¬ä¸€æ¬¡åªèƒ½å‘3ä¸ªåŒ…</p><h3 id="HTTPè¯·æ±‚å¤´å¤§å°é™åˆ¶"><a href="#HTTPè¯·æ±‚å¤´å¤§å°é™åˆ¶" class="headerlink" title="HTTPè¯·æ±‚å¤´å¤§å°é™åˆ¶"></a>HTTPè¯·æ±‚å¤´å¤§å°é™åˆ¶</h3><p>1.è¯·æ±‚å¤´å¤§å°é™åˆ¶</p><table><thead><tr><th>Nginx</th><th>Tomact</th></tr></thead><tbody><tr><td>4k~8k</td><td>8k</td></tr></tbody></table><p>2.URLé•¿åº¦é™åˆ¶<br>ä¸€ä¸ªæ¯”è¾ƒå®‰å…¨çš„å€¼åº”è¯¥æ˜¯<code>8K</code>ï¼ŒåŒæ—¶æ³¨æ„getè¯·æ±‚å‚æ•°æ˜¯åœ¨URLé‡Œæ•°æ®ä¸èƒ½å¤ªå¤§ã€‚<br>3.Cookieçš„é•¿åº¦é™åˆ¶<br>ä¸€èˆ¬ä¸€ä¸ªdomainçš„cookieä¸èƒ½è¶…è¿‡4kbï¼Œ50ä¸ªcookieï¼Œä¸ç„¶æµè§ˆå™¨å¯èƒ½ä¸ä¼šæ”¯æŒã€‚</p><h2 id="ç†è§£WebSocket"><a href="#ç†è§£WebSocket" class="headerlink" title="ç†è§£WebSocket"></a>ç†è§£WebSocket</h2><p>æ€ä¹ˆå®ç°ä¸€ä¸ªHTTPçš„webå®æ—¶èŠå¤©ï¼Ÿæ€ä¹ˆçŸ¥é“å¯¹æ–¹æœ‰æ²¡æœ‰æ”¶åˆ°å‘é€æ¶ˆæ¯ç»™æˆ‘å‘¢ï¼Ÿ<br>1.ä½¿ç”¨è½®è¯¢ï¼Œæ¯éš”2så‘ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡ç«¯æŸ¥è¯¢ï¼Œ<code>ç¼ºç‚¹æµªè´¹èµ„æº</code><br>2.ä½¿ç”¨Service Workerå®ç°æµè§ˆå™¨çš„Push è¿™ç§æ–¹æ³•è¦å…ˆæ³¨å†ŒFcmè´¦å·è·å–ä¸€ä¸ªidï¼Œç”¨ServiceWorkerç›‘å¬ï¼ŒæœåŠ¡å‘ Android.com/sendå‘é€æ¶ˆæ¯ï¼Œè°·æ­ŒæœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯å‘é‚£ä¸ªidå‘é€ä¸€ä¸ªæ¨é€ï¼Œå®ç°äº†æµè§ˆå™¨çš„pushï¼Œ<code>ç¼ºç‚¹å…¼å®¹æ€§ä¸å¥½</code><br>3.WebSocketå»ºç«‹é•¿è¿æ¥</p><p>ä»£ç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">&quot;ws://192.168.8.88:8080&quot;</span>)</span><br><span class="line">socket.open = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    socket.send(<span class="string">&quot;é•¿æ±Ÿé•¿æ±Ÿï¼Œæˆ‘æ˜¯é»„æ²³&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">socket.onmessage = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">&quot;æ”¶åˆ°æ¥è‡ªé»„æ²³çš„æ¶ˆæ¯ï¼š&quot;</span>+event.data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="è°ˆè°ˆWebSocketå’ŒWebRTC"><a href="#è°ˆè°ˆWebSocketå’ŒWebRTC" class="headerlink" title="è°ˆè°ˆWebSocketå’ŒWebRTC"></a>è°ˆè°ˆWebSocketå’ŒWebRTC</h2><p>WebSocketå¯ä»¥å‘æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ï¼Œä¸ä¿è¯ä¼ é€çš„æ•ˆç‡å’Œè´¨é‡ã€‚<br>WebRTCå¯ç”¨äºå¯é çš„ä¼ è¾“éŸ³é¢‘è§†é¢‘ï¼Œå»ºç«‹P2Pé“¾æ¥ï¼Œä¸éœ€è¦æœåŠ¡ç«¯è¿›è¡Œè½¬å‘æ•°æ®ï¼Œè™šæ‹Ÿç”µè¯ï¼Œåœ¨çº¿é¢è¯•ç­‰ç°åœ¨å¾ˆå¤šç”¨å®ƒå®ç°</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsçš„MVCæ¨¡å‹</title>
      <link href="2019/07/26/NodeJs%E7%9A%84MVC%E6%A8%A1%E5%9E%8B/"/>
      <url>2019/07/26/NodeJs%E7%9A%84MVC%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>MVCæ¨¡å‹ä¸»è¦çš„æ€æƒ³æ˜¯å°†ä¸šåŠ¡é€»è¾‘æŒ‰èŒèƒ½åˆ†ç¦»</p><ol><li>æ§åˆ¶å™¨â€”ä¸€ç»„è¡Œä¸ºçš„é›†åˆ</li><li>æ¨¡å‹  â€”-æ•°æ®ç›¸å…³çš„æ“ä½œå’Œå°è£…</li><li>è§†å›¾  â€”-è§†å›¾çš„æ¸²æŸ“ï¼ˆnodejsçš„åå°è™½ç„¶ä¸éœ€è¦è§†å›¾å¯ä»¥è§†ä¸ºæ¥å£çš„è¾“å‡ºå‚æ•°ï¼‰<br>è¿™æ˜¯ç›®å‰æœ€ç»å…¸çš„åˆ†å±‚æ¨¡å¼ï¼Œå·¥ä½œæ¨¡å¼è¯´æ˜</li><li>è·¯ç”±è§£æurlå¯»æ‰¾å¯¹åº”æ§åˆ¶å™¨å’Œè¡Œä¸º</li><li>è¡Œä¸ºè°ƒç”¨ç›¸å…³çš„æ¨¡å‹ï¼Œè¿›è¡Œæ•°æ®æ“ä½œ</li><li>æ•°æ®æ“ä½œç»“æŸåï¼Œè°ƒç”¨è§†å›¾å’Œç›¸å…³æ•°æ®è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯</li></ol><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190726220049.png"                      alt=""                ></p><p><a class="link"   href="http://www.js" >www.js<i class="fas fa-external-link-alt"></i></a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">//å‚æ•°é…ç½®å±‚</span></span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="built_in">require</span>(<span class="string">&#x27;./app&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> PORT = <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(serverHandle)</span><br><span class="line"></span><br><span class="line">server.listen(PORT,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;é“¾æ¥ä¸Šäº†&#x27;</span>+PORT);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>app.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®ä¸åŒåŠŸèƒ½åˆ†ä¸åŒè·¯ç”±è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&quot;querystring&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="built_in">require</span>(<span class="string">&quot;./src/router/blog&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è®¾ç½®è¿”å›æ ¼å¼</span></span><br><span class="line">  res.setHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  req.path = url.split(<span class="string">&quot;?&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦‚æœgetè§£æquery</span></span><br><span class="line">  req.query = querystring.parse(url.split(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">const</span> blogData = handleBlogRouter(req, res);</span><br><span class="line">     res.end(<span class="built_in">JSON</span>.stringify(blogData));</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">//å¤„ç†404</span></span><br><span class="line">    res.writeHead(<span class="number">404</span>, &#123; <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;text/plain&quot;</span> &#125;);</span><br><span class="line">    res.write(<span class="string">&quot;404 Not Found\n&quot;</span>);</span><br><span class="line">    res.end();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = serverHandle;</span><br></pre></td></tr></table></figure><p>/router/blog.jsè·¯ç”±åŠŸèƒ½</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;getList,getDetail,createNewBlog&#125; = <span class="built_in">require</span>(<span class="string">&#x27;../controller/blog&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123;SuccessModal,ErrorModal&#125;   =  <span class="built_in">require</span>(<span class="string">&#x27;../modal/resModal&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> method = req.method;</span><br><span class="line">  <span class="comment">//è·å–åšå®¢åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">if</span> (method === <span class="string">&quot;GET&quot;</span> &amp;&amp; req.path === <span class="string">&quot;/api/blog/list&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> author = req.query.author || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> keyword = req.query.keyword  || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> listData = getList(author,keyword)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SuccessModal(listData)</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è·å–åšå®¢è¯¦æƒ…</span></span><br><span class="line">  <span class="keyword">if</span> (method === <span class="string">&quot;GET&quot;</span> &amp;&amp; req.path === <span class="string">&quot;/api/blog/detail&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;è·å–åšå®¢api&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ–°å»ºä¸€ç¯‡åšå®¢</span></span><br><span class="line">  <span class="keyword">if</span> (method === <span class="string">&quot;POST&quot;</span> &amp;&amp; req.path === <span class="string">&quot;/api/blog/new&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;æ–°å»ºåšå®¢api&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æ›´æ–°ä¸€ç¯‡åšå®¢</span></span><br><span class="line">  <span class="keyword">if</span> (method === <span class="string">&quot;POST&quot;</span> &amp;&amp; req.path === <span class="string">&quot;/api/blog/update&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;æ›´æ–°åšå®¢api&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleBlogRouter</span><br></pre></td></tr></table></figure><p>modelå±‚æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">data, message</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = data;</span><br><span class="line">      data = <span class="literal">null</span></span><br><span class="line">      message = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (data) &#123;<span class="built_in">this</span>.data = data&#125;</span><br><span class="line">    <span class="keyword">if</span> (message) &#123;<span class="built_in">this</span>.message = message&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuccessModal</span> <span class="keyword">extends</span> <span class="title">BaseModal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">data, message</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(data, message);</span><br><span class="line">    <span class="built_in">this</span>.errno = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorModal</span> <span class="keyword">extends</span> <span class="title">BaseModal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">data, message</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(data, message);</span><br><span class="line">    <span class="built_in">this</span>.errno = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; SuccessModal, ErrorModal &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>controllerå±‚æ“ä½œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getDetail = <span class="function">(<span class="params">id</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//è¿”å›å‡æ•°æ®ï¼Œä»¥åè¿™é‡Œå¢åŠ æ•°æ®åº“æ“ä½œä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      id:<span class="number">1</span>,</span><br><span class="line">      title:<span class="string">&#x27;æ ‡é¢˜C&#x27;</span>,</span><br><span class="line">      content:<span class="string">&#x27;å†…å®¹C&#x27;</span>,</span><br><span class="line">      createTime:<span class="number">1564065988099</span>,</span><br><span class="line">      author:<span class="string">&#x27;å‘¨æ°ä¼¦&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    getDetail</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactä¸­ä½¿ç”¨Mobx</title>
      <link href="2019/06/23/React%E4%B8%AD%E4%BD%BF%E7%94%A8Mobx/"/>
      <url>2019/06/23/React%E4%B8%AD%E4%BD%BF%E7%94%A8Mobx/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx</h2><blockquote><p>çŠ¶æ€ç®¡ç†åº“çš„åŒºåˆ«:ç½‘ä¸ŠæŸä½å¤§ç‰›çš„ ppt, é“¾æ¥æœ‰æœºä¼šå†è¡¥ä¸Šã€‚æ­¤å¤„çš„è‡ªå·±ä¸ºåº“çš„å¼€å‘è€…ï¼Œåˆ«äººæ˜¯æŒ‡åº“çš„ä½¿ç”¨è€…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç­‰ç å†œã€‚<br><a id="more"></a></p><ul><li style="list-style: none"><input type="checkbox"></input> MobXæ¶å¿ƒè‡ªå·±ï¼Œæˆå…¨åˆ«äºº</li><li style="list-style: none"><input type="checkbox"></input> Reduxæˆå…¨è‡ªå·±ï¼Œæ¶å¿ƒåˆ«äºº</li><li style="list-style: none"><input type="checkbox"></input> Rxjsæ¶å¿ƒè‡ªå·±ï¼Œä¹Ÿæ¶å¿ƒåˆ«äºº</li></ul></blockquote><h2 id="é¦–å…ˆå®‰è£…ä¿®é¥°å™¨"><a href="#é¦–å…ˆå®‰è£…ä¿®é¥°å™¨" class="headerlink" title="é¦–å…ˆå®‰è£…ä¿®é¥°å™¨"></a>é¦–å…ˆå®‰è£…ä¿®é¥°å™¨</h2><h3 id="åˆ›å»ºä¸€ä¸ªé¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ªé¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create-react-app mobx-todo-list <span class="comment">//åˆ›å»ºé¡¹ç›®</span></span><br><span class="line"></span><br><span class="line"> yarn add mobx mobx-react  <span class="comment">//å®‰è£… mobx çš„ç›¸å…³ä¾èµ–</span></span><br><span class="line"> </span><br><span class="line"> npm run eject</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å®‰è£…-decorators"><a href="#å®‰è£…å®‰è£…-decorators" class="headerlink" title="å®‰è£…å®‰è£… decorators"></a>å®‰è£…å®‰è£… decorators</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @babel/plugin-proposal-decorators</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹package-jsonä¸­çš„babelé…ç½®"><a href="#ä¿®æ”¹package-jsonä¸­çš„babelé…ç½®" class="headerlink" title="ä¿®æ”¹package.jsonä¸­çš„babelé…ç½®"></a>ä¿®æ”¹package.jsonä¸­çš„babelé…ç½®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;babel&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;react-app&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;legacy&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>å®Œæˆå, å°±å¯ä»¥ä½¿ç”¨è£…é¥°å™¨è¯­æ³•äº†.</strong></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190623003438.png"                      alt=""                ></p><h2 id="åœ¨Reactå¦‚ä½•ä½¿ç”¨å‘¢"><a href="#åœ¨Reactå¦‚ä½•ä½¿ç”¨å‘¢" class="headerlink" title="åœ¨Reactå¦‚ä½•ä½¿ç”¨å‘¢"></a>åœ¨Reactå¦‚ä½•ä½¿ç”¨å‘¢</h2><ul><li>Provider<br>â€”-Providerçš„ä½œç”¨ä¸react-reduxæä¾›çš„Providerç»„ä»¶æ˜¯ç›¸åŒçš„</li><li>inject</li><li>â€”- ç”¨äºä»Provideræä¾›çš„stateä¸­é€‰å–æ•°æ®ä½œä¸ºpropsä¼ é€’ç»™ç›®æ ‡ç»„ä»¶ã€‚<br>å¸¸ç”¨çš„æ–¹å¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@inject(<span class="string">&quot;store1&quot;</span>,<span class="string">&quot;store2&quot;</span>) @observer MyComponent</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºAppStore"><a href="#åˆ›å»ºAppStore" class="headerlink" title="åˆ›å»ºAppStore"></a>åˆ›å»ºAppStore</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, computed, action &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppStore</span> </span>&#123;</span><br><span class="line">    @observable todos = []; <span class="comment">//todosåˆ—è¡¨</span></span><br><span class="line">    @observable newtodo = <span class="string">&quot;232&quot;</span>; <span class="comment">//æ–°æ·»åŠ çš„todo</span></span><br><span class="line">    @observable selectedRowKeys = []; <span class="comment">//é€‰æ‹©è¡Œçš„key</span></span><br><span class="line">    @observable loading = <span class="literal">true</span>; <span class="comment">//Table-loading</span></span><br><span class="line">    @observable _key = <span class="number">0</span>; <span class="comment">//key</span></span><br><span class="line">    @observable total = <span class="number">0</span>; <span class="comment">//æ•°æ®é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ  æ³¨æ„thisçš„æ‰§è¡Œ å¿…é¡»ç”¨å‰ªå¤´å‡½æ•°</span></span><br><span class="line">    @action AddTodo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._key += <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—é•¿åº¦  æ¥å—ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    @computed <span class="keyword">get</span> <span class="title">TodoListCount</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>._key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> AppStore;</span><br></pre></td></tr></table></figure><h3 id="è½½å…¥index-js"><a href="#è½½å…¥index-js" class="headerlink" title="è½½å…¥index.js"></a>è½½å…¥index.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">&#x27;./serviceWorker&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> AppStore <span class="keyword">from</span> <span class="string">&#x27;./stores/AppStore&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./components/App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªstoreå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> AppStore();</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;App store=&#123;store&#125; /&gt;,</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">serviceWorker.unregister();</span><br></pre></td></tr></table></figure><h2 id="Mobxåœ¨reactä½¿ç”¨ä¸­çš„ä¼˜åŒ–"><a href="#Mobxåœ¨reactä½¿ç”¨ä¸­çš„ä¼˜åŒ–" class="headerlink" title="Mobxåœ¨reactä½¿ç”¨ä¸­çš„ä¼˜åŒ–"></a>Mobxåœ¨reactä½¿ç”¨ä¸­çš„ä¼˜åŒ–</h2><h3 id="å°½å¯èƒ½ä½¿ç”¨å°ç»„ä»¶"><a href="#å°½å¯èƒ½ä½¿ç”¨å°ç»„ä»¶" class="headerlink" title="å°½å¯èƒ½ä½¿ç”¨å°ç»„ä»¶"></a>å°½å¯èƒ½ä½¿ç”¨å°ç»„ä»¶</h3><p><strong>before</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@observer</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">PostList</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;user,todos,homeStore&#125; = <span class="built_in">this</span>.props</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;h1&gt;PostListå…³äºç³»åˆ—&lt;/h1&gt;</span><br><span class="line">            &lt;span&gt;&#123;homeStore.user&#125;&lt;/span&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &#123;todos.map(<span class="function"><span class="params">todo</span>=&gt;</span></span><br><span class="line">                 (<span class="xml"><span class="tag">&lt;<span class="name">TodoView</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> /&gt;</span></span>)</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">            &lt;button onClick=&#123;homeStore.setUser&#125;&gt;æ›´æ–°user&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      );</span><br></pre></td></tr></table></figure></p><blockquote><p>å‡å°‘æ–°æ—§ç»„ä»¶çš„diffå¯¹æ¯”è¿‡ç¨‹ä¹Ÿæ˜¯æ¶ˆè€—æ€§èƒ½<br><strong>after</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@observer</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">PostList</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;user,todos,homeStore&#125; = <span class="built_in">this</span>.props</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;h1&gt;PostListå…³äºç³»åˆ—&lt;/h1&gt;</span><br><span class="line">            &lt;span&gt;&#123;homeStore.user&#125;&lt;/span&gt;</span><br><span class="line">            &lt;TodoView todos=&#123;todos&#125;/&gt;</span><br><span class="line">            &lt;button onClick=&#123;homeStore.setUser&#125;&gt;æ›´æ–°user&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      );</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="å°½å¯èƒ½æ™šçš„å¼•ç”¨å¯¹è±¡å±æ€§"><a href="#å°½å¯èƒ½æ™šçš„å¼•ç”¨å¯¹è±¡å±æ€§" class="headerlink" title="å°½å¯èƒ½æ™šçš„å¼•ç”¨å¯¹è±¡å±æ€§"></a>å°½å¯èƒ½æ™šçš„å¼•ç”¨å¯¹è±¡å±æ€§</h3><p><strong>before</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@observer </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;name&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="keyword">const</span> &#123;p&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">B</span> <span class="attr">name</span>=<span class="string">&#123;p.name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">B</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>ç»„ä»¶Bæ¸²æŸ“çš„æ¡ä»¶å¿…é¡»æ˜¯ç»„ä»¶Aé‡æ–°æ¸²æŸ“ï¼Œç„¶åä¼šè®©Bä¹Ÿæ¸²æŸ“.å¦‚æœpæ˜¯ä¸ªå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œåªéœ€é‡æ–°æ¸²æŸ“Bç»„ä»¶ï¼Œä¸éœ€è¦æ¸²æŸ“Aç»„ä»¶<br><strong>after</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@observer </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;p&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;p.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="keyword">const</span> &#123;p&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">B</span> <span class="attr">p</span>=<span class="string">&#123;p&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">B</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="æå‰ç»‘å®šå‡½æ•°"><a href="#æå‰ç»‘å®šå‡½æ•°" class="headerlink" title="æå‰ç»‘å®šå‡½æ•°"></a>æå‰ç»‘å®šå‡½æ•°</h3><p><strong>before</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@observer </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;p&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;alert(</span>&#x27;<span class="attr">hi</span>&#x27;)&#125;&gt;</span>&#123;p.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>Bä¸­çš„renderæ¯æ¬¡è°ƒç”¨ï¼Œonclickä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¯¼è‡´Cçš„renderæ–¹æ³•è¢«é‡æ–°è°ƒç”¨ï¼Œæ— è®ºå…¶ä»–å±æ€§å‘ç”Ÿå˜åŒ–<br><strong>after</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@observer </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  handleClick=<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;p&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">C</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>&#123;p.name&#125;<span class="tag">&lt;/<span class="name">C</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€æ€§èƒ½ä¼˜åŒ–</title>
      <link href="2019/06/08/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>2019/06/08/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£"><a href="#è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£" class="headerlink" title="è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£"></a>è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£</h2><p>å½“ webpack å‡çº§ä¼˜åŒ–ï¼Œç›¸å…³ node yarn npm åŒ…åº”è¯¥ä¹Ÿéœ€è¦å‡çº§å·²è·å¾—æ›´å¥½çš„ä¼˜åŒ–æ€§èƒ½</p><a id="more"></a><h2 id="å‡å°‘-loader"><a href="#å‡å°‘-loader" class="headerlink" title="å‡å°‘ loader"></a>å‡å°‘ loader</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [&#123;</span><br><span class="line">test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line"><span class="comment">//include: path.reslove(__dirname,&#x27;../src&#x27;), //æŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>exclude</code>ï¼šæ’é™¤æ–‡ä»¶å¤¹å†…æ–‡ä»¶ä½¿ç”¨<code>babel-load</code>ï¼Œé¿å…å†æ¬¡ç¼–è¯‘æ‰“åŒ…ï¼ŒåŠ å¿«æ‰“åŒ…é€Ÿåº¦<br>æˆ–è€…å¯ä»¥ç”¨<code>include</code>å‚æ•°</p><p>ä¸Šé¢<code>jsx?</code>è¡¨ç¤ºçš„æ˜¯å¦‚æœ js æ–‡ä»¶å¯ä»¥èµ°<code>babel-load</code>ï¼Œå¦‚æœæ˜¯ jsx æ–‡ä»¶ä¹Ÿå¯ä»¥èµ°<code>babel-load</code>æ–‡ä»¶</p><p>css æ–‡ä»¶å‹ç¼©</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">minimizer: [<span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶çš„é€‰æ‹©å°½é‡ä½¿ç”¨<a class="link"   href="https://www.webpackjs.com/plugins/" >å®˜æ–¹<i class="fas fa-external-link-alt"></i></a>è®¤å¯çš„æ’ä»¶</strong></p><h2 id="reslove-åˆç†çš„é…ç½®"><a href="#reslove-åˆç†çš„é…ç½®" class="headerlink" title="reslove åˆç†çš„é…ç½®"></a>reslove åˆç†çš„é…ç½®</h2><h3 id="æ–‡ä»¶åç¼€çš„ç®€å†™é…ç½®"><a href="#æ–‡ä»¶åç¼€çš„ç®€å†™é…ç½®" class="headerlink" title="æ–‡ä»¶åç¼€çš„ç®€å†™é…ç½®"></a>æ–‡ä»¶åç¼€çš„ç®€å†™é…ç½®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> app <span class="keyword">from</span> <span class="string">&quot;./src/app.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&quot;./src/style.css&quot;</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸å†™åç¼€ä¼šæŠ¥é”™ï¼Œå¦‚ä½•ç”¨ webpack é…ç½®å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">    ...</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        extensions:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.jsx&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ · webpack å°±ä¼šå»æ‰¾ js æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Ÿ åˆ™å»æ‰¾ jsx æ–‡ä»¶æ˜¯å¦å­˜åœ¨,ä½†æ˜¯ extensions ä¸å»ºè®®å­˜å¾ˆå¤šåç¼€å,å½±å“æ€§èƒ½ï¼Œ<br>å»ºè®®èµ„æºç±»æ–‡ä»¶è¿˜æ˜¯ä»£åç¼€ã€‚</p><h3 id="ç®€å†™è·¯å¾„åä¸€"><a href="#ç®€å†™è·¯å¾„åä¸€" class="headerlink" title="ç®€å†™è·¯å¾„åä¸€"></a>ç®€å†™è·¯å¾„åä¸€</h3><p>å¦‚æœæˆ‘ä»¬æ¯æ¬¡è¿™æ ·å†™è·¯å¾„æ˜¯ä¸æ˜¯å¾ˆç¹çï¼Ÿ</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> list <span class="keyword">from</span> <span class="string">&#x27;../src/common/listwarpper/list/item.jsx&#x27;</span></span><br></pre></td></tr></table></figure><p>webpack å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿå¢åŠ <code>mainFiles</code>å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">    ...</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        extensions:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.jsx&#x27;</span>],</span><br><span class="line">        mainFiles:[<span class="string">&#x27;common&#x27;</span>,<span class="string">&#x27;image&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>mainFiles</code>è¡¨ç¤º webpack å»æ ¹æ®æ•°ç»„é•¿åº¦å»æŸ¥æ‰¾å¯¹åº”æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å­˜æ”¾çš„æ–‡ä»¶å¤¹æ•°ç»„é•¿åº¦ä¸å¯ä»¥å¤ªé•¿ï¼Œå½±å“æ€§èƒ½</p><h3 id="ç®€å†™è·¯å¾„åäºŒ"><a href="#ç®€å†™è·¯å¾„åäºŒ" class="headerlink" title="ç®€å†™è·¯å¾„åäºŒ"></a>ç®€å†™è·¯å¾„åäºŒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">    ...</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        extensions:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.jsx&#x27;</span>],</span><br><span class="line">        alias:&#123;  <span class="comment">//åˆ«åçš„æ„æ€</span></span><br><span class="line">            listwarpper:path.resolve(__dirname,<span class="string">&#x27;../src/common/listwarpper&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ webpack çœ‹åˆ° listwarpper çš„è·¯å¾„åå°±è¡¨ç¤ºå»æŸ¥æ‰¾<code>../src/common/listwarpper</code>;</p><h2 id="ä½¿ç”¨-DllPlugin-æé«˜æ‰“åŒ…é€Ÿåº¦"><a href="#ä½¿ç”¨-DllPlugin-æé«˜æ‰“åŒ…é€Ÿåº¦" class="headerlink" title="ä½¿ç”¨ DllPlugin æé«˜æ‰“åŒ…é€Ÿåº¦"></a>ä½¿ç”¨ DllPlugin æé«˜æ‰“åŒ…é€Ÿåº¦</h2><p>æˆ‘ä»¬çŸ¥é“é¡¹ç›®ä¼šå¼•å…¥è¶Šæ¥è¶Šçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ‰“åŒ…é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ï¼Œæ¯ä¸€æ¬¡é‡æ–°æ‰“åŒ…é‡æ–°åˆ†æ loaderï¼Œpluginã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…æ—¶é—´ä¼šæ¯”è¾ƒå¤š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190823131309.png"                      alt=""                ></p><p>å¯ä¸å¯ä»¥å•ç‹¬æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„æ—¶å€™åˆ†æè¿™äº›ä»£ç ï¼Œåé¢æ‰“åŒ…å°±ä¸éœ€è¦åˆ†æäº†ï¼Ÿ</p><p>æˆ‘ä»¬å¾—å…ˆåˆ›å»ºä¸€ä¸ª<code>[name].dll.js</code>æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    vendors: [<span class="string">&quot;lodash&quot;</span>], <span class="comment">//éœ€è¦ä½¿ç”¨å¾—ç¬¬ä¸‰æ–¹æ¨¡å—åˆ†åˆ«å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">    react: [<span class="string">&quot;react&quot;</span>, <span class="string">&quot;react-dom&quot;</span>],</span><br><span class="line">    jquery: [<span class="string">&quot;jquery&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].dll.js&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;../dll&quot;</span>),</span><br><span class="line">    library: <span class="string">&quot;[name]&quot;</span> <span class="comment">//å…¨å±€å˜é‡ æš´éœ²å‡ºå»</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ webpack.json ç»§ç»­é…ç½®</p><p><code>AddAssetHtmlWebpackPlugin</code>æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AddAssetHtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;add-asset-html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> files = fs.readdirSync(path.resolve(__dirname, <span class="string">&quot;../dll&quot;</span>));</span><br><span class="line">files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/.*\.dll.js/</span>.test(file)) &#123;</span><br><span class="line">    plugins.push(</span><br><span class="line">      <span class="keyword">new</span> AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">        filepath: path.resolve(__dirname, <span class="string">&quot;../dll&quot;</span>, file)</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/.*\.manifest.json/</span>.test(file)) &#123;</span><br><span class="line">    plugins.push(</span><br><span class="line">      <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">        manifest: path.resolve(__dirname, <span class="string">&quot;../dll&quot;</span>, file)</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® plugins,è®©ç¬¬ä¸‰æ–¹æ¨¡å—å»åšä¸€ä¸ªæ˜ å°„,æŠŠåº“æ–‡ä»¶å»åšåˆ†æä¸­å¾—åˆ†ææ¨¡å—æ˜ å°„å…³ç³»ç»“æœæ”¾åœ¨ json æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  ...new webpack.DllPlugin(&#123;</span><br><span class="line">    name: <span class="string">&quot;[name]&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;../dll/[name].manifest.json&quot;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬<code>yarn run build-dll</code>ä¸€ä¸‹ä¼šå‘ç”Ÿç”Ÿæˆå¾ˆå¤šæ–‡ä»¶</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190823112232.png"                      alt=""                ></p><h2 id="æ§åˆ¶åŒ…å¾—å¤§å°å‰”é™¤æ— ç”¨æ’ä»¶"><a href="#æ§åˆ¶åŒ…å¾—å¤§å°å‰”é™¤æ— ç”¨æ’ä»¶" class="headerlink" title="æ§åˆ¶åŒ…å¾—å¤§å°å‰”é™¤æ— ç”¨æ’ä»¶"></a>æ§åˆ¶åŒ…å¾—å¤§å°å‰”é™¤æ— ç”¨æ’ä»¶</h2><p>æˆ‘ä»¬é¡¹ç›®ä¸­ç»å¸¸ä¼šå¼•ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¯æ˜¯æˆ‘ä»¬ç‰ˆæœ¬è¿­ä»£åˆä¸å»ç”¨äº†ï¼Œç„¶åå¿˜è®°åˆ é™¤ã€‚ç»§ç»­æ‰“åŒ…åŒ…å¾—ä½“ç§¯ä¼šæŠŠå¤šä½™å¾—åŒ…æ‰“åŒ…è¿›å»ï¼Œæ˜¯å¤šä½™å¾—ã€‚</p><h2 id="åˆç†ä½¿ç”¨-sourceMap"><a href="#åˆç†ä½¿ç”¨-sourceMap" class="headerlink" title="åˆç†ä½¿ç”¨ sourceMap"></a>åˆç†ä½¿ç”¨ sourceMap</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> prodConfig = &#123;</span><br><span class="line">  mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  devtool: <span class="string">&quot;cheap-module-source-map&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€ç”¨ HMR æé«˜æ•ˆç‡</title>
      <link href="2019/06/07/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E7%94%A8%20HMR%20%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87/"/>
      <url>2019/06/07/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E7%94%A8%20HMR%20%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87/</url>
      
        <content type="html"><![CDATA[<blockquote><p>HMR å…¨ç§°æ˜¯ Hot Module Replacementï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼ŒHMR æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡ã€‚</p></blockquote><a id="more"></a><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure><p>æ·»åŠ å…¶ä»– HotModuleReplacementPlugin æ’ä»¶é…åˆæ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    hot: <span class="literal">true</span> <span class="comment">// dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">// ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin() <span class="comment">// Hot Module Replacement çš„æ’ä»¶</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h2><p>webpack å¦‚ä½•ä¿è¯ HMR æ¥å£ä¸­çš„å¼•ç”¨æ˜¯æœ€æ–°çš„æ¨¡å—ä»£ç ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> hello <span class="keyword">from</span> <span class="string">&quot;./bar&quot;</span>;</span><br><span class="line"></span><br><span class="line">hello();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&quot;./bar&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;Accepting the updated bar module!&#x27;)</span></span><br><span class="line">    hello();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ bar æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œåé¢å¾—å›è°ƒå‡½æ•°é‡æ–°æ‰§è¡Œ hello</p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€JS æˆ– CSS æ–‡ä»¶ä»£ç åˆ†å‰²</title>
      <link href="2019/06/06/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FCSS%E6%96%87%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2/"/>
      <url>2019/06/06/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FCSS%E6%96%87%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦åˆ†ç¦»"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†ç¦»" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†ç¦»"></a>ä¸ºä»€ä¹ˆè¦åˆ†ç¦»</h2><p>å…ˆç®€å•è§£é‡Šä¸€ä¸‹è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚</p><a id="more"></a><p>å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚</p><p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚ã€‚</p><h2 id="js-ä»£ç åˆ†å‰²"><a href="#js-ä»£ç åˆ†å‰²" class="headerlink" title="js ä»£ç åˆ†å‰²"></a>js ä»£ç åˆ†å‰²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">&quot;all&quot;</span> <span class="comment">// æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‹†åˆ†æ–‡ä»¶å¾—<code>ç›®çš„</code>æ˜¯ä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜,åˆ†ç¦»å…¬å…±ç±»åº“å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†è®©å¤šé¡µé¢åˆ©ç”¨ç¼“å­˜ï¼Œä»è€Œå‡å°‘ä¸‹è½½çš„ä»£ç é‡ï¼ŒåŒæ—¶ï¼Œä¹Ÿæœ‰ä»£ç å˜æ›´æ—¶å¯ä»¥åˆ©ç”¨ç¼“å­˜å‡å°‘ä¸‹è½½ä»£ç é‡çš„å¥½å¤„</p><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><p>å¯ä»¥ä½¿ç”¨<code>MiniCssExtractPlugin</code>,è®© css ä»£ç åˆ†å‰²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].css&quot;</span>,</span><br><span class="line">    chunkFilename: <span class="string">&quot;[name].chunk.css&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ’ä»¶ç›®å‰è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä¸æ”¯æŒ HMRï¼Œå°±æ˜¯çƒ­æ›´æ–°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ”¹å˜æœ¬åœ° css æ— æ³•ç«‹å³æŸ¥çœ‹æ•ˆæœï¼Œæ‰€ä»¥å»ºè®®åªåœ¨çº¿ä¸Šç¯å¢ƒç”¨è¿™ä¸ªæ’ä»¶</p><h2 id="å¸¸ç”¨é…ç½®"><a href="#å¸¸ç”¨é…ç½®" class="headerlink" title="å¸¸ç”¨é…ç½®"></a>å¸¸ç”¨é…ç½®</h2><p>æˆ‘ä»¬åœ¨ webpack.pro.js ä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules:[&#123;</span><br><span class="line">test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">use: [</span><br><span class="line">MiniCssExtractPlugin.loader,</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">importLoaders: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">use: [</span><br><span class="line">MiniCssExtractPlugin.loader,</span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">filename: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">chunkFilename: <span class="string">&#x27;[name].chunk.css&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><code>filename</code>è¡¨ç¤ºå¦‚æœé¡µé¢éœ€è¦ç›´æ¥åº”ç”¨çš„æ–‡ä»¶åˆ™ç›´æ¥ç”Ÿæˆ <code>xxx.css</code></p><p>å¦‚æœæ˜¯æŸä¸ªç»„ä»¶çš„ css æ ·å¼ï¼Œä¸æ˜¯ä¸»æ–‡ä»¶ css é‚£ä¹ˆå®ƒå°±ä¼šç¼–è¯‘æˆ<code>xxx.chunk.css</code></p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€webpackDevServeræå‡æ•ˆç‡</title>
      <link href="2019/06/05/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FwebpackDevServer%E6%8F%90%E5%8D%87%E6%95%88%E7%8E%87/"/>
      <url>2019/06/05/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FwebpackDevServer%E6%8F%90%E5%8D%87%E6%95%88%E7%8E%87/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤æƒ…å†µä¸‹å¼€å¯äº†æœåŠ¡å™¨åï¼Œåªè¦å…¥å£æ–‡ä»¶æœ‰æ›´æ–°é‚£æ•´ä¸ªé¡µé¢å°±ä¼š<code>é‡æ–°åˆ·æ–°</code>ã€‚å¦‚æœé¡µé¢é‡Œå¼•å…¥çš„æ¨¡å—éå¸¸å¤šçš„æƒ…å†µä¸‹è®©æ•´ä¸ªé¡µé¢åˆ·æ–°å°±ä¼šå˜å¾—æœ‰äº›æ…¢ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥äº¤ç»™çƒ­æ›´æ–°å»è§£å†³ã€‚çƒ­æ›´æ–°çš„æ„æ€å°±æ˜¯åªæ›´æ–°æœ‰æ”¹åŠ¨çš„æ¨¡å—ï¼ˆåƒajaxä¸€æ ·å±€éƒ¨åˆ·æ–°ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå¹¶å®æ—¶åˆ·æ–°ä»£ç æˆ‘ä»¬éœ€è¦<code>devserver</code><br><a id="more"></a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">contentBase: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">open: <span class="literal">true</span>,</span><br><span class="line">port: <span class="number">8080</span>,  </span><br><span class="line">hot: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>contentBase</td><td>é™æ€æ–‡ä»¶è·¯å¾„</td></tr><tr><td>open</td><td>æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</td></tr><tr><td>ç«¯å£å·</td><td>è‡ªå®šä¹‰ï¼Œé»˜è®¤8080</td></tr><tr><td>hot</td><td>çƒ­æ›´æ–°</td></tr></tbody></table><h2 id="è·¨åŸŸè¯·æ±‚"><a href="#è·¨åŸŸè¯·æ±‚" class="headerlink" title="è·¨åŸŸè¯·æ±‚"></a>è·¨åŸŸè¯·æ±‚</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">contentBase: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">open: <span class="literal">true</span>,</span><br><span class="line">port: <span class="number">8080</span>,  </span><br><span class="line">hot: <span class="literal">true</span>,</span><br><span class="line">proxy:&#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>:<span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>contentBase</td><td>é™æ€æ–‡ä»¶å®¹å™¨</td></tr><tr><td>open</td><td>æ˜¯å¦æ‰“å¼€æµè§ˆå™¨</td></tr><tr><td>port</td><td>ç«¯å£</td></tr><tr><td>hot</td><td>æ˜¯å¦è¦æ‰“å¼€çƒ­æ›´æ–°</td></tr><tr><td>proxy</td><td>è¯·æ±‚ä»£ç†</td></tr></tbody></table><h2 id="é‡å†™api"><a href="#é‡å†™api" class="headerlink" title="é‡å†™api"></a>é‡å†™api</h2><p>å¦‚æœæœåŠ¡ç«¯ï¼Œå¤„ç†çš„apiä¸æ˜¯ä»¥/apiå¼€å¤´çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œéœ€è¦åœ¨webpackçš„proxyé‡å†™è¯·æ±‚api</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">  proxy:&#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>:&#123;</span><br><span class="line">      target:<span class="string">&#x27;http://localhost:9000&#x27;</span>,</span><br><span class="line">      pathRewrite:&#123;<span class="string">&#x27;/api&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>target</td><td>ä¸ºè¯·æ±‚åŸŸ</td></tr><tr><td>pathRewrite</td><td>å°†å¼€å‘æ¨¡å—ä¸­çš„ä»¥/apiè¯·æ±‚çš„æ¥å£ï¼Œå»æ‰/apiè¿›è¡Œä»£ç†è¯·æ±‚</td></tr></tbody></table><h2 id="å¼•å…¥Mockæ•°æ®"><a href="#å¼•å…¥Mockæ•°æ®" class="headerlink" title="å¼•å…¥Mockæ•°æ®"></a>å¼•å…¥Mockæ•°æ®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mock.js</span></span><br><span class="line"><span class="keyword">const</span> Mock = <span class="built_in">require</span>(<span class="string">&#x27;./mock.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    host: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">&#x27;X-foo&#x27;</span>: <span class="string">&#x27;112233&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    inline: <span class="literal">true</span>,</span><br><span class="line">    overlay: <span class="literal">true</span>,</span><br><span class="line">    stats: <span class="string">&#x27;errors-only&#x27;</span>,</span><br><span class="line">    before: <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(app);</span><br><span class="line">      <span class="comment">//è¯¥å‡½æ•°ä¼šåˆ¤æ–­å½“å‰çš„ç¯å¢ƒæ˜¯å¦æ˜¯mockå‘½ä»¤</span></span><br><span class="line">      <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;mock&#x27;</span>) &#123;</span><br><span class="line">        Mock(app);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">   plugins: [</span><br><span class="line">    <span class="comment">// è®¾ç½®ç¯å¢ƒå˜é‡ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="string">&#x27;process.env&#x27;</span>: &#123;</span><br><span class="line">        NODE_ENV: <span class="built_in">JSON</span>.stringify(process.env.NODE_ENV)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¼•å…¥mock-js"><a href="#å¼•å…¥mock-js" class="headerlink" title="å¼•å…¥mock.js"></a>å¼•å…¥mock.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getPower = <span class="built_in">require</span>(<span class="string">&#x27;./json/parent_getPower.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reConfig = <span class="built_in">require</span>(<span class="string">&#x27;./json/parent_reConfig.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reConList = <span class="built_in">require</span>(<span class="string">&#x27;./json/parent_reconlist.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reGroup = <span class="built_in">require</span>(<span class="string">&#x27;./json/parent_reGroup.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mock</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.get(<span class="string">&#x27;/xxxx/yyy&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;getPower111&#x27;</span>);</span><br><span class="line">    res.json(getPower);</span><br><span class="line">  &#125;);</span><br><span class="line">  app.post(<span class="string">&#x27;/reconfig&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;reConfig111&#x27;</span>);</span><br><span class="line">    res.json(reConfig);</span><br><span class="line">  &#125;);</span><br><span class="line">  app.post(<span class="string">&#x27;/conlist&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;reConList111&#x27;</span>);</span><br><span class="line">    res.json(reConList);</span><br><span class="line">  &#125;);</span><br><span class="line">  app.post(<span class="string">&#x27;/regroup&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;reGroup111&#x27;</span>);</span><br><span class="line">    res.json(reGroup);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Mock;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€SourceMap çš„é…ç½®</title>
      <link href="2019/06/04/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FSourceMap%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>2019/06/04/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FSourceMap%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-SourceMap"><a href="#ä»€ä¹ˆæ˜¯-SourceMap" class="headerlink" title="ä»€ä¹ˆæ˜¯ SourceMap"></a>ä»€ä¹ˆæ˜¯ SourceMap</h1><p>å½“æˆ‘ä»¬å‘ç°æ‰“åŒ…åç¨‹åºå‡ºç°é”™è¯¯æ—¶å€™ä¼šä¸€èˆ¬ç”¨ chromse</p><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821151023.png"                      alt=""                ></p><p>å½“ç‚¹å‡»ä¹‹åä»£ç ä¸­å‘ç°æ˜¯ 96 è¡Œï¼Œè¿™ä¸ª main.js æ˜¯æ‰“åŒ…çš„</p><p>æˆ‘å¸Œæœ›æ˜¯æˆ‘æ‰“åŒ…å‰é‚£ä¸ªæ–‡ä»¶çš„é‚£ä¸€è¡Œé”™è¯¯äº†ã€‚æˆ‘ä»¬å¦‚ä½•è®© webpack åšåˆ°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è¦ç”¨ sourceMap å®ƒæ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå®ƒçŸ¥é“ dist ç›®å½•ä¸‹ main.js96 è¡Œå°±æ˜¯ src ä¸­ index.js æ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œ</p><h2 id="åŠ å…¥é…ç½®"><a href="#åŠ å…¥é…ç½®" class="headerlink" title="åŠ å…¥é…ç½®"></a>åŠ å…¥é…ç½®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> prodConfig = &#123;</span><br><span class="line">mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">devtool: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¦‚æœæˆ‘ä»¬åªæƒ³çŸ¥é“è¡Œ ä¸éœ€è¦å‘Šè¯‰æˆ‘ç¬¬å‡ åˆ—</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prodConfig = &#123;</span><br><span class="line">mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">devtool: <span class="string">&#x27;cheap-module-source-map&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>cheap-module-source-map</td><td>åªæ˜¾ç¤ºè¡Œæ•°ï¼ˆæé«˜æ€§èƒ½ï¼‰</td></tr></tbody></table><h2 id="ç¬”è€…æ¨è"><a href="#ç¬”è€…æ¨è" class="headerlink" title="ç¬”è€…æ¨è"></a>ç¬”è€…æ¨è</h2><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>dev æ¨¡å¼</td><td>cheap-module-eval-source-map</td></tr><tr><td>production</td><td>devtool ä¸éœ€è¦é…ç½®é»˜è®¤å³åˆ»æˆ–è€…(cheap-module-source-map)</td></tr></tbody></table><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>è§£å†³äº†å¦‚æœæ‰“åŒ…å‡ºé”™ï¼Œå¿«é€Ÿå®šä½é”™è¯¯æé«˜æ•ˆç‡</p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€pluginså®è·µ</title>
      <link href="2019/06/03/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Fplugins%E5%AE%9E%E8%B7%B5/"/>
      <url>2019/06/03/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Fplugins%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬å¯ä»¥æŠŠplugin ç”¨äºå¤„ç†æ›´å¤šå…¶ä»–çš„ä¸€äº›æ„å»ºä»»åŠ¡è®©æ‰“åŒ…æ›´åŠ ä¾¿æ·ï¼Œä¹Ÿå¯ä»¥å«åšwebpackçš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼šè¦ä½¿ç”¨å‹ç¼© JS ä»£ç </p></blockquote><a id="more"></a><p>ä¹‹å‰æˆ‘ä»¬æ²¡æœ‰é…ç½®å‰æˆ‘ä»¬è¦æ‰‹åŠ¨è¾“å…¥htmlé¡µé¢åˆ°distç›®å½•ç„¶åç”¨chromeè¿è¡Œ</p><p>æˆ‘ä»¬è€ƒè™‘å¦‚ä½•è®©htmlè‡ªåŠ¨ç”Ÿæˆåˆ°distç›®å½•ä¸‹å‘¢ï¼Ÿ</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add html-webpack-plugin clean-webpack-plugin</span><br></pre></td></tr></table></figure><blockquote><p>å®ƒçš„ä½œç”¨æ‰“åŒ…ç»“æŸåè‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠjsè‡ªåŠ¨å¼•å…¥åˆ°htmlæ–‡ä»¶ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: <span class="string">&quot;./src/index.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].js&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;../dist&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [...]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">&quot;src/index.html&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>header 1</th><th>header 2</th></tr></thead><tbody><tr><td>template</td><td>å‚è€ƒsrcç›®å½•ä¸‹htmlæ¨¡æ¿ç”Ÿæˆ</td></tr></tbody></table><p>å¦‚æœæˆ‘ä»¬è¦æ¯æ¬¡buildå‰æ¸…é™¤distç›®å½•é‚£æˆ‘ä»¬è¿˜å¯ä»¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;clean-webpack-plugin&quot;</span>);</span><br><span class="line">...</span><br><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">&quot;src/index.html&quot;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">&quot;dist&quot;</span>], &#123;</span><br><span class="line">      root: path.resolve(__dirname, <span class="string">&quot;../&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€loaderå®è·µ</title>
      <link href="2019/06/02/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Floader%E5%AE%9E%E8%B7%B5/"/>
      <url>2019/06/02/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Floader%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Webpack æœ¬èº«åªèƒ½å¤„ç† JavaScript æ¨¡å—ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå°±éœ€è¦ä½¿ç”¨ loader è¿›è¡Œè½¬æ¢ã€‚<br><a id="more"></a></p></blockquote><p>å¦‚æœæˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®ä¸­åŠ å…¥äº†jpgæ–‡ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> avatar <span class="keyword">from</span> <span class="string">&#x27;./avatar.jpg&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = avatar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>);</span><br><span class="line">root.append(img);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ç„¶åä½¿ç”¨yarn run buildä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821141553.png"                      alt=""                ></p><p>ç¼–è¯‘å¤±è´¥å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½è¯†åˆ«jpgå›¾ç‰‡ï¼›</p><p>æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸Š<code>loader</code>äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ loader ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè§£æå™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹(jsx vue css es6â€¦)è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚</p><p>å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ loader æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>module.rules</code> å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ Babel æ¥å¤„ç† .js æ–‡ä»¶</p><h2 id="é¦–å…ˆå®‰è£…"><a href="#é¦–å…ˆå®‰è£…" class="headerlink" title="é¦–å…ˆå®‰è£…"></a>é¦–å…ˆå®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader style-loader</span><br></pre></td></tr></table></figure><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.jsx?/</span>, <span class="comment">// åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€</span></span><br><span class="line">      include: [</span><br><span class="line">        path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>) <span class="comment">// æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç†</span></span><br><span class="line">      ],</span><br><span class="line">      use: <span class="string">&#x27;babel-loader&#x27;</span>, <span class="comment">// æŒ‡å®šä½¿ç”¨çš„ loader</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">    test: <span class="regexp">/\.jpg$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">    loader: <span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">    &#125; </span><br><span class="line">     &#125;</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>rules</td><td>è§„åˆ™ï¼ˆæ•°ç»„ï¼‰</td></tr><tr><td>test</td><td>è¡¨ç¤ºæ–‡ä»¶åç¼€ï¼ˆæ­£åˆ™ï¼‰</td></tr><tr><td>include</td><td>åŒ…å«ï¼ˆæ•°ç»„ï¼‰æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹æ‰å¤„ç†</td></tr><tr><td>use</td><td>æŒ‡å®šç”¨ä»€ä¹ˆloaderè§£æå™¨ï¼ˆå¯ä»¥æ•°ç»„ï¼‰</td></tr></tbody></table><p>ç°åœ¨æ‰“åŒ…å°±æ²¡æœ‰é—®é¢˜äº†</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821135201.png"                      alt=""                ></p><h2 id="loaderè¿›é˜¶"><a href="#loaderè¿›é˜¶" class="headerlink" title="loaderè¿›é˜¶"></a>loaderè¿›é˜¶</h2><h4 id="jpg-lesså¤„ç†"><a href="#jpg-lesså¤„ç†" class="headerlink" title="jpg lesså¤„ç†"></a>jpg lesså¤„ç†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [&#123; </span><br><span class="line">test: <span class="regexp">/\.js$/</span>, </span><br><span class="line">exclude: <span class="regexp">/node_modules/</span>, <span class="comment">//æ’é™¤æŸä¸ªæ–‡ä»¶</span></span><br><span class="line">loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.(jpg|png|gif)$/</span>,</span><br><span class="line">use: &#123;</span><br><span class="line">loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">name: <span class="string">&#x27;[name]_[hash].[ext]&#x27;</span>,</span><br><span class="line">outputPath: <span class="string">&#x27;images/&#x27;</span>,</span><br><span class="line">limit: <span class="number">10240</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.(eot|ttf|svg)$/</span>,</span><br><span class="line">use: &#123;</span><br><span class="line">loader: <span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">&#125; </span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">use: [</span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>, </span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">importLoaders: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">use: [</span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>exclude</td><td>æ’é™¤æŸä¸ªæ–‡ä»¶</td></tr><tr><td>importLoaders</td><td>å¦‚æœå¤šå±‚åµŒå¥—å¼•å…¥lessæˆ–sassæ–‡ä»¶</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœindex.jsä¸­</span></span><br><span class="line"><span class="keyword">import</span> less <span class="keyword">from</span> <span class="string">&#x27;index.less&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.less</span></span><br><span class="line"><span class="keyword">import</span> aa <span class="keyword">from</span> <span class="string">&#x27;a.less&#x27;</span></span><br><span class="line">å…¶ä»–æ ·å¼</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨importå¼•å…¥çš„lessæ–‡ä»¶ï¼Œåœ¨å¼•å…¥ä¹‹å‰ä¹Ÿé‡æ–°èµ°postcsså’Œless-loader</p><h4 id="æ ·å¼å†²çª"><a href="#æ ·å¼å†²çª" class="headerlink" title="æ ·å¼å†²çª"></a>æ ·å¼å†²çª</h4><p>å½“ç”²å’Œä¹™éƒ½å¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œéš¾å…ä¼šç¢°åˆ°ç±»ä¼¼ç»„ä»¶èµ·åŒä¸€ä¸ªåå­—çš„æƒ…å†µï¼Œæ¯”å¦‚åˆ—è¡¨ç»„ä»¶ï¼šlistWarpper,è¿™æ ·æ‰“åŒ…åä¼šæœ‰æ ·å¼å†²çªçš„é—®é¢˜ã€‚é‚£ä¹ˆwebpackå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">importLoaders: <span class="number">2</span>,</span><br><span class="line">modules:<span class="literal">true</span>  <span class="comment">//å¼€å¯cssçš„æ¨¡å—åŒ–æ‰“åŒ…</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">      <span class="string">&quot;postcss-loader&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821144346.png"                      alt=""                ></p><p>å½“avatarç”¨style.avataræ¥ä»£æ›¿åï¼Œå†²çªå°±ä¸ä¼šå‘ç”Ÿäº†</p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨</title>
      <link href="2019/06/01/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
      <url>2019/06/01/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰çš„å¯¹äºWebpackçŸ¥è¯†éƒ½å¾ˆé›¶æ•£å¸Œæœ›åšä¸€ä¸ªç³»åˆ—æ¢³ç†å·©å›ºä¸‹çŸ¥è¯†æ¡†æ¶ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹å§ </p></blockquote><a id="more"></a><p>webpackæ˜¯ä¸€ä¸ªå‰ç«¯èµ„æºåŠ è½½/æ‰“åŒ…å·¥å…·ã€‚å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œç„¶åå°†è¿™äº›æ¨¡å—æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æºã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821133645.png"                      alt=""                ></p><h2 id="å®‰è£…å’Œä½¿ç”¨"><a href="#å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨"></a>å®‰è£…å’Œä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -g </span><br><span class="line"></span><br><span class="line"># æˆ–è€…</span><br><span class="line">yarn <span class="built_in">global</span> add webpack webpack-cli</span><br><span class="line"></span><br><span class="line"># ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†</span><br><span class="line">webpack --help</span><br></pre></td></tr></table></figure><p>ç¡®ä¿ä½ çš„é¡¹ç›®ä¸­æœ‰ package.json æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä½¿ç”¨ <code>yarn init -y</code> æ¥åˆ›å»ºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;learncodewebpack&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;webpack&quot;</span>: <span class="string">&quot;^4.34.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;webpack-cli&quot;</span>: <span class="string">&quot;^3.3.4&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å†™ä¸ªæœ€ç®€å•çš„webpack.config.jsé…ç½®æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry:<span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">    output:&#123;</span><br><span class="line">        filename:<span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">        path:path.resolve(__dirname,<span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯´æ˜ä¸‹ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>entry</td><td>å…¥å£æ–‡ä»¶è·¯å¾„</td></tr><tr><td>output</td><td>Object(æ‰“åŒ…åçš„æ–‡ä»¶åï¼Œæ‰“åŒ…åçš„è·¯å¾„)</td></tr></tbody></table><p>ä¹‹åæ‰§è¡Œ npm run build æˆ–è€… yarn build å‘½ä»¤ï¼Œä½ å°±ä¼šå‘ç°æ–°å¢äº†ä¸€ä¸ª dist ç›®å½•ï¼Œé‡Œè¾¹å­˜æ”¾çš„æ˜¯ webpack æ„å»ºå¥½çš„bundle.js æ–‡ä»¶ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821135955.png"                      alt=""                ></p><h4 id="æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­å¢åŠ å‚æ•°"><a href="#æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­å¢åŠ å‚æ•°" class="headerlink" title="æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­å¢åŠ å‚æ•°"></a>æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­å¢åŠ å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode:<span class="string">&quot;development&quot;</span>,  <span class="comment">//å¼€å‘è€…æ¨¡å¼ ä¸ä¼šå‹ç¼©js é»˜è®¤æ˜¯production</span></span><br><span class="line">  entry: <span class="string">&#x27;./src/index.js&#x27;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ å¤šä¸ªå…¥å£æ–‡ä»¶"><a href="#å¢åŠ å¤šä¸ªå…¥å£æ–‡ä»¶" class="headerlink" title="å¢åŠ å¤šä¸ªå…¥å£æ–‡ä»¶"></a>å¢åŠ å¤šä¸ªå…¥å£æ–‡ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    foo: <span class="string">&#x27;./src/page-foo.js&#x27;</span>,</span><br><span class="line">    bar: <span class="string">&#x27;./src/page-bar.js&#x27;</span>, </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…"><a href="#ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…" class="headerlink" title="ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…"></a>ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥ç†è§£ä¸ºå¤šä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œwebpack ä¼šè§£æä¸¤ä¸ªæ–‡ä»¶çš„ä¾èµ–åè¿›è¡Œæ‰“åŒ…</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: [</span><br><span class="line">      <span class="string">&#x27;./src/foo.js&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;./src/bar.js&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Entryä¸Outputçš„è¿›é˜¶"><a href="#Entryä¸Outputçš„è¿›é˜¶" class="headerlink" title="Entryä¸Outputçš„è¿›é˜¶"></a>Entryä¸Outputçš„è¿›é˜¶</h2><ol><li>æˆ‘ä»¬æœ‰éœ€æ±‚æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶éœ€è¦è‡ªå®šä¹‰</li><li>æˆ‘ä»¬æœ‰éœ€æ±‚æ‰“åŒ…å‡ºæ¥å¤šä¸ªæ–‡ä»¶main2.js,main2.js</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">entry:&#123;</span><br><span class="line">    main:<span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    sub:<span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output: &#123;</span><br><span class="line">        publicPathï¼š<span class="string">&quot;https://cdn.xxx.com&quot;</span></span><br><span class="line">filename: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">chunkFilename: <span class="string">&#x27;[name].chunk.js&#x27;</span>,</span><br><span class="line">path: path.resolve(__dirname, <span class="string">&#x27;../dist&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821152937.png"                      alt=""                ></p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>publicPath</td><td>è¿™ä¸ªæ˜¯cdnæŒ‚è½½çš„åŸŸåå¯ä»¥è´Ÿè½½å‡è¡¡</td></tr><tr><td>filename</td><td>[name]æ‰€å¯¹åº”çš„å°±æ˜¯entry[key]å€¼</td></tr><tr><td>chunkFilename</td><td>åŒä¸Š</td></tr></tbody></table><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190821153232.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨ReactHooksä¸­è¯·æ±‚æ•°æ®</title>
      <link href="2019/05/29/ReactHooks%E4%B8%AD%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE/"/>
      <url>2019/05/29/ReactHooks%E4%B8%AD%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>ä¸€èµ·å­¦ä¹ ReactHooks<br><a id="more"></a></p><h2 id="å…ˆè¯´ä¸‹é”™è¯¯ä½¿ç”¨"><a href="#å…ˆè¯´ä¸‹é”™è¯¯ä½¿ç”¨" class="headerlink" title="å…ˆè¯´ä¸‹é”™è¯¯ä½¿ç”¨"></a>å…ˆè¯´ä¸‹é”™è¯¯ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> [data,setData] = useState(&#123;<span class="attr">hits</span>:[]&#125;);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">axiosData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> response  = <span class="keyword">await</span>  axios(<span class="string">&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;</span>+response.data)</span><br><span class="line">       <span class="comment">//æ”¹å˜æ•°æ®</span></span><br><span class="line">      setData(response.data)  <span class="comment">// dataï¼š&#123;hits:[xxxx]&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">     axiosData()</span><br><span class="line">    </span><br><span class="line">  &#125;,[])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;data.hits.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">        &lt;li key=&#123;item.objectID&#125;&gt;</span><br><span class="line">          &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†è¿™æ ·ä¼šæœ‰é—®é¢˜ï¼Œè¯·æ±‚æ¬¡æ•°å¾ªç¯<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529135626.png"                      alt=""                ></p><blockquote><p>å› ä¸ºeffect hookä¸ä»…åœ¨ç»„ä»¶æŒ‚è½½æ˜¯æ‰§è¡Œï¼Œåœ¨ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ‰§è¡Œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ¯ä¸€æ¬¡çš„æ•°æ®è·å–åéƒ½ä¼šé‡æ–°è®¾ç½®çŠ¶æ€ï¼Œè¿™æ—¶å€™ç»„ä»¶updateç„¶åeffect hookå°±ä¼šé‡æ–°è¿è¡Œä¸€éï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸€æ¬¡åˆä¸€æ¬¡çš„è·å–</p></blockquote><p>æˆ‘ä»¬åªæƒ³åœ¨ç»„ä»¶æŒ‚è½½é˜¶æ®µæ—¶è·å–æ•°æ®ã€‚è¿™å°±æ˜¯ä½ è¦ç»™effect hookçš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„çš„åŸå› ï¼Œè¿™æ ·åšå¯ä»¥é¿å…ç»„ä»¶æ›´æ–°é˜¶æ®µæ‰§è¡Œ effect hook ï¼Œä½†æ˜¯ä¾ç„¶ä¼šåœ¨æŒ‚è½½é˜¶æ®µæ‰§è¡Œå®ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> [data,setData] = useState(&#123;<span class="attr">hits</span>:[]&#125;);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">axiosData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> response  = <span class="keyword">await</span>  axios(<span class="string">&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;</span>+response.data)</span><br><span class="line">      <span class="comment">//æ”¹å˜æ•°æ®</span></span><br><span class="line">      setData(response.data)  <span class="comment">// dataï¼š&#123;hits:[xxxx]&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">     axiosData()</span><br><span class="line">  </span><br><span class="line">  &#125;,[])</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529135711.png"                      alt=""                ></p><p>ä½†è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥å®šä¹‰hooksæ‰€ä¾èµ–çš„å…¨éƒ¨å˜é‡ï¼ˆå­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼‰ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ”¹å˜äº†ï¼Œeffect hookå°±ä¼š<code>è¢«æ‰§è¡Œä¸€æ¬¡</code>ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªç©ºæ•°ç»„çš„è¯ï¼Œhookså°†<code>ä¸ä¼š</code>åœ¨ç»„ä»¶æ›´æ–°çš„æ—¶å€™æ‰§è¡Œï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç›‘å¬åˆ°ä»»ä½•çš„å˜é‡ã€‚</p><h2 id="å¦‚ä½•è‡ªåŠ¨è§¦å‘ä¸€ä¸ª-hookï¼Ÿ"><a href="#å¦‚ä½•è‡ªåŠ¨è§¦å‘ä¸€ä¸ª-hookï¼Ÿ" class="headerlink" title="å¦‚ä½•è‡ªåŠ¨è§¦å‘ä¸€ä¸ª hookï¼Ÿ"></a>å¦‚ä½•è‡ªåŠ¨è§¦å‘ä¸€ä¸ª hookï¼Ÿ</h2><p>æˆ‘ä»¬åœ¨ç»„ä»¶æŒ‚è½½åè·å–äº†ä¸€æ¬¡æ•°æ®ã€‚ä½†æ˜¯å¦‚ä½•ä½¿ç”¨è¾“å…¥å­—æ®µå‘Šè¯‰APIæˆ‘ä»¬æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Ÿâ€œReduxâ€åšä¸ºé»˜è®¤æŸ¥è¯¢ã€‚ä½†æ˜¯å¦‚æœæƒ³è¦æŸ¥è¯¢å…³äºâ€œReactâ€çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªinputå…ƒç´ ï¼Œå¯ä»¥è·å¾—â€œReduxâ€ä¹‹å¤–çš„è¯é¢˜ã€‚å› æ­¤ï¼Œå°±è¦ä¸ºinputå…ƒç´ å¼•å…¥ä¸€ä¸ªæ–°çš„stateã€‚</p><p>äºŒæ­¥æ“ä½œï¼š<br>1.è¾“å…¥æ¡†è¾“å…¥çš„å€¼åŠ¨æ€æ”¹å˜ä¼ å…¥axiosè¯·æ±‚ä¸­<br>2.å½“ä½ åœ¨inputä¸­è¾“å…¥ä¸€äº›å†…å®¹æ—¶ï¼Œåœ¨æŒ‚è½½åå°±ä¸ä¼šå†è·å–ä»»ä½•æ•°æ®äº†ï¼Œå› ä¸ºæˆ‘ä»¬æä¾›äº†[]ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç°åœ¨çš„effectåº”è¯¥ä¾èµ–queryï¼Œæ¯å½“queryæ”¹å˜çš„æ—¶å€™ï¼Œå°±åº”è¯¥é‡æ–°è·å–æ•°æ®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> [data,setData] = useState(&#123;<span class="attr">hits</span>:[]&#125;);</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">axiosData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(query)</span><br><span class="line">      <span class="keyword">const</span> response  = <span class="keyword">await</span>  axios(<span class="string">`http://hn.algolia.com/api/v1/search?query=<span class="subst">$&#123;query&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;</span>+response.data)</span><br><span class="line">      setData(response.data)  <span class="comment">// dataï¼š&#123;hits:[xxxx]&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">     axiosData()</span><br><span class="line"></span><br><span class="line">     <span class="comment">//æ”¹å˜æ•°æ®</span></span><br><span class="line">  &#125;,[query])</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//html</span></span><br><span class="line">   &lt;input</span><br><span class="line">        type=<span class="string">&quot;text&quot;</span></span><br><span class="line">        value=&#123;query&#125;</span><br><span class="line">        onChange=&#123;<span class="function"><span class="params">event</span> =&gt;</span> setQuery(event.target.value)&#125;</span><br><span class="line">   /&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529141249.png"                      alt=""                ></p><h3 id="å¦‚ä½•æ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Ÿ"><a href="#å¦‚ä½•æ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Ÿ"></a>å¦‚ä½•æ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Ÿ</h3><p>ç°åœ¨inputçš„å€¼æ”¹å˜å°±ä¼šé‡æ–°è·å–æ•°æ®ã€‚ä½†æ˜¯åˆå‡ºç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ–°å­—ç¬¦ï¼Œå°±ä¼šè§¦å‘ effect è¿›è¡Œä¸€æ¬¡æ–°çš„è¯·æ±‚ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æä¾›ä¸€ä¸ªæŒ‰é’®æ¥æ‰‹åŠ¨è§¦å‘æ•°æ®è¯·æ±‚å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> [data,setData] = useState(&#123;<span class="attr">hits</span>:[]&#125;);</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [search, setSearch] = useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">axiosData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> response  = <span class="keyword">await</span>  axios(<span class="string">`http://hn.algolia.com/api/v1/search?query=<span class="subst">$&#123;query&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;</span>+response.data)</span><br><span class="line">      setData(response.data)  <span class="comment">// dataï¼š&#123;hits:[xxxx]&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">     axiosData()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;search&#x27;</span>,search)</span><br><span class="line">     <span class="comment">//æ”¹å˜æ•°æ®</span></span><br><span class="line">  &#125;,[search])</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">//html</span></span><br><span class="line">   &lt;button type=<span class="string">&quot;button&quot;</span> onClick=&#123;<span class="function">() =&gt;</span> setSearch(query)&#125;&gt;</span><br><span class="line">        Search</span><br><span class="line">   &lt;/button&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529141842.png"                      alt=""                ></p><h3 id="React-Hooksä¸­çš„loading"><a href="#React-Hooksä¸­çš„loading" class="headerlink" title="React Hooksä¸­çš„loading"></a>React Hooksä¸­çš„loading</h3><p>ä¸€æ—¦è°ƒç”¨äº†effectè·å–äº†æ•°æ®ï¼Œï¼ˆåœ¨ç»„ä»¶æŒ‚è½½é˜¶æ®µæˆ–URLçŠ¶æ€æ›´æ”¹æ—¶å‘ç”Ÿï¼‰ï¼Œåˆ™åŠ è½½çŠ¶æ€è®¾ç½®ä¸ºtrueã€‚è¯·æ±‚å®Œæˆåï¼ŒåŠ è½½çŠ¶æ€å†æ¬¡è®¾ç½®ä¸ºfalseã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Fragment, useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState(&#123; <span class="attr">hits</span>: [] &#125;);</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [url, setUrl] = useState(</span><br><span class="line">    <span class="string">&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> [isLoading, setIsLoading] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fetchData = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="comment">//loadingæ˜¾ç¤º</span></span><br><span class="line">      setIsLoading(<span class="literal">true</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> axios(url);</span><br><span class="line"> </span><br><span class="line">      setData(result.data);</span><br><span class="line">      <span class="comment">//loaddingéšè—</span></span><br><span class="line">      setIsLoading(<span class="literal">false</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    fetchData();</span><br><span class="line">  &#125;, [url]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Fragment&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">&quot;text&quot;</span></span><br><span class="line">        value=&#123;query&#125;</span><br><span class="line">        onChange=&#123;<span class="function"><span class="params">event</span> =&gt;</span> setQuery(event.target.value)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        type=<span class="string">&quot;button&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span></span><br><span class="line">          setUrl(<span class="string">`http://hn.algolia.com/api/v1/search?query=<span class="subst">$&#123;query&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &gt;</span><br><span class="line">        Search</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &#123;isLoading ? (</span><br><span class="line">        &lt;div&gt;Loading ...&lt;/div&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;data.hits.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">            &lt;li key=&#123;item.objectID&#125;&gt;</span><br><span class="line">              &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure></p><h3 id="React-Hooksä¸­çš„é”™è¯¯å¤„ç†"><a href="#React-Hooksä¸­çš„é”™è¯¯å¤„ç†" class="headerlink" title="React Hooksä¸­çš„é”™è¯¯å¤„ç†"></a>React Hooksä¸­çš„é”™è¯¯å¤„ç†</h3><p>ä½¿ç”¨async/awaitæ—¶ï¼Œé€šå¸¸ä½¿ç”¨try/catchå—è¿›è¡Œé”™è¯¯å¤„ç†ã€‚ä½ å¯ä»¥åœ¨effectå†…åšåˆ°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState(&#123; <span class="attr">hits</span>: [] &#125;);</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [url, setUrl] = useState(</span><br><span class="line">    <span class="string">&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> [isLoading, setIsLoading] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [isError, setIsError] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fetchData = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      setIsError(<span class="literal">false</span>);</span><br><span class="line">      setIsLoading(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> axios(url);</span><br><span class="line"></span><br><span class="line">        setData(result.data);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        setIsError(<span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      setIsLoading(<span class="literal">false</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    fetchData();</span><br><span class="line">  &#125;, [url]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Fragment&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">&quot;text&quot;</span></span><br><span class="line">        value=&#123;query&#125;</span><br><span class="line">        onChange=&#123;<span class="function"><span class="params">event</span> =&gt;</span> setQuery(event.target.value)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        type=<span class="string">&quot;button&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span></span><br><span class="line">          setUrl(<span class="string">`http://hn.algolia.com/api/v2/search?query=<span class="subst">$&#123;query&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &gt;</span><br><span class="line">        Search</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &#123;isError &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Something went wrong ...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line"></span><br><span class="line">      &#123;isLoading ? (</span><br><span class="line">        &lt;div&gt;Loading ...&lt;/div&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;data.hits.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">            &lt;li key=&#123;item.objectID&#125;&gt;</span><br><span class="line">              &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529143540.png"                      alt=""                ></p><h3 id="è‡ªå®šä¹‰-hook-è·å–æ•°æ®"><a href="#è‡ªå®šä¹‰-hook-è·å–æ•°æ®" class="headerlink" title="è‡ªå®šä¹‰ hook è·å–æ•°æ®"></a>è‡ªå®šä¹‰ hook è·å–æ•°æ®</h3><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„hookï¼Œæå–å‡ºæ‰€æœ‰ä¸æ•°æ®è¯·æ±‚ç›¸å…³çš„ä¸œè¥¿ï¼Œé™¤äº†è¾“å…¥æ¡†çš„ <code>query</code> <code>state</code>ï¼Œä»¥åŠ <code>Loading çŠ¶æ€</code>ã€<code>é”™è¯¯å¤„ç†</code>ã€‚è¿˜è¦ç¡®ä¿è¿”å›ç»„ä»¶ä¸­éœ€è¦ç”¨åˆ°çš„å˜é‡ã€‚</p><p>ç†æƒ³ä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; data, isLoading, isError, doFetch &#125; = useHackerNewsApi();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Fragment&gt;</span><br><span class="line">      ...</span><br><span class="line">    &lt;/Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å°è£…useHackerNewsApi</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userHackerNewsApi = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState(&#123; <span class="attr">hits</span>: [] &#125;);</span><br><span class="line">  <span class="keyword">const</span> [url, setUrl] = useState(</span><br><span class="line">    <span class="string">&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> [isLoading, setIsLoading] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [isError, setIsError] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> fetchData = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      setIsError(<span class="literal">false</span>);</span><br><span class="line">      setIsLoading(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> axios(url);</span><br><span class="line"></span><br><span class="line">        setData(result.data);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        setIsError(<span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      setIsLoading(<span class="literal">false</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒç”¨è¯·æ±‚</span></span><br><span class="line">    fetchData()</span><br><span class="line">  &#125;,[url])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> doFetch = <span class="function">(<span class="params">url</span>)=&gt;</span>&#123;</span><br><span class="line">     setUrl(url)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;data,isLoading,isError,doFetch&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…³äºæ•°æ®è·å–çš„-Reducer-Hook"><a href="#å…³äºæ•°æ®è·å–çš„-Reducer-Hook" class="headerlink" title="å…³äºæ•°æ®è·å–çš„ Reducer Hook"></a>å…³äºæ•°æ®è·å–çš„ Reducer Hook</h3><p>è®©æˆ‘ä»¬ç”¨reduceæŠŠä¸€äº›çŠ¶æ€è°ƒç”¨è¿æ¥èµ·æ¥ä½¿ç”¨</p><blockquote><p>Reducer Hook è¿”å›ä¸€ä¸ª state å¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼ˆç”¨æ¥æ”¹å˜ state å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªå‡½æ•°è¢«ç§°ä¸ºåˆ†å‘å‡½æ•°ï¼ˆdispatch functionï¼‰ï¼Œå®ƒåˆ†å‘ä¸€ä¸ª actionï¼Œaction å…·æœ‰ type å’Œ payload ä¸¤ä¸ªå±æ€§ã€‚æ‰€æœ‰çš„è¿™äº›ä¿¡æ¯éƒ½åœ¨ reducer å‡½æ•°ä¸­è¢«æ¥æ”¶ï¼Œæ ¹æ®ä¹‹å‰çš„çŠ¶æ€æå–ä¸€ä¸ªæ–°çš„çŠ¶æ€</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">&#x27;redux&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [&#123; data, isLoading, isError &#125;, doFetch] = useDataApi(</span><br><span class="line">    <span class="string">`http://hn.algolia.com/api/v1/search?query=redux`</span>,</span><br><span class="line">    &#123; <span class="attr">hits</span>: [] &#125;,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Fragment&gt;</span><br><span class="line">      &lt;form</span><br><span class="line">        onSubmit=&#123;<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">          doFetch(</span><br><span class="line">            <span class="string">`http://hn.algolia.com/api/v1/search?query=<span class="subst">$&#123;query&#125;</span>`</span>,</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">          event.preventDefault();</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">&quot;text&quot;</span></span><br><span class="line">          value=&#123;query&#125;</span><br><span class="line">          onChange=&#123;<span class="function"><span class="params">event</span> =&gt;</span> setQuery(event.target.value)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Search&lt;/button&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">      &#123;isError &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Something went wrong ...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line"></span><br><span class="line">      &#123;isLoading ? (</span><br><span class="line">        &lt;div&gt;Loading ...&lt;/div&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;data.hits.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">            &lt;li key=&#123;item.objectID&#125;&gt;</span><br><span class="line">              &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><h4 id="å¦‚ä½•è®¾è®¡useDataApi"><a href="#å¦‚ä½•è®¾è®¡useDataApi" class="headerlink" title="å¦‚ä½•è®¾è®¡useDataApi"></a>å¦‚ä½•è®¾è®¡useDataApi</h4><p>ç°åœ¨ï¼Œåœ¨è·å–æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ dispatch å‡½æ•°å‘ reducer å‡½æ•°å‘é€ä¿¡æ¯ã€‚ä½¿ç”¨ dispatch å‡½æ•°å‘é€çš„å¯¹è±¡å…·æœ‰ä¸€ä¸ªå¿…å¡«çš„ type å±æ€§å’Œä¸€ä¸ªå¯é€‰çš„ payload å±æ€§ã€‚type å±æ€§å‘Šè¯‰ reducer å‡½æ•°éœ€è¦è½¬æ¢çš„ state æ˜¯å“ªä¸ªï¼Œè¿˜å¯ä»¥ä» payload ä¸­æå–æ–°çš„ stateã€‚åœ¨è¿™é‡Œåªæœ‰ä¸‰ä¸ªçŠ¶æ€è½¬æ¢ï¼šåˆå§‹åŒ–æ•°æ®è¿‡ç¨‹ï¼Œé€šçŸ¥æ•°æ®è¯·æ±‚æˆåŠŸçš„ç»“æœï¼Œä»¥åŠé€šçŸ¥æ•°æ®è¯·æ±‚å¤±è´¥çš„ç»“æœã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useDataApi = <span class="function">(<span class="params">initialUrl,initialData</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">const</span> [url,setUrl] = useState(initialUrl);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> [state,dispatch] = useReducer(dataFetchReducer,&#123;</span><br><span class="line">         isLoading:<span class="literal">false</span>,</span><br><span class="line">         isError:<span class="literal">false</span>,</span><br><span class="line">         data:initialData,</span><br><span class="line">     &#125;)</span><br><span class="line"></span><br><span class="line">     useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> fetchData = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">           dispatch(&#123;<span class="attr">type</span>:<span class="string">&quot;FETCH_INIT&quot;</span>&#125;)</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="keyword">const</span> result = <span class="keyword">await</span>  axios(url);</span><br><span class="line">             dispatch(&#123;<span class="attr">type</span>:<span class="string">&quot;FETCH_SUCCESS&quot;</span>,<span class="attr">payload</span>:result.data&#125;)</span><br><span class="line">           &#125;<span class="keyword">catch</span> (e) &#123;</span><br><span class="line">             dispatch(&#123;<span class="attr">type</span>:<span class="string">&quot;FETCH_FAILURE&quot;</span>,<span class="attr">payload</span>:e&#125;)</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       fetchData();</span><br><span class="line"></span><br><span class="line">     &#125;,[url])</span><br><span class="line">      <span class="comment">//åªè¿”å›stateä¸­åŒ…å«data isloading /  setUrl</span></span><br><span class="line">     <span class="keyword">return</span> [state, setUrl];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="reducerå‡½æ•°çš„å®ç°"><a href="#reducerå‡½æ•°çš„å®ç°" class="headerlink" title="reducerå‡½æ•°çš„å®ç°"></a>reducerå‡½æ•°çš„å®ç°</h4><p>å®ƒéœ€è¦å¤„ç†ä¸‰ä¸ªä¸åŒçš„çŠ¶æ€è½¬æ¢ï¼Œç§°ä¸ºFETCH_INITï¼ŒFETCH_SUCCESSå’ŒFETCH_FAILUREã€‚æ¯ä¸ªçŠ¶æ€è½¬æ¢éƒ½éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dataFetchReducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;FETCH_INIT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">isLoading</span>: <span class="literal">true</span>, <span class="attr">isError</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;FETCH_SUCCESS&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        isLoading: <span class="literal">false</span>,</span><br><span class="line">        isError: <span class="literal">false</span>,</span><br><span class="line">        data: action.payload,</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;FETCH_FAILURE&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        isLoading: <span class="literal">false</span>,</span><br><span class="line">        isError: <span class="literal">true</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="åœ¨-Hook-ä¸­ä¸­æ–­æ•°æ®è¯·æ±‚"><a href="#åœ¨-Hook-ä¸­ä¸­æ–­æ•°æ®è¯·æ±‚" class="headerlink" title="åœ¨ Hook ä¸­ä¸­æ–­æ•°æ®è¯·æ±‚"></a>åœ¨ Hook ä¸­ä¸­æ–­æ•°æ®è¯·æ±‚</h3><p>ä¸‹æ¬¡å†æ›´æ–°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒ<br><a class="link"   href="https://www.robinwieruch.de/react-hooks-fetch-data/" >Robin Wieruch<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—Fiber</title>
      <link href="2019/05/03/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97Fiber/"/>
      <url>2019/05/03/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97Fiber/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯fiber"><a href="#ä»€ä¹ˆæ˜¯fiber" class="headerlink" title="ä»€ä¹ˆæ˜¯fiber"></a>ä»€ä¹ˆæ˜¯fiber</h3><p>æ‰€è°“fiberï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªreactä¸­çš„æ¶æ„ï¼Œä¸€ä¸ª fiber å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªworkå•ä½ï¼Œ<br>æ¯ä¸€ä¸ªReactElementéƒ½ä¼šå¯¹åº”ä¸€ä¸ªFiberå¯¹è±¡<br>è®°å½•å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ ï¼ˆprops  stateï¼‰é€šè¿‡fiber è®©èŠ‚ç‚¹è·å–å±æ€§å€¼<br>ä¸²è”æ•´ä¸ªåº”ç”¨çš„æ ‘ç»“æ„<br><a id="more"></a></p><blockquote><p>æœ€è¿‘æ›´æ–°2019å¹´6æœˆ14æ—¥</p></blockquote><h3 id="ä¸15çš„å˜åŒ–"><a href="#ä¸15çš„å˜åŒ–" class="headerlink" title="ä¸15çš„å˜åŒ–"></a>ä¸15çš„å˜åŒ–</h3><p>ä»15åˆ°16ï¼Œæºç ç»“æ„å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼š<br>å†ä¹Ÿçœ‹ä¸åˆ°mountComponent/updateComponent()äº†ï¼Œè¢«æ‹†åˆ†é‡ç»„æˆäº†ï¼ˆbeginWork/completeWork/commitWork()ï¼‰<br>ReactDOMComponentä¹Ÿè¢«å»æ‰äº†ï¼Œåœ¨Fiberä½“ç³»ä¸‹DOMèŠ‚ç‚¹æŠ½è±¡ç”¨<code>ReactDOMFiberComponent</code>è¡¨ç¤ºï¼Œç»„ä»¶ç”¨<code>ReactFiberClassComponent</code>è¡¨ç¤ºï¼Œä¹‹å‰æ˜¯<code>ReactCompositeComponent</code></p><p>Fiberä½“ç³»çš„æ ¸å¿ƒæœºåˆ¶æ˜¯è´Ÿè´£ä»»åŠ¡è°ƒåº¦çš„<code>ReactFiberScheduler</code>ï¼Œç›¸å½“äºä¹‹å‰çš„ReactReconciler</p><p>vDOM treeå˜æˆfiber treeäº†ï¼Œä»¥å‰æ˜¯è‡ªä¸Šè€Œä¸‹çš„ç®€å•æ ‘ç»“æ„ï¼Œç°åœ¨æ˜¯åŸºäºå•é“¾è¡¨çš„æ ‘ç»“æ„ï¼Œç»´æŠ¤çš„èŠ‚ç‚¹å…³ç³»æ›´å¤šä¸€äº›</p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><p>ä¼˜åŒ–æ¸²æŸ“ä»»åŠ¡ï¼Œè®©ä¸€ä¸ªå¤§ç»„ä»¶ç»†åŒ–ï¼Œä»åŒæ­¥å˜æˆå¼‚æ­¥ï¼Œè®©æ¸²æŸ“ä»»åŠ¡æœ‰äº†ä¼˜å…ˆçº§ã€‚ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒç”¨ä¸å†æ˜¯åŒæ­¥çš„ï¼Œè®©ç”¨æˆ·èƒ½æ„ŸçŸ¥çš„æ€§èƒ½æé«˜äº†ã€‚<br>fiberå¯ä»¥æŠŠå¾ˆå¤§çš„å·¥ä½œåˆ†æˆä¸€ä¸ªä¸ªå°å—ï¼ˆ<code>trunk</code>ï¼‰ï¼Œtrunkä¹‹é—´æ˜¯å¼‚æ­¥çš„ï¼Œæ¯ä¸ªtrunkä¹‹é—´å¯ä»¥æ‰§è¡Œåˆ«çš„æ“ä½œã€‚<br>ä»¥renderå‡½æ•°ä¸ºç•Œï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨renderä¹‹å‰æ”¹å˜ workInProgress treeï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¯”å¦‚<code>componentWillMount</code>ï¼Œ<code>componentWillReceiveProp</code>ã€‚åœ¨renderå‡½æ•°ä¹‹åï¼Œæ‰§è¡Œ<code>componentDidMount</code>ï¼Œ <code>componentDidUpdate</code>ã€‚åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œå¯èƒ½è¢«ä¸­æ–­ã€‚</p><h3 id="fiber-treeæ¥å¼ å›¾æ„Ÿå—ä¸€ä¸‹"><a href="#fiber-treeæ¥å¼ å›¾æ„Ÿå—ä¸€ä¸‹" class="headerlink" title="fiber treeæ¥å¼ å›¾æ„Ÿå—ä¸€ä¸‹"></a>fiber treeæ¥å¼ å›¾æ„Ÿå—ä¸€ä¸‹</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190614102044.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509010801.png"                      alt=""                ></p><p>å‚è€ƒï¼š<br><a class="link"   href="http://www.ayqy.net/blog/dive-into-react-fiber/" >å®Œå…¨ç†è§£React Fiber<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—_ReactDom.render || hydrate</title>
      <link href="2019/04/27/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactDom.render%20%7C%7C%20hydrate/"/>
      <url>2019/04/27/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactDom.render%20%7C%7C%20hydrate/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸€ç« é‡ç‚¹åˆ†æåˆ›å»ºåŠæ›´æ–°çš„è¿‡ç¨‹ï¼›<br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190505234453.png"                      alt=""                ><br>reactæ›´æ–°çš„æ–¹æ³•<br>ReactDom.render  å®¢æˆ·ç«¯<br>hydrate  åˆæ¬¡æ¸²æŸ“ æœåŠ¡ç«¯<br>setState ç”¨äºè®¾ç½®çŠ¶æ€å¯¹è±¡<br>forceUpdate å¼ºåˆ¶æ›´æ–°<br>replaceState()æ–¹æ³•ä¸setState()ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•åªä¼šä¿ç•™nextStateä¸­çŠ¶æ€ï¼ŒåŸstateä¸åœ¨nextStateä¸­çš„çŠ¶æ€éƒ½ä¼šè¢«åˆ é™¤ã€‚ï¼ˆå°†åœ¨ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬ä¸­åºŸé™¤ï¼‰<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190506181937.png"                      alt=""                ></p><h1 id="åˆ›å»ºrednerå¯¹è±¡"><a href="#åˆ›å»ºrednerå¯¹è±¡" class="headerlink" title="åˆ›å»ºrednerå¯¹è±¡"></a>åˆ›å»ºrednerå¯¹è±¡</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM = &#123;</span><br><span class="line">  render(</span><br><span class="line">    element: React$Element&lt;<span class="built_in">any</span>&gt;,<span class="comment">//èŠ‚ç‚¹å…ƒç´  react.createElementåè¿”å›çš„å¯¹è±¡</span></span><br><span class="line">    container: DOMContainer, <span class="comment">//containerå°±æ˜¯æˆ‘ä»¬éœ€è¦æ¸²æŸ“åˆ°çš„å…ƒç´ </span></span><br><span class="line">    callback: ?<span class="built_in">Function</span>,<span class="comment">//å›è°ƒ</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> legacyRenderSubtreeIntoContainer(</span><br><span class="line">      <span class="literal">null</span>,</span><br><span class="line">      element,</span><br><span class="line">      container,</span><br><span class="line">      <span class="literal">false</span>,</span><br><span class="line">      callback,</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è°ƒç”¨æ–¹æ³•<br>legacyRenderSubtreeIntoContainer<br>å‚æ•° ï¼š<br>  parentComponent: ?React$Component&lt;any, any&gt;,<br>  children: ReactNodeList,<br>  container: DOMContainer,<br>  forceHydrate: boolean,<br>  callback: ?Function,</p><p>å…¶ä¸­ç¬¬ä¸€æ¬¡åŠ è½½ root == null;<br><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> root: <span class="type">Root</span> = (container._reactRootContainer: <span class="built_in">any</span>);</span><br></pre></td></tr></table></figure><br>æ¥ç€çœ‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">legacyRenderSubtreeIntoContainer</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  parentComponent: ?React$Component&lt;any, any&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  children: ReactNodeList,</span></span></span><br><span class="line"><span class="function"><span class="params">  container: DOMContainer,</span></span></span><br><span class="line"><span class="function"><span class="params">  forceHydrate: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?<span class="built_in">Function</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// åˆ›å»ºäº†rootå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> root: Root = (container._reactRootContainer: any)</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æŒ‚è½½</span></span><br><span class="line">    root = container._reactRootContainer = legacyCreateRootFromDOMContainer(</span><br><span class="line">      container,</span><br><span class="line">      forceHydrate,</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰callback</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> originalCallback = callback</span><br><span class="line">      callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> instance = DOMRenderer.getPublicRootInstance(root._internalRoot)</span><br><span class="line">        originalCallback.call(instance)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰¹é‡æ›´æ–°æ“ä½œ</span></span><br><span class="line">    DOMRenderer.unbatchedUpdates(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (parentComponent != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸€èˆ¬ä¸ä¼šå‡ºç°</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        root.render(children, callback)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æœ‰rootçš„æƒ…å†µ</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> DOMRenderer.getPublicRootInstance(root._internalRoot)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509123221.png"                      alt=""                ></p><p>legacyCreateRootFromDOMContainer<br>renderä¸hydrateçš„åŒºåˆ«åœ¨äºè¿”å›ç¬¬å››ä¸ªå‚æ•°trueå’Œfalseã€‚<br>æ˜¯å¦ä¼šè°ƒå’ŒåŸæ¥å­˜åœ¨äºcontaineré‡Œé¢çš„htmlèŠ‚ç‚¹ï¼Œæ˜¯å¦è¦å¤ç”¨è¿™äº›èŠ‚ç‚¹ï¼Œ<br>hydrateåŸºæœ¬ç”¨äºæœåŠ¡ç«¯æ¸²æŸ“<br>å› ä¸ºæœåŠ¡ç«¯ç¬¬ä¸€æ¬¡æ¸²æŸ“å’Œå®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡æ¸²æŸ“èŠ‚ç‚¹ç»“æ„åº”è¯¥æ˜¯ä¸€è‡´çš„å¦‚æœå¯ä»¥å¤ç”¨å°±å¯ä»¥èŠ‚çœä¸€å®šçš„æ€§èƒ½<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">hydrate(</span><br><span class="line">   element: React$Node, </span><br><span class="line">   container: DOMContainer, </span><br><span class="line">   callback: ?<span class="built_in">Function</span>) &#123;</span><br><span class="line">   <span class="comment">// <span class="doctag">TODO:</span> throw or warn if we couldn&#x27;t hydrate?</span></span><br><span class="line">   <span class="keyword">return</span> legacyRenderSubtreeIntoContainer(</span><br><span class="line">     <span class="literal">null</span>,</span><br><span class="line">     element,</span><br><span class="line">     container,</span><br><span class="line">     <span class="literal">true</span>,</span><br><span class="line">     callback,</span><br><span class="line">   );</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> render(</span><br><span class="line">   element: React$Element&lt;any&gt;,</span><br><span class="line">   container: DOMContainer,</span><br><span class="line">   callback: ?<span class="built_in">Function</span>,</span><br><span class="line"> ) &#123;</span><br><span class="line">   <span class="keyword">return</span> legacyRenderSubtreeIntoContainer(</span><br><span class="line">     <span class="literal">null</span>,</span><br><span class="line">     element,</span><br><span class="line">     container,</span><br><span class="line">     <span class="literal">false</span>,</span><br><span class="line">     callback,</span><br><span class="line">   );</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><br>shouldHydrateDueToLegacyHeuristic<br>getReactRootElementInContainer æ–¹æ³•é‡Œåˆ¤æ–­æˆ‘ä»¬çš„èŠ‚ç‚¹ä¸‹æœ‰æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­èŠ‚ç‚¹è°ƒå’ŒåŸæ¥çš„å­èŠ‚ç‚¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shouldHydrateDueToLegacyHeuristic</span>(<span class="params">container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> rootElement = getReactRootElementInContainer(container);</span><br><span class="line">  <span class="keyword">return</span> !!(</span><br><span class="line">    rootElement &amp;&amp;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æœ‰è¿™ä¸ªèŠ‚ç‚¹å’Œå±æ€§</span></span><br><span class="line">    rootElement.nodeType === ELEMENT_NODE &amp;&amp;</span><br><span class="line">    rootElement.hasAttribute(ROOT_ATTRIBUTE_NAME) <span class="comment">//æ ‡è¯†æœ‰æœåŠ¡ç«¯æ¸²æŸ“</span></span><br><span class="line">    <span class="comment">//åˆå¹¶çš„è¿‡ç¨‹</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">legacyCreateRootFromDOMContainer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">...</span><br><span class="line">  <span class="keyword">const</span> isConcurrent = <span class="literal">false</span>;</span><br><span class="line">  åˆ›å»ºå®ŒFiberRootåç›´æ¥<span class="keyword">return</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ReactRoot(container, isConcurrent, shouldHydrate);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºFiberRoot"><a href="#åˆ›å»ºFiberRoot" class="headerlink" title="åˆ›å»ºFiberRoot"></a>åˆ›å»ºFiberRoot</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ReactRoot</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  container: Container,</span></span></span><br><span class="line"><span class="function"><span class="params">  isConcurrent: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrate: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//ä¼ å…¥domèŠ‚ç‚¹ åˆ›å»ºFiberRoot</span></span><br><span class="line">  <span class="keyword">const</span> root = DOMRenderer.createContainer(container, isConcurrent, hydrate);</span><br><span class="line">  <span class="comment">//å†è¿›è¡Œèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</span></span><br><span class="line">  <span class="built_in">this</span>._internalRoot = roo</span><br><span class="line">  t;</span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createContainer</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  containerInfo: Container,</span></span></span><br><span class="line"><span class="function"><span class="params">  isConcurrent: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrate: boolean,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">OpaqueRoot</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> createFiberRoot(containerInfo, isConcurrent, hydrate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºReactRootå¯¹è±¡"><a href="#åˆ›å»ºReactRootå¯¹è±¡" class="headerlink" title="åˆ›å»ºReactRootå¯¹è±¡"></a>åˆ›å»ºReactRootå¯¹è±¡</h1><p>çœ‹ä¸‹ReactRootä¸­çš„renderæ–¹æ³•<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ReactRoot</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  container: Container,</span></span></span><br><span class="line"><span class="function"><span class="params">  isConcurrent: <span class="built_in">boolean</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrate: <span class="built_in">boolean</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//ä¼ å…¥domèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> root = DOMRenderer.createContainer(container, isConcurrent, hydrate);</span><br><span class="line">  <span class="built_in">this</span>._internalRoot = root;</span><br><span class="line">&#125;</span><br><span class="line">ReactRoot.prototype.render = <span class="function"><span class="keyword">function</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  children: ReactNodeList,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?() =&gt; mixed,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">Work</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> root = <span class="built_in">this</span>._internalRoot;</span><br><span class="line">  <span class="keyword">const</span> work = <span class="keyword">new</span> ReactWork();</span><br><span class="line">  callback = callback === <span class="literal">undefined</span> ? <span class="literal">null</span> : callback;</span><br><span class="line">  <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">    warnOnInvalidCallback(callback, <span class="string">&#x27;render&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (callback !== <span class="literal">null</span>) &#123;</span><br><span class="line">    work.then(callback);</span><br><span class="line">  &#125;</span><br><span class="line">  DOMRenderer.updateContainer(children, root, <span class="literal">null</span>, work._onCommit);</span><br><span class="line">  <span class="keyword">return</span> work;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>è°ƒç”¨updateContainer</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateContainer</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  element: ReactNodeList,</span></span></span><br><span class="line"><span class="function"><span class="params">  container: OpaqueRoot,</span></span></span><br><span class="line"><span class="function"><span class="params">  parentComponent: ?React$Component&lt;any, any&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?<span class="built_in">Function</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">ExpirationTime</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> current = container.current;</span><br><span class="line">  <span class="keyword">const</span> currentTime = requestCurrentTime();</span><br><span class="line">  <span class="comment">//computeExpirationForFiberæ˜¯react16ä¹‹åè®©æˆ‘ä»¬ä½¿ç”¨ä»»åŠ¡æ›´æ–°ä¼˜å…ˆçº§è®¡ç®—æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> expirationTime = computeExpirationForFiber(currentTime, current);</span><br><span class="line">  <span class="keyword">return</span> updateContainerAtExpirationTime(</span><br><span class="line">    element,    <span class="comment">//åº”ç”¨å®é™…çš„èŠ‚ç‚¹ App</span></span><br><span class="line">    container,  <span class="comment">//domèŠ‚ç‚¹  å¯¹åº”çš„root</span></span><br><span class="line">    parentComponent,   <span class="comment">// null</span></span><br><span class="line">    expirationTime,</span><br><span class="line">    callback,       <span class="comment">//work._onCommit</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509130338.png"                      alt=""                ></p><p>è°ƒç”¨updateContainerAtExpirationTime</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateContainerAtExpirationTime</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  element: ReactNodeList,</span></span></span><br><span class="line"><span class="function"><span class="params">  container: OpaqueRoot,</span></span></span><br><span class="line"><span class="function"><span class="params">  parentComponent: ?React$Component&lt;any, any&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  expirationTime: ExpirationTime,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?<span class="built_in">Function</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> If this is a nested container, this won&#x27;t be the root.</span></span><br><span class="line">  <span class="keyword">const</span> current = container.current;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">    <span class="keyword">if</span> (ReactFiberInstrumentation.debugTool) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.alternate === <span class="literal">null</span>) &#123;</span><br><span class="line">        ReactFiberInstrumentation.debugTool.onMountContainer(container);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element === <span class="literal">null</span>) &#123;</span><br><span class="line">        ReactFiberInstrumentation.debugTool.onUnmountContainer(container);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ReactFiberInstrumentation.debugTool.onUpdateContainer(container);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//=========æš‚æ—¶ä¸ç®¡ï¼ˆcontext== nullï¼‰========</span></span><br><span class="line"> <span class="keyword">const</span> context = getContextForSubtree(parentComponent);</span><br><span class="line">  <span class="keyword">if</span> (container.context === <span class="literal">null</span>) &#123;</span><br><span class="line">    container.context = context;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    container.pendingContext = context;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//=========åˆ›å»ºæ›´æ–°========</span></span><br><span class="line">  <span class="keyword">return</span> scheduleRootUpdate(current, element, expirationTime, callback);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509131004.png"                      alt=""                ></p><h1 id="å¼€å§‹è°ƒåº¦"><a href="#å¼€å§‹è°ƒåº¦" class="headerlink" title="å¼€å§‹è°ƒåº¦"></a>å¼€å§‹è°ƒåº¦</h1><p>é¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ªupdateï¼Œä¸ç®¡ä½ æ˜¯setStateè¿˜æ˜¯ReactDOM.renderé€ æˆçš„ React æ›´æ–°ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå«updateçš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šèµ‹å€¼ç»™Fiber.updateQueue<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509131232.png"                      alt=""                ></p><h3 id="åˆ›å»ºæ›´æ–°"><a href="#åˆ›å»ºæ›´æ–°" class="headerlink" title="åˆ›å»ºæ›´æ–°"></a>åˆ›å»ºæ›´æ–°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleRootUpdate</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  current: Fiber,</span></span></span><br><span class="line"><span class="function"><span class="params">  element: ReactNodeList,</span></span></span><br><span class="line"><span class="function"><span class="params">  expirationTime: ExpirationTime,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?<span class="built_in">Function</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆ›å»ºupdate</span></span><br><span class="line">  <span class="keyword">const</span> update = createUpdate(expirationTime)</span><br><span class="line"></span><br><span class="line">  update.payload = &#123; element &#125;</span><br><span class="line"></span><br><span class="line">  callback = callback === <span class="literal">undefined</span> ? <span class="literal">null</span> : callback</span><br><span class="line">  <span class="keyword">if</span> (callback !== <span class="literal">null</span>) &#123;</span><br><span class="line">    warningWithoutStack(</span><br><span class="line">      <span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;render(...): Expected the last optional `callback` argument to be a &#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;function. Instead received: %s.&#x27;</span>,</span><br><span class="line">      callback,</span><br><span class="line">    )</span><br><span class="line">    update.callback = callback</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//updateåŠ å…¥åˆ°fiberå¯¹è±¡ä¸Šé¢å¯¹åº”çš„updateenqueueé‡Œé¢</span></span><br><span class="line">  <span class="comment">//å› ä¸ºupdateå¯ä»¥æ˜¯æŸä¸€ä¸ªèŠ‚ç‚¹ä¸Šäº§ç”Ÿå¤šæ¬¡æ›´æ–°  </span></span><br><span class="line">  enqueueUpdate(current, update)</span><br><span class="line">  <span class="comment">//å‘Šè¯‰reactä»»åŠ¡å¼€å§‹è°ƒåº¦ æ›´æ–°äº§ç”Ÿäº† ä¼˜å…ˆçº§æ¦‚å¿µäº§ç”Ÿéœ€è¦åˆ†é…ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">  scheduleWork(current, expirationTime)</span><br><span class="line">  <span class="keyword">return</span> expirationTime  <span class="comment">//è¿™æ¬¡æ›´æ–°çš„ è¶…æ—¶æ—¶é—´ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¼šæ‰§è¡Œ<code>enqueueUpdate</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®å¤§æ¦‚çš„æ„æ€å°±æ˜¯å°†æ–°å»ºçš„updateå¯¹è±¡å’Œå½“å‰çš„FiberNodeå¯¹è±¡ä¼ å…¥ï¼Œç„¶åä¸ºcurrent$$1è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†<code>updateQueue</code>å¯¹è±¡ï¼Œé‡Œé¢ä¿å­˜ç€ç›¸å…³çš„ä¸€äº›ä»»åŠ¡ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509131836.png"                      alt=""                ></p><p>ç„¶åå°±æ˜¯è°ƒç”¨scheduleWorkã€‚æ³¨æ„åˆ°è¿™é‡Œä¹‹å‰setStateå’ŒReactDOM.renderæ˜¯ä¸ä¸€æ ·ï¼Œä½†è¿›å…¥schedulerWorkä¹‹åï¼Œå°±æ˜¯ä»»åŠ¡è°ƒåº¦çš„äº‹æƒ…äº†ï¼Œè·Ÿä¹‹å‰ä½ æ˜¯æ€ä¹ˆè°ƒç”¨çš„æ²¡æœ‰ä»»ä½•å…³ç³»</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><ol><li>é¦–å…ˆæˆ‘ä»¬è¦é€šè¿‡React.createElementå‡½æ•°æ¥å°†æˆ‘ä»¬å®šä¹‰å¥½çš„ç»„ä»¶è¿›è¡Œè½¬æ¢ä¸ºReactå…ƒç´ </li><li>å°†åˆ›å»ºå¥½çš„Reactå…ƒç´ é€šè¿‡è°ƒç”¨ReactDom.renderæ¥è¿›è¡Œæ¸²æŸ“</li><li>ReactDom.renderè°ƒç”¨åå…ˆåˆ›å»ºæ ¹å¯¹è±¡rootï¼Œç„¶åè°ƒç”¨root.render</li><li>ç„¶åç»è¿‡è‹¥å¹²å‡½æ•°è°ƒç”¨ï¼Œæ¥åˆ°workLoopå‡½æ•°ï¼Œå®ƒå°†éå†è™šæ‹ŸDOMæ ‘ï¼Œå°†ä¸‹ä¸€ä¸ªéœ€è¦å¤„ç†çš„è™šæ‹ŸDOMä¼ ç»™performUnitOfWorkï¼ŒperformUnitOfWorkå†å°†è™šæ‹ŸDOMä¼ ç»™beginWorkåï¼ŒbeginWorkæ ¹æ®è™šæ‹ŸDOMçš„ç±»å‹ä¸åŒè¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¹¶å¯¹å„¿å­è¿›è¡Œå¤„ç†ä¸ºFiberç±»å‹ï¼Œä¸ºFiberç±»å‹è™šæ‹ŸDOMæ·»åŠ çˆ¶èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ç­‰å¾…ç»†èŠ‚ï¼Œå·²æ–¹ä¾¿éå†æ ‘ã€‚</li><li>beginWorkå¤„ç†å®Œåè¿”å›éœ€è¦å¤„ç†çš„å­å…ƒç´ å†ç»§ç»­å¤„ç†ï¼Œç›´åˆ°æ²¡æœ‰å­å…ƒç´ ï¼ˆå³è¿”å›nullï¼‰ï¼Œæ­¤æ—¶performUnitOfWorkè°ƒç”¨completeUnitOfWorkå¤„ç†è¿™é¢—è™šæ‹ŸDOMå­æ ‘ï¼Œå°†å…¶è½¬æ¢ä¸ºçœŸå®DOMã€‚</li><li>æœ€åæ‰€æœ‰çš„è™šæ‹ŸDOMéƒ½å°†è½¬ä¸ºçœŸå®DOMã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190508173357.png"                      alt=""                ></li></ol><h2 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h2><p>å­ç»„ä»¶å†…ä¿®æ”¹propsæ˜¯æ²¡æœ‰æ•ˆæœçš„?<br>_storeä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡validated(å¯å†™å…¥)ï¼Œelementå¯¹è±¡ä¸­æ·»åŠ äº†_selfå’Œ_sourceå±æ€§ï¼ˆåªè¯»ï¼‰ï¼Œæœ€åå†»ç»“äº†element.propså’Œelementã€‚</p><h2 id="FiberRootç¤ºæ„å›¾"><a href="#FiberRootç¤ºæ„å›¾" class="headerlink" title="FiberRootç¤ºæ„å›¾"></a>FiberRootç¤ºæ„å›¾</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190509010801.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—_createRef ä¸refè¿˜æœ‰forwardRef</title>
      <link href="2019/04/26/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_createRef%20%E4%B8%8Eref%E8%BF%98%E6%9C%89forwardRef/"/>
      <url>2019/04/26/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_createRef%20%E4%B8%8Eref%E8%BF%98%E6%9C%89forwardRef/</url>
      
        <content type="html"><![CDATA[<ol><li>è¿™æ˜¯æœ€è¿‘å¢åŠ çš„ä¸€ç§æ–¹æ¡ˆã€‚Refs æ˜¯ä½¿ç”¨ React.createRef() æ–¹æ³•åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§æ·»åŠ åˆ° React å…ƒç´ ä¸Šã€‚ä¸ºäº†åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨refsï¼Œåªéœ€å°† ref åˆ†é…ç»™æ„é€ å‡½æ•°ä¸­çš„å®ä¾‹å±æ€§ã€‚<a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.myRef = React.createRef()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ref å›è°ƒå‡½æ•°çš„æ–¹æ¡ˆï¼Œè€Œä¸ç”¨è€ƒè™‘ React ç‰ˆæœ¬</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SearchBar</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>(props);</span><br><span class="line">      <span class="built_in">this</span>.txtSearch = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">this</span>.state = &#123; <span class="attr">term</span>: <span class="string">&#x27;&#x27;</span> &#125;;</span><br><span class="line">      <span class="built_in">this</span>.setInputSearchRef = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.txtSearch = e;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="title">onInputChange</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123; <span class="attr">term</span>: <span class="built_in">this</span>.txtSearch.value &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">         &lt;input</span><br><span class="line">            value=&#123;<span class="built_in">this</span>.state.term&#125;</span><br><span class="line">            onChange=&#123;<span class="built_in">this</span>.onInputChange.bind(<span class="built_in">this</span>)&#125;</span><br><span class="line">            ref=&#123;<span class="built_in">this</span>.setInputSearchRef&#125; /&gt;</span><br><span class="line">      );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯å†react16ä¹‹å‰ç”¨çš„æœ€å¤šçš„ä¸€ç§æ–¹æ³•ä½†æ˜¯å†ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬ä¸­å°†è¢«åºŸå¼ƒçš„ä¸€ç§æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p ref=<span class="string">&quot;strRef&quot;</span>&gt;è·å–ref&lt;p&gt;</span><br></pre></td></tr></table></figure><p>æºç ä¸­å¦‚ä½•å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createRef</span>(<span class="params"></span>): <span class="title">RefObject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> refObject = &#123;</span><br><span class="line">    current: <span class="literal">null</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> refObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ æ²¡çœ‹é”™ï¼react.jsä¸­ä»£ç å°±åªæœ‰è¿™ä¹ˆä¸€ç‚¹ï¼Œä½†åæœŸå¦‚ä½•ä½¿ç”¨è¿™ä¸ªrefObjectæˆ‘ä»¬åœ¨åé¢è®²reactå¦‚ä½•æ¸²æŸ“è¿‡ç¨‹ä¸­å†è®²è§£è¿™ä¸ªæ­¥éª¤ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-forward-refs"><a href="#ä»€ä¹ˆæ˜¯-forward-refs" class="headerlink" title="ä»€ä¹ˆæ˜¯ forward refs?"></a>ä»€ä¹ˆæ˜¯ forward refs?</h1><blockquote><p>Ref forwarding æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸ä¸€äº›ç»„ä»¶è·å–æ¥æ”¶åˆ° ref å¯¹è±¡å¹¶å°†å®ƒè¿›ä¸€æ­¥ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹refå¯ä»¥è·å–classç»„ä»¶çš„å®ä¾‹ï¼Œè·å–ä¸åˆ°function ç»„ä»¶çš„å®ä¾‹<br>æ¯”å¦‚è¿™æ ·<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Comp = ï¼ˆprops,<span class="keyword">ref</span>)=&gt; &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">&quot;text&quot;</span> <span class="keyword">ref</span>=&#123;<span class="keyword">ref</span>&#125;/&gt;</span><br></pre></td></tr></table></figure><br>è¿™ä¸ªä¹Ÿå¯ä»¥çœ‹åšPurComponentæ²¡æœ‰å®ä¾‹æ²¡æœ‰thisæ˜¯è·å–ä¸åˆ°refçš„<br>ä½†æ˜¯ç¬¬ä¸‰æ–¹ç»„ä»¶å°è£…è¿‡ï¼Œè®©å…¶ä»–ç”¨æˆ·ä½¿ç”¨çš„æ—¶å€™ç”¨æˆ·ä¸ç¡®å®šä½ æ˜¯å¦æ˜¯PurComponentç»„ä»¶å¦‚æœä½¿ç”¨refå°±è·å–ä¸åˆ°ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±è¦ä½¿ç”¨forwardRef<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const ButtonElement = <span class="module-access"><span class="module"><span class="identifier">React</span>.</span></span>forward<span class="constructor">Ref((<span class="params">props</span>, <span class="params">ref</span>)</span> =&gt; (</span><br><span class="line">  &lt;button <span class="built_in">ref</span>=&#123;<span class="built_in">ref</span>&#125; className=<span class="string">&quot;CustomButton&quot;</span>&gt;</span><br><span class="line">    &#123;props.children&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create ref to the DOM button:</span></span><br><span class="line">const <span class="built_in">ref</span> = <span class="module-access"><span class="module"><span class="identifier">React</span>.</span></span>create<span class="constructor">Ref()</span>;</span><br><span class="line">&lt;ButtonElement <span class="built_in">ref</span>=&#123;<span class="built_in">ref</span>&#125;&gt;&#123;&#x27;Forward Ref&#x27;&#125;&lt;/ButtonElement&gt;</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬çœ‹ä¸‹forwardRefçš„æºç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">forwardRef</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  render: (props: Props, ref: React$Ref&lt;ElementType&gt;) =&gt; React$Node,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//...å¿½ç•¥_DEV_...</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    $$typeof: REACT_FORWARD_REF_TYPE,</span><br><span class="line">    render,   <span class="comment">//æŒ‡çš„å°±æ˜¯ä¼ è¿›æ¥çš„ function-Component</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡é‡Œçš„$$typeofä¸ReactElementä¸­è¿”å›çš„$$typeofä¸èƒ½æ··æ·†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   $$typeof:xxx,</span><br><span class="line">   props:&#123;</span><br><span class="line">       $$typeof:xxx,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—_Componentåšäº†ä»€ä¹ˆ</title>
      <link href="2019/04/25/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_Component%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88/"/>
      <url>2019/04/25/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_Component%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<p>æœ‰ä¸¤ç§å¯è¡Œçš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼š</p><ol><li>Function Components: è¿™æ˜¯åˆ›å»ºç»„ä»¶æœ€ç®€å•çš„æ–¹å¼ã€‚è¿™äº›æ˜¯çº¯ JavaScript å‡½æ•°ï¼Œæ¥å— props å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å› React å…ƒç´ </li><li>Class Components: ä½ è¿˜å¯ä»¥ä½¿ç”¨ ES6 ç±»æ¥å®šä¹‰ç»„ä»¶<a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Component</span>(<span class="params">props, context, updater</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.props = props;</span><br><span class="line">  <span class="built_in">this</span>.context = context;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">this</span>.refs = emptyObject;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.updater = updater || ReactNoopUpdateQueue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>props<br>context<br>refs   æƒ³è¦è·å–çš„èŠ‚ç‚¹çš„å®ä¾‹æŒ‚è½½åˆ°refsä¸Šé¢</li></ol><p>ç„¶åå†componentåŸå‹ä¸Šæœ‰ä¸€ä¸ªæ–¹æ³•setState<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Component.prototype.setState = <span class="function"><span class="keyword">function</span>(<span class="params">partialState, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­ç±»å‹æ˜¯å¦objectæˆ–è€…functionæˆ–è€…null</span></span><br><span class="line">  invariant(</span><br><span class="line">    <span class="keyword">typeof</span> partialState === <span class="string">&#x27;object&#x27;</span> ||</span><br><span class="line">      <span class="keyword">typeof</span> partialState === <span class="string">&#x27;function&#x27;</span> ||</span><br><span class="line">      partialState == <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;setState(...): takes an object of state variables to update or a &#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;function which returns an object of state variables.&#x27;</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">//å½“updaterä¼ å…¥åæ‰§è¡ŒenqueueSetStateçš„æ–¹æ³•ï¼ˆåé¢ä¼šè®²ï¼‰</span></span><br><span class="line">  <span class="built_in">this</span>.updater.enqueueSetState(<span class="built_in">this</span>, partialState, callback, <span class="string">&#x27;setState&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>è¿™ä¸ªAPIå¼ºåˆ¶æˆ‘ä»¬çš„reactæ›´æ–°ï¼Œæ—¢æ˜¯stateæ²¡æœ‰æ”¹å˜<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Component.prototype.forceUpdate = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.updater.enqueueForceUpdate(<span class="built_in">this</span>, callback, <span class="string">&#x27;forceUpdate&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h1 id="å¦ä¸€ä¸ªé‡ç‚¹-PureComponent"><a href="#å¦ä¸€ä¸ªé‡ç‚¹-PureComponent" class="headerlink" title="å¦ä¸€ä¸ªé‡ç‚¹ PureComponent"></a>å¦ä¸€ä¸ªé‡ç‚¹ PureComponent</h1><p>React.PureComponent ä¸ React.Component å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å®ƒä¸ºä½ å¤„ç†äº† shouldComponentUpdate() æ–¹æ³•ã€‚å½“å±æ€§æˆ–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒPureComponent å°†å¯¹å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæµ…æ¯”è¾ƒã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€èˆ¬çš„ç»„ä»¶ä¸ä¼šå°†å½“å‰çš„å±æ€§å’ŒçŠ¶æ€ä¸æ–°çš„å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å½“è°ƒç”¨ shouldComponentUpdate æ—¶ï¼Œé»˜è®¤è¿”å› trueï¼Œæ‰€ä»¥ç»„ä»¶éƒ½å°†é‡æ–°æ¸²æŸ“ã€‚<br>æºç ä¸­æ˜¯å¦‚ä½•åšåˆ°çš„ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ComponentDummy</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">ComponentDummy.prototype = Component.prototype;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PureComponent</span>(<span class="params">props, context, updater</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.props = props;</span><br><span class="line">  <span class="built_in">this</span>.context = context;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.refs = emptyObject;</span><br><span class="line">  <span class="built_in">this</span>.updater = updater || ReactNoopUpdateQueue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pureComponentPrototype = (PureComponent.prototype = <span class="keyword">new</span> ComponentDummy());</span><br><span class="line">pureComponentPrototype.constructor = PureComponent;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(pureComponentPrototype, Component.prototype);</span><br><span class="line">pureComponentPrototype.isPureReactComponent = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;Component, PureComponent&#125;;</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºä»–æ˜¯ç»§æ‰¿Component</p><p>é€šè¿‡new å®ç°äº†ä¸€ä¸ªComponentDummyç©ºçš„ç±»<br>è®©Componentçš„åŸå‹å¯¹è±¡èµ‹å€¼ç»™ComponentDummyçš„åŸå‹å¯¹è±¡<br>pureComponentPrototype.constructoræŒ‡å‘è‡ªå·±<br>Component.prototypeä¸Šçš„å±æ€§æ‹·è´åˆ°pureComponentPrototypeä¸Š</p><p>å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯<code>isPureReactComponent</code>é€šè¿‡ä¸€ä¸ªæ ‡è¯†è®©ç»§æ‰¿è‡ªè¿™ä¸ªç±»çš„ç»„ä»¶æ˜¯ä¸æ˜¯PureComponentã€‚<br>ç„¶ååˆ¤æ–­propsæ˜¯å¦æ›´æ–°å†åˆ¤æ–­ç»„ä»¶æ˜¯å¦æ›´æ–°ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ä¸­æ²¡æœ‰æ¶‰åŠåˆ°ç”Ÿå‘½å‘¨æœŸ å’Œ render ï¼Œè¿™æ˜¯å‡ºä¹æ„æ–™çš„</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åˆç†å¸ƒç½®React/Reduxçš„ç›®å½•ç»“æ„</title>
      <link href="2019/04/25/React-Redux%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E5%B8%83%E7%BD%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/"/>
      <url>2019/04/25/React-Redux%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E5%B8%83%E7%BD%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®çš„ç»“æ„æ”¹è¿‡å¾ˆå¤šæ¬¡ï¼Œæ¯æ¬¡æ ¹æ®éœ€æ±‚çš„å¤æ‚åº¦æ…¢æ…¢çš„ä¿®æ”¹ï¼Œæ ¹æ®å·¥ä½œä¸­çš„ç»éªŒæ€»ç»“ä¸‹å‡ ç§ç»“æ„çš„ç‰¹ç‚¹ã€‚<br><a id="more"></a></p><h2 id="æŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†"><a href="#æŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†" class="headerlink" title="æŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†"></a>æŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†</h2><p>ä¸æ˜¯å¾ˆå¤æ‚çš„é¡¹ç›®å¯ä»¥è¿™æ ·è§„åˆ’ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|â€”â€” actions</span><br><span class="line">    |â€”â€” CommandActions.jsx</span><br><span class="line">    â””â”€â”€ newAction.jsx      &lt;- here</span><br><span class="line">|â€”â€” components</span><br><span class="line">    |â€”â€” Command.jsx</span><br><span class="line">    â””â”€â”€ newComponent.jsx   &lt;- here</span><br><span class="line">|â€”â€” containers</span><br><span class="line">    |â€”â€” Command.jsx</span><br><span class="line">    â””â”€â”€ newContainers.jsx  &lt;- here</span><br><span class="line">â””â”€â”€ reducers</span><br><span class="line">    |â€”â€” command.jsx</span><br><span class="line">    â””â”€â”€ newReducers.jsx    &lt;- here</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šé¡¹ç›®ç®€å•ç»“æ„æ¸…æ™°ï¼Œactionsï¼Œreducersï¼Œcontainersä¸­æ”¾ç€æ¯ä¸ªæ¨¡å—çš„å¯¹åº”çš„ç»“æ„æ–‡ä»¶ã€‚<br>ç¼ºç‚¹ï¼šå½“ä½ æ·»åŠ ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ä½ å°±éœ€è¦åœ¨3ä¸ªç›®å½•ä¸‹æ“ä½œï¼Œä»¥åŠè·¨æ–‡ä»¶çš„ç®¡ç†å¯¹åº”çš„æ–‡ä»¶ï¼Œæœ‰ç‚¹ä¸æ–¹ä¾¿ã€‚</p><h2 id="æŒ‰ç…§ç»„ä»¶åˆ’åˆ†"><a href="#æŒ‰ç…§ç»„ä»¶åˆ’åˆ†" class="headerlink" title="æŒ‰ç…§ç»„ä»¶åˆ’åˆ†"></a>æŒ‰ç…§ç»„ä»¶åˆ’åˆ†</h2><p>ä¸€ä¸ªç»„ä»¶åŒ…å«è‡ªèº«actionï¼Œreducersï¼Œstyleç­‰ç›¸å…³çš„æ–‡ä»¶ï¼Œè¿™æ ·åœ¨ä¿®æ”¹æŸäº›æ–‡ä»¶çš„æ—¶å€™å°±éå¸¸çš„å®¹æ˜“ã€‚å¯¹äºé¡¹ç›®ä¸å­˜åœ¨å¾ˆå¤æ‚çš„å¼‚æ­¥é€»è¾‘ç­‰å¯ä»¥å‚è€ƒè¿™æ ·çš„ç»“æ„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|â€”â€” app</span><br><span class="line">    |â€”â€” App.jsx</span><br><span class="line">    |â€”â€” reducers.jsx</span><br><span class="line">    |â€”â€” routes.jsx</span><br><span class="line">|â€”â€” home</span><br><span class="line">    |â€”â€” index.jsx</span><br><span class="line">    |â€”â€” Home.jsx</span><br><span class="line">    |â€”â€” HomeActions.jsx</span><br><span class="line">    â””â”€â”€ HomeReducer.jsx</span><br><span class="line">|â€”â€”  product</span><br><span class="line">    |â€”â€” index.jsx</span><br><span class="line">    |â€”â€” ProductList.jsx</span><br><span class="line">    |â€”â€” ProductActions.jsx</span><br><span class="line">    â””â”€â”€ ProductReducer.jsx</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼šå¤§å‹é¡¹ç›®ä¸­å¦‚æœå­˜åœ¨å¤§é‡å¤ç”¨æ¨¡å—å¤„ç†èµ·æ¥éå¸¸éº»çƒ¦</p><h2 id="å¤§å‹é¡¹ç›®çš„ç»„ç»‡"><a href="#å¤§å‹é¡¹ç›®çš„ç»„ç»‡" class="headerlink" title="å¤§å‹é¡¹ç›®çš„ç»„ç»‡"></a>å¤§å‹é¡¹ç›®çš„ç»„ç»‡</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|â€”â€”app</span><br><span class="line">   |â€”â€” component                # è¿™é‡Œæ”¾çš„éƒ½æ˜¯å…¬å…±éƒ¨åˆ†çš„ç»„ä»¶</span><br><span class="line">       |â€”â€” Header               # ä½¿ç”¨ styled-components æ¥å®šä¹‰åŸºç¡€ç»„ä»¶</span><br><span class="line">       â””â”€â”€ Fotter</span><br><span class="line">   |â€”â€” containers               # é¡µé¢å®¹å™¨</span><br><span class="line">       |â€”â€” HomePage</span><br><span class="line">           |â€”â€” ...</span><br><span class="line">           |â€”â€” index.js        # ç»„ç»‡é¡µé¢çš„ç»“æ„, ç§æœ‰æ¨¡å—å’Œå…¬å…±æ¨¡å—æ„æˆ</span><br><span class="line">           |â€”â€” reducer.js      # Homeä¸‹çš„reduceré€»è¾‘</span><br><span class="line">           |â€”â€” component     # ç§æœ‰æ¨¡å—</span><br><span class="line">           |â€”â€” sagas.js        # Homeä¸‹çš„å¼‚æ­¥æ•°æ®</span><br><span class="line">           |â€”â€” action.js</span><br><span class="line">           |â€”â€” ...</span><br><span class="line">           â””â”€â”€ reducers.js   # reducer</span><br></pre></td></tr></table></figure><ol><li>componentä¸‹é¢åŒ…æ‹¬äº†å¤§é‡çš„é€šç”¨ç»„ä»¶ï¼Œä¸ç®¡æ˜¯é¡¹ç›®çš„å¹³å°ç§»æ¤ï¼Œæ¨¡å—å¤ç”¨éƒ½å¾ˆå¥½ç®¡ç†ã€‚containersä¸‹å¦‚HomePage/index.jsæœ‰å¤ç”¨çš„æ¨¡å—ä»¥åŠé¡µé¢åœºæ™¯ä¸‹ç‰¹æ®Šçš„æ¨¡å—æ„æˆï¼Œ</li><li>åŒæ—¶index.jsè¿˜è´Ÿè´£æ¨¡å—è·Ÿredux storeæ•°æ®çš„é“¾æ¥ï¼Œå¯¹åº”çš„æ¯ä¸ªåœºæ™¯éƒ½æ‹¥æœ‰è‡ªèº«sagaï¼Œreducerç­‰ã€‚æ„å»ºå¤§å‹çš„é¡¹ç›®ç»“æ„å‚è€ƒè¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æ£’çš„</li></ol><h2 id="æœ€åä»‹ç»ä¸‹react-starter-kit"><a href="#æœ€åä»‹ç»ä¸‹react-starter-kit" class="headerlink" title="æœ€åä»‹ç»ä¸‹react-starter-kit"></a>æœ€åä»‹ç»ä¸‹react-starter-kit</h2><p>è¿™ä¸ªé¡¹ç›®çš„ç»“æ„ä½¿ç”¨çš„æ˜¯ fractal(ä¸è§„åˆ™ç¢ç‰‡å½¢ï¼šé€‚åˆå¤§å‹é¡¹ç›®)*ï¼Œæ–¹æ³•çš„åˆ†ç»„ä¸»è¦æ˜¯ä¾ç…§ç‰¹æ€§è€Œä¸æ˜¯æ–‡ä»¶ç±»å‹ã€‚æ³¨æ„ï¼Œè¿™ä¸ªç›®å½•ç»“æ„åªæ˜¯ä¸€ä¸ªæŒ‡å¼•ï¼Œå¹¶ä¸ä¸€å®šè¦æŒ‰è¿™ä¸ªæ¥ã€‚è¿™ç§ç»“æ„è°åœ¨è®©ç¨‹åºæ›´å®¹æ˜“æ‰©å±•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ src                      # ç¨‹åºæºæ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ main.js              # ç¨‹åºå¯åŠ¨å’Œæ¸²æŸ“</span><br><span class="line">â”‚   â”œâ”€â”€ components           # å…¨å±€å¯å¤ç”¨çš„è¡¨ç°ç»„ä»¶(Presentational Components)</span><br><span class="line">â”‚   â”œâ”€â”€ containers           # å…¨å±€å¯å¤ç”¨çš„å®¹å™¨ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ layouts              # ä¸»é¡µç»“æ„</span><br><span class="line">â”‚   â”œâ”€â”€ store                # ReduxæŒ‡å®šå—</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ createStore.js   # åˆ›å»ºå’Œä½¿ç”¨redux store</span><br><span class="line">â”‚   â”‚   â””â”€â”€ reducers.js      # Reduceræ³¨å†Œå’Œæ³¨å…¥</span><br><span class="line">â”‚   â””â”€â”€ routes               # ä¸»è·¯ç”±å’Œå¼‚æ­¥åˆ†å‰²ç‚¹</span><br><span class="line">â”‚       â”œâ”€â”€ index.js         # ç”¨storeå¯åŠ¨ä¸»ç¨‹åºè·¯ç”±</span><br><span class="line">â”‚       â”œâ”€â”€ Root.js          # ä¸ºä¸Šä¸‹æ–‡providersåŒ…ä½ç»„ä»¶</span><br><span class="line">â”‚       â””â”€â”€ Home             # ä¸è§„åˆ™è·¯ç”±</span><br><span class="line">â”‚           â”œâ”€â”€ index.js     # è·¯ç”±å®šä¹‰å’Œä»£ç å¼‚æ­¥åˆ†å‰²</span><br><span class="line">â”‚           â”œâ”€â”€ assets       # ç»„ä»¶å¼•å…¥çš„é™æ€èµ„æº</span><br><span class="line">â”‚           â”œâ”€â”€ components   # ç›´è§‚Reactç»„ä»¶</span><br><span class="line">â”‚           â”œâ”€â”€ container    # è¿æ¥actionså’Œstore</span><br><span class="line">â”‚           â”œâ”€â”€ modules      # reducers/constants/actionsçš„é›†åˆ</span><br><span class="line">â”‚           â””â”€â”€ routes **    # ä¸è§„åˆ™å­è·¯ç”±(** å¯é€‰æ‹©çš„)</span><br></pre></td></tr></table></figure><p>routes ä½œä¸ºä¸»å…¥å£ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰è·¯ç”±å¯¹åº”çš„ç»„ä»¶ï¼Œassets, moduleså…¨éƒ¨éƒ½é›†ä¸­åœ¨äº†ä¸€èµ·,æ›´åƒmvcçš„å‘½åç»„ç»‡ã€‚reducerã€actionæ•´åˆä¸ºmodulesï¼Œ componentsä½œä¸ºviewï¼Œcontainerè¿æ¥actionså’Œstoreã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createRoutes = <span class="function">(<span class="params">store</span>) =&gt;</span> (&#123;</span><br><span class="line">  path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  component: CoreLayout,</span><br><span class="line">  indexRoute: Home,</span><br><span class="line">  childRoutes: [</span><br><span class="line">    CounterRoute(store),</span><br><span class="line">    ZenRoute(store),</span><br><span class="line">    ElapseRoute(store),</span><br><span class="line">    RouteRoute(store),</span><br><span class="line">    PageNotFound(),</span><br><span class="line">    Redirect</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªCounteræ¨¡å—åŒ…å«å¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Counter/</span><br><span class="line">    components/   # é¡µé¢çš„ç»„ä»¶</span><br><span class="line">     containers/   # view å’Œ modules æ•°æ®å¯¹æ¥</span><br><span class="line">    modules/      # åŒ…å«å¯¹åº”çš„ reducer, action</span><br><span class="line">    index.js      # é¡µé¢å…¥å£ï¼Œå®šä¹‰path</span><br></pre></td></tr></table></figure><p>index.js è‡ªåŠ¨çš„æ³¨å…¥reducer åˆ°storeï¼Œè¿™æ ·åœ¨é¡¶å±‚çš„storeå°±æ— éœ€è¦æ‰‹åŠ¨å»æ•´åˆæ¯ä¸ªæ¨¡å—è‡ªèº«çš„reducerã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¯¹åº”çš„redicer</span></span><br><span class="line"><span class="keyword">const</span> reducer = <span class="built_in">require</span>(<span class="string">&#x27;./modules/counter&#x27;</span>).default</span><br><span class="line"> <span class="comment">/*  Add the reducer to the store on key &#x27;counter&#x27;  */</span></span><br><span class="line">injectReducer(store, &#123; <span class="attr">key</span>: <span class="string">&#x27;counter&#x27;</span>, reducer &#125;)</span><br></pre></td></tr></table></figure><p><strong>å½“ç„¶é¡¹ç›®ç»“æ„è¿˜æ˜¯è¦æ ¹æ®ä¸ªäººæˆ–è€…é¡¹ç›®éœ€æ±‚è€Œå®šï¼Œä»¥ä¸Šæ–¹æ¡ˆåªåšå‚è€ƒã€‚è°¢è°¢ï¼</strong></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a class="link"   href="https://juejin.im/post/58cbfcb05c497d0057b9b228" >æ˜é‡‘<i class="fas fa-external-link-alt"></i></a><br><a class="link"   href="https://redux.js.org/advanced/example-reddit-api" >Reudxå®˜ç½‘<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—_ReactElement</title>
      <link href="2019/04/25/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactElement/"/>
      <url>2019/04/25/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactElement/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€èŠ‚æˆ‘ä»¬çœ‹åˆ°äº†jsxè½¬ä¹‰åˆ°javascriptçš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ReactElementæ–¹æ³•<br>ç°åœ¨æˆ‘ä»¬å°±æ¥æ¢ç´¢ä¸‹ReactElementåšäº†å†™ä»€ä¹ˆ<br><a id="more"></a></p><h2 id="é¦–å…ˆçœ‹ä¸‹å®ƒçš„ä»£ç å¼•ç”¨"><a href="#é¦–å…ˆçœ‹ä¸‹å®ƒçš„ä»£ç å¼•ç”¨" class="headerlink" title="é¦–å…ˆçœ‹ä¸‹å®ƒçš„ä»£ç å¼•ç”¨"></a>é¦–å…ˆçœ‹ä¸‹å®ƒçš„ä»£ç å¼•ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> &#123;</span><br><span class="line">  createElement,</span><br><span class="line">  createFactory,</span><br><span class="line">  cloneElement,</span><br><span class="line">  isValidElement,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./ReactElement&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹createElementæ–¹æ³•å¦‚ä½•å®šä¹‰"><a href="#ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹createElementæ–¹æ³•å¦‚ä½•å®šä¹‰" class="headerlink" title="ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹createElementæ–¹æ³•å¦‚ä½•å®šä¹‰"></a>ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹createElementæ–¹æ³•å¦‚ä½•å®šä¹‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> propName;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> props = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> key = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> ref = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> source = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨config</span></span><br><span class="line">  <span class="keyword">if</span> (config != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasValidRef(config)) &#123;</span><br><span class="line">      ref = config.ref;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">      key = <span class="string">&#x27;&#x27;</span> + config.key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> config) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        hasOwnProperty.call(config, propName) &amp;&amp;</span><br><span class="line">        !RESERVED_PROPS.hasOwnProperty(propName)</span><br><span class="line">      ) &#123;</span><br><span class="line">        props[propName] = config[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">//argumentså‚æ•°ç¬¬ä¸‰ä¸ªå¼€å§‹ä½œä¸ºchildrenLength</span></span><br><span class="line">  <span class="keyword">const</span> childrenLength = <span class="built_in">arguments</span>.length - <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span> (childrenLength === <span class="number">1</span>) &#123;</span><br><span class="line">    props.children = children;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> childArray = <span class="built_in">Array</span>(childrenLength);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenLength; i++) &#123;</span><br><span class="line">      childArray[i] = <span class="built_in">arguments</span>[i + <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    ....</span><br><span class="line">       props.children = childArray;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åˆ¤æ–­ç»„ä»¶æ²¡æœ‰ä¼ propsåˆ™å¯ä»¥ç”¨defaultPropsä½œä¸ºé»˜è®¤å‚æ•°</span></span><br><span class="line">  <span class="keyword">if</span> (type &amp;&amp; type.defaultProps) &#123;</span><br><span class="line">    <span class="keyword">const</span> defaultProps = type.defaultProps;</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> defaultProps) &#123;</span><br><span class="line">      <span class="keyword">if</span> (props[propName] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        props[propName] = defaultProps[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">//è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> ReactElement(</span><br><span class="line">    type,</span><br><span class="line">    key,</span><br><span class="line">    ref,</span><br><span class="line">    self,</span><br><span class="line">    source,</span><br><span class="line">    ReactCurrentOwner.current,</span><br><span class="line">    props,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•° ï¼š</p><ol><li>å­—ç¬¦ä¸²æ¯”å¦‚divï¼Œpä»£è¡¨åŸç”ŸDOMï¼Œç§°ä¸ºHostComponent</li><li>Classç±»å‹æ˜¯æˆ‘ä»¬ç»§æ‰¿è‡ªComponentæˆ–è€…PureComponentçš„ç»„ä»¶ï¼Œç§°ä¸ºClassComponent</li><li>æ–¹æ³•å°±æ˜¯functional Component</li><li>åŸç”Ÿæä¾›çš„Fragmentã€AsyncModeç­‰æ˜¯Symbolï¼Œä¼šè¢«ç‰¹æ®Šå¤„ç†</li></ol><p>åœ¨å¤„ç†configçš„è¿‡ç¨‹ä¸­è¦å¤„ç†ä¸æ˜¯propså¯¹åº”çš„å±æ€§å€¼<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RESERVED_PROPS = &#123;</span><br><span class="line">  key: <span class="literal">true</span>,</span><br><span class="line">  ref: <span class="literal">true</span>,</span><br><span class="line">  __self: <span class="literal">true</span>,</span><br><span class="line">  __source: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>ä¹‹åå¤„ç†children</p><h2 id="çœ‹ä¸‹ReactElementæ–¹æ³•"><a href="#çœ‹ä¸‹ReactElementæ–¹æ³•" class="headerlink" title="çœ‹ä¸‹ReactElementæ–¹æ³•"></a>çœ‹ä¸‹ReactElementæ–¹æ³•</h2><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ReactElement = <span class="keyword">function</span>(<span class="keyword">type</span>, key, <span class="keyword">ref</span>, self, source, owner, props) &#123;</span><br><span class="line">  <span class="keyword">const</span> element = &#123;</span><br><span class="line">    $$typeof: REACT_ELEMENT_TYPE,</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">type</span>: <span class="keyword">type</span>,</span><br><span class="line">    key: key,</span><br><span class="line">    <span class="keyword">ref</span>: <span class="keyword">ref</span>,</span><br><span class="line">    props: props,</span><br><span class="line">    <span class="comment">//è®°å½•è´Ÿè´£åˆ›å»ºæ­¤å…ƒç´ çš„ç»„ä»¶</span></span><br><span class="line">    <span class="number">_</span>owner: owner,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ReactElementåªæ˜¯ä¸€ä¸ªç”¨æ¥æ‰¿è½½ä¿¡æ¯çš„å®¹å™¨ï¼Œä»–ä¼šå‘Šè¯‰åç»­çš„æ“ä½œè¿™ä¸ªèŠ‚ç‚¹çš„ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ol><li>typeç±»å‹ï¼Œç”¨äºåˆ¤æ–­å¦‚ä½•åˆ›å»ºèŠ‚ç‚¹</li><li>keyå’Œrefè¿™äº›ç‰¹æ®Šä¿¡æ¯</li><li>propsæ–°çš„å±æ€§å†…å®¹</li><li><code>$$typeof</code>ç”¨äºç¡®å®šæ˜¯å¦å±äºReactElement</li></ol><h2 id="typeofä¸typeçš„åŒºåˆ«ï¼Ÿ"><a href="#typeofä¸typeçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="$$typeofä¸typeçš„åŒºåˆ«ï¼Ÿ"></a>$$typeofä¸typeçš„åŒºåˆ«ï¼Ÿ</h2><p><code>$$typeof</code>ç”¨äºç¡®å®šæ˜¯å¦å±äºReactElementï¼Œæˆ‘ä»¬åœ¨ç”¨jsxå†™ä»£ç çš„æ—¶å€™æ‰€æœ‰çš„æ ‡ç­¾éƒ½æ˜¯ReactElementåˆ›å»ºçš„ã€‚ç±»å‹$$typeof: REACT_ELEMENT_TYPE,<br>typeæ˜¯è®°å½•æˆ‘ä»¬èŠ‚ç‚¹ç±»å‹çš„æ˜¯åŸç”Ÿç»„ä»¶è¿˜æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œè¿˜æ˜¯æ ‡ç­¾ç±»å‹</p><h2 id="æµç¨‹å›¾å¤§è‡´å†…å®¹æ„Ÿè°¢yck"><a href="#æµç¨‹å›¾å¤§è‡´å†…å®¹æ„Ÿè°¢yck" class="headerlink" title="æµç¨‹å›¾å¤§è‡´å†…å®¹æ„Ÿè°¢yck"></a>æµç¨‹å›¾å¤§è‡´å†…å®¹æ„Ÿè°¢yck</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190504004316.png"                      alt=""                ></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹react.createElementè¿™ä¸ªå‡½æ•°é‡Œé¢ä¼šå¸®æˆ‘ä»¬åšä»€ä¹ˆäº‹æƒ…ã€‚</p><p>defineKeyPropWarningGetterå’ŒdefineRefPropWarningGetterä¸¤ä¸ªå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ<br>è¿™ä¸¤ä¸ªå‡½æ•°ä»…ä»…åªæ˜¯å°†keyå’Œrefæ·»åŠ åˆ°å³å°†ä¼ å…¥ReactElementå‡½æ•°çš„propså¯¹è±¡ä¸­è€Œå·²ã€‚å¹¶ä¸”å¯¹getç»‘å®šäº†ä¸€ä¸ªå‡½æ•°ï¼Œå½“å°è¯•è·é€šè¿‡propsè·å–keyå’Œrefçš„æ—¶å€™ä¼šå‡ºç°è­¦å‘Šã€‚<br>ä»€ä¹ˆæƒ…å†µä¸‹childrenLengthå¤§äº1ï¼Ÿ<br>å°†åŸæ¥çš„h1æ”¹æˆä¸€ä¸ªdivï¼Œå¹¶ä¸”åµŒå¥—2ä¸ªh1å…ƒç´ å°±å¯ä»¥å‘ç°childrenLengthå¤§äº1äº†ã€‚<br>ReactElementæ˜¯å¹²å˜›çš„ï¼Ÿ<br>åŒ…è£…åœ¨ä¸€ä¸ªelementå¯¹è±¡</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><ol><li>é¦–å…ˆä¼šåˆå§‹åŒ–ä¸€äº›åˆ—çš„å˜é‡ï¼Œä¹‹åä¼šåˆ¤æ–­æˆ‘ä»¬ä¼ å…¥çš„å…ƒç´ ä¸­æ˜¯å¦å¸¦æœ‰keyå’Œrefçš„å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§å¯¹äºreactæ˜¯æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼Œå¦‚æœæ£€æµ‹åˆ°æœ‰ä¼ å…¥key,ref,<strong>selfå’Œ</strong>sourceè¿™4ä¸ªå±æ€§å€¼ï¼Œä¼šå°†å…¶ä¿å­˜èµ·æ¥ã€‚</li><li>ä¹‹åå¯¹ä¼ å…¥çš„<code>config</code>åšå¤„ç†ï¼Œå¾ªç¯configå¯¹è±¡ï¼Œå¹¶ä¸”å‰”é™¤æ‰4ä¸ªå†…ç½®å±æ€§å€¼ï¼ˆkey,ref,<strong>self,</strong>sourceï¼‰ï¼Œä¹‹åé‡æ–°ç»„è£…æ–°çš„configä¸ºpropsã€‚</li><li>ä¹‹åä¼šæ£€æµ‹ä¼ å…¥çš„å‚æ•°çš„é•¿åº¦ï¼Œå¦‚æœchildrenLengthç­‰äº1çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå°±ä»£è¡¨ç€å½“å‰createElementçš„å…ƒç´ æ²¡æœ‰å­å…ƒç´ ï¼Œåªæœ‰æ–‡å­—æˆ–è€…æ˜¯ç©ºï¼Œé‚£ä¹ˆå°†å†…å®¹èµ‹å€¼åˆ°props.childrenã€‚é‚£ä»€ä¹ˆæ—¶å€™<code>childrenLength</code>ä¼šå¤§äº1å‘¢ï¼Ÿé‚£å°±æ˜¯å½“ä½ çš„å…ƒç´ é‡Œé¢æ¶‰åŠåˆ°åµŒå¥—å­å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆchildrenå°†ä¼šæœ‰å¤šä¸ªä¼ å…¥åˆ°createElementå‡½æ•°ä¸­ï¼Œè¿™ä¸ªä¹‹åå†åšè¯¦è§£ï¼Œç°åœ¨åªé’ˆå¯¹æœ€ç®€å•çš„DEMOå»è¯´æ˜ã€‚</li><li>æ¥ç€å‡½æ•°å°†ä¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨defaultPropsè¿™ä¸ªå‚æ•°ï¼Œå› ä¸ºç°åœ¨çš„DEMOæ˜¯ä¸€ä¸ªæœ€ç®€å•çš„DEMOï¼Œè€Œä¸”ä¼ å…¥çš„åªæ˜¯åŸç”Ÿå…ƒç´ ï¼Œæ‰€ä»¥æ²¡æœ‰<code>defaultProps</code>è¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å…ˆå¿½ç•¥ã€‚</li><li>æ£€æµ‹keyå’Œrefæ˜¯å¦æœ‰èµ‹å€¼ï¼Œå¦‚æœæœ‰å°†ä¼šæ‰§è¡Œ<code>defineKeyPropWarningGetter</code>å’Œ<code>defineRefPropWarningGetter</code>ä¸¤ä¸ªå‡½æ•°ã€‚</li><li>æœ€åå°†ä¸€ç³»åˆ—ç»„è£…å¥½çš„æ•°æ®ä¼ å…¥<code>ReactElement</code>å‡½æ•°ä¸­ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæºç ç³»åˆ—_jsxè½¬javascript</title>
      <link href="2019/04/24/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_jsx%E8%BD%ACjavascript/"/>
      <url>2019/04/24/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_jsx%E8%BD%ACjavascript/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸‹åŠå¹´çš„å¯¹è‡ªå·±çš„æå‡ã€‚<br>æ„Ÿè°¢<a class="link"   href="https://react.jokcy.me/book/api/react.html" >jokcy<i class="fas fa-external-link-alt"></i></a><br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190503154513.png"                      alt=""                ><br><img                       lazyload                     src="/images/loading.svg"                     data-src="media/15566986729739/15566987423785.jpg"                      alt="-w1029"                ></p><p>React ä½¿ç”¨ JSX æ¥æ›¿ä»£å¸¸è§„çš„ JavaScriptã€‚<br>JSX æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚<br>æˆ‘ä»¬ä¸éœ€è¦ä¸€å®šä½¿ç”¨ JSXï¼Œä½†å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š<br>JSX æ‰§è¡Œæ›´å¿«ï¼Œå› ä¸ºå®ƒåœ¨ç¼–è¯‘ä¸º JavaScript ä»£ç åè¿›è¡Œäº†ä¼˜åŒ–ã€‚<br>å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±èƒ½å‘ç°é”™è¯¯ã€‚<br>ä½¿ç”¨ JSX ç¼–å†™æ¨¡æ¿æ›´åŠ ç®€å•å¿«é€Ÿã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&#123;&#123;<span class="attr">color</span>:red&#125;&#125; key=<span class="string">&quot;1&quot;</span> ref=<span class="string">&quot;divRef&quot;</span>&gt;</span><br><span class="line">  &lt;h1&gt;content</span><br><span class="line">    &lt;a&gt;lianjie&lt;/a&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">......è½¬ä¹‰ä¹‹åè¿™æ ·çš„..........</span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line">React.createElement(</span><br><span class="line">  <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    style: &#123;</span><br><span class="line">      color: red</span><br><span class="line">    &#125;,</span><br><span class="line">    key: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    ref: <span class="string">&quot;divRef&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>,</span><br><span class="line">    React.createElement(<span class="string">&quot;a&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;lianjie&quot;</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br>å¦‚æœæˆ‘ä»¬åŠ ä¸ªç»„ä»¶ä¼šå¦‚ä½•å‘¢ï¼Ÿ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Comp</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>i am Component<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div style=&#123;&#123;<span class="attr">color</span>:red&#125;&#125; key=<span class="string">&quot;1&quot;</span> ref=<span class="string">&quot;divRef&quot;</span>&gt;</span><br><span class="line">  &lt;h1&gt;content</span><br><span class="line">    &lt;a&gt;lianjie&lt;/a&gt;</span><br><span class="line">    &lt;Comp/&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">..........è½¬ä¹‰ä¹‹å........</span><br><span class="line">React.createElement(</span><br><span class="line">  <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    style: &#123;</span><br><span class="line">      color: red</span><br><span class="line">    &#125;,</span><br><span class="line">    key: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    ref: <span class="string">&quot;divRef&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>,</span><br><span class="line">    React.createElement(<span class="string">&quot;a&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;lianjie&quot;</span>),</span><br><span class="line">    React.createElement(Comp, <span class="literal">null</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åˆæˆ–è€…è¿™æ ·<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Comp</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>i am Component<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;Comp style=&#123;&#123;<span class="attr">color</span>:red&#125;&#125; key=<span class="string">&quot;1&quot;</span> ref=<span class="string">&quot;divRef&quot;</span>&gt;</span><br><span class="line">  &lt;h1&gt;content</span><br><span class="line">    &lt;a&gt;lianjie&lt;/a&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">&lt;/Comp&gt;</span><br><span class="line">.......è½¬ä¹‰ä¹‹å..........</span><br><span class="line">React.createElement(</span><br><span class="line">  Comp,   <span class="comment">//å˜é‡ä¸ºç»„ä»¶å</span></span><br><span class="line">  &#123;</span><br><span class="line">    style: &#123;</span><br><span class="line">      color: red</span><br><span class="line">    &#125;,</span><br><span class="line">    key: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    ref: <span class="string">&quot;divRef&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>,</span><br><span class="line">    React.createElement(<span class="string">&quot;a&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;lianjie&quot;</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><code>ç»„ä»¶å</code>åƒä¸‡ä¸èƒ½å°å¿ƒä¸ç„¶ä¼šå‡ºç°è¿™æ ·<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">comp</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>i am Component<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;comp style=&#123;&#123;<span class="attr">color</span>:red&#125;&#125; key=<span class="string">&quot;1&quot;</span> ref=<span class="string">&quot;divRef&quot;</span>&gt;</span><br><span class="line">  &lt;h1&gt;content</span><br><span class="line">    &lt;a&gt;lianjie&lt;/a&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">&lt;/comp&gt;</span><br><span class="line">.......è½¬ä¹‰ä¹‹å..........</span><br><span class="line">React.createElement(</span><br><span class="line">  <span class="string">&quot;comp&quot;</span>,   <span class="comment">//å˜é‡ä¸ºå­—ç¬¦ä¸² ä¸æ˜¯æ­£ç¡®çš„åŸç”Ÿæ ‡ç­¾ä¼šå¯¼è‡´æŠ¥é”™</span></span><br><span class="line">  &#123;</span><br><span class="line">    style: &#123;</span><br><span class="line">      color: red</span><br><span class="line">    &#125;,</span><br><span class="line">    key: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    ref: <span class="string">&quot;divRef&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>,</span><br><span class="line">    React.createElement(<span class="string">&quot;a&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;lianjie&quot;</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="ä¸‹ä¸€èŠ‚å­¦ä¹ ä¸‹createElementåˆ°åº•åšäº†äº›ä»€ä¹ˆ"><a href="#ä¸‹ä¸€èŠ‚å­¦ä¹ ä¸‹createElementåˆ°åº•åšäº†äº›ä»€ä¹ˆ" class="headerlink" title="ä¸‹ä¸€èŠ‚å­¦ä¹ ä¸‹createElementåˆ°åº•åšäº†äº›ä»€ä¹ˆ"></a>ä¸‹ä¸€èŠ‚å­¦ä¹ ä¸‹createElementåˆ°åº•åšäº†äº›ä»€ä¹ˆ</h4>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-åŠ¨æ€æ³¨å†Œç»„ä»¶</title>
      <link href="2019/04/23/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6/"/>
      <url>2019/04/23/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨åˆšå¼€å§‹å­¦vueçš„æ—¶å€™å†™ä¸€äº›å°ç»„ä»¶å¼•å…¥åˆ°å¤§ç»„ä»¶ä¸­éƒ½æ˜¯è¿™æ ·çš„ï¼š<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> BaseButton <span class="keyword">from</span> <span class="string">&#x27;./baseButton&#x27;</span></span><br><span class="line"><span class="keyword">import</span> BaseIcon <span class="keyword">from</span> <span class="string">&#x27;./baseIcon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> BaseInput <span class="keyword">from</span> <span class="string">&#x27;./baseInput&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    BaseButton,</span><br><span class="line">    BaseIcon,</span><br><span class="line">    BaseInput</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;BaseInput  v-model=<span class="string">&quot;searchText&quot;</span> @keydown.enter=<span class="string">&quot;search&quot;</span> /&gt;</span><br><span class="line">&lt;BaseButton @click=<span class="string">&quot;search&quot;</span>&gt;  <span class="xml"><span class="tag">&lt;<span class="name">BaseIcon</span> <span class="attr">name</span>=<span class="string">&quot;search&quot;</span>/&gt;</span></span>&lt;/BaseButton&gt;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190430001219.png"                      alt=""                ><br>æ­¥éª¤ä¸€èˆ¬æœ‰ä¸‰æ­¥ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œå¼•å…¥ã€</li><li>ç¬¬äºŒæ­¥æ³¨å†Œã€</li><li>ç¬¬ä¸‰æ­¥æ‰æ˜¯æ­£å¼çš„ä½¿ç”¨ï¼Œ</li></ul><p>è¿™ä¹Ÿæ˜¯æœ€å¸¸è§å’Œé€šç”¨çš„å†™æ³•ã€‚ä½†æ˜¯è¿™ç§å†™æ³•ç»å…¸å½’ç»å…¸ï¼Œå¥½å¤šç»„ä»¶ï¼Œè¦å¼•å…¥å¤šæ¬¡ï¼Œæ³¨å†Œå¤šæ¬¡ï¼Œæ„Ÿè§‰å¾ˆçƒ¦ã€‚<br>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸‹webpackï¼Œä½¿ç”¨ require.context() æ–¹æ³•æ¥åˆ›å»ºè‡ªå·±çš„ï¼ˆæ¨¡å—ï¼‰ä¸Šä¸‹æ–‡ï¼Œä»è€Œå®ç°è‡ªåŠ¨åŠ¨æ€requireç»„ä»¶ã€‚</p><blockquote><p>æ€è·¯æ˜¯ï¼šåœ¨srcæ–‡ä»¶å¤¹ä¸‹é¢main.jsä¸­ï¼Œå€ŸåŠ©webpackåŠ¨æ€å°†éœ€è¦çš„åŸºç¡€ç»„ä»¶ç»Ÿç»Ÿæ‰“åŒ…è¿›æ¥ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>str å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example <span class="variable">heheHaha</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> <span class="variable">HeheHaha</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">capitalizeFirstLetter</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> str.charAt(<span class="number">0</span>).toUpperCase() + str.slice(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹ç¬¦åˆ&#x27;xx/xx.vue&#x27;ç»„ä»¶æ ¼å¼çš„ç»„ä»¶å–ç»„ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>str fileName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example </span>abc/bcd/def/basicTable.vue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> <span class="variable">BasicTable</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validateFileName</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="regexp">/^\S+\.vue$/</span>.test(str) &amp;&amp;</span><br><span class="line">str.replace(<span class="regexp">/^\S+\/(\w+)\.vue$/</span>, <span class="function">(<span class="params">rs, $<span class="number">1</span></span>) =&gt;</span> capitalizeFirstLetter($<span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requireComponent = <span class="built_in">require</span>.context(<span class="string">&#x27;./&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.vue$/</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;requireComponent&#x27;</span>,requireComponent)</span><br><span class="line"><span class="comment">// æ‰¾åˆ°ç»„ä»¶æ–‡ä»¶å¤¹ä¸‹ä»¥.vueå‘½åçš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶åä¸ºindexï¼Œé‚£ä¹ˆå–ç»„ä»¶ä¸­çš„nameä½œä¸ºæ³¨å†Œçš„ç»„ä»¶å</span></span><br><span class="line">requireComponent.keys().forEach(<span class="function"><span class="params">filePath</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> componentConfig = requireComponent(filePath)</span><br><span class="line"><span class="keyword">const</span> fileName = validateFileName(filePath)</span><br><span class="line"><span class="keyword">const</span> componentName = fileName.toLowerCase() === <span class="string">&#x27;index&#x27;</span></span><br><span class="line">? capitalizeFirstLetter(componentConfig.default.name)</span><br><span class="line">: fileName</span><br><span class="line"><span class="comment">// å…¨å±€æ³¨å†Œç»„ä»¶</span></span><br><span class="line">Vue.component(</span><br><span class="line">componentName,</span><br><span class="line"><span class="comment">// å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ `export default` å¯¼å‡ºçš„ï¼Œ</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ `.default`ï¼Œ</span></span><br><span class="line"><span class="comment">// å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹ã€‚</span></span><br><span class="line">componentConfig.default || componentConfig)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨main.jsä¸­å¼•å…¥<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/icons&#x27;</span></span><br><span class="line"><span class="comment">// å…¨å±€æŒ‚è½½è¯·æ±‚</span></span><br><span class="line"><span class="keyword">import</span> Global <span class="keyword">from</span> <span class="string">&#x27;./global&#x27;</span>;</span><br><span class="line"><span class="comment">// å…¨å±€æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> componentRegister <span class="keyword">from</span> <span class="string">&#x27;./components/componentRegister&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&#x27;./components/loadding&#x27;</span></span><br><span class="line"><span class="comment">// å…¨å±€è®¾ç½®èŠ‚æµ/é˜²æŠ–</span></span><br><span class="line"><span class="keyword">import</span> Throttle <span class="keyword">from</span> <span class="string">&#x27;./components/Throttle&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.component(<span class="string">&#x27;Throttle&#x27;</span>, Throttle)</span><br><span class="line">Vue.use(Loading)</span><br><span class="line">Vue.use(Global)</span><br><span class="line"> </span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">componentRegister,<span class="comment">//å¼•å…¥</span></span><br><span class="line">render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><br>BasicTable.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;æˆ‘æ˜¯BasicTableå°ç»„ä»¶&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">name:<span class="string">&quot;BasicTable&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190430001604.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-è¯·æ±‚ç¯‡</title>
      <link href="2019/04/21/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E8%AF%B7%E6%B1%82%E7%AF%87/"/>
      <url>2019/04/21/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E8%AF%B7%E6%B1%82%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>å…ˆçœ‹çœ‹ç›®å½•ä¸€èˆ¬é¡¹ç›®ä¸­å¤„ç†æ­å»ºç¯å¢ƒæˆ‘ä»¬æœ€å¸¸åšçš„å°±æ˜¯å°è£…è¯·æ±‚ï¼Œä»Šå¤©å°±æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å°è£…ä¸€ä¸ªå¥½ç”¨çš„è¯·æ±‚<br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190421233649.png"                      alt=""                ></p><h1 id="æ¥å£æ¨¡å—å¤„ç†"><a href="#æ¥å£æ¨¡å—å¤„ç†" class="headerlink" title="æ¥å£æ¨¡å—å¤„ç†"></a>æ¥å£æ¨¡å—å¤„ç†</h1><h2 id="å¯¹axiosçš„äºŒæ¬¡å°è£…"><a href="#å¯¹axiosçš„äºŒæ¬¡å°è£…" class="headerlink" title="å¯¹axiosçš„äºŒæ¬¡å°è£…"></a>å¯¹<code>axios</code>çš„äºŒæ¬¡å°è£…</h2><p>å¾ˆåŸºç¡€çš„éƒ¨åˆ†,è¿™é‡Œçš„å°è£…æ˜¯ä¾æ® JWT<br>å‰æè¿˜éœ€è¦çŸ¥é“<br>ä»€ä¹ˆæ˜¯ router.history.current.path å‘Šè¯‰ä½ <br>ä»€ä¹ˆæ˜¯ router.currentRoute.fullPath å‘Šè¯‰ä½ å½“å‰è·¯å¾„é“¾æ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; MessageBox, Message &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> loginUrl = <span class="string">&#x27;/login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®ç¯å¢ƒåˆ‡æ¢æ¥å£åœ°å€</span></span><br><span class="line">axios.defaults.baseURL = process.env.VUE_APP_API</span><br><span class="line">axios.defaults.headers = &#123;</span><br><span class="line"><span class="string">&#x27;Postman-Token&#x27;</span>: <span class="string">&#x27;3deda212-00f1-44e5-8d92-18463283de1d&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line">axios.defaults.timeout = <span class="number">60000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆª</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">config =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (router.history.current.path !== loginUrl &amp;&amp; router.history.current.path != <span class="string">&quot;/about&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> token = <span class="built_in">window</span>.sessionStorage.getItem(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (token == <span class="literal">null</span>) &#123;</span><br><span class="line">router.replace(&#123; <span class="attr">path</span>: loginUrl, <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.currentRoute.fullPath &#125; &#125;)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">config.headers[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="string">&#x27;JWT&#x27;</span> + token</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">Message.warning(error)</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆª  å¼‚å¸¸å¤„ç†</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> response.data</span><br><span class="line">  &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.message !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">switch</span> (error.response.status) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">          MessageBox.alert(error.response.data)</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">window</span>.sessionStorage.getItem(<span class="string">&#x27;out&#x27;</span>) === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">window</span>.sessionStorage.setItem(<span class="string">&#x27;out&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">            MessageBox.confirm(<span class="string">&#x27;ä¼šè¯å·²å¤±æ•ˆ! è¯·é‡æ–°ç™»å½•&#x27;</span>, <span class="string">&#x27;æç¤º&#x27;</span>, &#123;</span><br><span class="line">              confirmButtonText: <span class="string">&#x27;é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">              cancelButtonText: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">              type: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">            &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              router.replace(&#123; <span class="attr">path</span>: loginUrl, <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.currentRoute.fullPath &#125; &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">402</span>:</span><br><span class="line">          MessageBox.confirm(<span class="string">&#x27;ç™»é™†è¶…æ—¶ ï¼&#x27;</span>, <span class="string">&#x27;æç¤º&#x27;</span>, &#123;</span><br><span class="line">            confirmButtonText: <span class="string">&#x27;é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">            cancelButtonText: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">          &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            router.replace(&#123; <span class="attr">path</span>: loginUrl, <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.currentRoute.fullPath &#125; &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">          MessageBox.alert(<span class="string">&#x27;æ²¡æœ‰æƒé™&#x27;</span>)</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          MessageBox.alert(<span class="string">`è¿æ¥é”™è¯¯<span class="subst">$&#123;error.response.status&#125;</span>`</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºåŸºç¡€çš„è¯·æ±‚ç±»å‹å°è£…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// å…¶ä¸­ç»™ getè¯·æ±‚åŠ ä¸Šæ—¶é—´æˆ³å‚æ•°ï¼Œé¿å…ä»ç¼“å­˜ä¸­æ‹¿æ•°æ®</span></span><br><span class="line">get (url, param) &#123;</span><br><span class="line"><span class="keyword">if</span> (param !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">param = &#123; ...param, <span class="attr">_t</span>: (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime() &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">param = &#123; <span class="attr">_t</span>: (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime() &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">axios(&#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, url, <span class="attr">param</span>: param &#125;)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">resolve(res)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">getData (url, param) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">axios(&#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, url, <span class="attr">param</span>: param &#125;)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (res.code === <span class="number">4000</span>) &#123;</span><br><span class="line">resolve(res.data)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">Message.warning(res.msg)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">post (url, param, config) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;router.history.current.path:å½“å‰è·¯å¾„&#x27;</span>,router.history.current.path)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;router.currentRoute.fullPath:&#x27;</span>,router.currentRoute.fullPath)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">axios.post(url, param, config)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">resolve(res)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç»Ÿä¸€è¯·æ±‚å…¥å£"><a href="#ç»Ÿä¸€è¯·æ±‚å…¥å£" class="headerlink" title="ç»Ÿä¸€è¯·æ±‚å…¥å£"></a>ç»Ÿä¸€è¯·æ±‚å…¥å£</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// è¯·æ±‚æŒ‰æ¨¡æ¿åˆå¹¶</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> login <span class="keyword">from</span> <span class="string">&#x27;./login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const api = Object.assign(&#123;&#125;,http,login,å…¶ä»–apiæ¨¡æ¿)</span></span><br><span class="line"><span class="keyword">const</span> api = <span class="built_in">Object</span>.assign(&#123;&#125;, http, login)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> api</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å•ç‹¬è¯·æ±‚"><a href="#å•ç‹¬è¯·æ±‚" class="headerlink" title="å•ç‹¬è¯·æ±‚"></a>å•ç‹¬è¯·æ±‚</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://easy-mock.com/mock/5cbe83dd59a6ea65f79ad4f5/api/v1/login</span></span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&quot;https://easy-mock.com/mock/5cbe83dd59a6ea65f79ad4f5&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  login (param) &#123;</span><br><span class="line">    <span class="keyword">return</span> http.post(<span class="string">&#x27;http://rap2api.taobao.org/app/mock/6006/api/u/verify&#x27;</span>, param)</span><br><span class="line">  &#125;,</span><br><span class="line">  out (param) &#123;</span><br><span class="line">    <span class="keyword">return</span> http.get(<span class="string">&#x27;/api/v1/out&#x27;</span>, param)</span><br><span class="line">  &#125;,</span><br><span class="line">  register (param) &#123;</span><br><span class="line">    <span class="keyword">return</span> http.post(<span class="string">&#x27;/api/v1/register&#x27;</span>, param)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…¨å±€å¯¼å…¥åœ¨main-js"><a href="#å…¨å±€å¯¼å…¥åœ¨main-js" class="headerlink" title="å…¨å±€å¯¼å…¥åœ¨main.js"></a>å…¨å±€å¯¼å…¥åœ¨main.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/icons&#x27;</span></span><br><span class="line"><span class="comment">// å…¨å±€æŒ‚è½½è¯·æ±‚</span></span><br><span class="line"><span class="keyword">import</span> Global <span class="keyword">from</span> <span class="string">&#x27;./global&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(vm)</span><br></pre></td></tr></table></figure><p>åŠ è½½å<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190423163202.png"                      alt=""                ></p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; MessageBox, Message, Button, &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">name: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">data () &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">val: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">onClick ($ev, val) &#123;</span><br><span class="line"><span class="built_in">this</span>.val += val</span><br><span class="line">&#125;,</span><br><span class="line">getData: <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.$http.login(&#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;å“ˆå“ˆ&#x27;</span> &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br><span class="line">res.success ? Message.success(<span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>) : <span class="built_in">this</span>.$message.warning(res.msg)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190423163332.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ReactNativeç¦»çº¿æ¡†æ¶è®¾è®¡</title>
      <link href="2019/04/13/ReactNative%E7%A6%BB%E7%BA%BF%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/"/>
      <url>2019/04/13/ReactNative%E7%A6%BB%E7%BA%BF%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°ï¼Œæœ€è¿‘ä¸€ç›´èµ¶é¡¹ç›®ï¼Œç–²æ• - -ï¼ï¼ï¼<br><a id="more"></a><br>æœ€è¿‘é¡¹ç›®å‡çº§2.0ï¼Œå¢åŠ äº†ä¸€ä¸ªç¦»çº¿ç¼“å­˜çš„åŠŸèƒ½ä¼˜åŒ–ã€‚è®°å½•ä¸€ä¸‹ï¼š</p><h1 id="AsyncStorageä»‹ç»"><a href="#AsyncStorageä»‹ç»" class="headerlink" title="AsyncStorageä»‹ç»"></a>AsyncStorageä»‹ç»</h1><p>AsyncStorage æ˜¯ä¸€ä¸ªç®€å•çš„ã€å¼‚æ­¥çš„ã€æŒä¹…åŒ–çš„ Key-Value å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯¹äº App æ¥è¯´æ˜¯å…¨å±€æ€§çš„ã€‚å®ƒç”¨æ¥ä»£æ›¿ LocalStorageã€‚<br>ç”±äºå®ƒçš„æ“ä½œæ˜¯å…¨å±€çš„ï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬æœ€å¥½é’ˆå¯¹ AsyncStorage è¿›è¡Œä¸€ä¸‹æŠ½è±¡çš„å°è£…å†ä½¿ç”¨ï¼Œè€Œä¸”ä¸æ˜¯ç›´æ¥æ‹¿ AsyncStorage è¿›è¡Œä½¿ç”¨ã€‚<br>AsyncStorage å­˜å‚¨çš„ä½ç½®æ ¹æ®ç³»ç»Ÿçš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚iOS ä¸­çš„å­˜å‚¨ç±»ä¼¼äº NSUserDefaultï¼Œé€šè¿‡ plist æ–‡ä»¶å­˜æ”¾åœ¨è®¾å¤‡ä¸­ã€‚Android ä¸­ä¼šå­˜å‚¨åœ¨ RocksDB æˆ–è€… SQLite ä¸­ï¼Œå–å†³äºä½ ä½¿ç”¨å“ªä¸ªã€‚</p><h1 id="ç›¸å…³æ–¹æ³•"><a href="#ç›¸å…³æ–¹æ³•" class="headerlink" title="ç›¸å…³æ–¹æ³•"></a>ç›¸å…³æ–¹æ³•</h1><p>ï¼ˆ1ï¼‰æ ¹æ®é”®æ¥è·å–å€¼ï¼Œè·å–çš„ç»“æœä¼šæ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚</p><blockquote><p>static getItem(key: string, callback:(error, result))</p></blockquote><p>ï¼ˆ2ï¼‰æ ¹æ®é”®æ¥è®¾ç½®å€¼ã€‚</p><blockquote><p>static setItem(key: string, value: string, callback:(error))</p></blockquote><p>ï¼ˆ3ï¼‰æ ¹æ®é”®æ¥ç§»é™¤é¡¹ã€‚</p><blockquote><p>static removeItem(key: string, callback:(error))</p></blockquote><p>ï¼ˆ4ï¼‰åˆå¹¶ç°æœ‰å€¼å’Œè¾“å…¥å€¼ã€‚</p><blockquote><p>static mergeItem(key: string, value: string, callback:(error))</p></blockquote><p>ï¼ˆ5ï¼‰æ¸…é™¤æ‰€æœ‰çš„é¡¹ç›®</p><blockquote><p>static clear(callback:(error))</p></blockquote><p>ï¼ˆ6ï¼‰è·å–æ‰€æœ‰çš„é”®</p><blockquote><p>static getAllKeys(callback:(error, keys))</p></blockquote><p>ï¼ˆ7ï¼‰æ¸…é™¤æ‰€æœ‰è¿›è¡Œä¸­çš„æŸ¥è¯¢æ“ä½œã€‚</p><blockquote><p>static flushGetRequests()</p></blockquote><p>ï¼ˆ8ï¼‰è·å–å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]</p><blockquote><p>static multiGet(keys, callback:(errors, result))</p></blockquote><p>ï¼ˆ9ï¼‰è®¾ç½®å¤šé¡¹ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]]</p><blockquote><p>static multiSet(keyValuePairs, callback:(errors))</p></blockquote><p>ï¼ˆ10ï¼‰åˆ é™¤å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]</p><blockquote><p>static multiRemove(keys, callback:(errors))</p></blockquote><p>ï¼ˆ11ï¼‰å¤šä¸ªé”®å€¼åˆå¹¶ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]]</p><blockquote><p>static multiMerge(keyValuePairs, callback:(errors))</p></blockquote><h1 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h1><p><strong>ä¸ºä»€ä¹ˆè¦ç¦»çº¿ç¼“å­˜ï¼Ÿ</strong></p><ol><li>æå‡ç”¨æˆ·ä½“éªŒ</li><li>èŠ‚çœæµé‡</li></ol><p>ç¼ºç‚¹åªèƒ½é’ˆå¯¹ä¸€äº›å¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„Appå¼€å‘</p><p><strong>ç¦»çº¿ç¼“å­˜çš„ç­–ç•¥ï¼š</strong></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/B70AB6D31BF9E9DE957B8611630B1616.jpg"                      alt=""                ></p><h2 id="é¦–å…ˆä¿å­˜æ•°æ®"><a href="#é¦–å…ˆä¿å­˜æ•°æ®" class="headerlink" title="é¦–å…ˆä¿å­˜æ•°æ®"></a>é¦–å…ˆä¿å­˜æ•°æ®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param <span class="variable">data</span></span></span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param <span class="variable">callback</span></span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function"><span class="title">saveData</span>(<span class="params">url, data, callback</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (!data || !url) <span class="keyword">return</span>;</span><br><span class="line">   AsyncStorage.setItem(url, <span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>._wrapData(data)), callback);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„<code>AsyncStorage</code>æ— æ³•ä¿å­˜ä¸º<code>object</code>ç±»å‹æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶åºåˆ—å·æˆ<code>json</code></p><h2 id="è·å–æœ¬åœ°æ—¶é—´è®¾ç½®æœ‰æ•ˆæœŸã€‚æ¨èè®¾ç½®ä¸ºæœåŠ¡å™¨æ—¶é—´"><a href="#è·å–æœ¬åœ°æ—¶é—´è®¾ç½®æœ‰æ•ˆæœŸã€‚æ¨èè®¾ç½®ä¸ºæœåŠ¡å™¨æ—¶é—´" class="headerlink" title="è·å–æœ¬åœ°æ—¶é—´è®¾ç½®æœ‰æ•ˆæœŸã€‚æ¨èè®¾ç½®ä¸ºæœåŠ¡å™¨æ—¶é—´"></a>è·å–æœ¬åœ°æ—¶é—´è®¾ç½®æœ‰æ•ˆæœŸã€‚æ¨èè®¾ç½®ä¸ºæœåŠ¡å™¨æ—¶é—´</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">_wrapData</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123;<span class="attr">data</span>: data, <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()&#125;;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="ç„¶åå…ˆè·å–æœ¬åœ°æ•°æ®"><a href="#ç„¶åå…ˆè·å–æœ¬åœ°æ•°æ®" class="headerlink" title="ç„¶åå…ˆè·å–æœ¬åœ°æ•°æ®"></a>ç„¶åå…ˆè·å–æœ¬åœ°æ•°æ®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æœ¬åœ°æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="title">fetchLocalData</span>(<span class="params">url</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    AsyncStorage.getItem(url, <span class="function">(<span class="params">error, result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          resolve(<span class="built_in">JSON</span>.parse(result));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e);</span><br><span class="line">          <span class="built_in">console</span>.error(e);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(error);</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¦urlå»æ¯”å¯¹æœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œä¿å­˜ç±»å‹ä¸ºå­—ç¬¦ä¸²stringç±»å‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒç”¨åç”¨è½¬æˆobjectä½¿ç”¨</p><h2 id="è·å–ç½‘ç»œæ•°æ®"><a href="#è·å–ç½‘ç»œæ•°æ®" class="headerlink" title="è·å–ç½‘ç»œæ•°æ®"></a>è·å–ç½‘ç»œæ•°æ®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–ç½‘ç»œæ•°æ®</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param <span class="variable">flag</span></span></span></span><br><span class="line"><span class="comment">  * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function"><span class="title">fetchNetData</span>(<span class="params">url, flag</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (flag !== FLAG_STORAGE.flag_trending) &#123;</span><br><span class="line">       fetch(url)</span><br><span class="line">         .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">             <span class="keyword">return</span> response.json();</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Network response was not ok.&#x27;</span>);</span><br><span class="line">         &#125;)</span><br><span class="line">         .then(<span class="function">(<span class="params">responseData</span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.saveData(url, responseData)</span><br><span class="line">           resolve(responseData);</span><br><span class="line">         &#125;)</span><br><span class="line">         .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">           reject(error);</span><br><span class="line">         &#125;)</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">new</span> Trending().fetchTrending(url)</span><br><span class="line">         .then(<span class="function"><span class="params">items</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (!items) &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;responseData is null&#x27;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="built_in">this</span>.saveData(url, items);</span><br><span class="line">           resolve(items);</span><br><span class="line">         &#125;)</span><br><span class="line">         .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">           reject(error);</span><br><span class="line">         &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€åæˆ‘ä»¬å°è£…fetchè¯·æ±‚"><a href="#æœ€åæˆ‘ä»¬å°è£…fetchè¯·æ±‚" class="headerlink" title="æœ€åæˆ‘ä»¬å°è£…fetchè¯·æ±‚"></a>æœ€åæˆ‘ä»¬å°è£…fetchè¯·æ±‚</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DataStore</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–æ•°æ®ï¼Œä¼˜å…ˆè·å–æœ¬åœ°æ•°æ®ï¼Œå¦‚æœæ— æœ¬åœ°æ•°æ®æˆ–æœ¬åœ°æ•°æ®è¿‡æœŸåˆ™è·å–ç½‘ç»œæ•°æ®</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="variable">flag</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">fetchData</span>(<span class="params">url, flag</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.fetchLocalData(url).then(<span class="function">(<span class="params">wrapData</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (wrapData &amp;&amp; DataStore.checkTimestampValid(wrapData.timestamp)) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–æœ¬åœ°ç¼“å­˜&#x27;</span>,wrapData)</span><br><span class="line">          resolve(wrapData);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//æœ¬åœ°æ²¡æœ‰å°±è·å–ç½‘ç»œè¯·æ±‚</span></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;url&#x27;</span>,url,<span class="string">&#x27;flag&#x27;</span>,flag)</span><br><span class="line">          <span class="built_in">this</span>.fetchNetData(url, flag).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            resolve(<span class="built_in">this</span>._wrapData(data));</span><br><span class="line">          &#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">            reject(error);</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fetchNetData(url, flag).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">          resolve(<span class="built_in">this</span>._wrapData(data));</span><br><span class="line">        &#125;).catch((<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          reject(error);</span><br><span class="line">        &#125;))</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ—¶é—´æœ‰æ•ˆæœŸçš„æ£€æµ‹"><a href="#æ—¶é—´æœ‰æ•ˆæœŸçš„æ£€æµ‹" class="headerlink" title="æ—¶é—´æœ‰æ•ˆæœŸçš„æ£€æµ‹"></a>æ—¶é—´æœ‰æ•ˆæœŸçš„æ£€æµ‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ£€æŸ¥timestampæ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param </span>timestamp é¡¹ç›®æ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return <span class="type">&#123;boolean&#125;</span> </span>true ä¸éœ€è¦æ›´æ–°,falseéœ€è¦æ›´æ–°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">checkTimestampValid</span>(<span class="params">timestamp</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">const</span> targetDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    targetDate.setTime(timestamp);</span><br><span class="line">    <span class="keyword">if</span> (currentDate.getMonth() !== targetDate.getMonth()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (currentDate.getDate() !== targetDate.getDate()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (currentDate.getHours() - targetDate.getHours() &gt; <span class="number">4</span>) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//æœ‰æ•ˆæœŸ4ä¸ªå°æ—¶</span></span><br><span class="line">    <span class="comment">// if (currentDate.getMinutes() - targetDate.getMinutes() &gt; 1)return false;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/109DBFA9DD749C2BBA15F11B81313CF4.gif"                      alt=""                ></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a class="link"   href="http://www.devio.org/2016/09/05/React-Native%E4%B9%8BAsyncStorage%E5%AD%98%E5%82%A8key%E7%AE%A1%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7/" >è´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢å®˜ç½‘<i class="fas fa-external-link-alt"></i></a><br><a class="link"   href="https://blog.csdn.net/qq_34161388/article/details/78044095" >å‚è€ƒä¸€<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ReactNative ä¸­ä½¿ç”¨reduxå’Œlogger,thunk</title>
      <link href="2019/03/28/ReactNative_redux/"/>
      <url>2019/03/28/ReactNative_redux/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°reduxï¼Œä»Šå¤©å°±ç”¨åŠ ç­æ—¶é—´æ¥é‡æ–°å¤ä¹ ä¸‹å­¦ä¹ ä¸€ä¸‹ï¼›ä¹‹å‰å‘è¡¨è¿‡reactçš„reduxï¼›<br><a id="more"></a></p><h2 id="å…ˆçœ‹ä¸‹å…·ä½“æµç¨‹æˆ‘ä»¬ä¸€ä¸€ä»‹ç»"><a href="#å…ˆçœ‹ä¸‹å…·ä½“æµç¨‹æˆ‘ä»¬ä¸€ä¸€ä»‹ç»" class="headerlink" title="å…ˆçœ‹ä¸‹å…·ä½“æµç¨‹æˆ‘ä»¬ä¸€ä¸€ä»‹ç»"></a>å…ˆçœ‹ä¸‹å…·ä½“æµç¨‹æˆ‘ä»¬ä¸€ä¸€ä»‹ç»</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190327192953.png"                      alt=""                ></p><h2 id="äº†è§£ä¸‹reduxç‰¹æ€§"><a href="#äº†è§£ä¸‹reduxç‰¹æ€§" class="headerlink" title="äº†è§£ä¸‹reduxç‰¹æ€§"></a>äº†è§£ä¸‹reduxç‰¹æ€§</h2><ol><li>å•ä¸€æ•°æ®æºï¼š æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚</li><li>State æ˜¯åªè¯»çš„ï¼šå”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚</li><li>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹ï¼šä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚</li><li>é¢„è§æ€§ï¼šæ‰€æœ‰çš„ç”¨æˆ·çš„è¡Œä¸ºéƒ½æ˜¯ä½ æå‰å®šä¹‰å¥½çš„ã€‚</li><li>ç»Ÿä¸€ç®¡ç†stateï¼šæ‰€æœ‰çš„çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªstoreä¸­åˆ†é…ç®¡ç†ã€‚</li></ol><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><ol><li>ç”¨æˆ·ï¼ˆæ“ä½œviewï¼‰å‘å‡ºactionï¼Œå‘å‡ºçš„æ–¹å¼ç”¨dispatchæ–¹æ³•ï¼›</li><li>ç„¶åstoreè°ƒç”¨redurceï¼Œå¹¶ä¼ å…¥2ä¸ªå‚æ•°ï¼ˆä¸€ä¸ªå½“å‰stateï¼Œä¸€ä¸ªæ”¶åˆ°çš„actionï¼‰ï¼Œreducerä¼šè¿”å›æ–°çš„stateï¼Œå¦‚æœæœ‰middlewareï¼Œstoreä¼šå°†å½“å‰stateå’Œæ”¶åˆ°çš„actionä¼ é€’ç»™middlewareï¼Œmiddlewareä¼šè°ƒç”¨reducerï¼Œè¿”å›æ–°çš„stateï¼›</li><li>stateä¸€æ—¦æœ‰å˜åŒ–ï¼Œstoreå°±ä¼šç›‘å¬åˆ°ï¼Œæ¥æ›´æ–°Viewï¼›</li></ol><h2 id="Reduxä¸Fluxçš„åŒºåˆ«"><a href="#Reduxä¸Fluxçš„åŒºåˆ«" class="headerlink" title="Reduxä¸Fluxçš„åŒºåˆ«"></a>Reduxä¸Fluxçš„åŒºåˆ«</h2><p>Reduxæ˜¯Fluxæ€æƒ³çš„ä¸€ç§å®ç°ï¼ŒåŒæ—¶åˆåœ¨å…¶åŸºç¡€ä¸Šåšäº†æ”¹è¿›ã€‚Reduxç§‰æ‰¿äº†Fluxå•å‘æ•°æ®æµã€Storeæ˜¯å”¯ä¸€çš„æ•°æ®æºçš„æ€æƒ³ã€‚</p><ol><li>Reduxä¸­æ²¡æœ‰Dispatcher: å®ƒä½¿ç”¨Storeçš„Store.dispatch0æ–¹æ³•æ¥æŠŠactionä¼ ç»™Store, ç”±äºæ‰€æœ‰çš„actionå¤„ç†éƒ½ä¼šç»è¿‡è¿™ä¸ªStore.dispatch0æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨Reduxä¸­å¾ˆå®¹æ˜“å®ç°Middlewareæœºåˆ¶ã€‚</li><li>Middlewareå¯ä»¥è®©ä½ åœ¨reduceræ‰§è¡Œå‰ä¸æ‰§è¡Œåè¿›è¡Œæ‹¦æˆªå¹¶æ’å…¥ä»£ç ï¼Œæ¥è¾¾åˆ°æ“ä½œactionå’ŒStoreçš„ç›®çš„ï¼Œè¿™æ ·-æ¥å°±å¾ˆå®¹æ˜“å®ç°çµæ´»çš„æ—¥å¿—æ‰“å°ã€é”™è¯¯æ”¶é›†ã€APIè¯·æ±‚ã€è·¯ç”±ç­‰æ“ä½œã€‚</li><li>Reduxåªæœ‰ä¸€ä¸ªStore: Fluxä¸­å…è®¸æœ‰å¤šä¸ªStore, ä½†æ˜¯Reduxä¸­åªå…è®¸æœ‰- ä¸ªï¼Œç›¸è¾ƒäºå¤šä¸ªStoreçš„Flux,ä¸€ä¸ªStoreæ›´åŠ æ¸…æ™°ï¼Œäº•æ˜“äºç®¡ç†;<h2 id="Reduxæœ‰é‚£å‡ éƒ¨åˆ†æ„æˆ"><a href="#Reduxæœ‰é‚£å‡ éƒ¨åˆ†æ„æˆ" class="headerlink" title="Reduxæœ‰é‚£å‡ éƒ¨åˆ†æ„æˆ?"></a>Reduxæœ‰é‚£å‡ éƒ¨åˆ†æ„æˆ?</h2></li><li>action: actionå°±æ˜¯ä¸€ ä¸ªæè¿°å‘ç”Ÿä»€ä¹ˆçš„å¯¹è±¡;</li><li>reducer: å½¢å¼ä¸º(state, action) =&gt; stateçš„çº¯å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯æ ¹æ®action ä¿®æ”¹stateå°†å…¶è½¬å˜æˆä¸‹ä¸€ä¸ªstate;</li><li>store: ç”¨äºå­˜å‚¨state, ä½ å¯ä»¥æŠŠå®ƒçœ‹æˆ-ä¸ªå®¹å™¨ï¼Œæ•´ä¸ªåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªstore<h2 id="å®æˆ˜éƒ¨åˆ†"><a href="#å®æˆ˜éƒ¨åˆ†" class="headerlink" title="å®æˆ˜éƒ¨åˆ†"></a>å®æˆ˜éƒ¨åˆ†</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190327195155.png"                      alt=""                ><h3 id="åˆ›å»ºstore"><a href="#åˆ›å»ºstore" class="headerlink" title="åˆ›å»ºstore"></a>åˆ›å»ºstore</h3></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="comment">//å¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> createLogger <span class="keyword">from</span> <span class="string">&#x27;redux-logger&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">&#x27;../reducers&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">configureStore</span>(<span class="params">initialState</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createStore(</span><br><span class="line">        rootReducer,</span><br><span class="line">        initialState,</span><br><span class="line">        compose(applyMiddleware(thunk, createLogger))</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = configureStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure><h3 id="é¦–å…ˆæœ€å¤–å±‚å¯¼å…¥store"><a href="#é¦–å…ˆæœ€å¤–å±‚å¯¼å…¥store" class="headerlink" title="é¦–å…ˆæœ€å¤–å±‚å¯¼å…¥store"></a>é¦–å…ˆæœ€å¤–å±‚å¯¼å…¥store</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190327200154.png"                      alt=""                ></p><h3 id="éœ€è¦è¾…åŠ©å·¥å…·"><a href="#éœ€è¦è¾…åŠ©å·¥å…·" class="headerlink" title="éœ€è¦è¾…åŠ©å·¥å…·"></a>éœ€è¦è¾…åŠ©å·¥å…·</h3><p>redux-logger(è¿™ä¸ªä¼šæ‰“å°ä½ çš„æ‰€æœ‰ stateå’Œ actionå˜åŒ– , å»ºè®®ä½¿ç”¨)<br>redux-thunk(ä¸­é—´ä»¶, ç”¨äºå¼‚æ­¥æ“ä½œ)<br>react-navigation(å¦‚æœä½ è¦åšå¤šä¸ªé¡µé¢è·³è½¬å°±install)</p><p> é’ˆå¯¹ä¸åŒåŠŸèƒ½ç‚¹å¯ä»¥è®¾ç½®ä¸åŒçš„reducer, æ‹†åˆ† reducer å¯¹ä¸€ä¸ªä¸åŒçš„æ“ä½œ, ç„¶åç”¨combineReducers åˆå¹¶æ‰€æœ‰çš„ reducer åˆ° rootReducer<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190327200429.png"                      alt=""                ></p><h3 id="ç”¨æˆ·è§¦å‘action"><a href="#ç”¨æˆ·è§¦å‘action" class="headerlink" title="ç”¨æˆ·è§¦å‘action"></a>ç”¨æˆ·è§¦å‘action</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; View, Text, TextInput, Image, TouchableOpacity &#125; <span class="keyword">from</span> <span class="string">&quot;react-native&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> loginAction <span class="keyword">from</span> <span class="string">&quot;../actions/LoginActions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> themeAction <span class="keyword">from</span> <span class="string">&quot;../actions/ThemeActions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">&quot;react-navigation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MainPage <span class="keyword">from</span> <span class="string">&quot;./MainPage&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> navigationOptions = &#123;</span><br><span class="line">    title: <span class="string">&quot;LoginPage&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nextProps.status === <span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span> &amp;&amp; nextProps.isSuccess) &#123;</span><br><span class="line">      <span class="built_in">this</span>.props.navigation.push(<span class="string">&quot;Main&quot;</span>, &#123; <span class="attr">user</span>: nextProps.user &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; LoginAction &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.props);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">backgroundColor</span>: <span class="string">&quot;#fff&quot;</span>, <span class="attr">alignItems</span>: <span class="string">&quot;center&quot;</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;TouchableOpacity</span><br><span class="line">          style=&#123;&#123; <span class="attr">backgroundColor</span>: <span class="string">&quot;#cdcdcd&quot;</span>, <span class="attr">marginTop</span>: <span class="number">200</span> &#125;&#125;</span><br><span class="line">          onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.props.dispatch(loginAction.requireLogin());</span><br><span class="line">            <span class="comment">// LoginAction()</span></span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">        ......</span><br><span class="line"><span class="comment">// apStateToProps(state) æŠŠ reducer é‡Œæ”¹å˜è¿‡çš„ state é€šè¿‡ props ä¼ é€’è¿‡æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    status: state.LoginReducer.data.status,</span><br><span class="line">    isSuccess: state.LoginReducer.data.isSuccess,</span><br><span class="line">    user: state.LoginReducer.data.user,</span><br><span class="line">    color: state.themeReducer.color</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨ç»‘å®š action creatorsåˆ° dispatch() å‡½æ•° è¿™ä¸ªå‡½æ•°ä¸€æ · æŠŠä½ è¦ dispatch çš„ action å½“åš props ä¼ é€’è¿‡æ¥  å¦‚æœè¿™ä¹ˆå†™ ä¸Šé¢çš„è§¦å‘ action çš„æ—¶å€™å°±ä¸è¦ this.prop.dispatch(xxxAction) äº† , å¯ä»¥ç›´æ¥å†™ this,props.LoginAction</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matchDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    LoginAction: bindActionCreators(loginAction.requireLogin, dispatch)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect è¿æ¥ç»„ä»¶ä¸ store ,ä»»ä½•æ—¶å€™åªè¦ store å‘ç”Ÿæ”¹å˜, mapStateToProps éƒ½ä¼šè¢«è°ƒç”¨, å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°é‡Œæœ‰ä¸¤ä¸ªå‚æ•° åˆ†åˆ«æ˜¯mapStateToProps  matchDispatchToProps</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(LoginPage);</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œactionæ–¹æ³•"><a href="#æ‰§è¡Œactionæ–¹æ³•" class="headerlink" title="æ‰§è¡Œactionæ–¹æ³•"></a>æ‰§è¡Œactionæ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">&#x27;../constants/LoginTypes&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; loginRequest &#125; <span class="keyword">from</span> <span class="string">&#x27;../API/loginRequest&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login_out</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type: types.LOGIN_IN_OUT,</span><br><span class="line">        data</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥çš„Action éœ€è¦è¿”å›çš„æ˜¯ä¸€ä¸ª function åœ¨ createStore æ—¶ç”±middleWare åšå¤„ç†  æ™®é€šçš„action ç›´æ¥è¿”å›çº¯å¯¹è±¡å³å¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">requireLogin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> loginRequest();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œapiaction-jsä¸­çš„æ–¹æ³•ï¼Œstore-ã€‹reducer"><a href="#æ‰§è¡Œapiaction-jsä¸­çš„æ–¹æ³•ï¼Œstore-ã€‹reducer" class="headerlink" title="æ‰§è¡Œapiaction.jsä¸­çš„æ–¹æ³•ï¼Œstore-ã€‹reducer"></a>æ‰§è¡Œapiaction.jsä¸­çš„æ–¹æ³•ï¼Œstore-ã€‹reducer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> *<span class="keyword">as</span> loginActions <span class="keyword">from</span> <span class="string">&#x27;../actions/LoginActions&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚æ–¹æ³• åœ¨è¿™é‡Œå†è¿›è¡Œ dispatch Action</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">loginRequest</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch(loginActions.login_doing(doingData));</span><br><span class="line">        <span class="keyword">let</span> result = fetch(url)</span><br><span class="line">            .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(loginActions.login_done(doneData));</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(loginActions.login_err(errData));</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡reducerè¿”å›æ–°çš„state"><a href="#é€šè¿‡reducerè¿”å›æ–°çš„state" class="headerlink" title="é€šè¿‡reducerè¿”å›æ–°çš„state"></a>é€šè¿‡reducerè¿”å›æ–°çš„state</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">loginIn</span>(<span class="params">state = initialState, action</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(state.type,action);</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> types.LOGIN_IN_DOING:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                data: action.data</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€åé‡æ–°æ ¹æ®storeä¸­çš„stateæ›´æ–°View"><a href="#æœ€åé‡æ–°æ ¹æ®storeä¸­çš„stateæ›´æ–°View" class="headerlink" title="æœ€åé‡æ–°æ ¹æ®storeä¸­çš„stateæ›´æ–°View"></a>æœ€åé‡æ–°æ ¹æ®storeä¸­çš„stateæ›´æ–°View</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; View, Text, TextInput, Image, TouchableOpacity &#125; <span class="keyword">from</span> <span class="string">&quot;react-native&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> loginAction <span class="keyword">from</span> <span class="string">&quot;../actions/LoginActions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> themeAction <span class="keyword">from</span> <span class="string">&quot;../actions/ThemeActions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">&quot;react-navigation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MainPage <span class="keyword">from</span> <span class="string">&quot;./MainPage&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> navigationOptions = &#123;</span><br><span class="line">    title: <span class="string">&quot;LoginPage&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nextProps.status === <span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span> &amp;&amp; nextProps.isSuccess) &#123;</span><br><span class="line">      <span class="built_in">this</span>.props.navigation.push(<span class="string">&quot;Main&quot;</span>, &#123; <span class="attr">user</span>: nextProps.user &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// è¿™ä¸ªå‡½æ•°æœ€æ­£ç¡®çš„åå­—åº”è¯¥å« mapStateToProps(state) æŠŠ reducer é‡Œæ”¹å˜è¿‡çš„ state é€šè¿‡ props ä¼ é€’è¿‡æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    status: state.LoginReducer.data.status,</span><br><span class="line">    isSuccess: state.LoginReducer.data.isSuccess,</span><br><span class="line">    user: state.LoginReducer.data.user,</span><br><span class="line">    color: state.themeReducer.color</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨ç»‘å®š action creatorsåˆ° dispatch() å‡½æ•° è¿™ä¸ªå‡½æ•°ä¸€æ · æŠŠä½ è¦ dispatch çš„ action å½“åš props ä¼ é€’è¿‡æ¥  å¦‚æœè¿™ä¹ˆå†™ ä¸Šé¢çš„è§¦å‘ action çš„æ—¶å€™å°±ä¸è¦ this.prop.dispatch(xxxAction) äº† , å¯ä»¥ç›´æ¥å†™ this,props.LoginAction</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matchDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    LoginAction: bindActionCreators(loginAction.requireLogin, dispatch)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect è¿æ¥ç»„ä»¶ä¸ store ,ä»»ä½•æ—¶å€™åªè¦ store å‘ç”Ÿæ”¹å˜, mapStateToProps éƒ½ä¼šè¢«è°ƒç”¨, å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°é‡Œæœ‰ä¸¤ä¸ªå‚æ•° åˆ†åˆ«æ˜¯mapStateToProps  matchDispatchToProps</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(LoginPage);</span><br><span class="line"><span class="comment">//export default connect(select)(LoginPage)</span></span><br></pre></td></tr></table></figure><h1 id="è®²å®Œå†é€ä¸€å¼ å›¾ç†è§£ä¸‹æ•´ä¸ªè¿‡ç¨‹"><a href="#è®²å®Œå†é€ä¸€å¼ å›¾ç†è§£ä¸‹æ•´ä¸ªè¿‡ç¨‹" class="headerlink" title="è®²å®Œå†é€ä¸€å¼ å›¾ç†è§£ä¸‹æ•´ä¸ªè¿‡ç¨‹"></a>è®²å®Œå†é€ä¸€å¼ å›¾ç†è§£ä¸‹æ•´ä¸ªè¿‡ç¨‹</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/16662dccc537af99.gif"                      alt=""                ></p><p><a class="link"   href="https://github.com/MarioGogogo/ReactNative_redux_demo" >Githubé¡¹ç›®åœ°å€<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ</title>
      <link href="2019/03/08/%E5%A4%9A%E7%A7%8D%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2019/03/08/%E5%A4%9A%E7%A7%8D%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>åŒæºç­–ç•¥ï¼Ÿ<br>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚<br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308092712.png"                      alt=""                ></p><h4 id="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸè¿™ä¸ªé—®é¢˜å‡ºç°"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸè¿™ä¸ªé—®é¢˜å‡ºç°" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸè¿™ä¸ªé—®é¢˜å‡ºç°"></a>ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸè¿™ä¸ªé—®é¢˜å‡ºç°</h4><p>å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥å¯¼è‡´äº†è·¨åŸŸï¼Œå°±æ˜¯æµè§ˆå™¨åœ¨æäº‹æƒ…<br>æµè§ˆå™¨ä¸ºä»€ä¹ˆè¦æäº‹æƒ…ï¼Ÿå°±æ˜¯ä¸æƒ³ç»™å¥½æ—¥å­æˆ‘ä»¬è¿‡ï¼Ÿå¯¹äºè¿™æ ·çš„è´¨é—®ï¼Œæµè§ˆå™¨ç”©é”…é“ï¼šâ€œåŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚â€</p><ol><li>cookie LocalStorageåªæ”¯æŒåŒæºä¸‹</li><li>Domå…ƒç´ ä¹ŸåŒæºç­–ç•¥ iframe ï¼ˆiframeé‡Œå¼„ä¸€ä¸ªç™¾åº¦è´¦å·ï¼‰</li><li>ajaxä¸æ”¯æŒè·¨åŸŸ</li></ol><h4 id="å®ç°è·¨åŸŸ"><a href="#å®ç°è·¨åŸŸ" class="headerlink" title="å®ç°è·¨åŸŸ"></a>å®ç°è·¨åŸŸ</h4><p>å‰ç«¯æ”¾ä¸€ä¸ªæœåŠ¡å™¨ï¼Œåå°æ”¾ä¸€ä¸ªæœåŠ¡å™¨éœ€è¦é€šä¿¡è¦å®ç°è·¨åŸŸ</p><ol><li>jsonp ï¼ˆåªæ”¯æŒgetï¼‰</li><li>cors</li><li>postMessage</li><li>document.domain</li><li>window.name</li><li>location.hash</li><li>http-proxy</li><li>nginx</li><li>websocket</li></ol><h3 id="ä¸€ã€-é€šè¿‡jsonpè·¨åŸŸ"><a href="#ä¸€ã€-é€šè¿‡jsonpè·¨åŸŸ" class="headerlink" title="ä¸€ã€ é€šè¿‡jsonpè·¨åŸŸ"></a>ä¸€ã€ é€šè¿‡jsonpè·¨åŸŸ</h3><p>jsonp<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="comment">// ç™¾åº¦ï¼šhttps://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=h&amp;cb=show</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;!--show(&#123; <span class="attr">q</span>: <span class="string">&quot;h&quot;</span>, <span class="attr">p</span>: <span class="literal">false</span>, <span class="attr">s</span>: [<span class="string">&quot;hahaæ–°æ­Œ&quot;</span>, <span class="string">&quot;è™ç‰™&quot;</span>, <span class="string">&quot;èŠ±ç“£&quot;</span>, <span class="string">&quot;æµ·è´¼ç‹&quot;</span>, <span class="string">&quot;è™ç‰™ç›´æ’­&quot;</span>, <span class="string">&quot;åä¸º&quot;</span>, <span class="string">&quot;è™æ‰‘&quot;</span>, <span class="string">&quot;æ±‡ç‡&quot;</span>, <span class="string">&quot;èŠ±ç“£ç½‘&quot;</span>, <span class="string">&quot;åä¸ºå•†åŸ&quot;</span>] &#125;);--&gt;</span><br><span class="line">   &lt;/script&gt;</span><br><span class="line">   <span class="comment">//æˆ–è€…</span></span><br><span class="line">   &lt;script src=<span class="string">&quot;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=h&amp;cb=show&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308094614.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç®€å•å°è£…jsonp</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">     url,</span></span></span><br><span class="line"><span class="function"><span class="params">     params,</span></span></span><br><span class="line"><span class="function"><span class="params">     cb</span></span></span><br><span class="line"><span class="function"><span class="params">   &#125;</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">       <span class="built_in">window</span>[cb] = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">         resolve(data)</span><br><span class="line">        <span class="built_in">window</span>.document.head.removeChild(script);</span><br><span class="line">       &#125;</span><br><span class="line">       params = &#123;</span><br><span class="line">         ...params,</span><br><span class="line">         cb</span><br><span class="line">       &#125; <span class="comment">//wd=h&amp;cb=show</span></span><br><span class="line">       <span class="keyword">let</span> arr = []</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">         arr.push(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span><br><span class="line">       &#125;</span><br><span class="line">     </span><br><span class="line">       script.src = <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;arr.join(<span class="string">&#x27;&amp;&#x27;</span>)&#125;</span>`</span></span><br><span class="line">       <span class="built_in">console</span>.log(script.src);</span><br><span class="line">       <span class="built_in">window</span>.document.head.appendChild(script);</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//ç¼ºç‚¹åªèƒ½getï¼Œå¯ä»¥xssæ”»å‡»</span></span><br><span class="line">   <span class="comment">//è°ƒç”¨</span></span><br><span class="line">   jsonp(&#123;</span><br><span class="line">     url: <span class="string">&#x27;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su&#x27;</span>,</span><br><span class="line">     params: &#123;</span><br><span class="line">       wd: <span class="string">&#x27;h&#x27;</span></span><br><span class="line">     &#125;,</span><br><span class="line">     cb:<span class="string">&#x27;show&#x27;</span></span><br><span class="line">   &#125;).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      </span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308113154.png"                      alt=""                ></p><h3 id="äºŒã€-è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰"><a href="#äºŒã€-è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰" class="headerlink" title="äºŒã€ è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰"></a>äºŒã€ è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰</h3><p>æ™®é€šè·¨åŸŸè¯·æ±‚ï¼šåªæœåŠ¡ç«¯è®¾ç½®Access-Control-Allow-Originå³å¯ï¼Œå‰ç«¯æ— é¡»è®¾ç½®ï¼Œè‹¥è¦å¸¦cookieè¯·æ±‚ï¼šå‰åç«¯éƒ½éœ€è¦è®¾ç½®ã€‚</p><p>éœ€æ³¨æ„çš„æ˜¯ï¼šç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæ‰€è¯»å–çš„cookieä¸ºè·¨åŸŸè¯·æ±‚æ¥å£æ‰€åœ¨åŸŸçš„cookieï¼Œè€Œéå½“å‰é¡µã€‚å¦‚æœæƒ³å®ç°å½“å‰é¡µcookieçš„å†™å…¥ï¼Œå¯å‚è€ƒä¸‹æ–‡ï¼šä¸ƒã€nginxåå‘ä»£ç†ä¸­è®¾ç½®proxy_cookie_domain å’Œ å…«ã€NodeJsä¸­é—´ä»¶ä»£ç†ä¸­cookieDomainRewriteå‚æ•°çš„è®¾ç½®ã€‚</p><p>ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½(IE8+ï¼šIE8/9éœ€è¦ä½¿ç”¨XDomainRequestå¯¹è±¡æ¥æ”¯æŒCORSï¼‰)ï¼ŒCORSä¹Ÿå·²ç»æˆä¸ºä¸»æµçš„è·¨åŸŸè§£å†³æ–¹æ¡ˆã€‚</p><p>å¦‚æœåªæ˜¯å•çº¯çš„3000ç«¯å£è¯·æ±‚4000ç«¯å£<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308123825.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/getData&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  res.end(<span class="string">&#x27;you look 4000&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="string">&#x27;4000&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å¯åŠ¨4000&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//===============================</span></span><br><span class="line"><span class="keyword">let</span> express  = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line">app.use(express.static(__dirname))</span><br><span class="line"></span><br><span class="line">app.listen(<span class="string">&#x27;3000&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å¯åŠ¨&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308123704.png"                      alt=""                ></p><p><strong>è¯·æ±‚å¤´çš„æ•°æ®</strong><br>è¯·æ±‚å‘è¿‡æ¥äº†è¢«æµè§ˆå™¨å±è”½äº†<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308124223.png"                      alt=""                ><br>è§£å†³ï¼š<br>server2.js<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>ç™½åå•</span><br><span class="line">let whitelist = [<span class="string">&#x27;http://localhost:3000&#x27;</span>]</span><br><span class="line">app.use(<span class="keyword">function</span>(req,res,<span class="keyword">next</span>)&#123;</span><br><span class="line">   let origin = req.headers.origin;</span><br><span class="line">   <span class="keyword">if</span>(whitelist.includes(origin))&#123;</span><br><span class="line">     <span class="regexp">//</span>è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘</span><br><span class="line">     res.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, origin);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/7D07FD31-6B85-4C92-8094-855A63D26D3C.png"                      alt=""                ><br>å…¶ä»–è¯·æ±‚æ–¹å¼<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308125233.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.setHeader(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>,<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è¿˜å¯èƒ½å‡ºç°è¿™ä¸ªé—®é¢˜<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308125906.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘</span></span><br><span class="line"> res.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, origin);</span><br><span class="line"> <span class="comment">//è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line"> res.setHeader(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>,<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">  res.setHeader(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>);</span><br><span class="line">  res.setHeader(<span class="string">&#x27;Access-Control-Max-Age&#x27;</span>, <span class="number">6</span>);</span><br><span class="line"> <span class="keyword">if</span> (req.method === <span class="string">&quot;OPTIONS&quot;</span>) &#123;</span><br><span class="line">    res.end(); <span class="comment">//PUTè¯·æ±‚ä¸åšä»»ä½•å¤„ç†</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æºå¸¦cookie</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308131212.png"                      alt=""                ></p><p>è·å–æŸä¸ªå¤´<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308133332.png"                      alt=""                ></p><p>å®Œæ•´ä»£ç <br>html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// IE8/9éœ€ç”¨window.XDomainRequestå…¼å®¹</span></span><br><span class="line">    <span class="comment">// å‰ç«¯è®¾ç½®æ˜¯å¦å¸¦cookie</span></span><br><span class="line">    xhr.withCredentials = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">document</span>.cookie = <span class="string">&quot;cook=chan&quot;</span>;</span><br><span class="line">    xhr.open(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;http://localhost:4000/getData&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">    xhr.setRequestHeader(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;chan&#x27;</span>)</span><br><span class="line">    <span class="comment">// xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;);</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line"><span class="built_in">console</span>.log(xhr.getResponseHeader(<span class="string">&#x27;name&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (xhr.readyState == <span class="number">304</span>) &#123;</span><br><span class="line">        onsole.log(xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.send();</span><br></pre></td></tr></table></figure><br>server2.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"><span class="comment">//ç™½åå•</span></span><br><span class="line"><span class="keyword">let</span> whitelist = [<span class="string">&#x27;http://localhost:3000&#x27;</span>]</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers);</span><br><span class="line">   <span class="keyword">let</span> origin = req.headers.origin;</span><br><span class="line">   <span class="keyword">if</span>(whitelist.includes(origin))&#123;</span><br><span class="line">     <span class="comment">//è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘</span></span><br><span class="line">    <span class="comment">//  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &#x27;*&#x27;); //ä»»åŠ¡æ¥å£</span></span><br><span class="line">     res.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&#x27;*&#x27;</span>); <span class="comment">//ä»»åŠ¡æ¥å£</span></span><br><span class="line">     res.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, origin);</span><br><span class="line">     <span class="comment">//è®¾ç½®å“ªä¸ªå¤´è®¿é—®æˆ‘</span></span><br><span class="line">     res.setHeader(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>,<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">      <span class="comment">//å…è®¸å“ªä¸ªæ–¹æ³•è®¿é—®æˆ‘</span></span><br><span class="line">      res.setHeader(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;PUT&#x27;</span>);</span><br><span class="line">      <span class="comment">// å…è®¸æºå¸¦cookie (å¦‚æœAllow-Originå¸¦*å·å°±ä¸èƒ½è®¾ç½®è¿™ä¸ª)</span></span><br><span class="line">      res.setHeader(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>,<span class="literal">true</span>);</span><br><span class="line">      <span class="comment">// é¢„æ£€å­˜æ´»æ—¶é—´</span></span><br><span class="line">      res.setHeader(<span class="string">&#x27;Access-Control-Max-Age&#x27;</span>, <span class="number">6</span>);</span><br><span class="line">      <span class="comment">// å…è®¸å‰ç«¯è·å–æŸä¸ªå¤´(è¿”å›çš„å¤´)</span></span><br><span class="line">      res.setHeader(<span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span>, <span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">     <span class="keyword">if</span> (req.method === <span class="string">&quot;OPTIONS&quot;</span>) &#123;</span><br><span class="line">        res.end(); <span class="comment">//PUTè¯·æ±‚ä¸åšä»»ä½•å¤„ç†</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   next();</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">&#x27;/getData&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;chan&#x27;</span>) <span class="comment">//è¿”å›æŸä¸ªå¤´</span></span><br><span class="line">  res.end(<span class="string">&#x27;you get 4000&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.put(<span class="string">&#x27;/getData&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">  res.end(<span class="string">&#x27;you look 4000&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="string">&#x27;4000&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å¯åŠ¨4000&#x27;</span>);</span><br></pre></td></tr></table></figure></p><h3 id="ä¸‰ã€-postMessageè·¨åŸŸ"><a href="#ä¸‰ã€-postMessageè·¨åŸŸ" class="headerlink" title="ä¸‰ã€ postMessageè·¨åŸŸ"></a>ä¸‰ã€ postMessageè·¨åŸŸ</h3><p>postMessageæ˜¯HTML5 XMLHttpRequest Level 2ä¸­çš„APIï¼Œä¸”æ˜¯ä¸ºæ•°ä¸å¤šå¯ä»¥è·¨åŸŸæ“ä½œçš„windowå±æ€§ä¹‹ä¸€ï¼Œå®ƒå¯ç”¨äºè§£å†³ä»¥ä¸‹æ–¹é¢çš„é—®é¢˜ï¼š<br>a.ï¼‰ é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’<br>b.ï¼‰ å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’<br>c.ï¼‰ é¡µé¢ä¸åµŒå¥—çš„iframeæ¶ˆæ¯ä¼ é€’<br>d.ï¼‰ ä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„è·¨åŸŸæ•°æ®ä¼ é€’</p><p>ç”¨æ³•ï¼š<code>postMessage(data,origin)</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°</p><ol><li>dataï¼š html5è§„èŒƒæ”¯æŒä»»æ„åŸºæœ¬ç±»å‹æˆ–å¯å¤åˆ¶çš„å¯¹è±¡ï¼Œä½†éƒ¨åˆ†æµè§ˆå™¨åªæ”¯æŒå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¼ å‚æ—¶æœ€å¥½ç”¨JSON.stringify()åºåˆ—åŒ–ã€‚</li><li>originï¼š åè®®+ä¸»æœº+ç«¯å£å·ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºâ€*â€ï¼Œè¡¨ç¤ºå¯ä»¥ä¼ é€’ç»™ä»»æ„çª—å£ï¼Œå¦‚æœè¦æŒ‡å®šå’Œå½“å‰çª—å£åŒæºçš„è¯è®¾ç½®ä¸ºâ€/â€œã€‚</li></ol><p>a.html</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe id=<span class="string">&quot;frame&quot;</span> src=<span class="string">&quot;http://localhost:4000/b.html&quot;</span> frameborder=<span class="string">&quot;0&quot;</span> onload=<span class="string">&quot;sayb()&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayb</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> frame = <span class="built_in">document</span>.getElementById(<span class="string">&quot;frame&quot;</span>);</span><br><span class="line">      frame.contentWindow.postMessage(<span class="string">&#x27;bé¡µé¢ä½ å¥½&#x27;</span>, <span class="string">&#x27;http://localhost:4000&#x27;</span>);</span><br><span class="line">      <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.data);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure><p>b.html</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   window.onmessage &#x3D; function(e) &#123;</span><br><span class="line">     console.log(e.data);</span><br><span class="line">     console.log(e);</span><br><span class="line">     e.source.postMessage(&#39;a.htmlä½ &#39;,e.origin)</span><br><span class="line">   &#125;</span><br><span class="line">     &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>eçš„å‚æ•°<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308140704.png"                      alt=""                ></p></blockquote><h3 id="å››ã€-document-domain-iframeè·¨åŸŸ"><a href="#å››ã€-document-domain-iframeè·¨åŸŸ" class="headerlink" title="å››ã€ document.domain+ iframeè·¨åŸŸ"></a>å››ã€ document.domain+ iframeè·¨åŸŸ</h3><p>æ­¤æ–¹æ¡ˆä»…é™ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„è·¨åŸŸåº”ç”¨åœºæ™¯ã€‚<br>å®ç°åŸç†ï¼šä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡jså¼ºåˆ¶è®¾ç½®document.domainä¸ºåŸºç¡€ä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚<br>åŸŸåä¸€çº§åŸŸå  äºŒçº§åŸŸå</p><ol><li><a class="link"   href="http://www.baidu.com" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></li><li>video.baidu.com<br>a.html<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:3000/b.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.domain = <span class="string">&#x27;domain.com&#x27;</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> user = <span class="string">&#x27;admin&#x27;</span>;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>b.html<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.domain = <span class="string">&#x27;domain.com&#x27;</span>;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è·å–çˆ¶çª—å£ä¸­å˜é‡</span></span></span><br><span class="line"><span class="javascript">    alert(<span class="string">&#x27;get js data from parent ---&gt; &#x27;</span> + <span class="built_in">window</span>.parent.user);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="äº”ã€-WebSocketåè®®è·¨åŸŸ"><a href="#äº”ã€-WebSocketåè®®è·¨åŸŸ" class="headerlink" title="äº”ã€ WebSocketåè®®è·¨åŸŸ"></a>äº”ã€ WebSocketåè®®è·¨åŸŸ</h3>WebSocket protocolæ˜¯HTML5ä¸€ç§æ–°çš„åè®®ã€‚å®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶å…è®¸è·¨åŸŸé€šè®¯ï¼Œæ˜¯server pushæŠ€æœ¯çš„ä¸€ç§å¾ˆå¥½çš„å®ç°ã€‚<br>åŸç”ŸWebSocket APIä½¿ç”¨èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨Socket.ioï¼Œå®ƒå¾ˆå¥½åœ°å°è£…äº†webSocketæ¥å£ï¼Œæä¾›äº†æ›´ç®€å•ã€çµæ´»çš„æ¥å£ï¼Œä¹Ÿå¯¹ä¸æ”¯æŒwebSocketçš„æµè§ˆå™¨æä¾›äº†å‘ä¸‹å…¼å®¹ã€‚<br>a.html<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é«˜çº§api ä¸å…¼å®¹socket.io;</span></span><br><span class="line"> <span class="comment">// (ä¸€èˆ¬ä¸ä½¿ç”¨)</span></span><br><span class="line"> <span class="keyword">let</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">&#x27;ws://localhost:3000&#x27;</span>);</span><br><span class="line"> socket.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   socket.send(<span class="string">&#x27;æˆ‘æ¥è·¨åŸŸäº†&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> socket.onmessage=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">    <span class="built_in">console</span>.log(e.data);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>server.js<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app       = express();</span><br><span class="line"><span class="keyword">let</span> WebSocket = <span class="built_in">require</span>(<span class="string">&#x27;ws&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> wss       = <span class="keyword">new</span> WebSocket.Server(&#123;<span class="attr">port</span>:<span class="number">3000</span>&#125;);</span><br><span class="line"></span><br><span class="line">wss.on(<span class="string">&#x27;connection&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">ws</span>) </span>&#123;</span><br><span class="line">   ws.on(<span class="string">&#x27;message&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="comment">//å‘é€</span></span><br><span class="line">      ws.send(<span class="string">&#x27;æ¥å—åˆ°æ¶ˆæ¯äº†å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308162154.png"                      alt=""                ></li></ol><h3 id="å…­ã€-location-hash-iframeè·¨åŸŸï¼ˆå¾ˆlowï¼‰"><a href="#å…­ã€-location-hash-iframeè·¨åŸŸï¼ˆå¾ˆlowï¼‰" class="headerlink" title="å…­ã€ location.hash + iframeè·¨åŸŸï¼ˆå¾ˆlowï¼‰"></a>å…­ã€ location.hash + iframeè·¨åŸŸï¼ˆå¾ˆlowï¼‰</h3><p>å®ç°åŸç†ï¼š aæ¬²ä¸bè·¨åŸŸç›¸äº’é€šä¿¡ï¼Œé€šè¿‡ä¸­é—´é¡µcæ¥å®ç°ã€‚ ä¸‰ä¸ªé¡µé¢ï¼Œä¸åŒåŸŸä¹‹é—´åˆ©ç”¨iframeçš„location.hashä¼ å€¼ï¼Œç›¸åŒåŸŸä¹‹é—´ç›´æ¥jsè®¿é—®æ¥é€šä¿¡ã€‚<br>aå’Œbæ˜¯åŒåŸŸ <a class="link"   href="http://localhost:3000" >http://localhost:3000<i class="fas fa-external-link-alt"></i></a><br>cæ˜¯ç‹¬ç«‹çš„åŸŸ <a class="link"   href="http://localhost:4000" >http://localhost:4000<i class="fas fa-external-link-alt"></i></a><br>å…·ä½“å®ç°ï¼šAåŸŸï¼ša.html -&gt; cåŸŸï¼šc.html -&gt; båŸŸï¼šb.htmlï¼Œaç»™cä¼ ä¸€ä¸ªhashå€¼ï¼Œcæ”¶åˆ°hashå€¼åï¼ŒcæŠŠhashå€¼ä¼ é€’ç»™bï¼Œbå°†ç»“æœæ”¾åˆ°açš„hashå€¼ä¸­</p><p>a.html<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:4000/c.html#abc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="built_in">console</span>.log(location.hash);</span></span><br><span class="line">      &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br>c.html</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="built_in">console</span>.log(location.hash); <span class="comment">//#abc</span></span><br><span class="line">        <span class="keyword">let</span> frame = <span class="built_in">document</span>.createElement(<span class="string">&quot;iframe&quot;</span>);</span><br><span class="line">        frame.src = <span class="string">&quot;http://localhost:3000/b.html#youcanbb&quot;</span></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(frame)</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure><p>b.html</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">//çˆ¸çˆ¸çš„çˆ¸çˆ¸</span></span><br><span class="line">  <span class="built_in">window</span>.parent.parent.location.hash = location.hash;</span><br><span class="line">  <span class="built_in">console</span>.log(location.hash);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308160308.png"                      alt=""                ></p><h3 id="ä¸ƒã€-window-name-iframeè·¨åŸŸ"><a href="#ä¸ƒã€-window-name-iframeè·¨åŸŸ" class="headerlink" title="ä¸ƒã€ window.name + iframeè·¨åŸŸ"></a>ä¸ƒã€ window.name + iframeè·¨åŸŸ</h3><p>window.nameå±æ€§çš„ç‹¬ç‰¹ä¹‹å¤„ï¼šnameå€¼åœ¨ä¸åŒçš„é¡µé¢ï¼ˆç”šè‡³ä¸åŒåŸŸåï¼‰åŠ è½½åä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒéå¸¸é•¿çš„ name å€¼ï¼ˆ2MBï¼‰</p><p><strong>æ —å­</strong><br>aå’Œbæ˜¯åŒåŸŸ <a class="link"   href="http://localhost:3000" >http://localhost:3000<i class="fas fa-external-link-alt"></i></a><br>cæ˜¯ç‹¬ç«‹çš„åŸŸ <a class="link"   href="http://localhost:4000" >http://localhost:4000<i class="fas fa-external-link-alt"></i></a></p><p>aè·å–cçš„æ•°æ®<br>aå…ˆå¼•ç”¨c  cæŠŠå€¼æ”¾åˆ°<code>window.name</code>,æŠŠaå¼•ç”¨çš„åœ°å€æ”¹åˆ°b<br>a.html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe id=<span class="string">&quot;frame&quot;</span> src=<span class="string">&quot;http://localhost:4000/c.html&quot;</span> frameborder=<span class="string">&quot;0&quot;</span> onload=<span class="string">&quot;load()&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> first = <span class="literal">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (first) &#123;</span><br><span class="line">        <span class="keyword">let</span> frame = <span class="built_in">document</span>.getElementById(<span class="string">&quot;frame&quot;</span>);</span><br><span class="line">        frame.src = <span class="string">&quot;http://localhost:3000/b.html&quot;</span></span><br><span class="line">        first = <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(frame.contentWindow.name);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure><br>b.htmlç©º<br>c.html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">window</span>.name=<span class="string">&quot;æˆ‘æ˜¯c&quot;</span></span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190308153003.png"                      alt=""                ></p><h3 id="å…«ã€-nginxä»£ç†è·¨åŸŸ"><a href="#å…«ã€-nginxä»£ç†è·¨åŸŸ" class="headerlink" title="å…«ã€ nginxä»£ç†è·¨åŸŸ"></a>å…«ã€ nginxä»£ç†è·¨åŸŸ</h3><p>1ã€ nginxé…ç½®è§£å†³iconfontè·¨åŸŸ<br>æµè§ˆå™¨è·¨åŸŸè®¿é—®jsã€cssã€imgç­‰å¸¸è§„é™æ€èµ„æºè¢«åŒæºç­–ç•¥è®¸å¯ï¼Œä½†iconfontå­—ä½“æ–‡ä»¶(eot|otf|ttf|woff|svg)ä¾‹å¤–ï¼Œæ­¤æ—¶å¯åœ¨nginxçš„é™æ€èµ„æºæœåŠ¡å™¨ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  add_header Access-Control-Allow-Origin *;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ nginxåå‘ä»£ç†æ¥å£è·¨åŸŸ<br>è·¨åŸŸåŸç†ï¼š åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œä¸æ˜¯HTTPåè®®çš„ä¸€éƒ¨åˆ†ã€‚æœåŠ¡å™¨ç«¯è°ƒç”¨HTTPæ¥å£åªæ˜¯ä½¿ç”¨HTTPåè®®ï¼Œä¸ä¼šæ‰§è¡ŒJSè„šæœ¬ï¼Œä¸éœ€è¦åŒæºç­–ç•¥ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è·¨è¶Šé—®é¢˜ã€‚</p><p>å®ç°æ€è·¯ï¼šé€šè¿‡nginxé…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼ˆåŸŸåä¸domain1ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰åšè·³æ¿æœºï¼Œåå‘ä»£ç†è®¿é—®domain2æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é¡ºä¾¿ä¿®æ”¹cookieä¸­domainä¿¡æ¯ï¼Œæ–¹ä¾¿å½“å‰åŸŸcookieå†™å…¥ï¼Œå®ç°è·¨åŸŸç™»å½•ã€‚</p><p>nginxå…·ä½“é…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#proxyæœåŠ¡å™¨</span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">81</span>;</span><br><span class="line">    server_name  www.domain1.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass   http:<span class="comment">//www.domain2.com:8080;  #åå‘ä»£ç†</span></span><br><span class="line">        proxy_cookie_domain www.domain2.com www.domain1.com; #ä¿®æ”¹cookieé‡ŒåŸŸå</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        # å½“ç”¨webpack-dev-serverç­‰ä¸­é—´ä»¶ä»£ç†æ¥å£è®¿é—®nignxæ—¶ï¼Œæ­¤æ—¶æ— æµè§ˆå™¨å‚ä¸ï¼Œæ•…æ²¡æœ‰åŒæºé™åˆ¶ï¼Œä¸‹é¢çš„è·¨åŸŸé…ç½®å¯ä¸å¯ç”¨</span><br><span class="line">        add_header Access-Control-Allow-Origin http:<span class="comment">//www.domain1.com;  #å½“å‰ç«¯åªè·¨åŸŸä¸å¸¦cookieæ—¶ï¼Œå¯ä¸º*</span></span><br><span class="line">        add_header Access-Control-Allow-Credentials <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰ç«¯ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰ç«¯å¼€å…³ï¼šæµè§ˆå™¨æ˜¯å¦è¯»å†™cookie</span></span><br><span class="line">xhr.withCredentials = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®nginxä¸­çš„ä»£ç†æœåŠ¡å™¨</span></span><br><span class="line">xhr.open(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;http://www.domain1.com:81/?user=admin&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure><p>Nodejsåå°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="keyword">var</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> params = qs.parse(req.url.substring(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å‰å°å†™cookie</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;Set-Cookie&#x27;</span>: <span class="string">&#x27;l=a123456;Path=/;Domain=www.domain2.com;HttpOnly&#x27;</span>   <span class="comment">// HttpOnly:è„šæœ¬æ— æ³•è¯»å–</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    res.write(<span class="built_in">JSON</span>.stringify(params));</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="string">&#x27;8080&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Server is running at port 8080...&#x27;</span>);</span><br></pre></td></tr></table></figure></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>ä»Šå¤©å·¥ä½œä¸æ˜¯å¾ˆå¤šï¼Œç”¨äº†ä¸€å¤©æ—¶é—´æ€»ç»“äº†ä¸‹ã€‚åŠªåŠ›ï¼æœ€åç¥å¤©ä¸‹å¥³äººèŠ‚æ—¥å¿«ä¹O(âˆ©_âˆ©)Oå“ˆå“ˆ~</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„ç®€å•åŠ¨ç”»</title>
      <link href="2019/03/04/Vue%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E5%8A%A8%E7%94%BB/"/>
      <url>2019/03/04/Vue%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªAppå¦‚æœæœ‰å¥½çš„åŠ¨ç”»æ•ˆæœå¯ä»¥ä¸ºç¨‹åºé”¦ä¸Šæ·»èŠ±ï¼Œç»™ç”¨æˆ·ç•™ä¸‹éå¸¸å¥½çš„å°è±¡ï¼›ä»Šå¤©æ¥å­¦ä¹ ä¸‹Vueçš„åŠ¨ç”»æˆ‘ä»¬å…ˆé‡å­¦<code>transition</code>ï¼›<br><a id="more"></a><br><strong>é¦–å…ˆçœ‹ä¸‹animationä¸transitionçš„åŒºåˆ«ï¼š</strong><br>å…¶ä¸»è¦åŒºåˆ«åœ¨äºï¼štransitionéœ€è¦è§¦å‘ä¸€ä¸ªäº‹ä»¶æ‰ä¼šéšç€æ—¶é—´æ”¹å˜å…¶CSSå±æ€§ï¼›animationåœ¨ä¸éœ€è¦è§¦å‘ä»»ä½•äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼çš„éšæ—¶é—´å˜åŒ–æ¥æ”¹å˜å…ƒç´ CSSå±æ€§ï¼Œè¾¾åˆ°ä¸€ç§åŠ¨ç”»çš„æ•ˆæœ<br>1ï¼‰åŠ¨ç”»ä¸éœ€è¦äº‹ä»¶è§¦å‘ï¼Œè¿‡æ¸¡éœ€è¦ã€‚<br>2ï¼‰è¿‡æ¸¡åªæœ‰ä¸€ç»„ï¼ˆä¸¤ä¸ªï¼šå¼€å§‹-ç»“æŸï¼‰ å…³é”®å¸§ï¼ŒåŠ¨ç”»å¯ä»¥è®¾ç½®å¤šä¸ªã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/vue-transition-1.gif"                      alt=""                ></p><h4 id="å…ˆæ¥çœ‹ä¸ªä¸¾ä¸ªç®€å•æ —å­"><a href="#å…ˆæ¥çœ‹ä¸ªä¸¾ä¸ªç®€å•æ —å­" class="headerlink" title="å…ˆæ¥çœ‹ä¸ªä¸¾ä¸ªç®€å•æ —å­"></a>å…ˆæ¥çœ‹ä¸ªä¸¾ä¸ªç®€å•æ —å­</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;img width=<span class="string">&quot;25%&quot;</span> src=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;</span><br><span class="line">      &lt;span v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span>&gt;Hide child&lt;<span class="regexp">/span&gt; &lt;span v-else&gt;Show child&lt;/</span>span&gt;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span>&gt;</span><br><span class="line">      &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;Close&lt;/button&gt;</span><br><span class="line">    &lt;/app-child&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">&quot;./components/child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;App&quot;</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    appChild: Child</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      isShowing: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">toggleShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.isShowing = !<span class="built_in">this</span>.isShowing;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190307124523.png"                      alt=""                ><br>demoä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯ä»¥æ­£å¸¸å·¥ä½œä½†æ˜¯æ•ˆæœå¤ªåƒµç¡¬</p><h4 id="Vueä¸­transition"><a href="#Vueä¸­transition" class="headerlink" title="Vueä¸­transition"></a>Vueä¸­transition</h4><p>Vue æä¾›äº† transition çš„å°è£…ç»„ä»¶ï¼Œåœ¨ä¸‹åˆ—æƒ…å½¢ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥/ç¦»å¼€è¿‡æ¸¡</p><ul><li>æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ v-if)</li><li>æ¡ä»¶å±•ç¤º (ä½¿ç”¨ v-show)</li><li>åŠ¨æ€ç»„ä»¶</li><li>ç»„ä»¶æ ¹èŠ‚ç‚¹</li></ul><p>åœ¨Vueä¸­æœ‰ä¸€ä¸ª<code>&lt;transition&gt;</code>å…ƒç´ ä»£è¡¨ä¸€ä¸ª<code>ç›’å­</code>ï¼Œåœ¨è¿™ä¸ªç›’å­é‡Œæˆ‘ä»¬å¤„ç†å…ƒç´ æˆ–è€…ç»„ä»¶ä¸Šçš„åŠ¨ç”»æ•ˆæœã€‚</p><p><code>&lt;transition&gt;</code>æ˜¯Vueå·²ç»å°è£…å¥½çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥æˆ–ç¦»å¼€è¿‡æ¸¡æ•ˆæœã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;transition name=<span class="string">&quot;fade&quot;</span>&gt;</span><br><span class="line">      &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;Close&lt;/button&gt;</span><br><span class="line">      &lt;/app-child&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure><br>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°æˆçš„ <code>&lt;transition&gt;</code> ç»„ä»¶ã€‚è¿‡æ¸¡é’©å­ä¼šæ·»åŠ  v- å‰ç¼€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨ã€‚å…¶ä¸­ </p><ol><li><code>enter/leave</code> å®šä¹‰åŠ¨ç”»å¼€å§‹ç¬¬ä¸€å¸§çš„ä½ç½®ï¼Œ</li><li><code>enter-active/leave-active</code> å®šä¹‰åŠ¨ç”»è¿è¡Œé˜¶æ®µâ€”â€” ä½ éœ€è¦æŠŠåŠ¨ç”»å±æ€§æ”¾åœ¨è¿™é‡Œ </li><li><code>enter-to/leave-to</code> æŒ‡å®šå…ƒç´ åœ¨æœ€åä¸€å¸§ä¸Šçš„ä½ç½®ã€‚</li></ol><p>æˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨é»˜è®¤çš„<code>v-</code>å‰ç¼€ï¼Œæ­£å¦‚ä½ çœ‹åˆ°çš„æˆ‘ä½¿ç”¨çš„æ˜¯äº†ä¸€ä¸ª <code>name</code> å±æ€§: <code>name=&quot;fade&quot;</code> ã€‚å±æ€§åå¿…é¡»ä¸åŠ¨ç”»æ•ˆæœåç›¸è¿‘ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190126001322.png"                      alt=""                ></p><p>è®©æˆ‘ä»¬åˆ›å»ºä¸‹cssæ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fade-enter-active</span>, <span class="selector-class">.fade-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">0.25s</span> ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fade-enter</span>, <span class="selector-class">.fade-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘å°† <code>.fade-enter</code>å’Œ <code>.fade-leave-to</code>å±æ€§è®¾ç½®ä¸º opacity: 0 ã€‚è¿™æ˜¯åŠ¨ç”»çš„åˆå§‹å’Œç»“æŸä½ç½®ï¼Œè½½å…¥æ—¶çš„åˆå§‹çŠ¶æ€ï¼Œå¸è½½æ—¶çš„ç»“æŸçŠ¶æ€ã€‚ä½ å¯èƒ½è®¤ä¸º <code>.fade-enter-to</code> å’Œ <code>.fade-leave</code> åº”è¯¥è®¾ç½® opacity: 1 ã€‚ä½†æ˜¯æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºå®ƒæ˜¯ç»„ä»¶çš„é»˜è®¤çŠ¶æ€ï¼Œæ‰€ä»¥è¿™å°†æ˜¯å¤šä½™çš„ã€‚CSS è¿‡æ¸¡å’ŒåŠ¨ç”»å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨é»˜è®¤çŠ¶æ€ã€‚</p><p>æˆ‘ä»¬å†ä¼˜åŒ–ä¸‹å¦‚æœç„¦ç‚¹éƒ½æ”¾åœ¨å¼¹çª—ä¸Šï¼Œåˆ™èƒŒæ™¯æ˜¯å¦éœ€è¦è™šåŒ–ï¼Œå¦‚æœæŠŠèƒŒæ™¯è™šåŒ–åˆ™ä¸èƒ½æ”¾åœ¨transitionç»„ä»¶ä¸Š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[isShowing ? blurClass : &#x27;&#x27;, bkClass]&quot;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;</span><br><span class="line">        &lt;span v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span>&gt;Hide child&lt;<span class="regexp">/span&gt; &lt;span v-else&gt;Show child&lt;/</span>span&gt;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;transition name=<span class="string">&quot;fade&quot;</span>&gt;</span><br><span class="line">      &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;Close&lt;/button&gt;</span><br><span class="line">      &lt;/app-child&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">&quot;./components/child&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;App&quot;</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    appChild: Child</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      isShowing: <span class="literal">false</span>,</span><br><span class="line">      bkClass: <span class="string">&quot;bk&quot;</span>,</span><br><span class="line">      blurClass: <span class="string">&quot;blur&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">toggleShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.isShowing = !<span class="built_in">this</span>.isShowing;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.fade-enter-active,</span><br><span class="line">.fade-leave-active &#123;</span><br><span class="line">  transition: opacity 2s ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fade-enter,</span><br><span class="line">.fade-leave-to &#123;</span><br><span class="line">  opacity: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bk &#123;</span><br><span class="line">  transition: all 2s ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.blur &#123;</span><br><span class="line">  filter: blur(2px);</span><br><span class="line">  opacity: <span class="number">0.4</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="éœ€è¦æ³¨æ„"><a href="#éœ€è¦æ³¨æ„" class="headerlink" title="éœ€è¦æ³¨æ„"></a>éœ€è¦æ³¨æ„</h4><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒVueåªèƒ½å¯¹<transition>ä¸­çš„ä¸€ä¸ªå…ƒç´ è¿›è¡ŒåŠ¨æ•ˆå¤„ç†ã€‚ç›¸åï¼Œåœ¨ä»»ä½•ç»™å®šçš„å®ä¾‹ä¸­ï¼Œ<code>åªèƒ½å°†&lt;transition&gt;ä¸­çš„ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°DOMä¸­</code>ã€‚æ¯”å¦‚ä¸‹åŒè¿™ä¸ªç¤ºä¾‹ï¼Œåœ¨Vueä¸­æ— æ³•æ­£å¸¸çš„å·¥ä½œï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   &lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[isShowing ? blurClass : &#x27;&#x27;, bkClass]&quot;</span>&gt;</span><br><span class="line">     &lt;img width=<span class="string">&quot;25%&quot;</span> src=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span><br><span class="line">     &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;</span><br><span class="line">       &lt;span v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span>&gt;Hide child&lt;<span class="regexp">/span&gt; &lt;span v-else&gt;Show child&lt;/</span>span&gt;</span><br><span class="line">     &lt;/button&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   &lt;transition name=<span class="string">&quot;fade&quot;</span>&gt;</span><br><span class="line">     &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span> key=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">       &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;Close&lt;/button&gt;</span><br><span class="line">     &lt;/app-child&gt;</span><br><span class="line">     &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span> key=<span class="string">&quot;error&quot;</span>&gt;</span><br><span class="line">       &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;Close&lt;/button&gt;</span><br><span class="line">     &lt;/app-child&gt;</span><br><span class="line">   &lt;/transition&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190307134314.png"                      alt=""                ></p><p>åœ¨Vueä¸­<transition>ä¸­æœ‰å¤šä¸ªå…ƒç´ éœ€è¦æœ‰åŠ¨æ•ˆæ•ˆæœæ—¶ï¼Œéœ€è¦ä½¿ç”¨<transition-group>æ¥æ›¿ä»£ï¼Œä¸ç„¶åœ¨Vueä¸­åˆ™ä¼šæŠ¥é”™ã€‚</p><p>å¦å¤–ï¼Œåœ¨<transition>ä¸­æœ‰ç›¸åŒæ ‡ç­¾åçš„å…ƒç´ åˆ‡æ¢æ—¶ï¼Œéœ€è¦é€šè¿‡ key ç‰¹æ€§è®¾ç½®å”¯ä¸€çš„å€¼æ¥æ ‡è®°ä»¥è®© Vue åŒºåˆ†å®ƒä»¬ï¼Œå¦åˆ™ Vue ä¸ºäº†æ•ˆç‡åªä¼šæ›¿æ¢ç›¸åŒæ ‡ç­¾å†…éƒ¨çš„å†…å®¹ã€‚å³ä½¿åœ¨æŠ€æœ¯ä¸Šæ²¡æœ‰å¿…è¦ï¼Œç»™åœ¨ <transition> ç»„ä»¶ä¸­çš„å¤šä¸ªå…ƒç´ è®¾ç½® key æ˜¯ä¸€ä¸ªæ›´å¥½çš„å®è·µã€‚</p><p>åœ¨Vueä¸­æä¾›äº†ä¸¤ç§è¿‡æ¸¡æ¨¡å¼æ¥è§£å†³ä¸€ä¸ªç¦»å¼€è¿‡æ¸¡çš„æ—¶å€™å¦ä¸€ä¸ªå¼€å§‹è¿›å…¥è¿‡æ¸¡ã€‚å…¶å®è¿™ä¹Ÿæ˜¯<transition>çš„é»˜è®¤è¡Œä¸ºï¼Œå³<code>è¿›å…¥å’Œç¦»å¼€åŒæ—¶å‘ç”Ÿçš„é—®é¢˜</code></p><ol><li>in-outï¼šæ–°å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡ï¼Œå®Œæˆä¹‹åå½“å‰å…ƒç´ è¿‡æ¸¡ç¦»å¼€</li><li>out-inï¼šå½“å‰å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡ï¼Œå®Œæˆä¹‹åæ–°å…ƒç´ è¿‡æ¸¡è¿›å…¥</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">      name=<span class="string">&quot;fade&quot;</span></span><br><span class="line">      mode=<span class="string">&quot;out-in&quot;</span></span><br><span class="line">      appear</span><br><span class="line">      appear-<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;custom-appear-class&quot;</span></span><br><span class="line">      appear-to-<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;custom-appear-to-class&quot;</span></span><br><span class="line">      appear-active-<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;custom-appear-active-class&quot;</span></span><br><span class="line">    &gt;</span><br><span class="line">      &lt;app-child v-<span class="keyword">if</span>=<span class="string">&quot;isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span> key=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;æ˜¾ç¤º&lt;/button&gt;</span><br><span class="line">      &lt;/app-child&gt;</span><br><span class="line">      &lt;app-child v-<span class="keyword">else</span>=<span class="string">&quot;!isShowing&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;modal&quot;</span> key=<span class="string">&quot;error&quot;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;toggleShow&quot;</span>&gt;ç¦»å¼€&lt;/button&gt;</span><br><span class="line">      &lt;/app-child&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br></pre></td></tr></table></figure><p>cssæ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.custom-appear-class</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">100%</span>); //è¿›åœºæ•ˆæœ</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.custom-appear-active-class</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe src="https://codesandbox.io/embed/ll62o3nzz7?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><h4 id="åˆ—è¡¨è¿‡æ¸¡"><a href="#åˆ—è¡¨è¿‡æ¸¡" class="headerlink" title="åˆ—è¡¨è¿‡æ¸¡"></a>åˆ—è¡¨è¿‡æ¸¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;list-demo&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;demo&quot;</span>&gt;</span><br><span class="line">  &lt;button v-on:click=<span class="string">&quot;add&quot;</span>&gt;Add&lt;/button&gt;</span><br><span class="line">  &lt;button v-on:click=<span class="string">&quot;remove&quot;</span>&gt;Remove&lt;/button&gt;</span><br><span class="line">  &lt;transition-group name=<span class="string">&quot;list&quot;</span> tag=<span class="string">&quot;p&quot;</span>&gt;</span><br><span class="line">    &lt;span v-<span class="keyword">for</span>=<span class="string">&quot;item in items&quot;</span> v-bind:key=<span class="string">&quot;item&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;list-item&quot;</span>&gt;</span><br><span class="line">      &#123;&#123; item &#125;&#125;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">  &lt;/transition-group&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#list-demo&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>],</span><br><span class="line">    nextNum: <span class="number">10</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    randomIndex: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="built_in">this</span>.items.length)</span><br><span class="line">    &#125;,</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.items.splice(<span class="built_in">this</span>.randomIndex(), <span class="number">0</span>, <span class="built_in">this</span>.nextNum++)</span><br><span class="line">    &#125;,</span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.items.splice(<span class="built_in">this</span>.randomIndex(), <span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list-enter-active</span>, <span class="selector-class">.list-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list-enter</span>, <span class="selector-class">.list-leave-to</span></span><br><span class="line"><span class="comment">/* .list-leave-active for below version 2.1.8 */</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">30px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a class="link"   href="https://www.w3cplus.com/vue/vue-instances-and-life-cycles.html" >å¤§æ¼ <i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„vuex</title>
      <link href="2019/03/03/Vue%E4%B8%AD%E7%9A%84vuex/"/>
      <url>2019/03/03/Vue%E4%B8%AD%E7%9A%84vuex/</url>
      
        <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬ä½¿ç”¨ Vue.js æ¥å¼€å‘ä¸€ä¸ªå•é¡µåº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›ç»„ä»¶é—´å…±äº«çš„æ•°æ®æˆ–çŠ¶æ€ï¼Œæˆ–æ˜¯éœ€è¦é€šè¿‡ props æ·±å±‚ä¼ é€’çš„ä¸€äº›æ•°æ®ã€‚åœ¨åº”ç”¨è§„æ¨¡è¾ƒå°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ propsã€äº‹ä»¶ç­‰å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶çš„ç»„ä»¶é—´é€šä¿¡æ–¹æ³•ï¼Œæˆ–è€…æ˜¯é€šè¿‡äº‹ä»¶æ€»çº¿æ¥è¿›è¡Œä»»æ„ä¸¤ä¸ªç»„ä»¶çš„é€šä¿¡ã€‚ä½†æ˜¯å½“åº”ç”¨é€æ¸å¤æ‚åï¼Œé—®é¢˜å°±å¼€å§‹å‡ºç°äº†ï¼Œè¿™æ ·çš„é€šä¿¡æ–¹å¼ä¼šå¯¼è‡´æ•°æ®æµå¼‚å¸¸åœ°æ··ä¹±ã€‚<br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305102407.png"                      alt=""                ><br>ç„¶åå°±å‡ºç°äº†ä¸€ä¸ªç¥å™¨<code>vuex</code></p><h4 id="ä»€ä¹ˆæ˜¯vuexå‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯vuexå‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯vuexå‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯vuexå‘¢ï¼Ÿ</h4><p>Vuex ç±»ä¼¼ Redux çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œç”¨æ¥ç®¡ç†Vueçš„æ‰€æœ‰ç»„ä»¶çŠ¶æ€ã€‚</p><blockquote><p>å¤§ç™½è¯ï¼šå¤šä¸ªç»„ä»¶ä¹‹é—´å…±ç”¨ä¸€ä»½æ•°æ®</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305101357.png"                      alt=""                ></p><h4 id="vuexçš„æ ¸å¿ƒ"><a href="#vuexçš„æ ¸å¿ƒ" class="headerlink" title="vuexçš„æ ¸å¿ƒ"></a>vuexçš„æ ¸å¿ƒ</h4><p>vuexç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>state</li><li>mutations</li><li>getters</li><li>actions</li><li>modules</li></ol><h4 id="å¼€å§‹å†™æ¥ä¸ªæœ€ç®€å•çš„demo"><a href="#å¼€å§‹å†™æ¥ä¸ªæœ€ç®€å•çš„demo" class="headerlink" title="å¼€å§‹å†™æ¥ä¸ªæœ€ç®€å•çš„demo"></a>å¼€å§‹å†™æ¥ä¸ªæœ€ç®€å•çš„demo</h4><p>store.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  count: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    state.count++;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    state.count--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increment: <span class="function">(<span class="params">&#123; commit &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    commit(<span class="string">&quot;increment&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  decrement: <span class="function">(<span class="params">&#123; commit &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    commit(<span class="string">&quot;decrement&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123; state, mutations, actions &#125;);</span><br></pre></td></tr></table></figure><br>1.æ¯ä¸€ä¸ªVuexåº”ç”¨å°±æ˜¯ä¸€ä¸ªstoreï¼Œåœ¨storeä¸­åŒ…å«ç»„ä»¶ä¸­çš„å…±äº«çŠ¶æ€<code>state</code>å’Œæ”¹å˜çŠ¶æ€çš„æ–¹æ³•<code>mutations</code>ã€‚æ³¨æ„ï¼šåªèƒ½é€šè¿‡mutationsæ”¹å˜storeçš„stateçš„çŠ¶æ€ï¼›<br>2.ä½¿ç”¨<code>commit</code>æ–¹æ³•è§¦å‘mutationsæ”¹å˜state:</p><h4 id="å¯¼å…¥è·Ÿç»„ä»¶"><a href="#å¯¼å…¥è·Ÿç»„ä»¶" class="headerlink" title="å¯¼å…¥è·Ÿç»„ä»¶"></a>å¯¼å…¥è·Ÿç»„ä»¶</h4><p>app.vue<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  store, <span class="comment">//å¯¼å…¥å…¨å±€storeæ•°æ®</span></span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure></p><ol><li>Getters å¯ä»¥åœ¨æ¨¡æ¿ä¸­é™æ€çš„æ˜¾ç¤ºæ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œgetters å¯ä»¥è¯»å–æ•°æ®ï¼Œä½†ä¸èƒ½æ”¹å˜çŠ¶æ€ã€‚</li><li>Mutations å…è®¸æ›´æ–°çŠ¶æ€ï¼Œä½†æ°¸è¿œæ˜¯åŒæ­¥çš„ã€‚Mutations æ˜¯ store ä¸­æ”¹å˜çŠ¶æ€æ•°æ®çš„å”¯ä¸€æ–¹å¼ã€‚</li><li>Actions å…è®¸å¼‚æ­¥æ›´æ–°çŠ¶æ€ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ mutation ã€‚å¦‚æœä½ éœ€è¦ä»¥ç‰¹å®šçš„é¡ºåºåŒæ—¶æ‰§è¡Œä¸åŒçš„ mutations ä¼šéå¸¸æœ‰ç”¨ã€‚</li></ol><h4 id="ä½¿ç”¨vuex"><a href="#ä½¿ç”¨vuex" class="headerlink" title="ä½¿ç”¨vuex"></a>ä½¿ç”¨vuex</h4><p>vuex.vue<br><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    vuex ,</span><span class="template-variable">&#123;&#123; <span class="name">$store.state.count</span> &#125;&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">import &#123; mapActions &#125; from &quot;vuex&quot;;</span></span><br><span class="line"><span class="xml">export default &#123;</span></span><br><span class="line"><span class="xml">  name: &quot;vuex&quot;,</span></span><br><span class="line"><span class="xml">  methods: mapActions([&quot;increment&quot;, &quot;decrement&quot;])</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><iframe src="https://codesandbox.io/embed/k3k91l0mmr?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><h3 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h3><p>è®©æˆ‘ä»¬åœ¨æ·±å…¥ä¸€ç‚¹å¦‚æœæˆ‘ä»¬è¦å‘actionä¼ å…¥å‚æ•°æ€ä¹ˆåŠï¼Ÿ</p><p><strong>æœ€ååœ¨æ‹¿ä¸€ä¸ªé¡¹ç›®ä¸­çš„æ —å­æ¥è¯´è¯´æˆ‘å¯¹vuexçš„ä½¿ç”¨</strong></p><p>å…ˆæ¥çœ‹ä¸‹å¦‚ä½•åˆç†çš„æ„å»ºstoreæ•°æ®ç»“æ„<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305143236.png"                      alt=""                ><br>é¦–å…ˆåˆ›å»ºstate.js<br>å¯¹éœ€è¦ç®¡ç†çš„æ•°æ®åˆå§‹åŒ–ä¸€äº›å€¼ï¼Œå¯¹åº”ä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ•°æ®è¿˜å¯ä»¥è°ƒç”¨æ–¹æ³•æ‰§è¡Œã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•ä¸€çŠ¶æ€æ ‘</span></span><br><span class="line"><span class="comment"> * vuex æ“ä½œé¡ºåºï¼šstate.js -&gt; mutations-type.js -&gt; mutations.js -&gt; getters.js</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> &#123; getPlayHistory &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/index&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> playMode = &#123;</span><br><span class="line">  sequence: <span class="number">0</span>, <span class="comment">// é¡ºåºæ’­æ”¾</span></span><br><span class="line">  loop: <span class="number">1</span>, <span class="comment">// å•æ›²å¾ªç¯</span></span><br><span class="line">  random: <span class="number">2</span> <span class="comment">// éšæœºæ’­æ”¾</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  mode: playMode.sequence,</span><br><span class="line">  playing: <span class="literal">false</span>,</span><br><span class="line">  playlist: [<span class="string">&quot;å‘å¦‚é›ª&quot;</span>, <span class="string">&quot;ä¸œé£ç ´&quot;</span>, <span class="string">&quot;åŒèŠ‚æ£&quot;</span>],</span><br><span class="line">  song: <span class="string">&quot;å‘¨æ°ä¼¦&quot;</span>,</span><br><span class="line">  playHistory: getPlayHistory()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> state;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ç„¶ååˆ›å»ºmutation-type.jsï¼Œç”¨mutation å¸¸é‡ï¼Œæ³¨æ„ç›®çš„æ˜¯ä¸ºäº†ä»£ç è§„èŒƒï¼Œæ˜“äºå‡ºé”™æ’æŸ¥<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ’­æ”¾æ¨¡å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_MODE = <span class="string">&quot;SET_MODE&quot;</span>;</span><br><span class="line"><span class="comment">//æ’­æ”¾çŠ¶æ€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_PLAYING_STATE = <span class="string">&quot;SET_PLAYING_STATE&quot;</span>;</span><br><span class="line"><span class="comment">//æ’­æ”¾åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_PLAYLIST = <span class="string">&quot;SET_PLAYLIST&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>æ¥ç€æˆ‘ä»¬åˆ›å»ºmutation.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">&quot;./mutations-type.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  [types.SET_MODE](state, mode) &#123;</span><br><span class="line">    state.mode = mode;</span><br><span class="line">  &#125;,</span><br><span class="line">  [types.SET_PLAYING_STATE](state, flag) &#123;</span><br><span class="line">    state.playing = flag;</span><br><span class="line">  &#125;,</span><br><span class="line">  [types.SET_PLAYLIST](state, list) &#123;</span><br><span class="line">    state.playlist = list;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mutations;</span><br></pre></td></tr></table></figure><br>éšååœ¨åˆ›å»ºactions.js,ç”¨äºæ•°æ®çš„stateçš„é€»è¾‘å¤„ç†ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹çº§åˆ«çš„ action</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">&quot;./mutations-type&quot;</span>;</span><br><span class="line"><span class="comment">/**\</span></span><br><span class="line"><span class="comment"> *  &#123;commit.state&#125; å†…ç½®çŠ¶æ€</span></span><br><span class="line"><span class="comment"> *  song ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> insertSong = <span class="function"><span class="keyword">function</span>(<span class="params">&#123; commit, state &#125;, song</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> playlist = state.playlist.slice(<span class="number">0</span>);</span><br><span class="line">  playlist = [...playlist, <span class="string">&quot;çˆ¸æˆ‘å›æ¥äº†&quot;</span>, <span class="string">&quot;ç‰›ä»”å¾ˆå¿™&quot;</span>].concat(song);</span><br><span class="line"></span><br><span class="line">  commit(types.SET_PLAYLIST, playlist);</span><br><span class="line">  commit(types.SET_PLAYING_STATE, <span class="literal">true</span>);</span><br><span class="line">  <span class="comment">// commit(types.SET_MODE, 1);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removeSong = <span class="function"><span class="keyword">function</span>(<span class="params">&#123; commit, state &#125;, song</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> playlist = state.playlist.slice(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  playlist.slice(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  commit(types.SET_PLAYLIST, playlist);</span><br><span class="line">  commit(types.SET_PLAYING_STATE, <span class="literal">false</span>);</span><br><span class="line">  commit(types.SET_MODE, <span class="number">2</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>åˆ«å¿˜è®°äº†setæœ‰äº† è¿˜éœ€è¦getè·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºgetters.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜ å°„åŠè®¡ç®—</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> playing = <span class="function"><span class="params">state</span> =&gt;</span> state.playing;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> playlist = <span class="function"><span class="params">state</span> =&gt;</span> state.playlist;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mode = <span class="function"><span class="params">state</span> =&gt;</span> state.mode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> song = <span class="function"><span class="params">state</span> =&gt;</span> state.song;</span><br></pre></td></tr></table></figure><br>æœ€åè®¾ç½®index.jsçš„å…¥å£æ–‡ä»¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">&quot;./state.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&quot;./mutations.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">&quot;./actions.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> getters <span class="keyword">from</span> <span class="string">&quot;./getters.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createLogger <span class="keyword">from</span> <span class="string">&quot;vuex/dist/logger&quot;</span>; <span class="comment">// Vuex è‡ªå¸¦ä¸€ä¸ªæ—¥å¿—æ’ä»¶ç”¨äºä¸€èˆ¬çš„è°ƒè¯•</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">&quot;production&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  getters,</span><br><span class="line">  strict: debug,</span><br><span class="line">  plugins: debug ? [createLogger()] : []</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åˆ«å¿˜è®°appä¸­çš„å…¨å±€å¯¼å…¥store<br>main.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span>;</span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  store</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure></p><h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations, mapActions, mapGetters &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>; <span class="comment">//å¯¼å…¥vuexæ¨¡å—æ–¹æ³•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;pagea&quot;</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      setMode: <span class="string">&quot;SET_MODE&quot;</span>,</span><br><span class="line">      setPlayList: <span class="string">&quot;SET_PLAYLIST&quot;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    ...mapActions([<span class="string">&quot;insertSong&quot;</span>, <span class="string">&quot;removeSong&quot;</span>]),</span><br><span class="line">    <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setMode(<span class="number">1</span>);</span><br><span class="line">      <span class="built_in">this</span>.insertSong(<span class="string">&quot;ä½ æ¯”ä»å‰å¿«ä¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&quot;mode&quot;</span>, <span class="string">&quot;song&quot;</span>, <span class="string">&quot;playlist&quot;</span>]),</span><br><span class="line">    <span class="function"><span class="title">playstatus</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.song;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190306112009.png"                      alt=""                ></p><iframe src="https://codesandbox.io/embed/7oj1q3l6jx?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PM2ä¸€é”®å‘å¸ƒç½‘ç«™é€‚åˆReact Vue Node</title>
      <link href="2019/03/02/PM2%E4%B8%80%E9%94%AE%E5%8F%91%E5%B8%83%E7%BD%91%E7%AB%99%EF%BC%8C%E9%80%82%E5%90%88React%20Vue%20Node/"/>
      <url>2019/03/02/PM2%E4%B8%80%E9%94%AE%E5%8F%91%E5%B8%83%E7%BD%91%E7%AB%99%EF%BC%8C%E9%80%82%E5%90%88React%20Vue%20Node/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸ºä»€ä¹ˆè¦ç ”ç©¶Pm2ï¼Ÿ</strong><br><a id="more"></a><br>å½“ä½ çš„é¡¹ç›®æ¯æ¬¡éƒ½è¦æ”¹åŠ¨æ—¶ï¼Œæœ¬åœ°æ”¹å®Œï¼Œ<br>pushåˆ°ä»“åº“å†…ï¼Œ<br>å†ä»æœåŠ¡å™¨pullä¸‹æ¥ï¼Œé‡æ–°buildï¼Œ<br>å†é‡‡ç”¨å¦‚ä¸Šçš„å„ç§æ–¹æ³•ã€‚è¿™æ ·æ— å½¢ä¹‹ä¸­å°±åŠ å¤§äº†æ—¶é—´æˆæœ¬ï¼Œ<br>å› è€Œæˆ‘çš„è§£å†³æ–¹æ³•æ—¶é‡‡ç”¨pm2çš„è‡ªåŠ¨åŒ–éƒ¨ç½²æ–¹æ³•ï¼Œæ¥å®ç°æœ¬åœ°ä¸€é”®éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚</p><p>é¦–å…ˆä½ è¦ç¡®ä¿ä½ æœ¬åœ°/æœåŠ¡å™¨/Githubä¸Šå®ç°äº†æ— å¯†ç™»å½•<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529130841.png"                      alt=""                ></p><h3 id="å…·ä½“æµç¨‹"><a href="#å…·ä½“æµç¨‹" class="headerlink" title="å…·ä½“æµç¨‹"></a>å…·ä½“æµç¨‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.çœ‹ä½ æœ‰æ²¡æœ‰.sshçš„æ–‡ä»¶ã€‚</span></span><br><span class="line">cd ~/.ssh</span><br><span class="line"><span class="comment">//2.æ²¡æœ‰åˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªã€‚</span></span><br><span class="line">mkdir ~/.ssh</span><br><span class="line"><span class="comment">//3.ç”Ÿæˆä¸€ä¸ªè¯æ˜ï¼ˆé»˜è®¤ä¼šç”Ÿæˆid_rsaå’Œid_rsa.pubï¼Œå¦‚æœä½ ä¹‹å‰æœ‰ç”Ÿæˆè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç°åœ¨å°±ä¸éœ€è¦å†ç”Ÿæˆäº†ï¼Œå¯ä»¥å¤ç”¨çš„ï¼Œè€Œä¸”æ–°ç”Ÿæˆçš„id_rsaå’Œid_rsa.pubè¿˜ä¼šè¦†ç›–æ‰åŸæ¥çš„ï¼Œç‰¹åˆ«æ˜¯è¿ç€å…¬å¸çš„svnå’Œgitçš„ä¸€äº›ï¼Œæœ€å¥½ä¸è¦å†ç”Ÿæˆäº†ï¼‰</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="comment">//4.å°†è¯æ˜å¤åˆ¶åˆ°é˜¿é‡Œäº‘çš„è™šæ‹Ÿæœº</span></span><br><span class="line">é¦–å…ˆéœ€è¦è¿›å…¥åˆ°.sshç›®å½•</span><br><span class="line">cd ~/.ssh</span><br><span class="line">scp id_rsa.pub chan@IPåœ°å€:~<span class="regexp">/.ssh/i</span>d_rsa.pub</span><br><span class="line"><span class="comment">//5.å°†è¯ä¹¦å†™å…¥åˆ°authorized_keysï¼ˆè¿™æ ·å°±èƒ½ä¿è¯ä¸è¾“å…¥å¯†ç ç™»å…¥ï¼‰</span></span><br><span class="line">ç™»å…¥è‡ªå·±çš„è™šæ‹Ÿæœº</span><br><span class="line">ssh root@IPåœ°å€</span><br><span class="line">cd ~/.ssh</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class="line"><span class="comment">//6.é”€æ¯ä¹‹å‰çš„è¯ä¹¦å°±è¡Œ</span></span><br><span class="line">rm id_rsa.pub</span><br><span class="line">exit</span><br><span class="line"><span class="comment">//å¥½äº†ï¼Œç°åœ¨ä½ å°±å¯ä»¥ä¸ç”¨è¾“å…¥å¯†ç å°±ç™»å…¥åˆ°ä½ çš„é˜¿é‡Œäº‘è™šæ‹Ÿæœºäº†ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹æƒé™"><a href="#é…ç½®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹æƒé™" class="headerlink" title="é…ç½®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹æƒé™"></a>é…ç½®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹æƒé™</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /test</span><br><span class="line">cd /test</span><br><span class="line">sudo mkdir production</span><br><span class="line">#ä¿®æ”¹æƒé™,å…ˆåˆ‡æ¢åˆ°test</span><br><span class="line">sudo chmod <span class="number">777</span> production</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ä½ çš„é¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ecosystem-json"><a href="#é…ç½®ä½ çš„é¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ecosystem-json" class="headerlink" title="é…ç½®ä½ çš„é¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ecosystem.json"></a>é…ç½®ä½ çš„é¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ecosystem.json</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;apps&quot;</span>:&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;é¡¹ç›®åç§°&quot;</span>,</span><br><span class="line">    <span class="string">&quot;script&quot;</span>:<span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;env&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;COMMON_VARIABLE&quot;</span>:<span class="string">&quot;true&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;env_production&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;NODE_ENV&quot;</span>:<span class="string">&quot;production&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;deploy&quot;</span>:&#123;</span><br><span class="line">    <span class="string">&quot;production&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;user&quot;</span>:<span class="string">&quot;æœåŠ¡å™¨ç™»å½•è´¦å·ä¸è¦ç”¨root&quot;</span>, <span class="comment">//æœåŠ¡å™¨åç§° æ¯”å¦‚ chan</span></span><br><span class="line">        <span class="string">&quot;host&quot;</span>:[<span class="string">&quot;192.168.2.31&quot;</span>], <span class="comment">//æœåŠ¡å™¨ip</span></span><br><span class="line">        <span class="string">&quot;port&quot;</span>:<span class="string">&quot;22&quot;</span>  <span class="comment">//æœåŠ¡å™¨ç«¯å£</span></span><br><span class="line">        <span class="string">&quot;ref&quot;</span>:<span class="string">&quot;origin/master&quot;</span>,</span><br><span class="line">        <span class="string">&quot;repo&quot;</span>:<span class="string">&quot;http://gitä»“åº“åœ°å€&quot;</span>,</span><br><span class="line">        <span class="string">&quot;path&quot;</span>:<span class="string">&quot;/test/production&quot;</span>, <span class="comment">//é¡¹ç›®ç›®å½•</span></span><br><span class="line">        <span class="string">&quot;ssh_options&quot;</span>:<span class="string">&quot;StrictHostKeyChecking=no&quot;</span>,</span><br><span class="line">        <span class="string">&quot;post-deploy&quot;</span>:<span class="string">&quot;yarn &amp;&amp; yarn build &amp;&amp; pm2 startOrRestart ecosystem.json --env production&quot;</span>, <span class="comment">//æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">        <span class="string">&quot;env&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;NODE_ENV&quot;</span>:<span class="string">&quot;production&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„è¸©è¿‡çš„å‘ï¼š"><a href="#æ³¨æ„è¸©è¿‡çš„å‘ï¼š" class="headerlink" title="æ³¨æ„è¸©è¿‡çš„å‘ï¼š"></a>æ³¨æ„è¸©è¿‡çš„å‘ï¼š</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529112847.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529112917.png"                      alt=""                ></p><p>ç„¶åè¾“å…¥ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529113109.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529113140.png"                      alt=""                ></p><p>ç¬¬ä¸€æ¬¡éƒ¨ç½²åœ¨æœ¬åœ°itermä¸­è¾“å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm2 deploy ecosystem.json production setup</span><br><span class="line"><span class="comment">//æ­¤æ—¶ä¼šåœ¨æœåŠ¡å™¨ /www/test/productionæ–°å»ºä¸‰ä¸ªç›®å½•</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ¬¡ä»¥åå¯ä»¥è¾“å…¥<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 deploy ecosystem.json production</span><br></pre></td></tr></table></figure><br>å³å‘å¸ƒæˆåŠŸã€‚</p><p>æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå°±å¯ä»¥å®ç°åˆ©ç”¨pm2æœ¬åœ°éƒ¨ç½²é¡¹ç›®åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·å°±çœæ‰äº†ç™»å…¥æœåŠ¡å™¨å–æ›´æ–°ä»£ç çš„æ­¥éª¤äº†ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190529113204.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„slot</title>
      <link href="2019/03/02/Vue%E4%B8%AD%E7%9A%84slot/"/>
      <url>2019/03/02/Vue%E4%B8%AD%E7%9A%84slot/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ 2.6.0 ä¸­ï¼Œæˆ‘ä»¬ä¸ºå…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç»Ÿä¸€çš„è¯­æ³• (å³ v-slot æŒ‡ä»¤)ã€‚å®ƒå–ä»£äº† slot å’Œ slot-scope è¿™ä¸¤ä¸ªç›®å‰å·²è¢«åºŸå¼ƒä½†æœªè¢«ç§»é™¤<br><a id="more"></a></p><p>Slotçš„é€šä¿—ç†è§£æ˜¯â€œå å‘â€ï¼Œåœ¨ç»„ä»¶æ¨¡æ¿ä¸­å å¥½äº†ä½ç½®ï¼Œå½“ä½¿ç”¨è¯¥ç»„ä»¶æ ‡ç­¾æ—¶å€™ï¼Œç»„ä»¶æ ‡ç­¾é‡Œé¢çš„å†…å®¹å°±ä¼šè‡ªåŠ¨å¡«å‘ï¼ˆæ›¿æ¢ç»„ä»¶æ¨¡æ¿ä¸­<slot>ä½ç½®ï¼‰ï¼Œå½“æ’æ§½ä¹Ÿå°±æ˜¯å‘<slot name=â€mySlotâ€>æœ‰å‘½åæ—¶ï¼Œç»„ä»¶æ ‡ç­¾ä¸­ä½¿ç”¨å±æ€§slot=â€mySlotâ€çš„å…ƒç´ å°±ä¼šæ›¿æ¢è¯¥å¯¹åº”ä½ç½®å†…å®¹ï¼›<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304150640.png"                      alt=""                ></p><h3 id="å•ä¸ªæ’æ§½"><a href="#å•ä¸ªæ’æ§½" class="headerlink" title="å•ä¸ªæ’æ§½"></a>å•ä¸ªæ’æ§½</h3><p>çœ‹å•ä¸ªæ’æ§½ï¼Œå³æ²¡æœ‰åœ¨<slot>æ ‡ç­¾ä¸­æ˜¾å¼çš„è®¾ç½®nameå€¼ã€‚æ¯”å¦‚SlotDemoè¿™ä¸ªç»„ä»¶ï¼Œè€Œä¸”åœ¨slotæ ‡ç­¾ä¸­æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å†…å®¹ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¥ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡v-slot:defaultæ¥è°ƒç”¨æœªæ˜¾å¼è®¾ç½®nameçš„slotï¼šä¸€ä¸ªä¸å¸¦nameçš„<slot>å‡ºå£ä¼šå¸¦æœ‰éšå«çš„åå­—default</p><p>slotdemo.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;slot-demo&quot;</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">slot</span>&gt;</span>å•ä¸ªæ’æ§½<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span>&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// export default &#123;</span></span><br><span class="line"><span class="comment">//   name: &quot;slotdemo&quot;</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>helloword.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Hello Vue <span class="keyword">in</span> CodeSandbox!&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;Learn slot&lt;/h3&gt;</span><br><span class="line">    &lt;slot-demo&gt;&lt;/slot-demo&gt;</span><br><span class="line">    &lt;p&gt;=============&lt;/p&gt;</span><br><span class="line">    &lt;slot-demo&gt;</span><br><span class="line">      &lt;template v-slot:<span class="keyword">default</span>&gt;</span><br><span class="line">        &lt;p&gt;v-slot:defatult çš„ä½¿ç”¨&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/slot-demo&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304123425.png"                      alt=""                ></p><h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h3><p>layout.vue<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;slot name=<span class="string">&quot;header&quot;</span>&gt; <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>header<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> &lt;/slot&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">  &lt;main&gt;</span><br><span class="line">    &lt;slot&gt; <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>middler<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> &lt;/slot&gt;</span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">  &lt;footer&gt;</span><br><span class="line">    &lt;slot name=<span class="string">&quot;footer&quot;</span>&gt; <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> &lt;/slot&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!--ä¸ç”¨å†™name--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// export default &#123;</span></span><br><span class="line"><span class="comment">//   name: &quot;layout&quot;</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><br>helloword.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Hello Vue <span class="keyword">in</span> CodeSandbox!&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;Learn slot&lt;/h3&gt;</span><br><span class="line">    &lt;slot-demo&gt;&lt;/slot-demo&gt;</span><br><span class="line">    &lt;p&gt;=============&lt;/p&gt;</span><br><span class="line">    &lt;slot-demo&gt;</span><br><span class="line">      &lt;template v-slot:<span class="keyword">default</span>&gt;</span><br><span class="line">        &lt;p&gt;v-slot:defatult çš„ä½¿ç”¨&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/slot-demo&gt;</span><br><span class="line">    &lt;p&gt;=============&lt;/p&gt;</span><br><span class="line">    &lt;slot-layout&gt;</span><br><span class="line">      &lt;template v-slot:header&gt;</span><br><span class="line">        &lt;h1&gt;è¿™é‡Œæœ‰å¤´éƒ¨&lt;/h1&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;p&gt;A paragraph <span class="keyword">for</span> the main content.&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;And another one.&lt;/p&gt;</span><br><span class="line">      &lt;template v-slot:footer&gt;</span><br><span class="line">        &lt;p&gt;è¿™é‡Œæ˜¯åº•éƒ¨&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/slot-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304135735.png"                      alt=""                ></p><blockquote><p>æ³¨æ„ v-slot åªèƒ½æ·»åŠ åœ¨ä¸€ä¸ª<code>&lt;template&gt;</code> ä¸Š </p></blockquote><h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><p>slotlist.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;item&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(item, index) in items&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">      &lt;slot v-bind:item=<span class="string">&quot;item&quot;</span>&gt;&#123;&#123;item.name&#125;&#125;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;list&quot;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    items: &#123;</span><br><span class="line">      type: <span class="built_in">Array</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>helloword.vue<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hello&quot;</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;=============&lt;/p&gt;</span><br><span class="line">    &lt;List :items=<span class="string">&quot;colors&quot;</span> v-slot=<span class="string">&quot;color&quot;</span>&gt; &lt;/List&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> SlotDemo <span class="keyword">from</span> <span class="string">&quot;../slot/slotdemo.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">&quot;../slot/list.vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    SlotDemo,</span><br><span class="line">    List</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      colors: [</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&quot;Yellow&quot;</span>, <span class="attr">hex</span>: <span class="string">&quot;#F4D03F&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&quot;Green&quot;</span>, <span class="attr">hex</span>: <span class="string">&quot;#229954&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&quot;Purple&quot;</span>, <span class="attr">hex</span>: <span class="string">&quot;#9B59B6&quot;</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304145940.png"                      alt=""                ></p><html><br><iframe src="https://codesandbox.io/embed/8246w61xr9?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><br></html>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼</title>
      <link href="2019/03/01/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/03/01/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤‡å¿˜å½•æ¨¡å¼:åœ¨ä¸ç ´åå¯¹è±¡çš„å°è£…ç‰¹æ€§çš„å‰æä¸‹,åœ¨å¯¹è±¡ä¹‹å¤–æ•è·å¹¶ä¿å­˜è¯¥å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ä»¥ä¾¿æ—¥åå¯¹è±¡ä½¿ç”¨æˆ–è€…å¯¹è±¡æ¢å¤åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€</p></blockquote><a id="more"></a><p>æˆ‘ä»¬åœ¨åšåˆ—è¡¨é¡µè¯·æ±‚çš„æ—¶å€™è¿›è¡Œä¼šé‡åˆ°ä¸Šä¸€é¡µæ•°æ®ä¸ä¸‹ä¸€é¡µæ•°æ®ä¹‹é—´çš„äº¤äº’.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‹ä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">$(&amp;#39;#next page&amp;#39;).click(function() &#123;</span><br><span class="line">  <span class="comment">//è·å–æ–°é—»å†…å®¹å…ƒç´ </span></span><br><span class="line">  <span class="keyword">var</span> $news = $(&amp;quot;#news content&amp;quot;)ï¼Œ</span><br><span class="line">  <span class="comment">//è·å–æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ®</span></span><br><span class="line">  page = $news.data(&amp;#39;page&amp;#39;);</span><br><span class="line">  <span class="comment">//è·å–å¹¶æ˜¾ç¤ºæ–°é—»</span></span><br><span class="line">  getPageData(page, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//ä¿®æ­£æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ®</span></span><br><span class="line">    $news.data(&amp;#39;page&amp;#39;, page + 1)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//1ä¸Šä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">$(#pre page &amp;#39;).click (function() &#123;</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºä¸Šä¸€é¡µ</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>getPageData æ˜¯ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageData</span> (<span class="params">page,fn</span>)</span>&#123;</span><br><span class="line">    $.post(&amp;#39;./data/getNewsData.php&amp;#39;,&#123;</span><br><span class="line">     page:page</span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(res.errNo == <span class="number">0</span> )&#123;</span><br><span class="line">    showPage(page,res.data)</span><br><span class="line">    fn &amp;&amp; fn()</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæŸé¡µé€»è¾‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPage</span>(<span class="params">page,data</span>) </span>&#123;</span><br><span class="line"><span class="comment">// body...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¹ˆå¤„ç†çœ‹èµ·æ¥æ— å¯åšé,ä¸è¿‡å¯¹äºç”¨æˆ·ç‚¹å‡»ä¸‹ä¸€é¡µå,åˆç‚¹å‡»ä¸Šä¸€é¡µè¿™ç§æµè§ˆè¡Œä¸ºæ˜¯ä¸æ˜¯æ„Ÿè§‰ç¬¬äºŒæ¬¡è¯·æ±‚æ˜¯å¤šä½™çš„?å› ä¸ºç¬¬ä¸€æ¬¡ä½ å·²ç»è·å–äº†æ•°æ®,ä¸éœ€è¦å†å¤šå‘ä¸€æ¬¡è¯·æ±‚,å¦‚æœç”¨æˆ·ç½‘é€Ÿä¸å¥½,é‚£å¯¹äºç”¨æˆ·æ¥è¯´,ä½“éªŒæ˜¯ç³Ÿç³•çš„.æ‰‹æœºç«¯æµé‡ä¹Ÿæ˜¯ä¸€ç§æµªè´¹</p><h2 id="ç¼“å­˜æ•°æ®"><a href="#ç¼“å­˜æ•°æ®" class="headerlink" title="ç¼“å­˜æ•°æ®"></a>ç¼“å­˜æ•°æ®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pageå¤‡å¿˜å½•ç±»</span></span><br><span class="line"><span class="keyword">var</span> Page = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//ä¿¡æ¯ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">var</span> cache = &#123;&#125;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">     ä¸»å‡½æ•°</span></span><br><span class="line"><span class="comment">     å‚æ•°pageé¡µç </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">page, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­è¯¥é¡µæ•°æ®æ˜¯å¦åœ¨ç¼“å­˜ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (cache[page]) &#123;</span><br><span class="line">      <span class="comment">//æ¢å¤åˆ°è¯¥é¡µçŠ¶æ€ï¼Œæ˜¾ç¤ºè¯¥é¡µå†…å®¹</span></span><br><span class="line">      showPage(page, cache[page]);</span><br><span class="line">      <span class="comment">//æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•°</span></span><br><span class="line">      fn &amp;&amp; fn();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//è‹¥ç¼“å­˜Cacheä¸­æ— è¯¥é¡µæ•°æ®</span></span><br><span class="line">      $.post(&amp;#39;./data/getNewsData.php&amp;#39;, &#123;</span><br><span class="line">        <span class="comment">//è¯·æ±‚æºå¸¦æ•°æ®pageé¡µç </span></span><br><span class="line">        page: page</span><br><span class="line">      &#125;ï¼Œ<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// æˆåŠŸè¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (res.errNo == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">//æ˜¾ç¤ºè¯¥é¡µæ•°æ®</span></span><br><span class="line">          showPage(page, res.data);</span><br><span class="line">          <span class="comment">//å°†è¯¥é¡µæ•°æ®ç§å…¥ç¼“å­˜ä¸­</span></span><br><span class="line">          cache[page] = res.data;</span><br><span class="line">          <span class="comment">//æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•°</span></span><br><span class="line">          fn &amp;&amp; fn();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//å¤„ç†å¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>page ç¼“å­˜å™¨ä¸ getPageData æ–¹æ³•ä¸åŒä¹‹å¤„åœ¨ Page ç±»çš„å†…éƒ¨ç¼“å­˜äº†<code>æ¯æ¬¡è¯·æ±‚å›æ¥</code>çš„æ–°é—»æ•°æ®,ä»¥åç”¨æˆ·ä¼šçœ‹æŸé¡µé¢æ–°é—»æ•°æ®,å°±ä¸å¿…è¦é‡æ–°è¯·æ±‚äº†.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‹ä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">$(&amp;#39;#next page&amp;#39;).click(function() &#123;</span><br><span class="line">  <span class="comment">//Tè·å–æ–°é—»å†…å®¹å…ƒç´ </span></span><br><span class="line">  <span class="keyword">var</span> $news = $(&amp;quot;#news content&amp;quot;)ï¼Œ</span><br><span class="line">  <span class="comment">//è·å–æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ®</span></span><br><span class="line">  page = $news.data(&amp;#39;page&amp;#39;);</span><br><span class="line">  <span class="comment">//è·å–å¹¶æ˜¾ç¤ºæ–°é—»</span></span><br><span class="line">  Page(page, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//ä¿®æ­£æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ®</span></span><br><span class="line">    $news.data(&amp;#39;page&amp;#39;, page + 1)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¤‡å¿˜å½•æ¨¡å¼æœ€ä¸»è¦çš„ä»»åŠ¡å°±æ˜¯å¯¹<code>ç°æœ‰</code>çš„æ•°æ®æˆ–è€…çŠ¶æ€åš<code>ç¼“å­˜</code>,ä»è€Œé™ä½å¯¹æ•°æ®çš„è·å–æˆæœ¬</p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„Mixins</title>
      <link href="2019/03/01/Vue%E4%B8%AD%E7%9A%84Mixins%20%20/"/>
      <url>2019/03/01/Vue%E4%B8%AD%E7%9A%84Mixins%20%20/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ··å…¥ (mixins) æ˜¯ä¸€ç§åˆ†å‘ Vue ç»„ä»¶ä¸­å¯å¤ç”¨åŠŸèƒ½çš„éå¸¸çµæ´»çš„æ–¹å¼ã€‚æ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚</p></blockquote><a id="more"></a><p>å­¦äº†vueå‡ ä¸ªæœˆæ—¶é—´åšäº†å‡ ä¸ªå°é¡¹ç›®ï¼ŒmixinçœŸçš„å¾ˆå°‘ç”¨ï¼Œä½†æŒºé‡è¦çš„å¸Œæœ›åšç‚¹ç¬”è®°è®°å½•ä¸‹</p><p>åœ¨é¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œå¸¸ä¼šç¢°åˆ°è¿™æ ·çš„ä¸€ç§ç°è±¡ï¼šæœ‰ä¸¤ä¸ªç»„ä»¶éå¸¸ç›¸ä¼¼ï¼Œæ¯”å¦‚è¾ƒä¸ºç†Ÿæ‚‰çš„Modalã€Tooltipï¼Œå®ƒä»¬éƒ½å…·æœ‰åŒæ ·çš„åŸºæœ¬å‡½æ•°ï¼Œè€Œä¸”å®ƒä»¬ä¹‹å‰ä¹Ÿæœ‰è¶³å¤Ÿçš„ä¸åŒã€‚å¾ˆå¤šæ—¶å€™ï¼Œå°±è®©äººå¾ˆéš¾åšå‡ºé€‰æ‹©ï¼šæ˜¯æŠŠå®ƒä»¬æ‹†ä¼šæˆå¤šä¸ªä¸åŒçš„ç»„ä»¶å‘¢ï¼Ÿè¿˜æ˜¯åªä½¿ç”¨ä¸€ä¸ªç»„ä»¶ï¼Œåˆ›å»ºè¶³å¤Ÿçš„å±æ€§æ¥æ”¹å˜ä¸åŒçš„æƒ…å†µã€‚<br>æ‰€æœ‰è¯·å‡ºäº†ä»Šå¤©æˆ‘ä»¬çš„<code>çŒªè§’</code>Minxins.</p><p><code>mixins</code>ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨Vueç»„ä»¶ä¸­å…±ç”¨åŠŸèƒ½çš„æ–¹æ³•ã€‚ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œå°†å…±ç”¨çš„åŠŸèƒ½ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å…¥mixinsé€‰é¡¹ä¸­ã€‚å½“ç»„ä»¶ä½¿ç”¨mixinså¯¹è±¡æ—¶ï¼Œæ‰€æœ‰mixinså¯¹è±¡çš„é€‰é¡¹éƒ½å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ç›®</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303170446.png"                      alt=""                ></p><h4 id="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myMinxin= &#123;</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`æˆ‘æ¥è‡ªminxin`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    mixins:[myMixin]</span><br><span class="line">&#125;)  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303232733.png"                      alt=""                ></p><h4 id="æ›´è§„èŒƒçš„ä½¿ç”¨"><a href="#æ›´è§„èŒƒçš„ä½¿ç”¨" class="headerlink" title="æ›´è§„èŒƒçš„ä½¿ç”¨"></a>æ›´è§„èŒƒçš„ä½¿ç”¨</h4><p>åˆ›å»ºä¸€ä¸ªminxinçš„æ–‡ä»¶å¤¹ä¸­æ”¾minxins.jsæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; myMixin &#125; <span class="keyword">from</span> <span class="string">&quot;../mixin/mixins.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [myMixin],  </span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303233200.png"                      alt=""                ></p><h4 id="è¿˜å¯ä»¥å¼•å…¥å¤šä¸ªminxinsï¼Œä¸€æ—¦å¼•å…¥éƒ½ä¼šè¢«ä½¿ç”¨"><a href="#è¿˜å¯ä»¥å¼•å…¥å¤šä¸ªminxinsï¼Œä¸€æ—¦å¼•å…¥éƒ½ä¼šè¢«ä½¿ç”¨" class="headerlink" title="è¿˜å¯ä»¥å¼•å…¥å¤šä¸ªminxinsï¼Œä¸€æ—¦å¼•å…¥éƒ½ä¼šè¢«ä½¿ç”¨"></a>è¿˜å¯ä»¥å¼•å…¥å¤šä¸ªminxinsï¼Œä¸€æ—¦å¼•å…¥éƒ½ä¼šè¢«ä½¿ç”¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; myMixinï¼ŒmyMinxin2 &#125; <span class="keyword">from</span> <span class="string">&quot;../mixin/mixins.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [myMixin,myMinxin2],  </span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303233559.png"                      alt=""                ></p><h4 id="å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚"><a href="#å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚" class="headerlink" title="å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚"></a>å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚</h4><blockquote><p>é»˜è®¤æ˜¯mixinsä¸Šä¼šé¦–å…ˆè¢«æ³¨å†Œï¼Œç»„ä»¶ä¸Šçš„æ¥ç€æ³¨å†Œï¼</p></blockquote><p>åœ¨Vueä¸­mixinså¸¸è§çš„åˆå¹¶ä¸»è¦æœ‰ä¸‰ç§æƒ…å½¢ï¼šæ•°æ®dataã€ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­å‡½æ•°å’Œå€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹</p><h5 id="æ•°æ®åˆå¹¶"><a href="#æ•°æ®åˆå¹¶" class="headerlink" title="æ•°æ®åˆå¹¶"></a>æ•°æ®åˆå¹¶</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mixdata, mindataAnother &#125; <span class="keyword">from</span> <span class="string">&quot;../mixin/mixins.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [mixdata, mindataAnother],</span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">      age: <span class="string">&quot;22&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303235833.png"                      alt=""                ></p><p>ç»“è®ºï¼šæ•°æ®å¯¹è±¡åœ¨å†…éƒ¨åˆ†è¿›è¡Œæµ…åˆå¹¶ï¼ˆä¸€å±‚å±æ€§æ·±åº¦ï¼‰ï¼Œåœ¨å’Œç»„ä»¶çš„æ•°æ®å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥<code>ç»„ä»¶æ•°æ®ä¼˜å…ˆ</code>ã€‚</p><h5 id="é’©å­å‡½æ•°åˆå¹¶"><a href="#é’©å­å‡½æ•°åˆå¹¶" class="headerlink" title="é’©å­å‡½æ•°åˆå¹¶"></a>é’©å­å‡½æ•°åˆå¹¶</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [myMixin, myMixin2],</span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">      age: <span class="string">&quot;22&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ¥è‡ªç»„ä»¶çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304000415.png"                      alt=""                ><br>ç»“è®ºï¼šå½“ç»„ä»¶ä½¿ç”¨çš„mixinså¯¹è±¡æœ‰ç›¸åŒçš„é€‰é¡¹æ—¶ï¼Œæ¯”å¦‚é’©å­å‡½æ•°ï¼Œå°±ä¼šå…¨éƒ¨è¢«åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå› æ­¤<code>éƒ½ä¼šè¢«æ‰§è¡Œ</code>ï¼Œå¹¶ä¸”<code>mixinså¯¹è±¡ä¸­çš„é’©å­ä¼šå…ˆè¢«æ‰§è¡Œ</code>ã€‚</p><h5 id="å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹åˆå¹¶"><a href="#å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹åˆå¹¶" class="headerlink" title="å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹åˆå¹¶"></a>å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹åˆå¹¶</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [myMixin],</span><br><span class="line">  name: <span class="string">&quot;HelloWorld&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">      age: <span class="string">&quot;22&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">message</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.msg);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ¥è‡ªç»„ä»¶çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">    <span class="comment">// console.log(this.$data);</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190304001621.png"                      alt=""                ><br>ç»“è®ºï¼šå½“mixinså¯¹è±¡å’Œç»„ä»¶ä¸­çš„é€‰é¡¹çš„å€¼ä¸ºå¯¹è±¡æ—¶ï¼Œæ¯”å¦‚methodsã€componentså’Œdirectivesï¼Œå°†è¢«æ··åˆä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚å½“ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œ<code>ç»„ä»¶é€‰é¡¹ä¼˜å…ˆ</code>ã€‚</p><html><br><iframe src="https://codesandbox.io/embed/n3ynlx0kmp?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><br></html><h4 id="å…¨å±€Mixins"><a href="#å…¨å±€Mixins" class="headerlink" title="å…¨å±€Mixins"></a>å…¨å±€Mixins</h4><p>ä½¿ç”¨èµ·æ¥è¦éå¸¸å°å¿ƒï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ä¸è¦è½»æ˜“å»ä½¿ç”¨å®ƒï¼›</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.<span class="keyword">mixin</span>(&#123; mounted() &#123; </span><br><span class="line">console.log(<span class="string">&#x27;hello from mixin!&#x27;</span>) &#125; </span><br><span class="line">    </span><br><span class="line">&#125;) </span><br><span class="line">new Vue(&#123; ... &#125;)</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><blockquote><p>æ··åˆå¯¹äºå°è£…ä¸€å°æ®µæƒ³è¦å¤ç”¨çš„ä»£ç æ¥è®²æ˜¯æœ‰ç”¨çš„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼</title>
      <link href="2019/02/28/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/28/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>çŠ¶æ€æ¨¡å¼:è§£å†³ç¨‹åºä¸­ä¸€äº›è‡ƒè‚¿çš„åˆ†æ”¯åˆ¤æ–­è¯­å¥é—®é¢˜ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯è½¬åŒ–ä¸ºä¸€ç§ç‹¬ç«‹çš„çŠ¶æ€ï¼Œæ–¹ä¾¿æ¯ä¸€ç§çŠ¶æ€çš„ç®¡ç†ä¸è‡³äºæ¯æ¬¡åªéœ€éå†æ‰€æœ‰åˆ†æ”¯ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–åˆ†æ”¯åˆ¤æ–­æµç¨‹<br><a id="more"></a><br>å¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚ï¼šæŠ•ç¥¨æœ€ç¾å›¾ç‰‡å¾é›†æ´»åŠ¨ï¼Œå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰å›¾ç‰‡çš„ç»“æœå±•ç¤ºä¸€éï¼Œå†…éƒ¨å…ä¸äº†æœ‰å¤šä¸ªåˆ†æ”¯åˆ¤æ–­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å±•ç¤ºç»“æœ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showResult</span> = (<span class="params">result</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(result === <span class="number">0</span>)&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ0&#x27;</span>)&#125;ï¼Œ</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(result === <span class="number">1</span>)&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ1&#x27;</span>)&#125;ï¼Œ</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(result === <span class="number">2</span>)&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ2&#x27;</span>)&#125;ï¼Œ</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(result === <span class="number">3</span>)&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ3&#x27;</span>)&#125;ï¼Œ</span><br></pre></td></tr></table></figure><p>å¦‚æœæŸå¤©éœ€æ±‚è¦å¢åŠ æˆ–å‡å°‘å¤„ç†å°±æ¯”è¾ƒéº»çƒ¦</p><h4 id="çŠ¶æ€å¯¹è±¡çš„å®ç°"><a href="#çŠ¶æ€å¯¹è±¡çš„å®ç°" class="headerlink" title="çŠ¶æ€å¯¹è±¡çš„å®ç°"></a>çŠ¶æ€å¯¹è±¡çš„å®ç°</h4><p>å¦‚æœæˆ‘ä»¬å°†ä¸åŒçš„åˆ¤æ–­ç»“æœå°è£…åœ¨çŠ¶æ€å¯¹è±¡å†…ï¼Œç„¶åæ”¹çŠ¶æ€è¿”å›ä¸€ä¸ªå¯è¢«è°ƒç”¨çš„ç»“æ„æ–¹æ³•ï¼Œç”¨äºè°ƒç”¨çŠ¶æ€å¯¹è±¡å†…éƒ¨æŸç§æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ•ç¥¨ç»“æœçŠ¶æ€å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> ResultState = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> States = &#123;</span><br><span class="line">    state0:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ0&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    state1:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ1&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    state2:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å¤„ç†ç»“æœ2&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–¹æ³•å­˜åœ¨åˆ™æ‰§è¡Œ</span></span><br><span class="line">    States[<span class="string">&#x27;state&#x27;</span>+result] &amp;&amp; States[<span class="string">&#x27;state&#x27;</span>+result]()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//è¿”å›è°ƒç”¨çŠ¶æ€æ–¹æ³•æ¥å£</span></span><br><span class="line">    show:show</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResultState.show(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>çŠ¶æ€æ¨¡å¼çš„ç›®çš„ï¼šå°†æ¡ä»¶åˆ¤æ–­ä¸åŒçš„ç»“æœè½¬åŒ–ä¸ºçŠ¶æ€å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚æ—¢ç„¶æ˜¯å†…éƒ¨çŠ¶æ€ä¸€èˆ¬å°±æ˜¯<code>ç§æœ‰å˜é‡</code>ï¼Œ<code>ç§æœ‰æ–¹æ³•</code>ï¼Œä¾¿äºæˆ‘ä»¬<code>å¢åˆ æ”¹æŸ¥</code>ã€‚</p><h4 id="çŠ¶æ€çš„ä¼˜åŒ–"><a href="#çŠ¶æ€çš„ä¼˜åŒ–" class="headerlink" title="çŠ¶æ€çš„ä¼˜åŒ–"></a>çŠ¶æ€çš„ä¼˜åŒ–</h4><p>æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œå†…éƒ¨ä¿å­˜çŠ¶æ€å˜é‡ï¼Œå†…éƒ¨å°è£…å¥½æ¯ç§åŠ¨ä½œå¯¹åº”çš„çŠ¶æ€ï¼Œæœ€åçŠ¶æ€å¯¹è±¡è¿”å›ä¸€ä¸ªæ¥å£å¯¹è±¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ¸¸æˆçŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">var</span> HeroState = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//å†…éƒ¨çŠ¶æ€ç§æœ‰å˜é‡</span></span><br><span class="line">   <span class="keyword">var</span> _currentState = &#123;&#125;;</span><br><span class="line">   <span class="comment">//åŠ¨ä½œä¸çŠ¶æ€æ–¹æ³•æ˜ å°„</span></span><br><span class="line">   <span class="keyword">var</span> states = &#123;</span><br><span class="line">      jump: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;è·³è·ƒ&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      move: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;ç§»åŠ¨&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      shoot: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;å°„å‡»&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      squat: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;è¹²ä¸‹&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//åŠ¨ä½œæ§åˆ¶ç±»</span></span><br><span class="line">   <span class="keyword">var</span> Action = &#123;</span><br><span class="line">      <span class="comment">//æ”¹å˜çŠ¶æ€æ–¹æ³•</span></span><br><span class="line">      changeState: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">var</span> arg = <span class="built_in">arguments</span>;</span><br><span class="line">         <span class="comment">//é‡ç½®å†…éƒ¨çŠ¶æ€</span></span><br><span class="line">         _currentState = &#123;&#125;;</span><br><span class="line">         <span class="keyword">if</span> (arg.length) &#123;</span><br><span class="line">            <span class="comment">//éå†åŠ¨ä½œ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arg.length; i &lt; len; i++) &#123;</span><br><span class="line">               _currentState[arg[i]] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">//è¿”å›åŠ¨ä½œæ§åˆ¶ç±»</span></span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//æ‰§è¡ŒåŠ¨ä½œ</span></span><br><span class="line">      goes: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘ä¸€æ¬¡åŠ¨ä½œ&#x27;</span>);</span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> _currentState) &#123;</span><br><span class="line">            states[key] &amp;&amp; states[key]()</span><br><span class="line">         &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        change: Action.changeState,</span><br><span class="line">        goes  : Action.goes</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305171739.png"                      alt=""                ><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305171834.png"                      alt=""                ><br>ä½¿ç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªè¶…çº§è§’è‰²</span></span><br><span class="line"><span class="keyword">var</span> hero = <span class="keyword">new</span> HeroState();</span><br><span class="line">hero.change(<span class="string">&#x27;jump&#x27;</span>,<span class="string">&#x27;shoot&#x27;</span>).goes().goes()</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305171934.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190305173126.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼</title>
      <link href="2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ ï¼šåœ¨ä¸æš´éœ²å†…éƒ¨ç»“æ„çš„åŒæ—¶ï¼Œå¯ä»¥é¡ºåˆ©çš„è®¿é—®èšåˆå¯¹è±¡å†…éƒ¨çš„å…ƒç´ </p></blockquote><a id="more"></a><p>é¦–å…ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿­ä»£å™¨ï¼Ÿ<br>æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­çœ‹çœ‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ç¢°åˆ°è¿™æ ·çš„å¾ªç¯æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> nodeList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;p&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> $p       = $(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¦å¯¹ä¸‰ä¸ªå˜é‡è¿›è¡Œéå†è¦å†™å†™ä¸‰ç§æ–¹æ³•</span></span><br><span class="line">array.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i, len = nodeList.length;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(nodeList[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$p.each(<span class="function"><span class="keyword">function</span> (<span class="params">key, p</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(key, p)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç»“æœ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190226110321.png"                      alt=""                ></p><html><br><iframe width="100%" height="300" src="//jsrun.net/efXKp/embedded/js,html,reslut/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><br></html><p><strong>å†™ä¸‰éçƒ¦ä¸çƒ¦ï¼Ÿ</strong></p><p>å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿä½¿ç”¨è¿­ä»£å™¨è¯•è¯•å§ï¼Ÿ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190226105528.png"                      alt=""                ></p><h4 id="å†™ä¸€ä¸ªè¿­ä»£å™¨æ–¹æ³•"><a href="#å†™ä¸€ä¸ªè¿­ä»£å™¨æ–¹æ³•" class="headerlink" title="å†™ä¸€ä¸ªè¿­ä»£å™¨æ–¹æ³•"></a>å†™ä¸€ä¸ªè¿­ä»£å™¨æ–¹æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterator</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">container</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.list  = container.list</span><br><span class="line">      <span class="built_in">this</span>.index = <span class="number">0</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.hasNext()) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">this</span>.list[<span class="built_in">this</span>.index++]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ²¡æœ‰ä¸‹ä¸€é¡¹</span></span><br><span class="line">     <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">hasNext</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.index &gt;=<span class="built_in">this</span>.list.length) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¼å®¹es6ä¸­æ‰€æœ‰æœ‰åºæ•°æ®ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">list</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.list = list</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//ç”Ÿæˆéå†å™¨</span></span><br><span class="line">   <span class="function"><span class="title">getIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Iterator(<span class="built_in">this</span>) <span class="comment">//ä¼ thisæŒ‡å‘Container</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr       = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> container = <span class="keyword">new</span> Container([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="keyword">let</span> iterator  = container.getIterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(iterator.next())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190226095455.png"                      alt=""                ></p><h4 id="åœ¨jqueryä¸­çš„å¼•ç”¨åœº"><a href="#åœ¨jqueryä¸­çš„å¼•ç”¨åœº" class="headerlink" title="åœ¨jqueryä¸­çš„å¼•ç”¨åœº"></a>åœ¨jqueryä¸­çš„å¼•ç”¨åœº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> $data = $(data);  <span class="comment">//ç”Ÿæˆè¿­ä»£å™¨</span></span><br><span class="line">   $data.each(<span class="function"><span class="keyword">function</span> (<span class="params">key,p</span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(key,p);</span><br><span class="line">       </span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//test</span></span><br><span class="line">each(arr)</span><br><span class="line">each(nodeList)</span><br><span class="line">each($p)</span><br></pre></td></tr></table></figure><p><strong>for..ofçš„å†™æ³•ä¹Ÿå±äºè¿­ä»£å™¨çš„ä¸€ç§</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ================åœ¨iteratorä¸­çš„å¼•ç”¨åœºæ™¯=================</span></span><br><span class="line"><span class="comment">// dataè¦å±äº[Symbol.iterator]å±æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eachSyiter</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> data) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(item);</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç­‰åŒäºä¸‹é¢çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eachSyiter</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//ç”Ÿæˆéå†å™¨</span></span><br><span class="line">   <span class="keyword">let</span> iterator = data[<span class="built_in">Symbol</span>.iterator];</span><br><span class="line">   <span class="keyword">let</span> item     = &#123;<span class="attr">done</span>:<span class="literal">false</span>&#125;</span><br><span class="line">   <span class="keyword">while</span> (!item.done) &#123;</span><br><span class="line">      item = iterator.next()</span><br><span class="line">      <span class="keyword">if</span>(!item.done)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(item.value);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€åå†ä¸¾ä¸ªå°æ —å­"><a href="#æœ€åå†ä¸¾ä¸ªå°æ —å­" class="headerlink" title="æœ€åå†ä¸¾ä¸ªå°æ —å­"></a>æœ€åå†ä¸¾ä¸ªå°æ —å­</h4><p><strong>ç”¨ä¸ªè¿­ä»£å™¨æ€æƒ³è§£å†³å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">var</span> Iterator_mode = <span class="function"><span class="keyword">function</span> (<span class="params">item, container</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//è·å–çˆ¶å®¹å™¨</span></span><br><span class="line">   <span class="keyword">var</span> container = container &amp;&amp; <span class="built_in">document</span>.getElementById(container) || <span class="built_in">document</span>;</span><br><span class="line">   <span class="comment">//è·å–å…ƒç´ </span></span><br><span class="line">   <span class="keyword">var</span> items = container.getElementsByTagName(items);</span><br><span class="line">   <span class="comment">//è·å–å…ƒç´ é•¿åº¦</span></span><br><span class="line">   <span class="keyword">var</span> length = items.length;</span><br><span class="line">   <span class="comment">//å½“å‰å…ƒç´ ç´¢å¼•</span></span><br><span class="line">   <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">//ç¼“å­˜åŸæ¥æ•°ç»„çš„æ–¹æ³• === æµ…å¤åˆ¶ä¸€ä»½å‰¯æœ¬</span></span><br><span class="line">   <span class="keyword">var</span> splice = items.splice(<span class="number">0</span>);</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//ç¬¬ä¸€ä¸ª</span></span><br><span class="line">      first: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//æœ€åä¸ª</span></span><br><span class="line">      last: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//å‰ä¸€ä¸ª</span></span><br><span class="line">      prev: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//åä¸€ä¸ª</span></span><br><span class="line">      next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//è·å–æŸä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">      get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//å¯¹æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡ŒæŸä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">      dealEach: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//å¯¹æŸä¸€ä¸ªå…ƒç´ æ‰§è¡ŒæŸä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">      dealItem: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">      <span class="comment">//æ’å®ƒæ–¹å¼å¤„ç†æŸä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">      exclusive: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> demo = <span class="keyword">new</span> Iterator_mode(<span class="string">&quot;li&quot;</span>, <span class="string">&#x27;container&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(demo.first());</span><br><span class="line"><span class="built_in">console</span>.log(demo.last());</span><br><span class="line"><span class="built_in">console</span>.log(demo.next());</span><br><span class="line"><span class="built_in">console</span>.log(demo.get(<span class="number">2000</span>));</span><br><span class="line"><span class="comment">//å¤„ç†æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">demo.dealEach(<span class="function"><span class="keyword">function</span>(<span class="params">text,color</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.innerHTML        = text;</span><br><span class="line">   <span class="built_in">this</span>.style.background = color;</span><br><span class="line">&#125;,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;pink&#x27;</span>)</span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™ç§æ€æƒ³çš„å¥½å¤„ï¼šè¿­ä»£å™¨æä¾›çš„æ¥å£æ–¹æ³•å°±èƒ½è½»æ˜“çš„è®¿é—®èšåˆå¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”šè‡³ä¸éœ€è¦çŸ¥é“èšåˆå¯¹è±¡å†…éƒ¨çš„å…·ä½“ç»“æ„</p></blockquote><h5 id="å®ç°ä¸‹ä¸Šé¢è¿­ä»£å™¨çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼š"><a href="#å®ç°ä¸‹ä¸Šé¢è¿­ä»£å™¨çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼š" class="headerlink" title="å®ç°ä¸‹ä¸Šé¢è¿­ä»£å™¨çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼š"></a>å®ç°ä¸‹ä¸Šé¢è¿­ä»£å™¨çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼š</h5><p>first</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">first:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> items[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>last</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">last:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    index = length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> items[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pre</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pre:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(--index&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> items[index]</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>next<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">next:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(++index &lt; length)&#123;</span><br><span class="line">        <span class="keyword">return</span> items[index]</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        index = length -<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>get<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">get:<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">     <span class="comment">//å¦‚æœnumå¤§äºç­‰äº0 å†è·å–æ­£å‘è·å–ï¼Œå¦åˆ™é€†å‘è·å–</span></span><br><span class="line">    index = num &gt;= <span class="number">0</span> ? num%length : num%length+length;</span><br><span class="line">    <span class="keyword">return</span> items[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>dealEach<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="æ•°ç»„è¿­ä»£å™¨"><a href="#æ•°ç»„è¿­ä»£å™¨" class="headerlink" title="æ•°ç»„è¿­ä»£å™¨"></a>æ•°ç»„è¿­ä»£å™¨</h4><p>æ¯”å¦‚ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒeachæ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°æ•°ç»„è¿­ä»£å™¨ï¼Œå®ƒæŠŠå…ƒç´ çš„<code>ç´¢å¼•</code>å’Œ<code>ç´¢å¼•å€¼</code>ä¼ å…¥<code>å›è°ƒå‡½æ•°</code>ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eachArray = <span class="function"><span class="keyword">function</span>(<span class="params">arr,fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length;</span><br><span class="line">    <span class="comment">//éå†æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (;i &lt; len;i++) &#123;</span><br><span class="line">       <span class="comment">//ä»¥æ­¤æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ³¨æ„å›è°ƒå‡½æ•°ä¸­ä¼ å…¥å‚æ•°ç¬¬ä¸€ä¸ªä¸ºç´¢å¼•,</span></span><br><span class="line">       <span class="comment">//ç¬¬äºŒä¸ªæ˜¯ç´¢å¼•å€¼</span></span><br><span class="line">       <span class="keyword">if</span>(fn.call(arr[i],i,arr[i]) === <span class="literal">false</span>)</span><br><span class="line">       &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡è¿­ä»£å™¨"><a href="#å¯¹è±¡è¿­ä»£å™¨" class="headerlink" title="å¯¹è±¡è¿­ä»£å™¨"></a>å¯¹è±¡è¿­ä»£å™¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eachObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj,fn</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">      <span class="keyword">if</span>(fn.call(obj[i],i,obj[i]) === <span class="literal">false</span>)&#123;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åŒæ­¥å˜é‡è¿­ä»£å™¨"><a href="#åŒæ­¥å˜é‡è¿­ä»£å™¨" class="headerlink" title="åŒæ­¥å˜é‡è¿­ä»£å™¨"></a>åŒæ­¥å˜é‡è¿­ä»£å™¨</h4><p>æˆ‘ä»¬åœ¨é¡µé¢åŒæ­¥å˜é‡å†…æŸäº›å±æ€§å€¼æ—¶ï¼Œæˆ‘ä»¬ä¸çŸ¥é“æœåŠ¡ç«¯å°†è¯¥å±æ€§æˆ–è€…è¯¥å±æ€§çš„ä¸Šé¡ºåºæ‰“å°åˆ°é¡µé¢ä¸Šï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ç‚¹è¯­æ³•æˆ–è€…[]è¯­æ³•ç›´æ¥å¯¼è‡´é”™è¯¯ï¼Œå› æ­¤éœ€è¦ä¸€å±‚ä¸€å±‚çš„å»å®‰å…¨æ ¡éªŒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = a &amp;&amp; a.b &amp;&amp; a.b.c;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨è¿­ä»£å™¨æ¥æ ¡éªŒä»£ç æ•°æ®</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">bGetter = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//å¦‚æœbä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›æœªå®šä¹‰</span></span><br><span class="line">   <span class="keyword">if</span>(!b) <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">   <span class="keyword">var</span> result = b;               <span class="comment">//è·å–åŒæ­¥bçš„å¯¹è±¡</span></span><br><span class="line">       key    = key.split(<span class="string">&#x27;.&#x27;</span>);  <span class="comment">//è§£æå±æ€§çš„å±‚æ¬¡åºåˆ—</span></span><br><span class="line">   <span class="comment">//è¿­ä»£åŒæ­¥å˜é‡bå¯¹è±¡å±æ€§</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len=key.length; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(result[key[i]] != <span class="literal">undefined</span>)&#123;</span><br><span class="line">         result = result[key[i]]</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//è¿”å›è·å–ç»“æœ</span></span><br><span class="line">   <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(bGetter(<span class="string">&quot;client.user.username&quot;</span>)); <span class="comment">//è½»èˆé£æ‰¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æœ¬åœ°è¯­è¨€æ•°æ®</span></span><br><span class="line"><span class="built_in">console</span>.log(bGetter(<span class="string">&quot;server.lang.local&quot;</span>));  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><br>å¦‚æœæœ‰æ—¶å€™ç”¨æˆ·æ•°æ®åœ¨ä¸»é¡µä¼šæ·»åŠ ä¸€äº›æˆ–ä¿®æ”¹ä¸€äº›æ•°æ® ä¹Ÿå¯ä»¥é€šè¿‡åŒæ­¥å˜é‡èµ‹å€¼å™¨æ¥å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">bSetter = <span class="function"><span class="keyword">function</span> (<span class="params">key,val</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//å¦‚æœbä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›æœªå®šä¹‰</span></span><br><span class="line">   <span class="keyword">if</span> (!b) <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">   <span class="keyword">var</span> result = b;</span><br><span class="line">       key    = key.split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">   <span class="comment">//è¿­ä»£åŒæ­¥å˜é‡bå¯¹è±¡å±æ€§</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = key.length; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="comment">//å¦‚æœç¬¬iå±‚å±æ€§å¯¹åº”çš„å€¼ä¸å­˜åœ¨ï¼Œåˆ™å®šä¹‰ä¸ºå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (result[key[i]] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">         result[key[i]] = &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//å¦‚æœç¬¬iå±‚å±æ€§å¯¹åº”çš„å€¼ä¸æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œåˆ™æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">      <span class="keyword">if</span>(!result[key[i]] <span class="keyword">instanceof</span> <span class="built_in">Object</span>)&#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;b&#x27;</span>+ key.splice(<span class="number">0</span>,i+<span class="number">1</span>).join(<span class="string">&quot;.&quot;</span>)+<span class="string">&quot;is not object&quot;</span>);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//è¿­ä»£æ”¹å±‚çš„å±æ€§å€¼</span></span><br><span class="line">      result = result[key[i]]</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//è¿”å›è·å–ç»“æœ</span></span><br><span class="line">   <span class="keyword">return</span> result[key[i]] = val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(bSetter(<span class="string">&quot;client.module.news.sports&quot;</span>,<span class="string">&quot;javascript&quot;</span>)); <span class="comment">//è½»èˆé£æ‰¬</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼ä¹‹é“¾æ¨¡å¼</title>
      <link href="2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%93%BE%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆæ—©ä¹‹å‰ä¸€ç›´æƒ³è¯»ä¸€ä¸‹jqueryæˆ–è€…zeptoçš„æºç ï¼Œä½†è¯»æºç ä¹‹å‰è¿˜æ˜¯å¾—å…ˆäº†è§£ä¸‹ä¸Šé¢æ˜¯é“¾æ¨¡å¼ï¼›å› ä¸ºæºç çš„æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸ªé“¾æ¨¡å¼<br><a id="more"></a></p><blockquote><p>é“¾æ¨¡å¼ï¼šé€šè¿‡å¯¹è±¡æ–¹æ³•ä¸­å°†å½“å‰å¯¹è±¡è¿”å›ï¼Œå®ç°åŒä¸€ä¸ªå¯¹è±¡å¤šä¸ªæ–¹æ³•çš„é“¾å¼è°ƒç”¨ï¼Œä»è€Œç®€åŒ–è¯¥å¯¹è±¡å¤šä¸ªæ–¹æ³•çš„å¤šæ¬¡è°ƒç”¨ï¼Œå¯¹è¯¥å¯¹è±¡çš„å¤šæ¬¡å¼•ç”¨ã€‚</p></blockquote><h4 id="è¯´ç™½äº†è¿™äº›éƒ½æ˜¯åŸºäºåŸå‹ç»§æ‰¿"><a href="#è¯´ç™½äº†è¿™äº›éƒ½æ˜¯åŸºäºåŸå‹ç»§æ‰¿" class="headerlink" title="è¯´ç™½äº†è¿™äº›éƒ½æ˜¯åŸºäºåŸå‹ç»§æ‰¿"></a>è¯´ç™½äº†è¿™äº›éƒ½æ˜¯åŸºäºåŸå‹ç»§æ‰¿</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/åŸå‹.png"                      alt=""                ><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190301133406.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">A.prototype = &#123;</span><br><span class="line">    length:<span class="number">2</span>,</span><br><span class="line">    size:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³è®¿é—®sizeæ–¹æ³•è¯¥å¦‚ä½•åšï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> A();</span><br><span class="line"><span class="built_in">console</span>.log(a.size()) <span class="comment">//2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æœ‰æ²¡æœ‰æƒ³è¿‡å¦‚æœè¿™æ ·è®¿é—®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(A.size())   <span class="comment">//æŠ¥é”™</span></span><br><span class="line"><span class="built_in">console</span>.log(A().size()) <span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure><h4 id="ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ</h4><ol><li><p>ç¬¬ä¸€ç§å› ä¸ºsizeç»‘å®šåœ¨<code>åŸå‹</code>ä¸Šæ²¡æœ‰ç»‘å®šåœ¨è‡ªå·±èº«ä¸Š</p></li><li><p>ç¬¬äºŒç§Aå‡½æ•°å¯¹åº”æ‰§è¡Œç»“æœæ²¡æœ‰è¿”å›å€¼æ‰¾ä¸åˆ°sizeæ–¹æ³•</p></li></ol><h4 id="æ‰¾ä½å°åŠ©æ‰‹"><a href="#æ‰¾ä½å°åŠ©æ‰‹" class="headerlink" title="æ‰¾ä½å°åŠ©æ‰‹"></a>æ‰¾ä½å°åŠ©æ‰‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.fn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> A.fn = A.prototype = &#123;</span><br><span class="line">    length:<span class="number">2</span>,</span><br><span class="line">    size:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="built_in">console</span>.log(A.fn);</span><br><span class="line"><span class="built_in">console</span>.log(A().size());</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228090150.png"                      alt=""                ></p><h4 id="è·å–å…ƒç´ "><a href="#è·å–å…ƒç´ " class="headerlink" title="è·å–å…ƒç´ "></a>è·å–å…ƒç´ </h4><p>ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›A.fnèƒ½æä¾›è·å–å…ƒç´ æ–¹æ³•çš„initç„¶åå†Aä¸­è¿”å›<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.fnæ–¹æ³•ä¸­æä¾›initç”¨æ¥è·å–å…ƒç´ ç„¶åè¿”å›</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> A.fn.init(selector)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A.fn = A.prototype = &#123;</span><br><span class="line">   length: <span class="number">2</span>,</span><br><span class="line">   size  : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">   &#125;,</span><br><span class="line">   init: <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(selector)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="built_in">console</span>.log(A(<span class="string">&#x27;demo&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228090652.png"                      alt=""                ></p><h4 id="è¿˜é‡åˆ°ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿”å›ç»“æœèƒ½å¤Ÿæ‹¥æœ‰A-fnä¸­çš„å¾ˆå¤šæ–¹æ³•å¦‚ä½•åŠåˆ°å‘¢ï¼Ÿ"><a href="#è¿˜é‡åˆ°ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿”å›ç»“æœèƒ½å¤Ÿæ‹¥æœ‰A-fnä¸­çš„å¾ˆå¤šæ–¹æ³•å¦‚ä½•åŠåˆ°å‘¢ï¼Ÿ" class="headerlink" title="è¿˜é‡åˆ°ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿”å›ç»“æœèƒ½å¤Ÿæ‹¥æœ‰A.fnä¸­çš„å¾ˆå¤šæ–¹æ³•å¦‚ä½•åŠåˆ°å‘¢ï¼Ÿ"></a>è¿˜é‡åˆ°ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿”å›ç»“æœèƒ½å¤Ÿæ‹¥æœ‰A.fnä¸­çš„å¾ˆå¤šæ–¹æ³•å¦‚ä½•åŠåˆ°å‘¢ï¼Ÿ</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190301134338.png"                      alt=""                ></p><blockquote><p>thiså¤§æ³•å¥½ï¼thisæŒ‡å‘çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åˆå¯ä»¥è®¾ç½®å±æ€§é‚£æˆ‘ä»¬æŠŠthiså¯¹è±¡è®¾ç½®æˆå½“å‰å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ä¸å°±å¯ä»¥äº†å˜›~~~O(âˆ©_âˆ©)O</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªé—®é¢˜å¦‚ä½•è®¿é—®å…ƒç´ çš„åŒæ—¶ï¼Œåˆèƒ½è®¿é—®å¯¹è±¡ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> A.fn.init(selector)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A.fn = A.prototype = &#123;</span><br><span class="line">   length: <span class="number">2</span>,</span><br><span class="line">   size  : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;sizefn &#x27;</span>,<span class="built_in">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">   &#125;,</span><br><span class="line">   init: <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;initfn &#x27;</span>,<span class="built_in">this</span>); <span class="comment">//fn</span></span><br><span class="line">      <span class="built_in">this</span>[<span class="number">0</span>]          = <span class="built_in">document</span>.getElementById(selector)</span><br><span class="line">           <span class="built_in">this</span>.length = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;  <span class="comment">//è¿”å›this</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="keyword">var</span> demo = A(<span class="string">&#x27;demo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(demo);</span><br><span class="line"><span class="built_in">console</span>.log(demo.size());<span class="comment">//2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228092307.png"                      alt=""                ></p><p>è¿˜æ˜¯ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜<br>å¦‚æœè¢«è¦†ç›–</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">test</span> = A(&#x27;<span class="keyword">test</span>&#x27;)</span><br><span class="line">console.<span class="built_in">log</span>(demo);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228092454.png"                      alt=""                ></p><h4 id="åŸå› æ˜¯ï¼š"><a href="#åŸå› æ˜¯ï¼š" class="headerlink" title="åŸå› æ˜¯ï¼š"></a>åŸå› æ˜¯ï¼š</h4><p><strong>Aæ„é€ å‡½æ•°æ¯æ¬¡returnè¿”å›A.fn.initå¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼›<br>æ‰€ä»¥é‚£æˆ‘ä»¬åŠ ä¸Šä¸€ä¸ªnew</strong></p><p>ä½†æ˜¯è¿˜æ˜¯ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜è°ƒç”¨sizeæ–¹æ³•å°±ä¼šæŠ¥é”™</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ„é€ å‡½æ•°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡é€ æˆçš„</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> A.fn.init(selector)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = A(<span class="string">&#x27;demo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(demo);</span><br><span class="line"><span class="keyword">var</span> test = A(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(demo); </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;==============&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(demo.size()); <span class="comment">//ä¸ºä»€ä¹ˆæŠ¥é”™</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228131038.png"                      alt=""                ></p><p>newä¹‹å‰</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228131333.png"                      alt=""                ></p><p>newä¹‹å</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228131220.png"                      alt=""                ></p><p>åŸå› ï¼š<br>ç”±äºnewå¯¹<code>å¯¹è±¡</code>å†…çš„å±æ€§è¿›è¡Œäº†å¤åˆ¶ï¼Œæ‰€ä»¥thisæŒ‡å‘ä¸åœ¨æ˜¯A.fnã€A.prototype è€Œæ˜¯A.fn.A.initå‘¢ï¼Ÿ</p><blockquote><p>åŸå‹æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•æ˜¯åœ¨æ„é€ å‡½æ•°newå…³é”®è¯æŒ‡å‘æ—¶æ‰èƒ½è¢«æ„é€ å‡½æ•°è·å–ï¼Œæ‰€ä»¥å¹³æ—¶æ„é€ å‡½æ•°æ˜¯è·å–ä¸åˆ°åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•çš„</p></blockquote><h4 id="é˜²æ­¢æ–¹æ³•ä¸¢å¤±"><a href="#é˜²æ­¢æ–¹æ³•ä¸¢å¤±" class="headerlink" title="é˜²æ­¢æ–¹æ³•ä¸¢å¤±"></a>é˜²æ­¢æ–¹æ³•ä¸¢å¤±</h4><p><strong>new A.fn.init(selector)ä¸­çš„initä¸­çš„thisä¸ºä»€ä¹ˆæŒ‡å‘ A.fn.A.init????</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ„é€ å‡½æ•°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡é€ æˆçš„</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> A.fn.init(selector)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A.fn = A.prototype = &#123;</span><br><span class="line">   <span class="title">constructor</span>: <span class="title">A</span>,</span><br><span class="line">   <span class="title">init</span>       : <span class="title">function</span> (<span class="params">selector</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.constructor);</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">      Æ’(selector) &#123;</span></span><br><span class="line"><span class="comment">          return new A.fn.init(selector)</span></span><br><span class="line"><span class="comment">       &#125;</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">   &#125;,</span><br><span class="line">   length: <span class="number">2</span>,</span><br><span class="line">   size  : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">   &#125;,</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™å¥éå¸¸é‡è¦</span></span><br><span class="line">A.fn.init.prototype = A.fn;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="keyword">var</span> demo = A(<span class="string">&#x27;demo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(demo);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;==============&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(demo.size()); <span class="comment">//2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åªè¦å°†æ„é€ å‡½æ•°çš„å¯¹è±¡æŒ‡å‘ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡å³å¯</strong></p><h4 id="æ•°ç»„ä¸å¯¹è±¡"><a href="#æ•°ç»„ä¸å¯¹è±¡" class="headerlink" title="æ•°ç»„ä¸å¯¹è±¡"></a>æ•°ç»„ä¸å¯¹è±¡</h4><p>jqueryè¿”å›çš„æ˜¯æ•°ç»„<br>Aæ¡†æ¶è¿”å›çš„æ˜¯å¯¹è±¡<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228174706.png"                      alt=""                ></p><p><strong>åŸå› ï¼šæ•°ç»„ å¯¹è±¡  å‡½æ•°éƒ½è¢«çœ‹æˆå¯¹è±¡çš„å®ä¾‹ï¼Œjavascriptæ²¡æœ‰ä¸€ä¸ªçº¯ç²¹çš„æ•°ç»„ç±»å‹ï¼Œ<code>ä¸€äº›æµè§ˆå™¨å¼•æ“</code>åœ¨åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ•°ç»„ä¸ä»…ä»…åˆ¤æ–­æœ‰æ²¡æœ‰lengthé•¿åº¦ï¼Œè¿˜ä¼šåˆ¤æ–­æ˜¯å¦å…·æœ‰æ•°ç»„æ–¹æ³•æ¥ç¡®å®šæ˜¯å¦ç”¨æ•°ç»„å½¢å¼å±•å¼€</strong></p><p>å¢åŠ å‡ ä¸ªæ•°ç»„æ–¹æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">A.fn = A.prototype = &#123;</span><br><span class="line">   <span class="title">constructor</span>: <span class="title">A</span>,</span><br><span class="line">   <span class="title">init</span>       : <span class="title">function</span> (<span class="params">selector, context</span>) &#123;</span><br><span class="line">      <span class="comment">//è·å–å…ƒç´ é•¿åº¦</span></span><br><span class="line">      <span class="built_in">this</span>.length = <span class="number">0</span>;</span><br><span class="line">      <span class="comment">//........</span></span><br><span class="line">      <span class="comment">//è¿”å›thiså¯¹è±¡</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span></span><br><span class="line">   &#125;,</span><br><span class="line">   push  : [].push,</span><br><span class="line">   sort  : [].sort,</span><br><span class="line">   splice: [].splice,</span><br><span class="line">   length: <span class="number">2</span>,</span><br><span class="line">   size  : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.length</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228175024.png"                      alt=""                ></p><h4 id="æ–¹æ³•ä¸æ‰©å±•"><a href="#æ–¹æ³•ä¸æ‰©å±•" class="headerlink" title="æ–¹æ³•ä¸æ‰©å±•"></a>æ–¹æ³•ä¸æ‰©å±•</h4><p>é€šè¿‡å¯¹jqueryçš„extendæ–¹æ³•å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†extendçš„2ä¸ªä½œç”¨<code>ä¸€ä¸ªé˜Ÿå¤–éƒ¨å¯¹è±¡æ‰©å±•ï¼ŒäºŒæ˜¯å¯¹å†…éƒ¨å¯¹è±¡æ‰©å±•</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">A.extend = A.fn.extend = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i      = <span class="number">1</span>,</span><br><span class="line">        len    = <span class="built_in">arguments</span>.length,</span><br><span class="line">        target = <span class="built_in">arguments</span>[<span class="number">0</span>],</span><br><span class="line">    j;</span><br><span class="line">    <span class="keyword">if</span>(i === len)&#123;</span><br><span class="line">       target = <span class="built_in">this</span>;</span><br><span class="line">       i--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éå†å‚æ•°ä¸­çš„æ‰©å±•å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span>(;i&lt;len;i++)&#123;</span><br><span class="line">       <span class="comment">//éå†æ‰©å±•å¯¹è±¡ä¸­çš„å±æ€§</span></span><br><span class="line">       <span class="keyword">for</span>(j <span class="keyword">in</span> <span class="built_in">arguments</span>[i])&#123;</span><br><span class="line">          <span class="comment">//æ‰©å±•å¯¹è±¡</span></span><br><span class="line">          target[j] = <span class="built_in">arguments</span>[i][j]</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è¿”å›å¯¹è±¡&#x27;</span>,target);</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = A.extend(&#123;<span class="attr">first</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">second</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">third</span>:<span class="number">3</span>&#125;,&#123;<span class="attr">four</span>:<span class="number">4</span>&#125;,&#123;<span class="attr">five</span>:<span class="number">5</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(demo);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo1 = A.extend(A.fn,&#123;<span class="attr">version</span>:<span class="string">&quot;1.0&quot;</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(demo1); </span><br><span class="line"></span><br><span class="line">A.fn.extend(&#123;<span class="attr">getVersion</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">this</span>.version</span><br><span class="line">&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(A(<span class="string">&#x27;demo&#x27;</span>).getVersion());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190228183555.png"                      alt=""                ></p><h4 id="æ·»åŠ æ–¹æ³•"><a href="#æ·»åŠ æ–¹æ³•" class="headerlink" title="æ·»åŠ æ–¹æ³•"></a>æ·»åŠ æ–¹æ³•</h4>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</title>
      <link href="2019/02/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤–è§‚æ¨¡å¼(é—¨é¢æ¨¡å¼)ï¼Œæ˜¯ä¸€ç§ç›¸å¯¹ç®€å•è€Œåˆæ— å¤„ä¸åœ¨çš„æ¨¡å¼ã€‚å¤–è§‚æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—å®¢æˆ·ç«¯æˆ–å­ç³»ç»Ÿæ›´åŠ æ–¹ä¾¿è°ƒç”¨ã€‚</p></blockquote><a id="more"></a><p>è¿˜ä¸æ˜ç™½å°±çœ‹å›¾ï¼š</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190225151252.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœºæ™¯</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params">elem,type,selector,fn</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(fn == <span class="literal">null</span>)&#123;</span><br><span class="line">      fn       = selector;</span><br><span class="line">      selector = <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//dosomething.......</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨</span></span><br><span class="line">bindEvent(elem,<span class="string">&#x27;click&#x27;</span>,<span class="string">&quot;#div1&quot;</span>,fn)</span><br><span class="line">bindEvent(elem,<span class="string">&quot;moveIn&quot;</span>,fn)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆçœ‹ä¸€ä¸ªæ¯”è¾ƒåˆçº§å°ç™½çš„å†™æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//badå†™æ³•</span></span><br><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">   e.preventDefault();</span><br><span class="line">   <span class="keyword">if</span>(e.target !== <span class="built_in">document</span>.getElementById(<span class="string">&quot;myinput&quot;</span>))&#123;</span><br><span class="line">      hidePageAlert();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hidePageAlert</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;éšè—å¼¹çª—&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼š<br>1.onclickçš„ç‚¹å‡»äº‹ä»¶åœ¨<code>dom0</code>çº§äº‹ä»¶å¤„ç†ï¼Œå¦‚æœå…¶ä»–å¼€å‘äººå‘˜ä¹Ÿç”¨è¿™ä¸ªç»‘å®šäº‹ä»¶å°±ä¼šè¦†ç›–è¿™ä¸ªç‚¹å‡»äº‹ä»¶<br>2.ä½ç‰ˆæœ¬æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒe.preventDefaultå’Œe.targetä¹Ÿéœ€è¦å¤„ç†<br>2.å¦‚æœç”¨<code>dom2</code>äº‹ä»¶å¤„ç†åº”è¯¥å¯¹è€ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹å¤„ç†<code>attachEvent</code>ï¼Œå¦‚æœä¸æ”¯æŒdom2 é‚£åªèƒ½ç”¨onclick</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤–è§‚æ¨¡å¼å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">dom,type,fn</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//å¯¹äºdom2äº‹ä»¶çš„å¤„ç†</span></span><br><span class="line">   <span class="keyword">if</span>(dom.addEventListener)&#123;</span><br><span class="line">      dom.addEventListener(type,fn,<span class="literal">false</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dom.attachEvent)&#123;</span><br><span class="line">      dom.attachEvent(<span class="string">&quot;on&quot;</span>+type,fn)</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//ä¸æ”¯æŒaddevnetæˆ–è€… attachEventçš„æ–¹æ³•</span></span><br><span class="line">      dom[<span class="string">&#x27;on&#x27;</span>+type] = fn</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–domå…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> myInput = <span class="built_in">document</span>.getElementById(<span class="string">&quot;myinput&quot;</span>);</span><br><span class="line">addEvent(myInput,<span class="string">&quot;click&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;ç»‘å®šç¬¬ä¸€ä¸ªäº‹ä»¶ä¸­&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">&#125;)</span><br><span class="line">addEvent(myInput,<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;ç»‘å®šç¬¬äºŒä¸ªäº‹ä»¶ä¸­&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">addEvent(myInput, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;ç»‘å®šç¬¬ä¸‰ä¸ªäº‹ä»¶ä¸­&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„e-preventDefaultå’Œe-targetå¤„ç†"><a href="#å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„e-preventDefaultå’Œe-targetå¤„ç†" class="headerlink" title="å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„e.preventDefaultå’Œe.targetå¤„ç†"></a>å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„e.preventDefaultå’Œe.targetå¤„ç†</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–äº‹ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> getEvent = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> event || <span class="built_in">window</span>.event;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> getTarget = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> event = getEvent(event)</span><br><span class="line">   <span class="keyword">return</span> event.target || event.srcElement</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜»æ­¢é»˜è®¤äº‹ä»¶</span></span><br><span class="line"><span class="keyword">var</span> preventDefault = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> event = getEvent(event);</span><br><span class="line">   <span class="keyword">if</span>(event.preventDefault)&#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      event.returnValue = <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨ä¼˜åŒ–ä¸€ä¸‹ä¹‹å‰çš„å°ç™½ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼˜åŒ–</span></span><br><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">   preventDefault(e)</span><br><span class="line">   <span class="keyword">if</span>(getTarget(e) !== <span class="built_in">document</span>.getElementById(<span class="string">&quot;myinput&quot;</span>))&#123;</span><br><span class="line">      hidePageAlert();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¸å¤šä»£ç å—ä¹Ÿé‡‡ç”¨å¤–è§‚æ¨¡å¼æ¥å°è£…å¤šä¸ªåŠŸèƒ½ï¼Œæ¥ç®€åŒ–åº•å±‚æ“ä½œæ–¹æ³•ï¼šæ¯”å¦‚æˆ‘ä»¬æ¥è·å–å…ƒç´ å±æ€§æ ·å¼çš„ç®€å•æ–¹æ³•åº“</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç®€çº¦ç‰ˆæœ¬è·å–å…ƒç´ æ ·å¼æ–¹æ³•åº“</span></span><br><span class="line"><span class="keyword">let</span> $ = &#123;</span><br><span class="line">   <span class="comment">//é€šè¿‡idè·å–</span></span><br><span class="line">   g:<span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//è®¾ç½®å…ƒç´ csså±æ€§</span></span><br><span class="line">   css:<span class="function"><span class="keyword">function</span>(<span class="params">id,key,val</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(id).style[key] = val</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//è®¾ç½®å…ƒç´ å±æ€§</span></span><br><span class="line">   attr:<span class="function"><span class="keyword">function</span>(<span class="params">id,key,val</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(id)[key] = val</span><br><span class="line">   &#125;,</span><br><span class="line">   html:<span class="function"><span class="keyword">function</span>(<span class="params">id,html</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(id).innerHTML = html</span><br><span class="line">   &#125;,</span><br><span class="line">   on:<span class="function"><span class="keyword">function</span>(<span class="params">id,type,fn</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(id)[<span class="string">&#x27;on&#x27;</span>+type] = fn</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$.css(<span class="string">&#x27;book&#x27;</span>,<span class="string">&#x27;background&#x27;</span>,<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line">$.attr(<span class="string">&quot;book&quot;</span>,<span class="string">&quot;className&quot;</span>,<span class="string">&quot;box&quot;</span>)</span><br><span class="line">$.html(<span class="string">&#x27;book&#x27;</span>,<span class="string">&#x27;è¿™æ˜¯æ›´æ–°çš„æ¶ˆæ¯&#x27;</span>)</span><br><span class="line">$.on(<span class="string">&quot;book&quot;</span>,<span class="string">&quot;click&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   $.css(<span class="string">&#x27;book&#x27;</span>, <span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;150px&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;p id=&quot;book&quot; class=&quot;box&quot; style=&quot;background: red; width: 150px;&quot;&gt;è¿™æ˜¯æ›´æ–°çš„æ¶ˆæ¯&lt;/p&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</title>
      <link href="2019/02/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™2ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨</p></blockquote><a id="more"></a><p>ç™½è¯æ–‡ï¼šä»£ç†æ¨¡å¼çš„å®šä¹‰æ˜¯æŠŠå¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®, äº¤ç»™å¦ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ“ä½œ.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImg</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">filename</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.filename = filename;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">display</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;display... &#x27;</span> + <span class="built_in">this</span>.filename)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">loadFromDisk</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;loadding ...&#x27;</span> + <span class="built_in">this</span>.filename)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImg</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">filename</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.realImg = <span class="keyword">new</span> RealImg(<span class="string">&quot;filename&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">display</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.realImg.display();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> proxyImg = <span class="keyword">new</span> ProxyImg(<span class="string">&quot;1.png&quot;</span>);</span><br><span class="line">proxyImg.display(); <span class="comment">//display... filename</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å†ä¸¾ä¸ªæ —å­"><a href="#å†ä¸¾ä¸ªæ —å­" class="headerlink" title="å†ä¸¾ä¸ªæ —å­"></a>å†ä¸¾ä¸ªæ —å­</h3><p>ES6ä¸­çš„proxyéå¸¸å¥½çš„ä½¿ç”¨çš„ä»£ç†æ¨¡å¼çš„ç²¾é«“</p><blockquote><p>let p = new Proxy(target, handler);</p></blockquote><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>target</td><td>ç”¨ProxyåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚</td></tr><tr><td>handler</td><td>ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚</td></tr></tbody></table><p>æ˜æ˜Ÿä¸ç»çºªäººä¹‹é—´çš„å…³ç³»</p><p>æŸä¸ªæ˜æ˜Ÿå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸä¸ªæ˜æ˜Ÿ</span></span><br><span class="line"><span class="keyword">let</span> star = &#123;</span><br><span class="line">    name : <span class="string">&quot;ç‹å¯Œè´µ&quot;</span>,</span><br><span class="line">    age  : <span class="number">18</span>,</span><br><span class="line">    phone: <span class="string">&#x27;13084920234&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜æ˜Ÿç»çºªäººå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»çºªäºº</span></span><br><span class="line"><span class="keyword">let</span> agent = <span class="keyword">new</span> <span class="built_in">Proxy</span>(star,&#123;</span><br><span class="line">   get: <span class="function"><span class="keyword">function</span> (<span class="params">target,key</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(key === <span class="string">&quot;phone&quot;</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span>  <span class="string">&#x27;ç»çºªäººphoneï¼š1233423423&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(key === <span class="string">&quot;price&quot;</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&#x27;æ˜æ˜Ÿå‡ºåœºä»·ï¼š120000&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> target[key]</span><br><span class="line">   &#125;,</span><br><span class="line">   set: <span class="function"><span class="keyword">function</span>(<span class="params">target,key,val</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(key === <span class="string">&quot;customPrice&quot;</span>)&#123;</span><br><span class="line">         <span class="keyword">if</span>(val &lt; <span class="number">100000</span>)&#123;</span><br><span class="line">            <span class="comment">//æœ€ä½10w</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;ä»·æ ¼ä¸ä½äº10w&#x27;</span>)</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            target[key] = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(agent.phone);  </span><br><span class="line"><span class="built_in">console</span>.log(agent.price);</span><br><span class="line"><span class="built_in">console</span>.log(agent.age);</span><br><span class="line"><span class="built_in">console</span>.log(agent.name);</span><br><span class="line">agent.customPrice = <span class="number">9000</span>;</span><br><span class="line"><span class="built_in">console</span>.log(agent.customPrice);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190225145719.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="2019/02/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>2019/02/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰ï¼šåœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰äº†ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote><a id="more"></a><p>å…¶å®æˆ‘ä»¬ç»å¸¸æ¥è§¦çš„çš„domäº‹ä»¶. ä¹Ÿæ˜¯jså’Œdomä¹‹é—´å®ç°çš„ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼</p><p>åªè¦è®¢é˜…äº†divçš„clickäº‹ä»¶. å½“ç‚¹å‡»divçš„æ—¶å€™, function clickå°±ä¼šè¢«è§¦å‘.</p><h3 id="åœºæ™¯ï¼š"><a href="#åœºæ™¯ï¼š" class="headerlink" title="åœºæ™¯ï¼š"></a>åœºæ™¯ï¼š</h3><p>ä¸‰ä¸ªå·¥ç¨‹å¸ˆåˆ†åˆ«å†™äº†ä¸‰ä¸ªç‹¬ç«‹çš„æ¨¡å—:ç•™è¨€æ¨¡å—ï¼Œç”¨æˆ·ä¿¡æ¯æ¨¡å—ï¼Œæäº¤ç•™è¨€æ¨¡å—ï¼Œå¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªäººæƒ³æ·»åŠ åˆ«çš„åŠŸèƒ½åˆä¸èƒ½å½±å“å…¶ä»–åŠŸèƒ½ï¼Œä¸æƒ³è‡ªå·±å†™çš„æ¨¡å—ä¸åˆ«äººå†™çš„æ¨¡å—ä¸¥é‡è€¦åˆåœ¨ä¸€èµ·ï¼Œå°±éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼</p><blockquote><p>ç®€å•çš„ç†è§£å¯ä»¥æ˜¯è¿™æ ·çš„ï¼šä¸€ä¸ªå¯¹è±¡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå‘å¸ƒè€…å‘å¸ƒä¿¡æ¯ï¼Œè®¢é˜…è€…è·å–ä¿¡æ¯ï¼Œè®¢é˜…äº†å°±èƒ½æ”¶åˆ°ä¿¡æ¯ï¼Œæ²¡è®¢é˜…å°±æ”¶ä¸åˆ°ä¿¡æ¯ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Observer = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//æ¶ˆæ¯é˜Ÿåˆ—é˜²æ­¢é˜Ÿåˆ—æš´éœ²è¢«ä¿®æ”¹ï¼Œä½œä¸ºç§æœ‰å˜é‡ä¿å­˜</span></span><br><span class="line">   <span class="keyword">var</span> _message = &#123;&#125;</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//æ³¨å†Œä¿¡æ¯æ¥å£</span></span><br><span class="line">      regist: <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (<span class="keyword">typeof</span> _message[type] === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">            _message[type] = [fn];</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _message[type].push(fn)</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//å‘å¸ƒä¿¡æ¯æ¥å£</span></span><br><span class="line">      fire: <span class="function"><span class="keyword">function</span> (<span class="params">type, args</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (!_message[type]) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">var</span> events = &#123;</span><br><span class="line">            type: type,</span><br><span class="line">            args: args || &#123;&#125;</span><br><span class="line">         &#125;,</span><br><span class="line">            i   = <span class="number">0</span>,</span><br><span class="line">            len = _message[type].length;</span><br><span class="line">         <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">            _message[type][i].call(<span class="built_in">this</span>, events);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//ç§»é™¤ä¿¡æ¯æ¥å£</span></span><br><span class="line">      remove: <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (_message[type] <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = _message[type].length - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">               _message[type][i] === fn &amp;&amp; _message[type].splice(i, <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å·¥ç¨‹å¸ˆA</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**å·¥ç¨‹å¸ˆaå†™è¿½åŠ è¯„è®ºåŠŸèƒ½ */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">addMsgItem</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> text           = e.args.text,</span><br><span class="line">          ul             = $$(<span class="string">&#x27;msg&#x27;</span>),</span><br><span class="line">          li             = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">          span           = <span class="built_in">document</span>.createElement(<span class="string">&quot;span&quot;</span>);</span><br><span class="line">          span.innerHTML = text;</span><br><span class="line">          span.onclick   = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         ul.removeChild(li)</span><br><span class="line">         <span class="comment">//å‘å¸ƒè€…åˆ é™¤ç•™è¨€</span></span><br><span class="line">         Observer.fire(<span class="string">&#x27;removeCommentMessage&#x27;</span>, &#123;</span><br><span class="line">            num: -<span class="number">1</span></span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      li.appendChild(span)</span><br><span class="line">      ul.appendChild(li)</span><br><span class="line">   &#125;</span><br><span class="line">   Observer.regist(<span class="string">&quot;addCommentMessage&quot;</span>, addMsgItem);</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>å·¥ç¨‹å¸ˆB<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**Bå·¥ç¨‹å¸ˆå¤åˆ¶é€’å¢ç”¨æˆ·ä¿¡æ¯åŠŸèƒ½æ¨¡å— */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">changeMsgNum</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> num     = e.args.num;</span><br><span class="line">      <span class="keyword">var</span> numtext = $$(<span class="string">&#x27;msg_num&#x27;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(numtext, num);</span><br><span class="line">      numtext.innerHTML = <span class="built_in">parseInt</span>(numtext.innerHTML) + num;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   Observer.regist(<span class="string">&quot;addCommentMessage&quot;</span>, changeMsgNum);</span><br><span class="line">   Observer.regist(<span class="string">&quot;removeCommentMessage&quot;</span>, changeMsgNum);</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><br>å·¥ç¨‹å¸ˆC<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** cå·¥ç¨‹å¸ˆè´Ÿè´£ æäº¤ä¿¡æ¯æ¨¡å—å¼€å‘ */</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   $$(<span class="string">&#x27;user_submit&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> text = $$(<span class="string">&#x27;user_input&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span>(text.value === <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">         alert(<span class="string">&#x27;ä¸èƒ½ç©º&#x27;</span>)</span><br><span class="line">         <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">      Observer.fire(<span class="string">&#x27;addCommentMessage&#x27;</span>,&#123;</span><br><span class="line">          text: text.value,</span><br><span class="line">          num : <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">      text.value = <span class="string">&quot;&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></p><h3 id="è¿˜å¯ä»¥å¯¹è±¡é—´çš„è§£è€¦"><a href="#è¿˜å¯ä»¥å¯¹è±¡é—´çš„è§£è€¦" class="headerlink" title="è¿˜å¯ä»¥å¯¹è±¡é—´çš„è§£è€¦"></a>è¿˜å¯ä»¥å¯¹è±¡é—´çš„è§£è€¦</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Student = <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> that        = <span class="built_in">this</span>;</span><br><span class="line">       that.result = result;</span><br><span class="line">       that.say    = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(that.result);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å›ç­”</span></span><br><span class="line">Student.prototype.answer = <span class="function"><span class="keyword">function</span>(<span class="params">question</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ³¨å†Œå‚æ•°é—®é¢˜</span></span><br><span class="line">    Observer.regist(question,<span class="built_in">this</span>.say)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¡è§‰</span></span><br><span class="line">Student.prototype.sleep = <span class="function"><span class="keyword">function</span>(<span class="params">question</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å–æ¶ˆç›‘å¬</span></span><br><span class="line">    Observer.remove(question,<span class="built_in">this</span>.say)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Teacher = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Teacher.prototype.ask = <span class="function"><span class="keyword">function</span>(<span class="params">question</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è€å¸ˆçš„é—®é¢˜æ˜¯ï¼š &#x27;</span>+ question);</span><br><span class="line">    Observer.fire(question)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> Student(<span class="string">&#x27;å­¦ç”Ÿ1å›ç­”é—®é¢˜&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> student2 = <span class="keyword">new</span> Student(<span class="string">&#x27;å­¦ç”Ÿ2å›ç­”é—®é¢˜&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> student3 = <span class="keyword">new</span> Student(<span class="string">&#x27;å­¦ç”Ÿ3å›ç­”é—®é¢˜&#x27;</span>)</span><br><span class="line"></span><br><span class="line">student1.answer(<span class="string">&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;</span>);</span><br><span class="line">student1.answer(<span class="string">&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student2.answer(<span class="string">&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;</span>)</span><br><span class="line">student3.answer(<span class="string">&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;</span>)</span><br><span class="line">student3.answer(<span class="string">&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;</span>);</span><br><span class="line">student3.sleep(<span class="string">&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> teacher = <span class="keyword">new</span> Teacher();</span><br><span class="line"></span><br><span class="line">teacher.ask(<span class="string">&quot;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&quot;</span>);</span><br><span class="line">teacher.ask(<span class="string">&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190222004926.png"                      alt=""                ></p><p>åœ¨å®é™…å¼€å‘ä¸­ä¸€ä¸ªå·¥ç¨‹å¸ˆå¾ˆéš¾åšåˆ°é¡¹ç›®ä¸­æ¯ä¸€ä¸ªæ¨¡å—ç†Ÿæ‚‰ï¼Œæ¨¡å—é—´ä¿¡æ¯çš„ä¼ é€’ä¸å¿…è¦ç›¸äº’å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œåªéœ€è¦é€šè¿‡è§‚å¯Ÿè€…æ³¨å†Œæˆ–å‘å¸ƒæ¶ˆæ¯ï¼›</p><h3 id="å…¶ä»–ä½¿ç”¨åœºæ™¯"><a href="#å…¶ä»–ä½¿ç”¨åœºæ™¯" class="headerlink" title="å…¶ä»–ä½¿ç”¨åœºæ™¯"></a>å…¶ä»–ä½¿ç”¨åœºæ™¯</h3><p>åœ¨reactä¸­ä¹Ÿç”¨åˆ°çš„è¿™ä¸ªæœºåˆ¶è¿›è¡Œè·¨ç»„ä»¶é€šä¿¡<br>ä¸¾ä¸ªåœºæ™¯ä¾‹å­ï¼šé¡µé¢é¡¶éƒ¨çš„æœç´¢æ¡†ï¼ˆSearchï¼‰æ ¹æ®ä¸‹é¢åŠ è½½çš„å†…å®¹ï¼ˆContentï¼‰é¡µé¢ä¸åŒï¼Œæ˜¾ç¤ºä¸åŒçš„é»˜è®¤å†…å®¹ã€‚ä¹Ÿå°±æ˜¯ Content ç»„ä»¶éœ€è¦å‘é€æ•°æ®ç»™ Search ç»„ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-ä¸€èˆ¬æŒ‡ä»¤</title>
      <link href="2019/02/18/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%B8%80%E8%88%AC%E6%8C%87%E4%BB%A4/"/>
      <url>2019/02/18/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%B8%80%E8%88%AC%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„v-text/v-htmlæŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ<br>ä¸€èˆ¬æŒ‡ä»¤è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-class</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæŒ‡ä»¤"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæŒ‡ä»¤" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæŒ‡ä»¤"></a>åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæŒ‡ä»¤</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶æŒ‡ä»¤ expè¡¨è¾¾å¼ ä¹Ÿå°±æ˜¯ æ–¹æ³•å</span></span><br><span class="line"><span class="keyword">if</span> (me.isEventDirective(dir)) &#123;</span><br><span class="line">compileUtil.eventHandler(node, me.$vm, exp, dir);</span><br><span class="line"><span class="comment">// æ™®é€šæŒ‡ä»¤</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190403234756.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compileUtil = &#123;</span><br><span class="line"><span class="comment">// è§£ætext</span></span><br><span class="line">text: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line"><span class="built_in">this</span>.bind(node, vm, exp, <span class="string">&#x27;text&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">html: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line"><span class="built_in">this</span>.bind(node, vm, exp, <span class="string">&#x27;html&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">class: function(node, vm, exp) &#123;</span><br><span class="line"><span class="built_in">this</span>.bind(node, vm, exp, <span class="string">&#x27;class&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æœ€åä½¿ç”¨æ›´æ–°å™¨æŠŠèŠ‚ç‚¹èµ‹å€¼è¿›å»"><a href="#æœ€åä½¿ç”¨æ›´æ–°å™¨æŠŠèŠ‚ç‚¹èµ‹å€¼è¿›å»" class="headerlink" title="æœ€åä½¿ç”¨æ›´æ–°å™¨æŠŠèŠ‚ç‚¹èµ‹å€¼è¿›å»"></a>æœ€åä½¿ç”¨æ›´æ–°å™¨æŠŠèŠ‚ç‚¹èµ‹å€¼è¿›å»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°å™¨  æ›´æ–°èŠ‚ç‚¹ ç»™èŠ‚ç‚¹èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> updater = &#123;</span><br><span class="line">textUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value</span>) </span>&#123;</span><br><span class="line"><span class="comment">// textContentå°±æ˜¯ &#123;&#123;word&#125;&#125;</span></span><br><span class="line">node.textContent = <span class="keyword">typeof</span> value == <span class="string">&#x27;undefined&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : value;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">htmlUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value</span>) </span>&#123;</span><br><span class="line">node.innerHTML = <span class="keyword">typeof</span> value == <span class="string">&#x27;undefined&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : value;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">classUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value, oldValue</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> className = node.className;</span><br><span class="line">className = className.replace(oldValue, <span class="string">&#x27;&#x27;</span>).replace(<span class="regexp">/\s$/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">     <span class="comment">//åˆ¤æ–­ class=&quot;a b&quot; è¿˜æ˜¯ class=â€œbâ€ æ˜¯å¦éœ€è¦ç©ºæ ¼ï¼Ÿ</span></span><br><span class="line"><span class="keyword">var</span> space = className &amp;&amp; <span class="built_in">String</span>(value) ? <span class="string">&#x27; &#x27;</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">node.className = className + space + value;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">modelUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value, oldValue</span>) </span>&#123;</span><br><span class="line">node.value = <span class="keyword">typeof</span> value == <span class="string">&#x27;undefined&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>1) å¾—åˆ°æŒ‡ä»¤åå’ŒæŒ‡ä»¤å€¼(è¡¨è¾¾å¼) text/html/class msg/myClass<br>2) ä» data ä¸­æ ¹æ®è¡¨è¾¾å¼å¾—åˆ°å¯¹åº”çš„å€¼<br>3) æ ¹æ®æŒ‡ä»¤åç¡®å®šéœ€è¦æ“ä½œå…ƒç´ èŠ‚ç‚¹çš„ä»€ä¹ˆå±æ€§</p><ul><li>v-textâ€”textContent å±æ€§ <em> v-htmlâ€”innerHTML å±æ€§ </em> v-classâ€“className å±æ€§<br>4) å°†å¾—åˆ°çš„è¡¨è¾¾å¼çš„å€¼è®¾ç½®åˆ°å¯¹åº”çš„å±æ€§ä¸Š<br>5) ç§»é™¤å…ƒç´ çš„æŒ‡ä»¤å±æ€§</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-äº‹ä»¶æŒ‡ä»¤</title>
      <link href="2019/02/17/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/"/>
      <url>2019/02/17/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„@clickæŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ<br><a id="more"></a><br>äº‹ä»¶æŒ‡ä»¤è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;button&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="é¦–å…ˆè¿˜æ˜¯åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹"><a href="#é¦–å…ˆè¿˜æ˜¯åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹" class="headerlink" title="é¦–å…ˆè¿˜æ˜¯åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹"></a>é¦–å…ˆè¿˜æ˜¯åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦å…ƒç´ èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (me.isElementNode(node)) &#123;</span><br><span class="line"><span class="comment">// ç¼–è¯‘æŒ‡ä»¤</span></span><br><span class="line">me.compile(node);</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¤§æ‹¬å·çš„æ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç„¶åè¿›å…¥compileç¼–è¯‘"><a href="#ç„¶åè¿›å…¥compileç¼–è¯‘" class="headerlink" title="ç„¶åè¿›å…¥compileç¼–è¯‘"></a>ç„¶åè¿›å…¥compileç¼–è¯‘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nodeAttrs = node.attributes,</span><br><span class="line">me = <span class="built_in">this</span>;</span><br><span class="line"><span class="comment">//[].slice.call(nodeAttrs) ---&gt;ä¼ªæ•°ç»„ è½¬æˆæ•°ç»„</span></span><br><span class="line">[].slice.call(nodeAttrs).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">attr</span>) </span>&#123;</span><br><span class="line"><span class="comment">//attrname = â€œv-on = &quot;click&quot;&quot;</span></span><br><span class="line"><span class="keyword">var</span> attrName = attr.name;</span><br><span class="line"><span class="keyword">if</span> (me.isDirective(attrName)) &#123;</span><br><span class="line"><span class="keyword">var</span> exp = attr.value;</span><br><span class="line"><span class="keyword">var</span> dir = attrName.substring(<span class="number">2</span>); <span class="comment">// &quot;on:click&quot;</span></span><br><span class="line"><span class="comment">// äº‹ä»¶æŒ‡ä»¤</span></span><br><span class="line"><span class="keyword">if</span> (me.isEventDirective(dir)) &#123;</span><br><span class="line">compileUtil.eventHandler(node, me.$vm, exp, dir);</span><br><span class="line"><span class="comment">// æ™®é€šæŒ‡ä»¤</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">node.removeAttribute(attrName);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190403232043.png"                      alt=""                ></p><h3 id="å¦‚ä½•ç»‘å®šäº‹ä»¶"><a href="#å¦‚ä½•ç»‘å®šäº‹ä»¶" class="headerlink" title="å¦‚ä½•ç»‘å®šäº‹ä»¶"></a>å¦‚ä½•ç»‘å®šäº‹ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶å¤„ç†   äº‹ä»¶buttonç»‘å®šäº‹ä»¶ç›‘å¬  äº‹ä»¶åå’Œå›è°ƒå‡½æ•°</span></span><br><span class="line">eventHandler: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp, dir</span>) </span>&#123;</span><br><span class="line"><span class="comment">// å¾—åˆ°äº‹ä»¶ç±»å‹å :click</span></span><br><span class="line"><span class="keyword">var</span> eventType = dir.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>],</span><br><span class="line"><span class="comment">//ä»methodsä¸­å¾—åˆ°è¡¨è¾¾å¼æ‰€å¯¹åº”çš„å‡½æ•°ï¼ˆäº‹ä»¶å›è°ƒå‡½æ•°ï¼‰</span></span><br><span class="line">fn = vm.$options.methods &amp;&amp; vm.$options.methods[exp]; <span class="comment">//å–åˆ°äº‹ä»¶çš„å‡½æ•°</span></span><br><span class="line">    <span class="comment">//å¦‚æœéƒ½å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> (eventType &amp;&amp; fn) &#123;</span><br><span class="line"><span class="comment">//ç»‘å®šäº‹ä»¶ç›‘å¬ fn.bind(vm) //è®©äº‹ä»¶ä¸­ this.name --&gt;æŒ‡å‘vm</span></span><br><span class="line"><span class="comment">// ç»™èŠ‚ç‚¹ç»‘å®šäº‹ä»¶åå’Œå›è°ƒå‡½æ•°domäº‹ä»¶ç›‘å¬</span></span><br><span class="line">node.addEventListener(eventType, fn.bind(vm), <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190403232541.png"                      alt=""                ></p><h3 id="ä½†æˆ‘ä»¬åœ¨é¡µé¢ä¸­çœ‹ä¸åˆ°å¦‚ä½•æŒ‡ä»¤ï¼Œå› ä¸º"><a href="#ä½†æˆ‘ä»¬åœ¨é¡µé¢ä¸­çœ‹ä¸åˆ°å¦‚ä½•æŒ‡ä»¤ï¼Œå› ä¸º" class="headerlink" title="ä½†æˆ‘ä»¬åœ¨é¡µé¢ä¸­çœ‹ä¸åˆ°å¦‚ä½•æŒ‡ä»¤ï¼Œå› ä¸º"></a>ä½†æˆ‘ä»¬åœ¨é¡µé¢ä¸­çœ‹ä¸åˆ°å¦‚ä½•æŒ‡ä»¤ï¼Œå› ä¸º</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç§»é™¤æŒ‡ä»¤å±æ€§</span></span><br><span class="line">node.removeAttribute(attrName);</span><br></pre></td></tr></table></figure><h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><p>æ¨¡æ¿è§£æ(2): äº‹ä»¶æŒ‡ä»¤è§£æ<br>1) ä»æŒ‡ä»¤åä¸­å–å‡ºäº‹ä»¶å<br>2) æ ¹æ®æŒ‡ä»¤çš„å€¼(è¡¨è¾¾å¼)ä» methods ä¸­å¾—åˆ°å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°å¯¹è±¡<br>3) ç»™å½“å‰å…ƒç´ èŠ‚ç‚¹ç»‘å®šæŒ‡å®šäº‹ä»¶åå’Œå›è°ƒå‡½æ•°çš„ dom äº‹ä»¶ç›‘å¬<br>4) æŒ‡ä»¤è§£æå®Œå, ç§»é™¤æ­¤æŒ‡ä»¤å±æ€§</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-è¡¨è¾¾å¼</title>
      <link href="2019/02/16/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90/"/>
      <url>2019/02/16/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„æŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ<br><a id="more"></a><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190218173717.png"                      alt=""                ></p><p>æ¨¡æ¿è§£æä¸»è¦åˆ†ï¼š<br>å¤§æ‹¬å·è§£æ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°† el çš„æ‰€æœ‰å­èŠ‚ç‚¹å–å‡º, æ·»åŠ åˆ°ä¸€ä¸ªæ–°å»ºçš„æ–‡æ¡£ fragment å¯¹è±¡ä¸­<br>å¯¹ fragment ä¸­çš„æ‰€æœ‰å±‚æ¬¡å­èŠ‚ç‚¹é€’å½’è¿›è¡Œç¼–è¯‘è§£æå¤„ç†</p><ul><li>å¯¹å¤§æ‹¬å·è¡¨è¾¾å¼æ–‡æœ¬èŠ‚ç‚¹è¿›è¡Œè§£æ </li><li>å¯¹å…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤å±æ€§è¿›è¡Œè§£æ</li><li>äº‹ä»¶æŒ‡ä»¤è§£æ </li><li>ä¸€èˆ¬æŒ‡ä»¤è§£æ</li><li>å°†è§£æåçš„ fragment æ·»åŠ åˆ° el ä¸­æ˜¾ç¤º</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç¼–è¯‘çš„å¯¹è±¡ ç¼–è¯‘è§£ææˆ‘ä»¬çš„æ¨¡æ¿</span></span><br><span class="line"><span class="built_in">this</span>.$compile = <span class="keyword">new</span> Compile(options.el || <span class="built_in">document</span>.body, <span class="built_in">this</span>)</span><br></pre></td></tr></table></figure><p>ç®€å•åˆ†æç¼–è¯‘è¿‡ç¨‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Compile</span>(<span class="params">el, vm</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¿å­˜vmå¯¹è±¡åˆ°compileä¸­</span></span><br><span class="line">    <span class="built_in">this</span>.$vm = vm;</span><br><span class="line">    <span class="built_in">this</span>.$el = <span class="built_in">this</span>.isElementNode(el) ? el : <span class="built_in">document</span>.querySelector(el);</span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰elå…ƒç´ æ‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$el) &#123;</span><br><span class="line">        <span class="comment">// å–å‡ºelå…ƒç´ ä¸­æ‰€æœ‰å­èŠ‚ç‚¹ä¿å­˜åˆ°fragmentä¸­</span></span><br><span class="line">        <span class="built_in">this</span>.$fragment = <span class="built_in">this</span>.node2Fragment(<span class="built_in">this</span>.$el);</span><br><span class="line">        <span class="comment">// ç¼–è¯‘æ‰€æœ‰å±‚æ¬¡çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">        <span class="comment">//ç¼–è¯‘å¥½çš„elå…ƒç´ æ·»åŠ åˆ°é¡µé¢elå…ƒç´ ä¸­</span></span><br><span class="line">        <span class="built_in">this</span>.$el.appendChild(<span class="built_in">this</span>.$fragment);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190401233727.png"                      alt=""                ><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Compile.prototype = &#123;</span><br><span class="line">...</span><br><span class="line">compileElement: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å–å‡ºæœ€å¤–å±‚çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">var</span> childNodes = el.childNodes,</span><br><span class="line">            me         = <span class="built_in">this</span>;           <span class="comment">//this-&gt; compileå®ä¾‹</span></span><br><span class="line"></span><br><span class="line">        [].slice.call(childNodes).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> text = node.textContent;</span><br><span class="line">            <span class="keyword">var</span> reg  = <span class="regexp">/\&#123;\&#123;(.*)\&#125;\&#125;/</span>; <span class="comment">// åŒ¹é…&#123;&#123;name&#125;&#125; åŠ å°æ‹¬å·æ˜¯ä¸ºäº†$1 ==name</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (me.isElementNode(node)) &#123;</span><br><span class="line">                <span class="comment">// ç¼–è¯‘äº‹ä»¶æŒ‡ä»¤</span></span><br><span class="line">                me.compile(node); <span class="comment">//æ˜¯å¦æœ‰æŒ‡ä»¤å±æ€§</span></span><br><span class="line">                <span class="comment">// æ˜¯æ–‡æœ¬èŠ‚ç‚¹å— æœ‰&#123;&#123;&#125;&#125; å—</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (me.isTextNode(node) &amp;&amp; reg.test(text)) &#123;</span><br><span class="line">                me.compileText(node, <span class="built_in">RegExp</span>.$1);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//  æ˜¯å¦æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (node.childNodes &amp;&amp; node.childNodes.length) &#123;</span><br><span class="line">                me.compileElement(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"> <span class="comment">// æŒ‡ä»¤å¤„ç†é›†åˆ</span></span><br><span class="line"><span class="keyword">var</span> compileUtil = &#123;</span><br><span class="line">    text: <span class="function"><span class="keyword">function</span> (<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.bind(node, vm, exp, <span class="string">&#x27;text&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">     bind: <span class="function"><span class="keyword">function</span> (<span class="params">node, vm, exp, dir</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å¾—åˆ°æ›´æ–°èŠ‚ç‚¹å‡½æ•°</span></span><br><span class="line">        <span class="keyword">var</span> updaterFn = updater[dir + <span class="string">&#x27;Updater&#x27;</span>];</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ›´æ–°èŠ‚ç‚¹</span></span><br><span class="line">        updaterFn &amp;&amp; updaterFn(node, <span class="built_in">this</span>._getVMVal(vm, exp));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Watcher(vm, exp, <span class="function"><span class="keyword">function</span> (<span class="params">value, oldValue</span>) </span>&#123;</span><br><span class="line">            updaterFn &amp;&amp; updaterFn(node, value, oldValue);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="comment">// åŒ…å«å¤šä¸ªæ›´æ–°èŠ‚ç‚¹æ–¹æ³•çš„å·¥å…·å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> updater = &#123;</span><br><span class="line">    textUpdater: <span class="function"><span class="keyword">function</span> (<span class="params">node, value</span>) </span>&#123;</span><br><span class="line">        node.textContent = <span class="keyword">typeof</span> value == <span class="string">&#x27;undefined&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : value;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190401233239.png"                      alt=""                ></p><h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><p>1) æ ¹æ®æ­£åˆ™å¯¹è±¡å¾—åˆ°åŒ¹é…å‡ºçš„è¡¨è¾¾å¼å­—ç¬¦ä¸²: å­åŒ¹é…/RegExp.$1 name<br>2) ä» data ä¸­å–å‡ºè¡¨è¾¾å¼å¯¹åº”çš„å±æ€§å€¼<br>3) å°†å±æ€§å€¼è®¾ç½®ä¸ºæ–‡æœ¬èŠ‚ç‚¹çš„ textContent</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç åˆ†ææ•°æ®ä»£ç†</title>
      <link href="2019/02/15/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86/"/>
      <url>2019/02/15/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>æ€ä¹ˆå®ç° this._test æ”¹å˜è€Œä¸æ˜¯ this._data.test æ”¹å˜è§¦å‘æ›´æ–°ï¼Ÿ<br><a id="more"></a></p><blockquote><p>æ•°æ®ä»£ç†: é€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡(åœ¨å‰ä¸€ä¸ªå¯¹è±¡å†…éƒ¨)ä¸­å±æ€§çš„æ“ä½œ(è¯»/å†™)</p></blockquote><p>vue æ•°æ®ä»£ç†: é€šè¿‡ vm å¯¹è±¡æ¥ä»£ç† data å¯¹è±¡ä¸­æ‰€æœ‰å±æ€§çš„æ“ä½œ</p><blockquote><p>å¥½å¤„: æ›´æ–¹ä¾¿çš„æ“ä½œ data ä¸­çš„æ•°æ®</p></blockquote><h2 id="åŸºæœ¬å®ç°æµç¨‹"><a href="#åŸºæœ¬å®ç°æµç¨‹" class="headerlink" title="åŸºæœ¬å®ç°æµç¨‹"></a>åŸºæœ¬å®ç°æµç¨‹</h2><ol><li>a. é€šè¿‡ Object.defineProperty()ç»™ vm æ·»åŠ ä¸ data å¯¹è±¡çš„å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦</li><li>b. æ‰€æœ‰æ·»åŠ çš„å±æ€§éƒ½åŒ…å« getter/setter</li><li>c. getter/setter å†…éƒ¨å»æ“ä½œ data ä¸­å¯¹åº”çš„å±æ€§æ•°æ®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MVVM</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.$options = options;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="built_in">this</span>._data = <span class="built_in">this</span>.$options.data;</span><br><span class="line">    <span class="keyword">var</span> me = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®ä»£ç†</span></span><br><span class="line">    <span class="comment">// å®ç° vm.xxx -&gt; vm._data.xxx</span></span><br><span class="line">    <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        me._proxy(key);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    observe(data, <span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$compile = <span class="keyword">new</span> Compile(options.el || <span class="built_in">document</span>.body, <span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ä»£ç†*/</span></span><br><span class="line">_proxy(options.data);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_proxy</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> that = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(that, key, &#123;</span><br><span class="line">            configurable: <span class="literal">true</span>,</span><br><span class="line">            enumerable: <span class="literal">true</span>,</span><br><span class="line">            get: <span class="function"><span class="keyword">function</span> <span class="title">proxyGetter</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> that._data[key];</span><br><span class="line">            &#125;,</span><br><span class="line">            set: <span class="function"><span class="keyword">function</span> <span class="title">proxySetter</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">                that._data[key] = val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç åˆ†æå‰æœŸçŸ¥è¯†ç‚¹</title>
      <link href="2019/02/14/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%89%8D%E6%9C%9F%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>2019/02/14/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%89%8D%E6%9C%9F%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>å½’ç±»äº†ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•<br><a id="more"></a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>react<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>jQuery<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>angle<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190214234320.png"                      alt=""                ></p><h3 id="slice-call-lis-å°†ä¼ªæ•°ç»„è½¬æ¢ä¸ºçœŸæ•°ç»„"><a href="#slice-call-lis-å°†ä¼ªæ•°ç»„è½¬æ¢ä¸ºçœŸæ•°ç»„" class="headerlink" title="[].slice.call(lis): å°†ä¼ªæ•°ç»„è½¬æ¢ä¸ºçœŸæ•°ç»„"></a>[].slice.call(lis): å°†ä¼ªæ•°ç»„è½¬æ¢ä¸ºçœŸæ•°ç»„</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lis = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(lis <span class="keyword">instanceof</span> <span class="built_in">Array</span>, lis[<span class="number">1</span>].innerHTML, lis.forEach);</span><br><span class="line">    <span class="keyword">const</span> lis2 = <span class="built_in">Array</span>.prototype.slice.call(lis);</span><br><span class="line">    <span class="built_in">console</span>.log(lis2 <span class="keyword">instanceof</span> <span class="built_in">Array</span>, lis2[<span class="number">1</span>].innerHTML, lis2.forEach);</span><br></pre></td></tr></table></figure><h3 id="node-nodeType-å¾—åˆ°èŠ‚ç‚¹ç±»å‹"><a href="#node-nodeType-å¾—åˆ°èŠ‚ç‚¹ç±»å‹" class="headerlink" title="node.nodeType: å¾—åˆ°èŠ‚ç‚¹ç±»å‹"></a>node.nodeType: å¾—åˆ°èŠ‚ç‚¹ç±»å‹</h3><blockquote><p>doucment element attr textèŠ‚ç‚¹</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> attrNode = ele.getAttributeNode(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> textNode = ele.firstChild;</span><br><span class="line">    <span class="built_in">console</span>.log(ele.nodeType, attrNode.nodeType, textNode.nodeType);</span><br></pre></td></tr></table></figure><h3 id="Object-defineProperty-obj-propertyName-ç»™å¯¹è±¡æ·»åŠ -ä¿®æ”¹å±æ€§-æŒ‡å®šæè¿°ç¬¦"><a href="#Object-defineProperty-obj-propertyName-ç»™å¯¹è±¡æ·»åŠ -ä¿®æ”¹å±æ€§-æŒ‡å®šæè¿°ç¬¦" class="headerlink" title="Object.defineProperty(obj, propertyName, {}): ç»™å¯¹è±¡æ·»åŠ /ä¿®æ”¹å±æ€§(æŒ‡å®šæè¿°ç¬¦)"></a>Object.defineProperty(obj, propertyName, {}): ç»™å¯¹è±¡æ·»åŠ /ä¿®æ”¹å±æ€§(æŒ‡å®šæè¿°ç¬¦)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">     firstName: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">     lastName: <span class="string">&quot;B&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">Object</span>.defineProperty(obj, <span class="string">&quot;fullname&quot;</span>, &#123;</span><br><span class="line">     <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot;-&quot;</span> + <span class="built_in">this</span>.lastName;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="function"><span class="title">set</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> name = value.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">       <span class="built_in">this</span>.firstName = name[<span class="number">0</span>];</span><br><span class="line">       <span class="built_in">this</span>.lastName = name[<span class="number">1</span>];</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="built_in">console</span>.log(obj.fullname);</span><br><span class="line">   obj.firstName = <span class="string">&quot;C&quot;</span></span><br><span class="line">   obj.lastName = <span class="string">&quot;D&quot;</span></span><br><span class="line">   <span class="built_in">console</span>.log(obj.fullname);</span><br><span class="line">   obj.fullname = <span class="string">&quot;E-F&quot;</span>;</span><br><span class="line">   <span class="built_in">console</span>.log(obj.firstName, obj.lastName);</span><br></pre></td></tr></table></figure><h3 id="Object-keys-obj-å¾—åˆ°å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§åçš„æ•°ç»„"><a href="#Object-keys-obj-å¾—åˆ°å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§åçš„æ•°ç»„" class="headerlink" title="Object.keys(obj): å¾—åˆ°å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§åçš„æ•°ç»„"></a>Object.keys(obj): å¾—åˆ°å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§åçš„æ•°ç»„</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> objNames = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line"><span class="built_in">console</span>.log(objNames);</span><br></pre></td></tr></table></figure><h3 id="obj-hasOwnProperty-prop-åˆ¤æ–­propæ˜¯å¦æ˜¯objè‡ªèº«çš„å±æ€§"><a href="#obj-hasOwnProperty-prop-åˆ¤æ–­propæ˜¯å¦æ˜¯objè‡ªèº«çš„å±æ€§" class="headerlink" title="obj.hasOwnProperty(prop): åˆ¤æ–­propæ˜¯å¦æ˜¯objè‡ªèº«çš„å±æ€§"></a>obj.hasOwnProperty(prop): åˆ¤æ–­propæ˜¯å¦æ˜¯objè‡ªèº«çš„å±æ€§</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(obj.hasOwnProperty(<span class="string">&quot;fullname&quot;</span>), obj.hasOwnProperty(<span class="string">&quot;toString&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="DocumentFragment-æ–‡æ¡£ç¢ç‰‡-é«˜æ•ˆæ‰¹é‡æ›´æ–°å¤šä¸ªèŠ‚ç‚¹"><a href="#DocumentFragment-æ–‡æ¡£ç¢ç‰‡-é«˜æ•ˆæ‰¹é‡æ›´æ–°å¤šä¸ªèŠ‚ç‚¹" class="headerlink" title="DocumentFragment: æ–‡æ¡£ç¢ç‰‡(é«˜æ•ˆæ‰¹é‡æ›´æ–°å¤šä¸ªèŠ‚ç‚¹)"></a>DocumentFragment: æ–‡æ¡£ç¢ç‰‡(é«˜æ•ˆæ‰¹é‡æ›´æ–°å¤šä¸ªèŠ‚ç‚¹)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºfragment</span></span><br><span class="line">    <span class="keyword">const</span> ul = ele.getElementsByTagName(<span class="string">&quot;ul&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line">    <span class="comment">// å–å‡ºulä¸­æ‰€æœ‰å­èŠ‚ç‚¹åŒ…æ‹¬ç©ºæ ¼ æ¢è¡Œç¬¦</span></span><br><span class="line">    <span class="keyword">let</span> child;</span><br><span class="line">    <span class="built_in">console</span>.log(ul.firstChild);</span><br><span class="line">    <span class="keyword">while</span> (child = ul.firstChild) &#123;</span><br><span class="line">      fragment.appendChild(child) <span class="comment">//å…ˆç§»é™¤ulä¸­åˆ é™¤ æ·»åŠ åˆ°fragment</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ›´æ–°fragmentä¸­çš„liæ–‡æœ¬</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.slice.call(fragment.childNodes));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Array</span>.prototype.slice.call(fragment.childNodes).forEach(<span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (node.nodeType === <span class="number">1</span>) <span class="comment">//å…ƒç´ èŠ‚ç‚¹</span></span><br><span class="line">      &#123;</span><br><span class="line">        node.textContent = <span class="string">&quot;æ”¹å˜ä¹‹å&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// æ’å…¥ulä¸­æ›´æ–°</span></span><br><span class="line">    ul.appendChild(fragment);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ReactNativeä¹‹å±å¹•é€‚é…</title>
      <link href="2019/02/13/ReactNative%E4%B9%8B%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/"/>
      <url>2019/02/13/ReactNative%E4%B9%8B%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<p>RNä¸­å•ä½æ˜¯dpï¼Œè¿™ä¸ªè·ŸAndroidä¸­çš„å•ä½æ˜¯ä¸€è‡´çš„<br><a id="more"></a><br>è¯´åˆ°è¿™é‡Œï¼Œä¸å¦¨æŠŠæ¶‰åŠåˆ°çš„ä¸€äº›æ¦‚å¿µæ¢³ç†ä¸€ä¸‹ï¼š</p><ol><li>dpï¼ˆdipï¼‰ï¼ˆDensity-independent pixelsï¼‰ä¸€ç§åŸºäºå±å¹•å¯†åº¦çš„æŠ½è±¡å•ä½ï¼Œåƒç´ æ— å…³å¯†åº¦ã€‚åœ¨æ¯è‹±å¯¸160ç‚¹çš„æ˜¾ç¤ºå™¨ä¸Šï¼Œ1dp = 1pxã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„dpæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç®€å•çš„è¯´1dpåœ¨ä¸åŒçš„å±å¹•æˆ–è€…ä¸åŒçš„ppiä¸‹å±•ç¤ºå‡ºæ¥çš„â€œç‰©ç†é•¿åº¦â€å¯èƒ½ä¸ä¸€è‡´ã€‚</li><li>px åƒç´ ç‚¹ã€‚ä¹Ÿæ˜¯ç›¸å¯¹é•¿åº¦</li><li>pt ä¸­æ–‡å«ç£…ï¼Œç­‰äº1/72è‹±å¯¸ã€‚ç‰©ç†é•¿åº¦</li><li>spï¼ˆä¸åˆ»åº¦æ— å…³çš„åƒç´ ï¼‰ï¼šä¸dpç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®ç”¨æˆ·çš„å­—ä½“å¤§å°é¦–é€‰é¡¹è¿›è¡Œç¼©æ”¾ï¼ŒAndroidè®¾ç½®å­—ä½“çš„æ—¶å€™ä½¿ç”¨ã€‚</li><li>density å¯†åº¦ã€‚è¿™ä¸ªå¯ä»¥å‚è€ƒä¸Šè¾¹è¯´çš„ï¼Œè·ŸpixelRatioç›¸è¿‘ï¼Œçº¦ç­‰äºDPI/160ã€‚</li><li>pixelRatio è®¾å¤‡åƒç´ æ¯”ã€‚é€šè¿‡PixelRatio.get()è·å¾—</li><li>PPI (pixels per inch) å›¾åƒåˆ†è¾¨ç‡ ï¼ˆæ¯è‹±å¯¸æ‰€åŒ…å«çš„åƒç´ æ•°ï¼ŒæŒ‡å¯¹è§’çº¿ï¼‰</li><li>DPIï¼ˆdots per inchï¼‰æ‰“å°ç²¾åº¦ ï¼ˆæ¯è‹±å¯¸æ‰€èƒ½æ‰“å°çš„ç‚¹æ•°ï¼ŒæŒ‡å®½é«˜ï¼‰</li><li>åˆ†è¾¨ç‡ ï¼š æ¨ªçºµ2ä¸ªæ–¹å‘çš„åƒç´ ç‚¹çš„æ•°é‡ï¼Œå¸¸è§å–å€¼ 480X800 ï¼Œ750X1334</li><li>å±å¹•å°ºå¯¸ï¼š å±å¹•å¯¹è§’çº¿çš„é•¿åº¦ï¼ˆè‹±å¯¸ï¼‰ã€‚ç”µè„‘ç”µè§†åŒç†ã€‚<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š </li></ol><blockquote><p>1dp=ï¼ˆ1 * densityï¼‰ pxï¼Œç›¸å1px=ï¼ˆ1/densityï¼‰dp</p></blockquote><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨RNä¸­è®¾ç½®å®½åº¦ä¸º1pxçš„åˆ†å‰²çº¿å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">width: <span class="number">1</span> / PixelRatio.get()</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥äº†ï¼</p><p>å¦å¤–ï¼Œä¸€ä¸ªè®¾å¤‡çš„å®½é«˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è·å¾—ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">width: Dimensions.get(<span class="string">&#x27;window&#x27;</span>).width,</span><br><span class="line">height: Dimensions.get(<span class="string">&#x27;window&#x27;</span>).height,</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ä¸ªå¾—åˆ°çš„å®½é«˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ¥ï¼Œæ¯”å¦‚iPhone6sï¼Œè¿™ä¸ªå€¼æ‰“å°å‡ºæ¥æ˜¯widthï¼š375ï¼Œheightï¼š667ï¼Œå› ä¸º6sçš„densityæ˜¯2ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå¾—åˆ°çš„å®½é«˜æ˜¯dpã€‚</p><h1 id="é€‚é…æ–¹æ¡ˆ"><a href="#é€‚é…æ–¹æ¡ˆ" class="headerlink" title="é€‚é…æ–¹æ¡ˆ"></a>é€‚é…æ–¹æ¡ˆ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å±å¹•å·¥å…·ç±» ä»¥åŠä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å°è£…</span></span><br><span class="line"><span class="comment"> * uiè®¾è®¡åŸºå‡†,iphone 6 2å€å›¾</span></span><br><span class="line"><span class="comment"> * width:750px</span></span><br><span class="line"><span class="comment"> * height:1334px</span></span><br><span class="line"><span class="comment"> * @2x</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> è®¾å¤‡çš„åƒç´ å¯†åº¦ï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="comment"> PixelRatio.get() === 1          mdpi Android è®¾å¤‡ (160 dpi)</span></span><br><span class="line"><span class="comment"> PixelRatio.get() === 1.5        hdpi Android è®¾å¤‡ (240 dpi)</span></span><br><span class="line"><span class="comment"> PixelRatio.get() === 2          iPhone 4, 4S,iPhone 5, 5c, 5s,iPhone 6,xhdpi Android è®¾å¤‡ (320 dpi)</span></span><br><span class="line"><span class="comment"> PixelRatio.get() === 3          iPhone 6 plus , xxhdpi Android è®¾å¤‡ (480 dpi)</span></span><br><span class="line"><span class="comment"> PixelRatio.get() === 3.5        Nexus 6       */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  PixelRatio,</span><br><span class="line">  Dimensions,</span><br><span class="line">  Platform,</span><br><span class="line">  AsyncStorage</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> sW = Dimensions.get(<span class="string">&#x27;window&#x27;</span>).width;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> sH = Dimensions.get(<span class="string">&#x27;window&#x27;</span>).height;</span><br><span class="line"><span class="comment">// è¿”å›å­—ä½“å¤§å°çš„ç¼©æ”¾å› å­</span></span><br><span class="line"><span class="keyword">const</span> fontScale= PixelRatio.getFontScale();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> pixelRatio = PixelRatio.get();</span><br><span class="line"><span class="comment">//é»˜è®¤åƒç´ å¯†åº¦</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DEFAULT_DENSITY = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pxè½¬æ¢æˆdp</span></span><br><span class="line"><span class="comment">//ä»¥iphone6ä¸ºåŸºå‡†,å¦‚æœä»¥å…¶ä»–å°ºå¯¸ä¸ºåŸºå‡†çš„è¯,è¯·ä¿®æ”¹ä¸‹é¢çš„defaultWidthå’ŒdefaultHeightä¸ºå¯¹åº”å°ºå¯¸å³å¯. ä»¥ä¸‹ä¸º1å€å›¾æ—¶</span></span><br><span class="line"><span class="keyword">const</span> defaultWidth = <span class="number">375</span>; <span class="comment">//pt</span></span><br><span class="line"><span class="keyword">const</span> defaultHeight = <span class="number">667</span>; <span class="comment">//pt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> _scaleWidth = sW / defaultWidth;</span><br><span class="line"><span class="keyword">const</span> _scaleHeight = sH / defaultHeight;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ç¼©æ”¾æ¯”ä¾‹&#x27;</span>,sW,sH,fontScale,_scaleWidth,_scaleHeight)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®å®½åº¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>size   è¾“å…¥pxå•ä½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">px2dpw</span>(<span class="params">size:<span class="built_in">Number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> size * _scaleWidth;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®é«˜åº¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>size   è¾“å…¥pxå•ä½</span></span><br><span class="line"><span class="comment"> * height ,paddingVertical ,paddingTop ,paddingBottom ,marginVertical ,marginTop ,marginBottom</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">px2dph</span>(<span class="params">size: <span class="built_in">Number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> size * _scaleHeight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®å­—ä½“</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>size   è¾“å…¥pxå•ä½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">px2dpf</span>(<span class="params">size: <span class="built_in">Number</span>, allowFontScaling = <span class="literal">false</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> scale = <span class="built_in">Math</span>.min(_scaleWidth, _scaleHeight);</span><br><span class="line">  <span class="keyword">const</span> fontSize = allowFontScaling ? <span class="number">1</span> : fontScale;</span><br><span class="line">  <span class="keyword">return</span> size * scale / fontSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhoneX</span></span><br><span class="line"><span class="keyword">const</span> X_WIDTH = <span class="number">375</span>;</span><br><span class="line"><span class="keyword">const</span> X_HEIGHT = <span class="number">812</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯å¦ä¸ºiphoneX</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isIphoneX</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    Platform.OS === <span class="string">&#x27;ios&#x27;</span> &amp;&amp;</span><br><span class="line">    ((screenH === X_HEIGHT &amp;&amp; screenW === X_WIDTH) ||</span><br><span class="line">      (screenH === X_WIDTH &amp;&amp; screenW === X_HEIGHT))</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Text style=&#123;&#123;<span class="attr">fontSize</span>: ScreenUtil.px2dpf(<span class="number">30</span>)&#125;&#125;&gt;å·²é€‚é…&lt;/Text&gt;</span><br><span class="line">&lt;View style=&#123;&#123;</span><br><span class="line">            height: ScreenUtil.px2dph(<span class="number">60</span>),</span><br><span class="line">            width: ScreenUtil.px2dpw(<span class="number">300</span>),</span><br><span class="line">            backgroundColor: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">          &#125;&#125;&gt;&lt;/View&gt;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190514004535.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mongooseè”è¡¨æŸ¥è¯¢æ–¹å¼</title>
      <link href="2019/02/08/mongoose%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2/"/>
      <url>2019/02/08/mongoose%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<p>mongooseçš„ä¸€äº›é«˜çº§ç”¨æ³•ï¼š<br><a id="more"></a><br>è§£å†³å¦‚ä¸‹å›¾ç‰‡é—®é¢˜<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190209001433.png"                      alt=""                ><br>åœ¨å…³ç³»å‹æ•°æ®åº“å¦‚mysqlä¸­æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è§£å†³</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student.name,student.age,class.name <span class="keyword">FROM</span> student,class <span class="keyword">WHERE</span> student.classId <span class="operator">=</span> class.id</span><br></pre></td></tr></table></figure><h1 id="modelsä¸­çš„é…ç½®"><a href="#modelsä¸­çš„é…ç½®" class="headerlink" title="modelsä¸­çš„é…ç½®"></a>modelsä¸­çš„é…ç½®</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema;</span><br><span class="line"><span class="comment">/*å®šä¹‰æ•°æ®æ¨¡å¼*/</span></span><br><span class="line"><span class="keyword">var</span> OrderSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  uid: &#123;</span><br><span class="line">    type: mongoose.Schema.ObjectId, <span class="comment">//å…³é”®ç‚¹  ä¸»é”®ç±»å‹</span></span><br><span class="line">    ref : <span class="string">&#x27;user&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  amount: &#123;</span><br><span class="line">    type    : <span class="built_in">Number</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  oType: &#123;</span><br><span class="line">    type    : <span class="built_in">Number</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;, <span class="comment">// è®¢å•ç±»å‹</span></span><br><span class="line">  status: &#123;</span><br><span class="line">    type    : <span class="built_in">Number</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;, <span class="comment">// è®¢å•çš„çŠ¶æ€:1å®Œæˆ  2æœªå®Œæˆ 3å¤±æ•ˆ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">&#x27;order&#x27;</span>, OrderSchema, <span class="string">&quot;order&quot;</span>)</span><br><span class="line"><span class="comment">//è§£å†³mongoseä¸­æ•°æ®åº“è¡¨å+sçš„é—®é¢˜ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ç¬¬ä¸€ä¸ªå‚æ•°åå¿…é¡»ç›¸åŒ</span></span><br></pre></td></tr></table></figure><h1 id="ç¬¬ä¸€ç§æ–¹å¼populate"><a href="#ç¬¬ä¸€ç§æ–¹å¼populate" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼populate"></a>ç¬¬ä¸€ç§æ–¹å¼populate</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&#x27;/getOrder&#x27;</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">ctx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> Order.find().populate(&#123;</span><br><span class="line">    path  : <span class="string">&#x27;uid&#x27;</span>,</span><br><span class="line">    model : User,</span><br><span class="line">    select: <span class="string">&#x27;_id phone status&#x27;</span></span><br><span class="line">  &#125;).exec()</span><br><span class="line">  ctx.body = &#123;</span><br><span class="line">    code: <span class="number">0</span>,</span><br><span class="line">    data: res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    &quot;code&quot;: 0,</span></span><br><span class="line"><span class="comment">    &quot;data&quot;: [</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            &quot;_id&quot;: &quot;5c5da7407852d511cc3a82fd&quot;,</span></span><br><span class="line"><span class="comment">            &quot;uid&quot;: &#123;</span></span><br><span class="line"><span class="comment">                &quot;_id&quot;: &quot;5c5da6347852d511cc3a82f6&quot;,</span></span><br><span class="line"><span class="comment">                &quot;phone&quot;: &quot;001&quot;,</span></span><br><span class="line"><span class="comment">                &quot;status&quot;: &quot;0&quot;</span></span><br><span class="line"><span class="comment">            &#125;,</span></span><br><span class="line"><span class="comment">            &quot;amount&quot;: 0,</span></span><br><span class="line"><span class="comment">            &quot;oType&quot;: 1,</span></span><br><span class="line"><span class="comment">            &quot;status&quot;: 0,</span></span><br><span class="line"><span class="comment">            &quot;__v&quot;: 0</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    ]    </span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼$lookup</p><p>ä¸‹é¢æˆ‘ç®€å•ä»‹ç»ä¸€äº›$lookupä¸­çš„å‚æ•°ï¼š</p><ol><li>fromï¼š éœ€è¦å…³è”çš„è¡¨ã€ ordersã€‘</li><li>localField: ã€productã€‘ è¡¨éœ€è¦å…³è”çš„é”®ã€‚</li><li>foreignFieldï¼šã€ ordersã€‘ çš„matching keyã€‚</li><li>asï¼š å¯¹åº”çš„å¤–é”®é›†åˆçš„æ•°æ®ï¼Œã€ å› ä¸ºå¯èƒ½æ˜¯ä¸€å¯¹å¤šçš„ï¼Œ å¯¹å§ã€‘</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&#x27;/getOrder&#x27;</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">ctx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> Order.aggregate([&#123;</span><br><span class="line">    $lookup: &#123;</span><br><span class="line">      <span class="keyword">from</span>        : <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">      localField  : <span class="string">&#x27;uid&#x27;</span>,</span><br><span class="line">      foreignField: <span class="string">&#x27;_id&#x27;</span>,</span><br><span class="line">      <span class="keyword">as</span>          : <span class="string">&quot;user_docs&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;])</span><br><span class="line">  ctx.body = &#123;</span><br><span class="line">    code: <span class="number">0</span>,</span><br><span class="line">    data: res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    &quot;code&quot;: 0,</span></span><br><span class="line"><span class="comment">    &quot;data&quot;: [</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            &quot;_id&quot;: &quot;5c5da7407852d511cc3a82fd&quot;,</span></span><br><span class="line"><span class="comment">            &quot;uid&quot;: &quot;5c5da6347852d511cc3a82f6&quot;,</span></span><br><span class="line"><span class="comment">            &quot;amount&quot;: 0,</span></span><br><span class="line"><span class="comment">            &quot;oType&quot;: 1,</span></span><br><span class="line"><span class="comment">            &quot;status&quot;: 0,</span></span><br><span class="line"><span class="comment">            &quot;__v&quot;: 0,</span></span><br><span class="line"><span class="comment">            &quot;user_docs&quot;: [</span></span><br><span class="line"><span class="comment">                &#123;</span></span><br><span class="line"><span class="comment">                    &quot;_id&quot;: &quot;5c5da6347852d511cc3a82f6&quot;,</span></span><br><span class="line"><span class="comment">                    &quot;meta&quot;: &#123;</span></span><br><span class="line"><span class="comment">                        &quot;createAt&quot;: &quot;2019-02-08T15:50:51.864Z&quot;,</span></span><br><span class="line"><span class="comment">                        &quot;updateAt&quot;: &quot;2019-02-08T15:50:51.864Z&quot;</span></span><br><span class="line"><span class="comment">                    &#125;,</span></span><br><span class="line"><span class="comment">                    &quot;phone&quot;: &quot;001&quot;,</span></span><br><span class="line"><span class="comment">                    &quot;status&quot;: &quot;0&quot;,</span></span><br><span class="line"><span class="comment">                    &quot;__v&quot;: 0</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            ]</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>é™„åŠ ä¸€ä¸ªæ¨¡ç³ŠæŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»URLä¸­ä¼ æ¥çš„ keywordå‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> keyword = <span class="built_in">this</span>.params.keyword </span><br><span class="line"><span class="comment">//ä¸åŒºåˆ†å¤§å°å†™</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">&#x27;i&#x27;</span>) </span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> User.find(</span><br><span class="line">    &#123;</span><br><span class="line">        $or : [ <span class="comment">//å¤šæ¡ä»¶ï¼Œæ•°ç»„</span></span><br><span class="line">            &#123;<span class="attr">nick</span> : &#123;<span class="attr">$regex</span> : reg&#125;&#125;,</span><br><span class="line">            &#123;<span class="attr">email</span> : &#123;<span class="attr">$regex</span> : reg&#125;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        password : <span class="number">0</span> <span class="comment">// è¿”å›ç»“æœä¸åŒ…å«å¯†ç å­—æ®µ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        sort : &#123; <span class="attr">_id</span> : -<span class="number">1</span> &#125;,<span class="comment">// æŒ‰ç…§ _idå€’åºæ’åˆ—</span></span><br><span class="line">        limit : <span class="number">100</span> <span class="comment">// æŸ¥è¯¢100æ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="2019/01/22/Vue%E4%B8%AD%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>2019/01/22/Vue%E4%B8%AD%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<p>Vueå®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domã€æ¸²æŸ“â†’æ›´æ–°â†’æ¸²æŸ“ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯Vueçš„ç”Ÿå‘½å‘¨æœŸã€‚<br><a id="more"></a></p><blockquote><p>é€šä¿—è¯´å°±æ˜¯Vueå®ä¾‹ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/vue-instances-6.png"                      alt=""                ></p><h4 id="æ–‡å­—è¯´æ˜"><a href="#æ–‡å­—è¯´æ˜" class="headerlink" title="æ–‡å­—è¯´æ˜"></a>æ–‡å­—è¯´æ˜</h4><table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>beforeCreate</td><td>åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ï¼ˆData Observerï¼‰å’Œevent/watcheräº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨</td></tr><tr><td>create</td><td>å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®(Data Observer)ã€å±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/eventäº‹ä»¶å›è°ƒã€‚ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$elå±æ€§ç›®å‰ä¸å¯è§</td></tr><tr><td>beforeMount</td><td>åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨</td></tr><tr><td>mounted</td><td>elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨è¯¥é’©å­ã€‚å¦‚æœrootå®ä¾‹æŒ‚è½½äº†ä¸€ä¸ªæ–‡æ¡£å†…å…ƒç´ ï¼Œå½“mountedè¢«è°ƒç”¨æ—¶vm.$elä¹Ÿåœ¨æ–‡æ¡£å†…</td></tr><tr><td>beforeUpdate</td><td>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰.ä½ å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œè¿™ä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹</td></tr><tr><td>updated</td><td>ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶DOMå·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚<code>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨</code></td></tr><tr><td>beforeDestroy</td><td>å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨</td></tr><tr><td>destroyed</td><td>Vueå®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVueå®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨</td></tr></tbody></table><h5 id="å°ç»“ä¸€ä¸‹ï¼š"><a href="#å°ç»“ä¸€ä¸‹ï¼š" class="headerlink" title="å°ç»“ä¸€ä¸‹ï¼š"></a>å°ç»“ä¸€ä¸‹ï¼š</h5><ol><li>beforeCreateå’Œcreatedï¼šåˆ›å»ºVueå®ä¾‹</li><li>beforeMountå’Œmountedï¼šæŒ‚è½½ç›®æ ‡å…ƒç´ </li><li>beforeUpdateå’Œupdatedï¼šæ”¹å˜åé‡æ–°æ¸²æŸ“</li><li>beforeDestroyå’Œdestroyedï¼šé”€æ¯Vueå®ä¾‹</li></ol><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><blockquote><p>ä¸è¦åœ¨é€‰é¡¹å±æ€§æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ created: () =&gt; console.log(this.a) æˆ– vm.$watch(â€˜aâ€™, newValue =&gt; this.myMethod())ã€‚<code>å› ä¸ºç®­å¤´å‡½æ•°æ˜¯å’Œçˆ¶çº§ä¸Šä¸‹æ–‡ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œthis ä¸ä¼šæ˜¯å¦‚ä½ æ‰€é¢„æœŸçš„ Vue å®ä¾‹</code>ï¼Œç»å¸¸å¯¼è‡´ Uncaught TypeError: Cannot read property of undefined æˆ– Uncaught TypeError: this.myMethod is not a function ä¹‹ç±»çš„é”™è¯¯ã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190306142344.png"                      alt=""                ></p><h4 id="ä»£ç è¯´æ˜"><a href="#ä»£ç è¯´æ˜" class="headerlink" title="ä»£ç è¯´æ˜"></a>ä»£ç è¯´æ˜</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name: <span class="string">&quot;é©¬é‡Œå¥¥&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== åˆ›å»ºå‰ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);<span class="comment">// undefined</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);<span class="comment">// undefined</span></span><br><span class="line">  &#125;,</span><br><span class="line">  created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å®ä¾‹åˆ›å»ºä¹‹ååŒæ­¥è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶å®ä¾‹å·²ç»“æŸè§£æé€‰é¡¹</span></span><br><span class="line">    <span class="comment">// è¿™æ„å‘³ç€å·²å»ºç«‹ï¼šæ•°æ®ç»‘å®šï¼Œè®¡ç®—å±æ€§,æ–¹æ³•ï¼Œwatcher/äº‹ä»¶å›è°ƒ</span></span><br><span class="line">    <span class="comment">// ä½†æ˜¯è¿˜æ²¡æœ‰å¼€å§‹DOMç¼–è¯‘ï¼Œ$elè¿˜ä¸å­˜åœ¨ï¼Œä½†æ˜¯å®ä¾‹å­˜åœ¨ï¼Œå³this.nameå­˜åœ¨ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥</span></span><br><span class="line">    <span class="comment">//åœ¨è¿™é‡Œå¯ä»¥åœ¨æ¸²æŸ“å‰å€’æ•°ç¬¬äºŒæ¬¡æ›´æ”¹æ•°æ®çš„æœºä¼šï¼Œä¸ä¼šè§¦å‘å…¶ä»–çš„é’©å­å‡½æ•°ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¿™é‡Œåšåˆå§‹æ•°æ®çš„è·å–</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== å·²åˆ›å»º =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// &quot;é©¬é‡Œå¥¥&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el); <span class="comment">// undefined</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCompile: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== æœªå¼€å§‹ç¼–è¯‘ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  compiled: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨ç¼–è¯‘ç»“æŸä¹‹åè°ƒç”¨</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶æ‰€æœ‰çš„æŒ‡ä»¤å·²ç”Ÿæ•ˆï¼Œå› è€Œæ•°æ®çš„å˜åŒ–å°†è§¦å‘DOMæ›´æ–°</span></span><br><span class="line">    <span class="comment">// ä½†æ˜¯ä¸æ‹…ä¿$elå·²æ’å…¥æ–‡æ¡£</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== ç¼–è¯‘å®Œæˆ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//æ³¨æ„domè¿˜æ²¡æœ‰ç”Ÿæˆhtmlé¡µé¢ä¸Šå»</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== Mountä¹‹å‰ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//æŒ‚åœ¨å®Œæˆ ä¹Ÿå°±æ˜¯æ¨¡æ¿ä¸­çš„htmlæ¸²æŸ“åˆ°äº†é¡µé¢ä¸­</span></span><br><span class="line">   <span class="comment">//ä¸€èˆ¬è¿™é‡Œåšä¸€äº›ajaxæ“ä½œ </span></span><br><span class="line">   <span class="comment">//åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== Mountå®Œæˆ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== æ›´æ–°å‰ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//è¿™é‡Œä¸èƒ½æ›´æ”¹æ•°æ®ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== æ›´æ–°å®Œæˆ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  ready: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨ç¼–è¯‘ç»“æŸå’Œ$el ç¬¬ä¸€æ¬¡æ’å…¥æ–‡æ¡£ä¹‹åè°ƒç”¨ï¼Œå¦‚æœåœ¨ç¬¬ä¸€æ¬¡attachedé’©å­ä¹‹åè°ƒç”¨</span></span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼Œå¿…é¡»æ˜¯ç”±Vueæ’å…¥ï¼Œæ¯”å¦‚ vm.$appendTo()ç­‰æ–¹æ³•æˆ–æŒ‡ä»¤æ›´æ–°ï¼Œæ‰ä¼šè§¦å‘ready é’©å­</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº† =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  attached: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// app.$appendTo(&#x27;#app2&#x27;)æš‚æ—¶è§¦å‘ä¸äº†ï¼Œä¸çŸ¥é“æ€ä¹ˆè§£å†³</span></span><br><span class="line">    <span class="comment">// åœ¨ vm.$elæ’å…¥DOMæ—¶è°ƒç”¨ã€‚å¿…é¡»æ˜¯ç”±æŒ‡ä»¤æˆ–å®ä¾‹æ–¹æ³•ï¼Œæ¯”å¦‚$appendTo()æ’å…¥ï¼Œç›´æ¥æ“ä½œvm.$elä¸ä¼šè§¦å‘è¿™ä¸ªé’©å­</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== æ’å…¥DOMæˆåŠŸ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  detached: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è§¦å‘äº‹ä»¶ app.$destroy(true)ï¼Œå…¶ä¸­å‚æ•°trueæ§åˆ¶æ˜¯å¦åˆ é™¤DOMèŠ‚ç‚¹æˆ–è€…app.$remove()</span></span><br><span class="line">    <span class="comment">// åœ¨vm.$el ä»DOMä¸­åˆ é™¤æ—¶è°ƒç”¨ã€‚å¿…é¡»æ˜¯ç”±æŒ‡ä»¤æˆ–å®ä¾‹æ–¹æ³•åˆ é™¤ï¼Œç›´æ¥æ“ä½œvm.$elä¸ä¼šè§¦å‘è¿™ä¸ªé’©å­</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== åˆ é™¤DOMæˆåŠŸ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è§¦å‘æ–¹å¼ï¼Œåœ¨consoleé‡Œé¢æ‰“å°app.$destroy()</span></span><br><span class="line">    <span class="comment">// åœ¨å¼€å§‹é”€æ¯å®ä¾‹æ—¶è°ƒç”¨ã€‚æ­¤æ—¶å®ä¾‹ä»ç„¶æœ‰åŠŸèƒ½</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== é”€æ¯å‰ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;,</span><br><span class="line">  destroyed: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è§¦å‘æ–¹å¼ï¼Œåœ¨consoleé‡Œé¢æ‰“app.$destroy()</span></span><br><span class="line">    <span class="comment">// å…¶ä¸­app.$destroy(true)æ˜¯åˆ é™¤DOMèŠ‚ç‚¹ï¼Œä¼šè§¦å‘detachedå‡½æ•°ï¼Œä½†æ˜¯å®ä¾‹ä»ç„¶å­˜åœ¨</span></span><br><span class="line">    <span class="comment">// åœ¨å®ä¾‹è¢«é”€æ¯ä¹‹åè°ƒç”¨ã€‚æ­¤æ—¶æ‰€æœ‰çš„ç»‘å®šå’Œå®ä¾‹çš„æŒ‡ä»¤å·²ç»è§£ç»‘</span></span><br><span class="line">    <span class="comment">// æ³¨æ„æ˜¯è§£ç»‘ä¸æ˜¯é”€æ¯ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿå·²ç»è¢«é”€æ¯</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;===== å·²é”€æ¯ =====&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¡µé¢åˆå§‹åŒ–åªæ‰§è¡Œè¿™äº›å‡½æ•°<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190306144953.png"                      alt=""                ><br>ç‚¹å‡»è¾“å…¥æ¡†æ›´æ”¹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190306145048.png"                      alt=""                ><br>æ‰§è¡Œé”€æ¯æ“ä½œ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190306145136.png"                      alt=""                ></p><p>ç»“åˆå®˜æ–¹æ–‡æ¡£ç®€å•æ€»ç»“äº†ä¸€ä¸‹å¦‚å›¾æ˜¾ç¤º</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/vue-instances-and-life-cycles-12.png"                      alt=""                ></p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a class="link"   href="https://www.w3cplus.com/vue/vue-instances-and-life-cycles.html" >å¤§æ¼ <i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æŠ€å·§ç¯‡</title>
      <link href="2019/01/20/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE-%E6%8A%80%E5%B7%A7%E7%AF%87/"/>
      <url>2019/01/20/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE-%E6%8A%80%E5%B7%A7%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<ol><li>ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç°</li><li>ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç°</li><li>è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°(â­ï¸â­ï¸â­ï¸)<a id="more"></a></li></ol><h2 id="ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç°"><a href="#ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç°" class="headerlink" title="ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç°"></a>ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç°</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/å¸é¡¶æ•ˆæœ.gif"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods&quot;</span>&gt;</span></span><br><span class="line"> &lt;div</span><br><span class="line">   class = &quot;headtitle&quot;</span><br><span class="line">   v-if  = &quot;fixedTitle&quot;</span><br><span class="line">   ref   = &quot;fixed&quot;</span><br><span class="line"> &gt;&#123;&#123;fixedTitle&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> &lt;div</span><br><span class="line">   class = &quot;menu-wrapper&quot;</span><br><span class="line">   ref   = &quot;menuWrapper&quot;</span><br><span class="line"> &gt;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€»è¾‘å¤„ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fixedTitle</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">//å½“scrollyå¤§äº  -æ ‡é¢˜é«˜åº¦çš„æ—¶å€™ä¸æ˜¾ç¤º</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ç°åœ¨çš„y&quot;</span> + <span class="built_in">this</span>.scrollY);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.scrollY &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.goods[<span class="built_in">this</span>.itemIndex] ? <span class="built_in">this</span>.goods[<span class="built_in">this</span>.itemIndex].name: <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç°"><a href="#ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç°" class="headerlink" title="ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç°"></a>ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç°</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/ä¾§è¾¹æ ç‚¹èœæ•°é‡.gif"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">class = &quot;menu-wrapper&quot;</span><br><span class="line">ref   = &quot;menuWrapper&quot;</span><br><span class="line">&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  &lt;li</span><br><span class="line">      v-for  = &quot;(item, index) in goods&quot;</span><br><span class="line">    :key     = &quot;index&quot;</span><br><span class="line">      class  = &quot;menu-item&quot;</span><br><span class="line">    :class   = &quot;&#123;&#x27;current&#x27;:currentIndex===index&#125;&quot;</span><br><span class="line">      @click = &quot;selectMenu(index,$event)&quot;</span><br><span class="line">      ref    = &quot;menuList&quot;</span><br><span class="line">  &gt;</span><br><span class="line"></span><br><span class="line">    &lt;span</span><br><span class="line">      class  = &quot;num&quot;</span><br><span class="line">      v-show = &quot;barTxts &amp;&amp; barTxts[index].count &gt;0&quot;</span><br><span class="line">    &gt;&#123;&#123;barTxts[index].count&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text border-1px&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;item.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190128092519.png"                      alt=""                ><br>åœ¨æ·»åŠ æŒ‰é’®ç»„ä»¶ä¸­setä¸€ä¸ªäº‹ä»¶æ”¹å˜å¢åŠ äº†foodä¸­ä¸€ä¸ªå±æ€§<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190128092939.png"                      alt=""                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="title">barTxts</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> ret = [];  <span class="comment">//åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">  <span class="built_in">this</span>.goods.forEach(<span class="function"><span class="params">good</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; type, name, foods &#125; = good;</span><br><span class="line">    <span class="keyword">let</span>   count                 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­foodä¸­æ¯ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰æ–°å¢çš„countå±æ€§å¹¶è·å–æ•°é‡</span></span><br><span class="line">    foods.forEach(<span class="function"><span class="params">food</span> =&gt;</span> &#123;</span><br><span class="line">      count += food.count || <span class="number">0</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    ret.push(&#123;</span><br><span class="line">      type,</span><br><span class="line">      name,</span><br><span class="line">      count</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(ret);</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°"><a href="#è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°" class="headerlink" title="è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°"></a>è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/è´­ç‰©è½¦æŠ›ç‰©çº¿.gif"                      alt=""                ></p><p>ä¸»è¦å®ç°è¿‡ç¨‹çœ‹å›¾ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/ç»„ä»¶é—´çš„ä¼ å€¼.jpg"                      alt=""                ></p><p>1.cartcontrol.vueï¼Œæ·»åŠ å•†å“æ—¶ï¼Œæ´¾å‘ä¸€ä¸ªäº‹ä»¶ç»™goods.vueï¼Œè·å–å½“å‰DOMï¼Œæ–¹ä¾¿è®¡ç®—å°çƒä¸‹è½ä½ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">addCart</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!event._constructed) &#123;<span class="comment">//éè‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶çš„æƒ…å†µä¸‹returnæ‰ï¼Œè¿™æ ·pcç«¯å°±ä¸ä¼šæ£€æµ‹åˆ°ä¸¤æ¬¡ç‚¹å‡»äº‹ä»¶ã€‚</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// console.log(this.food.count);</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.food.count)&#123;</span><br><span class="line">    Vue.set(<span class="built_in">this</span>.food,<span class="string">&#x27;count&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//ç»™å¯¹è±¡æ·»åŠ ä»–ä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œè¿™æ ·çš„æ–¹å¼æ˜¯ä¸è¡Œçš„ã€‚éœ€è¦ç”¨Vueçš„Vue.set()</span></span><br><span class="line">    <span class="comment">// this.food.count=1;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.food.count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;cart-add&#x27;</span>,event.target);<span class="comment">//æ·»åŠ å•†å“æ—¶ï¼Œæ´¾å‘ä¸€ä¸ªäº‹ä»¶ï¼Œå°†å½“å‰DOMä¼ é€’ç»™goods.vue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.goods.vueæ¥æ”¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cartcontrol-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cartcontrol</span> <span class="attr">:food</span>=<span class="string">&#x27;food&#x27;</span> @<span class="attr">cart-add</span>=<span class="string">&quot;cartAdd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cartcontrol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€»è¾‘å¤„ç†<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">cartAdd</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//ä½“éªŒä¼˜åŒ–ï¼Œå¼‚æ­¥æ‰§è¡Œä¸‹è½åŠ¨ç”»ï¼Œç”»é¢ä¸å®¹æ˜“å¡é¡¿ã€‚</span></span><br><span class="line"><span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.$refs.shopcart.drop(el);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>3.goods.vueä¸­è°ƒç”¨å­ç»„ä»¶shopcart.vueçš„drop()æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">drop</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(el);</span></span><br><span class="line">    <span class="comment">//éå†å°çƒï¼Œæ‰¾åˆ°showä¸ºfalseçš„å°çƒ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="built_in">this</span>.balls.length;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> ball = <span class="built_in">this</span>.balls[i];</span><br><span class="line">    <span class="keyword">if</span>(!ball.show) &#123;</span><br><span class="line">    ball.show = <span class="literal">true</span>;</span><br><span class="line">    ball.el = el;<span class="comment">//ç”¨å°çƒçš„elå¯¹è±¡ä¿ç•™è¿™ä¸ªelement</span></span><br><span class="line">    <span class="built_in">this</span>.dropBalls.push(ball);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>shopcart.vue<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ball-container&quot;</span>&gt;</span>Â </span><br><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">name</span>=<span class="string">&quot;drop&quot;</span> <span class="attr">v-on:before-enter</span>=<span class="string">&quot;beforeEnter&quot;</span> <span class="attr">v-on:enter</span>=<span class="string">&quot;enter&quot;</span> <span class="attr">v-on:after-enter</span>=<span class="string">&quot;afterEnter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ball&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(ball,index) in balls&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;ball.show&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner inner-hook&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><br>é€»è¾‘å¤„ç†è°ƒç”¨vueçš„javascripté’©å­å‡½æ•°</p><blockquote><p>åŸºç¡€äº†è§£ï¼šå‘å³è¡¨ç¤ºXè½´çš„æ­£æ–¹å‘ï¼Œå‘ä¸‹è¡¨ç¤ºYè½´çš„æ­£æ–¹å‘</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">beforeEnter: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*elæ˜¯å°çƒ;</span></span><br><span class="line"><span class="comment">éå†æ‰€æœ‰showä¸ºtrueçš„å°çƒ*/</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="built_in">this</span>.balls.length;</span><br><span class="line"><span class="keyword">while</span>(count--) &#123;</span><br><span class="line"><span class="keyword">let</span> ball = <span class="built_in">this</span>.balls[count];</span><br><span class="line"><span class="keyword">if</span>(ball.show) &#123;</span><br><span class="line"><span class="keyword">let</span> rect = ball.el.getBoundingClientRect();<span class="comment">//è·å¾—è¯¥å…ƒç´ ï¼ˆåŠ å·ï¼‰ç›¸å¯¹äºè§†å£çš„ä½ç½®çš„åç§»ï¼ˆleft,topï¼‰</span></span><br><span class="line"><span class="keyword">let</span> x = rect.left-<span class="number">32</span>;</span><br><span class="line"><span class="comment">//ä¸ºä»€ä¹ˆyæ˜¯è´Ÿå€¼ï¼Œå› ä¸ºèµ·å§‹ä½ç½®åœ¨è´­ç‰©è½¦å›¾æ ‡ä½ç½®è¦æŒªåˆ°+å·ä½ç½®è¿›å…¥åŠ¨ç”»</span></span><br><span class="line"><span class="keyword">let</span> y = -(<span class="built_in">window</span>.innerHeight-rect.top-<span class="number">22</span>); </span><br><span class="line">el.style.display = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">el.style.webkitTransform = <span class="string">`translate3d(0,<span class="subst">$&#123;y&#125;</span>px,0)`</span>;<span class="comment">//å¤–å±‚åšçºµå‘è¿åŠ¨</span></span><br><span class="line">el.style.transform = <span class="string">`translate3d(0,<span class="subst">$&#123;y&#125;</span>px,0)`</span>;</span><br><span class="line"><span class="keyword">let</span> inner = el.getElementsByClassName(<span class="string">&#x27;inner-hook&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">inner.style.webkitTransform = <span class="string">`translate3d(<span class="subst">$&#123;x&#125;</span>px,0,0)`</span>;</span><br><span class="line">inner.style.transform = <span class="string">`translate3d(<span class="subst">$&#123;x&#125;</span>px,0,0)`</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">enter: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> rf = el.offsetHeight;<span class="comment">//å¿…é¡»é‡ç»˜ï¼Œå†è¿›è¡Œtransformæ‰æœ‰ç”¨</span></span><br><span class="line"><span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    el.style.webkitTransform = <span class="string">&#x27;translate3d(0,0,0)&#x27;</span>;<span class="comment">//å¤–å±‚åšçºµå‘è¿åŠ¨</span></span><br><span class="line">el.style.transform = <span class="string">&#x27;translate3d(0,0,0)&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> inner = el.getElementsByClassName(<span class="string">&#x27;inner-hook&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">inner.style.webkitTransform = <span class="string">&#x27;translate3d(0,0,0)&#x27;</span>;</span><br><span class="line">inner.style.transform = <span class="string">&#x27;translate3d(0,0,0)&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;,</span><br><span class="line">afterEnter: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//çŠ¶æ€é‡ç½®</span></span><br><span class="line"><span class="keyword">let</span> ball = <span class="built_in">this</span>.dropBalls.shift();</span><br><span class="line"><span class="keyword">if</span>(ball) &#123;</span><br><span class="line">ball.show = <span class="literal">false</span>;</span><br><span class="line">    el.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŠ¨ç”»æ ·å¼é‡‡ç”¨cubicæ›²çº¿<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ball-container</span> &#123;</span><br><span class="line">    <span class="selector-class">.ball</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: fixed;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">32px</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">22px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">heigth: <span class="number">16px</span>;</span><br><span class="line"><span class="attribute">z-index</span>: <span class="number">200</span>;</span><br><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">0</span>,<span class="number">160</span>,<span class="number">220</span>);</span><br><span class="line">&#125;</span><br><span class="line">&amp;<span class="selector-class">.drop-enter-active</span>,&amp;<span class="selector-class">.drop-leave-active</span> &#123;</span><br><span class="line"><span class="attribute">transition</span>: all <span class="number">0.4s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.49</span>,-<span class="number">0.29</span>,<span class="number">0.75</span>,<span class="number">0.41</span>);</span><br><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line"><span class="attribute">transition</span>: all <span class="number">0.4s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-åŠ¨ç”»ç¯‡</title>
      <link href="2019/01/19/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E5%8A%A8%E7%94%BB%E7%AF%87/"/>
      <url>2019/01/19/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E5%8A%A8%E7%94%BB%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨ç”»æ•ˆæœå†…å®¹çš„ä¸€äº›æ•´ç†è®°å½•<br><a id="more"></a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;fade&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;detailShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">       ...</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–å…ˆäº†è§£ä¸‹è¿‡åº¦åŠ¨ç”»<br>åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚</p><ol><li><p><code>v-enter</code>ï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚</p></li><li><p><code>v-enter-active</code>ï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</p></li><li><p><code>v-enter-to</code>: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-enter è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</p></li><li>v-leave: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚</li><li><code>v-leave-active</code>ï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</li><li><code>v-leave-to</code>: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-leave è¢«åˆ é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190126001322.png"                      alt=""                ></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.detail</span></span><br><span class="line">      <span class="attribute">position</span>: fixed</span><br><span class="line">      z-index: <span class="number">100</span></span><br><span class="line">      top: <span class="number">0</span></span><br><span class="line">      left: <span class="number">0</span></span><br><span class="line">      width: <span class="number">100%</span></span><br><span class="line">      height: <span class="number">100%</span></span><br><span class="line">      overflow: auto</span><br><span class="line">      backdrop-filter: <span class="built_in">blur</span>(<span class="number">10px</span>)</span><br><span class="line">      opacity: <span class="number">1</span></span><br><span class="line">      background: <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.8</span>)</span><br><span class="line">      &amp;.fade-enter-active, &amp;.fade-leave-active</span><br><span class="line">        transition: all <span class="number">0.5s</span></span><br><span class="line">      &amp;.fade-enter, &amp;.fade-leave-active</span><br><span class="line">        opacity: <span class="number">0</span></span><br><span class="line">        background: <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h2 id="å¼¹çª—"><a href="#å¼¹çª—" class="headerlink" title="å¼¹çª—"></a>å¼¹çª—</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/zankai.gif"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è´­ç‰©è½¦å¼¹çª—å¸ƒå±€å¼€å§‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;fold&quot;</span>&gt;</span></span><br><span class="line">      &lt;div</span><br><span class="line">        class  = &quot;shopcart-list&quot;</span><br><span class="line">        v-show = &quot;listShow&quot;</span><br><span class="line">       &gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è´­ç‰©è½¦å¼¹çª—å¸ƒå±€ç»“æŸ --&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.shopcart-list</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">1</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">transform</span> translate3d(<span class="number">0</span>, -<span class="number">100%</span>, <span class="number">0</span>)</span><br><span class="line">    &amp;<span class="selector-class">.fold-enter-active</span>, &amp;<span class="selector-class">.fold-leave-active</span></span><br><span class="line">      <span class="attribute">transition</span> all <span class="number">0.5s</span></span><br><span class="line">    &amp;<span class="selector-class">.fold-enter</span>, &amp;<span class="selector-class">.fold-leave-active</span></span><br><span class="line">      <span class="attribute">transform</span> translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>é®ç½©å±‚çš„å¤„ç†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é®ç½©å±‚å¸ƒå±€å¼€å§‹ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;fade&quot;</span>&gt;</span></span><br><span class="line">     &lt;div</span><br><span class="line">       class  = &quot;list-mask&quot;</span><br><span class="line">       @click = &quot;hideList&quot;</span><br><span class="line">       v-show = &quot;listShow&quot;</span><br><span class="line">     &gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- é®ç½©å±‚å¸ƒå±€ç»“æŸ --&gt;</span></span><br></pre></td></tr></table></figure><p>cssæ ·å¼<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-mask</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">40</span></span><br><span class="line">  backdrop-<span class="attribute">filter</span> blur(<span class="number">10px</span>)</span><br><span class="line">  <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line">  <span class="attribute">background</span> rgba(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.6</span>)</span><br><span class="line">  &amp;<span class="selector-class">.fade-enter-active</span>, &amp;<span class="selector-class">.fade-leave-active</span></span><br><span class="line">    <span class="attribute">transition</span> all <span class="number">0.5s</span></span><br><span class="line">  &amp;<span class="selector-class">.fade-enter</span>, &amp;<span class="selector-class">.fade-leave-active</span></span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">background</span> rgba(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ä¾§æ»‘</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/sildä¾§æ»‘.gif"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;move&quot;</span>&gt;</span></span><br><span class="line">......</span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>cssæ ·å¼<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.food</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">bottom</span> <span class="number">48px</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">30</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">background</span> <span class="selector-id">#fff</span></span><br><span class="line">  <span class="attribute">transform</span> translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">  &amp;<span class="selector-class">.move-enter-active</span>, &amp;<span class="selector-class">.move-leave-active</span></span><br><span class="line">    <span class="attribute">transition</span> all <span class="number">0.2s</span> linear</span><br><span class="line">  &amp;<span class="selector-class">.move-enter</span>, &amp;<span class="selector-class">.move-leave-active</span></span><br><span class="line">    <span class="attribute">transform</span> translate3d(<span class="number">100%</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>å°çƒæ»šåŠ¨åŠ¨ç”»</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/addæ»šåŠ¨.gif"                      alt=""                ></p><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;move&quot;</span>&gt;</span></span><br><span class="line">     &lt;div</span><br><span class="line">       class       = &quot;cart-decrease&quot;</span><br><span class="line">       v-show      = &quot;food.count&gt;0&quot;</span><br><span class="line">       @click.stop = &quot;decrease&quot;</span><br><span class="line">     &gt;</span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inner icon-remove_circle_outline&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">   &lt;div</span><br><span class="line">     class  = &quot;cart-count&quot;</span><br><span class="line">     v-show = &quot;food.count&gt;0&quot;</span><br><span class="line">   &gt;&#123;&#123;food.count&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &lt;div</span><br><span class="line">     class       = &quot;cart-add icon-add_circle&quot;</span><br><span class="line">     @click.stop = &quot;add&quot;</span><br><span class="line">   &gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cartcontrol</span></span><br><span class="line">  <span class="attribute">font-size</span> <span class="number">0</span></span><br><span class="line">  <span class="selector-class">.cart-decrease</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">padding</span> <span class="number">6px</span></span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line">    <span class="attribute">transform</span> translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="selector-class">.inner</span></span><br><span class="line">      <span class="attribute">display</span> inline-block</span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">24px</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">24px</span></span><br><span class="line">      <span class="attribute">color</span> rgb(<span class="number">0</span>, <span class="number">160</span>, <span class="number">220</span>)</span><br><span class="line">      <span class="attribute">transition</span> all <span class="number">0.4s</span> linear</span><br><span class="line">      <span class="attribute">transform</span> rotate(<span class="number">0</span>)</span><br><span class="line">    &amp;<span class="selector-class">.move-enter-active</span>, &amp;<span class="selector-class">.move-leave-active</span></span><br><span class="line">      <span class="attribute">transition</span> all <span class="number">0.4s</span> linear</span><br><span class="line">    &amp;<span class="selector-class">.move-enter</span>, &amp;<span class="selector-class">.move-leave-active</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">transform</span> translate3d(<span class="number">24px</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      <span class="selector-class">.inner</span></span><br><span class="line">        <span class="attribute">transform</span> rotate(<span class="number">180deg</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æ ·å¼ç¯‡</title>
      <link href="2019/01/18/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E6%A0%B7%E5%BC%8F%E7%AF%87/"/>
      <url>2019/01/18/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E6%A0%B7%E5%BC%8F%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>æ ·å¼å†…å®¹çš„ä¸€äº›æ•´ç†è®°å½•<br><a id="more"></a></p><h2 id="è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†é—®é¢˜"><a href="#è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†é—®é¢˜" class="headerlink" title="è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†é—®é¢˜"></a>è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†é—®é¢˜</h2><p>å…¶å®è¿™ä¸ªåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºcssä¸­çš„1pxå¹¶ä¸ç­‰äºç§»åŠ¨è®¾å¤‡çš„1pxï¼Œè¿™äº›ç”±äºä¸åŒçš„æ‰‹æœºæœ‰ä¸åŒçš„åƒç´ å¯†åº¦ã€‚åœ¨windowå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªdevicePixelRatioå±æ€§ï¼Œä»–å¯ä»¥ååº”cssä¸­çš„åƒç´ ä¸è®¾å¤‡çš„åƒç´ æ¯”ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190125223600.png"                      alt=""                ><br>è§£å†³çš„æ–¹å¼<br>ä¼ªå…ƒç´ +transform</p><p>æ„å»º1ä¸ªä¼ªå…ƒç´ , borderä¸º1px, å†ä»¥transformç¼©æ”¾åˆ°50%ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">border-1px($color)</span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  &amp;:after</span><br><span class="line">    display: block</span><br><span class="line">    position: absolute</span><br><span class="line">    left: <span class="number">0</span></span><br><span class="line">    bottom: <span class="number">0</span></span><br><span class="line">    width: <span class="number">100%</span></span><br><span class="line">    border-top: <span class="number">1px</span> solid $color</span><br><span class="line">    content: <span class="string">&#x27; &#x27;</span></span><br><span class="line">    </span><br><span class="line">/*æ ¹æ®æ‰‹æœºä¸åŒåˆ†è¾¨ç‡ä¸‹çš„dpi*/</span><br><span class="line">@media (-webkit-min-device-pixel-ratio: <span class="number">1.5</span>),(min-device-pixel-ratio: <span class="number">1.5</span>)</span><br><span class="line">  .border-<span class="number">1px</span></span><br><span class="line">    &amp;::after</span><br><span class="line">      -webkit-transform: <span class="built_in">scaleY</span>(<span class="number">0.7</span>)</span><br><span class="line">      transform: <span class="built_in">scaleY</span>(<span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line">@media (-webkit-min-device-pixel-ratio: <span class="number">2</span>),(min-device-pixel-ratio: <span class="number">2</span>)</span><br><span class="line">  .border-<span class="number">1px</span></span><br><span class="line">    &amp;::after</span><br><span class="line">      -webkit-transform: <span class="built_in">scaleY</span>(<span class="number">0.5</span>)</span><br><span class="line">      transform: <span class="built_in">scaleY</span>(<span class="number">0.5</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="flexå¼¹æ€§å¸ƒå±€"><a href="#flexå¼¹æ€§å¸ƒå±€" class="headerlink" title="flexå¼¹æ€§å¸ƒå±€"></a>flexå¼¹æ€§å¸ƒå±€</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190125224331.png"                      alt=""                ><br>éœ€è¦äº†è§£</p><blockquote><p>flex: flex-grow flex-shrink flex-basis|auto|initial|inherit;<br>flex-basis    é¡¹ç›®çš„é•¿åº¦ã€‚åˆæ³•å€¼ï¼šâ€autoâ€ã€â€inheritâ€ æˆ–ä¸€ä¸ªåè·Ÿ â€œ%â€ã€â€pxâ€ã€â€emâ€ æˆ–ä»»ä½•å…¶ä»–é•¿åº¦å•ä½çš„æ•°å­—ã€‚</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods</span></span><br><span class="line">   <span class="attribute">display</span>: flex</span><br><span class="line">   position: absolute</span><br><span class="line">   top: <span class="number">174px</span></span><br><span class="line">   bottom: <span class="number">46px</span></span><br><span class="line">   width: <span class="number">100%</span></span><br><span class="line">   overflow: hidden</span><br><span class="line">   .menu-wrapper</span><br><span class="line">     flex: <span class="number">0</span> <span class="number">0</span> <span class="number">80px</span></span><br><span class="line">     width: <span class="number">80px</span></span><br><span class="line">     background: <span class="number">#f3f5f7</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¾§è¾¹èœå•æ å¤šè¡Œå±…ä¸­æ˜¾ç¤ºæ•ˆæœ"><a href="#ä¾§è¾¹èœå•æ å¤šè¡Œå±…ä¸­æ˜¾ç¤ºæ•ˆæœ" class="headerlink" title="ä¾§è¾¹èœå•æ å¤šè¡Œå±…ä¸­æ˜¾ç¤ºæ•ˆæœ"></a>ä¾§è¾¹èœå•æ å¤šè¡Œå±…ä¸­æ˜¾ç¤ºæ•ˆæœ</h2><p>ç”¨åˆ°displayï¼štable-cell ä¸ va-middle<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/displaytable.gif"                      alt=""                ></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.menu-item</span></span><br><span class="line">    <span class="attribute">display</span>: table</span><br><span class="line">    height: <span class="number">54px</span></span><br><span class="line">    width: <span class="number">56px</span></span><br><span class="line">    padding: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">    line-height: <span class="number">14px</span></span><br><span class="line">    &amp;.current</span><br><span class="line">      position: relative</span><br><span class="line">      z-index: <span class="number">10</span></span><br><span class="line">      margin-top: -<span class="number">1px</span></span><br><span class="line">      background: <span class="number">#fff</span></span><br><span class="line">      font-weight: <span class="number">700</span></span><br><span class="line">    .text</span><br><span class="line">      display: table-cell</span><br><span class="line">      width: <span class="number">56px</span></span><br><span class="line">      vertical-align: middle</span><br><span class="line">      <span class="built_in">border-1px</span>(<span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.1</span>))</span><br><span class="line">      font-size: <span class="number">12px</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Sticky-footerå¸ƒå±€"><a href="#Sticky-footerå¸ƒå±€" class="headerlink" title="Sticky+footerå¸ƒå±€"></a>Sticky+footerå¸ƒå±€</h2><p>é—®é¢˜ï¼šæ€ä¹ˆæ ·è®©ä¸€ä¸ªåŒºå—å§‹ç»ˆåœ¨é¡µé¢åº•éƒ¨ï¼Œæ— è®ºå®ƒå‰é¢çš„å†…å®¹åªæœ‰å‡ è¡Œæˆ–è€…å¤šåˆ°é¡µé¢å‡ºç°æ»šåŠ¨æ¡ï¼Œè¯¥åŒºå—å§‹ç»ˆå‡ºç°åœ¨é¡µé¢åº•éƒ¨<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190125230217.png"                      alt=""                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190125230753.png"                      alt=""                ><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;detailShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-wrapper clearfix&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-main&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;seller.name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-close&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;closeDetail&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-close&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br></pre></td></tr></table></figure><br>csså¸ƒå±€</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.detail-wrapper</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">    min-height: <span class="number">100%</span></span><br><span class="line">    .detail-main</span><br><span class="line">      margin-top: <span class="number">64px</span></span><br><span class="line">      padding-bottom: <span class="number">64px</span></span><br><span class="line">    .clearfix</span><br><span class="line">       display: inline-block</span><br><span class="line">       &amp;:after</span><br><span class="line">         display: block</span><br><span class="line">         content: <span class="string">&#x27;&#x27;</span></span><br><span class="line">         height: <span class="number">0</span></span><br><span class="line">         line-height: <span class="number">0</span></span><br><span class="line">         clear: both</span><br><span class="line">         visibility: hidden</span><br><span class="line"></span><br><span class="line">.detail-close</span><br><span class="line">         position: relative</span><br><span class="line">         width: <span class="number">32px</span></span><br><span class="line">         height: <span class="number">32px</span></span><br><span class="line">         margin: -<span class="number">64px</span> auto <span class="number">0</span> auto</span><br><span class="line">         clear: both</span><br><span class="line">         font-size: <span class="number">32px</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚ä½•å®ç°ï¼š</p><h2 id="å®ƒè¿™ä¸ªå¸ƒå±€å®ç°çš„åŸç†å°±æ˜¯ç»™å®ƒçš„ä¼ªç±»afteræ·»åŠ ä¸€ä¸ªå†…å®¹ï¼Œè®¾ç½®displayå¿…é¡»ä¸ºblockæˆ–è€…inline-blockï¼Œè®©å®ƒä¼ªç±»çš„å†…å®¹å ä¸€è¡Œï¼Œç„¶åè®¾ç½®heightè·Ÿline-heightéƒ½ä¸º0ï¼Œå°†å®ƒçš„visibilityè®¾ç½®ä¸ºhidden-è¿™é‡Œè¿˜æ˜¯ä¼šå æ®ç©ºé—´-ï¼Œè®©ä¼ªç±»ä¸€ç›´å æ®ä¸€è¡Œç„¶åå°†ä¸‹é¢çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚ä¸€ç›´åœ¨åº•éƒ¨çš„åŒºå—æŒ¤ä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†sticky-footerå¸ƒå±€ã€‚"><a href="#å®ƒè¿™ä¸ªå¸ƒå±€å®ç°çš„åŸç†å°±æ˜¯ç»™å®ƒçš„ä¼ªç±»afteræ·»åŠ ä¸€ä¸ªå†…å®¹ï¼Œè®¾ç½®displayå¿…é¡»ä¸ºblockæˆ–è€…inline-blockï¼Œè®©å®ƒä¼ªç±»çš„å†…å®¹å ä¸€è¡Œï¼Œç„¶åè®¾ç½®heightè·Ÿline-heightéƒ½ä¸º0ï¼Œå°†å®ƒçš„visibilityè®¾ç½®ä¸ºhidden-è¿™é‡Œè¿˜æ˜¯ä¼šå æ®ç©ºé—´-ï¼Œè®©ä¼ªç±»ä¸€ç›´å æ®ä¸€è¡Œç„¶åå°†ä¸‹é¢çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚ä¸€ç›´åœ¨åº•éƒ¨çš„åŒºå—æŒ¤ä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†sticky-footerå¸ƒå±€ã€‚" class="headerlink" title="å®ƒè¿™ä¸ªå¸ƒå±€å®ç°çš„åŸç†å°±æ˜¯ç»™å®ƒçš„ä¼ªç±»afteræ·»åŠ ä¸€ä¸ªå†…å®¹ï¼Œè®¾ç½®displayå¿…é¡»ä¸ºblockæˆ–è€…inline-blockï¼Œè®©å®ƒä¼ªç±»çš„å†…å®¹å ä¸€è¡Œï¼Œç„¶åè®¾ç½®heightè·Ÿline-heightéƒ½ä¸º0ï¼Œå°†å®ƒçš„visibilityè®¾ç½®ä¸ºhidden(è¿™é‡Œè¿˜æ˜¯ä¼šå æ®ç©ºé—´)ï¼Œè®©ä¼ªç±»ä¸€ç›´å æ®ä¸€è¡Œç„¶åå°†ä¸‹é¢çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚ä¸€ç›´åœ¨åº•éƒ¨çš„åŒºå—æŒ¤ä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†sticky footerå¸ƒå±€ã€‚"></a>å®ƒè¿™ä¸ªå¸ƒå±€å®ç°çš„åŸç†å°±æ˜¯ç»™å®ƒçš„ä¼ªç±»afteræ·»åŠ ä¸€ä¸ªå†…å®¹ï¼Œè®¾ç½®displayå¿…é¡»ä¸ºblockæˆ–è€…inline-blockï¼Œè®©å®ƒä¼ªç±»çš„å†…å®¹å ä¸€è¡Œï¼Œç„¶åè®¾ç½®heightè·Ÿline-heightéƒ½ä¸º0ï¼Œå°†å®ƒçš„visibilityè®¾ç½®ä¸ºhidden(è¿™é‡Œè¿˜æ˜¯ä¼šå æ®ç©ºé—´)ï¼Œè®©ä¼ªç±»ä¸€ç›´å æ®ä¸€è¡Œç„¶åå°†ä¸‹é¢çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚ä¸€ç›´åœ¨åº•éƒ¨çš„åŒºå—æŒ¤ä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†sticky footerå¸ƒå±€ã€‚</h2><p><code>margin: -64px auto 0</code> autoåœ¨è¿™é‡Œå°±æ˜¯è¿™ä¸ª<code>margin-top:-64px</code>å†³å®šä½ çš„è¿™ä¸ªå…ƒç´ è¦å¾€ä¸Šé¢å¢åŠ å¤šå°‘</p><h2 id="æ¨ªçº¿æ¡ç©¿è¿‡å­—ç¬¦ä¸²çš„ä¼˜åŒ–"><a href="#æ¨ªçº¿æ¡ç©¿è¿‡å­—ç¬¦ä¸²çš„ä¼˜åŒ–" class="headerlink" title="æ¨ªçº¿æ¡ç©¿è¿‡å­—ç¬¦ä¸²çš„ä¼˜åŒ–"></a>æ¨ªçº¿æ¡ç©¿è¿‡å­—ç¬¦ä¸²çš„ä¼˜åŒ–</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190125231549.png"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>ä¼˜æƒ ä¿¡æ¯<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span></span><br><span class="line"><span class="attribute">display</span>: flex</span><br><span class="line">width: <span class="number">80%</span></span><br><span class="line">margin: <span class="number">28px</span> auto <span class="number">24px</span> auto</span><br><span class="line">.line</span><br><span class="line">flex: <span class="number">1</span></span><br><span class="line">position: relative</span><br><span class="line">top: -<span class="number">6px</span></span><br><span class="line">border-bottom: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>)</span><br><span class="line">.text</span><br><span class="line">padding: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">font-weight: <span class="number">700</span></span><br><span class="line">font-size: <span class="number">14px</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¡«å……å›¾ç‰‡å ä½"><a href="#å¡«å……å›¾ç‰‡å ä½" class="headerlink" title="å¡«å……å›¾ç‰‡å ä½"></a>å¡«å……å›¾ç‰‡å ä½</h2><p>ç”±äºå›¾ç‰‡å¼‚æ­¥åŠ è½½å¦‚æœä¸è®¾ç½®å›¾ç‰‡é«˜åº¦ä¼šå‡ºç°é—ªåŠ¨çš„bug<br>æ‰€ä»¥éœ€è¦cssåšäº›å¤„ç†</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190126002718.png"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;image-header&quot;</span>&gt;</span></span><br><span class="line">  &lt;img</span><br><span class="line">    :src  = &quot;food.icon&quot;</span><br><span class="line">      alt = &quot;meitu&quot;</span><br><span class="line">  &gt;</span><br><span class="line">  &lt;div</span><br><span class="line">    class  = &quot;back&quot;</span><br><span class="line">    @click = &quot;hide&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-arrow_lift&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>padding-bottom</code>è®¾ç½®å¤šå°‘æ ¹æ®å®é™…éœ€è¦å®½é«˜æ¯”æ¥ç®—<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-header</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">padding-bottom</span> <span class="number">100%</span></span><br><span class="line">    <span class="selector-tag">img</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¤è¯†ä¸‹position:sticky</title>
      <link href="2019/01/15/%E8%AE%A4%E8%AF%86%E4%B8%8Bpositionsticky/"/>
      <url>2019/01/15/%E8%AE%A4%E8%AF%86%E4%B8%8Bpositionsticky/</url>
      
        <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯position:stickyï¼Ÿ<br><a id="more"></a><br>stickyçš„ä¸­æ–‡æ„æ€æ˜¯â€œç²˜æ€§çš„â€ï¼Œ<code>position:sticky</code>è¡¨ç°ä¹Ÿç¬¦åˆè¿™ä¸ªç²˜æ€§çš„è¡¨ç°ã€‚åŸºæœ¬ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ˜¯position:relativeå’Œposition:fixedçš„ç»“åˆä½“â€”â€”å½“å…ƒç´ åœ¨å±å¹•å†…ï¼Œè¡¨ç°ä¸ºrelativeï¼Œå°±è¦æ»šå‡ºæ˜¾ç¤ºå™¨å±å¹•çš„æ—¶å€™ï¼Œè¡¨ç°ä¸ºfixedã€‚</p><h2 id="å…¶ä»–ç‰¹æ€§"><a href="#å…¶ä»–ç‰¹æ€§" class="headerlink" title="å…¶ä»–ç‰¹æ€§"></a>å…¶ä»–ç‰¹æ€§</h2><p><code>position:sticky</code>æœ‰ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œé‚£å°±æ˜¯stickyå…ƒç´ æ•ˆæœå®Œå…¨å—åˆ¶äºçˆ¶çº§å…ƒç´ ä»¬ã€‚</p><p>è¿™å’Œposition:fixedå®šä½æœ‰ç€æ ¹æœ¬æ€§çš„ä¸åŒï¼Œfixedå…ƒç´ ç›´æŠµé¡µé¢æ ¹å…ƒç´ ï¼Œå…¶ä»–çˆ¶å…ƒç´ å¯¹å…¶left/topå®šä½æ— æ³•é™åˆ¶ã€‚</p><p>æ ¹æ®æˆ‘ç®€å•çš„æµ‹è¯•ï¼Œå‘ç°äº†stickyå…ƒç´ ä»¥ä¸‹ä¸€äº›ç‰¹æ€§è¡¨ç°ï¼š</p><p>çˆ¶çº§å…ƒç´ ä¸èƒ½æœ‰ä»»ä½•<code>overflow:visible</code>ä»¥ä¸ºçš„overflowè®¾ç½®ï¼Œå¦åˆ™æ²¡æœ‰ç²˜æ»æ•ˆæœã€‚å› ä¸ºæ”¹å˜äº†æ»šåŠ¨å®¹å™¨ï¼ˆå³ä½¿æ²¡æœ‰å‡ºç°æ»šåŠ¨æ¡ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„<code>position:sticky</code>æ— æ•ˆï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æŸä¸€ä¸ªç¥–å…ˆå…ƒç´ è®¾ç½®äº†overflow:hiddenï¼Œç§»é™¤ä¹‹å³å¯ã€‚<br>åŒä¸€ä¸ªçˆ¶å®¹å™¨ä¸­çš„stickyå…ƒç´ ï¼Œå¦‚æœå®šä½å€¼ç›¸ç­‰ï¼Œåˆ™ä¼šé‡å ï¼›å¦‚æœå±äºä¸åŒçˆ¶å…ƒç´ ï¼Œåˆ™ä¼šé¸ å é¹Šå·¢ï¼ŒæŒ¤å¼€åŸæ¥çš„å…ƒç´ ï¼Œå½¢æˆä¾æ¬¡å ä½çš„æ•ˆæœã€‚<br>stickyå®šä½ï¼Œä¸ä»…å¯ä»¥è®¾ç½®topï¼ŒåŸºäºæ»šåŠ¨å®¹å™¨ä¸Šè¾¹ç¼˜å®šä½ï¼›è¿˜å¯ä»¥è®¾ç½®bottomï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹åº•éƒ¨ç²˜æ»ã€‚å¦‚æœæ˜¯æ°´å¹³æ»šåŠ¨ï¼Œä¹Ÿå¯ä»¥è®¾ç½®leftå’Œrightå€¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: -webkit-sticky;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>demoå¦‚ä¸‹ï¼š</p><html><br><iframe width="100%" height="300" src="//jsrun.net/fZXKp/embedded/all/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><br></html>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯•è¯•ä½¿ç”¨CSSå®ç°æŠ›ç‰©çº¿è¿åŠ¨æ•ˆæœ</title>
      <link href="2019/01/13/%E8%AF%95%E8%AF%95%E4%BD%BF%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E6%8A%9B%E7%89%A9%E7%BA%BF%E8%BF%90%E5%8A%A8%E6%95%88%E6%9E%9C/"/>
      <url>2019/01/13/%E8%AF%95%E8%AF%95%E4%BD%BF%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E6%8A%9B%E7%89%A9%E7%BA%BF%E8%BF%90%E5%8A%A8%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å‚è€ƒ<code>å¼ é‘«æ—­</code>ç©ºé—´çš„å¦ä¸€ç¯‡æ–‡ä»¶<br><a id="more"></a><br><strong>â€”&gt;</strong> <a class="link"   href="https://www.zhangxinxu.com/wordpress/2018/08/css-css3-%E6%8A%9B%E7%89%A9%E7%BA%BF%E5%8A%A8%E7%94%BB/" >ç‚¹å‡»é“¾æ¥<i class="fas fa-external-link-alt"></i></a></p><p>æ•ˆæœå›¾<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/QQ20190117-104424-HD.gif"                      alt=""                ></p><h2 id="å®ç°çš„åŸç†åˆ†æ"><a href="#å®ç°çš„åŸç†åˆ†æ" class="headerlink" title="å®ç°çš„åŸç†åˆ†æ"></a>å®ç°çš„åŸç†åˆ†æ</h2><ol><li><code>æŠ›ç‰©çº¿è¿åŠ¨å…ƒç´ ä½¿ç”¨è‡³å°‘å†…å¤–ä¸¤å±‚æ ‡ç­¾</code>,æŠ›ç‰©çº¿å…ƒç´ å†…å¤–ä¸¤æ¬¡æ ‡ç­¾ä¸€ä¸ªè´Ÿè´£æ°´å¹³æ–¹å‘çš„translateç§»åŠ¨ï¼Œ</li><li>ä¸€ä¸ªè´Ÿè´£å‚ç›´æ–¹å‘çš„translateç§»åŠ¨ï¼Œ</li><li>ç„¶åä½¿ç”¨ä¸åŒçš„ç¼“åŠ¨å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ä¸åŒçš„timing-functionï¼Œ</li><li>åœ¨CSS3 animationåŠ¨ç”»æ•ˆæœä¸­æ˜¯animation-timing-functionå±æ€§</li></ol><h4 id="CSS3-transition-timing-function-å±æ€§"><a href="#CSS3-transition-timing-function-å±æ€§" class="headerlink" title="CSS3 transition-timing-function å±æ€§"></a>CSS3 transition-timing-function å±æ€§</h4><p>transition-timing-function:å±æ€§è§„å®šè¿‡æ¸¡æ•ˆæœçš„é€Ÿåº¦æ›²çº¿ã€‚è¯¥å±æ€§å…è®¸è¿‡æ¸¡æ•ˆæœéšç€æ—¶é—´æ¥æ”¹å˜å…¶é€Ÿåº¦ã€‚</p><blockquote><p>transition-timing-function: linear|ease|ease-in|ease-out|ease-in-out|cubic-<br>bezier(n,n,n,n);</p></blockquote><table><thead><tr><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>linear</td><td>è§„å®šä»¥ç›¸åŒé€Ÿåº¦å¼€å§‹è‡³ç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0,0,1,1)ï¼‰ã€‚</td></tr><tr><td>ease</td><td>è§„å®šæ…¢é€Ÿå¼€å§‹ï¼Œç„¶åå˜å¿«ï¼Œç„¶åæ…¢é€Ÿç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆcubic-bezier(0.25,0.1,0.25,1)ï¼‰ã€‚</td></tr><tr><td>ease-in</td><td>è§„å®šä»¥æ…¢é€Ÿå¼€å§‹çš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0.42,0,1,1)ï¼‰ã€‚</td></tr><tr><td>ease-out</td><td>è§„å®šä»¥æ…¢é€Ÿç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0,0,0.58,1)ï¼‰ã€‚</td></tr><tr><td>ease-in-out</td><td>è§„å®šä»¥æ…¢é€Ÿå¼€å§‹å’Œç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0.42,0,0.58,1)ï¼‰ã€‚</td></tr><tr><td>cubic-bezier(n,n,n,n)</td><td>åœ¨ cubic-bezier å‡½æ•°ä¸­å®šä¹‰è‡ªå·±çš„å€¼ã€‚å¯èƒ½çš„å€¼æ˜¯ 0 è‡³ 1 ä¹‹é—´çš„æ•°å€¼ã€‚</td></tr></tbody></table><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fly-item</span> &#123;</span><br><span class="line">    <span class="comment">/* æ°´å¹³ç§»åŠ¨ï¼Œçº¿æ€§åŒ€é€Ÿ */</span></span><br><span class="line">    <span class="attribute">transition-timing-function</span>: linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.fly-item</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="comment">/* å‚ç›´ç§»åŠ¨ï¼Œå…ˆæ…¢åå¿« */</span></span><br><span class="line">    <span class="attribute">transition-timing-function</span>: <span class="built_in">cubic-bezier</span>(.<span class="number">96</span>,.<span class="number">16</span>,.<span class="number">99</span>,.<span class="number">97</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>cubic-bezier(.96,.16,.99,.97);</code><a class="link"   href="http://cubic-bezier.com/#.17,.67,.83,.67" >æˆ‘ä»¬å¯ä»¥å€ŸåŠ©cubic-bezier.comå·¥å…·<i class="fas fa-external-link-alt"></i></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/Snipaste_2019-01-17_10-53-43.png"                      alt=""                ></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ball-x</span> &#123; <span class="attribute">animation-timing-function</span>: linear; &#125;</span><br><span class="line"><span class="selector-class">.ball-y</span> &#123; <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(.<span class="number">55</span>, <span class="number">0</span>, .<span class="number">85</span>, .<span class="number">36</span>); &#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/Snipaste_2019-01-17_10-59-21.png"                      alt=""                ></p><h2 id="è´´ä¸Šä»£ç "><a href="#è´´ä¸Šä»£ç " class="headerlink" title="è´´ä¸Šä»£ç "></a>è´´ä¸Šä»£ç </h2><p>css<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.image-x</span>&#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">100px</span> <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-cart</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">15.84%</span>;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">84.8392%</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#0088CC</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-decoration</span>: none;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.fly-item</span>,</span><br><span class="line"><span class="selector-class">.fly-item</span>&gt;<span class="selector-tag">img</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">transition</span>: transform .<span class="number">5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fly-item</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line"><span class="comment">/* margin: -25px 0 0 -25px; */</span></span><br><span class="line"><span class="attribute">transition-timing-function</span>: linear;</span><br><span class="line"><span class="attribute">opacity</span>: .<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fly-item</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line"><span class="attribute">transition-timing-function</span>:<span class="built_in">cubic-bezier</span>(.<span class="number">96</span>,.<span class="number">16</span>,.<span class="number">99</span>,.<span class="number">97</span>);</span><br><span class="line"><span class="attribute">outline</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">221</span>, <span class="number">46</span>, <span class="number">59</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.shop-cart</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">283px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">25px</span>;</span><br><span class="line"><span class="attribute">padding-top</span>: <span class="number">8px</span>;</span><br><span class="line"><span class="attribute">background</span>:red;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&#x27;microsoft yahei&#x27;</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line"><span class="attribute">text-indent</span>: <span class="number">34px</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">position</span>: fixed;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;image-x&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btnCart&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn-cart&quot;</span>&gt;</span>æ·»åŠ åˆ°è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;shopCart&quot;</span> <span class="attr">class</span>=<span class="string">&quot;shop-cart&quot;</span>&gt;</span>è´­ç‰©è½¦ <span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;flyItem&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fly-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/book.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>javascript<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eleBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btnCart&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> eleFlyItem = <span class="built_in">document</span>.getElementById(<span class="string">&quot;flyItem&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> eleFlyImg = eleFlyItem.querySelector(<span class="string">&quot;img&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> eleCart = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#shopCart&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isRuning = <span class="literal">false</span>;</span><br><span class="line">eleBtn.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// ç°åœ¨æŒ‰é’®è·ç¦»è´­ç‰©è½¦çš„è·ç¦»</span></span><br><span class="line"><span class="keyword">var</span> boundBtn = eleBtn.getBoundingClientRect();</span><br><span class="line"><span class="keyword">var</span> boundCart = eleCart.getBoundingClientRect();</span><br><span class="line"><span class="built_in">console</span>.log(boundBtn, boundCart);</span><br><span class="line"><span class="comment">//ä¸­å¿ƒç‚¹çš„æ°´å¹³è·ç¦»</span></span><br><span class="line"><span class="keyword">var</span> offsetX = boundCart.left + boundCart.width / <span class="number">2</span> - (boundBtn.left + boundBtn.width / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> offsetY = boundCart.top + boundCart.height / <span class="number">2</span> - (boundBtn.top + boundBtn.height / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡µé¢æ»šåŠ¨è·ç¦»</span></span><br><span class="line"><span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> scrollLeft = <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(scrollTop, scrollLeft);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!isRuning) &#123;</span><br><span class="line">eleFlyItem.style.display = <span class="string">&quot;block&quot;</span>; <span class="comment">//æ˜¾ç¤ºæŠ›ç‰©ä½“</span></span><br><span class="line">eleFlyItem.style.left = (boundBtn.left + scrollLeft + <span class="built_in">this</span>.clientWidth / <span class="number">2</span>) + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">eleFlyItem.style.top = (boundBtn.top + scrollTop + <span class="built_in">this</span>.clientHeight / <span class="number">2</span>) + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"><span class="comment">//å¼€å§‹åŠ¨ç”»</span></span><br><span class="line">eleFlyItem.style.transform = <span class="string">&#x27;translateX(&#x27;</span>+ offsetX +<span class="string">&#x27;px)&#x27;</span>;</span><br><span class="line">eleFlyImg.style.transform = <span class="string">&#x27;translateY(&#x27;</span>+ offsetY +<span class="string">&#x27;px)&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(offsetX, offsetY);</span><br><span class="line">isRuning = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">eleFlyItem.style.display = <span class="string">&quot;&quot;</span>;</span><br><span class="line">eleFlyItem.style.transform = <span class="string">&quot;translateX(0)&quot;</span>;</span><br><span class="line">eleFlyImg.style.transform = <span class="string">&quot;translateY(0)&quot;</span>;</span><br><span class="line">isRuning = <span class="literal">false</span>;</span><br><span class="line">eleCart.querySelector(<span class="string">&quot;span&quot;</span>).innerHTML = eleCart.querySelector(<span class="string">&quot;span&quot;</span>).innerHTML * <span class="number">1</span> + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/QQ20190117-110437-HD.gif"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´­ç‰©ç‰©å“æŠ›ç‰©çº¿åˆ°è´­ç‰©è½¦</title>
      <link href="2019/01/12/%E8%B4%AD%E7%89%A9%E7%89%A9%E5%93%81%E6%8A%9B%E7%89%A9%E7%BA%BF%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6/"/>
      <url>2019/01/12/%E8%B4%AD%E7%89%A9%E7%89%A9%E5%93%81%E6%8A%9B%E7%89%A9%E7%BA%BF%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å†™ç‚¹å¤–å–çœ‹åˆ°elmè¿™ä¸ªæ•ˆæœéå¸¸å¥½ï¼Œçªå‘å¥‡æƒ³å®ç°ä¸‹è¯•è¯•ï¼Œäºæ˜¯å†™äº†å‡ ä¸ªéå¸¸ä¸ç†æƒ³ï¼Œç„¶åå„ç§è°·æ­Œï¼Œæœ€åæœ‰ä¸€äº›å°çš„æ”¶è·åˆ†äº«<br><a id="more"></a><br>æ•ˆæœ1<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/QQ20190116-112139-HD.gif"                      alt=""                ></p><p>æ•ˆæœ2<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/QQ20190116-112232-HD.gif"                      alt=""                ></p><h1 id="1ã€åŸç†åŠåˆ†æ"><a href="#1ã€åŸç†åŠåˆ†æ" class="headerlink" title="1ã€åŸç†åŠåˆ†æ"></a>1ã€åŸç†åŠåˆ†æ</h1><p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘è¿˜åœ¨å›¾ä¸ŠèŠ±äº†ä¸€äº›å®ç°è´­ç‰©è½¦çš„åŸç†ï¼Œä½†æ˜¯å¾ˆå¿«å‘ç°ä¸è¡Œï¼Œæ‰€ä»¥è¡¥äº†ä¸€ä¸‹è´­ç‰©è½¦çš„çŸ¥è¯†ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å…¬å¼</p><blockquote><p>y=a<em>x</em>x + b*x+c</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/3903542472-57b47707b54bf_articlex.jpeg"                      alt=""                ></p><p>ä¸‹é¢çš„å®ç°å°±å¾ˆç®€å•äº†ï¼š</p><p>æ‰¾åˆ°ä¸‰ä¸ªç‚¹ï¼ˆx1,y1ï¼‰,ï¼ˆx2,y2ï¼‰,ï¼ˆx3,y3ï¼‰</p><p>ç¬¬ä¸€ä¸ªç‚¹å–ï¼šæŠ›ç‰©çº¿å¼€å§‹çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»è´­ç‰©çš„æŒ‰é’®çš„åœ°æ–¹ï¼ˆx1,y1ï¼‰</p><p>ç¬¬äºŒä¸ªç‚¹å–ï¼šæŠ›ç‰©çº¿ç»“æŸçš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯è´­ç‰©è½¦çš„ä½ç½®ï¼ˆx3,y3ï¼‰</p><p>ç¬¬ä¸‰ä¸ªç‚¹å–ï¼šå…¶å®ç»“æŸçš„ç‚¹å¾€å·¦ä¸€ç‚¹å–å°±å¯ä»¥äº†ï¼Œå¯ä»¥æ˜¯ç»“æŸçš„ç‚¹ï¼ˆx3-10,y3-8ï¼‰,è¿™é‡Œå¯ä»¥é€šè¿‡å‡çš„å€¼è°ƒæ•´æŠ›ç‰©çº¿çš„å¼§åº¦</p><p>æ€è·¯æˆ‘å†æ‹ä¸€æ‹ï¼ŒæŠ›ç‰©çº¿å‡½æ•°<code>y = a*x*x + b*x + c</code> ,å…¶ä¸­<code>a</code>ä¸ç­‰äº0ï¼Œ<code>aã€bã€c</code>ä¸ºå¸¸æ•°ã€‚<code>xã€y</code>ä¸ºæŠ›ç‰©çº¿ç»è¿‡çš„åæ ‡ï¼›aå†³å®šæŠ›ç‰©çº¿çš„å¼€å£æ–¹å‘ï¼Œ<code>a&gt;0</code>å¼€å£å‘ä¸Šï¼Œa&lt;0å¼€å£å‘ä¸‹ã€‚å¾ˆæ˜æ˜¾å¤©çŒ«çš„æŠ›ç‰©çº¿å¼€å£å‘ä¸‹ï¼Œaè¿˜å†³å®šå¼€å£çš„å¤§å°ï¼Œå€¼è¶Šå°å¼€å£è¶Šå¤§ï¼ŒæŠ›ç‰©çº¿è¶Šå¹³é¡ºï¼Œåä¹‹æŠ›ç‰©çº¿è¶Šé™¡ã€‚æ‰€ä»¥açš„å€¼å¯ä»¥è‡ªå®šä¹‰ï¼Œç­‰äºæ˜¯å·²çŸ¥ä¸¤ä¸ªåæ ‡ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹åï¼Œå³å…ƒç´ leftã€topå€¼ï¼‰ï¼Œæ±‚ä¸¤ä¸ªæœªçŸ¥æ•°ï¼Œåˆä¸­çš„æ•°å­¦å°±å­¦è¿‡ï¼ŒäºŒå…ƒäºŒæ¬¡æ–¹ç¨‹ã€‚ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y1 ï¼ a*x1*x1 + b*x1 + c</span><br><span class="line">y2 = a*x2*x2 + b*x2 + c </span><br></pre></td></tr></table></figure><p>aå·²çŸ¥ï¼Œä»£å…¥ä¸¤ä¸ªå·²çŸ¥åæ ‡<code>ï¼»x1, y1ï¼½[x2, y2]</code>å¯ä»¥å¾—å‡º<code>bã€c</code>çš„å€¼ï¼Œxå’Œyçš„å¯¹åº”å…³ç³»æœ‰äº†ã€‚</p><p>ä¸ç®¡æŠ›ç‰©çº¿å¼€å£å‘ä¸Šè¿˜æ˜¯å‘ä¸‹ï¼Œå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šç§»åŠ¨çš„é€Ÿåº¦ä¸å˜ï¼Œå³leftå€¼åŒ€é€Ÿæ”¹å˜ï¼Œå¯ä»¥è®¾å®šæŠ›ç‰©çº¿è¿åŠ¨æ—¶é—´tï¼Œå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„é€Ÿåº¦ä¸ºspeedx =ï¼ˆx2 - x1ï¼‰/tï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯30msæ‰§è¡Œä¸€æ¬¡ï¼Œleftå€¼åœ¨æ¯æ¬¡å®šæ—¶å™¨æ‰§è¡Œåçš„å€¼ä¸ºå½“å‰çš„x ï¼ speedx <em> å®šæ—¶å™¨å·²æ‰§è¡Œæ—¶é•¿ï¼Œå†ä»£å…¥å‡½æ•°y ï¼ a</em>x<em>x + b</em>x + cå¾—åˆ°topå€¼ï¼Œç”±äºè¿™ä¸€åˆ‡çš„è®¡ç®—éƒ½å»ºç«‹åœ¨èµ·ç‚¹åæ ‡å¹³ç§»åˆ°åŸç‚¹ï¼ˆç»ˆç‚¹ä¹Ÿéšä¹‹å¹³ç§»ï¼‰çš„åŸºç¡€ä¸Šï¼Œæ‰€ä»¥æœ€ç»ˆè®¾ç½®è¿åŠ¨å…ƒç´ çš„leftï¼topå€¼çš„æ—¶å€™å¿…é¡»å°†èµ·ç‚¹å…ƒç´ çš„åˆå§‹leftï¼topå€¼åŠ ä¸Šã€‚</p><h1 id="ä»£ç å¦‚ä¸‹ï¼š"><a href="#ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä»£ç å¦‚ä¸‹ï¼š"></a>ä»£ç å¦‚ä¸‹ï¼š</h1>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Object.definePropertyäº†è§£ä¸‹</title>
      <link href="2019/01/08/Object.defineProperty%E4%BA%86%E8%A7%A3%E4%B8%8B/"/>
      <url>2019/01/08/Object.defineProperty%E4%BA%86%E8%A7%A3%E4%B8%8B/</url>
      
        <content type="html"><![CDATA[<p>æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚<br><a id="more"></a></p><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><table><thead><tr><th>å‚æ•°å</th><th>è¯´æ˜ </th></tr></thead><tbody><tr><td>obj</td><td>ç›®æ ‡å¯¹è±¡</td></tr><tr><td>prop</td><td>éœ€è¦å®šä¹‰çš„å±æ€§æˆ–æ–¹æ³•çš„åå­—ã€‚</td></tr><tr><td>descriptor</td><td>ç›®æ ‡å±æ€§æ‰€æ‹¥æœ‰çš„ç‰¹æ€§ã€‚</td></tr></tbody></table><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><table><thead><tr><th>ç‰¹æ€§å</th><th>è¯´æ˜ </th></tr></thead><tbody><tr><td>value</td><td>å±æ€§çš„å€¼</td></tr><tr><td>writable</td><td>å¦‚æœä¸ºfalseï¼Œå±æ€§çš„å€¼å°±ä¸èƒ½è¢«é‡å†™ã€‚</td></tr><tr><td>get</td><td>ä¸€æ—¦ç›®æ ‡å±æ€§è¢«è®¿é—®å°±ä¼šè°ƒå›æ­¤æ–¹æ³•ï¼Œå¹¶å°†æ­¤æ–¹æ³•çš„è¿ç®—ç»“æœè¿”å›ç”¨æˆ·ã€‚</td></tr><tr><td>set</td><td>ä¸€æ—¦ç›®æ ‡å±æ€§è¢«èµ‹å€¼ï¼Œå°±ä¼šè°ƒå›æ­¤æ–¹æ³•ã€‚</td></tr><tr><td>configurable</td><td>å¦‚æœä¸ºfalseï¼Œåˆ™ä»»ä½•å°è¯•åˆ é™¤ç›®æ ‡å±æ€§æˆ–ä¿®æ”¹å±æ€§ä»¥ä¸‹ç‰¹æ€§ï¼ˆwritable, configurable, enumerableï¼‰çš„è¡Œä¸ºå°†è¢«æ— æ•ˆåŒ–ã€‚</td></tr><tr><td>enumerable</td><td>æ˜¯å¦èƒ½åœ¨forâ€¦inå¾ªç¯ä¸­éå†å‡ºæ¥æˆ–åœ¨Object.keysä¸­åˆ—ä¸¾å‡ºæ¥ã€‚</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="keyword">var</span> a = &#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, <span class="string">&quot;p&quot;</span>, &#123;</span><br><span class="line"> value:<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªä¸å¯å˜çš„é»˜è®¤å€¼&quot;</span>,</span><br><span class="line">writable:<span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a.p);</span><br><span class="line">a.p=<span class="string">&quot;æ”¹å†™&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a.p);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">foo: <span class="string">&quot;test&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">&quot;foo&quot;</span>)));</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;ä½ çš„æ¸¸è§ˆå™¨ä¸æ”¯æŒObject.definePropertyæˆ– Object.getOwnPropertyDescriptor&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">   &quot;use strict&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">      <span class="built_in">Object</span>.defineProperty( o, <span class="string">&quot;attr&quot;</span>, &#123;</span><br><span class="line">        value: <span class="string">&quot;è¿™æ˜¯åˆ©ç”¨defindPropertyæ·»åŠ çš„æ–°å±æ€§&quot;</span>,</span><br><span class="line">        writable: <span class="literal">false</span>,  <span class="comment">//ä¸å¯é‡å†™</span></span><br><span class="line">        enumerable: <span class="literal">true</span>,  <span class="comment">//å¯æšä¸¾</span></span><br><span class="line">        configurable: <span class="literal">true</span> <span class="comment">//å¯åˆ é™¤è¯¥å±æ€§</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="string">&quot;å¸…å“¥ä½ å¥½&quot;</span>;</span><br><span class="line">        <span class="comment">//è¯»å†™å™¨</span></span><br><span class="line">        <span class="built_in">Object</span>.defineProperty( o, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">          get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> name; &#125;,</span><br><span class="line">          set: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123; name = value+<span class="string">&quot;!!!&quot;</span>; &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)();</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log( o.attr )</span><br><span class="line">      <span class="comment">// è¿™æ˜¯åˆ©ç”¨defindPropertyæ·»åŠ çš„æ–°å±æ€§</span></span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log( o.name );  <span class="comment">// å¸…å“¥ä½ å¥½</span></span><br><span class="line"></span><br><span class="line">      o.name = <span class="string">&quot;javascript&quot;</span>;</span><br><span class="line">      <span class="built_in">console</span>.log( o.name );  <span class="comment">// javascript</span></span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log( <span class="built_in">Object</span>.keys(o))<span class="comment">//attr</span></span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        o.attr = <span class="string">&quot;è¯•å›¾é‡å†™è¯¥å±æ€§&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">catch</span>(ee)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;ä¸writable: falseå†²çª&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">Object</span>.defineProperty( o, <span class="string">&quot;attr&quot;</span>, &#123;</span><br><span class="line">        writable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      o.attr = <span class="string">&quot;å†è¯•å°è¯•é‡å†™è¯¥å±æ€§&quot;</span>;</span><br><span class="line">      <span class="built_in">console</span>.log( o.attr );</span><br><span class="line"> </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">delete</span> o.attr); <span class="comment">//false ä¸writable: falseå†²çª</span></span><br><span class="line">     </span><br><span class="line">   </span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;ä½ çš„æ¸¸è§ˆå™¨ä¸æ”¯æŒObject.defineProperty &quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swift4åŸºæœ¬è¿ç®—ç¬¦</title>
      <link href="2019/01/02/swift4%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>2019/01/02/swift4%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>å¤§å¤šæ•°æ–¹æ³•ä¸javascriptç±»å‹ä¸åšè¿‡å¤šæè¿°ä¸€ä¸ªä¾‹å­å¸¦è¿‡<br><a id="more"></a></p><h1 id="3-1èµ‹å€¼è¿ç®—ç¬¦"><a href="#3-1èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3.1èµ‹å€¼è¿ç®—ç¬¦"></a>3.1èµ‹å€¼è¿ç®—ç¬¦</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">a <span class="operator">=</span> b;</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> (x,y) <span class="operator">=</span> (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment">//1</span></span><br><span class="line"><span class="built_in">print</span>(y) <span class="comment">//2</span></span><br></pre></td></tr></table></figure><h1 id="3-2ç®—æ•°è¿ç®—ç¬¦"><a href="#3-2ç®—æ•°è¿ç®—ç¬¦" class="headerlink" title="3.2ç®—æ•°è¿ç®—ç¬¦"></a>3.2ç®—æ•°è¿ç®—ç¬¦</h1><p>åŠ å‡ä¹˜é™¤<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> <span class="number">9</span> ,b <span class="operator">=</span><span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å–ä½™<span class="subst">\(a<span class="operator">%</span>b)</span>&quot;</span>)  <span class="comment">//1</span></span><br></pre></td></tr></table></figure></p><h1 id="3-3ç»„åˆèµ‹å€¼è¿ç®—ç¬¦"><a href="#3-3ç»„åˆèµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3.3ç»„åˆèµ‹å€¼è¿ç®—ç¬¦"></a>3.3ç»„åˆèµ‹å€¼è¿ç®—ç¬¦</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">a <span class="operator">+=</span><span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">//3</span></span><br></pre></td></tr></table></figure><h1 id="3-4æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#3-4æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="3.4æ¯”è¾ƒè¿ç®—ç¬¦"></a>3.4æ¯”è¾ƒè¿ç®—ç¬¦</h1><p> == = &gt; &lt;</p><h1 id="3-5ä¸‰ç›®è¿ç®—ç¬¦"><a href="#3-5ä¸‰ç›®è¿ç®—ç¬¦" class="headerlink" title="3.5ä¸‰ç›®è¿ç®—ç¬¦"></a>3.5ä¸‰ç›®è¿ç®—ç¬¦</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®å‘å¥–é‡‘ <span class="operator">=</span> å¥–é‡‘ ï¼Ÿ åŸºæœ¬å·¥èµ„<span class="operator">+</span><span class="number">5000</span> ï¼šåŸºæœ¬å·¥èµ„<span class="operator">+</span> <span class="number">300</span></span><br></pre></td></tr></table></figure><h1 id="3-6ç©ºåˆè¿ç®—ç¬¦"><a href="#3-6ç©ºåˆè¿ç®—ç¬¦" class="headerlink" title="3.6ç©ºåˆè¿ç®—ç¬¦"></a>3.6ç©ºåˆè¿ç®—ç¬¦</h1><p>ç©ºåˆè¿ç®— <code>a??b</code>  ç±»ä¼¼ a != nil ? a! :  b</p><ul><li>è¡¨è¾¾å¼aå¿…é¡»æ˜¯ä¸ªå¯é€‰ç±»å‹</li><li>é»˜è®¤å€¼bçš„ç±»å‹ä¸açš„å‚¨å­˜å€¼ä¿æŒä¸€è‡´</li></ul><p>å¦‚æœaæ˜¯éç©º åˆ™bå°±ä¸ä¼šè¢«ä¼°å€¼</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">default</span> <span class="operator">=</span> <span class="string">&quot;red&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> userName : <span class="type">String</span>?</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name <span class="operator">=</span> userName <span class="operator">??</span> <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3-7åŒºé—´è¿ç®—ç¬¦"><a href="#3-7åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="3.7åŒºé—´è¿ç®—ç¬¦"></a>3.7åŒºé—´è¿ç®—ç¬¦</h1><p>é—­åŒºé—´ aâ€¦b</p><p>åŠå¼€é—´ a..&lt;b</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> index  <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span><span class="number">5</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(index)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count <span class="operator">=</span> names.count</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count&#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3-8é€»è¾‘è¿ç®—ç¬¦"><a href="#3-8é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="3.8é€»è¾‘è¿ç®—ç¬¦"></a>3.8é€»è¾‘è¿ç®—ç¬¦</h1><p>!a   a&amp;&amp;b a||b</p>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swift4è¯­æ³•åŸºç¡€</title>
      <link href="2019/01/01/swift4%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
      <url>2019/01/01/swift4%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>ä»‹ç»ä¸‹å˜é‡å’Œå¸¸é‡<br><a id="more"></a></p><h1 id="2-1å˜é‡ä¸å¸¸é‡"><a href="#2-1å˜é‡ä¸å¸¸é‡" class="headerlink" title="2.1å˜é‡ä¸å¸¸é‡"></a>2.1å˜é‡ä¸å¸¸é‡</h1><p>letä»£è¡¨å¸¸é‡</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">MAX_VALUE</span> <span class="operator">=</span> <span class="number">25</span></span><br></pre></td></tr></table></figure><p>varä»£è¡¨å˜é‡</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> currentCount <span class="operator">=</span> <span class="number">100</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¸€æ—¦å¸¸é‡æˆ–å˜é‡ç¡®å®šç±»å‹ï¼Œå°±ä¸èƒ½ä½¿ç”¨ç›¸åŒåç§°å†æ¬¡å£°æ˜æˆ–æ”¹å˜å®ƒçš„ç±»å‹ï¼ŒåŒæ—¶å¸¸é‡ä¸å˜é‡ä¸èƒ½ç›¸äº’è½¬æ¢</p></blockquote><h1 id="2-2æ³¨é‡Š"><a href="#2-2æ³¨é‡Š" class="headerlink" title="2.2æ³¨é‡Š"></a>2.2æ³¨é‡Š</h1><p>//ä»£è¡¨å•è¡Œæ³¨é‡Š<br>/<em>+</em>ä»£è¡¨å¤šè¡Œæ³¨é‡Š*+**/</p><h1 id="2-3åˆ†å·"><a href="#2-3åˆ†å·" class="headerlink" title="2.3åˆ†å·"></a>2.3åˆ†å·</h1><p>åŸºæœ¬ä¸Šä¸éœ€è¦åˆ†å·é™¤éï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sun <span class="operator">=</span> <span class="string">&quot;â˜€ï¸&quot;</span>ï¼›<span class="built_in">print</span>(sun)</span><br></pre></td></tr></table></figure></p><h1 id="2-4æ•´æ•°"><a href="#2-4æ•´æ•°" class="headerlink" title="2.4æ•´æ•°"></a>2.4æ•´æ•°</h1><p>æ•´æ•°è¡¨ç¤ºï¼šæ­£æ•°ï¼Œè´Ÿæ•°ï¼Œé›¶</p><h1 id="2-5æµ®ç‚¹æ•°"><a href="#2-5æµ®ç‚¹æ•°" class="headerlink" title="2.5æµ®ç‚¹æ•°"></a>2.5æµ®ç‚¹æ•°</h1><p>æµ®åŠ¨æ•°Doubleï¼ŒFloat</p><h1 id="2-6ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­"><a href="#2-6ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­" class="headerlink" title="2.6ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­"></a>2.6ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­</h1><p>å¦‚æœæˆ‘ä»¬çš„ä»£ç éœ€è¦ä¸€ä¸ªstringç±»å‹çš„å€¼ï¼Œå°±ç»å¯¹ä¸ä¼šä¼ è¿‡å»ä¸€ä¸ªIntç±»å‹çš„å€¼ï¼Œæœ‰äº†ç±»å‹æ¨æ–­ï¼Œç¼–è¯‘å™¨æ ¹æ®æˆ‘ä»¬ç»™çš„ç›¸å…³å˜é‡ï¼Œå¸¸é‡ï¼Œæˆ–ç±»æµ‹å±æ€§å¤åˆ¶ï¼Œåœ¨ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­è¡¨è¾¾å¼çš„ç±»å‹ï¼Œåªè¦æˆ‘ä»¬å£°æ˜å¸¸é‡æˆ–å˜é‡èµ‹äºˆå®ƒä¸€ä¸ªâ€å­—é¢é‡â€œå°±ä¼šè§¦å‘ç±»å‹æ¨æ–­</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age<span class="operator">=</span> <span class="number">23</span></span><br><span class="line"><span class="keyword">let</span> name <span class="operator">=</span> <span class="string">&quot;jack&quot;</span></span><br><span class="line"><span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.1415926</span></span><br><span class="line"><span class="keyword">let</span> é¢ç§¯ <span class="operator">=</span> pi <span class="operator">*</span> pow(<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-7æ•°å€¼å‹å­—é¢é‡"><a href="#2-7æ•°å€¼å‹å­—é¢é‡" class="headerlink" title="2.7æ•°å€¼å‹å­—é¢é‡"></a>2.7æ•°å€¼å‹å­—é¢é‡</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">Interger</span> <span class="operator">=</span> <span class="number">17</span></span><br><span class="line"><span class="keyword">let</span> twojinzhi <span class="operator">=</span> <span class="number">0b0001</span></span><br><span class="line"><span class="keyword">let</span> bajinzhi <span class="operator">=</span> <span class="number">0o21</span></span><br><span class="line"><span class="keyword">let</span> shiliujinzhi <span class="operator">=</span> <span class="number">0x11</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-8æ•°å€¼ç±»å‹è½¬æ¢"><a href="#2-8æ•°å€¼ç±»å‹è½¬æ¢" class="headerlink" title="2.8æ•°å€¼ç±»å‹è½¬æ¢"></a>2.8æ•°å€¼ç±»å‹è½¬æ¢</h1><p>æ•´æ•°ä¸æµ®åŠ¨æ•°ç›¸äº’è½¬åŒ–</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//int -&gt; d</span></span><br><span class="line"><span class="keyword">let</span>  three <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> point <span class="operator">=</span> <span class="number">0.14159</span>;</span><br><span class="line"><span class="keyword">let</span> pis <span class="operator">=</span> <span class="type">Double</span>(three) <span class="operator">+</span> point;</span><br><span class="line"></span><br><span class="line"><span class="comment">//d -&gt; int</span></span><br><span class="line"><span class="keyword">let</span> intPi <span class="operator">=</span> <span class="type">Int</span>(pis)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç±»å‹åˆ«åï¼šå°±æ˜¯ç»™ç°æœ‰çš„ç±»å‹å®šä¹‰å¦ä¸€ä¸ªåå­—ï¼Œå¯ä»¥ä½¿<code>typealias</code>å…³é”®è¯å®šä¹‰ç±»å‹åˆ«å</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> <span class="operator">=</span> <span class="type">UInt16</span></span><br></pre></td></tr></table></figure><h1 id="2-9å¸ƒå°”å€¼"><a href="#2-9å¸ƒå°”å€¼" class="headerlink" title="2.9å¸ƒå°”å€¼"></a>2.9å¸ƒå°”å€¼</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hasKey <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span>(hasKey)&#123;</span><br><span class="line">    <span class="built_in">print</span>(&#x27;kaimen&#x27;)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(&#x27;guanmen&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-10å…ƒç»„"><a href="#2-10å…ƒç»„" class="headerlink" title="2.10å…ƒç»„"></a>2.10å…ƒç»„</h1><p>å…ƒç»„çš„å®šä¹‰ï¼šä¸´æ—¶æŠŠä»»æ„æ•°æ®çš„å¤šä¸ªå€¼ç»„åˆèµ·æ¥çš„ä¸€ä¸ªå¤åˆç±»å‹ï¼Œé€‚ç”¨æ‰‹æœºå®¢æˆ·ç«¯webapiè¯·æ±‚è¿”å›çš„æ•°æ®é›†åˆ</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http404Error <span class="operator">=</span> (<span class="number">404</span>,<span class="string">&quot;æ²¡æ‰¾åˆ°é¡µé¢&quot;</span>)</span><br><span class="line"><span class="comment">//é€šè¿‡ä¸‹æ ‡æ¥æ‰¾</span></span><br><span class="line"><span class="keyword">var</span> code <span class="operator">=</span> http404Error.<span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> msg <span class="operator">=</span> http404Error.<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-11å¯é€‰ç±»å‹"><a href="#2-11å¯é€‰ç±»å‹" class="headerlink" title="2.11å¯é€‰ç±»å‹"></a>2.11å¯é€‰ç±»å‹</h1><p>å¯é€‰ç±»å‹å®šä¹‰ï¼šç”¨æ¥å¤„ç†å¯èƒ½ç¼ºå¤±å€¼å¾—ç±»å‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number <span class="operator">=</span> &#x27;<span class="number">1234</span>&#x27;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> isNumber <span class="operator">=</span> <span class="type">Int</span>(number)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isNumber <span class="operator">!=</span> <span class="literal">nil</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;is number:<span class="subst">\(isNumber)</span>&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;not number:<span class="subst">\(isNumber)</span>&quot;</span>)  <span class="comment">// Optional(1234)</span></span><br><span class="line">     </span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;not number:<span class="subst">\(isNumber<span class="operator">!</span>)</span>&quot;</span>)  <span class="comment">// 1234</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¢åŠ <code>isNumber!</code>æ‹†åŒ…</p><p>æˆ‘ä»¬åªèƒ½ç»™<code>å¯é€‰ç±»å‹</code>çš„å˜é‡èµ‹äºˆnilå€¼ï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰å€¼ã€‚</p><p>å»ºè®®å£°æ˜å˜é‡æ—¶å€™è®¾ç½®ä¸ºå¯é€‰å˜é‡ï¼Œä»–ä»¬ä¼šè‡ªåŠ¨è®¾ç½®é»˜è®¤å€¼nil</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> emptyString :<span class="type">String</span>?</span><br><span class="line"><span class="built_in">print</span>(emptyString)   <span class="comment">// nil</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç¡®å®šæœ‰é»˜è®¤å€¼åˆ™</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rewardï¼š<span class="type">Int</span>! <span class="operator">=</span> <span class="number">8_000</span></span><br><span class="line"><span class="built_in">print</span>(reward)   <span class="comment">// 8000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-12é”™è¯¯å¤„ç†"><a href="#2-12é”™è¯¯å¤„ç†" class="headerlink" title="2.12é”™è¯¯å¤„ç†"></a>2.12é”™è¯¯å¤„ç†</h1><p>å½“å‡½æ•°é‡åˆ°ä¸€ä¸ªé”™è¯¯æƒ…å†µæ—¶ï¼Œå®ƒå°±ä¼šå‡ºç°<code>throw</code>ä¸€ä¸ªé”™è¯¯</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasError</span>()</span> <span class="keyword">throws</span>&#123;</span><br><span class="line">    print (&#x27;å¤„ç†æŠ›å‡ºé”™è¯¯&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> hasError()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> <span class="operator">&lt;</span># throwing expression #<span class="operator">&gt;</span></span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="operator">&lt;</span>#pattenrn#<span class="operator">&gt;</span>&#123;</span><br><span class="line">    <span class="operator">&lt;</span>#statements#<span class="operator">&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-13æ–­è¨€"><a href="#2-13æ–­è¨€" class="headerlink" title="2.13æ–­è¨€"></a>2.13æ–­è¨€</h1><p>æ–­è¨€ï¼šä¸»è¦ç”¨äºè¿è¡Œæ—¶è°ƒè¯•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> andAge <span class="operator">=</span> <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">assert</span>(andAge <span class="operator">&gt;</span> <span class="number">16</span>,<span class="string">&quot;andyde å¹´é¾„æ²¡æœ‰åˆ°16å²&quot;</span>) <span class="comment">//æ‰§è¡Œè¿™å¥</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 å¹´æ€»ç»“</title>
      <link href="2018/12/30/2018%E6%80%BB%E7%BB%93/"/>
      <url>2018/12/30/2018%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>2018 å¹´æˆé•¿çš„è¿˜æ˜¯å¤ªæ…¢ï¼Œå†™äº† NET å†™äº† RN å†™äº† ANDROID</p><a id="more"></a><p>2019 å¹´æƒ³æ‰©å±•è‡ªå·±çš„æŠ€èƒ½å­¦ä¸€é—¨åˆ«çš„è¯­è¨€-Swiftï¼Œç»™è‡ªå·± 4 ä¸ªæœˆçš„ä¸‹ç­æ—¶é—´ï¼ŒåŠ æ²¹ â›½ï¸ï¼Œ<br>2019 å¹´æœ€é‡è¦çš„è¿˜æœ‰æ¶¨å·¥èµ„å•Š</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_redux-Immutable</title>
      <link href="2018/12/16/React%E7%B3%BB%E5%88%97_redux-Immutable%20/"/>
      <url>2018/12/16/React%E7%B3%BB%E5%88%97_redux-Immutable%20/</url>
      
        <content type="html"><![CDATA[<p>Immutable æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>ç®€è€Œè¨€ä¹‹ï¼ŒImmutableæ•°æ®å°±æ˜¯ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½æ›´æ”¹çš„æ•°æ®ã€‚æ¯å½“å¯¹Immutableå¯¹è±¡è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„Immutableå¯¹è±¡ï¼Œä»¥æ­¤æ¥ä¿è¯æ•°æ®çš„ä¸å¯å˜</p></blockquote> <a id="more"></a><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181219113510.gif"                      alt=""                ><br>é¦–å…ˆç†Ÿæ‚‰ä¸€äº›å¸¸ç”¨apiçš„ç”¨æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> immutable = <span class="built_in">require</span>(<span class="string">&#x27;immutable&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="built_in">Map</span>, List, is &#125; = immutable;</span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">Map</span>(&#123;</span><br><span class="line">select: <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">filter: <span class="built_in">Map</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Cam&#x27;</span> &#125;),</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> b = a.set(<span class="string">&#x27;select&#x27;</span>, <span class="string">&#x27;people&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br><span class="line"><span class="built_in">console</span>.log(a.get(<span class="string">&#x27;filter&#x27;</span>) === b.get(<span class="string">&#x27;filter&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> list = List([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;c&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(list.get(<span class="number">21</span>));</span><br><span class="line"></span><br><span class="line">immutable.fromJS(&#123; <span class="attr">a</span>: <span class="string">&#x27;123&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;234&#x27;</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">key, value, path</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(key, value, path);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//================================</span></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">1</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> map2 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">1</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(map1 === map2); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(map1, map2)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(is(map1, map2)); <span class="comment">// true</span></span><br><span class="line"><span class="comment">//=================================</span></span><br><span class="line">List.isList([]); <span class="comment">// false</span></span><br><span class="line">islist1 = List.isList(List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(islist1);</span><br><span class="line"><span class="built_in">console</span>.log(List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]).push(<span class="number">2222222222</span>));</span><br><span class="line">List([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).insert(<span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">//List [ 0, 1, 2, 3, 4, 5 ]</span></span><br><span class="line">List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).push(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// List [ 1, 2, 3, 4, 5 ]</span></span><br><span class="line">List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).pop();</span><br><span class="line"><span class="comment">// List[ 1, 2, 3 ]</span></span><br><span class="line">List([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).unshift(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// List [ 1, 2, 3, 4 ]</span></span><br><span class="line">List([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).shift();</span><br><span class="line"><span class="comment">// List [ 1, 2, 3, 4 ]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]).size);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span>.isMap(&#123;&#125;); <span class="comment">// false</span></span><br><span class="line">ismap1 = <span class="built_in">Map</span>.isMap(<span class="built_in">Map</span>()); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(ismap1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=================set==============</span></span><br><span class="line"><span class="keyword">const</span> setlist = List([<span class="number">0</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;set &#x27;</span> + setlist);</span><br><span class="line"><span class="keyword">const</span> setlist2 = setlist.set(<span class="number">2</span>, <span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;set &#x27;</span> + setlist2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setmap = <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> setmap2 = setmap.set(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(setmap2);</span><br><span class="line"><span class="keyword">const</span> setmap3 = setmap2.set(<span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;hello value&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;ima&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(setmap3);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deepmap = <span class="built_in">Map</span>(&#123;</span><br><span class="line">subObject: <span class="built_in">Map</span>(&#123;</span><br><span class="line">key: <span class="string">&#x27;hello react&#x27;</span>,</span><br><span class="line">object: <span class="built_in">Map</span>(&#123;</span><br><span class="line">key: <span class="string">&#x27;hello word&#x27;</span>,</span><br><span class="line">&#125;),</span><br><span class="line">&#125;),</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> newMap = deepmap.setIn([<span class="string">&#x27;subObject&#x27;</span>, <span class="string">&#x27;key&#x27;</span>], <span class="string">&#x27;update helo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(newMap);</span><br><span class="line"><span class="keyword">const</span> secondMap = deepmap.setIn([<span class="string">&#x27;subObject&#x27;</span>, <span class="string">&#x27;object&#x27;</span>, <span class="string">&#x27;key&#x27;</span>], <span class="string">&#x27;ğŸ˜update word!&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(secondMap);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=================delete==============</span></span><br><span class="line"><span class="keyword">const</span> del = List([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).delete(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åˆ é™¤åçš„æ•°ç»„ï¼š &#x27;</span> + del);</span><br><span class="line"><span class="keyword">const</span> originalMap = <span class="built_in">Map</span>(&#123;</span><br><span class="line">key: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">otherKey: <span class="string">&#x27;other value&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> del2 = originalMap.delete(<span class="string">&#x27;otherKey&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åˆ é™¤åçš„å¯¹è±¡&#x27;</span> + del2);</span><br><span class="line"><span class="comment">//==============merge============</span></span><br><span class="line"><span class="keyword">const</span> Map1 = Immutable.fromJS(&#123;<span class="attr">a</span>:<span class="number">111</span>,<span class="attr">b</span>:<span class="number">222</span>,<span class="attr">c</span>:&#123;<span class="attr">d</span>:<span class="number">333</span>,<span class="attr">e</span>:<span class="number">444</span>&#125;&#125;);</span><br><span class="line"> <span class="keyword">const</span> Map2 = Immutable.fromJS(&#123;<span class="attr">a</span>:<span class="number">111</span>,<span class="attr">b</span>:<span class="number">222</span>,<span class="attr">c</span>:&#123;<span class="attr">e</span>:<span class="number">444</span>,<span class="attr">f</span>:<span class="number">555</span>&#125;&#125;);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> Map3 = Map1.merge(Map2);</span><br><span class="line">  <span class="comment">//Map &#123;a:111,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br><span class="line"> <span class="keyword">const</span> Map4 = Map1.mergeDeep(Map2);</span><br><span class="line">  <span class="comment">//Map &#123;a:111,b:222,c:&#123;d:333,e:444,f:555&#125;&#125;</span></span><br><span class="line"> <span class="keyword">const</span> Map5 = Map1.mergeWith(<span class="function">(<span class="params">oldData,newData,key</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(key === <span class="string">&#x27;a&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">666</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newData</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,Map2);</span><br><span class="line">  <span class="comment">//Map &#123;a:666,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®ä¸­å¦‚ä½•ç”¨å‘¢ï¼Ÿ"><a href="#é¡¹ç›®ä¸­å¦‚ä½•ç”¨å‘¢ï¼Ÿ" class="headerlink" title="é¡¹ç›®ä¸­å¦‚ä½•ç”¨å‘¢ï¼Ÿ"></a>é¡¹ç›®ä¸­å¦‚ä½•ç”¨å‘¢ï¼Ÿ</h3><p>é¦–å…ˆä¿®æ”¹redurce.js<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fromJS &#125; from <span class="string">&#x27;immutable&#x27;</span>;</span><br><span class="line"><span class="comment">//æ™®é€šå¯¹è±¡è½¬æ¢æˆ immutableç±»å‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> defaultState = fromJS(&#123;</span><br><span class="line"><span class="built_in">focused</span>: <span class="keyword">false</span>,</span><br><span class="line">mouseIn: <span class="keyword">false</span>,</span><br><span class="line">list: [],</span><br><span class="line">page: <span class="number">1</span>, <span class="comment">//å½“å‰é¡µ</span></span><br><span class="line">totalPage: <span class="number">1</span>, <span class="comment">//æ€»é¡µæ•°</span></span><br><span class="line">&#125;);</span><br><span class="line">....</span><br><span class="line"><span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> constants.SEARCH_FOCUS:</span><br><span class="line">    <span class="comment">//é€»è¾‘ imæ ¹æ®ä¹‹å‰çš„æ•°æ®ï¼Œè¿”å›æ–°çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> state.<span class="built_in">set</span>(<span class="string">&#x27;focused&#x27;</span>, <span class="keyword">true</span>); </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> constants.CHANGE_LIST:</span><br><span class="line">    <span class="comment">// mergeå¤šç»„å¯¹è±¡ä¸­ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">return</span> state.merge(&#123;</span><br><span class="line">    list: action.data,</span><br><span class="line">    totalPage: action.totalPage,</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><br>index.js<br>è·å–æ•°æ®<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="comment">//getin[å“ªä¸ªåˆ†æ”¯reducerï¼Œåˆ†æ”¯ä¸Šçš„æ•°æ®å­—æ®µ]</span></span><br><span class="line">focused: state.getIn([<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;focused&#x27;</span>]),</span><br><span class="line">list: state.getIn([<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;list&#x27;</span>]),</span><br><span class="line">page: state.getIn([<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;page&#x27;</span>]),</span><br><span class="line">totalPage: state.getIn([<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;totalPage&#x27;</span>]),</span><br><span class="line">mouseIn: state.getIn([<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;mouseIn&#x27;</span>]),</span><br><span class="line">login: state.getIn([<span class="string">&#x27;login&#x27;</span>, <span class="string">&#x27;isLogin&#x27;</span>]),</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_combineReducers</title>
      <link href="2018/12/15/React%E7%B3%BB%E5%88%97_combineReducers/"/>
      <url>2018/12/15/React%E7%B3%BB%E5%88%97_combineReducers/</url>
      
        <content type="html"><![CDATA[<p>éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œéœ€è¦å¯¹ reducer å‡½æ•° è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† state çš„ä¸€éƒ¨åˆ†ã€‚<br><a id="more"></a><br>combineReducers è¾…åŠ©å‡½æ•°çš„ä½œç”¨æ˜¯ï¼ŒæŠŠä¸€ä¸ªç”±å¤šä¸ªä¸åŒ reducer å‡½æ•°ä½œä¸º value çš„ objectï¼Œåˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„ reducer å‡½æ•°ï¼Œç„¶åå°±å¯ä»¥å¯¹è¿™ä¸ª reducer è°ƒç”¨ createStoreã€‚<br>åˆå¹¶åçš„ reducer å¯ä»¥è°ƒç”¨å„ä¸ªå­ reducerï¼Œå¹¶æŠŠå®ƒä»¬çš„ç»“æœåˆå¹¶æˆä¸€ä¸ª state å¯¹è±¡ã€‚state å¯¹è±¡çš„ç»“æ„ç”±ä¼ å…¥çš„å¤šä¸ª reducer çš„ key å†³å®šã€‚</p><p>å…ˆçœ‹ä¸‹demoç»“æ„<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181219104938.png"                      alt=""                ></p><p>åˆ›å»ºstore<br>src/store/index.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, compose, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, composeEnhancers(</span><br><span class="line">applyMiddleware(thunk)</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure><br>src/store/redurcer.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux-immutable&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> headerReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;../common/header/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> homeReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;../pages/home/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> detailReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;../pages/detail/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> loginReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;../pages/login/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">header: headerReducer, <span class="comment">//keyå€¼ ï¼š valueå€¼</span></span><br><span class="line">home: homeReducer,</span><br><span class="line">detail: detailReducer,</span><br><span class="line">login: loginReducer,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer;</span><br></pre></td></tr></table></figure><p>/src/page/header/index.js</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionCreators <span class="keyword">from</span> <span class="string">&#x27;./actionCreators&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> constants <span class="keyword">from</span> <span class="string">&#x27;./constants&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; reducer, actionCreators, constants &#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™çš„å¥½å¤„æ˜¯src/store/redurcer.jsä¸‹çš„å¼•ç”¨åˆ†æ”¯redurceç›®å½•ç»“æ„å°‘å†™2å±‚ã€‚æ˜“è¯»</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; <span class="keyword">from</span>JS &#125; <span class="keyword">from</span> &#x27;immutable&#x27;;</span><br><span class="line">import * as constants <span class="keyword">from</span> &#x27;./constants&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">default</span>State = <span class="keyword">from</span>JS(&#123;</span><br><span class="line">title: &#x27;&#x27;,</span><br><span class="line">content: &#x27;&#x27;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> (<span class="keyword">state</span> = <span class="keyword">default</span>State, action) =&gt; &#123;</span><br><span class="line">switch(action.type) &#123;</span><br><span class="line">case constants.CHANGE_DETAIL:</span><br><span class="line">// é€»è¾‘å¤„ç†è¿”å›çº¯å‡½æ•°</span><br><span class="line">return<span class="keyword">state</span>.merge(&#123;</span><br><span class="line">title: action.title,</span><br><span class="line">content: action.content</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">return <span class="keyword">state</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ—¶ä»£ç ä¸­å¼•ç”¨reducerä¸­ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; DetailWrapper, Header, Content &#125; <span class="keyword">from</span> <span class="string">&#x27;./style&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; actionCreators &#125; <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Detail</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;DetailWrapper&gt;</span><br><span class="line">&lt;Header&gt;&#123;<span class="built_in">this</span>.props.title&#125;&lt;/Header&gt;</span><br><span class="line">&lt;Content </span><br><span class="line"><span class="comment">//  htmlæ ‡ç­¾çš„è½¬ä¹‰ç”¨dangerouslySetInnerHTML</span></span><br><span class="line">dangerouslySetInnerHTML=&#123;&#123;<span class="attr">__html</span>: <span class="built_in">this</span>.props.content&#125;&#125;</span><br><span class="line">/&gt;</span><br><span class="line">&lt;/DetailWrapper&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.props.getDetail(<span class="built_in">this</span>.props.match.params.id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapState = <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">title: state.getIn([<span class="string">&#x27;detail&#x27;</span>, <span class="string">&#x27;title&#x27;</span>]),</span><br><span class="line">content: state.getIn([<span class="string">&#x27;detail&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatch = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> (&#123;</span><br><span class="line"><span class="function"><span class="title">getDetail</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">dispatch(actionCreators.getDetail(id));</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapState, mapDispatch)(withRouter(Detail));</span><br><span class="line"><span class="comment">// ä»–çš„æ„æ€æ˜¯æˆ‘è®©detailæœ‰èƒ½åŠ›è·å–routerä¸­çš„ä¸€äº›å‚æ•°</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_react-redux</title>
      <link href="2018/12/15/React%E7%B3%BB%E5%88%97_react-redux/"/>
      <url>2018/12/15/React%E7%B3%BB%E5%88%97_react-redux/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆä¸‹è½½</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add  react-redux</span><br></pre></td></tr></table></figure><a id="more"></a><p>åˆ›å»ºä¸€ä¸ªstore<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure><br>å…¥å£æ–‡ä»¶.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">&lt;TodoList /&gt;</span><br><span class="line">&lt;/Provider&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure><br>index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getInputChange, addItem, deleteItem, GetItem &#125; <span class="keyword">from</span> <span class="string">&#x27;./store/actionCreators&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">todoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> value=&#123;<span class="built_in">this</span>.props.inputValue&#125; onChange=&#123;<span class="built_in">this</span>.props.changeInputValue&#125; /&gt;</span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.props.handleBtnClcik&#125;&gt;æäº¤&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;Dall&lt;/li&gt;</span><br><span class="line">&#123;<span class="built_in">this</span>.props.list.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (</span><br><span class="line">&lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">))&#125;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">inputValue: state.inputValue,</span><br><span class="line">list: state.list,</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispathchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="function"><span class="title">changeInputValue</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(e.target.value);</span><br><span class="line"><span class="keyword">const</span> action = getInputChange(e.target.value);</span><br><span class="line">dispatch(action);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">handleBtnClcik</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;æäº¤&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> action = addItem();</span><br><span class="line">dispatch(action);</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">mapStateToProps,</span><br><span class="line">mapDispathchToProps</span><br><span class="line">)(todoList);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ›å»ºreducer.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM, INIT_TODO_ITEM &#125; <span class="keyword">from</span> <span class="string">&#x27;./actionTypes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">inputValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">list: [],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line"><span class="built_in">console</span>.log(state, action);</span><br><span class="line"><span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state)); <span class="comment">//æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">if</span> (action.type === CHANGE_INPUT_VALUE) &#123;</span><br><span class="line">newState.inputValue = action.value;</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (action.type === ADD_TODO_ITEM) &#123;</span><br><span class="line">newState.list = [...newState.list, newState.inputValue];</span><br><span class="line">newState.inputValue = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> state;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_redux-saga</title>
      <link href="2018/12/14/React%E7%B3%BB%E5%88%97_redux-thunk/"/>
      <url>2018/12/14/React%E7%B3%BB%E5%88%97_redux-thunk/</url>
      
        <content type="html"><![CDATA[<p>reduxå¦‚ä½•ä½¿ç”¨å¼‚æ­¥è¯·æ±‚<br><a id="more"></a><br>é¦–å…ˆçœ‹ä¸‹ç®€å•çš„ä½¿ç”¨è¯·æ±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    axios.get(<span class="string">&#x27;http://rap2api.taobao.org/app/mock/8651/api/tuangou&#x27;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">    <span class="keyword">const</span> data = res.data;</span><br><span class="line">    <span class="keyword">const</span> action = initData(data);</span><br><span class="line">    store.dispatch(action);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>actionCreator.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> initData = <span class="function"><span class="params">data</span> =&gt;</span> (&#123;</span><br><span class="line">type: INIT_TODO_ITEM,</span><br><span class="line">data: data,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>redurce.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (action.type === INIT_TODO_ITEM) &#123;</span><br><span class="line">newState.list = action.data.data;</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¼‚æ­¥è¯·æ±‚æ–¹æ³•è¿‡å¤šï¼Œä»£ç çœ‹èµ·æ¥å°±æ¯”è¾ƒè‡ƒè‚¿<br>æ‰€æœ‰å¿…é¡»æå–å‡ºæ¥ç»Ÿä¸€ç®¡ç†</p><p>é¦–å…ˆå®‰è£…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add redux-saga</span><br></pre></td></tr></table></figure><p>é‡æ–°é…ç½®stroe</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line">+ <span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">&#x27;redux-saga&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line">+ <span class="keyword">import</span> mySaga <span class="keyword">from</span> <span class="string">&#x27;./sagas&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// create the saga middleware</span></span><br><span class="line">+ <span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();</span><br><span class="line"><span class="comment">// mount it on the Store</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, applyMiddleware(sagaMiddleware));</span><br><span class="line"><span class="comment">// then run the saga</span></span><br><span class="line">sagaMiddleware.run(mySaga);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store; <span class="comment">//æš´éœ²</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–å…ˆä¸»æ–‡ä»¶index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getInputChange, addItem, deleteItem, GetItem &#125; <span class="keyword">from</span> <span class="string">&#x27;./store/actionCreators&#x27;</span>;</span><br><span class="line"><span class="comment">//å‘é€action</span></span><br><span class="line">componentDidMount = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> action = GetItem();</span><br><span class="line">store.dispatch(action);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>actionCreator.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å¼‚æ­¥è¯·æ±‚çš„action ----&gt;sagaå»æ¥æ”¶</span><br><span class="line">export const GetItem &#x3D; () &#x3D;&gt; (&#123;</span><br><span class="line">type: ANSYNC_INIT_ITEM,</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F;è¯·æ±‚ä¹‹åè·å–action ---&gt;redurcerå»æ¥æ”¶</span><br><span class="line">export const initData &#x3D; data &#x3D;&gt; (&#123;</span><br><span class="line">type: INIT_TODO_ITEM,</span><br><span class="line">data: data,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>saga.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;call,fork, put, takeEvery &#125; <span class="keyword">from</span> <span class="string">&#x27;redux-saga/effects&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ANSYNC_INIT_ITEM &#125; <span class="keyword">from</span> <span class="string">&#x27;./actionTypes&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; initData &#125; <span class="keyword">from</span> <span class="string">&#x27;./actionCreators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">getInitList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">yield</span> axios.get(<span class="string">&#x27;http://rap2api.taobao.org/app/mock/8651/api/tuangou&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br><span class="line"><span class="comment">// yield put(&#123; type: INIT_TODO_ITEM, data: res.data &#125;);</span></span><br><span class="line"><span class="comment">//å‘é€action--&gt;</span></span><br><span class="line"><span class="keyword">yield</span> put(initData(res.data));</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;ç½‘ç»œè¯·æ±‚è¿”å›é”™è¯¯&#x27;</span> + e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">mySaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">yield</span> takeEvery(ANSYNC_INIT_ITEM, getInitList);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mySaga;</span><br></pre></td></tr></table></figure><p>redurcer.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (action.type === INIT_TODO_ITEM) &#123;</span><br><span class="line">newState.list = action.data.data;</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="sagaAPIç®€å•ä»‹ç»ï¼š"><a href="#sagaAPIç®€å•ä»‹ç»ï¼š" class="headerlink" title="sagaAPIç®€å•ä»‹ç»ï¼š"></a>sagaAPIç®€å•ä»‹ç»ï¼š</h2><p>Effectå‡½æ•°æœ‰å¾ˆå¤šä¸ªï¼Œåœ¨redux-saga/effectsæä¾›ï¼Œä¸»è¦åŒ…æ‹¬callï¼Œforkï¼Œputï¼Œtakeï¼Œselectç­‰ï¼Œå®ƒä»¬éƒ½ä¸middlewareä¸­çš„æ“ä½œä¸€ä¸€å¯¹åº”ã€‚</p><h5 id="call-å’Œ-fork"><a href="#call-å’Œ-fork" class="headerlink" title="call å’Œ fork"></a>call å’Œ fork</h5><p>callå’Œforkè¡¨ç¤ºå¼‚æ­¥è°ƒç”¨ï¼Œå…¶ä¸­callè¡¨ç¤ºçš„æ˜¯é˜»å¡è°ƒç”¨ï¼Œforkè¡¨ç¤ºçš„æ˜¯éé˜»å¡è°ƒç”¨ã€‚</p><h5 id="putå’Œselect"><a href="#putå’Œselect" class="headerlink" title="putå’Œselect"></a>putå’Œselect</h5><p>putå¯¹åº”çš„æ˜¯middlewareä¸­çš„dispatchæ–¹æ³•ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªplain objectï¼Œä¸€èˆ¬åœ¨å¼‚æ­¥è°ƒç”¨è¿”å›ç»“æœåï¼Œæ¥ç€æ‰§è¡Œputã€‚selectç›¸å½“äºgetStateï¼Œç”¨äºè·å–storeä¸­çš„ç›¸åº”éƒ¨åˆ†çš„stateã€‚</p><h5 id="takeã€takeEveryã€takeLatest"><a href="#takeã€takeEveryã€takeLatest" class="headerlink" title="takeã€takeEveryã€takeLatest"></a>takeã€takeEveryã€takeLatest</h5><p>redux-sagaä¸­å¦‚æœåœ¨éé˜»å¡è°ƒç”¨ä¸‹ï¼ˆforkï¼‰,é‚£ä¹ˆéµå¾ªçš„æ˜¯worker/watcheræ¨¡å¼ï¼Œé€šè¿‡takeå¯ä»¥ç›‘å¬æŸä¸ªactionæ˜¯å¦è¢«å‘èµ·ï¼Œæ­¤å¤–é€šè¿‡takeç»“åˆforkï¼Œå¯ä»¥å®ç°takeEveryå’ŒtakeLatestçš„æ•ˆæœã€‚</p><p>å¦‚æœä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„actionè¢«å‘èµ·å¤šæ¬¡ï¼ŒtakeEveryä¼šæ‰§è¡Œå¤šæ¬¡actionï¼Œè€ŒtakeLateståªä¼šæ‰§è¡Œæœ€è¿‘çš„ä¸€æ¬¡ã€‚</p><h2 id="redux-sagaçš„ä¼˜ç¼ºç‚¹"><a href="#redux-sagaçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="redux-sagaçš„ä¼˜ç¼ºç‚¹"></a>redux-sagaçš„ä¼˜ç¼ºç‚¹</h2><p>ä¼˜ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰é›†ä¸­å¤„ç†äº†æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ¥å£éƒ¨åˆ†ä¸€ç›®äº†ç„¶</p><p>ï¼ˆ2ï¼‰actionæ˜¯æ™®é€šå¯¹è±¡ï¼Œè¿™è·ŸreduxåŒæ­¥çš„actionä¸€æ¨¡ä¸€æ ·</p><p>ï¼ˆ3ï¼‰é€šè¿‡Effectï¼Œæ–¹ä¾¿å¼‚æ­¥æ¥å£çš„æµ‹è¯•</p><p>ï¼ˆ4ï¼‰é€šè¿‡worker å’Œwatcherå¯ä»¥å®ç°éé˜»å¡å¼‚æ­¥è°ƒç”¨ï¼Œå¹¶ä¸”åŒæ—¶å¯ä»¥å®</p><p>ç°éé˜»å¡è°ƒç”¨ä¸‹çš„äº‹ä»¶ç›‘å¬</p><p>ï¼ˆ5ï¼‰ å¼‚æ­¥æ“ä½œçš„æµç¨‹æ˜¯å¯ä»¥æ§åˆ¶çš„ï¼Œå¯ä»¥éšæ—¶å–æ¶ˆç›¸åº”çš„å¼‚æ­¥æ“ä½œã€‚</p><h1 id="ç¼ºç‚¹ï¼šå¤ªå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜"><a href="#ç¼ºç‚¹ï¼šå¤ªå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜" class="headerlink" title="ç¼ºç‚¹ï¼šå¤ªå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜"></a>ç¼ºç‚¹ï¼šå¤ªå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜</h1>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_redux</title>
      <link href="2018/12/13/%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8redux/"/>
      <url>2018/12/13/%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8redux/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ reduxï¼Ÿ<br><a id="more"></a></p><blockquote><p>å½“ä½ å»å¼€å‘å¤æ‚çš„å•é¡µåº”ç”¨çš„æ—¶å€™ä½ éœ€è¦ç®¡ç†å„ç§å¤æ‚çš„åº”ç”¨çŠ¶æ€ï¼Œè¿™é‹çŠ¶æ€å¯èƒ½æ˜¯æœåŠ¡å™¨è¿”å›çš„çŠ¶ï¼Œæ€ï¼Œæœ¬åœ°çš„æ•°æ® url redux å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† åªç»´æŠ¤æ•°æ®</p></blockquote><p>çœ‹å›¾ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/imagereduxçš„ä½¿ç”¨.png"                      alt=""                ></p><h2 id="redux-æµç¨‹"><a href="#redux-æµç¨‹" class="headerlink" title="redux æµç¨‹"></a>redux æµç¨‹</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/imageredux.png"                      alt=""                ></p><p>é¦–å…ˆåˆ›å»º Store /src/store/index</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> store = createStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store; <span class="comment">//æš´éœ²</span></span><br></pre></td></tr></table></figure><p>index.js ä¸­å¼•å…¥ store</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>; <span class="comment">//å¼•å…¥storeä¸­çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todolist</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">console</span>.log(store.getState());</span><br><span class="line"><span class="built_in">this</span>.state = store.getState();</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ­¤æ—¶ store å¹¶æ— æ•°æ®<br>æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª redurce /src/store/reducer</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * state ç›¸å½“äºæ•´ä¸ªé¡¹ç›®å­˜çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> * action  ç›¸å½“äº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">inputValue: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">list: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * state æ˜¯å‰ä¸€æ¬¡çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(state, action); <span class="comment">//reducer æ¥å—åˆ° storeä¼ è¿‡æ¥çš„action</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> state;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åå†å›åˆ° store ä¸­æŠŠ reducer å¯¼å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line">+ <span class="keyword">import</span> reduce <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ <span class="keyword">const</span> store = createStore(reduce);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store; <span class="comment">//æš´éœ²</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ´¾å‘ action</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;è¾“å…¥&quot;</span> value=&#123;<span class="built_in">this</span>.state.inputValue&#125; onChange=&#123;<span class="built_in">this</span>.handleInputChange&#125; /&gt;</span><br><span class="line">    &lt;button onClick=&#123;<span class="built_in">this</span>.onSumbit&#125;&gt;æäº¤&lt;/button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &#123;<span class="built_in">this</span>.state.list.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (</span><br><span class="line">    &lt;li onClick=&#123;<span class="built_in">this</span>.handleItemDelete.bind(<span class="built_in">this</span>, index)&#125; key=&#123;index&#125;&gt;</span><br><span class="line">    &#123;item&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">    ))&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handleInputChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> action = &#123;</span><br><span class="line">type: <span class="string">&#x27;changeText&#x27;</span>,</span><br><span class="line">value: e.target.value,</span><br><span class="line">&#125;;</span><br><span class="line">store.dispatch(action); <span class="comment">//ä¼ ç»™store</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">onSumbit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> action = &#123;</span><br><span class="line">type: <span class="string">&#x27;addList&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line">store.dispatch(action);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>action â€“&gt; store â€“&gt; reducer ä¸­æ‰¾åˆ°æ›´æ–° state çš„æ–¹æ³•</p></blockquote><p>redurce.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * state æ˜¯å‰ä¸€æ¬¡çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(state, action); <span class="comment">//reducer æ¥å—åˆ° storeä¼ è¿‡æ¥çš„action</span></span><br><span class="line"><span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state)); <span class="comment">//æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">if</span> (action.type === <span class="string">&#x27;changeText&#x27;</span>) &#123;</span><br><span class="line">newState.inputValue = action.value;</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line">   ........</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>redurce â€“&gt; è¿”å›æ–° state åˆ° Store ä¸­,åªæœ‰ stroe æ”¹å˜è‡ªå·±çš„å†…å®¹â€”&gt;è¿”å›ç»™ç»„ä»¶è§¦å‘ç»„ä»¶æ›´æ–°</p><p>ç›‘å¬ redurce è¿”å›çš„æ–° state</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">this</span>.state = store.getState();</span><br><span class="line"><span class="built_in">this</span>.handleStoreChange = <span class="built_in">this</span>.handleStoreChange.bind(<span class="built_in">this</span>);</span><br><span class="line">store.subscribe(<span class="built_in">this</span>.handleStoreChange); <span class="comment">//ç›‘å¬storeçš„å˜åŒ–</span></span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handleStoreChange</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;storechange&#x27;</span>);</span><br><span class="line"><span class="built_in">this</span>.setState(store.getState());</span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ•´ä¸€ä¸ªæµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p><h2 id="è§„èŒƒåŒ–-reduxï¼šActionTypes-çš„æ‹†åˆ†"><a href="#è§„èŒƒåŒ–-reduxï¼šActionTypes-çš„æ‹†åˆ†" class="headerlink" title="è§„èŒƒåŒ– reduxï¼šActionTypes çš„æ‹†åˆ†"></a>è§„èŒƒåŒ– reduxï¼šActionTypes çš„æ‹†åˆ†</h2><p>å½“æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ª action çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ª action æ–¹æ³•åæ‹¼å†™å­—ç¬¦ä¸²é”™è¯¯å¯¼è‡´ï¼Œæ˜¯å¾ˆéš¾è¢«å‘ç°çš„ï¼Œå¦‚æœæ˜¯å˜é‡å‘ç°å¼‚å¸¸å°±å¾ˆå®¹æ˜“å®šä½åˆ°é”™è¯¯ï¼Œæ‰€æœ‰æˆ‘ä»¬è¦å¼•å…¥ ActionTypes.js</p><p>src/store/actionTypes.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export const CHANGE_INPUT_VALUE &#x3D;change_input_value &#39; ;</span><br><span class="line">export const ADD_TODO_ITEM &#x3D;add_todo_item&#39; ;</span><br><span class="line">export const DELETE_TODO_ITEM &#x3D;&#39;delete_todo_item&#39; ;</span><br></pre></td></tr></table></figure><p>index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;DELETE_TODO_ITEM&#125; = <span class="keyword">from</span> <span class="string">&#x27;./store/actionTypes&#x27;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="title">handleItemDelete</span>(<span class="params">index</span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> action = &#123;</span><br><span class="line">type: DELETE_TODO_ITEM, <span class="comment">//å¼•å…¥</span></span><br><span class="line">index: index,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> bool = <span class="built_in">window</span>.confirm(<span class="string">`ä½ ç¡®å®šåˆ é™¤ç¬¬<span class="subst">$&#123;index&#125;</span>ä¸ªæ•°å—?`</span>);</span><br><span class="line"><span class="keyword">if</span> (bool) &#123;</span><br><span class="line">store.dispatch(action);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶è¿˜è¦æ”¹å˜ reducer</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;DELETE_TODO_ITEM&#125; = <span class="keyword">from</span> <span class="string">&#x27;./actionTypes&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (action.type === DELETE_TODO_ITEM) &#123;</span><br><span class="line">newState.list.splice(action.index, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181218124023.png"                      alt=""                ></p><h2 id="ä½¿ç”¨-actionCreator-ç»Ÿä¸€ç®¡ç†-action"><a href="#ä½¿ç”¨-actionCreator-ç»Ÿä¸€ç®¡ç†-action" class="headerlink" title="ä½¿ç”¨ actionCreator ç»Ÿä¸€ç®¡ç† action"></a>ä½¿ç”¨ actionCreator ç»Ÿä¸€ç®¡ç† action</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM &#125; <span class="keyword">from</span> <span class="string">&#x27;./actionTypes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getInputChange = <span class="function"><span class="params">value</span> =&gt;</span> (&#123;</span><br><span class="line">type: CHANGE_INPUT_VALUE,</span><br><span class="line">value,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addItem = <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">type: ADD_TODO_ITEM,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteItem = <span class="function"><span class="params">index</span> =&gt;</span> (&#123;</span><br><span class="line">type: DELETE_TODO_ITEM,</span><br><span class="line">index: index,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¼•å…¥ index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getInputChange, addItem, deleteItem &#125; <span class="keyword">from</span> <span class="string">&#x27;./store/actionCreators&#x27;</span>;</span><br><span class="line">    ...</span><br><span class="line"><span class="function"><span class="title">handleInputChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> action = getInputChange(e.target.value);</span><br><span class="line">store.dispatch(action); <span class="comment">//ä¼ ç»™store</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_ref</title>
      <link href="2018/12/12/React%E7%B3%BB%E5%88%97_ref/"/>
      <url>2018/12/12/React%E7%B3%BB%E5%88%97_ref/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Reactä¸­æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§refï¼Œç”¨æ¥å¼•ç”¨Reactç»„ä»¶æˆ–Domå…ƒç´ çš„å®ä¾‹ï¼›<br>å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨è¡¨å•å…ƒç´ å®šä¹‰refå±æ€§è·å–å…ƒç´ çš„å€¼ï¼›<br><a id="more"></a></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Ref</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">this</span>.handleSubmit = <span class="built_in">this</span>.handleSubmit.bind(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">handleSubmit</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line"><span class="comment">// é€šè¿‡this.inputè·å–valueå€¼;</span></span><br><span class="line">alert(<span class="string">&#x27;this title you submitted was&#x27;</span> + <span class="built_in">this</span>.input.value);</span><br><span class="line">event.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;form onSubmit=&#123;<span class="built_in">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">&lt;label&gt;</span><br><span class="line">title:</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="built_in">this</span>.input = input)&#125; /&gt;</span><br><span class="line">&lt;/label&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>refçš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥å—å½“å‰å…ƒç´ ä½œä¸ºå‚æ•°<br>ä¸Šé¢çš„ä¾‹å­ä¸­å¦‚æœæ˜¯éå—æ§ç»„ä»¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡defaultValueå±æ€§è®¾ç½®é»˜è®¤å€¼ï¼›<br>æ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> defaultValue=<span class="string">&quot;è¯·è¾“å…¥æœ‰æ•ˆå­—ç¬¦ğŸ˜&quot;</span> ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="built_in">this</span>.input = input)&#125; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>ä½†æ˜¯</strong> æˆ‘ä»¬åŸºæœ¬ä¸Šå¾ˆå°‘é‚£ä¹ˆåšè¿™ç§æ–¹å¼ç ´åäº†Reactç»„ä»¶çŠ¶æ€ç®¡ç†çš„ä¸€è‡´æ€§ï¼Œä¸å»ºè®®å¤§å®¶ä½¿ç”¨ï¼›</p></blockquote><h2 id="æ¥ä¸‹æ¥æˆ‘ä»¬å½’çº³å‡ ä¸ªä½¿ç”¨refçš„åœºæ™¯"><a href="#æ¥ä¸‹æ¥æˆ‘ä»¬å½’çº³å‡ ä¸ªä½¿ç”¨refçš„åœºæ™¯" class="headerlink" title="æ¥ä¸‹æ¥æˆ‘ä»¬å½’çº³å‡ ä¸ªä½¿ç”¨refçš„åœºæ™¯"></a>æ¥ä¸‹æ¥æˆ‘ä»¬å½’çº³å‡ ä¸ªä½¿ç”¨refçš„åœºæ™¯</h2><h4 id="åœ¨Domä¸­ä½¿ç”¨ref"><a href="#åœ¨Domä¸­ä½¿ç”¨ref" class="headerlink" title="åœ¨Domä¸­ä½¿ç”¨ref"></a>åœ¨Domä¸­ä½¿ç”¨ref</h4><p>è·Ÿä¹‹å‰ä¾‹å­ç›¸ä¼¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Ref</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">this</span>.handleSubmit = <span class="built_in">this</span>.handleSubmit.bind(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">componentDidMount = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.input.focus(); <span class="comment">//è‡ªåŠ¨è·å–ç„¦ç‚¹</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="built_in">this</span>.input = input)&#125; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ref"><a href="#åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ref" class="headerlink" title="åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ref"></a>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ref</h4><p>æ­¤æ—¶refçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼›è¿™æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶å¤–éƒ¨æ“ä½œç»„ä»¶çš„æ–¹å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">this</span>.blur = <span class="built_in">this</span>.blur.bind(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">componentDidMount = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.input.focus(); <span class="comment">//è‡ªåŠ¨è·å–ç„¦ç‚¹</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤±å»ç„¦ç‚¹</span></span><br><span class="line"><span class="function"><span class="title">blur</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.input.blur();</span><br><span class="line">alert(<span class="string">&#x27;æˆ‘å¤±å»ç„¦ç‚¹å‰çš„å€¼ï¼š&#x27;</span> + <span class="built_in">this</span>.input.value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="built_in">this</span>.input = input)&#125; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(props);</span><br><span class="line"><span class="built_in">this</span>.handleClick = <span class="built_in">this</span>.handleClick.bind(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.inputInstance);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.inputInstance.input.value);</span><br><span class="line"><span class="built_in">this</span>.inputInstance.blur();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;A ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="built_in">this</span>.inputInstance = input)&#125; /&gt;</span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.handleClick&#125;&gt;å¤±å»ç„¦ç‚¹&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> B;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181213234027.png"                      alt=""                ><br>é€šè¿‡ä¸Šè¿°ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºrefè·å–äº†Aç»„ä»¶çš„å®ä¾‹ï¼Œå¹¶æŠŠå®ƒå¤åˆ¶ç»™Bç»„ä»¶çš„inputInstanceå±æ€§ï¼Œç›´æ¥è°ƒç”¨Aç»„ä»¶ä¸­çš„æ–¹æ³•</p><blockquote><p>æ³¨æ„ï¼šåªèƒ½ä½¿ç”¨ç±»ç»„ä»¶å®šä¹‰refå±æ€§ï¼Œè€Œä¸èƒ½ä½¿ç”¨å‡½æ•°ç»„ä»¶å®šä¹‰ref</p></blockquote><h4 id="çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶DomèŠ‚ç‚¹ï¼ˆæš‚æ—¶æœ‰ç‚¹éš¾ç†è§£æ…¢æ…¢æ¶ˆåŒ–ï¼‰"><a href="#çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶DomèŠ‚ç‚¹ï¼ˆæš‚æ—¶æœ‰ç‚¹éš¾ç†è§£æ…¢æ…¢æ¶ˆåŒ–ï¼‰" class="headerlink" title="çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶DomèŠ‚ç‚¹ï¼ˆæš‚æ—¶æœ‰ç‚¹éš¾ç†è§£æ…¢æ…¢æ¶ˆåŒ–ï¼‰"></a>çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶DomèŠ‚ç‚¹ï¼ˆæš‚æ—¶æœ‰ç‚¹éš¾ç†è§£æ…¢æ…¢æ¶ˆåŒ–ï¼‰</h4><p>åœ¨ä¸€äº›åœºæ™¯ä¸­æˆ‘ä»¬å¯èƒ½åœ¨çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æŸä¸ªå…ƒç´ ï¼Œä¾‹å­çˆ¶ç»„ä»¶æƒ³çŸ¥é“è¿™ä¸ªdomçš„å°ºå¯¸æˆ–è€…ä¿¡æ¯ï¼Œç›´æ¥ç”¨refæ˜¯æ— æ³•å®ç°çš„ï¼Œå› ä¸ºrefåªèƒ½è·å–å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œä¸èƒ½è·å–å­ç»„ä»¶ä¸­çš„æŸä¸ªDomå…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Children</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line"><span class="comment">//å­ç»„ä»¶ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„inputRefï¼Œä¸ºinputçš„refèµ‹å€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(props.inputRef);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">è¿™é‡Œè¾“å…¥æ–‡å­—ï¼š</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;props.inputRef&#125; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">inputElement</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(el);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Children</span> <span class="attr">inputRef</span>=<span class="string">&#123;el</span> =&gt;</span> (this.inputElement = el)&#125; /&gt;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Parent;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>refçš„å€¼æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ä¸€ä¸ªå›è°ƒå‡½æ•°</li><li>å›è°ƒå‡½æ•°é€šè¿‡è‡ªå®šä¹‰å±æ€§ä¼ é€’ ä¾‹å­ä¸­çš„inputRef</li><li>çˆ¶ç»„ä»¶çš„å›è°ƒå‡½æ•°ä¸­è·å–è¿™ä¸ªDomå…ƒç´  </li><li>çˆ¶ç»„ä»¶çš„inputElementæŒ‡å‘çš„å­ç»„ä»¶çš„input å…ƒç´ </li></ul><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181213235601.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_é«˜é˜¶ç»„ä»¶</title>
      <link href="2018/12/12/React%E7%B3%BB%E5%88%97_%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"/>
      <url>2018/12/12/React%E7%B3%BB%E5%88%97_%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°<br>é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶<br><a id="more"></a><br>çœ‹ä¸€å¼ å›¾ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181213001205.png"                      alt=""                ></p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦é«˜é˜¶ç»„ä»¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦é«˜é˜¶ç»„ä»¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦é«˜é˜¶ç»„ä»¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦é«˜é˜¶ç»„ä»¶ï¼Ÿ</h2><p>å¤šä¸ªç»„ä»¶éƒ½éœ€è¦æŸä¸ªç›¸åŒçš„åŠŸèƒ½ï¼Œä½¿ç”¨é«˜é˜¶ç»„ä»¶å¯ä»¥å‡å°‘é‡å¤çš„å®ç°</p><h2 id="é«˜é˜¶ç»„ä»¶çš„åº”ç”¨"><a href="#é«˜é˜¶ç»„ä»¶çš„åº”ç”¨" class="headerlink" title="é«˜é˜¶ç»„ä»¶çš„åº”ç”¨"></a>é«˜é˜¶ç»„ä»¶çš„åº”ç”¨</h2><h3 id="ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶"><a href="#ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶" class="headerlink" title="ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶"></a>ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶</h3><blockquote><p>è¿”å›çš„æ–°ç»„ä»¶ç±»ç›´æ¥ç»§æ‰¿è‡ªReact.Componentç±»,æ–°ç»„ä»¶æ‰®æ¼”çš„è§’è‰²ä¼ å…¥å‚ï¼Œæ•°ç»„ä»¶çš„ä¸€ä¸ªä»£ç†,åœ¨æ–°ç»„ä»¶çš„renderå‡½æ•°ä¸­,å°†è¢«åŒ…è£¹ç»„ä»¶æ¸²æŸ“å‡ºæ¥,é™¤äº†é«˜é˜¶ç»„ä»¶è‡ªå·±è¦åšå¾—å·¥ä½œ,å…¶ä½™åŠŸèƒ½å…¨éƒ½è½¬æ‰‹ç»™äº†è¢«åŒ…è£¹çš„ç»„ä»¶</p></blockquote><p>åˆ†ä¸ºï¼š</p><ol><li>æ“çºµProps</li><li>æŠ½å–çŠ¶æ€</li><li>è®¿é—®ref</li><li>åŒ…è£…ç»„ä»¶</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../app.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">WrapperComponent</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="comment">// é€šè¿‡propsé«˜é˜¶ç»„ä»¶åˆ é™¤å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> &#123; age, ...otherProps &#125; = <span class="built_in">this</span>.props;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;div className=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">&lt;div className=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">&lt;span&gt;æç¤º&lt;/span&gt;</span><br><span class="line">&lt;span&gt;X&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;<span class="comment">/* é«˜é˜¶ç»„ä»¶çš„ä¼ å…¥å‚æ•° */</span>&#125;</span><br><span class="line">&lt;WrapperComponent sex=&#123;<span class="string">&#x27;ç”·&#x27;</span>&#125; &#123;...otherProps&#125; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> A;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶"><a href="#ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶" class="headerlink" title="ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶"></a>ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶</h3><blockquote><p>é‡‡ç”¨ç»§æ‰¿å…³è”ä½œä¸ºå‚æ•°çš„ç»„ä»¶å’Œè¿”å›çš„ç»„ä»¶,å‡å¦‚ä¼ å…¥çš„ç»„ä»¶å‚æ•°æ˜¯WrappedComponent ,é‚£ä¹ˆè¿”å›çš„ç»„ä»¶å°±ç›´æ¥ç»§æ‰¿è‡ªWrappedComponent</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modifyPropsHOC = <span class="function"><span class="params">WrappedComponent</span> =&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">newComponent</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> element = <span class="built_in">super</span>.render();</span><br><span class="line"><span class="keyword">const</span> newStyle = &#123;</span><br><span class="line">color: element.type === <span class="string">&#x27;div&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(element.type);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newProps = &#123; ...this.props, <span class="attr">style</span>: newStyle &#125;;</span><br><span class="line"><span class="keyword">return</span> React.cloneElement(element, newProps, element.props.children);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> modifyPropsHOC;</span><br></pre></td></tr></table></figure><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p><a class="link"   href="https://github.com/JasonWilltrue/High-order-components" >GitHubä¾‹å­<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠã€Œä¸Šä¼ ã€è¿™ä»¶äº‹æƒ…</title>
      <link href="2018/12/10/%E8%81%8A%E8%81%8A%E3%80%8C%E4%B8%8A%E4%BC%A0%E3%80%8D%E8%BF%99%E4%BB%B6%E4%BA%8B%E6%83%85/"/>
      <url>2018/12/10/%E8%81%8A%E8%81%8A%E3%80%8C%E4%B8%8A%E4%BC%A0%E3%80%8D%E8%BF%99%E4%BB%B6%E4%BA%8B%E6%83%85/</url>
      
        <content type="html"><![CDATA[<p>å‰ç«¯è¦å®ç°ä¸Šä¼ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹æ³•è§¦å‘ï¼š</p><ol><li>é€šè¿‡input type=â€œfileâ€é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼›</li><li>é€šè¿‡æ‹–æ‹½æ–¹å¼æŠŠæ–‡ä»¶æ‹–è¿‡æ¥ï¼›</li><li>åœ¨ç¼–è¾‘æ¡†é‡Œé¢å¤åˆ¶é»è´´<a id="more"></a></li></ol><h2 id="å…ˆæ¥è®²è®²ç¬¬ä¸€ç§å®ç°"><a href="#å…ˆæ¥è®²è®²ç¬¬ä¸€ç§å®ç°" class="headerlink" title="å…ˆæ¥è®²è®²ç¬¬ä¸€ç§å®ç°"></a>å…ˆæ¥è®²è®²ç¬¬ä¸€ç§å®ç°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;h1&gt;ç‚¹å‡»é€‰æ‹©&lt;/h1&gt;</span><br><span class="line">&lt;form&gt;<span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file-input&quot;</span> <span class="attr">name</span>=<span class="string">&quot;filecontent&quot;</span> /&gt;</span></span>&lt;/form&gt;</span><br><span class="line">&lt;h1&gt;æ‹–æ‹½&lt;/h1&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;img-container&quot;</span>&gt;drop you image here&lt;/div&gt;</span><br><span class="line">&lt;h1&gt;é»è´´&lt;/h1&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;img-paste&quot;</span> contenteditable=<span class="string">&quot;true&quot;</span>&gt;hello,paste you image here&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/form1.png"                      alt="image"                ></p><h2 id="ç”¨FormDataæ¥è·å–æ•´ä¸ªè¡¨å•çš„å†…å®¹ï¼›"><a href="#ç”¨FormDataæ¥è·å–æ•´ä¸ªè¡¨å•çš„å†…å®¹ï¼›" class="headerlink" title="ç”¨FormDataæ¥è·å–æ•´ä¸ªè¡¨å•çš„å†…å®¹ï¼›"></a>ç”¨FormDataæ¥è·å–æ•´ä¸ªè¡¨å•çš„å†…å®¹ï¼›</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#file-input&#x27;</span>).on(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`file name is + <span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.form);</span><br><span class="line"><span class="keyword">let</span> formData = <span class="keyword">new</span> FormData(<span class="built_in">this</span>.form);</span><br><span class="line">formData.append(<span class="string">&#x27;filename&#x27;</span>, <span class="built_in">this</span>.value);</span><br><span class="line"><span class="built_in">console</span>.log(formData);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨formData è·å–çš„this.valueæ˜¯ä¸€ä¸ªå‡çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨æ— æ³•è·å–æ–‡ä»¶çš„çœŸå®å­˜åœ¨åœ°å€ï¼ŒformDataä¹Ÿæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½†å†…å®¹ä¸æ˜¯ç©ºçš„åªæ˜¯å¯¹æˆ‘ä»¬æ¥è¯´çœ‹ä¸è§è€Œå·²ï¼Œåªèƒ½é€šè¿‡appendå»æ·»åŠ å­—æ®µ</p><h2 id="ä½¿ç”¨FileReader"><a href="#ä½¿ç”¨FileReader" class="headerlink" title="ä½¿ç”¨FileReader"></a>ä½¿ç”¨FileReader</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#file-input&#x27;</span>).on(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> fileReader = <span class="keyword">new</span> FileReader();</span><br><span class="line"><span class="keyword">let</span> fileType = <span class="built_in">this</span>.files[<span class="number">0</span>].type;</span><br><span class="line"><span class="built_in">console</span>.log(fileType);</span><br><span class="line"></span><br><span class="line">fileReader.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/^image/</span>.test(fileType)) &#123;</span><br><span class="line">$(<span class="string">`&lt;img src=&quot;<span class="subst">$&#123;<span class="built_in">this</span>.result&#125;</span>&quot; /&gt;`</span>).appendTo(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.files[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//æŒ‰base64æ–¹å¼è¯»å–</span></span><br><span class="line">fileReader.readAsDataURL(<span class="built_in">this</span>.files[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//äºŒè¿›åˆ¶æ–¹å¼è¯»å– è¯»å–ç»“æœç›´æ¥è½¬æˆæ•°ç»„</span></span><br><span class="line">fileReader.readAsArrayBuffer(<span class="built_in">this</span>.files[<span class="number">0</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/filereader.png"                      alt="image"                ><br>é€šè¿‡å®ä¾‹åŒ–fileReaderå¯ä»¥çœ‹è§ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œæ–‡ä»¶åï¼Œæ–‡ä»¶çš„å¤§å°ï¼Œæ–‡ä»¶çš„ç±»å‹</p><h2 id="æ‹–æ‹½å›¾ç‰‡è·å–å›¾ç‰‡è·¯å¾„"><a href="#æ‹–æ‹½å›¾ç‰‡è·å–å›¾ç‰‡è·¯å¾„" class="headerlink" title="æ‹–æ‹½å›¾ç‰‡è·å–å›¾ç‰‡è·¯å¾„"></a>æ‹–æ‹½å›¾ç‰‡è·å–å›¾ç‰‡è·¯å¾„</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;.img-container&#x27;</span>)</span><br><span class="line">.on(<span class="string">&#x27;dragover&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">event.preventDefault();</span><br><span class="line">&#125;)</span><br><span class="line">.on(<span class="string">&#x27;drop&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">event.stopPropagation();</span><br><span class="line">event.preventDefault();</span><br><span class="line"><span class="keyword">let</span> fileReader = <span class="keyword">new</span> FileReader();</span><br><span class="line"><span class="keyword">let</span> file = event.originalEvent.dataTransfer.files[<span class="number">0</span>];</span><br><span class="line">fileReader.readAsDataURL(file);</span><br><span class="line"><span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line"><span class="built_in">console</span>.log(file);</span><br><span class="line">formData.append(<span class="string">&#x27;filecontent&#x27;</span>, file);</span><br><span class="line"><span class="built_in">console</span>.log(formData); <span class="comment">//è¯»ä¸å‡ºçš„</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡å¤åˆ¶æ¥è·å–å›¾ç‰‡è·¯å¾„"><a href="#é€šè¿‡å¤åˆ¶æ¥è·å–å›¾ç‰‡è·¯å¾„" class="headerlink" title="é€šè¿‡å¤åˆ¶æ¥è·å–å›¾ç‰‡è·¯å¾„"></a>é€šè¿‡å¤åˆ¶æ¥è·å–å›¾ç‰‡è·¯å¾„</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;.img-paste&#x27;</span>).on(<span class="string">&#x27;paste&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">event.stopPropagation();</span><br><span class="line">event.preventDefault();</span><br><span class="line"><span class="comment">//é»è´´çš„æ•°æ®åœ¨event.clipboardData.filesä¸­</span></span><br><span class="line"><span class="keyword">let</span> file = event.originalEvent.clipboardData.files[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">console</span>.log(file);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="ç»§ç»­å†™ä¸Šä¼ "><a href="#ç»§ç»­å†™ä¸Šä¼ " class="headerlink" title="ç»§ç»­å†™ä¸Šä¼ "></a>ç»§ç»­å†™ä¸Šä¼ </h2><p>ä»€ä¹ˆæ˜¯blobï¼Ÿå¦‚ä½•è¯»å–blob?</p><h2 id="å¤šæ–‡ä»¶ä¸Šä¼ "><a href="#å¤šæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å¤šæ–‡ä»¶ä¸Šä¼ "></a>å¤šæ–‡ä»¶ä¸Šä¼ </h2><p>input å±æ€§ä¸­å¢åŠ  mulitple</p><h2 id="å¦‚ä½•å®ç°æ–­ç‚¹ç»­ä¼ ï¼Ÿ"><a href="#å¦‚ä½•å®ç°æ–­ç‚¹ç»­ä¼ ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°æ–­ç‚¹ç»­ä¼ ï¼Ÿ"></a>å¦‚ä½•å®ç°æ–­ç‚¹ç»­ä¼ ï¼Ÿ</h2><p>æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨blobåˆ†å‰²å¤§æ–‡ä»¶ä¸Šä¼ <br>æ¯”å¦‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§»åŠ¨ç«¯çš„é‚£äº›äº‹</title>
      <link href="2018/12/01/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
      <url>2018/12/01/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç°å¦‚ä»Šçš„å‰ç«¯å¼€å‘ä¸­ç§»åŠ¨ç«¯å¼€å‘çš„ä»½é¢å·²å¤§å¤§è¶…è¿‡äº†PCç«¯å¼€å‘ï¼ŒæŒæ¡ç§»åŠ¨ç«¯å¼€å‘æŠ€å·§å¯¹å‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´çœŸçš„éå¸¸æœ‰å¿…è¦<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190104140855.png"                      alt=""                ></p><ol><li>viewport è§†å£(å¯è§†åŒºçª—å£)</li><li>é»˜è®¤ä¸è®¾ç½®viewportä¸€èˆ¬å¯è§†åŒºå®½åº¦åœ¨ç§»åŠ¨ç«¯æ˜¯980</li><li>width å¯è§†åŒºçš„å®½åº¦ (number||device-width)</li><li>user-scalable æ˜¯å¦å…è®¸ç”¨æˆ·ç¼©æ”¾ (yes||no) iOS10æ— æ•ˆ (æˆ‘ä»¬æ”¾åœ¨äº‹ä»¶ç« èŠ‚è§£å†³)</li><li>initial-scale åˆå§‹ç¼©æ”¾æ¯”ä¾‹</li><li>minimum-scale æœ€å°ç¼©æ”¾æ¯”ä¾‹</li><li>maximum-scale æœ€å¤§ç¼©æ”¾æ¯”ä¾‹</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pixRatio = <span class="number">1</span> / <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åƒç´ æ¯”ï¼š&#x27;</span> + pixRatio, <span class="built_in">window</span>.devicePixelRatio);</span><br><span class="line"><span class="keyword">var</span> html = <span class="built_in">document</span>.documentElement;</span><br><span class="line"><span class="built_in">document</span>.write(</span><br><span class="line"><span class="string">&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=&#x27;</span> +</span><br><span class="line">pixRatio +</span><br><span class="line"><span class="string">&#x27;,minimum-scale=&#x27;</span> +</span><br><span class="line">pixRatio +</span><br><span class="line"><span class="string">&#x27;,maximum-scale=&#x27;</span> +</span><br><span class="line">pixRatio +</span><br><span class="line"><span class="string">&#x27;&quot;&gt;&#x27;</span></span><br><span class="line">);</span><br><span class="line">html.style.fontSize = html.clientWidth / <span class="number">25</span> + <span class="string">&#x27;px&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>åƒç´ æ¯”æŠŠä¸€ä¸ªåƒç´  æ”¾å¤§è‡³ Nä¸ªåƒç´ å»æ˜¾ç¤º </p></blockquote><p>è®¾è®¡å›¾æœ€å°‘750 </p><h2 id="å…¶ä»–å¦å¤–çš„è®¾ç½®"><a href="#å…¶ä»–å¦å¤–çš„è®¾ç½®" class="headerlink" title="å…¶ä»–å¦å¤–çš„è®¾ç½®"></a>å…¶ä»–å¦å¤–çš„è®¾ç½®</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190104132638.png"                      alt=""                ></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;tel:18888888888&quot;</span>&gt;</span>è¯·æ‹¨æ‰“ç”µè¯18888888888<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:motao@motao.com&quot;</span>&gt;</span>è¯·å‘é€é‚®ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190104133357.png"                      alt=""                ></p><h2 id="æŒ‰é’®åœ†è§’çš„æ¸…é™¤"><a href="#æŒ‰é’®åœ†è§’çš„æ¸…é™¤" class="headerlink" title="æŒ‰é’®åœ†è§’çš„æ¸…é™¤"></a>æŒ‰é’®åœ†è§’çš„æ¸…é™¤</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>, </span><br><span class="line"><span class="selector-tag">input</span>, </span><br><span class="line"><span class="selector-tag">button</span>&#123;</span><br><span class="line">-webkit-tap-highlight-<span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span>, </span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">-webkit-appearance: none;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="2018/11/16/React%E7%B3%BB%E5%88%97_%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>2018/11/16/React%E7%B3%BB%E5%88%97_%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<p>React ç”Ÿå‘½å‘¨æœŸä¼šç»å†ä¸‰ä¸ªè¿‡ç¨‹ï¼Ÿ</p><ol><li>æŒ‚è½½è¿‡ç¨‹</li><li>è¿è¡Œæ—¶è¿‡ç¨‹</li><li>å¸è½½è¿‡ç¨‹</li><li>é”™è¯¯å¤„ç† errorHandingï¼ˆåªå‘ç”Ÿåœ¨ render é˜¶æ®µï¼‰<a id="more"></a></li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181214134520.png"                      alt="ç”Ÿå‘½å‘¨æœŸå›¾"                ></p><h3 id="å…ˆæ¥çœ‹ä¸‹è£…è½½è¿‡ç¨‹"><a href="#å…ˆæ¥çœ‹ä¸‹è£…è½½è¿‡ç¨‹" class="headerlink" title="å…ˆæ¥çœ‹ä¸‹è£…è½½è¿‡ç¨‹"></a>å…ˆæ¥çœ‹ä¸‹è£…è½½è¿‡ç¨‹</h3><ol><li>constructor</li><li>componentWillMont</li><li>render</li><li>componentDidMont</li></ol><h4 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331172732.png"                      alt=""                ></p><p>render è°ƒç”¨åï¼ŒcomponentDidMont å‡½æ•°ä¸ä¼šé©¬ä¸Šè¢«è°ƒç”¨ï¼Œrender å‡½æ•°è¿”å›çš„ä¸œè¥¿(jsx è¡¨ç¤ºçš„å¯¹è±¡)å·²ç»åœ¨æ¸²æŸ“ï¼Œç»„ä»¶å·²ç»è¢«è£…è½½åˆ°äº† Dom æ ‘ä¸Š</p><p>å¦‚æœæœ‰ä¸‰ä¸ªç»„ä»¶ A,B,C è¦ä¸‰ä¸ªç»„ä»¶å…¨éƒ¨ render ä»¥åæ‰èƒ½è°ƒç”¨ componentDidMont æ–¹æ³•ï¼Œå› ä¸º react è‚¯å®šè¦æŠŠæ‰€æœ‰ç»„ä»¶å…¨éƒ¨è¿”å›ç»“æœç»¼åˆèµ·æ¥æ‰çŸ¥é“å¦‚ä½•æ¸²æŸ“</p><p>cwm ä¸ cdm è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼šcwm å¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–æµè§ˆå™¨ç«¯è°ƒç”¨ï¼ŒcomponentDidMont åªèƒ½åœ¨æµè§ˆå™¨ç«¯è°ƒç”¨ï¼›</p><h3 id="æ›´æ–°è¿‡æœŸ"><a href="#æ›´æ–°è¿‡æœŸ" class="headerlink" title="æ›´æ–°è¿‡æœŸ"></a>æ›´æ–°è¿‡æœŸ</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331172907.png"                      alt=""                ></p><ol><li>componentWillReceiveProps</li><li>shouldComponentUpdate</li><li>componentWillUpdate</li><li>render</li><li>componentDidUpdate</li></ol><p>å¦‚æœ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate () &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;List+shouldComponentUpdate&#x27;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331173419.png"                      alt=""                ></p><h4 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps"></a>componentWillReceiveProps</h4><p>è¡¨ç¤ºè¿™ä¸ªåªåœ¨ props å¼•èµ·çš„ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ‰ä¼šè¢«è°ƒç”¨ï¼Œstate çš„æ›´æ–°ä¸ä¼šè¢«è§¦å‘ï¼Œå‚æ•° nextProps æ˜¯çˆ¶ç»„ä»¶ä¼ é€’åˆ°å½“å‰ç»„ä»¶çš„æ–° propsï¼Œéœ€è¦æ¯”è¾ƒ nextprops ä¸å½“å‰ props æ˜¯å¦ç›¸ç­‰ï¼Œæ‰å†³å®šæ˜¯å¦æ‰§è¡Œ props å˜åŒ–åçš„é€»è¾‘ï¼Œæ¯”å¦‚æ›´æ–°æ–°çš„ props è°ƒç”¨ this.setState è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</p><blockquote><p>æ³¨æ„ï¼šåœ¨æ­¤æ–¹æ³•ä¸­è°ƒç”¨ renderï¼Œåªæœ‰åœ¨ç»„ä»¶ render åŠå…¶åçš„æ–¹æ³•ä¸­ï¼Œthis.state æ‰æŒ‡å‘æ›´æ–°åçš„ stateï¼Œåœ¨ render ä¹‹å‰çš„æ–¹æ³• shouldComponentUpdateï¼ŒcomponentWillUpdate ä¸­ï¼Œthis.state ä¾ç„¶æŒ‡å‘çš„æ›´æ–°å‰çš„ state</p></blockquote><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ componentWillReceiveProps ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯æ²¡ç”¨çš„ï¼Œå³å¯ä»¥ç•¥å»ä¸å†™ï¼Œ</p><p>ä½†æ˜¯åœ¨ constructor å‡½æ•°ä¸­åˆå§‹åŒ–äº†æŸä¸ª stateï¼Œå¿…é¡»ç”¨ componentWillReceiveProps æ¥æ›´æ–° stateï¼Œä¸å¯çœå»ï¼Œå¦åˆ™ render ä¸­çš„ state å°†å¾—ä¸åˆ°æ›´æ–°ã€‚<br>åŒæ—¶å¦‚æœæ‚¨æƒ³åœ¨å­ç»„ä»¶ç›‘å¬ watch å€¼å˜åŒ–åšå¤„ç†ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ° componentWillReceiveProps</p><p>ä½¿ç”¨ componentWillReceiveProps çš„æ—¶å€™ï¼Œä¸è¦å»å‘ä¸Šåˆ†å‘ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶çš„ç›¸å…³ setState æ–¹æ³•ï¼Œå¦åˆ™ä¼šæˆä¸ºæ­»å¾ªç¯</p><h4 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h4><p>è¡¨ç¤ºæ˜¯å¦ç»§ç»­æ‰§è¡Œæ›´æ–°çš„è¿‡ç¨‹ï¼Œå½“è¿”å› trueï¼ˆé»˜è®¤è¿”å›å€¼ï¼‰ç»„ä»¶ä¼šç»§ç»­æ›´æ–°ï¼Œå½“è¿”å› false åˆ™ç»„ä»¶æ›´æ–°åœæ­¢ï¼Œåç»­çš„ cwillupdate å’Œ render å’Œ cdidupdate éƒ½ä¸ä¼šè¢«è°ƒç”¨ï¼Œå‚æ•° nextPropsã€‚<br>nextState ä¸ç»„ä»¶å½“å‰çš„ props å’Œ state æ¯”è¾ƒï¼Œå‡å°‘ç»„ä»¶çš„æ¸²æŸ“ï¼Œä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½,<br>ä½†ä¸€èˆ¬ä¸å»ºè®®è¿™ä¹ˆåšï¼šåŸå› æ˜¯ ç»„ä»¶åœ¨ render ä¸­è¿˜æ˜¯ä¼š diff æ¯”è¾ƒç»„ä»¶ä¹‹é—´çš„ä¸åŒ</p><h4 id="componentWillUpdate"><a href="#componentWillUpdate" class="headerlink" title="componentWillUpdate"></a>componentWillUpdate</h4><p>è¡¨ç¤ºåœ¨ render è°ƒç”¨å‰æ‰§è¡Œï¼Œå¯ä»¥ä½œä¸ºç»„ä»¶æ›´æ–°å‘ç”Ÿå‰æ‰§è¡ŒæŸäº›å·¥ä½œçš„åœ°æ–¹ï¼Œï¼ˆå¾ˆå°‘ç”¨åˆ°ï¼‰</p><h4 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate"></a>componentDidUpdate</h4><p>è¡¨ç¤ºç»„ä»¶æ›´æ–°åè¢«è°ƒç”¨ï¼Œæœ‰ 2 ä¸ªå‚æ•° prevProps preState è¡¨ç¤ºæ›´æ–°å‰çš„çŠ¶æ€å€¼ï¼Œå¯ä»¥ç”¨æ¥æ“ä½œæ›´æ–°åçš„ Dom åœ°æ–¹ï¼Œ</p><h3 id="å¸è½½è¿‡æœŸ"><a href="#å¸è½½è¿‡æœŸ" class="headerlink" title="å¸è½½è¿‡æœŸ"></a>å¸è½½è¿‡æœŸ</h3><h4 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h4><p>åœ¨ cwu ä¸­ç”¨é react æ–¹æ³•åˆ›é€ çš„ dom å…ƒç´ ï¼Œå¦‚æœæ’’æ‰‹ä¸ç®¡çš„è¯ï¼Œå¾ˆå¯èƒ½é€ æˆå†…å­˜æ³„éœ²ï¼Œå¿…é¡»åœ¨ cwu ä¸­æŠŠè¿™äº› dom å…ƒç´ æ¸…ç†æ‰ï¼›<br>æ¯”å¦‚æ¸…é™¤ä¸€äº›ä¸å¿…è¦çš„å®šæ—¶å™¨ï¼Œæ¸…é™¤ componentWillMont æ‰‹åŠ¨åˆ›å»ºçš„ Dom å…ƒç´ é¿å…å†…å­˜æ³„éœ²</p><blockquote><p>æ³¨æ„ï¼šåªæœ‰ç±»ç»„ä»¶æ‰æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p></blockquote><table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸ</th><th>è°ƒç”¨æ¬¡æ•°</th></tr></thead><tbody><tr><td>getDefaultProps</td><td>è°ƒç”¨ 1 æ¬¡</td></tr><tr><td>getInitialState</td><td>è°ƒç”¨ 1 æ¬¡</td></tr><tr><td>componentWillMount</td><td>è°ƒç”¨ 1 æ¬¡</td></tr><tr><td>render</td><td>è°ƒç”¨&gt;=1 æ¬¡</td></tr><tr><td>componentDidMount</td><td>ä»…å®¢æˆ·ç«¯ï¼Œè°ƒç”¨ 1 æ¬¡</td></tr><tr><td>componentWillReceiveProps</td><td>è°ƒç”¨&gt;=0 æ¬¡</td></tr><tr><td>ShouldComponentUpdate</td><td>è°ƒç”¨&gt;=0 æ¬¡</td></tr><tr><td>componentWillUpdate</td><td>è°ƒç”¨&gt;=0 æ¬¡</td></tr><tr><td>render</td><td>è°ƒç”¨&gt;=1 æ¬¡</td></tr><tr><td>componentDidUpdate</td><td>è°ƒç”¨&gt;=0 æ¬¡</td></tr><tr><td>componentWillUnmount</td><td>è°ƒç”¨ 1 æ¬¡</td></tr></tbody></table><h1 id="æ›´æ–°-react16-3-ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#æ›´æ–°-react16-3-ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ›´æ–° react16.3 ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸ"></a>æ›´æ–° react16.3 ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸ</h1><p>react16.3 æ–°å¢äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p><ol><li>getDerivedStateFromProps</li><li>getSnapshotBeforeUpdate</li></ol><p>åŒæ—¶ FB å£°æ˜åœ¨ react17 å°†åˆ é™¤ï¼š</p><ol><li>componentWillMountã€</li><li>componentWillReceivePropsã€</li><li>componentWillUpdate</li></ol><p>åœ¨ 16.3 çš„ç‰ˆæœ¬ä¸­å°†ä¿ç•™è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œå¹¶æ·»åŠ äº†åˆ«åï¼š</p><ol><li>UNSAFE_componentWillMount</li><li>UNSAFE_componentWillReceiveProps</li><li>UNSAFE_componentWillUpdate</li></ol><p>åœ¨æ­¤æˆ‘ä»¬ä¸»è¦ä»‹ç»</p><ol><li>getDerivedStateFromProps</li><li>getSnapshotBeforeUpdate</li></ol><p>getDerivedStateFromProps(nextProps, prevState)ï¼šä» props æ´¾ç”Ÿå‡º state</p><ul><li>æ‰§è¡Œæ¬¡æ•°ï¼šå¤šæ¬¡</li><li>è§¦å‘æ¡ä»¶ï¼šç»„ä»¶å®ä¾‹åŒ–åŠæ¥æ”¶æ–° props åè°ƒç”¨</li><li>æ›¿ä»£ï¼šæ›¿ä»£åŸæ¥çš„ componentWillReceivePropsï¼Œå¹¶ä¸”åŠ è½½ç¬¬ä¸€æ¬¡æ—¶ä¹Ÿè°ƒç”¨<br>åˆå§‹åŒ–çš„æ—¶å€™<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331233644.png"                      alt=""                ></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">todoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;constructor&#x27;</span>);</span><br><span class="line"> <span class="built_in">super</span>(props)</span><br><span class="line"> <span class="built_in">this</span>.state=&#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">static</span> getDerivedStateFromProps (props, state)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;getDerivedStateFromProps&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(props);</span><br><span class="line"><span class="built_in">console</span>.log(state);</span><br><span class="line"> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331233453.png"                      alt="æ›´æ–°å¯èƒ½å¸¦æ¥çš„æ€§èƒ½é—®é¢˜"                ><br>ä¸ºä»€ä¹ˆè¦ç”¨<code>static</code>ï¼Ÿ<br><code>static</code> æ˜¯ ES6 çš„å†™æ³•ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¸º static æ—¶ï¼Œå°±æ„å‘³ç€æ— æ³•é€šè¿‡ this è°ƒç”¨æˆ‘ä»¬åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼ˆåŸç†å’Œ js ä¸­åŸå‹é“¾ç»§æ‰¿ç›¸å…³ï¼Œå…·ä½“æˆ‘å°±ä¸è¯´äº†ï¼Œå¯è‡ªè¡Œæœç´¢ï¼‰ã€‚</p><p>ä¸è¶³ä¹‹å¤„ï¼š<br>åœ¨<code>getDerivedStateFromProps</code>ä¸­ï¼Œåœ¨æ¡ä»¶é™åˆ¶ä¸‹(if/else)è°ƒç”¨ setStateã€‚å¦‚æœä¸è®¾ä»»ä½•æ¡ä»¶ setStateï¼Œè¿™ä¸ªå‡½æ•°è¶…é«˜çš„è°ƒç”¨é¢‘ç‡ï¼Œä¸åœçš„ setStateï¼Œä¼šå¯¼è‡´é¢‘ç¹çš„é‡ç»˜ï¼Œæ—¢æœ‰å¯èƒ½äº§ç”Ÿæ€§èƒ½é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå®¹æ˜“äº§ç”Ÿ bugã€‚</p><p>getSnapshotBeforeUpdate(nextProps, prevState)ï¼šä» props æ´¾ç”Ÿå‡º state</p><ul><li>æ‰§è¡Œæ¬¡æ•°ï¼šå¤šæ¬¡</li><li>è§¦å‘æ¡ä»¶ï¼šç»„ä»¶ render æ—¶è°ƒç”¨</li><li>è¿”å›å€¼ï¼šè¿”å›å€¼ä¼ é€’ç»™ componentDidUpdate(prevProps, prevState, snapshot)</li><li>æ›¿ä»£ï¼šæ›¿ä»£åŸæ¥çš„ componentWillupdate</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getSnapshotBeforeUpdate (prevProps, prevState) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;getSnapshotBeforeUpdate&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(prevProps);</span><br><span class="line">    <span class="built_in">console</span>.log(prevState);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><code>getSnapshotBeforeUpdate</code> æ˜¯åœ¨ render ä¹‹åè§¦å‘ï¼Œå®ƒçš„è¦ç‚¹åœ¨äºè§¦å‘æ—¶ï¼ŒDom è¿˜æ²¡æœ‰æ›´æ–°ï¼Œå¼€å‘è€…å¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œè¿”å›å€¼ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™æ¥ä¸‹æ¥å°†è¦è§¦å‘çš„ componentDidUpdateã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190331234539.png"                      alt=""                ></p><p>ä½œä¸ºä¸€ä¸ªä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒgetSnapshotBeforeUpdate React 16 ç»™çš„å»ºè®®å½“ç„¶è¿˜æ˜¯ï¼š<code>èƒ½ä¸ç”¨å°±å°½é‡ä¸è¦ç”¨</code>ã€‚ - - ï¼ï¼ï¼</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20181214134457.png"                      alt=""                ></p><h2 id="æœ€åå°ç»“ï¼š"><a href="#æœ€åå°ç»“ï¼š" class="headerlink" title="æœ€åå°ç»“ï¼š"></a>æœ€åå°ç»“ï¼š</h2><p>åˆ°ç›®å‰ä¸ºæ­¢(React 16.4)ï¼ŒReact çš„æ¸²æŸ“æœºåˆ¶éµå¾ªåŒæ­¥æ¸²æŸ“:</p><ol><li>é¦–æ¬¡æ¸²æŸ“: willMount &gt; render &gt; didMountï¼Œ</li><li>props æ›´æ–°æ—¶: receiveProps &gt; shouldUpdate &gt; willUpdate &gt; render &gt; didUpdate</li><li>state æ›´æ–°æ—¶: shouldUpdate &gt; willUpdate &gt; render &gt; didUpdate</li><li>å¸è½½æ—¶: willUnmount</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://blog.csdn.net/Napoleonxxx/article/details/81120854" >React v15 åˆ° v16.3, v16.4 æ–°ç”Ÿå‘½å‘¨æœŸæ€»ç»“ä»¥åŠä½¿ç”¨åœºæ™¯<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.cnblogs.com/soyxiaobi/p/9559117.html" >React ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºè¯¦è§£<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_propä¸state</title>
      <link href="2018/11/15/React%E7%B3%BB%E5%88%97_prop%E4%B8%8Estate/"/>
      <url>2018/11/15/React%E7%B3%BB%E5%88%97_prop%E4%B8%8Estate/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯Propï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Propï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Propï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Propï¼Ÿ</h3><p>åœ¨Reactä¸­ï¼Œä»å¤–éƒ¨ä¼ é€’ç»™ç»„ä»¶çš„æ•°æ®ï¼Œä¸€ä¸ªreactç»„ä»¶é€šè¿‡å®šä¹‰è‡ªå·±èƒ½æ¥å—çš„propå°±å®šä¹‰äº†è‡ªå·±çš„å¯¹å¤–å…¬å…±æ¥å£ï¼›<br><a id="more"></a></p><p>propå¾ˆåƒHTMLä¸­çš„å±æ€§ï¼›å½“propç±»å‹ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¿…é¡»ç”¨èŠ±æ‹¬å·<code>&#123;&#125;</code>æŠŠpropåŒ…ä½ï¼Œstyleçš„å€¼è¦2å±‚èŠ±æ‹¬å·ï¼Œå¤–å±‚èŠ±æ‹¬å·ä»£è¡¨jsxè¯­æ³•ï¼Œå†…å±‚èŠ±æ‹¬å·ä»£è¡¨ä¸€ä¸ªå¯¹è±¡å¸¸é‡</p><h3 id="ä¼ å€¼"><a href="#ä¼ å€¼" class="headerlink" title="ä¼ å€¼"></a>ä¼ å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">           &lt;Counter caption=<span class="string">&quot;First&quot;</span> initValue=&#123;<span class="number">0</span>&#125; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(props)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">this</span>.state=&#123;</span><br><span class="line">        count:props.initValue || <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">const</span> &#123;caption&#125; = <span class="built_in">this</span>.props; <span class="comment">//ES6è§£æ„èµ‹å€¼</span></span><br><span class="line">        renturn(</span><br><span class="line">           ......</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰<code>super(props)</code>æ˜¯ä¸èƒ½ä½¿ç”¨this.propsèµ‹å€¼çš„ï¼Œå› ä¸ºç±»å®ä¾‹æ— æ³•è®¿é—®çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„props</p><h3 id="ä»€ä¹ˆæ˜¯stateï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯stateï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯stateï¼Ÿ"></a>ä»€ä¹ˆæ˜¯stateï¼Ÿ</h3><p>stateæ˜¯ç»„ä»¶å†…éƒ¨çŠ¶æ€<br>æ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.state=&#123;</span><br><span class="line">        count:props.initValue || <span class="number">0</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨defaultPropsæ¥åˆå§‹åŒ–å†…éƒ¨çŠ¶æ€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Counter.defaultProps=&#123;</span><br><span class="line">    initValue:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¯»å–å’Œæ›´æ–°å†…éƒ¨çŠ¶æ€"><a href="#è¯»å–å’Œæ›´æ–°å†…éƒ¨çŠ¶æ€" class="headerlink" title="è¯»å–å’Œæ›´æ–°å†…éƒ¨çŠ¶æ€"></a>è¯»å–å’Œæ›´æ–°å†…éƒ¨çŠ¶æ€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newCount = <span class="built_in">this</span>.state.count;</span><br><span class="line"><span class="built_in">this</span>.setstate(&#123;</span><br><span class="line">    </span><br><span class="line">    count:newCount,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„setstateæ˜¯ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œåé¢å¯ä»¥è·Ÿä¸€ä¸ªå›è°ƒå‡½æ•°<br>æ¯”å¦‚:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newCount = <span class="built_in">this</span>.state.count;</span><br><span class="line"><span class="built_in">this</span>.setstate(&#123;</span><br><span class="line">    </span><br><span class="line">    count:newCount,</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//è¯·æ±‚æ”¹å˜æ•°æ®</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="propsä¸reactçš„ç®€å•å¯¹æ¯”"><a href="#propsä¸reactçš„ç®€å•å¯¹æ¯”" class="headerlink" title="propsä¸reactçš„ç®€å•å¯¹æ¯”"></a>propsä¸reactçš„ç®€å•å¯¹æ¯”</h3><ol><li>propå®šä¹‰å¤–éƒ¨æ¥å£ï¼Œstateæ˜¯è®°å½•å†…éƒ¨çŠ¶æ€ï¼›</li><li>propçš„èµ‹å€¼åœ¨å¤–éƒ¨ä¸–ç•Œä½¿ç”¨ç»„ä»¶æ—¶ï¼Œstateçš„èµ‹å€¼åœ¨ç»„ä»¶å†…éƒ¨ï¼›</li><li>ç»„ä»¶ä¸åº”è¯¥æ”¹å˜propçš„å€¼ï¼Œè€Œstateå­˜åœ¨çš„ç›®çš„æ˜¯è®©ç»„ä»¶æ¥æ”¹å˜ï¼›</li></ol>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactç³»åˆ—_JSX</title>
      <link href="2018/11/14/React%E7%B3%BB%E5%88%97_JSX/"/>
      <url>2018/11/14/React%E7%B3%BB%E5%88%97_JSX/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯JSX"><a href="#ä»€ä¹ˆæ˜¯JSX" class="headerlink" title="ä»€ä¹ˆæ˜¯JSX?"></a>ä»€ä¹ˆæ˜¯JSX?</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><a id="more"></a><ol><li>jsxä»£ç çœ‹èµ·æ¥å’ŒHTMLä»£ç ä¸€æ¨¡ä¸€æ ·,ä½†2è€…æœ‰ä¸åŒä¹‹å¤„</li><li>jsxå…ƒç´ ä¸å±€é™htmlå…ƒç´  å¯ä»¥ä»»ä½•ä¸€ä¸ªreactç»„ä»¶</li><li>Reactåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯htmlè¿˜æ˜¯reactç»„ä»¶çœ‹ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯å¦å¤§å†™</li><li>JSXè¯­å¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªè¿ç”¨HTMLæ ‡ç­¾ç»“æ„å´å®ç°äº†javascriptè¯­æ³•çš„å¯¹è±¡ï¼Œä¸€å¥è¯ï¼Œç®€ç›´é£èµ·</li></ol><h3 id="jsxç”¨æ³•ï¼š"><a href="#jsxç”¨æ³•ï¼š" class="headerlink" title="jsxç”¨æ³•ï¼š"></a>jsxç”¨æ³•ï¼š</h3><p>åœ¨JSXä¸­å¯ä»¥åŠ å…¥è¡¨è¾¾å¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> use = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  firstName: <span class="string">&#x27;tm7&#x27;</span>,</span><br><span class="line">  lastName: <span class="string">&#x27;jxy&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatName</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> user.firstName + <span class="string">&#x27; &#x27;</span> + user.lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> t1 = <span class="number">1</span>, t2 = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#x27;abc&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> a = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;use&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;user.firstName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;formatName(user)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> d = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;1+1+1&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> e = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;t1 &amp;&amp; t2&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> f = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;t1 &gt; t2&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> g = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;t1 &lt; t2 ? &#x27;abc&#x27;:&#x27;ccc&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> h = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;function()&#123;return &#x27;abc&#x27;;&#125;()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> i = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;<span class="tag">&lt;<span class="name">div</span>&gt;</span>iii<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><h3 id="å¯ä»¥åŠ å…¥è‡ªå®šä¹‰å±æ€§"><a href="#å¯ä»¥åŠ å…¥è‡ªå®šä¹‰å±æ€§" class="headerlink" title="å¯ä»¥åŠ å…¥è‡ªå®šä¹‰å±æ€§"></a>å¯ä»¥åŠ å…¥è‡ªå®šä¹‰å±æ€§</h3><p>ä¾‹å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> el = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-fff</span>=<span class="string">&quot;abc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;  <span class="comment">//å¿…é¡»åŠ data-</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> el = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;abc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> el = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">abc</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><h3 id="æœ€åçœ‹ä¸€ä¸‹JSX-æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç»è¿‡-babel-è½¬æ¢ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å‘ç°å®é™…ä¸Šè½¬åŒ–æˆ-React-createElement-çš„å½¢å¼ï¼š"><a href="#æœ€åçœ‹ä¸€ä¸‹JSX-æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç»è¿‡-babel-è½¬æ¢ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å‘ç°å®é™…ä¸Šè½¬åŒ–æˆ-React-createElement-çš„å½¢å¼ï¼š" class="headerlink" title="æœ€åçœ‹ä¸€ä¸‹JSX æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç»è¿‡ babel è½¬æ¢ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å‘ç°å®é™…ä¸Šè½¬åŒ–æˆ React.createElement() çš„å½¢å¼ï¼š"></a>æœ€åçœ‹ä¸€ä¸‹JSX æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç»è¿‡ babel è½¬æ¢ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å‘ç°å®é™…ä¸Šè½¬åŒ–æˆ React.createElement() çš„å½¢å¼ï¼š</h3><p>æ¯ä¸€ä¸ªå‚æ•°åˆ†åˆ«å¯¹åº”[æ ‡ç­¾åï¼Œå±æ€§ï¼Œå­©å­èŠ‚ç‚¹]<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> el = (</span><br><span class="line">  &lt;h1 className=<span class="string">&quot;greeting&quot;</span>&gt;</span><br><span class="line">    Hello,</span><br><span class="line">    &lt;span className=<span class="string">&quot;text&quot;</span>&gt; world!&lt;/span&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//==========babelç¼–è¯‘å==============</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> el = React.createElement(</span><br><span class="line">  <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">&quot;greeting&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;Hello,&quot;</span>,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">&quot;span&quot;</span>,</span><br><span class="line">    &#123; <span class="attr">className</span>: <span class="string">&quot;text&quot;</span> &#125;,</span><br><span class="line">    <span class="string">&quot; world!&quot;</span></span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br>å› æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šJSX è¯­æ³•ç³–ç»è¿‡ Babel ç¼–è¯‘åè½¬æ¢æˆä¸€ç§å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å³æ‰€è°“çš„è™šæ‹Ÿ DOMï¼Œä½¿ç”¨è™šæ‹Ÿ DOM èƒ½è®©é¡µé¢è¿›è¡Œæ›´ä¸ºé«˜æ•ˆçš„æ¸²æŸ“ã€‚</p><h3 id="è™šæ‹Ÿ-DOM-è½¬åŒ–ä¸ºçœŸå®-DOM"><a href="#è™šæ‹Ÿ-DOM-è½¬åŒ–ä¸ºçœŸå®-DOM" class="headerlink" title="è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOM"></a>è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOM</h3><p>å°†è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOM æ˜¯ä½¿ç”¨ ReactDOM.render å®ç°çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  element, <span class="comment">// ä¸Šæ–‡çš„ elementï¼Œå³è™šæ‹Ÿ dom</span></span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ€»ç»“<br>JSX ç»è¿‡ babel ç¼–è¯‘ä¸º React.createElement() çš„å½¢å¼ï¼Œå…¶è¿”å›ç»“æœå°±æ˜¯ Virtual DOMï¼Œæœ€åé€šè¿‡ ReactDOM.render() å°† Virtual DOM è½¬åŒ–ä¸ºçœŸå®çš„ DOM å±•ç°åœ¨ç•Œé¢ä¸Šã€‚æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181121/100718809.png"                      alt="mark"                ></p><p>â€¦..æš‚æ—¶æƒ³åˆ°è¿™å‡ ç‚¹ä¸å…¨é¢,è¿˜ä¼šä¸æ–­è¡¥å……</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å®ç°ä¸‹Promiseçš„åŸç†</title>
      <link href="2018/11/13/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%8BPromise%E7%9A%84%E5%8E%9F%E7%90%86/"/>
      <url>2018/11/13/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%8BPromise%E7%9A%84%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p></blockquote><a id="more"></a><h3 id="promiseçš„ç®€å•ä½¿ç”¨"><a href="#promiseçš„ç®€å•ä½¿ç”¨" class="headerlink" title="promiseçš„ç®€å•ä½¿ç”¨"></a>promiseçš„ç®€å•ä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œå®Œæˆ&#x27;</span>);</span><br><span class="line">        resolve(<span class="string">&#x27;éšä¾¿ä»€ä¹ˆæ•°æ®&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸€æ­¥ä¸€æ­¥å®ç°æ•ˆæœ"><a href="#ä¸€æ­¥ä¸€æ­¥å®ç°æ•ˆæœ" class="headerlink" title="ä¸€æ­¥ä¸€æ­¥å®ç°æ•ˆæœ"></a>ä¸€æ­¥ä¸€æ­¥å®ç°æ•ˆæœ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> status = &#123;</span><br><span class="line">      pending:<span class="number">0</span>,</span><br><span class="line">      fulfilled:<span class="number">1</span>,</span><br><span class="line">      rejected:<span class="number">2</span></span><br><span class="line">   &#125;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">CustomePromise</span></span>&#123;</span><br><span class="line">    <span class="comment">//æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥</span></span><br><span class="line">      <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span>&#123;</span><br><span class="line">         <span class="built_in">this</span>._status = status.pending;</span><br><span class="line">         <span class="built_in">this</span>._handler(func);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•°</span></span><br><span class="line">      <span class="function"><span class="title">_handler</span>(<span class="params">func</span>)</span>&#123;</span><br><span class="line">         func(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(value);</span><br><span class="line">         &#125;,<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(error);</span><br><span class="line">         &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">     <span class="comment">//æ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line">      <span class="function"><span class="title">_resolve</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">      <span class="function"><span class="title">_reject</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æŒ‚è½½åˆ°windows</span></span><br><span class="line">   <span class="built_in">window</span>.CustomePromise = CustomePromise;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹æ‰§è¡Œæ¬¡æ•°çš„é™åˆ¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> status = &#123;</span><br><span class="line">pending: <span class="number">0</span>,</span><br><span class="line">fulfilled: <span class="number">1</span>,</span><br><span class="line">rejected: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomePromise</span> </span>&#123;</span><br><span class="line"><span class="comment">//æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥</span></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>._status = status.pending;</span><br><span class="line"><span class="built_in">this</span>._handler(func);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">_handler</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line"><span class="keyword">let</span> done = <span class="literal">false</span>;</span><br><span class="line">func(</span><br><span class="line">value =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (done) <span class="literal">true</span>; <span class="comment">// åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(value);</span><br><span class="line"><span class="built_in">this</span>._resolve(value);</span><br><span class="line">&#125;,</span><br><span class="line">() =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (done) <span class="literal">true</span>;</span><br><span class="line">done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">this</span>._reject(value);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="title">_resolve</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>._status = status.fulfilled;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤±è´¥</span></span><br><span class="line"><span class="function"><span class="title">_reject</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>._status = status.rejected;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‚è½½åˆ°windows</span></span><br><span class="line"><span class="built_in">window</span>.CustomePromise = CustomePromise;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ”¶é›†å¤±è´¥æˆ–æˆåŠŸçš„æ‰§è¡Œå‡½æ•°å¹¶æ‰§è¡Œ"><a href="#æ”¶é›†å¤±è´¥æˆ–æˆåŠŸçš„æ‰§è¡Œå‡½æ•°å¹¶æ‰§è¡Œ" class="headerlink" title="æ”¶é›†å¤±è´¥æˆ–æˆåŠŸçš„æ‰§è¡Œå‡½æ•°å¹¶æ‰§è¡Œ"></a>æ”¶é›†å¤±è´¥æˆ–æˆåŠŸçš„æ‰§è¡Œå‡½æ•°å¹¶æ‰§è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    .......</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomePromise</span> </span>&#123;</span><br><span class="line"><span class="comment">//æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥</span></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line"><span class="comment">//åˆå§‹çŠ¶æ€</span></span><br><span class="line"><span class="built_in">this</span>._status = status.pending;</span><br><span class="line"><span class="built_in">this</span>._handler(func);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¶é›†æˆåŠŸçŠ¶æ€æˆ–å¤±è´¥çŠ¶æ€è¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="built_in">this</span>.resolvedArr = [];</span><br><span class="line"><span class="built_in">this</span>.rejectArr = [];</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>._value = <span class="literal">null</span>; <span class="comment">//è®°å½•å‚æ•°</span></span><br><span class="line"><span class="built_in">this</span>._error = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">_handler</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line"><span class="keyword">let</span> done = <span class="literal">false</span>;</span><br><span class="line">func(</span><br><span class="line">value =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (done) <span class="literal">true</span>;</span><br><span class="line">done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(value);</span><br><span class="line"><span class="built_in">this</span>._resolve(value);</span><br><span class="line">&#125;,</span><br><span class="line">error =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (done) <span class="literal">true</span>;</span><br><span class="line">done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">this</span>._reject(error);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="title">_resolve</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line"><span class="comment">// åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"> <span class="built_in">this</span>._status = status.fulfilled;</span><br><span class="line">         <span class="built_in">this</span>._value = value;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ</span></span><br><span class="line">         <span class="built_in">this</span>.resolvedArr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item(<span class="built_in">this</span>._value))</span><br><span class="line">         </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤±è´¥</span></span><br><span class="line"><span class="function"><span class="title">_reject</span>(<span class="params">error</span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>._status = status.rejected;</span><br><span class="line">         <span class="built_in">this</span>._error = error;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ</span></span><br><span class="line">         <span class="built_in">this</span>.rejectArr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item(<span class="built_in">this</span>._error))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  æ”¶é›†çš„æ—¶æœº:pendingçŠ¶æ€æ”¶é›†</span></span><br><span class="line"><span class="function"><span class="title">_done</span>(<span class="params">resolvedFunc, rejectedFunc</span>)</span> &#123;</span><br><span class="line">resolvedFunc = <span class="keyword">typeof</span> resolvedFunc === <span class="string">&#x27;function&#x27;</span> ? resolvedFunc : <span class="literal">null</span>;</span><br><span class="line">rejectedFunc = <span class="keyword">typeof</span> rejectedFunc === <span class="string">&#x27;function&#x27;</span> ? rejectedFunc : <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>._status === <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (rejectedFunc) &#123;</span><br><span class="line"><span class="built_in">this</span>.resolvedArr.push(resolvedFunc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (rejectedFunc) &#123;</span><br><span class="line"><span class="built_in">this</span>.rejectArr.push(rejectedFunc);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (his._status === <span class="number">1</span> &amp;&amp; rejectedFunc) &#123;</span><br><span class="line">resolvedFunc(<span class="built_in">this</span>._value);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (his._status === <span class="number">2</span> &amp;&amp; rejectedFunc) &#123;</span><br><span class="line">rejectedFunc(<span class="built_in">this</span>._error);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¶é›†æ³¨å†ŒæˆåŠŸçŠ¶æ€æˆ–è€…å¤±è´¥çŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">then</span>(<span class="params">resolvedFunc, rejectedFunc</span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>._done(resolvedFunc, rejectedFunc);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">     .......</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¨¡æ‹Ÿå®ç°å¼‚æ­¥æ•ˆæœ"><a href="#æ¨¡æ‹Ÿå®ç°å¼‚æ­¥æ•ˆæœ" class="headerlink" title="æ¨¡æ‹Ÿå®ç°å¼‚æ­¥æ•ˆæœ"></a>æ¨¡æ‹Ÿå®ç°å¼‚æ­¥æ•ˆæœ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="comment">//æˆåŠŸ</span></span><br><span class="line"> <span class="function"><span class="title">_resolve</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line"> <span class="comment">//æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">// åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"> <span class="built_in">this</span>._status = status.fulfilled;</span><br><span class="line"> <span class="built_in">this</span>._value = value;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ</span></span><br><span class="line"> <span class="built_in">this</span>.resolvedArr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item(<span class="built_in">this</span>._value));</span><br><span class="line"> &#125;, <span class="number">2000</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//å¤±è´¥</span></span><br><span class="line"> <span class="function"><span class="title">_reject</span>(<span class="params">error</span>)</span> &#123;</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>._status = status.rejected;</span><br><span class="line"> <span class="built_in">this</span>._error = error;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ</span></span><br><span class="line"> <span class="built_in">this</span>.rejectArr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item(<span class="built_in">this</span>._error));</span><br><span class="line"> &#125;, <span class="number">2000</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æœŸå¾…ä¸‹æ¬¡æ›´æ–°ç»§ç»­â€¦â€¦â€¦â€¦"><a href="#æœŸå¾…ä¸‹æ¬¡æ›´æ–°ç»§ç»­â€¦â€¦â€¦â€¦" class="headerlink" title="æœŸå¾…ä¸‹æ¬¡æ›´æ–°ç»§ç»­â€¦â€¦â€¦â€¦.."></a>æœŸå¾…ä¸‹æ¬¡æ›´æ–°ç»§ç»­â€¦â€¦â€¦â€¦..</h1>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®šæ—¶å™¨</title>
      <link href="2018/11/12/%E5%AE%9A%E6%97%B6%E5%99%A8/"/>
      <url>2018/11/12/%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>æ€ä¹ˆå®ç°ä¸€ä¸ªjsç‰ˆæœ¬sleepå‡½æ•°?<br><a id="more"></a></p><p>åœ¨å…¶ä»–è¯­è¨€ä¸­éƒ½å¯èƒ½æœ‰sleepå‡½æ•°</p><h3 id="ä»æœ€ç®€å•çš„å¼€å§‹è®²"><a href="#ä»æœ€ç®€å•çš„å¼€å§‹è®²" class="headerlink" title="ä»æœ€ç®€å•çš„å¼€å§‹è®²:"></a>ä»æœ€ç®€å•çš„å¼€å§‹è®²:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time,callback</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(callback,time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">2000</span>,<span class="function">()=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;sleep recover&#x27;</span>)&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h3><p>ä½†æ˜¯è¿™æ ·å†™å¾ˆä¸ä¼˜é›…,éƒ½ä»€ä¹ˆå¹´ä»£äº†,è¿˜ä¸å¿«ç”¨<code>Promise</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>  <span class="built_in">setTimeout</span>(resolve,time))</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">2000</span>).then(<span class="function">()=&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;sleep recover&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>ES7æä¾›äº†æ›´åŠ æ–¹ä¾¿çš„async/awaitæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>  <span class="built_in">setTimeout</span>(resolve,time))</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">await</span> sleep(<span class="number">2000</span>); </span><br><span class="line">   <span class="comment">//åªæœ‰sleepæ‰§è¡Œå®Œæˆæ‰èƒ½ç»§ç»­ä¸‹é¢çš„è¯­å¥</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;sleep recover&#x27;</span>)</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">init();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">init().then(<span class="function">()=&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;init finish&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¯é¢˜-setTimeoutä¸setIntervalçš„åŒºåˆ«"><a href="#å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¯é¢˜-setTimeoutä¸setIntervalçš„åŒºåˆ«" class="headerlink" title="å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¯é¢˜:setTimeoutä¸setIntervalçš„åŒºåˆ«"></a>å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¯é¢˜:<code>setTimeout</code>ä¸<code>setInterval</code>çš„åŒºåˆ«</h3><ol><li><code>setTimeout</code> å½“å‰æ‰§è¡Œå•å…ƒéƒ½æ‰§è¡Œå®Œæˆåæ‰å¼€å§‹æ‰§è¡Œ,</li><li><code>setInterval</code> åœ¨è®¾å®šå®Œè®¡æ—¶å™¨åç«‹é©¬è®¡æ—¶</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> scriptBegin = <span class="built_in">Date</span>.now();</span><br><span class="line"> fun1();</span><br><span class="line"> fun2();</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">act</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(params,<span class="built_in">Date</span>.now() - scriptBegin);</span><br><span class="line">   <span class="keyword">let</span> begin = <span class="built_in">Date</span>.now();</span><br><span class="line">   <span class="keyword">while</span> (<span class="built_in">Date</span>.now()-begin&lt;<span class="number">20</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> fun3 = <span class="function">()=&gt;</span> act(<span class="string">&#x27;fun3&#x27;</span>); </span><br><span class="line">   <span class="built_in">setTimeout</span>(fun3, <span class="number">0</span>);  <span class="comment">//å†å›åˆ°å¼‚æ­¥å®Œæˆåå¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">   act(<span class="string">&#x27;fun1&#x27;</span>)  <span class="comment">//è·³è¿‡ä¸Šé¢çš„å¼‚æ­¥ å…ˆæ‰§è¡Œè¿™å¥</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   act(<span class="string">&#x27;fun2-1&#x27;</span>);  <span class="comment">//å†æ‰§è¡Œè¿™å¥</span></span><br><span class="line">   <span class="keyword">let</span> fun4 = <span class="function">()=&gt;</span> act(<span class="string">&#x27;fun4&#x27;</span>);</span><br><span class="line">   <span class="built_in">setInterval</span>(fun4, <span class="number">20</span>); <span class="comment">//æœ€åå›å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">   act(<span class="string">&#x27;fun2-2&#x27;</span>) <span class="comment">//è·³è¿‡ä¸Šé¢çš„å¼‚æ­¥ å…ˆæ‰§è¡Œè¿™å¥</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//ç»“æœ</span></span><br><span class="line"> fun1 <span class="number">0</span></span><br><span class="line"> fun2-<span class="number">1</span> <span class="number">22</span></span><br><span class="line"> fun2-<span class="number">2</span> <span class="number">42</span></span><br><span class="line"> fun3 <span class="number">64</span></span><br><span class="line"> fun4 <span class="number">84</span></span><br><span class="line">fun4 <span class="number">104</span></span><br><span class="line">fun4 <span class="number">124</span></span><br><span class="line">fun4 <span class="number">144</span></span><br><span class="line">fun4 <span class="number">164</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°èŠ‚æµ throttling</title>
      <link href="2018/11/11/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%20throttling/"/>
      <url>2018/11/11/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%20throttling/</url>
      
        <content type="html"><![CDATA[<h3 id="èŠ‚æµæ˜¯ä»€ä¹ˆ"><a href="#èŠ‚æµæ˜¯ä»€ä¹ˆ" class="headerlink" title="èŠ‚æµæ˜¯ä»€ä¹ˆ?"></a>èŠ‚æµæ˜¯ä»€ä¹ˆ?</h3><blockquote><p>æµè§ˆå™¨çš„DOMæ“ä½œæ¯”èµ·éDOMäº¤äº’éœ€è¦æ›´å¤šçš„å†…å­˜å’Œcpuæ—¶é—´ï¼Œè¿ç»­è¿‡å¤šçš„DOMæ“ä½œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æŒ‚èµ·ç”šè‡³å´©æºƒã€‚æ¯”å¦‚ä½¿ç”¨onresizeï¼Œonscrollè¿™äº›å¯èƒ½ä¼šè¢«è¿ç»­è§¦å‘çš„äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿›è¡Œäº†è¿‡å¤šåœ°DOMæ“ä½œï¼Œå¯èƒ½å°±ä¼šä½¿å¾—æµè§ˆå™¨å´©æºƒã€‚è€Œä¸ºäº†ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½å°±éœ€è¦ä½¿ç”¨åˆ°å‡½æ•°èŠ‚æµã€‚</p></blockquote><a id="more"></a><h4 id="é˜²æ­¢ä¸€ä¸ªäº‹ä»¶è§¦å‘æ‰§è¡Œçš„å¤ªå¿«-æ¯”å¦‚"><a href="#é˜²æ­¢ä¸€ä¸ªäº‹ä»¶è§¦å‘æ‰§è¡Œçš„å¤ªå¿«-æ¯”å¦‚" class="headerlink" title="é˜²æ­¢ä¸€ä¸ªäº‹ä»¶è§¦å‘æ‰§è¡Œçš„å¤ªå¿«,æ¯”å¦‚:"></a>é˜²æ­¢ä¸€ä¸ªäº‹ä»¶è§¦å‘æ‰§è¡Œçš„å¤ªå¿«,æ¯”å¦‚:</h4><ul><li style="list-style: none"><input type="checkbox" checked></input> ç›‘å¬inputè§¦å‘æœç´¢</li><li style="list-style: none"><input type="checkbox" checked></input> ç›‘å¬resizeåšå“åº”è°ƒæ•´</li><li style="list-style: none"><input type="checkbox" checked></input> ç›‘å¬mousemoveè°ƒæ•´ä½ç½®</li></ul><h3 id="æ€ä¹ˆæ ·å®ç°ä¸€ä¸ªèŠ‚æµ"><a href="#æ€ä¹ˆæ ·å®ç°ä¸€ä¸ªèŠ‚æµ" class="headerlink" title="æ€ä¹ˆæ ·å®ç°ä¸€ä¸ªèŠ‚æµ?"></a>æ€ä¹ˆæ ·å®ç°ä¸€ä¸ªèŠ‚æµ?</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onresize&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">method,context</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">clearTimeout</span>(method.timer);</span><br><span class="line">  method.timer=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      method.call(context);</span><br><span class="line">  &#125;,<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function">()=&gt;</span>throttle(fun,<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>ä½†ä¸Šè¿°ä»£ç æœ‰ä¸€ä¸ªé—®é¢˜,å°±æ˜¯è¿™ä¸ªå‡½æ•°å¯èƒ½æ°¸è¿œä¸ä¼šæ‰§è¡Œ,<br>å› ä¸ºä»–ä¸€ç›´åœ¨è§¦å‘,ä¸€ç›´åœ¨æ¸…é™¤id.åœ¨çª—å£æ‹–æ‹½è¿‡ç¨‹ä¸­ä¸ä¼šæ‰§è¡Œ,åªæœ‰æœ€åä¸€æ¬¡åœä¸‹ä¹‹åæ‰æ‰§è¡Œ<br>è¿™ç§å®ç°åº”è¯¥å«<code>é˜²æŠ–</code>;</p><h3 id="æˆ‘ä»¬ç»§ç»­æ”¹è¿›ä¸‹ä»£ç "><a href="#æˆ‘ä»¬ç»§ç»­æ”¹è¿›ä¸‹ä»£ç " class="headerlink" title="æˆ‘ä»¬ç»§ç»­æ”¹è¿›ä¸‹ä»£ç "></a>æˆ‘ä»¬ç»§ç»­æ”¹è¿›ä¸‹ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onresize&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">method,context</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(method.timer)&#123;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">clearTimeout</span>(method.timer);</span><br><span class="line">   method.timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       method.call(context)</span><br><span class="line">       method.id=<span class="number">0</span>;</span><br><span class="line">   &#125;,<span class="number">100</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function">()=&gt;</span>throttle(fun,<span class="built_in">window</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŠŠsetTimeouté‡Œçš„idè®¾ç½®æˆäº†0;é‚£ä¹ˆä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™å°±ä¼šè§¦å‘<br>ä¹Ÿæœ‰ä¸€ä¸ªå°é—®é¢˜:å°±æ˜¯æ¯æ¬¡æ‰§è¡Œè¦å»¶è¿Ÿ100ms æœ‰æ—¶å€™ç”¨æˆ·å¯èƒ½å°±æ˜¯æœ€å¤§åŒ–çª—å£,åªè§¦å‘äº†ä¸€æ¬¡<br>,ä½†è¿˜æ˜¯å»¶è¿Ÿ100msæ‰èƒ½æ‰§è¡Œ,å‡è®¾ä½ è®¾ç½®500msé‚£ä¹ˆå»¶è¿Ÿå°±æ˜¯åŠç§’;</p><h3 id="è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–"><a href="#è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–" class="headerlink" title="è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–"></a>è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–</h3><p>å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡è§¦å‘,å¦‚æœæ˜¯çš„è¯ç«‹å³æ‰§è¡Œ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">method,context</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">typeof</span> method.timer === <span class="string">&quot;undefined&quot;</span>)&#123;</span><br><span class="line">       method.call(context)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span>(method.timer)&#123;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">clearTimeout</span>(method.timer);</span><br><span class="line">   method.timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       method.call(context)</span><br><span class="line">       method.id=<span class="number">0</span>;</span><br><span class="line">   &#125;,<span class="number">100</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†è¿˜æ˜¯æœ‰é—®é¢˜ å¦‚æœç”¨æˆ·æœ€å¤§åŒ–ä¹‹å,éš”äº†ä¸€ä¼šåˆå–æ¶ˆæœ€å¤§åŒ–äº†å°±åˆæœ‰å»¶è¿Ÿäº†,å¹¶ä¸”ç¬¬ä¸€æ¬¡è§¦å‘æ‰§è¡Œ2æ¬¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onresize&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">method,context</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!method.timer)&#123;</span><br><span class="line">       method.call(context)</span><br><span class="line">       method.timer = <span class="number">1</span></span><br><span class="line">       <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span> method.timer=<span class="number">0</span>,<span class="number">500</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function">()=&gt;</span>throttle(fun,<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>èŠ‚æµä¼šå¤±å»çµæ•åº¦,å¦‚æœåšä¸€ä¸ªæ‹–æ‹½ä¸€æ ·çš„åº”ç”¨,ä¼šå˜æˆä¸€å¡ä¸€å¡,æ˜¯ä¸å¯å–çš„.</p><h3 id="é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«"><a href="#é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«" class="headerlink" title="é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«"></a>é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«</h3><blockquote><p>é˜²æŠ–æ˜¯æ‰§è¡Œé‡å¤æ“ä½œçš„<code>æœ€åä¸€æ¬¡</code>;<br>è€ŒèŠ‚æµæ˜¯æ¯å¤šå°‘å•ä½æ—¶é—´å†…<code>æ‰§è¡Œä¸€æ¬¡</code>;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£ javascript ä¸­çš„æŸ¯é‡ŒåŒ–</title>
      <link href="2018/11/10/%E7%90%86%E8%A7%A3javascript%E4%B8%AD%E7%9A%84%E6%9F%AF%E9%87%8C%E5%8C%96/"/>
      <url>2018/11/10/%E7%90%86%E8%A7%A3javascript%E4%B8%AD%E7%9A%84%E6%9F%AF%E9%87%8C%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–?</p><blockquote><p>å°±æ˜¯å‡½æ•°ä¸å‚æ•°å€¼çš„ç»“åˆäº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°</p></blockquote><a id="more"></a><h3 id="ç®€å•çš„ä¾‹å­"><a href="#ç®€å•çš„ä¾‹å­" class="headerlink" title="ç®€å•çš„ä¾‹å­"></a>ç®€å•çš„ä¾‹å­</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> add1 = add.curry(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(add1(<span class="number">5</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">console</span>.log(add1(<span class="number">2</span>)); <span class="comment">//3</span></span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•å®ç°-ä¸å®Œæ•´å®ç°"><a href="#å¦‚ä½•å®ç°-ä¸å®Œæ•´å®ç°" class="headerlink" title="å¦‚ä½•å®ç°(ä¸å®Œæ•´å®ç°)"></a>å¦‚ä½•å®ç°(ä¸å®Œæ•´å®ç°)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.curry = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> defautlArgs = <span class="built_in">arguments</span>;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> that.apply(<span class="built_in">this</span>, defaultArgs.concat(<span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”±äºå‚æ•°ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæ•°ç»„,æ²¡æœ‰ concat å‡½æ•°,æ‰€ä»¥è¦æŠŠä¼ªæ•°ç»„è½¬æˆä¸€ä¸ªæ•°ç»„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = <span class="built_in">Array</span>.prototype.slice;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.curry = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line">  <span class="keyword">let</span> defautlArgs = arr.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> that.apply(<span class="built_in">this</span>, defaultArgs.concat(slice.call(<span class="built_in">arguments</span>)));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æŸ¯é‡ŒåŒ–æœ‰ç”¨å—"><a href="#æŸ¯é‡ŒåŒ–æœ‰ç”¨å—" class="headerlink" title="æŸ¯é‡ŒåŒ–æœ‰ç”¨å—?"></a>æŸ¯é‡ŒåŒ–æœ‰ç”¨å—?</h3><p><strong>â‘  æ¡ˆä¾‹</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> currying = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// fn æŒ‡å®˜å‘˜æ¶ˆåŒ–è€å©†çš„æ‰‹æ®µ</span></span><br><span class="line">  <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// args æŒ‡çš„æ˜¯é‚£ä¸ªåˆæ³•è€å©†</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å·²ç»æœ‰çš„è€å©†å’Œæ–°æå®šçš„è€å©†ä»¬åˆæˆä¸€ä½“ï¼Œæ–¹ä¾¿æ§åˆ¶</span></span><br><span class="line">    <span class="keyword">var</span> newArgs = args.concat([].slice.call(<span class="built_in">arguments</span>));</span><br><span class="line">    <span class="comment">// è¿™äº›è€å©†ä»¬ç”¨ fn è¿™ä¸ªæ‰‹æ®µæ¶ˆåŒ–åˆ©ç”¨ï¼Œå®ŒæˆéŸ¦å°å®å‰è¾ˆçš„å£®ä¸¾å¹¶è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="literal">null</span>, newArgs);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹ä¸ºå®˜å‘˜å¦‚ä½•æå®š7ä¸ªè€å©†çš„æµ‹è¯•</span></span><br><span class="line"><span class="comment">// è·å¾—åˆæ³•è€å©†</span></span><br><span class="line"><span class="keyword">var</span> getWife = currying(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> allWife = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// allwife å°±æ˜¯æ‰€æœ‰çš„è€å©†çš„ï¼ŒåŒ…æ‹¬æš—æ¸¡é™ˆä»“è¿›æ¥çš„è€å©†</span></span><br><span class="line">  <span class="built_in">console</span>.log(allWife.join(<span class="string">&quot;;&quot;</span>));</span><br><span class="line">&#125;, <span class="string">&quot;åˆæ³•è€å©†&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—å…¶ä»–6ä¸ªè€å©†</span></span><br><span class="line">getWife(<span class="string">&quot;å¤§è€å©†&quot;</span>, <span class="string">&quot;å°è€å©†&quot;</span>, <span class="string">&quot;ä¿è€å©†&quot;</span>, <span class="string">&quot;åˆè›®è€å©†&quot;</span>, <span class="string">&quot;ä¹–è€å©†&quot;</span>, <span class="string">&quot;é€ä¸Šé—¨è€å©†&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¢ä¸€æ‰¹è€å©†</span></span><br><span class="line">getWife(<span class="string">&quot;è¶…è¶ŠéŸ¦å°å®çš„è€å©†&quot;</span>);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20191203160605.png"                      alt=""                ></p><p><strong>â‘¡ æ¡ˆä¾‹</strong><br>ä¸¾ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªå•†åº— ğŸ ï¼Œä½ æƒ³ç»™ä½ çš„é¡¾å®¢ 10% çš„æŠ˜æ‰£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discount</span>(<span class="params">price, discount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> price * discount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªæœ‰ä»·å€¼çš„å®¢æˆ·ä¹°äº†ä¸€ä»¶\$500 çš„å•†å“ï¼Œä½ ä¼šç»™ä»–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> price = discount(<span class="number">500</span>, <span class="number">0.1</span>); <span class="comment">// $50</span></span><br><span class="line"><span class="comment">// $500 - $50 = $450</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½ ä¼šå‘ç°ä»é•¿è¿œæ¥çœ‹ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½è‡ªå·±è®¡ç®—10%çš„æŠ˜æ‰£ã€‚</span></span><br><span class="line"><span class="keyword">const</span> price = discount(<span class="number">1500</span>, <span class="number">0.1</span>); <span class="comment">// $150</span></span><br><span class="line"><span class="comment">// $1,500 - $150 = $1,350</span></span><br><span class="line"><span class="keyword">const</span> price = discount(<span class="number">2000</span>, <span class="number">0.1</span>); <span class="comment">// $200</span></span><br><span class="line"><span class="comment">// $2,000 - $200 = $1,800</span></span><br><span class="line"><span class="keyword">const</span> price = discount(<span class="number">50</span>, <span class="number">0.1</span>); <span class="comment">// $5</span></span><br><span class="line"><span class="comment">// $50 - $5 = $45</span></span><br><span class="line"><span class="keyword">const</span> price = discount(<span class="number">5000</span>, <span class="number">0.1</span>); <span class="comment">// $500</span></span><br><span class="line"><span class="comment">// $5,000 - $500 = $4,500</span></span><br><span class="line"><span class="keyword">const</span> price = discount(<span class="number">300</span>, <span class="number">0.1</span>); <span class="comment">// $30</span></span><br><span class="line"><span class="comment">// $300 - $30 = $270</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŸ¯é‡ŒåŒ–è¿™ä¸ªæŠ˜æ‰£å‡½æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯å¤©éƒ½æ·»åŠ  0.10 è¿™ä¸ªæŠ˜æ‰£å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discount</span>(<span class="params">discount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">price</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> price * discount;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tenPercentDiscount = discount(<span class="number">0.1</span>);</span><br><span class="line"><span class="comment">//ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ä½ æœ‰ä»·å€¼çš„å®¢æˆ·è´­ä¹°çš„å•†å“ä»·æ ¼æ¥è¿›è¡Œè®¡ç®—äº†ï¼š</span></span><br><span class="line">tenPercentDiscount(<span class="number">500</span>); <span class="comment">// $50</span></span><br><span class="line"><span class="comment">// $500 - $50 = $450</span></span><br></pre></td></tr></table></figure><p>å†ä¸€æ¬¡ï¼Œå‘ç”Ÿäº†è¿™æ ·çš„æƒ…å†µï¼Œæœ‰ä¸€äº›æœ‰ä»·å€¼çš„å®¢æˆ·æ¯”å¦ä¸€äº›æœ‰ä»·å€¼çš„å®¢æˆ·æ›´é‡è¦ â€“ æˆ‘ä»¬å«ä»–ä»¬è¶…çº§ä»·å€¼å®¢æˆ·ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³ç»™è¶…çº§ä»·å€¼å®¢æˆ· 20%çš„æŠ˜æ‰£ã€‚</p><p>è¿”å›çš„å‡½æ•°<code>twentyPercentDiscount</code>å°†è¢«ç”¨äºè®¡ç®—è¶…çº§ä»·å€¼å®¢æˆ·çš„æŠ˜æ‰£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">twentyPercentDiscount(<span class="number">500</span>); <span class="comment">// 100</span></span><br><span class="line"><span class="comment">// $500 - $100 = $400</span></span><br><span class="line">twentyPercentDiscount(<span class="number">5000</span>); <span class="comment">// 1000</span></span><br><span class="line"><span class="comment">// $5,000 - $1,000 = $4,000</span></span><br><span class="line">twentyPercentDiscount(<span class="number">1000000</span>); <span class="comment">// 200000</span></span><br><span class="line"><span class="comment">// $1,000,000 - $200,000 = $600,000</span></span><br></pre></td></tr></table></figure><p><strong>é¿å…é¢‘ç¹è°ƒç”¨å…·æœ‰ç›¸åŒå‚æ•°çš„å‡½æ•°</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—åœ†æŸ±ä½“çš„ä½“ç§¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">volume</span>(<span class="params">l, w, h</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> l * w * h;</span><br><span class="line">&#125;</span><br><span class="line">volume(<span class="number">200</span>, <span class="number">30</span>, <span class="number">100</span>); <span class="comment">// 2003000l</span></span><br><span class="line">volume(<span class="number">32</span>, <span class="number">45</span>, <span class="number">100</span>); <span class="comment">//144000l</span></span><br><span class="line">volume(<span class="number">2322</span>, <span class="number">232</span>, <span class="number">100</span>); <span class="comment">// 53870400l</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æŸ¯é‡ŒåŒ–è¿™ä¸ªè®¡ç®—ä½“ç§¯çš„å‡½æ•°ï¼ˆåƒæˆ‘ä»¬ä¹‹å‰åšçš„ä¸€æ ·ï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">volume</span>(<span class="params">h</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">w</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">l</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> l * w * h;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºè®¡ç®—ç‰¹å®šçš„åœ†æŸ±ä½“é«˜åº¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hCylinderHeight = volume(<span class="number">100</span>);</span><br><span class="line">hCylinderHeight(<span class="number">200</span>)(<span class="number">30</span>); <span class="comment">// 600,000l</span></span><br><span class="line">hCylinderHeight(<span class="number">2322</span>)(<span class="number">232</span>); <span class="comment">// 53,870,400l</span></span><br></pre></td></tr></table></figure><p><strong>â‘¢ æ¡ˆä¾‹</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">0</span>];</span><br><span class="line">data.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">//[10,8,5,2,1,0];</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ“ä½œçš„æ•°é‡æ¯”è¾ƒå¤š,æ¯ä¸€æ¬¡éƒ½éœ€è¦å†™ä¸€ä¸ªå‡½æ•°å‚æ•°.å› æ­¤å¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–æŠŠå‚æ•°å›ºå®šèµ·æ¥;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sortDescending = <span class="built_in">Array</span>.prototype.sort.curry(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">0</span>];</span><br><span class="line">data.sortDescending(); <span class="comment">//[10,8,5,2,1,0];</span></span><br></pre></td></tr></table></figure><h2 id="æœ€åå¼•ç”¨å¤§ä½¬çš„è¯"><a href="#æœ€åå¼•ç”¨å¤§ä½¬çš„è¯" class="headerlink" title="æœ€åå¼•ç”¨å¤§ä½¬çš„è¯"></a>æœ€åå¼•ç”¨å¤§ä½¬çš„è¯</h2><p>å…¶å®è¿™äº›æ¨¡å¼åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä½¿ç”¨è¿‡ï¼Œå½“çœ‹åˆ°â€œ<strong>æ¨¡å¼â€æ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šçŒ›ç„¶æƒŠèµ·ï¼šâ€œå“¦ï¼ŒåŸæ¥è¿™ä¸ªå°±å«åšâ€˜è§‚å¯Ÿè€…æ¨¡å¼â€™ç­‰â€ã€‚ç°åœ¨è¦è®¨è®ºçš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰å¿…è¦æŠŠè¿™äº›â€œ</strong>æ¨¡å¼â€éƒ½è®°ä½å‘¢ï¼Œéƒ½ç†è§£å…¶å¯¹åº”çš„æ ¸å¿ƒå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜ç±»ä¼¼äºï¼Œæˆ‘å¯ä»¥çœ‹æ‡‚ NBA çš„ç¯®çƒæ¯”èµ›ï¼Œé‚£æˆ‘æœ‰æ²¡æœ‰å¿…è¦æŠŠå„ä¸ªçƒé˜Ÿä»¥åŠçƒé˜Ÿçš„é˜Ÿå‘˜éƒ½è®°ä½å‘¢ï¼Ÿ</p><p>å¦‚æœæƒ³æˆä¸º JS å¤§ç¥ï¼Œä»è¿™ä¸ªç›®æ ‡æ¥çœ‹ï¼Œè¿™æ˜¯éœ€è¦çš„ï¼›å¥½æ¯”ä¼˜ç§€çš„ç¯®çƒè§£è¯´å‘˜å¿…é¡»è¦çŸ¥é“æ¯ä¸ªçƒé˜Ÿçš„åå­—ã€çƒå‘˜ç”šè‡³å‘¨è¾¹å…«å¦ã€‚ä½†æ˜¯ï¼Œç°å®å¾ˆé‡è¦ã€‚å¦‚æœè¿ JS å‡½æ•°ç›¸å…³çš„åŸºæœ¬ä¸œè¥¿éƒ½é©¾é©­ä¸å¥½ï¼Œæ˜¾ç„¶ï¼Œç¡¬æ˜¯å•ƒè¿™äº›ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µåªä¼šé€ æˆæ··ä¹±ã€‚å¦‚æœä½ è§‰å¾—å¯ä»¥æ›´è¿‘ä¸€æ­¥ï¼Œå…ˆé€šé€å‡ ä¸ªè‡ªå·±ä¹ æƒ¯çš„ç†Ÿæ‚‰çš„ä½¿ç”¨æ¨¡å¼ï¼Œè¶³å¤Ÿåº”ä»˜å®é™…é¡¹ç›®ï¼›å…¶ä»–ä¸€äº›æ¦‚å¿µä»€ä¹ˆçš„ï¼Œæ›´å¤šçš„åªæ˜¯å™±å¤´ï¼Œå®ç”¨æ€§å…¶å®å¹¶ä¸å¤§ã€‚æ­£å¦‚æœ¬æ–‡çš„æŸ¯é‡ŒåŒ–ï¼Œçœ‹ä¸Šå»å¾ˆé«˜çº§ï¼Œä¼¼ä¹ä¹Ÿæœ‰ç‚¹ç”¨å¤„ï¼Œç„¶è€Œ JS çš„çµæ´»æ€§ä½¿å¾—å¾ˆå¤šå®ç°å®Œå…¨æ‘†è„±â€œæŸ¯é‡ŒåŒ–â€è¿™ä¸ªæ¦‚å¿µçš„æŸç¼šï¼Œä»¥æ›´é€šä¿—æ˜“æ‡‚çš„æ–¹å¼å®ç°ã€‚</p><p>ç„¶è€Œï¼Œå³ä½¿å®ç”¨æ€§ä¸é«˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æœ‰æ‰€äº†è§£ï¼Œå› ä¸ºï¼Œä½ ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°å®ƒã€‚æ¯”æ–¹è¯´ CSS ä¸­çš„<code>display:table</code>;æŸäº›æƒ…å†µä¸‹å¯ä»¥è§£å†³ä¸€äº›æ£˜æ‰‹é—®é¢˜(secret!).</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="http://www.zhangxinxu.com/wordpress/2013/02/js-currying/" >JS ä¸­çš„æŸ¯é‡ŒåŒ–(currying)<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://juejin.im/post/5bf18715e51d45244939acc5#heading-5" >ã€Œè¯‘ã€ç†è§£ JavaScript çš„æŸ¯é‡ŒåŒ–<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu14.04å®‰è£…MySQL5.5å›¾è§£å®‰è£…æµç¨‹ï¼</title>
      <link href="2018/11/08/Ubuntu14.04%E5%AE%89%E8%A3%85MySQL5.5%E5%9B%BE%E8%A7%A3%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%81/"/>
      <url>2018/11/08/Ubuntu14.04%E5%AE%89%E8%A3%85MySQL5.5%E5%9B%BE%E8%A7%A3%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>åˆ é™¤mysqlçš„æ•°æ®æ–‡ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /<span class="keyword">var</span>/lib/mysql/ -R</span><br></pre></td></tr></table></figure></p><p>åˆ é™¤mysqlçš„é…ç½®æ–‡ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/mysql/ -R</span><br></pre></td></tr></table></figure></p><p>è‡ªåŠ¨å¸è½½mysqlï¼ˆåŒ…æ‹¬serverå’Œclientï¼‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove mysql* --purge </span><br><span class="line">sudo apt-get remove apparmor</span><br></pre></td></tr></table></figure></p><p>æ£€æŸ¥æ˜¯å¦å¸è½½å¹²å‡€<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep mysql # è‹¥æ²¡æœ‰è¿”å›ï¼Œè¯´æ˜å·²å®Œæˆå¸è½½</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å®‰è£…å°±æ˜¯ä»¶ç®€å•çš„äº‹æƒ…é»˜è®¤å®‰è£…5.5ç‰ˆæœ¬<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server mysql-client</span><br></pre></td></tr></table></figure><br>æŸ¥çœ‹mysqlç‰ˆæœ¬ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysqladmin -u root -p version</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190805151037.png"                      alt=""                ></p><p>è®°å½•ä¸‹å®‰è£…æ­¥éª¤<br><a id="more"></a></p><h1 id="å®‰è£…msyql"><a href="#å®‰è£…msyql" class="headerlink" title="å®‰è£…msyql"></a>å®‰è£…msyql</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯´æ˜æ²¡æœ‰ä½ ä¸æ˜¯rootç”¨æˆ·ï¼Œåˆ™éœ€è¦ç”¨sudoå‘½ä»¤</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install MySQL-client-core-<span class="number">5.6</span></span><br><span class="line"></span><br><span class="line">apt-get install mysql-client-<span class="number">5.6</span></span><br><span class="line"></span><br><span class="line">apt-get install mysql-server-<span class="number">5.6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨"><a href="#æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨" class="headerlink" title="æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨"></a>æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨</span><br><span class="line">ps -ef | grep mysql</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹msyql-ç›‘å¬ç«¯å£"><a href="#æŸ¥çœ‹msyql-ç›‘å¬ç«¯å£" class="headerlink" title="æŸ¥çœ‹msyql ç›‘å¬ç«¯å£"></a>æŸ¥çœ‹msyql ç›‘å¬ç«¯å£</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨</span><br><span class="line">netstat -tap | grep mysql</span><br></pre></td></tr></table></figure><h1 id="Mysql-æœåŠ¡è¿œç¨‹è®¿é—®"><a href="#Mysql-æœåŠ¡è¿œç¨‹è®¿é—®" class="headerlink" title="Mysql æœåŠ¡è¿œç¨‹è®¿é—®"></a>Mysql æœåŠ¡è¿œç¨‹è®¿é—®</h1><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šsudo gedit /etc/mysql/conf.cnf<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181109/095124771.png"                      alt="mark"                ></p><h1 id="é‡å¯msyql"><a href="#é‡å¯msyql" class="headerlink" title="é‡å¯msyql"></a>é‡å¯msyql</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><p>åˆ†é…æ‰€æœ‰è®¿é—®æƒé™,å¦‚æœå·²åˆ†é…è¿‡ï¼Œè¯¥æ­¥éª¤å¯è·³è¿‡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment">//è¾“å…¥å¯†ç </span></span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;rootå¯†ç &#x27;</span> WITH GRANT OPTION;</span><br></pre></td></tr></table></figure><br>å¼ºåˆ¶åˆ·æ–°æƒé™<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; flush privileges<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>å†æ¬¡æŸ¥çœ‹ç”¨æˆ·è¡¨,rootç”¨æˆ·çš„hostå˜æˆ%ï¼Œå³å…è®¸æ‰€æœ‰çš„ipè¿œç¨‹è®¿é—®ï¼Œå¦‚æœéœ€è¦æŒ‡å®šå…·ä½“çš„ipï¼Œå°±å†™ä¸Šå…·ä½“çš„ipå³å¯<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181109/095048368.png"                      alt="mark"                ></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># netstat -an|grep 3306</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3306</span>          <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN </span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™"><a href="#é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™" class="headerlink" title="é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™"></a>é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™</h1><p>ç™»å½•é˜¿é‡Œäº‘è¿›å…¥æ§åˆ¶å°ï¼Œä¾æ¬¡è®¿é—®ç½‘ç»œå’Œå®‰å…¨-&gt;å®‰å…¨ç»„-&gt;é…ç½®è§„åˆ™ï¼Œåœ¨å…¥æ–¹å‘ä¸Šå¼€æ”¾MySQLç›‘å¬ç«¯å£3306å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181109/095151772.png"                      alt="mark"                ></p><h1 id="é˜¿é‡Œäº‘æœåŠ¡å™¨çš„MYSQLæ•°æ®åº“è¿œç¨‹è®¿é—®å¼€å¯æˆåŠŸï¼Œä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥æˆåŠŸã€‚"><a href="#é˜¿é‡Œäº‘æœåŠ¡å™¨çš„MYSQLæ•°æ®åº“è¿œç¨‹è®¿é—®å¼€å¯æˆåŠŸï¼Œä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥æˆåŠŸã€‚" class="headerlink" title="é˜¿é‡Œäº‘æœåŠ¡å™¨çš„MYSQLæ•°æ®åº“è¿œç¨‹è®¿é—®å¼€å¯æˆåŠŸï¼Œä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥æˆåŠŸã€‚"></a>é˜¿é‡Œäº‘æœåŠ¡å™¨çš„MYSQLæ•°æ®åº“è¿œç¨‹è®¿é—®å¼€å¯æˆåŠŸï¼Œä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥æˆåŠŸã€‚</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181109/095214628.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React+é˜¿é‡Œäº‘éƒ¨ç½²é™æ€ç½‘é¡µ</title>
      <link href="2018/10/31/React+%E9%98%BF%E9%87%8C%E4%BA%91%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5/"/>
      <url>2018/10/31/React+%E9%98%BF%E9%87%8C%E4%BA%91%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<p>éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„é™æ€é¡µé¢å…¶å®å¾ˆç®€å•åªæ˜¯åšä¸ªç®€å•çš„è®°å½•,å®‰å…¨åŠæ€§èƒ½ç›¸å…³é—®é¢˜æš‚ä¸è€ƒè™‘å¤ªå¤š;</p><a id="more"></a><h1 id="ä¸€ã€è¿œç¨‹ç™»å½•æœåŠ¡å™¨"><a href="#ä¸€ã€è¿œç¨‹ç™»å½•æœåŠ¡å™¨" class="headerlink" title="ä¸€ã€è¿œç¨‹ç™»å½•æœåŠ¡å™¨"></a>ä¸€ã€è¿œç¨‹ç™»å½•æœåŠ¡å™¨</h1><h2 id="1-1-ssh-è¿œç¨‹ç™»å½•æœåŠ¡å™¨"><a href="#1-1-ssh-è¿œç¨‹ç™»å½•æœåŠ¡å™¨" class="headerlink" title="1.1 ssh è¿œç¨‹ç™»å½•æœåŠ¡å™¨"></a>1.1 ssh è¿œç¨‹ç™»å½•æœåŠ¡å™¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ssh ç™»å½•</span><br><span class="line">ssh root@<span class="number">47.</span>xx.xx.xx</span><br><span class="line"></span><br><span class="line"># æ¥ç€ï¼Œè¾“å…¥å¯†ç ï¼ˆè´­ä¹°æœåŠ¡å™¨æ—¶çš„å¯†ç ï¼‰</span><br><span class="line">******</span><br><span class="line"></span><br><span class="line"># ç„¶åï¼Œå¯ä»¥åšä½ æƒ³åšçš„äº‹æƒ…ï¼Œç®€å•ç‚¹ï¼š</span><br><span class="line"># æŸ¥çœ‹ç¡¬ç›˜</span><br><span class="line">fdisk -l</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µ</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure><h2 id="1-2-é…ç½®-root-åŠåº”ç”¨è´¦å·æƒé™"><a href="#1-2-é…ç½®-root-åŠåº”ç”¨è´¦å·æƒé™" class="headerlink" title="1.2 é…ç½® root åŠåº”ç”¨è´¦å·æƒé™"></a>1.2 é…ç½® root åŠåº”ç”¨è´¦å·æƒé™</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># å¢åŠ ç”¨æˆ·</span><br><span class="line">adduser chan # chan ä¸ºç”¨æˆ·åï¼Œç„¶åè¾“å…¥å¯†ç ï¼Œåˆ›å»ºå®Œæˆ</span><br><span class="line"></span><br><span class="line"># ç”¨æˆ·æˆæƒ</span><br><span class="line">gpasswd -a chan sudo # æ·»åŠ ç”¨æˆ·åˆ° sudo ç»„ä¸­</span><br><span class="line"></span><br><span class="line">sudo visudo # æ¥ç€ï¼Œä¸ºç”¨æˆ·æˆæƒ</span><br><span class="line"></span><br><span class="line">chan ALL=(ALL:ALL) ALL</span><br><span class="line"></span><br><span class="line"># é‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼Œå°±å¯ä»¥ä»¥ tanya çš„èº«ä»½ç™»å½•å•¦</span><br><span class="line">ssh chan@47.xx.xx.xx # ç„¶åè¾“å…¥å¯†ç ï¼Œå³å¯ç™»å½•æˆåŠŸ</span><br></pre></td></tr></table></figure><h2 id="1-3-ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç™»å½•ç«¯å£"><a href="#1-3-ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç™»å½•ç«¯å£" class="headerlink" title="1.3 ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç™»å½•ç«¯å£"></a>1.3 ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç™»å½•ç«¯å£</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ç¼–è¾‘æ–‡ä»¶</span><br><span class="line">sudo vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹ Port é¡¹ï¼Œç«¯å£èŒƒå›´ 0 ~ 65536</span><br><span class="line">Port xx</span><br><span class="line"></span><br><span class="line"># åœ¨æœ«å°¾æ·»åŠ </span><br><span class="line">AllowUsers tanya</span><br><span class="line"></span><br><span class="line"># é‡å¯æœåŠ¡</span><br><span class="line">sudo service ssh restart</span><br><span class="line"></span><br><span class="line"># é‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼šssh -p ç«¯å£ tanya@47.xx.xx.xx</span><br><span class="line">ssh -p xx tanya@<span class="number">47.</span>xx.xx.xx</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€æ­å»º-Nodejs-ç”Ÿäº§ç¯å¢ƒ"><a href="#ä¸‰ã€æ­å»º-Nodejs-ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ä¸‰ã€æ­å»º Nodejs ç”Ÿäº§ç¯å¢ƒ"></a>ä¸‰ã€æ­å»º Nodejs ç”Ÿäº§ç¯å¢ƒ</h1><p>3.1 æ­å»ºæœåŠ¡å™¨çš„ Nodejs ç¯å¢ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># æ›´æ–°æœåŠ¡å™¨</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"># å®‰è£…å·¥å…·</span><br><span class="line">sudo apt-get install vim openssl build-essential libssl-dev wget curl git</span><br><span class="line"></span><br><span class="line"># å®‰è£… nvm (node ç‰ˆæœ¬ç®¡ç†å·¥å…·) https://github.com/creationix/nvm</span><br><span class="line">wget -qO- https:<span class="comment">//raw.githubusercontent.com/creationix/nvm/v0.33.7/install.sh | bash</span></span><br><span class="line"></span><br><span class="line"># å®‰è£… Node.js (æœ€æ–°ç¨³å®šç‰ˆ) https://nodejs.org/en/</span><br><span class="line">nvm install v9<span class="number">.6</span><span class="number">.3</span></span><br><span class="line"></span><br><span class="line"># æŒ‡å®š Node.js ç‰ˆæœ¬</span><br><span class="line">nvm use v9<span class="number">.6</span><span class="number">.3</span></span><br><span class="line"></span><br><span class="line"># å®‰è£… npm</span><br><span class="line">npm --registry=https:<span class="comment">//registry.npm.taobao.org install -g npm</span></span><br><span class="line"></span><br><span class="line"># å¦‚æœæœ‰å¤šä¸ª Node.js ç‰ˆæœ¬ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æŒ‡å®šé»˜è®¤ç‰ˆæœ¬</span><br><span class="line">nvm alias <span class="keyword">default</span> v9<span class="number">.6</span><span class="number">.3</span></span><br><span class="line"></span><br><span class="line"># å¢åŠ ç³»ç»Ÿæ–‡ä»¶ç›‘æ§æ•°ç›®</span><br><span class="line">echo fs.inotify.max_user_watches=<span class="number">524288</span> | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</span><br><span class="line"></span><br><span class="line"># å®‰è£…ä¸€äº›å¸¸ç”¨æ¨¡å—</span><br><span class="line">npm install yarn pm2 webpack -g</span><br></pre></td></tr></table></figure><p>3.2 å€ŸåŠ© pm2 è®© Node.js æœåŠ¡å¸¸é©»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨æœåŠ¡</span><br><span class="line">pm2 start app.js</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æ‰€æœ‰æœåŠ¡</span><br><span class="line">pm2 list</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹åº”ç”¨</span><br><span class="line">pm2 show app</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æ—¥å¿—</span><br><span class="line">pm2 logs</span><br></pre></td></tr></table></figure><h1 id="å››ã€é…ç½®-Nginx-å®ç°åå‘ä»£ç†"><a href="#å››ã€é…ç½®-Nginx-å®ç°åå‘ä»£ç†" class="headerlink" title="å››ã€é…ç½® Nginx å®ç°åå‘ä»£ç†"></a>å››ã€é…ç½® Nginx å®ç°åå‘ä»£ç†</h1><h2 id="é…ç½®-Nginx-åå‘ä»£ç†-Nodejs-ç«¯å£"><a href="#é…ç½®-Nginx-åå‘ä»£ç†-Nodejs-ç«¯å£" class="headerlink" title="é…ç½® Nginx åå‘ä»£ç† Nodejs ç«¯å£"></a>é…ç½® Nginx åå‘ä»£ç† Nodejs ç«¯å£</h2><p>å®‰è£… nginx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><blockquote><p>nginx é…ç½®è§„åˆ™ï¼šå¯ä»¥é€šè¿‡ <a class="link"   href="http://47.xx.xx.xx" >http://47.xx.xx.xx<i class="fas fa-external-link-alt"></i></a> è®¿é—®æœåŠ¡å™¨ <a class="link"   href="http://127.0.0.1:8081" >http://127.0.0.1:8081<i class="fas fa-external-link-alt"></i></a> ç«¯å£çš„æœåŠ¡</p></blockquote><p>é…ç½® Nginxï¼ŒLinux æœåŠ¡å™¨æ˜¯è¿›å…¥åˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd / etc / nginx / sites - enabled;</span><br></pre></td></tr></table></figure><p>ç„¶åä»¥ç®¡ç†å‘˜èº«ä»½ï¼Œæ–°å»ºä¸€ä¸ªä½ çš„ react é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼šreact-demo.confï¼Œç„¶åï¼Œç¼–è¾‘æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">upstream gusaifei &#123;</span><br><span class="line">    server <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8081</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name <span class="number">47.</span>xx.xx.xx;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Nginx-<span class="built_in">Proxy</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        proxy_pass http:<span class="comment">//gusaifei;</span></span><br><span class="line">        proxy_redirect off;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><blockquote><p>è·¯å¾„åœ°å€ cd /etc/nginx/conf.d</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        server_name mall.52react.cn;</span><br><span class="line">        root /root/www/firstweb/dist2;</span><br><span class="line">        index index.html;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">            #  proxy_pass http://admintest.happymmall.com;</span><br><span class="line">      # &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;   #é…ç½®ç›‘å¬ç«¯å£</span><br><span class="line">    server_name  first.52react.cn;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /root/www/firstweb/dist;     #æœåŠ¡é»˜è®¤å¯åŠ¨ç›®å½•</span><br><span class="line">        index  index.html index.htm;    #é»˜è®¤è®¿é—®æ–‡ä»¶</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #error_page  404              /404.html;   # é…ç½®404é¡µé¢</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;   #é”™è¯¯çŠ¶æ€ç çš„æ˜¾ç¤ºé¡µé¢ï¼Œé…ç½®åéœ€è¦é‡å¯</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    proxy_pass   http://127.0.0.1;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    root           html;</span><br><span class="line">    #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    #    fastcgi_index  index.php;</span><br><span class="line">    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">    #    include        fastcgi_params;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # deny access to .htaccess files, if Apache&#x27;s document root</span><br><span class="line">    # concurs with nginx&#x27;s one</span><br><span class="line">    #</span><br><span class="line">    #location ~ /\.ht &#123;</span><br><span class="line">    #    deny  all;</span><br><span class="line">    #&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²ä¸€ä¸ªé™æ€èµ„æ–™æ–‡ä»¶"><a href="#éƒ¨ç½²ä¸€ä¸ªé™æ€èµ„æ–™æ–‡ä»¶" class="headerlink" title="éƒ¨ç½²ä¸€ä¸ªé™æ€èµ„æ–™æ–‡ä»¶"></a>éƒ¨ç½²ä¸€ä¸ªé™æ€èµ„æ–™æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name mall.52react.cn;</span><br><span class="line">        root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;;  #å¤šå…¥å£æ–‡ä»¶è·¯å¾„View  å•å…¥å£æ–‡ä»¶è·¯å¾„ dist&#x2F;</span><br><span class="line">        index index.html;</span><br><span class="line"></span><br><span class="line">        #å¦‚æœcsså’Œjsæ— æ³•åŠ è½½å‡ºæ¥å¯èƒ½éœ€è¦é…ç½®ä»¥ä¸‹ä¿¡æ¯</span><br><span class="line">        location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|css|js|eot|svg|ttf|woff|woff2|properties|json)$ &#123;</span><br><span class="line">           root &#x2F;root&#x2F;product&#x2F;mall_shop;   #è·¯å¾„åˆ°é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">          if (-f $request_filename) &#123;</span><br><span class="line">            expires 1d;</span><br><span class="line">            break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        #é»˜è®¤åŠ è½½é¦–é¡µ</span><br><span class="line">        location &#x3D; &#x2F; &#123;</span><br><span class="line">        root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~ .*\.html$ &#123;</span><br><span class="line">       root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">    #è¯·æ±‚åå‘ä»£ç†ç”¨åˆ«çš„å€Ÿå£</span><br><span class="line">    location ~ .*\.do$ &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;test.happymmall.com;</span><br><span class="line">    &#125;</span><br><span class="line">    #é”™è¯¯é¡µé¢è·³è½¬å›é¦–é¡µ</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„-webpakc-è¾“å‡ºè·¯å¾„é…ç½®"><a href="#æ³¨æ„-webpakc-è¾“å‡ºè·¯å¾„é…ç½®" class="headerlink" title="æ³¨æ„ webpakc è¾“å‡ºè·¯å¾„é…ç½®"></a>æ³¨æ„ webpakc è¾“å‡ºè·¯å¾„é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">publicPath: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">filename: <span class="string">&#x27;js/[name].js&#x27;</span>, <span class="comment">//å¿…é¡»[name] ä¸ç„¶å†²çªæ–‡ä»¶åä¸€æ ·</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é‡å¯ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ£€æµ‹ä¸€ä¸‹é…ç½®è§„åˆ™"><a href="#é‡å¯ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ£€æµ‹ä¸€ä¸‹é…ç½®è§„åˆ™" class="headerlink" title="é‡å¯ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ£€æµ‹ä¸€ä¸‹é…ç½®è§„åˆ™"></a>é‡å¯ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ£€æµ‹ä¸€ä¸‹é…ç½®è§„åˆ™</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo nginx -t</span><br><span class="line"><span class="comment">//é‡å¯</span></span><br><span class="line">sudo nginx -s reload</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Nginx å®‰è£…è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå†æ¬¡ä¸åœ¨èµ˜è¿°ã€‚æ–‡ç« ä»å‡ºæ¥ Nginx çš„é»˜è®¤é¡µé¢ä¹‹åï¼Œéƒ¨ç½²è‡ªå·±çš„ç½‘ç«™å¼€å§‹ã€‚<br>æœ€æ–°ç‰ˆæœ¬ nginx é…ç½®æ˜¯ç”± 4 ä¸ªæ–‡ä»¶æ„æˆï¼Œåœ¨ Ubuntu ä¸­ï¼Œè¿™å‡ ä¸ªæ–‡ä»¶çš„è·¯å¾„åœ¨ï¼š/etc/nginx ä¸‹ï¼š</p><ol><li>conf.dï¼šç”¨æˆ·è‡ªå·±å®šä¹‰çš„ conf é…ç½®æ–‡ä»¶</li><li>sites-availableï¼šç³»ç»Ÿé»˜è®¤è®¾ç½®çš„é…ç½®æ–‡ä»¶ sites-availableï¼šç³»ç»Ÿé»˜è®¤è®¾ç½®çš„é…ç½®æ–‡ä»¶</li><li>sites-enabledï¼šç”± sites-available ä¸­çš„é…ç½®æ–‡ä»¶è½¬æ¢ç”Ÿæˆ sites-enabledï¼šç”± sites-available ä¸­çš„é…ç½®æ–‡ä»¶è½¬æ¢ç”Ÿæˆ</li><li>nginx.confï¼šæ±‡æ€»ä»¥ä¸Šä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼ŒåŒæ—¶é…ç½®æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•° nginx.confï¼šæ±‡æ€»ä»¥ä¸Šä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼ŒåŒæ—¶é…ç½®æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•°<br>åœ¨éƒ¨ç½²éœ€è¦çš„ web æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹·è´ sites-enabled ä¸­çš„ default æ–‡ä»¶åˆ° conf.d å¹¶ä¸”ä¿®æ”¹åå­—ä¸º **.conf ,ç„¶åè¿›è¡Œé…ç½®ï¼š</li></ol><p>å¦‚æœ nginx è¿˜æ˜¯æ— æ³•è®¿é—®è¿˜éœ€è¦è¯¥ä¸€ä¸ªåœ°æ–¹(ä¹‹å‰å‘äº†æˆ‘ä¸€å¤©)</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181101/d1mAhgAEJJ.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº†è§£ä¸‹css3è‡ªé€‚åº”å¸ƒå±€å•ä½vw,vh</title>
      <link href="2018/10/30/%E4%BA%86%E8%A7%A3%E4%B8%8Bcss3%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E5%8D%95%E4%BD%8Dvw,vh/"/>
      <url>2018/10/30/%E4%BA%86%E8%A7%A3%E4%B8%8Bcss3%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E5%8D%95%E4%BD%8Dvw,vh/</url>
      
        <content type="html"><![CDATA[<p>è§†å£å•ä½(Viewport units)</p><p>ä»€ä¹ˆæ˜¯è§†å£ï¼Ÿ </p><p>åœ¨æ¡Œé¢ç«¯ï¼Œè§†å£æŒ‡çš„æ˜¯åœ¨æ¡Œé¢ç«¯ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›è€Œåœ¨ç§»åŠ¨ç«¯ï¼Œå®ƒæ¶‰åŠ3ä¸ªè§†å£ï¼šLayout Viewportï¼ˆå¸ƒå±€è§†å£ï¼‰ï¼ŒVisual Viewportï¼ˆè§†è§‰è§†å£ï¼‰ï¼ŒIdeal Viewportï¼ˆç†æƒ³è§†å£ï¼‰ã€‚<br><a id="more"></a><br>è§†å£å•ä½ä¸­çš„â€œè§†å£â€ï¼Œæ¡Œé¢ç«¯æŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›ç§»åŠ¨ç«¯æŒ‡çš„å°±æ˜¯Viewportä¸­çš„Layout Viewportã€‚</p><p> æ ¹æ®CSS3è§„èŒƒï¼Œè§†å£å•ä½ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹4ä¸ªï¼š</p><pre><code>1.vwï¼š1vwç­‰äºè§†å£å®½åº¦çš„1%ã€‚2.vhï¼š1vhç­‰äºè§†å£é«˜åº¦çš„1%ã€‚3.vminï¼šé€‰å–vwå’Œvhä¸­æœ€å°çš„é‚£ä¸ªã€‚4.vmaxï¼šé€‰å–vwå’Œvhä¸­æœ€å¤§çš„é‚£ä¸ªã€‚</code></pre><p> vh and vwï¼šç›¸å¯¹äºè§†å£çš„é«˜åº¦å’Œå®½åº¦ï¼Œè€Œä¸æ˜¯çˆ¶å…ƒç´ çš„ï¼ˆCSSç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æœ€è¿‘çš„çˆ¶å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦ï¼‰ã€‚1vh ç­‰äº1/100çš„è§†å£é«˜åº¦ï¼Œ1vw ç­‰äº1/100çš„è§†å£å®½åº¦ã€‚</p><p>æ¯”å¦‚ï¼šæµè§ˆå™¨é«˜åº¦950pxï¼Œå®½åº¦ä¸º1920px, 1 vh = 950px/100 = 9.5 pxï¼Œ1vw = 1920px/100 =19.2 pxã€‚</p><p>vmaxç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå¤§çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å¤§çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vmaxã€‚</p><p>vminç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å°çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vminã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181101/dIaIiJF3la.png"                      alt="mark"                ></p><h2 id="vh-vwä¸-åŒºåˆ«"><a href="#vh-vwä¸-åŒºåˆ«" class="headerlink" title="vh/vwä¸%åŒºåˆ«"></a>vh/vwä¸%åŒºåˆ«</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181101/640m41j9Fg.png"                      alt="mark"                ></p><blockquote><p>å…¼å®¹æ€§é—®é¢˜(åœ¨ç§»åŠ¨ç«¯ iOS 8 ä»¥ä¸Šä»¥åŠ Android 4.4 ä»¥ä¸Šè·å¾—æ”¯æŒï¼Œå¹¶ä¸”åœ¨å¾®ä¿¡ x5 å†…æ ¸ä¸­ä¹Ÿå¾—åˆ°å®Œç¾çš„å…¨é¢æ”¯æŒ)</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181101/6E5EE5bm8g.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸš€å»ºé€ å°é£æœºåœºğŸšğŸšğŸš</title>
      <link href="2018/10/30/%F0%9F%9A%80%E5%BB%BA%E9%80%A0%E5%B0%8F%E9%A3%9E%E6%9C%BA%E5%9C%BA%F0%9F%9A%81%F0%9F%9A%81%F0%9F%9A%81/"/>
      <url>2018/10/30/%F0%9F%9A%80%E5%BB%BA%E9%80%A0%E5%B0%8F%E9%A3%9E%E6%9C%BA%E5%9C%BA%F0%9F%9A%81%F0%9F%9A%81%F0%9F%9A%81/</url>
      
        <content type="html"><![CDATA[<p>æ¯å¤©çœ‹çœ‹å¢™å¤–,ç¥æ¸…æ°”çˆ½,ä¸ä¼šè¢«æŸäº›ç»„ç»‡è’™è”½åŒçœ¼<br><a id="more"></a></p><h1 id="Debian-Ubuntu-CentOS6-ç³»ç»Ÿ-ShadowsocksR-ä¸€é”®å®‰è£…è„šæœ¬-é›†æˆé”é€Ÿ"><a href="#Debian-Ubuntu-CentOS6-ç³»ç»Ÿ-ShadowsocksR-ä¸€é”®å®‰è£…è„šæœ¬-é›†æˆé”é€Ÿ" class="headerlink" title="Debian/Ubuntu/CentOS6 ç³»ç»Ÿ ShadowsocksR ä¸€é”®å®‰è£…è„šæœ¬ (é›†æˆé”é€Ÿ)"></a>Debian/Ubuntu/CentOS6 ç³»ç»Ÿ ShadowsocksR ä¸€é”®å®‰è£…è„šæœ¬ (é›†æˆé”é€Ÿ)</h1><blockquote><p>ä½¿ç”¨æ­¤æ•™ç¨‹ï¼Œå¯ä»¥å®Œå…¨ä¸è¿‡è„‘å­çš„æ­å»ºå¥½ SSRï¼Œä¸”é€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ–</p></blockquote><ol><li>æ³¨æ„ 1ï¼š KVM/VMWARE/XEN æ‰æœ‰ç”¨ï¼Œé”é€Ÿä¸æ”¯æŒ openVZ ï¼</li><li>æ³¨æ„ 2ï¼šè„šæœ¬ä¼šä¸æ–­æ›´æ–°ï¼ˆç›®å‰æ—¶é—´ 2016.11.27ï¼‰ï¼Œè¯·å…³æ³¨é€—æ¯”æ ¹æ®åœ°åŸæ–‡</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https:<span class="comment">//raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><p>è¿è¡Œè„šæœ¬</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ssr.sh</span><br></pre></td></tr></table></figure><p>è¾“å…¥å¯¹åº”çš„æ•°å­—æ¥æ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.å®‰è£…ShadowsocksRæœåŠ¡ç«¯</span><br><span class="line">2.å®‰è£…libsodium(chacha20åŠ å¯†æ–¹å¼)</span><br><span class="line">3.æŸ¥çœ‹è´¦å·ä¿¡æ¯</span><br><span class="line">4.ä¿®æ”¹è´¦å·ä¿¡æ¯</span><br><span class="line">5.æ‰‹åŠ¨ä¿®æ”¹è´¦å·ä¿¡æ¯</span><br><span class="line">6.å¸è½½ShadowsocksRæœåŠ¡ç«¯</span><br><span class="line">7.æ›´æ–°ShadowsocksRæœåŠ¡ç«¯</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">8.å¯åŠ¨ShadowsocksR</span><br><span class="line">9.åœæ­¢ShadowsocksR</span><br><span class="line">10.é‡å¯ShadowsocksR</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">11.å®‰è£…é”é€Ÿï¼ˆServerSpeederï¼‰</span><br><span class="line">12.æŸ¥çœ‹é”é€ŸçŠ¶æ€</span><br><span class="line">13.åœæ­¢é”é€Ÿ</span><br><span class="line">14.é‡å¯é”é€Ÿ</span><br><span class="line">15.å¸è½½é”é€Ÿ</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><blockquote><p>è¾“å…¥ 1 ï¼Œå°±ä¼šå¼€å§‹å®‰è£… ShadowsocksR æœåŠ¡ç«¯ï¼Œå¹¶ä¸”ä¼šæç¤ºä½ è¾“å…¥ Shadowsocks çš„ ç«¯å£/å¯†ç /åŠ å¯†æ–¹å¼/åè®®/æ··æ·† ç­‰å‚æ•°ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Please input port <span class="keyword">for</span> shadowsocksR [<span class="number">1</span>-<span class="number">65535</span>]:</span><br><span class="line">(Default port: <span class="number">2333</span>):</span><br><span class="line"></span><br><span class="line">Please input password <span class="keyword">for</span> ShadowsocksR:</span><br><span class="line">(Default password: dou-bi.co):</span><br><span class="line"></span><br><span class="line">Please input method <span class="keyword">for</span> ShadowsocksR:</span><br><span class="line">(Default method: aes-<span class="number">256</span>-cfb):</span><br><span class="line"></span><br><span class="line">Please input protocol <span class="keyword">for</span> ShadowsocksR:</span><br><span class="line">(Default protocol: auth_sha1_v4):</span><br><span class="line"></span><br><span class="line">Please input obfs <span class="keyword">for</span> ShadowsocksR:</span><br><span class="line">(Default obfs: tls1.2_ticket_auth):</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>åŒæ—¶æœ€åä¹Ÿä¼šæç¤ºæ˜¯å¦è®¾ç½® åè®®å’Œæ··æ·† å…¼å®¹åŸç‰ˆï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨åŸç‰ˆ SS ä¹Ÿèƒ½é“¾æ¥ï¼‰ï¼Œä¸æ‡‚ ç›´æ¥å›è½¦ æˆ– è¾“å…¥ y ã€‚</p></blockquote><h2 id="å¦‚æœå®‰è£…è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆæœ€åå°±ä¼šæç¤ºï¼š"><a href="#å¦‚æœå®‰è£…è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆæœ€åå°±ä¼šæç¤ºï¼š" class="headerlink" title="å¦‚æœå®‰è£…è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆæœ€åå°±ä¼šæç¤ºï¼š"></a>å¦‚æœå®‰è£…è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆæœ€åå°±ä¼šæç¤ºï¼š</h2><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">############################################################</span><br><span class="line"></span><br><span class="line"> Your ShadowsocksR info : </span><br><span class="line"></span><br><span class="line"> Server IP: VPS_IP</span><br><span class="line"> Server Port: <span class="number">2333</span></span><br><span class="line"> Password: dou-bi.co</span><br><span class="line"> Method: aes<span class="number">-256</span>-cfb</span><br><span class="line"> Protocol: auth_sha1_v4_compatible</span><br><span class="line"> Obfs: tls1<span class="number">.2</span>_ticket_auth_compatible</span><br><span class="line"></span><br><span class="line"> SS url: ss:<span class="comment">//XXXXXXXXXXXXXXXXXXXXX </span></span><br><span class="line"> QR <span class="keyword">code</span>: http:<span class="comment">//pan.baidu.com/share/qrcode?w=300&amp;h=300&amp;url=ss://XXXXXXXXXXXXXXXXXXXXX </span></span><br><span class="line">Tip: Open the link above will be able to see two-dimensional <span class="keyword">code</span> picture.</span><br><span class="line">Tip: The protocol and obfs last [ _compatible ] refer to the compatible original.</span><br><span class="line"></span><br><span class="line">############################################################</span><br><span class="line"></span><br><span class="line">ShadowsocksR install completed!</span><br><span class="line">https:<span class="comment">//www.dou-bi.co</span></span><br><span class="line"></span><br><span class="line">############################################################</span><br></pre></td></tr></table></figure><p>SS url æ˜¯ SS é“¾æ¥ï¼ˆæ ¼å¼ï¼š ss://XXXXXXX ï¼Œå¾ˆé•¿ï¼‰ï¼Œå¯ä»¥ä»å‰ªè¾‘ç‰ˆå¯¼å…¥ Shadowsocks å®¢æˆ·ç«¯ï¼Œä¸æ‡‚çš„è¯çœ‹ä¸‹é¢äºŒç»´ç ã€‚</p><p>QR code æ˜¯äºŒç»´ç ï¼Œå¤åˆ¶åé¢çš„é“¾æ¥åœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œå°±ä¼šæ˜¾ç¤ºä¸€ä¸ªäºŒç»´ç çš„å›¾ç‰‡ï¼Œå¯ä»¥ç”¨ Shadowsocks å®¢æˆ·ç«¯æ‰«æäºŒç»´ç æ¥æ·»åŠ ã€‚</p><h3 id="ä¹‹åå›åˆ°èœå•ç•Œé¢-æŒ‰14"><a href="#ä¹‹åå›åˆ°èœå•ç•Œé¢-æŒ‰14" class="headerlink" title="ä¹‹åå›åˆ°èœå•ç•Œé¢ æŒ‰14"></a>ä¹‹åå›åˆ°èœå•ç•Œé¢ æŒ‰14</h3><p>ä¸€é”®å®‰è£…é€Ÿé”</p><h3 id="å…¶ä»–è¯´æ˜"><a href="#å…¶ä»–è¯´æ˜" class="headerlink" title="å…¶ä»–è¯´æ˜"></a>å…¶ä»–è¯´æ˜</h3><p>é»˜è®¤å·²ç»æ·»åŠ å¼€æœºå¯åŠ¨ã€‚</p><p>ShadowsocksR é»˜è®¤æ”¯æŒ UDP è½¬å‘ã€‚</p><p>æœ¬è„šæœ¬å·²ç»é›†æˆäº† å®‰è£… / å¸è½½ é”é€Ÿ (ServerSpeeder) å¼€å¿ƒç‰ˆï¼Œä½†æ˜¯æ˜¯å¦æ”¯æŒè¯·æŸ¥çœ‹ Linux æ”¯æŒå†…æ ¸åˆ—è¡¨ ã€‚ï¼ˆé”é€Ÿä¸æ”¯æŒ OpenVZï¼‰</p><p>å¤šç«¯å£é…ç½®çš„è¯ï¼Œè„šæœ¬å®ç°å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä¸ä¼šåŠ å…¥è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦çš„äººè¿˜æ˜¯æ‰‹åŠ¨æ›´æ”¹ä¸ºå¤šç«¯å£å§ï¼šShadowsocksR å¤šç«¯å£é…ç½®</p><p>ShadowsocksR ç›®å‰æ”¯æŒçš„åè®®å’Œæ··æ·†ï¼š</p><blockquote><p>åè®®ï¼ˆProtocolï¼‰ï¼šoriginï¼Œverify_sha1ï¼Œauth_sha1_v2ï¼Œauth_sha1_v4ï¼Œauth_aes128_md5ï¼Œauth_aes128_sha1<br>æ··æ·†ï¼ˆObfsï¼‰ï¼šplainï¼Œhttp_simpleï¼Œhttp_postï¼Œrandom_headï¼Œtls1.2_ticket_auth<br>origin å’Œ plain æ˜¯åŸç‰ˆï¼ŒåŠ ç²—çš„æ˜¯æ¨èä½¿ç”¨çš„ï¼Œå‡æ”¯æŒ å…¼å®¹åŸç‰ˆï¼ˆä¹Ÿå°±æ˜¯åŠ åç¼€ _compatibleï¼‰ã€‚</p></blockquote><h1 id="å¦‚ä½•ä¿®æ”¹CentOS6å†…æ ¸æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸"><a href="#å¦‚ä½•ä¿®æ”¹CentOS6å†…æ ¸æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸" class="headerlink" title="å¦‚ä½•ä¿®æ”¹CentOS6å†…æ ¸æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸"></a>å¦‚ä½•ä¿®æ”¹CentOS6å†…æ ¸æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸</h1><blockquote><p>åœ¨é”é€ŸServerSpeederæ— é™å¸¦å®½ç‰ˆLinuxä¸€é”®è‡ªåŠ¨å®‰è£…åŒ…æ–‡ç« ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ä¸€é”®åŒ…å®‰è£…é”é€Ÿï¼Œä¼˜åŒ–æœåŠ¡å™¨ç½‘ç»œé€Ÿåº¦ã€‚å…¶å®è¦æƒ³åœ¨è‡ªå·±çš„VPSå®‰è£…é”é€Ÿï¼Œé¦–å…ˆå†…æ ¸å¿…é¡»è¦åŒ¹é…é”é€Ÿç‰ˆæœ¬ã€‚å¦‚æœå†…æ ¸ä¸æ”¯æŒå®‰è£…é”é€Ÿï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å†…æ ¸ä¸ºæ”¯æŒå®‰è£…é”é€Ÿç‰ˆæœ¬ï¼Œä¸è¿‡OpenVZè™šæ‹ŸæŠ€æœ¯æ¶è®¾çš„VPSæ˜¯æ— æ³•æ˜¯æ— æ³•æ›´æ¢å†…æ ¸ï¼Œå¦å¤–å¹¶ä¸æ˜¯æ‰€æœ‰çš„XENå’ŒKVMè™šæ‹ŸæŠ€æœ¯æ¶è®¾çš„VPSéƒ½æ”¯æŒæ›´æ¢å†…æ ¸ï¼ŒåƒLinode VPSå°±ä¸æ”¯æŒä»¥ä¸‹æ–¹æ³•ä¿®æ”¹ï¼Œéœ€åœ¨VPSç®¡ç†é¡µé¢ä¿®æ”¹ï¼ˆLinode VPSå¦‚ä½•åœ¨ç®¡ç†é¡µé¢æ›´æ¢å†…æ ¸ï¼‰ã€‚</p></blockquote><p>CentOS 6æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸ï¼š2.6.32-504.3.3.el6.x86_64</p><h3 id="1ã€é¦–å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤ä¸ºè‡ªå·±çš„VPSä¸‹è½½å®‰è£…å†…æ ¸ã€‚"><a href="#1ã€é¦–å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤ä¸ºè‡ªå·±çš„VPSä¸‹è½½å®‰è£…å†…æ ¸ã€‚" class="headerlink" title="1ã€é¦–å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤ä¸ºè‡ªå·±çš„VPSä¸‹è½½å®‰è£…å†…æ ¸ã€‚"></a>1ã€é¦–å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤ä¸ºè‡ªå·±çš„VPSä¸‹è½½å®‰è£…å†…æ ¸ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname -r #æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬</span><br><span class="line">rpm -ivh http:<span class="comment">//xz.wn789.com/CentOSkernel/kernel-firmware-2.6.32-504.3.3.el6.noarch.rpm</span></span><br><span class="line">rpm -ivh http:<span class="comment">//xz.wn789.com/CentOSkernel/kernel-2.6.32-504.3.3.el6.x86_64.rpm --force</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181030/Jhjmg4Eg31.png"                      alt="mark"                ></p><h3 id="2ã€æ‰§è¡Œå‘½ä»¤â€œrpm-qa-grep-kernelâ€ï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦å®‰è£…æˆåŠŸã€‚å¦‚æœæ˜¾ç¤ºä½ å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚"><a href="#2ã€æ‰§è¡Œå‘½ä»¤â€œrpm-qa-grep-kernelâ€ï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦å®‰è£…æˆåŠŸã€‚å¦‚æœæ˜¾ç¤ºä½ å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚" class="headerlink" title="2ã€æ‰§è¡Œå‘½ä»¤â€œrpm -qa | grep kernelâ€ï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦å®‰è£…æˆåŠŸã€‚å¦‚æœæ˜¾ç¤ºä½ å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚"></a>2ã€æ‰§è¡Œå‘½ä»¤â€œrpm -qa | grep kernelâ€ï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦å®‰è£…æˆåŠŸã€‚å¦‚æœæ˜¾ç¤ºä½ å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep kernel</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181030/kAkdCBc20H.png"                      alt="mark"                ></p><h3 id="3ã€é‡å¯VPSï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚"><a href="#3ã€é‡å¯VPSï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚" class="headerlink" title="3ã€é‡å¯VPSï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚"></a>3ã€é‡å¯VPSï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reboot #é‡å¯VPS</span><br><span class="line">uname -r #å½“å‰ä½¿ç”¨å†…æ ¸ç‰ˆæœ¬</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181030/J0i3Bk5iDC.png"                      alt="mark"                ></p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181030/FDCGf3FfBD.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°é£æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4.0 å‡çº§</title>
      <link href="2018/10/26/webpack4.0%20%E5%8D%87%E7%BA%A7/"/>
      <url>2018/10/26/webpack4.0%20%E5%8D%87%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<p>webpack3.0â€”â€“&gt;4.0çš„å‡çº§<br><a id="more"></a><br>packjson.js</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181026/IA5ejGJimD.png"                      alt="mark"                ></p><p>webpack.js</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181026/1Aie4LbgEG.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactå¦‚ä½•æ¸²æŸ“å¤§æ•°æ®é‡çš„åˆ—è¡¨</title>
      <link href="2018/10/25/React%E5%A6%82%E4%BD%95%E6%B8%B2%E6%9F%93%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E7%9A%84%E5%88%97%E8%A1%A8/"/>
      <url>2018/10/25/React%E5%A6%82%E4%BD%95%E6%B8%B2%E6%9F%93%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E7%9A%84%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™ç§éœ€æ±‚ï¼Œæ ¹æ®æ•°æ®å±•ç¤ºåˆ—è¡¨ã€‚è¿™ç§ä»£ç ä¼°è®¡ä½ å·²ç»æ’¸è¿‡æˆç™¾ä¸Šåƒæ¬¡äº†ã€‚</p><p>ä½†å¦‚æœä½ éœ€è¦åŒæ—¶å±•ç¤ºæˆåƒä¸Šä¸‡æ¡æ•°æ®å‘¢ï¼Œå¿…ç„¶ä¼šé€ æˆæµè§ˆå™¨å¡é¡¿ï¼Œä¸¢å¸§ï¼Œç”šè‡³å¡æ­»çš„é—®é¢˜ã€‚<br>ç°åœ¨ä»‹ç»åˆ©ç”¨react-virtualizedæ¥é«˜æ•ˆæ¸²æŸ“å¤§æ•°æ®é‡åˆ—è¡¨ã€‚<br><a id="more"></a></p><h3 id="é¦–å…ˆåˆ›å»ºä¸€ä¸ªReact-åº”ç”¨"><a href="#é¦–å…ˆåˆ›å»ºä¸€ä¸ªReact-åº”ç”¨" class="headerlink" title="é¦–å…ˆåˆ›å»ºä¸€ä¸ªReact åº”ç”¨"></a>é¦–å…ˆåˆ›å»ºä¸€ä¸ªReact åº”ç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create-react-app virtualization</span><br><span class="line"></span><br><span class="line">cd virtualization</span><br><span class="line"></span><br><span class="line">npm install --save lorem-ipsum <span class="comment">//å¼•å…¥ç¬¬ä¸‰æ–¹åº“lorem-ipsumæ¥ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> loremIpsum <span class="keyword">from</span> <span class="string">&#x27;lorem-ipsum&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¥ä¸‹æ¥åˆ›é€ ä¸€ä¸ª1000æ¡æ•°æ®çš„æ•°ç»„ï¼š"><a href="#æ¥ä¸‹æ¥åˆ›é€ ä¸€ä¸ª1000æ¡æ•°æ®çš„æ•°ç»„ï¼š" class="headerlink" title="æ¥ä¸‹æ¥åˆ›é€ ä¸€ä¸ª1000æ¡æ•°æ®çš„æ•°ç»„ï¼š"></a>æ¥ä¸‹æ¥åˆ›é€ ä¸€ä¸ª1000æ¡æ•°æ®çš„æ•°ç»„ï¼š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rowCount = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.list = <span class="built_in">Array</span>(rowCount).fill().map(<span class="function">(<span class="params">val, idx</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        id: idx,</span><br><span class="line">        name: <span class="string">&#x27;John Doe&#x27;</span>,</span><br><span class="line">        image: <span class="string">&#x27;http://via.placeholder.com/40&#x27;</span>,</span><br><span class="line">        text: loremIpsum(&#123;</span><br><span class="line">          count: <span class="number">1</span>,</span><br><span class="line">          units: <span class="string">&#x27;sentences&#x27;</span>,</span><br><span class="line">          sentenceLowerBound: <span class="number">4</span>,</span><br><span class="line">          sentenceUpperBound: <span class="number">8</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">        &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">        &lt;h1 className=<span class="string">&quot;App-title&quot;</span>&gt;Welcome to React&lt;/h1&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.list.map(<span class="built_in">this</span>.renderRow.bind(<span class="built_in">this</span>))&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">renderRow</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div key=&#123;item.id&#125; className=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;image&quot;</span>&gt;</span><br><span class="line">        &lt;img src=&#123;item.image&#125; alt=<span class="string">&quot;&quot;</span> /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;&#123;item.name&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&#123;item.text&#125;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨-src-App-css-ä¸­åŠ ç‚¹æ ·å¼ï¼š"><a href="#åœ¨-src-App-css-ä¸­åŠ ç‚¹æ ·å¼ï¼š" class="headerlink" title="åœ¨ src/App.css ä¸­åŠ ç‚¹æ ·å¼ï¼š"></a>åœ¨ src/App.css ä¸­åŠ ç‚¹æ ·å¼ï¼š</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.row</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ebeced</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/Ggf2f2A6e9.png"                      alt="mark"                ></p><p>ä¸‹é¢æˆ‘ä»¬ç”¨Chromeï¼Œåªéœ€å‡ æ­¥ï¼Œå¿«é€Ÿæµ‹è¯•æ€§èƒ½ï¼š</p><ol><li>æ‰“å¼€å¼€å‘è€…å·¥å…·</li><li>æŒ‰Command+Shift+P (Mac) or Control+Shift+P (Windows, Linux) æ¥æ‰“å¼€å‘½ä»¤èœå•</li><li>è¾“å…¥ renderï¼Œä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© Show Renderingã€‚</li><li>ç‚¹å‡» render é¡µç­¾ï¼ŒFPS Meter å‰æ‰“é’©ã€‚</li><li>æ»šåŠ¨åˆ—è¡¨</li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/1jaF57C5gF.gif"                      alt="mark"                ></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æ»šåŠ¨æ¡æ»šåŠ¨çš„æ—¶å€™ï¼Œå¸§ç‡ä»60æ‰åˆ°äº†38å·¦å³ã€‚è¿™è¿˜æ˜¯åªæœ‰1000æ¡æ•°æ®æƒ…å†µï¼Œå¦‚æœå†å¢å¤§æ•°æ®ï¼Œæµè§ˆå™¨ä¼šå‡ºç°å¡é¡¿ï¼Œç”šè‡³å¡æ­»ã€‚</p><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹react-virtualizedæ˜¯å¦‚ä½•æé«˜æ€§èƒ½çš„ï¼Ÿ</p><h3 id="react-virtualizedåŸç†"><a href="#react-virtualizedåŸç†" class="headerlink" title="react-virtualizedåŸç†"></a>react-virtualizedåŸç†</h3><p>æ ¸å¿ƒåŸç†ï¼šåªæ¸²æŸ“ä½ æ‰€è§çš„ã€‚<br>ä¸Šé¢çš„åº”ç”¨æ¸²æŸ“äº†1000æ¡è¯„è®ºï¼Œä½†å±å¹•åªä¸ºä½ å±•ç¤ºäº†10æ¥æ¡æ•°æ®ï¼Œé‚£å¦å¤–990æ¡çš„æ¸²æŸ“å°±æ˜¯æµªè´¹çš„ã€‚<br>å¦‚æœæˆ‘ä»¬åªæ¸²æŸ“å¯è§çš„è¯„è®ºï¼Œå½“é¼ æ ‡æ»šåŠ¨æŸ¥çœ‹æ›´å¤šçš„æ—¶å€™ï¼Œå°†æ–°çš„èŠ‚ç‚¹æ›¿æ¢æ—§çš„èŠ‚ç‚¹ã€‚è¿™æ ·å°±å®Œç¾è§£å†³äº†æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ã€‚</p><h4 id="ä¿®æ”¹app-js"><a href="#ä¿®æ”¹app-js" class="headerlink" title="ä¿®æ”¹app.js"></a>ä¿®æ”¹app.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> loremIpsum <span class="keyword">from</span> <span class="string">&quot;lorem-ipsum&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; List &#125; <span class="keyword">from</span> <span class="string">&quot;react-virtualized&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rowCount = <span class="number">1000</span>;  <span class="comment">//æ€»æ¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listHeight = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rowHeight = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rowWidth = <span class="number">800</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.list = <span class="built_in">Array</span>(rowCount)</span><br><span class="line">      .fill()</span><br><span class="line">      .map(<span class="function">(<span class="params">val, idx</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          id: idx,</span><br><span class="line">          name: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">          image: <span class="string">&quot;http://via.placeholder.com/40&quot;</span>,</span><br><span class="line">          text: loremIpsum(&#123;</span><br><span class="line">            count: <span class="number">1</span>,</span><br><span class="line">            units: <span class="string">&quot;sentences&quot;</span>,</span><br><span class="line">            sentenceLowerBound: <span class="number">4</span>,</span><br><span class="line">            sentenceUpperBound: <span class="number">8</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">          &lt;List</span><br><span class="line">            width=&#123;rowWidth&#125;</span><br><span class="line">            height=&#123;listHeight&#125;</span><br><span class="line">            rowHeight=&#123;rowHeight&#125;</span><br><span class="line">            rowRenderer=&#123;<span class="built_in">this</span>.renderRow.bind(<span class="built_in">this</span>)&#125;</span><br><span class="line">            rowCount=&#123;<span class="built_in">this</span>.list.length&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">renderRow</span>(<span class="params">&#123; index, key, style &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div key=&#123;key&#125; style=&#123;style&#125; className=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;image&quot;</span>&gt;</span><br><span class="line">          &lt;img src=&#123;<span class="built_in">this</span>.list[index].image&#125; alt=<span class="string">&quot;&quot;</span> /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">          &lt;div&gt;&#123;<span class="built_in">this</span>.list[index].name&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div&gt;&#123;<span class="built_in">this</span>.list[index].text&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/ac15iKaabB.png"                      alt="mark"                ></p><blockquote><p> æ€§èƒ½æ˜æ˜¾æå‡ğŸ’ªğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆå››ï¼‰</title>
      <link href="2018/10/24/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>2018/10/24/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="å†™ä¸ªæœ€ç®€å•çš„APIå§"><a href="#å†™ä¸ªæœ€ç®€å•çš„APIå§" class="headerlink" title="å†™ä¸ªæœ€ç®€å•çš„APIå§"></a>å†™ä¸ªæœ€ç®€å•çš„APIå§</h1><a id="more"></a><h3 id="å…ˆå†™ä¸ªapp-js"><a href="#å…ˆå†™ä¸ªapp-js" class="headerlink" title="å…ˆå†™ä¸ªapp.js"></a>å…ˆå†™ä¸ªapp.js</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/369j27hALi.png"                      alt="mark"                ></p><h3 id="å†å†™routes-js"><a href="#å†å†™routes-js" class="headerlink" title="å†å†™routes.js"></a>å†å†™routes.js</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/gJiHHBI9eH.png"                      alt="mark"                ></p><h3 id="æœ€åå†è°ƒç”¨user-js"><a href="#æœ€åå†è°ƒç”¨user-js" class="headerlink" title="æœ€åå†è°ƒç”¨user.js"></a>æœ€åå†è°ƒç”¨user.js</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181025/feAJleB60h.png"                      alt="mark"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>androidçŠ¶æ€æ ä¸èƒŒæ™¯å›¾ç‰‡çš„èåˆ</title>
      <link href="2018/10/20/Android%E7%8A%B6%E6%80%81%E6%A0%8F%E4%B8%8E%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E7%9A%84%E8%9E%8D%E5%90%88/"/>
      <url>2018/10/20/Android%E7%8A%B6%E6%80%81%E6%A0%8F%E4%B8%8E%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E7%9A%84%E8%9E%8D%E5%90%88/</url>
      
        <content type="html"><![CDATA[<p>çŠ¶æ€æ èåˆ<br><a id="more"></a></p><h4 id="ä¼˜åŒ–å‰æ•ˆæœ"><a href="#ä¼˜åŒ–å‰æ•ˆæœ" class="headerlink" title="ä¼˜åŒ–å‰æ•ˆæœ"></a>ä¼˜åŒ–å‰æ•ˆæœ</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/8EgJmE2La1.jpg"                      alt="mark"                ></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°èƒŒæ™¯ä¸çŠ¶æ€æ èåˆåœ¨ä¸€èµ· androidå¤§äº5.0æ”¯æŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</span><br><span class="line">    View decorView = getWindow().getDecorView();</span><br><span class="line">    <span class="keyword">int</span> option = View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION ;</span><br><span class="line">    decorView.setSystemUiVisibility(option);</span><br><span class="line">    getWindow().setStatusBarColor(Color.TRANSPARENT);<span class="comment">//è®¾ç½®çŠ¶æ€æ é€æ˜</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–åæ•ˆæœ"><a href="#ä¼˜åŒ–åæ•ˆæœ" class="headerlink" title="ä¼˜åŒ–åæ•ˆæœ"></a>ä¼˜åŒ–åæ•ˆæœ</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/7bfeCf6J9F.jpg"                      alt="mark"                ></p><p>å¢åŠ çŠ¶æ€æ é«˜åº¦</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/HEidLc8D0c.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RecyclerViewâœŒï¸è¿›é˜¶</title>
      <link href="2018/10/12/RecyclerView%E2%9C%8C%EF%B8%8F%E8%BF%9B%E9%98%B6/"/>
      <url>2018/10/12/RecyclerView%E2%9C%8C%EF%B8%8F%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨åšé¡¹ç›®90%è¦ç”¨åˆ°recyclerView<br><a id="more"></a></p><h3 id="1-å¼•å…¥recyclerView"><a href="#1-å¼•å…¥recyclerView" class="headerlink" title="1 å¼•å…¥recyclerView"></a>1 å¼•å…¥recyclerView</h3><p>åœ¨moudleä¸­çš„build.gradleæ–‡ä»¶é‡Œï¼Œæ‰¾åˆ°dependenciesï¼Œæ·»åŠ å…³äºrecyclerViewçš„å¼•ç”¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.android.support:recyclerview-v7:24.2.0&#x27;</span><br></pre></td></tr></table></figure><p>å…¶å®designåŒ…ä¸­å«æœ‰Material Designç›¸å…³çš„å¾ˆå¤šæ§ä»¶ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†recyclerViewçš„ä»£ç ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥é€šè¿‡å¼•ç”¨designåŒ…æ¥ä½¿ç”¨recyclerViewï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.android.support:design:23.2.0&#x27;</span><br></pre></td></tr></table></figure><h3 id="2-åœ¨xmlä¸­å†™ä¸€ä¸ªrecyclerView"><a href="#2-åœ¨xmlä¸­å†™ä¸€ä¸ªrecyclerView" class="headerlink" title="2 åœ¨xmlä¸­å†™ä¸€ä¸ªrecyclerView"></a>2 åœ¨xmlä¸­å†™ä¸€ä¸ªrecyclerView</h3><p>åœ¨MainActivityä¸­æ·»åŠ ä¸€ä¸ªRecyclerViewè¿›è¡Œå±•ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">        &lt;android.support.v7.widget.RecyclerView</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            android:id=&quot;@+id/recyclerView&quot;/&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-åœ¨javaä¸­ç»™recyclerViewè®¾ç½®æ•°æ®"><a href="#3-åœ¨javaä¸­ç»™recyclerViewè®¾ç½®æ•°æ®" class="headerlink" title="3 åœ¨javaä¸­ç»™recyclerViewè®¾ç½®æ•°æ®"></a>3 åœ¨javaä¸­ç»™recyclerViewè®¾ç½®æ•°æ®</h3><p>åœ¨MainActivityä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">    setSupportActionBar(toolbar);</span><br><span class="line">    initView();</span><br><span class="line">    initData();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;String&gt; datas = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> i =<span class="string">&#x27;A&#x27;</span>;i&lt;=<span class="string">&#x27;Z&#x27;</span>;i++)&#123;</span><br><span class="line">        datas.add(i+<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    mRecyclerView.setAdapter(<span class="keyword">new</span> MyAdapter(getApplicationContext(),datas));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mRecyclerView = (RecyclerView) findViewById(R.id.recyclerView);</span><br><span class="line">    <span class="comment">//å¿…é¡»è¦æŒ‡å®šå±•ç¤ºçš„æ•ˆæœï¼Œè®¾ç½®ä¸€ä¸ªLayoutManagerï¼Œä¸ç„¶è¿˜æ˜¯ä¼šä¸€ç‰‡ç©ºç™½</span></span><br><span class="line">    LinearLayoutManager linearLayoutManager = <span class="keyword">new</span> LinearLayoutManager(getApplicationContext());</span><br><span class="line">    mRecyclerView.setLayoutManager(linearLayoutManager);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨MyAdapterä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; datas;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAdapter</span><span class="params">(Context applicationContext, ArrayList&lt;String&gt; datas)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.datas = datas;</span><br><span class="line">        <span class="keyword">this</span>.mContext = applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//RecyclerViewçš„Adapterå·²ç»é›†æˆäº†ViewHolder</span></span><br><span class="line">    <span class="comment">//getViewä¸­çš„ä¸¤æ®µé€»è¾‘ 1 åˆ›å»ºviewå¯¹è±¡ï¼ˆå°†xmlè½¬ä¸ºviewï¼‰   2 æ‰¾åˆ°viewå¯¹è±¡é‡Œé¢çš„ä¸€äº›æ§ä»¶ï¼Œå¯¹å…¶è¿›è¡Œä¸€äº›å±•ç¤ºçš„è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//onCreateViewHolder ä¸­æ‰§è¡Œç¬¬ä¸€æ®µé€»è¾‘ï¼Œåˆ›å»ºå‡ºviewï¼Œè®¾ç½®åˆ°ä¸€ä¸ªViewHolderä¸­ï¼Œå†å°†holderè¿”å›</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºfalseï¼Œå¦‚æœä¸ºtrueçš„è¯ï¼Œç”Ÿæˆçš„è¿™ä¸ªviewå…¶å®å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°æŒ‡å‘çš„parentï¼Œä¼šé€ æˆæŠ¥é”™çš„</span></span><br><span class="line">        View view = LayoutInflater.from(mContext).inflate(R.layout.item_recyclerview, parent,<span class="keyword">false</span>);</span><br><span class="line">        MyViewHolder holder = <span class="keyword">new</span> MyViewHolder(view);</span><br><span class="line">        <span class="keyword">return</span> holder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»™holderé‡Œçš„æ§ä»¶è®¾ç½®æ•°æ®</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        ((MyViewHolder)holder) .mTextView.setText(datas.get(position));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Count æ§åˆ¶æ§ä»¶æœ‰å¤šå°‘ä¸ªitem</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> datas.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TextView mTextView;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(itemView);</span><br><span class="line">        mTextView = (TextView) itemView.findViewById(R.id.tv_item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-ç»™recyclerViewè®¾ç½®ä¸åŒçš„å±•ç¤ºæ•ˆæœ"><a href="#4-ç»™recyclerViewè®¾ç½®ä¸åŒçš„å±•ç¤ºæ•ˆæœ" class="headerlink" title="4 ç»™recyclerViewè®¾ç½®ä¸åŒçš„å±•ç¤ºæ•ˆæœ"></a>4 ç»™recyclerViewè®¾ç½®ä¸åŒçš„å±•ç¤ºæ•ˆæœ</h3><p>è®¾ç½®èœå•æ¥æä¾›å¤šä¸ªç‚¹å‡»äº‹ä»¶ã€‚é¦–å…ˆç»™res/menu/menu_main.xmlä¿®æ”¹ä¸ºä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">tools:context</span>=<span class="string">&quot;com.a520it.recyclerview.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_listview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;listView&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_gridview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;gridView&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_hor_gridview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;æ¨ªå‘çš„gridView&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_stagger&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;äº¤é”™çš„ç€‘å¸ƒæµ&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨MainActivityä¸­ï¼Œä¿®æ”¹èœå•ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id = item.getItemId();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (id == R.id.action_listview) &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;listview&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(id == R.id.action_gridview) &#123;</span><br><span class="line">        GridLayoutManager gridLayoutManager = <span class="keyword">new</span> GridLayoutManager(getApplicationContext(), <span class="number">3</span>);</span><br><span class="line">        mRecyclerView.setLayoutManager(gridLayoutManager);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;gridview&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(id == R.id.action_hor_gridview) &#123;</span><br><span class="line">        GridLayoutManager gridLayoutManager = <span class="keyword">new</span> GridLayoutManager(getApplicationContext(),</span><br><span class="line">                <span class="number">3</span>,GridLayoutManager.HORIZONTAL,<span class="keyword">true</span>);</span><br><span class="line">        mRecyclerView.setLayoutManager(gridLayoutManager);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;æ¨ªå‘çš„gridview&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(id == R.id.action_stagger) &#123;</span><br><span class="line">        StaggeredGridLayoutManager staggeredGridLayoutManager =</span><br><span class="line">                <span class="keyword">new</span> StaggeredGridLayoutManager(<span class="number">3</span>, StaggeredGridLayoutManager.HORIZONTAL);</span><br><span class="line">        mRecyclerView.setLayoutManager(staggeredGridLayoutManager);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;äº¤é”™çš„ç€‘å¸ƒæµ&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯è®¾ç½®äº†ä¸åŒçš„LayoutManagerç»™RecyclerViewè€Œå·²ã€‚</p><h3 id="5-ç»™RecyclerViewæ·»åŠ ç‚¹å‡»æ•ˆæœ"><a href="#5-ç»™RecyclerViewæ·»åŠ ç‚¹å‡»æ•ˆæœ" class="headerlink" title="5 ç»™RecyclerViewæ·»åŠ ç‚¹å‡»æ•ˆæœ"></a>5 ç»™RecyclerViewæ·»åŠ ç‚¹å‡»æ•ˆæœ</h3><p>RecyclerViewæ²¡æœ‰æä¾›OnItemClickç›¸å…³çš„itemç‚¹å‡»æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å»å®ç°ã€‚è¿™é‡Œæ˜¯é€šè¿‡åœ¨Adapterä¸­å»å®ç°çš„ã€‚åœ¨Adapterä¸­å…ˆè‡ªå®šä¹‰ä¸€ä¸ªOnItemClickListenerï¼Œç„¶ååœ¨Adapterä¸­çš„onBindViewHolderæ–¹æ³•ä¸­ï¼Œç»™holder.itemViewè®¾ç½®OnClickListenerï¼Œå¹¶åœ¨OnClickListenerçš„ç‚¹å‡»æ–¹æ³•ä¸­ï¼Œè°ƒç”¨è‡ªå®šä¹‰çš„OnItemClickListenerã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//ç»™holderé‡Œçš„æ§ä»¶è®¾ç½®æ•°æ®</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(<span class="keyword">final</span> RecyclerView.ViewHolder holder, <span class="keyword">final</span> <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        ((MyViewHolder)holder) .mTextView.setText(datas.get(position));</span><br><span class="line">        <span class="comment">//ç»™itemæ·»åŠ ä¸€ä¸ªç‚¹å‡»</span></span><br><span class="line">        holder.itemView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line"><span class="comment">//                Toast.makeText(mContext, &quot;ç‚¹å‡»äº†item&quot;+position, Toast.LENGTH_SHORT).show();</span></span><br><span class="line">                mOnItemClickListener.onItemClick(position,holder.itemView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mOnItemClickListener = onItemClickListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> OnItemClickListener mOnItemClickListener = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnItemClickListener</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(<span class="keyword">int</span> position,View itemView)</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨MainActivityä¸­è®¾ç½®è‡ªå®šä¹‰çš„OnItemClickListenerå³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ....</span><br><span class="line">    myAdapter.setOnItemClickListener(<span class="keyword">new</span> MyAdapter.OnItemClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(<span class="keyword">int</span> position, View itemView)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;position: &quot;</span>+position, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-ç»™RecyclerViewè®¾ç½®åŠ¨ç”»æ•ˆæœ"><a href="#6-ç»™RecyclerViewè®¾ç½®åŠ¨ç”»æ•ˆæœ" class="headerlink" title="6 ç»™RecyclerViewè®¾ç½®åŠ¨ç”»æ•ˆæœ"></a>6 ç»™RecyclerViewè®¾ç½®åŠ¨ç”»æ•ˆæœ</h3><p>ç»™èœå•å†æ·»åŠ ä¸¤ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ—¶å°±æ’å…¥ã€åˆ é™¤æ•°æ®ã€‚ä¿®æ”¹menu_main.xmlä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">tools:context</span>=<span class="string">&quot;com.a520it.recyclerview.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_add&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;add&quot;</span><br><span class="line">        android:icon=&quot;@drawable/ic_menu_add&quot;</span><br><span class="line">        app:showAsAction=&quot;always&quot;/&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_delete&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;delete&quot;</span><br><span class="line">        android:icon=&quot;@drawable/ic_menu_delete&quot;</span><br><span class="line">        app:showAsAction=&quot;always&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨MainActivityä¸­è®¾ç½®onOptionsItemSelectedæ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id = item.getItemId();</span><br><span class="line">    ....<span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(id == R.id.action_add)</span> </span>&#123;</span><br><span class="line">        mMyAdapter.addItem(<span class="number">1</span>,<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;add&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(id == R.id.action_delete) &#123;</span><br><span class="line">        mMyAdapter.deleteItem(<span class="number">3</span>);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;delete&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ’å…¥ã€åˆ é™¤æ•°æ®çš„ä»£ç å†™åœ¨MyAdapteré‡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addItem</span><span class="params">(<span class="keyword">int</span> position,String str)</span></span>&#123;</span><br><span class="line">        datas.add(position,str);</span><br><span class="line"><span class="comment">//        notifyDataSetChanged();</span></span><br><span class="line">        notifyItemInserted(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteItem</span><span class="params">(<span class="keyword">int</span> position)</span></span>&#123;</span><br><span class="line">        datas.remove(position);</span><br><span class="line"><span class="comment">//        notifyDataSetChanged();</span></span><br><span class="line">        notifyItemRemoved(position);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="7-ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿"><a href="#7-ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿" class="headerlink" title="7 ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿"></a>7 ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿</h3><p>RecyclerViewä¸åƒListViewï¼Œå®ƒæ²¡æœ‰å·²è®¾ç½®å¥½çš„åˆ†å‰²çº¿ï¼Œéœ€è¦è‡ªå·±å¤„ç†ã€‚ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿éœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecyclerView.ItemDecoration() &#123;</span><br><span class="line"></span><br><span class="line">            String str = <span class="string">&quot;æˆ‘æ˜¯åˆ†å‰²çº¿&quot;</span>;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas c, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span><br><span class="line">               ....</span><br><span class="line">                    c.drawText(str,left,top,paint);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getItemOffsets</span><span class="params">(Rect outRect, View view, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//é€šè¿‡outRectè®¾ç½®å„ä¸ªitemä¹‹é—´çš„ä½ç§»é—´è·</span></span><br><span class="line">                outRect.set(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,getStringHeight(paint));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²</title>
      <link href="2018/10/11/RecyclerView%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%F0%9F%98%B2/"/>
      <url>2018/10/11/RecyclerView%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%F0%9F%98%B2/</url>
      
        <content type="html"><![CDATA[<p>RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²<br><a id="more"></a></p><h3 id="åŸºæœ¬ä½¿ç”¨ï¼š"><a href="#åŸºæœ¬ä½¿ç”¨ï¼š" class="headerlink" title="åŸºæœ¬ä½¿ç”¨ï¼š"></a>åŸºæœ¬ä½¿ç”¨ï¼š</h3><p>1.ä½¿ç”¨å‰éœ€è¦åœ¨åœ¨gradleä¸­æ·»åŠ ä¾èµ–<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.android.support:recyclerview-v7:27.0.2&#x27;</span></span><br></pre></td></tr></table></figure><br>2.ç¼–å†™ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨Xmlä¸­å†™RecyclerViewçš„å¸ƒå±€ï¼Œ<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.v7.widget.RecyclerView</span><br><span class="line">        android:id=&quot;@+id/recyclerView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>3.ç„¶ååœ¨activityä¸­è·å–RecyclerViewï¼Œå¹¶è®¾ç½®LayoutManagerä»¥åŠadapter<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡findViewByIdæ‹¿åˆ°RecyclerViewå®ä¾‹</span></span><br><span class="line">mRecyclerView =   findViewById(R.id.recyclerView);</span><br><span class="line"><span class="comment">//è®¾ç½®RecyclerViewç®¡ç†å™¨</span></span><br><span class="line">mRecyclerView.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>, LinearLayoutManager.VERTICAL, <span class="keyword">false</span>));</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–é€‚é…å™¨</span></span><br><span class="line">mAdapter = <span class="keyword">new</span> MyRecyclerViewAdapter(list); </span><br><span class="line"><span class="comment">//è®¾ç½®æ·»åŠ æˆ–åˆ é™¤itemæ—¶çš„åŠ¨ç”»ï¼Œè¿™é‡Œä½¿ç”¨é»˜è®¤åŠ¨ç”»</span></span><br><span class="line">mRecyclerView.setItemAnimator(<span class="keyword">new</span> DefaultItemAnimator());</span><br><span class="line"><span class="comment">//è®¾ç½®é€‚é…å™¨</span></span><br><span class="line">mRecyclerView.setAdapter(mAdapter);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ä¸‹é¢æ˜¯MyRecyclerViewAdapterçš„ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sharejoys.recyclerviewdemo.actvity;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.sharejoys.recyclerviewdemo.R;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRecyclerViewAdapterextends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">MyAdapter</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAdapter</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MyAdapter.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_base_use, parent, <span class="keyword">false</span>);</span><br><span class="line">        MyAdapter.ViewHolder viewHolder = <span class="keyword">new</span> MyAdapter.ViewHolder(view);</span><br><span class="line">        <span class="keyword">return</span> viewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(MyAdapter.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        holder.mText.setText(list.get(position));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</span><br><span class="line">        TextView mText;</span><br><span class="line">        ViewHolder(View itemView) &#123;</span><br><span class="line">            <span class="keyword">super</span>(itemView);</span><br><span class="line">            mText = itemView.findViewById(R.id.item_tx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="è®¾ç½®æ¨ªå‘å¸ƒå±€ï¼š"><a href="#è®¾ç½®æ¨ªå‘å¸ƒå±€ï¼š" class="headerlink" title="è®¾ç½®æ¨ªå‘å¸ƒå±€ï¼š"></a>è®¾ç½®æ¨ªå‘å¸ƒå±€ï¼š</h4><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mRecyclerView.setLayoutManager(<span class="keyword">new</span> <span class="type">LinearLayoutManager</span>(<span class="built_in">this</span>, LinearLayoutManager.HORIZONTAL, <span class="literal">false</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://img-blog.csdn.net/20180123164219639?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHVpa2U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"                      alt="image"                ></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ScrollViewåº•éƒ¨æœ‰å¸ƒå±€ä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜</title>
      <link href="2018/10/10/%E8%A7%A3%E5%86%B3ScrollView%E5%BA%95%E9%83%A8%E6%9C%89%E5%B8%83%E5%B1%80%E4%B8%8D%E8%83%BD%E6%BB%91%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>2018/10/10/%E8%A7%A3%E5%86%B3ScrollView%E5%BA%95%E9%83%A8%E6%9C%89%E5%B8%83%E5%B1%80%E4%B8%8D%E8%83%BD%E6%BB%91%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨åšé¡¹ç›®æ—¶ç”¨åˆ°ScrollView,æˆ‘å‘ç°å¦‚æœåœ¨ScrollViewæ§ä»¶ä¹‹åæ²¡æœ‰åˆ«çš„å¸ƒå±€æ—¶å®ƒèƒ½æ­£å¸¸æ»‘åŠ¨.ä½†æ˜¯å¦‚æœåº•éƒ¨æœ‰åŠŸèƒ½æŒ‰é’®,æ¯”å¦‚ä¸‹å›¾è¿™æ ·å°±ä¸èƒ½æ˜¾ç¤ºå®Œå…¨.<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/c8i4LiF1fg.png"                      alt="mark"                ></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>å¿…é¡»çŸ¥é“åº•éƒ¨èœå•çš„é«˜åº¦</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/bcAmAHi98I.png"                      alt="mark"                ></p><p>ç„¶åå°±</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181019/1g28e0cjIL.png"                      alt="mark"                ></p><p>ä»£ç å¦‚ä¸‹<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤´éƒ¨--&gt;</span></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=&quot;@+id/layout_me_header&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:background=&quot;#008cc9&quot;&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/login_btn&quot;</span><br><span class="line">            android:layout_width=&quot;66dp&quot;</span><br><span class="line">            android:layout_height=&quot;66dp&quot;</span><br><span class="line">            android:background=&quot;@mipmap/login_btn&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:orientation=&quot;horizontal&quot;</span><br><span class="line">            android:layout_below=&quot;@+id/login_btn&quot;</span><br><span class="line">            android:layout_marginBottom=&quot;10dp&quot;</span><br><span class="line">           &gt;</span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;0dp&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:orientation=&quot;vertical&quot;</span><br><span class="line">                android:layout_weight=&quot;1&quot;</span><br><span class="line">                android:gravity=&quot;center&quot;&gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;30dp&quot;</span><br><span class="line">                    android:layout_height=&quot;30dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/me_menu_yh&quot;/&gt;</span><br><span class="line">                &lt;TextView</span><br><span class="line">                    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line"></span><br><span class="line">                    android:text=&quot;æ”¶è—&quot;/&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;0dp&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:layout_weight=&quot;1&quot;</span><br><span class="line">                android:gravity=&quot;center&quot;</span><br><span class="line">                android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;30dp&quot;</span><br><span class="line">                    android:layout_height=&quot;30dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/me_menu_go&quot;/&gt;</span><br><span class="line">                &lt;TextView</span><br><span class="line">                    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                    android:text=&quot;è´­ç‰©åˆ¸&quot;/&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;0dp&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:orientation=&quot;vertical&quot;</span><br><span class="line">                android:layout_weight=&quot;1&quot;</span><br><span class="line">                android:gravity=&quot;center&quot;&gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;30dp&quot;</span><br><span class="line">                    android:layout_height=&quot;30dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/me_menu_sail&quot;/&gt;</span><br><span class="line">                &lt;TextView</span><br><span class="line">                    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                    android:text=&quot;ä¼˜æƒ åˆ¸&quot;/&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç©ºç™½å ä½ç¬¦--&gt;</span></span><br><span class="line">   &lt;RelativeLayout</span><br><span class="line">       android:id=&quot;@+id/layout_me_bottom&quot;</span><br><span class="line">       android:layout_width=&quot;match_parent&quot;</span><br><span class="line">       android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">       android:layout_height=&quot;70dp&quot;&gt;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ»šåŠ¨åˆ—è¡¨   åŠŸèƒ½åŒº--&gt;</span></span><br><span class="line">    &lt;ScrollView</span><br><span class="line">        android:layout_below=&quot;@+id/layout_me_header&quot;</span><br><span class="line">        android:layout_above=&quot;@+id/layout_me_bottom&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:background=&quot;#fff&quot;</span><br><span class="line">                android:paddingTop=&quot;6dp&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;40dp&quot;</span><br><span class="line">                    android:layout_height=&quot;40dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/list_save&quot;</span><br><span class="line">                    android:layout_gravity=&quot;center_vertical&quot;</span><br><span class="line">                    android:layout_marginLeft=&quot;10dp&quot;</span><br><span class="line">                    android:layout_marginRight=&quot;10dp&quot;/&gt;</span><br><span class="line">                &lt;RelativeLayout</span><br><span class="line">                    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;&gt;</span><br><span class="line">                    &lt;TextView</span><br><span class="line">                        android:id=&quot;@+id/text_my_save&quot;</span><br><span class="line">                        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                        android:text=&quot;æˆ‘çš„æ”¶è—&quot;</span><br><span class="line">                        android:textSize=&quot;28sp&quot;</span><br><span class="line">                        /&gt;</span><br><span class="line">                    &lt;View</span><br><span class="line">                        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                        android:layout_height=&quot;1dp&quot;</span><br><span class="line">                        android:background=&quot;#ccc&quot;</span><br><span class="line">                        android:layout_below=&quot;@+id/text_my_save&quot;</span><br><span class="line">                        android:paddingTop=&quot;8dp&quot;</span><br><span class="line">                        android:layout_marginRight=&quot;10dp&quot;</span><br><span class="line">                        /&gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:background=&quot;#fff&quot;</span><br><span class="line">                android:paddingTop=&quot;6dp&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;40dp&quot;</span><br><span class="line">                    android:layout_height=&quot;40dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/list_pwd&quot;</span><br><span class="line">                    android:layout_gravity=&quot;center_vertical&quot;</span><br><span class="line">                    android:layout_marginLeft=&quot;10dp&quot;</span><br><span class="line">                    android:layout_marginRight=&quot;10dp&quot;/&gt;</span><br><span class="line">                &lt;RelativeLayout</span><br><span class="line">                    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;&gt;</span><br><span class="line">                    &lt;TextView</span><br><span class="line">                        android:id=&quot;@+id/text_my_pwd&quot;</span><br><span class="line">                        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                        android:text=&quot;æˆ‘çš„å£ä»¤&quot;</span><br><span class="line">                        android:textSize=&quot;28sp&quot;</span><br><span class="line">                        /&gt;</span><br><span class="line">                    &lt;View</span><br><span class="line">                        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                        android:layout_height=&quot;1dp&quot;</span><br><span class="line">                        android:background=&quot;#ccc&quot;</span><br><span class="line">                        android:layout_below=&quot;@+id/text_my_pwd&quot;</span><br><span class="line">                        android:paddingTop=&quot;10dp&quot;</span><br><span class="line">                        android:layout_marginRight=&quot;10dp&quot;</span><br><span class="line">                        /&gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            &lt;LinearLayout</span><br><span class="line">                android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                android:background=&quot;#fff&quot;</span><br><span class="line">                android:paddingTop=&quot;6dp&quot;</span><br><span class="line">                android:paddingBottom=&quot;6dp&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:layout_width=&quot;40dp&quot;</span><br><span class="line">                    android:layout_height=&quot;40dp&quot;</span><br><span class="line">                    android:src=&quot;@mipmap/list_safe_center&quot;</span><br><span class="line">                    android:layout_gravity=&quot;center_vertical&quot;</span><br><span class="line">                    android:layout_marginLeft=&quot;10dp&quot;</span><br><span class="line">                    android:layout_marginRight=&quot;10dp&quot;/&gt;</span><br><span class="line">                &lt;RelativeLayout</span><br><span class="line">                    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                    android:layout_height=&quot;wrap_content&quot;&gt;</span><br><span class="line">                    &lt;TextView</span><br><span class="line">                        android:id=&quot;@+id/text_my_safecenter&quot;</span><br><span class="line">                        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">                        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">                        android:text=&quot;æˆ‘çš„é”¦å›Š&quot;</span><br><span class="line">                        android:textSize=&quot;28sp&quot;</span><br><span class="line">                        /&gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ListViewçš„ä½¿ç”¨</title>
      <link href="2018/10/04/Android%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
      <url>2018/10/04/Android%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>classä¸­è®¾ç½® ä»Šå¤©ä¸»è¦è®°å½•è¿™ä¸ª<br><a id="more"></a><br>åˆ©ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é¢œè‰²ç±»<br>tx.setTextColor(android.graphics.Color.RED);<br>åˆ©ç”¨æ•°å­—è®¾ç½®<br>tx.setTextColor(0xffff00f);<br>åˆ©ç”¨xmlä¸­å·²ç»å®šä¹‰å¥½çš„é¢œè‰²ä»£ç <br>tx.setTextColor(getResources().getColor(R.color.red));<br>åˆ©ç”¨16è¿›åˆ¶ å­—ç¬¦ä¸²<br>tx.setTextColor(Color.parseColor(â€œ#FFFFFFâ€));</p><h1 id="é™„ä¸Šä¸€æ®µé¢œè‰²ä»£ç ã€‚ä»¥ä¾›å‚è€ƒ"><a href="#é™„ä¸Šä¸€æ®µé¢œè‰²ä»£ç ã€‚ä»¥ä¾›å‚è€ƒ" class="headerlink" title="é™„ä¸Šä¸€æ®µé¢œè‰²ä»£ç ã€‚ä»¥ä¾›å‚è€ƒ"></a>é™„ä¸Šä¸€æ®µé¢œè‰²ä»£ç ã€‚ä»¥ä¾›å‚è€ƒ</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;white&quot;</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç™½è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;ivory&quot;</span>&gt;</span>#FFFFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è±¡ç‰™è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightyellow&quot;</span>&gt;</span>#FFFFE0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>#FFFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;snow&quot;</span>&gt;</span>#FFFAFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é›ªç™½è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;floralwhite&quot;</span>&gt;</span>#FFFAF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--èŠ±ç™½è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lemonchiffon&quot;</span>&gt;</span>#FFFACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æŸ æª¬ç»¸è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;cornsilk&quot;</span>&gt;</span>#FFF8DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç±³ç»¸è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;seashell&quot;</span>&gt;</span>#FFF5EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ·è´è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lavenderblush&quot;</span>&gt;</span>#FFF0F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·¡ç´«çº¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;papayawhip&quot;</span>&gt;</span>#FFEFD5<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç•ªæœ¨è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;blanchedalmond&quot;</span>&gt;</span>#FFEBCD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç™½æè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mistyrose&quot;</span>&gt;</span>#FFE4E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ…ç«ç‘°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;bisque&quot;</span>&gt;</span>#FFE4C4<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ¡”é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;moccasin&quot;</span>&gt;</span>#FFE4B5<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é¹¿çš®è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;navajowhite&quot;</span>&gt;</span>#FFDEAD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çº³ç“¦ç™½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;peachpuff&quot;</span>&gt;</span>#FFDAB9<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ¡ƒè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;gold&quot;</span>&gt;</span>#FFD700<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é‡‘è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;pink&quot;</span>&gt;</span>#FFC0CB<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç²‰çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightpink&quot;</span>&gt;</span>#FFB6C1<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®ç²‰çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>#FFA500<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ©™è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightsalmon&quot;</span>&gt;</span>#FFA07A<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®è‚‰è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkorange&quot;</span>&gt;</span>#FF8C00<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—æ¡”é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;coral&quot;</span>&gt;</span>#FF7F50<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çŠç‘šè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;hotpink&quot;</span>&gt;</span>#FF69B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çƒ­ç²‰çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;tomato&quot;</span>&gt;</span>#FF6347<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è¥¿çº¢æŸ¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;orangered&quot;</span>&gt;</span>#FF4500<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çº¢æ©™è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;deeppink&quot;</span>&gt;</span>#FF1493<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·±ç²‰çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;fuchsia&quot;</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç´«çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;magenta&quot;</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çº¢ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;red&quot;</span>&gt;</span>#FF0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;oldlace&quot;</span>&gt;</span>#FDF5E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è€èŠ±è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightgoldenrodyellow&quot;</span>&gt;</span>#FAFAD2<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®é‡‘é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;linen&quot;</span>&gt;</span>#FAF0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äºšéº»è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;antiquewhite&quot;</span>&gt;</span>#FAEBD7<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å¤è‘£ç™½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;salmon&quot;</span>&gt;</span>#FA8072<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é²œè‚‰è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;ghostwhite&quot;</span>&gt;</span>#F8F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å¹½çµç™½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mintcream&quot;</span>&gt;</span>#F5FFFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è–„è·è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;whitesmoke&quot;</span>&gt;</span>#F5F5F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çƒŸç™½è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;beige&quot;</span>&gt;</span>#F5F5DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç±³è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;wheat&quot;</span>&gt;</span>#F5DEB3<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ…é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;sandybrown&quot;</span>&gt;</span>#F4A460<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ²™è¤è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;azure&quot;</span>&gt;</span>#F0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å¤©è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;honeydew&quot;</span>&gt;</span>#F0FFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--èœœè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;aliceblue&quot;</span>&gt;</span>#F0F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‰¾åˆ©æ–¯å…° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;khaki&quot;</span>&gt;</span>#F0E68C<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é»„è¤è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightcoral&quot;</span>&gt;</span>#F08080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®çŠç‘šè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;palegoldenrod&quot;</span>&gt;</span>#EEE8AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‹éº’éºŸè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;violet&quot;</span>&gt;</span>#EE82EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç´«ç½—å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darksalmon&quot;</span>&gt;</span>#E9967A<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—è‚‰è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lavender&quot;</span>&gt;</span>#E6E6FA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·¡ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightcyan&quot;</span>&gt;</span>#E0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®é’è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;burlywood&quot;</span>&gt;</span>#DEB887<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å®æœ¨è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;plum&quot;</span>&gt;</span>#DDA0DD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ´‹æè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;gainsboro&quot;</span>&gt;</span>#DCDCDC<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·¡ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;crimson&quot;</span>&gt;</span>#DC143C<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—æ·±çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;palevioletred&quot;</span>&gt;</span>#DB7093<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‹ç´«ç½—å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;goldenrod&quot;</span>&gt;</span>#DAA520<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é‡‘éº’éºŸè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;orchid&quot;</span>&gt;</span>#DA70D6<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·¡ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;thistle&quot;</span>&gt;</span>#D8BFD8<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è“Ÿè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightgray&quot;</span>&gt;</span>#D3D3D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightgrey&quot;</span>&gt;</span>#D3D3D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;tan&quot;</span>&gt;</span>#D2B48C<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--èŒ¶è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;chocolate&quot;</span>&gt;</span>#D2691E<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å·§å¯åŠ›è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;peru&quot;</span>&gt;</span>#CD853F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç§˜é²è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;indianred&quot;</span>&gt;</span>#CD5C5C<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å°ç¬¬å®‰çº¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumvioletred&quot;</span>&gt;</span>#C71585<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç´«ç½—å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;silver&quot;</span>&gt;</span>#C0C0C0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é“¶è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkkhaki&quot;</span>&gt;</span>#BDB76B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—é»„è¤è‰²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;rosybrown&quot;</span>&gt;</span>#BC8F8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è¤ç«ç‘°çº¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumorchid&quot;</span>&gt;</span>#BA55D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç²‰ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkgoldenrod&quot;</span>&gt;</span>#B8860B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—é‡‘é»„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;firebrick&quot;</span>&gt;</span>#B22222<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç«ç –è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;powderblue&quot;</span>&gt;</span>#B0E0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç²‰è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightsteelblue&quot;</span>&gt;</span>#B0C4DE<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®é’¢å…°è‰²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;paleturquoise&quot;</span>&gt;</span>#AFEEEE<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‹å®çŸ³ç»¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;greenyellow&quot;</span>&gt;</span>#ADFF2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é»„ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightblue&quot;</span>&gt;</span>#ADD8E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkgray&quot;</span>&gt;</span>#A9A9A9<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkgrey&quot;</span>&gt;</span>#A9A9A9<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;brown&quot;</span>&gt;</span>#A52A2A<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è¤è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;sienna&quot;</span>&gt;</span>#A0522D<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--èµ­è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkorchid&quot;</span>&gt;</span>#9932CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;palegreen&quot;</span>&gt;</span>#98FB98<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‹ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkviolet&quot;</span>&gt;</span>#9400D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç´«ç½—å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumpurple&quot;</span>&gt;</span>#9370DB<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>#90EE90<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkseagreen&quot;</span>&gt;</span>#8FBC8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—æµ·å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;saddlebrown&quot;</span>&gt;</span>#8B4513<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é‡è¤è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkmagenta&quot;</span>&gt;</span>#8B008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—æ´‹çº¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkred&quot;</span>&gt;</span>#8B0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—çº¢è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;blueviolet&quot;</span>&gt;</span>#8A2BE2<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç´«ç½—å…°è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightskyblue&quot;</span>&gt;</span>#87CEFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®å¤©è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;skyblue&quot;</span>&gt;</span>#87CEEB<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å¤©è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;gray&quot;</span>&gt;</span>#808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;grey&quot;</span>&gt;</span>#808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;olive&quot;</span>&gt;</span>#808000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ©„æ¦„è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;purple&quot;</span>&gt;</span>#800080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç´«è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;maroon&quot;</span>&gt;</span>#800000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç²Ÿè‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;aquamarine&quot;</span>&gt;</span>#7FFFD4<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç¢§ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;chartreuse&quot;</span>&gt;</span>#7FFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é»„ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lawngreen&quot;</span>&gt;</span>#7CFC00<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è‰ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumslateblue&quot;</span>&gt;</span>#7B68EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­æš—è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightslategray&quot;</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®è“ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightslategrey&quot;</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®è“ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;slategray&quot;</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç°çŸ³è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;slategrey&quot;</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç°çŸ³è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;olivedrab&quot;</span>&gt;</span>#6B8E23<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·±ç»¿è¤è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;slateblue&quot;</span>&gt;</span>#6A5ACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çŸ³è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;dimgray&quot;</span>&gt;</span>#696969<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;dimgrey&quot;</span>&gt;</span>#696969<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumaquamarine&quot;</span>&gt;</span>#66CDAA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;cornflowerblue&quot;</span>&gt;</span>#6495ED<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--èŠå…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;cadetblue&quot;</span>&gt;</span>#5F9EA0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--å†›å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkolivegreen&quot;</span>&gt;</span>#556B2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—æ©„æ¦„ç»¿--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;indigo&quot;</span>&gt;</span>#4B0082<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é›é’è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumturquoise&quot;</span>&gt;</span>#48D1CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç»¿å®çŸ³ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkslateblue&quot;</span>&gt;</span>#483D8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç°è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;steelblue&quot;</span>&gt;</span>#4682B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é’¢å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;royalblue&quot;</span>&gt;</span>#4169E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--çš‡å®¶è“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;turquoise&quot;</span>&gt;</span>#40E0D0<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é’ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumseagreen&quot;</span>&gt;</span>#3CB371<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­æµ·è“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;limegreen&quot;</span>&gt;</span>#32CD32<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ©™ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkslategray&quot;</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç“¦ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkslategrey&quot;</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç“¦ç°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;seagreen&quot;</span>&gt;</span>#2E8B57<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ·ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;forestgreen&quot;</span>&gt;</span>#228B22<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ£®æ—ç»¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lightseagreen&quot;</span>&gt;</span>#20B2AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--äº®æµ·è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;dodgerblue&quot;</span>&gt;</span>#1E90FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é—ªå…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;midnightblue&quot;</span>&gt;</span>#191970<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­ç°å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;aqua&quot;</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ…ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;cyan&quot;</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é’è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;springgreen&quot;</span>&gt;</span>#00FF7F<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ˜¥ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;lime&quot;</span>&gt;</span>#00FF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é…¸æ©™è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumspringgreen&quot;</span>&gt;</span>#00FA9A<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­æ˜¥ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkturquoise&quot;</span>&gt;</span>#00CED1<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—å®çŸ³ç»¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;deepskyblue&quot;</span>&gt;</span>#00BFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ·±å¤©è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkcyan&quot;</span>&gt;</span>#008B8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—é’è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;teal&quot;</span>&gt;</span>#008080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æ°´é¸­è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;green&quot;</span>&gt;</span>#008000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkgreen&quot;</span>&gt;</span>#006400<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—ç»¿è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;blue&quot;</span>&gt;</span>#0000FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;mediumblue&quot;</span>&gt;</span>#0000CD<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--ä¸­å…°è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;darkblue&quot;</span>&gt;</span>#00008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æš—è“è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;navy&quot;</span>&gt;</span>#000080<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--æµ·å†›è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span> <span class="comment">&lt;!--é»‘è‰² --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Logå°è£…</title>
      <link href="2018/10/03/Log%E5%B0%81%E8%A3%85/"/>
      <url>2018/10/03/Log%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ç”¨Android Logç±»ã€‚<br><a id="more"></a><br>android.util.Logå¸¸ç”¨çš„æ–¹æ³•æœ‰ä»¥ä¸‹5ä¸ªï¼šLog.v() Log.d() Log.i() Log.w() ä»¥åŠ Log.e() ã€‚æ ¹æ®é¦–å­—æ¯å¯¹åº”VERBOSEï¼ŒDEBUG,INFO, WARNï¼ŒERRORã€‚</p><ol><li>Log.v çš„è°ƒè¯•é¢œè‰²ä¸ºé»‘è‰²çš„ï¼Œä»»ä½•æ¶ˆæ¯éƒ½ä¼šè¾“å‡ºï¼Œè¿™é‡Œçš„vä»£è¡¨verboseå•°å—¦çš„æ„æ€ï¼Œå¹³æ—¶ä½¿ç”¨å°±æ˜¯Log.v(â€œâ€,â€â€);</li><li>Log.dçš„è¾“å‡ºé¢œè‰²æ˜¯è“è‰²çš„ï¼Œä»…è¾“å‡ºdebugè°ƒè¯•çš„æ„æ€ï¼Œä½†ä»–ä¼šè¾“å‡ºä¸Šå±‚çš„ä¿¡æ¯ï¼Œè¿‡æ»¤èµ·æ¥å¯ä»¥é€šè¿‡DDMSçš„Logcatæ ‡ç­¾æ¥é€‰æ‹©.</li><li>Log.içš„è¾“å‡ºä¸ºç»¿è‰²ï¼Œä¸€èˆ¬æç¤ºæ€§çš„æ¶ˆæ¯informationï¼Œå®ƒä¸ä¼šè¾“å‡ºLog.vå’ŒLog.dçš„ä¿¡æ¯ï¼Œä½†ä¼šæ˜¾ç¤ºiã€wå’Œeçš„ä¿¡æ¯</li><li>Log.wçš„æ„æ€ä¸ºæ©™è‰²ï¼Œå¯ä»¥çœ‹ä½œä¸ºwarningè­¦å‘Šï¼Œä¸€èˆ¬éœ€è¦æˆ‘ä»¬æ³¨æ„ä¼˜åŒ–Androidä»£ç ï¼ŒåŒæ—¶é€‰æ‹©å®ƒåè¿˜ä¼šè¾“å‡ºLog.eçš„ä¿¡æ¯ã€‚</li><li>Log.eä¸ºçº¢è‰²ï¼Œå¯ä»¥æƒ³åˆ°erroré”™è¯¯ï¼Œè¿™é‡Œä»…æ˜¾ç¤ºçº¢è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™äº›é”™è¯¯å°±éœ€è¦æˆ‘ä»¬è®¤çœŸçš„åˆ†æï¼ŒæŸ¥çœ‹æ ˆçš„ä¿¡æ¯äº†ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šä¸åŒçš„æ‰“å°æ–¹æ³•åœ¨ä½¿ç”¨æ—¶éƒ½æ˜¯æŸä¸ªæ–¹æ³•å¸¦ä¸Š(String tag, String msg)å‚æ•°ï¼Œtagè¡¨ç¤ºçš„æ˜¯æ‰“å°ä¿¡æ¯çš„æ ‡ç­¾ï¼Œmsgè¡¨ç¤ºçš„æ˜¯éœ€è¦æ‰“å°çš„ä¿¡æ¯ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> VERBOSE =<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> DEBUG =<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> INFO =<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> WARN =<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> ERROR =<span class="number">5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> NOTHING =<span class="number">6</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="keyword">int</span> level =VERBOSE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">v</span><span class="params">(String tag,String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(level &lt;= VERBOSE)&#123;</span><br><span class="line">            Log.v(tag,msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">d</span><span class="params">(String tag,String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(level &lt;= VERBOSE)&#123;</span><br><span class="line">            Log.d(tag,msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">i</span><span class="params">(String tag,String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(level &lt;= VERBOSE)&#123;</span><br><span class="line">            Log.i(tag,msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">w</span><span class="params">(String tag,String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(level &lt;= VERBOSE)&#123;</span><br><span class="line">            Log.w(tag,msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">e</span><span class="params">(String tag,String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(level &lt;= VERBOSE)&#123;</span><br><span class="line">            Log.e(tag,msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™ä¸ªSplashé—ªå±é¡µ</title>
      <link href="2018/10/02/%E5%86%99%E4%B8%AASplash%E9%97%AA%E5%B1%8F%E9%A1%B5/"/>
      <url>2018/10/02/%E5%86%99%E4%B8%AASplash%E9%97%AA%E5%B1%8F%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><ol><li>å€’è®¡æ—¶å¦‚ä½•å†™ï¼Ÿ</li><li>ç‚¹å‡»è·³è½¬</li><li>æ›´æ–°UI</li><li>è·³è½¬ä¹‹åçš„handleå¤„ç†</li></ol><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc.book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.loopj.android.http.AsyncHttpClient;</span><br><span class="line"><span class="keyword">import</span> com.loopj.android.http.AsyncHttpResponseHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cz.msebera.android.httpclient.Header;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpashActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CODE = <span class="number">1001</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TOTAL_TIME = <span class="number">3000</span>;    <span class="comment">//æ€»å…±ä¸‰ç§’</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INTERVAL_TIME = <span class="number">1000</span>;  <span class="comment">//é—´éš”æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> TextView mTextView;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_spash);</span><br><span class="line"></span><br><span class="line">        mTextView = (TextView) findViewById(R.id.time_text_view);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> MyHandler handler = <span class="keyword">new</span> MyHandler(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        è€ŒHandlerä¸­obtainMessageä¸new Messageçš„å·®åˆ«ï¼š</span></span><br><span class="line"><span class="comment">//        obtainmessageï¼ˆï¼‰æ˜¯ä»æ¶ˆæ¯æ± ä¸­æ‹¿æ¥ä¸€ä¸ªmsg ä¸é¡»è¦å¦å¼€è¾Ÿç©ºé—´new</span></span><br><span class="line"><span class="comment">//        newé¡»è¦åˆä¸€æ¬¡ç”³è¯·ï¼Œæ•ˆç‡ä½ï¼Œobtianmessageèƒ½å¤Ÿå¾ªç¯åˆ©ç”¨ã€‚</span></span><br><span class="line"><span class="comment">//        Message message = new Message();</span></span><br><span class="line">        Message message = Message.obtain();</span><br><span class="line">        message.what = CODE;</span><br><span class="line">        message.arg1 = TOTAL_TIME;</span><br><span class="line">        handler.sendMessage(message);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        mTextView.setOnClickListener(this);</span></span><br><span class="line">        mTextView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//ç‚¹å‡»è·³è¿‡</span></span><br><span class="line">               BookListActivity.start(SpashActivity.<span class="keyword">this</span>);</span><br><span class="line">                SpashActivity.<span class="keyword">this</span>.finish();</span><br><span class="line">                <span class="comment">//å¿…é¡»å…³é—­handlerä¸­çš„æœåŠ¡</span></span><br><span class="line">                handler.removeMessages(CODE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        AsyncHttpClient client = <span class="keyword">new</span> AsyncHttpClient();</span><br><span class="line">        client.get(<span class="string">&quot;https://www.google.com&quot;</span>, <span class="keyword">new</span> AsyncHttpResponseHandler() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// called before request is started</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(<span class="keyword">int</span> statusCode, Header[] headers, <span class="keyword">byte</span>[] response)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// called when response HTTP status is &quot;200 OK&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(<span class="keyword">int</span> statusCode, Header[] headers, <span class="keyword">byte</span>[] errorResponse, Throwable e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// called when response HTTP status is &quot;4XX&quot; (eg. 401, 403, 404)</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRetry</span><span class="params">(<span class="keyword">int</span> retryNo)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// called when request is retried</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public void onClick(View v) &#123;</span></span><br><span class="line"><span class="comment">//       switch (v.getId())&#123;</span></span><br><span class="line"><span class="comment">//           case R.id.time_text_view:</span></span><br><span class="line"><span class="comment">//               //ç‚¹å‡»è·³è¿‡</span></span><br><span class="line"><span class="comment">//               BookListActivity.start(SpashActivity.this);</span></span><br><span class="line"><span class="comment">//               SpashActivity.this.finish();</span></span><br><span class="line"><span class="comment">//               break;</span></span><br><span class="line"><span class="comment">//       &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> WeakReference&lt;SpashActivity&gt; mWwakReference;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">(SpashActivity activity)</span></span>&#123;</span><br><span class="line">            mWwakReference = <span class="keyword">new</span> WeakReference&lt;&gt;(activity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">            SpashActivity activity = mWwakReference.get();</span><br><span class="line">            <span class="keyword">if</span>(msg.what == CODE)&#123;</span><br><span class="line">                <span class="keyword">if</span>(activity != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">//è®¾ç½®textview æ›´æ–°UI</span></span><br><span class="line">                    <span class="keyword">int</span> time = msg.arg1; <span class="comment">//ç¬¬ä¸€æ¬¡å°±æ˜¯ä¸‰ç§’</span></span><br><span class="line">                    activity.mTextView.setText(time/INTERVAL_TIME + <span class="string">&quot;ç§’ï¼Œç‚¹å‡»è·³è¿‡&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//å†å‘é€å€’è®¡æ—¶</span></span><br><span class="line">                    Message message = Message.obtain();</span><br><span class="line">                    message.what = CODE;</span><br><span class="line">                    message.arg1 = time-INTERVAL_TIME;</span><br><span class="line">                    <span class="keyword">if</span>(time&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="comment">//å€’è®¡æ—¶ç»§ç»­</span></span><br><span class="line">                        sendMessageDelayed(message,INTERVAL_TIME);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                         <span class="comment">//<span class="doctag">TODO:</span>è·³è½¬é¡µé¢</span></span><br><span class="line">                        Toast.makeText(activity,<span class="string">&quot;è·³è½¬åˆ°åˆ—è¡¨&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                        BookListActivity.start(activity);</span><br><span class="line">                        activity.finish();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³›å‹çŸ¥è¯†ç‚¹</title>
      <link href="2018/10/01/%E6%B3%9B%E5%9E%8B%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>2018/10/01/%E6%B3%9B%E5%9E%8B%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p><a class="link"   href="https://note.youdao.com/share/?id=439f4f3cbac9333e6b6f8407ecc10542&amp;type=note#/" >ç‚¹å‡»æˆ‘ä¼ é€è¿‡å»çœ‹çœ‹å§<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ListViewçš„ä½¿ç”¨</title>
      <link href="2018/09/13/ListView%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>2018/09/13/ListView%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="ListView-ç®€ä»‹"><a href="#ListView-ç®€ä»‹" class="headerlink" title="ListView ç®€ä»‹"></a>ListView ç®€ä»‹</h3><p>ä¸€ã€ListView æ˜¯ android ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶,é€šå¸¸æ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºæ•°æ®,<br>å¹¶ä¸”å½“åŠ è½½çš„æ•°æ®è¿‡å¤šçš„æ—¶å€™å¯ä»¥åˆ†é¡µåŠ è½½,åŠ¨æ€æ˜¾ç¤ºæ•°æ®,é€šå¸¸æ˜¯æ¨ªå‘æ˜¾ç¤ºæ•°æ®ã€‚<br><a id="more"></a></p><ul><li>Adapterä¸€èˆ¬æœ‰ä»¥ä¸‹çš„å‡ ç§å®ç°ç±»:ArrayAdapterï¼ŒSimpleAdapterï¼ŒSimpleCursorAdapter,BaseAdapter</li><li>ArrayAdapterçš„æ¯ä¸€ä¸ªåˆ—è¡¨åªèƒ½æ˜¯ä¸€ä¸ªTextViewï¼ŒArrayAdapterçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹:</li><li>ArrayAdapter adapter=new ArrayAdapter(Context,ä¸€ä¸ªTextViewå¸ƒå±€,String æ•°ç»„);</li></ul><p>äºŒã€ListView å®ç°æ•°æ®åŠ è½½çš„æ­¥éª¤:<br>ListView é€‚åˆâ€œè‡ªåº•å‘ä¸Šâ€çš„å¼€å‘æ¨¡å¼<br>å³ä»æ¯ä¸ªæ¡ç›®çš„æ˜¾ç¤ºç»„ä»¶<br>åˆ°å¯¹å…¶è¿›è¡Œ æ§åˆ¶çš„æ•°æ®ç»“æ„<br>æœ€åé€šè¿‡ Activity ç­‰è¿›è¡Œä½¿ç”¨ã€‚<br>aï¼‰é¦–å…ˆæ˜¯ item ç»„ä»¶,å³ç”¨äºæ¯é¡¹å¸ƒå±€è¾“å‡ºçš„ xml æ–‡ä»¶ã€‚</p><blockquote><p>Android SDK ä¸­æœ‰ simple_list_item_1ã€simple_list_item_2 å¯ç”¨</p></blockquote><p>å½“éœ€è¦æ¯”è¾ƒä¸°å¯Œçš„æ˜¾ç¤ºæ•ˆæœæ—¶, ä¸€èˆ¬é€šè¿‡è‡ªå®šä¹‰ xml å®ç°ã€‚<br>bï¼‰å…¶æ¬¡æ˜¯çˆ¶å¯¹è±¡ layout æ–‡ä»¶,å³ç”¨äº Activity æˆ–è€… Fragment çš„å¸ƒå±€è¾“å‡ºæ–‡ä»¶,ä¸€ èˆ¬åœ¨æ­¤è¾“å‡ºæ–‡ä»¶ä¸­åŒ…å« ListViewã€‚</p><p>å½“ç„¶,å¦‚æœé‡‡ç”¨ ListFragment æˆ– ListActivity, å¹¶ä¸éœ€è¦å†æ˜¾ç¤ºçš„å®šä¹‰ ListView ç»„ä»¶</p><p>cï¼‰å®šä¹‰æ•°æ®ç»“æ„(å®¹å™¨),å³ç”¨äºæŒæœ‰å•ä¸ª Item çš„æ•°æ®,å¯ä»¥æ˜¯ç®€å•çš„ String,ä¹Ÿ å¯ä»¥é€šè¿‡æŠ½è±¡ Items æ‰€éœ€å­—æ®µç»„æˆä¸€ä¸ªç±»,æŠ½è±¡çš„åŸåˆ™æ˜¯ä¸ Item ä¸­çš„ç»„ä»¶å¯¹åº”ã€‚</p><p>æœ¬æ–‡ä¸­ä¸Šå›¾æ¶‰åŠå¤šä¸ªå­—æ®µ,å› æ­¤é€šè¿‡æŠ½è±¡ç»„ä»¶å½¢æˆ BBSTopicItem ç±»ã€‚</p><p>dï¼‰åˆ—è¡¨é€‚é…å™¨ã€‚å†³å®šæ¯è¡Œ Item ä¸­å…·ä½“æ˜¾ç¤ºä»€ä¹ˆå†…å®¹,ä»¥æ€æ ·çš„æ ·å¼æ˜¾ç¤ºç­‰,é€šå¸¸é€š è¿‡ç»§æ‰¿ ArrayAdapterã€SimpleAdapter ç­‰å®ç°ã€‚æœ¬æ–‡å®šä¹‰ BBSTopicAdapter, ç»§æ‰¿äº ArrayAdapter<BBSTopicItem>ã€‚</p><p>eï¼‰æœ€å,éœ€è¦å®šä¹‰ä¸€ä¸ª Activity æˆ– Fragment æ¥ä½¿ç”¨ä¸Šè¿°æ¨¡å—ã€‚</p><h3 id="ListViewçš„ç®€å•ç”¨æ³•"><a href="#ListViewçš„ç®€å•ç”¨æ³•" class="headerlink" title="ListViewçš„ç®€å•ç”¨æ³•"></a>ListViewçš„ç®€å•ç”¨æ³•</h3><h6 id="å®ç°æ­¥éª¤ï¼š"><a href="#å®ç°æ­¥éª¤ï¼š" class="headerlink" title="å®ç°æ­¥éª¤ï¼š"></a>å®ç°æ­¥éª¤ï¼š</h6><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œ å¹¶è®©ADT è‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½æ´»åŠ¨ã€‚ç„¶åä¿®æ”¹activity_main.xml ä¸­çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    &lt;ListView</span><br><span class="line">        android:id=&quot;@+id/list_view&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;<span class="tag">&lt;/<span class="name">ListView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨MainActivity ä¸­é¦–é¡µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.åˆ›å»ºä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">ListView listView = (ListView)findViewById(R.id.list_view);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶å<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.åˆ›å»ºä¸€äº›æ•°æ®</span></span><br><span class="line"> initFruits();</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initFruits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">12</span>; i++) &#123;</span><br><span class="line">            Fruit apple = <span class="keyword">new</span> Fruit(<span class="string">&quot;Apple&quot;</span>, R.drawable.apple_pic);</span><br><span class="line">            fruitList.add(apple);</span><br><span class="line">            Fruit banana = <span class="keyword">new</span> Fruit(<span class="string">&quot;Banana&quot;</span>, R.drawable.banana_pic);</span><br><span class="line">            fruitList.add(banana);</span><br><span class="line">            Fruit orange = <span class="keyword">new</span> Fruit(<span class="string">&quot;Orange&quot;</span>, R.drawable.orange_pic);</span><br><span class="line">            fruitList.add(orange);</span><br><span class="line">            Fruit watermelon = <span class="keyword">new</span> Fruit(<span class="string">&quot;Watermelon&quot;</span>, R.drawable.watermelon_pic);</span><br><span class="line">            fruitList.add(watermelon);</span><br><span class="line">            Fruit pear = <span class="keyword">new</span> Fruit(<span class="string">&quot;Pear&quot;</span>, R.drawable.pear_pic);</span><br><span class="line">            fruitList.add(pear);</span><br><span class="line">            Fruit grape = <span class="keyword">new</span> Fruit(<span class="string">&quot;Grape&quot;</span>, R.drawable.grape_pic);</span><br><span class="line">            fruitList.add(grape);</span><br><span class="line">            Fruit pineapple = <span class="keyword">new</span> Fruit(<span class="string">&quot;Pineapple&quot;</span>, R.drawable.pineapple_pic);</span><br><span class="line">            fruitList.add(pineapple);</span><br><span class="line">            Fruit strawberry = <span class="keyword">new</span> Fruit(<span class="string">&quot;Strawberry&quot;</span>, R.drawable.strawberry_pic);</span><br><span class="line">            fruitList.add(strawberry);</span><br><span class="line">            Fruit cherry = <span class="keyword">new</span> Fruit(<span class="string">&quot;Cherry&quot;</span>, R.drawable.cherry_pic);</span><br><span class="line">            fruitList.add(cherry);</span><br><span class="line">            Fruit mango = <span class="keyword">new</span> Fruit(<span class="string">&quot;Mango&quot;</span>, R.drawable.mango_pic);</span><br><span class="line">            fruitList.add(mango);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ç„¶å<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3 å°†æ•°æ®å¯¼å…¥ListView</span></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹åŒ–ä¸€ä¸ªadapter å°†æ•°æ®ä¼ å…¥å…¶ä¸­</span></span><br><span class="line">NewFuritAdapter adapter = <span class="keyword">new</span> NewFuritAdapter(fruitList);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>æœ€å<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listView.setAdapter(adapter);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åˆ›å»ºAdapter</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FuritAdapter</span> <span class="keyword">extends</span> <span class="title">ArrayAdapter</span>&lt;<span class="title">Fruit</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>  resourceId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡å†™çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context   ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> textViewResourceId   å­é¡¹å¸ƒå±€çš„ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objects   æ•°æ®æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FuritAdapter</span><span class="params">(Context context, <span class="keyword">int</span> textViewResourceId, List&lt;Fruit&gt; objects)</span></span>&#123;</span><br><span class="line">         <span class="keyword">super</span>(context,textViewResourceId,objects);</span><br><span class="line">         resourceId = textViewResourceId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *è¿™ä¸ªæ–¹æ³•å†å­é¡¹ç›®æ»šåŠ¨åˆ°å±å¹•å†…çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> position</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> convertView  ç¼“å­˜æ•°æ®çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parent</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å½“å‰fruitçš„å®ä¾‹</span></span><br><span class="line">        Fruit fruit = getItem(position);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é»˜è®¤åˆå§‹åŒ–viewHolderç±»</span></span><br><span class="line">        ViewHolder viewHolder;</span><br><span class="line">        <span class="keyword">if</span>(convertView == <span class="keyword">null</span>)&#123;</span><br><span class="line">            convertView = LayoutInflater.from(getContext()).inflate(resourceId,parent,<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å½“convertViewåˆšåˆ›å»ºçš„æ—¶å€™ å­˜å‚¨viewholderå­æ§ä»¶</span></span><br><span class="line">            viewHolder = <span class="keyword">new</span> ViewHolder();</span><br><span class="line">            viewHolder.fruitImage = (ImageView)view.findViewById(R.id.fruit_image);</span><br><span class="line">            viewHolder.fruitName = (TextView)view.findViewById(R.id.fruit_name) ;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//viewä¸setTagç»‘å®š å½“å¾€ä¸‹æ»‘åŠ¨ä¼šè°ƒç”¨getViewçš„æ–¹æ³•</span></span><br><span class="line">            convertView.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder = (ViewHolder)convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.fruitImage.setImageResource(fruit.getImageId());</span><br><span class="line">        viewHolder.fruitName.setText(fruit.getName());</span><br><span class="line">        <span class="keyword">return</span> convertView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span></span>&#123;</span><br><span class="line">        ImageView fruitImage;</span><br><span class="line">        TextView  fruitName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181012/IIdDhI1bGB.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android studioæ–­ç‚¹è°ƒè¯•</title>
      <link href="2018/09/12/Android%20studio%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/"/>
      <url>2018/09/12/Android%20studio%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>å·¥å…·å¦‚ä½•ä½¿ç”¨<br><a id="more"></a></p><blockquote><p>è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»çº¢ç‚¹ä½ç½®æ·»åŠ æˆ–å–æ¶ˆæ–­ç‚¹ï¼‰<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/dDif34E3hB.png"                      alt="mark"                ></p></blockquote><p>ç‚¹å‡»debugæ¨¡å¼è¿è¡Œ<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/3hKj47J1Hk.png"                      alt="mark"                ></p><h1 id="ä¸€ã€ç®€å•è°ƒè¯•"><a href="#ä¸€ã€ç®€å•è°ƒè¯•" class="headerlink" title="ä¸€ã€ç®€å•è°ƒè¯•"></a>ä¸€ã€ç®€å•è°ƒè¯•</h1><h2 id="1-step-overï¼šä¸€æ­¥æ­¥å¾€ä¸‹èµ°"><a href="#1-step-overï¼šä¸€æ­¥æ­¥å¾€ä¸‹èµ°" class="headerlink" title="1. step overï¼šä¸€æ­¥æ­¥å¾€ä¸‹èµ°"></a>1. step overï¼šä¸€æ­¥æ­¥å¾€ä¸‹èµ°</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/8AFbiBb4F0.png"                      alt="mark"                ></p><blockquote><p>å½“å‰ç¨‹åºè¿è¡Œçš„ä½ç½®ï¼Œæˆ‘ä»¬çœ‹åˆ°içš„å€¼å·²ç»åœ¨ç¨‹åºä»£ç ä¸­å±•ç¤ºå‡ºæ¥äº†ï¼Œé»„è‰²çš„ä»£ç å¤„ï¼Œè¿™ä¸ªæ˜¯ASçš„åŠŸèƒ½ï¼Œå¯¹äºæˆ‘ä»¬è°ƒè¯•æ¥è®²ï¼Œè¿™ç®€ç›´æ˜¯éå¸¸å¤§çš„ç¦åˆ©äº†ã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/IdiiD0Jl7a.png"                      alt="mark"                ></p><p>è¿™æ—¶æˆ‘ä»¬ç»§ç»­F8ï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°logcatæŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘æ‰“å°å‡ºçš„içš„å€¼æ˜¯0<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/b6Hm3I6Fd5.png"                      alt="mark"                ></p><h2 id="2-step-intoï¼šçœ‹åˆ°æ–¹æ³•å¾€é‡Œèµ°"><a href="#2-step-intoï¼šçœ‹åˆ°æ–¹æ³•å¾€é‡Œèµ°" class="headerlink" title="2. step intoï¼šçœ‹åˆ°æ–¹æ³•å¾€é‡Œèµ°"></a>2. step intoï¼šçœ‹åˆ°æ–¹æ³•å¾€é‡Œèµ°</h2><blockquote><p>æ¯”å¦‚æˆ‘ä»¬çš„forå¾ªç¯å½“ä¸­è°ƒç”¨äº†ä¸€ä¸ªstepNext(int i)æ–¹æ³•ï¼Œå½“æˆ‘ä»¬èµ°åˆ°è¿™é‡Œæƒ³çœ‹çœ‹è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„è¿è¡Œè¿‡ç¨‹çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼Œå½“èµ°åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹F7,æˆ–è€…å¦‚ä¸‹å›¾çš„å›¾æ ‡ã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/90gJIhlGIf.png"                      alt="mark"                ></p><blockquote><p>è¿™æ—¶å°±èµ°åˆ°äº†stepNextæ–¹æ³•å½“ä¸­ã€‚<br>åœ¨è¿™é‡Œæ‰“å°äº†ä¸€ä¸ªlogï¼Œæˆ‘ä»¬å†æŒ‰ä¸€ä¸‹F8æˆ‘ä»¬æ¥çœ‹çœ‹Logcat, è¿™é‡Œæˆ‘æ‰“å°çš„logéƒ½æ˜¯ä¸ºäº†åšæ•™ç¨‹ç”¨ï¼Œè°ƒè¯•æˆ‘ä»¬å°±ä¸ç”¨æ‰“logäº†ç›´æ¥çœ‹æ˜¾ç¤ºé¢æ¿å°±OKäº†</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/21mlEAE37F.png"                      alt="mark"                ></p><h2 id="4-step-out-ï¼šæœ‰æ–­ç‚¹ä¸‹ä¸€ä¸ªï¼Œèµ°å®Œæ–­ç‚¹ç»§ç»­èµ°"><a href="#4-step-out-ï¼šæœ‰æ–­ç‚¹ä¸‹ä¸€ä¸ªï¼Œèµ°å®Œæ–­ç‚¹ç»§ç»­èµ°" class="headerlink" title="4. step out ï¼šæœ‰æ–­ç‚¹ä¸‹ä¸€ä¸ªï¼Œèµ°å®Œæ–­ç‚¹ç»§ç»­èµ°"></a>4. step out ï¼šæœ‰æ–­ç‚¹ä¸‹ä¸€ä¸ªï¼Œèµ°å®Œæ–­ç‚¹ç»§ç»­èµ°</h2><blockquote><p>è¿™é‡Œå¦‚æœæˆ‘ä»¬çš„ä¸€ä¸ªæµç¨‹å½“ä¸­ï¼ŒåŒ…æ‹¬è°ƒç”¨çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰æ–­ç‚¹èµ°åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¦‚æœæ²¡æœ‰æ–­ç‚¹ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªè°ƒç”¨çš„æ–¹æ³•å½“ä¸­ï¼Œä¼šè·³å‡ºè¿™ä¸ªæ–¹æ³•ï¼Œç»§ç»­èµ°ã€‚</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/5HjlkbgJac.png"                      alt="mark"                ></p><blockquote><p>æˆ‘ç°åœ¨ç¨‹åºä½ç½®åœ¨ç¬¬ä¸€ä¸ªæ–­ç‚¹ä½ç½®ï¼ˆ24è¡Œï¼‰ï¼Œæˆ‘è°ƒç”¨çš„stepNextæ–¹æ³•ä¸­ä¹Ÿæœ‰ä¸€ä¸ªæ–­ç‚¹ï¼Œæ­¤æ—¶æˆ‘æŒ‰ä¸‹step outæŒ‰é’®ä¼šèµ°åˆ°stepNextä¸­çš„æ–­ç‚¹å¤„ï¼ˆ39è¡Œï¼‰æˆ‘æ­¤æ—¶å¦‚æœå†æŒ‰ä¸€ä¸‹step out ä¼šèµ°åˆ°stepNextæ–¹æ³•çš„è°ƒç”¨å‡ºçš„ä¸‹ä¸€ä¸ªå¯æ‰§è¡Œä»£ç ï¼ˆ30è¡Œï¼‰</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/e64993jDj0.png"                      alt="mark"                ></p><h2 id="5-run-to-Cursor-ï¼šä¸‹ä¸ªæ–­ç‚¹æˆ‘ä»¬è§"><a href="#5-run-to-Cursor-ï¼šä¸‹ä¸ªæ–­ç‚¹æˆ‘ä»¬è§" class="headerlink" title="5. run to Cursor ï¼šä¸‹ä¸ªæ–­ç‚¹æˆ‘ä»¬è§"></a>5. run to Cursor ï¼šä¸‹ä¸ªæ–­ç‚¹æˆ‘ä»¬è§</h2><blockquote><p>è¿™é‡Œçš„æ„æ€å°±æ˜¯è¯´ï¼Œä¼šå¾ˆå¿«æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹çš„ä½ç½®ï¼Œè€Œä¸”å¯ä»¥é™å¦‚ä»»ä½•è°ƒç”¨çš„æ–¹æ³•</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/ibdi2mHfIK.png"                      alt="mark"                ></p><h1 id="äºŒã€é«˜çº§è°ƒè¯•"><a href="#äºŒã€é«˜çº§è°ƒè¯•" class="headerlink" title="äºŒã€é«˜çº§è°ƒè¯•"></a>äºŒã€é«˜çº§è°ƒè¯•</h1><h2 id="1-è·¨æ–­ç‚¹è°ƒè¯•"><a href="#1-è·¨æ–­ç‚¹è°ƒè¯•" class="headerlink" title="1. è·¨æ–­ç‚¹è°ƒè¯•"></a>1. è·¨æ–­ç‚¹è°ƒè¯•</h2><blockquote><p>å¦‚æœæˆ‘ä»¬è®¾ç½®äº†å¤šä¸ªæ–­ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œé‚£ä¹ˆç›´æ¥ç‚¹å‡»ä¸‹å›¾å°±å¯ä»¥äº†<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/50BLK889h5.png"                      alt="mark"                ></p></blockquote><h2 id="2-è§‚å¯Ÿå˜é‡"><a href="#2-è§‚å¯Ÿå˜é‡" class="headerlink" title="2.è§‚å¯Ÿå˜é‡"></a>2.è§‚å¯Ÿå˜é‡</h2><blockquote><p>å¦‚æœæˆ‘ä»¬æƒ³è§‚å¯Ÿ1ä¸ªæˆ–è€…å‡ ä¸ªå˜é‡çš„å€¼çš„å˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬åœ¨Variablesæ˜¾ç¤ºé¢ç‰ˆä¸­è§‚å¯Ÿå¦‚æœæˆ‘è¿™é‡Œæœ‰å¤ªå¤šå¤ªå¤šçš„è‡ªå®šä¹‰å˜é‡å’Œç³»ç»Ÿå˜é‡äº†ï¼Œé‚£ä¹ˆå°±éš¾è§‚å¯Ÿäº†ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹æ“ä½œ:ç‚¹å‡»Watches,ç‚¹å‡»ï¼‹å·ï¼Œç„¶åè¾“å…¥å˜é‡çš„åç§°å›è½¦å°±OKäº†ï¼Œè€Œä¸”ä¼šæœ‰å†å²è®°å½•å“¦</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181018/93ED7LaHLA.png"                      alt="mark"                ></p><blockquote><p>å¦‚æœå˜é‡åæ¯”è¾ƒé•¿æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š<br>é€‰æ‹©ï¼»Variablesï¼½ä¸­çš„å˜é‡åç„¶åç‚¹å‡»ï¼»å³é”®ï¼½ï¼Œé€‰æ‹©ï¼»Add to Watches],ç„¶åWatchesé¢æ¿ä¸­å°±æœ‰äº†</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆfetchä¸axiosä¸ajax</title>
      <link href="2018/06/01/%E6%B5%85%E8%B0%88fetch%E4%B8%8Eaxios%E4%B8%8Eajax/"/>
      <url>2018/06/01/%E6%B5%85%E8%B0%88fetch%E4%B8%8Eaxios%E4%B8%8Eajax/</url>
      
        <content type="html"><![CDATA[<h2 id="1-JQuery-ajax"><a href="#1-JQuery-ajax" class="headerlink" title="1 JQuery ajax"></a>1 JQuery ajax</h2><p>è¿™ä¸ªæˆ‘å°±ä¸ç”¨å¤šè¨€äº†æŠŠï¼Œæ˜¯å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œé™¤æ­¤ä»¥å¤–è¿˜å¢æ·»äº†å¯¹JSONPçš„æ”¯æŒã€‚æœ‰ä¸€è¯´ä¸€çš„è¯´ä¸€å¥ï¼ŒJQuery ajaxç»è¿‡å¤šå¹´çš„æ›´æ–°ç»´æŠ¤ï¼ŒçœŸçš„å·²ç»æ˜¯éå¸¸çš„æ–¹ä¾¿äº†ï¼Œä¼˜ç‚¹æ— éœ€å¤šè¨€ï¼›å¦‚æœæ˜¯ç¡¬è¦ä¸¾å‡ºå‡ ä¸ªç¼ºç‚¹ï¼Œé‚£å¯èƒ½åªæœ‰<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">   type: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">   url: url,</span><br><span class="line">   data: data,</span><br><span class="line">   dataType: dataType,</span><br><span class="line">   success: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">   error: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><ul><li>æœ¬èº«æ˜¯é’ˆå¯¹MVCçš„ç¼–ç¨‹,ä¸ç¬¦åˆç°åœ¨å‰ç«¯MVVMçš„æµªæ½®</li><li>åŸºäºåŸç”Ÿçš„XHRå¼€å‘ï¼ŒXHRæœ¬èº«çš„æ¶æ„ä¸æ¸…æ™°ï¼Œå·²ç»æœ‰äº†fetchçš„æ›¿ä»£æ–¹æ¡ˆ</li><li>JQueryæ•´ä¸ªé¡¹ç›®å¤ªå¤§ï¼Œå•çº¯ä½¿ç”¨ajaxå´è¦å¼•å…¥æ•´ä¸ªJQueryéå¸¸çš„ä¸åˆç†ï¼ˆé‡‡å–ä¸ªæ€§åŒ–æ‰“åŒ…çš„æ–¹æ¡ˆåˆä¸èƒ½äº«å—CDNæœåŠ¡ï¼‰</li><li>å°½ç®¡JQueryå¯¹æˆ‘ä»¬å‰ç«¯çš„å¼€å‘å·¥ä½œæ›¾æœ‰ç€ï¼ˆç°åœ¨ä¹Ÿä»ç„¶æœ‰ç€ï¼‰æ·±è¿œçš„å½±å“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éšç€VUEï¼ŒREACTæ–°ä¸€ä»£æ¡†æ¶çš„å…´èµ·ï¼Œä»¥åŠESè§„èŒƒçš„å®Œå–„ï¼Œæ›´å¤šAPIçš„æ›´æ–°ï¼ŒJQueryè¿™ç§å¤§è€Œå…¨çš„JSåº“ï¼Œæœªæ¥çš„è·¯ä¼šè¶Šèµ°è¶Šçª„ã€‚</li></ul><h2 id="2-Axios"><a href="#2-Axios" class="headerlink" title="2 Axios"></a>2 Axios</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;/user/12345&#x27;</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        firstName: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">        lastName: <span class="string">&#x27;Flintstone&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Vue2.0ä¹‹åï¼Œå°¤é›¨æºªæ¨èå¤§å®¶ç”¨axiosæ›¿æ¢JQuery ajaxï¼Œæƒ³å¿…è®©Axiosè¿›å…¥äº†å¾ˆå¤šäººçš„ç›®å…‰ä¸­ã€‚Axiosæœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œåªä¸è¿‡å®ƒæ˜¯Promiseçš„å®ç°ç‰ˆæœ¬ï¼Œç¬¦åˆæœ€æ–°çš„ESè§„èŒƒï¼Œä»å®ƒçš„å®˜ç½‘ä¸Šå¯ä»¥çœ‹åˆ°å®ƒæœ‰ä»¥ä¸‹å‡ æ¡ç‰¹æ€§ï¼š</p><ol><li>ä» node.js åˆ›å»º http è¯·æ±‚</li><li>æ”¯æŒ Promise API</li><li>å®¢æˆ·ç«¯æ”¯æŒé˜²æ­¢CSRF</li><li>æä¾›äº†ä¸€äº›å¹¶å‘è¯·æ±‚çš„æ¥å£ï¼ˆé‡è¦ï¼Œæ–¹ä¾¿äº†å¾ˆå¤šçš„æ“ä½œï¼‰</li></ol><ul><li>è¿™ä¸ªæ”¯æŒé˜²æ­¢CSRFå…¶å®æŒºå¥½ç©çš„ï¼Œæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Œå°±æ˜¯è®©ä½ çš„æ¯ä¸ªè¯·æ±‚éƒ½å¸¦ä¸€ä¸ªä»cookieä¸­æ‹¿åˆ°çš„key, æ ¹æ®æµè§ˆå™¨åŒæºç­–ç•¥ï¼Œå‡å†’çš„ç½‘ç«™æ˜¯æ‹¿ä¸åˆ°ä½ cookieä¸­å¾—keyçš„ï¼Œè¿™æ ·ï¼Œåå°å°±å¯ä»¥è½»æ¾è¾¨åˆ«å‡ºè¿™ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯ç”¨æˆ·åœ¨å‡å†’ç½‘ç«™ä¸Šçš„è¯¯å¯¼è¾“å…¥ï¼Œä»è€Œé‡‡å–æ­£ç¡®çš„ç­–ç•¥ã€‚</li><li>Axiosæ—¢æä¾›äº†å¹¶å‘çš„å°è£…ï¼Œä¹Ÿæ²¡æœ‰ä¸‹æ–‡ä¼šæåˆ°çš„fetchçš„å„ç§é—®é¢˜ï¼Œè€Œä¸”ä½“ç§¯ä¹Ÿè¾ƒå°ï¼Œå½“ä¹‹æ— æ„§ç°åœ¨æœ€åº”è¯¥é€‰ç”¨çš„è¯·æ±‚çš„æ–¹å¼ã€‚<br>-</li></ul><h2 id="3-Fetch"><a href="#3-Fetch" class="headerlink" title="3 Fetch"></a>3 Fetch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">  <span class="keyword">let</span> data = response.json();</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Oops, error&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘è®¤ä¸ºfetchçš„ä¼˜åŠ¿ä¸»è¦ä¼˜åŠ¿å°±æ˜¯ï¼š</p><ol><li>æ›´åŠ åº•å±‚ï¼Œæä¾›çš„APIä¸°å¯Œï¼ˆrequest, responseï¼‰</li><li>è„±ç¦»äº†XHRï¼Œæ˜¯ESè§„èŒƒé‡Œæ–°çš„å®ç°æ–¹å¼<br>å¤§å®¶éƒ½å–œæ¬¢æ–°çš„ä¸œè¥¿ï¼Œå¦ç™½è¯´ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨ä½¿ç”¨åŸç”ŸXHRçš„æ—¶å€™ï¼Œå°½ç®¡å¶å°”è§‰å¾—å†™çš„ä¸‘é™‹ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†JQueryå’Œaxiosä¹‹åï¼Œå·²ç»å¯¹è¿™ä¸€å—å®Œå…¨æ— æ‰€è°“äº†ã€‚å½“ç„¶ï¼Œå¦‚æœæ–°çš„fetchèƒ½åšçš„åŒæ ·å¥½ï¼Œæˆ‘ä¸ºäº†ä¸æ‰é˜Ÿä¹Ÿä¼šé€‰æ‹©ä½¿ç”¨fetchã€‚è¿™ä¸ªé“ç†å…¶å®å¾ˆå¥½ç†è§£ï¼šä½ æœ‰ä¸€æ¶æ­¼8ï¼Œé­”æ”¹äº†Næ¬¡ï¼Œæ€§èƒ½è¾¾åˆ°äº†æ­¼10çš„æ°´å‡†ï¼Œä½†æ˜¯è¦æ˜¯æœ‰ä¸ªäººç»™ä½ æ‹¿æ¥ä¸€æ¶æ–°çš„æ­¼10ï¼Œä½ ä¹Ÿä¼šæ¯«ä¸çŠ¹è±«çš„é€‰æ‹©æ–°çš„æ­¼10â€”â€”ä¸ä»…ä»…æ˜¯æ–°ï¼Œä¹Ÿä»£è¡¨äº†è¿˜æœ‰æ–°çš„é­”æ”¹æ½œåŠ›ã€‚</li></ol><p>ä½†æ˜¯æˆ‘æœ€è¿‘åœ¨ä½¿ç”¨fetchçš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°äº†ä¸å°‘çš„é—®é¢˜ï¼š</p><p>fetchæ˜¯ä¸€ä¸ªä½å±‚æ¬¡çš„APIï¼Œä½ å¯ä»¥æŠŠå®ƒè€ƒè™‘æˆåŸç”Ÿçš„XHRï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆèˆ’æœï¼Œéœ€è¦è¿›è¡Œå°è£…<br><code>å¿…é¡»é‡è§†ä»¥ä¸‹å‡ ç‚¹</code></p><ol><li>fetchåªå¯¹ç½‘ç»œè¯·æ±‚æŠ¥é”™ï¼Œå¯¹400ï¼Œ500éƒ½å½“åšæˆåŠŸçš„è¯·æ±‚ï¼Œéœ€è¦å°è£…å»å¤„ç†</li><li>fetché»˜è®¤ä¸ä¼šå¸¦cookieï¼Œéœ€è¦æ·»åŠ é…ç½®é¡¹</li><li>fetchä¸æ”¯æŒabortï¼Œä¸æ”¯æŒè¶…æ—¶æ§åˆ¶ï¼Œä½¿ç”¨setTimeoutåŠPromise.rejectçš„å®ç°çš„è¶…æ—¶æ§åˆ¶å¹¶ä¸èƒ½é˜»æ­¢è¯·æ±‚è¿‡ç¨‹ç»§ç»­åœ¨åå°è¿è¡Œï¼Œé€ æˆäº†æµé‡çš„æµªè´¹</li><li>fetchæ²¡æœ‰åŠæ³•åŸç”Ÿç›‘æµ‹è¯·æ±‚çš„è¿›åº¦ï¼Œè€ŒXHRå¯ä»¥</li></ol><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¿ƒé‡Œä¸€å®šæœ‰ä¸ªç–‘é—®ï¼Œè¿™é¬¼ä¸œè¥¿å°±æ˜¯ä¸ªåŠæ‹‰å­å·¥ç¨‹å˜›ï¼Œæˆ‘è¿˜æ˜¯å›å»ç”¨Jqueryæˆ–è€…Axiosç®—äº†â€”â€”å…¶å®æˆ‘å°±æ˜¯è¿™ä¹ˆæ‰“ç®—çš„ã€‚ä½†æ˜¯ï¼Œå¿…é¡»è¦æå‡ºçš„æ˜¯ï¼Œæˆ‘å‘ç°fetchåœ¨å‰ç«¯çš„åº”ç”¨ä¸Šæœ‰ä¸€é¡¹xhræ€ä¹ˆä¹Ÿæ¯”ä¸ä¸Šçš„èƒ½åŠ›ï¼šè·¨åŸŸçš„å¤„ç†ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“å› ä¸ºåŒæºç­–ç•¥çš„é—®é¢˜ï¼Œæµè§ˆå™¨çš„è¯·æ±‚æ˜¯å¯èƒ½éšä¾¿è·¨åŸŸçš„â€”â€”ä¸€å®šè¦æœ‰è·¨åŸŸå¤´æˆ–è€…å€ŸåŠ©JSONPï¼Œä½†æ˜¯ï¼Œfetchä¸­å¯ä»¥è®¾ç½®modeä¸ºâ€no-corsâ€ï¼ˆä¸è·¨åŸŸï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/users.json&#x27;</span>, &#123;</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    mode: <span class="string">&#x27;no-cors&#x27;</span>,</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">/* handle response */</span> &#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¹‹åæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªtypeä¸ºâ€œopaqueâ€çš„è¿”å›ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯çœŸæ­£æŠµè¾¾è¿‡åå°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œä¿¡æ¯ä¸ŠæŠ¥ï¼Œåœ¨æˆ‘ä»¬ä¹‹å‰çš„image.srcæ–¹æ³•ä¸­å¤šå‡ºäº†ä¸€ç§é€‰æ‹©ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨networkä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªè¯·æ±‚åå°è®¾ç½®è·¨åŸŸå¤´ä¹‹åçš„å®é™…è¿”å›ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æå‰è°ƒè¯•æ¥å£ï¼ˆå½“ç„¶ï¼Œé€šè¿‡chromeæ’ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åšçš„åˆ°ï¼‰ã€‚æ€»ä¹‹ï¼Œfetchç°åœ¨è¿˜ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œæˆ‘å°è¯•è¿‡å‡ ä¸ªfetchå°è£…çš„åŒ…ï¼Œéƒ½è¿˜ä¸å°½å¦‚äººæ„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆä¸‰ï¼‰</title>
      <link href="2018/05/20/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%B8%89)/"/>
      <url>2018/05/20/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%B8%89)/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸ç”¨æœåŠ¡"><a href="#å¸¸ç”¨æœåŠ¡" class="headerlink" title="å¸¸ç”¨æœåŠ¡"></a>å¸¸ç”¨æœåŠ¡</h1><h4 id="1-é™æ€æ–‡ä»¶æœåŠ¡"><a href="#1-é™æ€æ–‡ä»¶æœåŠ¡" class="headerlink" title="1. é™æ€æ–‡ä»¶æœåŠ¡"></a>1. é™æ€æ–‡ä»¶æœåŠ¡</h4><p>ä½¿ç”¨koa-static<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">&quot;koa-static&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(server(_dirname+<span class="string">&quot;/static/html&quot;</span>,&#123;<span class="attr">extensions</span>:[<span class="string">&#x27;html&#x27;</span>]&#125;));</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure></p><h4 id="2-è·¯ç”±æœåŠ¡"><a href="#2-è·¯ç”±æœåŠ¡" class="headerlink" title="2. è·¯ç”±æœåŠ¡"></a>2. è·¯ç”±æœåŠ¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&quot;koa-router&quot;</span>)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bodyParser= <span class="built_in">require</span>(<span class="string">&#x27;Koa-bodyparser&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser());</span><br><span class="line">app.use(router.routes());</span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>,<span class="keyword">async</span>(ctx,next)=&gt;&#123;</span><br><span class="line">    ctx.response.body=<span class="string">&#x27;hello,word&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/login&#x27;</span>,<span class="keyword">async</span>(ctx,next)=&gt;&#123;</span><br><span class="line">    <span class="keyword">let</span> name = ctx.request.body.name || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> pwd = ctx.request.body.password || <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(name === <span class="string">&#x27;koa&#x27;</span> &amp;&amp; pwd === <span class="string">&#x27;123&#x27;</span>)&#123;</span><br><span class="line">        ctx.body = <span class="string">&#x27;sucdess&#x27;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        ctx.body = <span class="string">&#x27;false&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·¯ç”±ä¹Ÿå¯ä»¥è¿™æ ·</span></span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/del/blog/:blogId&#x27;</span>,<span class="keyword">async</span>(ctx,next)=&gt;&#123;</span><br><span class="line">    <span class="keyword">await</span> dbAPI.deletetblogID(ctx.params.blogId)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-æ•°æ®å­˜å‚¨"><a href="#3-æ•°æ®å­˜å‚¨" class="headerlink" title="3. æ•°æ®å­˜å‚¨"></a>3. æ•°æ®å­˜å‚¨</h4><p>å®‰è£…mongoose<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mongoose --save</span><br></pre></td></tr></table></figure><br>æ–°å»ºdb.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line">mongoose.connect(<span class="string">&#x27;mongodb://localhost/test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> db = mongoose.connection;</span><br><span class="line">db.on(<span class="string">&#x27;error&#x27;</span>,<span class="built_in">console</span>.error.bind(<span class="built_in">console</span>,<span class="string">&#x27;connection,error&#x27;</span>));</span><br><span class="line">db.once(<span class="string">&#x27;open&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//connected!!!!</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹å»åˆ›å»º2ç±»æ–‡ä»¶</p><h5 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h5><p>ä¸€ç§æ–‡ä»¶å½¢å¼å­˜å‚¨çš„æ•°æ®åº“æ¨¡å‹éª¨æ¶ï¼Œä¸å…·å¤‡æ•°æ®åº“çš„æ“ä½œèƒ½åŠ›</p><h5 id="model"><a href="#model" class="headerlink" title="model"></a>model</h5><p>åˆschemaå‘å¸ƒç”Ÿæˆçš„æ¨¡å‹ï¼Œå…·å¤‡æŠ½è±¡å±æ€§å’Œè¡Œä¸ºçš„æ•°æ®åº“æ“ä½œå¯¹</p><p>ä¸‹é¢çœ‹æ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> loginSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    username:<span class="built_in">String</span>,</span><br><span class="line">    pwd:<span class="built_in">String</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> login = db.model(<span class="string">&#x27;login&#x27;</span>,loginSchema,<span class="string">&#x27;login&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> user1 = <span class="keyword">new</span> login(&#123;</span><br><span class="line">    username:<span class="string">&#x27;len&#x27;</span>,</span><br><span class="line">    pwd:<span class="string">&#x27;123&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">user1.save(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span> handleError(err)</span><br><span class="line">    <span class="comment">//savee</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">var</span> query = login.find(&#123;<span class="attr">username</span>:<span class="string">&#x27;len&#x27;</span>&#125;);</span><br><span class="line">query.then(<span class="function"><span class="keyword">function</span>(<span class="params">doc</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(doc)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-é¡µé¢æ¸²æŸ“"><a href="#4-é¡µé¢æ¸²æŸ“" class="headerlink" title="4. é¡µé¢æ¸²æŸ“"></a>4. é¡µé¢æ¸²æŸ“</h4><p>ä½¿ç”¨ejs</p><p>å‰ç«¯æ¸²æŸ“å’Œåç«¯æ¸²æŸ“</p><blockquote><p>æœåŠ¡å™¨æ¸²æŸ“ä¼˜ç‚¹ï¼šé¦–å±åŠ è½½å¿«ï¼Œ<br>å¯¹seoæœ‰åˆ©</p><p>ç¼ºç‚¹ï¼šå‰åç«¯è€¦åˆï¼Œä»£ç éš¾æ˜“ç»´æŠ¤ä¸”ä¸ç¾è§‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Koa2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆäºŒï¼‰</title>
      <link href="2018/05/19/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%BA%8C)/"/>
      <url>2018/05/19/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶"></a>ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶</h3><p>ä¸­é—´ä»¶çš„æœ¬è´¨æ˜¯æ¥å—è¯·æ±‚å¹¶ä¸”åšå‡ºç›¸åº”åŠ¨ä½œçš„<code>å‡½æ•°</code>ï¼Œè¯¥å‡½æ•°æ¥å—<code>req</code>å’Œ<code>res</code>,åœ¨webåº”ç”¨ä¸­ï¼Œå®¢æˆ·ç«¯å‘èµ·çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œé¦–å…ˆè¦ç»è¿‡ä¸­é—´ä»¶å¤„ç†æ‰èƒ½ç»§ç»­å‘ä¸‹ã€‚<br><a id="more"></a><br>ä¸­é—´ä»¶çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯<code>next</code>,å®ƒä»£è¡¨ä¸€ä¸ªæ–¹æ³•ï¼Œå³ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p><h6 id="ä¸¾ä¸ªæ —å­ï¼š"><a href="#ä¸¾ä¸ªæ —å­ï¼š" class="headerlink" title="ä¸¾ä¸ªæ —å­ï¼š"></a>ä¸¾ä¸ªæ —å­ï¼š</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;i am a middleware&#x27;</span>);</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸­é—´ä»¶çš„åŠŸèƒ½"><a href="#ä¸­é—´ä»¶çš„åŠŸèƒ½" class="headerlink" title="ä¸­é—´ä»¶çš„åŠŸèƒ½"></a>ä¸­é—´ä»¶çš„åŠŸèƒ½</h3><p>1.ä¿®æ”¹reqï¼Œreså¯¹è±¡<br>2.ç»ˆç»“è¯·æ±‚ï¼Œå“åº”å¾ªç¯<br>3.è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶<br>å¦‚æœæŸä¸€ä¸ªä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨nextæ–¹æ³•ï¼Œåˆ™ä»£è¡¨è¯·æ±‚å¤„ç†åˆ°æ­¤ä¸ºæ­¢ã€‚</p><h3 id="ä¸­é—´ä»¶çš„åŠ è½½"><a href="#ä¸­é—´ä»¶çš„åŠ è½½" class="headerlink" title="ä¸­é—´ä»¶çš„åŠ è½½"></a>ä¸­é—´ä»¶çš„åŠ è½½</h3><p>ä½¿ç”¨<code>use</code>ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line">app.use(md);</span><br></pre></td></tr></table></figure><h3 id="next-æ–¹æ³•"><a href="#next-æ–¹æ³•" class="headerlink" title="next()æ–¹æ³•"></a>next()æ–¹æ³•</h3><p>å½“æˆ‘ä»¬è°ƒç”¨app.useæ–¹æ³•æ—¶ï¼Œåœ¨å†…éƒ¨å½¢æˆäº†ä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„ï¼Œåœ¨å†…éƒ¨ä¼šå°†æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ“ä½œæ”¾åœ¨nextæ–¹æ³•å†…éƒ¨ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œnextæ–¹æ³•å°±ä»£è¡¨æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œ</p><h3 id="ä¸­é—´ä»¶çš„ä¸²è¡Œè°ƒç”¨"><a href="#ä¸­é—´ä»¶çš„ä¸²è¡Œè°ƒç”¨" class="headerlink" title="ä¸­é—´ä»¶çš„ä¸²è¡Œè°ƒç”¨"></a>ä¸­é—´ä»¶çš„ä¸²è¡Œè°ƒç”¨</h3><p>åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¸Œæœ›ä¸€äº›æ“ä½œèƒ½å¤Ÿä¸²è¡Œæ‰§è¡Œï¼Œæ¯”å¦‚ç­‰å¾…å†™å…¥æ—¥å¿—å®Œæˆåå†æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œæœ€åå†è¿›è¡Œè·¯ç”±å¤„ç†ï¼Œè¿™æ ·å°±éœ€è¦ä¸²è¡Œè°ƒç”¨æŸäº›å¼‚æ­¥ä¸­é—´ä»¶</p><h6 id="ä¸¾ä¸ªExpressæ —å­ï¼š"><a href="#ä¸¾ä¸ªExpressæ —å­ï¼š" class="headerlink" title="ä¸¾ä¸ªExpressæ —å­ï¼š"></a>ä¸¾ä¸ªExpressæ —å­ï¼š</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    next()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;i am middleware1&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;i am middleware1&#x27;</span>)</span><br><span class="line">         next()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š<br>//i am middleware1<br>//i am middleware2</p><blockquote><p>åŸç†å°±æ˜¯ ç¬¬äºŒä¸ªä¸­é—´ä»¶è°ƒç”¨äº† process.nextTickæ˜¯ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œå› æ­¤é©¬ä¸Šè¿”å›åˆ°ç¬¬ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­æ‰§è¡Œ</p></blockquote><h6 id="ä¸¾ä¸ªKoa2æ —å­ï¼š"><a href="#ä¸¾ä¸ªKoa2æ —å­ï¼š" class="headerlink" title="ä¸¾ä¸ªKoa2æ —å­ï¼š"></a>ä¸¾ä¸ªKoa2æ —å­ï¼š</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;Koa&#x27;</span>)();</span><br><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">app.use(<span class="function"><span class="title">async</span>(<span class="params">ctx,next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> next()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;i am middleware1&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.use(<span class="function"><span class="title">async</span>(<span class="params">ctx,next</span>)</span>&#123;</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;i am middleware1&#x27;</span>)</span><br><span class="line">         next()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><blockquote><p>åŸç† ä½¿ç”¨äº† await ,çŸ¥é“nextå†…éƒ¨çš„å¼‚æ­¥æ–¹æ³•å®Œæˆä¹‹å‰ï¼Œmiddleware1éƒ½ä¸ä¼šå‘ä¸‹æ‰§è¡Œã€‚</p></blockquote><h3 id="å†ä¸¾ä¸€ä¸ªä¾‹å­-å¦‚ä½•å®ç°è¶…æ—¶å“åº”"><a href="#å†ä¸¾ä¸€ä¸ªä¾‹å­-å¦‚ä½•å®ç°è¶…æ—¶å“åº”" class="headerlink" title="å†ä¸¾ä¸€ä¸ªä¾‹å­-å¦‚ä½•å®ç°è¶…æ—¶å“åº”"></a>å†ä¸¾ä¸€ä¸ªä¾‹å­-å¦‚ä½•å®ç°è¶…æ—¶å“åº”</h3><p>ä½¿ç”¨async å’Œ promise.raceæ–¹æ³•æ¥æ¯”è¾ƒsetimeoutå’Œä¹‹åçš„ä¸­é—´ä»¶å“ªä¸ªæ›´å¿«å®Œæˆã€‚</p><blockquote><p>promise.raceæ–¹æ³•ï¼šå“ªä¸ªè¿”å›å¿«ï¼Œå°±è¿”å›å“ªä¸ªç»“æœï¼Œä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="keyword">async</span>(ctx,next)=&gt;&#123;</span><br><span class="line">    <span class="keyword">var</span> tmr = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> timeout = <span class="number">5000</span></span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.race([</span><br><span class="line">       <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">           tmr = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">               <span class="keyword">var</span> e = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;request timeout&#x27;</span>)</span><br><span class="line">               e.status = <span class="number">408</span>,</span><br><span class="line">               reject(e)</span><br><span class="line">           &#125;,timeout)</span><br><span class="line">       &#125;),</span><br><span class="line">       <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">           (<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">               <span class="keyword">await</span> next();</span><br><span class="line">               <span class="built_in">clearTimeout</span>(tmr);</span><br><span class="line">               resolve()</span><br><span class="line">           &#125;)();   <span class="comment">//æ‰§è¡Œåé¢åŠ è½½çš„ä¸­é—´ä»¶</span></span><br><span class="line">       &#125;)</span><br><span class="line">    ])</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="åç»­å¦‚æœ‰æ›´æ·±çš„ä½“ä¼šå†è¡¥å……â€¦â€¦"><a href="#åç»­å¦‚æœ‰æ›´æ·±çš„ä½“ä¼šå†è¡¥å……â€¦â€¦" class="headerlink" title="åç»­å¦‚æœ‰æ›´æ·±çš„ä½“ä¼šå†è¡¥å……â€¦â€¦"></a>åç»­å¦‚æœ‰æ›´æ·±çš„ä½“ä¼šå†è¡¥å……â€¦â€¦</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E6%9C%BA%E6%99%BA%E5%A6%82%E6%88%91.jpg"                      alt="image"                ></p>]]></content>
      
      
      <categories>
          
          <category> Koa2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆä¸€ï¼‰</title>
      <link href="2018/05/18/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!/"/>
      <url>2018/05/18/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€-å†å²æ¸Šæºï¼š"><a href="#ä¸€-å†å²æ¸Šæºï¼š" class="headerlink" title="ä¸€ å†å²æ¸Šæºï¼š"></a>ä¸€ å†å²æ¸Šæºï¼š</h3><p>åœ¨è°ˆKoa2ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸‹<code>Connect</code>,è¯ç”Ÿäº2010å¹´ï¼Œå¯ä»¥å°†<code>Connect</code>ç†è§£æˆnodeä¸­é—´ä»¶çš„è„šæ‰‹æ¶ï¼Œåªæä¾›åŸºæœ¬çš„è°ƒç”¨é€»è¾‘ï¼Œä¸å…·å¤‡å¤„ç†ä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›ã€‚<br><a id="more"></a><br>ä¾‹å¦‚ ç”¨USE next</p><p>Expressè¿™ä¸ªæ¡†æ¶å‡ºç°åœ¨2010å¹´ï¼Œç»§æ‰¿äº†<code>Connect</code>çš„å¤§éƒ¨åˆ†æ€æƒ³ï¼Œåœ¨æœ€æ–°çš„4.xç‰ˆæœ¬ï¼Œ<code>Express</code>æ‹œæ‰˜äº†<code>Connect</code>çš„ä¾èµ–ï¼Œæ‘’å¼ƒäº†é™æ€æ–‡ä»¶æ¨¡å—ä¹‹å¤–çš„æ‰€æœ‰ä¸­é—´ä»¶ï¼Œåªä¿ç•™æ ¸å¿ƒè·¯ç”±å¤„ç†é€»è¾‘åŠä¸€äº›å…¶ä»–ä»£ç ã€‚</p><p>ä½†æ˜¯<code>Express</code>å¾ˆå¤šåœºæ™¯ä»¥åŠå­˜åœ¨é—®é¢˜ï¼Œä¹‹åå°±æ¨å‡ºäº†<code>Koa1.x</code>  <code>Koa2.x</code>.åˆè¡·æ˜¯å½»åº•è§£å†³Node <strong>webå¼€å‘å¼‚æ­¥é—®é¢˜</strong>ã€‚</p><p>äºŒ.åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„æœåŠ¡å™¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;Koa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa;</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="params">ctx</span> =&gt;</span>&#123;</span><br><span class="line">    ctx.body=<span class="string">&#x27;hello,koa2!!!&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Nodeæä¾›äº†requestå’Œresponseè¿™2ä¸ªå¯¹è±¡ï¼ŒKoaæŠŠä»–å°è£…äº†èµ·æ¥ ctx æ˜¯ç¼©å†™ï¼›<br>å¸¸ç”¨çš„requestï¼š</p><ul><li style="list-style: none"><input type="checkbox"></input> ctx.header</li><li style="list-style: none"><input type="checkbox"></input> ctx,path</li><li style="list-style: none"><input type="checkbox"></input> ctx.query</li><li style="list-style: none"><input type="checkbox"></input> ctx,querystring</li><li style="list-style: none"><input type="checkbox"></input> ctx,get</li></ul><p>å¸¸ç”¨çš„response</p><ul><li style="list-style: none"><input type="checkbox"></input> ctx.body</li><li style="list-style: none"><input type="checkbox"></input> ctx.status</li><li style="list-style: none"><input type="checkbox"></input> ctx.set()</li><li style="list-style: none"><input type="checkbox"></input> ctx.append()</li></ul><h3 id="ä»‹ç»å¸¸ç”¨çš„"><a href="#ä»‹ç»å¸¸ç”¨çš„" class="headerlink" title="ä»‹ç»å¸¸ç”¨çš„"></a>ä»‹ç»å¸¸ç”¨çš„</h3><p>ctx.state:å¯ä»¥å°†åç«¯ä¼ è¿‡æ¥çš„æ•°æ®åˆ°å‰ç«¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.state.user = <span class="keyword">await</span> User.find(id)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤„ç†httpè¯·æ±‚"><a href="#å¤„ç†httpè¯·æ±‚" class="headerlink" title="å¤„ç†httpè¯·æ±‚"></a>å¤„ç†httpè¯·æ±‚</h3><p>ctxç›¸å½“ä¸ctx.requertæˆ–è€…ctx.response,åˆ¤æ–­httpæ–¹æ³•ç”¨ctx.method,getè¯·æ±‚ç”¨ctx.query</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(url,<span class="keyword">async</span>(ctx,next)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ctx.method);</span><br><span class="line">    <span class="built_in">console</span>.log(ctx.query);</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>getè¯·æ±‚ç›´è§‰æ‹¿ctx.req<br>å…ˆå¼•å…¥ bodyParser<br>postè¯·æ±‚ç”¨ctx.request.body.xxx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.post(url,<span class="function">(<span class="params">ctx,next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> name = ctx.request.body.name</span><br><span class="line">    <span class="keyword">const</span> password = ctx.request.body.password</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Koa2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsæ˜¯ä»€ä¹ˆ</title>
      <link href="2018/05/10/%E7%AC%AC%E4%B8%80%E7%AB%A0%20Nodejs%E6%98%AF%E4%BB%80%E4%B9%88/"/>
      <url>2018/05/10/%E7%AC%AC%E4%B8%80%E7%AB%A0%20Nodejs%E6%98%AF%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­"><a href="#1-ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­" class="headerlink" title="1.ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­"></a>1.ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­</h2><blockquote><p>æ‰€è°“è¿è¡Œæ—¶ï¼ˆruntime)  å°±æƒ³è±¡æˆä¸€ç§ç¼–ç¨‹å‘˜çš„è¿è¡Œçš„ç¯å¢ƒ è¿™ä¸ªè¿è¡Œç¯å¢ƒåŒ…æ‹¬ä»£ç è¿è¡Œçš„ç¼–è¯‘å™¨ä»¥åŠæ“ä½œç³»ç»Ÿçš„åº•å±‚æ”¯æŒ</p></blockquote><a id="more"></a><h2 id="2-ä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿå›è°ƒä¸å¼‚æ­¥è°ƒç”¨æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿ"><a href="#2-ä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿå›è°ƒä¸å¼‚æ­¥è°ƒç”¨æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿ" class="headerlink" title="2.ä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿå›è°ƒä¸å¼‚æ­¥è°ƒç”¨æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿ"></a>2.ä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿå›è°ƒä¸å¼‚æ­¥è°ƒç”¨æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿ</h2><p>å›è°ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½œä¸ºå‚æ•°çš„å‡½æ•°å¯ä»¥è¢«æ‰§è¡Œï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    alert(value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°æ—¢å¯ä»¥åŒæ­¥ï¼ˆmapï¼‰åˆå¯ä»¥å¼‚æ­¥ï¼ˆsetTimeOutï¼‰</p><p>ä¸å¼‚æ­¥è°ƒç”¨çš„å…³ç³»ï¼šåœ¨Nodeä¸­ å¦‚æœé‡åˆ°IOæ“ä½œæ¯”å¦‚ç£ç›˜å†™å…¥å†™å‡ºï¼Œä»£ç å‘èµ·ä¸€ä¸ªè°ƒç”¨åç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œ<br>Ioæ“ä½œå®Œæˆåï¼Œå†æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œè™½ç„¶ä»£ç åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå•ä¾é å¼‚æ­¥+å›è°ƒ å®ç°å¯¹é«˜å¹¶å‘çš„æ”¯æŒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fs.readerFile(<span class="string">&quot;foo.txt&quot;</span>,callback)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;çŒœçŒœè°æ˜¯ä¸æ˜¯å…ˆè¢«æ‰§è¡Œå•Šï¼Ÿ&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-ä»€ä¹ˆæ˜¯äº‹ä»¶"><a href="#3-ä»€ä¹ˆæ˜¯äº‹ä»¶" class="headerlink" title="3 ä»€ä¹ˆæ˜¯äº‹ä»¶"></a>3 ä»€ä¹ˆæ˜¯äº‹ä»¶</h2><p>åœ¨äº¤äº’çš„é¡µé¢ä¸Šï¼Œç”¨æˆ·å‘ç”Ÿä¸€ç³»åˆ—äº‹ä»¶ï¼šå•å‡»æŒ‰é’®ï¼Œæ‹–åŠ¨å…ƒç´  è¿™äº›äº‹ä»¶æŒ‰ç…§ä¸€å®šçš„é¡ºåºåŠ è½½åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­åŒºã€‚</p><h2 id="4å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»"><a href="#4å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»" class="headerlink" title="4å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»"></a>4å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»</h2><p>ä¸¾ä¸€ä¸ªä¾‹å­</p><p>å¹¶å‘ï¼šç«è½¦ç«™å–ç¥¨ï¼Œ2æ’é˜Ÿä¼ åªæœ‰ä¸€ä¸ªå–ç¥¨æœºï¼Œåªèƒ½é˜Ÿåˆ—å¤´æ’çš„äººå»å–ç¥¨ åŒæ—¶å‘å‰ç§»åŠ¨</p><p>å¹¶è¡Œï¼šç«è½¦ç«™å–ç¥¨ 2ä¸ªé˜Ÿä¼ 2ä¸ªå–ç¥¨æœºï¼ŒåŒæ—¶å‘å‰ç§»åŠ¨ é€Ÿåº¦æ˜¯ä¸€ä¸ªçª—å£çš„2å€ä»¥ä¸Šã€‚<br>å¹¶å‘æ˜¯å¸Œæœ›åšæ›´å¤šçš„äº‹æƒ…ï¼ˆå¤„ç†å¤šä¸ªé˜Ÿåˆ—ï¼‰<br>å¹¶è¡Œæ˜¯å¸Œæœ›æ›´å¿«çš„å®Œæˆä»»åŠ¡</p><p>è”ç³»ï¼š å¹¶å‘ä¸­å¯ä»¥å­˜åœ¨å¹¶è¡Œ</p><h2 id="5-åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«"><a href="#5-åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«" class="headerlink" title="5.åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«"></a>5.åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«</h2><p>åŒæ­¥å¼‚æ­¥æ˜¯æè¿°è¿›ç¨‹/çº¿ç¨‹çš„è°ƒç”¨æ–¹å¼</p><p>é˜»å¡éé˜»å¡æ˜¯é’ˆå¯¹IoçŠ¶æ€è€Œè¨€ï¼Œå…³æ³¨ç¨‹åºåœ¨ç­‰å¾…IOè°ƒç”¨è¿”å›è¿™æ®µäº‹ä»¶çš„çŠ¶æ€</p><p>ä»–ä»¬ä¹‹é—´æ²¡æœ‰å¿…ç„¶çš„è”ç³»</p><p>é˜»å¡ ä¸ç­‰äº åŒæ­¥  éé˜»å¡ ä¸ç­‰äº å¼‚æ­¥</p><p>ä¸ºä»€ä¹ˆå®˜ç½‘ Nodeæ²¡æœ‰ æ ‡æ¦œè‡ªå·±æ˜¯å¼‚æ­¥io  è€Œæ˜¯éé˜»å¡ioå‘¢ï¼Ÿ<br>å› ä¸ºéé˜»å¡æ˜¯å®æ‰“å®çš„  Nodeçš„å¼‚æ­¥Io æ˜¯é  Libuvæ¨¡æ‹Ÿå‡ºæ¥çš„</p><p><code>åŒæ­¥è°ƒç”¨ä¼šé€ æˆè¿›ç¨‹çš„Ioé˜»å¡  å¼‚æ­¥è°ƒç”¨ä¸ä¼šé€ æˆè¿›è¡Œçš„Ioé˜»å¡</code>**</p><h2 id="6-äº‹ä»¶å¾ªç¯çš„è¿è¡Œè¿‡ç¨‹"><a href="#6-äº‹ä»¶å¾ªç¯çš„è¿è¡Œè¿‡ç¨‹" class="headerlink" title="6.äº‹ä»¶å¾ªç¯çš„è¿è¡Œè¿‡ç¨‹"></a>6.äº‹ä»¶å¾ªç¯çš„è¿è¡Œè¿‡ç¨‹</h2><p>æµè§ˆå™¨å¾ªç¯ï¼šAjaxä¸ºä¾‹ï¼Œå½“javascriptæ‰§è¡Œå¯¹åº”ä»£ç ï¼Œæ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼Œè¯·æ±‚åå°±æ‰§è¡Œå®Œæ¯•äº†ï¼Œåç»­æ“ä½œä¼šäº¤ç»™å›è°ƒå‡½æ•°æ¥å¤„ç†ï¼Œ<br>æµè§ˆå™¨ä¼šåœ¨ä¸æ–­çš„éå†äº‹ä»¶é˜Ÿåˆ—ï¼Œajaxå®Œæˆä¹‹å‰ï¼Œäº‹ä»¶é˜Ÿåˆ—è¿˜æ˜¯ç©ºçš„ï¼ˆ<code>ä¸æ˜¯è¯·æ±‚è¿™åŠ¨ä½œè¢«åŠ å…¥é˜Ÿåˆ—ï¼Œè€Œæ˜¯è¯·æ±‚å®Œæˆè¿™ä¸€äº‹ä»¶è¢«åŠ å…¥é˜Ÿåˆ—</code>ï¼‰ï¼Œå½“ajaxå®Œæˆåè¿™ä¸ªé˜Ÿåˆ—å°±å¥½å¢åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶ç»‘å®šå›è°ƒï¼Œåˆ™å¾ªç¯å°±å»æ‰§è¡Œè¿™ä¸ªå›è°ƒ</p><p>Nodeçš„å¾ªç¯ï¼šäº‹ä»¶å¾ªç¯ç”±libuvæ¥å®ç°<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/node%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.png"                      alt="image"                ></p><p>timersï¼šå‡ºæ¥settimeout å’Œ setintervalçš„å›è°ƒ</p><p>I/O callbacks  é™¤äº†timers close setImmediateäº‹ä»¶å›è°ƒå¤–ï¼Œå¤§å¤šæ•°å›è°ƒåœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œ</p><p>idle prepareï¼šå†…éƒ¨ä½¿ç”¨ï¼Œä¸ç®¡ä»–</p><p>pollï¼šè½®è¯¢ ä¸æ–­æ£€æŸ¥æ˜¯å¦ç”±æ–°çš„ioäº‹ä»¶ï¼Œäº‹ä»¶å¾ªç¯å¯èƒ½ä¼šåœ¨è¿™é‡Œé˜»å¡</p><p>checkï¼š å¤„ç†setimmediateäº‹ä»¶çš„å›è°ƒ</p><p>close callbacks å¤„ç†closeç›¸å…³çš„äº‹ä»¶</p><h2 id="7-nextTickçš„åŸç†æ˜¯ä»€ä¹ˆ-å’Œ-setImmaiteæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#7-nextTickçš„åŸç†æ˜¯ä»€ä¹ˆ-å’Œ-setImmaiteæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="7.nextTickçš„åŸç†æ˜¯ä»€ä¹ˆ å’Œ setImmaiteæœ‰ä»€ä¹ˆåŒºåˆ«"></a>7.nextTickçš„åŸç†æ˜¯ä»€ä¹ˆ å’Œ setImmaiteæœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>process.nextTick æ˜¯ä¸€ä¸ªå¼‚æ­¥åŠ¨ä½œ   åœ¨äº‹ä»¶å¾ªç¯å½“å‰é˜¶æ®µç»“æŸåæ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>)</span><br><span class="line"><span class="comment">//next</span></span><br><span class="line"><span class="comment">//first</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ Nodeé™åˆ¶äº†nextTickQueueçš„å¤§å°ï¼Œå½“è¾¾åˆ°æœ€å¤§é™åˆ¶åå°±ä¼šæŠ¥é”™<br>åŒºåˆ«ï¼š<br>setImmediate ä¸æ¥å—ä¸€ä¸ªæ—¶é—´ä½œä¸ºå‚æ•°  åœ¨å½“å‰äº‹ä»¶å¾ªç¯ç»“å°¾è§¦å‘ï¼Œå¯¹åº”çš„å›è°ƒåœ¨å½“å‰äº‹ä»¶çš„å¾ªç¯å°¾æ‰§è¡Œ<br>process.nextTick ä¼šåœ¨å½“å‰æ“ä½œå®Œæˆåç«‹å³æ‰§è¡Œ  ä¼šæ¯”setImmediate  å…ˆæ‰§è¡Œ</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lessçš„å¸¸ç”¨æ–¹æ³•</title>
      <link href="2018/05/09/less%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>2018/05/09/less%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å¸¸å¸¸ç”¨lessè§£å†³ä¸€äº›é—®é¢˜ï¼Œä¸€äº›å¸¸ç”¨çš„å†è®°å½•ä¸‹<br><a id="more"></a></p><p><code>&amp;</code>ç›¸å½“äºçˆ¶å…ƒç´ é‡Œçš„è°<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@width:10;</span><br><span class="line"><span class="selector-tag">nav</span>&#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#738797</span>;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line"><span class="attribute">color</span>: skyblue;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line"><span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span><br><span class="line">&amp;<span class="selector-class">.padding_left</span>&#123;</span><br><span class="line"><span class="attribute">padding-left</span>: @width*<span class="number">2px</span>;</span><br><span class="line">&#125; ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line"><span class="attribute">float</span><span class="selector-pseudo">:right</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@height</span> :document.documentElement.clientHeight;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#738797</span>;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: @height *<span class="number">1px</span>;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ··åˆ"><a href="#æ··åˆ" class="headerlink" title="æ··åˆ"></a>æ··åˆ</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.classa</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#b7b7b7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearFix</span>&#123;</span><br><span class="line">  *zoom:<span class="number">1</span>;</span><br><span class="line">  &amp;:after&#123;</span><br><span class="line">    content: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.classb</span>&#123;</span><br><span class="line">  <span class="selector-class">.classa</span>;</span><br><span class="line">  <span class="selector-class">.clearFix</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¸¦å‚æ•°æ··åˆ"><a href="#å¸¦å‚æ•°æ··åˆ" class="headerlink" title="å¸¦å‚æ•°æ··åˆ"></a>å¸¦å‚æ•°æ··åˆ</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(<span class="keyword">@color</span>)&#123;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">1px</span> solid @color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="selector-id">#b7b7b7</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="selector-id">#ff0000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="selector-id">#b7b7b7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å¤šä¸ªå‚æ•°çš„æ··åˆ"><a href="#å¤šä¸ªå‚æ•°çš„æ··åˆ" class="headerlink" title="å¤šä¸ªå‚æ•°çš„æ··åˆ"></a>å¤šä¸ªå‚æ•°çš„æ··åˆ</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(<span class="keyword">@width</span>,<span class="keyword">@style</span>,<span class="keyword">@color</span>)&#123;</span><br><span class="line">  <span class="attribute">border</span>:@width @style @color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">1px</span>,solid,<span class="selector-id">#b7b7b7</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">1px</span>,solid,<span class="selector-id">#ff0000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">2px</span>,solid,<span class="selector-id">#b7b7b7</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box4</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">1px</span>,dotted,<span class="selector-id">#b7b7b7</span>);</span><br><span class="line">&#125;*</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å¸¦é»˜è®¤å€¼çš„å‚æ•°æ··åˆ"><a href="#å¸¦é»˜è®¤å€¼çš„å‚æ•°æ··åˆ" class="headerlink" title="å¸¦é»˜è®¤å€¼çš„å‚æ•°æ··åˆ"></a>å¸¦é»˜è®¤å€¼çš„å‚æ•°æ··åˆ</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.border(@width:1px,@style:solid)&#123;</span><br><span class="line">  <span class="attribute">border</span>:@width @style <span class="number">#033333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">1px</span>,dotted);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">2px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box4</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">.border(top,@width:1px)&#123;</span><br><span class="line">  <span class="attribute">border-top</span>:@width solid <span class="number">#033333</span>;</span><br><span class="line">&#125;</span><br><span class="line">.border(right,@width:1px)&#123;</span><br><span class="line">  <span class="attribute">border-right</span>:@width solid <span class="number">#033333</span>;</span><br><span class="line">&#125;</span><br><span class="line">.border(bottom,@width:1px)&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>:@width solid <span class="number">#033333</span>;</span><br><span class="line">&#125;</span><br><span class="line">.border(left,@width:1px)&#123;</span><br><span class="line">  <span class="attribute">border-left</span>:@width solid <span class="number">#033333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.border(@_,@width:1px)&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="built_in">round</span>(<span class="number">5.5</span>)*<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="attribute">top</span>,<span class="number">5px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="attribute">right</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="attribute">bottom</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="attribute">left</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><code>@_</code>è¡¨ç¤ºæ— è®ºåŒ¹é…è°æœ€åéƒ½è¿˜ä¼šæ‰§è¡Œä¸€æ¬¡è¿™ä¸ªæ–¹æ³•å¸¦ä¸Šé‡Œé¢çš„å±æ€§**</p></blockquote><h1 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.blue</span>&#123;</span><br><span class="line">  <span class="selector-class">.button</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.red</span>&#123;</span><br><span class="line">  <span class="selector-class">.button</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="selector-class">.blue</span> &gt; <span class="selector-class">.button</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="é¿å…ç¼–è¯‘"><a href="#é¿å…ç¼–è¯‘" class="headerlink" title="é¿å…ç¼–è¯‘"></a>é¿å…ç¼–è¯‘</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:@rem;</span><br><span class="line">  //è½¬ä¹‰å­—ç¬¦  ç”¨äºŒè¾¹ç®—æ³•ç®—<span class="attribute">font</span>è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥</span><br><span class="line">  <span class="attribute">font</span>:(<span class="number">12</span>/@rem)~<span class="string">&#x27;/&#x27;</span>(<span class="number">20</span>/@rem) <span class="string">&#x27;å®‹ä½“&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ç§æ³¨é‡Šæ–¹æ³•ä¸ä¼šè¢«ç¼–è¯‘åˆ°cssæ–‡ä»¶é‡Œé¢å»ï¼ˆé€šå¸¸ç”¨äºç”Ÿäº§ç¯èŠ‚ï¼‰</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¿™ç§æ³¨é‡Šä¼šè¢«è§£æåˆ°cssæ–‡ä»¶é‡Œé¢å»</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> less </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackåˆä½“éªŒ</title>
      <link href="2018/05/08/webpack%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>2018/05/08/webpack%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿ"><a href="#å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿ" class="headerlink" title="å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿ"></a>å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿ</h2><p>ç°åœ¨çš„å‰ç«¯ç½‘é¡µåŠŸèƒ½ä¸°å¯Œï¼Œç‰¹åˆ«æ˜¯SPAï¼ˆsingle page web application å•é¡µåº”ç”¨ï¼‰æŠ€æœ¯æµè¡Œåï¼ŒJavaScriptçš„å¤æ‚åº¦å¢åŠ å’Œéœ€è¦ä¸€å¤§å †ä¾èµ–åŒ…ï¼Œè¿˜éœ€è¦è§£å†³SCSSï¼ŒLessâ€¦â€¦æ–°å¢æ ·å¼çš„æ‰©å±•å†™æ³•çš„ç¼–è¯‘å·¥ä½œã€‚æ‰€ä»¥ç°ä»£åŒ–çš„å‰ç«¯å·²ç»å®Œå…¨ä¾èµ–äºWebPackçš„è¾…åŠ©äº†ã€‚<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/webpack.png"                      alt="image"                ></p><p>ç°åœ¨æœ€æµè¡Œçš„ä¸‰ä¸ªå‰ç«¯æ¡†æ¶ï¼Œå¯ä»¥è¯´å’Œwebpackå·²ç»ç´§å¯†ç›¸è¿ï¼Œæ¡†æ¶å®˜æ–¹éƒ½æ¨å‡ºäº†å’Œè‡ªèº«æ¡†æ¶ä¾èµ–çš„webpackæ„å»ºå·¥å…·ã€‚</p><ol><li>React.js+WebPack</li><li>Vue.js+WebPack</li><li>AngluarJS+WebPack</li></ol><h2 id="ä»€ä¹ˆæ˜¯WebPackï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯WebPackï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯WebPackï¼Ÿ"></a>ä»€ä¹ˆæ˜¯WebPackï¼Ÿ</h2><blockquote><p>WebPackå¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºï¼šå®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆSassï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚åœ¨3.0å‡ºç°åï¼ŒWebpackè¿˜è‚©è´Ÿèµ·äº†ä¼˜åŒ–é¡¹ç›®çš„è´£ä»»ã€‚</p></blockquote><p>è¿™æ®µè¯æœ‰ä¸‰ä¸ªé‡ç‚¹ï¼š</p><ol><li>æ‰“åŒ…ï¼šå¯ä»¥æŠŠå¤šä¸ªJavascriptæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›å’Œä¸‹è½½å¸¦å®½ã€‚</li><li>è½¬æ¢ï¼šæŠŠæ‹“å±•è¯­è¨€è½¬æ¢æˆä¸ºæ™®é€šçš„JavaScriptï¼Œè®©æµè§ˆå™¨é¡ºåˆ©è¿è¡Œã€‚</li><li>ä¼˜åŒ–ï¼šå‰ç«¯å˜çš„è¶Šæ¥è¶Šå¤æ‚åï¼Œæ€§èƒ½ä¹Ÿä¼šé‡åˆ°é—®é¢˜ï¼Œè€ŒWebPackä¹Ÿå¼€å§‹è‚©è´Ÿèµ·äº†ä¼˜åŒ–å’Œæå‡æ€§èƒ½çš„è´£ä»»ã€‚</li></ol><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å®‰è£…</span></span><br><span class="line">npm install -g webpack</span><br><span class="line"></span><br><span class="line">npm init</span><br><span class="line">npm install --save-dev webpack@<span class="number">3.10</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">&lt;!--æŸ¥çœ‹webpackç‰ˆæœ¬--&gt;</span><br><span class="line">webpack -v</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/webpack%E5%88%9D%E4%BD%93%E9%AA%8C.png"                      alt="image"                ></p><h2 id="ä¸»è¦é…ç½®æ–‡ä»¶"><a href="#ä¸»è¦é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸»è¦é…ç½®æ–‡ä»¶"></a>ä¸»è¦é…ç½®æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HTMLPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">&quot;development&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: path.join(__dirname, <span class="string">&quot;../client/app.js&quot;</span>)   <span class="comment">//å…¥å£æ–‡ä»¶</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].[hash].js&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;../dist&quot;</span>),    <span class="comment">//æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    publicPath: <span class="string">&quot;/public/&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx$/</span>,</span><br><span class="line">        use: <span class="string">&quot;babel-loader&quot;</span>      <span class="comment">// ç¼–è¯‘æ–‡ä»¶</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        use: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        exclude: [path.join(__dirname, <span class="string">&quot;../node_modules&quot;</span>)] <span class="comment">//æ’é™¤æ–‡ä»¶</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HTMLPlugin(&#123;</span><br><span class="line">      template: path.join(__dirname, <span class="string">&quot;../client/template.html&quot;</span>) <span class="comment">//distç”Ÿäº§çš„htmlä»¥ä»–ä¸ºæ¨¡æ¿</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">    <span class="comment">// å®¢æˆ·ç«¯çƒ­æ›´æ–°éœ€è¦çš„</span></span><br><span class="line">  config.entry = &#123;</span><br><span class="line">    app: [<span class="string">&quot;react-hot-loader/patch&quot;</span>, path.join(__dirname, <span class="string">&quot;../client/app.js&quot;</span>)]</span><br><span class="line">  &#125;;</span><br><span class="line">  config.devServer = &#123;</span><br><span class="line">    host: <span class="string">&quot;0.0.0.0&quot;</span>,</span><br><span class="line">    compress: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="string">&quot;3000&quot;</span>,</span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// é»˜è®¤ä¼šä»¥æ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œè¿™é‡ŒæŒ‡å®šæ–‡ä»¶å¤¹</span></span><br><span class="line">    hot: <span class="literal">true</span>,</span><br><span class="line">    overlay: &#123;</span><br><span class="line">      errors: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    publicPath: <span class="string">&quot;/public/&quot;</span>,</span><br><span class="line">    historyApiFallback: &#123;</span><br><span class="line">      index: <span class="string">&quot;/public/index.html&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//çƒ­æ›¿æ¢æ–¹æ³•  æ¥è‡ªwebpackè‡ªå¸¦</span></span><br><span class="line">  config.plugins.push(<span class="keyword">new</span> webpack.HotModuleReplacementPlugin());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="package-jsonæ–‡ä»¶"><a href="#package-jsonæ–‡ä»¶" class="headerlink" title="package.jsonæ–‡ä»¶"></a>package.jsonæ–‡ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build:client&quot;</span>: <span class="string">&quot;webpack --config  build/webpack.config.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build:server&quot;</span>: <span class="string">&quot;webpack --config  build/webpack.server.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;clear&quot;</span>: <span class="string">&quot;rimraf dist&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;npm run clear &amp;&amp; npm run build:client &amp;&amp; npm run build:server&quot;</span>,</span><br><span class="line">  <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;node server/server.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev:client&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development webpack-dev-server --config build/webpack.config.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="babelrcæ–‡ä»¶"><a href="#babelrcæ–‡ä»¶" class="headerlink" title=".babelrcæ–‡ä»¶"></a>.babelrcæ–‡ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>: [</span><br><span class="line">      [<span class="string">&quot;es2015&quot;</span>, &#123; <span class="string">&quot;loose&quot;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">      <span class="string">&quot;react&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [<span class="string">&quot;react-hot-loader/babel&quot;</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¦çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶"><a href="#è¦çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶" class="headerlink" title="è¦çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶"></a>è¦çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./views/App.jsx&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;AppContainer&#125; <span class="keyword">from</span> <span class="string">&#x27;react-hot-loader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> render = <span class="function">(<span class="params">Component</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> renderMethod = <span class="built_in">module</span>.hot? ReactDOM.render : ReactDOM.hydrate</span><br><span class="line">    renderMethod(</span><br><span class="line">        &lt;AppContainer&gt;</span><br><span class="line">            &lt;Component/&gt;</span><br><span class="line">        &lt;/AppContainer&gt;,</span><br><span class="line">        root</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">render(App);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123;</span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">&#x27;./views/App.jsx&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">         <span class="keyword">const</span> NextApp = <span class="built_in">require</span>(<span class="string">&#x27;./views/App.jsx&#x27;</span>).default;</span><br><span class="line">         render(NextApp)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿™ä¸ªå«Puppeteerçš„å°çˆ¬è™«ï¼Œäº†è§£ä¸€ä¸‹ï¼</title>
      <link href="2018/05/01/%E8%BF%99%E4%B8%AA%E5%8F%ABPuppeteer%E7%9A%84%E5%B0%8F%E7%88%AC%E8%99%AB%EF%BC%8C%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%EF%BC%81/"/>
      <url>2018/05/01/%E8%BF%99%E4%B8%AA%E5%8F%ABPuppeteer%E7%9A%84%E5%B0%8F%E7%88%AC%E8%99%AB%EF%BC%8C%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>ä½ è®²ä¼šå­¦åˆ°å¦‚ä½•ä½¿ç”¨JavaScriptè‡ªåŠ¨åŒ–æŠ“å–ç½‘é¡µé‡Œé¢æ„Ÿå…´è¶£çš„å†…å®¹ã€‚æˆ‘ä»¬å°†ä¼šä½¿ç”¨Puppeteerï¼ŒPuppeteeræ˜¯ä¸€ä¸ªNodeåº“ï¼Œæä¾›æ¥å£æ¥æ§åˆ¶headless Chromeã€‚Headless Chromeæ˜¯ä¸€ç§ä¸ä½¿ç”¨Chromeæ¥è¿è¡ŒChromeæµè§ˆå™¨çš„æ–¹å¼ã€‚</p><p>å¦‚æœä½ ä¸çŸ¥é“Puppeteerï¼Œä¹Ÿä¸äº†è§£headless Chromeï¼Œé‚£ä¹ˆä½ åªè¦çŸ¥é“æˆ‘ä»¬å°†è¦ç¼–å†™JavaScriptä»£ç æ¥è‡ªåŠ¨åŒ–æ§åˆ¶Chromeå°±è¡Œã€‚<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://blog.fundebug.com/2017/11/01/guide-to-automating-scraping-the-web-with-js/first_book_inspect_copy.png"                      alt="image"                ></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install â€“save puppeteer</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¾‹1-æˆªå±"><a href="#ä¸¾ä¾‹1-æˆªå±" class="headerlink" title="ä¸¾ä¾‹1 æˆªå±"></a>ä¸¾ä¾‹1 æˆªå±</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&#x27;puppeteer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getPic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;<span class="attr">headless</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&#x27;https://google.com&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> page.setViewport(&#123;<span class="attr">width</span>: <span class="number">1000</span>, <span class="attr">height</span>: <span class="number">500</span>&#125;)</span><br><span class="line">  <span class="keyword">await</span> page.screenshot(&#123;<span class="attr">path</span>: <span class="string">&#x27;google.png&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> browser.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getPic();</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ç¬¬1è¡Œï¼šå¼•å…¥æˆ‘ä»¬éœ€è¦çš„åº“Puppeteerï¼›</li><li>ç¬¬3-10è¡Œï¼šä¸»å‡½æ•°getPic()åŒ…å«äº†æ‰€æœ‰çš„è‡ªåŠ¨åŒ–ä»£ç ï¼›</li><li>ç¬¬12è¡Œï¼šè°ƒç”¨getPic()å‡½æ•°ã€‚</li><li>ç¬¬4è¡Œï¼š<br>const broswer = await puppeteer.launch();<br>è¿™è¡Œä»£ç å¯åŠ¨puppeteerï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯åŠ¨äº†ä¸€ä¸ªChromeå®ä¾‹ï¼Œå¹¶ä¸”å’Œæˆ‘ä»¬å£°æ˜çš„browserå˜é‡ç»‘å®šèµ·æ¥ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†awaitå…³é”®å­—ï¼Œè¯¥å‡½æ•°ä¼šæš‚åœç›´åˆ°Promiseå®Œå…¨è¢«è§£æã€‚ä¹Ÿå°±æ˜¯è¯´æˆåŠŸåˆ›å»ºChromeå®ä¾‹æˆ–åˆ™æŠ¥é”™ã€‚</li><li><p>ç¬¬5è¡Œï¼š<br>const page = await browser.newPage();<br>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œé€šè¿‡ä½¿ç”¨awaitå…³é”®å­—æ¥ç­‰å¾…é¡µé¢æˆåŠŸåˆ›å»ºã€‚</p></li><li><p>ç¬¬6è¡Œï¼š<br>await page.goto(â€˜<a class="link"   href="https://google.com&#39;)" >https://google.com&#39;)<i class="fas fa-external-link-alt"></i></a>;<br>ä½¿ç”¨page.goto()æ‰“å¼€è°·æ­Œé¦–é¡µã€‚</p></li><li><p>ç¬¬7è¡Œï¼š<br>await page.screenshot({path: â€˜google.pngâ€™});<br>è°ƒç”¨screenshot()å‡½æ•°å°†å½“å‰é¡µé¢æˆªå±ã€‚</p></li><li><p>ç¬¬9è¡Œï¼š<br>await browser.close();<br>å°†æµè§ˆå™¨å…³é—­ã€‚</p></li></ul><h2 id="ä¸¾ä¾‹2-ç™¾åº¦å…³é”®å­—æœç´¢"><a href="#ä¸¾ä¾‹2-ç™¾åº¦å…³é”®å­—æœç´¢" class="headerlink" title="ä¸¾ä¾‹2 ç™¾åº¦å…³é”®å­—æœç´¢"></a>ä¸¾ä¾‹2 ç™¾åº¦å…³é”®å­—æœç´¢</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¼”ç¤ºè‡ªåŠ¨è®¿é—®ç™¾åº¦ç½‘ç«™å¹¶æŠ“å–ç›¸å…³æœç´¢å…³é”®è¯</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&#x27;puppeteer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(</span><br><span class="line">      &#123;<span class="attr">headless</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&#x27;https://www.baidu.com/&#x27;</span>);</span><br><span class="line"> <span class="comment">// ç„¦ç‚¹åˆ°æœç´¢å…³é”®å­—è¾“å…¥æ¡†</span></span><br><span class="line">  <span class="keyword">await</span> page.focus(<span class="string">&#x27;#kw&#x27;</span>);</span><br><span class="line">  <span class="comment">// è¾“å…¥å…³é”®å­— Chrome Headless</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&#x27;#kw&#x27;</span>, <span class="string">&#x27;Chrome Headless&#x27;</span>, &#123;<span class="attr">delay</span>: <span class="number">100</span>&#125;);</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">await</span> page.click(<span class="string">&#x27;#su&#x27;</span>); <span class="comment">// ç‚¹å‡»â€œç™¾åº¦ä¸€ä¸‹â€æäº¤æŒ‰é’®</span></span><br><span class="line">  <span class="keyword">const</span> waitForElement = page.waitForSelector(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(5) &gt; a&#x27;</span>, &#123;<span class="attr">visible</span>:<span class="literal">true</span>,<span class="attr">timeout</span>: <span class="number">3000</span>&#125;); <span class="comment">// ç­‰å¾… 3 ç§’æˆ–è€…é¡µé¢æ˜¾ç¤ºå®Œæˆ æ³¨é‡Š1</span></span><br><span class="line">  <span class="keyword">try</span> &#123;<span class="comment">// æ­¤å¤„æ˜¯å¯èƒ½äº§ç”Ÿä¾‹å¤–çš„è¯­å¥</span></span><br><span class="line">    <span class="keyword">await</span> waitForElement;   ã€€</span><br><span class="line">    <span class="keyword">var</span> kw = [];ã€€ <span class="comment">// æ³¨é‡Š2</span></span><br><span class="line">    kw[<span class="number">0</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(1) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML); <span class="comment">//æ³¨é‡Š3</span></span><br><span class="line">    kw[<span class="number">1</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(3) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">2</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(5) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">3</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(1) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">4</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(3) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">5</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(5) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">6</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(1) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">7</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(3) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line">    kw[<span class="number">8</span>] = <span class="keyword">await</span> page.$eval(<span class="string">&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(5) &gt; a&#x27;</span>, <span class="function"><span class="params">el</span> =&gt;</span> el.innerHTML);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ç›¸å…³æœç´¢å…³é”®è¯ï¼š&#x27;</span>);</span><br><span class="line">    <span class="comment">//éå†ç›¸å…³æœç´¢å…³é”®è¯.</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;kw.length;i++)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(kw[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    ã€€ã€€  <span class="comment">// æ­¤å¤„æ˜¯è´Ÿè´£ä¾‹å¤–å¤„ç†çš„è¯­å¥</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ç½‘é¡µä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æœç´¢&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    ã€€ã€€  <span class="comment">// æ­¤å¤„æ˜¯å‡ºå£è¯­å¥ ã€€ã€€</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  browser.close(); <span class="comment">// å…³é—­é€€å‡ºã€‚å¯æ³¨é‡Šæ‰æ­¤è¡Œä»£ç ï¼Œä¾¿äºè§‚å¯Ÿæœ€åçš„ç»“æœ</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¾‹3-æŠ“å–æ•°æ®"><a href="#ä¸¾ä¾‹3-æŠ“å–æ•°æ®" class="headerlink" title="ä¸¾ä¾‹3 æŠ“å–æ•°æ®"></a>ä¸¾ä¾‹3 æŠ“å–æ•°æ®</h2><blockquote><p>é¦–å…ˆï¼Œäº†è§£ä¸€ä¸‹<code>Puppeteer</code>çš„APIã€‚æ–‡æ¡£æä¾›äº†éå¸¸ä¸°å¯Œçš„æ–¹æ³•ä¸ä»…æ”¯æŒåœ¨ç½‘é¡µä¸Šç‚¹å‡»ï¼Œè€Œä¸”å¯ä»¥å¡«å†™è¡¨å•ï¼Œè¯»å–æ•°æ®ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçˆ¬å–<a class="link"   href="http://books.toscrape.com/" >Books to Scrape<i class="fas fa-external-link-alt"></i></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ªé€ çš„ç½‘ä¸Šä¹¦åº—ä¸“é—¨ç”¨æ¥ç»ƒä¹ çˆ¬å–æ•°æ®ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»¶æ—¶å™¨</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">time</span> =&gt;</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, time);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ‰§è¡Œ&quot;</span> + time + <span class="string">&quot;ç§’&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * One çˆ¬è™«ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnePaChong</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æœ€å¤§ç´¢å¼•</span></span><br><span class="line">    <span class="built_in">this</span>.maxIndex = <span class="number">5</span>;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    <span class="built_in">this</span>.init();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–å‡½æ•°</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ­£åœ¨å¯åŠ¨æµè§ˆå™¨...&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">      args: [<span class="string">&quot;--no-sandbox&quot;</span>],</span><br><span class="line">      dumpio: <span class="literal">false</span>,</span><br><span class="line">      headless: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ­£åœ¨æ‰“å¼€æ–°é¡µé¢...&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.page = <span class="keyword">await</span> <span class="built_in">this</span>.browser.newPage();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¡ºåºçˆ¬å–é¡µé¢</span></span><br><span class="line">    <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="built_in">this</span>.maxIndex; i++) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="built_in">this</span>.getPageInfo(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.closeBrowser();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠ“å–é¡µé¢å†…å®¹</span></span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">getPageInfo</span>(<span class="params">actPage</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å»¶æ—¶ 1000 æ¯«ç§’</span></span><br><span class="line">    <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ç°åœ¨è¿›å…¥ç¬¬&quot;</span> + actPage + <span class="string">&quot;é¡µé¢&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> page = <span class="built_in">this</span>.page;</span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">`http://books.toscrape.com/catalogue/page-<span class="subst">$&#123;actPage&#125;</span>.html`</span>,&#123;</span><br><span class="line">      waitUntil:<span class="string">&#x27;networkidle2&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// è·å–ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// è·å–æ–‡æœ¬</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> page.evaluate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> elements = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.product_pod&quot;</span>); <span class="comment">// è·å–æ‰€æœ‰ä¹¦ç±å…ƒç´ </span></span><br><span class="line">        <span class="keyword">let</span> data = []; <span class="comment">// åˆå§‹åŒ–ç©ºæ•°ç»„æ¥å­˜å‚¨æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> element <span class="keyword">of</span> elements) &#123;</span><br><span class="line">          <span class="comment">// å¾ªç¯</span></span><br><span class="line">          <span class="keyword">let</span> title = element.childNodes[<span class="number">5</span>].innerText; <span class="comment">// è·å–æ ‡é¢˜</span></span><br><span class="line">          <span class="keyword">let</span> price = element.childNodes[<span class="number">7</span>].children[<span class="number">0</span>].innerText; <span class="comment">// è·å–ä»·æ ¼</span></span><br><span class="line">           data.push(&#123; title, price &#125;); <span class="comment">// å­˜å…¥æ•°ç»„</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">let</span> arr = [...result]</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;-------------------------------------------- start&#x27;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;é¡µé¢é¡µç ï¼š&#x27;</span>, actPage);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;é‡‡é›†çŠ¶æ€ï¼š&#x27;</span>, <span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;é‡‡é›†æ•°æ®ï¼š&#x27;</span>, result);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;é‡‡é›†æ•°æ®ï¼š&#x27;</span>, arr.length);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;-------------------------------------------- end&#x27;</span>)</span><br><span class="line">      process.send(result)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;-------------------------------------------- start&quot;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;é¡µé¢é¡µç ï¼š&quot;</span>, actPage);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;é‡‡é›†çŠ¶æ€ï¼š&quot;</span>, <span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;é”™è¯¯ä¿¡æ¯ï¼š&quot;</span>, error);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;-------------------------------------------- end&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å…³é—­æµè§ˆå™¨</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">closeBrowser</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ­£åœ¨å…³é—­æµè§ˆå™¨...&quot;</span>);</span><br><span class="line">    process.exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.browser.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯ç”¨çˆ¬è™«</span></span><br><span class="line"><span class="keyword">new</span> OnePaChong();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>1.ç±»ä¼¼åˆ†é¡µæŠ“å–æ•°æ®å¦‚ä½•å®ç°å…¨éƒ¨æ•°æ®éƒ½æŠ“å–åˆ°ï¼ˆç°åœ¨åªèƒ½å®ç°ä¸€ä¸ªé¡µé¢çš„æŠ“å–ï¼‰ç„¶åä¼ ç»™æ•°æ®åº“ä¿å­˜</p>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ä¸ªäººå¸¸ç”¨å‘½ä»¤</title>
      <link href="2018/04/26/Git%E4%B8%AA%E4%BA%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>2018/04/26/Git%E4%B8%AA%E4%BA%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>åˆšè¿›å…¥æ–°å…¬å¸ï¼Œè¢«å‘ŠçŸ¥å›¢é˜Ÿæ˜¯ç”¨ Git ç®¡ç†é¡¹ç›®ä»£ç çš„ï¼Œè€Œä½ å´ä»æ¥æ²¡ç”¨è¿‡ <code>Git</code>ã€‚çºµç„¶åŒäº‹å‘Šè¯‰ä½ ã€Œæ²¡äº‹ï¼Œå…ˆè‡ªå­¦ä¸€ä¸‹ã€ã€Œæœ‰é—®é¢˜å¯ä»¥é—®æˆ‘ã€ï¼Œä½†ä½ è‚¯å®šä¸æƒ³ä¸€è¿›å…¬å¸å°±èŠ±å¤ªå¤šæ—¶é—´åœ¨è‡ªæˆ‘å­¦ä¹ ä¸Šï¼Œä¹Ÿä¸æƒ³è¿‡å¤šåœ°æ‰“æ‰°è¿™äº›åˆšè®¤è¯†çš„åŒäº‹ã€‚æ€ä¹ˆåŠï¼Ÿ</p><p>å¯¹ä½ æ¥è¯´ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå…ˆçŸ¥é“ Git æ€ä¹ˆç”¨ã€‚å…ˆæŠŠæœ€åŸºæœ¬çš„æŒæ¡äº†ï¼Œè‡³äºæ­£è§„å›¢é˜Ÿä½¿ç”¨ Git æœ‰ä»€ä¹ˆé¢å¤–è¦æ±‚ã€<code>Git</code> æœ‰ä»€ä¹ˆé«˜çº§ç”¨æ³•ã€Git çš„åŸç†è¿™äº›ï¼Œéƒ½å¯ä»¥æ”¾åœ¨è¿™ä¹‹åã€‚ä¸‡äº‹å¼€å¤´éš¾ï¼Œä½ å…ˆæŠŠ <code>Git</code> æœ€åŸºæœ¬çš„ä½¿ç”¨æŒæ¡äº†ï¼Œåé¢çš„å†ä¸€æ­¥ä¸€æ­¥æ¥ã€‚â€¦</p><a id="more"></a><h2 id="æŠŠè¿œç¨‹ä»“åº“å–åˆ°æœ¬åœ°"><a href="#æŠŠè¿œç¨‹ä»“åº“å–åˆ°æœ¬åœ°" class="headerlink" title="æŠŠè¿œç¨‹ä»“åº“å–åˆ°æœ¬åœ°"></a>æŠŠè¿œç¨‹ä»“åº“å–åˆ°æœ¬åœ°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone ä½ åˆšå¤åˆ¶çš„åœ°å€</span><br></pre></td></tr></table></figure><h2 id="å®ƒä¼šåˆ—å‡ºä½ çš„æäº¤å†å²"><a href="#å®ƒä¼šåˆ—å‡ºä½ çš„æäº¤å†å²" class="headerlink" title="å®ƒä¼šåˆ—å‡ºä½ çš„æäº¤å†å²"></a>å®ƒä¼šåˆ—å‡ºä½ çš„æäº¤å†å²</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><h2 id="status-æ˜¯ç”¨æ¥æŸ¥çœ‹å·¥ä½œç›®å½•å½“å‰çŠ¶æ€çš„æŒ‡ä»¤"><a href="#status-æ˜¯ç”¨æ¥æŸ¥çœ‹å·¥ä½œç›®å½•å½“å‰çŠ¶æ€çš„æŒ‡ä»¤" class="headerlink" title="status æ˜¯ç”¨æ¥æŸ¥çœ‹å·¥ä½œç›®å½•å½“å‰çŠ¶æ€çš„æŒ‡ä»¤"></a><code>status</code> æ˜¯ç”¨æ¥æŸ¥çœ‹å·¥ä½œç›®å½•å½“å‰çŠ¶æ€çš„æŒ‡ä»¤</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><ol><li>ä½ åœ¨ master branch</li><li>å½“å‰ branch æ²¡æœ‰è½åäº origin/master</li><li>ä½ æœ‰ untracked files ï¼ˆæœªè¿½è¸ªçš„æ–‡ä»¶ï¼‰ï¼Œæ–‡ä»¶åæ˜¯ shopping list.txtã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ git add æ¥å¼€å§‹è¿½è¸ªæ–‡ä»¶ã€‚â€¦</li></ol><h2 id="ä½ é€šè¿‡-add-æŒ‡ä»¤æš‚å­˜çš„å†…å®¹ï¼Œéƒ½ä¼šè¢«å†™è¿›è¿™ä¸ªæ–‡ä»¶é‡Œ"><a href="#ä½ é€šè¿‡-add-æŒ‡ä»¤æš‚å­˜çš„å†…å®¹ï¼Œéƒ½ä¼šè¢«å†™è¿›è¿™ä¸ªæ–‡ä»¶é‡Œ" class="headerlink" title="ä½ é€šè¿‡ add æŒ‡ä»¤æš‚å­˜çš„å†…å®¹ï¼Œéƒ½ä¼šè¢«å†™è¿›è¿™ä¸ªæ–‡ä»¶é‡Œ"></a>ä½ é€šè¿‡ <code>add</code> æŒ‡ä»¤æš‚å­˜çš„å†…å®¹ï¼Œéƒ½ä¼šè¢«å†™è¿›è¿™ä¸ªæ–‡ä»¶é‡Œ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><h2 id="æäº¤çš„æ–¹å¼æ˜¯ç”¨-commit-æŒ‡ä»¤"><a href="#æäº¤çš„æ–¹å¼æ˜¯ç”¨-commit-æŒ‡ä»¤" class="headerlink" title="æäº¤çš„æ–¹å¼æ˜¯ç”¨ commit æŒ‡ä»¤"></a>æäº¤çš„æ–¹å¼æ˜¯ç”¨ commit æŒ‡ä»¤</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit</span><br></pre></td></tr></table></figure><h2 id="æäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹‹åï¼ŒæŠŠæœ¬åœ°æäº¤-push-åˆ°ä¸­å¤®ä»“åº“ï¼ˆgit-pushï¼‰"><a href="#æäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹‹åï¼ŒæŠŠæœ¬åœ°æäº¤-push-åˆ°ä¸­å¤®ä»“åº“ï¼ˆgit-pushï¼‰" class="headerlink" title="æäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹‹åï¼ŒæŠŠæœ¬åœ°æäº¤ push åˆ°ä¸­å¤®ä»“åº“ï¼ˆgit pushï¼‰"></a>æäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹‹åï¼ŒæŠŠæœ¬åœ°æäº¤ <code>push</code> åˆ°ä¸­å¤®ä»“åº“ï¼ˆ<code>git push</code>ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="ä½ æƒ³åˆ›å»ºä¸€ä¸ªå«åš-â€œfeature1â€-çš„-branch-åˆ†æ”¯"><a href="#ä½ æƒ³åˆ›å»ºä¸€ä¸ªå«åš-â€œfeature1â€-çš„-branch-åˆ†æ”¯" class="headerlink" title="ä½ æƒ³åˆ›å»ºä¸€ä¸ªå«åš â€œfeature1â€ çš„ branch åˆ†æ”¯"></a>ä½ æƒ³åˆ›å»ºä¸€ä¸ªå«åš â€œfeature1â€ çš„ branch åˆ†æ”¯</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch feature1</span><br><span class="line">git checkout -b feature1</span><br></pre></td></tr></table></figure><h2 id="åˆ‡æ¢-branch"><a href="#åˆ‡æ¢-branch" class="headerlink" title="åˆ‡æ¢ branch"></a>åˆ‡æ¢ branch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout feature1</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤-branch"><a href="#åˆ é™¤-branch" class="headerlink" title="åˆ é™¤ branch"></a>åˆ é™¤ branch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d feature1</span><br></pre></td></tr></table></figure><h2 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge feature1</span><br></pre></td></tr></table></figure><h2 id="æ€ç»´å¯¼å›¾åˆ†äº«"><a href="#æ€ç»´å¯¼å›¾åˆ†äº«" class="headerlink" title="æ€ç»´å¯¼å›¾åˆ†äº«"></a>æ€ç»´å¯¼å›¾åˆ†äº«</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/gitæ•™ç¨‹å¤šçœ‹ï¼ï¼.png"                      alt="gitæµç¨‹å›¾"                ></p><h2 id="å¸¸ç”¨-Git-å‘½ä»¤æ€»ç»“"><a href="#å¸¸ç”¨-Git-å‘½ä»¤æ€»ç»“" class="headerlink" title="å¸¸ç”¨ Git å‘½ä»¤æ€»ç»“"></a>å¸¸ç”¨ Git å‘½ä»¤æ€»ç»“</h2><hr><ul><li><p>git config â€“global user.name â€œä½ çš„åå­—â€ è®©ä½ å…¨éƒ¨çš„ Git ä»“åº“ç»‘å®šä½ çš„åå­—</p></li><li><p>git config â€“global user.email â€œä½ çš„é‚®ç®±â€ è®©ä½ å…¨éƒ¨çš„ Git ä»“åº“ç»‘å®šä½ çš„é‚®ç®±</p></li><li><p>git init åˆå§‹åŒ–ä½ çš„ä»“åº“</p></li><li><p>git add . æŠŠå·¥ä½œåŒºçš„æ–‡ä»¶å…¨éƒ¨æäº¤åˆ°æš‚å­˜åŒº</p></li><li><p>git add ./<file>/ æŠŠå·¥ä½œåŒºçš„ &lt; file &gt; æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº</p></li><li><p>git commit -m â€œxxxâ€ æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°ä»“åº“åŒºï¼Œæš‚å­˜åŒºç©ºç©ºè¡è¡</p></li><li><p>git remote add origin <a class="link"   href="https://github.com/name/name_cangku.git" >https://github.com/name/name_cangku.git<i class="fas fa-external-link-alt"></i></a> æŠŠæœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿æ¥èµ·æ¥</p></li><li><p>git push -u origin master æŠŠä»“åº“åŒºçš„ä¸»åˆ†æ”¯ master æäº¤åˆ°è¿œç¨‹ä»“åº“é‡Œ</p></li><li><p>git push -u origin &lt;å…¶ä»–åˆ†æ”¯&gt; æŠŠå…¶ä»–åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“</p></li><li><p>git status æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€</p></li><li><p>git diff æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çš„å…·ä½“å†…å®¹</p></li><li><p>git log æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤å†å²</p></li><li><p>git clone + ä»“åº“åœ°å€ä¸‹è½½å…‹éš†æ–‡ä»¶</p></li><li><p>git reset â€“hard + ç‰ˆæœ¬å· å›æº¯ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·åœ¨ commit çš„æ—¶å€™ä¸ master è·Ÿéšåœ¨ä¸€èµ·</p></li><li><p>git reflog æ˜¾ç¤ºå‘½ä»¤å†å²</p></li><li><p>git checkout â€“ <file> æ’¤é”€å‘½ä»¤ï¼Œç”¨ç‰ˆæœ¬åº“é‡Œçš„æ–‡ä»¶æ›¿æ¢æ‰å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚æˆ‘è§‰å¾—å°±åƒæ˜¯ Git ä¸–ç•Œçš„ ctrl + z</p></li><li><p>git rm åˆ é™¤ç‰ˆæœ¬åº“çš„æ–‡ä»¶</p></li><li><p>git branch æŸ¥çœ‹å½“å‰æ‰€æœ‰åˆ†æ”¯</p></li><li><p>git branch &lt;åˆ†æ”¯åå­—&gt; åˆ›å»ºåˆ†æ”¯</p></li><li><p>git checkout &lt;åˆ†æ”¯åå­—&gt; åˆ‡æ¢åˆ°åˆ†æ”¯</p></li><li><p>git merge &lt;åˆ†æ”¯åå­—&gt; åˆå¹¶åˆ†æ”¯</p></li><li><p>git branch -d &lt;åˆ†æ”¯åå­—&gt; åˆ é™¤åˆ†æ”¯, æœ‰å¯èƒ½ä¼šåˆ é™¤å¤±è´¥ï¼Œå› ä¸º Git ä¼šä¿æŠ¤æ²¡æœ‰è¢«åˆå¹¶çš„åˆ†æ”¯</p></li><li><p>git branch -D + &lt;åˆ†æ”¯åå­—&gt; å¼ºè¡Œåˆ é™¤ï¼Œä¸¢å¼ƒæ²¡è¢«åˆå¹¶çš„åˆ†æ”¯</p></li><li><p>git log â€“graph æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾</p></li><li><p>git merge â€“no-ff &lt;åˆ†æ”¯åå­—&gt; åˆå¹¶åˆ†æ”¯çš„æ—¶å€™ç¦ç”¨ Fast forward æ¨¡å¼, å› ä¸ºè¿™ä¸ªæ¨¡å¼ä¼šä¸¢å¤±åˆ†æ”¯å†å²ä¿¡æ¯</p></li><li><p>git stash å½“æœ‰å…¶ä»–ä»»åŠ¡æ’è¿›æ¥æ—¶ï¼ŒæŠŠå½“å‰å·¥ä½œç°åœº â€œå­˜å‚¨â€ èµ·æ¥, ä»¥åæ¢å¤åç»§ç»­å·¥ä½œ</p></li><li><p>git stash list æŸ¥çœ‹ä½ åˆšåˆš â€œå­˜æ”¾â€ èµ·æ¥çš„å·¥ä½œå»å“ªé‡Œäº†</p></li><li><p>git stash apply æ¢å¤å´ä¸åˆ é™¤ stash å†…å®¹</p></li><li><p>git stash drop åˆ é™¤ stash å†…å®¹</p></li><li><p>git stash pop æ¢å¤çš„åŒæ—¶æŠŠ stash å†…å®¹ä¹Ÿåˆ äº†</p></li><li><p>git remote æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œä¼šæ˜¾ç¤º originï¼Œè¿œç¨‹ä»“åº“é»˜è®¤åç§°ä¸º origin</p></li><li><p>git remote -v æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯</p></li><li><p>git pull æŠŠæœ€æ–°çš„æäº¤ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸‹æ¥ï¼Œåœ¨æœ¬åœ°åˆå¹¶, å’Œ git push ç›¸å</p></li><li><p>git rebase æŠŠåˆ†å‰çš„æäº¤å†å² â€œæ•´ç†â€ æˆä¸€æ¡ç›´çº¿ï¼Œçœ‹ä¸Šå»æ›´ç›´è§‚</p></li><li><p>git tag æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼Œå¯ä»¥çŸ¥é“å†å²ç‰ˆæœ¬çš„ tag</p></li><li><p>git tag <name> æ‰“æ ‡ç­¾ï¼Œé»˜è®¤ä¸º HEADã€‚æ¯”å¦‚ git tag v1.0</p></li><li><p>git tag <tagName> &lt; ç‰ˆæœ¬å· &gt; æŠŠç‰ˆæœ¬å·æ‰“ä¸Šæ ‡ç­¾ï¼Œç‰ˆæœ¬å·å°±æ˜¯ commit æ—¶ï¼Œè·Ÿåœ¨æ—è¾¹çš„ä¸€ä¸²å­—æ¯æ•°å­—</p></li><li><p>git show <tagName> æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯</p></li><li><p>git tag -a <tagName> -m â€œ&lt; è¯´æ˜ &gt;â€ åˆ›å»ºå¸¦è¯´æ˜çš„æ ‡ç­¾ã€‚-a æŒ‡å®šæ ‡ç­¾åï¼Œ-m æŒ‡å®šè¯´æ˜æ–‡å­—</p></li><li><p>git tag -d <tagName> åˆ é™¤æ ‡ç­¾</p></li><li><p>git push origin <tagname> æ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹</p></li><li><p>git push origin â€“tags ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾</p></li><li><p>git push origin :refs/tags/<tagname> åˆ é™¤è¿œç¨‹æ ‡ç­¾ &lt; tagname&gt;</p></li><li><p>git config â€“global color.ui true è®© Git æ˜¾ç¤ºé¢œè‰²ï¼Œä¼šè®©å‘½ä»¤è¾“å‡ºçœ‹èµ·æ¥æ›´é†’ç›®</p></li><li><p>git add -f <file> å¼ºåˆ¶æäº¤å·²å¿½ç•¥çš„çš„æ–‡ä»¶</p></li><li><p>git check-ignore -v <file> æ£€æŸ¥ä¸ºä»€ä¹ˆ Git ä¼šå¿½ç•¥è¯¥æ–‡ä»¶</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆä¸ªäººä¸­å¿ƒç»„ä»¶ï¼‰</title>
      <link href="2018/04/26/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%BB%84%E4%BB%B6%EF%BC%89/"/>
      <url>2018/04/26/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%BB%84%E4%BB%B6%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªä¸ªäººä¸­å¿ƒç»„ä»¶<br><a id="more"></a></p><h1 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20180426142012.png"                      alt="image"                ></p><h1 id="è™šæ‹Ÿæ•°æ®"><a href="#è™šæ‹Ÿæ•°æ®" class="headerlink" title="è™šæ‹Ÿæ•°æ®"></a>è™šæ‹Ÿæ•°æ®</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">getDataList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            [</span><br><span class="line">                [</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;æˆ‘çš„é’±åŒ…&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;åŠä¿¡ç”¨å¡&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_wallet.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;ä½™é¢&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;ï¿¥95872385&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_balance.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;æŠµç”¨åˆ¸&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;63&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_voucher.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;ä¼šå‘˜å¡&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_membercard.png&#x27;</span>)&#125;</span><br><span class="line">                ],</span><br><span class="line">                [</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;å¥½å‹å»å“ª&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_friends.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;æˆ‘çš„è¯„ä»·&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_comment.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;æˆ‘çš„æ”¶è—&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_collection.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;ä¼šå‘˜ä¸­å¿ƒ&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;v15&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_membercenter.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;ç§¯åˆ†å•†åŸ&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;å¥½ç¤¼å·²ä¸Šçº¿&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_member.png&#x27;</span>)&#125;</span><br><span class="line">                ],</span><br><span class="line">                [</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;å®¢æœä¸­å¿ƒ&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_customerService.png&#x27;</span>)&#125;,</span><br><span class="line">                    &#123;<span class="attr">title</span>: <span class="string">&#x27;å…³äºç¾å›¢&#x27;</span>, <span class="attr">subtitle</span>: <span class="string">&#x27;æˆ‘è¦åˆä½œ&#x27;</span>, <span class="attr">image</span>: <span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/icon_mine_aboutmeituan.png&#x27;</span>)&#125;</span><br><span class="line">                ]</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">renderHeader = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> (</span><br><span class="line">           &lt;View style=&#123;styles.header&#125;&gt;</span><br><span class="line">               &lt;Image</span><br><span class="line">                   style=&#123;styles.avatar&#125;</span><br><span class="line">                   source=&#123;<span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/avatar.png&#x27;</span>)&#125;</span><br><span class="line">               /&gt;</span><br><span class="line">               &lt;View&gt;</span><br><span class="line">                   &lt;View style=&#123;&#123;<span class="attr">flexDirection</span>: <span class="string">&#x27;row&#x27;</span>, <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>&#125;&#125;&gt;</span><br><span class="line">                       &lt;Heading2 style=&#123;&#123;<span class="attr">color</span>: <span class="string">&#x27;white&#x27;</span>&#125;&#125;&gt;å¤§ä¿å¥&lt;/Heading2&gt;</span><br><span class="line">                       &lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">&#x27;../../img/mine/beauty_technician_v15.png&#x27;</span>)&#125; /&gt;</span><br><span class="line">                   &lt;/View&gt;</span><br><span class="line">                   &lt;Paragraph style=&#123;&#123;<span class="attr">color</span>: <span class="string">&#x27;white&#x27;</span>, <span class="attr">marginTop</span>: <span class="number">10</span>&#125;&#125;&gt;ä¸ªäººä¿¡æ¯ &gt;&lt;/Paragraph&gt;</span><br><span class="line">               &lt;/View&gt;</span><br><span class="line">           &lt;/View&gt;</span><br><span class="line">       )</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;View style=&#123;&#123;<span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">backgroundColor</span>: color.paper&#125;&#125;&gt;</span><br><span class="line">            &lt;View style=&#123;styles.headerBackground&#125; /&gt;</span><br><span class="line">            &lt;ScrollView</span><br><span class="line">                refreshControl=&#123;</span><br><span class="line">                    &lt;RefreshControl</span><br><span class="line">                        refreshing=&#123;<span class="built_in">this</span>.state.isRefreshing&#125;</span><br><span class="line">                        onRefresh=&#123;<span class="built_in">this</span>.onHeaderRefresh&#125;</span><br><span class="line">                        tintColor=<span class="string">&#x27;gray&#x27;</span></span><br><span class="line">                    /&gt;</span><br><span class="line">                &#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &#123;<span class="built_in">this</span>.renderHeader()&#125;</span><br><span class="line">                &lt;SpacingView /&gt;</span><br><span class="line">                &#123;<span class="built_in">this</span>.renderCells()&#125;</span><br><span class="line">            &lt;/ScrollView&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="renderCellsæ–¹æ³•-2ä¸ªforå¾ªç¯-åˆ†è§£æˆä¸‰å—å†…å®¹æ˜¾ç¤º-æ¯ä¸€å¿«çš„ç»„ä»¶DetailCell"><a href="#renderCellsæ–¹æ³•-2ä¸ªforå¾ªç¯-åˆ†è§£æˆä¸‰å—å†…å®¹æ˜¾ç¤º-æ¯ä¸€å¿«çš„ç»„ä»¶DetailCell" class="headerlink" title="renderCellsæ–¹æ³• 2ä¸ªforå¾ªç¯ åˆ†è§£æˆä¸‰å—å†…å®¹æ˜¾ç¤º æ¯ä¸€å¿«çš„ç»„ä»¶DetailCell"></a>renderCellsæ–¹æ³• 2ä¸ªforå¾ªç¯ åˆ†è§£æˆä¸‰å—å†…å®¹æ˜¾ç¤º æ¯ä¸€å¿«çš„ç»„ä»¶DetailCell</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">renderCells = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">let</span> cells = []</span><br><span class="line">       <span class="keyword">let</span> dataList = <span class="built_in">this</span>.getDataList()</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataList.length; i++) &#123;</span><br><span class="line">           <span class="keyword">let</span> sublist = dataList[i]</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; sublist.length; j++) &#123;</span><br><span class="line">               <span class="keyword">let</span> data = sublist[j]</span><br><span class="line">               <span class="keyword">let</span> cell = (</span><br><span class="line">                   &lt;DetailCell</span><br><span class="line">                       key=&#123;data.title&#125;</span><br><span class="line">                       title=&#123;data.title&#125;</span><br><span class="line">                       subtitle=&#123;data.subtitle&#125;</span><br><span class="line">                       image=&#123;data.image&#125;</span><br><span class="line">                   /&gt;</span><br><span class="line">               )</span><br><span class="line">               cells.push(cell)</span><br><span class="line">           &#125;</span><br><span class="line">           cells.push(</span><br><span class="line">               &lt;SpacingView key=&#123;i&#125; /&gt;</span><br><span class="line">           )</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> (</span><br><span class="line">           &lt;View&gt;</span><br><span class="line">               &#123;cells&#125;</span><br><span class="line">           &lt;/View&gt;</span><br><span class="line">       )</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h1 id="DetailCell-js"><a href="#DetailCell-js" class="headerlink" title="DetailCell.js"></a>DetailCell.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailCell</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;  &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;image,title,subtitle,style&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">        <span class="keyword">let</span> iconElement = <span class="built_in">this</span>.props.image &amp;&amp; (</span><br><span class="line">            &lt;Image style=&#123;styles.icon&#125; source=&#123;image&#125;/&gt;</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TouchableOpacity &gt;</span><br><span class="line">                  &lt;View style=&#123;[styles.container,style]&#125;&gt;</span><br><span class="line">                     &#123;iconElement&#125;</span><br><span class="line">                     &lt;Heading3&gt;&#123;title&#125;&lt;/Heading3&gt;</span><br><span class="line">                     &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>&#125;&#125;/&gt;</span><br><span class="line">                     &lt;Paragraph style=&#123;&#123;<span class="attr">color</span>:<span class="string">&#x27;#999&#x27;</span>&#125;&#125;&gt;&#123;subtitle&#125;&lt;/Paragraph&gt;</span><br><span class="line">                     &lt;Image style=&#123;styles.arrow&#125; source=&#123;<span class="built_in">require</span>(<span class="string">&#x27;../img/public/cell_arrow.png&#x27;</span>)&#125; /&gt;</span><br><span class="line">                  &lt;/View&gt;</span><br><span class="line">                  &lt;Separator/&gt;</span><br><span class="line">            &lt;/TouchableOpacity&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆçŒœä½ å–œæ¬¢éƒ¨åˆ†ç»„ä»¶ï¼‰</title>
      <link href="2018/04/25/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/"/>
      <url>2018/04/25/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªçŒœä½ å–œæ¬¢ç»„ä»¶<br><a id="more"></a></p><h1 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20180426140623.png"                      alt="image"                ></p><h1 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»è¯¦æƒ…è·³è½¬</span></span><br><span class="line"> <span class="function"><span class="title">onCellSelected</span>(<span class="params">info</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.props.navigation.navigate(<span class="string">&quot;GroupPurchaseScene&quot;</span>, &#123; <span class="attr">info</span>: info &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"> renderItem = <span class="function"><span class="params">rowData</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">     &lt;GroupPurchaseCell</span><br><span class="line">       onPress=&#123;<span class="built_in">this</span>.onCellSelected.bind(<span class="built_in">this</span>)&#125;</span><br><span class="line">       info=&#123;rowData.item&#125;</span><br><span class="line">     /&gt;</span><br><span class="line">   );</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="GroupPurchaseCell-js"><a href="#GroupPurchaseCell-js" class="headerlink" title="GroupPurchaseCell.js"></a>GroupPurchaseCell.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupPurchaseCell</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; info, onPress, waiting &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">let</span> imageUrl = info.imageUrl.replace(<span class="string">&quot;w.h&quot;</span>, <span class="string">&quot;160.0&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;TouchableOpacity</span><br><span class="line">        style=&#123;styles.container&#125;</span><br><span class="line">        onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          NoDoublePress.onPress(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            onPress(info);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Image style=&#123;styles.icon&#125; source=&#123;&#123; <span class="attr">uri</span>: imageUrl &#125;&#125; /&gt;</span><br><span class="line">        &lt;View style=&#123;styles.rightContainer&#125;&gt;</span><br><span class="line">          &lt;Heading2&gt;&#123;info.title&#125;&lt;/Heading2&gt;</span><br><span class="line">          &lt;Paragraph numberOfLines=&#123;<span class="number">0</span>&#125; style=&#123;&#123; <span class="attr">marginTop</span>: <span class="number">8</span> &#125;&#125;&gt;</span><br><span class="line">            &#123;info.subtitle&#125;</span><br><span class="line">          &lt;/Paragraph&gt;</span><br><span class="line">          &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">justifyContent</span>: <span class="string">&quot;flex-end&quot;</span> &#125;&#125;&gt;</span><br><span class="line">            &lt;Heading2 style=&#123;styles.price&#125;&gt;&#123;info.price&#125;å…ƒ&lt;/Heading2&gt;</span><br><span class="line">          &lt;/View&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">      &lt;/TouchableOpacity&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯¦æƒ…é¡µé¢æ•ˆæœå›¾</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20180426141130.png"                      alt="image"                ></p><h1 id="GroupPurchaseScene-js"><a href="#GroupPurchaseScene-js" class="headerlink" title="GroupPurchaseScene.js"></a>GroupPurchaseScene.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupPurchaseScene</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> navigationOptions = <span class="function">(<span class="params">&#123; navigation &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">    headerTitle: <span class="string">&quot;å›¢è´­è¯¦æƒ…&quot;</span>,</span><br><span class="line">    headerRight: (</span><br><span class="line">      &lt;NavigationItem</span><br><span class="line">        icon=&#123;<span class="built_in">require</span>(<span class="string">&quot;../../img/public/icon_navigationItem_share.png&quot;</span>)&#125;</span><br><span class="line">        onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          alert(<span class="string">&quot;share&quot;</span>);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    ),</span><br><span class="line">    headerStyle:&#123;</span><br><span class="line">      borderBottomWidth: <span class="number">0</span>, <span class="comment">//å–æ¶ˆåº•éƒ¨é˜´å½±</span></span><br><span class="line">      elevation: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; info &#125; = <span class="built_in">this</span>.props.navigation.state.params;</span><br><span class="line">    <span class="keyword">let</span> imageUrl = info.imageUrl.replace(<span class="string">&quot;w.h&quot;</span>, <span class="string">&quot;480.0&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">        &lt;View&gt;</span><br><span class="line">          &lt;Image source=&#123;&#123; <span class="attr">uri</span>: imageUrl &#125;&#125; style=&#123;styles.banner&#125; /&gt;</span><br><span class="line">          &lt;View style=&#123;styles.topContainer&#125;&gt;</span><br><span class="line">            &lt;Heading2 style=&#123;&#123; <span class="attr">color</span>: color.primary &#125;&#125;&gt;ï¿¥&lt;/Heading2&gt;</span><br><span class="line">            &lt;Heading1 style=&#123;&#123; <span class="attr">marginBottom</span>: -<span class="number">8</span> &#125;&#125;&gt;&#123;info.price&#125;&lt;/Heading1&gt;</span><br><span class="line">            &lt;Paragraph style=&#123;&#123; <span class="attr">marginLeft</span>: <span class="number">10</span> &#125;&#125;&gt;</span><br><span class="line">              é—¨å¸‚ä»·ï¼šï¿¥&#123;(info.price * <span class="number">1.1</span>).toFixed(<span class="number">0</span>)&#125;</span><br><span class="line">            &lt;/Paragraph&gt;</span><br><span class="line">            &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125; /&gt;</span><br><span class="line">            &lt;Button</span><br><span class="line">                            title=<span class="string">&#x27;ç«‹å³æŠ¢è´­&#x27;</span></span><br><span class="line">                            titleStyle=&#123;&#123;<span class="attr">color</span>: <span class="string">&#x27;white&#x27;</span>, <span class="attr">fontSize</span>: <span class="number">18</span>&#125;&#125;</span><br><span class="line">                            style=&#123;styles.buyButton&#125;</span><br><span class="line">                        /&gt;</span><br><span class="line">          &lt;/View&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Separator /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;View style=&#123;styles.tagContainer&#125;&gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            style=&#123;&#123; <span class="attr">width</span>: <span class="number">20</span>, <span class="attr">height</span>: <span class="number">20</span> &#125;&#125;</span><br><span class="line">            source=&#123;<span class="built_in">require</span>(<span class="string">&quot;../../img/home/icon_deal_anytime_refund.png&quot;</span>)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;Paragraph style=&#123;&#123; <span class="attr">color</span>: <span class="string">&quot;#89B24F&quot;</span> &#125;&#125;&gt; éšæ—¶é€€&lt;/Paragraph&gt;</span><br><span class="line">          &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125; /&gt;</span><br><span class="line">          &lt;Paragraph&gt;å·²å”®<span class="number">123</span>&lt;/Paragraph&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆå›¢è´­éƒ¨åˆ†ç»„ä»¶ï¼‰</title>
      <link href="2018/04/24/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%9B%A2%E8%B4%AD%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/"/>
      <url>2018/04/24/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%9B%A2%E8%B4%AD%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªä¸­é—´å›¢è´­éƒ¨åˆ†ç»„ä»¶<br><a id="more"></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20180426134926.png"                      alt="image"                ></p><h1 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.requestData();</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">requestData = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line"><span class="built_in">this</span>.requestRecommend();</span><br><span class="line"><span class="comment">//å›¢è´­åŠ è½½</span></span><br><span class="line"><span class="built_in">this</span>.requestDiscount();</span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//å›¢è´­åŠ è½½</span></span><br><span class="line">requestDiscount = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(api.discount);</span><br><span class="line">  <span class="keyword">let</span> json = <span class="keyword">await</span> response.json();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;json&quot;</span> + <span class="built_in">JSON</span>.stringify(json));</span><br><span class="line">  <span class="built_in">this</span>.setState(&#123; <span class="attr">discounts</span>: json.data &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  alert(<span class="string">&quot;error &quot;</span> + error);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">onGridSelected = <span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;è¿›æ¥äº†&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> url = <span class="string">&quot;http://www.baidu.com&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.props.navigation.navigate(<span class="string">&quot;WebScreen&quot;</span>, &#123; <span class="attr">url</span>: url &#125;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&lt;SpacingView /&gt;</span><br><span class="line">    &lt;HomeGridView</span><br><span class="line">      infos=&#123;<span class="built_in">this</span>.state.discounts&#125;</span><br><span class="line">      onGridSelected=&#123;<span class="built_in">this</span>.onGridSelected&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;SpacingView /&gt;</span><br></pre></td></tr></table></figure><h1 id="HomeGridVie-js"><a href="#HomeGridVie-js" class="headerlink" title="HomeGridVie.js"></a>HomeGridVie.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeGridView</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;infos, onGridSelected&#125; = <span class="built_in">this</span>.props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &#123;infos.map(<span class="function">(<span class="params">info, index</span>) =&gt;</span> (</span><br><span class="line">                    &lt;HomeGridItem</span><br><span class="line">                        key=&#123;index&#125;</span><br><span class="line">                        info=&#123;info&#125;</span><br><span class="line">                        onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                            onGridSelected(index)</span><br><span class="line">                        &#125;&#125;</span><br><span class="line">                    /&gt;</span><br><span class="line">                ))&#125;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="HomeGridItem-js"><a href="#HomeGridItem-js" class="headerlink" title="HomeGridItem.js"></a>HomeGridItem.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeGridItem</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;info, onPress&#125; = <span class="built_in">this</span>.props</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> title = info.title;</span><br><span class="line">        <span class="keyword">let</span> subtitle = info.subtitle;</span><br><span class="line">        <span class="keyword">let</span> imageUrl = info.image</span><br><span class="line">        <span class="keyword">let</span> color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">        <span class="comment">// let title = info.maintitle</span></span><br><span class="line">        <span class="comment">// let color = info.typeface_color</span></span><br><span class="line">        <span class="comment">// let subtitle = info.deputytitle</span></span><br><span class="line">        <span class="comment">// let imageUrl = info.imageurl.replace(&#x27;w.h&#x27;, &#x27;120.0&#x27;)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TouchableOpacity style=&#123;styles.container&#125; onPress=&#123;onPress&#125;&gt;</span><br><span class="line">                &lt;View&gt;</span><br><span class="line">                    &lt;Heading2 style=&#123;&#123;<span class="attr">color</span>: color, <span class="attr">marginBottom</span>: <span class="number">10</span>&#125;&#125;&gt;&#123;title&#125;&lt;/Heading2&gt;</span><br><span class="line">                    &lt;Heading3&gt;&#123;subtitle&#125;&lt;/Heading3&gt;</span><br><span class="line">                &lt;/View&gt;</span><br><span class="line">                &lt;Image style=&#123;styles.icon&#125; source=&#123;&#123;<span class="attr">uri</span>: imageUrl&#125;&#125; /&gt;</span><br><span class="line">            &lt;/TouchableOpacity&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆå¤´éƒ¨å¯¼èˆªï¼‰</title>
      <link href="2018/04/22/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%A4%B4%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/"/>
      <url>2018/04/22/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%A4%B4%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªå¤´éƒ¨å¯¼èˆªæŒ‰é’®<br><a id="more"></a></p><p>æ•ˆæœå›¾å¦‚ä¸‹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/tabbar.png"                      alt="image"                ></p><p>æ³¨æ„<br>å®‰å“ç¯å¢ƒä¸‹é»˜è®¤çŠ¶æ€æ æ˜¯è¦å•ç‹¬è®¾ç½®çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;StatusBar backgroundColor=&#123;color.primary&#125; barStyle=<span class="string">&quot;light-content&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> navigationOptions = <span class="function">(<span class="params">&#123; navigation &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">   headerTitle: (</span><br><span class="line">     &lt;TouchableOpacity style=&#123;styles.searchBar&#125;&gt;</span><br><span class="line">       &lt;Image</span><br><span class="line">         source=&#123;<span class="built_in">require</span>(<span class="string">&quot;../../img/home/search_icon.png&quot;</span>)&#125;</span><br><span class="line">         style=&#123;styles.searchIcon&#125;</span><br><span class="line">       /&gt;</span><br><span class="line">       &lt;Text&gt;æœç´¢&lt;/Text&gt;</span><br><span class="line">     &lt;/TouchableOpacity&gt;</span><br><span class="line">   ),</span><br><span class="line">   headerLeft: <span class="xml"><span class="tag">&lt;<span class="name">NavigationItem</span> <span class="attr">title</span>=<span class="string">&quot;å®šä½&quot;</span> <span class="attr">titleStyle</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &quot;<span class="attr">white</span>&quot; &#125;&#125; /&gt;</span></span>,</span><br><span class="line">   headerRight: (</span><br><span class="line">     &lt;NavigationItem</span><br><span class="line">       icon=&#123;<span class="built_in">require</span>(<span class="string">&quot;../../img/mine/icon_navigationItem_message_white.png&quot;</span>)&#125;</span><br><span class="line">       onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         navigation.navigate(<span class="string">&quot;WebScene&quot;</span>);</span><br><span class="line">       &#125;&#125;</span><br><span class="line">     /&gt;</span><br><span class="line">   ),</span><br><span class="line">   headerStyle: &#123; <span class="attr">backgroundColor</span>: color.primary &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="NavigationItem-jsç»„ä»¶"><a href="#NavigationItem-jsç»„ä»¶" class="headerlink" title="NavigationItem.jsç»„ä»¶"></a>NavigationItem.jsç»„ä»¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NavigationItem</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> titleElement = <span class="built_in">this</span>.props.title &amp;&amp; (</span><br><span class="line">            &lt;Text style=&#123;[styles.title, <span class="built_in">this</span>.props.titleStyle]&#125;&gt;&#123;<span class="built_in">this</span>.props.title&#125;&lt;/Text&gt;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> iconElement = <span class="built_in">this</span>.props.icon &amp;&amp; (</span><br><span class="line">            &lt;Image style=&#123;[styles.icon, <span class="built_in">this</span>.props.iconStyle]&#125; source=&#123;<span class="built_in">this</span>.props.icon&#125; /&gt;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TouchableOpacity onPress=&#123;<span class="built_in">this</span>.props.onPress&#125;&gt;</span><br><span class="line">                &#123;iconElement&#125;</span><br><span class="line">                &#123;titleElement&#125;</span><br><span class="line">            &lt;/TouchableOpacity&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆåº•éƒ¨å¯¼èˆªï¼‰</title>
      <link href="2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/"/>
      <url>2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªåº•éƒ¨å¯¼èˆªæŒ‰é’®<br><a id="more"></a></p><p>æ•ˆæœå›¾å¦‚ä¸‹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/tabbar.png"                      alt="image"                ></p><h6 id="æ³¨æ„ç‚¹ï¼š"><a href="#æ³¨æ„ç‚¹ï¼š" class="headerlink" title="æ³¨æ„ç‚¹ï¼š"></a>æ³¨æ„ç‚¹ï¼š</h6><p>å®‰å“é»˜è®¤ä½ç½®Top<br>iOSé»˜è®¤ä½ç½®æ˜¯ bottom<br>ç»„ä»¶åŒ–æ€æƒ³å°è£…çš„é‡è¦æ€§</p><h4 id="react-navigation-æ ‡é¢˜åœ¨å®‰å“ä¸Šä¸å±…ä¸­é—®é¢˜"><a href="#react-navigation-æ ‡é¢˜åœ¨å®‰å“ä¸Šä¸å±…ä¸­é—®é¢˜" class="headerlink" title="react-navigation æ ‡é¢˜åœ¨å®‰å“ä¸Šä¸å±…ä¸­é—®é¢˜"></a>react-navigation æ ‡é¢˜åœ¨å®‰å“ä¸Šä¸å±…ä¸­é—®é¢˜</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">headerTitleStyle:&#123;</span><br><span class="line">       flex: <span class="number">1</span>,</span><br><span class="line">        textAlign: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">      headerTintColor:<span class="string">&#x27;#000&#x27;</span>,</span><br><span class="line">      headerBackTitle:<span class="literal">null</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="react-navigation-å¯¼èˆªå»æ‰ä¸‹é¢è¾¹æ¡†ï¼Œé˜´å½±"><a href="#react-navigation-å¯¼èˆªå»æ‰ä¸‹é¢è¾¹æ¡†ï¼Œé˜´å½±" class="headerlink" title="react-navigation å¯¼èˆªå»æ‰ä¸‹é¢è¾¹æ¡†ï¼Œé˜´å½±"></a>react-navigation å¯¼èˆªå»æ‰ä¸‹é¢è¾¹æ¡†ï¼Œé˜´å½±</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">static</span> navigationOptions = &#123;</span><br><span class="line">        headerStyle:&#123;</span><br><span class="line">            borderBottomWidth: <span class="number">0</span>,</span><br><span class="line">            elevation: <span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="react-native-é˜²æ­¢é‡å¤ç‚¹å‡»"><a href="#react-native-é˜²æ­¢é‡å¤ç‚¹å‡»" class="headerlink" title="react-native é˜²æ­¢é‡å¤ç‚¹å‡»"></a>react-native é˜²æ­¢é‡å¤ç‚¹å‡»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> NoDoublePress = &#123;</span><br><span class="line">    lastPressTime: <span class="number">1</span>,</span><br><span class="line">    <span class="function"><span class="title">onPress</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> curTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        <span class="keyword">if</span> (curTime - <span class="built_in">this</span>.lastPressTime &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.lastPressTime = curTime;</span><br><span class="line">            callback();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = NoDoublePress;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyButton</span><br><span class="line">    onPress=&#123;() =&gt; &#123;</span><br><span class="line">        NoDoublePress.onPress(() =&gt; &#123;</span><br><span class="line">            this.onPressLogin();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">Text</span>&gt;</span> ç™» å½• <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">MyButton</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RootScene</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Navigation/&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Tab = TabNavigator(&#123;</span><br><span class="line">    Home: &#123;</span><br><span class="line">        screen: HomeScene,</span><br><span class="line">        navigationOptions: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">            tabBarLabel: <span class="string">&#x27;å›¢è´­&#x27;</span>,</span><br><span class="line">            tabBarIcon: <span class="function">(<span class="params">&#123;focused, tintColor&#125;</span>) =&gt;</span> (</span><br><span class="line">                &lt;TabBarItem</span><br><span class="line">                    tintColor=&#123;tintColor&#125;</span><br><span class="line">                    focused=&#123;focused&#125;</span><br><span class="line">                    normalImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_homepage.png&#x27;</span>)&#125;</span><br><span class="line">                    selectedImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_homepage_selected.png&#x27;</span>)&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    Nearby: &#123;</span><br><span class="line">        screen: NearbyScene,</span><br><span class="line">        navigationOptions: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">            tabBarLabel: <span class="string">&#x27;é™„è¿‘&#x27;</span>,</span><br><span class="line">            tabBarIcon: <span class="function">(<span class="params">&#123;focused, tintColor&#125;</span>) =&gt;</span> (</span><br><span class="line">                &lt;TabBarItem</span><br><span class="line">                    tintColor=&#123;tintColor&#125;</span><br><span class="line">                    focused=&#123;focused&#125;</span><br><span class="line">                    normalImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_merchant.png&#x27;</span>)&#125;</span><br><span class="line">                    selectedImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_merchant_selected.png&#x27;</span>)&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    Order: &#123;</span><br><span class="line">        screen: OrderScene,</span><br><span class="line">        navigationOptions: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">            tabBarLabel: <span class="string">&#x27;è®¢å•&#x27;</span>,</span><br><span class="line">            tabBarIcon: <span class="function">(<span class="params">&#123;focused, tintColor&#125;</span>) =&gt;</span> (</span><br><span class="line">                &lt;TabBarItem</span><br><span class="line">                    tintColor=&#123;tintColor&#125;</span><br><span class="line">                    focused=&#123;focused&#125;</span><br><span class="line">                    normalImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_order.png&#x27;</span>)&#125;</span><br><span class="line">                    selectedImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_order_selected.png&#x27;</span>)&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    Mine: &#123;</span><br><span class="line">        screen: MineScene,</span><br><span class="line">        navigationOptions: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">            tabBarLabel: <span class="string">&#x27;æˆ‘çš„&#x27;</span>,</span><br><span class="line">            tabBarIcon: <span class="function">(<span class="params">&#123;focused, tintColor&#125;</span>) =&gt;</span> (</span><br><span class="line">                &lt;TabBarItem</span><br><span class="line">                    tintColor=&#123;tintColor&#125;</span><br><span class="line">                    focused=&#123;focused&#125;</span><br><span class="line">                    normalImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_mine.png&#x27;</span>)&#125;</span><br><span class="line">                    selectedImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;./img/tabbar/tabbar_mine_selected.png&#x27;</span>)&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">      <span class="comment">//ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨</span></span><br><span class="line">        tabBarComponent: TabBarBottom,  <span class="comment">//tabè¦ç”¨çš„ç»„ä»¶</span></span><br><span class="line">        tabBarPosition: <span class="string">&#x27;bottom&#x27;</span>,       <span class="comment">//tabä½ç½®é€‰æ‹©</span></span><br><span class="line">        lazy: <span class="literal">true</span>,                   <span class="comment">// trueä»£è¡¨åªåŠ è½½å½“å‰</span></span><br><span class="line">        animationEnabled:<span class="literal">false</span>,                <span class="comment">//æ˜¯å¦æœ‰åŠ¨ç”»</span></span><br><span class="line">        swipeEnabled:<span class="literal">false</span>,                     <span class="comment">//åˆ‡æ¢åŠ¨ç”»  </span></span><br><span class="line">        tabBarOptions: &#123;</span><br><span class="line">            activeTintColor:color.primary,    <span class="comment">//æ¿€æ´»å›¾æ ‡é¢œè‰²</span></span><br><span class="line">            inactiveTintColor:color.gray,     <span class="comment">//éæ¿€æ´»çŠ¶æ€é¢œè‰²</span></span><br><span class="line">            style: &#123;<span class="attr">backgroundColor</span>: <span class="string">&#x27;white&#x27;</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Navigation = StackNavigator(&#123;</span><br><span class="line">    Tab:&#123;<span class="attr">screen</span>:Tab&#125;,</span><br><span class="line">    WebScreen:&#123;</span><br><span class="line">        screen:WebScreen</span><br><span class="line">    &#125;,</span><br><span class="line">    GroupPurchaseScene:&#123;</span><br><span class="line">       screen:GroupPurchaseScene</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;,&#123;</span><br><span class="line">   navigationOptions:&#123;</span><br><span class="line">       headerTintColor:<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> RootScene</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="TabBarItem-js"><a href="#TabBarItem-js" class="headerlink" title="TabBarItem.js"></a>TabBarItem.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TabBarItem</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;focused, selectedImage, normalImage, tintColor&#125; = <span class="built_in">this</span>.props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Image</span><br><span class="line">                source=&#123;focused ? selectedImage : normalImage&#125;</span><br><span class="line">                style=&#123;&#123;<span class="attr">tintColor</span>: tintColor, <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span>&#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿ç¾å›¢Appï¼ˆè½®æ’­å¯¼èˆªç»„ä»¶ï¼‰</title>
      <link href="2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E8%BD%AE%E6%92%AD%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6%EF%BC%89/"/>
      <url>2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E8%BD%AE%E6%92%AD%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªå¤´éƒ¨è½®æ’­èœå•å¯¼èˆªç»„ä»¶<br><a id="more"></a></p><p>æ•ˆæœå›¾</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E5%9B%BE%E7%89%8720180420183305.png"                      alt="image"                ></p><p>æ³¨æ„<br>å¾ªç¯äº‹ä»¶çš„è·å–<br>ç‚¹å‡»äº‹ä»¶çš„è·å–</p><h1 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;HomeMenuView</span><br><span class="line">         menuInfos=&#123;api.menuInfos&#125;</span><br><span class="line">         onMenuSelected=&#123;<span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line">           alert(<span class="string">&quot;test &quot;</span> + index);</span><br><span class="line">         &#125;&#125;</span><br><span class="line">       /&gt;</span><br></pre></td></tr></table></figure><h1 id="å°åœ†ç‚¹ç»„ä»¶"><a href="#å°åœ†ç‚¹ç»„ä»¶" class="headerlink" title="å°åœ†ç‚¹ç»„ä»¶"></a>å°åœ†ç‚¹ç»„ä»¶</h1><p>import PageControl from â€˜react-native-page-controlâ€™</p><h1 id="HomeMenuView-js"><a href="#HomeMenuView-js" class="headerlink" title="HomeMenuView.js"></a>HomeMenuView.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">HomeMenuView</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            currentPage: <span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰‹åŠ¿ç§»åŠ¨è®¡ç®—åç§»é‡  </span></span><br><span class="line">    onScroll = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> x = e.nativeEvent.contentOffset.x</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;x  &#x27;</span>+x)</span><br><span class="line">        <span class="keyword">let</span> currentPage = <span class="built_in">Math</span>.round(x / screen.width)</span><br><span class="line">        <span class="built_in">console</span>.log(currentPage)</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.state.currentPage != currentPage) &#123;</span><br><span class="line">            <span class="built_in">this</span>.setState(&#123;<span class="attr">currentPage</span>: currentPage&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> &#123;menuInfos, onMenuSelected&#125; = <span class="built_in">this</span>.props</span><br><span class="line">        <span class="comment">//æ ¹æ®è¯·æ±‚è¿‡æ¥çš„å›¾ç‰‡æ•°é‡åˆ†é¡µ</span></span><br><span class="line">        <span class="keyword">let</span> pageCount = <span class="built_in">Math</span>.ceil(menuInfos.length / <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å›¾æ ‡ç»„ä»¶</span></span><br><span class="line">        <span class="keyword">let</span> menuElements = menuInfos.map(<span class="function">(<span class="params">info, index</span>) =&gt;</span> (</span><br><span class="line">            &lt;HomeMenuItem</span><br><span class="line">                key=&#123;index&#125;</span><br><span class="line">                title=&#123;info.title&#125;</span><br><span class="line">                icon=&#123;info.icon&#125;</span><br><span class="line">                onPress=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    onMenuSelected &amp;&amp; onMenuSelected(index)</span><br><span class="line">                &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        ))</span><br><span class="line">        <span class="keyword">let</span> menuViews = []</span><br><span class="line">         <span class="comment">//æ¯ä¸€é¡µéƒ½æœ‰å›¾æ ‡  å¾ªç¯å¾—åˆ°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pageCount; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> elementsPerPage = menuElements.slice(i * <span class="number">10</span>, i * <span class="number">10</span> + <span class="number">10</span>)</span><br><span class="line">            <span class="keyword">let</span> menuView = (</span><br><span class="line">                &lt;View key=&#123;i&#125; style=&#123;styles.itemsView&#125;&gt;</span><br><span class="line">                    &#123;elementsPerPage&#125;</span><br><span class="line">                &lt;/View&gt;</span><br><span class="line">            )</span><br><span class="line">            menuViews.push(menuView)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(menuViews)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;ScrollView</span><br><span class="line">                    horizontal</span><br><span class="line">                    pagingEnabled</span><br><span class="line">                    showsHorizontalScrollIndicator=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">                    onScroll=&#123;<span class="built_in">this</span>.onScroll&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;View style=&#123;styles.menuContainer&#125;&gt;</span><br><span class="line">                        &#123;menuViews&#125;</span><br><span class="line">                    &lt;/View&gt;</span><br><span class="line">                &lt;/ScrollView&gt;</span><br><span class="line">                <span class="comment">//å°åœ†ç‚¹ç»„ä»¶</span></span><br><span class="line">                &lt;PageControl</span><br><span class="line">                    style=&#123;styles.pageControl&#125;</span><br><span class="line">                    numberOfPages=&#123;pageCount&#125;</span><br><span class="line">                    currentPage=&#123;<span class="built_in">this</span>.state.currentPage&#125;</span><br><span class="line">                    pageIndicatorTintColor=<span class="string">&#x27;gray&#x27;</span></span><br><span class="line">                    currentPageIndicatorTintColor=&#123;color.primary&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="HomeMenuItem-js"><a href="#HomeMenuItem-js" class="headerlink" title="HomeMenuItem.js"></a>HomeMenuItem.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeMenuItem</span> <span class="keyword">extends</span> <span class="title">PureComponent</span>&lt;<span class="title">Props</span>, <span class="title">State</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;title, icon, onPress&#125; = <span class="built_in">this</span>.props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TouchableOpacity onPress=&#123;onPress&#125; style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;Image source=&#123;icon&#125; style=&#123;styles.icon&#125; /&gt;</span><br><span class="line">                &lt;Text&gt;&#123;title&#125;&lt;/Text&gt;</span><br><span class="line">            &lt;/TouchableOpacity&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20180420181138.png"                      alt="image"                ></p>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ åˆ†é’Ÿå¸¦ä½ å…¥é—¨-ES7å¼‚æ­¥ç¥å™¨async-await</title>
      <link href="2018/04/12/%E5%87%A0%E5%88%86%E9%92%9F%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8-ES7%E5%BC%82%E6%AD%A5%E7%A5%9E%E5%99%A8async-awaitasync/"/>
      <url>2018/04/12/%E5%87%A0%E5%88%86%E9%92%9F%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8-ES7%E5%BC%82%E6%AD%A5%E7%A5%9E%E5%99%A8async-awaitasync/</url>
      
        <content type="html"><![CDATA[<p>å…³äºå¼‚æ­¥å¤„ç†ï¼ŒES5çš„å›è°ƒä½¿æˆ‘ä»¬é™·å…¥åœ°ç‹±ï¼ŒES6çš„Promiseä½¿æˆ‘ä»¬è„±ç¦»é­”éšœï¼Œç»ˆäºã€ES7çš„async-awaitå¸¦æˆ‘ä»¬èµ°å‘å…‰æ˜ã€‚â€”â€”â€”â€”-å“å§“å…‹å“å–‚ç‰¹<br><a id="more"></a></p><h1 id="async-awaitå’ŒPromiseçš„å…³ç³»"><a href="#async-awaitå’ŒPromiseçš„å…³ç³»" class="headerlink" title="async-awaitå’ŒPromiseçš„å…³ç³»"></a>async-awaitå’ŒPromiseçš„å…³ç³»</h1><h2 id="æœ€è¿‘æ›´æ–°2019-06-21"><a href="#æœ€è¿‘æ›´æ–°2019-06-21" class="headerlink" title="æœ€è¿‘æ›´æ–°2019-06-21"></a>æœ€è¿‘æ›´æ–°2019-06-21</h2><p>ç»å¸¸ä¼šçœ‹åˆ°æœ‰äº† async-awaitã€promise è¿˜æœ‰å¿…è¦å­¦ä¹ å—ã€async awaitä¼˜äºpromiseçš„å‡ ä¸ªç‰¹ç‚¹ï¼Œæ¥æ”¶äº†è¿™äº›ä¿¡æ¯åï¼Œå°±è’™åœˆäº†ã€‚ç°åœ¨æ‰çŸ¥é“ï¼Œasync-awaitæ˜¯promiseå’Œgeneratorçš„è¯­æ³•ç³–ã€‚åªæ˜¯ä¸ºäº†è®©æˆ‘ä»¬ä¹¦å†™ä»£ç æ—¶æ›´åŠ æµç•…ï¼Œå½“ç„¶ä¹Ÿå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§ã€‚ç®€å•æ¥è¯´ï¼šasync-await æ˜¯å»ºç«‹åœ¨ promiseæœºåˆ¶ä¹‹ä¸Šçš„ï¼Œå¹¶ä¸èƒ½å–ä»£å…¶åœ°ä½ã€‚</p><p>åŸºæœ¬è¯­æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">basicDemo</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="built_in">Math</span>.random();</span><br><span class="line">    <span class="built_in">console</span>.log(result); </span><br><span class="line">&#125; </span><br><span class="line">basicDemo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sleep = <span class="function"><span class="keyword">function</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(resolve);</span><br><span class="line">      <span class="built_in">console</span>.log(reject);</span><br><span class="line">      reject(<span class="string">&quot;è¿™é‡Œè¿”å›é”™è¯¯&quot;</span>);</span><br><span class="line">    <span class="comment">//   resolve(&#x27;è¿™é‡Œè¿”å›æ­£ç¡®&#x27;)</span></span><br><span class="line">    &#125;, time);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> start = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œä½¿ç”¨èµ·æ¥å°±åƒåŒæ­¥ä»£ç é‚£æ ·ç›´è§‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> sleep(<span class="number">3000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ok  &#x27;</span>+res);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;é”™è¯¯è¿”å›  &#x27;</span>+error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">start();</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä¸¾ä¾‹è¯´æ˜å•Šï¼Œ</li><li>ä½ æœ‰ä¸‰ä¸ªè¯·æ±‚éœ€è¦å‘ç”Ÿï¼Œ</li><li>ç¬¬ä¸‰ä¸ªè¯·æ±‚æ˜¯ä¾èµ–äºç¬¬äºŒä¸ªè¯·æ±‚çš„è§£æ„ç¬¬äºŒä¸ªè¯·æ±‚ä¾èµ–äºç¬¬ä¸€ä¸ªè¯·æ±‚çš„ç»“æœã€‚</li><li>è‹¥ç”¨ ES5å®ç°ä¼šæœ‰3å±‚çš„å›è°ƒï¼Œè‹¥ç”¨Promise å®ç°è‡³å°‘éœ€è¦3ä¸ªthenã€‚</li><li>ä¸€ä¸ªæ˜¯ä»£ç æ¨ªå‘å‘å±•ï¼Œå¦ä¸€ä¸ªæ˜¯çºµå‘å‘å±•ã€‚ä»Šå¤©æŒ‡ç»™å‡º async-await çš„å®ç°å“ˆ~</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">second, param</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(param);</span><br><span class="line">    &#125;, second);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result1 = <span class="keyword">await</span> sleep(<span class="number">2000</span>, <span class="string">&quot;req01&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> result2 = <span class="keyword">await</span> sleep(<span class="number">1000</span>, <span class="string">&quot;req02&quot;</span> + result1);</span><br><span class="line">  <span class="keyword">let</span> result3 = <span class="keyword">await</span> sleep(<span class="number">500</span>, <span class="string">&quot;req03&quot;</span> + result2);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">` <span class="subst">$&#123;result3&#125;</span> <span class="subst">$&#123;result2&#125;</span> <span class="subst">$&#123;result1&#125;</span> `</span>);</span><br><span class="line">&#125;</span><br><span class="line">test(); </span><br><span class="line"><span class="comment">// req03req02req01 req02req01 req01</span></span><br></pre></td></tr></table></figure><h1 id="å°å¿ƒä½ çš„å¹¶è¡Œå¤„ç†"><a href="#å°å¿ƒä½ çš„å¹¶è¡Œå¤„ç†" class="headerlink" title="å°å¿ƒä½ çš„å¹¶è¡Œå¤„ç†!!!"></a>å°å¿ƒä½ çš„å¹¶è¡Œå¤„ç†!!!</h1><p>æˆ‘è¿™é‡Œä¸ºå•¥åŠ äº†ä¸‰ä¸ªæ„Ÿå¹å·å‘¢~ï¼Œå› ä¸ºå¯¹äºåˆå­¦è€…æ¥è¯´ä¸€ä¸å°å¿ƒå°±å°† ajax çš„å¹¶å‘è¯·æ±‚å‘æˆäº†é˜»å¡å¼åŒæ­¥çš„æ“ä½œäº†ï¼Œæˆ‘å°±çœŸçœŸåˆ‡åˆ‡çš„åœ¨å·¥ä½œä¸­å†™äº†è¿™æ ·çš„ä»£ç ã€‚await è‹¥ç­‰å¾…çš„æ˜¯ promise å°±ä¼šåœæ­¢ä¸‹æ¥ã€‚ä¸šåŠ¡æ˜¯è¿™æ ·çš„ï¼Œæˆ‘æœ‰ä¸‰ä¸ªå¼‚æ­¥è¯·æ±‚éœ€è¦å‘é€ï¼Œç›¸äº’æ²¡æœ‰å…³è”ï¼Œåªæ˜¯éœ€è¦å½“è¯·æ±‚éƒ½ç»“æŸåå°†ç•Œé¢çš„ loading æ¸…é™¤æ‰å³å¯ã€‚<br>åˆšå­¦å®Œ async await å¼€å¿ƒå•Šï¼Œåˆ°å¤„ä¹±ç”¨~</p><p>// æ€»ç»“ promise.all çš„ç‰¹ç‚¹<br>// 1ã€æ¥æ”¶ä¸€ä¸ª Promise å®ä¾‹çš„æ•°ç»„æˆ–å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œ</p><p>// 2ã€å¦‚æœå…ƒç´ ä¸æ˜¯ Promise å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ Promise.resolve è½¬æˆ Promise å¯¹è±¡</p><p>// 3ã€å¦‚æœå…¨éƒ¨æˆåŠŸï¼ŒçŠ¶æ€å˜ä¸º resolvedï¼Œè¿”å›å€¼å°†ç»„æˆä¸€ä¸ªæ•°ç»„ä¼ ç»™å›è°ƒ</p><p>// 4ã€åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼ŒçŠ¶æ€å°±å˜ä¸º rejectedï¼Œè¿”å›å€¼å°†ç›´æ¥ä¼ é€’ç»™å›è°ƒ<br>// all() çš„è¿”å›å€¼ä¹Ÿæ˜¯æ–°çš„ Promise å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">correctDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p1 = sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">let</span> p2 = sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">let</span> p3 = sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all([p1, p2, p3]);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;clear the loading~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">correctDemo(); <span class="comment">// clear the loading~</span></span><br></pre></td></tr></table></figure><h1 id="await-in-for-å¾ªç¯"><a href="#await-in-for-å¾ªç¯" class="headerlink" title="await in for å¾ªç¯"></a>await in for å¾ªç¯</h1><p>==awaitå¿…é¡»åœ¨asyncå‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­çš„==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">forDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> arr[i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">forDemo()</span><br></pre></td></tr></table></figure><h4 id="2018-06-01æ›´æ–°å¼•å…¥bluebrid-ä¸²è¡Œ"><a href="#2018-06-01æ›´æ–°å¼•å…¥bluebrid-ä¸²è¡Œ" class="headerlink" title="2018-06-01æ›´æ–°å¼•å…¥bluebrid ä¸²è¡Œ"></a>2018-06-01æ›´æ–°å¼•å…¥bluebrid ä¸²è¡Œ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> bluebird.delay(<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">1111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ç­‰å¾…1ç§’å“¦&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> bluebird.delay(<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;token&#x27;</span>:<span class="number">111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.time(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">          <span class="keyword">const</span> names = [<span class="string">&#x27;getApi1&#x27;</span>,<span class="string">&#x27;getApi2&#x27;</span>,<span class="string">&#x27;getApi3&#x27;</span>,<span class="string">&#x27;getApi4&#x27;</span>];</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">const</span> name <span class="keyword">in</span> names) &#123;</span><br><span class="line">              <span class="keyword">if</span> (names.hasOwnProperty(name)) &#123;</span><br><span class="line">                 <span class="keyword">const</span> res =  <span class="keyword">await</span> getApi1(name)</span><br><span class="line">                 <span class="built_in">console</span>.log(<span class="string">&#x27;bool1&#x27;</span>,res.success);</span><br><span class="line">                 <span class="built_in">console</span>.log(<span class="string">&#x27;bool2&#x27;</span>,res.results);</span><br><span class="line">              &#125; </span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">&#x27;é”™è¯¯error:&#x27;</span>+error);</span><br><span class="line">          </span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">showGetInfo();</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/image20180615153239.png"                      alt="image"                ></p><h4 id="2018-06-01æ›´æ–°-å¼•å…¥bluebrid-å¹¶è¡Œ"><a href="#2018-06-01æ›´æ–°-å¼•å…¥bluebrid-å¹¶è¡Œ" class="headerlink" title="2018-06-01æ›´æ–° å¼•å…¥bluebrid å¹¶è¡Œ"></a>2018-06-01æ›´æ–° å¼•å…¥bluebrid å¹¶è¡Œ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&quot;node-fetch&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bluebird = <span class="built_in">require</span>(<span class="string">&quot;bluebird&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi1</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> bluebird.delay(<span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">&quot;https://easy-mock.com/mock/5d09c91f44339368a2ce4c22/myapi/name&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url, &#123;</span><br><span class="line">    method: <span class="string">&quot;POST&quot;</span>, <span class="comment">//postè¯·æ±‚</span></span><br><span class="line">    headers: &#123;</span><br><span class="line">      Accept: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      <span class="comment">//postè¯·æ±‚å‚æ•°</span></span><br><span class="line">      name: name</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (response.status !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.json();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.time(<span class="string">&quot;æ—¶é—´&quot;</span>);</span><br><span class="line">    <span class="comment">//å‚æ•°è®¾ç½®æˆæ•°ç»„</span></span><br><span class="line">    <span class="keyword">const</span> names = [<span class="string">&quot;jordan&quot;</span>, <span class="string">&quot;james&quot;</span>,<span class="string">&quot;kobe&quot;</span>];</span><br><span class="line">   &lt;!--å…ˆè§¦å‘æ‰€æœ‰çš„è¯·æ±‚ï¼Œç»„æˆä¸€ä¸ªæ•°ç»„--&gt;</span><br><span class="line"><span class="keyword">const</span> promisesArr = names.map(<span class="function"><span class="params">x</span> =&gt;</span> getApi1(x));</span><br><span class="line">    &lt;!--ç„¶åéå†è¿™ä¸ªæ•°ç»„ï¼Œç­‰å¾…ç»“æœå‡ºæ¥--&gt;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> promise <span class="keyword">of</span> promisesArr) &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> promise;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;bool1&quot;</span>, res.success, res.data.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.timeEnd(<span class="string">&quot;æ—¶é—´&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.timeEnd(<span class="string">&quot;æ—¶é—´&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;é”™è¯¯error:&quot;</span> + error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">showGetInfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/image20180615154603.png"                      alt="image"                ></p><h3 id="2018-06-01è¡¥å……"><a href="#2018-06-01è¡¥å……" class="headerlink" title="2018-06-01è¡¥å……"></a>2018-06-01è¡¥å……</h3><p>async awaitçš„é”™è¯¯å¤„ç†ï¼ŒçŸ¥è¯†ç‚¹çš„è¡¥å……</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;node-fetch&#x27;</span>)</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/7551//changeroom&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">1111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> res = <span class="keyword">await</span> getApi();</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool&#x27;</span>,res.success);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;results&#x27;</span>,res.results.length);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">&#x27;é”™è¯¯error:&#x27;</span>+error);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">showGetInfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤„ç†awaitçš„ä¸²è¡Œ"><a href="#å¤„ç†awaitçš„ä¸²è¡Œ" class="headerlink" title="å¤„ç†awaitçš„ä¸²è¡Œ"></a>å¤„ç†awaitçš„ä¸²è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸²è¡Œ</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">1111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;token&#x27;</span>:<span class="number">111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(response.json);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> res1 = <span class="keyword">await</span> getApi1();</span><br><span class="line">          <span class="keyword">const</span> res2 = <span class="keyword">await</span> getApi2();</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool1&#x27;</span>,res1.success,<span class="string">&#x27;bool2&#x27;</span>,res2.success);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;results1&#x27;</span>,res1.results.length,<span class="string">&#x27;results2&#x27;</span>,res2.results);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">&#x27;é”™è¯¯error:&#x27;</span>+error);</span><br><span class="line">          </span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">showGetInfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/image20180615144620.png"                      alt="image"                ></p><h3 id="å¤„ç†awaitçš„å¹¶è¡Œ"><a href="#å¤„ç†awaitçš„å¹¶è¡Œ" class="headerlink" title="å¤„ç†awaitçš„å¹¶è¡Œ"></a>å¤„ç†awaitçš„å¹¶è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢åŠ ä¸€ä¸ªè¶…æ—¶</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function">(<span class="params">timeout=<span class="number">2000</span></span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(resolve,timeout);</span><br><span class="line">&#125;) </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> sleep();</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">1111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getApi2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ç­‰å¾…2ç§’å“¦&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> sleep();</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url,&#123;<span class="string">&#x27;token&#x27;</span>:<span class="number">111</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.time(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">          <span class="keyword">const</span> res1Promise =  getApi1();</span><br><span class="line">          <span class="keyword">const</span> res2Promise =  getApi2();</span><br><span class="line">          <span class="keyword">const</span> res1 = <span class="keyword">await</span> res1Promise;</span><br><span class="line">          <span class="keyword">const</span> res2 = <span class="keyword">await</span> res2Promise;</span><br><span class="line">          </span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool1&#x27;</span>,res1.success,<span class="string">&#x27;results1&#x27;</span>,res1.results.length,);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool2&#x27;</span>,res2.success,<span class="string">&#x27;results2&#x27;</span>,res2.results);</span><br><span class="line">          <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">&#x27;é”™è¯¯error:&#x27;</span>+error);</span><br><span class="line">          </span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">showGetInfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/image20180615144727.png"                      alt="image"                ></p><h3 id="Promise-allå¤„ç†awaitçš„å¹¶è¡Œ"><a href="#Promise-allå¤„ç†awaitçš„å¹¶è¡Œ" class="headerlink" title="Promise.allå¤„ç†awaitçš„å¹¶è¡Œ"></a>Promise.allå¤„ç†awaitçš„å¹¶è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> ()=&gt;&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.time(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">          <span class="keyword">const</span> [res1,res2]= <span class="keyword">await</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">              getApi1(),getApi2()</span><br><span class="line">          ])</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool1&#x27;</span>,res1.success,<span class="string">&#x27;results1&#x27;</span>,res1.results.length,);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;bool2&#x27;</span>,res2.success,<span class="string">&#x27;results2&#x27;</span>,res2.results);</span><br><span class="line">          <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;æ—¶é—´&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">&#x27;é”™è¯¯error:&#x27;</span>+error);</span><br><span class="line">          </span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">showGetInfo();</span><br></pre></td></tr></table></figure><h1 id="Promise-all-å¤„ç†-Rejection-çš„æŠ€å·§"><a href="#Promise-all-å¤„ç†-Rejection-çš„æŠ€å·§" class="headerlink" title="Promise.all å¤„ç† Rejection çš„æŠ€å·§"></a>Promise.all å¤„ç† Rejection çš„æŠ€å·§</h1><blockquote><p>Promise.all è¿™ä¸ª API å…è®¸æˆ‘ä»¬åœ¨å¤šä¸ªæ“ä½œå®Œæˆä¹‹åç»§ç»­åšæŸäº›äº‹æƒ…ï¼Œé—æ†¾çš„æ˜¯ Promise.all åªä¼šåœ¨æ‰€æœ‰ä¼ ç»™ä»–çš„ Promise éƒ½ resolve äº†ä¹‹åæ‰ä¼š resolveï¼Œå¦‚æœå…¶ä¸­çš„ä¸€ä¸ª reject äº†ï¼Œé‚£ä¹ˆ Promise.all åé¢çš„ then å°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œcatch ä¼šè¢«æ‰§è¡Œ</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&quot;node-fetch&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showGetInfo = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">&quot;æ—¶é—´&quot;</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.all(</span><br><span class="line">    [</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(<span class="number">1</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> reject(<span class="number">2</span>), <span class="number">2000</span>)),</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(<span class="number">3</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> reject(<span class="number">4</span>), <span class="number">3000</span>)),</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(<span class="number">2</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> reject(<span class="number">5</span>), <span class="number">4000</span>)),</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(<span class="number">4</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> reject(<span class="number">6</span>), <span class="number">1000</span>)),</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(<span class="number">5</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> reject(<span class="number">7</span>), <span class="number">1000</span>)),</span><br><span class="line">    ].map(<span class="function"><span class="params">p</span> =&gt;</span> p.catch(<span class="function">() =&gt;</span> <span class="literal">undefined</span>))</span><br><span class="line">  ).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.timeEnd(<span class="string">&quot;æ—¶é—´&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;done!&quot;</span>, data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">showGetInfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190621212414.png"                      alt=""                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ES7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Nativeå¼€å‘å®ç”¨å°æŠ€å·§(æŒç»­æ›´æ–°)</title>
      <link href="2018/04/10/React%20Native%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/"/>
      <url>2018/04/10/React%20Native%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/</url>
      
        <content type="html"><![CDATA[<h4 id="ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿ"><a href="#ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿ" class="headerlink" title="ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿ"></a>ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿ</h4><p>æˆ‘çš„å›ç­”æ˜¯ï¼š2ä¸ªç©ºæ ¼ã€‚<br>è·Ÿä¸Šé¢ä¸€æ ·ï¼Œæˆ‘åˆšè½¬åˆ°JavaScriptçš„æ—¶å€™ï¼Œè§‰å¾—2ä¸ªç©ºæ ¼å¾ˆåäººç±»ï¼Œå¤ªæŒ¤äº†ã€‚æ‰€ä»¥ä¸€ç›´åšæŒ4ä¸ªç©ºæ ¼ã€‚ç›´åˆ°UIä»£ç æ…¢æ…¢å˜å¤šï¼ŒåµŒå¥—å˜æ·±ã€‚ã€‚ã€‚æˆ‘æ‰å¼€å§‹æ…¢æ…¢æ€€ç–‘è‡ªå·±ã€‚å‰å‡ å¤©ï¼Œæˆ‘æœç´¢äº†å¤šä¸ªçƒ­é—¨çš„JavaScriptå¼€æºé¡¹ç›®ï¼Œæ— ä¸€ä¾‹å¤–ä½¿ç”¨çš„æ˜¯2ä¸ªç©ºæ ¼ã€‚æ‰€ä»¥ï¼Œæˆ‘æœæ–­æŠŠä»£ç æ”¹æˆ2ä¸ªç©ºæ ¼ã€‚<br><a id="more"></a></p><h4 id="å¦‚ä½•æ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹å¸ƒå±€ï¼Ÿ"><a href="#å¦‚ä½•æ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹å¸ƒå±€ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹å¸ƒå±€ï¼Ÿ"></a>å¦‚ä½•æ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹å¸ƒå±€ï¼Ÿ</h4><p>ç¾å·¥å‡ºæ ‡æ³¨å›¾çš„æ—¶å€™ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§å±å¹•å®½åº¦750å‡ºçš„ã€‚å¦‚æœéœ€æ±‚æ˜¯UIæ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹çš„ç¼©æ”¾ã€‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå«px2dpçš„å…¬å…±æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Dimensions&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> basePixelWidth = <span class="number">750</span></span><br><span class="line"><span class="keyword">const</span> px2dp = (px: number): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> px * Dimensions.get(<span class="string">&#x27;window&#x27;</span>).width / basePixelWidth</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚è¦è®¾ç½®Viewçš„å®½åº¦ä¸ºå±å¹•çš„ä¸€åŠã€‚å°±å¯ä»¥è¿™æ ·ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;width:</span> <span class="attr">px2dp</span>(<span class="attr">375</span>)&#125;&#125; /&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="å¦‚ä½•å¿«é€Ÿè·å–å±å¹•å®½é«˜ï¼Ÿ"><a href="#å¦‚ä½•å¿«é€Ÿè·å–å±å¹•å®½é«˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¿«é€Ÿè·å–å±å¹•å®½é«˜ï¼Ÿ"></a>å¦‚ä½•å¿«é€Ÿè·å–å±å¹•å®½é«˜ï¼Ÿ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Dimensions, PixelRatio&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> screenWidth = Dimensions.get(<span class="string">&#x27;window&#x27;</span>).width</span><br><span class="line"><span class="keyword">const</span> screenHeight = Dimensions.get(<span class="string">&#x27;window&#x27;</span>).height</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> screen = &#123;</span><br><span class="line">  width: screenWidth,</span><br><span class="line">  height: screenHeight,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> screen</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¦‚ä½•åˆ¤æ–­è®¾å¤‡æ˜¯iPhoneXï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­è®¾å¤‡æ˜¯iPhoneXï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­è®¾å¤‡æ˜¯iPhoneXï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­è®¾å¤‡æ˜¯iPhoneXï¼Ÿ</h4><p>æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¯¹iPhoneXçš„å¼‚å½¢å±åšä¸€äº›ç‰¹æ®Šçš„é€‚é…ï¼Œå°±éœ€è¦åˆ¤æ–­ä¸€ä¸ªè®¾å¤‡æ˜¯å¦æ˜¯iPhoneX<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Platform, Dimensions&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isIphoneX = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> dimen = Dimensions.get(<span class="string">&#x27;window&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    Platform.OS === <span class="string">&#x27;ios&#x27;</span> &amp;&amp;</span><br><span class="line">    !Platform.isPad &amp;&amp;</span><br><span class="line">    !Platform.isTVOS &amp;&amp;</span><br><span class="line">    (dimen.height === <span class="number">812</span> || dimen.width === <span class="number">812</span>)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯iOSè®¾å¤‡</span></span><br><span class="line"><span class="keyword">const</span> isIOS = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Platform.OS === <span class="string">&#x27;ios&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦æ˜¯Androidè®¾å¤‡</span></span><br><span class="line"><span class="keyword">const</span> isAndroid = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Platform.OS === <span class="string">&#x27;android&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çŠ¶æ€æ çš„é«˜åº¦</span></span><br><span class="line"><span class="keyword">const</span> statusBarHeight = <span class="function">() =&gt;</span> (isIOS() ? (isIphoneX() ? <span class="number">44</span> : <span class="number">20</span>) : <span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="å¦‚ä½•ä¼˜é›…çš„ä¸ºæ¯ä¸ªé¡µé¢å¢åŠ Loadingé¡µã€é”™è¯¯é¡µï¼Ÿ"><a href="#å¦‚ä½•ä¼˜é›…çš„ä¸ºæ¯ä¸ªé¡µé¢å¢åŠ Loadingé¡µã€é”™è¯¯é¡µï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼˜é›…çš„ä¸ºæ¯ä¸ªé¡µé¢å¢åŠ Loadingé¡µã€é”™è¯¯é¡µï¼Ÿ"></a>å¦‚ä½•ä¼˜é›…çš„ä¸ºæ¯ä¸ªé¡µé¢å¢åŠ Loadingé¡µã€é”™è¯¯é¡µï¼Ÿ</h4><p>å¾ˆå¤šAppå¤§éƒ¨åˆ†é¡µé¢éƒ½éœ€è¦ç”¨åˆ°Loadingé¡µã€‚å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼Œè¿˜éœ€è¦æ˜¾ç¤ºé”™è¯¯é¡µï¼Œå‘Šè¯‰ç”¨æˆ·é”™è¯¯åŸå› ï¼Œå¹¶ä¸”è®©ç”¨æˆ·ç‚¹å‡»é‡è¯•ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ç»„ä»¶å«Sceneï¼Œç„¶ååœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®šä¹‰Loadingé¡µé¢å’Œé”™è¯¯é¡µã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨æˆ‘ä»¬çš„componentè¿™æ ·å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123;isLoading, error&#125; = <span class="built_in">this</span>.state</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Scene</span><br><span class="line">      isLoading=&#123;isLoading&#125;</span><br><span class="line">      error=&#123;error&#125;</span><br><span class="line">      onRetry=&#123;<span class="built_in">this</span>.requestData&#125;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/Scene&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬éœ€è¦è¯·æ±‚ç½‘ç»œçš„æ—¶å€™ï¼ŒæŠŠisLoadingè®¾ç½®ä¸ºtrueã€‚è¿™æ ·Sceneç»„ä»¶å°±ä¼šä¸ºæˆ‘ä»¬å±•ç¤ºä¸€ä¸ªLoadingé¡µé¢ã€‚<br>å½“ç½‘ç»œè¯·æ±‚å¤±è´¥çš„æ—¶å€™ï¼ŒæŠŠisLoadingè®¾ç½®ä¸ºfalseï¼Œerrorè®¾ç½®ä¸ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚Sceneç»„ä»¶å°±ä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯é¡µï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªâ€œé‡è¯•â€æŒ‰é’®ã€‚ç”¨æˆ·ç‚¹å‡»â€œé‡è¯•â€åï¼Œä¼šè°ƒç”¨onRetryå›è°ƒã€‚<br>Sceneçš„ä»£ç ç®€åŒ–åï¼Œå¤§æ¦‚æ˜¯è¿™æ ·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">type Props = &#123;</span><br><span class="line">  isLoading?: boolean,</span><br><span class="line">  error?: ?string,</span><br><span class="line">  onRetry?: <span class="built_in">Function</span>,</span><br><span class="line">  children?: any,</span><br><span class="line">  style?: <span class="built_in">Object</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scene</span> <span class="keyword">extends</span> <span class="title">PureComponent</span>&lt;<span class="title">Props</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;isLoading, style, error, children, onRetry&#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;[styles.container, style]&#125;&gt;</span><br><span class="line">        &#123;!isLoading &amp;&amp; children&#125;</span><br><span class="line">        &lt;ErrorView text=&#123;error&#125; onPress=&#123;onRetry&#125; /&gt;</span><br><span class="line">        &lt;LoadingView isLoading=&#123;isLoading&#125; /&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒErrorViewã€LoadingViewéœ€è¦ä½¿ç”¨ä¸‹é¢è¿™ç§ç»å¯¹å¸ƒå±€ã€‚å¦åˆ™å¯èƒ½ä¼šè¢«é¡µé¢çš„å†…å®¹é¡¶åˆ°å±å¹•å¤–é¢ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attribute">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">    top: <span class="number">0</span>,</span><br><span class="line">    left: <span class="number">0</span>,</span><br><span class="line">    right: <span class="number">0</span>,</span><br><span class="line">    bottom: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Nativeé¢è¯•é¢˜åº“(æŒç»­æ›´æ–°)</title>
      <link href="2018/04/09/React%20Native%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/"/>
      <url>2018/04/09/React%20Native%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/</url>
      
        <content type="html"><![CDATA[<p><em>æœ¬æ–‡åŸåˆ›é¦–å‘äºå…¬ä¼—å·ï¼šReactNativeå¼€å‘åœˆï¼Œè½¬è½½éœ€æ³¨æ˜å‡ºå¤„ã€‚</em></p><h2 id="1-React-Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ"><a href="#1-React-Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="1.React Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ"></a>1.React Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</h2><p>1.æ€§èƒ½åª²ç¾åŸç”ŸAPP<br>2.ä½¿ç”¨JavaScriptç¼–ç ï¼Œåªè¦å­¦ä¹ è¿™ä¸€ç§è¯­è¨€<br>3.ç»å¤§éƒ¨åˆ†ä»£ç å®‰å“å’ŒIOSéƒ½èƒ½å…±ç”¨<br>4.ç»„ä»¶å¼å¼€å‘ï¼Œä»£ç é‡ç”¨æ€§å¾ˆé«˜<br>5.è·Ÿç¼–å†™ç½‘é¡µä¸€èˆ¬ï¼Œä¿®æ”¹ä»£ç åå³å¯è‡ªåŠ¨åˆ·æ–°ï¼Œä¸éœ€è¦æ…¢æ…¢ç¼–è¯‘ï¼ŒèŠ‚çœå¾ˆå¤šç¼–è¯‘ç­‰å¾…æ—¶é—´<br>6.æ”¯æŒAPPçƒ­æ›´æ–°ï¼Œæ›´æ–°æ— éœ€é‡æ–°å®‰è£…APP<br><a id="more"></a><br>ç¼ºç‚¹ï¼š<br>å†…å­˜å ç”¨ç›¸å¯¹è¾ƒé«˜<br>ç‰ˆæœ¬è¿˜ä¸ç¨³å®šï¼Œä¸€ç›´åœ¨æ›´æ–°ï¼Œç°åœ¨è¿˜æ²¡æœ‰æ¨å‡ºç¨³å®šçš„1.0ç‰ˆæœ¬</p><h2 id="2-React-Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#2-React-Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.React Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>2.React Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pic.yupoo.com/forrest071/dede824f/a0e072f5.jpg"                      alt=""                ></p><p>ç”Ÿå‘½å‘¨æœŸ    è°ƒç”¨æ¬¡æ•°    èƒ½å¦ä½¿ç”¨ setSate()</p><table><thead><tr><th>å‘¨æœŸåç§°ä»¥åŠè°ƒç”¨æ¬¡æ•°</th><th>èƒ½å¦ä½¿ç”¨ setSate()</th><th>è¿˜æ²¡æƒ³å¥½</th></tr></thead><tbody><tr><td>getDefaultProps    1(å…¨å±€è°ƒç”¨ä¸€æ¬¡)</td><td>å¦</td></tr><tr><td>getInitialState    1</td><td>å¦</td></tr><tr><td>componentWillMount    1</td><td>æ˜¯</td></tr><tr><td>render    &gt;=1</td><td>å¦</td></tr><tr><td>componentDidMount    1</td><td>æ˜¯</td></tr><tr><td>componentWillReceiveProps    &gt;=0</td><td>æ˜¯</td></tr><tr><td>shouldComponentUpdate    &gt;=0</td><td>å¦</td></tr><tr><td>componentWillUpdate    &gt;=0</td><td>å¦</td></tr><tr><td>componentDidUpdate    &gt;=0</td><td>å¦</td></tr><tr><td>componentWillUnmount</td><td>å¦</td></tr></tbody></table><h2 id="3-å½“ä½ è°ƒç”¨setStateçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ"><a href="#3-å½“ä½ è°ƒç”¨setStateçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ" class="headerlink" title="3.å½“ä½ è°ƒç”¨setStateçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ"></a>3.å½“ä½ è°ƒç”¨setStateçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ</h2><p>å½“è°ƒç”¨ setState æ—¶ï¼ŒReactä¼šåšçš„ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯å°†ä¼ é€’ç»™ setState çš„å¯¹è±¡åˆå¹¶åˆ°ç»„ä»¶çš„å½“å‰çŠ¶æ€ã€‚<br>è¿™å°†å¯åŠ¨ä¸€ä¸ªç§°ä¸ºå’Œè§£ï¼ˆreconciliationï¼‰çš„è¿‡ç¨‹ã€‚<br>å’Œè§£ï¼ˆreconciliationï¼‰çš„æœ€ç»ˆç›®æ ‡æ˜¯ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ ¹æ®è¿™ä¸ªæ–°çš„çŠ¶æ€æ¥æ›´æ–°UIã€‚<br>ä¸ºæ­¤ï¼ŒReactå°†æ„å»ºä¸€ä¸ªæ–°çš„ React å…ƒç´ æ ‘ï¼ˆæ‚¨å¯ä»¥å°†å…¶è§†ä¸º UI çš„å¯¹è±¡è¡¨ç¤ºï¼‰ã€‚<br>ä¸€æ—¦æœ‰äº†è¿™ä¸ªæ ‘ï¼Œä¸ºäº†å¼„æ¸… UI å¦‚ä½•å“åº”æ–°çš„çŠ¶æ€è€Œæ”¹å˜ï¼ŒReact ä¼šå°†è¿™ä¸ªæ–°æ ‘ä¸ä¸Šä¸€ä¸ªå…ƒç´ æ ‘ç›¸æ¯”è¾ƒï¼ˆ diff ï¼‰ã€‚<br>é€šè¿‡è¿™æ ·åšï¼Œ React å°†ä¼šçŸ¥é“å‘ç”Ÿçš„ç¡®åˆ‡å˜åŒ–ï¼Œå¹¶ä¸”é€šè¿‡äº†è§£å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Œåªéœ€åœ¨ç»å¯¹å¿…è¦çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ–°å³å¯æœ€å°åŒ– UI çš„å ç”¨ç©ºé—´ã€‚</p><h2 id="4-propså’Œstateç›¸åŒç‚¹å’Œä¸åŒç‚¹"><a href="#4-propså’Œstateç›¸åŒç‚¹å’Œä¸åŒç‚¹" class="headerlink" title="4.propså’Œstateç›¸åŒç‚¹å’Œä¸åŒç‚¹"></a>4.propså’Œstateç›¸åŒç‚¹å’Œä¸åŒç‚¹</h2><p>1.ä¸ç®¡æ˜¯propsè¿˜æ˜¯stateçš„æ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘renderçš„é‡æ–°æ¸²æŸ“ã€‚<br>2.éƒ½èƒ½ç”±è‡ªèº«ç»„ä»¶çš„ç›¸åº”åˆå§‹åŒ–å‡½æ•°è®¾å®šåˆå§‹å€¼ã€‚</p><p>ä¸åŒç‚¹<br>1.åˆå§‹å€¼æ¥æºï¼šstateçš„åˆå§‹å€¼æ¥è‡ªäºè‡ªèº«çš„getInitalStateï¼ˆconstructorï¼‰å‡½æ•°ï¼›propsæ¥è‡ªäºçˆ¶ç»„ä»¶æˆ–è€…è‡ªèº«getDefaultPropsï¼ˆè‹¥keyç›¸åŒå‰è€…å¯è¦†ç›–åè€…ï¼‰ã€‚</p><p>2.ä¿®æ”¹æ–¹å¼ï¼šstateåªèƒ½åœ¨è‡ªèº«ç»„ä»¶ä¸­setStateï¼Œä¸èƒ½ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼›propsåªèƒ½ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼Œä¸èƒ½åœ¨è‡ªèº«ç»„ä»¶ä¿®æ”¹ã€‚</p><p>3.å¯¹å­ç»„ä»¶ï¼špropsæ˜¯ä¸€ä¸ªçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®æµï¼Œè¿™ä¸ªæ•°æ®æµå¯ä»¥ä¸€ç›´ä¼ é€’åˆ°å­å­™ç»„ä»¶ï¼›stateä»£è¡¨çš„æ˜¯ä¸€ä¸ªç»„ä»¶å†…éƒ¨è‡ªèº«çš„çŠ¶æ€ï¼Œåªèƒ½åœ¨è‡ªèº«ç»„ä»¶ä¸­å­˜åœ¨ã€‚</p><h2 id="5-shouldComponentUpdate-åº”è¯¥åšä»€ä¹ˆ"><a href="#5-shouldComponentUpdate-åº”è¯¥åšä»€ä¹ˆ" class="headerlink" title="5.shouldComponentUpdate åº”è¯¥åšä»€ä¹ˆ"></a>5.shouldComponentUpdate åº”è¯¥åšä»€ä¹ˆ</h2><p>å…¶å®è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯è·Ÿreconciliationæœ‰å…³ç³»ã€‚<br>â€œå’Œè§£ï¼ˆ reconciliation ï¼‰çš„æœ€ç»ˆç›®æ ‡æ˜¯ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ ¹æ®æ–°çš„çŠ¶æ€æ›´æ–°ç”¨æˆ·ç•Œé¢â€ã€‚<br>å¦‚æœæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬çš„ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„æŸä¸€éƒ¨åˆ†ä¸ä¼šæ”¹å˜ï¼Œ<br>é‚£ä¹ˆæ²¡æœ‰ç†ç”±è®© React å¾ˆéº»çƒ¦åœ°è¯•å›¾å»å¼„æ¸…æ¥šå®ƒæ˜¯å¦åº”è¯¥æ¸²æŸ“ã€‚<br>é€šè¿‡ä» shouldComponentUpdate è¿”å› falseï¼Œ<br>React å°†å‡å®šå½“å‰ç»„ä»¶åŠå…¶æ‰€æœ‰å­ç»„ä»¶å°†ä¿æŒä¸å½“å‰ç»„ä»¶ç›¸åŒ</p><h2 id="6-reactJSçš„props-children-mapå‡½æ•°æ¥éå†ä¼šæ”¶åˆ°å¼‚å¸¸æç¤ºï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•éå†ï¼Ÿ"><a href="#6-reactJSçš„props-children-mapå‡½æ•°æ¥éå†ä¼šæ”¶åˆ°å¼‚å¸¸æç¤ºï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•éå†ï¼Ÿ" class="headerlink" title="6.reactJSçš„props.children.mapå‡½æ•°æ¥éå†ä¼šæ”¶åˆ°å¼‚å¸¸æç¤ºï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•éå†ï¼Ÿ"></a>6.reactJSçš„props.children.mapå‡½æ•°æ¥éå†ä¼šæ”¶åˆ°å¼‚å¸¸æç¤ºï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•éå†ï¼Ÿ</h2><p>this.props.children çš„å€¼æœ‰ä¸‰ç§å¯èƒ½ï¼š<br>    1.å½“å‰ç»„ä»¶æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå°±æ˜¯ undefined;<br>    2.æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹æ˜¯ object ï¼›<br>    3.æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹å°±æ˜¯ array ã€‚<br>ç³»ç»Ÿæä¾›React.Children.map()æ–¹æ³•å®‰å…¨çš„éå†å­èŠ‚ç‚¹å¯¹è±¡</p><h2 id="7-reduxçŠ¶æ€ç®¡ç†çš„æµç¨‹"><a href="#7-reduxçŠ¶æ€ç®¡ç†çš„æµç¨‹" class="headerlink" title="7.reduxçŠ¶æ€ç®¡ç†çš„æµç¨‹"></a>7.reduxçŠ¶æ€ç®¡ç†çš„æµç¨‹</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pic.yupoo.com/forrest071/0f711f99/33431f36.png"                      alt=""                ><br>actionæ˜¯ç”¨æˆ·è§¦å‘æˆ–ç¨‹åºè§¦å‘çš„ä¸€ä¸ªæ™®é€šå¯¹è±¡ã€‚<br>reduceræ˜¯æ ¹æ®actionæ“ä½œæ¥åšå‡ºä¸åŒçš„æ•°æ®å“åº”ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„stateã€‚<br>storeçš„æœ€ç»ˆå€¼å°±æ˜¯ç”±reducerçš„å€¼æ¥ç¡®å®šçš„ã€‚ï¼ˆä¸€ä¸ªstoreæ˜¯ä¸€ä¸ªå¯¹è±¡, reducerä¼šæ”¹å˜storeä¸­çš„æŸäº›å€¼ï¼‰<br>action -&gt; reducer -&gt; æ–°store -&gt; åé¦ˆåˆ°UIä¸Šæœ‰æ‰€æ”¹å˜ã€‚</p><h2 id="8-åŠ è½½bundleçš„æœºåˆ¶"><a href="#8-åŠ è½½bundleçš„æœºåˆ¶" class="headerlink" title="8.åŠ è½½bundleçš„æœºåˆ¶"></a>8.åŠ è½½bundleçš„æœºåˆ¶</h2><p>è¦å®ç°RNçš„è„šæœ¬çƒ­æ›´æ–°ï¼Œæˆ‘ä»¬è¦ææ˜ç™½RNæ˜¯å¦‚ä½•å»åŠ è½½è„šæœ¬çš„ã€‚ åœ¨ç¼–å†™ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæœ‰è®¸å¤šä¸ªjsæ–‡ä»¶ï¼Œæ‰“åŒ…çš„æ—¶å€™RNä¼šå°†è¿™äº›ä¸ªjsæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå«index.android.bundle(iosçš„æ˜¯index.ios.bundle)çš„æ–‡ä»¶ï¼Œæ‰€æœ‰çš„jsä»£ç (åŒ…æ‹¬rnæºä»£ç ã€ç¬¬ä¸‰æ–¹åº“ã€ä¸šåŠ¡é€»è¾‘çš„ä»£ç )éƒ½åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¯åŠ¨Appæ—¶ä¼šç¬¬ä¸€æ—¶é—´åŠ è½½bundleæ–‡ä»¶ï¼Œæ‰€ä»¥è„šæœ¬çƒ­æ›´æ–°è¦åšçš„äº‹æƒ…å°±æ˜¯æ›¿æ¢æ‰è¿™ä¸ªbundleæ–‡ä»¶ã€‚</p><h2 id="9-Flexå¸ƒå±€"><a href="#9-Flexå¸ƒå±€" class="headerlink" title="9.Flexå¸ƒå±€"></a>9.Flexå¸ƒå±€</h2><p>é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex Containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pic.yupoo.com/forrest071/bd1d492f/2c0075a1.png"                      alt=""                ></p><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åšmain startï¼Œç»“æŸä½ç½®å«åšmain endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸä½ç½®å«åšcross endã€‚</p><p>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åšcross sizeã€‚</p><p>å®¹å™¨çš„å±æ€§<br>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚<br>flex-direction  å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘)ã€‚<br>flex-wrap   å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚<br>flex-flow   flex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ã€‚<br>justify-content   å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚<br>align-items  å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚<br>align-content  align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p><h2 id="10-è¯·ç®€è¿°-code-push-çš„åŸç†"><a href="#10-è¯·ç®€è¿°-code-push-çš„åŸç†" class="headerlink" title="10.è¯·ç®€è¿° code push çš„åŸç†"></a>10.è¯·ç®€è¿° code push çš„åŸç†</h2><p>code push è°ƒç”¨ react native çš„æ‰“åŒ…å‘½ä»¤ï¼Œå°†å½“å‰ç¯å¢ƒçš„é native ä»£ç å…¨é‡æ‰“åŒ…æˆä¸€ä¸ª bundle æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°å¾®è½¯äº‘æœåŠ¡å™¨ï¼ˆWindows Azureï¼‰ã€‚ åœ¨ app ä¸­å¯åŠ¨é¡µï¼ˆæˆ– splash é¡µï¼‰ç¼–å†™è¯·æ±‚æ›´æ–°çš„ä»£ç ï¼ˆè¯·æ±‚åŒ…å«äº†æœ¬åœ°ç‰ˆæœ¬ï¼ŒhashCodeã€appToken ç­‰ä¿¡æ¯ï¼‰ï¼Œå¾®è½¯æœåŠ¡ç«¯å¯¹æ¯”æœ¬åœ° js bundle ç‰ˆæœ¬å’Œå¾®è½¯æœåŠ¡å™¨çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ¬åœ°ç‰ˆæœ¬ä½ï¼Œå°±ä¸‹è½½æ–°çš„ js bundle ä¸‹æ¥åå®ç°æ›´æ–°(code push æ¡†æ¶å®ç°)ã€‚</p><h2 id="11-Reduxä¸­åŒæ­¥-action-ä¸å¼‚æ­¥-action-æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#11-Reduxä¸­åŒæ­¥-action-ä¸å¼‚æ­¥-action-æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="11.Reduxä¸­åŒæ­¥ action ä¸å¼‚æ­¥ action æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a>11.Reduxä¸­åŒæ­¥ action ä¸å¼‚æ­¥ action æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h2><p>åŒæ­¥åªè¿”å›ä¸€ä¸ªæ™®é€š action å¯¹è±¡ã€‚è€Œå¼‚æ­¥æ“ä½œä¸­é€”ä¼šè¿”å›ä¸€ä¸ª promise å‡½æ•°ã€‚å½“ç„¶åœ¨ promise å‡½æ•°å¤„ç†å®Œæ¯•åä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ™®é€š action å¯¹è±¡ã€‚thunk ä¸­é—´ä»¶å°±æ˜¯åˆ¤æ–­å¦‚æœè¿”å›çš„æ˜¯å‡½æ•°ï¼Œåˆ™ä¸ä¼ å¯¼ç»™ reducerï¼Œç›´åˆ°æ£€æµ‹åˆ°æ˜¯æ™®é€š action å¯¹è±¡ï¼Œæ‰äº¤ç”± reducer å¤„ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ReactNative </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
            <tag> ReactNative </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯Redux</title>
      <link href="2018/02/01/%E4%BB%80%E4%B9%88%E6%98%AFRedux/"/>
      <url>2018/02/01/%E4%BB%80%E4%B9%88%E6%98%AFRedux/</url>
      
        <content type="html"><![CDATA[<p>è®¤è¯†ä¸‹redux<br><a id="more"></a><br>ä»€ä¹ˆæ˜¯redux<br>å½“ä½ å»å¼€å‘å¤æ‚çš„å•é¡µåº”ç”¨çš„æ—¶å€™ä½ éœ€è¦ç®¡ç†å„ç§å¤æ‚çš„åº”ç”¨çŠ¶æ€ï¼Œè¿™é‹çŠ¶æ€å¯èƒ½æ˜¯æœåŠ¡å™¨è¿”å›çš„çŠ¶ï¼Œæ€ï¼Œæœ¬åœ°çš„æ•°æ®  url   reduxå¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† åªç»´æŠ¤æ•°æ®<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/clipboard-201821.png"                      alt="clipboard-201821"                ><br>ä¸€ä¸ªåº”ç”¨å¦‚ä½•å¤æ‚ åªæœ‰ä¸€ä¸ªstore æ•°æ®åªå­˜store<br>å¾—åˆ°storeæ•°æ®  ç”¨ getstateï¼ˆï¼‰<br>ä¸èƒ½ç›´æ¥ä¿®æ”¹store  è€Œæ˜¯åº”è¯¥å‘èµ·ä¸€ä¸ªaction è¯·æ±‚  ç„¶å reducerä¼šå»æ›´æ”¹æ•°æ®ï¼Œå¦‚ä½•æ›´æ”¹ä½ ä¸ç”¨å…³å¿ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="comment">// reducerå”¯ä¸€  state</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123;type&#125; = action;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;INCREMENT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span>++ state;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–æœ€æ–°çš„storeæ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(counter);</span><br><span class="line"></span><br><span class="line">$(<span class="built_in">document</span>).click(<span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å‘å¸ƒactionæ¥æ›´æ–°æ•°æ®</span></span><br><span class="line">  store.dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;INCREMENT&#x27;</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç›‘å¬stateçš„å˜åŒ–</span></span><br><span class="line">store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ä¸€æ—¦stateå˜åŒ–å°±å¯ä»¥å†å»æ›´æ–°Viewè§†å›¾ç›¸å…³</span></span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é”™è¯¯çš„æ›´æ–°state"><a href="#é”™è¯¯çš„æ›´æ–°state" class="headerlink" title="é”™è¯¯çš„æ›´æ–°state"></a>é”™è¯¯çš„æ›´æ–°state</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/QQæˆªå›¾20180201125747-201821.jpg"                      alt="QQæˆªå›¾20180201125747-201821"                ></p><h4 id="æ­£ç¡®çš„æ›´æ–°state"><a href="#æ­£ç¡®çš„æ›´æ–°state" class="headerlink" title="æ­£ç¡®çš„æ›´æ–°state"></a>æ­£ç¡®çš„æ›´æ–°state</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/QQæˆªå›¾20180201125840-201821.jpg"                      alt="QQæˆªå›¾20180201125840-201821"                ></p><p>actionå¯èƒ½éå¸¸å¤šï¼Œä¸€ä¸ªå¯ç»´æŠ¤çš„åº”ç”¨ä½ è¦æŠŠacionæ”¾å†ä¸€ä¸ªæ–‡ä»¶é‡Œé¢<br>æˆ–è€…è§†å›¾ç›¸å…³çš„actionæ”¾åœ¨æŸä¸ªæ¨¡å—é‡Œé¢</p><p>counterä¸èƒ½å‰¯ä½œç”¨ ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨  å°±æ˜¯é‡Œé¢å¦‚æœajaxè¯·æ±‚ è·¯ç”±è·³è½¬  æˆ–è€… counter1 counter2</p><h4 id="reactä¸reduxå¦‚ä½•ä¸€èµ·ç”¨"><a href="#reactä¸reduxå¦‚ä½•ä¸€èµ·ç”¨" class="headerlink" title="reactä¸reduxå¦‚ä½•ä¸€èµ·ç”¨"></a>reactä¸reduxå¦‚ä½•ä¸€èµ·ç”¨</h4><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/QQæˆªå›¾20180131184308-201821.jpg"                      alt="QQæˆªå›¾20180131184308-201821"                ></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactä¹‹ç®€ä¹¦ç•Œé¢demo</title>
      <link href="2018/01/31/React%E4%B9%8B%E7%AE%80%E4%B9%A6%E7%95%8C%E9%9D%A2demo/"/>
      <url>2018/01/31/React%E4%B9%8B%E7%AE%80%E4%B9%A6%E7%95%8C%E9%9D%A2demo/</url>
      
        <content type="html"><![CDATA[<p>åšä¸€äº›å°ç»ƒä¹ <br><a id="more"></a><br>åˆ†æé¡¹ç›®ç•Œé¢<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/ç®€ä¹¦ç•Œé¢ç»„ä»¶æ‹†åˆ†-2018131.jpg"                      alt="ç®€ä¹¦ç•Œé¢ç»„ä»¶æ‹†åˆ†-2018131"                ></p><p><a href="https://codesandbox.io/s/2w863wvp70"><img                       lazyload                     src="/images/loading.svg"                     data-src="https://codesandbox.io/static/img/play-codesandbox.svg"                      alt="Edit antd reproduction template"                ></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ª reduce å®ç°</title>
      <link href="2017/12/30/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAreduce%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>2017/12/30/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAreduce%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬çŸ¥é“ reduce æ–¹æ³•æ˜¯ ES5 å¼•å…¥çš„ï¼Œreduce è‹±æ–‡è§£é‡Šç¿»è¯‘è¿‡æ¥ä¸ºã€Œå‡å°‘ï¼Œç¼©å°ï¼Œä½¿è¿˜åŸï¼Œä½¿å˜å¼±ã€</p><a id="more"></a><p>å®ƒçš„ä½¿ç”¨è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚</p><ol><li>reduce ç¬¬ä¸€ä¸ªå‚æ•° callback æ˜¯æ ¸å¿ƒï¼Œå®ƒå¯¹æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œã€Œå åŠ åŠ å·¥ã€ï¼Œå…¶æœ€åä¸€æ¬¡è¿”å›å€¼å°†ä½œä¸º reduce æ–¹æ³•çš„æœ€ç»ˆè¿”å›å€¼ã€‚ å®ƒåŒ…å« 4 ä¸ªå‚æ•°ï¼š</li><li>previousValue ã€€è¡¨ç¤ºã€Œä¸Šä¸€æ¬¡ã€ callback å‡½æ•°çš„è¿”å›å€¼</li><li>currentValue ã€€æ•°ç»„éå†ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ </li><li>currentIndex ã€€å¯é€‰ï¼Œè¡¨ç¤º currentValue åœ¨æ•°ç»„ä¸­å¯¹åº”çš„ç´¢å¼•ã€‚å¦‚æœæä¾›äº† initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º 0ï¼Œå¦åˆ™ä¸º 1</li><li>array ã€€å¯é€‰ï¼Œè°ƒç”¨ reduce() çš„æ•°ç»„</li><li>initialValue å¯é€‰ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰æä¾› initialValueï¼Œé‚£ä¹ˆæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†ä½œä¸º callback çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</li><li>reduce å®ç° runPromiseInSequence</li></ol><p>æˆ‘ä»¬çœ‹å®ƒçš„ä¸€ä¸ªå…¸å‹åº”ç”¨ï¼ŒæŒ‰é¡ºåºè¿è¡Œ Promiseï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f1 = <span class="function">() =&gt;</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;p1 running&quot;</span>);</span><br><span class="line">      resolve(<span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f2 = <span class="function">() =&gt;</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;p2 running&quot;</span>);</span><br><span class="line">      resolve(<span class="number">2</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [f1, f2];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> runPromiseInSequence = <span class="function">(<span class="params">array, value</span>) =&gt;</span></span><br><span class="line">  array.reduce(<span class="function">(<span class="params">promiseChain, currentFunction</span>) =&gt;</span> promiseChain.then(currentFunction), <span class="built_in">Promise</span>.resolve(value));</span><br><span class="line"></span><br><span class="line">runPromiseInSequence(array, <span class="string">&quot;init&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æ–¹æ¡ˆ â‘ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// â‘  å®šä¹‰åˆ° Array.prototype ä¸Šã€‚ å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.myReduse = <span class="function"><span class="keyword">function</span>(<span class="params">callback, init</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// init æ˜¯å¯é€‰çš„ï¼Œ è¿™é‡Œçš„ this æ˜¯è°ƒç”¨çš„é‚£ä¸ªarrayã€‚</span></span><br><span class="line">  init = init || <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> array = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// â‘¡ å®šä¹‰ prev ä¹‹å‰çš„ç»“æœ å’Œ å¾ªç¯èµ·å§‹ç‚¹</span></span><br><span class="line">  <span class="keyword">let</span> prev,</span><br><span class="line">    startIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// â‘¢ æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; æ•°ç»„æ˜¯ç©º  =&gt; æŠ¥é”™</span></span><br><span class="line">  <span class="keyword">if</span> (!init &amp;&amp; array.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&quot;ç©ºæ•°ç»„ï¼Œæ²¡æœ‰åˆå§‹å€¼&quot;</span>);</span><br><span class="line">  <span class="comment">// æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; æ•°ç»„é•¿åº¦=1  =&gt; ç›´æ¥è¿”å›ç¬¬ä¸€é¡¹ï¼Œcallbackä¸æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (!init &amp;&amp; array.length == <span class="number">1</span>) <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; é•¿åº¦å¤§äº1  =&gt;  ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼Œprev = ç¬¬ä¸€é¡¹çš„å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (!init &amp;&amp; array.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    prev = array[<span class="number">0</span>];</span><br><span class="line">    startIndex = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æœ‰åˆå§‹å€¼ &amp;&amp; é•¿åº¦å¤§äº1  =&gt;  ä»ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œprev = init åˆå§‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (init &amp;&amp; array.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    prev = init;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = startIndex; index &lt; array.length; index++) &#123;</span><br><span class="line">    <span class="comment">// prev å§‹ç»ˆæ˜¯å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œ</span></span><br><span class="line">    <span class="comment">// callback æŒ‰ç…§é¡ºåºä¼ å…¥å€¼ï¼š å‰é¢çš„ç»“æœï¼Œ å½“å‰é¡¹çš„å€¼ï¼Œ å½“å‰ç´¢å¼•ï¼ŒåŸæ•°ç»„</span></span><br><span class="line">    prev = callback(prev, array[index], index, array);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ä¹‹å‰é¡¹çš„ç»“æœã€‚</span></span><br><span class="line">  <span class="keyword">return</span> prev;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆ â‘¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.reduce =</span><br><span class="line">  <span class="built_in">Array</span>.prototype.reduce ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">func, initialValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> base = <span class="keyword">typeof</span> initialValue === <span class="string">&quot;undefined&quot;</span> ? arr[<span class="number">0</span>] : initialValue;</span><br><span class="line">    <span class="keyword">var</span> startPoint = <span class="keyword">typeof</span> initialValue === <span class="string">&quot;undefined&quot;</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    arr.slice(startPoint).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">val, index</span>) </span>&#123;</span><br><span class="line">      base = func(base, val, index + startPoint, arr);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> base;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://juejin.im/post/5bc6de295188255c372f8697" >JS Array.prototype.reduce çš„ä¸€äº›ç†è§£<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.zhihu.com/market/paid_column/1167078439772721152/section/1169948349812842496" >æ•°ç»„ reduce æ–¹æ³•çš„ç›¸å…³å®ç°<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://juejin.im/post/5d568e23f265da0390052a3d" >æ•°ç»„ reduce ä¸€çœ‹ä¸€æ•´å¤©<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ªcallæˆ– apply</title>
      <link href="2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcall%E6%88%96%20apply/"/>
      <url>2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcall%E6%88%96%20apply/</url>
      
        <content type="html"><![CDATA[<h1 id="callè¯­æ³•ï¼š"><a href="#callè¯­æ³•ï¼š" class="headerlink" title="callè¯­æ³•ï¼š"></a>callè¯­æ³•ï¼š</h1><blockquote><p>fun.call(thisArg,arg1,arg2,â€¦)ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œåˆ†åˆ«åœ°æä¾›çš„å‚æ•°(å‚æ•°çš„åˆ—è¡¨)ã€‚</p></blockquote><p>ä½¿ç”¨ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Product</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  Product.call(<span class="built_in">this</span>, name, price);</span><br><span class="line">  <span class="built_in">this</span>.category = <span class="string">&#x27;food&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Food(<span class="string">&#x27;cheese&#x27;</span>, <span class="number">5</span>).name);</span><br><span class="line"><span class="comment">//&quot;cheese&quot;</span></span><br></pre></td></tr></table></figure></p><p>ç®€å•è¯´ä¸‹å®ç°åŸç†ï¼š</p><ol><li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li><li>æ‰§è¡Œ&amp;åˆ é™¤è¿™ä¸ªå‡½æ•°</li><li>æŒ‡å®š thisåˆ°å‡½æ•°å¹¶ä¼ å…¥ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•°</li><li>å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œé»˜è®¤æŒ‡å‘ä¸º window</li></ol><p>ä¹ä¸ç‰ˆæœ¬ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/carbon1.png"                      alt=""                ></p><p>ä»£ç ï¼š<br>å¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªæ–°çš„newcallç†æƒ³çŠ¶æ€åº”è¯¥æ€ä¹ˆæ ·ï¼Ÿ</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/carbon.png"                      alt=""                ><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.newcall = <span class="function"><span class="keyword">function</span> (<span class="params">content = <span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//thisæŒ‡çš„æ˜¯bar(name,age)</span></span><br><span class="line">  content.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="comment">// å–å‡ºå‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•° ä¸å…¶ä»–å‚æ•°</span></span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">//content.fnå°±æ˜¯æŒ‡baræ–¹æ³•</span></span><br><span class="line">  <span class="keyword">let</span> result = content.fn(...args);</span><br><span class="line">  <span class="comment">//åˆ é™¤this</span></span><br><span class="line">  <span class="keyword">delete</span> content.fn;</span><br><span class="line">  <span class="comment">//è¿”å›æ–°å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190424102151.png"                      alt=""                ></p><h1 id="applyè¯­æ³•ï¼š"><a href="#applyè¯­æ³•ï¼š" class="headerlink" title="applyè¯­æ³•ï¼š"></a>applyè¯­æ³•ï¼š</h1><blockquote><p>func.apply(thisArg,[argsArray])ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼‰æä¾›çš„å‚æ•°ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.newapply = <span class="function"><span class="keyword">function</span> (<span class="params">content = <span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">  content.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">arguments</span>[<span class="number">1</span>])&#123;</span><br><span class="line">    result = content.fn(...arguments[<span class="number">1</span>]);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    result = content.fn()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> content.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">bar.newapply(foo,[<span class="string">&quot;jack&quot;</span>])</span><br></pre></td></tr></table></figure><h1 id="æ‰‹å†™ç³»åˆ—"><a href="#æ‰‹å†™ç³»åˆ—" class="headerlink" title="æ‰‹å†™ç³»åˆ—"></a>æ‰‹å†™ç³»åˆ—</h1><ol><li><del><strong>å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</strong></del></li><li><del>å®ç°ä¸€ä¸ªJSON.stringify</del></li><li><del>å®ç°ä¸€ä¸ªJSON.parse</del></li><li><del>å®ç°ä¸€ä¸ªcallæˆ– apply</del></li><li><del>å®ç°ä¸€ä¸ªFunction.bind</del></li><li>å®ç°ä¸€ä¸ªç»§æ‰¿</li><li>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</li><li>æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</li><li>æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</li><li>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</li><li>å®ç°ä¸€ä¸ªinstanceOf</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ªinstanceof</title>
      <link href="2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAinstanceof/"/>
      <url>2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAinstanceof/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ï¼Œåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹å°å°ä¼šç”¨ typeof è¿ç®—ç¬¦ï¼Œåœ¨ä½¿ç”¨ typeof è¿ç®—ç¬¦æ—¶é‡‡ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨å€¼ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºå¼•ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œå®ƒéƒ½è¿”å› â€œobjectâ€ã€‚ECMAScript å¼•å…¥äº†å¦ä¸€ä¸ª Java è¿ç®—ç¬¦ instanceof æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚instanceof è¿ç®—ç¬¦ä¸ typeof è¿ç®—ç¬¦ç›¸ä¼¼ï¼Œç”¨äºè¯†åˆ«æ­£åœ¨å¤„ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¸ typeof æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œinstanceof æ–¹æ³•è¦æ±‚å¼€å‘è€…æ˜ç¡®åœ°ç¡®è®¤å¯¹è±¡ä¸ºæŸç‰¹å®šç±»å‹ã€‚<br><a id="more"></a><br>instanceof ç¤ºä¾‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.name = name;</span><br><span class="line">      get:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªè·å–æ–¹æ³•&#x27;</span>,<span class="built_in">this</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   F.prototype.get_pro = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªåŸå‹å®ä¾‹ä¸Šçš„æ–¹æ³•&#x27;</span>,<span class="built_in">this</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> w = <span class="keyword">new</span> F();</span><br><span class="line"></span><br><span class="line">   <span class="built_in">console</span>.log(w <span class="keyword">instanceof</span> F);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><br>è¿™æ®µä»£ç é—®çš„æ˜¯â€œå˜é‡ w æ˜¯å¦ä¸º F å¯¹è±¡çš„å®ä¾‹ï¼Ÿâ€w çš„ç¡®æ˜¯ F å¯¹è±¡çš„å®ä¾‹ï¼Œå› æ­¤ç»“æœæ˜¯â€trueâ€ã€‚å°½ç®¡ä¸åƒ typeof æ–¹æ³•é‚£æ ·çµæ´»ï¼Œä½†æ˜¯åœ¨ typeof æ–¹æ³•è¿”å› â€œobjectâ€ çš„æƒ…å†µä¸‹ï¼Œinstanceof æ–¹æ³•è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><p>å®ç°åŸç†ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°ä¸€ä¸ªinstanceof</span></span><br><span class="line"><span class="comment"> * instanceof è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹ constructor.prototype æ˜¯å¦å­˜åœ¨äºå‚æ•° object çš„åŸå‹é“¾ä¸Šã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newInstanceof</span>(<span class="params">left,right</span>) </span>&#123;</span><br><span class="line">       <span class="comment">//è·å–å®ä¾‹çš„åŸå‹å¯¹è±¡</span></span><br><span class="line">       <span class="keyword">let</span> proto = left.__proto__;</span><br><span class="line">       <span class="comment">//è·å–æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span></span><br><span class="line">       <span class="keyword">let</span> prototype = right.prototype;</span><br><span class="line">       <span class="comment">//é»˜è®¤åˆ¤æ–­true</span></span><br><span class="line">       <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">         <span class="comment">//å¦‚æœå®ä¾‹å¯¹è±¡ä¸ºç©º åˆ™ä¸ºfalse</span></span><br><span class="line">         <span class="keyword">if</span>(proto == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">         <span class="comment">//å¦‚æœåŸå‹å¯¹è±¡ === æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ åˆ™åˆ¤æ–­true</span></span><br><span class="line">         <span class="keyword">if</span>(proto == prototype) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">         <span class="comment">//å¦åˆ™ç»§ç»­æƒ³åŸå‹å¯¹è±¡çš„ä¸Šä¸€çº§å¯»æ‰¾åŸå‹å¯¹è±¡ï¼Œä¸€ç›´æ‰¾åˆ°Objectä¸ºæ­¢</span></span><br><span class="line">         proto = proto.__proto__;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">W</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    get:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯w&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(newInstanceof(w,F))</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(newInstanceof(w,W))</span><br><span class="line">  <span class="built_in">console</span>.log(newInstanceof(w,<span class="built_in">Object</span>))</span><br></pre></td></tr></table></figure></p><h1 id="æ‰‹å†™ç³»åˆ—"><a href="#æ‰‹å†™ç³»åˆ—" class="headerlink" title="æ‰‹å†™ç³»åˆ—"></a>æ‰‹å†™ç³»åˆ—</h1><ol><li><del><strong>å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</strong></del></li><li><del>å®ç°ä¸€ä¸ªJSON.stringify</del></li><li><del>å®ç°ä¸€ä¸ªJSON.parse</del></li><li><del>å®ç°ä¸€ä¸ªcallæˆ– apply</del></li><li><del>å®ç°ä¸€ä¸ªFunction.bind</del></li><li>å®ç°ä¸€ä¸ªç»§æ‰¿</li><li>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</li><li>æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</li><li>æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</li><li>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</li><li><del>å®ç°ä¸€ä¸ªinstanceOf</del></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ªJSON.stringifyä¸JSON.parse</title>
      <link href="2017/12/24/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAJSON.stringify%E4%B8%8EJSON.parse/"/>
      <url>2017/12/24/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAJSON.stringify%E4%B8%8EJSON.parse/</url>
      
        <content type="html"><![CDATA[<h1 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON.stringify() æ–¹æ³•å°† JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><blockquote><p>JSON.stringify(value[, replacer[, space]])</p></blockquote><ol><li>Boolean|Number|String ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚</li><li>undefinedã€ä»»æ„å‡½æ•°ä»¥åŠ symbolï¼Œä¼šè¢«å¿½ç•¥ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰ï¼Œæˆ–è€…è¢«è½¬æ¢æˆ nullï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚</li><li>ä¸å¯æšä¸¾çš„å±æ€§ä¼šè¢«å¿½ç•¥</li><li>å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼é€šè¿‡æŸç§é—´æ¥çš„æ–¹å¼æŒ‡å›è¯¥å¯¹è±¡æœ¬èº«ï¼Œå³å¾ªç¯å¼•ç”¨ï¼Œå±æ€§ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonStringify</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> type = <span class="keyword">typeof</span> obj;</span><br><span class="line">    <span class="keyword">if</span> (type !== <span class="string">&quot;object&quot;</span> || type === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">        obj = <span class="string">&#x27;&quot;&#x27;</span> + obj + <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">String</span>(obj)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> json = [];</span><br><span class="line">      <span class="comment">// typeof []ä¹Ÿæ˜¯object ç»§ç»­åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line">      arr = (obj &amp;&amp; obj.constructor === <span class="built_in">Array</span>);</span><br><span class="line">      <span class="comment">// éå†å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">let</span> v = obj[k];</span><br><span class="line">        <span class="keyword">let</span> type = <span class="keyword">typeof</span> v;</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">          v = <span class="string">&#x27;&quot;&#x27;</span> + v + <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">          <span class="comment">//åˆ¤æ–­å¦‚æœæ˜¯objectç»§ç»­é€’å½’</span></span><br><span class="line">          v = jsonStringify(type);</span><br><span class="line">        &#125;</span><br><span class="line">        json.push((arr ? <span class="string">&quot;&quot;</span> : <span class="string">&#x27;&quot;&#x27;</span>+ k + <span class="string">&#x27;&quot;:&#x27;</span>)+<span class="built_in">String</span>(v))</span><br><span class="line">      &#125;</span><br><span class="line">     <span class="keyword">return</span> (arr ? <span class="string">&quot;[&quot;</span> : <span class="string">&quot;&#123;&quot;</span>) + <span class="built_in">String</span>(json)+(arr ? <span class="string">&quot;]&quot;</span> : <span class="string">&quot;&#125;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(jsonStringify(<span class="number">2</span>))</span><br><span class="line">  <span class="built_in">console</span>.log(jsonStringify(&#123;<span class="attr">x</span>: <span class="number">5</span>&#125;))</span><br><span class="line">  <span class="comment">// &quot;&#123;&quot;x&quot;:5&#125;&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(jsonStringify([<span class="number">1</span>, <span class="string">&quot;false&quot;</span>, <span class="literal">false</span>])) <span class="comment">// &quot;[1,&quot;false&quot;,false]&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(jsonStringify(&#123;<span class="attr">b</span>: <span class="literal">undefined</span>&#125;))</span><br></pre></td></tr></table></figure><h1 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON.parse() æ–¹æ³•å°†æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚</p><blockquote><p>JSON.parse(text[, reviver])</p></blockquote><p>ç”¨æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(<span class="string">&#x27;&#123; &quot;name&quot;:&quot;runoob&quot;, &quot;alexa&quot;:10000, &quot;site&quot;:&quot;www.runoob.com&quot; &#125;&#x27;</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>).innerHTML = obj.name + <span class="string">&quot;ï¼š&quot;</span> + obj.site;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ç§å†™æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse</span>(<span class="params">opt</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">eval</span>(<span class="string">&#x27;(&#x27;</span> + opt + <span class="string">&#x27;)&#x27;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(jsonParse(jsonStringify(&#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="literal">undefined</span>, <span class="attr">z</span>: <span class="literal">null</span>&#125;)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190424095154.png"                      alt=""                ><br>ç¬¬äºŒç§å†™æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ¥è§£æJSONå­—ç¬¦ä¸²ï¼Œæ„é€ ç”±å­—ç¬¦ä¸²æè¿°çš„JavaScriptå€¼æˆ–å¯¹è±¡ã€‚æä¾›å¯é€‰çš„reviverå‡½æ•°ç”¨ä»¥åœ¨è¿”å›ä¹‹å‰å¯¹æ‰€å¾—åˆ°çš„å¯¹è±¡æ‰§è¡Œå˜æ¢(æ“ä½œ)ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jsonStr = <span class="string">&#x27;&#123; &quot;age&quot;: 20, &quot;name&quot;: &quot;jack&quot; &#125;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> json = (<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;return&#x27;</span>+jsonStr))();</span><br><span class="line"><span class="built_in">console</span>.log(json)</span><br></pre></td></tr></table></figure><br><strong>åŸå› æ˜¯ï¼šæ ¸å¿ƒï¼š Functionä¸ evalæœ‰ç›¸åŒçš„å­—ç¬¦ä¸²å‚æ•°ç‰¹æ€§ã€‚</strong></p><blockquote><p> let func=newFunction(arg1,arg2,â€¦,functionBody);</p></blockquote><h1 id="æ‰‹å†™ç³»åˆ—"><a href="#æ‰‹å†™ç³»åˆ—" class="headerlink" title="æ‰‹å†™ç³»åˆ—"></a>æ‰‹å†™ç³»åˆ—</h1><ol><li><del><strong>å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</strong></del></li><li><del>å®ç°ä¸€ä¸ªJSON.stringify</del></li><li><del>å®ç°ä¸€ä¸ªJSON.parse</del></li><li>å®ç°ä¸€ä¸ªcallæˆ– apply</li><li><del>å®ç°ä¸€ä¸ªFunction.bind</del></li><li>å®ç°ä¸€ä¸ªç»§æ‰¿</li><li>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</li><li>æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</li><li>æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</li><li>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</li><li><del>å®ç°ä¸€ä¸ªinstanceOf</del></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç½®é¡¶ã€‘JavaScript ç¼–ç é£æ ¼æŒ‡å—</title>
      <link href="2017/12/22/JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97/"/>
      <url>2017/12/22/JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<p>åºè¯­è¨€çš„ç¼–ç é£æ ¼æŒ‡å—å¯¹äºä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„è½¯ä»¶è€Œè¨€æ˜¯éå¸¸é‡è¦çš„ã€‚æœ¬æŒ‡å—æ˜¯åŸºäºâ€œJavaè¯­è¨€ç¼–ç è§„èŒƒâ€ï¼ˆCode Conventions fo the Java Programming Languageï¼‰å’ŒCrockfordçš„ï¼ˆJavaScriptï¼‰è§„èŒƒï¼ŒåŒæ—¶ç»“åˆäº†æˆ‘ä¸ªäººçš„ç»éªŒå’Œå–œå¥½åšäº†ä¸€äº›æ”¹åŠ¨ã€‚<br><a id="more"></a><br>1.ç¼©è¿›</p><p>æ¯ä¸€è¡Œçš„å±‚çº§ç”±å››ä¸ªç©ºæ ¼ç»„æˆï¼Œé¿å…ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰è¿›è¡Œç¼©è¿›ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.è¡Œçš„é•¿åº¦</p><p>æ¯è¡Œé•¿åº¦ä¸åº”è¯¥è¶…è¿‡80ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸€è¡Œå¤šä½™80ä¸ªå­—ç¬¦ï¼Œåº”å½“åœ¨ä¸€ä¸ªè¿ç®—ç¬¦ï¼ˆé€—å·ï¼ŒåŠ å·ç­‰ï¼‰åæ¢è¡Œã€‚ä¸‹ä¸€è¡Œåº”å½“å¢åŠ ä¸¤æç¼©è¿›ï¼ˆ8ä¸ªå­—ç¬¦ï¼‰ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">doSomething(argument1, argument2, argument3, argument4,</span><br><span class="line">        argument5);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šç¬¬äºŒè¡Œåªæœ‰å››ä¸ªç©ºæ ¼çš„ç¼©è¿›</span></span><br><span class="line">doSomething(argument1, argument2, argument3, argument4,</span><br><span class="line">    argument5);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåœ¨è¿ç®—ç¬¦ä¹‹å‰æ¢è¡Œ</span></span><br><span class="line">doSomething(argument1, argument2, argument3, argument4</span><br><span class="line">             ,argument5);</span><br></pre></td></tr></table></figure><p>3.åŸå§‹å€¼</p><p>å­—ç¬¦ä¸²åº”å½“å§‹ç»ˆä½¿ç”¨å•å¼•å·(é¿å…ä½¿ç”¨åŒå¼•å·)ä¸”ä¿æŒä¸€è¡Œã€‚é¿å…åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨æ–œçº¿å¦èµ·ä¸€è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Nicholas&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼š åŒå¼•å·</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Nicholas&quot;</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå­—ç¬¦ä¸²ç»“æŸä¹‹å‰æ¢è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> longString = <span class="string">&#x27;Here is the story, of a man \</span></span><br><span class="line"><span class="string">named Brady.&#x27;</span>;</span><br><span class="line">æ•°å­—åº”å½“ä½¿ç”¨åè¿›åˆ¶æ•´æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ•´æ•°ï¼Œåå…­è¿›åˆ¶æ•´æ•°ï¼Œæˆ–è€…åè¿›åˆ¶æµ®ç‚¹å°æ•°ï¼Œå°æ•°ç‚¹å‰ååº”å½“è‡³å°‘ä¿ç•™ä¸€ä½æ•°å­—ã€‚é¿å…ä½¿ç”¨å…«è¿›åˆ¶ç›´æ¥é‡ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> price = <span class="number">10.0</span>;</span><br><span class="line"><span class="keyword">var</span> price = <span class="number">10.00</span>;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0xA2</span>;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1e23</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåè¿›åˆ¶æ•°å­—ä»¥å°æ•°ç‚¹ç»“å°¾</span></span><br><span class="line"><span class="keyword">var</span> price = <span class="number">10.</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåè¿›åˆ¶æ•°å­—ä»¥å°æ•°ç‚¹å¼€å¤´</span></span><br><span class="line"><span class="keyword">var</span> price = <span class="number">.1</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå…«è¿›åˆ¶ï¼ˆbase 8ï¼‰å†™æ³•å·²åºŸå¼ƒ</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">010</span>;</span><br></pre></td></tr></table></figure><p>ç‰¹æ®Šå€¼nullé™¤äº†ä¸‹è¿°æƒ…å†µä¸‹åº”å½“é¿å…ä½¿ç”¨ã€‚</p><p>ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯èƒ½è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚<br>ç”¨æ¥å’Œä¸€ä¸ªå·²ç»åˆå§‹åŒ–çš„å˜é‡æ¯”è¾ƒï¼Œè¿™ä¸ªå˜é‡å¯ä»¥æ˜¯ä¹Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚<br>å½“å‡½æ•°çš„å‚æ•°æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œè¢«ç”¨ä½œå‚æ•°ä¼ å…¥ã€‚<br>å½“å‡½æ•°çš„è¿”å›å€¼æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œè¢«ç”¨ä½œè¿”å›å€¼ä¼ å‡ºã€‚<br>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPersion</span>(<span class="params"></span>)</span>;</span><br><span class="line"><span class="keyword">if</span> (persion != <span class="literal">null</span>) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå’Œä¸€ä¸ªæœªè¢«åˆå§‹åŒ–çš„å˜é‡æ¯”è¾ƒ</span></span><br><span class="line"><span class="keyword">var</span> persion;</span><br><span class="line"><span class="keyword">if</span> (persion != <span class="literal">null</span>) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">arg1, arg2, arg3, arg4</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arg4 != <span class="literal">null</span>) &#123;</span><br><span class="line">        doSomething(Else);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¿å…ä½¿ç”¨ç‰¹æ®Šå€¼ undefinedã€‚åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦å®šä¹‰åº”å½“ä½¿ç”¨typeofæ“ä½œç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> variable == <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨äº†undefinedç›´æ¥é‡</span></span><br><span class="line"><span class="keyword">if</span> (variable == <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="comment">// do something;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.è¿ç®—ç¬¦é—´è·</p><p>äºŒå…ƒè¿ç®—ç¬¦å‰åå¿…é¡»ä½¿ç”¨ä¸€ä¸ªç©ºæ ¼æ¥ä¿æŒè¡¨è¾¾å¼çš„æ•´æ´ã€‚æ“ä½œç¬¦åŒ…æ‹¬èµ‹å€¼è¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> found = (values[i] === item);</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (found &amp;&amp; (count &gt; <span class="number">10</span>)) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    process(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">var</span> found = (values[i]===item);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">if</span> (found&amp;&amp;(count&gt;<span class="number">10</span>)) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">    process(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.æ‹¬å·é—´è·</p><p>å½“ä½¿ç”¨æ‹¬å·æ—¶ï¼Œç´§æ¥å·¦æ‹¬å·ä¹‹åå’Œç´§æ¥å³æ‹¬å·ä¹‹å‰ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> found = (values[i] === item);</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (found &amp;&amp; (count &gt; <span class="number">10</span>)) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">for</span> (i= <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    process(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå·¦æ‹¬å·ä¹‹åæœ‰é¢å¤–çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">var</span> found = ( values[i] === item);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå³æ‹¬å·ä¹‹åæœ‰é¢å¤–çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">if</span> (found &amp;&amp; (count &gt; <span class="number">10</span>) ) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå‚æ•°ä¸¤è¾¹æœ‰é¢å¤–çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">for</span> (i= <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    process( i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.å¯¹è±¡ç›´æ¥é‡</p><p>å¯¹è±¡ç›´æ¥é‡åº”å½“ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ã€‚</p><p>å…¶å®å·¦æ‹¬å·åº”å½“åŒè¡¨è¾¾å¼ä¿æŒåŒä¸€è¡Œã€‚<br>æ¯ä¸ªå±æ€§çš„åå€¼å¯¹åº”å½“ä¿æŒä¸€ä¸ªç¼©è¿›ï¼Œç¬¬ä¸€ä¸ªå±æ€§åº”å½“åœ¨å·¦æ‹¬å·åå¦èµ·ä¸€è¡Œã€‚<br>æ¯ä¸ªå±æ€§çš„åå€¼å¯¹åº”å½“ä½¿ç”¨ä¸ç”¨å¼•å·çš„å±æ€§åï¼Œå…¶åç´§è·Ÿä¸€ä¸ªå†’å·ï¼ˆä¹‹å‰ä¸å«ç©ºæ ¼ï¼‰,è€Œåæ˜¯å€¼ã€‚<br>å€˜è‹¥å±æ€§å€¼æ˜¯å‡½æ•°ç±»å‹ï¼Œå‡½æ•°ä½“åº”å½“åœ¨å±æ€§åä¹‹ä¸‹å¦èµ·ä¸€è¡Œï¼Œè€Œä¸”å…¶åå‡åº”ä¿ç•™ä¸€ä¸ªç©ºè¡Œã€‚<br>ä¸€ç»„ç›¸å…³çš„å±æ€§å‰åå¯ä»¥æ’å…¥ç©ºè¡Œä»¥æå‡ä»£ç çš„å¯è¯»æ€§ã€‚<br>ç»“æŸçš„å³æ‹¬å·åº”å½“ç‹¬å ä¸€è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    key1: value1,</span><br><span class="line">    key2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//åšäº›ä»€ä¹ˆ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    key3: value3</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸ä¸”å½“çš„ç¼©è¿›</span></span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">                key1: value1,</span><br><span class="line">                key2: value2</span><br><span class="line">            &#125;</span><br><span class="line">;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°ä½“å‘¨å›´ç¼ºå°‘ç©ºè¡Œ</span></span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    key1: value1,</span><br><span class="line">    key2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//åšäº›ä»€ä¹ˆ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    key3: value3</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å½“å¯¹è±¡å­—é¢é‡ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œå¦‚æœå€¼æ˜¯å˜é‡ï¼Œèµ·å§‹èŠ±æ‹¬å·åº”å½“åŒå‡½æ•°ååœ¨åŒä¸€è¡Œã€‚</p><p>æ‰€æœ‰å…¶ä½™å…ˆå‰åˆ—å‡ºçš„è§„åˆ™åŒæ ·ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">doSomething(&#123;</span><br><span class="line">    key1: value1,</span><br><span class="line">    key2: value2</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼š æ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œä¸Š</span></span><br><span class="line">doSomething(&#123; <span class="attr">key1</span>: value1, <span class="attr">key2</span>: value2 &#125;);</span><br></pre></td></tr></table></figure><h4 id="7-æ³¨é‡Š"><a href="#7-æ³¨é‡Š" class="headerlink" title="7.æ³¨é‡Š"></a>7.æ³¨é‡Š</h4><p>é¢‘ç¹åœ°ä½¿ç”¨æ³¨é‡Šæœ‰åŠ©äºä»–äººç†è§£ä½ çš„ä»£ç ã€‚å¦‚ä¸‹æƒ…å†µåº”å½“ä½¿ç”¨æ³¨é‡Šã€‚</p><p>ä»£ç æ™¦æ¶©éš¾æ‡‚ã€‚<br>å¯èƒ½è¢«è¯¯è®¤ä¸ºé”™è¯¯çš„ä»£ç ã€‚<br>å¿…è¦ä½†ä¸æ˜æ˜¾çš„é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨çš„ä»£ç ã€‚<br>å¯¹äºå¯¹è±¡ã€æ–¹æ³•æˆ–è€…å±æ€§ï¼Œç”Ÿæˆæ–‡æ¡£æ˜¯æœ‰å¿…è¦çš„ï¼ˆä½¿ç”¨ä¸”å½“çš„æ–‡æ¡£æ³¨é‡Šï¼‰ã€‚<br>7.1 å•è¡Œæ³¨é‡Š</p><h5 id="å•è¡Œæ³¨é‡Šåº”å½“æ¥è¯´æ˜ä¸€è¡Œä»£ç æˆ–è€…ä¸€ç»„ç›¸å…³çš„ä»£ç ã€‚å•è¡Œæ³¨é‡Šå¯èƒ½æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚"><a href="#å•è¡Œæ³¨é‡Šåº”å½“æ¥è¯´æ˜ä¸€è¡Œä»£ç æˆ–è€…ä¸€ç»„ç›¸å…³çš„ä»£ç ã€‚å•è¡Œæ³¨é‡Šå¯èƒ½æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚" class="headerlink" title="å•è¡Œæ³¨é‡Šåº”å½“æ¥è¯´æ˜ä¸€è¡Œä»£ç æˆ–è€…ä¸€ç»„ç›¸å…³çš„ä»£ç ã€‚å•è¡Œæ³¨é‡Šå¯èƒ½æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚"></a>å•è¡Œæ³¨é‡Šåº”å½“æ¥è¯´æ˜ä¸€è¡Œä»£ç æˆ–è€…ä¸€ç»„ç›¸å…³çš„ä»£ç ã€‚å•è¡Œæ³¨é‡Šå¯èƒ½æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚</h5><ol><li>ç‹¬å ä¸€è¡Œçš„æ³¨é‡Šï¼Œç”¨æ¥è§£é‡Šä¸‹ä¸€è¡Œä»£ç ã€‚</li><li>åœ¨ä»£ç è¡Œçš„å°¾éƒ¨æ³¨é‡Šï¼Œç”¨æ¥è§£é‡Šä¹‹å‰çš„ä»£ç ã€‚</li><li>å¤šè¡Œï¼Œç”¨æ¥æ³¨é‡Šæ‰ä¸€ä¸ªä»£ç å—ã€‚</li><li>è¿™é‡Œæœ‰ä¸€äº›ç¤ºä¾‹ä»£ç ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šä¹‹å‰æ²¡æœ‰ç©ºè¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯çš„ç¼©è¿›</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line"><span class="comment">// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šè¿™é‡Œåº”å½“ç”¨å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment">// æ¥ä¸‹æ¥çš„è¿™æ®µä»£ç éå¸¸éš¾ï¼Œé‚£ä¹ˆï¼Œè®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹</span></span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯é¦–å…ˆåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºçœŸ</span></span><br><span class="line"><span class="comment">// åªæœ‰ä¸ºçœŸæ—¶æ‰æ‰§è¡Œã€‚è¿™é‡Œçš„æ¡ä»¶æ˜¯é€šè¿‡</span></span><br><span class="line"><span class="comment">// å¤šä¸ªå‡½æ•°è®¡ç®—å‡ºæ¥çš„ï¼Œåœ¨æ•´ä¸ªä¼šè¯ç”Ÿå‘½æœŸå†…</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå€¼æ˜¯å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å¯¹äºä»£ç å°¾å•è¡Œæ³¨é‡Šçš„æƒ…å†µï¼Œåº”ç¡®ä¿ä»£ç å°¾åŒæ³¨é‡Šä¹‹é—´è‡³å°‘ä¸€ä¸ªç¼©è¿›ã€‚"><a href="#å¯¹äºä»£ç å°¾å•è¡Œæ³¨é‡Šçš„æƒ…å†µï¼Œåº”ç¡®ä¿ä»£ç å°¾åŒæ³¨é‡Šä¹‹é—´è‡³å°‘ä¸€ä¸ªç¼©è¿›ã€‚" class="headerlink" title="å¯¹äºä»£ç å°¾å•è¡Œæ³¨é‡Šçš„æƒ…å†µï¼Œåº”ç¡®ä¿ä»£ç å°¾åŒæ³¨é‡Šä¹‹é—´è‡³å°‘ä¸€ä¸ªç¼©è¿›ã€‚"></a>å¯¹äºä»£ç å°¾å•è¡Œæ³¨é‡Šçš„æƒ…å†µï¼Œåº”ç¡®ä¿ä»£ç å°¾åŒæ³¨é‡Šä¹‹é—´è‡³å°‘ä¸€ä¸ªç¼©è¿›ã€‚</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> result = something + somethingElse; <span class="comment">// somethingElse will never be null</span></span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å’Œæ³¨é‡Šé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">var</span> result = something + somethingElse;<span class="comment">// somethingElse will never be null</span></span><br><span class="line">æ³¨é‡Šä¸€ä¸ªä»£ç å—æ—¶åœ¨è¿ç»­å¤šè¡Œä½¿ç”¨å•è¡Œæ³¨é‡Šæ˜¯å”¯ä¸€å¯ä»¥æ¥å—çš„æƒ…å†µã€‚å¤šè¡Œæ³¨é‡Šä¸åº”å½“åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="comment">// if (condition) &#123;</span></span><br><span class="line"><span class="comment">//     doSomething();</span></span><br><span class="line"><span class="comment">//     thenDoSomethingElse();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="7-2-å¤šè¡Œæ³¨é‡Š"><a href="#7-2-å¤šè¡Œæ³¨é‡Š" class="headerlink" title="7.2 å¤šè¡Œæ³¨é‡Š"></a>7.2 å¤šè¡Œæ³¨é‡Š</h4><h5 id="å¤šè¡Œæ³¨é‡Šåº”å½“åœ¨ä»£ç éœ€è¦æ›´å¤šæ–‡å­—å»è§£é‡Šçš„æ—¶å€™ä½¿ç”¨ã€‚æ¯ä¸ªå¤šè¡Œæ³¨é‡Šéƒ½è‡³å°‘æœ‰å¦‚ä¸‹ä¸‰è¡Œã€‚"><a href="#å¤šè¡Œæ³¨é‡Šåº”å½“åœ¨ä»£ç éœ€è¦æ›´å¤šæ–‡å­—å»è§£é‡Šçš„æ—¶å€™ä½¿ç”¨ã€‚æ¯ä¸ªå¤šè¡Œæ³¨é‡Šéƒ½è‡³å°‘æœ‰å¦‚ä¸‹ä¸‰è¡Œã€‚" class="headerlink" title="å¤šè¡Œæ³¨é‡Šåº”å½“åœ¨ä»£ç éœ€è¦æ›´å¤šæ–‡å­—å»è§£é‡Šçš„æ—¶å€™ä½¿ç”¨ã€‚æ¯ä¸ªå¤šè¡Œæ³¨é‡Šéƒ½è‡³å°‘æœ‰å¦‚ä¸‹ä¸‰è¡Œã€‚"></a>å¤šè¡Œæ³¨é‡Šåº”å½“åœ¨ä»£ç éœ€è¦æ›´å¤šæ–‡å­—å»è§£é‡Šçš„æ—¶å€™ä½¿ç”¨ã€‚æ¯ä¸ªå¤šè¡Œæ³¨é‡Šéƒ½è‡³å°‘æœ‰å¦‚ä¸‹ä¸‰è¡Œã€‚</h5><ol><li>é¦–è¡Œä»…ä»…åŒ…æ‹¬/*æ³¨é‡Šå¼€å§‹ã€‚è¯¥è¡Œä¸åº”å½“æœ‰å…¶ä»–æ–‡å­—ã€‚</li><li>æ¥ä¸‹æ¥çš„è¡Œä»¥*å¼€å¤´å¹¶ä¿æŒå·¦å¯¹é½ã€‚è¿™äº›è¡Œå¯ä»¥æœ‰æ–‡å­—æè¿°ã€‚</li><li>æœ€åä¸€è¡Œä»¥*/å¼€å¤´å¹¶åŒå…ˆå‰è¡Œä¿æŒå¯¹é½ã€‚ä¹Ÿä¸åº”è¯¥æœ‰å…¶ä»–æ–‡å­—ã€‚</li><li>å¤šè¡Œæ³¨é‡Šçš„æ‰‹è¡Œåº”å½“ä¿æŒåŒå®ƒæè¿°ä»£ç çš„ç›¸åŒå±‚æ¬¡ç¼©è¿›ã€‚åç»­çš„æ¯è¡Œåº”å½“æœ‰åŒæ ·å±‚æ¬¡çš„ç¼©è¿›å¹¶é™„åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆä¸ºäº†é€‚å½“ä¿æŒ*å­—ç¬¦çš„å¯¹é½ï¼‰ã€‚å¯¹æ¯ä¸€ä¸ªå¤šè¡Œä»£ç ä¹‹å‰åº”é¢„ç•™ä¸€ä¸ªç©ºæ ¼ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ</span></span><br><span class="line"><span class="comment">     * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šä¹‹å‰æ— ç©ºè¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ</span></span><br><span class="line"><span class="comment">     * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ˜Ÿå·åæ²¡æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ</span></span><br><span class="line"><span class="comment">     *è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯çš„ç¼©è¿›</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ</span></span><br><span class="line"><span class="comment"> * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    allowed();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å°¾éƒ¨æ³¨é‡Šä¸è¦ç”¨å¤šè¡Œæ³¨é‡Šæ ¼å¼</span></span><br><span class="line"><span class="keyword">var</span> result = something + somethingElse; <span class="comment">/* somethingElse will never be null */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="7-3-æ³¨é‡Šå£°æ˜"><a href="#7-3-æ³¨é‡Šå£°æ˜" class="headerlink" title="7.3 æ³¨é‡Šå£°æ˜"></a>7.3 æ³¨é‡Šå£°æ˜</h4><p>æ³¨é‡Šæœ‰æ—¶å€™ä¹Ÿå¯ä»¥ç”¨æ¥ç»™ä¸€æ®µä»£ç å£°æ˜é¢å¤–çš„ä¿¡æ¯ã€‚è¿™äº›å£°æ˜çš„æ ¼å¼ä»¥å•ä¸ªå•è¯æ‰“å¤´å¹¶ç´§è·Ÿä¸€ä¸ªåŒå¼•å·ã€‚å¯ä½¿ç”¨çš„å£°æ˜å¦‚ä¸‹ã€‚</p><p>TODO</p><p>è¯´æ˜ä»£ç è¿˜æœªå®Œæˆã€‚åº”å½“åŒ…å«ä¸‹ä¸€æ­¥è¦åšçš„äº‹æƒ…ã€‚</p><p>HACK</p><p>è¡¨æ˜ä»£ç å®ç°èµ°äº†ä¸€ä¸ªæ·å¾„ã€‚åº”å½“åŒ…å«ä¸ºä½•ä½¿ç”¨hackçš„åŸå› ã€‚è¿™ä¹Ÿå¯èƒ½è¡¨æ˜è¯¥é—®é¢˜å¯èƒ½ä¼šæœ‰æ›´å¥½çš„è§£å†³åŠæ³•ã€‚</p><p>XXX</p><p>è¯´æ˜ä»£ç æ˜¯æœ‰é—®é¢˜çš„å¹¶åº”å½“å°½å¿«ä¿®å¤ã€‚</p><p>FIXME</p><p>è¯´æ˜ä»£ç æ˜¯æœ‰é—®é¢˜çš„å¹¶åº”å°½å¿«ä¿®å¤ã€‚é‡è¦è¡Œç•¥æ¬¡äºXXXã€‚</p><p>REVIEW</p><p>è¯´æ˜ä»£ç ä»»ä½•å¯èƒ½çš„æ”¹åŠ¨éƒ½éœ€è¦è¯„å®¡ã€‚</p><p>è¿™äº›å£°æ˜å¯èƒ½åœ¨ä¸€è¡Œæˆ–å¤šè¡Œæ³¨é‡Šä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”åº”å½“éµå¾ªä¸€èˆ¬æ³¨é‡Šç±»å‹ç›¸åŒçš„æ ¼å¼è§„åˆ™ã€‚</p><p>ä¾‹å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="comment">// TODOï¼šæˆ‘å¸Œæœ›æ‰¾åˆ°ä¸€ç§æ›´å¿«æ·çš„æ–¹å¼</span></span><br><span class="line">doSomething();</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * HACKï¼šä¸å¾—ä¸é’ˆå¯¹IEåšçš„ç‰¹æ®Šå¤„ç†ã€‚æˆ‘è®¡åˆ’åç»­æœ‰æ—¶é—´æ—¶</span></span><br><span class="line"><span class="comment"> * é‡å†™è¿™éƒ¨åˆ†ã€‚è¿™äº›ä»£ç å¯èƒ½éœ€è¦åœ¨v1.2ç‰ˆæœ¬ä¹‹å‰æ›¿æ¢æ‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="comment">// REVIEWï¼šæœ‰æ›´å¥½çš„æ–¹æ³•å—ï¼Ÿ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šå£°æ˜ç©ºæ ¼ä¸æ­£ç¡®</span></span><br><span class="line"><span class="comment">// TODOï¼š æˆ‘å¸Œæœ›æ‰¾åˆ°ä¸€ç§æ›´å¿«æ·çš„æ–¹å¼</span></span><br><span class="line">doSomething();</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å’Œæ³¨é‡Šåº”å½“ä¿æŒåŒæ ·çš„ç¼©è¿›</span></span><br><span class="line">    <span class="comment">// REVIEWï¼šæœ‰æ›´å¥½çš„æ–¹æ³•å—ï¼Ÿ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="8-å£°æ˜å˜é‡"><a href="#8-å£°æ˜å˜é‡" class="headerlink" title="8.å£°æ˜å˜é‡"></a>8.å£°æ˜å˜é‡</h4><p>æ‰€æœ‰çš„å˜é‡åœ¨ä½¿ç”¨å‰åº”å½“äº‹å…ˆå®šä¹‰ã€‚å˜é‡å®šä¹‰åº”å½“æ”¾åœ¨å‡½æ•°å¼€å¤´ï¼Œä½¿ç”¨ä¸€ä¸ªvarè¡¨è¾¾å¼æ¯è¡Œä¸€ä¸ªå˜é‡ã€‚é™¤äº†é¦–è¡Œï¼Œæ‰€æœ‰è¡Œéƒ½åº”å½“å¤šä¸€å±‚ç¼©è¿›ä»¥ä½¿å˜é‡åèƒ½å¤Ÿå‚ç›´æ–¹å‘å¯¹é½ã€‚å˜é‡å®šä¹‰æ—¶åº”å½“åˆå§‹åŒ–ï¼Œå¹¶èµ‹å€¼æ“ä½œç¬¦åº”å½“ä¿æŒä¸€ç›´çš„ç¼©è¿›ã€‚åˆå§‹åŒ–çš„å˜é‡åº”å½“åœ¨æœªåˆå§‹åŒ–å˜é‡ä¹‹å‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>,</span><br><span class="line">    name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">    found = <span class="literal">false</span>,</span><br><span class="line">    empty;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸æ°å½“çš„åˆå§‹åŒ–èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>,</span><br><span class="line">   name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">   found= <span class="literal">false</span>,</span><br><span class="line">   empty;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯ç¼©è¿›</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>,</span><br><span class="line">name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">found = <span class="literal">false</span>,</span><br><span class="line">empty;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå¤šä¸ªå®šäºå†™åœ¨ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>, name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">    found = <span class="literal">false</span>, empty;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸ºåˆå§‹åŒ–çš„å˜é‡æ”¾åœ¨æœ€å‰è¾¹</span></span><br><span class="line"><span class="keyword">var</span> empty,</span><br><span class="line">    count = <span class="number">10</span>,</span><br><span class="line">    name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">    found = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå¤šä¸ªvarè¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">var</span> empty,</span><br><span class="line">    count = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">    found = <span class="literal">false</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="9-å‡½æ•°å£°æ˜"><a href="#9-å‡½æ•°å£°æ˜" class="headerlink" title="9.å‡½æ•°å£°æ˜"></a>9.å‡½æ•°å£°æ˜</h4><p>å‡½æ•°åº”å½“åœ¨ä½¿ç”¨å‰æå‰å®šä¹‰ã€‚ä¸€ä¸ªä¸æ˜¯ä½œä¸ºæ–¹æ³•çš„å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼‰åº”å½“ä½¿ç”¨å‡½æ•°å®šä¹‰çš„æ ¼å¼ï¼ˆä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼å’ŒFunctionæ„é€ æ ¼å¼ï¼‰ã€‚å‡½æ•°åå’Œå¼€å§‹åœ†æ‹¬å·ä¹‹é—´ä¸åº”å½“æœ‰ç©ºæ ¼ã€‚ç»“æŸçš„åœ†æ‹¬å·å’Œå³è¾¹çš„èŠ±æ‹¬å·ä¹‹é—´åº”è¯¥ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å³ä¾§çš„èŠ±æ‹¬å·åº”å½“åŒfunctionå…³é”®å­—ä¿æŒåŒä¸€è¡Œã€‚å¼€å§‹å’Œç»“æŸæ‹¬å·ä¹‹é—´ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚å‚æ•°åä¹‹é—´åº”å½“åœ¨é€—å·ä¹‹åä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å‡½æ•°ä½“åº”å½“ä¿æŒä¸€çº§ç¼©è¿›ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šç¬¬ä¸€è¡Œä¸æ°å½“çš„ç©ºæ ¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span> (<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">var</span> doSomething = <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå³ä¾§èŠ±æ‹¬å·ä¸å¯¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">arg1, arg2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é”™è¯¯çš„å†™æ³•ï¼šä½¿ç”¨äº†Functionæ„é€ å™¨</span></span><br><span class="line"><span class="keyword">var</span> doSomething = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;arg1&#x27;</span>, <span class="string">&#x27;arg2&#x27;</span>, <span class="keyword">return</span> arg1 + arg2);</span><br><span class="line">å…¶ä»–å‡½æ•°å†…éƒ¨å®šä¹‰å‡½æ•°åº”å½“åœ¨<span class="keyword">var</span>è¯­å¥åç«‹å³å®šä¹‰ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">10</span>,</span><br><span class="line">        name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">        found = <span class="literal">false</span>,</span><br><span class="line">        empty;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è°ƒç”¨inner()çš„ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šinnerå‡½æ•°çš„å®šä¹‰å…ˆäºå˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">10</span>,</span><br><span class="line">        name = <span class="string">&#x27;Nicholas&#x27;</span>,</span><br><span class="line">        found = <span class="literal">false</span>,</span><br><span class="line">        empty;</span><br><span class="line">    <span class="comment">// è°ƒç”¨inner()çš„ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒ¿åå‡½æ•°å¯èƒ½ä½œä¸ºæ–¹æ³•èµ‹å€¼ç»™å¯¹è±¡ï¼Œæˆ–è€…ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°ã€‚functionå…³é”®å­—åŒå¼€å§‹æ‹¬å·ä¹‹é—´ä¸åº”æœ‰ç©ºæ ¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">object.method = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸æ­£ç¡®çš„ç©ºæ ¼</span></span><br><span class="line">object.method = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;;</span><br><span class="line">ç«‹å³è¢«è°ƒç”¨çš„å‡½æ•°åº”å½“åœ¨å‡½æ•°è°ƒç”¨çš„å¤–å±‚ç”¨åœ†æ‹¬å·åŒ…è£¹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> value = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">&#x27;Hi&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°è°ƒç”¨å¤–å±‚æ²¡æœ‰ç”¨åœ†æ‹¬å·åŒ…è£¹</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">&#x27;Hi&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;();</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåœ†æ‹¬å·çš„ä½ç½®ä¸å½“</span></span><br><span class="line"><span class="keyword">var</span> value = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">&#x27;Hi&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="10-å‘½å"><a href="#10-å‘½å" class="headerlink" title="10.å‘½å"></a>10.å‘½å</h4><p>å˜é‡å’Œå‡½æ•°åœ¨å‘½åæ—¶åº”å½“å°å¿ƒã€‚å‘½ååº”ä»…é™ä¸æ•°å­—å­—æ¯å­—ç¬¦ï¼ŒæŸäº›æƒ…å†µä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚æœ€å¥½ä¸è¦åœ¨ä»»ä½•å‘½åä¸­ä½¿ç”¨ç¾å…ƒï¼ˆ$ï¼‰æˆ–åæ–œæ ï¼ˆ\ï¼‰ã€‚</p><p>å˜é‡å‘½ååº”å½“é‡‡ç”¨é©¼å³°å‘½åæ ¼å¼ï¼Œé¦–å­—æ¯å°å†™ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ã€‚å˜é‡åçš„ç¬¬ä¸€ä¸ªå•è¯åº”æ˜¯ä¸€ä¸ªåè¯ï¼ˆè€ŒéåŠ¨è¯ï¼‰ï¼Œä»¥é¿å…åŒå‡½æ•°æ··æ·†ã€‚ä¸è¦åœ¨å˜é‡å‘½åä¸­ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> accountNumber = <span class="string">&#x27;8401-1&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå¤§äº›å­—æ¯å¼€å¤´</span></span><br><span class="line"><span class="keyword">var</span> AccountNumber = <span class="string">&#x27;8401-1&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="keyword">var</span> account_number = <span class="string">&#x27;8401-1&#x27;</span>;</span><br><span class="line">å‡½æ•°å‘½åä¹Ÿåº”å½“é‡‡ç”¨é©¼å³°å‘½åæ ¼å¼ã€‚å‡½æ•°åçš„ç¬¬ä¸€ä¸ªå•è¯åº”å½“æ˜¯åŠ¨è¯ï¼ˆè€Œéåè¯ï¼‰æ¥é¿å…åŒå˜é‡æ··æ·†ã€‚å‡½æ•°åä¸­æœ€å¥½ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå¤§äº›å­—æ¯å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DoSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåè¯å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">car</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">do_something</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line">æ„é€ å‡½æ•°â€”â€”é€šè¿‡<span class="keyword">new</span>è¿ç®—ç¬¦åˆ›å»ºæ–°å¯¹è±¡çš„å‡½æ•°â€”â€”ä¹Ÿåº”å½“ä»¥é©¼å³°æ ¼å¼å‘½åå¹¶ä¸”é¦–å­—æ¯å¤§å†™ã€‚æ„é€ å‡½æ•°åç§°åº”ä¸€éåŠ¨è¯å¼€å¤´ï¼Œå› ä¸º<span class="keyword">new</span>ä»£è¡¨è¿™åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyObject</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå°å­—æ¯å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myObject</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">My_Object</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåŠ¨è¯å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">My_Object</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å¸¸é‡ï¼ˆå€¼ä¸ä¼šè¢«æ”¹å˜çš„å˜é‡ï¼‰çš„å‘½ååº”å½“æ˜¯æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œä¸åŒå•è¯ä¹‹é—´ç”¨å•ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚"><a href="#å¸¸é‡ï¼ˆå€¼ä¸ä¼šè¢«æ”¹å˜çš„å˜é‡ï¼‰çš„å‘½ååº”å½“æ˜¯æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œä¸åŒå•è¯ä¹‹é—´ç”¨å•ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚" class="headerlink" title="å¸¸é‡ï¼ˆå€¼ä¸ä¼šè¢«æ”¹å˜çš„å˜é‡ï¼‰çš„å‘½ååº”å½“æ˜¯æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œä¸åŒå•è¯ä¹‹é—´ç”¨å•ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚"></a>å¸¸é‡ï¼ˆå€¼ä¸ä¼šè¢«æ”¹å˜çš„å˜é‡ï¼‰çš„å‘½ååº”å½“æ˜¯æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œä¸åŒå•è¯ä¹‹é—´ç”¨å•ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> TOTAL_COUNT = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šé©¼å³°å½¢å¼</span></span><br><span class="line"><span class="keyword">var</span> totalCount = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ··åˆå½¢å¼</span></span><br><span class="line"><span class="keyword">var</span> total_COUNT= <span class="number">10</span>;</span><br><span class="line">å¯¹è±¡çš„å±æ€§åŒå˜é‡çš„åŒå‘½åè§„åˆ™ç›¸åŒã€‚å¯¹è±¡çš„æ–¹æ³•åŒå‡½æ•°çš„å‘½åè§„åˆ™ç›¸åŒã€‚å¦‚æœå±æ€§æˆ–æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œåº”å½“åœ¨ä¹‹å‰åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    _count: <span class="number">10</span>,</span><br><span class="line">    _getCount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>._count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="11-ä¸¥æ ¼æ¨¡å¼"><a href="#11-ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="11.ä¸¥æ ¼æ¨¡å¼"></a>11.ä¸¥æ ¼æ¨¡å¼</h4><p>ä¸¥æ ¼æ¨¡å¼åº”å½“ä»…é™åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œåƒä¸‡ä¸è¦åœ¨å…¨å±€ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šå…¨å±€ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    &#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœŸæœ›åœ¨å¤šä¸ªå‡½æ•°ä¸­ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼è€Œä¸éœ€è¦å¤šæ¬¡å£°æ˜â€œuse<br>strictâ€ï¼Œå¯ä»¥ä½¿ç”¨ç«‹åˆ»è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    &#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomethingElse</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><h4 id="12-èµ‹å€¼"><a href="#12-èµ‹å€¼" class="headerlink" title="12.èµ‹å€¼"></a>12.èµ‹å€¼</h4><p>å½“ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œå¦‚æœå³ä¾§æ˜¯å«æœ‰æ¯”è¾ƒè¯­å¥çš„è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨æ‹¬å·åŒ…è£¹ã€‚</p><p>// å¥½çš„å†™æ³•<br>var flag = (i &lt; count);<br>// ä¸å¥½çš„å†™æ³•ï¼šé—æ¼æ‹¬å·<br>var flag = i &lt; count;</p><h4 id="13-ç­‰å·è¿ç®—ç¬¦"><a href="#13-ç­‰å·è¿ç®—ç¬¦" class="headerlink" title="13.ç­‰å·è¿ç®—ç¬¦"></a>13.ç­‰å·è¿ç®—ç¬¦</h4><p>ä½¿ç”¨===ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰å’Œï¼==ï¼ˆä¸¥æ ¼ä¸ç›¸ç­‰ï¼‰ä»£æ›¿==ï¼ˆç›¸ç­‰ï¼‰å’Œï¼=ï¼ˆä¸ç­‰ï¼‰æ¥é¿å…å¼±ç±»å‹è½¬æ¢é”™è¯¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> same =(a === b);</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨==</span></span><br><span class="line"><span class="keyword">var</span> same =(a == b);</span><br></pre></td></tr></table></figure><h4 id="14-ä¸‰å…ƒæ“ä½œç¬¦"><a href="#14-ä¸‰å…ƒæ“ä½œç¬¦" class="headerlink" title="14.ä¸‰å…ƒæ“ä½œç¬¦"></a>14.ä¸‰å…ƒæ“ä½œç¬¦</h4><p>ä¸‰å…ƒè¿ç®—åº”å½“ä»…ä»…ç”¨åœ¨æ¡ä»¶èµ‹å€¼è¯­å¥ä¸­ï¼Œè€Œä¸è¦ä½œä¸ºifè¯­å¥çš„æ›¿ä»£å“ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> value = condition ? value1 : value2;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> condition ? doSomething() : doSomethingElse();</span><br></pre></td></tr></table></figure><p>15.è¯­å¥</p><p>15.1 ç®€å•è¯­å¥</p><p>æ¯ä¸€è¡Œæœ€å¤šåªåŒ…å«ä¸€æ¡è¯­å¥ã€‚æ‰€æœ‰ç®€å•è¯­å¥éƒ½åº”è¯¥ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“æŸã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">count++;</span><br><span class="line">a = b;</span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line">count++; a = b;</span><br></pre></td></tr></table></figure><h5 id="15-2-è¿”å›è¯­å¥"><a href="#15-2-è¿”å›è¯­å¥" class="headerlink" title="15.2 è¿”å›è¯­å¥"></a>15.2 è¿”å›è¯­å¥</h5><p>è¿”å›è¯­å¥å½“è¿”å›ä¸€ä¸ªå€¼çš„æ—¶å€™ä¸åº”è¯¥ä½¿ç”¨åœ†æ‹¬å·åŒ…è£¹ï¼Œé™¤éåœ¨æŸäº›æƒ…å†µä¸‹è¿™ä¹ˆåšå¯ä»¥è®©è¿”å›å€¼æ›´å®¹æ˜“ç†è§£ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">return</span> collection.size();</span><br><span class="line"><span class="keyword">return</span> (size &gt; <span class="number">0</span> ? size : defaultSize);</span><br></pre></td></tr></table></figure><h5 id="15-3-å¤åˆè¯­å¥"><a href="#15-3-å¤åˆè¯­å¥" class="headerlink" title="15.3 å¤åˆè¯­å¥"></a>15.3 å¤åˆè¯­å¥</h5><p>å¤åˆè¯­å¥æ˜¯å¤§æ‹¬å·æ‹¬èµ·æ¥çš„è¯­å¥åˆ—è¡¨ã€‚</p><p>æ‹¬èµ·æ¥çš„è¯­å¥åº”å½“è¾ƒå¤åˆè¯­å¥å¤šç¼©è¿›ä¸€ä¸ªå±‚çº§ã€‚<br>å¼€å§‹çš„å¤§æ‹¬å·åº”å½“åœ¨å¤åˆè¯­å¥æ‰€åœ¨è¡Œçš„æœ«å°¾ï¼›ç»“æŸçš„å¤§æ‹¬å·åº”å½“ç‹¬å ä¸€è¡Œä¸”åŒå¤åˆè¯­å¥çš„å¼€å§‹ä¿æŒåŒæ ·çš„ç¼©è¿›ã€‚<br>å½“è¯­å¥æ˜¯æ§åˆ¶ç»“æ„çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œè¯¸å¦‚ifæˆ–è€…forè¯­å¥ï¼Œæ‰€æœ‰è¯­å¥éƒ½éœ€è¦ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¹ŸåŒ…æ‹¬å•ä¸ªå•è¯ã€‚zhè¿™ä¸ªçº¦å®šä½¿å¾—æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°æ·»åŠ è¯­å¥è€Œä¸ç”¨æ‹…å¿ƒå¿˜è®°åŠ æ‹¬å·è€Œå¼•èµ·bugã€‚<br>åƒifä¸€æ ·çš„è¯­å¥å¼€å§‹çš„å…³é”®å­—ï¼Œå…¶ååº”è¯¥ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ï¼Œèµ·å§‹å¤§æ‹¬å·åº”å½“åœ¨ç©ºæ ¼ä¹‹åã€‚<br>15.4 if è¯­å¥</p><p>ifè¯­å¥åº”å½“æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»ä¸å…è®¸åœ¨ifè¯­å¥ä¸­çœç•¥èŠ±æ‹¬å·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šä¸ä¸”å½“çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šé—æ¼èŠ±æ‹¬å·</span></span><br><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    doSomething();</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123; doSomething(); &#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œä¸”æ²¡æœ‰èŠ±æ‹¬å·</span></span><br><span class="line"><span class="keyword">if</span> (condition) doSomething();</span><br></pre></td></tr></table></figure><p>15.5 for è¯­å¥</p><p>forç±»å‹çš„è¯­å¥åº”æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (initialization; condition; update) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (variable <span class="keyword">in</span> object) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>è¯­å¥çš„åˆå§‹åŒ–ä¸åº”å½“æœ‰å˜é‡å£°æ˜ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> i,</span><br><span class="line">    len;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>, len = <span class="number">10</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåˆå§‹åŒ–æ—¶å€™å£°æ˜å˜é‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="number">10</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å†™æ³•ï¼šåˆå§‹åŒ–çš„æ—¶å€™å£°æ˜å˜é‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> object) &#123;</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨for-inè¯­å¥æ—¶ï¼Œè®°å¾—ä½¿ç”¨hasOwnProperty()è¿›è¡ŒåŒé‡æ£€æŸ¥æ¥è¿‡æ»¤å‡ºå¯¹è±¡çš„æˆå‘˜ã€‚</p><p>15.6 while è¯­å¥</p><p>whileç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>15.7 do è¯­å¥</p><p>doç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">while</span> (condition);</span><br></pre></td></tr></table></figure><p>15.8 switch è¯­å¥</p><p>switchç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (expression) &#123;</span><br><span class="line">    <span class="keyword">case</span> expression:</span><br><span class="line">        statments</span><br><span class="line">    defaul:</span><br><span class="line">        statments</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>switchä¸‹çš„æ¯ä¸€ä¸ªcaseéƒ½åº”å½“ä¿æŒä¸€ä¸ªç¼©è¿›ã€‚é™¤ç¬¬ä¸€ä¸ªä¹‹å¤–åŒ…æ‹¬defaultåœ¨å†…çš„æ¯ä¸€ä¸ªcaseéƒ½åº”å½“åœ¨ä¹‹å‰ä¿æŒä¸€ä¸ªç©ºè¡Œã€‚æ¯ä¸€ä¸ªè¯­å¥ï¼ˆé™¤äº†defaultï¼‰éƒ½åº”å½“ä»¥breakã€returnã€throwç»“å°¾ï¼Œæˆ–è€…ç”¨ä¸€è¡Œæ³¨é‡Šè¡¨ç¤ºè·³è¿‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">switch</span> (value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="comment">/* falls through */</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        doSomething();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    defaul:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;This should not happen&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªswitchè¯­å¥ä¸åŒ…å«defaultæƒ…å†µï¼Œåº”åº”ç”¨ä¸€è¡Œæ³¨é‡Šä»£æ›¿ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">switch</span> (value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="comment">/* falls through */</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        doSomething();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰default</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>15.9 ty è¯­å¥</p><p>tryç±»è¯­å¥åº”å½“æ ¼å¼å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">catch</span> (variable) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">catch</span> (variable) &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="16-ç•™ç™½"><a href="#16-ç•™ç™½" class="headerlink" title="16.ç•™ç™½"></a>16.ç•™ç™½</h4><p>åœ¨é€»è¾‘ç›¸å…³çš„ä»£ç ä¹‹é—´æ·»åŠ ç©ºè¡Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p><p>ä¸¤è¡Œç©ºè¡Œä»…é™åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚</p><p>åœ¨ä¸åŒçš„æºç æ–‡ä»¶ä¹‹é—´ã€‚<br>åœ¨ç±»å’Œæ¥å£å®šä¹‰ä¹‹é—´ã€‚<br>å•è¡Œç©ºè¡Œä»…é™åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚</p><p>æ–¹æ³•ä¹‹é—´ã€‚<br>æ–¹æ³•ä¸­å±€éƒ¨å˜é‡å’Œç¬¬ä¸€è¡Œè¯­å¥ä¹‹é—´ã€‚<br>å¤šè¡Œæˆ–è€…å•è¡Œæ³¨é‡Šä¹‹å‰ã€‚<br>æ–¹æ³•ä¸­é€»è¾‘ä»£ç å—ä¹‹é—´ä»¥æå‡ä»£ç çš„å¯è¯»æ€§ã€‚<br>ç©ºæ ¼åº”åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚</p><p>å…³é”®è¯åè·Ÿæ‹¬å·çš„æƒ…å†µåº”å½“ç”¨ç©ºæ ¼éš”å¼€ã€‚<br>å‚æ•°åˆ—è¡¨ä¸­é€—å·ä¹‹ååº”å½“ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚<br>æ‰€æœ‰çš„é™¤äº†ç‚¹ï¼ˆ.ï¼‰ä¹‹å¤–çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œå…¶æ“ä½œæ•°éƒ½åº”å½“ç”¨ç©ºæ ¼éš”å¼€ã€‚å•ç›®è¿ç®—ç¬¦çš„æ“ä½œæ•°ä¹‹é—´ä¸åº”è¯¥ç”¨<br>ç©ºç™½éš”å¼€ï¼Œè¯¸å¦‚ä¸€å…ƒå‡å·ï¼Œé€’å¢ï¼ˆ++ï¼‰ï¼Œé€’å‡ï¼ˆâ€“ï¼‰ã€‚</p><p>forè¯­å¥ä¸­çš„è¡¨è¾¾æ–¹å¼ä¹‹é—´åº”å½“ç”¨ç©ºæ ¼å·éš”å¼€ã€‚</p><h4 id="17-éœ€è¦é¿å…çš„"><a href="#17-éœ€è¦é¿å…çš„" class="headerlink" title="17.éœ€è¦é¿å…çš„"></a>17.éœ€è¦é¿å…çš„</h4><p>åˆ‡å‹¿ä½¿ç”¨åƒStringä¸€ç±»çš„åŸå§‹åŒ…è£…ç±»å‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚<br>é¿å…ä½¿ç”¨evalï¼ˆï¼‰ã€‚<br>é¿å…ä½¿ç”¨withè¯­å¥ã€‚è¯¥è¯­å¥åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ä¸å¤å­˜åœ¨ï¼Œå¯èƒ½åœ¨æœªæ¥çš„ECMAScriptæ ‡å‡†ä¸­ä¹Ÿå°†å»é™¤ã€‚<br>æ•°å­—åº”å½“ä½¿ç”¨åè¿›åˆ¶æ•´æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ•´æ•°ï¼Œåå…­è¿›åˆ¶æ•´æ•°ï¼Œæˆ–è€…åè¿›åˆ¶æµ®ç‚¹å°æ•°ï¼Œå°æ•°ç‚¹å‰ååº”å½“è‡³å°‘ä¿ç•™ä¸€ä½æ•°å­—ã€‚é¿å…ä½¿ç”¨å…«è¿›åˆ¶ç›´æ¥é‡ã€‚</p><h4 id="18-ç¼–ç¨‹å®è·µ"><a href="#18-ç¼–ç¨‹å®è·µ" class="headerlink" title="18.ç¼–ç¨‹å®è·µ"></a>18.ç¼–ç¨‹å®è·µ</h4><h5 id="ä»€ä¹ˆæ˜¯æ¾è€¦åˆ"><a href="#ä»€ä¹ˆæ˜¯æ¾è€¦åˆ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¾è€¦åˆ"></a>ä»€ä¹ˆæ˜¯æ¾è€¦åˆ</h5><p>å¾ˆå¤šè®¾è®¡æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³ç´§è€¦åˆçš„é—®é¢˜ï¼Œå¦‚æœ2ä¸ªç»„ä»¶è€¦åˆå¤ªç´§ï¼Œåˆ™è¯´æ˜ä¸€ä¸ªç»„ä»¶å’Œå¦ä¸€ä¸ªç»„ä»¶çš„ç›´æ¥ç›¸å…³ï¼Œå¦‚æœä¿®æ”¹ä¸€ä¸ªç»„ä»¶çš„é€»è¾‘é‚£ä¹ˆå¦ä¸€ä¸ªç»„ä»¶é€»è¾‘ä¹Ÿéœ€ä¿®æ”¹ã€‚<br>æ¯”å¦‚ä¸€ä¸ªåä¸ºerrorçš„cssç±»åï¼Œæœ‰ä¸€å¤©ä½ è§‰å¾—errorä¸åˆé€‚ï¼Œæƒ³æ¢warningé‚£ä¹ˆä¸ä»…è¦ä¿®æ”¹cssè¿˜è¦ä¿®æ”¹æ‰€æœ‰é¡µé¢classsNameçš„HTMLï¼Œã€‚<br>å½“ä½ èƒ½å¤Ÿåšåˆ°ä¿®æ”¹ä¸ªä¸€ä¸ªç»„ä»¶ä¸éœ€è¦æ›´æ”¹å…¶ä»–ç»„ä»¶æ—¶å€™ï¼Œåšåˆ°äº†æ¾è€¦åˆã€‚</p><h5 id="å°†javascriptä»cssä¸­æŠ½ç¦»"><a href="#å°†javascriptä»cssä¸­æŠ½ç¦»" class="headerlink" title="å°†javascriptä»cssä¸­æŠ½ç¦»"></a>å°†javascriptä»cssä¸­æŠ½ç¦»</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸å¥½çš„å†™æ³•</span></span><br><span class="line">.box&#123;</span><br><span class="line">    width:expression&#123;<span class="built_in">document</span>.body.offsetWidth+<span class="string">&quot;px&quot;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å°†cssä»javascriptä¸­æŠ½ç¦»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸å¥½çš„å†™æ³•</span></span><br><span class="line">element.style.color=<span class="string">&quot;red&quot;</span></span><br><span class="line"></span><br><span class="line">element.style.left=<span class="string">&quot;10px&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¥½çš„å†™æ³•</span></span><br><span class="line">cssä¸­åŠ å…¥</span><br><span class="line">.reveal&#123;</span><br><span class="line">    color:red;</span><br><span class="line">    left:10px;</span><br><span class="line">    top:110px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">element.className += <span class="string">&quot; reveal&quot;</span></span><br><span class="line"></span><br><span class="line">element.classList.add(<span class="string">&quot;reveal&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å°†javascriptä»htmlä¸­æŠ½ç¦»"><a href="#å°†javascriptä»htmlä¸­æŠ½ç¦»" class="headerlink" title="å°†javascriptä»htmlä¸­æŠ½ç¦»"></a>å°†javascriptä»htmlä¸­æŠ½ç¦»</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸å¥½çš„å†™æ³•</span></span><br><span class="line">&lt;button onclick=<span class="string">&quot;doSomething()&quot;</span> id=<span class="string">&quot;action-btn&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¥½çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//........</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> btn = ....</span><br><span class="line">btn.addEventListenter(<span class="string">&quot;click&quot;</span>,doSomething,<span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="19-äº‹ä»¶å¤„ç†"><a href="#19-äº‹ä»¶å¤„ç†" class="headerlink" title="19.äº‹ä»¶å¤„ç†"></a>19.äº‹ä»¶å¤„ç†</h4><h4 id="20-é¿å…ç©ºæ¯”è¾ƒ"><a href="#20-é¿å…ç©ºæ¯”è¾ƒ" class="headerlink" title="20.é¿å…ç©ºæ¯”è¾ƒ"></a>20.é¿å…ç©ºæ¯”è¾ƒ</h4><h3 id="æœ€åä»£ç ä¼˜åŒ–çš„å»ºè®®"><a href="#æœ€åä»£ç ä¼˜åŒ–çš„å»ºè®®" class="headerlink" title="æœ€åä»£ç ä¼˜åŒ–çš„å»ºè®®"></a><strong>æœ€åä»£ç ä¼˜åŒ–çš„å»ºè®®</strong></h3><ul><li style="list-style: none"><input type="checkbox" checked></input> SOLIDåŸåˆ™å°½é‡ä¿è¯SOLIDåŸåˆ™çš„å‰æä¸‹ï¼Œç”¨æœ€ç®€æ˜“çš„ä»£ç æ»¡è¶³éœ€æ±‚ï¼ˆå³ä¸è¦è€ƒè™‘å¤ªå¤šæœªæ¥çš„å¯èƒ½æ€§ï¼‰</li><li style="list-style: none"><input type="checkbox" checked></input> æ–°éœ€æ±‚éœ€è¦ä¿®æ”¹ç°å­˜ä»£ç çš„æ—¶å€™ï¼Œå°½å¯èƒ½ä¿è¯SOLIDåŸåˆ™éœ€æ±‚ä¸è¶³ä»¥åšå‡ºç†æƒ³è®¾è®¡çš„æ—¶å€™ï¼Œ</li><li style="list-style: none"><input type="checkbox" checked></input> å…è®¸å­˜åœ¨è¿åSOLIDçš„ä»£ç å°½é‡ä¿è¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ä»£ç å¯è¯»æ€§é«˜äºä¸€åˆ‡ï¼Œ</li><li style="list-style: none"><input type="checkbox" checked></input> å°½é‡å†™è‡ªæ³¨é‡Šä»£ç ï¼ˆå³ä¸éœ€è¦é¢å¤–æ³¨é‡Šï¼Œé€šè¿‡å˜é‡/æ–¹æ³•å‘½åå°±èƒ½è¯»æ‡‚ï¼‰</li><li style="list-style: none"><input type="checkbox" checked></input> ReSharper</li></ul><p>è½¬è½½è‡ª<a class="link"   href="http://note.youdao.com/" >http://forsigner.com/2013/09/01/javascript-style-guide/<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ªNewæ“ä½œç¬¦</title>
      <link href="2017/12/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AANew%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
      <url>2017/12/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AANew%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="å®ç°ä¸€ä¸ªnew"><a href="#å®ç°ä¸€ä¸ªnew" class="headerlink" title="å®ç°ä¸€ä¸ªnew"></a>å®ç°ä¸€ä¸ªnew</h1><a id="more"></a><ol><li>å®ƒåˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</li><li>å®ƒä¼šè¢«æ‰§è¡Œ [[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯ <strong>proto</strong>ï¼‰é“¾æ¥ã€‚</li><li>å®ƒä½¿ thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ã€‚</li><li>é€šè¿‡ newåˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢« [[Prototype]]é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„ prototypeå¯¹è±¡ä¸Šã€‚</li><li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹ Object(åŒ…å« Functoin,Array,Date,RegExg,Error)ï¼Œé‚£ä¹ˆ newè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨å°†è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ã€‚</li></ol><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newF</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">        <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±æ˜¯æˆ‘ä»¬å°†ä¼šä¼ å…¥çš„æ„é€ å‡½æ•°ï¼Œæ¯”å¦‚åœ¨è°ƒç”¨new(P)çš„æ—¶å€™ï¼ŒConstructorå°±æ˜¯Pæœ¬èº«</span></span><br><span class="line">        <span class="comment">// argumentsä¼šè¢«shiftå»é™¤ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå‰©ä½™çš„å°±æ˜¯æ„é€ å™¨Pçš„å‚æ•°</span></span><br><span class="line">        <span class="keyword">let</span> Constructor = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°†objçš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œæ­¤æ—¶objå¯ä»¥è®¿é—®æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</span></span><br><span class="line">        obj.__proto__ = Constructor.prototype;</span><br><span class="line">        <span class="comment">// æ”¹å˜æ„é€ å‡½æ•°çš„thisçš„æŒ‡å‘ï¼Œä½¿å…¶æŒ‡å‘objï¼Œ æ­¤æ—¶objä¹Ÿå¯ä»¥è®¿é—®æ„é€ å‡½æ•°ä¸­çš„å±æ€§äº†</span></span><br><span class="line">        <span class="keyword">let</span> result = Constructor.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">        <span class="comment">// ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡ è¿”å›çš„å€¼æ˜¯ä»€ä¹ˆå°±returnä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> result === <span class="string">&#x27;object&#x27;</span> ? result : obj</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">name,a,b</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">        <span class="built_in">console</span>.log(a+b)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(newF(A,<span class="string">&#x27;å°ç±³&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190424003635.png"                      alt=""                ></p><h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><p>å¦‚ä½•ç»‘å®šthis, callã€applyä½¿ç”¨<br>æ¯”å¦‚è¿™å¥ï¼š <code>[].shift.call(arguments)</code>çš„æ„æ€æ˜¯ï¼š<br>[1,2,3,4]  ====&gt; shift ==&gt; [2,3,4] å…¶ä¸­ Constructorå°±æ˜¯1,</p><p>argumentsä½¿ç”¨<br>è€Œåˆ°äº†è¿™å¥ <code>Constructor.apply(obj, arguments)</code> ä¸­ argumentså°±æ˜¯[2,3,4]ï¼Œæ„æ€æ˜¯objçš„thisæŒ‡å‘å…¨éƒ¨æŒ‡å‘returnæ–°å®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠå‚æ•°ä¼ å…¥</p><p>åŸå‹é“¾åŸºç¡€</p><h1 id="æ‰‹å†™ç³»åˆ—"><a href="#æ‰‹å†™ç³»åˆ—" class="headerlink" title="æ‰‹å†™ç³»åˆ—"></a>æ‰‹å†™ç³»åˆ—</h1><ol><li><del><strong>å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</strong></del></li><li>å®ç°ä¸€ä¸ªJSON.stringify</li><li>å®ç°ä¸€ä¸ªJSON.parse</li><li>å®ç°ä¸€ä¸ªcallæˆ– apply</li><li><del>å®ç°ä¸€ä¸ªFunction.bind</del></li><li>å®ç°ä¸€ä¸ªç»§æ‰¿</li><li>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</li><li>æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</li><li>æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</li><li>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</li><li>å®ç°ä¸€ä¸ªinstanceOf</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç½®é¡¶ã€‘Webå‰ç«¯å¼€å‘è§„èŒƒæ‰‹å†Œ</title>
      <link href="2017/12/12/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%89%8B%E5%86%8C/"/>
      <url>2017/12/12/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºæé«˜å›¢é˜Ÿåä½œæ•ˆç‡, ä¾¿äºåå°äººå‘˜æ·»åŠ åŠŸèƒ½åŠå‰ç«¯åæœŸä¼˜åŒ–ç»´æŠ¤, è¾“å‡ºé«˜è´¨é‡çš„æ–‡æ¡£, ç‰¹åˆ¶è®¢æ­¤æ–‡æ¡£. æœ¬è§„èŒƒæ–‡æ¡£ä¸€ç»ç¡®è®¤, å‰ç«¯å¼€å‘äººå‘˜å¿…é¡»æŒ‰æœ¬æ–‡æ¡£è§„èŒƒè¿›è¡Œå‰å°é¡µé¢å¼€å‘. æœ¬æ–‡æ¡£å¦‚æœ‰ä¸å¯¹æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹è¯·åŠæ—¶æå‡º, ç»è®¨è®ºå†³å®šåå¯ä»¥æ›´æ”¹æ­¤æ–‡æ¡£.<br><a id="more"></a></p><p>ä¸€ã€è§„èŒƒç›®çš„<br>1.1     æ¦‚è¿°</p><p>ä¸ºæé«˜å›¢é˜Ÿåä½œæ•ˆç‡, ä¾¿äºåå°äººå‘˜æ·»åŠ åŠŸèƒ½åŠå‰ç«¯åæœŸä¼˜åŒ–ç»´æŠ¤, è¾“å‡ºé«˜è´¨é‡çš„æ–‡æ¡£, ç‰¹åˆ¶è®¢æ­¤æ–‡æ¡£. æœ¬è§„èŒƒæ–‡æ¡£ä¸€ç»ç¡®è®¤, å‰ç«¯å¼€å‘äººå‘˜å¿…é¡»æŒ‰æœ¬æ–‡æ¡£è§„èŒƒè¿›è¡Œå‰å°é¡µé¢å¼€å‘. æœ¬æ–‡æ¡£å¦‚æœ‰ä¸å¯¹æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹è¯·åŠæ—¶æå‡º, ç»è®¨è®ºå†³å®šåå¯ä»¥æ›´æ”¹æ­¤æ–‡æ¡£.</p><p>äºŒã€æ–‡ä»¶è§„èŒƒ</p><p>2.1  æ–‡ä»¶å‘½åè§„åˆ™</p><blockquote><p>æ–‡ä»¶åç§°ç»Ÿä¸€ç”¨å°å†™çš„è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿çš„ç»„åˆï¼Œå…¶ä¸­ä¸å¾—åŒ…å«æ±‰å­—ã€ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦ï¼›å‘½ååŸåˆ™çš„æŒ‡å¯¼æ€æƒ³ä¸€æ˜¯ä½¿å¾—ä½ è‡ªå·±å’Œå·¥ä½œç»„çš„æ¯ä¸€ä¸ªæˆå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„ç†è§£æ¯ä¸€ä¸ªæ–‡ä»¶çš„æ„ä¹‰ï¼ŒäºŒæ˜¯å½“æˆ‘ä»¬åœ¨æ–‡ä»¶å¤¹ä¸­ä½¿ç”¨â€œæŒ‰åç§°æ’ä¾‹â€çš„å‘½ä»¤æ—¶ï¼ŒåŒä¸€ç§å¤§ç±»çš„æ–‡ä»¶èƒ½å¤Ÿæ’åˆ—åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿æˆ‘ä»¬æŸ¥æ‰¾ã€ä¿®æ”¹ã€æ›¿æ¢ã€è®¡ç®—è´Ÿè½½é‡ç­‰ç­‰æ“ä½œã€‚</p></blockquote><p>a.  HTMLçš„å‘½ååŸåˆ™<br>å¼•æ–‡ä»¶ç»Ÿä¸€ä½¿ç”¨index.htm  index.html  index.aspæ–‡ä»¶åï¼ˆå°å†™ï¼‰<br>å„å­é¡µå‘½åçš„åŸåˆ™é¦–å…ˆåº”è¯¥ä»¥æ ç›®åçš„è‹±è¯­ç¿»è¯‘å–å•ä¸€å•è¯ä¸ºåç§°ã€‚ä¾‹å¦‚ï¼š<br>å…³äºæˆ‘ä»¬ \ aboutus<br>ä¿¡æ¯åé¦ˆ \ feedback<br>äº§ å“ \ product<br>å¦‚æœæ ç›®åç§°å¤šè€Œå¤æ‚å¹¶ä¸å¥½ä»¥è‹±æ–‡å•è¯å‘½åï¼Œåˆ™ç»Ÿä¸€ä½¿ç”¨è¯¥æ ç›®åç§°æ‹¼éŸ³æˆ–æ‹¼éŸ³çš„é¦–å­—æ¯è¡¨ç¤ºï¼›<br>æ¯ä¸€ä¸ªç›®å½•ä¸­åº”è¯¥åŒ…å«ä¸€ä¸ªç¼ºçœçš„html æ–‡ä»¶ï¼Œæ–‡ä»¶åç»Ÿä¸€ç”¨index.htm  index.html  index.aspï¼›</p><p>b.  å›¾ç‰‡çš„å‘½ååŸåˆ™<br>å›¾ç‰‡çš„åç§°åˆ†ä¸ºå¤´å°¾ä¸¤éƒ¨åˆ†ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€ï¼Œå¤´éƒ¨åˆ†è¡¨ç¤ºæ­¤å›¾ç‰‡çš„å¤§ç±»æ€§è´¨<br>ä¾‹å¦‚ï¼šå¹¿å‘Šã€æ ‡å¿—ã€èœå•ã€æŒ‰é’®ç­‰ç­‰ã€‚<br>æ”¾ç½®åœ¨é¡µé¢é¡¶éƒ¨çš„å¹¿å‘Šã€è£…é¥°å›¾æ¡ˆç­‰é•¿æ–¹å½¢çš„å›¾ç‰‡å–åï¼š banner<br>æ ‡å¿—æ€§çš„å›¾ç‰‡å–åä¸ºï¼š logo<br>åœ¨é¡µé¢ä¸Šä½ç½®ä¸å›ºå®šå¹¶ä¸”å¸¦æœ‰é“¾æ¥çš„å°å›¾ç‰‡æˆ‘ä»¬å–åä¸º button<br>åœ¨é¡µé¢ä¸ŠæŸä¸€ä¸ªä½ç½®è¿ç»­å‡ºç°ï¼Œæ€§è´¨ç›¸åŒçš„é“¾æ¥æ ç›®çš„å›¾ç‰‡æˆ‘ä»¬å–åï¼š menu<br>è£…é¥°ç”¨çš„ç…§ç‰‡æˆ‘ä»¬å–åï¼š pic<br>ä¸å¸¦é“¾æ¥è¡¨ç¤ºæ ‡é¢˜çš„å›¾ç‰‡æˆ‘ä»¬å–åï¼š title<br>èŒƒä¾‹ï¼šbanner_sohu.gif  banner_sina.gif  menu_aboutus.gif  menu_job.gif  title_news.gif  logo_police.gif   logo_national.gif   pic_people.jpg<br>é¼ æ ‡æ„Ÿåº”æ•ˆæœå›¾ç‰‡å‘½åè§„èŒƒä¸ºâ€å›¾ç‰‡å+_+on/offâ€ã€‚<br>ä¾‹å¦‚ï¼šmenu1_on.gif  menu1_off.gif</p><p>c.  javascriptçš„å‘½ååŸåˆ™<br>ä¾‹å¦‚ï¼šå¹¿å‘Šæ¡çš„javascriptæ–‡ä»¶åä¸º ad.js  å¼¹å‡ºçª—å£çš„javascriptæ–‡ä»¶åä¸º pop.js</p><p>d.  åŠ¨æ€è¯­è¨€æ–‡ä»¶å‘½ååŸåˆ™<br>ä»¥æ€§è´¨<em>æè¿°ï¼Œæè¿°å¯ä»¥æœ‰å¤šä¸ªå•è¯ï¼Œç”¨â€œ</em>â€éš”å¼€ï¼Œæ€§è´¨ä¸€èˆ¬æ˜¯è¯¥é¡µé¢å¾—æ¦‚è¦ã€‚<br>èŒƒä¾‹ï¼šregister_form.asp   register_post.asp   topic_lock.asp</p><p>2.2  æ–‡ä»¶å­˜æ”¾ä½ç½®è§„èŒƒ</p><p>_Root<br>    cn    å­˜æ”¾ä¸­æ–‡HTMLæ–‡ä»¶<br>    en    å­˜æ”¾è‹±æ–‡HTMLæ–‡ä»¶<br>    flash    å­˜æ”¾Flashæ–‡ä»¶<br>    images    å­˜æ”¾å›¾ç‰‡æ–‡ä»¶<br>    imagestudio    å­˜æ”¾PSDæºæ–‡ä»¶<br>    flashstudio    å­˜æ”¾flashæºæ–‡ä»¶<br>    inc    å­˜æ”¾includeæ–‡ä»¶<br>    library    å­˜æ”¾DWåº“æ–‡ä»¶<br>    media    å­˜æ”¾å¤šåª’ä½“æ–‡ä»¶<br>    project    å­˜æ”¾å·¥ç¨‹é¡¹ç›®èµ„æ–™<br>    temp    å­˜æ”¾å®¢æˆ·åŸå§‹èµ„æ–™<br>    js    å­˜æ”¾JavaScriptè„šæœ¬<br>    css    å­˜æ”¾CSSæ–‡ä»¶</p><p>2.3  CSS ä¹¦å†™è§„èŒƒ</p><p>åŸºæœ¬åŸåˆ™ï¼š</p><p>CSSæ ·å¼å¯ç»†åˆ†ä¸º3ç±»ï¼šè‡ªå®šä¹‰æ ·å¼ã€é‡æ–°å®šä¹‰HTMLæ ·å¼ã€é“¾æ¥çŠ¶æ€æ ·å¼ã€‚</p><ol><li>æ ·å¼ä¸ºè®¾è®¡å¸ˆè‡ªå®šä¹‰çš„æ–° CSS æ ·å¼ï¼Œå½±å“è¢«ä½¿ç”¨æœ¬æ ·å¼çš„åŒºåŸŸï¼Œç”¨äºå®Œæˆç½‘é¡µä¸­å±€éƒ¨çš„æ ·å¼è®¾å®šã€‚æ ·å¼å â€œ.â€+â€œç›¸åº”æ ·å¼æ•ˆæœæè¿°çš„å•è¯æˆ–ç¼©å†™â€ä¾‹ï¼šâ€œ .shadow â€<br>æ–‡å­—æ ·å¼æ ·å¼åâ€œ.noâ€+â€œå­—å·â€+â€œè¡Œè·â€+â€œé¢œè‰²ç¼©å†™â€ä¾‹ï¼šâ€œ .no12 â€ ã€â€œ .no12-24 â€</li><li>ä¹‰HTMLæ ·å¼ä¸ºè®¾è®¡å¸ˆé‡æ–°å®šä¹‰å·²æœ‰çš„HTMLæ ‡ç­¾æ ·å¼ï¼Œå½±å“å…¨éƒ¨çš„è¢«è®¾å®šæ ‡ç­¾æ ·å¼ï¼Œç”¨äºç»Ÿä¸€ç½‘é¡µä¸­æŸä¸€æ ‡ç­¾çš„æ ·å¼å®šä¹‰ã€‚æ ·å¼åâ€œHTMLæ ‡ç­¾â€ä¾‹ï¼šhr { border: 1px dotted #333333 }</li><li>æ€æ ·å¼ä¸ºè®¾è®¡å¸ˆå¯¹é“¾æ¥ä¸åŒçŠ¶æ€è®¾å®šç‰¹æ®Šæ ·å¼ï¼Œå½±å“è¢«ä½¿ç”¨æœ¬æ ·å¼åŒºåŸŸä¸­çš„é“¾æ¥ã€‚<br>è¯¥æ ·å¼å†™æ³•æœ‰2ç§ï¼š a.nav:link    nav.a:link  ç¬¬ä¸€ç§åªèƒ½ä¿®é¥°<a>æ ‡ç­¾ä¸­ï¼›ç¬¬äºŒç§å¯ä»¥ä¿®é¥°æ‰€æœ‰åŒ…å«æœ‰<a>æ ‡ç­¾çš„å…¶ä»–æ ‡ç­¾ã€‚<br>é¡µé¢å†…çš„æ ·å¼åŠ è½½å¿…é¡»ç”¨é“¾æ¥æ–¹å¼<link rel="stylesheet" type="text/css" href="style/style.css"></li></ol><p>æ³¨æ„ç»†åˆ™ï¼š</p><ol><li>åä½œå¼€å‘åŠåˆ†å·¥: iä¼šæ ¹æ®å„ä¸ªæ¨¡å—, åŒæ—¶æ ¹æ®é¡µé¢ç›¸ä¼¼ç¨‹åº, äº‹å…ˆå†™å¥½å¤§ä½“æ¡†æ¶æ–‡ä»¶, åˆ†é…ç»™å‰ç«¯äººå‘˜å®ç°å†…éƒ¨ç»“æ„&amp;è¡¨ç°&amp;è¡Œä¸º; å…±ç”¨cssæ–‡ä»¶base.cssç”±iä¹¦å†™, åä½œå¼€å‘è¿‡ç¨‹ä¸­, æ¯ä¸ªé¡µé¢è¯·åŠ¡å¿…éƒ½è¦å¼•å…¥, æ­¤æ–‡ä»¶åŒ…å«resetåŠå¤´éƒ¨åº•éƒ¨æ ·å¼, æ­¤æ–‡ä»¶ä¸å¯éšæ„ä¿®æ”¹;</li><li>classä¸idçš„ä½¿ç”¨: idæ˜¯å”¯ä¸€çš„å¹¶æ˜¯çˆ¶çº§çš„, classæ˜¯å¯ä»¥é‡å¤çš„å¹¶æ˜¯å­çº§çš„, æ‰€ä»¥idä»…ä½¿ç”¨åœ¨å¤§çš„æ¨¡å—ä¸Š, classå¯ç”¨åœ¨é‡å¤ä½¿ç”¨ç‡é«˜åŠå­çº§ä¸­; idåŸåˆ™ä¸Šéƒ½æ˜¯ç”±æˆ‘åˆ†å‘æ¡†æ¶æ–‡ä»¶æ—¶å‘½åçš„, ä¸ºJavaScripté¢„ç•™é’©å­çš„é™¤å¤–;</li><li>ä¸ºJavaScripté¢„ç•™é’©å­çš„å‘½å, è¯·ä»¥ js_ èµ·å§‹, æ¯”å¦‚: js_hide, js_show;</li><li>classä¸idå‘½å: å¤§çš„æ¡†æ¶å‘½åæ¯”å¦‚header/footer/wrapper/left/rightä¹‹ç±»çš„åœ¨2ä¸­ç”±iç»Ÿä¸€å‘½å.å…¶ä»–æ ·å¼åç§°ç”± å°å†™è‹±æ–‡ &amp; æ•°å­— &amp; _ æ¥ç»„åˆå‘½å, å¦‚i_comment, fontred, width200; é¿å…ä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³, å°½é‡ä½¿ç”¨ç®€æ˜“çš„å•è¯ç»„åˆ; æ€»ä¹‹, å‘½åè¦è¯­ä¹‰åŒ–, ç®€æ˜åŒ–.</li><li>è§„é¿classä¸idå‘½å(æ­¤æ¡é‡è¦, è‹¥æœ‰ä¸æ˜ç™½è¯·åŠæ—¶ä¸iæ²Ÿé€š):<br>a, é€šè¿‡ä»å±å†™æ³•è§„é¿, ç¤ºä¾‹è§d;<br>b, å–çˆ¶çº§å…ƒç´ id/classå‘½åéƒ¨åˆ†å‘½å, ç¤ºä¾‹è§d;<br>c, é‡å¤ä½¿ç”¨ç‡é«˜çš„å‘½å, è¯·ä»¥è‡ªå·±ä»£å·åŠ ä¸‹åˆ’çº¿èµ·å§‹, æ¯”å¦‚i_clear;<br>d, a,bä¸¤æ¡, é€‚ç”¨äºåœ¨2ä¸­å·²å»ºå¥½æ¡†æ¶çš„é¡µé¢, å¦‚, è¦åœ¨2ä¸­å·²å»ºå¥½æ¡†æ¶çš„é¡µé¢ä»£ç <div id="mainnav"></div>ä¸­åŠ å…¥æ–°çš„divå…ƒç´ ,<br>æŒ‰aå‘½åæ³•åˆ™: <div id="mainnav"><div class="firstnav">â€¦</div></div>,<br>æ ·å¼å†™æ³•:  #mainnav  .firstnav{â€¦â€¦.}<br>æŒ‰bå‘½åæ³•åˆ™: <div id="mainnav"><div class="main_firstnav">â€¦</div></div>,<br>æ ·å¼å†™æ³•:  .main_firstnav{â€¦â€¦.}</li><li>csså±æ€§ä¹¦å†™é¡ºåº, å»ºè®®éµå¾ª å¸ƒå±€å®šä½å±æ€§â€“&gt;è‡ªèº«å±æ€§â€“&gt;æ–‡æœ¬å±æ€§â€“&gt;å…¶ä»–å±æ€§. æ­¤æ¡å¯æ ¹æ®è‡ªèº«ä¹ æƒ¯ä¹¦å†™, ä½†å°½é‡ä¿è¯åŒç±»å±æ€§å†™åœ¨ä¸€èµ·. å±æ€§åˆ—ä¸¾: å¸ƒå±€å®šä½å±æ€§ä¸»è¦åŒ…æ‹¬: marginã€paddingã€floatï¼ˆåŒ…æ‹¬clearï¼‰ã€positionï¼ˆç›¸åº”çš„ top,right,bottom,leftï¼‰ã€displayã€visibilityã€overflowç­‰ï¼›è‡ªèº«å±æ€§ä¸»è¦åŒ…æ‹¬: width &amp; height &amp; background &amp; border; æ–‡æœ¬å±æ€§ä¸»è¦åŒ…æ‹¬ï¼šfontã€colorã€text-alignã€text-decorationã€text-indentç­‰ï¼›å…¶ä»–å±æ€§åŒ…æ‹¬: list-style(åˆ—è¡¨æ ·å¼)ã€vertical-vlignã€cursorã€z-index(å±‚å é¡ºåº) ã€zoomç­‰.æˆ‘æ‰€åˆ—å‡ºçš„è¿™äº›å±æ€§åªæ˜¯æœ€å¸¸ç”¨åˆ°çš„, å¹¶ä¸ä»£è¡¨å…¨éƒ¨;</li><li>ä¹¦å†™ä»£ç å‰, è€ƒè™‘å¹¶æé«˜æ ·å¼é‡å¤ä½¿ç”¨ç‡;</li><li>å……åˆ†åˆ©ç”¨htmlè‡ªèº«å±æ€§åŠæ ·å¼ç»§æ‰¿åŸç†å‡å°‘ä»£ç é‡, æ¯”å¦‚:<br><ul class="list"><li>è¿™å„¿æ˜¯æ ‡é¢˜åˆ—è¡¨<span>2010-09-15</span></ul><br>å®šä¹‰ul.list li{position:relative}  ul.list li span{position:absolute; right:0}<br>å³å¯å®ç°æ—¥æœŸå±…å³æ˜¾ç¤º</li><li>æ ·å¼è¡¨ä¸­ä¸­æ–‡å­—ä½“å, è¯·åŠ¡å¿…è½¬ç æˆunicodeç , ä»¥é¿å…ç¼–ç é”™è¯¯æ—¶ä¹±ç ;</li><li>èƒŒæ™¯å›¾ç‰‡è¯·å°½å¯èƒ½ä½¿ç”¨spriteæŠ€æœ¯, å‡å°httpè¯·æ±‚, è€ƒè™‘åˆ°å¤šäººåä½œå¼€å‘, spriteæŒ‰æ¨¡å—åˆ¶ä½œ;</li><li>ä½¿ç”¨tableæ ‡ç­¾æ—¶(å°½é‡é¿å…ä½¿ç”¨tableæ ‡ç­¾), è¯·ä¸è¦ç”¨width/ height/cellspacing/cellpaddingç­‰tableå±æ€§ç›´æ¥å®šä¹‰è¡¨ç°, åº”å°½å¯èƒ½çš„åˆ©ç”¨tableè‡ªèº«ç§æœ‰å±æ€§åˆ†ç¦»ç»“æ„ä¸è¡¨ç°, å¦‚thead,tr,th,td,tbody,tfoot,colgroup,scope; (cellspaingåŠcellpaddingçš„cssæ§åˆ¶æ–¹æ³•: table{border:0;margin:0;border-collapse:collapse;} table th, table td{padding:0;} , base.cssæ–‡ä»¶ä¸­æˆ‘ä¼šåˆå§‹åŒ–è¡¨æ ¼æ ·å¼)</li><li>æœç»ä½¿ç”¨<meta http-equiv="X-UA-Compatible" content="IE=7" /> å…¼å®¹ie8;</li><li>ç”¨pngå›¾ç‰‡åšå›¾ç‰‡æ—¶, è¦æ±‚å›¾ç‰‡æ ¼å¼ä¸ºpng-8æ ¼å¼,è‹¥png-8å®åœ¨å½±å“å›¾ç‰‡è´¨é‡æˆ–å…¶ä¸­æœ‰åŠé€æ˜æ•ˆæœ, è¯·ä¸ºie6å•ç‹¬å®šä¹‰èƒŒæ™¯:<br>background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=crop, src=â€™img/bg.pngâ€™);</li><li>é¿å…å…¼å®¹æ€§å±æ€§çš„ä½¿ç”¨, æ¯”å¦‚text-shadow || css3çš„ç›¸å…³å±æ€§;</li><li>å‡å°‘ä½¿ç”¨å½±å“æ€§èƒ½çš„å±æ€§, æ¯”å¦‚position:absolute || float ;</li><li>å¿…é¡»ä¸ºå¤§åŒºå—æ ·å¼æ·»åŠ æ³¨é‡Š, å°åŒºå—é€‚é‡æ³¨é‡Š;</li><li>ä»£ç ç¼©è¿›ä¸æ ¼å¼: å»ºè®®å•è¡Œä¹¦å†™, å¯æ ¹æ®è‡ªèº«ä¹ æƒ¯, åæœŸä¼˜åŒ–iä¼šç»Ÿä¸€å¤„ç†;</li></ol><h5 id="å‘½åè§„åˆ™ï¼š"><a href="#å‘½åè§„åˆ™ï¼š" class="headerlink" title="å‘½åè§„åˆ™ï¼š"></a>å‘½åè§„åˆ™ï¼š</h5><ol><li>å¤´ï¼šheader</li><li>å†…å®¹ï¼šcontent/container</li><li>å°¾ï¼šfooter</li><li>å¯¼èˆªï¼šnav</li><li>ä¾§æ ï¼šsidebar</li><li>æ ç›®ï¼šcolumn</li><li>é¡µé¢å¤–å›´æ§åˆ¶æ•´ä½“å¸ƒå±€å®½åº¦ï¼šwrapper</li><li>å·¦å³ä¸­ï¼šleft right center</li><li>ç™»å½•æ¡ï¼šloginbar</li><li>æ ‡å¿—ï¼šlogo</li><li>å¹¿å‘Šï¼šbanner</li><li>é¡µé¢ä¸»ä½“ï¼šmain</li><li>çƒ­ç‚¹ï¼šhot</li><li>æ–°é—»ï¼šnews</li><li>ä¸‹è½½ï¼šdownload</li><li>å­å¯¼èˆªï¼šsubnav</li><li>èœå•ï¼šmenu</li><li>å­èœå•ï¼šsubmenu</li><li>æœç´¢ï¼šsearch</li><li>å‹æƒ…é“¾æ¥ï¼šfriendlink</li><li>é¡µè„šï¼šfooter</li><li>ç‰ˆæƒï¼šcopyright</li><li>æ»šåŠ¨ï¼šscroll</li><li>å†…å®¹ï¼šcontent</li><li>æ ‡ç­¾é¡µï¼štab</li><li>æ–‡ç« åˆ—è¡¨ï¼šlist</li><li>æç¤ºä¿¡æ¯ï¼šmsg</li><li>å°æŠ€å·§ï¼štips</li><li>æ ç›®æ ‡é¢˜ï¼štitle</li><li>åŠ å…¥ï¼šjoinus</li><li>æŒ‡å—ï¼šguild</li><li>æœåŠ¡ï¼šservice</li><li>æ³¨å†Œï¼šregsiter</li><li>çŠ¶æ€ï¼šstatus</li><li>æŠ•ç¥¨ï¼švote</li><li>åˆä½œä¼™ä¼´ï¼špartner<h5 id="äºŒ-æ³¨é‡Šçš„å†™æ³•"><a href="#äºŒ-æ³¨é‡Šçš„å†™æ³•" class="headerlink" title="(äºŒ)æ³¨é‡Šçš„å†™æ³•:"></a>(äºŒ)æ³¨é‡Šçš„å†™æ³•:</h5>/<em> Footer </em>/<br>å†…å®¹åŒº<br>/<em> End Footer </em>/<h5 id="ä¸‰-idçš„å‘½å"><a href="#ä¸‰-idçš„å‘½å" class="headerlink" title="(ä¸‰)idçš„å‘½å:"></a>(ä¸‰)idçš„å‘½å:</h5><h6 id="1-é¡µé¢ç»“æ„"><a href="#1-é¡µé¢ç»“æ„" class="headerlink" title="(1)é¡µé¢ç»“æ„"></a>(1)é¡µé¢ç»“æ„</h6></li><li>å®¹å™¨: container</li><li>é¡µå¤´ï¼šheader</li><li>å†…å®¹ï¼šcontent/container</li><li>é¡µé¢ä¸»ä½“ï¼šmain</li><li>é¡µå°¾ï¼šfooter</li><li>å¯¼èˆªï¼šnav</li><li>ä¾§æ ï¼šsidebar</li><li>æ ç›®ï¼šcolumn</li><li>é¡µé¢å¤–å›´æ§åˆ¶æ•´ä½“å¸ƒå±€å®½åº¦ï¼šwrapper</li><li>å·¦å³ä¸­ï¼šleft right center</li></ol><h6 id="2-å¯¼èˆª"><a href="#2-å¯¼èˆª" class="headerlink" title="(2)å¯¼èˆª"></a>(2)å¯¼èˆª</h6><ol><li>å¯¼èˆªï¼šnav</li><li>ä¸»å¯¼èˆªï¼šmainbav</li><li>å­å¯¼èˆªï¼šsubnav</li><li>é¡¶å¯¼èˆªï¼štopnav</li><li>è¾¹å¯¼èˆªï¼šsidebar</li><li>å·¦å¯¼èˆªï¼šleftsidebar</li><li>å³å¯¼èˆªï¼šrightsidebar</li><li>èœå•ï¼šmenu</li><li>å­èœå•ï¼šsubmenu</li><li>æ ‡é¢˜: title</li><li>æ‘˜è¦: summary</li></ol><h6 id="3-åŠŸèƒ½"><a href="#3-åŠŸèƒ½" class="headerlink" title="(3)åŠŸèƒ½"></a>(3)åŠŸèƒ½</h6><ol><li>æ ‡å¿—ï¼šlogo</li><li>å¹¿å‘Šï¼šbanner</li><li>ç™»é™†ï¼šlogin</li><li>ç™»å½•æ¡ï¼šloginbar</li><li>æ³¨å†Œï¼šregsiter</li><li>æœç´¢ï¼šsearch</li><li>åŠŸèƒ½åŒºï¼šshop</li><li>æ ‡é¢˜ï¼štitle</li><li>åŠ å…¥ï¼šjoinus</li><li>çŠ¶æ€ï¼šstatus</li><li>æŒ‰é’®ï¼šbtn</li><li>æ»šåŠ¨ï¼šscroll</li><li>æ ‡ç­¾é¡µï¼štab</li><li>æ–‡ç« åˆ—è¡¨ï¼šlist</li><li>æç¤ºä¿¡æ¯ï¼šmsg</li><li>å½“å‰çš„: current</li><li>å°æŠ€å·§ï¼štips</li><li>å›¾æ ‡: icon</li><li>æ³¨é‡Šï¼šnote</li><li>æŒ‡å—ï¼šguild</li><li>æœåŠ¡ï¼šservice</li><li>çƒ­ç‚¹ï¼šhot</li><li>æ–°é—»ï¼šnews</li><li>ä¸‹è½½ï¼šdownload</li><li>æŠ•ç¥¨ï¼švote</li><li>åˆä½œä¼™ä¼´ï¼špartner</li><li>å‹æƒ…é“¾æ¥ï¼šlink</li><li>ç‰ˆæƒï¼šcopyright\</li></ol>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸€ä¸ª compose å®ç°</title>
      <link href="2017/11/14/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcompose%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>2017/11/14/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcompose%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆ›å»ºä¸€ä¸ªå‡½æ•°,é€šè¿‡æŠŠä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºè¾“å…¥å‘é€ç»™å¦ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼æŠŠä¸¤ä¸ªå‡½æ•°ç»„åˆèµ·æ¥</p></blockquote><a id="more"></a><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æ¯”å¦‚æˆ‘ä»¬è¦å®ç°è¾“å…¥ jackï¼Œsmith æˆ‘ä»¬å°±è¦æ‰“å°å‡ºæ¥ï¼Œâ€˜HELLOï¼ŒJACK SMITHâ€™ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> greeting = <span class="function">(<span class="params">firstName, lastName</span>) =&gt;</span> <span class="string">&quot;hello, &quot;</span> + firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line"><span class="keyword">var</span> toUpper = <span class="function"><span class="params">str</span> =&gt;</span> str.toUpperCase();</span><br><span class="line"><span class="keyword">var</span> fn = compose(toUpper, greeting);</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="string">&quot;jack&quot;</span>, <span class="string">&quot;smith&quot;</span>));</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ compose å¤§è‡´çš„ä½¿ç”¨ï¼Œæ€»ç»“ä¸‹æ¥è¦æ³¨æ„çš„æœ‰ä»¥ä¸‹å‡ ç‚¹</p><ol><li><p>compose çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°</p></li><li><p>å› ä¸ºé™¤äº†ç¬¬ä¸€ä¸ªå‡½æ•°çš„æ¥å—å‚æ•°ï¼Œå…¶ä»–å‡½æ•°çš„æ¥å—å‚æ•°éƒ½æ˜¯ä¸Šä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥åˆå§‹å‡½æ•°çš„å‚æ•°æ˜¯å¤šå…ƒçš„ï¼Œè€Œå…¶ä»–å‡½æ•°çš„æ¥å—å€¼æ˜¯ä¸€å…ƒçš„</p></li><li><p>compsoe å‡½æ•°å¯ä»¥æ¥å—ä»»æ„çš„å‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯å‡½æ•°ï¼Œä¸”æ‰§è¡Œæ–¹å‘æ˜¯è‡ª<code>å³å‘å·¦çš„</code>ï¼Œåˆå§‹å‡½æ•°ä¸€å®šæ”¾åˆ°å‚æ•°çš„<code>æœ€å³é¢</code></p></li></ol><p>compose çš„<code>å¥½å¤„</code>æˆ‘ç®€å•æä¸€ä¸‹ï¼Œå¦‚æœè¿˜æƒ³å†åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œä¸éœ€è¦ä¿®æ”¹ fnï¼Œåªéœ€è¦åœ¨æ‰§è¡Œä¸€ä¸ª composeï¼Œæ¯”å¦‚æˆ‘ä»¬å†æƒ³åŠ ä¸€ä¸ª trimï¼Œåªéœ€è¦è¿™æ ·åš</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> trim = <span class="function"><span class="params">str</span> =&gt;</span> str.trim();</span><br><span class="line"><span class="keyword">var</span> newFn = compose(trim, fn);</span><br><span class="line"><span class="built_in">console</span>.log(newFn(<span class="string">&quot;jack&quot;</span>, <span class="string">&quot;smith&quot;</span>));</span><br></pre></td></tr></table></figure><p>ç»´æŠ¤å’Œæ‰©å±•éƒ½ååˆ†çš„æ–¹ä¾¿ã€‚</p><h3 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h3><p>ä¾‹å­åˆ†æå®Œäº†ï¼Œæœ¬ç€ç©¶å…¶æ ¹æœ¬çš„åŸåˆ™ï¼Œè¿˜æ˜¯è¦æ¢ç©¶ä¸ä¸€ä¸‹ compose åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„,javascript å‡½æ•°å¼ç¼–ç¨‹çš„ä¸¤å¤§ç±»åº“ï¼Œlodash.js å’Œ ramda.js æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…¶ä¸­ ramda.js å®ç°çš„è¿‡ç¨‹éå¸¸å‡½æ•°å¼ã€‚</p><p>æˆ‘çš„æ€è·¯æ˜¯:compose è¿”å›ä¸€ä¸ªå‡½æ•°,ä¸ºäº†è®°å½•é€’å½’çš„æ‰§è¡Œæƒ…å†µï¼Œè¿˜è¦è®°å½•å‚æ•°çš„é•¿åº¦ len,è¿˜è¦ç»™è¿”å›çš„å‡½æ•°æ·»åŠ ä¸€ä¸ªåå­— f1ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compose = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = args.length;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‡½æ•°ä½“é‡Œé¢è¦åšçš„äº‹æƒ…å°±æ˜¯ä¸æ–­çš„æ‰§è¡Œ<code>args</code>ä¸­çš„å‡½æ•°ï¼Œå°†ä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœä½œä¸ºä¸‹ä¸€ä¸ªæ‰§è¡Œå‡½æ•°çš„è¾“å…¥å‚æ•°,éœ€è¦ä¸€ä¸ªæ¸¸æ ‡<code>count</code>æ¥è®°å½• args å‡½æ•°åˆ—è¡¨çš„æ‰§è¡Œæƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> diy_compose = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = args.length;</span><br><span class="line">  <span class="keyword">var</span> count = len - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">...args1</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args1); <span class="comment">// [0,100], [result:&#x27;100&#x27;]</span></span><br><span class="line">    result = args[count].apply(<span class="built_in">this</span>, args1);</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¦‚æœæ˜¯æœ€åä¸€ä¸ªåˆ™ç›´æ¥é€€å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (count &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      count--;</span><br><span class="line">      <span class="comment">//é€’å½’æ‰§è¡Œf1</span></span><br><span class="line">      <span class="keyword">return</span> f1.call(<span class="literal">null</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greeting = <span class="function">(<span class="params">x, y</span>) =&gt;</span> <span class="string">&quot;result : &quot;</span> + (x + y);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toUpper = <span class="function"><span class="params">str</span> =&gt;</span> str.toUpperCase();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = diy_compose(toUpper, greeting);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(c(<span class="number">0</span>, <span class="number">100</span>)); <span class="comment">//RESULT : 100</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>compose å‡½æ•°é¦–å…ˆå›æ‰§è¡Œ b,å¹¶å°† b çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™ a,è¯¥å‡½æ•°è°ƒç”¨çš„æ–¹å‘æ˜¯<code>ä»å³å¾€å·¦</code>(ä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œ b,å†æ‰§è¡Œ a)</p><h3 id="lodash-å®ç°"><a href="#lodash-å®ç°" class="headerlink" title="lodash å®ç°"></a>lodash å®ç°</h3><p>lodash çš„æ€è·¯åŒä¸Šï¼Œä¸è¿‡æ˜¯ç”¨è¿­ä»£å®ç°çš„ï¼Œæˆ‘å°±æŠŠå®ƒçš„æºä»£ç è´´è¿‡æ¥çœ‹ä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flow = <span class="function"><span class="keyword">function</span>(<span class="params">funcs</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//è·å–æ–¹æ³•å‚æ•°é•¿åº¦</span></span><br><span class="line">  <span class="keyword">var</span> length = funcs.length;</span><br><span class="line">  <span class="comment">//è®°å½•é•¿åº¦å€¼</span></span><br><span class="line">  <span class="keyword">var</span> index = length;</span><br><span class="line">  <span class="comment">//é€’å½’å‡å‡</span></span><br><span class="line">  <span class="keyword">while</span> (index--) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœåˆ¤æ–­æŸä¸€ä¸ªä¸æ˜¯æ–¹æ³•åˆ™è¾“å‡ºè­¦å‘Šâš ï¸</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> funcs[index] !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Expected a function&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> result = length ? funcs[index].apply(<span class="built_in">this</span>, args) : args[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">while</span> (++index &lt; length) &#123;</span><br><span class="line">      result = funcs[index].call(<span class="built_in">this</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> flowRight = <span class="function"><span class="keyword">function</span>(<span class="params">funcs</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ–¹æ³•å‚æ•°åè½¬..[fn2,fn1] ===&gt; [fn1,fn2]</span></span><br><span class="line">  <span class="keyword">return</span> flow(funcs.reverse());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œlodash çš„æœ¬æ¥å®ç°æ˜¯ä»å·¦åˆ°å³çš„ï¼Œä½†ä¹Ÿæä¾›äº†ä»å³åˆ°å·¦çš„ flowRightï¼Œè¿˜å¤šäº†ä¸€å±‚å‡½æ•°çš„æ ¡éªŒï¼Œè€Œä¸”æ¥æ”¶çš„æ˜¯æ•°ç»„ï¼Œä¸æ˜¯å‚æ•°åºåˆ—,è€Œä¸”ä»è¿™è¡Œ<code>var result = length ? funcs[index].apply(this, args) : args[0]å¯ä»¥çœ‹å‡ºå…è®¸æ•°ç»„ä¸ºç©º</code>ï¼Œå¯ä»¥çœ‹å‡ºè¿˜æ˜¯éå¸¸ä¸¥è°¨çš„ã€‚æˆ‘å†™çš„å°±ç¼ºå°‘è¿™ç§ä¸¥è°¨çš„å¼‚å¸¸å¤„ç†ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="https://segmentfault.com/a/1190000008394749" >compose çš„å®ç°<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ä¸ª bind å®ç°</title>
      <link href="2017/11/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAbind%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>2017/11/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAbind%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>bind çš„ä»‹ç»</p><blockquote><p>bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚</p></blockquote><h3 id="é¦–å…ˆä»‹ç»ä¸‹åŒºåˆ«"><a href="#é¦–å…ˆä»‹ç»ä¸‹åŒºåˆ«" class="headerlink" title="é¦–å…ˆä»‹ç»ä¸‹åŒºåˆ«"></a>é¦–å…ˆä»‹ç»ä¸‹åŒºåˆ«</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181113/125057318.png"                      alt="mark"                ></p><h3 id="ç¬¬ä¸€ä¸ªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å®ç°"><a href="#ç¬¬ä¸€ä¸ªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å®ç°" class="headerlink" title="ç¬¬ä¸€ä¸ªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å®ç°"></a>ç¬¬ä¸€ä¸ªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  <span class="built_in">console</span>.log(arg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.customeBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.apply(thisArg);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newFunc = func.customeBind(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;);</span><br><span class="line">newFunc(); <span class="comment">//---&gt; this.a  // 1</span></span><br></pre></td></tr></table></figure><h3 id="ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°"><a href="#ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°"></a>ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.customeBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.apply(thisArg, [...list]);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newFunc2 = func.customeBind(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">newFunc2();</span><br></pre></td></tr></table></figure><h3 id="åŸå‹ç»§æ‰¿æ¨¡æ‹Ÿå®ç°"><a href="#åŸå‹ç»§æ‰¿æ¨¡æ‹Ÿå®ç°" class="headerlink" title="åŸå‹ç»§æ‰¿æ¨¡æ‹Ÿå®ç°"></a>åŸå‹ç»§æ‰¿æ¨¡æ‹Ÿå®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.customeBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>; <span class="comment">//ç›®æ ‡å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦‚æœæŠŠè¿”å›å‡½æ•°å½“åšæ„é€ å‡½æ•° å°±æ˜¯æ‰¾ä¸åˆ°ç›®æ ‡å‡½æ•°ä¸Šçš„æ–¹æ³•</span></span><br><span class="line">  <span class="comment">//è§£å†³:æ–°å‡½æ•°ç»§æ‰¿ç›®æ ‡å‡½æ•°çš„åŸå‹</span></span><br><span class="line">  <span class="keyword">let</span> NewBind = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.apply(thisArg, [...list]);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åŸå‹ç»§æ‰¿:  ä»¥æŸä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å‡ºæ¥</span></span><br><span class="line">  NewBind.prototype = <span class="built_in">Object</span>.create(self.prototype);</span><br><span class="line">  <span class="comment">//æ„é€ å‡½æ•°ï¼ˆå³å¯¹è±¡å’Œæ•°ç»„æ–‡å­—ï¼‰çš„æƒ…å†µä¸‹åˆ›å»ºçš„å¯¹è±¡å°†å…·æœ‰constructoræŒ‡å‘è¯¥å¯¹è±¡çš„åŸºç¡€å¯¹è±¡æ„é€ å‡½æ•°ç±»å‹çš„å±æ€§ã€‚</span></span><br><span class="line">  NewBind.prototype.constructor = self;</span><br><span class="line">  <span class="comment">//è¿”å›æ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> NewBind;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newFunc2 = func.customeBind(&#123; <span class="attr">a</span>: <span class="number">2</span> &#125;, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">newFunc2();</span><br><span class="line"><span class="keyword">let</span> f2 = <span class="keyword">new</span> newFunc2();</span><br><span class="line"><span class="built_in">console</span>.log(f2);</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/blog/20181113/124644715.png"                      alt="mark"                ></p><h1 id="æ‰‹å†™ç³»åˆ—"><a href="#æ‰‹å†™ç³»åˆ—" class="headerlink" title="æ‰‹å†™ç³»åˆ—"></a>æ‰‹å†™ç³»åˆ—</h1><ol><li><del><strong>å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</strong></del></li><li><del>å®ç°ä¸€ä¸ªJSON.stringify</del></li><li><del>å®ç°ä¸€ä¸ªJSON.parse</del></li><li>å®ç°ä¸€ä¸ªcallæˆ– apply</li><li><del>å®ç°ä¸€ä¸ªFunction.bind</del></li><li>å®ç°ä¸€ä¸ªç»§æ‰¿</li><li>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</li><li>æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</li><li>æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</li><li>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</li><li><del>å®ç°ä¸€ä¸ªinstanceOf</del></li><li><del>å®ç°ä¸€ä¸ª bing</del></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPT è®¾è®¡æ¨¡å¼ä¹‹å¯„ç”Ÿå¼ç»§æ‰¿</title>
      <link href="2017/10/31/%E5%AF%84%E7%94%9F%E5%BC%8F%E7%BB%A7%E6%89%BF/"/>
      <url>2017/10/31/%E5%AF%84%E7%94%9F%E5%BC%8F%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>å¯„ç”Ÿå¼ç»§æ‰¿</p><a id="more"></a><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/TIM%E6%88%AA%E5%9B%BE20171101182848.png"                      alt="image"                ></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">color, price</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> go = <span class="string">&#x27;æˆ‘æ˜¯ç§æœ‰çš„&#x27;</span>;</span><br><span class="line">  <span class="built_in">this</span>.color = color;</span><br><span class="line">  <span class="built_in">this</span>.price = price;</span><br><span class="line">  <span class="built_in">this</span>.getGo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> go;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">Car.prototype.getCar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;é¢œè‰²&#x27;</span> + <span class="built_in">this</span>.color);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cruze</span>(<span class="params">color, price</span>) </span>&#123;</span><br><span class="line">  Car.call(<span class="built_in">this</span>, color, price);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯„ç”Ÿå¼ç»§æ‰¿</span></span><br><span class="line">inherit(Car, cruze);</span><br><span class="line">cruze.prototype.test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯TEST&#x27;</span> + <span class="built_in">this</span>.color);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">father, son</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _prototype = <span class="built_in">Object</span>.create(father.prototype); <span class="comment">//åˆ›å»ºçˆ¹çš„å‰¯æœ¬</span></span><br><span class="line">  _prototype.construction = son; <span class="comment">//æ›´æ”¹è‡ªå·±çš„æ„é€ å‡½æ•°</span></span><br><span class="line">  son.prototype = _prototype; <span class="comment">//å†ç»™è‡ªå·±</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//newä¸€ä¸‹æ‹¿åˆ«äººçš„å±æ€§  callä¸€ä¸‹æ‹¿åˆ«äººçš„å±æ€§æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> _cruze = <span class="keyword">new</span> cruze(<span class="string">&#x27;white&#x27;</span>, <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(_cruze);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> Javascript </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack3.10.0ä½¿ç”¨</title>
      <link href="2017/10/26/webpack3.10.0%E4%BD%BF%E7%94%A8/"/>
      <url>2017/10/26/webpack3.10.0%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½<br><a id="more"></a></p><h1 id="åˆçº§å…¥é—¨"><a href="#åˆçº§å…¥é—¨" class="headerlink" title="åˆçº§å…¥é—¨"></a>åˆçº§å…¥é—¨</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/k4h3fBH6jF.png"                      alt="mark"                ></p><blockquote><p>yarn add <a class="link"   href="mailto:webpack@3.10.0" >webpack@3.10.0<i class="fas fa-external-link-alt"></i></a></p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/Fdh6AleHJC.png"                      alt="mark"                ></p><blockquote><p>yarn add <a class="link"   href="mailto:html-webpack-plugin@2.30.1" >html-webpack-plugin@2.30.1<i class="fas fa-external-link-alt"></i></a></p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/hH6CEggja4.png"                      alt="mark"                ></p><blockquote><p>yarn add  babel-core,babel-loader babel-preset-env</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/d9I2gh7e5d.png"                      alt="mark"                ></p><blockquote><p>yarn add less  css-loader less-loader styke-loader extract-text-webpack-plugin</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/734BIe6HDH.png"                      alt="mark"                ></p><p>yarn add url-loader  file-loader</p><p>file-laoderåœ¨æ–‡ä»¶å¤§å°ä½äºé™åˆ¶æ—¶,å¯ä»¥è¿”å›ä¸€ä¸ªDataURL</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/Ilb17KDc0K.png"                      alt="mark"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/ddIBHJA108.png"                      alt="mark"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181029/0mFfEG4H5i.png"                      alt="mark"                ></p><h2 id="åŸºç¡€é…ç½®ä»£ç å¦‚ä¸‹"><a href="#åŸºç¡€é…ç½®ä»£ç å¦‚ä¸‹" class="headerlink" title="åŸºç¡€é…ç½®ä»£ç å¦‚ä¸‹"></a>åŸºç¡€é…ç½®ä»£ç å¦‚ä¸‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: mikey.zhaopeng</span></span><br><span class="line"><span class="comment"> * @Date: 2018-10-28 23:44:17</span></span><br><span class="line"><span class="comment"> * @Last Modified by: é©¬é‡Œå¥¥</span></span><br><span class="line"><span class="comment"> * @Last Modified time: 2018-10-29 13:02:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">&quot;extract-text-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;dist&quot;</span>), <span class="comment">//è§£æç›®å½•</span></span><br><span class="line">    filename: <span class="string">&quot;js/app.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// react(jsx)è¯­æ³•çš„å¤„ç†</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [<span class="string">&quot;env&quot;</span>, <span class="string">&quot;react&quot;</span>] <span class="comment">//eev æ ¹æ®ç¯å¢ƒæ‰“åŒ…</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// cssæ–‡ä»¶çš„å¤„ç†</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">          <span class="comment">//æ‰€æœ‰å…¥å£css æå–å‡ºæ¥</span></span><br><span class="line">          fallback: <span class="string">&quot;style-loader&quot;</span>, <span class="comment">//å¿…é¡»ä¸‹style-loader</span></span><br><span class="line">          use: <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// lessæ–‡ä»¶çš„å¤„ç†</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">          fallback: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          use: [<span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">     <span class="comment">// å›¾ç‰‡çš„é…ç½®</span></span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">use: [</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">&#x27;url-loader?limit=8192&amp;name=images/[hash:8].[name].[ext]&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">name: <span class="string">&#x27;./images&#x27;</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">],</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å­—ä½“å›¾æ ‡çš„é…ç½®</span></span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.(eot|svg|ttf|woff|woff2|otf)$/</span>,</span><br><span class="line">use: [</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">&#x27;url-loader?limit=8192&amp;name=font/[hash:8].[name].[ext]&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">name: <span class="string">&#x27;./font&#x27;</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">],</span><br><span class="line">&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">//å¤„ç†htmlæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">&quot;./src/index.html&quot;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// // ç‹¬ç«‹cssæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">&quot;css/[name].css&quot;</span>),</span><br><span class="line">    <span class="comment">// æå‡ºå…¬å…±æ¨¡å—</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">&quot;common&quot;</span>,</span><br><span class="line">      filename: <span class="string">&quot;js/base.js&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: <span class="number">8086</span>,</span><br><span class="line">    historyApiFallback: &#123;</span><br><span class="line">      index: <span class="string">&quot;/dist/index.html&quot;</span>, <span class="comment">//404 æˆ–æ‹›ä¸åˆ°åˆ™è¿”å›é¦–é¡µ</span></span><br><span class="line">      favicon: <span class="string">&#x27;./favicon.ico&#x27;</span>    <span class="comment">//å¿…é¡»åœ¨æ›´ç›®å½•æ”¾ä¸€å¼ icoå›¾ç‰‡</span></span><br><span class="line">    &#125;,</span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">//è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&quot;/manage&quot;</span>: &#123;</span><br><span class="line">        target: <span class="string">&quot;http://admintest.happymmall.com&quot;</span>, <span class="comment">//é€‰æ‹©è¯·æ±‚ä»£ç†</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;/user/logout.do&quot;</span>: &#123;</span><br><span class="line">        target: <span class="string">&quot;http://admintest.happymmall.com&quot;</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹çº æ­£"><a href="#å›¾ç‰‡é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹çº æ­£" class="headerlink" title="å›¾ç‰‡é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹çº æ­£"></a>å›¾ç‰‡é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹çº æ­£</h2><p>ä¼šå‡ºç°  <a class="link"   href="http://xxx.xx.com/css/image/1.jpg" >http://xxx.xx.com/css/image/1.jpg<i class="fas fa-external-link-alt"></i></a>;</p><p>æ­£ç¡®çš„ç½‘å€ åº”è¯¥æ˜¯  <a class="link"   href="http://xxx.xx.com/image/1.jpg" >http://xxx.xx.com/image/1.jpg<i class="fas fa-external-link-alt"></i></a>;</p><p>ä¸ºä»€ä¹ˆä¼šå¤šä¸€ä¸ªcsså¯èƒ½css-loadeè§£ææ—¶å€™æ²¡æœ‰é…ç½®è¾“å‡ºè·¯å¾„</p><h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³:"></a>è§£å†³:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›¾ç‰‡çš„é…ç½®</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">&quot;url-loader?limit=819200&amp;name=images/[hash:8].[name].[ext]&quot;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            name: <span class="string">&quot;./images&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// å­—ä½“å›¾æ ‡çš„é…ç½®</span></span><br><span class="line">     &#123;</span><br><span class="line">      test: <span class="regexp">/\.(eot|svg|ttf|woff|woff2|otf)$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        &#123;</span><br><span class="line">            loader: <span class="string">&quot;url-loader?limit=819200&amp;name=fonts/[hash:8].[name].[ext]&quot;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">            name: <span class="string">&quot;./fonts&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹</title>
      <link href="2017/10/24/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC%E7%B1%BB%E5%9E%8B/"/>
      <url>2017/10/24/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>æ¯ç§æ•°æ®ç±»å‹çš„å†…å­˜åˆ†é…</p><a id="more"></a><h3 id="å€¼ç±»å‹å†…å­˜åˆ†é…"><a href="#å€¼ç±»å‹å†…å­˜åˆ†é…" class="headerlink" title="å€¼ç±»å‹å†…å­˜åˆ†é…"></a>å€¼ç±»å‹å†…å­˜åˆ†é…</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B2%20%281%29.png"                      alt="image"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chainStore</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> store1 = <span class="string">&quot;NikeÂ China&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> store2 = store1;</span><br><span class="line">  store1 = <span class="string">&quot;NikeÂ U.S.A.&quot;</span>;</span><br><span class="line">  alert(store2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1; <span class="comment">//è¿™ä¸ªæ—¶å€™ä¸è¿›è¡Œå†…å­˜åˆ†é…</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span>; <span class="comment">//åˆ†é…å†…å­˜</span></span><br><span class="line"><span class="keyword">var</span> str3 = str2;</span><br><span class="line"><span class="built_in">console</span>.log(str1);</span><br><span class="line"><span class="built_in">console</span>.log(str2 == str3); <span class="comment">//æ¯”è¾ƒçš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸­å­˜å‚¨çš„å€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(str2 === str3); <span class="comment">//æ¯”è¾ƒçš„æ˜¯åœ°å€å’Œåœ°å€ä¸­å­˜å‚¨çš„å€¼</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B2%20%282%29.png"                      alt="image"                ></p><blockquote><p>æŠŠä¸€ä¸ªå€¼ç±»å‹ï¼ˆä¹Ÿå¯ä»¥å«åŸºæœ¬ç±»å‹ï¼‰store2 ä¼ é€’ç»™å¦ä¸€ä¸ªå˜é‡ï¼ˆèµ‹å€¼ï¼‰æ—¶ï¼Œå…¶å®æ˜¯åˆ†é…äº†ä¸€å—æ–°çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤æ”¹å˜ store1 çš„å€¼å¯¹ store2 æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºå®ƒä¸åƒå¼•ç”¨ç±»å‹ï¼Œå˜é‡çš„äº¤æ¢å…¶å®æ˜¯äº¤æ¢äº†æŒ‡åƒåŒä¸€ä¸ªå†…å®¹çš„åœ°å€ã€‚</p></blockquote><h3 id="å¼•ç”¨ç±»å‹å†…å­˜åˆ†é…å‹"><a href="#å¼•ç”¨ç±»å‹å†…å­˜åˆ†é…å‹" class="headerlink" title="å¼•ç”¨ç±»å‹å†…å­˜åˆ†é…å‹"></a>å¼•ç”¨ç±»å‹å†…å­˜åˆ†é…å‹</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B3.png"                      alt="image"                ></p><p>å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œèµ‹å€¼åªæ˜¯ç”Ÿæˆä¸€ä¸ªå†…å­˜ä¿å­˜åœ°å€è€Œå·²<br>var y = x;<br>å¦‚æœå˜é‡ x è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡.<br>åˆ™é€šè¿‡èµ‹å€¼å,y ç”Ÿæˆä¸€ä¸ªå˜é‡,å˜é‡åŒ…å«ä¸€ä¸ªåœ°å€,åœ°å€æŒ‡å‘å¯¹è±¡ x.<br>æ‰€ä»¥ä»æœ¬è´¨ä¸Šè€Œè¨€,ä¸ä¼šç”Ÿæˆæ–°çš„å˜é‡, x,y æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä½ç½®<br>å½“ä½ é€šè¿‡ y æ”¹å˜å¯¹è±¡çš„å€¼ï¼Œè¿™ç§å˜åŒ–ä¹Ÿä¼šåæ˜ åˆ° x ä¸Šã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B4.png"                      alt="image"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B5.png"                      alt="image"                ></p><blockquote><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œstore2 åªè¿›è¡Œäº†ä¸€æ¬¡èµ‹å€¼ï¼Œç†è®ºä¸Šå®ƒçš„å€¼å·²å®šï¼Œä½†åé¢é€šè¿‡æ”¹å†™ store1 çš„å€¼ï¼Œå‘ç° store2 çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™æ­£æ˜¯å¼•ç”¨ç±»å‹çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p></blockquote><hr><h3 id="å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹åŒºåˆ«"><a href="#å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹åŒºåˆ«" class="headerlink" title="å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹åŒºåˆ«"></a>å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹åŒºåˆ«</h3><ol><li>å†…å­˜åˆ†é…æœºåˆ¶ä¸ä¸€æ ·</li><li>å¼•ç”¨ç±»å‹â€”åˆ›å»ºä¸€ä¸ªå˜é‡â€”å†…å­˜ä¸­ä¿å­˜çš„æ˜¯å˜é‡çœŸå®å…¥å£çš„åœ°å€</li><li>å€¼ç±»å‹ï¼šåˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå†…å­˜åˆ›å»ºä¸€ä¸ªåŒºåŸŸ</li><li>è¯´ç™½äº†å°±æ˜¯å¼•ç”¨ç±»å‹ä¼šåˆ†é…ä¸¤ä¸ªåŒºåŸŸï¼šä¸€ä¸ªä¿å­˜åœ°å€ï¼Œä¸€ä¸ªä¿å­˜å†…å®¹</li><li>å˜é‡èµ‹å€¼æ˜¯å¦çš„åŒºåˆ«</li><li>å°†ä¸€ä¸ªå€¼ç±»å‹èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œå®é™…ä¸Šæ–°åˆ›å»ºä¸€ä¸ªåŒºåŸŸ</li><li>å¼•ç”¨ç±»å‹ï¼Œåªæ˜¯åˆ›å»ºä¸€ä¸ªåŒºåŸŸï¼Œä¿å­˜å¦ä¸€ä¸ªå˜é‡çš„å…¥å£åœ°å€</li><li>å€¼ç±»å‹èµ‹å€¼ï¼Œä¼šé‡æ–°åˆ†é…å†…å­˜</li><li>å¼•ç”¨ç±»å‹èµ‹å€¼å…¶å®èµ‹çš„æ˜¯æŒ‡é’ˆ</li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B6.png"                      alt="image"                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> Javascript </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç±»å‹åˆ¤æ–­çš„å‡ ç§æ–¹å¼</title>
      <link href="2017/10/23/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
      <url>2017/10/23/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿï¼Ÿ<br>åŸºç¡€æ•°æ®ç±»å‹çš„åˆ¤æ–­å‡ ç§æ–¹å¼</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> bool = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">     æ•°æ®ç±»å‹åˆ¤æ–­ - typeof</span></span><br><span class="line"><span class="comment">     *******************************************************************************/</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - typeof&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">undefined</span>); <span class="comment">//&#x27;undefined&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">null</span>); <span class="comment">// well-known bug</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">true</span>); <span class="comment">//&#x27;boolean&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="number">123</span>); <span class="comment">//&#x27;number&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="string">&quot;abc&quot;</span>); <span class="comment">//&#x27;string&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;); <span class="comment">//&#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> &#123;&#125;); <span class="comment">//&#x27;object&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr); <span class="comment">//&#x27;object&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> unknownVariable); <span class="comment">//&#x27;undefined&#x27;</span></span><br><span class="line"><span class="comment">//    åœ¨ä½¿ç”¨ typeof è¿ç®—ç¬¦æ—¶é‡‡ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨å€¼ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œ</span></span><br><span class="line"><span class="comment">//    æ— è®ºå¼•ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œå®ƒéƒ½è¿”å› &quot;object&quot;ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">     æ•°æ®ç±»å‹åˆ¤æ–­ - toString.call</span></span><br><span class="line"><span class="comment">     é€šç”¨ä½†å¾ˆç¹ççš„æ–¹æ³•ï¼š prototype</span></span><br><span class="line"><span class="comment">     *******************************************************************************/</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - toString.call&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(toString.call(<span class="number">123</span>)); <span class="comment">//[object Number]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call(<span class="string">&quot;123&quot;</span>)); <span class="comment">//[object String]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call(<span class="literal">undefined</span>)); <span class="comment">//[object Undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call(<span class="literal">true</span>)); <span class="comment">//[object Boolean]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call(&#123;&#125;)); <span class="comment">//[object Object]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call([])); <span class="comment">//[object Array]</span></span><br><span class="line"><span class="built_in">console</span>.log(toString.call(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)); <span class="comment">//[object Function]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(str) === <span class="string">&quot;[object String]&quot;</span>); <span class="comment">//-------&gt; true;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(num) === <span class="string">&quot;[object Number]&quot;</span>); <span class="comment">//-------&gt; true;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(arr) === <span class="string">&quot;[object Array]&quot;</span>); <span class="comment">//-------&gt; true;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(date) === <span class="string">&quot;[object Date]&quot;</span>); <span class="comment">//-------&gt; true;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(fn) === <span class="string">&quot;[object Function]&quot;</span>); <span class="comment">//-------&gt; true;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">     æ•°æ®ç±»å‹åˆ¤æ–­ - instanceof</span></span><br><span class="line"><span class="comment">     *******************************************************************************/</span></span><br><span class="line"><span class="comment">//    åˆ¤æ–­å·²çŸ¥å¯¹è±¡ç±»å‹å®ä¾‹åŒ–çš„æ–¹æ³•ï¼š instanceof</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - instanceof&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>); <span class="comment">//---------------&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(date <span class="keyword">instanceof</span> <span class="built_in">Date</span>); <span class="comment">//---------------&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(fn <span class="keyword">instanceof</span> <span class="built_in">Function</span>); <span class="comment">//------------&gt; true</span></span><br><span class="line"><span class="comment">//    alert(f instanceof function)        //------------&gt; false</span></span><br><span class="line"><span class="comment">//    æ³¨æ„ï¼šinstanceof åé¢ä¸€å®šè¦æ˜¯å¯¹è±¡ç±»å‹ï¼Œå¹¶ä¸”å¤§å°å†™ä¸èƒ½é”™ï¼Œè¯¥æ–¹æ³•é€‚åˆä¸€äº›æ¡ä»¶é€‰æ‹©æˆ–åˆ†æ”¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">     æ•°æ®ç±»å‹åˆ¤æ–­ - æ ¹æ®å¯¹è±¡çš„constructoråˆ¤æ–­ï¼š constructor</span></span><br><span class="line"><span class="comment">     *******************************************************************************/</span></span><br><span class="line"><span class="comment">//    æ ¹æ®å¯¹è±¡çš„constructoråˆ¤æ–­ï¼š constructor</span></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - constructor&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr.constructor === <span class="built_in">Array</span>); <span class="comment">//----------&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(date.constructor === <span class="built_in">Date</span>); <span class="comment">//-----------&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.constructor === <span class="built_in">Function</span>); <span class="comment">//-------&gt; true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> Javascript </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹åŸå‹ç»§æ‰¿</title>
      <link href="2017/09/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF/"/>
      <url>2017/09/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>æ¶‰åŠåˆ°å¤šä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹æ¨¡å¼æ¥å®ç°å¯¹æ–°å¯¹è±¡çš„åˆ›å»º<br><a id="more"></a></p><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¶‰åŠåˆ°å¤šä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹æ¨¡å¼æ¥å®ç°å¯¹æ–°å¯¹è±¡çš„åˆ›å»º</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">prototypeExtend</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//ç¼“å­˜ç±» ä¸ºäº†å®ä¾‹åŒ–è¿”å›å¯¹è±¡ä¸´æ—¶åˆ›å»º  è·Ÿä¸´æ—¶å˜é‡æ€§è´¨å·®ä¸å¤š</span></span><br><span class="line">            <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">                args = <span class="built_in">arguments</span>,</span><br><span class="line">                i = <span class="number">0</span>,</span><br><span class="line">                len = args.length;</span><br><span class="line">            <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="comment">//éå†æ¯ä¸€ä¸ªå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> j <span class="keyword">in</span> args[i]) &#123;</span><br><span class="line">                    <span class="comment">//å±æ€§ç¼“å­˜åœ¨ç¼“å­˜ç±»å‹ä¸­</span></span><br><span class="line">                    F.prototype[j] = args[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿”å›ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> penguin = prototypeExtend(&#123;</span><br><span class="line">            speed: <span class="number">20</span>,</span><br><span class="line">            swim: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;é€Ÿåº¦&quot;</span> + <span class="built_in">this</span>.speed);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            run: <span class="function"><span class="keyword">function</span>(<span class="params">speed</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;è·‘æ­¥é€Ÿåº¦&#x27;</span> + speed);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            jump: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;è·³è·ƒåŠ¨ä½œ&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        penguin.swim();</span><br><span class="line">        penguin.run(<span class="number">10</span>);</span><br><span class="line">        penguin.jump();</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼</title>
      <link href="2017/09/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>2017/09/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®ç»ç†è¦æ±‚ï¼šé¡µé¢ä¸­æœ‰å¾ˆå¤šç„¦ç‚¹å›¾ æ¯ä¸ªç„¦ç‚¹å›¾çš„å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œå·¦å³åˆ‡æ¢ ä¸Šä¸‹åˆ‡æ¢<br><a id="more"></a></p><h5 id="ä¼ ç»Ÿå†™æ³•"><a href="#ä¼ ç»Ÿå†™æ³•" class="headerlink" title="ä¼ ç»Ÿå†™æ³•"></a>ä¼ ç»Ÿå†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> LoopImages = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">this</span>.imagesArray = imgArr; <span class="comment">//è½®æ’­å›¾æ•°ç»„</span></span><br><span class="line">           <span class="built_in">this</span>.container = container; <span class="comment">//è½®æ’­å›¾å®¹å™¨</span></span><br><span class="line">           <span class="built_in">this</span>.creatImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">//åˆ›å»ºè½®æ’­å›¾ç‰‡</span></span><br><span class="line">           <span class="built_in">this</span>.changeImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">//å‚å®¶åˆ‡æ¢ä¸‹ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//å†™ä¸€ä¸ªä¸Šä¸‹åˆ‡æ¢çš„ç±»</span></span><br><span class="line">       <span class="keyword">var</span> SlidLoopImage = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container</span>) </span>&#123;</span><br><span class="line">               LoopImages.call(<span class="built_in">this</span>, imgArr, container);</span><br><span class="line">               <span class="built_in">this</span>.changeImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                   <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œæ˜¾ç¤ºçš„ä¸Šä¸‹åˆ‡æ¢æ•ˆæœ&#x27;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//æ¸éšæ¸æ˜¾å¾—åˆ‡æ¢</span></span><br><span class="line">       <span class="keyword">var</span> FadeLoopImage = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container, arrow</span>) </span>&#123;</span><br><span class="line">               LoopImages.call(<span class="built_in">this</span>, imgArr, container);</span><br><span class="line">               <span class="comment">//åˆ‡æ¢ç®­å¤´çš„ç§æœ‰å˜é‡</span></span><br><span class="line">               <span class="built_in">this</span>.arrow = arrow;</span><br><span class="line">               <span class="built_in">this</span>.changeImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                   <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ¸éšæ¸æ˜¾å¾—åˆ‡æ¢&#x27;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//ä¸€ä¸ªæ•°ç»„ ä¸€ä¸ªå®¹å™¨ ä¸€ä¸ªæ‡’</span></span><br><span class="line">       <span class="keyword">var</span> fadeImage = <span class="keyword">new</span> FadeLoopImage(</span><br><span class="line">           [<span class="string">&#x27;1.jpg&#x27;</span>, <span class="string">&#x27;2.jpg&#x27;</span>, <span class="string">&#x27;3,jpg&#x27;</span>],</span><br><span class="line">           <span class="string">&#x27;slider&#x27;</span>, [<span class="string">&#x27;left.jpg&#x27;</span>, <span class="string">&#x27;right.jpg&#x27;</span>]</span><br><span class="line">       );</span><br><span class="line">       fadeImage.changeImage();</span><br></pre></td></tr></table></figure><h5 id="æ”¹è¿›å†™æ³•"><a href="#æ”¹è¿›å†™æ³•" class="headerlink" title="æ”¹è¿›å†™æ³•"></a>æ”¹è¿›å†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> LoopImages = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">this</span>.imagesArray = imgArr; <span class="comment">//æ•°ç»„</span></span><br><span class="line">           <span class="built_in">this</span>.container = container; <span class="comment">//å®¹å™¨</span></span><br><span class="line">       &#125;</span><br><span class="line">       LoopImages.prototype = &#123;</span><br><span class="line">           creatImage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œå­˜ç…§ç‰‡&#x27;</span>);</span><br><span class="line">           &#125;,</span><br><span class="line">           changeImage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œæ˜¾ç¤ºåˆ‡æ¢ä¸‹ä¸€å¼ ç…§ç‰‡&#x27;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä¸Šä¸‹åˆ‡æ¢ç±»</span></span><br><span class="line">       <span class="keyword">var</span> SlidLoopImage = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container</span>) </span>&#123;</span><br><span class="line">           LoopImages.call(<span class="built_in">this</span>, imgArr, container);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       SlidLoopImage.prototype = <span class="keyword">new</span> LoopImages();</span><br><span class="line">       SlidLoopImage.prototype.changeImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œé‡å†™ç»§æ‰¿åˆ‡æ¢ä¸‹ä¸€å¼ å›¾ç‰‡æ–¹æ³•&#x27;</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//å·¦å³åˆ‡æ¢ç±»</span></span><br><span class="line">       <span class="keyword">var</span> FadeLoopImage = <span class="function"><span class="keyword">function</span>(<span class="params">imgArr, container, arrow</span>) </span>&#123;</span><br><span class="line">           LoopImages.call(<span class="built_in">this</span>, imgArr, container);</span><br><span class="line">           <span class="built_in">this</span>.arrow = arrow;</span><br><span class="line">       &#125;</span><br><span class="line">       FadeLoopImage.prototype = <span class="keyword">new</span> LoopImages();</span><br><span class="line">       FadeLoopImage.prototype.changeImage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&#x27;è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯é‡å†™å·¦å³åˆ‡æ¢æ–¹æ³•&#x27;</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line">       <span class="built_in">console</span>.log(fadeImage.container);</span><br><span class="line">       fadeImage.changeImage();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//åŸå‹æ‰©å±•</span></span><br><span class="line">       <span class="comment">//åŸå‹å¯¹è±¡æ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡æˆ–è€…å­ç±»çš„ç»§æ‰¿ï¼›éƒ½æ˜¯å®ƒçš„ä¸€ä¸ªæŒ‡å‘</span></span><br><span class="line">       <span class="comment">//ä»»ä½•æ—¶å€™å¯¹åŸºç±»ä¼™å­å­ç±»è¿›è¡Œæ–¹æ³•çš„æ‰©å±•</span></span><br><span class="line">       LoopImages.prototype.getImageLength = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">this</span>.imagesArray.length;</span><br><span class="line">       &#125;</span><br><span class="line">       FadeLoopImage.prototype.getContainer = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">this</span>.container;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="built_in">console</span>.log(fadeImage.getImageLength); <span class="comment">//è·å–å®ƒçš„æ–°æ–¹æ³•</span></span><br><span class="line">       <span class="built_in">console</span>.log(fadeImage.getContainer);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</title>
      <link href="2017/09/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>2017/09/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>éœ€æ±‚åˆ†æï¼šå‘å¸ƒç®€å† ç§ç±»å¤šç›®çš„ä¸ºäº†åˆ›å»ºå¯¹è±¡ï¼Œ<br>æ›´å…³å¿ƒåˆ›é€ è¿™ä¸ªå¯¹è±¡çš„æ•´ä¸ªè¿‡ç¨‹<br><a id="more"></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Human = <span class="function"><span class="keyword">function</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">this</span>.skill = param &amp;&amp; param.skill || <span class="string">&#x27;ä¿å¯†&#x27;</span>;</span><br><span class="line">           <span class="built_in">this</span>.hobby = param &amp;&amp; param.hobby || <span class="string">&#x27;ä¿å¯†&#x27;</span>;</span><br><span class="line">       &#125;;</span><br><span class="line">       Human.prototype = &#123;</span><br><span class="line">           getSkill: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="built_in">this</span>.skill;</span><br><span class="line">           &#125;,</span><br><span class="line">           getHobby: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="built_in">this</span>.hobby;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">//æŠ½è±¡å‡ºå§“åè§£æç±»</span></span><br><span class="line">       <span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªå§“å</span></span><br><span class="line">       <span class="keyword">var</span> Name = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">           (<span class="function"><span class="keyword">function</span>(<span class="params">name, that</span>) </span>&#123;</span><br><span class="line">               that.wholeName = name;</span><br><span class="line">               <span class="keyword">if</span> (name.indexOf(<span class="string">&quot; &quot;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">                   that.FirstName = name.slice(<span class="number">0</span>, name.indexOf(<span class="string">&quot; &quot;</span>));</span><br><span class="line">                   that.SecondName = name.slice(name.indexOf(<span class="string">&quot; &quot;</span>));</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)(name, that)</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">//æŠ½è±¡å‡ºæœŸæœ›èŒä½ç±»</span></span><br><span class="line">       <span class="keyword">var</span> Work = <span class="function"><span class="keyword">function</span>(<span class="params">work</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">           (<span class="function"><span class="keyword">function</span>(<span class="params">work, that</span>) </span>&#123;</span><br><span class="line">               <span class="keyword">switch</span> (work) &#123;</span><br><span class="line">                   <span class="keyword">case</span> <span class="string">&#x27;code&#x27;</span>:</span><br><span class="line">                       that.work = <span class="string">&#x27;å·¥ç¨‹å¸ˆ&#x27;</span>;</span><br><span class="line">                       that.workDescript = <span class="string">&#x27;æ¯å¤©å–œæ¬¢ç¼–ç¨‹&#x27;</span>;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   <span class="keyword">case</span> <span class="string">&#x27;UI&#x27;</span>:</span><br><span class="line">                       that.work = <span class="string">&#x27;è®¾è®¡å¸ˆ&#x27;</span>;</span><br><span class="line">                       that.workDescript = <span class="string">&#x27;æ¯å¤©å–œæ¬¢è®¾è®¡&#x27;</span>;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   <span class="keyword">case</span> <span class="string">&#x27;teach&#x27;</span>:</span><br><span class="line">                       that.work = <span class="string">&#x27;æ•™å¸ˆ&#x27;</span>;</span><br><span class="line">                       that.workDescript = <span class="string">&#x27;æ¯å¤©å–œæ¬¢çœ‹ä¹¦&#x27;</span>;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   <span class="keyword">default</span>:</span><br><span class="line">                       that.work = work;</span><br><span class="line">                       that.workDescript = <span class="string">&#x27;å¯¹ä¸èµ·ï¼Œæˆ‘ä»¬ä¸æ¸…æ¥šä½ çš„èŒä¸š&#x27;</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)(work, that)</span><br><span class="line">           Work.prototype.changeWork = <span class="function"><span class="keyword">function</span>(<span class="params">work</span>) </span>&#123;</span><br><span class="line">               <span class="built_in">this</span>.work = work;</span><br><span class="line">           &#125;</span><br><span class="line">           Work.prototype.changeDes = <span class="function"><span class="keyword">function</span>(<span class="params">setence</span>) </span>&#123;</span><br><span class="line">               <span class="built_in">this</span>.workDescript = setence;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/****</span></span><br><span class="line"><span class="comment">        *    å»ºé€ è€…</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        ***/</span></span><br><span class="line">       <span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name, work</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> _person = <span class="keyword">new</span> Human();</span><br><span class="line">           _person.name = <span class="keyword">new</span> Name(name);</span><br><span class="line">           _person.work = <span class="keyword">new</span> Work(work);</span><br><span class="line">           <span class="keyword">return</span> _person;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">&quot;jack chan&quot;</span>, <span class="string">&quot;code&quot;</span>);</span><br><span class="line">       <span class="built_in">console</span>.log(person.skill);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹ç»™æˆ‘ä¸€å¼ åç‰‡å·¥å‚æ¨¡å¼</title>
      <link href="2017/09/19/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%99%E6%88%91%E4%B8%80%E5%BC%A0%E5%90%8D%E7%89%87%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>2017/09/19/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%99%E6%88%91%E4%B8%80%E5%BC%A0%E5%90%8D%E7%89%87%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®ç»ç†è¦æ±‚å°ç™½åšä¸€ä¸ªéœ€æ±‚æŠ•æ”¾å„å¼å„æ ·çš„å¹¿å‘Š<br>éœ€æ±‚æ€»åœ¨å˜å¦‚ä½•åº”å¯¹ï¼Ÿ<br><a id="more"></a></p><h5 id="ä¼ ç»Ÿå†™æ³•"><a href="#ä¼ ç»Ÿå†™æ³•" class="headerlink" title="ä¼ ç»Ÿå†™æ³•"></a>ä¼ ç»Ÿå†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Java = <span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.content = content;</span><br><span class="line">    <span class="comment">//é—­åŒ…æ‰§è¡Œ</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">        div.innerHTML = content;</span><br><span class="line">        div.style.color = <span class="string">&quot;pink&quot;</span>;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&#x27;container&#x27;</span>).appendChild(div);</span><br><span class="line">    &#125;)(content);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> Php = <span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">        <span class="comment">//é—­åŒ…æ‰§è¡Œ</span></span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">            div.innerHTML = content;</span><br><span class="line">            div.style.color = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">&#x27;container&#x27;</span>).appendChild(div);</span><br><span class="line">        &#125;)(content);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å·¥å‚æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">JobFactory</span>(<span class="params">type, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;Java&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Java(content);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;Php&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Php(content);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ”¹è¿›å†™æ³•"><a href="#æ”¹è¿›å†™æ³•" class="headerlink" title="æ”¹è¿›å†™æ³•"></a>æ”¹è¿›å†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Factory = <span class="function"><span class="keyword">function</span>(<span class="params">type, content</span>) </span>&#123; </span><br><span class="line">  <span class="comment">//è¿ç”¨å®‰å…¨æ¨¡å¼  åˆ¤æ–­æ˜¯å¦ä¸ºnewåˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> <span class="keyword">instanceof</span> Factory) &#123;</span><br><span class="line">        <span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">this</span>[type](content);</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Factory(type, content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Factory.prototype = &#123;</span><br><span class="line">    Java: <span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">        <span class="comment">//é—­åŒ…æ‰§è¡Œ</span></span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">            div.innerHTML = content;</span><br><span class="line">            div.style.color = <span class="string">&quot;skyblue&quot;</span>;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">&#x27;container&#x27;</span>).appendChild(div);</span><br><span class="line">        &#125;)(content);</span><br><span class="line">    &#125;,</span><br><span class="line">    Php: <span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">        <span class="comment">//é—­åŒ…æ‰§è¡Œ</span></span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">            div.innerHTML = content;</span><br><span class="line">            div.style.color = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">&#x27;container&#x27;</span>).appendChild(div);</span><br><span class="line">        &#125;)(content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = [&#123;</span><br><span class="line">    type: <span class="string">&#x27;Java&#x27;</span>,</span><br><span class="line">    content: <span class="string">&quot;Javaå¼€å‘å“ªå®¶å¼º&quot;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    type: <span class="string">&#x27;Php&#x27;</span>,</span><br><span class="line">    content: <span class="string">&quot;Phpå¼€å‘å“ªå®¶å¼º&quot;</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">    Factory(data[i].type, data[i].content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹ç®€å•å·¥å‚æ¨¡å¼</title>
      <link href="2017/09/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9E%8B%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>2017/09/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9E%8B%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>éœ€æ±‚ç™»é™†æ¨¡å—ç”¨æˆ·è¾“å…¥æ¡†éœ€æ±‚ï¼šæœ‰å¤šç§æç¤ºæ¡†ï¼Œå¦‚ç¡®è®¤æ¡†ï¼Œè­¦å‘Šæ¡†ï¼Œè¾“å…¥æ¡†ï¼›<br><a id="more"></a></p><h5 id="ä¼ ç»Ÿå†™æ³•"><a href="#ä¼ ç»Ÿå†™æ³•" class="headerlink" title="ä¼ ç»Ÿå†™æ³•"></a>ä¼ ç»Ÿå†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ ç»Ÿçš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> LoginAlert = <span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.content = text;</span><br><span class="line">&#125;</span><br><span class="line">LoginAlert.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> userNameAlert = <span class="keyword">new</span> LoginAlert(<span class="string">&#x27;ç”¨æˆ·åä¸èƒ½å¤šäº16ä¸ªå­—æ¯æˆ–è€…æ•°å­—&#x27;</span>)</span><br><span class="line">userNameAlert.show();</span><br><span class="line"><span class="keyword">var</span> passwordAlert = <span class="keyword">new</span> LoginAlert(<span class="string">&#x27;è¾“å…¥çš„å¯†ç ä¸æ­£ç¡®&#x27;</span>);</span><br><span class="line">passwordAlert.show();</span><br><span class="line"><span class="comment">//å¤šä¸€ä¸ªæŒ‰é’®çš„æç¤ºæ¡†</span></span><br><span class="line"><span class="keyword">var</span> LoginPrompt = <span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.content = text;</span><br><span class="line">&#125;</span><br><span class="line">LoginPrompt.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> userLoginPrompt = <span class="keyword">new</span> LoginPrompt(<span class="string">&quot;ä»Šå¤©çš„å¿ƒæ°”æ˜¯&quot;</span>);</span><br><span class="line">userLoginPrompt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ”¹è¿›å†™æ³•"><a href="#æ”¹è¿›å†™æ³•" class="headerlink" title="æ”¹è¿›å†™æ³•"></a>æ”¹è¿›å†™æ³•</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">creatPop</span>(<span class="params">type, text</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> num;</span><br><span class="line">           <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">           o.content = text;</span><br><span class="line">           o.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="comment">//æ˜¾ç¤º</span></span><br><span class="line">               <span class="comment">//æ˜¾ç¤ºé€šç”¨æ ·å¼</span></span><br><span class="line">               alert(num + text);</span><br><span class="line">           &#125;;</span><br><span class="line">           <span class="keyword">if</span> (type == <span class="string">&quot;alert&quot;</span>) &#123;</span><br><span class="line">               num = <span class="number">1</span>;</span><br><span class="line">               <span class="comment">//åªæ˜¾ç¤ºä¸€ä¸ªæŒ‰é’®</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (type == <span class="string">&quot;prompt&quot;</span>) &#123;</span><br><span class="line">               <span class="comment">//æ·»åŠ å¤šä¸€ä¸ªè¾“å…¥æ¡†</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (type == <span class="string">&quot;confirm&quot;</span>) &#123;</span><br><span class="line">               <span class="comment">//æ·»åŠ å¤šä¸€ä¸ªè¾“å…¥æ¡†å’Œä¸€ä¸ªæŒ‰é’®</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> o;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">var</span> userNameAlert = creatPop(<span class="string">&#x27;alert&#x27;</span>, <span class="string">&quot;ç”¨æˆ·ååªèƒ½6ä¸ªå­—æ¯æˆ–æ•°å­—&quot;</span>);</span><br><span class="line">       userNameAlert.show();</span><br><span class="line">       <span class="keyword">var</span> userNamePrompt= creatPop(<span class="string">&#x27;prompt&#x27;</span>, <span class="string">&quot;ç”¨æˆ·åå§“å&quot;</span>);</span><br><span class="line">       userNamePrompt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹æ‰¾ä¸ªæ£€å¯Ÿé•¿</title>
      <link href="2017/09/17/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%89%BE%E4%B8%AA%E6%A3%80%E5%AF%9F%E9%95%BF/"/>
      <url>2017/09/17/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%89%BE%E4%B8%AA%E6%A3%80%E5%AF%9F%E9%95%BF/</url>
      
        <content type="html"><![CDATA[<h5 id="newçš„å«ä¹‰"><a href="#newçš„å«ä¹‰" class="headerlink" title="newçš„å«ä¹‰"></a>newçš„å«ä¹‰</h5><p>newçš„ä½œç”¨å°±æ˜¯å¯¹å½“å‰å¯¹è±¡çš„thisçš„ä¸æ–­èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰newï¼Œå°±ä¼šæ‰§è¡Œå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œï¼Œæ‰€ä»¥thisæŒ‡å‘å¯¹è±¡è‡ªç„¶æ˜¯å…¨å±€å˜é‡ windowï¼›<br>bookå˜é‡å¾—ä¸åˆ°Bookè¿™ä¸ªç±»æ‰§è¡Œï¼Œæ‰€ä»¥undefinedï¼›<br><a id="more"></a></p><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨é—­åŒ…æ¥å®ç°</span></span><br><span class="line">  <span class="keyword">var</span> Book = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//é™æ€ç§æœ‰å˜é‡</span></span><br><span class="line">    <span class="keyword">var</span> bookNum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//é™æ€ç§æœ‰æ–¹æ³•  å¤–éƒ¨ä¸å¯è®¿é—®</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkBook</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">       alert(name)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//åˆ›å»ºç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_book</span>(<span class="params">id, name, price</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> name, price;</span><br><span class="line">      <span class="comment">//ç‰¹æƒæ–¹æ³•</span></span><br><span class="line">      <span class="built_in">this</span>.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      <span class="built_in">this</span>.getPrice = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      <span class="built_in">this</span>.setPrice = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      <span class="built_in">this</span>.id = id;</span><br><span class="line">      <span class="built_in">this</span>.copy = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      bookNum++;</span><br><span class="line">      <span class="keyword">if</span> (bookNum &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;å‡ºé”™äº†ï¼&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.setName(name);</span><br><span class="line">      <span class="built_in">this</span>.setPrice(price)</span><br><span class="line">    &#125;</span><br><span class="line">    _book.prototype = &#123;</span><br><span class="line">      isJsBook: <span class="literal">false</span>,</span><br><span class="line">      display: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _book;</span><br><span class="line">  &#125;)()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> b = <span class="keyword">new</span> Book(<span class="number">11</span>,<span class="string">&quot;javascript&quot;</span>,<span class="number">40</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(b.bookNum); <span class="comment">//--&gt;undefined</span></span><br><span class="line">  <span class="built_in">console</span>.log(b.isJsBook); <span class="comment">//--&gt;false</span></span><br><span class="line">  <span class="built_in">console</span>.log(b.id); <span class="comment">//--&gt;11</span></span><br><span class="line"><span class="comment">//  console.log(b.checkBook(&quot;jack&quot;)); //--&gt; b.checkBook is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> Book0 = <span class="function"><span class="keyword">function</span>(<span class="params">title, time, type</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.title = title;</span><br><span class="line">    <span class="built_in">this</span>.time = time;</span><br><span class="line">    <span class="built_in">this</span>.type = type;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> book0 = Book0(<span class="number">112</span>, <span class="string">&quot;css&quot;</span>, <span class="number">40</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(book0); <span class="comment">//--&gt;undefined æ²¡æœ‰newå®ä¾‹åŒ–</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">window</span>.title); <span class="comment">//--&gt;112</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//å»æ‰¾æ£€å¯Ÿé•¿åˆ¤å®šæ˜¯å¦å®ä¾‹åŒ–</span></span><br><span class="line">  <span class="keyword">var</span> Book1 = <span class="function"><span class="keyword">function</span>(<span class="params">tit, time, type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> <span class="keyword">instanceof</span> Book) &#123;</span><br><span class="line">      <span class="built_in">this</span>.tit = tit;</span><br><span class="line">      <span class="built_in">this</span>.time = time;</span><br><span class="line">      <span class="built_in">this</span>.type = type;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Book1(tit, time, type);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> book1 = Book1(<span class="number">12</span>, <span class="string">&quot;javascript&quot;</span>, <span class="number">40</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(book1);</span><br><span class="line">  <span class="built_in">console</span>.log(book1.tit);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">window</span>.tit); <span class="comment">//--&gt;undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹å°è£…æ˜æ˜Ÿ</title>
      <link href="2017/09/16/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B0%81%E8%A3%85%E6%98%8E%E6%98%9F/"/>
      <url>2017/09/16/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B0%81%E8%A3%85%E6%98%8E%E6%98%9F/</url>
      
        <content type="html"><![CDATA[<p>é¢å‘å¯¹è±¡æ˜¯æ€æƒ³<br><a id="more"></a></p><h4 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Book = <span class="function"><span class="keyword">function</span>(<span class="params">id, name, price</span>)</span>&#123;</span><br><span class="line">          <span class="built_in">this</span>.id =id;</span><br><span class="line">     &#125;</span><br><span class="line">     Book.prototype =&#123;</span><br><span class="line">        display:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h5><p>é€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•ä¸é€šè¿‡prototypeæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>é€šè¿‡thisæ·»åŠ æ—¶åœ¨<code>å½“å‰å¯¹è±¡</code>ä¸Šæ·»åŠ çš„ï¼Œ<br>æ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å®ƒéƒ½æœ‰ä¸€ä¸ªåŸå‹prototypeæŒ‡å‘å…¶ç»§æ‰¿çš„å±æ€§æ–¹æ³•ï¼Œè¿™æ ·é€šè¿‡prototypeç»§æ‰¿çš„æ–¹æ³•å¹¶ä¸æ˜¯è‡ªèº«ï¼Œthisçš„å±æ€§å’Œæ–¹æ³•æ˜¯è‡ªèº«æ‹¥æœ‰ï¼Œæ¯æ¬¡é€šè¿‡ç±»åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æŒ‡å‘è‡ªèº«å±æ€§å’Œæ–¹æ³•<br>è€Œé€šè¿‡prototypeç»§æ‰¿é€šè¿‡ç±»åˆ›å»ºå±æ€§å’Œæ–¹æ³•ä¸ä¼šå†æ¬¡åˆ›å»º</p><h5 id="constructoræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#constructoræ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="constructoræ˜¯ä»€ä¹ˆï¼Ÿ"></a>constructoræ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>åœ¨prototypeå¯¹è±¡ä¸­ä¼šå‡ºç°ä¸€ä¸ªå’Œå‡½æ•°åˆ›å»ºthisä¸€æ ·çš„ä¸€ä¸ªconstructorå±æ€§<br>constructorå±æ€§æŒ‡å‘å°±æ˜¯æ‹¥æœ‰è¿™ä¸ªåŸå‹å¯¹è±¡çš„å‡½æ•°æˆ–å¯¹è±¡</p><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Book = <span class="function"><span class="keyword">function</span>(<span class="params">id, name, price</span>) </span>&#123;</span><br><span class="line">     <span class="comment">//ç§æœ‰å±æ€§ä¸å¯é€šè¿‡å®ä¾‹åŒ–ç‚¹è¯­æ³•è®¿é—®</span></span><br><span class="line">     <span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">checkId</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="built_in">this</span>.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="built_in">this</span>.getPrice = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="built_in">this</span>.setPrice = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="comment">//å…¬æœ‰å±æ€§</span></span><br><span class="line">     <span class="built_in">this</span>.id = id;</span><br><span class="line">     <span class="comment">//å…¬æœ‰æ–¹æ³•</span></span><br><span class="line">     <span class="built_in">this</span>.copy = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">     <span class="built_in">this</span>.setName(name);</span><br><span class="line">     <span class="built_in">this</span>.setPrice(price);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//é™æ€å…¬æœ‰å±æ€§</span></span><br><span class="line">   Book.isChinese = <span class="literal">true</span>;</span><br><span class="line">   <span class="comment">//é™æ€å…¬æœ‰æ–¹æ³•</span></span><br><span class="line">   Book.resetTime = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&quot;new Time&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//å…¬æœ‰å±æ€§ä¸æ–¹æ³•</span></span><br><span class="line">   Book.prototype = &#123;</span><br><span class="line">     isJsBook: <span class="literal">false</span>,</span><br><span class="line">     display: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> b = <span class="keyword">new</span> Book(<span class="number">11</span>, <span class="string">&quot;javascript&quot;</span>, <span class="number">50</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(b.num); <span class="comment">//--&gt; undefined</span></span><br><span class="line">   <span class="built_in">console</span>.log(b.isJsBook); <span class="comment">//--&gt;false</span></span><br><span class="line">   <span class="built_in">console</span>.log(b.id); <span class="comment">//--&gt;11</span></span><br><span class="line">   <span class="built_in">console</span>.log(b.isChinese); <span class="comment">//--&gt;undefined</span></span><br><span class="line">   <span class="comment">//ç±»çš„é™æ€å…¬æœ‰å±æ€§é€šè¿‡ç±»è‡ªèº«æ¥è®¿é—®</span></span><br><span class="line">   <span class="built_in">console</span>.log(Book.isChinese); <span class="comment">//--&gt;true</span></span><br><span class="line">   <span class="built_in">console</span>.log(Book.resetTime()); <span class="comment">// --&gt;new Time</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹æ•°ç»„å¯¹è±¡çŸ¥è¯†ç‚¹æ€»ç»“</title>
      <link href="2017/09/14/JAVASCRIPT%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/"/>
      <url>2017/09/14/JAVASCRIPT%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>æ•°ç»„å¯¹è±¡æ˜¯ä½¿ç”¨å•ç‹¬çš„å˜é‡åæ¥å­˜å‚¨ä¸€ç³»åˆ—çš„å€¼ï¼›æ•°ç»„å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡åå­˜å‚¨æ‰€æœ‰çš„å€¼ï¼Œå¹¶ä¸”å¯ä»¥ç”¨å˜é‡åè®¿é—®ä»»ä½•ä¸€ä¸ªå€¼ï¼›æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„çš„IDç´¢å¼•ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«è®¿é—®åˆ°â€¦â€¦<br><a id="more"></a><br>JavaScriptæ•°ç»„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„å˜é‡ç±»å‹ã€‚æ•°ç»„å…ƒç´ å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯å¯¹è±¡å…ƒç´ ï¼Œå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¦ä¸€ä¸ªæ•°ç»„â€¦â€¦</p><p>JavaScript Arrayå¯¹è±¡å±æ€§æœ‰constructorï¼ˆå¼•ç”¨æ•°ç»„å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼‰ï¼Œlengthï¼ˆè¿”å›æ•°ç»„çš„é•¿åº¦ï¼‰ï¼Œprototype(å¢åŠ å±æ€§æˆ–æ–¹æ³•æ‰©å±•æ•°ç»„å®šä¹‰)ã€‚</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/js%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84.jpg"                      alt="image"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;æ•°ç»„å¯¹è±¡&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="literal">null</span>,<span class="string">&quot;&quot;</span>,<span class="literal">undefined</span>];</span><br><span class="line"> <span class="keyword">var</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="literal">null</span>];</span><br><span class="line"> <span class="built_in">console</span>.log(arr.toString()); <span class="comment">//--&gt;&quot;1,3,1,4,0,,,&quot;</span></span><br><span class="line"> <span class="built_in">console</span>.log(arr.valueOf());<span class="comment">//--&gt;Array [ 1, 3, 1, 4, 0, null, &quot;&quot;, undefined ]</span></span><br><span class="line"> <span class="built_in">console</span>.log(arr.concat(arr2));<span class="comment">//--&gt;Array [ 1, 3, 1, 4, 0, null, &quot;&quot;, undefined, 1, 2, å¤šäº 1â€¦ ]</span></span><br><span class="line"> <span class="built_in">console</span>.log(arr.reverse())<span class="comment">//--&gt;Array [ undefined, &quot;&quot;, null, 0, 4, 1, 3, 1 ]</span></span><br><span class="line"> <span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>,<span class="number">3</span>));<span class="comment">//--&gt;Array [ &quot;&quot;, null, 0 ]</span></span><br><span class="line"> <span class="built_in">console</span>.log(arr2.slice(<span class="number">1</span>, <span class="number">2</span>));<span class="comment">//--&gt;Array [ 2 ]</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> Javascript </tag>
            
            <tag> DOM </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å‰è¦äº†è§£è¿™äº›</title>
      <link href="2017/09/14/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%89%8D%E8%A6%81%E4%BA%86%E8%A7%A3%E8%BF%99%E4%BA%9B/"/>
      <url>2017/09/14/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%89%8D%E8%A6%81%E4%BA%86%E8%A7%A3%E8%BF%99%E4%BA%9B/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åˆšè¿›å…¥å…¬å¸éƒ½æ˜¯å°ç™½ï¼ŒæŸå¤©å…¬å¸é¡¹ç›®ç»ç†ç»™è®©åšä¸€ä¸ªè¡¨å•éªŒè¯</p><p>90%çš„ä½ ä¼šåšè¿™æ ·çš„ä¼ ç»Ÿçš„é¢ç›¸è¿‡ç¨‹ç¼–ç¨‹<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303013854.png"                      alt=""                ><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ ç»Ÿé¢ç›¸è¿‡ç¨‹</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">       <span class="comment">// body... </span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">checkEmail</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">       <span class="comment">// body... </span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">checkPwd</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">       <span class="comment">// body... </span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ç¼ºç‚¹ï¼šè®¾ç½®äº†å¾ˆå¤šå…¨å±€å˜é‡ï¼Œä¸åˆ©äºå›¢é˜Ÿå¼€å‘</p><p>å› ä¸ºè¿™è·Ÿä¸‹é¢çš„å˜é‡åæå‰åœ¨functionæ²¡æœ‰åŒºåˆ«ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//éªŒè¯å§“å</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å¦‚æœå›¢é˜Ÿä¸­æœ‰äººè·Ÿä½ ç”¨äº†åŒä¸€ä¸ªå˜é‡åå®šä¹‰äº†æ–¹æ³•é‚£ä½ çš„æ–¹æ³•å°±è¢«è¦†ç›–äº†</strong></p><p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä¼˜åŒ–ï¼š<br>å…ˆçœ‹çœ‹ç”¨<code>å¯¹è±¡æ”¶ç¼–å˜é‡</code>çš„æ–¹æ³•è¯•è¯•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥å§“å&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = CheckObject.checkName();</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¹Ÿæœ‰ç¼ºç‚¹ï¼šå½“åˆ«äººæƒ³ç”¨ä½ ä»£ç çš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¸ªå¯¹è±¡ä¸èƒ½å¤åˆ¶ä¸€ä»½æˆ–è€…è¯´è¿™ä¸ªå¯¹è±¡<code>new</code>å‡ºæ¥çš„æ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡ä¸­æ²¡æœ‰<code>ç»§æ‰¿</code>è¿™äº›æ–°æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¢«newä¹‹åæ–¹æ³•  æ–°å»ºå¯¹è±¡å†…éƒ¨æ²¡æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> CheckObject();</span><br><span class="line"><span class="comment">// console.log(b.checkName());  </span></span><br><span class="line"><span class="comment">//index.js:18 Uncaught TypeError: b.checkName is not a function</span></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303012130.png"                      alt=""                ></p><h4 id="ç±»ä¹Ÿå¯ä»¥"><a href="#ç±»ä¹Ÿå¯ä»¥" class="headerlink" title="ç±»ä¹Ÿå¯ä»¥"></a>ç±»ä¹Ÿå¯ä»¥</h4><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥æ·»åŠ <code>this</code>å…³é”®å­—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;newæ£€æŸ¥å§“å&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> a2 = <span class="keyword">new</span> CheckObject();</span><br><span class="line"><span class="built_in">console</span>.log(a2);</span><br><span class="line"><span class="comment">//CheckObject &#123;checkName: Æ’&#125;</span></span><br><span class="line"><span class="comment">// checkName: Æ’()</span></span><br><span class="line"><span class="comment">// __proto__: Object</span></span><br><span class="line"> </span><br><span class="line"> <span class="built_in">console</span>.log(a2.checkName());</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303012424.png"                      alt=""                ></p><p>ä½†è¿™ä¸ªè¿˜æ˜¯æœ‰ä¸€ç‚¹ç¼ºç‚¹ï¼š<br>æˆ‘ä»¬æŠŠæ‰€æœ‰æ–¹æ³•éƒ½æ”¾åœ¨å‡½æ•°å†…éƒ¨ï¼Œé€šè¿‡thiså®šä¹‰ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡é€šè¿‡<code>new</code>å…³é”®è¯æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œthisä¸Šçš„å±æ€§è¿›è¡Œå¤åˆ¶ï¼Œç„¶è€Œæœ‰æ—¶å€™è¿™æ ·çš„æ–¹æ³•åˆ›å»ºé€ æˆçš„<code>æ€§èƒ½æ¶ˆè€—</code>æ˜¯å¾ˆå¥¢ä¾ˆçš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/********************************* */</span></span><br><span class="line"><span class="comment">/*************æ£€æŸ¥ */</span></span><br><span class="line"> <span class="keyword">var</span> CheckObject           = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">     CheckObject.prototype = &#123;</span><br><span class="line">     checkName:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥å§“ånew&#x27;</span>);</span><br><span class="line">     &#125;,</span><br><span class="line">     checkAge : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥å¹´é¾„new&#x27;</span>);</span><br><span class="line">     &#125;,</span><br><span class="line">     checkSex :<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥æ€§åˆ«new&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> c = <span class="keyword">new</span> CheckObject();</span><br><span class="line"> c.checkName();</span><br><span class="line"> c.checkAge();</span><br><span class="line"> c.checkSex();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ ·åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å®ä¾‹æ‰€æ‹¥æœ‰çš„æ–¹æ³•å°±åªæœ‰ä¸€ä¸ªäº†ï¼Œå› ä¸ºä»–ä»¬éƒ½è¦åœ¨<code>prototype</code>åŸå‹ä¾æ¬¡å¯»æ‰¾ï¼Œæ‰¾åˆ°éƒ½æ˜¯åŒä¸€ä¸ª</p><h4 id="æ–¹æ³•è¿˜å¯ä»¥é“¾å¼è°ƒç”¨"><a href="#æ–¹æ³•è¿˜å¯ä»¥é“¾å¼è°ƒç”¨" class="headerlink" title="æ–¹æ³•è¿˜å¯ä»¥é“¾å¼è°ƒç”¨"></a>æ–¹æ³•è¿˜å¯ä»¥é“¾å¼è°ƒç”¨</h4><p>å¦‚æœå¯¹aå†™ä¸‰éè°ƒç”¨ä¹Ÿå¤ªéº»çƒ¦äº†æ‰€ä»¥æˆ‘ä»¬ç”¨thisåšè¿”å›ï¼Œå› ä¸ºthisæŒ‡å‘çš„å°±æ˜¯å½“å‰å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject           = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">    CheckObject.prototype = &#123;</span><br><span class="line">   checkName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥å§“ånew&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span> <span class="comment">//è¿”å›å½“å‰å¯¹è±¡</span></span><br><span class="line">   &#125;,</span><br><span class="line">   checkAge: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥å¹´é¾„new&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">   &#125;,</span><br><span class="line">   checkSex: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;æ£€æŸ¥æ€§åˆ«new&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> CheckObject();</span><br><span class="line">d.checkName().checkSex().checkSex();</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/20190303013248.png"                      alt=""                ></p><h4 id="å‡½æ•°çš„ç¥–å…ˆ"><a href="#å‡½æ•°çš„ç¥–å…ˆ" class="headerlink" title="å‡½æ•°çš„ç¥–å…ˆ"></a>å‡½æ•°çš„ç¥–å…ˆ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span>(<span class="params">name,fn</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>[name] = fn;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æœ€åä¸¾ä¸€ä¸ªç®€å•æ —å­"><a href="#æœ€åä¸¾ä¸€ä¸ªç®€å•æ —å­" class="headerlink" title="æœ€åä¸¾ä¸€ä¸ªç®€å•æ —å­"></a>æœ€åä¸¾ä¸€ä¸ªç®€å•æ —å­</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¡¨å•éªŒè¯éœ€æ±‚<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">       éœ€æ±‚è¯´æ˜ï¼šç»™è¡¨å•æäº¤å¡«å†™éªŒè¯ç æ ¡éªŒæ–¹æ³•</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    ç”¨æˆ·åï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span> é‚®ç®±ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span> å¯†ç ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;11&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> name = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> email = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;input&quot;</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> pwd = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;input&quot;</span>)[<span class="number">2</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;input&quot;</span>)[<span class="number">3</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//è¿è¡Œ</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> nameVal = name.value;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(nameVal);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> emailVal = email.value;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> pwdVal = pwd.value;</span></span><br><span class="line">            method.checkName(nameVal).checkEmail(emailVal).checkPwd(pwdVal);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">//åŸå‹è¿ä¸Šæ·»åŠ æ–¹æ³•  é¿å…å…¨å±€æ±¡æŸ“</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span>(<span class="params">name, fn</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// body... </span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>[name] = fn;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> method = <span class="keyword">new</span> <span class="built_in">Function</span>();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    method.addMethod(<span class="string">&quot;checkName&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span></span><br><span class="line">        if (!str) &#123;</span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str.length &lt; <span class="number">6</span>) &#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;ç”¨æˆ·åé•¿åº¦å¤§äº6&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="built_in">this</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    method.addMethod(<span class="string">&quot;checkEmail&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span></span><br><span class="line">        if (!str) &#123;</span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;è¿™æ˜¯éªŒè¯é‚®ç®±&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="built_in">this</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    method.addMethod(<span class="string">&quot;checkPwd&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span></span><br><span class="line">        if (!str) &#123;</span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;è¿™æ˜¯è¾“å…¥éªŒè¯å¯†ç &#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str.length &lt; <span class="number">6</span>) &#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;è¿™æ˜¯å¤§äº6ä½éªŒè¯å¯†ç &#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="built_in">this</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹DOMçŸ¥è¯†ç‚¹æ€»ç»“</title>
      <link href="2017/09/13/Javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BDOM%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/"/>
      <url>2017/09/13/Javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BDOM%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>JavaScriptçš„windowå¯¹è±¡å¯¹åº”ç€æµè§ˆå™¨çª—å£æœ¬èº«ï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ç»Ÿç§°ä¸ºBOMï¼ˆæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œå¦‚window.open(),window.locationç­‰ã€‚<br><a id="more"></a></p><p>JavaScriptçš„documentå¯¹è±¡æ˜¯æŒ‡æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œä¸»è¦æ˜¯å¤„ç†ç½‘é¡µå†…å®¹ã€‚DOMï¼ˆDocument Object Modelï¼‰å³æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œæ˜¯é’ˆå¯¹ HTML å’Œ XML æ–‡æ¡£çš„ API ã€‚å­—æ¯DæŒ‡documentï¼ˆæ–‡æ¡£ï¼‰ï¼Œå­—æ¯OæŒ‡objectï¼ˆå¯¹è±¡ï¼‰ï¼Œå­—æ¯æŒ‡Modelï¼ˆæ¨¡å‹ï¼‰ã€‚DOM æç»˜äº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„èŠ‚ç‚¹æ ‘ã€‚èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªè¿æ¥ç‚¹ï¼Œæ–‡æ¡£æ˜¯ç”±èŠ‚ç‚¹æ„æˆçš„é›†åˆï¼ŒDOMçš„èŠ‚ç‚¹ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šå…ƒç´ èŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹ï¼ˆä¸æ˜¯æ–‡æœ¬å†…å®¹ï¼‰ã€å±æ€§èŠ‚ç‚¹ã€‚</p><h5 id="è·å–èŠ‚ç‚¹çš„åç§°å’Œç±»å‹"><a href="#è·å–èŠ‚ç‚¹çš„åç§°å’Œç±»å‹" class="headerlink" title="è·å–èŠ‚ç‚¹çš„åç§°å’Œç±»å‹"></a>è·å–èŠ‚ç‚¹çš„åç§°å’Œç±»å‹</h5><p><code>nodeName</code>å±æ€§ç”¨æ¥è·å–èŠ‚ç‚¹çš„åç§°ï¼Œæ–‡æœ¬èŠ‚ç‚¹è¿”å›#text,å…ƒç´ èŠ‚ç‚¹è¿”å›æ ‡ç­¾åç§°ï¼ˆæ­¤æ—¶ç­‰ä»·äºtagNameï¼‰ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.<code>nodeName</code></p><p><code>nodeType</code>å±æ€§ç”¨æ¥è·å–èŠ‚ç‚¹çš„ç±»å‹ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼š1ï¼Œå±æ€§èŠ‚ç‚¹ï¼š2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ï¼š3ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.<code>nodeType</code><br>nodeValueå±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®èŠ‚ç‚¹çš„å€¼ã€‚å…ƒç´ èŠ‚ç‚¹è¿”å› <code>null</code> ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.<code>nodeValue</code></p><h5 id="è·å–å…ƒç´ èŠ‚ç‚¹çš„æ–¹å¼"><a href="#è·å–å…ƒç´ èŠ‚ç‚¹çš„æ–¹å¼" class="headerlink" title="è·å–å…ƒç´ èŠ‚ç‚¹çš„æ–¹å¼"></a>è·å–å…ƒç´ èŠ‚ç‚¹çš„æ–¹å¼</h5><p><code>document.getElementById</code> é€šè¿‡IDæŸ¥æ‰¾ï¼Œè¿”å›å”¯ä¸€å…ƒç´ èŠ‚ç‚¹</p><p><code>document.getElementsByName</code> é€šè¿‡è¡¨å•å…ƒç´ nameå±æ€§æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„</p><p><code>document.getElementsByTagName</code> é€šè¿‡æ ‡ç­¾åç§°æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„<br>ä»¥ä¸‹ä¸‰ç§æ–¹æ³•å±äºHTML5 DOMï¼Œå¹¶éæ‰€æœ‰æµè§ˆå™¨æ”¯æŒï¼ˆå¦‚æŸäº›ä½ç‰ˆæœ¬IEå°±ä¸æ”¯æŒï¼‰ï¼Œå±äºé«˜çº§æ–¹æ³•</p><p><code>document.getElementsByClassName</code> é€šè¿‡classå±æ€§çš„ç±»åæŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„</p><p><code>document.querySelector</code>é€šè¿‡selectoræ¡ä»¶è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œåªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹<br><code>document.querySelectorAll</code>é€šè¿‡selectoræ¡ä»¶è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œè¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ èŠ‚ç‚¹æ•°ç»„ï¼Œå¤šæ¡ä»¶ä½¿ç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºè¦æŸ¥æ‰¾çš„å…ƒç´ å¿…é¡»ç¬¦åˆæ‰€æœ‰é€—å·åˆ†éš”çš„æ¡ä»¶ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ åªç¬¦åˆé€—å·åˆ†éš”çš„æ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼Œåˆ™ä¸ä¼šè¢«è¿”å›</p><p>å°ç»“ï¼š <code>getElementById</code>å’Œ<code>querySelector</code>åªè¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œè€Œ<code>getElementsByName</code>ã€getElementsByTagNameã€<code>getElementsByClassName</code>ã€<code>querySelectorAll</code>è¿”å›çš„æ˜¯å…ƒç´ èŠ‚ç‚¹(ç±»)æ•°ç»„</p><h5 id="èŠ‚ç‚¹æŒ‡é’ˆ"><a href="#èŠ‚ç‚¹æŒ‡é’ˆ" class="headerlink" title="èŠ‚ç‚¹æŒ‡é’ˆ"></a>èŠ‚ç‚¹æŒ‡é’ˆ</h5><p><code>childNodes</code>å±æ€§ç”¨æ¥è·å–å…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œè¿”å›èŠ‚ç‚¹æ•°ç»„ã€‚è¯­æ³•ï¼š<code>çˆ¶èŠ‚ç‚¹.childNodes</code>;</p><p><code>children</code>å±æ€§å¯ä»¥ç”¨æ¥è·å–å¿½ç•¥äº†ç©ºç™½èŠ‚ç‚¹çš„æœ‰æ•ˆèŠ‚ç‚¹ï¼ˆåœ¨æŸäº›æµè§ˆå™¨ä¸Šï¼Œç©ºç™½ç¬¦æˆ–æ¢è¡Œç¬¦ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚è¯­æ³•ï¼š<code>çˆ¶èŠ‚ç‚¹.children</code>;</p><p><code>firstChild</code>å±æ€§å¯ä»¥ç”¨æ¥è·å–å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç­‰ä»·äº childNodes[0]ã€‚è¯­æ³•ï¼š<code>çˆ¶èŠ‚ç‚¹.firstChild</code>;</p><p><code>lastChild</code>å±æ€§å¯ä»¥ç”¨æ¥è·å–å…ƒç´ çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç­‰ä»·äº childNodes[childNodes.length-1]ã€‚è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.lastChild;</p><p><code>previousSibling</code>å±æ€§ç”¨æ¥è·å–ç›®æ ‡èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.previousSibling;</p><p><code>nextSibling</code>å±æ€§ç”¨æ¥è·å–ç›®æ ‡èŠ‚ç‚¹çš„åä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.nextSibling;</p><p><code>parentNode</code>å±æ€§ç”¨æ¥è·å–å·²çŸ¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šå­èŠ‚ç‚¹.parentNode;</p><p><code>ownerDocument</code>å±æ€§ç”¨æ¥å½“å‰èŠ‚ç‚¹æ‰€åœ¨æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ï¼Œç­‰ä»·äºdocumentã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.ownerDocument;</p><h5 id="èŠ‚ç‚¹çš„æ“ä½œ"><a href="#èŠ‚ç‚¹çš„æ“ä½œ" class="headerlink" title="èŠ‚ç‚¹çš„æ“ä½œ"></a>èŠ‚ç‚¹çš„æ“ä½œ</h5><p><code>createElement</code>æ–¹æ³•ç”¨æ¥åˆ›å»ºå…ƒç´ èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createElement(â€˜å…ƒç´ æ ‡ç­¾åç§°â€™);</p><p><code>createAttribute</code>æ–¹æ³•ç”¨æ¥åˆ›å»ºå±æ€§èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createAttribute(â€˜å±æ€§åç§°â€™);</p><p><code>createTextNode</code>æ–¹æ³•ç”¨æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createTextNode(â€˜æ–‡æœ¬å†…å®¹â€™);</p><p><code>appendChild</code>æ–¹æ³•ç”¨æ¥åœ¨ç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆå¯ä»¥æ˜¯createElementåˆ›å»ºçš„å…ƒç´ èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯createTextNodeåˆ›å»ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚è¯­æ³•ï¼šparent.appendChild(è¦æ’å…¥çš„èŠ‚ç‚¹);</p><p><code>insertBefore</code>æ–¹æ³•ç”¨æ¥åœ¨ç›®æ ‡å…ƒç´ çš„å‰é¢æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ èŠ‚ç‚¹ï¼Œæ­¤æ—¶çš„æŒ‡é’ˆåœ¨ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ä¸Šã€‚è¯­æ³•ï¼šparent.insertBefore(newElement,targetElement);</p><p>DOMä¸­æ²¡æœ‰insertAfterè¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥æ¨¡æ‹ŸinsertAfter;<br>/*</p><ul><li>newElement : è¦æ’å…¥çš„æ–°å…ƒç´ </li><li>targetElement : ç›®æ ‡å…ƒç´ <br>*/</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertAfter</span>(<span class="params">newElement,targetElement</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parent = targetElement.parentNode;</span><br><span class="line">    <span class="keyword">if</span>(parent.lastChild == targetElement)&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         å¦‚æœç›®æ ‡å…ƒç´ æ˜¯parentçš„æœ€åä¸€ä¸ªå­å…ƒç´ ï¼Œåˆ™æŠŠæ–°å…ƒç´ è¿½åŠ åˆ°parentå…ƒç´ ä¸Šï¼Œ</span></span><br><span class="line"><span class="comment">         ä¹Ÿå°±æ˜¯åœ¨parentçš„å­å…ƒç´ çš„æœ«å°¾ä½ç½®æ·»åŠ æ–°å…ƒç´  </span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        parent.appendChild(newElement);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          å¦åˆ™ï¼Œå°±æŠŠæ–°å…ƒç´ æ·»åŠ åˆ°ç›®æ ‡å…ƒç´ å’Œç›®æ ‡å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ä¹‹é—´    </span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        parent.insertBefore(newElement,targetElement.nextSibling);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>replaceChild</code>æ–¹æ³•ç”¨æ¥æ›¿æ¢ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œæ­¤æ—¶çš„æŒ‡é’ˆåœ¨ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ä¸Šã€‚è¯­æ³•ï¼šparent.replaceChild(replaceElement,targetElement);</p><p><code>cloneChild</code>æ–¹æ³•ç”¨æ¥å…‹éš†ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œä¼ é€’ä¸€ä¸ªå¸ƒå°”å‚æ•°ï¼Œå‚æ•°ä¸ºtrueæ—¶è¡¨ç¤ºå¤åˆ¶å½“å‰èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå‚æ•°ä¸ºfalseæ—¶è¡¨ç¤ºæ”¯ä»˜è‡³å½“å‰èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .cloneChild(true|false);</p><p><code>removeChild</code>æ–¹æ³•ç”¨æ¥åˆ é™¤ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šremoveChild(è¦åˆ é™¤çš„èŠ‚ç‚¹);</p><p><code>getAttribute</code>æ–¹æ³•ç”¨æ¥è·å–ä¸€ä¸ªå±æ€§çš„å€¼ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .getAttribute(å…ƒç´ å±æ€§åç§°);</p><p><code>setAttribute</code>æ–¹æ³•ç”¨æ¥è®¾ç½®ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ²¡æœ‰è¯¥å±æ€§åˆ™åˆ›å»ºã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .setAttribute(å…ƒç´ å±æ€§åç§°,å±æ€§å€¼);</p><p><code>removeAttribute</code>æ–¹æ³•ç”¨æ¥åˆ é™¤ä¸€ä¸ªå±æ€§èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .removeAttribute(è¦åˆ é™¤çš„å±æ€§åç§°);</p><h5 id="DOMæ“ä½œå†…å®¹"><a href="#DOMæ“ä½œå†…å®¹" class="headerlink" title="DOMæ“ä½œå†…å®¹"></a>DOMæ“ä½œå†…å®¹</h5><p><code>style</code>å±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®å…ƒç´ çš„è¡Œå†…æ ·å¼ã€‚è¯­æ³•ï¼šelement.style;styleå±æ€§åªèƒ½è·å–å’Œè®¾ç½®è¡Œå†…æ ·å¼ï¼Œå¯¹äºå¦‚font-sizeè¿™ç§æ ·å¼å±æ€§ï¼Œåº”è¯¥å»æ‰ - å¹¶ä¸”å°† - åé¢çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Œé©¼å³°æ³•æ¥è·å–å’Œè®¾ç½® å¦‚ï¼šelement.style.fontSize , element.style.backgroundColor</p><p><code>getComputedStyle</code>å…¨å±€æ–¹æ³•ç”¨æ¥è·å–è®¡ç®—åçš„æ ·å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç±»å‹ï¼Œå¦‚:hover,:activeç­‰ä¼ªç±»ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼  null ,æŸäº›IEç‰ˆæœ¬ä½¿ç”¨currentStyleå±æ€§æ¥è·å– box.currentStyleã€‚è¯­æ³•ï¼šwindow.getComputedStyle(å…ƒç´ ï¼Œç±»å‹)</p><p><code>className</code>å±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®å…ƒç´ çš„æ ·å¼åç§°ã€‚è¯­æ³•ï¼šelement.className<br>è‡ªå®šä¹‰çš„ addClass() | hasClass() | removeClass() æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ƒç´ æ˜¯å¦å«æœ‰æŸæ ·å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">element,className</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !!element.className.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(\\s|^)&#x27;</span>+className+<span class="string">&#x27;(\\s|$)&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘å…ƒç´ æ·»åŠ æ–°æ ·å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">element,className</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(hasClass(element,className) == <span class="literal">false</span>)&#123;</span><br><span class="line">          element.className += <span class="string">&#x27; &#x27;</span>+className;</span><br><span class="line">      &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//ç§»é™¤å…ƒç´ çš„æŒ‡å®šæ ·å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">element,className</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> currentClass = element.className;</span><br><span class="line">     <span class="keyword">if</span>(hasClass(element,className))&#123;</span><br><span class="line">         currentClass = currentClass.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(\\s|^)&#x27;</span>+className+<span class="string">&#x27;(\\s|$)&#x27;</span>),<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">            <span class="comment">//å»é™¤ç©ºæ ¼</span></span><br><span class="line">        currentClass = currentClass.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        element.className = currentClass;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="OMæ“ä½œä½ç½®å’Œå¤§å°"><a href="#OMæ“ä½œä½ç½®å’Œå¤§å°" class="headerlink" title="OMæ“ä½œä½ç½®å’Œå¤§å°"></a>OMæ“ä½œä½ç½®å’Œå¤§å°</h5><p><code>clientWidth</code>å±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…å®½åº¦ï¼Œè¯¥å€¼å—æ»šåŠ¨æ¡å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œborderä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.clientWidth;</p><p><code>clientHeigh</code>tå±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…é«˜åº¦ï¼Œè¯¥å€¼å—æ»šåŠ¨æ¡å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œborderä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.clientHeight;</p><p><code>offsetWidth</code>å±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…å®½åº¦ï¼Œè¯¥å€¼å—è¾¹æ¡†å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œæ»šåŠ¨æ¡ä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.offsetWidth;</p><p><code>offsetHeight</code>å±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…é«˜åº¦ï¼Œè¯¥å€¼å—è¾¹æ¡†å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œæ»šåŠ¨æ¡ä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.offsetHeight;</p><p><code>offsetTop</code>å’Œ<code>offsetLeft</code>å±æ€§ç”¨æ¥è·å–å…ƒç´ ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®ã€‚è¯¥å€¼å—å¤–è¾¹è·å½±å“ã€‚è¯­æ³•ï¼šelement.offsetTop || element.offsetLeft;</p><p><code>scrollTop</code>å’Œ<code>scrollLeft</code>å±æ€§ç”¨æ¥è·å–æ»šåŠ¨æ¡è¢«éšè—çš„åŒºåŸŸå¤§å°ï¼Œä¹Ÿå¯è®¾ç½®å®šä½åˆ°è¯¥åŒºåŸŸï¼ˆæ¯”å¦‚è¿”å›é¡¶éƒ¨ï¼‰ã€‚è¯­æ³•ï¼šelement.scrollTop || element.scrollLeft || element.scrollTop = 0;</p><h5 id="å¸¸ç”¨åˆ°çš„ç®€æ´å¿«é€Ÿçš„DOCUMENTå±æ€§å’Œæ–¹æ³•"><a href="#å¸¸ç”¨åˆ°çš„ç®€æ´å¿«é€Ÿçš„DOCUMENTå±æ€§å’Œæ–¹æ³•" class="headerlink" title="å¸¸ç”¨åˆ°çš„ç®€æ´å¿«é€Ÿçš„DOCUMENTå±æ€§å’Œæ–¹æ³•"></a>å¸¸ç”¨åˆ°çš„ç®€æ´å¿«é€Ÿçš„DOCUMENTå±æ€§å’Œæ–¹æ³•</h5><p>document.title ç”¨æ¥è·å–æ–‡æ¡£æ ‡é¢˜</p><p>document.domain ç”¨æ¥è·å–å½“å‰åŸŸå</p><p>document.URL ç”¨æ¥è·å–å½“å‰urlè·¯å¾„</p><p>document.forms è·å–è¡¨å•é›†åˆ</p><p>document.images è·å–å›¾ç‰‡é›†åˆ</p><p>document.body è·å–bodyå…ƒç´ èŠ‚ç‚¹</p><p>document.compatMode è¯†åˆ«æ–‡æ¡£æ¨¡å¼</p><p>æœ¬æ–‡æ ‡é¢˜ï¼šJavaScriptå­¦ä¹ ç¬”è®°ä¹‹DomçŸ¥è¯†ç‚¹æ€»ç»“</p><p>æœ¬æ–‡é“¾æ¥ï¼š<a class="link"   href="https://smohan.net/blog/vhikuj" >https://smohan.net/blog/vhikuj<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> Javascript </tag>
            
            <tag> DOM </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsæ­å»ºsocket.ioèŠå¤©å®¤</title>
      <link href="2017/09/08/Nodejs%E6%90%AD%E5%BB%BAsocket.io%E8%81%8A%E5%A4%A9%E5%AE%A4/"/>
      <url>2017/09/08/Nodejs%E6%90%AD%E5%BB%BAsocket.io%E8%81%8A%E5%A4%A9%E5%AE%A4/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚<br><a id="more"></a></p><h5 id="åŸç†ä»httpè®²èµ·"><a href="#åŸç†ä»httpè®²èµ·" class="headerlink" title="åŸç†ä»httpè®²èµ·"></a>åŸç†ä»httpè®²èµ·</h5><p>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨åªä¼šå“åº”æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†æ˜¯å®ƒä¸å®¢æˆ·ç«¯ä¹‹é—´ä¸å…·å¤‡æŒç»­è¿æ¥ã€‚<br>æˆ‘ä»¬å¯ä»¥éå¸¸è½»æ¾çš„æ•è·æµè§ˆå™¨ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†ç›’å­ï¼‰ï¼Œè¿™ä¸ªäº‹ä»¶å¯ä»¥è½»æ¾äº§ç”Ÿä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’ï¼ˆæ¯”å¦‚Ajaxï¼‰ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å´æ˜¯ä¸å¯èƒ½çš„ï¼šæœåŠ¡å™¨ç«¯å‘ç”Ÿäº†ä¸€ä¸ªäº‹ä»¶ï¼ŒæœåŠ¡å™¨æ— æ³•å°†è¿™ä¸ªäº‹ä»¶çš„ä¿¡æ¯å®æ—¶ä¸»åŠ¨é€šçŸ¥å®ƒçš„å®¢æˆ·ç«¯ã€‚åªæœ‰åœ¨å®¢æˆ·ç«¯æŸ¥è¯¢æœåŠ¡å™¨çš„å½“å‰çŠ¶æ€çš„æ—¶å€™ï¼Œæ‰€å‘ç”Ÿäº‹ä»¶çš„ä¿¡æ¯æ‰ä¼šä»æœåŠ¡å™¨ä¼ é€’åˆ°å®¢æˆ·ç«¯ã€‚</p><h5 id="WebSocketåè®®"><a href="#WebSocketåè®®" class="headerlink" title="WebSocketåè®®"></a>WebSocketåè®®</h5><p> æœ€æ–°çš„HTML5åè®®ï¼Œåˆ¶å®šäº†WebSocketåè®®æ ‡å‡†ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»¥å…¨åŒå·¥çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚<br>WebSocketçš„åŸç†éå¸¸çš„ç®€å•ï¼šåˆ©ç”¨HTTPè¯·æ±‚äº§ç”Ÿæ¡æ‰‹ï¼Œæ¡æ‰‹ä¹‹åï¼ŒäºŒè€…è½¬ç”¨TCPåè®®è¿›è¡Œäº¤æµï¼ˆQQçš„åè®®ï¼‰ã€‚<br>ä½¿ç”¨WebSocketåè®®ï¼Œéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ”¯æŒæ‰å¯ä»¥ä½¿ç”¨ã€‚</p><h5 id="Socket-IO"><a href="#Socket-IO" class="headerlink" title="Socket.IO"></a>Socket.IO</h5><p> Node.jsä»è¯ç”Ÿä¹‹æ—¥èµ·ï¼Œå°±æ”¯æŒWebSocketåè®®ã€‚ä¸è¿‡ï¼Œä»åº•å±‚ä¸€æ­¥ä¸€æ­¥æ­å»ºä¸€ä¸ªSocketæœåŠ¡å™¨å¾ˆè´¹åŠ²ï¼ˆæƒ³è±¡ä¸€ä¸‹Nodeå†™ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡éƒ½é‚£ä¹ˆè´¹åŠ²ï¼‰ã€‚æ‰€ä»¥ï¼Œæœ‰å¤§ç¥å¸®æˆ‘ä»¬å†™äº†ä¸€ä¸ªåº“Socket.IOã€‚<br> Socket.IOæ˜¯ä¸šç•Œè‰¯å¿ƒï¼Œæ–°æ‰‹ç¦éŸ³ã€‚å®ƒå±è”½äº†æ‰€æœ‰åº•å±‚ç»†èŠ‚ï¼Œè®©é¡¶å±‚è°ƒç”¨éå¸¸ç®€å•ã€‚å¹¶ä¸”è¿˜ä¸ºä¸æ”¯æŒWebSocketåè®®çš„æµè§ˆå™¨ï¼Œæä¾›äº†é•¿è½®è¯¢çš„é€æ˜æ¨¡æ‹Ÿæœºåˆ¶ã€‚<br>Nodeçš„å•çº¿ç¨‹ã€éé˜»å¡I/Oã€äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œä½¿å®ƒéå¸¸é€‚åˆSocketæœåŠ¡å™¨ã€‚</p><h5 id="æœåŠ¡å™¨ç«¯çš„é…ç½®"><a href="#æœåŠ¡å™¨ç«¯çš„é…ç½®" class="headerlink" title="æœåŠ¡å™¨ç«¯çš„é…ç½®"></a>æœåŠ¡å™¨ç«¯çš„é…ç½®</h5><p>å½“serveråˆ›å»ºå‡ºæ¥ä¹‹åï¼Œè¯­å¥<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>)(server);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>èƒ½å¤Ÿå®ä¾‹åŒ–ioå¯¹è±¡ï¼Œæ­¤æ—¶ç½‘å€/socket.io/socket.io.jså°†è¢«é»˜è®¤æä¾›ä¸€ä¸ªé™æ€jsæ–‡ä»¶æœåŠ¡ã€‚<br>ç›‘å¬ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">io.on(<span class="string">&quot;connection&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">socket</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>socketå¯¹è±¡æœ‰emitæ–¹æ³•å’Œonæ–¹æ³•ã€‚emitæ–¹æ³•ç”¨äºå‘é€ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œonæ–¹æ³•ç”¨äºç›‘å¬æœåŠ¡å™¨å‘é€çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚</p><h5 id="å®¢æˆ·ç«¯ç«¯çš„é…ç½®"><a href="#å®¢æˆ·ç«¯ç«¯çš„é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯ç«¯çš„é…ç½®"></a>å®¢æˆ·ç«¯ç«¯çš„é…ç½®</h5><p>HTMLé¡µé¢å¿…é¡»è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œä¸èƒ½ä¸ºæœ¬åœ°ã€‚<br>HTMLé¡µé¢éœ€è¦å¼•ç”¨/socket.io/socket.io.jsæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œio()å‡½æ•°ï¼Œå¹¶å¾—åˆ°socketå¯¹è±¡ã€‚<br>socketå¯¹è±¡æœ‰emitæ–¹æ³•å’Œonæ–¹æ³•ã€‚emitæ–¹æ³•ç”¨äºå‘é€ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œonæ–¹æ³•ç”¨äºç›‘å¬æœåŠ¡å™¨å‘é€çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚</p><h5 id="Expressä¸Socket-IO"><a href="#Expressä¸Socket-IO" class="headerlink" title="Expressä¸Socket.IO"></a>Expressä¸Socket.IO</h5><p>Expressæ¡†æ¶å¯ä»¥å’ŒSocket.IOæ­é…ä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½åƒé€šå¸¸çš„Expressç¨‹åºé‚£æ ·ï¼Œç”¨app.listenè¿›è¡Œç›‘å¬äº†ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç§å›ºå®šçš„æ¨¡å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).Server(app);</span><br><span class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>)(http);</span><br><span class="line">http.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><h6 id="ç™»é™†é¡µé¢"><a href="#ç™»é™†é¡µé¢" class="headerlink" title="ç™»é™†é¡µé¢"></a>ç™»é™†é¡µé¢</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/check&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">            è¾“å…¥æ˜µç§°ï¼š</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å‘é€æ¶ˆæ¯&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;socket.ioèŠå¤©å®¤ æ¬¢è¿ä¸»æ·«ï¼š&lt;span id=<span class="string">&quot;name&quot;</span>&gt;&lt;%=name%&gt;&lt;<span class="regexp">/span&gt;&lt;/</span>h1&gt;</span><br><span class="line">   &lt;ul id=<span class="string">&quot;messages&quot;</span>&gt;&lt;/ul&gt;</span><br><span class="line">   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;caozuo&quot;</span>&gt;</span><br><span class="line">       &lt;input id=<span class="string">&quot;m&quot;</span> autocomplete=<span class="string">&quot;off&quot;</span> /&gt;<span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   &lt;script src=<span class="string">&quot;/socket.io/socket.io.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">   &lt;script src=<span class="string">&quot;http://libs.baidu.com/jquery/1.11.3/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">   &lt;script&gt;</span><br><span class="line">       <span class="keyword">var</span> socket = io();</span><br><span class="line">       $(<span class="string">&#x27;#m&#x27;</span>).keydown(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) &#123;</span><br><span class="line">               <span class="comment">//ç‚¹å‡»å‘é€æŒ‰é’®ï¼Œæäº¤è¾“å…¥çš„ä¿¡æ¯</span></span><br><span class="line">               socket.emit(<span class="string">&#x27;message&#x27;</span>, &#123;</span><br><span class="line">                   <span class="string">&quot;msg&quot;</span>: $(<span class="string">&#x27;#m&#x27;</span>).val(),</span><br><span class="line">                   <span class="string">&quot;name&quot;</span>: $(<span class="string">&quot;#name&quot;</span>).html()</span><br><span class="line">               &#125;);</span><br><span class="line">               <span class="built_in">console</span>.log($(<span class="string">&quot;#m&quot;</span>).val());</span><br><span class="line">               $(<span class="built_in">this</span>).val(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">               <span class="comment">// return false;</span></span><br><span class="line">               <span class="comment">//æ¥æ”¶åˆ°chat messageæ—¶</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">       <span class="comment">//ç›‘å¬æœåŠ¡ç«¯ä¼ å›æ¥çš„æ•°æ®</span></span><br><span class="line">       socket.on(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">           <span class="comment">//å°†chat messageæ˜¾ç¤ºåœ¨é¡µé¢</span></span><br><span class="line">           <span class="built_in">console</span>.log(msg);</span><br><span class="line">           $(<span class="string">&#x27;#messages&#x27;</span>).prepend(<span class="string">&quot;&lt;li&gt;&lt;b&gt;&quot;</span> + msg.name + <span class="string">&quot;:&lt;/b&gt;&quot;</span> + msg.msg + <span class="string">&quot;&lt;/li&gt;&quot;</span>);</span><br><span class="line">       &#125;);</span><br><span class="line">   &lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="åå°ä»£ç "><a href="#åå°ä»£ç " class="headerlink" title="åå°ä»£ç "></a>åå°ä»£ç </h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>).Server(app);</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªioå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">&quot;socket.io&quot;</span>)(http);</span><br><span class="line"><span class="comment">//sessionä¿å­˜ç”¨æˆ·å</span></span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>);</span><br><span class="line"><span class="comment">//ä½¿ç”¨session</span></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">    secret: <span class="string">&#x27;keyboard cat&#x27;</span>,</span><br><span class="line">    resave: <span class="literal">false</span>,</span><br><span class="line">    saveUninitialized: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&quot;view engine&quot;</span>, <span class="string">&quot;ejs&quot;</span>);</span><br><span class="line"><span class="comment">//ä¸­é—´ä»¶ é¦–é¡µ</span></span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    res.render(<span class="string">&quot;roomLogin&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> allUser = [];</span><br><span class="line"><span class="comment">//ç¡®è®¤ç™»é™†</span></span><br><span class="line">app.get(<span class="string">&quot;/check&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.query.name);</span><br><span class="line">    <span class="keyword">var</span> name = req.query.name;</span><br><span class="line">    <span class="keyword">if</span> (!name) &#123;</span><br><span class="line">        res.send(<span class="string">&quot;å¿…é¡»å¡«å†™ç”¨æˆ·å&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (allUser.indexOf(name) != -<span class="number">1</span>) &#123;</span><br><span class="line">        res.send(<span class="string">&quot;ç”¨æˆ·åå·²ç»è¢«å ç”¨&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    allUser.push(name);</span><br><span class="line">    <span class="comment">//ä¿å­˜ç”¨æˆ·åç¼“å­˜</span></span><br><span class="line">    req.session.name = name;</span><br><span class="line">    res.redirect(<span class="string">&quot;/chat&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/chat&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!req.session.name) &#123;</span><br><span class="line">        res.redirect(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    res.render(<span class="string">&quot;chat&quot;</span>, &#123;</span><br><span class="line">        name: req.session.name</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">io.on(<span class="string">&quot;connection&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">socket</span>) </span>&#123;</span><br><span class="line">    socket.on(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;msg:&#x27;</span> + msg);</span><br><span class="line">        <span class="comment">//æŠŠå®¢æˆ·ç«¯ä¼ ç»™æˆ‘ä»¬çš„å€¼å†å¹¿æ’­å‘é€ç»™åˆ«äººå°±æ˜¯èŠå¤©å®¤</span></span><br><span class="line">        io.emit(<span class="string">&quot;message&quot;</span>, msg);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// var server = http.createServer(function(req, res) &#123;</span></span><br><span class="line"><span class="comment">//     if (req.url == &quot;/&quot;) &#123;</span></span><br><span class="line"><span class="comment">//         fs.readFile(&quot;./tellRoom.html&quot;, function(err, data) &#123;</span></span><br><span class="line"><span class="comment">//             res.end(data);</span></span><br><span class="line"><span class="comment">//         &#125;);</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›‘å¬é“¾æ¥äº‹ä»¶</span></span><br><span class="line"><span class="comment">// io.on(&quot;connection&quot;, function(socket) &#123;</span></span><br><span class="line"><span class="comment">//     // console.log(&#x27;ä¸€ä¸ªå®¢æˆ·ç«¯è·å¾—è¿æ¥äº†&#x27;);</span></span><br><span class="line"><span class="comment">//     //æ¥æ”¶æ•°æ®</span></span><br><span class="line"><span class="comment">//     socket.on(&quot;question&quot;, function(msg) &#123;</span></span><br><span class="line"><span class="comment">//         console.log(&quot;æœ¬æœåŠ¡å™¨å¾—åˆ°æé—®&quot; + msg);</span></span><br><span class="line"><span class="comment">//     &#125;);</span></span><br><span class="line"><span class="comment">//     //å‘é€æ•°æ®  å•å¯¹å•</span></span><br><span class="line"><span class="comment">//     // socket.emit(&quot;ans&quot;, &quot;åƒäº†&quot;);</span></span><br><span class="line"><span class="comment">//     //å¹¿æ’­ ä¸€å¯¹å¤š</span></span><br><span class="line"><span class="comment">//     io.emit(&quot;ans&quot;, &quot;åƒäº†&quot;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.listen(<span class="number">3000</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š<br>ç¨åä¸Šä¼ ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æ‡’ - -ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript å¼€å‘è§„èŒƒ</title>
      <link href="2017/08/21/JavaScript%20%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"/>
      <url>2017/08/21/JavaScript%20%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š<a class="link"   href="http://foreverz.cn/2017/08/23/JSå¼€å‘è§„èŒƒ/" >http://foreverz.cn/2017/08/23/JSå¼€å‘è§„èŒƒ/<i class="fas fa-external-link-alt"></i></a></p><p>ä»äº‹å‰ç«¯å¼€å‘ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸€ç›´åœ¨éµå¾ªç€è§„èŒƒåŒ–å¼€å‘ï¼Œä» js ä¹Ÿé€æ¸è½¬å‘äº† ts ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰äº†å¾ˆå¤šæ”¶è·ï¼Œåœ¨æ­¤æŠŠè‡ªå·±çš„å¼€å‘å¿ƒå¾—å†™ä¸‹æ¥ã€‚</p><p>æœ¬æ–‡å‚è€ƒäº†JavaScript å¼€å‘è§„èŒƒï¼Œå¹¶åšäº†è¡¥å……å’Œä¿®æ”¹ï¼ŒåŒæ—¶åˆ å»äº†æ¡†æ¶å¼€å‘ç›¸å…³çš„å†…å®¹(ä¾µåˆ )ã€‚</p><h5 id="1-å‘½åè§„èŒƒ"><a href="#1-å‘½åè§„èŒƒ" class="headerlink" title="1. å‘½åè§„èŒƒ"></a>1. å‘½åè§„èŒƒ</h5><p>ECMAScript è§„èŒƒä¸­æ ‡è¯†ç¬¦é‡‡ç”¨é©¼å³°å¤§å°å†™æ ¼å¼ï¼Œé©¼å³°å‘½åæ³•ç”±å°(å¤§)å†™å­—æ¯å¼€å§‹ï¼Œåç»­æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ã€‚æ ¹æ®é¦–å­—æ¯æ˜¯å¦å¤§å†™ï¼Œåˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š</p><p>Pascal Case å¤§é©¼å³°å¼å‘½åæ³•ï¼šé¦–å­—æ¯å¤§å†™ã€‚egï¼š<br><code>StudentInfo</code>ã€<code>UserInfo</code>ã€<code>ProductInfo</code><br>Camel Case å°é©¼å³°å¼å‘½åæ³•ï¼šé¦–å­—æ¯å°å†™ã€‚egï¼šstudentInfoã€userInfoã€productInfo<br>æ ‡è¯†ç¬¦ï¼Œåˆ™åŒ…æ‹¬å˜é‡ã€å‡½æ•°åã€ç±»åã€å±æ€§åå’Œå‡½æ•°æˆ–ç±»çš„å‚æ•°ï¼Œæ¯ä¸ªå‘½åæ–¹æ³•åˆç•¥æœ‰ä¸åŒï¼Œä¸‹é¢è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š</p><p>1.1 å˜é‡</p><p>å‘½åæ–¹æ³•ï¼šå°é©¼å³°å¼å‘½åæ³•ã€‚</p><p>å‘½åè§„èŒƒï¼šå‰ç¼€åº”å½“æ˜¯åè¯ã€‚(å‡½æ•°çš„åå­—å‰ç¼€ä¸ºåŠ¨è¯ï¼Œä»¥æ­¤åŒºåˆ†å˜é‡å’Œå‡½æ•°)</p><p>å‘½åå»ºè®®ï¼šå°½é‡åœ¨å˜é‡åå­—ä¸­ä½“ç°æ‰€å±ç±»å‹ï¼Œå¦‚:lengthã€countç­‰è¡¨ç¤ºæ•°å­—ç±»å‹ï¼›è€ŒåŒ…å«nameã€titleè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„å‘½åæ–¹å¼</span></span><br><span class="line"><span class="keyword">let</span> maxCount = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> tableTitle = <span class="string">&#x27;LoginTable&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸å¥½çš„å‘½åæ–¹å¼</span></span><br><span class="line"><span class="keyword">let</span> setCount = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> getTitle = <span class="string">&#x27;LoginTable&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.2 å¸¸é‡</p><p>å‘½åæ–¹æ³•ï¼šåç§°å…¨éƒ¨å¤§å†™ã€‚</p><p>å‘½åè§„èŒƒï¼šä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿æ¥ç»„åˆå‘½åï¼Œä¸‹åˆ’çº¿ç”¨ä»¥åˆ†å‰²å•è¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_COUNT = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> URL = <span class="string">&#x27;http://www.foreverz.com&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.3 å‡½æ•°</p><p>å‘½åæ–¹æ³•ï¼šå°é©¼å³°å¼å‘½åæ³•ã€‚</p><p>å‘½åè§„èŒƒï¼šå‰ç¼€åº”å½“ä¸ºåŠ¨è¯ã€‚</p><p>å‘½åå»ºè®®ï¼šå¯ä½¿ç”¨å¸¸è§åŠ¨è¯çº¦å®š</p><table><thead><tr><th>åŠ¨è¯</th><th>å«ä¹‰</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td>can</td><td>åˆ¤æ–­æ˜¯å¦å¯æ‰§è¡ŒæŸä¸ªåŠ¨ä½œ(æƒé™)</td><td>å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šå¯æ‰§è¡Œï¼›falseï¼šä¸å¯æ‰§è¡Œ</td></tr><tr><td>has</td><td>åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªå€¼</td><td>å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šå«æœ‰æ­¤å€¼ï¼›falseï¼šä¸å«æœ‰æ­¤å€¼</td></tr><tr><td>is</td><td>åˆ¤æ–­æ˜¯å¦ä¸ºæŸä¸ªå€¼</td><td>å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šä¸ºæŸä¸ªå€¼ï¼›falseï¼šä¸ä¸ºæŸä¸ªå€¼</td></tr><tr><td>get</td><td>è·å–æŸä¸ªå€¼</td><td>å‡½æ•°è¿”å›ä¸€ä¸ªéå¸ƒå°”å€¼</td></tr><tr><td>set</td><td>è®¾ç½®æŸä¸ªå€¼</td><td>æ— è¿”å›å€¼ã€è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸæˆ–è€…è¿”å›é“¾å¼å¯¹è±¡</td></tr><tr><td>load</td><td>åŠ è½½æŸäº›æ•°æ®</td><td>æ— è¿”å›å€¼æˆ–è€…è¿”å›æ˜¯å¦åŠ è½½å®Œæˆçš„ç»“æœ</td></tr><tr><td>render</td><td>æ¸²æŸ“ç”ŸæˆæŸäº›æ•°æ®</td><td>æ— è¿”å›å€¼æˆ–è€…è¿”å›æ˜¯å¦æ¸²æŸ“å®Œæˆ</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å¦å¯é˜…è¯»</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">canRead</span>(<span class="params"></span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–åç§°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.4 ç±» &amp; æ„é€ å‡½æ•°</p><p>å‘½åæ–¹æ³•ï¼šå¤§é©¼å³°å¼å‘½åæ³•ï¼Œé¦–å­—æ¯å¤§å†™ã€‚</p><p>å‘½åè§„èŒƒï¼šå‰ç¼€ä¸ºåç§°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  public name: string;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person(<span class="string">&#x27;mevyn&#x27;</span>);</span><br></pre></td></tr></table></figure><p>1.5 ç±»çš„æˆå‘˜</p><p>ç±»çš„æˆå‘˜åŒ…å«ï¼š</p><p>å…¬å…±å±æ€§å’Œæ–¹æ³•ï¼šè·Ÿå˜é‡å’Œå‡½æ•°çš„å‘½åä¸€æ ·ã€‚</p><p>ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼šå‰ç¼€ä¸º_(ä¸‹åˆ’çº¿)ï¼Œåé¢è·Ÿå…¬å…±å±æ€§å’Œæ–¹æ³•ä¸€æ ·çš„å‘½åæ–¹å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  private _name: string;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">  <span class="comment">// å…¬å…±æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å…¬å…±æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="title">setName</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">person.setName(<span class="string">&#x27;mervyn&#x27;</span>);</span><br><span class="line">person.getName(); <span class="comment">// -&gt;mervyn</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-æ³¨é‡Šè§„èŒƒ"><a href="#2-æ³¨é‡Šè§„èŒƒ" class="headerlink" title="2. æ³¨é‡Šè§„èŒƒ"></a>2. æ³¨é‡Šè§„èŒƒ</h5><p>js æ”¯æŒä¸‰ç§ä¸åŒç±»å‹çš„æ³¨é‡Šï¼šè¡Œå†…æ³¨é‡Šã€å•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šï¼š</p><p>2.1 è¡Œå†…æ³¨é‡Š</p><p>è¯´æ˜ï¼šè¡Œå†…æ³¨é‡Šä»¥ä¸¤ä¸ªæ–œçº¿å¼€å§‹ï¼Œä»¥è¡Œå°¾ç»“æŸã€‚</p><p>è¯­æ³•ï¼šcode // è¿™æ˜¯è¡Œå†…æ³¨é‡Š</p><p>ä½¿ç”¨æ–¹å¼ï¼š//(åŒæ–œçº¿)ä¸ä»£ç ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œå¹¶ä¸”//(åŒæ–œçº¿)ä¸æ³¨é‡Šæ–‡å­—ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚</p><p>å‘½åå»ºè®®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªè§£é‡Šçš„è¯„è®º</span></span><br><span class="line"><span class="comment">// -&gt; ç”¨æ¥æ˜¾ç¤ºè¡¨è¾¾å¼çš„ç»“æœï¼Œ</span></span><br><span class="line"><span class="comment">// &gt;ç”¨æ¥æ˜¾ç¤º console çš„è¾“å‡ºç»“æœï¼Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æµ‹è¯•å‡½æ•°</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello World!&#x27;</span>); <span class="comment">// &gt;Hello World!</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">3</span> + <span class="number">2</span>; <span class="comment">// -&gt;5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.2 å•è¡Œæ³¨é‡Š</p><p>è¯´æ˜ï¼šå•è¡Œæ³¨é‡Šä»¥ä¸¤ä¸ªæ–œçº¿å¼€å§‹ï¼Œä»¥è¡Œå°¾ç»“æŸã€‚</p><p>è¯­æ³•ï¼š// è¿™æ˜¯å•è¡Œæ³¨é‡Š</p><p>ä½¿ç”¨æ–¹å¼ï¼šå•ç‹¬ä¸€è¡Œï¼š//(åŒæ–œçº¿)ä¸æ³¨é‡Šæ–‡å­—ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚</p><p>egï¼š</p><p>// è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼›1)å•ç‹¬åœ¨ä¸€è¡Œ<br>setTitle();<br>2.3 å¤šè¡Œæ³¨é‡Š</p><p>è¯´æ˜ï¼šä»¥ /<em> å¼€å¤´ï¼Œ </em>/ ç»“å°¾</p><p>è¯­æ³•ï¼š/<em> æ³¨é‡Šè¯´æ˜ </em>/</p><p>ä½¿ç”¨æ–¹æ³•ï¼šè‹¥å¼€å§‹/<em>å’Œç»“æŸ</em>/éƒ½åœ¨ä¸€è¡Œï¼Œæ¨èé‡‡ç”¨å•è¡Œæ³¨é‡Šã€‚è‹¥è‡³å°‘ä¸‰è¡Œæ³¨é‡Šæ—¶ï¼Œç¬¬ä¸€è¡Œä¸º/<em>ï¼Œæœ€åè¡Œä¸º</em>/ï¼Œå…¶ä»–è¡Œä»¥<em>å¼€å§‹ï¼Œå¹¶ä¸”æ³¨é‡Šæ–‡å­—ä¸</em>ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œåä¼šè°ƒç”¨setTitle()å‡½æ•°</span></span><br><span class="line"><span class="comment">* setTitle()ï¼šè®¾ç½®titleçš„å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">setTitle();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.4 å‡½æ•°(æ–¹æ³•)æ³¨é‡Š</p><p>è¯´æ˜ï¼šå‡½æ•°(æ–¹æ³•)æ³¨é‡Šä¹Ÿæ˜¯å¤šè¡Œæ³¨é‡Šçš„ä¸€ç§ï¼Œä½†æ˜¯åŒ…å«äº†ç‰¹æ®Šçš„æ³¨é‡Šè¦æ±‚ï¼Œå‚ç…§JSDoc</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å‡½æ•°è¯´æ˜</span></span><br><span class="line"><span class="comment">* @å…³é”®å­—</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">å¸¸ç”¨æ³¨é‡Šå…³é”®å­—ï¼š(åªåˆ—å‡ºä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨é‡Šå    è¯­æ³•    å«ä¹‰    ç¤ºä¾‹<br>@param    @param å‚æ•°å {å‚æ•°ç±»å‹} æè¿°ä¿¡æ¯    æè¿°å‚æ•°çš„ä¿¡æ¯    @param name {String} ä¼ å…¥åç§°<br>@return    @return {è¿”å›ç±»å‹} æè¿°ä¿¡æ¯    æè¿°è¿”å›å€¼çš„ä¿¡æ¯    @return {Boolean} true:å¯æ‰§è¡Œ;false:ä¸å¯æ‰§è¡Œ<br>@author    @author ä½œè€…ä¿¡æ¯ [é™„å±ä¿¡æ¯ï¼šå¦‚é‚®ç®±ã€æ—¥æœŸ]    æè¿°æ­¤å‡½æ•°ä½œè€…çš„ä¿¡æ¯    @author å¼ ä¸‰ 2015/07/21<br>@version    @version XX.XX.XX    æè¿°æ­¤å‡½æ•°çš„ç‰ˆæœ¬å·    @version 1.0.3<br>@example    @example ç¤ºä¾‹ä»£ç     æ¼”ç¤ºå‡½æ•°çš„ä½¿ç”¨    @example setTitle(â€˜æµ‹è¯•â€™)<br>/**</p><ul><li>åˆå¹¶Gridçš„è¡Œ</li><li>@param grid {Ext.Grid.Panel} éœ€è¦åˆå¹¶çš„Grid</li><li>@param cols {Array} éœ€è¦åˆå¹¶åˆ—çš„Index(åºå·)æ•°ç»„ï¼›ä»0å¼€å§‹è®¡æ•°ï¼Œåºå·ä¹ŸåŒ…å«ã€‚</li><li>@param isAllSome {Boolean} ï¼šæ˜¯å¦2ä¸ªtrçš„colså¿…é¡»å®Œæˆä¸€æ ·æ‰èƒ½è¿›è¡Œåˆå¹¶ã€‚trueï¼šå®Œæˆä¸€æ ·ï¼›false(é»˜è®¤)ï¼šä¸å®Œå…¨ä¸€æ ·</li><li>@return void</li><li>@author polk6 2015/07/21</li><li>@example</li><li><hr></li><li>|  å¹´é¾„ |  å§“å |                             |  å¹´é¾„ |  å§“å |</li><li>â€”â€”â€”â€”â€”â€“      mergeCells(grid,[0])   â€”â€”â€”â€”â€”â€“</li><li>|  18   |  å¼ ä¸‰ |              =&gt;             |       |  å¼ ä¸‰ |</li><li>â€”â€”â€”â€”â€”â€“                             -  18   â€”â€”â€”</li><li>|  18   |  ç‹äº” |                             |       |  ç‹äº” |</li><li><hr><em></em>/</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeCells</span>(<span class="params">grid: Ext.Grid.Panel, cols: <span class="built_in">Number</span>[], isAllSome: boolean = <span class="literal">false</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Do Something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œåªæ˜¯è¯¦ç»†è®²è§£äº† æ ‡è¯†ç¬¦å‘½åè§„èŒƒ å’Œ ä»£ç æ³¨é‡Šè§„èŒƒï¼Œè¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„è§„èŒƒæ²¡æ¥å¾—åŠå¡«å……ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹Airbnb JavaScript Style Guide</p><h5 id="å‚è€ƒä¹¦ç±å’Œæ–‡ç« ï¼š"><a href="#å‚è€ƒä¹¦ç±å’Œæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒä¹¦ç±å’Œæ–‡ç« ï¼š"></a>å‚è€ƒä¹¦ç±å’Œæ–‡ç« ï¼š</h5><p><a class="link"   href="https://juejin.im/entry/599ed0c4f265da2499602ceb" >HTML/CSS/JSç¼–ç è§„èŒƒ<i class="fas fa-external-link-alt"></i></a></p><p>JavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰</p><p>JavaScript å¼€å‘è§„èŒƒ</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸‰ï¼‰</title>
      <link href="2017/08/18/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>2017/08/18/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æ³¨æ„å®ç°åŠŸèƒ½ï¼š</p><ol><li>æŸ¥æ‰¾å½“å‰æ—¥æœŸå¹¶å®ç°ä¹‹å10å¤©å¯ç‚¹å‡»ï¼Œå…¶ä½™å¤©æ•°ä¸å¯ç‚¹å‡»</li><li>ç‚¹å‡»å·¦å³æŒ‰é’®åˆ‡æ¢æœˆä»½</li><li>ç‚¹å‡»ç¬¦åˆè§„åˆ™çš„æ—¥æœŸæŠŠæ—¥æœŸåŠä»·æ ¼æ˜¾ç¤ºåœ¨å¯¹åº”è¾“å…¥æ¡†ä¸­</li><li>åˆ¤æ–­å½“æœ€åä¸€è¡Œæ²¡æœ‰æ—¥æœŸæ˜¾ç¤ºæ—¶å€™å¯¹åº”é«˜åº¦ä¸ä¸Šä¸€è¡Œæ˜¾ç¤ºæ—¥æœŸçš„é«˜åº¦ä¸€è‡´</li></ol><h5 id="æ•ˆæœå›¾ï¼š"><a href="#æ•ˆæœå›¾ï¼š" class="headerlink" title="æ•ˆæœå›¾ï¼š"></a>æ•ˆæœå›¾ï¼š</h5><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E6%97%A5%E5%8E%86.gif"                      alt="image"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> aInput = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oNowTime = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;nowTime&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oNextTime = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;nextTime&#x27;</span>);</span><br><span class="line"><span class="comment">//è·å–span</span></span><br><span class="line"><span class="keyword">var</span> aNowSpan = oNowTime.getElementsByTagName(<span class="string">&quot;span&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> aNextSpan = oNextTime.getElementsByTagName(<span class="string">&quot;span&quot;</span>);</span><br><span class="line"><span class="comment">//è·å–æ‰€ä»¥td</span></span><br><span class="line"><span class="keyword">var</span> aTd = oDiv.getElementsByTagName(<span class="string">&quot;td&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> bBtn = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">aInput[<span class="number">2</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">if</span>(bBtn) &#123;</span><br><span class="line">oDiv.style.display = <span class="string">&quot;block&quot;</span>;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸‹ä¸€å¹´</span></span><br><span class="line"><span class="keyword">if</span>(oDate.getMonth() + <span class="number">1</span> == <span class="number">12</span>) &#123;</span><br><span class="line"><span class="comment">//ä¼ ä½ç½®   å¹´ æœˆ  trueä»£è¡¨è¿™ä¸ªæœˆè¿˜æ˜¯ä¸‹ä¸€ä¸ªæœˆ</span></span><br><span class="line">showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, oDate.getFullYear() + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è°ƒç”¨æŸ¥æ‰¾æ—¥æœŸæ–¹æ³•æ‰¾åˆ°å½“å‰æ—¥æœŸæ‰€å¯¹åº”çš„td</span></span><br><span class="line">showColor(oDate.getDate());</span><br><span class="line">showBtn();</span><br><span class="line">showClick();</span><br><span class="line">            hideLastTr();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">oDiv.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">bBtn = !bBtn;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showDate</span>(<span class="params">obj, year, month, bBtn</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="comment">//è®¾ç½®å¼€å…³é˜²æ­¢é‡æ–°ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">if</span>(!obj.bBtn) &#123;</span><br><span class="line"><span class="comment">//ç”Ÿæˆå‘¨è¡¨æ ¼table tableæœ‰ä¸ªç‰¹åˆ«åœ¨ieä¸‹ç”¨HTMLæ˜¯ä¸å…¼å®¹çš„</span></span><br><span class="line">obj.oTitle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">obj.oTitle.className = <span class="string">&#x27;title&#x27;</span>;</span><br><span class="line">obj.appendChild(obj.oTitle);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oTable = <span class="built_in">document</span>.createElement(<span class="string">&#x27;table&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oThead = <span class="built_in">document</span>.createElement(<span class="string">&#x27;thead&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oTr = <span class="built_in">document</span>.createElement(<span class="string">&#x27;tr&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;å‘¨æ—¥&#x27;</span>, <span class="string">&#x27;å‘¨ä¸€&#x27;</span>, <span class="string">&#x27;å‘¨äºŒ&#x27;</span>, <span class="string">&#x27;å‘¨ä¸‰&#x27;</span>, <span class="string">&#x27;å‘¨å››&#x27;</span>, <span class="string">&#x27;å‘¨äº”&#x27;</span>, <span class="string">&#x27;å‘¨å…­&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTh = <span class="built_in">document</span>.createElement(<span class="string">&#x27;th&#x27;</span>);</span><br><span class="line">oTh.innerHTML = arr[i];</span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">0</span> || i == <span class="number">6</span>) &#123;</span><br><span class="line">oTh.className = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">oTr.appendChild(oTh);</span><br><span class="line">&#125;</span><br><span class="line">oThead.appendChild(oTr);</span><br><span class="line">oTable.appendChild(oThead);</span><br><span class="line"><span class="comment">//ç”Ÿæˆæ—¥æœŸ ç”Ÿæˆ5ä¸ªè¡Œ 7ä¸ªåˆ—  æ¯ä¸€è¡Œä¸ƒä¸ªåˆ—</span></span><br><span class="line"><span class="keyword">var</span> oTbody = <span class="built_in">document</span>.createElement(<span class="string">&#x27;tBody&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTr = <span class="built_in">document</span>.createElement(<span class="string">&quot;tr&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTd = <span class="built_in">document</span>.createElement(<span class="string">&quot;td&quot;</span>);</span><br><span class="line">oTr.appendChild(oTd);</span><br><span class="line">&#125;</span><br><span class="line">oTbody.appendChild(oTr);</span><br><span class="line">&#125;</span><br><span class="line">oTable.appendChild(oTbody);</span><br><span class="line">obj.appendChild(oTable);</span><br><span class="line"></span><br><span class="line">obj.bBtn = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®bbtnåˆ¤æ–­å·¦è¾¹å³è¾¹çš„å¹´ä»½æ¢ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span>(bBtn) &#123;</span><br><span class="line">obj.oTitle.innerHTML = <span class="string">&#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span> + <span class="string">&#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27;</span> + year + <span class="string">&#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27;</span> + month + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">obj.oTitle.innerHTML = <span class="string">&#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27;</span> + (month + <span class="number">1</span>) + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span> + <span class="string">&#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27;</span> + year + <span class="string">&#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27;</span> + month + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”Ÿæˆæ¯ä¸€ä¸ªæœˆçš„å¤©æ•° æ¯æ¬¡ç‚¹å‡»æœˆä»½æ¸…ç©º</span></span><br><span class="line"><span class="keyword">var</span> aTd = obj.getElementsByTagName(<span class="string">&#x27;td&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aTd.length; i++) &#123;</span><br><span class="line">aTd[i].innerHTML = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æœˆä»½çš„å¤©æ•°</span></span><br><span class="line"><span class="keyword">if</span>(month == <span class="number">1</span> || month == <span class="number">3</span> || month == <span class="number">5</span> || month == <span class="number">7</span> || month == <span class="number">8</span> || month == <span class="number">10</span> || month == <span class="number">12</span>) &#123;</span><br><span class="line">dayNum = <span class="number">31</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(month == <span class="number">4</span> || month == <span class="number">6</span> || month == <span class="number">9</span> || month == <span class="number">11</span>) &#123;</span><br><span class="line">dayNum = <span class="number">30</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(month == <span class="number">2</span> &amp;&amp; isLeapYear(year)) &#123;</span><br><span class="line">dayNum = <span class="number">29</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dayNum = <span class="number">28</span>;</span><br><span class="line">&#125;</span><br><span class="line">oDate.setFullYear(year);</span><br><span class="line">oDate.setMonth(month - <span class="number">1</span>);</span><br><span class="line">oDate.setDate(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(oDate.getDay());</span><br><span class="line"><span class="comment">//æ ¹æ®1å· å¯¹åº”çš„ getDayï¼ˆï¼‰æ˜¯å‘¨å‡ ï¼Ÿ</span></span><br><span class="line"><span class="keyword">switch</span>(oDate.getDay()) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="comment">//å‘¨æ—¥ ç¬¬ä¸€ä¸ªtdå¼€å§‹éå†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">1</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">2</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">3</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">4</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">5</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">6</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ajaxè¯·æ±‚</span></span><br><span class="line">ajax(<span class="string">&#x27;data.js?&#x27;</span> + <span class="built_in">Math</span>.random(), <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> j = <span class="built_in">eval</span>(<span class="string">&#x27;(&#x27;</span> + str + <span class="string">&#x27;)&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(j)</span><br><span class="line"><span class="keyword">var</span> now = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aTd.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(aTd[i].innerHTML == <span class="number">1</span>) &#123;</span><br><span class="line">now = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(j.code) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœè¿™ä¸ªæœˆçš„å¤©æ•°å°äºæ•°ç»„é•¿åº¦åˆ™é•¿åº¦æœ€å¤šä¸ºæ—¥æœŸå¤©æ•°</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j.list.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(j.list[i]) &#123;</span><br><span class="line"><span class="keyword">var</span> oP = <span class="built_in">document</span>.createElement(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line">oP.innerHTML = j.list[i] + <span class="string">&#x27;å…ƒ&#x27;</span>;</span><br><span class="line">aTd[i + now].appendChild(oP);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å¦‚æœå·¦è¾¹æ˜¯1æœˆ åˆ™ æŒ‰é’®åº”è¯¥æ˜¯12æœˆä»½</span></span><br><span class="line"><span class="keyword">if</span>(month == <span class="number">1</span> &amp;&amp; bBtn) &#123;</span><br><span class="line">obj.oTitle.getElementsByTagName(<span class="string">&#x27;span&#x27;</span>)[<span class="number">0</span>].innerHTML = <span class="number">12</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(month == <span class="number">12</span> &amp;&amp; !bBtn) &#123;</span><br><span class="line">obj.oTitle.getElementsByTagName(<span class="string">&#x27;span&#x27;</span>)[<span class="number">0</span>].innerHTML = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLeapYear</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(year % <span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showColor</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> result = []</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> bBtn = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;&#x27;</span> + date + <span class="string">&#x27;(&lt;p&gt;)*&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = aTd.length; i &lt; len; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(aTd[i].innerHTML != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">result.push(aTd[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">if</span>(aNowSpan[<span class="number">1</span>].innerHTML == oDate.getFullYear() &amp;&amp; aNowSpan[<span class="number">2</span>].innerHTML == oDate.getMonth() + <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(reg.test(result[i].innerHTML) &amp;&amp; bBtn) &#123;</span><br><span class="line">result[i].className = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">index = i;</span><br><span class="line">bBtn = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°å½“å¤©æ—¥æœŸæ˜¯tdç¬¬å‡ ä¸ªç„¶åä»ä»Šå¤©å¼€å§‹å¾€åå‡ ä¸ªéƒ½å¯ä»¥é€‰æ‹©</span></span><br><span class="line"><span class="keyword">for</span>(len = index + <span class="number">11</span>; index + <span class="number">1</span> &lt; len; index++) &#123;</span><br><span class="line">result[index + <span class="number">1</span>].className = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ¸…ç©ºæ¯ä¸ªtdçš„é¢œè‰²å˜ç°è‰²</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">result[i].className = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showBtn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//è·å–å·¦å³2è¾¹çš„æœˆä»½åŠå¹´</span></span><br><span class="line"><span class="keyword">var</span> leftMonth = <span class="built_in">parseInt</span>(aNowSpan[<span class="number">0</span>].innerHTML);</span><br><span class="line"><span class="keyword">var</span> leftYear = <span class="built_in">parseInt</span>(aNowSpan[<span class="number">1</span>].innerHTML);</span><br><span class="line"><span class="keyword">var</span> rightMonth = <span class="built_in">parseInt</span>(aNextSpan[<span class="number">0</span>].innerHTML);</span><br><span class="line"><span class="keyword">var</span> rightYear = <span class="built_in">parseInt</span>(aNextSpan[<span class="number">1</span>].innerHTML);</span><br><span class="line">aNowSpan[<span class="number">0</span>].parentNode.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(leftMonth == <span class="number">12</span>) &#123;</span><br><span class="line">showDate(oNowTime, leftYear - <span class="number">1</span>, leftMonth, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, leftYear, <span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">showDate(oNowTime, leftYear, leftMonth, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, leftYear, leftMonth + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">showBtn();</span><br><span class="line">showColor(<span class="keyword">new</span> <span class="built_in">Date</span>().getDate());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">aNextSpan[<span class="number">0</span>].parentNode.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rightMonth == <span class="number">1</span>) &#123;</span><br><span class="line">showDate(oNowTime, rightYear, <span class="number">12</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, rightYear + <span class="number">1</span>, rightMonth);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">showDate(oNowTime, rightYear, rightMonth - <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, rightYear, rightMonth);</span><br><span class="line">&#125;</span><br><span class="line">showBtn();</span><br><span class="line">showColor(<span class="keyword">new</span> <span class="built_in">Date</span>().getDate());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç‚¹å‡»äº‹ä»¶æ˜¾ç¤ºæ—¥æœŸåœ¨è¾“å…¥æ¡†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/(\d+)((&lt;p&gt;)*)/</span>;</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aTd.length; i++) &#123;</span><br><span class="line">aTd[i].index = i;</span><br><span class="line">aTd[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­å¯ä»¥ç‚¹å‡»çš„æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.className == <span class="string">&quot;red&quot;</span> || <span class="built_in">this</span>.className == <span class="string">&quot;blue&quot;</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­å·¦è¾¹æ—¥æœŸè¿˜æ˜¯å³è¾¹æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.index &lt; aTd.length / <span class="number">2</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.innerHTML.replace(re, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">0</span>, $<span class="number">1</span></span>) </span>&#123;</span><br><span class="line">aInput[<span class="number">0</span>].value = oDate.getFullYear() + <span class="string">&#x27;-&#x27;</span> + (oDate.getMonth() + <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + $<span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>((oDate.getMonth() + <span class="number">2</span>) == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.innerHTML.replace(re, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">0</span>, $<span class="number">1</span></span>) </span>&#123;</span><br><span class="line">aInput[<span class="number">0</span>].value = oDate.getFullYear() + <span class="number">1</span> + <span class="string">&#x27;-&#x27;</span> + (oDate.getMonth() + <span class="number">2</span>) + <span class="string">&#x27;-&#x27;</span> + $<span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.innerHTML.replace(re, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">0</span>, $<span class="number">1</span></span>) </span>&#123;</span><br><span class="line">aInput[<span class="number">0</span>].value = oDate.getFullYear() + <span class="string">&#x27;-&#x27;</span> + (oDate.getMonth() + <span class="number">2</span>) + <span class="string">&#x27;-&#x27;</span> + $<span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­è¡¨æ ¼å†…æ˜¯å¦æœ‰ä»·æ ¼æ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.getElementsByTagName(<span class="string">&#x27;p&#x27;</span>)[<span class="number">0</span>]) &#123;</span><br><span class="line">aInput[<span class="number">1</span>].value = <span class="built_in">this</span>.getElementsByTagName(<span class="string">&#x27;p&#x27;</span>)[<span class="number">0</span>].innerHTML;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">aInput[<span class="number">1</span>].value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">oDiv.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">bBtn = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éšè—å¤šä½™çš„tdè¡¨æ ¼æ¡†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideLastTr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> bBtn = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> bBtn2 = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">35</span>; i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(aTd[i].innerHTML != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">bBtn = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(bBtn) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">35</span>; i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line"><span class="comment">//  aTd[i].style.display = &#x27;none&#x27;;</span></span><br><span class="line">aTd[i].style.height = <span class="string">&#x27;42px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">35</span>; i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line">aTd[i].style.height = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">77</span>; i &lt; <span class="number">84</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(aTd[i].innerHTML != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">bBtn2 = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(bBtn2) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">77</span>; i &lt; <span class="number">84</span>; i++) &#123;</span><br><span class="line">aTd[i].style.height = <span class="string">&#x27;42px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">77</span>; i &lt; <span class="number">84</span>; i++) &#123;</span><br><span class="line">aTd[i].style.height = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹ Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> HTML </tag>
            
            <tag> Javascript </tag>
            
            <tag> Demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸€ï¼‰</title>
      <link href="2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p>æ€è·¯ï¼šé¦–å…ˆè·å–å…ƒç´ èŠ‚ç‚¹å…ƒç´ â€”&gt;æ ¹æ®ç‚¹å‡»äº‹ä»¶éšè—æ˜¾ç¤ºå…ƒç´ â€”&gt;å»ºç«‹showdateæ–¹æ³•ï¼ˆåˆ¤æ–­12æœˆ åˆ™å³è¾¹å¹´ä»½+1ï¼Œæœˆä»½1 ï¼‰â€”&gt;è¿˜è¦è®¾ç½®btnå¼€å…³ é˜²æ­¢å¤šæ¬¡é‡å»ºâ€”&gt;æ ¹æ®å…ƒç´ æ¸…ç©º forå¾ªç¯åˆ— è¡Œã€æŠŠ th tr theadåŠ å…¥tableâ€”&gt;æ ¹æ®åˆ¤æ–­æ¯ä¸€æ¬¡ç‚¹å‡»è¿›å…¥æœˆä»½å¿…é¡»å…ˆæ¸…ç©ºä¸€æ¬¡tdåˆ¤æ–­æœˆä»½å¤§å°åŠé—°å¹´â€”&gt; switchå¾ªç¯åŠ å…¥æ—¥æœŸ</p><h5 id="å¸ƒå±€æ˜¯è¿™æ ·ç´«çš„"><a href="#å¸ƒå±€æ˜¯è¿™æ ·ç´«çš„" class="headerlink" title="å¸ƒå±€æ˜¯è¿™æ ·ç´«çš„"></a>å¸ƒå±€æ˜¯è¿™æ ·ç´«çš„</h5><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E6%97%A5%E5%8E%86%E5%B8%83%E5%B1%80.png"                      alt="image"                ></p><h5 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¡®å®š&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nowTime&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;l&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span>æœˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">span</span>&gt;</span>å¹´<span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span>æœˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨ä¸€<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨äºŒ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨ä¸‰<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨å››<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨äº”<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span>å‘¨å…­<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span>å‘¨æ—¥<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    1</span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>200å…ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nextTime&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;r&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span>æœˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">span</span>&gt;</span>å¹´<span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span>æœˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨ä¸€<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨äºŒ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨ä¸‰<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨å››<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å‘¨äº”<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span>å‘¨å…­<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span>å‘¨æ—¥<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    1</span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>200å…ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">*&#123; <span class="attribute">margin</span>:<span class="number">0</span>; <span class="attribute">padding</span>:<span class="number">0</span>; <span class="attribute">font-size</span>:<span class="number">12px</span>;&#125;</span><br><span class="line"><span class="selector-id">#div1</span>&#123; <span class="attribute">margin</span>:<span class="number">20px</span>; <span class="attribute">position</span>:absolute; <span class="attribute">top</span>:<span class="number">25px</span>; <span class="attribute">left</span>:<span class="number">10px</span>; <span class="attribute">display</span>:block;&#125;</span><br><span class="line"><span class="selector-id">#nowTime</span>&#123; <span class="attribute">width</span>:<span class="number">330px</span>; <span class="attribute">float</span><span class="selector-pseudo">:left</span>;&#125;</span><br><span class="line"><span class="selector-id">#nextTime</span> &#123; <span class="attribute">width</span>:<span class="number">330px</span>; <span class="attribute">float</span><span class="selector-pseudo">:left</span>; <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;&#125;</span><br><span class="line"><span class="selector-class">.title</span>&#123; <span class="attribute">width</span>:<span class="number">100%</span>; <span class="attribute">height</span>:<span class="number">30px</span>; <span class="attribute">background</span>:red; <span class="attribute">color</span>:<span class="number">#FFFFFF</span>; <span class="attribute">position</span>:relative;&#125;</span><br><span class="line"><span class="selector-class">.title</span> <span class="selector-class">.c</span>&#123; <span class="attribute">text-align</span>:center; <span class="attribute">line-height</span>:<span class="number">30px</span>;&#125;</span><br><span class="line"><span class="selector-class">.title</span> <span class="selector-class">.l</span>&#123; <span class="attribute">position</span>:absolute; <span class="attribute">top</span>:<span class="number">6px</span>; <span class="attribute">left</span>:<span class="number">5px</span>;&#125;</span><br><span class="line"><span class="selector-class">.title</span> <span class="selector-class">.r</span>&#123; <span class="attribute">position</span>:absolute; <span class="attribute">top</span>:<span class="number">6px</span>; <span class="attribute">right</span>:<span class="number">5px</span>;&#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123; <span class="attribute">width</span>:<span class="number">100%</span>; <span class="attribute">background</span>:<span class="number">#dee3e9</span>; <span class="attribute">color</span>:<span class="number">#9ea7ac</span>;&#125;</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">tr</span>&#123; <span class="attribute">background</span>:<span class="number">#f9fafc</span>;&#125;</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">th</span>&#123; <span class="attribute">width</span>:<span class="number">46px</span>; <span class="attribute">padding</span>:<span class="number">5px</span>;&#125;</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">td</span>&#123; <span class="attribute">padding</span>:<span class="number">5px</span>; <span class="attribute">text-align</span>:center;&#125;</span><br><span class="line"><span class="selector-class">.red</span>&#123; <span class="attribute">color</span>:<span class="number">#FF0000</span>;&#125;</span><br><span class="line"><span class="selector-class">.blue</span>&#123; <span class="attribute">color</span>:<span class="number">#0000FF</span>;&#125;</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">td</span> <span class="selector-tag">p</span>&#123; <span class="attribute">color</span>:<span class="number">#FF0000</span>;&#125;</span><br><span class="line"><span class="selector-tag">input</span>&#123; <span class="attribute">margin</span>:<span class="number">20px</span>;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹ Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> HTML </tag>
            
            <tag> Javascript </tag>
            
            <tag> Demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆäºŒï¼‰</title>
      <link href="2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨ç”¨é¢å‘è¿‡ç¨‹æ–¹å¼</p><ol><li>ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºæˆ–éšè—æ—¥å†</li><li>è®¾ç½®æ—¥æœŸå¯¹è±¡ é€šè¿‡showDateæ–¹æ³•ä¼ å¯¹åº”æ—¥æœŸè¿‡å»</li><li>showDateæ–¹æ³•åŠ¨æ€ç”Ÿæˆtableæ—¥å†è¡¨æ ¼</li><li>æ ¹æ®æ—¥æœŸåˆ¤æ–­é—°å¹´</li><li>æ ¹æ®æœˆä»½åˆ¤æ–­å¤©æ•°éå†ä»æ¯æœˆ1å·å¯¹åº”å‘¨å‡ å¼€å§‹éå†ç¬¬å‡ ä¸ªtdå¼€å§‹**</li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E6%97%A5%E5%8E%862.jpg"                      alt="image"                ></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> aInput = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oNowTime = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;nowTime&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oNextTime = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;nextTime&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> bBtn = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">aInput[<span class="number">2</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">if</span>(bBtn) &#123;</span><br><span class="line">oDiv.style.display = <span class="string">&quot;block&quot;</span>;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸‹ä¸€å¹´</span></span><br><span class="line"><span class="keyword">if</span>(oDate.getMonth() + <span class="number">1</span> == <span class="number">12</span>) &#123;</span><br><span class="line"><span class="comment">//ä¼ ä½ç½®   å¹´ æœˆ  trueä»£è¡¨è¿™ä¸ªæœˆè¿˜æ˜¯ä¸‹ä¸€ä¸ªæœˆ</span></span><br><span class="line">showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, oDate.getFullYear() + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">showDate(oNextTime, oDate.getFullYear(), oDate.getMonth() + <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">oDiv.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">bBtn = !bBtn;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showDate</span>(<span class="params">obj, year, month, bBtn</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="comment">//è®¾ç½®å¼€å…³é˜²æ­¢é‡æ–°ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">if</span>(!obj.bBtn) &#123;</span><br><span class="line"><span class="comment">//ç”Ÿæˆå‘¨è¡¨æ ¼table tableæœ‰ä¸ªç‰¹åˆ«åœ¨ieä¸‹ç”¨HTMLæ˜¯ä¸å…¼å®¹çš„</span></span><br><span class="line">obj.oTitle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">obj.oTitle.className = <span class="string">&#x27;title&#x27;</span>;</span><br><span class="line">obj.appendChild(obj.oTitle);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oTable = <span class="built_in">document</span>.createElement(<span class="string">&#x27;table&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oThead = <span class="built_in">document</span>.createElement(<span class="string">&#x27;thead&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oTr = <span class="built_in">document</span>.createElement(<span class="string">&#x27;tr&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;å‘¨ä¸€&#x27;</span>, <span class="string">&#x27;å‘¨äºŒ&#x27;</span>, <span class="string">&#x27;å‘¨ä¸‰&#x27;</span>, <span class="string">&#x27;å‘¨å››&#x27;</span>, <span class="string">&#x27;å‘¨äº”&#x27;</span>, <span class="string">&#x27;å‘¨å…­&#x27;</span>, <span class="string">&#x27;å‘¨æ—¥&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTh = <span class="built_in">document</span>.createElement(<span class="string">&#x27;th&#x27;</span>);</span><br><span class="line">oTh.innerHTML = arr[i];</span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">5</span> || i == <span class="number">6</span>) &#123;</span><br><span class="line">oTh.className = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">oTr.appendChild(oTh);</span><br><span class="line">&#125;</span><br><span class="line">oThead.appendChild(oTr);</span><br><span class="line">oTable.appendChild(oThead);</span><br><span class="line"><span class="comment">//ç”Ÿæˆæ—¥æœŸ ç”Ÿæˆ6ä¸ªè¡Œ 7ä¸ªåˆ—  æ¯ä¸€è¡Œä¸ƒä¸ªåˆ—</span></span><br><span class="line"><span class="keyword">var</span> oTbody = <span class="built_in">document</span>.createElement(<span class="string">&#x27;tBody&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTr = <span class="built_in">document</span>.createElement(<span class="string">&quot;tr&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line"><span class="keyword">var</span> oTd = <span class="built_in">document</span>.createElement(<span class="string">&quot;td&quot;</span>);</span><br><span class="line">oTr.appendChild(oTd);</span><br><span class="line">&#125;</span><br><span class="line">oTbody.appendChild(oTr);</span><br><span class="line">&#125;</span><br><span class="line">oTable.appendChild(oTbody);</span><br><span class="line">obj.appendChild(oTable);</span><br><span class="line"></span><br><span class="line">obj.bBtn = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// obj.oTitle.innerHTML = (bBtn ? &#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27; + (month - 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; : &#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27; + (month + 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;) + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;;</span></span><br><span class="line"><span class="comment">//æ¢ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span>(bBtn) &#123;</span><br><span class="line">obj.oTitle.innerHTML = <span class="string">&#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span> + <span class="string">&#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27;</span> + year + <span class="string">&#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27;</span> + month + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">obj.oTitle.innerHTML = <span class="string">&#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27;</span> + (month + <span class="number">1</span>) + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span> + <span class="string">&#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27;</span> + year + <span class="string">&#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27;</span> + month + <span class="string">&#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”Ÿæˆæ¯ä¸€ä¸ªæœˆçš„å¤©æ•° æ¯æ¬¡ç‚¹å‡»æœˆä»½æ¸…ç©º</span></span><br><span class="line"><span class="keyword">var</span> aTd = obj.getElementsByTagName(<span class="string">&#x27;td&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aTd.length; i++) &#123;</span><br><span class="line">aTd[i].innerHTML = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æœˆä»½çš„å¤©æ•°</span></span><br><span class="line"><span class="keyword">if</span>(month == <span class="number">1</span> || month == <span class="number">3</span> || month == <span class="number">5</span> || month == <span class="number">7</span> || month == <span class="number">8</span> || month == <span class="number">10</span> || month == <span class="number">12</span>) &#123;</span><br><span class="line">dayNum = <span class="number">31</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(month == <span class="number">4</span> || month == <span class="number">6</span> || month == <span class="number">9</span> || month == <span class="number">11</span>) &#123;</span><br><span class="line">dayNum = <span class="number">30</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(month == <span class="number">2</span> &amp;&amp; isLeapYear(year)) &#123;</span><br><span class="line">dayNum = <span class="number">29</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dayNum = <span class="number">28</span>;</span><br><span class="line">&#125;</span><br><span class="line">oDate.setFullYear(year);</span><br><span class="line">oDate.setMonth(month - <span class="number">1</span>);</span><br><span class="line">oDate.setDate(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(oDate.getDay());</span><br><span class="line"><span class="comment">//æ ¹æ®1å· å¯¹åº”çš„ getDayï¼ˆï¼‰æ˜¯å‘¨å‡ ï¼Ÿ</span></span><br><span class="line"><span class="keyword">switch</span>(oDate.getDay()) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="comment">//å‘¨æ—¥ ç¬¬ä¸ƒä¸ªtdå¼€å§‹éå†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">6</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">1</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">2</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">3</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">4</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dayNum; i++) &#123;</span><br><span class="line">aTd[i + <span class="number">5</span>].innerHTML = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLeapYear</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(year % <span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹ Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> HTML </tag>
            
            <tag> Javascript </tag>
            
            <tag> Demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„ä»¶ç³»åˆ—_å¼¹çª—</title>
      <link href="2017/08/16/%E7%BB%84%E4%BB%B6%E7%B3%BB%E5%88%97_%E5%BC%B9%E7%AA%97/"/>
      <url>2017/08/16/%E7%BB%84%E4%BB%B6%E7%B3%BB%E5%88%97_%E5%BC%B9%E7%AA%97/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨å‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ˆå…¶å®ƒå¼€å‘ä¹Ÿä¸€æ ·ï¼‰ï¼Œæ€»æ˜¯ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä»¥å‰åšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚å¯¹è¯å¼¹çª—ã€ç™»é™†çª—ç­‰ç­‰ã€‚<br><a id="more"></a><br>ä¸€èˆ¬æˆ‘ä»¬å†™äº†ä¹‹åå°±å¾ˆå°‘å»ç®¡å®ƒäº†ï¼Œä½†æ˜¯åƒè¿™æ ·çš„ä¸€äº›ç»„ä»¶ï¼Œåœ¨ä¸åŒçš„é¡¹ç›®å¼€å‘è¿‡ç¨‹æ€»æ˜¯å¾ˆå¤šæ—¶å€™éœ€è¦å¤ç”¨èµ·æ¥çš„ã€‚è™½ç„¶ç°åœ¨ç½‘ä¸Šå¾ˆå¤šjsåº“éƒ½å°è£…äº†è¿™æ ·çš„ä¸€äº›ç»„ä»¶ï¼Œå¦‚æœä½ ä¸ºäº†å›¾å¿«ã€æ–¹ä¾¿çš„è¯ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨è¿™äº›åº“ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†ä»è¿™ä¸¤ä¸ªæ–¹é¢æ¥è¯´ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦æˆ‘ä»¬æŠŠæˆ‘ä»¬å†™è¿‡çš„è¿™äº›ç»„ä»¶åˆ†ç¦»å‡ºæ¥ä»è€Œä»¥åå¤ç”¨ï¼š1ã€å¦‚æœä½ ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“å¹¶ä¸æ˜¯åˆšå¥½å°è£…äº†ä½ è¦çš„é‚£ä¸ªç»„ä»¶è€Œå·²ï¼Œæ¯”å¦‚ä½ éœ€è¦ä¸€ä¸ªç™»é™†ç»„ä»¶ï¼Œé‚£ä¹ˆå¯èƒ½ç¬¬ä¸‰æ–¹åº“ç¡®å®å°è£…äº†è¿™ä¸ªç»„ä»¶ï¼Œä½†åŒæ—¶ä¹Ÿå°è£…äº†å¾ˆå¤šå…¶å®ƒç»„ä»¶ï¼Œæ‰€ä»¥ä½ å¦‚æœç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œé‚£ä¹ˆä½ å°±ä¼šä¸ºäº†ä¸€ä¸ªå°ç»„ä»¶å¼•å…¥ä¸€äº›åºå¤§çš„jsæ–‡ä»¶å’Œcssæ–‡ä»¶ä»¥åŠå›¾ç‰‡ï¼è¿™æ ·çš„åº“å¼•å…¥å¤šäº†çš„è¯ï¼Œé‚£ä¹ˆåæœŸä½ ä¸ä»…éœ€è¦æ›´å¤šåœ°ç»´æŠ¤å„ä¸ªåº“çš„å†²çªç­‰ç­‰é—®é¢˜ï¼Œè€Œä¸”ä½ çš„ç½‘ç«™å› æ­¤ä¹Ÿä¼šå“åº”è¶Šæ¥è¶Šæ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼2ã€å¦‚æœä½ è‡ªå·±æŠŠä½ å†™è¿‡çš„ç»„ä»¶å•ç‹¬åˆ†ç¦»å‡ºæ¥å¤ç”¨çš„è¯ï¼Œé¦–å…ˆæ¥è¯´ï¼Œä½ è‡ªå·±å†™è¿‡çš„ï¼Œé‚£ä¹ˆä½ ç”¨èµ·æ¥ä¹Ÿä¼šæ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¯¹ä¸ï¼Ÿè€Œä¸”ï¼Œè¿™æ ·çš„å·¥ä½œä½ åšå¤šäº†ä»¥åï¼Œæé«˜ä½ åŸºæœ¬åŠŸçš„åŒæ—¶ï¼Œä½ è¿˜ä¼šå‘ç°ä½ ç°åœ¨å°±æ˜¯åœ¨å†™ä¸€ä¸ªâ€œç¬¬ä¸‰æ–¹åº“â€äº†ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç‘•ç–µï¼Œä½†æ˜¯åŸç†å·®ä¸å¤šçš„ï¼</p><h5 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h5><h5 id="html"><a href="#html" class="headerlink" title="html"></a>html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sc-box sc-login-box&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sc-login&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sc-login&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-ellipsis sc-login__title&quot;</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sc-login__input&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;label&quot;</span>&gt;</span>è´¦å·ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·å¡«å†™è´¦å·&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;label&quot;</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·å¡«å†™å¯†ç &quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sc-login__btn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;login_cancel btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">title</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;login_ensure btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">title</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* å‘å¤–æš´éœ²ä¸€ä¸ªæ¥å£Loginï¼Œä¸ºäº†å‡å°‘å‘½åå†²çªï¼Œç›¸å…³æ“ä½œåœ¨å…¶å®ä¾‹å±æ€§æˆ–è€…æ–¹æ³•ä¸Šæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Login</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.init.apply(<span class="built_in">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Login.prototype = &#123;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">*idå‚æ•°ç”¨äºè·å–loginå¼¹çª—</span></span><br><span class="line"><span class="comment">*configç”¨äºè®¾ç½®ç›¸å…³å›è°ƒå‚æ•°ç­‰</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">init:<span class="function"><span class="keyword">function</span>(<span class="params">id,config</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> login_dom = (<span class="keyword">typeof</span> id === <span class="string">&#x27;string&#x27;</span>)?<span class="built_in">document</span>.getElementById(id):id;</span><br><span class="line"><span class="keyword">if</span>(!login_dom)&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ç™»é™†æ¡†éšè—æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hide</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">login_dom.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ç‚¹å‡»å–æ¶ˆæŒ‰é’®æ“ä½œ</span></span><br><span class="line">login_dom.querySelector(<span class="string">&#x27;.login_cancel&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">hide();</span><br><span class="line"><span class="keyword">if</span>(config.cancel)&#123;</span><br><span class="line">config.cancel();</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ç‚¹å‡»ç¡®å®šæŒ‰é’®æ“ä½œ</span></span><br><span class="line">login_dom.querySelector(<span class="string">&#x27;.login_ensure&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">hide();</span><br><span class="line"><span class="keyword">if</span>(config.ensure)&#123;</span><br><span class="line">config.ensure();</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨ï¼šå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®éœ€è¦å†™åœ¨window.onloadæˆ–jqueryçš„$å›è°ƒå‡½æ•°é‡Œé¢è°ƒç”¨</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//è°ƒç”¨</span></span><br><span class="line"><span class="keyword">new</span> Login(<span class="string">&#x27;sc-login&#x27;</span>,&#123;</span><br><span class="line">cancel:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//ç‚¹å‡»å–æ¶ˆæŒ‰é’®è„šæœ¬ goes here</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å–æ¶ˆ&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line">ensure:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//ç‚¹å‡»ç¡®å®šæŒ‰é’®è„šæœ¬ goes here</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ç¡®å®š&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> Javascript </tag>
            
            <tag> ç»„ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•</title>
      <link href="2017/08/05/%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80%E7%9A%84%E4%BA%94%E7%A7%8D%E5%86%99%E6%B3%95/"/>
      <url>2017/08/05/%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80%E7%9A%84%E4%BA%94%E7%A7%8D%E5%86%99%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å·²çŸ¥é«˜åº¦  å·¦å³è·ç¦»å›ºå®š ä¸­é—´è‡ªé€‚åº”ä¸‰æ å¸ƒå±€åœ¨htmlå¾ˆå¸¸è§ï¼ŒåŸºç¡€çŸ¥è¯†å›é¡¾<br><a id="more"></a></p><blockquote><p>åŒé£ç¿¼å¸ƒå±€ä¸åœ£æ¯å¸ƒå±€çš„ä¸åŒä¹‹å¤„ï¼Œåœ£æ¯å¸ƒå±€çš„çš„å·¦ä¸­å³ä¸‰åˆ—å®¹å™¨ï¼Œä¸­é—´middleå¤šäº†ä¸€ä¸ªå­å®¹å™¨å­˜åœ¨ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ã€‚</p></blockquote><h2 id="æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•"><a href="#æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•" class="headerlink" title="æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•"></a>æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•</h2><p>å…³é”®ç‚¹</p><ol><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left ä¸ left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®</li><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ éœ€è¦è®¾ç½® padding</li><li>åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„</li></ol><html><br><iframe width="100%" height="300" src="//jsrun.net/ZYXKp/embedded/all/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><br></html><h2 id="æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•"><a href="#æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•" class="headerlink" title="æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•"></a>æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•</h2><p>å…³é”®ç‚¹</p><ol><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦</li><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ ä¸éœ€è¦è®¾ç½® padding</li><li>åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„</li></ol><iframe width="100%" height="300" src="//jsrun.net/hYXKp/embedded/all/light" allowfullscreen="allowfullscreen" frameborder="0"></iframe><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout &#123;</span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0px</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="css">        <span class="selector-class">.layout</span> <span class="selector-tag">article</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">min-height</span>: <span class="number">100px</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•-1"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•-1" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout float&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        .layout.float .left &#123;</span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background</span>: red;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout.float .right &#123;</span><br><span class="line"><span class="css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background</span>: blue;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout.float .mid &#123;</span><br><span class="line"><span class="css">            <span class="attribute">background</span>: yellow;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ®åŠ¨è§£å†³æ–¹æ¡ˆ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•-2"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•-2" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout table&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">            .layout.table .left-mid-right &#123;</span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line"><span class="css">            <span class="selector-class">.layout</span><span class="selector-class">.table</span> <span class="selector-class">.left-mid-right</span>&gt;<span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: table-cell;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            .layout.table .left &#123;</span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">background</span>: red;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            .layout.table .right &#123;</span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">background</span>: blue;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            .layout.table .mid &#123;</span><br><span class="line"><span class="css">                <span class="attribute">background</span>: yellow;</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexboxå¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•-3"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•-3" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout flexbox&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">          .layout.flexbox &#123;</span><br><span class="line"><span class="css">              <span class="attribute">margin-top</span>: <span class="number">130px</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.flexbox .left-mid-right &#123;</span><br><span class="line"><span class="css">              <span class="attribute">display</span>: flex;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.flexbox .left &#123;</span><br><span class="line"><span class="css">              <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">              <span class="attribute">background</span>: red;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.flexbox .right &#123;</span><br><span class="line"><span class="css">              <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">              <span class="attribute">background</span>: blue;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.flexbox .mid &#123;</span><br><span class="line"><span class="css">              <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">              <span class="attribute">background</span>: yellow;</span></span><br><span class="line">          &#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h1</span>&gt;</span>flexboxå¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•-4"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•-4" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout absolute&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.layout</span><span class="selector-class">.absolute</span> <span class="selector-class">.left-mid-right</span>&gt;<span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout.absolute .left &#123;</span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background</span>: red;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout.absolute .right &#123;</span><br><span class="line"><span class="css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background</span>: blue;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .layout.absolute .mid &#123;</span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background</span>: yellow;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç»å¯¹å®šä½<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å¸ƒå±€æ–¹æ³•-5"><a href="#å…¶ä»–å¸ƒå±€æ–¹æ³•-5" class="headerlink" title="å…¶ä»–å¸ƒå±€æ–¹æ³•-"></a>å…¶ä»–å¸ƒå±€æ–¹æ³•-</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout grid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">          .layout.grid .left-mid-right &#123;</span><br><span class="line"><span class="css">              <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="css">              <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">              <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">              grid-template-rows: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">              grid-template-<span class="attribute">columns</span>: <span class="number">300px</span> auto <span class="number">300px</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.grid .left &#123;</span><br><span class="line"><span class="css">              <span class="attribute">background</span>: red;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.grid .right &#123;</span><br><span class="line"><span class="css">              <span class="attribute">background</span>: blue;</span></span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          .layout.grid .mid &#123;</span><br><span class="line"><span class="css">              <span class="attribute">background</span>: yellow;</span></span><br><span class="line">          &#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-mid-right&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç½‘æ ¼å¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸‰æ å¸ƒå±€<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js çš„æœ¬è´¨</title>
      <link href="2017/08/03/Node.js%20%E7%9A%84%E6%9C%AC%E8%B4%A8/"/>
      <url>2017/08/03/Node.js%20%E7%9A%84%E6%9C%AC%E8%B4%A8/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚<br><a id="more"></a><br>reqåœ¨æµè§ˆå™¨å¾ˆæ— èŠï¼Œé€šè¿‡ç½‘ç»œè·‘åˆ°äº†Node.jsæœåŠ¡å™¨ï¼Œå®ƒçš„ç›®çš„æ˜¯æƒ³è§åˆ°å›½ç‹server.jsï¼ˆä½ ç¼–å†™çš„ä»£ç ï¼‰ï¼Œreqæƒ³å’Œserver.jsè¦ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¯å®ƒè¿›å…¥æœåŠ¡å™¨æ—¶ï¼Œè¿æ¥å®ƒçš„æ˜¯ä¸ªå¤§è‡£ï¼Œå¤§è‡£å‘Šè¯‰ä»–ï¼Œserver.jsæ­£åœ¨æ¥å¾…å¦ä¸€ä¸ªreqï¼Œè¯·ä»–ç­‰0.1æ¯«ç§’ã€‚ç»ˆäºreqè§åˆ°äº†å›½ç‹ï¼Œå›½ç‹çš„ä¼šè®®å®¤æŒºæ¼‚äº®çš„ï¼Œä¸‹é¢æ˜¯ä¼šè®®å®¤çš„å¤§ä½“æ ·å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.on(â€œrequestâ€,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>reqå’Œserver.jsè¦ä¸€ä¸ªhello.htmlçš„ç½‘é¡µæ–‡ä»¶ï¼Œè¿™æ—¶å€™å®ƒçœ‹åˆ°ä¼šè®®å®¤å¤–é¢è¿˜æœ‰å‡ ä¸ªreqåœ¨ç­‰å¾…ï¼Œserver.jså›½ç‹æŠŠä»»åŠ¡äº¤ç»™äº† fså¤§è‡£ï¼Œç„¶åé©¬ä¸Šå°±å»æ¥å¾…å¦ä¸€ä¸ªreqäº†ï¼Œreqå¿ƒé‡Œæƒ³å›½ç‹çš„æ•ˆç‡å¥½é«˜å•Šï¼Œéš¾é“è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„æ°¸ä¸é˜»å¡çš„ I/O å—ï¼Œè¿™æ—¶å€™fså¤§è‡£å¸®å®ƒæŠŠhello.htmlæ–‡ä»¶é€ä¸Šäº†è¿”ç¨‹çš„åˆ—è½¦resã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.on(â€œrequestâ€,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    fs.createReadStream(â€œhello.htmlâ€).pipe(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>reqå›åˆ°æµè§ˆå™¨åï¼Œæ„Ÿæ…¨Node.js å›½å®¶åŠäº‹æ•ˆç‡ï¼Œå®ƒåœ¨æ—¥è®°ä¸­å†™ä¸‹ï¼š</p><p>é€šè¿‡é›†æƒçš„ç¼–ç æ–¹å¼ï¼Œè®©ä»£ç æ›´åŠ å¥½ç®¡ç†ã€æ›´å¥½ç»´æŠ¤ï¼Œé¿å…å¤šçº¿ç¨‹å¸¦æ¥çš„æ­»é”ç­‰åé—ç—‡ã€‚é€šè¿‡éé˜»å¡å¼‚æ­¥ I/O çš„è°ƒç”¨ï¼ŒæŠŠè€—æ—¶çš„å·¥ä½œäº¤ç»™åº•ä¸‹äººå»åŠï¼Œè€Œä¸æ˜¯ç­‰å¾…I/Oå®Œæˆåå†è¿›è¡Œä¸‹ä¸€æ­¥çš„å·¥ä½œï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶æ¨¡å¼ï¼Œç›‘å¬å·¥ä½œè¿›åº¦ï¼Œè¿™æ®µæ—¶é—´é‡Œï¼ŒNode.jsè¿˜å¯ä»¥ä¸ é—´æ–­çš„å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ç­‰åˆ°I/Oå¤„ç†å®Œæ¯•åï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶ã€‚<br>Node.jsæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>Nodeæä¾›ä¸€ç§ç®€å•çš„æ„å»ºå¯ä¼¸ç¼©ç½‘ç»œç¨‹åºçš„æ–¹æ³•ã€‚åœ¨ Java å’Œ PHP è¿™ç±»è¯­è¨€ä¸­ï¼Œæ¯ä¸ªè¿æ¥éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œæ¯ä¸ªæ–°çº¿ç¨‹å¯èƒ½éœ€è¦ 2 MB çš„é…å¥—å†…å­˜ã€‚åœ¨ä¸€ä¸ªæ‹¥æœ‰ 8 GB RAM çš„ç³»ç»Ÿä¸Šï¼Œç†è®ºä¸Šæœ€å¤§çš„å¹¶å‘è¿æ¥æ•°é‡æ˜¯ 4,000 ä¸ªç”¨æˆ·ã€‚éšç€æ‚¨çš„å®¢æˆ·ç¾¤çš„å¢é•¿ï¼Œå¦‚æœå¸Œæœ›æ‚¨çš„ Web åº”ç”¨ç¨‹åºæ”¯æŒæ›´å¤šç”¨æˆ·ï¼Œé‚£ä¹ˆï¼Œæ‚¨å¿…é¡»æ·»åŠ æ›´å¤šæœåŠ¡å™¨ã€‚</p><p>Nodeæ›´æ”¹äº†è¿æ¥åˆ°æœåŠ¡å™¨çš„æ–¹å¼ã€‚æ¯ä¸ªè¿æ¥å‘å°„ä¸€ä¸ªåœ¨ Node å¼•æ“çš„è¿›ç¨‹ä¸­è¿è¡Œçš„äº‹ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªè¿æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ OS çº¿ç¨‹ã€‚å®ƒç»ä¸ä¼šæ­»é”ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸å…è®¸ä½¿ç”¨é”ï¼Œå®ƒä¸ä¼šç›´æ¥é˜»å¡ I/O è°ƒç”¨ã€‚å®ƒçš„æœåŠ¡å™¨èƒ½æ”¯æŒæ•°ä¸‡ä¸ªå¹¶å‘è¿æ¥ã€‚</p><p>Node.jsèƒŒåçœŸæ­£çš„ä¼˜åŠ¿</p><p>Node.js æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œåœ¨æˆ‘çœ‹æ¥é™¤äº†é«˜æ€§èƒ½å¤–ï¼Œå®ƒç»Ÿä¸€äº†å‰åç«¯è¯­è¨€å’Œæ•°æ® (json)ï¼Œè¿™æ‰æ˜¯å®ƒæœ€å¤§ä¼˜åŠ¿ã€‚paypalå…¬å¸å…¨é¢è½¬è‡³Node.jsæŠ€æœ¯ï¼Œä¸»è¦åŸå› æ˜¯Node.jsæé«˜äº†å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¹ŸèŠ‚çœäº†æˆæœ¬ã€‚</p><p>éš¾å­¦å—ï¼Ÿ</p><p>åªè¦ä¼šJavaScriptåŸºæœ¬çŸ¥è¯†å³å¯ï¼Œjavascriptçš„è¿è¡Œç¯å¢ƒé€šå¸¸æ˜¯æµè§ˆå™¨ï¼ŒNode.jsç»™äº†javascriptåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒä¸‹ï¼Œè¿˜é…å¤‡äº†ä¸€å¥—APIï¼ŒåŒ…æ‹¬I/Oã€ç½‘ç»œç­‰åŠŸèƒ½ã€‚</p><p>è½¬è‡ªï¼š<a class="link"   href="http://www.html-js.cn/details/VkK2RAlG-.html" >http://www.html-js.cn/details/VkK2RAlG-.html<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mongodbçš„äºŒç§å†™å…¥æ–¹å¼</title>
      <link href="2017/07/27/mongodb%E7%9A%84%E4%BA%8C%E7%A7%8D%E5%86%99%E5%85%A5%E6%96%B9%E5%BC%8F/"/>
      <url>2017/07/27/mongodb%E7%9A%84%E4%BA%8C%E7%A7%8D%E5%86%99%E5%85%A5%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚<br><a id="more"></a></p>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJsæ¨¡å—formidableå®ç°å¤šæ–‡ä»¶ä¸Šä¼ </title>
      <link href="2017/07/10/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%9B%BE%E4%B8%8A%E4%BC%A0/"/>
      <url>2017/07/10/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%9B%BE%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚<br><a id="more"></a></p><blockquote><p>é€šè¿‡ä¸€æ®µæ—¶é—´çš„æŸ¥é˜…èµ„æ–™ã€æ‘¸ç´¢ï¼Œæˆ‘å‘ç°å®ç°ä¸Šä¼ çš„æ–¹å¼æœ‰ï¼š1.expressä¸­é—´ä»¶multeræ¨¡å—ï¼ˆæ­¤æ•ˆç‡æœ€é«˜ï¼Œåœ¨express3.xåŸç”Ÿæ”¯æŒï¼Œåˆ°äº†express4.xç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—äº†ï¼‰ï¼Œ2.connect-multipartyæ¨¡å—ï¼ˆä½†ç°åœ¨å®˜æ–¹ä¸æ¨èï¼‰ï¼Œ3.ä½¿ç”¨multipartyæ¨¡å—å®ç°ï¼ˆæ­¤æ–¹æ³•æ¯”è¾ƒæ™®éï¼‰ï¼Œ4.ä½¿ç”¨formidableæ’ä»¶å®ç°ï¼ˆæ’ä»¶å‘¢ï¼Œå°±æ˜¯ç®€å•æ˜“æ‡‚ï¼‰;</p></blockquote><p>é¦–å…ˆçŸ¥é“enctypeè¿™ä¸ªå±æ€§ç®¡ç†çš„æ˜¯è¡¨å•çš„MIMEç¼–ç ã€‚å…±æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼š</p><ol><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain<blockquote><p>å…¶ä¸­application/x-www-form-urlencodedæ˜¯é»˜è®¤å€¼ï¼Œä½œç”¨æ˜¯è®¾ç½®è¡¨å•ä¼ è¾“çš„ç¼–ç ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨AJAXä¸­è§è¿‡xmlHttp.setRequestHeader(â€œContent-Typeâ€,â€application/x-www-form- urlencodedâ€);å¦‚æœä¸å†™ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯åœ¨htmlçš„formè¡¨å•é‡Œæ˜¯å¯ä»¥ä¸å†™enctype=application/x-www-form-urlencoded,å› ä¸ºé»˜è®¤çš„HTMLè¡¨å•å°±æ˜¯è¿™ç§ä¼ è¾“ç¼–ç ç±»å‹çš„ã€‚<br>ã€€ã€€è€Œmultipart/form-dataæ˜¯ç”¨æ¥åˆ¶å®šä¼ è¾“æ•°æ®çš„ç‰¹æ®Šç±»å‹çš„ï¼Œä¸»è¦å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„éæ–‡æœ¬çš„å†…å®¹ï¼Œæ¯”å¦‚å›¾ç‰‡æˆ–æ˜¯æ˜¯mp3ç­‰ç­‰ã€‚<br>ã€€ã€€text/plainæ˜¯çº¯æ–‡æœ¬ä¼ è¾“çš„æ„æ€ï¼Œåœ¨å‘é‚®ä»¶çš„æ—¶å€™è¦è®¾ç½®è¿™ç§ç¼–ç ç±»å‹ï¼Œå¦åˆ™ä¼šå‡ºç°æ¥æ”¶æ—¶ç¼–ç æ··ä¹±çš„é—®é¢˜ã€‚ç½‘ç»œä¸Šç»å¸¸æ‹¿text/plainå’Œ text/htmlåšæ¯”è¾ƒï¼Œå…¶å®è¿™ä¸¤ä¸ªå¾ˆå¥½åŒºåˆ†ï¼Œå‰è€…ç”¨æ¥ä¼ è¾“çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯ä¼ é€’htmlä»£ç çš„ç¼–ç ç±»å‹ï¼Œåœ¨å‘é€å¤´æ–‡ä»¶æ—¶æ‰ç”¨å¾—ä¸Šã€‚â‘ å’Œâ‘¢éƒ½ä¸èƒ½ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œåªæœ‰multipart/form-dataæ‰èƒ½å®Œæ•´çš„ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚</p></blockquote></li></ol><p>==ã€€formidableä¸Šä¼ æ’ä»¶ï¼Œä¹Ÿæ˜¯åœ¨githubä¸ŠåŒç±»åŠŸèƒ½äººæ°”æ¯”è¾ƒé«˜çš„ã€‚==</p><h6 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h6><p>ã€€ã€€1. é€Ÿåº¦å¿«ï¼ˆ~500M/sï¼‰,æ²¡æœ‰non-buffering multipartè§£æ</p><p>ã€€ã€€2.è‡ªåŠ¨å†™å…¥åˆ°ä¸Šä¼ æ–‡ä»¶ç£ç›˜</p><p>ã€€ã€€3.å ç”¨å†…å­˜ä½</p><p>ã€€ã€€4.ä¼˜é›…çš„é”™è¯¯å¤„ç†</p><p>ã€€ã€€5.éå¸¸é«˜çš„æµ‹è¯•è¦†ç›–ç‡</p><h6 id="ç›´æ¥ä¸Šä»£ç "><a href="#ç›´æ¥ä¸Šä»£ç " class="headerlink" title="ç›´æ¥ä¸Šä»£ç "></a>ç›´æ¥ä¸Šä»£ç </h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;title&#125;&#125;&#125;å¤šå¼ <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Welcome to &#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;image&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;å›¾ç‰‡&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file_upload&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> btn = $(<span class="string">&quot;#submit&quot;</span>);</span><br><span class="line">      btn.on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         uploadByForm();</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ajax ä¸Šä¼ ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">uploadByForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">//ç¬¬ä¸€æ­¥</span></span><br><span class="line">      <span class="comment">//å®šä¹‰è¡¨å•å˜é‡</span></span><br><span class="line">      <span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;file_upload&#x27;</span>).files;</span><br><span class="line">      <span class="comment">//console.log(file.length);</span></span><br><span class="line">      <span class="comment">//æ–°å»ºä¸€ä¸ªFormDataå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(); <span class="comment">//++++++++++</span></span><br><span class="line">      <span class="comment">//è¿½åŠ æ–‡ä»¶æ•°æ®</span></span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; file.length; i++) &#123;</span><br><span class="line">          formData.append(<span class="string">&quot;file[&quot;</span> + i + <span class="string">&quot;]&quot;</span>, file[i]); <span class="comment">//++++++++++</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(formData);</span><br><span class="line">      <span class="comment">//formData.append(&quot;file&quot;, file[0]); //++++++++++</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//postæ–¹å¼</span></span><br><span class="line">      xhr.open(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;/api/upload/data&#x27;</span>); <span class="comment">//ç¬¬äºŒæ­¥éª¤</span></span><br><span class="line">      <span class="comment">//å‘é€è¯·æ±‚</span></span><br><span class="line">      xhr.send(formData); <span class="comment">//ç¬¬ä¸‰æ­¥éª¤</span></span><br><span class="line">      <span class="comment">//ajaxè¿”å›</span></span><br><span class="line">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//ç¬¬å››æ­¥</span></span><br><span class="line">          <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(xhr.response);</span><br><span class="line">              <span class="built_in">console</span>.log(data)</span><br><span class="line">              <span class="built_in">console</span>.log(data.filesUrl);</span><br><span class="line">              <span class="keyword">if</span>(data.sucess != <span class="string">&quot;0&quot;</span>)</span><br><span class="line">              &#123;</span><br><span class="line">                alert(<span class="string">&quot;ä¸Šä¼ æˆåŠŸï¼ï¼ï¼Œå…¶ä¸­&quot;</span>+data.error+<span class="string">&quot;ä¸ªå¤±è´¥&quot;</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">else</span>&#123;</span><br><span class="line">                 alert(<span class="string">&quot;ä¸Šä¼ å¤±è´¥ï¼ï¼&quot;</span> + data.filesUrl);</span><br><span class="line">              &#125;</span><br><span class="line">             &#125;</span><br><span class="line">          <span class="comment">//è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">          xhr.timeout = <span class="number">100000</span>;</span><br><span class="line">          xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;ã€€ã€€ã€€ã€€ alert(<span class="string">&#x27;è¯·æ±‚è¶…æ—¶ï¼&#x27;</span>);ã€€ã€€ &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">obj</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="comment">//å¯¹è±¡è½¬æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> html = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; obj.length; i++) &#123;</span><br><span class="line">             html += <span class="string">&quot;&lt;li&gt; &lt;img src=&#x27;../&quot;</span>+obj[i]+<span class="string">&quot;&#x27;&gt;&lt;/li&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $(<span class="string">&quot;.box&quot;</span>).append(html);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="åç«¯ä»£ç å¤„ç†"><a href="#åç«¯ä»£ç å¤„ç†" class="headerlink" title="åç«¯ä»£ç å¤„ç†"></a>åç«¯ä»£ç å¤„ç†</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&quot;/upload/data&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="keyword">new</span> formidable.IncomingForm(); <span class="comment">//åˆ›å»ºä¸Šä¼ è¡¨å•</span></span><br><span class="line">    form.encoding = <span class="string">&#x27;utf-8&#x27;</span>; <span class="comment">//è®¾ç½®ç¼–è¾‘</span></span><br><span class="line">    form.uploadDir = <span class="string">&#x27;tmp/&#x27;</span>; <span class="comment">//è®¾ç½®ä¸Šä¼ ç›®å½•</span></span><br><span class="line">    form.keepExtensions = <span class="literal">true</span>; <span class="comment">//ä¿ç•™åç¼€</span></span><br><span class="line">    form.maxFieldsSize = <span class="number">1</span> * <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">//æ–‡ä»¶å¤§å°;</span></span><br><span class="line">     <span class="comment">//å°†å¤šä¸ªå‚æ•°ç»„åˆæˆä¸€ä¸ª path</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    /Users/lovewcc/Documents/æš´åŠ›ç†Šå›¢é˜Ÿ/nodeTest/uploads</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">var</span> targetDir = path.join(__dirname, <span class="string">&#x27;../uploads&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(targetDir);</span><br><span class="line">    <span class="comment">//æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">    fs.access(targetDir, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            fs.mkdirSync(targetDir);</span><br><span class="line">        &#125;</span><br><span class="line">        _fileParse(); <span class="comment">//è°ƒç”¨å¤šå›¾ä¸Šä¼ æ–¹æ³•</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_fileParse</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        form.parse(req, <span class="function"><span class="keyword">function</span>(<span class="params">err, fields, files</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">            <span class="keyword">var</span> filesUrl = []; <span class="comment">//æ•°ç»„</span></span><br><span class="line">            <span class="keyword">var</span> errCount = <span class="number">0</span>; <span class="comment">//é”™è¯¯é•¿åº¦</span></span><br><span class="line">            <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(files);</span><br><span class="line">            <span class="built_in">console</span>.log(keys);</span><br><span class="line">            keys.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(files[key].path);</span><br><span class="line">                <span class="keyword">var</span> filePath = files[key].path;</span><br><span class="line">                <span class="keyword">var</span> fileExt = filePath.substring(filePath.lastIndexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">                <span class="comment">//å›¾ç‰‡å¤§å°</span></span><br><span class="line">                <span class="keyword">if</span> (files[key].size &gt; form.maxFieldsSize) &#123;</span><br><span class="line">                    errCount += <span class="number">1</span>;</span><br><span class="line">                <span class="comment">//å›¾ç‰‡ç±»å‹</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="string">&#x27;.jpg.png&#x27;</span>).indexOf(fileExt.toLowerCase()) === -<span class="number">1</span>) &#123;</span><br><span class="line">                    errCount += <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ä»¥å½“å‰æ—¶é—´æˆ³å¯¹ä¸Šä¼ æ–‡ä»¶è¿›è¡Œé‡å‘½å</span></span><br><span class="line">                    <span class="keyword">var</span> fileName = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() + fileExt;</span><br><span class="line">                    <span class="built_in">console</span>.log(fileName);</span><br><span class="line">                    <span class="keyword">var</span> targetFile = path.join(targetDir, fileName);</span><br><span class="line">                    <span class="built_in">console</span>.log(targetFile);</span><br><span class="line">                    <span class="comment">//ç§»åŠ¨æ–‡ä»¶ å¼‚æ­¥ç»å¸¸æœ‰é—®é¢˜ æ”¹æˆåŒæ­¥Sync</span></span><br><span class="line">                    fs.renameSync(files[key].path, targetFile);</span><br><span class="line">                    filesUrl.push(<span class="string">&#x27;uploads/&#x27;</span> + fileName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            res.json(&#123; <span class="attr">success</span>: keys.length - errCount, <span class="attr">error</span>: errCount, <span class="attr">filesUrl</span>: filesUrl &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">var</span> emptyDir = <span class="function"><span class="keyword">function</span>(<span class="params">fileUrl</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> files = fs.readdirSync(fileUrl); <span class="comment">//è¯»å–è¯¥æ–‡ä»¶å¤¹</span></span><br><span class="line">    files.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> stats = fs.statSync(fileUrl + <span class="string">&#x27;/&#x27;</span> + file);</span><br><span class="line">        <span class="keyword">if</span> (stats.isDirectory()) &#123;</span><br><span class="line">            emptyDir(fileUrl + <span class="string">&#x27;/&#x27;</span> + file);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fs.unlinkSync(fileUrl + <span class="string">&#x27;/&#x27;</span> + file);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;åˆ é™¤æ–‡ä»¶&quot;</span> + fileUrl + <span class="string">&#x27;/&#x27;</span> + file + <span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹å®‰è£…MongoDB åŠä½¿ç”¨æ•™ç¨‹</title>
      <link href="2017/07/09/Mac%E4%B8%8B%E5%AE%89%E8%A3%85MongoDB%20%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>2017/07/09/Mac%E4%B8%8B%E5%AE%89%E8%A3%85MongoDB%20%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚<br><a id="more"></a></p><p>ä»€ä¹ˆæ˜¯NoSqlï¼Ÿ</p><blockquote><p>NoSqlï¼Œå…¨ç§°æ˜¯ Not Only Sql,æŒ‡çš„æ˜¯éå…³ç³»å‹çš„æ•°æ®åº“ã€‚ä¸‹ä¸€ä»£æ•°æ®åº“ä¸»è¦è§£å†³å‡ ä¸ªè¦ç‚¹ï¼šéå…³ç³»å‹çš„ã€åˆ†å¸ƒå¼çš„ã€å¼€æºçš„ã€æ°´å¹³å¯æ‰©å±•çš„ã€‚åŸå§‹çš„ç›®çš„æ˜¯ä¸ºäº†å¤§è§„æ¨¡webåº”ç”¨ï¼Œè¿™åœºè¿åŠ¨å¼€å§‹äº2009å¹´åˆï¼Œé€šå¸¸ç‰¹æ€§åº”ç”¨å¦‚ï¼šæ¨¡å¼è‡ªç”±ã€æ”¯æŒç®€æ˜“å¤åˆ¶ã€ç®€å•çš„APIã€æœ€ç»ˆçš„ä¸€è‡´æ€§ï¼ˆéACIDï¼‰ã€å¤§å®¹é‡æ•°æ®ç­‰ã€‚NoSQLè¢«æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„å½“æ•°key-valueå­˜å‚¨ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–çš„æ–‡æ¡£å‹çš„ã€åˆ—å­˜å‚¨ã€å›¾å‹æ•°æ®åº“ã€xmlæ•°æ®åº“ç­‰ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MongoDB</p><ol><li>JSONé£æ ¼æ–‡ä»¶çš„å½¢å¼ï¼Œé¢å‘æ–‡æ¡£å­˜å‚¨ï¼šæ•°æ®å­˜å‚¨</li><li>å¯¹ä»»ä½•å±æ€§å¯ç´¢å¼•</li><li>å¤åˆ¶å’Œé«˜å¯ç”¨æ€§</li><li>è‡ªåŠ¨åˆ†ç‰‡</li><li>ä¸°å¯Œçš„æŸ¥è¯¢</li><li>å¿«é€Ÿå°±åœ°æ›´æ–°</li><li>MongoDBçš„ä¸“ä¸šæŠ€æœ¯æ”¯æŒ</li></ol><p>é¦–å…ˆå®‰è£…HomeBrew</p><blockquote><p>/usr/bin/ruby -e â€œ$(curl -fsSL <a class="link"   href="https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;" >https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;<i class="fas fa-external-link-alt"></i></a></p></blockquote><ol><li>ä¸‹è½½nodejs,ä¸€è·¯next å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ node -v æœ‰æ˜¾ç¤ºç‰ˆæœ¬å·å°±ä»£è¡¨å®‰è£…æˆåŠŸï¼Œå…¶ä»–å¼‚å¸¸æƒ…å†µæœ¬æ–‡ä¸ä½œä»‹ç»ï¼›</li></ol><ol start="2"><li>ä¸‹è½½Mongodbåï¼Œå°†Mongodb-3.2.5.tar.gz å¤åˆ¶åˆ° /usr/local è·¯å¾„ä¸‹è§£å‹å¾—åˆ°mongodbè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œï¼ˆä¸‹å›¾ä¸­çš„æ˜¯æˆ‘è‡ªå·±æ”¹äº†åå­—åˆ æ‰äº†ç‰ˆæœ¬å·ï¼‰</li></ol><p>*é»˜è®¤æƒ…å†µä¸‹åœ¨Finderä¸­æ˜¯çœ‹ä¸åˆ° /usr è¿™ä¸ªç›®å½•çš„ï¼ˆç»ˆç«¯ç”¨å¾—æºœçš„è¯·ç•¥è¿‡ï¼‰ï¼Œå¯ä»¥æ‰“å¼€FinderåæŒ‰shift + command +G è¾“å…¥ /usr/localåå›è½¦ä¾¿èƒ½çœ‹åˆ°è¿™ä¸ªéšè—çš„ç›®å½•äº†</p><ol start="3"><li><p>ä¸Šå›¾ä¸­å±•ç¤ºçš„å°±æ˜¯æˆ‘çš„æœ¬æœºçš„ç›®å½•ç»“æ„äº†ï¼Œåœ¨/usr/local/mongodb/binä¸‹å°±æ˜¯mongodbçš„æ‰§è¡Œæ–‡ä»¶äº†</p></li><li><p>ç„¶ååœ¨æ ¹ç›®å½•ä¸‹æ–°å»º data æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å†å»ºä¸€ä¸ªdbæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯ä¸Šå›¾ä¸­é‚£ä¸ª usræ–‡ä»¶å¤¹ä¸Šé¢çš„ é‚£ä¸ªdataæ–‡ä»¶å¤¹ ï¼Œé‡Œé¢æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®åº“çš„ï¼Œ</p></li><li><p>ç»ˆç«¯åˆ‡æ¢åˆ°/usr/local/mongodb/binç›®å½•ä¸‹ï¼Œ</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJsæ¨¡å—formidableå®ç°å•æ–‡ä»¶ä¸Šä¼ </title>
      <link href="2017/07/09/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%9B%BE%E4%B8%8A%E4%BC%A0/"/>
      <url>2017/07/09/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%9B%BE%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚<br><a id="more"></a></p><blockquote><p>é€šè¿‡ä¸€æ®µæ—¶é—´çš„æŸ¥é˜…èµ„æ–™ã€æ‘¸ç´¢ï¼Œæˆ‘å‘ç°å®ç°ä¸Šä¼ çš„æ–¹å¼æœ‰ï¼š1.expressä¸­é—´ä»¶multeræ¨¡å—ï¼ˆæ­¤æ•ˆç‡æœ€é«˜ï¼Œåœ¨express3.xåŸç”Ÿæ”¯æŒï¼Œåˆ°äº†express4.xç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—äº†ï¼‰ï¼Œ2.connect-multipartyæ¨¡å—ï¼ˆä½†ç°åœ¨å®˜æ–¹ä¸æ¨èï¼‰ï¼Œ3.ä½¿ç”¨multipartyæ¨¡å—å®ç°ï¼ˆæ­¤æ–¹æ³•æ¯”è¾ƒæ™®éï¼‰ï¼Œ4.ä½¿ç”¨formidableæ’ä»¶å®ç°ï¼ˆæ’ä»¶å‘¢ï¼Œå°±æ˜¯ç®€å•æ˜“æ‡‚ï¼‰;</p></blockquote><p>é¦–å…ˆçŸ¥é“enctypeè¿™ä¸ªå±æ€§ç®¡ç†çš„æ˜¯è¡¨å•çš„MIMEç¼–ç ã€‚å…±æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼š</p><ol><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain<blockquote><p>å…¶ä¸­application/x-www-form-urlencodedæ˜¯é»˜è®¤å€¼ï¼Œä½œç”¨æ˜¯è®¾ç½®è¡¨å•ä¼ è¾“çš„ç¼–ç ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨AJAXä¸­è§è¿‡xmlHttp.setRequestHeader(â€œContent-Typeâ€,â€application/x-www-form- urlencodedâ€);å¦‚æœä¸å†™ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯åœ¨htmlçš„formè¡¨å•é‡Œæ˜¯å¯ä»¥ä¸å†™enctype=application/x-www-form-urlencoded,å› ä¸ºé»˜è®¤çš„HTMLè¡¨å•å°±æ˜¯è¿™ç§ä¼ è¾“ç¼–ç ç±»å‹çš„ã€‚<br>ã€€ã€€è€Œmultipart/form-dataæ˜¯ç”¨æ¥åˆ¶å®šä¼ è¾“æ•°æ®çš„ç‰¹æ®Šç±»å‹çš„ï¼Œä¸»è¦å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„éæ–‡æœ¬çš„å†…å®¹ï¼Œæ¯”å¦‚å›¾ç‰‡æˆ–æ˜¯æ˜¯mp3ç­‰ç­‰ã€‚<br>ã€€ã€€text/plainæ˜¯çº¯æ–‡æœ¬ä¼ è¾“çš„æ„æ€ï¼Œåœ¨å‘é‚®ä»¶çš„æ—¶å€™è¦è®¾ç½®è¿™ç§ç¼–ç ç±»å‹ï¼Œå¦åˆ™ä¼šå‡ºç°æ¥æ”¶æ—¶ç¼–ç æ··ä¹±çš„é—®é¢˜ã€‚ç½‘ç»œä¸Šç»å¸¸æ‹¿text/plainå’Œ text/htmlåšæ¯”è¾ƒï¼Œå…¶å®è¿™ä¸¤ä¸ªå¾ˆå¥½åŒºåˆ†ï¼Œå‰è€…ç”¨æ¥ä¼ è¾“çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯ä¼ é€’htmlä»£ç çš„ç¼–ç ç±»å‹ï¼Œåœ¨å‘é€å¤´æ–‡ä»¶æ—¶æ‰ç”¨å¾—ä¸Šã€‚â‘ å’Œâ‘¢éƒ½ä¸èƒ½ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œåªæœ‰multipart/form-dataæ‰èƒ½å®Œæ•´çš„ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚</p></blockquote></li></ol><p>==ã€€formidableä¸Šä¼ æ’ä»¶ï¼Œä¹Ÿæ˜¯åœ¨githubä¸ŠåŒç±»åŠŸèƒ½äººæ°”æ¯”è¾ƒé«˜çš„ã€‚==</p><h6 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h6><p>ã€€ã€€1. é€Ÿåº¦å¿«ï¼ˆ~500M/sï¼‰,æ²¡æœ‰non-buffering multipartè§£æ</p><p>ã€€ã€€2.è‡ªåŠ¨å†™å…¥åˆ°ä¸Šä¼ æ–‡ä»¶ç£ç›˜</p><p>ã€€ã€€3.å ç”¨å†…å­˜ä½</p><p>ã€€ã€€4.ä¼˜é›…çš„é”™è¯¯å¤„ç†</p><p>ã€€ã€€5.éå¸¸é«˜çš„æµ‹è¯•è¦†ç›–ç‡</p><h6 id="ç›´æ¥ä¸Šä»£ç "><a href="#ç›´æ¥ä¸Šä»£ç " class="headerlink" title="ç›´æ¥ä¸Šä»£ç "></a>ç›´æ¥ä¸Šä»£ç </h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">&quot;form&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">style</span>=<span class="string">&quot;opacity: 0&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">multiple</span>=<span class="string">&quot;multiple&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; left: 50%; top: 50%;margin-left:-60px;margin-top:10px;height: 40px;width:100px;cursor:pointer&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;fulAvatar&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file_upload&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å›¾ç‰‡åœ°å€&quot;</span> <span class="attr">onchange</span>=<span class="string">&quot;uploadByForm();&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="åç«¯ä»£ç å¤„ç†"><a href="#åç«¯ä»£ç å¤„ç†" class="headerlink" title="åç«¯ä»£ç å¤„ç†"></a>åç«¯ä»£ç å¤„ç†</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> formidable = <span class="built_in">require</span>(<span class="string">&#x27;formidable&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾ç‰‡ä¸Šä¼ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type <span class="type">&#123;[type]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.get(<span class="string">&#x27;/upload&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    res.render(<span class="string">&quot;form&quot;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;EXpress&#x27;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//è®¾ç½®å¤´åƒ</span></span><br><span class="line">router.post(<span class="string">&quot;/upload/post&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="keyword">new</span> formidable.IncomingForm(); <span class="comment">//åˆ›å»ºä¸Šä¼ è¡¨å•</span></span><br><span class="line">    form.encoding = <span class="string">&#x27;utf-8&#x27;</span>; <span class="comment">//è®¾ç½®ç¼–è¾‘</span></span><br><span class="line">    form.uploadDir = <span class="string">&#x27;tmp/&#x27;</span>;</span><br><span class="line">    <span class="comment">//form.uploadDir = path.join(__dirname, &#x27;tmp&#x27;); //æ–‡ä»¶ä¿å­˜çš„ä¸´æ—¶ç›®å½•ä¸ºå½“å‰é¡¹ç›®ä¸‹çš„tmpæ–‡ä»¶å¤¹</span></span><br><span class="line">    form.maxFieldsSize = <span class="number">1</span> * <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">//ç”¨æˆ·å¤´åƒå¤§å°é™åˆ¶ä¸ºæœ€å¤§1M</span></span><br><span class="line">    form.keepExtensions = <span class="literal">true</span>; <span class="comment">//ä½¿ç”¨æ–‡ä»¶çš„åŸæ‰©å±•å</span></span><br><span class="line"></span><br><span class="line">    form.parse(req, <span class="function"><span class="keyword">function</span>(<span class="params">err, fields, files</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(files);</span></span><br><span class="line">         <span class="built_in">console</span>.log(files.logo.path);</span><br><span class="line">        <span class="comment">//  var filePath = &#x27;&#x27;;</span></span><br><span class="line">        <span class="comment">// if(file.logo)&#123;</span></span><br><span class="line">        <span class="comment">//   filePath = file.logo.path;</span></span><br><span class="line">        <span class="comment">// &#125;else&#123;</span></span><br><span class="line">        <span class="comment">//   for(var key in file)&#123;</span></span><br><span class="line">        <span class="comment">//          if( file[key].path &amp;&amp; filePath===&#x27;&#x27; )&#123;</span></span><br><span class="line">        <span class="comment">//              filePath = file[key].path;</span></span><br><span class="line">        <span class="comment">//              break;</span></span><br><span class="line">        <span class="comment">//          &#125;</span></span><br><span class="line">        <span class="comment">//      &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">//æ–‡ä»¶ç§»åŠ¨çš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œä¸å­˜åœ¨æ—¶åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="comment">// var tagetDir = path.join(__dirname, &#x27;uploads&#x27;);</span></span><br><span class="line">        <span class="comment">// console.log(tagetDir);</span></span><br><span class="line">        <span class="comment">//  if (!fs.existsSync(targetDir)) &#123;</span></span><br><span class="line">        <span class="comment">//     fs.mkdir(targetDir);</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–‡ä»¶ç±»å‹åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">var</span> filePath = files.logo.path;</span><br><span class="line">        <span class="keyword">var</span> extName = filePath.substring(filePath.lastIndexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">        <span class="keyword">if</span> ((<span class="string">&#x27;.jpg.png&#x27;</span>).indexOf(extName.toLowerCase()) === -<span class="number">1</span>) &#123;</span><br><span class="line">            res.code = <span class="number">2</span>;</span><br><span class="line">            res.locals.error = <span class="string">&#x27;åªæ”¯æŒpngå’Œjpgæ ¼å¼å›¾ç‰‡&#x27;</span>;</span><br><span class="line">             emptyDir(form.uploadDir);<span class="comment">//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹</span></span><br><span class="line">            res.json(&#123; <span class="string">&#x27;err&#x27;</span>: res.locals.error, <span class="string">&quot;code&quot;</span>: res.code &#125;);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (files.logo.size &gt; form.maxFieldsSize) &#123;</span><br><span class="line">            res.code = <span class="number">1</span>;</span><br><span class="line">            res.locals.error = <span class="string">&#x27;å›¾ç‰‡å¤§å°è¶…è¿‡1M&#x27;</span>;</span><br><span class="line">            emptyDir(form.uploadDir);<span class="comment">//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹</span></span><br><span class="line">            res.json(&#123; <span class="string">&#x27;err&#x27;</span>: res.locals.error, <span class="string">&quot;code&quot;</span>: res.code &#125;);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ ¹æ®å†…å®¹ç¬¦åˆåˆ™è½¬ç§»æ–‡ä»¶å†…å®¹</span></span><br><span class="line">        <span class="keyword">var</span> avatarName = <span class="built_in">Math</span>.random() + <span class="string">&#x27;.&#x27;</span> + extName;</span><br><span class="line">        <span class="comment">//å›¾ç‰‡è€åœ°å€å†™å…¥åœ°å€ï¼›</span></span><br><span class="line">        <span class="keyword">var</span> oldPath = form.uploadDir + avatarName;</span><br><span class="line">        <span class="comment">//å›¾ç‰‡æ–°åœ°å€å†™å…¥åœ°å€ï¼›</span></span><br><span class="line">        <span class="keyword">var</span> newPath = <span class="string">&#x27;uploads/&#x27;</span> + avatarName;</span><br><span class="line">        <span class="keyword">var</span> showUrl = __dirname + <span class="string">&#x27;/&#x27;</span> + newPath;</span><br><span class="line">        fs.rename(files.logo.path, newPath, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.info(err);</span><br><span class="line">                    res.json(&#123; <span class="attr">code</span>: <span class="number">3</span>, <span class="attr">message</span>: <span class="string">&#x27;æ“ä½œå¤±è´¥&#x27;</span> &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// ä¸Šä¼ æˆåŠŸï¼Œè¿”å›æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">                    <span class="comment">//åˆ é™¤tmpä¸­æ‰€ä»¥ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">var</span> rootFile = form.uploadDir;<span class="comment">//è¦åˆ é™¤çš„æ–‡ä»¶å¤¹ url</span></span><br><span class="line">                <span class="comment">//åˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶(å°†æ‰€æœ‰æ–‡ä»¶å¤¹ç½®ç©º)</span></span><br><span class="line">                  emptyDir(form.uploadDir);</span><br><span class="line">                    res.json(&#123;</span><br><span class="line">                        <span class="string">&quot;code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="string">&quot;newPath&quot;</span>: showUrl,</span><br><span class="line">                        <span class="string">&quot;imgurl&quot;</span>: newPath</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emptyDir = <span class="function"><span class="keyword">function</span>(<span class="params">fileUrl</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> files = fs.readdirSync(fileUrl);<span class="comment">//è¯»å–è¯¥æ–‡ä»¶å¤¹</span></span><br><span class="line">        files.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> stats = fs.statSync(fileUrl+<span class="string">&#x27;/&#x27;</span>+file);</span><br><span class="line">            <span class="keyword">if</span>(stats.isDirectory())&#123;</span><br><span class="line">                emptyDir(fileUrl+<span class="string">&#x27;/&#x27;</span>+file);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                fs.unlinkSync(fileUrl+<span class="string">&#x27;/&#x27;</span>+file);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;åˆ é™¤æ–‡ä»¶&quot;</span>+fileUrl+<span class="string">&#x27;/&#x27;</span>+file+<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodejsçŸ¥å¤šå°‘</title>
      <link href="2017/07/04/nodejs%E7%9F%A5%E5%A4%9A%E5%B0%91/"/>
      <url>2017/07/04/nodejs%E7%9F%A5%E5%A4%9A%E5%B0%91/</url>
      
        <content type="html"><![CDATA[<p>ç»å¸¸é‡åˆ°çš„é—®é¢˜æ€»ç»“<br><a id="more"></a></p><blockquote><p>require ç”¨æ¥åŠ è½½ä»£ç ï¼Œè€Œ exports å’Œ module.exports åˆ™ç”¨æ¥å¯¼å‡ºä»£ç ã€‚<br>å¾ˆå¤šæ–°æ‰‹å¯èƒ½ä¼šè¿·æƒ‘äº exports å’Œ module.exports çš„åŒºåˆ«ï¼Œä¸ºäº†æ›´å¥½çš„ç†è§£ exports å’Œ module.exports çš„å…³ç³»ï¼Œæˆ‘ä»¬å…ˆæ¥å·©å›ºä¸‹ js çš„åŸºç¡€ã€‚</p></blockquote><h6 id="æˆ‘ä»¬åªéœ€çŸ¥é“ä¸‰ç‚¹å°±çŸ¥é“-exports-å’Œ-module-exports-çš„åŒºåˆ«äº†ï¼š"><a href="#æˆ‘ä»¬åªéœ€çŸ¥é“ä¸‰ç‚¹å°±çŸ¥é“-exports-å’Œ-module-exports-çš„åŒºåˆ«äº†ï¼š" class="headerlink" title="æˆ‘ä»¬åªéœ€çŸ¥é“ä¸‰ç‚¹å°±çŸ¥é“ exports å’Œ module.exports çš„åŒºåˆ«äº†ï¼š"></a>æˆ‘ä»¬åªéœ€çŸ¥é“ä¸‰ç‚¹å°±çŸ¥é“ exports å’Œ module.exports çš„åŒºåˆ«äº†ï¼š</h6><ol><li>module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {}</li><li>exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨</li><li>require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exports</li></ol><p>æˆ‘ä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„å†™æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span> = <span class="built_in">module</span>.exports = &#123;...&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;...&#125;</span><br><span class="line"><span class="built_in">exports</span> = <span class="built_in">module</span>.exports</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>åŸç†å¾ˆç®€å•ï¼šmodule.exports æŒ‡å‘æ–°çš„å¯¹è±¡æ—¶ï¼Œexports æ–­å¼€äº†ä¸ module.exports çš„å¼•ç”¨ï¼Œé‚£ä¹ˆé€šè¿‡ exports = module.exports è®© exports é‡æ–°æŒ‡å‘ module.exportsã€‚</p></blockquote><p>package.json å¯¹äº Node.js åº”ç”¨æ¥è¯´æ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº†è¯¥ Node.js åº”ç”¨çš„åå­—ã€ç‰ˆæœ¬ã€æè¿°ã€ä½œè€…ã€å…¥å£æ–‡ä»¶ã€è„šæœ¬ã€ç‰ˆæƒç­‰ç­‰ä¿¡æ¯ã€‚npm å®˜ç½‘æœ‰ package.json æ¯ä¸ªå­—æ®µçš„è¯¦ç»†ä»‹ç»ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i express --save --save-exact (å®‰è£… expressï¼ŒåŒæ—¶å°† <span class="string">&quot;express&quot;</span>: <span class="string">&quot;4.14.0&quot;</span> å†™å…¥ dependencies )</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç ä¿å­˜åï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨é‡å¯ç¨‹åºï¼Œæ‰èƒ½æŸ¥çœ‹æ”¹åŠ¨çš„æ•ˆæœã€‚ä½¿ç”¨ supervisor å¯ä»¥è§£å†³è¿™ä¸ªç¹ççš„é—®é¢˜ï¼Œå…¨å±€å®‰è£… supervisorï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g supervisor</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œ supervisor â€“harmony index å¯åŠ¨ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://maninboat.gitbooks.io/n-blog/content/book/img/3.1.2.png"                      alt="image"                ></p><p>supervisor ä¼šç›‘å¬å½“å‰ç›®å½•ä¸‹ node å’Œ js åç¼€çš„æ–‡ä»¶ï¼Œå½“è¿™äº›æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶ï¼Œsupervisor ä¼šè‡ªåŠ¨é‡å¯ç¨‹åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹åšå®¢ï¼ˆå››ï¼‰</title>
      <link href="2017/07/03/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>2017/07/03/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ç”¨æˆ·æ³¨å†ŒåŠç™»å½•<br><a id="more"></a></p><h2 id="login-js"><a href="#login-js" class="headerlink" title="login.js"></a>login.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&quot;#btn&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡ajaxæäº¤è¯·æ±‚</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            url: <span class="string">&#x27;/api/user/adminlogin&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                username: $(<span class="string">&quot;#userName&quot;</span>).val(),</span><br><span class="line">                password: $(<span class="string">&quot;#password&quot;</span>).val()</span><br><span class="line">            &#125;,</span><br><span class="line">            dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!result.code) &#123;</span><br><span class="line">                    <span class="built_in">window</span>.location.reload();</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(result.message);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> User = <span class="built_in">require</span>(<span class="string">&#x27;../models/user&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> Content = <span class="built_in">require</span>(<span class="string">&#x27;../models/content&#x27;</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¢åŠ ç”¨æˆ·æ³¨å†Œè·¯ç”±</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€è¿”å›æ ¼å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> responseDate;</span><br><span class="line">router.use(<span class="function"><span class="keyword">function</span>(<span class="params">rep, res, next</span>) </span>&#123;</span><br><span class="line">    responseDate = &#123;</span><br><span class="line">        code: <span class="number">0</span>,</span><br><span class="line">        message: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//æ³¨å†Œ</span></span><br><span class="line">router.post(<span class="string">&#x27;/user/register&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> username = req.body.username;</span><br><span class="line">    <span class="keyword">var</span> password = req.body.password;</span><br><span class="line">    <span class="keyword">var</span> repassword = req.body.repassword;</span><br><span class="line">    <span class="keyword">if</span> (username === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        responseDate.code = <span class="number">1</span>;</span><br><span class="line">        responseDate.message = <span class="string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼&quot;</span>;</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (password === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        responseDate.code = <span class="number">2</span>;</span><br><span class="line">        responseDate.message = <span class="string">&quot;å¯†ç ä¸èƒ½ä¸ºç©ºï¼&quot;</span>;</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (password != repassword) &#123;</span><br><span class="line">        responseDate.code = <span class="number">3</span>;</span><br><span class="line">        responseDate.message = <span class="string">&quot;äºŒæ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´&quot;</span>;</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    User.findOne(&#123;</span><br><span class="line">        username: username</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">userInfo</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (userInfo) &#123;</span><br><span class="line">            responseDate.code = <span class="number">4</span>;</span><br><span class="line">            responseDate.message = <span class="string">&#x27;è¯¥ç”¨æˆ·åå·²æ³¨å†Œï¼&#x27;</span>;</span><br><span class="line">            res.json(responseDate);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ–°å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> user = <span class="keyword">new</span> User(&#123;</span><br><span class="line">            username: username,</span><br><span class="line">            password: password</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//ä¿å­˜æ•°æ®åº“</span></span><br><span class="line">        <span class="keyword">return</span> user.save();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">newUserInfo</span>) </span>&#123;</span><br><span class="line">        responseDate.message = <span class="string">&quot;æ³¨å†ŒæˆåŠŸï¼&quot;</span>;</span><br><span class="line">        <span class="comment">//å½“æ³¨å†ŒæˆåŠŸä¹‹åç›´æ¥ç™»å½•ç•Œé¢ ä¼ å€¼ç»™å‰å°é¡µé¢</span></span><br><span class="line">        responseDate.newUserInfo = &#123;</span><br><span class="line">            _id: newUserInfo._id,</span><br><span class="line">            username: newUserInfo.username</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//ä¿å­˜è‡³cookieå‘é€åˆ°æµè§ˆå™¨</span></span><br><span class="line">        req.cookies.set(<span class="string">&#x27;userInfo&#x27;</span>, <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">            _id: newUserInfo._id,</span><br><span class="line">            username: newUserInfo.username</span><br><span class="line">        &#125;));</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="comment">// console.log(newUserInfo);</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&#x27;/user/login&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//è·å–å‰å°ä¼ è¿‡æ¥çš„å€¼</span></span><br><span class="line">    <span class="keyword">var</span> username = req.body.username;</span><br><span class="line">    <span class="keyword">var</span> password = req.body.password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (username === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        responseDate.code = <span class="number">1</span>;</span><br><span class="line">        responseDate.message = <span class="string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼&quot;</span>;</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (password === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        responseDate.code = <span class="number">2</span>;</span><br><span class="line">        responseDate.message = <span class="string">&quot;å¯†ç ä¸èƒ½ä¸ºç©ºï¼&quot;</span>;</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    User.findOne(&#123;</span><br><span class="line">        username: username,</span><br><span class="line">        password: password</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">userInfo</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!userInfo) &#123;</span><br><span class="line">            responseDate.code = <span class="number">3</span>;</span><br><span class="line">            responseDate.message = <span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>;</span><br><span class="line">            res.json(responseDate);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        responseDate.message = <span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>;</span><br><span class="line">        <span class="comment">//ä¼ å€¼ç»™å‰å°é¡µé¢</span></span><br><span class="line">        responseDate.userInfo = &#123;</span><br><span class="line">            _id: userInfo._id,</span><br><span class="line">            username: userInfo.username</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//ä¿å­˜è‡³cookieå‘é€åˆ°æµè§ˆå™¨</span></span><br><span class="line">        req.cookies.set(<span class="string">&#x27;userInfo&#x27;</span>, <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">            _id: userInfo._id,</span><br><span class="line">            username: userInfo.username</span><br><span class="line">        &#125;));</span><br><span class="line">        res.json(responseDate);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&#x27;/user/logout&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ¸…ç©ºcookie</span></span><br><span class="line">    req.cookies.set(<span class="string">&quot;userInfo&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    res.json(responseDate);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚®ç®±æ‹–æ‹½åŠåˆ é™¤</title>
      <link href="2017/07/03/%E9%82%AE%E7%AE%B1%E6%8B%96%E6%8B%BD%E5%8F%8A%E5%88%A0%E9%99%A4/"/>
      <url>2017/07/03/%E9%82%AE%E7%AE%B1%E6%8B%96%E6%8B%BD%E5%8F%8A%E5%88%A0%E9%99%A4/</url>
      
        <content type="html"><![CDATA[<p>ç»ƒä¹ é‚®ç®±æ‹–æ‹½ï¼ŒåŠå…ƒç´ åˆ é™¤<br><a id="more"></a><br>æ³¨æ„ç‚¹;</p><ul><li>jq move æ˜¯åœ¨$(doucment)</li><li>ç«ç‹ä¸‹é˜»æ­¢æµè§ˆå™¨é»˜è®¤äº‹ä»¶ éœ€è¦ev.preventDefault();<br>ev.stopPropagation();</li><li>ç‚¹å‡»å•é€‰æ¡†çš„æ—¶å€™ å¦‚æœé¼ æ ‡downäº‹ä»¶å­˜åœ¨ åˆ™è¦é˜»æ­¢å†’æ³¡<br>ev.stopPropagation();</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> html = list.map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`&lt;li data-id=<span class="subst">$&#123;item.id&#125;</span>&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div&gt;</span></span><br><span class="line"><span class="string">                         &lt;span&gt;<span class="subst">$&#123;item.caption&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">                         &lt;span&gt;<span class="subst">$&#123;item.time&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;p&gt;<span class="subst">$&#123;item.desc&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">               &lt;/li&gt;`</span></span><br><span class="line">    &#125;).join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> oUl = $(<span class="string">&quot;.emailListUl&quot;</span>);</span><br><span class="line">    oUl.html(html);</span><br><span class="line">    <span class="comment">//è·å–é€‰ä¸­</span></span><br><span class="line">    <span class="keyword">var</span> checkedlen = $(<span class="string">&quot;.emailListUl li input&quot;</span>);</span><br><span class="line">    <span class="comment">//å…¨é€‰æŒ‰é’® æˆ–è€… å…¨ä¸é€‰</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> checkboxAll = $(<span class="string">&quot;.emailHead input&quot;</span>);</span><br><span class="line">    checkboxAll.on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> arrs = whoSelected();</span><br><span class="line">            <span class="built_in">console</span>.log(arrs)</span><br><span class="line">            $(<span class="string">&quot;.emailListUl li input&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>, $(<span class="built_in">this</span>).is(<span class="string">&#x27;:checked&#x27;</span>));</span><br><span class="line">            <span class="keyword">if</span> ($(<span class="built_in">this</span>).is(<span class="string">&#x27;:checked&#x27;</span>)) &#123;</span><br><span class="line">                $(<span class="string">&quot;.emailListUl li&quot;</span>).css(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#f2f6f9&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $(<span class="string">&quot;.emailListUl li&quot;</span>).css(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//é€‰ä¸­çš„inputçš„ä¸ªæ•° åŠä¸‹æ ‡</span></span><br><span class="line">    $(<span class="string">&quot;.emailListUl li input&quot;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!($(<span class="built_in">this</span>).is(<span class="string">&#x27;:checked&#x27;</span>))) &#123;</span><br><span class="line">            $(<span class="string">&quot;.emailHead input&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">            $(<span class="built_in">this</span>).parent().css(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="built_in">this</span>).parent().css(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#f2f6f9&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> arr = whoSelected();</span><br><span class="line">        <span class="keyword">if</span> (arr.length == checkedlen.length) &#123;</span><br><span class="line">            $(<span class="string">&quot;.emailHead input&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $(<span class="built_in">this</span>).parent().mousedown(<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">            <span class="comment">/* Act on the event */</span></span><br><span class="line">            <span class="comment">//æ¶ˆç­å†’æ³¡</span></span><br><span class="line">            ev.stopPropagation();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//ã€€ç”¨æ¥è·é€‰ä¸­çš„input</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">whoSelected</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> arr = [];</span><br><span class="line">        checkedlen.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> ($(<span class="built_in">this</span>).is(<span class="string">&quot;:checked&quot;</span>)) &#123;</span><br><span class="line">                arr.push($(<span class="built_in">this</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="keyword">var</span> delet = $(<span class="string">&quot;#delet&quot;</span>);</span><br><span class="line">    delet.on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        htmldelete();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">htmldelete</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//ç‚¹å‡»å¹¶è¿”å›é€‰æ‹©çš„ä¸ªæ•°ï¼›</span></span><br><span class="line">        <span class="keyword">var</span> selectArr = whoSelected();</span><br><span class="line">        <span class="built_in">console</span>.log(selectArr)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; selectArr.length; i++) &#123;</span><br><span class="line">            selectArr[i].parent().remove(); <span class="comment">// åˆ é™¤è¢«é€‰ä¸­inputçš„çˆ¶çº§li</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; list.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (list[j].id == selectArr[i]) &#123;</span><br><span class="line">                    <span class="comment">//è¿™é‡Œåº”è¯¥æ˜¯åç«¯è¿”å›ajaxä¼ é€æ•°æ®è¯·æ±‚æ•°æ®åº“åˆ é™¤</span></span><br><span class="line">                    list.splice(i, <span class="number">1</span>);</span><br><span class="line">                    <span class="built_in">console</span>.log(list);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨æŸä¸€ç‚¹ä¸Šlimousedownä¼šå‡ºç° tip</span></span><br><span class="line">    <span class="keyword">var</span> tip = $(<span class="string">&quot;#hint3&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> lis = oUl.find(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> beenDel = $(<span class="string">&quot;.beenDel&quot;</span>); <span class="comment">//åˆ é™¤</span></span><br><span class="line"></span><br><span class="line">    lis.mousedown(<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> selectArr = whoSelected();</span><br><span class="line">        <span class="built_in">console</span>.log(selectArr.length);</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="built_in">this</span>).find(<span class="string">&quot;input&quot;</span>).is(<span class="string">&quot;:checked&quot;</span>)) &#123;</span><br><span class="line">            tip.show();</span><br><span class="line">            tip.css(<span class="string">&quot;left&quot;</span>, ev.clientX + <span class="number">4</span> + <span class="string">&quot;px&quot;</span>);</span><br><span class="line">            tip.css(<span class="string">&quot;top&quot;</span>, ev.clientY + <span class="number">4</span> + <span class="string">&quot;px&quot;</span>);</span><br><span class="line">            tip.html(<span class="string">&#x27;é€‰ä¸­&#x27;</span> + selectArr.length + <span class="string">&#x27;å°é‚®ä»¶&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç¢°æ’ é»˜è®¤æ²¡æœ‰ç¢°åˆ°</span></span><br><span class="line">        <span class="keyword">var</span> isCollision = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//è·å–é€‰ä¸­äº†å‡ ä¸ª</span></span><br><span class="line">        $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">            <span class="comment">/* Act on the event */</span></span><br><span class="line">            tip.css(<span class="string">&quot;left&quot;</span>, ev.clientX + <span class="string">&quot;px&quot;</span>);</span><br><span class="line">            tip.css(<span class="string">&quot;top&quot;</span>, ev.clientY + <span class="string">&quot;px&quot;</span>);</span><br><span class="line">            ev.preventDefault();</span><br><span class="line">            <span class="comment">//å–æ¶ˆé»˜è®¤è¡Œä¸º</span></span><br><span class="line">            <span class="keyword">if</span> (collision($(<span class="string">&quot;#hint3&quot;</span>), $(<span class="string">&quot;.beenDel&quot;</span>))) &#123;</span><br><span class="line">                isCollision = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        $(<span class="built_in">document</span>).mouseup(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">/* Act on the event */</span></span><br><span class="line">            tip.hide();</span><br><span class="line">            <span class="keyword">if</span> (isCollision) &#123;</span><br><span class="line">                <span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">                htmldelete();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">document</span>.mouseover = <span class="built_in">document</span>.mouseup = <span class="literal">null</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ‹–æ‹½å°è£…"><a href="#æ‹–æ‹½å°è£…" class="headerlink" title="æ‹–æ‹½å°è£…"></a>æ‹–æ‹½å°è£…</h5><p>jqueryè½¬jsdomå…ƒç´ éœ€è¦$(â€œidâ€)[0];<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRect</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> obj[<span class="number">0</span>].getBoundingClientRect();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collision</span>(<span class="params">obj1,obj2</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> obj1Rect = getRect(obj1);</span><br><span class="line"><span class="keyword">var</span> obj2Rect = getRect(obj2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœobj1ç¢°ä¸Šäº†å“¦obj2è¿”å›trueï¼Œå¦åˆ™æ”¾å›false</span></span><br><span class="line"><span class="keyword">var</span> obj1Left = obj1Rect.left;</span><br><span class="line"><span class="keyword">var</span> obj1Right = obj1Rect.right;</span><br><span class="line"><span class="keyword">var</span> obj1Top = obj1Rect.top;</span><br><span class="line"><span class="keyword">var</span> obj1Bottom = obj1Rect.bottom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2Left = obj2Rect.left;</span><br><span class="line"><span class="keyword">var</span> obj2Right = obj2Rect.right;</span><br><span class="line"><span class="keyword">var</span> obj2Top = obj2Rect.top;</span><br><span class="line"><span class="keyword">var</span> obj2Bottom = obj2Rect.bottom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( obj1Right &lt; obj2Left || obj1Left &gt; obj2Right || obj1Bottom &lt; obj2Top || obj1Top &gt; obj2Bottom )&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹ Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> ç»ƒä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹çŸ­ä¿¡å‘é€</title>
      <link href="2017/06/30/Node%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/"/>
      <url>2017/06/30/Node%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°åœ¨æ³¨å†Œçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œæˆ–è€…æ˜¯åœ¨ä¸€äº›å®‰å…¨æ€§æ ¡éªŒçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œ äºæ˜¯æ‰¾äº†å¾ˆå¤šçŸ­ä¿¡éªŒè¯ç å¹³å°ï¼Œä½†æ˜¯æ”¯æŒnodejsçš„å¹³å°å¾ˆå°‘ï¼Œä»Šå¤©å°±ä»‹ç»ä¸€ä¸ªå°‘æœ‰çš„æ”¯æŒnodeçš„çŸ­ä¿¡éªŒè¯å¹³å°</p></blockquote><a id="more"></a><h6 id="å‰å°jséƒ¨åˆ†"><a href="#å‰å°jséƒ¨åˆ†" class="headerlink" title="å‰å°jséƒ¨åˆ†"></a>å‰å°jséƒ¨åˆ†</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    url: <span class="string">&quot;yunpian/sms&quot;</span>,</span><br><span class="line">    data: &#123; <span class="attr">mobile</span>: $(<span class="string">&quot;#mobile&quot;</span>).val() &#125;,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="åå°jséƒ¨åˆ†"><a href="#åå°jséƒ¨åˆ†" class="headerlink" title="åå°jséƒ¨åˆ†"></a>åå°jséƒ¨åˆ†</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹ä¸ºæ‚¨çš„apikey.å¯åœ¨å®˜ç½‘ï¼ˆhttps://www.yunpian.com)ç™»å½•åè·å–</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">&quot;request&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸ºæ‚¨è¦å‘é€çš„æ‰‹æœºå·ç ï¼Œå¤šä¸ªå·ç ç”¨é€—å·éš”å¼€</span></span><br><span class="line"><span class="comment">// var mobile = &#x27;13083950500&#x27;;</span></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸ºæ‚¨è¦å‘é€çš„çŸ­ä¿¡å†…å®¹</span></span><br><span class="line"><span class="comment">// var text = &#x27;ã€h5webå¼€å‘è€…ã€‘æ‚¨çš„éªŒè¯ç æ˜¯666666ã€‚å¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥æœ¬çŸ­ä¿¡&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šå‘é€æ¨¡æ¿çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> tpl_value = &#123; <span class="string">&#x27;#code#&#x27;</span>: <span class="string">&#x27;1234&#x27;</span>, <span class="string">&#x27;#company#&#x27;</span>: <span class="string">&#x27;yunpian&#x27;</span> &#125;;</span><br><span class="line"><span class="comment">// æ™ºèƒ½åŒ¹é…æ¨¡æ¿å‘é€httpsåœ°å€</span></span><br><span class="line"><span class="keyword">var</span> sms_host = <span class="string">&#x27;sms.yunpian.com&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿä¸€è¿”å›æ ¼å¼</span></span><br><span class="line"><span class="keyword">var</span> responseData;</span><br><span class="line"></span><br><span class="line">router.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    responseData = &#123;</span><br><span class="line">        code: <span class="number">0</span>,</span><br><span class="line">        message: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&quot;/sms&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res,next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> apikey = <span class="string">&#x27;319c56f98891*******42a52836**0&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> mobile = req.body.mobile;</span><br><span class="line">    <span class="keyword">let</span> random = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random()*<span class="number">1000000</span>);</span><br><span class="line">    <span class="keyword">let</span> text = <span class="string">&#x27;ã€h5webå¼€å‘è€…ã€‘æ‚¨çš„éªŒè¯ç æ˜¯$&#123;random&#125;ã€‚å¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥æœ¬çŸ­ä¿¡&#x27;</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;é€šè¿‡post&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> options = &#123;</span><br><span class="line">        hostname: sms_host,</span><br><span class="line">        port: <span class="number">443</span>,</span><br><span class="line">        url: <span class="string">&#x27;https://sms.yunpian.com/v2/sms/single_send.json&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        form:&#123;</span><br><span class="line">            apikey:apikey,</span><br><span class="line">            mobile:mobile,</span><br><span class="line">            text:text,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    request(options,<span class="function"><span class="keyword">function</span>(<span class="params">error,response,body</span>)</span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&quot;response&quot;</span>+response);</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&quot;body&quot;</span>+body);</span><br><span class="line">           <span class="keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">           res.send(&#123;</span><br><span class="line">               status:<span class="literal">true</span>,</span><br><span class="line">               message:body,</span><br><span class="line">               checkCode:random</span><br><span class="line">           &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (!error &amp;&amp; response.statusCode != <span class="number">200</span>) &#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                status:<span class="literal">false</span>,</span><br><span class="line">                message:body</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                status:<span class="literal">false</span>,</span><br><span class="line">                message:error</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹é‚®ä»¶å‘é€</title>
      <link href="2017/06/30/Node%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"/>
      <url>2017/06/30/Node%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨Nodejsæ”¶å‘ç”µå­é‚®ä»¶ä¹Ÿéå¸¸ç®€å•ï¼ŒNodemaileråŒ…å°±å¯ä»¥å¸®åŠ©å¿«é€Ÿå®ç°å‘é‚®ä»¶çš„åŠŸèƒ½ã€‚<br><a id="more"></a></p><h6 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h6><blockquote><p>ç”µå­é‚®ä»¶ï¼Œæ˜¯äº’è”ç½‘åº”ç”¨æœ€å¹¿æ³›ä½¿ç”¨çš„æœåŠ¡ä¹‹ä¸€ï¼Œé€šè¿‡ç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¸–ç•Œä¸Šä»»ä½•ä¸€ä¸ªè§’è½çš„ç½‘ç»œç”¨æˆ·è¿›è¡Œè”ç³»ã€‚</p></blockquote><h6 id="å‰å°jséƒ¨åˆ†"><a href="#å‰å°jséƒ¨åˆ†" class="headerlink" title="å‰å°jséƒ¨åˆ†"></a>å‰å°jséƒ¨åˆ†</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node email.js</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="åå°jséƒ¨åˆ†"><a href="#åå°jséƒ¨åˆ†" class="headerlink" title="åå°jséƒ¨åˆ†"></a>åå°jséƒ¨åˆ†</h6><p>å®‰è£…==nodemailer==æ¨¡å—<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install nodemailer</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>å®‰è£…==smtpTransport==æ¨¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install nodemailer-smtp-transport</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> nodemailer = <span class="built_in">require</span>(<span class="string">&quot;nodemailer&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> smtpTransport = <span class="built_in">require</span>(<span class="string">&#x27;nodemailer-smtp-transport&#x27;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é‚®ä»¶å‘é€</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// å¼€å¯ä¸€ä¸ª SMTP è¿æ¥æ± </span></span><br><span class="line">app.get(<span class="string">&#x27;/sendmail&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//ä¾èµ–çš„ä¸¤ä¸ªæ¨¡å—</span></span><br><span class="line">    <span class="keyword">var</span> nodemailer = <span class="built_in">require</span>(<span class="string">&quot;nodemailer&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> smtpTransport = <span class="built_in">require</span>(<span class="string">&#x27;nodemailer-smtp-transport&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> to = <span class="string">&#x27;admin@xxx.com&#x27;</span>; <span class="comment">//å‘é€åœ°å€</span></span><br><span class="line">    <span class="comment">// var to=&#x27;admin@xxx.com,editor@xxx.com&#x27;; //å‘é€ç»™å¤šä¸ªäººï¼Œè‹±æ–‡é€—å·éš”å¼€</span></span><br><span class="line">    <span class="keyword">var</span> subject = <span class="string">&#x27;é‚®ä»¶æ ‡é¢˜&#x27;</span>; <span class="comment">//å‘é€çš„æ ‡é¢˜</span></span><br><span class="line">    <span class="keyword">var</span> html = <span class="string">&#x27;&lt;div&gt;é‚®ä»¶å†…å®¹&lt;/div&gt;&#x27;</span>; <span class="comment">//å‘é€çš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">var</span> transport = nodemailer.createTransport(smtpTransport(&#123;</span><br><span class="line">        host: <span class="string">&#x27;smtp.exmail.qq.com&#x27;</span>,</span><br><span class="line">        port: <span class="number">465</span>,</span><br><span class="line">        secure: <span class="literal">true</span>,</span><br><span class="line">        auth: &#123;</span><br><span class="line">            user: <span class="string">&#x27;admin@xxx.com&#x27;</span>, <span class="comment">//ä½ çœŸå®çš„é‚®ç®±</span></span><br><span class="line">            pass: <span class="string">&#x27;yyyy&#x27;</span> <span class="comment">//çœŸå®çš„å¯†ç </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mailOptions = &#123;</span><br><span class="line">        <span class="keyword">from</span>: <span class="string">&#x27;xxx &lt;no_reply@xxx.com&gt;&#x27;</span>,</span><br><span class="line">        to: to,</span><br><span class="line">        subject: subject,</span><br><span class="line">        html: html</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    transport.sendMail(mailOptions, <span class="function"><span class="keyword">function</span>(<span class="params">error, info</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">            res.send(error);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.send(info.response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹åšå®¢ï¼ˆä¸‰ï¼‰</title>
      <link href="2017/06/29/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>2017/06/29/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å¢åŠ ==cookie==ä¸æ•°æ®åº“==mongodb==<br><a id="more"></a></p><h2 id="å¯åŠ¨æ•°æ®åº“"><a href="#å¯åŠ¨æ•°æ®åº“" class="headerlink" title="å¯åŠ¨æ•°æ®åº“"></a>å¯åŠ¨æ•°æ®åº“</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E5%90%AF%E5%8A%A8mongodb.png"                      alt="image"                ></p><h2 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**æ›´å¤šæ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//åŠ è½½cookiesæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> Cookies = <span class="built_in">require</span>(<span class="string">&#x27;cookies&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½æ•°æ®åº“userè¡¨æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> User = <span class="built_in">require</span>(<span class="string">&#x27;./models/User&#x27;</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®cookie</span></span><br><span class="line">app.use( <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    req.cookies = <span class="keyword">new</span> Cookies(req, res);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£æç™»å½•ç”¨æˆ·çš„cookieä¿¡æ¯</span></span><br><span class="line">    req.userInfo = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (req.cookies.get(<span class="string">&#x27;userInfo&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            req.userInfo = <span class="built_in">JSON</span>.parse(req.cookies.get(<span class="string">&#x27;userInfo&#x27;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ç±»å‹ï¼Œæ˜¯å¦æ˜¯ç®¡ç†å‘˜</span></span><br><span class="line">            User.findById(req.userInfo._id).then(<span class="function"><span class="keyword">function</span>(<span class="params">userInfo</span>) </span>&#123;</span><br><span class="line">                req.userInfo.isAdmin = <span class="built_in">Boolean</span>(userInfo.isAdmin);</span><br><span class="line">                next();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">            next();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br><span class="line"><span class="comment">//è¿æ¥æ•°æ®åº“</span></span><br><span class="line">mongoose.connect(<span class="string">&#x27;mongodb://localhost:27018/blog&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ•°æ®åº“è¿æ¥å¤±è´¥&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ•°æ®åº“è¿æ¥æˆåŠŸ&#x27;</span>);</span><br><span class="line">        app.listen(<span class="number">8081</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="users-js"><a href="#users-js" class="headerlink" title="users.js"></a>users.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·çš„è¡¨ç»“æ„</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    username: <span class="built_in">String</span>,</span><br><span class="line">    <span class="comment">//å¯†ç </span></span><br><span class="line">    password: <span class="built_in">String</span>,</span><br><span class="line">    <span class="comment">//æ˜¯å¦æ˜¯ç®¡ç†å‘˜</span></span><br><span class="line">    isAdmin: &#123;</span><br><span class="line">        type: <span class="built_in">Boolean</span>,</span><br><span class="line">        <span class="keyword">default</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·ç™»å½•åŠæ³¨å†Œçš„æ•°æ®åº“è¡¨<br>å®é™…æ“ä½œè¿‡ç¨‹ä¸­ä¸æ˜¯æ“ä½œè¡¨ç»“æ„è€Œæ˜¯æ“ä½œæ¨¡å‹ç±»<br>æ‰€ä»¥è¿˜è¦åˆ›å»ºä¸€ä¸ªæ¨¡å‹ç±»æ•°æ®==model==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> usersSchema = <span class="built_in">require</span>(<span class="string">&#x27;../schemas/users&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//moudlueä¸‹åˆ›å»ºä¸€ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">&#x27;User&#x27;</span>, usersSchema);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹åšå®¢ï¼ˆäºŒï¼‰</title>
      <link href="2017/06/28/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2017/06/28/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å¢åŠ ç¬¬ä¸‰æ–¹æ¨¡å—<br><a id="more"></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by æ¯… on 2016/7/30.</span></span><br><span class="line"><span class="comment"> * åº”ç”¨ç¨‹åºçš„å¯åŠ¨ï¼ˆå…¥å£ï¼‰æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½expressæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½æ¨¡æ¿å¤„ç†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> swig = <span class="built_in">require</span>(<span class="string">&#x27;swig&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½æ•°æ®åº“æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½body-parserï¼Œç”¨æ¥å¤„ç†postæäº¤è¿‡æ¥çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½cookiesæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> Cookies = <span class="built_in">require</span>(<span class="string">&#x27;cookies&#x27;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºappåº”ç”¨ =&gt; NodeJS Http.createServer();</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®é™æ€æ–‡ä»¶æ‰˜ç®¡ å¤„ç† js css</span></span><br><span class="line"><span class="comment">//å½“ç”¨æˆ·è®¿é—®çš„urlä»¥/publicå¼€å§‹ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å¯¹åº”__dirname + &#x27;/public&#x27;ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">app.use( <span class="string">&#x27;/public&#x27;</span>, express.static( __dirname + <span class="string">&#x27;/public&#x27;</span>) );</span><br><span class="line"></span><br><span class="line"><span class="comment">//é…ç½®åº”ç”¨æ¨¡æ¿</span></span><br><span class="line"><span class="comment">//å®šä¹‰å½“å‰åº”ç”¨æ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ¨¡æ¿å¼•æ“çš„åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ¨¡æ¿æ–‡ä»¶çš„åç¼€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºç”¨äºè§£æå¤„ç†æ¨¡æ¿å†…å®¹çš„æ–¹æ³•</span></span><br><span class="line">app.engine(<span class="string">&#x27;html&#x27;</span>, swig.renderFile);</span><br><span class="line"><span class="comment">//è®¾ç½®æ¨¡æ¿æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯viewsï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç›®å½•</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;./views&#x27;</span>);</span><br><span class="line"><span class="comment">//æ³¨å†Œæ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ view engineï¼Œç¬¬äºŒä¸ªå‚æ•°å’Œapp.engineè¿™ä¸ªæ–¹æ³•ä¸­å®šä¹‰çš„æ¨¡æ¿å¼•æ“çš„åç§°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ˜¯ä¸€è‡´çš„</span></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;html&#x27;</span>);</span><br><span class="line"><span class="comment">//åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å–æ¶ˆæ¨¡æ¿ç¼“å­˜</span></span><br><span class="line">swig.setDefaults(&#123;<span class="attr">cache</span>: <span class="literal">false</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//bodyparserè®¾ç½® å»é™¤ç¼“å­˜</span></span><br><span class="line">app.use( bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;) );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ ¹æ®ä¸åŒçš„åŠŸèƒ½åˆ’åˆ†æ¨¡å—</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">app.use(<span class="string">&#x27;/admin&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./routers/admin&#x27;</span>));</span><br><span class="line">app.use(<span class="string">&#x27;/api&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./routers/api&#x27;</span>));</span><br><span class="line">app.use(<span class="string">&#x27;/&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./routers/main&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›‘å¬httpè¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8081</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJsä¹‹åšå®¢ï¼ˆä¸€ï¼‰</title>
      <link href="2017/06/27/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2017/06/27/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>åšä¸€ä¸ªåšå®¢é¡¹ç›®å­¦ä¹ ä¸‹<br><a id="more"></a></p><h6 id="ä»€ä¹ˆæ˜¯NodeJs"><a href="#ä»€ä¹ˆæ˜¯NodeJs" class="headerlink" title="ä»€ä¹ˆæ˜¯ï¼®odeJs"></a>ä»€ä¹ˆæ˜¯ï¼®odeJs</h6><blockquote><p>JSæ˜¯è„šæœ¬è¯­è¨€ï¼Œè„šæœ¬è¯­è¨€éƒ½éœ€è¦ä¸€ä¸ªè§£æå™¨æ‰èƒ½è¿è¡Œã€‚å¯¹äºå†™åœ¨HTMLé¡µé¢é‡Œçš„JSï¼Œæµè§ˆå™¨å……å½“äº†è§£æå™¨çš„è§’è‰²ã€‚è€Œå¯¹äºéœ€è¦ç‹¬ç«‹è¿è¡Œçš„JSï¼ŒNodeJSå°±æ˜¯ä¸€ä¸ªè§£æå™¨ã€‚</p><p>æ¯ä¸€ç§è§£æå™¨éƒ½æ˜¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œä¸ä½†å…è®¸JSå®šä¹‰å„ç§æ•°æ®ç»“æ„ï¼Œè¿›è¡Œå„ç§è®¡ç®—ï¼Œè¿˜å…è®¸JSä½¿ç”¨è¿è¡Œç¯å¢ƒæä¾›çš„å†…ç½®å¯¹è±¡å’Œæ–¹æ³•åšä¸€äº›äº‹æƒ…ã€‚ä¾‹å¦‚è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„JSçš„ç”¨é€”æ˜¯æ“ä½œDOMï¼Œæµè§ˆå™¨å°±æä¾›äº†documentä¹‹ç±»çš„å†…ç½®å¯¹è±¡ã€‚è€Œè¿è¡Œåœ¨NodeJSä¸­çš„JSçš„ç”¨é€”æ˜¯æ“ä½œç£ç›˜æ–‡ä»¶æˆ–æ­å»ºHTTPæœåŠ¡å™¨ï¼ŒNodeJSå°±ç›¸åº”æä¾›äº†fsã€httpç­‰å†…ç½®å¯¹è±¡ã€‚</p></blockquote><h6 id="NodeJsæœ‰ä»€ä¹ˆç”¨å¤„"><a href="#NodeJsæœ‰ä»€ä¹ˆç”¨å¤„" class="headerlink" title="NodeJsæœ‰ä»€ä¹ˆç”¨å¤„"></a>NodeJsæœ‰ä»€ä¹ˆç”¨å¤„</h6><blockquote><p>å½“æ—¶åœ¨å…¬å¸å­¦ä¹ nodeçš„æ—¶å€™ä¸€å¬è¯´å¯ä»¥ç›´æ¥è¿è¡ŒJsæ–‡ä»¶å°±è§‰å¾—å¾ˆç»™åŠ›ï¼Œä½†åœ¨æ¥è§¦æ–°çŸ¥è¯†æ—¶é¦–å…ˆå…³å¿ƒçš„æ˜¯æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œä»¥åŠèƒ½å¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼</p><p>NodeJSçš„ä½œè€…è¯´ï¼Œä»–åˆ›é€ NodeJSçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°é«˜æ€§èƒ½WebæœåŠ¡å™¨ï¼Œä»–é¦–å…ˆçœ‹é‡çš„æ˜¯äº‹ä»¶æœºåˆ¶å’Œå¼‚æ­¥IOæ¨¡å‹çš„ä¼˜è¶Šæ€§ï¼Œè€Œä¸æ˜¯JSã€‚ä½†æ˜¯ä»–éœ€è¦é€‰æ‹©ä¸€ç§ç¼–ç¨‹è¯­è¨€å®ç°ä»–çš„æƒ³æ³•ï¼Œè¿™ç§ç¼–ç¨‹è¯­è¨€ä¸èƒ½è‡ªå¸¦IOåŠŸèƒ½ï¼Œå¹¶ä¸”éœ€è¦èƒ½è‰¯å¥½æ”¯æŒäº‹ä»¶æœºåˆ¶ã€‚JSæ²¡æœ‰è‡ªå¸¦IOåŠŸèƒ½ï¼Œå¤©ç”Ÿå°±ç”¨äºå¤„ç†æµè§ˆå™¨ä¸­çš„DOMäº‹ä»¶ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸€å¤§ç¾¤ç¨‹åºå‘˜ï¼Œå› æ­¤å°±æˆä¸ºäº†å¤©ç„¶çš„é€‰æ‹©ã€‚</p><p>å¦‚ä»–æ‰€æ„¿ï¼ŒNodeJSåœ¨æœåŠ¡ç«¯æ´»è·ƒèµ·æ¥ï¼Œå‡ºç°äº†å¤§æ‰¹åŸºäºNodeJSçš„WebæœåŠ¡ã€‚è€Œå¦ä¸€æ–¹é¢ï¼ŒNodeJSè®©å‰ç«¯ä¼—å¦‚è·ç¥å™¨ï¼Œç»ˆäºå¯ä»¥è®©è‡ªå·±çš„èƒ½åŠ›è¦†ç›–èŒƒå›´è·³å‡ºæµè§ˆå™¨çª—å£ï¼Œæ›´å¤§æ‰¹çš„å‰ç«¯å·¥å…·å¦‚é›¨åæ˜¥ç¬‹ã€‚</p><p>å› æ­¤ï¼Œå¯¹äºå‰ç«¯è€Œè¨€ï¼Œè™½ç„¶ä¸æ˜¯äººäººéƒ½è¦æ‹¿NodeJSå†™ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºï¼Œä½†ç®€å•å¯è‡³ä½¿ç”¨å‘½ä»¤äº¤äº’æ¨¡å¼è°ƒè¯•JSä»£ç ç‰‡æ®µï¼Œå¤æ‚å¯è‡³ç¼–å†™å·¥å…·æå‡å·¥ä½œæ•ˆç‡ã€‚</p><p>NodeJSç”Ÿæ€åœˆæ­£æ¬£æ¬£å‘è£ã€‚</p></blockquote><h6 id="NodeJsç‰¹ç‚¹"><a href="#NodeJsç‰¹ç‚¹" class="headerlink" title="NodeJsç‰¹ç‚¹"></a>NodeJsç‰¹ç‚¹</h6><p>æ¨¡å—</p><blockquote><p>ç¼–å†™ç¨å¤§ä¸€ç‚¹çš„ç¨‹åºæ—¶ä¸€èˆ¬éƒ½ä¼šå°†ä»£ç æ¨¡å—åŒ–ã€‚åœ¨NodeJSä¸­ï¼Œä¸€èˆ¬å°†ä»£ç åˆç†æ‹†åˆ†åˆ°ä¸åŒçš„JSæ–‡ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè€Œæ–‡ä»¶è·¯å¾„å°±æ˜¯æ¨¡å—åã€‚<br>åœ¨ç¼–å†™æ¯ä¸ªæ¨¡å—æ—¶ï¼Œéƒ½æœ‰requireã€exportsã€moduleä¸‰ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„å˜é‡å¯ä¾›ä½¿ç”¨ã€‚</p><ul><li>require<br>requireå‡½æ•°ç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚æ¨¡å—åå¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆä»¥./å¼€å¤´ï¼‰ï¼Œæˆ–è€…æ˜¯ç»å¯¹è·¯å¾„ï¼ˆä»¥/æˆ–C:ä¹‹ç±»çš„ç›˜ç¬¦å¼€å¤´ï¼‰ã€‚å¦å¤–ï¼Œæ¨¡å—åä¸­çš„.jsæ‰©å±•åå¯ä»¥çœç•¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</li><li>exports<br>exportså¯¹è±¡æ˜¯å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚åˆ«çš„æ¨¡å—é€šè¿‡requireå‡½æ•°ä½¿ç”¨å½“å‰æ¨¡å—æ—¶å¾—åˆ°çš„å°±æ˜¯å½“å‰æ¨¡å—çš„exportså¯¹è±¡ã€‚ä»¥ä¸‹ä¾‹å­ä¸­å¯¼å‡ºäº†ä¸€ä¸ªå…¬æœ‰æ–¹æ³•ã€‚</li><li>module<br>é€šè¿‡moduleå¯¹è±¡å¯ä»¥è®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚ä¾‹å¦‚æ¨¡å—å¯¼å‡ºå¯¹è±¡é»˜è®¤æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¦‚æœæƒ³æ”¹æˆä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€‚</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº”ç”¨ç¨‹åºçš„å¯åŠ¨ï¼ˆå…¥å£ï¼‰æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½expressæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½æ¨¡æ¿å¤„ç†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> swig = <span class="built_in">require</span>(<span class="string">&#x27;swig&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½æ•°æ®åº“æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½body-parserï¼Œç”¨æ¥å¤„ç†postæäº¤è¿‡æ¥çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºappåº”ç”¨ =&gt; NodeJS Http.createServer();</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">&quot;&lt;h2&gt;æ¬¢è¿æ¥çš„æˆ‘çš„åšå®¢&lt;/h2&gt;&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//ç›‘å¬httpè¯·æ±‚</span></span><br><span class="line">app.listen(<span class="number">8081</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘é€çŸ­ä¿¡éªŒè¯ï¼ŒåæŒ‰é’®å€’è®¡æ—¶ï¼Œé˜²æ­¢åˆ·æ–°å€’è®¡æ—¶å¤±æ•ˆ</title>
      <link href="2017/06/26/%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%EF%BC%8C%E5%90%8E%E6%8C%89%E9%92%AE%E5%80%92%E8%AE%A1%E6%97%B6%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%88%B7%E6%96%B0%E5%80%92%E8%AE%A1%E6%97%B6%E5%A4%B1%E6%95%88/"/>
      <url>2017/06/26/%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%EF%BC%8C%E5%90%8E%E6%8C%89%E9%92%AE%E5%80%92%E8%AE%A1%E6%97%B6%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%88%B7%E6%96%B0%E5%80%92%E8%AE%A1%E6%97%B6%E5%A4%B1%E6%95%88/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å¼€å‘â€œå‘é€çŸ­ä¿¡éªŒè¯â€åŠŸèƒ½æ—¶å€™ï¼Œè¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œé˜²æ­¢æ¶æ„æˆ–é¢‘ç¹å‘é€çŸ­ä¿¡éªŒè¯ç é—®é¢˜ã€‚ä¸€èˆ¬åŸç†æ˜¯â€œå½“ç‚¹å‡»å‘é€æŒ‰é’®æ—¶ï¼Œå‘é€ajaxè¯·æ±‚åˆ°æœåŠ¡å™¨å‘é€çŸ­ä¿¡éªŒè¯ç ï¼ŒæˆåŠŸåˆ™æŠŠå‘é€æŒ‰é’®è®¾ç½®ä¸ºä¸å¯ç‚¹å‡»ï¼Œå¹¶ä¸”è°ƒç”¨å®šæ—¶å™¨ï¼ŒæŒ‰é’®æ˜¾ç¤ºå€’è®¡æ—¶â€ã€‚å¦‚æœå°±è¿™æ ·ä¸å¯¹å€’è®¡æ—¶å­˜å‚¨åšå¤„ç†ï¼Œé‚£ä¹ˆå½“åˆ·æ–°é¡µé¢ï¼Œä¼šå‡ºç°å€’è®¡æ—¶å¤±æ•ˆï¼ŒæŒ‰é’®å¯ç‚¹å‡»ã€‚æä¾›ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p><p>åˆ©ç”¨cookieå­˜å‚¨å€’è®¡æ—¶</p><p>åˆ©ç”¨HTML5çš„localStorage å­˜å‚¨å€’è®¡æ—¶</p></blockquote><a id="more"></a><h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*é˜²åˆ·æ–°ï¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨cookie*/</span></span><br><span class="line">    <span class="keyword">if</span> ($.cookie(<span class="string">&quot;captcha&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> count = $.cookie(<span class="string">&quot;captcha&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> btn = $(<span class="string">&#x27;#getting&#x27;</span>);</span><br><span class="line">    btn.val(count + <span class="string">&#x27;ç§’åå¯é‡æ–°è·å–&#x27;</span>).attr(<span class="string">&#x27;disabled&#x27;</span>, <span class="literal">true</span>).css(<span class="string">&#x27;cursor&#x27;</span>, <span class="string">&#x27;not-allowed&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> resend = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            btn.val(count + <span class="string">&#x27;ç§’åå¯é‡æ–°è·å–&#x27;</span>).attr(<span class="string">&#x27;disabled&#x27;</span>, <span class="literal">true</span>).css(<span class="string">&#x27;cursor&#x27;</span>, <span class="string">&#x27;not-allowed&#x27;</span>);</span><br><span class="line">            $.cookie(<span class="string">&quot;captcha&quot;</span>, count, &#123;</span><br><span class="line">                path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">                expires: (<span class="number">1</span> / <span class="number">86400</span>) * count</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(resend);</span><br><span class="line">            btn.val(<span class="string">&quot;è·å–éªŒè¯ç &quot;</span>).removeClass(<span class="string">&#x27;disabled&#x27;</span>).removeAttr(<span class="string">&#x27;disabled style&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*ç‚¹å‡»æ”¹å˜æŒ‰é’®çŠ¶æ€ï¼Œå·²ç»ç®€ç•¥æ‰ajaxå‘é€çŸ­ä¿¡éªŒè¯çš„ä»£ç */</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬æ¥è¯•è¯•è¿™ä¸ªæ•ˆæœçš„</span></span><br><span class="line">    $(<span class="string">&#x27;#getting&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> resend = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            $(<span class="built_in">this</span>).val(count + <span class="string">&quot;ç§’åå¯é‡æ–°è·å–&quot;</span>);</span><br><span class="line">            $.cookie(<span class="string">&quot;captcha&quot;</span>, count, &#123;</span><br><span class="line">                path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">                expires: (<span class="number">1</span> / <span class="number">86400</span>) * count</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(resend);</span><br><span class="line">            $(<span class="built_in">this</span>).val(<span class="string">&quot;è·å–éªŒè¯ç &quot;</span>).removeAttr(<span class="string">&#x27;disabled&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    $(<span class="built_in">this</span>).attr(<span class="string">&#x27;disabled&#x27;</span>, <span class="literal">true</span>).css(<span class="string">&#x27;cursor&#x27;</span>, <span class="string">&#x27;not-allowed&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jquery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10 ä¸ªå¸¸è§çš„ Node.js é¢è¯•é¢˜</title>
      <link href="2017/06/19/10%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84Node.js%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
      <url>2017/06/19/10%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84Node.js%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p>å¦‚æœä½ å¸Œæœ›æ‰¾ä¸€ä»½æœ‰å…³ Node.js çš„å·¥ä½œï¼Œä½†åˆä¸çŸ¥é“ä»å“ªé‡Œå…¥æ‰‹è¯„æµ‹è‡ªå·±å¯¹ node.js çš„æŒæ¡ç¨‹åº¦ã€‚ æœ¬æ–‡å°±ä¸ºä½ ç½—åˆ—äº† 10 ä¸ªå¸¸è§çš„ Node.js é¢è¯•é¢˜ï¼Œåˆ†åˆ«è€ƒå¯Ÿäº† Node.js ç¼–ç¨‹ç›¸å…³çš„å‡ ä¸ªä¸»è¦æ–¹é¢ã€‚</p><p>åœ¨è¿›å…¥æ­£æ–‡ä¹‹å‰ï¼Œéœ€è¦æå‰å£°æ˜ä¸¤ç‚¹ï¼š</p><pre><code>è¿™äº›é—®é¢˜åªæ˜¯Node.jsçŸ¥è¯†ä½“ç³»çš„ä¸€ä¸ªå±€éƒ¨ï¼Œå¹¶ä¸èƒ½å®Œå…¨è€ƒå¯Ÿè¢«é¢è¯•è€…çš„å®é™…å¼€å‘èƒ½åŠ›ã€‚å¯¹ç°å®ä¸–ç•Œå¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œéœ€è¦çš„æ˜¯éšæœºåº”å˜ä¸å›¢é˜Ÿåˆä½œï¼Œæ‰€ä»¥ä½ å¯ä»¥å°è¯•ç»“å¯¹ç¼–ç¨‹ã€‚</code></pre><p>Node.js é¢è¯•é¢˜åˆ—è¡¨</p><pre><code>ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿå¦‚ä½•é¿å…å›è°ƒåœ°ç‹±ï¼Ÿå¦‚ä½•ç”¨Nodeæ¥ç›‘å¬80ç«¯å£ï¼Ÿä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿå“ªäº›å·¥å…·å¯ä»¥ç”¨æ¥ä¿è¯ä¸€è‡´çš„ç¼–ç¨‹é£æ ¼ï¼Ÿè¿ç®—é”™è¯¯ä¸ç¨‹åºå‘˜é”™è¯¯çš„åŒºåˆ«ï¼Ÿä½¿ç”¨NPMæœ‰å“ªäº›å¥½å¤„ï¼Ÿä»€ä¹ˆæ˜¯stubï¼Ÿä¸¾ä¸ªä½¿ç”¨åœºæ™¯ï¼Ÿä»€ä¹ˆæ˜¯æµ‹è¯•é‡‘å­—å¡”ï¼Ÿå¯¹äºHTTP APIï¼Œå¦‚ä½•åˆ©ç”¨æµ‹è¯•é‡‘å­—å¡”ï¼Ÿä½ æœ€å–œæ¬¢çš„HTTPæ¡†æ¶ï¼Œå¹¶è¯´æ˜åŸå› ï¼Ÿ</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä¾æ¬¡æ¥è§£ç­”è¿™äº›é—®é¢˜å§ã€‚</p><h5 id="ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ</h5><blockquote><p>é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ç”¨äºä¼ é€’é”™è¯¯å’Œæ•°æ®ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆåº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œ ç”¨äºæ£€æŸ¥ç¨‹åºæ˜¯å¦å‘ç”Ÿäº†é”™è¯¯ã€‚å…¶ä½™çš„å‚æ•°ç”¨äºä¼ é€’æ•°æ®ã€‚ä¾‹å¦‚ï¼š</p><p>fs.readFile(filePath, function(err, data) {<br>if (err) {<br>//handle the error<br>}<br>// use the data object<br>});</p></blockquote><p>è§£æï¼šè¿™ä¸ªé¢˜ç›®çš„ä¸»è¦ä½œç”¨åœ¨äºæ£€æŸ¥è¢«é¢è¯•è€…å¯¹äº Node ä¸­å¼‚æ­¥æ“ä½œçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†çš„æŒæ¡ã€‚<br>å¦‚ä½•é¿å…å›è°ƒåœ°ç‹±</p><p>ä½ å¯ä»¥æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p><pre><code>æ¨¡å—åŒ–ï¼šå°†å›è°ƒå‡½æ•°åˆ†å‰²ä¸ºç‹¬ç«‹çš„å‡½æ•°ä½¿ç”¨Promisesä½¿ç”¨yieldæ¥è®¡ç®—ç”Ÿæˆå™¨æˆ–Promise</code></pre><p>è§£æï¼šè¿™ä¸ªé—®é¢˜æœ‰å¾ˆå¤šç§ç­”æ¡ˆï¼Œå–å†³ä½ ä½¿ç”¨çš„åœºæ™¯ï¼Œä¾‹å¦‚ ES6, ES7ï¼Œæˆ–è€…ä¸€äº›æ§åˆ¶æµåº“ã€‚<br>å¦‚ä½•ç”¨ Node ç›‘å¬ 80 ç«¯å£</p><blockquote><p>è¿™é¢˜æœ‰é™·é˜±ï¼åœ¨ç±» Unix ç³»ç»Ÿä¸­ä½ ä¸åº”è¯¥å°è¯•å»ç›‘å¬ 80 ç«¯å£ï¼Œå› ä¸ºè¿™éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚ å› æ­¤ä¸æ¨èè®©ä½ çš„åº”ç”¨ç›´æ¥ç›‘å¬è¿™ä¸ªç«¯å£ã€‚</p><p>ç›®å‰ï¼Œå¦‚æœä½ ä¸€å®šè¦è®©ä½ çš„åº”ç”¨ç›‘å¬ 80 ç«¯å£çš„è¯ï¼Œä½ å¯ä»¥æœ‰é€šè¿‡åœ¨ Node åº”ç”¨çš„å‰æ–¹å†å¢åŠ ä¸€å±‚åå‘ä»£ç† ï¼ˆä¾‹å¦‚ nginxï¼‰æ¥å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¦åˆ™ï¼Œå»ºè®®ä½ ç›´æ¥ç›‘å¬å¤§äº 1024 çš„ç«¯å£ã€‚</p></blockquote><p>Reverse Proxy</p><pre><code>æ–¹å‘ä»£ç†æŒ‡çš„æ˜¯ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥æ”¶Internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œ å¹¶ä¸”å°†æœåŠ¡å™¨è¿”å›çš„ç»“æœå‘é€ç»™å®¢æˆ·ç«¯ã€‚</code></pre><p>å…³äºåå‘ä»£ç†çš„æ›´å¤šå†…å®¹ï¼Œå»ºè®®ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚ å…³äºå¦‚ä½•åˆ©ç”¨ nginx æ¥ä¸º node é…ç½®æ–¹å‘ä»£ç†çš„å®è·µï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡åšæ–‡ã€‚</p><p>è§£é‡Šï¼šè¿™ä¸ªé—®é¢˜ç”¨äºæ£€æŸ¥è¢«é¢è¯•è€…æ˜¯å¦æœ‰å®é™…è¿è¡Œ Node åº”ç”¨çš„ç»éªŒã€‚<br>ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯</p><p>Node é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹çš„å¤„ç†æœºåˆ¶ï¼ˆæ‰€æœ‰çš„ I/O è¯·æ±‚éƒ½é‡‡ç”¨éé˜»å¡çš„å·¥ä½œæ–¹å¼ï¼‰ï¼Œè‡³å°‘ä» Node.js å¼€å‘è€…çš„è§’åº¦æ˜¯è¿™æ ·çš„ã€‚ è€Œåœ¨åº•å±‚ï¼ŒNode.js å€ŸåŠ© libuv æ¥ä½œä¸ºæŠ½è±¡å°è£…å±‚ï¼Œ ä»è€Œå±è”½ä¸åŒæ“ä½œç³»ç»Ÿçš„å·®å¼‚ï¼ŒNode å¯ä»¥å€ŸåŠ© livuv æ¥æ¥å®ç°å¤šçº¿ç¨‹ã€‚ä¸‹å›¾è¡¨ç¤ºäº† Node å’Œ libuv çš„å…³ç³»ã€‚</p><p>Libuv åº“è´Ÿè´£ Node API çš„æ‰§è¡Œã€‚å®ƒå°†ä¸åŒçš„ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹ï¼Œå½¢æˆä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œ ä»¥å¼‚æ­¥çš„æ–¹å¼å°†ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿”å›ç»™ V8 å¼•æ“ã€‚å¯ä»¥ç®€å•ç”¨ä¸‹é¢è¿™å¼ å›¾æ¥è¡¨ç¤ºã€‚</p><p>ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰</p><p>æ¯ä¸€ä¸ª I/O éƒ½éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°â€”â€”ä¸€æ—¦æ‰§è¡Œå®Œä¾¿æ¨åˆ°äº‹ä»¶å¾ªç¯ä¸Šç”¨äºæ‰§è¡Œã€‚ å¦‚æœä½ éœ€è¦æ›´å¤šè¯¦ç»†çš„è§£é‡Šï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªè§†é¢‘ã€‚ ä½ ä¹Ÿå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚</p><p>è§£é‡Šï¼šè¿™ç”¨äºæ£€æŸ¥ Node.js çš„åº•å±‚çŸ¥è¯†ï¼Œä¾‹å¦‚ä»€ä¹ˆæ˜¯ libuvï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚<br>å“ªäº›å·¥å…·å¯ä»¥ç”¨æ¥ä¿è¯ä¸€è‡´æ€§çš„ä»£ç é£æ ¼</p><p>ä½ å¯ä»¥é€‰æ‹©å¦‚ä¸‹çš„å·¥å…·ï¼š</p><pre><code>JSLintJSHintESLintJSCS - æ¨è</code></pre><p>åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œè¿™äº›å·¥å…·å¯¹äºç¼–å†™ä»£ç éå¸¸çš„æœ‰å¸®åŠ©ï¼Œèƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿå¼€å‘è€…å¼ºåˆ¶æ‰§è¡Œè§„å®šçš„é£æ ¼æŒ‡å—ï¼Œ è¿˜èƒ½å¤Ÿé€šè¿‡é™æ€åˆ†ææ•è·å¸¸è§çš„é”™è¯¯ã€‚</p><p>è§£æï¼šç”¨äºæ£€æŸ¥è¢«é¢è¯•è€…æ˜¯å¦æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒã€‚<br>è¿ç®—é”™è¯¯ä¸ç¨‹åºå‘˜é”™è¯¯çš„åŒºåˆ«</p><p>è¿ç®—é”™è¯¯å¹¶ä¸æ˜¯ bugï¼Œè¿™æ˜¯å’Œç³»ç»Ÿç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚è¯·æ±‚è¶…æ—¶æˆ–è€…ç¡¬ä»¶æ•…éšœã€‚è€Œç¨‹åºå‘˜é”™è¯¯å°±æ˜¯æ‰€è°“çš„ bugã€‚</p><p>è§£æï¼šè¿™ä¸ªé¢˜ç›®å’Œ Node å…³ç³»å¹¶ä¸å¤§ï¼Œç”¨äºè€ƒå¯Ÿé¢è¯•è€…çš„åŸºç¡€çŸ¥è¯†ã€‚<br>ä½¿ç”¨ NPM æœ‰å“ªäº›å¥½å¤„ï¼Ÿ</p><p>é€šè¿‡ NPMï¼Œä½ å¯ä»¥å®‰è£…å’Œç®¡ç†é¡¹ç›®çš„ä¾èµ–ï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‡æ˜ä¾èµ–é¡¹çš„å…·ä½“ç‰ˆæœ¬å·ã€‚ å¯¹äº Node åº”ç”¨å¼€å‘è€Œè¨€ï¼Œä½ å¯ä»¥é€šè¿‡ package.json æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®ä¿¡æ¯ï¼Œé…ç½®è„šæœ¬ï¼Œ ä»¥åŠæŒ‡æ˜é¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬ã€‚</p><p>å…³äº NPM çš„æ›´å¤šä¿¡æ¯ï¼Œä½ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><p>è§£æï¼šå®ƒèƒ½è€ƒå¯Ÿé¢è¯•è€…ä½¿ç”¨ npm å‘½ä»¤çš„åŸºç¡€çŸ¥è¯†å’Œ Node.js å¼€å‘çš„å®é™…ç»éªŒã€‚<br>ä»€ä¹ˆæ˜¯ Stubï¼Ÿä¸¾ä¸ªä½¿ç”¨åœºæ™¯</p><p>Stub æ˜¯ç”¨äºæ¨¡æ‹Ÿä¸€ä¸ªç»„ä»¶æˆ–æ¨¡å—çš„å‡½æ•°æˆ–ç¨‹åºã€‚åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œ ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç”¨ Stub å»æ¨¡æ‹Ÿä¸€ä¸ªæ–¹æ³•ï¼Œä»è€Œé¿å…è°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œ ä½¿ç”¨ Stub ä½ è¿˜å¯ä»¥è¿”å›è™šæ„çš„ç»“æœã€‚ä½ å¯ä»¥é…åˆæ–­è¨€ä½¿ç”¨ Stubã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„åœºæ™¯ä¸­ï¼Œå½“ä½ ä¸æƒ³è¯»å–ä¸€ä¸ªçœŸæ­£çš„æ–‡ä»¶æ—¶ï¼š</p><p>var fs = require(â€˜fsâ€™);</p><p>var readFileStub = sinon.stub(fs, â€˜readFileâ€™, function (path, cb) {<br>return cb(null, â€˜filecontentâ€™);<br>});</p><p>expect(readFileStub).to.be.called;<br>readFileStub.restore();</p><pre><code>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼šStubæ˜¯å®Œå…¨æ¨¡æ‹Ÿä¸€ä¸ªå¤–éƒ¨ä¾èµ–ï¼Œè€ŒMockå¸¸ç”¨æ¥åˆ¤æ–­æµ‹è¯•é€šè¿‡è¿˜æ˜¯å¤±è´¥ã€‚</code></pre><p>æœ‰å…³ Node.js çš„å•å…ƒæµ‹è¯•å°ç»“ï¼Œä½ å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ã€‚</p><p>è§£æï¼šç”¨äºæµ‹è¯•è¢«é¢è¯•è€…æ˜¯å¦æœ‰æµ‹è¯•çš„ç»éªŒã€‚å¦‚æœè¢«é¢è¯•è€…çŸ¥é“ä»€ä¹ˆæ˜¯ Stubï¼Œ é‚£ä¹ˆå¯ä»¥ç»§ç»­é—®ä»–æ˜¯å¦‚ä½•åšå•å…ƒæµ‹è¯•çš„ã€‚<br>ä»€ä¹ˆæ˜¯æµ‹è¯•é‡‘å­—å¡”ï¼Ÿ</p><p>æµ‹è¯•é‡‘å­—å¡”æŒ‡çš„æ˜¯ï¼š å½“æˆ‘ä»¬åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œåº•å±‚çš„å•å…ƒæµ‹è¯•åº”è¯¥è¿œæ¯”ä¸Šå±‚çš„ç«¯åˆ°ç«¯æµ‹è¯•è¦å¤šã€‚</p><p>å½“æˆ‘ä»¬è°ˆåˆ° HTTP API æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ¶‰åŠåˆ°ï¼š</p><pre><code>æœ‰å¾ˆå¤šé’ˆå¯¹æ¨¡å‹çš„åº•å±‚å•å…ƒæµ‹è¯•ä½†ä½ éœ€è¦æµ‹è¯•æ¨¡å‹é—´å¦‚ä½•äº¤äº’æ—¶ï¼Œéœ€è¦å‡å°‘é›†æˆæµ‹è¯•</code></pre><p>è§£æï¼šæœ¬æ–‡ä¸»è¦è€ƒå¯Ÿè¢«é¢è¯•è€…çš„åœ¨æµ‹è¯•æ–¹é¢çš„ç»éªŒã€‚<br>ä½ æœ€å–œæ¬¢çš„ HTTP æ¡†æ¶ä»¥åŠåŸå› </p><p>è¿™é¢˜æ²¡æœ‰å”¯ä¸€çš„ç­”æ¡ˆã€‚æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿè¢«é¢è¯•è€…å¯¹äºä»–æ‰€ä½¿ç”¨çš„ Node æ¡†æ¶çš„ç†è§£ç¨‹åº¦ï¼Œ è€ƒå¯Ÿä»–æ˜¯å¦èƒ½å¤Ÿç»™å‡ºé€‰æ‹©è¯¥æ¡†æ¶çš„ç†ç”±ï¼Œä¼˜ç¼ºç‚¹ç­‰ã€‚å¸¸ç”¨çš„ HTTP æ¡†æ¶ä½ å¯ä»¥å‚è€ƒè¿™ä¸ªç½‘ç«™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•</title>
      <link href="2017/06/19/jQuery%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF%E6%A1%86%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>2017/06/19/jQuery%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF%E6%A1%86%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/Alert%E5%B1%85%E4%B8%AD.gif"                      alt="image"                ></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">$(<span class="string">&#x27;.btn&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&#x27;.mask&#x27;</span>).css(&#123;</span><br><span class="line">        <span class="string">&#x27;display&#x27;</span>: <span class="string">&#x27;block&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    center($(<span class="string">&#x27;.mess&#x27;</span>));</span><br><span class="line">    check($(<span class="built_in">this</span>).parent(), $(<span class="string">&#x27;.btn1&#x27;</span>), $(<span class="string">&#x27;.btn2&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å±…ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">center</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> screenWidth = $(<span class="built_in">window</span>).width(),</span><br><span class="line">        screenHeight = $(<span class="built_in">window</span>).height(); <span class="comment">//å½“å‰æµè§ˆå™¨çª—å£çš„ å®½é«˜</span></span><br><span class="line">    <span class="keyword">var</span> scrolltop = $(<span class="built_in">document</span>).scrollTop(); <span class="comment">//è·å–å½“å‰çª—å£è·ç¦»é¡µé¢é¡¶éƒ¨é«˜åº¦</span></span><br><span class="line">    <span class="keyword">var</span> objLeft = (screenWidth - obj.width()) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> objTop = (screenHeight - obj.height()) / <span class="number">2</span> + scrolltop;</span><br><span class="line">    <span class="built_in">console</span>.log(scrolltop);</span><br><span class="line">    obj.css(&#123;</span><br><span class="line">        left: objLeft + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">        top: objTop + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;display&#x27;</span>: <span class="string">&#x27;block&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//å½“çª—å£å¤§å°å‘ç”Ÿæ”¹å˜æµè§ˆå™¨çª—å£å¤§å°æ”¹å˜æ—¶</span></span><br><span class="line">    $(<span class="built_in">window</span>).resize(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        screenWidth = $(<span class="built_in">window</span>).width();</span><br><span class="line">        screenHeight = $(<span class="built_in">window</span>).height();</span><br><span class="line">        scrolltop = $(<span class="built_in">document</span>).scrollTop();</span><br><span class="line">        objLeft = (screenWidth - obj.width()) / <span class="number">2</span>;</span><br><span class="line">        objTop = (screenHeight - obj.height()) / <span class="number">2</span> + scrolltop;</span><br><span class="line">        obj.css(&#123;</span><br><span class="line">            left: objLeft + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">            top: objTop + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;display&#x27;</span>: <span class="string">&#x27;block&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//å½“æµè§ˆå™¨æœ‰æ»šåŠ¨æ¡æ—¶çš„æ“ä½œã€</span></span><br><span class="line">    $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        screenWidth = $(<span class="built_in">window</span>).width();</span><br><span class="line">        screenHeight = $(<span class="built_in">window</span>).height();</span><br><span class="line">        scrolltop = $(<span class="built_in">document</span>).scrollTop();</span><br><span class="line">        objLeft = (screenWidth - obj.width()) / <span class="number">2</span>;</span><br><span class="line">        objTop = (screenHeight - obj.height()) / <span class="number">2</span> + scrolltop;</span><br><span class="line">        obj.css(&#123;</span><br><span class="line">            left: objLeft + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">            top: objTop + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;display&#x27;</span>: <span class="string">&#x27;block&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¡®å®šå–æ¶ˆçš„æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">obj, obj1, obj2</span>) </span>&#123;</span><br><span class="line">    obj1.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        obj.remove();</span><br><span class="line">        closed($(<span class="string">&#x27;.mask&#x27;</span>), $(<span class="string">&#x27;.mess&#x27;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">    obj2.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        closed($(<span class="string">&#x27;.mask&#x27;</span>), $(<span class="string">&#x27;.mess&#x27;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// éšè— çš„æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closed</span>(<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line">    obj1.hide();</span><br><span class="line">    obj2.hide();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;height:2000px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å•å‡»å¼¹å‡ºæ¶ˆæ¯æ¡†&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mess&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¡®å®š&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å–æ¶ˆ&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn2&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: fixed;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">50</span>);</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line"><span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mess</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#ececec</span>;</span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"><span class="attribute">z-index</span>: <span class="number">101</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jquery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸä¹‹ç™¾åº¦æœç´¢æ¡†</title>
      <link href="2017/06/16/%E8%B7%A8%E5%9F%9F%E4%B9%8B%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E6%A1%86/"/>
      <url>2017/06/16/%E8%B7%A8%E5%9F%9F%E4%B9%8B%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E6%A1%86/</url>
      
        <content type="html"><![CDATA[<p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/javascript.jpg"                      alt="image"                ><br><a id="more"></a></p><h2 id="è·¨åŸŸçš„é—®é¢˜"><a href="#è·¨åŸŸçš„é—®é¢˜" class="headerlink" title="è·¨åŸŸçš„é—®é¢˜"></a>è·¨åŸŸçš„é—®é¢˜</h2><ol><li>åŸŸï¼šåŸŸå</li><li>è·¨åŸŸè¯·æ±‚ï¼ˆè®¿é—®ï¼‰ï¼šä¸€ä¸ªåŸŸåä¸‹çš„æ–‡ä»¶è¯·æ±‚å¦å¤–ä¸€ä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œå°±äº§ç”Ÿäº†è·¨åŸŸ</li><li>è·¨åŸŸçš„è§£å†³:Jsonp : json padding</li></ol><blockquote><p><script>æ ‡ç­¾<br>srcçš„ä½œç”¨ ï¼š åŠ è½½ï¼ˆåŒ…å«æŒ‡å®šçš„å¤–éƒ¨æ–‡ä»¶ï¼‰<br>å¯ä»¥è·¨åŸŸåŒ…å«<br>è¢«åŒ…å«çš„èµ„æºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ–‡ä»¶(å¯ä»¥æ˜¯txt,phpç­‰)<br>ä»–åªå…³æ³¨è¢«åŒ…å«çš„æ–‡ä»¶çš„å†…å®¹æ˜¯å¦æ˜¯åˆæ³•çš„JS<br>åŸç†<br>å®šä¹‰å‡½æ•°<br>åŒ…å«å¤–éƒ¨æ–‡ä»¶ï¼Œåœ¨è¢«åŒ…å«çš„æ–‡ä»¶ä¸­æ‰§è¡Œè°ƒç”¨å®šä¹‰å¥½çš„å‡½æ•°<br>å‚æ•°çš„ï¼ˆæ•°æ®ï¼‰çš„å®ç°<br>é—®é¢˜ï¼šåŒ…å«å°±è°ƒç”¨ï¼Œé€šè¿‡åŠ¨æ€åˆ›å»º<script>å®ç°æŒ‰éœ€è°ƒç”¨<br>é—®é¢˜ï¼šåŒ…å«åŠ¨æ€æ–‡ä»¶æ—¶å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¥å£å®ç°æŒ‰éœ€ç”Ÿæˆè°ƒç”¨å‡½æ•°åç§°</p></blockquote><h2 id="æ•ˆæœå›¾ï¼š"><a href="#æ•ˆæœå›¾ï¼š" class="headerlink" title="æ•ˆæœå›¾ï¼š"></a>æ•ˆæœå›¾ï¼š</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/%E7%99%BE%E5%BA%A6%E8%B7%A8%E5%9F%9F.gif"                      alt="image"                ></p><h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serch</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oul = $(<span class="string">&quot;#ul1&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> html = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (data.s.length) &#123;</span><br><span class="line">    oul.show();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.s.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">6</span>) &#123;</span><br><span class="line">            html += <span class="string">&#x27;&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://www.baidu.com/s?wd=&#x27;</span> + data.s[i] + <span class="string">&#x27;&quot;&gt;&#x27;</span> + data.s[i] + <span class="string">&#x27;&lt;/a&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    oul.append(html);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    oul.hide();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> oq = $(<span class="string">&quot;#q&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> oul = $(<span class="string">&quot;#ul1&quot;</span>);</span><br><span class="line">oq.on(<span class="string">&quot;keyup&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    oul.empty();</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> oScript = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">        oScript.src = <span class="string">&quot;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&quot;</span> +</span><br><span class="line">            $(<span class="built_in">this</span>).val() +</span><br><span class="line">            <span class="string">&quot;&amp;cb=serch&quot;</span>;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(oScript);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oul.hide();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">id</span>=<span class="string">&quot;q&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#q</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f90</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-id">#ul1</span> &#123;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f90</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">310px</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">        <span class="attribute">text-decoration</span>: none;</span><br><span class="line">        <span class="attribute">color</span>: black;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#f90</span>;</span><br><span class="line">        <span class="attribute">color</span>: white;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆå…­ï¼‰</title>
      <link href="2017/05/24/ES6%EF%BC%88%E5%85%AD%EF%BC%89/"/>
      <url>2017/05/24/ES6%EF%BC%88%E5%85%AD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>classçš„çš„ç»§æ‰¿</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#canvas</span> &#123;</span><br><span class="line">           <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1.897</span>;</span><br><span class="line"><span class="built_in">console</span>.log(~~num); <span class="comment">//1ï¼Œå»é™¤å°æ•°ç‚¹åé¢çš„æ•°å­—</span></span><br><span class="line"><span class="comment">//ä¸‹é¢æ˜¯ç®€å•çš„è§£é‡Šï¼š</span></span><br><span class="line"><span class="comment">// Math.random()å‡½æ•°è¿”å›çš„æ˜¯0åˆ°1ä¹‹é—´çš„éšæœºæ•°ã€‚ï¼ˆä¸åŒ…æ‹¬0å’Œ1æœ¬èº«ï¼‰ï¼Œç”¨è¯¥å‡½æ•°ä¹˜ä»¥ä½ è®¾å®šçš„maxå€¼å‡å»minå€¼æ‰€å¾—çš„å·®ï¼Œå³æ˜¯æŒ‰ç…§è‡ªå·±æŒ‡å®šçš„å€æ•°æ”¾å¤§è¿™ä¸ªrandomå€¼ã€‚\</span></span><br><span class="line"><span class="comment">// æ¥ç€ä¸ºäº†ä»minå€¼å¼€å§‹ï¼Œå¿…é¡»åœ¨Math.random()*(max - min)ä¹‹ååŠ ä¸Šminå€¼æœ¬èº«ã€‚ï¼ˆmaxå€¼è¡¨ç¤ºæœ€å¤§å€¼ï¼Œminå€¼è¡¨ç¤ºæœ€å°å€¼ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> arrs = [<span class="number">1</span>, <span class="number">10</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...arrs));</span><br><span class="line"></span><br><span class="line"><span class="comment">//classç»§æ‰¿</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * class çš„ç»§æ‰¿ç­‰ç›¸å…³çŸ¥è¯†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// extendsã€ staticã€ super</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#canvas&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> w = canvas.width = <span class="number">600</span>;</span><br><span class="line"><span class="keyword">const</span> h = canvas.height = <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">x, y, r</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        <span class="built_in">this</span>.r = r;</span><br><span class="line">        <span class="built_in">this</span>.color = <span class="string">`rgb(<span class="subst">$&#123;~~Ball.rpFn([<span class="number">55</span>, <span class="number">255</span>])&#125;</span>, <span class="subst">$&#123;~~Ball.rpFn([<span class="number">55</span>, <span class="number">255</span>])&#125;</span>, <span class="subst">$&#123;~~Ball.rpFn([<span class="number">55</span>, <span class="number">255</span>])&#125;</span>)`</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//æ¸²æŸ“æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">        ctx.save();</span><br><span class="line">        ctx.translate(<span class="built_in">this</span>.x, <span class="built_in">this</span>.y); <span class="comment">//å°çƒåæ ‡</span></span><br><span class="line">        ctx.fillStyle = <span class="built_in">this</span>.color; <span class="comment">//æŒ‡å®šé¢œè‰²</span></span><br><span class="line">        ctx.beginPath(); <span class="comment">//èµ·å§‹è·¯å¾„</span></span><br><span class="line">        ctx.arc(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">this</span>.r, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI); <span class="comment">//ç»˜åˆ¶è·¯å¾„</span></span><br><span class="line">        ctx.fill(); <span class="comment">//å¡«å……é¢œè‰²</span></span><br><span class="line">        ctx.restore(); <span class="comment">//æ¢å¤ç»˜å›¾ç¯å¢ƒ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// æ€å¿’å¯  å…³é”®å­— ç”Ÿæˆé™æ€æ–¹æ³• æŒ‚è½½åˆ°ç±»å½“ä¸­çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="title">rpFn</span>(<span class="params">arr</span>)</span> &#123; <span class="comment">// Ball.rpFn([1, 10])</span></span><br><span class="line">        <span class="keyword">let</span> max = <span class="built_in">Math</span>.max(...arr), <span class="comment">//æ‰©å±•è¿ç®—ç¬¦</span></span><br><span class="line">            min = <span class="built_in">Math</span>.min(...arr);</span><br><span class="line">        <span class="comment">//éšæœºæ•°å‚æ•°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.random() * (max - min) + min;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const ball1 = new Ball(100, 100, 30).render(ctx);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°ç±»   extendå‡½æ•° å»ç»§æ‰¿ ballç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperBall</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">x, y, r</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// Ball.call(this, x, y, r);</span></span><br><span class="line">        <span class="comment">// this.color = &#x27;red&#x27;;</span></span><br><span class="line">        <span class="built_in">super</span>(x, y, r);</span><br><span class="line">        <span class="comment">//super ä¹‹å‰ä½¿ç”¨ this å°†æŒ‡å®šundefined</span></span><br><span class="line">        <span class="comment">//å­ç±»ç»§æ‰¿çˆ¶ç±»  åœ¨æ„é€ å‡½æ•°ä¸­å½“æˆä¸€ä¸ªå‡½æ•°å»ä½¿ç”¨ è°ƒç”¨</span></span><br><span class="line">        <span class="comment">//ç»§æ‰¿å±æ€§ åŠ æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.vy = SuperBall.rpFn([<span class="number">2</span>, <span class="number">4</span>]);</span><br><span class="line">        <span class="built_in">this</span>.g = SuperBall.rpFn([<span class="number">0.2</span>, <span class="number">0.4</span>]); <span class="comment">//é‡åŠ›åŠ é€Ÿåº¦</span></span><br><span class="line">        <span class="built_in">this</span>.a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="title">move</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// super();</span></span><br><span class="line">        <span class="comment">// éæ„é€ å‡½æ•°ä¸­æŠ¥é”™ åªèƒ½åœ¨æ„é€ å‡½æ•°å½“ä½¿ç”¨ï¼Œå¹¶ä¸”è°ƒç”¨äº†superå°±ç›¸å½“äºä½¿ç”¨äº†çˆ¶ç±»çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.y += <span class="built_in">this</span>.vy; <span class="comment">//yè½´åæ ‡</span></span><br><span class="line">        <span class="built_in">this</span>.vy += <span class="built_in">this</span>.g;</span><br><span class="line">        <span class="comment">//============é‡åŠ›å‡é€Ÿåå¼¹æ–¹æ³•=============</span></span><br><span class="line">        <span class="keyword">let</span> current = <span class="built_in">this</span>.vy * -<span class="number">0.75</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.y + <span class="built_in">this</span>.r &gt;= ctx.canvas.height) &#123;</span><br><span class="line">            <span class="built_in">this</span>.y = ctx.canvas.height - <span class="built_in">this</span>.r;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(current - <span class="built_in">this</span>.a) &lt; <span class="number">0.05</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="comment">//============é‡åŠ›å‡é€Ÿåå¼¹æ–¹æ³•=============</span></span><br><span class="line">            <span class="built_in">this</span>.a = <span class="built_in">this</span>.vy *= -<span class="number">0.75</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, ctx.canvas.width, ctx.canvas.height);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>.render(ctx); <span class="comment">//ç°åœ¨çš„superæ˜¯å¯¹è±¡ è€Œä¸æ˜¯å‡½æ•° æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œ è‡ªåŠ¨ç»‘å®šå­ç±»çš„this</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const ball1 = new SuperBall(100, 100, 30).render(ctx);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ball, timer;</span><br><span class="line"></span><br><span class="line">canvas.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x = e.offsetX,</span><br><span class="line">        y = e.offsetY;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> r = ~~Ball.rpFn([<span class="number">15</span>, <span class="number">55</span>]); <span class="comment">//~~æ¸…é™¤å°æ•°</span></span><br><span class="line">    <span class="comment">//æ¯æ¬¡ç‚¹å‡»ä¹‹å‰æ¸…é™¤ä¹‹å‰çš„å°çƒ</span></span><br><span class="line">    ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, ctx.canvas.width, ctx.canvas.height);</span><br><span class="line">    ball = <span class="keyword">new</span> SuperBall(x, y, r).render(ctx);</span><br><span class="line"></span><br><span class="line">    ballMove(); <span class="comment">//è°ƒç”¨åå¼¹è¿åŠ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ballMove</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    timer = <span class="built_in">window</span>.requestAnimationFrame(ballMove);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!ball.move(ctx)) &#123;</span><br><span class="line">        <span class="built_in">window</span>.cancelAnimationFrame(timer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>çŸ¥è¯†ç‚¹ï¼šé‡åŠ›å‡é€Ÿ ï¼Œextendsã€ staticã€ superçš„ç»§æ‰¿çš„ä¸‰ä¸ªæ–¹æ³•</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆäº”ï¼‰</title>
      <link href="2017/05/23/ES6%EF%BC%88%E4%BA%94%EF%BC%89/"/>
      <url>2017/05/23/ES6%EF%BC%88%E4%BA%94%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>classçš„åŸºæœ¬ä½¿ç”¨</p><a id="more"></a><p>JSè¯­è¨€çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼Œå®šä¹‰å¹¶ç”Ÿæˆæ–°å¯¹è±¡ï¼Œæ˜¯ä¸€ç§åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡ç³»ç»Ÿã€‚è¿™ç§å†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„äººæ„Ÿåˆ°å›°æƒ‘ã€‚æ‰€ä»¥ï¼Œåœ¨ES6ä¸­æ–°å¢åŠ äº†ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿ç”¨ class å…³é”®å­—å£°æ˜ä¸€ä¸ªç±»ï¼Œä¹‹åä»¥è¿™ä¸ªç±»æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ ç»Ÿçš„æ„é€ å‡½æ•°æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">const</span> Miaov = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">        <span class="built_in">this</span>.b = b;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Miaov.prototype = &#123;</span><br><span class="line">        <span class="title">constructor</span>: <span class="title">Miaov</span>,</span><br><span class="line">        <span class="title">print</span>: <span class="title">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.a + <span class="string">&quot;, &quot;</span> + <span class="built_in">this</span>.b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="keyword">new</span> Miaov(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;js&quot;</span>).print();</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Miaov</span> </span>&#123;</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°å‚æ•°  æŒ‡å®šæ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸éœ€è¦function es6è¯­æ³•</span></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">a, b</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">    <span class="built_in">this</span>.b = b;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰ç±»çš„æ–¹æ³•ç›´æ¥æ–¹æ³•åä¸éœ€è¦function</span></span><br><span class="line"><span class="comment">//ä¸éœ€è¦åŠ åˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="comment">//ä¸éœ€è¦prototypeçš„æ–¹æ³•ä¸ŠåŠ æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.a + <span class="string">&quot;&quot;</span> + <span class="built_in">this</span>.b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> miaov = <span class="keyword">new</span> Miaov(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;word&quot;</span>).print();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Miaov); <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(Miaov.prototype);</span><br><span class="line"><span class="comment">//å®šä¹‰åœ¨ç±»ä¸­çš„æ–¹æ³• éƒ½ä¸æ˜¯å¯ä»¥è¢«æšä¸¾çš„</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(Miaov.prototype));</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> P();</span><br><span class="line"><span class="comment">//constructioré»˜è®¤æ·»åŠ </span></span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br><span class="line">p(); <span class="comment">//ç›´æ¥è°ƒç”¨ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptè‡ªå®šä¹‰äº‹ä»¶</title>
      <link href="2017/05/17/Javascript%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/"/>
      <url>2017/05/17/Javascript%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/javascript.jpg"                      alt="image"                ><br>è‡ªå®šä¹‰äº‹ä»¶ : ä¸»è¦æ˜¯è·Ÿå‡½æ•°æœ‰å…³ç³»,å°±æ˜¯è®©å‡½æ•°èƒ½å¤Ÿå…·å¤‡äº‹ä»¶çš„æŸäº›ç‰¹æ€§<br><a id="more"></a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span>div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;span1&quot;</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰äº‹ä»¶åˆçº§ç‰ˆ</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;show&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;show&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;show&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">show(); <span class="comment">//ä¸»åŠ¨è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>//=====================================//</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> oSpan = <span class="built_in">document</span>.getElementById(<span class="string">&quot;span1&quot;</span>);</span><br><span class="line">    <span class="comment">//å°ç±³å¯¹divå°è£…çš„æ–¹æ³•</span></span><br><span class="line">    bindEvent(oDiv, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="number">1</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//åä¸ºå¯¹divå°è£…çš„æ–¹æ³•</span></span><br><span class="line">    bindEvent(oDiv, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="number">2</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//å°æœ¨å¯¹spanå°è£…çš„æ–¹æ³•</span></span><br><span class="line">    bindEvent(oSpan, <span class="string">&quot;show&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="number">3</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//è‹¹æœå¯¹spanå°è£…çš„æ–¹æ³•</span></span><br><span class="line">    bindEvent(oSpan, <span class="string">&quot;show&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="number">4</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//è°ƒç”¨å°æœ¨ å’Œè‹¹æœçš„æ–¹æ³•</span></span><br><span class="line">    fireEvent(oSpan, <span class="string">&quot;show&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params">obj, events, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ‰¾åˆ°objæ‰€å¯¹åº”çš„äº‹ä»¶</span></span><br><span class="line">    obj.listeners = obj.listeners || &#123;&#125;;</span><br><span class="line">    obj.listeners[events] = obj.listeners[events] || [];</span><br><span class="line"></span><br><span class="line">    obj.listeners[events].push(fn);</span><br><span class="line">    <span class="built_in">console</span>.log(obj.listeners[events]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (obj.addEventListener) &#123;</span><br><span class="line">        obj.addEventListener(events, fn, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        obj.attachEvent(<span class="string">&#x27;on&#x27;</span> + events, fn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fireEvent</span>(<span class="params">obj, events</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; obj.listeners[events].length; i++) &#123;</span><br><span class="line">        obj.listeners[events][i]();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> äº‹ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡åŸºç¡€ï¼ˆä¸€ï¼‰</title>
      <link href="2017/05/12/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2017/05/12/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/oop.png"                      alt="image"                ><br>åŸºæœ¬æ–¹æ³•ç±»ä¼¼cssä¸­çš„styleå±æ€§<br>é¢å‘å¯¹è±¡æ–¹æ³•cssä¸­çš„classå±æ€§<br><a id="more"></a></p><h3 id="Newçš„æ„ä¹‰"><a href="#Newçš„æ„ä¹‰" class="headerlink" title="Newçš„æ„ä¹‰"></a>Newçš„æ„ä¹‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“newå»è°ƒç”¨ä¸€ä¸ªå‡½æ•° : è¿™ä¸ªæ—¶å€™å‡½æ•°ä¸­çš„thiså°±æ˜¯åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡,è€Œä¸”å‡½æ•°çš„çš„è¿”å›å€¼ç›´æ¥å°±æ˜¯thiså•¦(éšå¼è¿”å›)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//newåé¢è°ƒç”¨çš„å‡½æ•° : å«åšæ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CreatePerson</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">CreatePerson.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">alert( <span class="built_in">this</span>.name );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> CreatePerson(<span class="string">&#x27;å°æ˜&#x27;</span>);</span><br><span class="line"><span class="comment">//p1.showName();</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> CreatePerson(<span class="string">&#x27;å°å¼º&#x27;</span>);</span><br><span class="line"><span class="comment">//p2.showName();</span></span><br><span class="line"></span><br><span class="line">alert( p1.showName == p2.showName );  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> æ„é€ å‡½æ•°(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.å±æ€§</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ„é€ å‡½æ•°.åŸå‹.æ–¹æ³• = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> å¯¹è±¡<span class="number">1</span> = <span class="keyword">new</span> æ„é€ å‡½æ•°();</span><br><span class="line">å¯¹è±¡<span class="number">1.</span>æ–¹æ³•();</span><br></pre></td></tr></table></figure><h2 id="æ —å­ï¼š"><a href="#æ —å­ï¼š" class="headerlink" title="æ —å­ï¼š"></a>æ —å­ï¼š</h2><blockquote><p>å…ˆå˜å‹:<br>å°½é‡ä¸è¦å‡ºç°å‡½æ•°åµŒå¥—å‡½æ•°<br>å¯ä»¥æœ‰å…¨å±€å˜é‡<br>æŠŠonloadä¸­ä¸æ˜¯èµ‹å€¼çš„è¯­å¥æ”¾åˆ°å•ç‹¬å‡½æ•°ä¸­</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*window.onload = function()&#123;</span></span><br><span class="line"><span class="comment">var oParent = document.getElementById(&#x27;div1&#x27;);</span></span><br><span class="line"><span class="comment">var aInput = oParent.getElementsByTagName(&#x27;input&#x27;);</span></span><br><span class="line"><span class="comment">var aDiv = oParent.getElementsByTagName(&#x27;div&#x27;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">for(var i=0;i&lt;aInput.length;i++)&#123;</span></span><br><span class="line"><span class="comment">aInput[i].index = i;</span></span><br><span class="line"><span class="comment">aInput[i].onclick = function()&#123;</span></span><br><span class="line"><span class="comment">for(var i=0;i&lt;aInput.length;i++)&#123;</span></span><br><span class="line"><span class="comment">aInput[i].className = &#x27;&#x27;;</span></span><br><span class="line"><span class="comment">aDiv[i].style.display = &#x27;none&#x27;;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">this.className = &#x27;active&#x27;;</span></span><br><span class="line"><span class="comment">aDiv[this.index].style.display = &#x27;block&#x27;;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆå˜å‹:</span></span><br><span class="line"><span class="comment">//å°½é‡ä¸è¦å‡ºç°å‡½æ•°åµŒå¥—å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¯ä»¥æœ‰å…¨å±€å˜é‡</span></span><br><span class="line"><span class="comment">//æŠŠonloadä¸­ä¸æ˜¯èµ‹å€¼çš„è¯­å¥æ”¾åˆ°å•ç‹¬å‡½æ•°ä¸­</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oParent = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> aInput = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> aDiv = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">oParent = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div1&#x27;</span>);</span><br><span class="line">aInput = oParent.getElementsByTagName(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">aDiv = oParent.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"></span><br><span class="line">init();</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;aInput.length;i++)&#123;</span><br><span class="line">aInput[i].index = i;</span><br><span class="line">aInput[i].onclick = change;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;aInput.length;i++)&#123;</span><br><span class="line">aInput[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">aDiv[i].style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">this</span>.className = <span class="string">&#x27;active&#x27;</span>;</span><br><span class="line">aDiv[<span class="built_in">this</span>.index].style.display = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="thisæŒ‡å‘å¤ä¹ "><a href="#thisæŒ‡å‘å¤ä¹ " class="headerlink" title="thisæŒ‡å‘å¤ä¹ "></a>thisæŒ‡å‘å¤ä¹ </h3><h2 id="æ”¹thisæŒ‡å‘é—®é¢˜-äº‹ä»¶æˆ–è€…æ˜¯å®šæ—¶å™¨-å°½é‡è®©é¢å‘å¯¹è±¡ä¸­çš„thisæŒ‡å‘å¯¹è±¡"><a href="#æ”¹thisæŒ‡å‘é—®é¢˜-äº‹ä»¶æˆ–è€…æ˜¯å®šæ—¶å™¨-å°½é‡è®©é¢å‘å¯¹è±¡ä¸­çš„thisæŒ‡å‘å¯¹è±¡" class="headerlink" title="++æ”¹thisæŒ‡å‘é—®é¢˜ : äº‹ä»¶æˆ–è€…æ˜¯å®šæ—¶å™¨,å°½é‡è®©é¢å‘å¯¹è±¡ä¸­çš„thisæŒ‡å‘å¯¹è±¡++"></a>++æ”¹thisæŒ‡å‘é—®é¢˜ : äº‹ä»¶æˆ–è€…æ˜¯å®šæ—¶å™¨,å°½é‡è®©é¢å‘å¯¹è±¡ä¸­çš„thisæŒ‡å‘å¯¹è±¡++</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">oDiv.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span> : oDiv</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">oDiv.onclick = show;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span> : oDiv</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">oDiv.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">show();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span> : <span class="built_in">window</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è½¬åŒ–"><a href="#è½¬åŒ–" class="headerlink" title="è½¬åŒ–"></a>è½¬åŒ–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*var arr = [4,7,1,3];</span></span><br><span class="line"><span class="comment">arr.sort();  // 1 3 4 7</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">var arr2 = [4,7,1,3];</span></span><br><span class="line"><span class="comment">arr2.push(5);</span></span><br><span class="line"><span class="comment">arr2.sort(); // 1 3 4 5 7</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> t1 = <span class="keyword">new</span> Tab(<span class="string">&#x27;div1&#x27;</span>);</span><br><span class="line">t1.init();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tab</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.oParent = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line"><span class="built_in">this</span>.aInput = <span class="built_in">this</span>.oParent.getElementsByTagName(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line"><span class="built_in">this</span>.aDiv = <span class="built_in">this</span>.oParent.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="built_in">this</span>.iNow = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Tab.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> This = <span class="built_in">this</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">this</span>.aInput.length;i++)&#123;</span><br><span class="line"><span class="built_in">this</span>.aInput[i].index = i;</span><br><span class="line"><span class="built_in">this</span>.aInput[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">This.change(<span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Tab.prototype.change = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">this</span>.aInput.length;i++)&#123;</span><br><span class="line"><span class="built_in">this</span>.aInput[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="built_in">this</span>.aDiv[i].style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">obj.className = <span class="string">&#x27;active&#x27;</span>;</span><br><span class="line"><span class="built_in">this</span>.aDiv[obj.index].style.display = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆå››ï¼‰</title>
      <link href="2017/05/12/ES6%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>2017/05/12/ES6%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>map å‚¨å­˜ å­—å…¸ç»“æ„æ•°æ® é”®å€¼å¯¹å½¢å¼å­˜å‚¨<br><a id="more"></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> data1 = &#123;</span><br><span class="line">a: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> data2 = &#123;</span><br><span class="line">b: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj[data1] = <span class="number">1</span>;</span><br><span class="line">obj[data2] = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">//objè½¬æˆå­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line"><span class="built_in">console</span>.log(data1.toString() == data2.toString()); <span class="comment">//true</span></span><br><span class="line"><span class="comment">//========================================</span></span><br><span class="line"><span class="comment">//åˆ›å»ºmap</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="number">1</span>],</span><br><span class="line">[<span class="string">&quot;b&quot;</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">//map æ–¹æ³•</span></span><br><span class="line">map.set(<span class="string">&quot;miaov&quot;</span>, <span class="number">100</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">//é‡å¤æ·»åŠ key ä¼šæ›¿æ¢æ‰ä¹‹å‰çš„å€¼</span></span><br><span class="line">map.set(<span class="string">&quot;miaov&quot;</span>, <span class="number">200</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">//mapã€‚getæ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&quot;miaov&quot;</span>)); <span class="comment">//200 å¦åˆ™undefinedï¼›</span></span><br><span class="line"><span class="comment">// deleteæ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&quot;a&quot;</span>));</span><br><span class="line"><span class="comment">// has(key)æ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&quot;a&quot;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(map.keys());</span><br><span class="line"><span class="built_in">console</span>.log(map.values());</span><br><span class="line">map.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key, value, map</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(key + <span class="string">&quot;:&quot;</span> + value);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//mapæ³¨æ„äº‹é¡¹</span></span><br><span class="line">map.set(<span class="literal">NaN</span>, <span class="number">10</span>).set(<span class="literal">NaN</span>, <span class="number">10</span>);</span><br><span class="line"><span class="comment">//NaN æ˜¯åŒä¸€ä¸ªé”®</span></span><br><span class="line">map.set(&#123;&#125;, <span class="string">&quot;x&quot;</span>).set(&#123;&#125;, <span class="string">&quot;y&quot;</span>);</span><br><span class="line"><span class="comment">//ç”±äºå†…å­˜åœ°å€ä¸åŒï¼Œmapè®¤ä¸ºæ˜¯äºŒä¸ªä¸åŒçš„é”®å€¼ã€‚ä¸ç”¨æ‹…å¿ƒåŸæ¥çš„å±æ€§é‡åï¼›</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆä¸‰ï¼‰</title>
      <link href="2017/05/11/ES6%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>2017/05/11/ES6%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p> setæ•°æ®ç»“æ„é›†åˆ<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//å¦‚ä½•åˆ›å»ºset</span></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], &#123;</span><br><span class="line">    a: <span class="number">1</span></span><br><span class="line">&#125;])</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="comment">//setå±æ€§</span></span><br><span class="line"><span class="built_in">console</span>.log(s.size); <span class="comment">//5</span></span><br><span class="line"><span class="comment">//setæ–¹æ³•</span></span><br><span class="line">s.add(<span class="string">&quot;2&quot;</span>).add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="comment">//setåˆ é™¤</span></span><br><span class="line">s.delete(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="comment">//set clear</span></span><br><span class="line"><span class="comment">//console.log(s.clear());</span></span><br><span class="line"><span class="comment">//è¿”å›é”®å€¼å¯¹éå†å™¨</span></span><br><span class="line"><span class="built_in">console</span>.log(s.entries())</span><br><span class="line">s.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, set</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value + <span class="string">&quot;miaov&quot;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//æœªæ”¹å˜æ•°æ®ç»“æ„</span></span><br><span class="line"><span class="built_in">console</span>.log(s)</span><br><span class="line">    <span class="comment">//=============</span></span><br><span class="line">    <span class="comment">//å½“é‡æ–°æ·»åŠ ä¸€ä¸ªé‡å¤æ•°æ®</span></span><br><span class="line">s.add(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="comment">//åˆ©ç”¨set  æ–¹æ³•   è§£å†³æ•°ç»„å»é‡</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆäºŒï¼‰</title>
      <link href="2017/05/10/ES6%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2017/05/10/ES6%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p>åŸºæœ¬æ¦‚å¿µï¼š<br>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§==åŒ¹é…æ¨¡å¼==ï¼Œåªè¦ç­‰å·==ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒ==ï¼Œé‚£ä¹ˆå·¦è¾¹çš„å˜é‡å°±å¯ä»¥<br>è¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚<br>ç»“æ„èµ‹å€¼ä¸»è¦åˆ†ä¸ºï¼š<br>æ•°ç»„çš„è§£æ„èµ‹å€¼<br>å¯¹è±¡çš„ç»“æ„èµ‹å€¼<br> åŸºæœ¬ç±»å‹çš„è§£æ„èµ‹å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b, c);</span><br></pre></td></tr></table></figure><p> 1 æ•°ç»„çš„è§£æ„èµ‹å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, [[b], c]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b, c);  <span class="comment">// 1, 2, 3</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> [, , c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"> <span class="built_in">console</span>.log(c); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x] = [];</span><br><span class="line"></span><br><span class="line"> <span class="built_in">console</span>.log(x);  <span class="comment">// let x; undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [y = <span class="number">1</span>] = [];</span><br><span class="line"></span><br><span class="line"> <span class="built_in">console</span>.log(y); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p> 2 å¯¹è±¡çš„è§£æ„èµ‹å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a, b&#125; = &#123;<span class="attr">b</span>: <span class="string">&#x27;bbb&#x27;</span>, <span class="attr">a</span>: <span class="string">&#x27;aaa&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">a</span>: b&#125; = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// a is not defind</span></span><br></pre></td></tr></table></figure><p>3 åŸºæœ¬ç±»å‹çš„è§£æ„èµ‹å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c, d] = <span class="string">&#x27;1234&#x27;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">console</span>.log(a, b, c, d); <span class="comment">// 1,2,3,4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span>: len&#125; = <span class="string">&#x27;miaov&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(len); <span class="comment">//4</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ï¼ˆä¸€ï¼‰</title>
      <link href="2017/05/09/ES6%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2017/05/09/ES6%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p>åŸºæœ¬è¯­æ³•<br>letæ˜¯å—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨letå®šä¹‰åï¼Œå¯¹å‡½æ•°å¤–éƒ¨æ— å½±å“ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å†™æ³• å˜é‡æå‡ä¸å¯ä»¥</span></span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// é”™è¯¯å†™æ³•   å˜é‡ä¸å¯é‡å¤èµ‹å€¼</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">5</span></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;3&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;5&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">       btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(i) <span class="comment">//æ°¸è¿œç­‰äºi=5</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//æ”¹å˜</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">       btns[i].index = i;</span><br><span class="line">       btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="built_in">this</span>.index)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//æ”¹å˜</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">       (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">           btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(i)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)(i);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//æ”¹å˜</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">       btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(i) <span class="comment">//letåˆ›å»ºå‡ºä½œç”¨åŸŸå—</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>constå®šä¹‰çš„å˜é‡ä¸å¯ä»¥ä¿®æ”¹ï¼Œè€Œä¸”å¿…é¡»åˆå§‹åŒ–ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨å¾ªç¯è¯­å¥ä¹‹å†…æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œåœ¨å¾ªç¯ä½“ä¸­æ˜¯ä¸€ä¸ªå­ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment">//ä¾‹å­ï¼š</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i)</span><br></pre></td></tr></table></figure><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constå£°æ˜å±æ€§çš„æ—¶å€™å¿…é¡»èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">let</span> b;</span><br><span class="line"><span class="keyword">const</span> c; <span class="comment">//æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¹å˜å¸¸é‡çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line">a = &#123;&#125;; <span class="comment">//æµè§ˆå™¨ä¼šæŠ¥é”™  æ”¹å˜æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">obj: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line">a.obj = <span class="number">20</span>; <span class="comment">//ä¸ä¼šæŠ¥é”™  åªæ˜¯ä¿®æ”¹å¯¹è±¡æ•°æ®  æ²¡æœ‰æ”¹å˜objçš„å¼•ç”¨</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6æ–°ç‰¹æ€§ä¸€è§ˆ</title>
      <link href="2017/05/08/ES6%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/"/>
      <url>2017/05/08/ES6%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/181026/0ggG4JjHGi.png"                      alt="mark"                ></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨JSè·å–å°æ•°ç‚¹åä¸¤ä½æ•°å­—æ–¹æ³•</title>
      <link href="2017/05/07/%E7%94%A8JS%E8%8E%B7%E5%8F%96%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97%E6%96%B9%E6%B3%95/"/>
      <url>2017/05/07/%E7%94%A8JS%E8%8E%B7%E5%8F%96%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šå‘¨è€å¸ˆç•™ä¸‹çš„ä¸€ä¸ªå°é—®é¢˜ï¼Ÿ<br>ç”¨Javascriptå–å°æ•°ç‚¹åä¸¤ä½ï¼Œä¾‹å–æˆ3.1415926,å¦‚ä½•åš3.15ï¼Ÿ<br><a id="more"></a><br>æˆªå–ï¼š [æˆ‘å°±æ€ä¹ˆå¹²çš„â€¦â€¦â€¦]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">var</span> s = <span class="number">22.127456</span> + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> str = s.substring(<span class="number">0</span>,s.indexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">3</span>);</span><br><span class="line">       alert(str);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼æ•ˆæœä¸é”™</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">     onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="string">&quot;23.456322&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> aNew;</span><br><span class="line">       <span class="keyword">var</span> re = <span class="regexp">/([0-9]+/</span>.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;)[<span class="number">0</span>-<span class="number">9</span>]*/;</span><br><span class="line">        aNew = a.replace(re,<span class="string">&quot;$1&quot;</span>);</span><br><span class="line">        alert(aNew);</span><br><span class="line">     &#125;</span><br><span class="line">     &lt;script&gt;</span><br></pre></td></tr></table></figure><p> ä»–å°±æ¯”è¾ƒèªæ˜äº†â€¦..</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">     <span class="keyword">var</span> num=<span class="number">22.127456</span>;</span><br><span class="line">     alert( <span class="built_in">Math</span>.round(num*<span class="number">100</span>)/<span class="number">100</span>);</span><br><span class="line">     &lt;script&gt;</span><br></pre></td></tr></table></figure><p>ä¼šç”¨æ–°é²œä¸œè¥¿çš„æœ‹å‹â€¦â€¦. ä½†æ˜¯éœ€è¦ IE5.5+æ‰æ”¯æŒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">     <span class="keyword">var</span> num=<span class="number">22.127456</span>;</span><br><span class="line">     alert( num.toFixed(<span class="number">2</span>));</span><br><span class="line">     &lt;script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰æ»šåŠ¨æ¡</title>
      <link href="2017/04/01/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%9A%E5%8A%A8%E6%9D%A1/"/>
      <url>2017/04/01/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%9A%E5%8A%A8%E6%9D%A1/</url>
      
        <content type="html"><![CDATA[<p>å›°æ‰°çš„é—®é¢˜ä¹‹ä¸€ clientHeightå’ŒoffsetHeightçš„å€¼ç”±ä»€ä¹ˆå†³å®šï¼Ÿ<br>å‡å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„DIVï¼Œä¸»è¦æ˜¾ç¤ºçš„æ–‡å­—ä¸ºâ€This is the main body of DIVâ€<br><a id="more"></a><br>é¦–å…ˆäº†è§£ä¸€ä¸‹<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ</p><ul><li style="list-style: none"><input type="checkbox" checked></input> <strong>clientHeightçš„å€¼ç”±DIVå†…å®¹çš„å®é™…é«˜åº¦å’ŒCSSä¸­çš„paddingå€¼å†³å®šï¼Œ</strong></li><li style="list-style: none"><input type="checkbox" checked></input> <strong>offsetHeightçš„å€¼ç”±DIVå†…å®¹çš„å®é™…é«˜åº¦ï¼ŒCSSä¸­çš„paddingå€¼ï¼Œ</strong></li><li style="list-style: none"><input type="checkbox" checked></input> <strong>scrollbarçš„é«˜åº¦å’ŒDIVçš„borderå€¼å†³å®šï¼›è‡³äºCSSä¸­çš„marginå€¼ï¼Œåˆ™ä¸ä¼šå½±å“clientHeightå’ŒoffsetHeightçš„å€¼ã€‚</strong></li></ul><p>æ•ˆæœå›¾ï¼š<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/180807/j5i2697fF0.gif"                      alt="mark"                ></p><p>åˆ†æå›¾<br><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/180807/91KliGHjij.jpg"                      alt="mark"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://book.52react.cn/book/180807/C3h985gm7d.gif"                      alt="mark"                ></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    *&#123;</span><br><span class="line">        <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">        <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">body</span>&#123;</span><br><span class="line">        <span class="attribute">overflow</span>:hidden;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#box</span>&#123;</span><br><span class="line">        <span class="attribute">float</span><span class="selector-pseudo">:right</span>;</span><br><span class="line">        <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">        <span class="attribute">right</span>:<span class="number">0px</span>;</span><br><span class="line">        <span class="attribute">width</span>:<span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">        <span class="attribute">background</span>:<span class="number">#ccc</span>;</span><br><span class="line">        <span class="attribute">position</span>:relative;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#drag</span>&#123;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">        <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>:<span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">background</span>:green;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#content</span>&#123;</span><br><span class="line">        <span class="attribute">position</span>:absolute;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#text</span>&#123;</span><br><span class="line">        <span class="attribute">position</span>:absolute;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ»šåŠ¨æ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;drag&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--  //å†…å®¹ä¸»å®¹å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å†…å®¹å®¹å™¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background:#ccc;width: 120px; &quot;</span>&gt;</span></span><br><span class="line">Although many people talk about the super performance of quantum computing, such as one second to complete the current supercomputer computing tasks for several years, but so far did not create a true sense of the quantum computer, one of the very important reason is that, The state of particles used in quantum computation is not stable, and any electromagnetic or physical interference can easily disrupt its work. The state of the Mayola fermion is very stable, which makes it a perfect choice for making quantum computers. Six months ago in the laboratory of Shanghai Jiaotong University, Jia Jinfeng successfully captured it.</span><br><span class="line">Speaking of the scene, Jia Jinfeng said: &quot;In fact, I started to hear the Mayolana fermions, I think this thing may not be done 20 years out.</span><br><span class="line">Using a special material preparation method, Jia Jinfeng&#x27;s research team has grown topological insulators on the superconductors with thickness of 5 nanometers. The topological superconductor materials are prepared and finally the Mayolana fermions are found at the interface of the topological superconductors. The mysterious particles were captured 80 years, but also let Jia Jinfeng more firm with its confidence in the manufacture of quantum computers.</span><br><span class="line">Speaking of the future of the plan, Jia Jinfeng said: &quot;I hope to within a few years to do the topological quantum bit!&quot; (Before) the world has not, so if we cut into this from the point, we are the same with the world The starting line, for our country, this is able to catch up with the footsteps of quantum computing, a starting point.</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="jséƒ¨åˆ†"><a href="#jséƒ¨åˆ†" class="headerlink" title="jséƒ¨åˆ†"></a>jséƒ¨åˆ†</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oBox=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> oDrag=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;drag&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> content=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;content&#x27;</span>);<span class="comment">//å†…å®¹ä¸»å®¹å™¨</span></span><br><span class="line">    <span class="keyword">var</span> oText = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> conHeight=content.clientHeight  </span><br><span class="line">    <span class="keyword">var</span> textHeight = oText.clientHeight</span><br><span class="line">    oDrag.onmousedown=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//é˜»æ­¢é»˜è®¤äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">        <span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            e.returnValue=<span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">         <span class="comment">//e.clientYé¼ æ ‡å½“å‰åæ ‡</span></span><br><span class="line">        <span class="keyword">var</span> downY=e.clientY-oDrag.offsetTop;</span><br><span class="line">        <span class="comment">//æ»‘å—æ»šåŠ¨æœ€å¤§è·ç¦»</span></span><br><span class="line">        <span class="keyword">var</span> maxTop = oBox.clientHeight-oDrag.clientHeight</span><br><span class="line">        <span class="built_in">document</span>.onmousemove=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">            <span class="keyword">var</span> top=e.clientY-downY;</span><br><span class="line">            <span class="keyword">if</span> (top&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">                top=<span class="number">0</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (top&gt;=maxTop) &#123;</span><br><span class="line">                top=maxTop;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">var</span> scale=top/maxTop;</span><br><span class="line">            <span class="keyword">var</span> contentY=scale*(conHeight-textHeight);</span><br><span class="line">            oDrag.style.top=top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            oText.style.top=contentY+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">document</span>.onmouseup=<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.onmousemove=<span class="built_in">document</span>.onmousemove=<span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> str=<span class="built_in">window</span>.navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="comment">//ç«ç‹æµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">if</span> (str.indexOf(<span class="string">&#x27;firefox&#x27;</span>)!=-<span class="number">1</span>)&#123;</span><br><span class="line">         <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMMouseScroll&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">            e.preventDefault();<span class="comment">//é˜»æ­¢çª—å£é»˜è®¤çš„æ»šåŠ¨äº‹ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> (e.detail&lt;<span class="number">0</span>) &#123;    <span class="comment">//å‘ä¸Šæ»šåŠ¨    divå‘ä¸‹æ»šåŠ¨</span></span><br><span class="line">                <span class="keyword">var</span> scrollHei=oText.offsetTop+<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(textHeight-conHeight)) &#123;</span><br><span class="line">                    scrollHei=-(textHeight-conHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(textHeight-conHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                oText.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e.detail&gt;<span class="number">0</span>) &#123;   <span class="comment">//å‘ä¸‹æ»šåŠ¨    divå‘ä¸Šæ»šåŠ¨</span></span><br><span class="line">                <span class="keyword">var</span> scrollHei=oText.offsetTop-<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(textHeight-conHeight)) &#123;</span><br><span class="line">                    scrollHei=-(textHeight-conHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(textHeight-content.clientHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                oText.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;<span class="comment">//éç«ç‹æµè§ˆå™¨</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;éç«ç‹æµè§ˆå™¨&quot;</span>)</span><br><span class="line">        <span class="built_in">document</span>.onmousewheel=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">            <span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">                e.preventDefault();</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                e.returnValue=<span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (e.wheelDelta&gt;<span class="number">0</span>) &#123;  <span class="comment">//å‘ä¸Šæ»šåŠ¨    æ­¤æ—¶divå‘ä¸‹ç§»åŠ¨</span></span><br><span class="line">                <span class="keyword">var</span> scrollHei=oText.offsetTop+<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(textHeight-conHeight)) &#123;</span><br><span class="line">                    scrollHei=-(textHeight-conHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(textHeight-conHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                oText.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (e.wheelDelta&lt;<span class="number">0</span>) &#123;  <span class="comment">//å‘ä¸‹</span></span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;ä¸‹&quot;</span>)</span><br><span class="line">                <span class="keyword">var</span> scrollHei=oText.offsetTop-<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(textHeight-conHeight)) &#123;</span><br><span class="line">                    scrollHei=-(textHeight-conHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(textHeight-conHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                oText.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…¨å±æ¨¡å¼ä¸‹"><a href="#å…¨å±æ¨¡å¼ä¸‹" class="headerlink" title="å…¨å±æ¨¡å¼ä¸‹"></a>å…¨å±æ¨¡å¼ä¸‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oBox=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> oDrag=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;drag&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> content=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;content&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> viewHeight=<span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    <span class="keyword">var</span> conHeight=content.clientHeight</span><br><span class="line">    oBox.style.height=viewHeight+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    oDrag.style.height=viewHeight/conHeight*viewHeight+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        viewHeight=<span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">        oBox.style.height=viewHeight+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        oDrag.style.height=viewHeight/conHeight*viewHeight+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        oDrag.style.top=-content.offsetTop/(content.clientHeight-viewHeight)*(oBox.clientHeight-oDrag.clientHeight)+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    oDrag.onmousedown=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//é˜»æ­¢é»˜è®¤äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">        <span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            e.returnValue=<span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">         <span class="comment">//e.clientYé¼ æ ‡å½“å‰åæ ‡</span></span><br><span class="line">        <span class="keyword">var</span> downY=e.clientY-oDrag.offsetTop;</span><br><span class="line">       </span><br><span class="line">        <span class="built_in">document</span>.onmousemove=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">            <span class="keyword">var</span> top=e.clientY-downY;</span><br><span class="line">            <span class="keyword">if</span> (top&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">                top=<span class="number">0</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (top&gt;=oBox.clientHeight-oDrag.clientHeight) &#123;</span><br><span class="line">                top=oBox.clientHeight-oDrag.clientHeight;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">var</span> scale=top/(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">            <span class="keyword">var</span> contentY=scale*(content.clientHeight-viewHeight);</span><br><span class="line">            oDrag.style.top=top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            content.style.top=-contentY+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">document</span>.onmouseup=<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.onmousemove=<span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> str=<span class="built_in">window</span>.navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="comment">//ç«ç‹æµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">if</span> (str.indexOf(<span class="string">&#x27;firefox&#x27;</span>)!=-<span class="number">1</span>)&#123;</span><br><span class="line">         <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMMouseScroll&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">            e.preventDefault();<span class="comment">//é˜»æ­¢çª—å£é»˜è®¤çš„æ»šåŠ¨äº‹ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> (e.detail&lt;<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> scrollHei=content.offsetTop+<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123;</span><br><span class="line">                    scrollHei=-(content.clientHeight-viewHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(content.clientHeight-viewHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                content.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e.detail&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> scrollHei=content.offsetTop-<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123;</span><br><span class="line">                    scrollHei=-(content.clientHeight-viewHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(content.clientHeight-viewHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                content.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;<span class="comment">//éç«ç‹æµè§ˆå™¨</span></span><br><span class="line">        <span class="built_in">document</span>.onmousewheel=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> e=ev||<span class="built_in">window</span>.event;</span><br><span class="line">            <span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">                e.preventDefault();</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                e.returnValue=<span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (e.wheelDelta&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> scrollHei=content.offsetTop+<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123;</span><br><span class="line">                    scrollHei=-(content.clientHeight-viewHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(content.clientHeight-viewHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                content.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (e.wheelDelta&lt;<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> scrollHei=content.offsetTop-<span class="number">25</span>;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">                    scrollHei=<span class="number">0</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123;</span><br><span class="line">                    scrollHei=-(content.clientHeight-viewHeight);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> scale=scrollHei/(content.clientHeight-viewHeight);</span><br><span class="line">                <span class="keyword">var</span> top=scale*(oBox.clientHeight-oDrag.clientHeight);</span><br><span class="line">                content.style.top=scrollHei+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                oDrag.style.top=-top+<span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹åˆæ¢ï¼ˆä¸€ï¼‰--- å°è£…</title>
      <link href="2016/06/08/Javascript%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%88%9D%E6%8E%A2%EF%BC%88%E4%B8%80%EF%BC%89---%20%E5%B0%81%E8%A3%85/"/>
      <url>2016/06/08/Javascript%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%88%9D%E6%8E%A2%EF%BC%88%E4%B8%80%EF%BC%89---%20%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>Javascriptæ˜¯ä¸€ç§åŸºäºå¯¹è±¡ï¼ˆobject-basedï¼‰çš„è¯­è¨€ï¼Œä½ é‡åˆ°çš„æ‰€æœ‰ä¸œè¥¿å‡ ä¹éƒ½æ˜¯å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå®ƒåˆä¸æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰è¯­è¨€ï¼Œå› ä¸ºå®ƒçš„è¯­æ³•ä¸­æ²¡æœ‰classï¼ˆç±»ï¼‰ã€‚<br><a id="more"></a></p><h3 id="ä¸€ã€-ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼"><a href="#ä¸€ã€-ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼" class="headerlink" title="ä¸€ã€ ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼"></a>ä¸€ã€ ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼</h3><p>å‡å®šæˆ‘ä»¬æŠŠçŒ«çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰â€åå­—â€å’Œâ€é¢œè‰²â€ä¸¤ä¸ªå±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Cat = &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€name : <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€color : <span class="string">&#x27;&#x27;</span></span><br><span class="line">ã€€ã€€&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿™ä¸ªåŸå‹å¯¹è±¡çš„è§„æ ¼ï¼ˆschemaï¼‰ï¼Œç”Ÿæˆä¸¤ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cat1 = &#123;&#125;; <span class="comment">// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span></span><br><span class="line">cat1.name = <span class="string">&quot;å¤§æ¯›&quot;</span>; <span class="comment">// æŒ‰ç…§åŸå‹å¯¹è±¡çš„å±æ€§èµ‹å€¼</span></span><br><span class="line">cat1.color = <span class="string">&quot;é»„è‰²&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> cat2 = &#123;&#125;;</span><br><span class="line">cat2.name = <span class="string">&quot;äºŒæ¯›&quot;</span>;</span><br><span class="line">cat2.color = <span class="string">&quot;é»‘è‰²&quot;</span>;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œè¿™å°±æ˜¯æœ€ç®€å•çš„å°è£…äº†ï¼ŒæŠŠä¸¤ä¸ªå±æ€§å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„å†™æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯å¦‚æœå¤šç”Ÿæˆå‡ ä¸ªå®ä¾‹ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ï¼›äºŒæ˜¯å®ä¾‹ä¸åŸå‹ä¹‹é—´ï¼Œæ²¡æœ‰ä»»ä½•åŠæ³•ï¼Œå¯ä»¥çœ‹å‡ºæœ‰ä»€ä¹ˆè”ç³»ã€‚</p><h3 id="äºŒã€-åŸå§‹æ¨¡å¼çš„æ”¹è¿›"><a href="#äºŒã€-åŸå§‹æ¨¡å¼çš„æ”¹è¿›" class="headerlink" title="äºŒã€ åŸå§‹æ¨¡å¼çš„æ”¹è¿›"></a>äºŒã€ åŸå§‹æ¨¡å¼çš„æ”¹è¿›</h3><p>æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,color</span>) </span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">return</span> &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€name:name,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€color:color</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œå°±ç­‰äºæ˜¯åœ¨è°ƒç”¨å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cat1 = Cat(<span class="string">&quot;å¤§æ¯›&quot;</span>,<span class="string">&quot;é»„è‰²&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> cat2 = Cat(<span class="string">&quot;äºŒæ¯›&quot;</span>,<span class="string">&quot;é»‘è‰²&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•çš„é—®é¢˜ä¾ç„¶æ˜¯ï¼Œcat1å’Œcat2ä¹‹é—´æ²¡æœ‰å†…åœ¨çš„è”ç³»ï¼Œä¸èƒ½åæ˜ å‡ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡çš„å®ä¾‹ã€‚</p><h3 id="ä¸‰ã€-æ„é€ å‡½æ•°æ¨¡å¼"><a href="#ä¸‰ã€-æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="ä¸‰ã€ æ„é€ å‡½æ•°æ¨¡å¼"></a>ä¸‰ã€ æ„é€ å‡½æ•°æ¨¡å¼</h3><p>ä¸ºäº†è§£å†³ä»åŸå‹å¯¹è±¡ç”Ÿæˆå®ä¾‹çš„é—®é¢˜ï¼ŒJavascriptæä¾›äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰æ¨¡å¼ã€‚</p><p>æ‰€è°“â€æ„é€ å‡½æ•°â€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨ä½¿ç”¨äº†thiså˜é‡ã€‚å¯¹æ„é€ å‡½æ•°ä½¿ç”¨newè¿ç®—ç¬¦ï¼Œå°±èƒ½ç”Ÿæˆå®ä¾‹ï¼Œå¹¶ä¸”thiså˜é‡ä¼šç»‘å®šåœ¨å®ä¾‹å¯¹è±¡ä¸Šã€‚</p><p>æ¯”å¦‚ï¼ŒçŒ«çš„åŸå‹å¯¹è±¡ç°åœ¨å¯ä»¥è¿™æ ·å†™ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,color</span>)</span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.name=name;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.color=color;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ç”Ÿæˆå®ä¾‹å¯¹è±¡äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">&quot;å¤§æ¯›&quot;</span>,<span class="string">&quot;é»„è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> cat2 = <span class="keyword">new</span> Cat(<span class="string">&quot;äºŒæ¯›&quot;</span>,<span class="string">&quot;é»‘è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€alert(cat1.name); <span class="comment">// å¤§æ¯›</span></span><br><span class="line">ã€€ã€€alert(cat1.color); <span class="comment">// é»„è‰²</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ—¶cat1å’Œcat2ä¼šè‡ªåŠ¨å«æœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼ŒæŒ‡å‘å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(cat1.constructor == Cat); <span class="comment">//true</span></span><br><span class="line">alert(cat2.constructor == Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>Javascriptè¿˜æä¾›äº†ä¸€ä¸ª<code>instanceof</code>è¿ç®—ç¬¦ï¼ŒéªŒè¯åŸå‹å¯¹è±¡ä¸å®ä¾‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(cat1 <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br><span class="line">alert(cat2 <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>å››ã€æ„é€ å‡½æ•°æ¨¡å¼çš„é—®é¢˜</p><p>æ„é€ å‡½æ•°æ–¹æ³•å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªæµªè´¹å†…å­˜çš„é—®é¢˜ã€‚</p><p>è¯·çœ‹ï¼Œæˆ‘ä»¬ç°åœ¨ä¸ºCatå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸å˜çš„å±æ€§typeï¼ˆç§ç±»ï¼‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ–¹æ³•eatï¼ˆåƒï¼‰ã€‚é‚£ä¹ˆï¼ŒåŸå‹å¯¹è±¡Catå°±å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,color</span>)</span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.name = name;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.color = color;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.type = <span class="string">&quot;çŒ«ç§‘åŠ¨ç‰©&quot;</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">&quot;åƒè€é¼ &quot;</span>);&#125;;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯é‡‡ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œç”Ÿæˆå®ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">&quot;å¤§æ¯›&quot;</span>,<span class="string">&quot;é»„è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> cat2 = <span class="keyword">new</span> Cat (<span class="string">&quot;äºŒæ¯›&quot;</span>,<span class="string">&quot;é»‘è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€alert(cat1.type); <span class="comment">// çŒ«ç§‘åŠ¨ç‰©</span></span><br><span class="line">ã€€ã€€cat1.eat(); <span class="comment">// åƒè€é¼ </span></span><br></pre></td></tr></table></figure><p>è¡¨é¢ä¸Šå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™æ ·åšï¼Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ã€‚é‚£å°±æ˜¯å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œtypeå±æ€§å’Œeat()æ–¹æ³•éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæ¯ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œéƒ½å¿…é¡»ä¸ºé‡å¤çš„å†…å®¹ï¼Œå¤šå ç”¨ä¸€äº›å†…å­˜ã€‚è¿™æ ·æ—¢ä¸ç¯ä¿ï¼Œä¹Ÿç¼ºä¹æ•ˆç‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(cat1.eat == cat2.eat); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>èƒ½ä¸èƒ½è®©typeå±æ€§å’Œeat()æ–¹æ³•åœ¨å†…å­˜ä¸­åªç”Ÿæˆä¸€æ¬¡ï¼Œç„¶åæ‰€æœ‰å®ä¾‹éƒ½æŒ‡å‘é‚£ä¸ªå†…å­˜åœ°å€å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ã€‚</p><h3 id="äº”ã€-Prototypeæ¨¡å¼"><a href="#äº”ã€-Prototypeæ¨¡å¼" class="headerlink" title="äº”ã€ Prototypeæ¨¡å¼"></a>äº”ã€ Prototypeæ¨¡å¼</h3><p>Javascriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚<br>è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé‚£äº›ä¸å˜çš„å±æ€§å’Œæ–¹æ³•ï¼Œç›´æ¥å®šä¹‰åœ¨prototypeå¯¹è±¡ä¸Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name,color</span>)</span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.name = name;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">this</span>.color = color;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€Cat.prototype.type = <span class="string">&quot;çŒ«ç§‘åŠ¨ç‰©&quot;</span>;</span><br><span class="line">ã€€ã€€Cat.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">&quot;åƒè€é¼ &quot;</span>)&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç”Ÿæˆå®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ã€€  <span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">&quot;å¤§æ¯›&quot;</span>,<span class="string">&quot;é»„è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> cat2 = <span class="keyword">new</span> Cat(<span class="string">&quot;äºŒæ¯›&quot;</span>,<span class="string">&quot;é»‘è‰²&quot;</span>);</span><br><span class="line">ã€€ã€€alert(cat1.type); <span class="comment">// çŒ«ç§‘åŠ¨ç‰©</span></span><br><span class="line">ã€€ã€€cat1.eat(); <span class="comment">// åƒè€é¼ </span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶æ‰€æœ‰å®ä¾‹çš„typeå±æ€§å’Œeat()æ–¹æ³•ï¼Œå…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘prototypeå¯¹è±¡ï¼Œå› æ­¤å°±æé«˜äº†è¿è¡Œæ•ˆç‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(cat1.eat == cat2.eat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="å…­ã€-Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•"><a href="#å…­ã€-Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•" class="headerlink" title="å…­ã€ Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•"></a>å…­ã€ Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•</h3><p>ä¸ºäº†é…åˆprototypeå±æ€§ï¼ŒJavascriptå®šä¹‰äº†ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚</p><h4 id="6-1-isPrototypeOf"><a href="#6-1-isPrototypeOf" class="headerlink" title="6.1 isPrototypeOf()"></a>6.1 isPrototypeOf()</h4><p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªproptotypeå¯¹è±¡å’ŒæŸä¸ªå®ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ã€€alert(cat1.hasOwnProperty(<span class="string">&quot;name&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">ã€€ã€€alert(cat1.hasOwnProperty(<span class="string">&quot;type&quot;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><br>6.3 inè¿ç®—ç¬¦</p><p>inè¿ç®—ç¬¦å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªå®ä¾‹æ˜¯å¦å«æœ‰æŸä¸ªå±æ€§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æœ¬åœ°å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">&quot;name&quot;</span> <span class="keyword">in</span> cat1); <span class="comment">// true</span></span><br><span class="line">ã€€ã€€alert(<span class="string">&quot;type&quot;</span> <span class="keyword">in</span> cat1); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>inè¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨æ¥éå†æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> cat1) </span><br><span class="line">&#123; alert(<span class="string">&quot;cat1[&quot;</span>+prop+<span class="string">&quot;]=&quot;</span>+cat1[prop]); &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="http://pp.52react.cn/image20180720105956.png"                      alt="image"                ></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ä¹‹è·¯</title>
      <link href="2016/06/04/%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/"/>
      <url>2016/06/04/%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç§ä¸€æ£µæ ‘æœ€å¥½çš„å¹´é¾„æ˜¯åå¹´å‰ï¼Œè€Œåæ˜¯ç°åœ¨ã€‚</p></blockquote><a id="more"></a><h1 id="å¯¹è‡ªå·±ç‹ ä¸€ç‚¹ï¼Œå¼€å§‹å†™ä½œå§"><a href="#å¯¹è‡ªå·±ç‹ ä¸€ç‚¹ï¼Œå¼€å§‹å†™ä½œå§" class="headerlink" title="å¯¹è‡ªå·±ç‹ ä¸€ç‚¹ï¼Œå¼€å§‹å†™ä½œå§"></a>å¯¹è‡ªå·±ç‹ ä¸€ç‚¹ï¼Œå¼€å§‹å†™ä½œå§</h1><p>æˆ‘æ—¶å¸¸ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰:è‡ªå·±å¿ƒé‡Œè§‰å¾—å¯¹ä¸€ä¸ªæŠ€æœ¯ç‚¹å·²ç»æŒæ¡äº†ï¼Œä½†æ˜¯å½“æˆ‘è¯•å›¾ç»™åˆ«<br>äººè®²è¿°çš„æ—¶å€™ï¼Œå‘ç°å¹¶ä¸èƒ½è½»æ¾è‡ªå¦‚ã€æ·±å…¥æµ…å‡ºåœ°è®²å‡ºæ¥ã€‚è¿™å°±è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ :è‡ªè®¤ä¸ºæŒæ¡äº†ï¼Œå…¶å®å¹¶æ²¡æœ‰çœŸæ­£æŒæ¡ï¼Œå¤§è„‘åªæ˜¯å¯¹è¿™ä¸ªæŠ€æœ¯ç‚¹å»ºç«‹äº†ä¸€ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼Œåœ¨ä¸€äº›ç»†èŠ‚å¤„åšäº†æƒ³å½“ç„¶çš„å‡è®¾ï¼Œç­‰åˆ°ä½ ç”¨è¯­è¨€å†æ¥è¡¨è¾¾çš„æ—¶å€™å°±ä¼šå‘ç°ï¼ŒåŸæ¥è¿™ä¸ªå‡è®¾å¹¶ä¸å®Œå…¨æˆç«‹æ˜¯æœ‰é—®é¢˜çš„ã€‚<br>ä¼°è®¡å¤§å®¶éƒ½æœ‰è¿™æ ·çš„ç»éªŒ:å¦‚æœä½ èƒ½æŠŠä¸€é—¨æŠ€æœ¯é€šä¿—æ˜“æ‡‚åœ°ç»™åˆ«äººè®²æ˜ç™½ï¼Œé‚£å°±è¯´æ˜<br>ä½ å·²ç»æŒæ¡äº†ã€‚è¿™ç§â€œè½¬æ•™åˆ«äºº( <code>Teach others</code> )â€çš„åŠæ³•å±äºä¸»åŠ¨å­¦ä¹ ï¼Œæ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚ä½†<br>æ˜¯åœ¨å·¥ä½œå’Œç”Ÿæ´»å½“ä¸­ï¼Œä½ æ˜¯å¾ˆå°‘æœ‰æœºä¼šå»ç»™åˆ«äººè®²æˆçš„ã€‚é‚£æ€ä¹ˆåŠ?é‚£å°±é€€è€Œæ±‚å…¶æ¬¡å§ï¼ŒæŠŠè‡ªå·±çš„ç†è§£å†™å‡ºæ¥ã€‚å½“ç„¶ä¸æ˜¯æ³›æ³›åœ°è®°æµæ°´è´¦ï¼Œæˆ–è€…æŠŠå‡ ä¸ªå­¤ç«‹çš„ç‚¹ç½—åˆ—åœ¨é‚£é‡Œï¼Œè€Œæ˜¯è¦æŠŠæ€è·¯å˜æ¸…æ¥šï¼Œå°¤å…¶è¦å†™å‡ºä¸ºä»€ä¹ˆè¦æœ‰è¿™é—¨æŠ€æœ¯ã€è¿™é—¨æŠ€æœ¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åæ‰æ˜¯è¿™é—¨æŠ€æœ¯æ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚<br>å½“ä½ é€¼ç€è‡ªå·±å»å›ç­”è¿™äº›é—®é¢˜çš„æ—¶å€™ï¼Œå¾ˆå¿«å°±ä¼šå‘ç°ï¼Œè‡ªå·±çš„ç†è§£è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦æŸ¥<br>æ‰¾æ›´å¤šçš„èµ„æ–™ã€‚</p><h1 id="å¦‚ä½•å­¦ä¹ ï¼Ÿ"><a href="#å¦‚ä½•å­¦ä¹ ï¼Ÿ" class="headerlink" title="å¦‚ä½•å­¦ä¹ ï¼Ÿ"></a>å¦‚ä½•å­¦ä¹ ï¼Ÿ</h1><p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ æ¥è§¦åˆ°ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹: <code>JavaåŠ¨æ€ä»£ç†</code>ã€‚<br>ä½ ä¹Ÿçœ‹äº†ä¹¦æˆ–è§†é¢‘ä¸­çš„ä»£ç ï¼ŒçŸ¥é“äº†è¿™ä¸ªæŠ€æœ¯ç‚¹æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Œæ¥ä¸‹æ¥æƒ³è¦å†™ä¸€ç¯‡æ–‡ç« ï¼Œ<br>é¦–å…ˆè¦åŠªåŠ›é˜æ˜çš„é—®é¢˜å°±æ˜¯â€œ<strong>ä¸ºä»€ä¹ˆè¦ç”¨Java åŠ¨æ€ä»£ç†</strong>â€œã€‚<strong>è¿™ç©æ„å„¿åˆ°åº•è¦å¹²å—</strong>?æˆ‘å·²ç»çŸ¥é“äº†å®ƒèƒ½å¤Ÿå¯¹ä¸€ä¸ªç±»è¿›è¡Œå¢å¼ºï¼Œè¿˜æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œå¢å¼ºçš„ï¼Œä½†æ˜¯å¢å¼ºä¸€ä¸ªç±»æœ‰ä»€ä¹ˆç”¨å¤„?æˆ‘<br>å®Œå…¨å¯ä»¥æ–°å†™ä¸€ä¸ªç±»å¯¹åŸæœ‰çš„ç±»è¿›è¡Œå¢å¼ºå•Š? ä¸ºä»€ä¹ˆè¦åœ¨è¿è¡Œæ—¶è¿›è¡Œå¢å¼ºå‘¢?<br>å¦‚æœä½ é¡ºç€è¿™ä¸ªæ€è·¯æŒ–æ˜ä¸‹å»ï¼Œåˆ™ä¼šåœ¨é€šé“çš„å°½å¤´æ‰¾åˆ°ä¸€ä¸ªå®è´: <code>AOP</code>ã€‚</p><p>å…·ä½“åˆ°æŠ€æœ¯å±‚é¢ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯<strong>ä¸ºä»€ä¹ˆJavaåŠ¨æ€ä»£ç†åªèƒ½å¯¹interface è¿›è¡Œæ“ä½œ</strong>ï¼Œ<br>è€Œä¸èƒ½å¯¹classè¿›è¡Œæ“ä½œ?è¿™ä¸ªé—®é¢˜å¦‚æœä¹Ÿæ·±æŒ–ä¸‹å»ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å¦ä¸€ä¸€ä¸ªå®è´:åŠ¨æ€å­—èŠ‚<br>ç çš„ç”Ÿæˆã€‚</p><p>ç»§ç»­æ·±æŒ–å°±èƒ½çœ‹åˆ°ASMã€CGLibè¿™æ ·çš„ä¸œè¥¿ï¼Œ<strong>çœ‹åˆ°å®ƒä»¬æ€ä¹ˆåœ¨å†…å­˜ä¸­æ“ä½œ.classæ–‡ä»¶</strong><br>çš„å­—èŠ‚ç ã€‚è‡³äºå­—èŠ‚ç çš„æ ¼å¼æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œåªå¥½å»çœ‹çœ‹Javaè™šæ‹Ÿæœºäº†ã€‚<br>åˆ°äº†æœ€åï¼Œä½ ä¹Ÿè®¸ä¼šä½“ä¼šåˆ°ï¼ŒåŸæ¥Javaæ˜¯ä¸€é—¨é™æ€è¯­è¨€ï¼Œåœ¨è¿è¡Œæ—¶ä¸èƒ½å¯¹ç°æœ‰çš„æ–¹æ³•<br>é€»è¾‘è¿›è¡Œä¿®æ”¹ï¼Œ ä¸èƒ½æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥å¿…é¡»ç”¨åˆ«çš„æ‰‹æ®µï¼Œå¦‚ASMã€ åŠ¨æ€ä»£ç†ç­‰åˆ›å»ºä¸€ ä¸ªæ–°ç±»<br>æ¥åšä¸€ç‚¹â€œé¢å¤–â€çš„äº‹æƒ…ã€‚</p><p>æœ‰äººå¯èƒ½è¦é—®äº†:æˆ‘ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ€è·¯å»å­¦ä¹ ï¼Œä¸ºä»€ä¹ˆè¦å†™ä¸‹æ¥å‘¢?åŸå› å¾ˆç®€å•ï¼Œ<br>ä¸å†™å‡ºæ¥ï¼Œå¾ˆå®¹æ˜“æ”¾å¼ƒæ·±åº¦æ€è€ƒã€‚ä½ ä¼šè§‰å¾—ï¼Œæˆ‘å·²ç»çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹å„¿äº†ä¸€-å…¶å® äº›å…³é”®<br>çš„ç»†èŠ‚è¢«å¤§è„‘ç»™å¿½ç•¥äº†ã€‚</p><blockquote><p>æˆ‘ä»¬å·²ç»è¿›å…¥äº†ä¸€ä¸ªç¢ç‰‡åŒ–çš„æ—¶ä»£ï¼Œæˆ‘ä»¬çš„å¤§è„‘å·²ç»å…»æˆäº†ç¢ç‰‡åŒ–çš„ä¹ æƒ¯ï¼Œ-å¤©ä¸çœ‹<br>  ç¢ç‰‡åŒ–çš„ä¿¡æ¯å°±è§‰å¾—ä¸èˆ’æœï¼Œè¿™æ ·ä¸‹å»ä¼šæ…¢æ…¢åœ°ä¸§å¤±æ·±åº¦æ€è€ƒçš„èƒ½åŠ›ã€‚</p></blockquote><p>å†™ä½œä¼šé€¼ç€ä½ å»æ€è€ƒï¼Œæ¢³ç†çŸ¥è¯†ä½“ç³»ï¼Œé˜²æ­¢è‡ªå·±è¢«ç¢ç‰‡æ‰€å¡«æ»¡ã€‚<br>å…¶å®å¾ˆå¤šäººéƒ½çŸ¥é“å†™ä½œæ˜¯ä¸€ä»¶å¾ˆå¥½çš„äº‹æƒ…ï¼Œå°±æ˜¯çŠ¯æ‡’ï¼Œæ‰§è¡Œä¸ä¸‹å»ã€‚è¿˜æ˜¯è¡ŒåŠ¨èµ·æ¥å§!<br>é€¼è‡ªå·±ä¸€æŠŠï¼Œå¯¹è‡ªå·±ç‹ ä¸€-ç‚¹!æœ‰è‡ªåˆ¶åŠ›çš„äººã€èƒ½å¤ŸåšæŒçš„äººæ‰æ›´æœ‰å¯èƒ½æˆåŠŸ!</p><h2 id="å‚è€ƒå¼•ç”¨ã€Šç å†œç¿»èº«ã€‹ç¬¬6ç« æœ€å2èŠ‚"><a href="#å‚è€ƒå¼•ç”¨ã€Šç å†œç¿»èº«ã€‹ç¬¬6ç« æœ€å2èŠ‚" class="headerlink" title="å‚è€ƒå¼•ç”¨ã€Šç å†œç¿»èº«ã€‹ç¬¬6ç« æœ€å2èŠ‚"></a>å‚è€ƒå¼•ç”¨<code>ã€Šç å†œç¿»èº«ã€‹</code>ç¬¬6ç« æœ€å2èŠ‚</h2>]]></content>
      
      
      <categories>
          
          <category> å¿ƒè·¯å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢</title>
      <link href="2009/08/08/%5B%E8%BD%AC%E8%BD%BD%5D%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E5%BA%94%E8%AF%A5%EF%BC%88%E4%BB%8E%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B%E5%B0%B1%EF%BC%89%E5%86%99%E5%8D%9A%E5%AE%A2/"/>
      <url>2009/08/08/%5B%E8%BD%AC%E8%BD%BD%5D%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E5%BA%94%E8%AF%A5%EF%BC%88%E4%BB%8E%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B%E5%B0%B1%EF%BC%89%E5%86%99%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h3 id="ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢"><a href="#ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢" class="headerlink" title="ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢"></a>ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢</h3><p>ç”¨ä¸€å¥è¯æ¥è¯´å°±æ˜¯ï¼Œ<strong>å†™ä¸€ä¸ªåšå®¢æœ‰å¾ˆå¤šå¥½å¤„ï¼Œå´æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„åå¤„</strong>ã€‚ï¼ˆé˜¿çµé¡¿çš„æƒ…å†µå±äºä¾‹å¤–ï¼Œè€Œéå¸¸æ€ï¼Œå°±åƒä¸èƒ½æ‹¿æŠ½çƒŸæ´»åˆ°ä¸€ç™¾å²çš„è‹±å›½è€å¤ªå¤ªçš„ä¸ªä¾‹æ¥åé©³æŠ½çƒŸå¯¹å¥åº·çš„æå¤§æŸä¼¤ä¸€æ ·)</p><a id="more"></a><p>è®©æˆ‘è¯´å¾—æ›´æ˜ç¡®ä¸€ç‚¹ï¼š<strong>ç”¨åšå®¢çš„å½¢å¼æ¥è®°å½•ä¸‹ä½ æœ‰ä»·å€¼çš„æ€è€ƒï¼Œä¼šå¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œå´æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„åå¤„</strong>ã€‚Noteï¼šç¢ç¢å¿µä¸ç®—æ€è€ƒã€å¿ƒæƒ…çè®°ä¸ç®—æ€è€ƒã€å” å” å¨å¨ä¹Ÿä¸ç®—æ€è€ƒã€æ²¡è¯æ‰¾è¯ä¹Ÿä¸ç®—æ€è€ƒï¼Œè¯·ä»¥æ­¤ç±»æ¨ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºå†™ä¸€ä¸ªé•¿æœŸçš„ä»·å€¼åšå®¢çš„æœ€å¤§çš„å‡ ç‚¹å¥½å¤„ï¼š</p><ol><li>èƒ½å¤Ÿäº¤åˆ°å¾ˆå¤šå¿—åŒé“åˆçš„æœ‹å‹ã€‚æˆ‘è‡ªå·±æ—¢å†™åšå®¢ï¼Œä¹Ÿè¯»åˆ«äººçš„åšå®¢ï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œå¯¹äºç”Ÿæ´»ä¸­çš„ç»å¤§å¤šæ•°äººæ¥è¯´ï¼Œæ‹“å®½æœ‹å‹åœˆå­çš„é€”å¾„å‡ ä¹åªæœ‰ä¸€ä¸ªï¼Œé€šè¿‡ç½‘ç»œï¼Œè€Œå¦‚ä½•åœ¨ç½‘ç»œä¸­å¯»æ‰¾åˆ°æ°”å‘³ç›¸æŠ•çš„æœ‹å‹ï¼Œå¦‚ä½•åˆ¤æ–­åˆ«äººå’Œè‡ªå·±æ˜¯å¦æœ‰å…±åŒè¯­è¨€ï¼Ÿæ˜¾ç„¶ï¼Œé€šè¿‡å¤©å¤©åœ¨ SNS ä¸Šç¢ç¢å¿µçš„é‚£äº›æ—¥è®°æ˜¯éš¾ä»¥åšåˆ°çš„ã€‚æˆ‘ä½©æœçš„ä¸€äº›æœ‹å‹å‡ ä¹å…¨éƒ½æ˜¯é•¿æœŸç”¨åšå®¢è®°å½•æƒ³æ³•çš„äººï¼Œå› æ­¤ï¼Œå’Œä»–ä»¬å³ä¾¿ä¸æ‰“ç…§é¢ï¼Œä¹Ÿæ˜¯å¿ƒç…§ä¸å®£ã€‚å³ä¾¿ç´ æœªè°‹é¢ä¹Ÿèƒ½åä¸‹æ¥å°±èŠå¾—çƒ­ç«æœå¤©ã€‚</li></ol><p><strong>ä¸ºä»€ä¹ˆåšå®¢åœ¨ç»“äº¤å¿—åŒé“åˆçš„æœ‹å‹æ–¹é¢çš„æ½œåŠ›è¦è¿œèƒœäºåŸå§‹çš„äº¤è°ˆæ–¹å¼ï¼Ÿ</strong></p><p>å¾ˆç®€å•ï¼Œç¬¬ä¸€ï¼Œåšå®¢æ— åœ°åŸŸé™åˆ¶ï¼Œæ•´ä¸ªäº’è”ç½‘ä¸Šä» A åˆ° B åªæœ‰ä¸€ä¸ªç‚¹å‡»çš„è·ç¦»ï¼Œè€Œä¼ ç»Ÿçš„å»ºç«‹æœ‹å‹åœˆå­çš„æ–¹æ³•åˆ™å—åˆ°åœ°åŸŸé™åˆ¶ã€‚</p><p>ç¬¬äºŒï¼Œä¹Ÿæ˜¯æ›´é‡è¦çš„ä¸€ç‚¹ï¼Œå³å¦‚æœæŒ‰ç…§ä»¥å‰ç»“äº¤æœ‹å‹çš„æ–¹å¼ï¼Œéœ€è¦äº’ç›¸èŠå¤©ï¼Œäº¤æµè§‚ç‚¹ï¼Œç„¶åæ‰é€æ¸ç†Ÿæ‚‰èµ·æ¥ï¼Œè¿™éœ€è¦ä¸€ä¸ªè¾ƒé•¿çš„è¿‡ç¨‹ï¼Œè€Œä¸”æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå½“ä½ é‡åˆ°å¦ä¸€ä¸ªé™Œç”Ÿäººï¼Œåˆè¦æŠŠæ•´ä¸ªè¿‡ç¨‹é‡å¤ä¸€æ¬¡ï¼Œè¡¨è¾¾ä½ å·²ç»å¯¹è€å‹è¡¨è¾¾è¿‡çš„é‚£ç•ªæƒ³æ³•ã€‚å¯åšå®¢å´åšåˆ°äº†â€œä¸€æ¬¡è¡¨è¾¾ï¼Œæ— æ•°æ¬¡é˜…è¯»â€ï¼Œå½“æˆ‘çœ‹åˆ°ä¸€ä¸ªå†™äº†å¥½å‡ å¹´çš„åšå®¢ï¼Œçœ‹å®Œäº†ä¹‹åæˆ‘ä»¿ä½›å’Œè¿™ä¸ªäººäº¤è°ˆäº†å¾ˆä¹…ï¼Œç”¨ç¨‹åºå‘˜ä»¬å–œæ¬¢å¬çš„è¯æ¥è¯´å°±æ˜¯ï¼Œâ€œåšå®¢æå¤§åœ°å¢å¼ºäº†è¯è¯­çš„å¤ç”¨æ€§â€ã€‚</p><p>æˆ‘æ›¾åœ¨ CSDN ä¸Šå†™äº†è¿‘å…­å¹´çš„åšå®¢ï¼Œåœ¨ä¸€å¹´åŠå‰å»ºç«‹äº†ä¸€ä¸ª Google Groupsï¼ˆTopLanguageï¼‰ï¼Œç”±äºæˆ‘çš„åšå®¢çš„é•¿æœŸé˜…è¯»è€…éƒ½æ˜¯äº’ç›¸æœ‰å…±åŒè¯­è¨€çš„ï¼Œå› æ­¤è¿™ä¸ª Group ä¸€å¼€å§‹å°±çƒ­ç«æœå¤©ï¼Œè€Œé«˜è´¨é‡çš„æŠ€æœ¯è®¨è®ºåˆ™è¿›ä¸€æ­¥å¸å¼•äº†æ›´å¤šçš„ç‰›äººçš„å‚ä¸ï¼Œé›ªçƒæ»šèµ·æ¥ä¹‹åï¼Œå°±å¾ˆéš¾åœä¸‹æ¥äº†ï¼Œå°†è¿‘ä¸€å¹´åŠä¸‹æ¥ï¼Œä»è¿™ä¸ª Group çš„è®¨è®ºä¸­æˆ‘è·ç›Šè‰¯å¤š[1]ã€‚è€Œå¯¹äºéç¨‹åºå‘˜æœ‹å‹ï¼Œç§‘å­¦æ¾é¼ ä¼šåˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p><ol start="2"><li><p>ä¹¦å†™æ˜¯ä¸ºäº†æ›´å¥½çš„æ€è€ƒã€‚æˆ‘åœ¨ã€Šä¹¦å†™æ˜¯ä¸ºäº†æ›´å¥½çš„æ€è€ƒã€‹é‡Œé¢è¯¦ç»†æ€»ç»“äº†ä¹¦å†™çš„å¥½å¤„ï¼Œè¿™é‡Œå°±ä¸æ‹·è´ç²˜è´´äº†ã€‚æœ‰äº›æƒ³æ³•å¦‚æœä¸å†™ä¸‹æ¥ï¼Œä¹Ÿå°±å¿˜æ‰äº†ï¼Œæœ‰ä¸€ä¸ªå¹¿ä¸ºæµä¼ çš„ã€Šæ•°å­¦ç‰›äººä»¬çš„è½¶äº‹ã€‹ï¼ˆè£è€€å±äº ukimï¼‰é‡Œé¢è®²äº†å¸Œå°”ä¼¯ç‰¹çš„ä¸€ä¸ªæ•…äº‹ï¼šä¸€æ¬¡åœ¨ Hilbert çš„è®¨è®ºç­ä¸Šï¼Œä¸€ä¸ªå¹´è½»äººæŠ¥å‘Šï¼Œå…¶ä¸­ç”¨äº†ä¸€ä¸ªå¾ˆæ¼‚äº®çš„å®šç†ï¼ŒHilbert è¯´â€œè¿™çœŸæ˜¯ä¸€ä¸ªå¦™ä¸å¯è¨€ï¼ˆwunderbaschonï¼‰çš„å®šç†å‘€,æ˜¯è°å‘ç°çš„ï¼Ÿâ€é‚£ä¸ªå¹´è½»äººèŒ«ç„¶çš„ç«™äº†å¾ˆä¹…ï¼Œå¯¹ Hilbert è¯´ï¼šâ€œæ˜¯ä½ .â€¦â€¦â€ã€‚</p></li><li><p>â€œæ•™â€æ˜¯æœ€å¥½çš„â€œå­¦â€ã€‚å¦‚æœä¸€ä»¶äº‹æƒ…ä½ ä¸èƒ½è®²æ¸…æ¥šï¼Œåæœ‰å…«ä¹ä½ è¿˜æ²¡æœ‰å®Œå…¨ç†è§£ã€‚ç»å¤§å¤šæ•°äººåº”è¯¥éƒ½çŸ¥é“åœ¨ç¨‹åºå‘˜è¡Œä¸šé¢è¯•å®˜ç»å¸¸è¦æ±‚ä½ è®²è§£ä¸€ä¸ªä¸œè¥¿ç»™ä»–å¬ï¼Œä»–ä¼šè¯´ä»–ä¸æ‡‚è¿™ä¸ªä¸œè¥¿ï¼ˆä»–å¦‚æœçœŸçš„ä¸æ‡‚çš„è¯æ•ˆæœå…¶å®æ˜¯æœ€å¥½çš„ï¼‰ï¼Œè€Œä½ çš„ä»»åŠ¡åˆ™æ˜¯è¯´åˆ°è®©ä»–ç†è§£ä¸ºæ­¢ã€‚</p></li></ol><p>ä¸ºäº†è®©ä¸€ä¸ªä¸æ˜ç™½çš„äººåšåˆ°æ˜ç™½ï¼Œä½ å¿…é¡»è¦çŸ¥é“ä»æ˜ç™½åˆ°ä¸æ˜ç™½ä»–ç©¶ç«Ÿéœ€è¦æŒæ¡å“ªäº›æ¦‚å¿µï¼Œè¿™å°±è¿«ä½¿æˆ‘ä»¬å¯¹æˆ‘ä»¬å¤§è„‘ä¸­æ•´ä¸ªçš„çŸ¥è¯†ä½“ç³»æ¥ä¸ªå¯»æ ¹ç©¶åº•ï¼ŒæŠŠè—åœ¨æ°´é¢ä¹‹ä¸‹çš„é‚£äº›ä¸œè¥¿ç»Ÿç»ŸæŒ–å‡ºæ¥ï¼ŒæŠŠå¤§è„‘ä¸­çš„é‚£äº›æˆ‘ä»¬çŸ¥é“ã€ä½†ä¸çŸ¥é“è‡ªå·±çŸ¥é“çš„æ½œåœ¨æ¦‚å¿µæˆ–å‡è®¾ï¼ˆassumptionsï¼‰éƒ½æŒ–å‡ºæ¥ï¼ŒæŠŠå®ƒä»¬ä»å†…éšè®°å¿†æ‹‰æ‰¯åˆ°å¤–æ˜¾è®°å¿†ä¸­ã€‚å› ä¸ºåªæœ‰å®Œå…¨çŸ¥é“ã€å¹¶çŸ¥é“è‡ªå·±çŸ¥é“ä¸€åˆ‡æ¥é¾™å»è„‰çš„äººï¼Œæ‰èƒ½çœŸæ­£æŠŠä¸€ä»¶äº‹æƒ…è®²å¾—é€šé€šé€é€ã€‚</p><p>ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¼šæ€€ç–‘ï¼Œé‚£é™¤äº†èƒ½å¤Ÿè®²æ¸…æ¥šä¹‹å¤–ï¼Œå¼„æ¸…è‡ªå·±åˆ°åº•çŸ¥é“å“ªäº›ä¸œè¥¿è¿˜æœ‰å…¶ä»–ä»€ä¹ˆå¥½å¤„å—ï¼Ÿå¦‚æœæ²¡æœ‰å…¶ä»–å¥½å¤„ï¼Œé‚£æˆ‘åˆä½•å¿…è´¹è¿™ä¸ªåŠ²å‘¢ï¼Ÿæˆ‘åˆä¸å½“è€å¸ˆã€‚</p><p>TopLanguage ä¸Šçš„ä¸€ä½æœ‹å‹ sagasw æ›¾ç»è®²äº†è¿™æ ·ä¸€ä¸ª<strong>å°æ•…äº‹</strong>ï¼šæ®è¯´åœ¨æŸä¸ªè‘—åè½¯ä»¶å…¬å¸é‡Œï¼Œå¼€å‘ç»„çš„æ¡Œä¸Šä¼šæ”¾ç€ä¸€åªå°ç†Šï¼Œå¤§å®¶äº’ç›¸é—®é—®é¢˜ä¹‹å‰ï¼Œå…ˆå¯¹ç€å°ç†ŠæŠŠé—®é¢˜è¯´ä¸€éï¼Œçœ‹èƒ½ä¸èƒ½æŠŠé—®é¢˜æè¿°çš„æ¸…æ™°ï¼ŒåŸºæœ¬ä¸Šè¯´çš„æ¯”è¾ƒæœ‰æ¡ç†ä»¥åï¼Œç­”æ¡ˆä¹Ÿå°±éšä¹‹è€Œæ¥äº†ã€‚å½“ç„¶ï¼Œä½ ä¸ä¸€å®šè¦å¯¹å°ç†Šè¯´ï¼Œä½ å¯ä»¥åœ¨å¤§è„‘ä¸­è™šæ„ä¸€ä¸ªå¬ä¼—ï¼Œä¸€ä¸ªä¸æ‡‚è¡Œçš„å¬ä¼—ï¼Œç„¶åä½ è¯´ç»™ä»–å¬ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œæˆ‘ç»å¸¸åœ¨è·¯ä¸Šç”¨ã€‚ä¸è¿‡å¦‚æœä½ èƒ½åä¸‹æ¥ï¼Œæˆ‘å»ºè®®ä½ è¿˜æ˜¯è¯´ç»™å®é™…çš„å¬ä¼—å¬â€”â€”å³å†™ä¸‹ä½ çš„æ€è€ƒï¼Œå› ä¸ºä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒã€‚</p><p>æˆ‘ä»¬çš„ç»å¤§å¤šæ•°çŸ¥è¯†åœ¨ç»å¤§å¤šæ•°æ—¶å€™éƒ½éšè—åœ¨æ½œæ„è¯†ä¸­ï¼Œå…¶å®æˆ‘ä»¬æ„è¯†çš„çª—å£å¾ˆå°ï¼Œæˆ‘ä»¬çš„å·¥ä½œè®°å¿†åªèƒ½å®¹çº³å¯¥å¯¥æ•°ä¸ªæ¡ç›®ï¼ˆè®°å¾—é‚£ä¸ªâ€œçœ‹ä½ èƒ½å¤Ÿè®°ä½å±å¹•ä¸ŠåŒæ—¶é—ªç°çš„å¤šå°‘ä¸ªæ•°å­—â€çš„ flash å°æ¸¸æˆå—ï¼Ÿï¼‰ï¼Œæˆ‘ä»¬å¹³æ—¶æ‰€ä½œçš„æ¨ç†è¿‡ç¨‹å¾ˆå¤§éƒ¨åˆ†éƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå‘ç”Ÿåœ¨æ½œæ„è¯†ä¸­ï¼Œè€Œæˆ‘ä»¬åªèƒ½æ„ŸçŸ¥åˆ°ä¸€äº›ä¸­é—´ç»“è®ºã€‚ä¸ä¿¡ä½ å›å¿†ä¸€ä¸‹ä½ åœ¨å’Œåˆ«äººè®¨è®ºé—®é¢˜çš„æ—¶å€™æœ‰å¤šå°‘æ¬¡è§‰å¾—â€œåæ­£å°±æ˜¯è¿™æ ·ï¼Œæˆ‘æ„Ÿè§‰å¾—åˆ°å®ƒæ˜¯å¯¹çš„ï¼Œä½†æ˜¯ä½ é—®æˆ‘ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸…åˆ°åº•æ€ä¹ˆå›äº‹â€ï¼Œå¯¹æ­¤ä½ ä¸è§‰å¾—å¾ˆå¥‡æ€ªå—ï¼Ÿå¦‚æœä½ éƒ½ä¸èƒ½ä»é€»è¾‘ä¸Šæ”¯æŒä½ çš„ç»“è®ºï¼Œä½ æ€ä¹ˆå°±èƒ½ç¡®ä¿¡å®ƒæ˜¯å¯¹çš„å‘¢ï¼Ÿä»…ä»…å› ä¸ºä½ çš„ç›´è§‰å¼ºçƒˆåœ°å‘Šè¯‰ä½ å®ƒæ˜¯å¯¹çš„ï¼Ÿé‚£å¦‚æœæ—è¾¹æœ‰å¦ä¸€ä¸ªäººï¼Œä»–å’Œä½ æŒç›¸åçš„è§‚å¿µï¼Œè€Œä»–çš„ç›´è§‰ä¹Ÿå¼ºçƒˆåœ°å‘Šè¯‰ä»–ä»–æ˜¯å¯¹çš„ã€‚è¿™æ—¶å€™ä½ åˆæ€ä¹ˆæƒ³ï¼Ÿâ€œä»–çš„ç›´è§‰é”™äº†ï¼Œæˆ‘çš„ç›´è§‰æ˜¯å¯¹çš„â€ï¼Ÿéš¾é“ä½ è¿™ä¹ˆè‡ªä¿¡ä½ çš„ç›´è§‰æ˜¯ä¸–ç•Œä¸Šæœ€å¯é çš„ï¼Ÿ</p><p>æˆ‘è‡ªå·±åˆ™æ˜¯éå¸¸çæƒœç±»ä¼¼è¿™æ ·çš„æœºä¼šï¼Œå³å½“â€œæˆ‘å¼ºçƒˆåœ°è§‰å¾—å®ƒæ˜¯å¯¹çš„ï¼Œä½†æˆ‘å´è¯´ä¸å‡ºæ‰€ä»¥ç„¶æ¥â€ï¼Œè¿™æ—¶å€™å¾€å¾€æ˜¯åˆ°å¤§è„‘ä¸­ç¿»ç®±å€’æŸœçš„æ—¶å€™ï¼Œå¼„æ¸…æ¥é¾™å»è„‰çš„æ—¶å€™ï¼Œæ·±å…¥åæ€çš„æ—¶å€™ï¼Œçº æ­£ä¸€ç›´ä»¥æ¥é”™è¯¯çš„æ½œåœ¨å‰æå‡è®¾çš„æ—¶å€™ã€‚å¦ä¸€æ–¹é¢ï¼Œâ€œæˆ‘å¼ºçƒˆåœ°è§‰å¾—è¿™ä¸ªè¯´æ³•æœ‰é—®é¢˜ï¼Œä½†æˆ‘å´è¯´ä¸æ¸…å®ƒä¸ºä»€ä¹ˆæœ‰é—®é¢˜ï¼Œåˆ°åº•å“ªæœ‰é—®é¢˜â€ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªææœ‰æ„ä¹‰çš„ç¬é—´ï¼Œå®ƒå‡ ä¹æ€»æ˜¯æ„å‘³ç€ä½ å¯¹ä¸€ä¸ªé—®é¢˜çš„è®¤è¯†æœ‰æ½œåœ¨çš„åå·®ï¼Œè‚¯å®šæ˜¯åœ¨ä½ è‡ªå·±éƒ½æ²¡æœ‰è§‰çŸ¥åˆ°çš„åœ°æ–¹å¼•å…¥äº†ä¸€ä¸ªæ½œåœ¨çš„å‡è®¾ã€å·æ¢äº†ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œç­‰ç­‰ã€‚è€Œè¿™ç§æ—¶å€™å°±æ˜¯æ·±å…¥åæ€çš„æ—¶å€™ï¼Œå½“ä½ ç»ˆäºæ½œåˆ°é—®é¢˜çš„åº•å±‚ï¼Œè§¦æ‘¸åˆ°é—®é¢˜çš„å®è´¨ï¼ŒæŠŠæ°´é¢ä¹‹ä¸‹çš„å†°å±±æ•´ä½“çœ‹æ¸…äº†çš„æ—¶å€™ä½ ä¼šæœ‰ä¸€ç§é€šä½“èˆ’æ³°çš„æ„Ÿè§‰ã€‚</p><p>ä¸ºä»€ä¹ˆè¯´ä»¥ä¸Šè¿™äº›ï¼Ÿå› ä¸ºåˆšæ‰è¯´çš„æ˜¯ä½ å¿…é¡»ç­‰å¾…è¿™æ ·çš„åæ€æœºä¼šï¼Œä½†å¦‚æœä½ é€‰æ‹©ç»å¸¸æ€»ç»“è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œå¹¶è¯´å‡ºæ¥ç»™ä½ çš„è¯»è€…å¬ï¼Œä½ å°±ä¼šå‘ç°ä½ è‡ªå·±åˆ›é€ äº†è¿™æ ·çš„æœºä¼šã€‚å¦‚æœæˆ‘ä»¬å¹³æ—¶ä¸åæ€ï¼Œæˆ‘ä»¬è§‰å¾—å¾ˆå¤šäº‹æƒ…éƒ½æ˜¯å½“ç„¶çš„ï¼Œä½†ç»“æœå¦‚æœè¦ä½ ä¸€å¼€å£è¯´ç»™åˆ«äººå¬ï¼Œå¸¸å¸¸ä¼šå‘ç°äº‹æƒ…å°±å¼€å§‹å˜å¾—ä¸é‚£ä¹ˆæ˜æ˜¾äº†ï¼Œä½ è¯´ç€è¯´ç€ï¼Œå°±å¼€å§‹è«åå…¶å¦™åœ°å‘ç°è‡ªå·±éœ€è¦ç”¨åˆ°â€œåæ­£â€è¿™ä¸ªè¯äº†ã€‚</p><p>äºæ˜¯ï¼Œåæ€çš„æœºä¼šå°±æ¥äº†ã€‚</p><p>ä¸€æ—¦ä½ æŠŠè‡ªå·±æ½œæ„è¯†é‡Œé¢çš„ä¸œè¥¿ä»å¹•åæ‹‰å‡ºæ¥ï¼Œä½ å°±æœ‰äº†é¢å¯¹å¹¶åæ€å®ƒä»¬çš„å¯èƒ½ï¼Œè€Œä¸æ˜¯ä»»å®ƒä»¬åœ¨å¹•åé˜´é™©åœ°å·¦å³ä½ çš„æ€ç»´ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„æ€è·¯å‡ºäº†é—®é¢˜å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸ä¼šåæ€ï¼Œè€Œæ˜¯ä¸çŸ¥é“è‡ªå·±çš„æ€ç»´ä¸­æœ‰é‚£äº›éšå«çš„å‡è®¾ï¼ˆassumptionsï¼‰ï¼Œå¦‚æœä½ åªæ„Ÿè§‰åˆ°ç­”æ¡ˆï¼Œå´ä¸çŸ¥é“ä½ å¤§è„‘å¾—åˆ°è¿™ä¸ªç­”æ¡ˆä¹‹å‰åšäº†å“ªäº›æ¨ç†ï¼Œä½ åˆæ€ä¹ˆçŸ¥é“å“ªä¸€ç¯å¯èƒ½å‡ºäº†é—®é¢˜å‘¢ï¼Ÿå¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦ä½ å¼„æ¸…äº†è‡ªå·±åˆ°åº•æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œç¦»æ„è¯†åˆ°é—®é¢˜å°±ä¸è¿œäº†ï¼Œå¾ˆç®€å•çš„é“ç†â€”â€”å¦‚æœåˆ«äººå’Œä½ äº‰è¾©çš„æ—¶å€™æ€»æ˜¯åªæ‘†ç«‹åœºï¼Œä½ å°±å¾ˆéš¾å’Œä»–è¾©ï¼Œä½†å¦‚æœä»–æŠŠè‡ªå·±çš„æ¨ç†è¿‡ç¨‹åŸåŸæœ¬æœ¬æš´éœ²ç»™ä½ ï¼Œæ‰¹åˆ¤èµ·æ¥æ€»æ˜¯å®¹æ˜“å¾—å¤šçš„ã€‚ï¼ˆä¹Ÿæ­£å› ä¸ºè¿™ä¸ªåŸå› æœ‰å¾ˆå¤šäººæ€»æ˜¯æŠŠé€»è¾‘è—åœ¨èƒŒåï¼Œä¸æ•¢æš´éœ²å‡ºæ¥ï¼‰</p><p>ç»å¤§å¤šæ•°æ—¶å€™å…¶å®æˆ‘ä»¬éƒ½ä¼šä¸å‡æ€ç´¢åœ°å¾—å‡ºä¸€äº›ç»“è®ºï¼Œå°±åƒä¸Šäº†å‘æ¡çš„è‡ªåŠ¨æœºï¼Œä½†å…¶å®æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™äº›ç»“è®ºåˆ°åº•æ€ä¹ˆæ¥çš„ï¼Œåœ¨æ€ç»´çš„èƒŒååˆ°åº•å‘ç”Ÿäº†å“ªäº›äº‹æƒ…ï¼Œæ•…è€Œå½“æˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„ç»“è®ºé”™äº†çš„æ—¶å€™ï¼Œä¸€å¤´é›¾æ°´ï¼Œæ²¡æ³•ç€æ‰‹å¯»æ‰¾åˆ°åº•åœ¨å“ªé”™äº†ã€‚å¦‚æœä½ æ³¨æ„ä¸€ä¸‹å¾ˆå¤šäººçš„å‘è¨€ï¼ˆè®ºå›ã€åšå®¢ç­‰ç­‰ï¼‰ï¼Œå¦‚æœä½ æŠŠä»–ä»¬çš„å‘è¨€åˆ†ä¸ºâ€œå‰æâ€ã€â€œå‡è®¾â€ã€â€œé€»è¾‘â€ã€â€œç»“è®ºâ€è¿™å››ä¸ªéƒ¨åˆ†ï¼Œä½ ä¼šå‘ç°ä¸€å¤§å †äººåªä¼šä¸åœåœ°ä¸‹ç»“è®ºï¼Œæ‘†ç«‹åœºï¼Œå´è§ä¸åˆ°è¿™äº›ç»“è®ºæˆ–ç¦»åœºçš„å‰æã€å‡è®¾å’Œä¸ªä¸­é€»è¾‘ï¼Œå€’ä¹Ÿä¸æ˜¯ä»–ä»¬ä¸æ„¿æ„å†™å‡ºé€»è¾‘ï¼Œè€Œæ˜¯å› ä¸ºåæ€è‡ªå·±çš„æ€ç»´è¿‡ç¨‹å®åœ¨æ˜¯ä¸€ä»¶å›°éš¾éå¸¸çš„äº‹æƒ…ï¼Œæˆ‘ä»¬çš„æ¨ç†è¿‡ç¨‹å¾ˆå¤§ä¸€éƒ¨åˆ†å‘ç”Ÿåœ¨æ„è¯†çš„æ°´é¢ä¹‹ä¸‹ï¼Œåªæœ‰å½“æœ‰äº†é‡è¦ç»“è®ºçš„æ—¶å€™è¿™æ¡é€»è¾‘é“¾æ‰ä¼šæµ®å‡ºæ¥å†’ä¸€ä¸ªæ³¡ï¼Œè®©æˆ‘ä»¬çš„æ„è¯†æ•æ‰åˆ°ã€‚æ›´ä½•å†µç»å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ç”¨çš„å…¶å®å¹¶ä¸æ˜¯å®Œæ•´ä¸¥å¯†çš„é€»è¾‘æ€ç»´ï¼Œè€Œæ˜¯æ€ç»´æ·å¾„ã€‚</p><p>å»æ•™ä¸€ä¸ªå®Œå…¨ä¸æ‡‚çš„äººï¼Œåˆ™æ˜¯ä¸€ç§æœ€æœ€å¼ºå¤§å’Œå½»åº•çš„åæ€é€”å¾„â€”â€”å› ä¸ºä»–æ²¡æœ‰ä»»ä½•é¢„å¤‡çš„çŸ¥è¯†ï¼Œæ‰€ä»¥è¦è®©ä»–å¼„æ‡‚ä½ æ‰€çŸ¥é“çš„ï¼Œä½ å°±å¿…é¡»å½»åº•åæ€ä½ çš„çŸ¥è¯†ä½“ç³»ï¼Œå¼„æ¸…è¿™åº§å¤§å¦çš„æ ¹åŸºåœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œå¼„æ¸…å®ƒçš„éª¨æ¶åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œä¸€ç –ä¸€ç“¦åˆ°åº•æ˜¯æ€ä¹ˆå’èµ·æ¥çš„ï¼Œä½ ä¸èƒ½è‡ªå·±ç«™åœ¨ 11 å±‚ä¸Šï¼Œç„¶åå‡è®¾ä½ çš„è¯»è€…ç«™åœ¨ç¬¬ 10 å±‚ï¼ŒæŒ‡æœ›ç€åªè¦å‘Šè¯‰ä»–ç¬¬ 11 å±‚æœ‰é‚£äº›å†…å®¹å°±è®©ä»–æ˜ç™½ã€‚ä½ çš„è¯»è€…ç«™åœ¨ç¬¬ä¸€å±‚ï¼Œä½ å¿…é¡»çŸ¥é“ä½ è„šä¸‹è¸©ç€çš„å¦å¤– 10 å±‚åˆ°åº•æ˜¯æ€ä¹ˆæ„é€ çš„ã€‚è¿™å°±è¿«ä½¿ä½ å¯¹ä½ æ‰€æŒæ¡çš„ã€æˆ–ä¹‹å‰è®¤ä¸ºæ­£ç¡®çš„é‚£äº›ä¸œè¥¿ä½œå½»å½»åº•åº•çš„ã€æ·±åˆ»çš„åæ€ï¼Œä½ çš„å—ä¼—è¶Šæ˜¯ä¸æ‡‚ï¼Œä½ éœ€è¦åæ€å¾—å°±è¶Šæ·±åˆ»ã€‚</p><ol start="4"><li><p>è®¨è®ºæ˜¯ç»ä½³çš„åæ€ã€‚å¦ä¸€æ–¹é¢ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯æœ‰æœºä¼šè¯´ç»™å®Œå…¨ä¸æ‡‚çš„äººå¬ï¼Œæ›´å¤§çš„å¯èƒ½æ€§æ˜¯è¯´ç»™åŒé¢†åŸŸæœ‰ä¸€å®šåŸºç¡€çš„äººå¬ï¼Œè¿™ä¸ªæ—¶å€™å¹¶ä¸ä»£è¡¨å°±ä¸èƒ½ä¿ƒä½¿åæ€äº†ï¼Œå®é™…ä¸Šï¼Œä½ ä¼šå‘ç°ï¼Œå¦‚æœä½ å…¬å¼€ä½ çš„æƒ³æ³•ï¼Œå‡ ä¹æ€»èƒ½çœ‹åˆ°ä¸ä½ æŒä¸åŒæ„è§çš„äººï¼Œç„¶åä½ é€šè¿‡æ¯”è¾ƒä½ å’Œä»–çš„è§‚å¿µä¹‹é—´çš„å·®åˆ«ï¼Œä¼šå‘ç°ä½ ä»¬åœ¨ä¸€å¼€å§‹çš„æ€è·¯ä¸Šå°±å­˜åœ¨å·®å¼‚ï¼Œå·®å¼‚ä»å“ªé‡Œæ¥çš„ï¼Ÿåœ¨è¿›ä¸€æ­¥è®¨è®ºä¸­ä½ ä»¬å°±ä¼šä¸æ–­åœ°è¿«ä½¿å¯¹æ–¹æ‹¿å‡ºæ›´æ·±å±‚æ¬¡çš„ç†ç”±ï¼Œè¿™åŒæ ·ä¹Ÿæ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆåœ°ä¿ƒä½¿è‡ªå·±åæ€çš„æ–¹æ³•ï¼Œåœ¨è®¨è®ºçš„è¿‡ç¨‹ä¸­åŒæ–¹çš„ç†ç”±è‡ªç„¶ä¼šå˜å¾—è¶Šæ¥è¶Šæ·±å…¥ï¼Œè¶Šæ¥è¶Šæ¥è¿‘é—®é¢˜çš„æœ¬è´¨ï¼Œä¸€äº›å¹³æ—¶éš¾ä»¥æ³¨æ„åˆ°çš„æ·±å±‚é¢çš„å·®å¼‚æ€§å°±ä¼šé€æ¸æµ®ç°å‡ºæ¥ï¼Œä½ ä¹Ÿå°±å¤šäº†ä¸€æ¬¡éš¾å¾—çš„æœºä¼šå»å®¡è§†è‡ªå·±çš„æ€ç»´ä¸­åˆ°åº•å­˜æ”¾äº†å“ªäº›é”™è¯¯çš„ä¿¡æ¯ã€‚</p></li><li><p>æ¿€åŠ±ä½ å»æŒç»­å­¦ä¹ å’Œæ€è€ƒã€‚å¦‚æœä½ æ²¡æœ‰æŒç»­å­¦ä¹ å’Œæ€è€ƒçš„ä¹ æƒ¯ï¼Œä½ çš„åšå®¢å¾ˆå¿«å°±ä¼šæ²¡æœ‰å†…å®¹å¯å†™ï¼Œå°±åªèƒ½æ•´ç‚¹ç¢ç¢å¿µæˆ–è€…è½¬è½½ï¼Œç„¶åä½ å°±ä¼šå¤±å»è¯»è€…ï¼Œç„¶åä½ å°±ä¼šå…³æ‰åšå®¢ï¼Œç„¶åä¸€æ—¦å…³æ‰åšå®¢ä¹‹åä½ ä¹Ÿå°±æ­»äº†å†™åšå®¢çš„å¿ƒï¼Œç„¶åå°±å°‘äº†ä¸€æ¡æ¿€åŠ±ä½ å»æ€è€ƒå’Œæ€»ç»“çš„é€”å¾„ï¼Œç„¶åä½ å˜å¾—æ›´ä¸é«˜å…´æ€»ç»“å’Œæ€è€ƒï¼Œç„¶åâ€¦</p></li></ol><p>ä¸ºäº†æ‰“ç ´è¿™ä¸ªæ­»å¾ªç¯ï¼Œä¸è¦æ°¸ä¹…åœæ­¢æ›´æ–°ä½ çš„åšå®¢ï¼Œå°±ç®—ä½ ä¸¤ä¸ªæœˆï¼Œä¸‰ä¸ªæœˆéƒ½ä¸å†™ï¼Œåªè¦ä½ æ¯ç¯‡éƒ½æ˜¯å†™è‡ªå·±æ€è€ƒçš„äº§ç‰©ï¼Œå†™æœ‰ä»·å€¼çš„ä¸œè¥¿ï¼Œåœ¨äº’è”ç½‘ä¸Šï¼Œé‡‘å­çš„ç¡®æ€»æ˜¯ä¼šå‘å…‰çš„ï¼Œå› ä¸ºæœ‰æ— æ•°çš„ä¿¡æ¯èšåˆå¹³å°åœ¨æœŸå¾…è¿™äº›æœ‰ä»·å€¼çš„å†…å®¹ï¼Œæœ‰æœç´¢å¼•æ“ä¸ºä½ çš„å†…å®¹æä¾›æµ·é‡çš„æ½œåœ¨è¯»è€…ï¼Œæœ‰æµ·é‡çš„äººè‚‰åœ¨æ‰‹åŠ¨æŒ–æ˜å’Œè½¬è½½é‚£äº›æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚æˆ‘ä»¬æ‰€èƒ½åšçš„æœ€å·®çš„ä¸€ä¸ªå†³ç­–è«è¿‡äºåœæ­¢åšä¸€ä»¶æ²¡æœ‰ä»»ä½•åå¤„ï¼Œå´æœ‰ä¸€å¤§å †å¥½å¤„çš„äº‹æƒ…ã€‚</p><p>ä¸ºäº†è®©ä½ çš„åšå®¢æœ‰ä»·å€¼ï¼Œä½ å¿…é¡»ä¸æ–­æ€»ç»“è‡ªå·±å­¦ä¹ çš„ç»“æœï¼Œä½ å¿…é¡»ä¸æ–­æ€è€ƒï¼Œç»™å‡ºæ¯”åˆ«äººæ·±åˆ»ã€ç‹¬åˆ°çš„è§è§£ã€‚è¿™çœ‹èµ·æ¥æœ‰ç‚¹æœ¬æœ«å€’ç½®ï¼Œä½†å¾ˆå¿«æœ¬å’Œæœ«å°±ä¼šæ­£è¿‡æ¥ã€‚</p><ol start="6"><li><p>å­¦ä¼šæŒä¹‹ä»¥æ’åœ°åšä¸€ä»¶äº‹æƒ…ã€‚å¾ˆå¤šäººåœ¨ç”Ÿæ´»ä¸­å®¹æ˜“è§‰å¾—è¿·å¤±ï¼Œä¸çŸ¥é“æƒ³è¦åšä»€ä¹ˆï¼Œæ˜¯å› ä¸ºæ²¡æœ‰ä¸€ä»¶èƒ½å¤ŸæŒç»­åœ°åšçš„äº‹æƒ…ï¼Œç”¨ä¿—è¯æ¥è¯´å°±æ˜¯æ²¡æœ‰ä¸»å¿ƒéª¨ã€‚ç”¨ç§¯æå¿ƒç†å­¦çš„è¯æ¥è¯´å°±æ˜¯æ²¡æœ‰ä¸€ä»¶èƒ½å¤Ÿåˆ›é€ æµä½“éªŒçš„äº‹æƒ…ï¼Œè€Œä¹¦å†™è‡ªå·±çš„æ€æƒ³åˆ™æ˜¯ä¸€ä»¶å®¹æ˜“äº§ç”Ÿæµä½“éªŒçš„äº‹æƒ…ï¼Œåœ¨ä¹¦å†™çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯ç†æ€§åœ°ä¹¦å†™çš„æ—¶å€™ï¼Œå¤§è„‘é€æ¸è¿›å…¥æ¨ç†åˆ†ææ¨¡å—ï¼Œä¸€åˆ‡ä¸æ„‰å¿«çš„æƒ…ç»ªï¼Œçƒ¦èºæ„Ÿéƒ½ä¼šé€æ¸æ¶ˆéšä¸‹å»ã€‚ä¸è¿‡å‰ææ˜¯ä½ å¾—å¼€å§‹ï¼Œå¹¶ä¸”åšæŒè¿‡ä¸€å¼€å§‹çš„å›°éš¾æœŸï¼Œä»¥åçš„ä¸€åˆ‡ä¾¿æˆäº†ä¹ æƒ¯æˆè‡ªç„¶ã€‚</p></li><li><p>ä¸€ä¸ªé•¿æœŸçš„ä»·å€¼åšå®¢æ˜¯ä¸€ä»½å¾ˆå¥½çš„ç®€å†ã€‚è¿™é‡Œçš„â€œç®€å†â€å¹¶éæ˜¯ç‹­ä¹‰ä¸Šçš„æ±‚èŒç®€å†ï¼Œæ¯•ç«Ÿç°åœ¨è¿˜æ²¡æœ‰åˆ°ä»·å€¼åšå®¢çš„æ—¶ä»£ï¼Œå¾ˆå¤šäººå†™åšå®¢éƒ½æ˜¯åˆ°å¤„è½¬è½½æˆ–è€…å¹²è„†ç¢ç¢å¿µï¼Œæ­£å› æ­¤é¢è¯•å®˜æœªå¿…æ‹¿ä¸ªäººåšå®¢å½“æˆäº†è§£ä¸€ä¸ªäººçš„æ›´å¯é çª—å£ã€‚è¿™é‡Œçš„â€œç®€å†â€æ˜¯æŒ‡ä¸€ä¸ªè®©åˆ«äººäº†è§£è‡ªå·±çš„çª—å£ï¼Œè™½ç„¶æˆ‘ä»¬æœªå¿…åšå¾—åˆ°åƒç½—æ°¸æµ©ã€Keso è¿™æ ·çš„åšå®¢ï¼Œä¸ªäººçš„å½±å“åŠ›å·²ç»è¶³ä»¥æ”¯æ’‘å‡ºä¸€ä»½äº‹ä¸šï¼ˆç‰›åšå’Œ 5gmeï¼‰ï¼Œä½†è‡³å°‘ä½ ä¼šå› æ­¤è€Œç»“è¯†æ›´å¤šçš„äººï¼Œä½ çš„åšå®¢ä»·å€¼è¶Šé«˜ï¼Œä½ ç»“è¯†çš„äººå°±è¶Šç‰›ï¼Œè·Ÿç‰›äººäº¤æµåˆä¼šè®©ä½ çš„çœ¼ç•Œå¾—åˆ°æå¤§çš„å¼€é˜”ï¼Œæ‰“å¼€ä¸€æ‰‡åˆä¸€æ‰‡ä½ åŸæœ¬ä¸çŸ¥é“çš„é—¨ï¼Œäºæ˜¯ä½ å°±å˜å¾—æ›´ç‰›â€¦ è¿™æ˜¯ä¸€ä¸ªè‰¯æ€§å¾ªç¯ã€‚</p></li></ol><h2 id="ï¼ˆäºŒï¼‰æ€ä¹ˆåšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢"><a href="#ï¼ˆäºŒï¼‰æ€ä¹ˆåšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢" class="headerlink" title="ï¼ˆäºŒï¼‰æ€ä¹ˆåšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢"></a>ï¼ˆäºŒï¼‰æ€ä¹ˆåšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢</h2><p>æ³¨æ„åˆ°æˆ‘å¹¶æ²¡æœ‰è¯´â€œæ€ä¹ˆåšåˆ°é•¿æœŸåšæŒå†™ä¸€ä¸ªä»·å€¼åšå®¢â€ï¼Œå› ä¸ºå½“æ€è€ƒå’Œæ€»ç»“æˆä¸ºä¹ æƒ¯ä¹‹åï¼Œè¯‰è¯¸æ–‡å­—ä»¥åŠå€ŸåŠ©ä¹¦å†™æ¥è¿›ä¸€æ­¥æ€è€ƒå°±å˜æˆäº†ä¸€ä»¶è‡ªç„¶è€Œç„¶çš„äº‹æƒ…ï¼Œå°±å˜æˆäº†ä¸€ä»¶â€œå› ä¸ºä½ åœ¨æ€è€ƒå’Œæ€»ç»“ä»è€Œå¿…é¡»ä¹¦å†™ä¸‹æ¥â€çš„äº‹æƒ…ï¼Œåšå®¢å°±å˜æˆäº†å‰¯äº§å“ã€‚</p><p>ä¸€å¼€å§‹çš„æ—¶å€™ä½ æ˜¯å› ä¸ºè¦å†™åšå®¢è€Œå»ä½¿åŠ²åœ°æ€è€ƒå’Œæ€»ç»“ï¼ŒæŒ‡æœ›ç»™å‡ºä»¤äººçœ¼ç›ä¸€äº®çš„ä¸œè¥¿ï¼Œåˆ°äº†åæ¥ï¼Œå°±å˜æˆäº†å› ä¸ºä½ ä¹ æƒ¯äº†æ€è€ƒå’Œæ€»ç»“ï¼Œå› ä¸ºä½ æ„è¯†åˆ°ä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒï¼Œä½ å°±å¿…é¡»ä½¿ä½ çš„æƒ³æ³•æˆä¸ºæ–‡å­—ã€‚è‡³æ­¤æœ¬å’Œæœ«å°±ä¼šå„å½’åŸä½ï¼Œä¸å†é¢ å€’ã€‚</p><p>æ€æ ·åšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢ï¼Ÿä¹Ÿè®¸æœ‰äººä¼šç»™å‡ºå¾ˆå¤šæœ‰è¶£æœ‰ç”¨çš„å°æŠ€å·§æ¥æä¾›åŠ¨æœºå’Œæ¿€åŠ±ï¼Œè­¬å¦‚å¦‚ä½•åš SEOï¼Œå¦‚ä½•é¼“åŠ±è¯»è€…ç•™è¨€ç­‰ç­‰ï¼Œä½†æ˜¯è¿™äº›æˆ‘éƒ½ä¸æƒ³è¯´ï¼Œæˆ‘åªæƒ³è¯´æœ€æœ€é‡è¦çš„ï¼Œé‚£å°±æ˜¯ï¼š</p><p>è®©ä½ è‡ªå·±æˆä¸ºä¸€ä¸ªæŒç»­å­¦ä¹ å’Œæ€è€ƒçš„äººï¼Œå¹¶åªå†™ä½ çœŸæ­£æ€è€ƒå’Œæ€»ç»“ä¹‹åçš„äº§ç‰©ï¼Œå…¶ä»–ä¸€åˆ‡å°±ä¼šéšä¹‹è€Œæ¥ã€‚</p><p>å°±åƒé‚£å¥ç»å¸¸è¢«äººä¼ é˜…çš„è¯ï¼šåªåšä½ æœ€æ„Ÿå…´è¶£çš„äº‹æƒ…ï¼Œé’±ä¼šéšä¹‹è€Œæ¥[2]ã€‚</p><p>è¿™æ–¹é¢çš„å…·ä½“ä¾‹å­å¤§å®¶å¯ä»¥ç•™æ„ä¸€ä¸‹ï¼Œéšå¤„å¯è§ï¼Œå°±ä¸ä¸€ä¸€ä¸¾äº†ã€‚æˆ‘æƒ³å†é‡å¤ä¸€ä¸‹çš„æ˜¯ï¼Œåƒä¸‡ä¸è¦ç¢ç¢å¿µï¼Œæˆ‘èƒ½ç†è§£æ¯ä¸ªäººéƒ½æƒ³å¶å°”å‘å‘ç‰¢éªšçš„å†²åŠ¨ï¼Œä½†æ˜¯ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„çª—å£ï¼štwitterï¼Œæ‰€ä»¥ç«‹å³åœæ­¢åœ¨ä½ çš„åšå®¢ä¸Šç¢ç¢å¿µï¼Œé˜…è¯»åšå®¢çš„äººå¸Œæœ›å¾—åˆ°ä¿¡æ¯è€Œéå™ªéŸ³ã€‚å¦‚æœå®åœ¨å¿ä¸ä½æƒ³ç¢ç¢å¿µçš„è¯ä¸å¦¨æ¢ä¸€ä¸‹ä½ç½®ï¼Œè¿™ä¹ˆæ¥å‘Šè¯‰è‡ªå·±ï¼šå¦‚æœä½ çœ‹åˆ°åˆ«äººåšå®¢æ¥ä¸Šè¿™ä¹ˆä¸€æ®µï¼Œä½ ä¼šæœ‰å…´è¶£çœ‹å—ï¼Ÿ</p><h2 id="ï¼ˆä¸‰ï¼‰å¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜"><a href="#ï¼ˆä¸‰ï¼‰å¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜" class="headerlink" title="ï¼ˆä¸‰ï¼‰å¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜"></a>ï¼ˆä¸‰ï¼‰å¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜</h2><p>å³ä¾¿ä¸Šæ–‡ç»™å‡ºäº† N æ¡å†™åšå®¢çš„ç†ç”±ï¼Œä½†æœ‰æ—¶å€™åªè¦ä¸€æ¡ä¸å†™çš„ç†ç”±å°±ä¼šè®©äººåœæ­¢åšä¸€ä»¶äº‹æƒ…ã€‚æ‰€ä»¥æˆ‘ç‰¹åˆ«åŠ ä¸Šä¸€èŠ‚â€œå¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜â€ï¼Œã€Šå½±å“åŠ› 2ã€‹[3]ç¬¬äº”ç« é›„è¾©åœ°è¯æ˜ï¼Œâ€œMuch of Will is Skillâ€ï¼Œæ„å¿—åŠ›å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥æºäºæœ‰æ­£ç¡®çš„æ–¹æ³•ï¼Œè€Œéå¤©ç”Ÿã€‚</p><ol><li>æ‹…å¿ƒåˆ«äººè®¤ä¸ºæ²¡æœ‰ä»·å€¼ã€‚äº‹å®æ˜¯ï¼Œä½ é¢ä¸´è¿‡çš„é—®é¢˜æ€»ä¼šæœ‰äººé¢ä¸´è¿‡ï¼Œä½ ç‹¬ç«‹æ€è€ƒäº†ï¼Œåˆ«äººæ²¡æœ‰ï¼Œä½ çš„æ–‡ç« å¯¹ä»–ä»¬å°±ä¼šæœ‰ä»·å€¼ã€‚å½“ç„¶ï¼Œè‚¯å®šä¼šå¯¹æŸäº›äººæ²¡æœ‰ä»·å€¼ï¼Œä»–ä»¬æ—©å°±çŸ¥é“äº†ï¼Œä½†å°±ç®—ä½ å†å‰å®³ï¼Œä¹Ÿæ€»æ˜¯æœ‰äººæ¯”ä½ å‰å®³çš„ï¼Œä¸èƒ½è¯´å› ä¸ºè¿™äº›åŸå› å°±ä¸è®°å½•ä½ è‡ªå·±çš„æƒ³æ³•äº†ï¼Œä½ è‡ªå·±æ€è€ƒäº†ä¹‹åç†è§£å¾—æœ€æ·±åˆ»ï¼Œå°±ç®—æœ‰åˆ«äººæƒ³è¿‡äº†ï¼Œæ€»æœ‰äººæ²¡æœ‰æƒ³åˆ°çš„ã€‚å†µä¸”ï¼Œæ€è€ƒæˆäº†ä¹ æƒ¯ï¼Œä½ çš„æ€è€ƒèƒ½åŠ›ä¹Ÿä¼šè¶Šæ¥è¶Šå¼ºï¼Œä½ çš„æ–‡ç« ä¹Ÿä¼šè¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚é‡å¤ï¼Œæ— è®ºä½ é¢ä¸´ä»€ä¹ˆå›°æƒ‘ï¼Œæ€»ä¼šæœ‰å¾ˆå¤šäººåŒæ ·é¢ä¸´è¿‡ï¼Œäºæ˜¯ä½ è‹¦è‹¦æ€ç´¢ä¹‹åçš„ç»“æœï¼Œè‚¯å®šä¼šå¯¹å¾ˆå¤šäººæœ‰æ„ä¹‰ã€‚</li></ol><p>æˆ–è€…ï¼Œä½ æƒ³é€šäº†ä¹‹åè§‰å¾—å…¶å®ä¹Ÿå¾ˆç®€å•äºæ˜¯ä¸æ„¿æ„æˆ–è€…ä¸å¥½æ„æ€å†™äº†ï¼Œä½†è¦çŸ¥é“ï¼Œé—®é¢˜åœ¨æƒ³é€šäº†ä¹‹åæ€»æ˜¯ç®€å•çš„ï¼Œé—®é¢˜çš„å›°éš¾ç¨‹åº¦ä¸åœ¨äºæƒ³é€šäº†ä¹‹åè¿˜è§‰å¾—æœ‰å¤šéš¾ï¼Œè€Œåœ¨äºä»ä½ è§‰å¾—å®ƒéš¾åˆ°ä½ è§‰å¾—å®ƒç®€å•éœ€è¦è€—è´¹å¤šå°‘æ€ç»´ä½“åŠ›ï¼Œä½ è€—è´¹çš„æ—¶é—´è¶Šé•¿ï¼Œè¯´æ˜æœ‰è¶Šå¤šçš„äººæœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰æƒ³æ˜ç™½ï¼ˆè·¯è¶Šé•¿èµ°åˆ°åº•çš„äººè¶Šå°‘ï¼‰ã€‚</p><p>æœ€åï¼Œè™½ç„¶æˆ‘ç°åœ¨çœ‹ä¸€å¹´å‰çš„æ–‡ç« è§‰å¾—æŒºä¸æˆç†Ÿï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰é‚£äº›ä¸æˆç†Ÿçš„æ€è€ƒï¼Œä¹Ÿä¸ä¼šæœ‰ç°åœ¨æ›´æˆç†Ÿçš„æ€è€ƒï¼Œæˆ‘å‡ å¹´åæ¥çœ‹ç°åœ¨å†™çš„ä¸œè¥¿ï¼Œè¿˜æ˜¯ä¼šè§‰å¾—ä¸æˆç†Ÿã€‚</p><ol start="2"><li>æ‹…å¿ƒæƒ³æ³•å¤ªå¹¼ç¨šæˆ–æœ‰æ¼æ´ç­‰ç­‰è¢«åˆ«äººç¬‘è¯ã€‚äººéåœ£è´¤ã€‚æ­£æ˜¯å› ä¸ºå•ä¸ªäººçš„æƒ³æ³•æ€»æ˜¯æœ‰æ¼æ´ï¼Œæ‰å€¼å¾—æ‹¿å‡ºæ¥äº¤æµï¼ˆã€Šä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒã€‹ï¼Œè®¨è®ºæ˜¯ç»ä½³çš„åæ€ï¼‰ï¼Œè¢«åˆ«äººæŒ‡å‡ºé—®é¢˜æ­£æ˜¯æ”¹è¿›çš„ç©ºé—´ï¼Œè—ç€æ–ç€çš„æƒ³æ³•æ°¸è¿œä¸å¯èƒ½å˜å¾—æ›´æˆç†Ÿã€‚</li></ol><p>Much of intelligence is knowledgeï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªéå¸¸å‘äººæ·±çœçš„ç»å…¸å¿ƒç†å­¦å®éªŒ[4]ï¼š</p><p>å°†å­©å­ä»¬åˆ†æˆä¸¤ç»„ï¼Œé€šè¿‡ç»™ä»–ä»¬ä¸åŒçš„é˜…è¯»ææ–™è®©ä¸€ç»„ç›¸ä¿¡æ™ºåŠ›æ˜¯å¤©ç”Ÿçš„ï¼Œä¸å¯åœ¨åå¤©æ”¹å˜çš„ï¼Œå¦ä¸€ç»„åˆ™è®©ä»–ä»¬ç›¸ä¿¡æ™ºåŠ›å…¶å®åªæ˜¯çŸ¥è¯†å’ŒæŠ€èƒ½çš„ä»£åè¯ï¼Œå®Œå…¨æ˜¯åå¤©ä¹ å¾—çš„ã€‚æ¥ä¸‹æ¥è®©ä»–ä»¬åšä¸€ç»„ä»»åŠ¡ï¼Œé‚£äº›è¢«ç›¸ä¿¡æ™ºåŠ›å¤©ç”Ÿè¯´çš„å­©å­ï¼Œå€¾å‘äºå›é¿å›°éš¾çš„ä»»åŠ¡ï¼Œé€‰æ‹©è¾ƒå®¹æ˜“çš„ä»»åŠ¡ï¼Œè¿™é‡Œçš„é€»è¾‘æƒ³å¿…æ˜¯è¿™æ ·çš„ï¼šå¦‚æœåšå›°éš¾çš„ä»»åŠ¡ï¼Œå°±å¢å¤§äº†å¤±è´¥çš„å‡ ç‡ï¼Œå°±åœ¨é™ä½äº†è‡ªå·±åœ¨åˆ«äººå’Œè‡ªå·±å¿ƒç›®ä¸­çš„æ™ºåŠ›çš„å€¼ã€‚ä¸ºäº†ä¿æŠ¤è¿™ä¸ªæ™ºåŠ›çš„å€¼ä¸è¢«é™ä½ï¼Œåº”è¯¥é¿å…é‚£äº›æœ‰å¤±è´¥é£é™©çš„é¡¹ç›®ã€‚è€Œå¦ä¸€ç»„å­©å­åˆ™å¯¹äºæœ‰æŒ‘æˆ˜æ€§çš„äº‹æƒ…è·ƒè·ƒæ¬²è¯•ï¼Œå¹¶ä¸”åœ¨å¤±è´¥çš„æ—¶å€™æ˜æ˜¾æ²¡æœ‰å‰è€…æ²®ä¸§ï¼Œå› ä¸ºå¤±è´¥ä¹Ÿæ˜¯å­¦å¾—æ–°çš„ä¸œè¥¿ï¼Œä¸ç®¡æ€æ ·éƒ½æ˜¯â€œæ™ºåŠ›â€çš„æé«˜ã€‚</p><p>å†µä¸”ï¼Œåªä¼šæ‰¹åˆ¤ä¹ƒè‡³å˜²ç¬‘åˆ«äººçš„äººæ˜¯æœ€ä¸çŸ¥é“æ€ä¹ˆå»ºè®¾çš„äººï¼Œå¿½ç•¥ä»–ä»¬ã€‚</p><ol start="3"><li><p>å¾—ä¸åˆ°æ¿€åŠ±ã€‚è¿™å…¶å®æ˜¯ä¸ªæœ€æ— èŠçš„é—®é¢˜äº†ï¼Œåªæœ‰å†™ç¢ç¢å¿µçš„åšå®¢æ‰ä¼šé¢å¯¹â€œæ¿€åŠ±â€çš„é—®é¢˜ã€‚å¦‚æœå†™è‡ªå·±çš„æ€»ç»“ï¼Œå†™è‡ªå·±ç‹¬ç«‹çš„æ€è€ƒï¼Œé‚£ä¹ˆä¹¦å†™ä¸‹æ¥ã€ç†è§£é€šé€ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæå¤§çš„æ¿€åŠ±ã€‚å°±ç®—æ”¾åœ¨è‡ªå·±çš„ç§å¯†ç¬”è®°æœ¬é‡Œé¢ä¹Ÿä¸€æ ·æœ‰æˆå°±æ„Ÿã€‚å†µä¸”ï¼Œå¦‚æœä½ çœŸåšåˆ°äº†ä¹¦å†™ä»·å€¼åšå®¢ï¼Œé‚£ä¹ˆç»å¯¹ä¸ç”¨æ‹…å¿ƒä½ çš„è§‚ç‚¹å¾—ä¸åˆ°ä¼ æ’­ï¼Œä¹Ÿè®¸ä¸€å¼€å§‹ä¼šè€—æ—¶é•¿ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™åœ¨ä»»ä½•äº‹æƒ…ä¸Šéƒ½æ˜¯å¿…è¦çš„åˆå§‹é˜¶æ®µï¼ŒGmail å°ç»„çš„æ ¸å¿ƒäººç‰©ã€FriendFeed åˆ›å§‹äºº Paul Buchheitï¼Œå’Œç¼–ç¨‹ç•Œååš Coding Horror çš„åšä¸» Jeff Atwood éƒ½æ›¾ç»æ„Ÿå¹è¿‡ï¼šOvernight success takes a long time ï¼ˆ(1)ï¼Œ(2)ï¼‰ï¼Œä¸è¿‡å¯¹äºä»·å€¼åšå®¢æ¥è¯´ï¼Œç°åœ¨ç½‘ç»œä¸Šçš„èšåˆç±»æœåŠ¡è¿™ä¹ˆå¤šï¼Œæœºå™¨çš„ã€äººè‚‰çš„ã€åŠäººè‚‰çš„éƒ½æœ‰ï¼Œæƒ…å†µåˆè¦å¥½å¾—å¤šäº†ï¼Œè€Œä¸”æˆ‘ç›¸ä¿¡æƒ…å†µè¿˜ä¼šè¶Šæ¥è¶Šå¥½ã€‚</p></li><li><p>å†™ä¸å‡ºæ¥ã€‚è¿™ä¸ªé—®é¢˜ä¹Ÿæ¯”è¾ƒæ— èŠï¼Œæ€è€ƒæœ¬ä¸æ˜¯ä¸€ä»¶æ€¥äºæ±‚æˆçš„äº‹æƒ…ã€‚é•¿æœŸè®¢é˜…æˆ‘çš„åšå®¢çš„æœ‹å‹çŸ¥é“æˆ‘ä¸€èˆ¬å‘æ–‡é¢‘ç‡åœ¨ä¸€ä¸ªæœˆä¸‰äº”ç¯‡ï¼Œå®é™…ä¸Šæœ‰ä¸å°‘æ¬¡æˆ‘ä¸ªæŠŠæœˆä¹Ÿä¸å‘å¸ƒæ–‡ç« ï¼ŒåŸå› å¾ˆç®€å•ï¼Œè¦ä¹ˆæ˜¯æœ‰æ‰‹å¤´çš„äº‹æƒ…è¦å¤„ç†æ€è€ƒçš„æ—¶é—´è¢«å‹ç¼©äº†ï¼Œè¦ä¹ˆæ˜¯é‡åˆ°æ¯”è¾ƒå¤§æˆ–è€…æ¯”è¾ƒå›°éš¾çš„é—®é¢˜éœ€è¦é•¿æ—¶é—´çš„æ€è€ƒå’Œç§¯æ·€ï¼Œæ²¡æœ‰å…³ç³»ï¼Œå¦‚æœæ²¡æœ‰æƒ³æ¸…æ¥šå°±å†æƒ³æƒ³ï¼Œçˆ±æ€è€ƒçš„äººå’Œä¸çˆ±æ€è€ƒçš„äººæœ‰ä¸€ä¸ªæœ¬è´¨çš„åŒºåˆ«ï¼Œå‰è€…åœ¨ç”Ÿæ´»ä¸­æ€»æ˜¯æŒ‚ç€å‡ ä¸ªé—®é¢˜åœ¨å¤§è„‘ä¸­ï¼Œå®ƒä»¬æ—¶å¸¸éƒ½ä¼šå†’å‡ºæ¥éªšæ‰°ä½ ä¸€ä¸‹ï¼Œè®©ä½ ç¢ç£¨ç¢ç£¨ï¼Œä¸çˆ±æ€è€ƒçš„åˆ™æ˜¯æ²¡äº‹ä¸ä¸»åŠ¨æƒ³é—®é¢˜ï¼Œé‡åˆ°é—®é¢˜è¿˜è¦å…ˆæƒ³æƒ³æ˜¯å¦èƒ½æ‰¾æ·å¾„ï¼ˆæ‰¾äººå¸®å¿™ï¼‰è§£å†³ã€‚</p></li></ol><p>æ— è®ºå¦‚ä½•ï¼Œä¸ç”¨æ€¥äºæ±‚æˆï¼Œåœ¨ä¸€ä¸ªä¸»é¢˜ä¸Šæ·±å…¥ä¸‹å»æ€è€ƒï¼Œæ€»èƒ½æŒ–åˆ°åˆ«äººæŒ–ä¸åˆ°çš„è§’è½ã€‚ä½ èƒ½è®©ä¸€ä¸ªé—®é¢˜åœ¨å¤§è„‘ä¸­åœç•™çš„æ—¶é—´è¶Šé•¿ï¼Œå°±è¶Šæ˜¯èƒ½å¤Ÿå‘ç°æ–°çš„ä¸œè¥¿ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘è®¤ä¸ºæœ‰ä»·å€¼çš„é—®é¢˜æˆ‘ä¼šè®©ä»–åœ¨æ„è¯†æˆ–æ½œæ„è¯†ä¸­å¾…çŸ­åˆ™ä¸€ä¸ªæ˜ŸæœŸï¼Œé•¿åˆ™ä¸€ä¸ªæœˆï¼ˆè§†é—®é¢˜å¤§å°è€Œå®šï¼‰ï¼Œåˆ©ç”¨èµ°è·¯åƒé¥­çš„æ—¶é—´ç¢ç£¨ï¼ˆæˆ‘å‘ç°å¾ˆå¤šæˆ‘ä½©æœçš„äººä¹Ÿéƒ½æœ‰è¿™ä¸ªä¹ æƒ¯ï¼‰ï¼Œæœ‰æ—¶å³ä¾¿å·²ç»æƒ³é€šäº†å†™ä¸‹æ¥äº†å‘å‡ºå»äº†ï¼Œå¤§è„‘ä»ç„¶è¿˜æ˜¯ä¼šåœ¨å›å‘³é—®é¢˜ï¼Œè¿˜æ²¡æœ‰æŠŠå®ƒæ’¤å‡ºæ½œæ„è¯†ï¼Œç„¶åçœ‹åˆ°æŸç¯‡æ–‡ç« æˆ–æŸæœ¬ä¹¦çš„æ—¶å€™å¿½ç„¶åˆæœ‰æ‰€æ–°çš„æ„Ÿæ‚Ÿã€‚</p><p>èƒ½å¤ŸæŠŠé—®é¢˜é•¿æ—¶é—´åœé åœ¨æ½œæ„è¯†ä¸­æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œèƒ½å¤Ÿå¸¦æ¥å¾ˆå¤§çš„å¥½å¤„ï¼Œåœç•™å¾—è¶Šé•¿ä½ è¶Šç¢ç£¨å¾—é€å½»ï¼Œæ¯”åˆ«äººçœ‹åˆ°çš„å°±è¶Šå¤šã€‚æˆ‘ä»¬å¿…é¡»è¦å¸¦ç€é—®é¢˜çš„çœ¼é•œçœ‹å¾…äº‹ç‰©æ‰èƒ½å‘ç°æ–°çš„è§†è§’ï¼Œå¦åˆ™å°±ä¼šå‡ºç°è§†è€Œä¸è§æ•ˆåº”ï¼Œåˆ«çš„ä¸è¯´ï¼Œå¹¿ä¸ºäººçŸ¥çš„ä¾‹å­æ˜¯é˜¿åŸºç±³å¾·çš„â€œå°¤é‡Œå¡ï¼â€ï¼Œå¦‚æœä¸æ˜¯é•¿æ—¶é—´ç¢ç£¨ç€ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ç›´æŠŠå®ƒæ”¾åœ¨æ€ç»´ä¸­ï¼Œæ˜¯ä¸ä¼šä»æ´—æ¾¡é¢†æ‚Ÿåˆ°â€œæ’æ°´æµ‹ä½“ç§¯â€çš„ï¼Œå¦åˆ™ä»–æ´—äº†é‚£ä¹ˆå¤šå¹´æ¾¡æ€ä¹ˆä¸æ—©å‘ç°å‘¢ï¼Ÿ[5]</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ ä¹ æƒ¯äº†æ€è€ƒé—®é¢˜ï¼Œå°±æ€»ä¼šæœ‰ä¸œè¥¿å†™ï¼Œå…ˆæœ‰æ€è€ƒï¼Œç„¶åæœ‰æ€»ç»“ï¼Œç„¶ååœ¨æ€»ç»“ä¸­è¿›ä¸€æ­¥æ€è€ƒã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¯•è¯•æŠŠä¸æˆç†Ÿçš„æƒ³æ³•å†™ä¸‹æ¥ï¼Œè¯•å›¾æ•´ç†æˆæ¡ç†æ¸…æ™°çš„æ–‡å­—ï¼Œç„¶åçœ‹çœ‹èƒ½å¦åœ¨æ•´ç†çš„è¿‡ç¨‹ä¸­èµ°å¾—æ›´è¿œã€‚è¿™å¾€å¾€æ˜¯å¯è¡Œçš„ã€‚æ¯”å¦‚è¿™ç¯‡æ–‡ç« åœ¨æˆ‘çš„ç®€è®°é‡Œé¢åŸæœ¬å…¶å®åªæœ‰ä¸‰è¡Œå­—ï¼ˆåŒ…å«å¤§çº¦åæ¥ä¸ªå¤‡å¿˜å…³é”®è¯ï¼‰ï¼Œè€Œæœ€åˆåœ¨æˆ‘çš„å¤§è„‘é‡Œé¢å…¶å®åªæœ‰ä¸€ä¸ªèµ°è·¯æ—¶å†’å‡ºæ¥çš„é—®é¢˜â€”â€”ä¸ºä»€ä¹ˆè¦å†™åšå®¢ï¼Ÿ</p><p>â€”</p><p>[1] ä½ å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘æ”¶è—çš„ä¸€äº›ç²¾å½©ä¸»é¢˜ã€‚</p><p>[2] å°½ç®¡æˆ‘å¹¶ä¸å®Œå…¨åŒæ„è¿™å¥è¯æœ¬èº«ï¼Œä½†å®ƒè¿™ç§è§£å†³é—®é¢˜é“¾ä¸Šæ›´åŸºæœ¬ç¯èŠ‚çš„é—®é¢˜çš„ç²¾ç¥æ˜¯æˆ‘èµåŒçš„ã€‚</p><p>[3] ã€Šå½±å“åŠ› 2ã€‹è¿™ä¸ªåå­—èµ·å¾—å¾ˆèªæ˜ï¼Œå…¶å®å®ƒå¹¶ä¸æ˜¯ã€Šå½±å“åŠ›ã€‹çš„ä½œè€…å†™çš„ã€‚</p><p>[4] æˆ‘å¿˜äº†è¿™åˆ™å®éªŒçš„å‡ºå¤„äº†ï¼Œä½†å®éªŒçš„ç²¾ç¥æ˜¯è®°å¿†çŠ¹æ–°çš„ï¼Œå“ªä½åŒå­¦è®°å¾—åŸå§‹å‡ºå¤„çš„éº»çƒ¦æé†’æˆ‘ä¸€ä¸‹ã€‚</p><p>[5] å¯¹äºé˜¿åŸºç±³å¾·è¿™ä¸ªæ•…äº‹çš„çœŸå®æ€§æ˜¯æœ‰äº‰è®®çš„ï¼Œæ¯•ç«Ÿå‡ åƒå¹´ä¹…è¿œçš„äº‹æƒ…è°å¼„å¾—æ¸…å‘¢ã€‚ä½†æ˜¯æ•…äº‹çš„é“ç†æ˜¯å¾ˆæœ¬è´¨çš„ï¼Œæˆ‘ä»¬å¹³æ—¶ä¹Ÿç»å¸¸æœ‰ç±»ä¼¼çš„ä½“éªŒï¼ŒåŠ ä¸Šé˜¿åŸºç±³å¾·çš„â€œå°¤é‡Œå¡â€å®åœ¨å¤ªå‡ºåäº†ï¼Œæ‰€ä»¥æˆ‘ç›¸ä¿¡ç”¨ç”¨æ— å¦¨ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a class="link"   href="http://mindhacks.cn/2009/02/15/why-you-should-start-blogging-now/" >ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢<i class="fas fa-external-link-alt"></i></a></p>]]></content>
      
      
      <categories>
          
          <category> å¿ƒè·¯å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascriptï¼ŒåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
