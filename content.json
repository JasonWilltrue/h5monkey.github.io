{"meta":{"title":"Mario","subtitle":"ğŸ“Œå¥½å‰ç«¯æ‰åˆ†å¯¹é”™ï¼Œæˆå¹´äººåªåˆ†åˆ©å¼Š","description":"å¥½å‰ç«¯æ‰åˆ†å¯¹é”™ï¼Œæˆå¹´äººåªåˆ†åˆ©å¼Š","author":"Codding","url":"http://mariogogogo.github.io"},"pages":[{"title":"ğŸ‘¨ğŸ»â€ğŸ’» å…³äºæˆ‘","date":"2017-09-10T16:00:00.000Z","updated":"2019-11-05T05:50:48.000Z","comments":false,"path":"about/index.html","permalink":"http://mariogogogo.github.io/about/index.html","excerpt":"","text":"è”ç³»æ–¹å¼ æ‰‹æœºï¼š137****0892 Emailï¼š148373644@qq.com QQ/å¾®ä¿¡å·ï¼š148373644 ä¸ªäººä¿¡æ¯ Mario/ç”·/1986 æœ¬ç§‘/æ ‘äººå¤§å­¦ å·¥ä½œå¹´é™ï¼š11 å¹´ å¾®åšï¼šè¢«å’Œè°å…·ä½“åŸå› ä¸è¯¦ ğŸ˜‚ æŠ€æœ¯åšå®¢ï¼šhttp://h5web.cc Githubï¼šhttp://github.com/MarioGogogo æœŸæœ›èŒä½ï¼šWeb å‰ç«¯é«˜çº§ç¨‹åºå‘˜ æœŸæœ›è–ªèµ„ï¼šç¨å‰æœˆè–ª 15k~20kï¼Œç‰¹åˆ«å–œæ¬¢çš„å…¬å¸å¯ä¾‹å¤– æœŸæœ›åŸå¸‚ï¼šæ­å· å·¥ä½œç»å†ABC å…¬å¸ ï¼ˆ 2012 å¹´ 9 æœˆ ~ 2014 å¹´ 9 æœˆ ï¼‰DEF é¡¹ç›®æˆ‘åœ¨æ­¤é¡¹ç›®è´Ÿè´£äº†å“ªäº›å·¥ä½œï¼Œåˆ†åˆ«åœ¨å“ªäº›åœ°æ–¹åšå¾—å‡ºè‰²/å’Œåˆ«äººä¸ä¸€æ ·/æˆé•¿å¿«ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€å›°éš¾çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæˆ‘é‡‡å–äº†ä»€ä¹ˆæªæ–½ï¼Œæœ€åç»“æœå¦‚ä½•ã€‚è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€è‡ªè±ªçš„æŠ€æœ¯ç»†èŠ‚æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Œå®æ–½å‰å’Œå®æ–½åçš„æ•°æ®å¯¹æ¯”å¦‚ä½•ï¼ŒåŒäº‹å’Œé¢†å¯¼å¯¹æ­¤çš„ååº”å¦‚ä½•ã€‚ GHI é¡¹ç›®æˆ‘åœ¨æ­¤é¡¹ç›®è´Ÿè´£äº†å“ªäº›å·¥ä½œï¼Œåˆ†åˆ«åœ¨å“ªäº›åœ°æ–¹åšå¾—å‡ºè‰²/å’Œåˆ«äººä¸ä¸€æ ·/æˆé•¿å¿«ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€å›°éš¾çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæˆ‘é‡‡å–äº†ä»€ä¹ˆæªæ–½ï¼Œæœ€åç»“æœå¦‚ä½•ã€‚è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€è‡ªè±ªçš„æŠ€æœ¯ç»†èŠ‚æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Œå®æ–½å‰å’Œå®æ–½åçš„æ•°æ®å¯¹æ¯”å¦‚ä½•ï¼ŒåŒäº‹å’Œé¢†å¯¼å¯¹æ­¤çš„ååº”å¦‚ä½•ã€‚ å…¶ä»–é¡¹ç›®ï¼ˆæ¯ä¸ªå…¬å¸å†™ 2~3 ä¸ªæ ¸å¿ƒé¡¹ç›®å°±å¥½äº†ï¼Œå¦‚æœä½ æœ‰éå¸¸å¤§é‡çš„é¡¹ç›®ï¼Œé‚£ä¹ˆæŒ‰åˆ†ç±»è¿›è¡Œåˆå¹¶ï¼Œæ¯ä¸€ç±»é€‰ä¸€ä¸ªå…¸å‹å†™å‡ºæ¥ã€‚å…¶ä»–çš„ä¸€ç¬”å¸¦è¿‡å³å¯ã€‚ï¼‰ JKL å…¬å¸ ï¼ˆ 2010 å¹´ 3 æœˆ ~ 2012 å¹´ 8 æœˆ ï¼‰MNO é¡¹ç›®æˆ‘åœ¨æ­¤é¡¹ç›®è´Ÿè´£äº†å“ªäº›å·¥ä½œï¼Œåˆ†åˆ«åœ¨å“ªäº›åœ°æ–¹åšå¾—å‡ºè‰²/å’Œåˆ«äººä¸ä¸€æ ·/æˆé•¿å¿«ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€å›°éš¾çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæˆ‘é‡‡å–äº†ä»€ä¹ˆæªæ–½ï¼Œæœ€åç»“æœå¦‚ä½•ã€‚è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€è‡ªè±ªçš„æŠ€æœ¯ç»†èŠ‚æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Œå®æ–½å‰å’Œå®æ–½åçš„æ•°æ®å¯¹æ¯”å¦‚ä½•ï¼ŒåŒäº‹å’Œé¢†å¯¼å¯¹æ­¤çš„ååº”å¦‚ä½•ã€‚ PQR é¡¹ç›®æˆ‘åœ¨æ­¤é¡¹ç›®è´Ÿè´£äº†å“ªäº›å·¥ä½œï¼Œåˆ†åˆ«åœ¨å“ªäº›åœ°æ–¹åšå¾—å‡ºè‰²/å’Œåˆ«äººä¸ä¸€æ ·/æˆé•¿å¿«ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€å›°éš¾çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæˆ‘é‡‡å–äº†ä»€ä¹ˆæªæ–½ï¼Œæœ€åç»“æœå¦‚ä½•ã€‚è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€è‡ªè±ªçš„æŠ€æœ¯ç»†èŠ‚æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Œå®æ–½å‰å’Œå®æ–½åçš„æ•°æ®å¯¹æ¯”å¦‚ä½•ï¼ŒåŒäº‹å’Œé¢†å¯¼å¯¹æ­¤çš„ååº”å¦‚ä½•ã€‚ å…¶ä»–é¡¹ç›®ï¼ˆæ¯ä¸ªå…¬å¸å†™ 2~3 ä¸ªæ ¸å¿ƒé¡¹ç›®å°±å¥½äº†ï¼Œå¦‚æœä½ æœ‰éå¸¸å¤§é‡çš„é¡¹ç›®ï¼Œé‚£ä¹ˆæŒ‰åˆ†ç±»è¿›è¡Œåˆå¹¶ï¼Œæ¯ä¸€ç±»é€‰ä¸€ä¸ªå…¸å‹å†™å‡ºæ¥ã€‚å…¶ä»–çš„ä¸€ç¬”å¸¦è¿‡å³å¯ã€‚ï¼‰ å¼€æºé¡¹ç›®å’Œä½œå“ï¼ˆè¿™ä¸€æ®µç”¨äºæ”¾ç½®å·¥ä½œä»¥å¤–çš„ã€å¯è¯æ˜ä½ çš„èƒ½åŠ›çš„ææ–™ï¼‰ å¼€æºé¡¹ç›®ï¼ˆå¯¹äºç¨‹åºå‘˜æ¥è®²ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯” Show me the code èƒ½æœ‰è¯´æœåŠ›äº†ï¼‰ STUï¼šé¡¹ç›®çš„ç®€è¦è¯´æ˜ï¼ŒStar å’Œ Fork æ•°å¤šçš„å¯ä»¥æ³¨æ˜ WXYZï¼šé¡¹ç›®çš„ç®€è¦è¯´æ˜ï¼ŒStar å’Œ Fork æ•°å¤šçš„å¯ä»¥æ³¨æ˜ æŠ€æœ¯æ–‡ç« ï¼ˆæŒ‘é€‰ä½ å†™ä½œæˆ–ç¿»è¯‘çš„æŠ€æœ¯æ–‡ç« ï¼Œå¥½çš„æ–‡ç« å¯ä»¥ä»ä¾§é¢è¯å®ä½ çš„è¡¨è¾¾å’Œæ²Ÿé€šèƒ½åŠ›ï¼Œä¹Ÿå¸®åŠ©æ‹›è˜æ–¹æ›´äº†è§£ä½ ï¼‰ ä¸€ä¸ªäº§å“ç»ç†çœ¼ä¸­çš„äº‘è®¡ç®—ï¼šå‰ç”Ÿä»Šä¸–å’Œæœªæ¥ æ¥è‡ª HeroKu çš„ HTTP API è®¾è®¡æŒ‡å—(ç¿»è¯‘æ–‡ç« ) ï¼ˆ å¥½çš„ç¿»è¯‘æ–‡ç« å¯ä»¥ä¾§è¯ä½ å¯¹è‹±æ–‡æŠ€æœ¯æ–‡æ¡£çš„é˜…è¯»èƒ½åŠ›ï¼‰ æ¼”è®²å’Œè®²ä¹‰ï¼ˆæ”¾ç½®ä½ ä»£è¡¨å…¬å¸åœ¨ä¸€äº›æŠ€æœ¯ä¼šè®®ä¸Šåšè¿‡çš„æ¼”è®²ï¼Œä»¥åŠä½ åœ¨å…¬å¸åˆ†äº«æ—¶åˆ¶ä½œçš„è®²ä¹‰ï¼‰ 2014 æ¶æ„å¸ˆå¤§ä¼šæ¼”è®²ï¼šå¦‚ä½•é€šè¿‡ Docker ä¼˜åŒ–å†…éƒ¨å¼€å‘ 9 æœˆå…¬å¸å†…éƒ¨åˆ†äº«ï¼šäº‘è®¡ç®—çš„å‰ç”Ÿä»Šä¸– æŠ€èƒ½æ¸…å•ï¼ˆæˆ‘ä¸€èˆ¬ä¸»å¼ å°†æŠ€èƒ½æ¸…å•å†™å…¥åˆ°å·¥ä½œç»å†é‡Œè¾¹å»ã€‚ä¸è¿‡å¾ˆéš¾å®Œæ•´ï¼Œæ‰€ä»¥æœ‰è¿™ä¹ˆä¸€æ®µä¹Ÿä¸é”™ï¼‰ ä»¥ä¸‹å‡ä¸ºæˆ‘ç†Ÿç»ƒä½¿ç”¨çš„æŠ€èƒ½ Web å¼€å‘ï¼šPHP/Hack/Node Web æ¡†æ¶ï¼šThinkPHP/Yaf/Yii/Lavaral/LazyPHP å‰ç«¯æ¡†æ¶ï¼šBootstrap/AngularJS/EmberJS/HTML5/Cocos2dJS/ionic å‰ç«¯å·¥å…·ï¼šBower/Gulp/SaSS/LeSS/PhoneGap æ•°æ®åº“ç›¸å…³ï¼šMySQL/Mogoodb ç‰ˆæœ¬ç®¡ç†ã€æ–‡æ¡£å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ï¼šSvn/Git/ è‡´è°¢æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»æˆ‘çš„ç®€å†ï¼ŒæœŸå¾…èƒ½æœ‰æœºä¼šå’Œæ‚¨å…±äº‹ã€‚"},{"title":"å½’æ¡£","date":"2017-09-20T12:49:56.000Z","updated":"2019-11-05T05:49:56.000Z","comments":false,"path":"archives/index.html","permalink":"http://mariogogogo.github.io/archives/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-01-04T16:00:00.000Z","updated":"2021-06-17T03:29:06.749Z","comments":false,"path":"categories/index.html","permalink":"http://mariogogogo.github.io/categories/index.html","excerpt":"","text":""},{"title":"æœç´¢","date":"2021-02-20T01:52:21.083Z","updated":"2019-11-05T05:50:10.000Z","comments":true,"path":"search/index.html","permalink":"http://mariogogogo.github.io/search/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-01-04T16:00:00.000Z","updated":"2021-06-17T03:29:22.919Z","comments":false,"path":"tags/index.html","permalink":"http://mariogogogo.github.io/tags/index.html","excerpt":"","text":""},{"title":"links","date":"2020-05-13T06:16:07.000Z","updated":"2021-06-17T03:30:50.170Z","comments":true,"path":"links/index.html","permalink":"http://mariogogogo.github.io/links/index.html","excerpt":"","text":""}],"posts":[{"title":"äºŒå‰æ ‘çš„å±‚åºéå†","slug":"ç®—æ³•-äºŒå‰æ ‘çš„å±‚æ¬¡éå†","date":"2021-02-20T16:00:00.000Z","updated":"2021-02-21T13:51:32.000Z","comments":true,"path":"2021/02/21/ç®—æ³•-äºŒå‰æ ‘çš„å±‚æ¬¡éå†/","link":"","permalink":"http://mariogogogo.github.io/2021/02/21/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/","excerpt":"å­¦ä¼šäºŒå‰æ ‘çš„å±‚åºéå†ï¼Œå¯ä»¥ä¸€å£æ°”æ’¸å®Œleetcodeä¸Šå…«é“é¢˜ç›®: 107.äºŒå‰æ ‘çš„å±‚æ¬¡éå†II 199.äºŒå‰æ ‘çš„å³è§†å›¾ 637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ 429.Nå‰æ ‘çš„å‰åºéå† 515.åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼ 116.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ 117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆII","text":"å­¦ä¼šäºŒå‰æ ‘çš„å±‚åºéå†ï¼Œå¯ä»¥ä¸€å£æ°”æ’¸å®Œleetcodeä¸Šå…«é“é¢˜ç›®: 107.äºŒå‰æ ‘çš„å±‚æ¬¡éå†II 199.äºŒå‰æ ‘çš„å³è§†å›¾ 637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ 429.Nå‰æ ‘çš„å‰åºéå† 515.åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼ 116.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ 117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆII äºŒå‰æ ‘çš„å±‚æ¬¡éå† IIé¢˜ç›®é“¾æ¥:https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ã€‚ (å³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€ å±‚ä»å·¦å‘å³éå†) æ€è·¯1.å‰é¢éƒ½æ˜¯å±‚æ¬¡éå†å¥—è·¯ 2.æœ€åç»“æœå†ç”¨æ•°ç»„reverseæ–¹æ³• å›¾è§£ ä»£ç 1234567891011121314151617var levelOrderBottom = function(root) &#123; if(!root) return [] const q = [[root,0]] const res = [] while(q.length &gt; 0)&#123; const [n,level] =q.shift() if(!res[level])&#123; res.push([n.val]) &#125;else&#123; res[level].push(n.val) &#125; if(n.left) q.push([n.left,level+1]) if(n.right)q.push([n.right,level+1]) &#125; //åè½¬ return res.reverse()&#125;; 199.äºŒå‰æ ‘çš„å³è§†å›¾é¢˜ç›®é“¾æ¥:https://leetcode-cn.com/problems/binary-tree-right-side-view/ ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ 123456789è¾“å…¥: [1,2,3,null,5,null,4]è¾“å‡º: [1, 3, 4]è§£é‡Š: 1 &lt;--- / \\2 3 &lt;--- \\ \\ 5 4 &lt;--- æ€è·¯ å±‚åºéå†çš„æ—¶å€™ï¼Œ åˆ¤æ–­æ˜¯å¦éå†åˆ°å•å±‚çš„æœ€åé¢çš„å…ƒç´  (é‡ç‚¹åˆ†æ å¯¹æ¯ä¸€å±‚qçš„æ•°ç»„è¿›è¡Œwhile lenâ€“æ“ä½œ) å¦‚æœæ˜¯ï¼Œå°±æ”¾è¿›resultæ•°ç»„ä¸­ï¼Œéšåè¿”å›result å°±å¯ä»¥äº†ã€‚ å›¾è§£ ä»£ç 12345678910111213141516171819var rightSideView = function(root) &#123; if(!root) return [] const q = [root] const res = [] while(q.length &gt; 0)&#123; let len = q.length //å¯¹æ¯ä¸€å±‚è¿›è¡Œéå† [1] [2,3 ] [4,5,6] [7] while(len)&#123; let n = q.shift() //æ¯ä¸€å±‚æœ€åä¸€ä½ if(len === 1) res.push(n.val) if(n.left) q.push(n.left) if(n.right) q.push(n.right) len-- &#125; &#125; return res&#125;; 637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼é¢˜ç›®é“¾æ¥:https://leetcode-cn.com/problems/average-of-levels-in-binary-tree/ ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘, è¿”å›ä¸€ä¸ªç”±æ¯å±‚èŠ‚ç‚¹å¹³å‡å€¼ç»„æˆçš„æ•°ç»„ã€‚ 12345678910è¾“å…¥ï¼š 3 / \\ 9 20 / \\ 15 7è¾“å‡ºï¼š[3, 14.5, 11]è§£é‡Šï¼šç¬¬ 0 å±‚çš„å¹³å‡å€¼æ˜¯ 3 , ç¬¬1å±‚æ˜¯ 14.5 , ç¬¬2å±‚æ˜¯ 11 ã€‚å› æ­¤è¿”å› [3, 14.5, 11] ã€‚ æ€è·¯ ç”¨å±‚åºéå†çš„æ–¹æ³•ã€‚ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—å»éå†èŠ‚ç‚¹ã€‚ ç”¨ for å¾ªç¯æ§åˆ¶ä¸€å±‚çš„èŠ‚ç‚¹é€ä¸ªå‡ºåˆ—ï¼ŒèŠ‚ç‚¹å€¼ç´¯åŠ æ±‚å’Œã€‚ èŠ‚ç‚¹å‡ºåˆ—çš„åŒæ—¶ï¼Œä¸‹ä¸€å±‚çš„å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œåœ¨ for å¾ªç¯ç»“æŸæ—¶ï¼Œé˜Ÿåˆ—ä¸­å°±å…¨æ˜¯ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ã€‚ æ­¤æ—¶å½“å‰å±‚çš„æ±‚å’Œä¹Ÿå¥½äº†ï¼Œé™¤ä»¥å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œå°±æ˜¯å½“å‰å±‚çš„å¹³å‡å€¼ï¼ŒåŠ å…¥ç»“æœæ•°ç»„ã€‚ æ¥ç€å¤„ç†ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œå°±æ„å»ºå¥½äº†ç»“æœæ•°ç»„ã€‚ å›¾è§£ ä»£ç 1234567891011121314151617181920var averageOfLevels = function(root) &#123; if(!root) return [] const p = [root] const res = [] while(p.length&gt;0)&#123; let size = p.length //æ¯ä¸€å±‚çš„é•¿åº¦ let sum = 0 for(let i = 0; i&lt;size;i++)&#123; const n = p.shift() //æ¯ä¸€å±‚çš„æ€»å’Œ sum += n.val if(n.left) p.push(n.left) if(n.right) p.push(n.right) &#125; res.push(sum/size) &#125; return res&#125;; 429.Nå‰æ ‘çš„å±‚åºéå†é¢˜ç›®é“¾æ¥:https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/ ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ã€‚ (å³ä»å·¦åˆ°å³ï¼Œé€å±‚éå†)ã€‚ æ€è·¯å›¾è§£ä»£ç 12345678910111213141516var levelOrder = (root)=&gt;&#123; if(!root) return const p = [root] const res = [] while(p.length &gt; 0)&#123; const size = p.length const temp = [] for(let i = 0; i&lt; size;i++)&#123; const n = p.shift() temp.push(n.val) p.push(...n.children) &#125; res.push(temp) &#125; return res&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"äºŒå‰æ ‘çš„å…ˆä¸­åå±‚åºéå†","slug":"ç®—æ³•-äºŒå‰æ ‘çš„å…ˆä¸­åéå†","date":"2021-02-19T16:00:00.000Z","updated":"2021-02-21T05:38:28.000Z","comments":true,"path":"2021/02/20/ç®—æ³•-äºŒå‰æ ‘çš„å…ˆä¸­åéå†/","link":"","permalink":"http://mariogogogo.github.io/2021/02/20/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%85%88%E4%B8%AD%E5%90%8E%E9%81%8D%E5%8E%86/","excerpt":"äºŒå‰æ ‘çš„å››ç§éå†æ–¹å¼ï¼šå…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ã€å±‚åºéå†ã€‚","text":"äºŒå‰æ ‘çš„å››ç§éå†æ–¹å¼ï¼šå…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ã€å±‚åºéå†ã€‚ æ¨¡æ‹Ÿä¸€æ£µäºŒå‰æ ‘1234567891011121314151617181920212223242526272829exports.root = &#123; val: 1, left: &#123; val: 2, left: &#123; val: 4, left: null, right: null, &#125;, right: &#123; val: 5, left: null, right: null, &#125;, &#125;, right: &#123; val: 3, left: &#123; val: 6, left: null, right: null, &#125;, right: &#123; val: 7, left: null, right: null, &#125;, &#125;,&#125;; å…ˆåºéå†ç®—æ³•å£è¯€ è®¿é—®æ ¹èŠ‚ç‚¹ å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œå…ˆåºéå† å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå† å›¾è§£ å…ˆåºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰12345678const preorder = (root)=&gt;&#123; if(root)&#123; //éå†å·¦èŠ‚ç‚¹ preorder(root.left) //éå†å³èŠ‚ç‚¹ preorder(root.right) &#125;&#125; å…ˆåºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰ æ€è·¯ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¿­ä»£çš„æ–¹å¼å®ç°æ–¹æ³•ä¸€çš„é€’å½’å‡½æ•°ï¼Œä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼ŒåŒºåˆ«åœ¨äºé€’å½’çš„æ—¶å€™éšå¼åœ°ç»´æŠ¤äº†ä¸€ä¸ªæ ˆï¼Œè€Œæˆ‘ä»¬åœ¨è¿­ä»£çš„æ—¶å€™éœ€è¦æ˜¾å¼åœ°å°†è¿™ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ¥ï¼Œå…¶ä½™çš„å®ç°ä¸ç»†èŠ‚éƒ½ç›¸åŒ å›¾è§£ æ€è·¯ å‰åºéå†æ˜¯ä¸­å·¦å³ï¼Œæ¯æ¬¡å…ˆå¤„ç†çš„æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆå°†è·ŸèŠ‚ç‚¹æ”¾å…¥æ ˆä¸­ï¼Œ ç„¶åå°†å³èŠ‚ç‚¹åŠ å…¥æ ˆï¼Œå†åŠ å…¥å·¦èŠ‚ç‚¹ã€‚ ä¸ºä»€ä¹ˆè¦å…ˆåŠ å…¥ å³èŠ‚ç‚¹ï¼Œå†åŠ å…¥å·¦èŠ‚ç‚¹å‘¢ï¼Ÿ å› ä¸ºè¿™æ ·å‡ºæ ˆçš„æ—¶å€™æ‰æ˜¯ä¸­å·¦å³çš„é¡ºåºã€‚ 12345678910const preorder = (root)=&gt;&#123; if(!root) return const stack = [root] while(stack.length &gt; 0)&#123; const n = stack.pop() //æ‹¿åˆ°n.val if(n.right) stack.push(n.right) //ä¸ºä»€ä¹ˆè¦å…ˆå­˜rightå€¼ å› ä¸ºæ•°ç»„åè¿›å…ˆå‡º if(n.left) stack.push(n.left) &#125;&#125; ä¸­åºéå†ç®—æ³•å£è¯€ å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œä¸­åºéå† è®¿é—®æ ¹èŠ‚ç‚¹ å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå† å›¾è§£ ä¸­åºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰12345678910const inorderTraversal = (root)=&gt;&#123; const midSort = (root)=&gt;&#123; if(!root) return midSort(root.left) res.push(root.val) midSort(root.right) &#125; return midSort(root)&#125; ä¸­åºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰å›¾è§£ æ€è·¯ä¸­åºéå†æ˜¯å·¦ä¸­å³ï¼Œå…ˆè®¿é—®çš„æ˜¯äºŒå‰æ ‘é¡¶éƒ¨çš„èŠ‚ç‚¹ï¼Œç„¶åä¸€å±‚ä¸€å±‚å‘ä¸‹è®¿é—®ã€‚ ç›´åˆ°åˆ°è¾¾æ ‘å·¦é¢çš„æœ€åº•éƒ¨ï¼Œå†å¼€å§‹å¤„ç†èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯åœ¨æŠŠèŠ‚ç‚¹çš„æ•°å€¼æ”¾è¿›resultæ•°ç»„ä¸­ï¼‰ï¼Œè¿™å°±é€ æˆäº†å¤„ç†é¡ºåºå’Œè®¿é—®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€‚ 1234567891011121314151617const inorderTraversal = (root)=&gt;&#123; if(!root) return let stack = [] //è®¾ç½®ä¸€ä¸ªç©ºæ ˆ let p = root //è®¾ç½®æŒ‡ while(stack.length || p)&#123; /*****ä¸€ç›´æ‰¾å·¦èŠ‚ç‚¹****/ while(p)&#123; stack.push(p) //æ¯å½“å·¦å­æ ‘æœ‰å€¼ [root left left left] p = p.left &#125; /*****ä¸€ç›´æ‰¾å·¦èŠ‚ç‚¹****/ //æ‰¾å®Œæ‰€æœ‰å·¦èŠ‚ç‚¹ æ¨å‡ºæ ˆ [root left1 left2 left3] ==&gt; [left3 left2 left1 root ] const n = stack.pop() //æ‹¿n.val p = n.right &#125;&#125; ååºéå†ç®—æ³•å£è¯€ å¯¹æ ¹èŠ‚ç‚¹å·¦å­æ ‘è¿›è¡Œä¸­åºéå† å¯¹æ ¹èŠ‚ç‚¹å³å­æ ‘è¿›è¡Œå…ˆåºéå† è®¿é—®æ ¹èŠ‚ç‚¹ å›¾è§£ ååºéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰1234567let res = []const postorderTraversal = (root)=&gt;&#123; if(!root) return postorderTraversal(root.left) postorderTraversal(root.right) res.push(root.val)&#125; ååºéå†ï¼ˆè¿­ä»£ç‰ˆæœ¬ï¼‰æ€è·¯ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¨å·§çš„åŠæ³•ï¼‰ å¦‚æœæˆ‘ä»¬æŠŠå‰åºéå†çš„ list.push(node.val) å˜æ›´ä¸º list.unshift(node.val) ï¼ˆéå†ç»“æœé€†åºï¼‰ï¼Œ é‚£ä¹ˆéå†é¡ºåºå°±ç”± æ ¹å·¦å³ å˜æ›´ä¸º å³å·¦æ ¹ã€‚ ç„¶åæˆ‘ä»¬ä»…éœ€å°† å³å·¦æ ¹ å˜æ›´ä¸º å·¦å³æ ¹ å³å¯å®Œæˆååºé å›¾è§£ 123456789101112const postorderTraversal = (root)=&gt;&#123; let list = [] //éå†ç»“æœ let stack = [root] // if(!root) return while(stack.length &gt;0)&#123; const n = stack.pop() // [n.left,n.right] list.unshift(n.val) //æ ¹æ˜¯æœ€ååŠ çš„ æœ€é‡Œé¢ [ n.left n.right n.val] if(n.left) stack.push(n.left) if(n.right) stack.push(n.right) &#125; return list&#125; å±‚åºéå† é¢˜ç›®æ¥æºï¼šLeetCodeï¼š102 äºŒå‰æ ‘çš„å±‚åºéå† ğŸ‘‘ç±»ä¼¼å¹¿åº¦ä¼˜å…ˆéå†äºŒå‰æ ‘ã€‚ ğŸ‘‘éå†å·¥ç¨‹ä¸­ï¼Œè®°å½•æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å±‚çº§ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸åŒçš„æ•°ç»„ä¸­ã€‚ å›¾è§£ æ€è·¯å…ˆå†™ä¸€ä¸ªå¹¿åº¦ä¼˜å…ˆéå† åŠ å…¥å±‚çº§è®¡ç®— 12345678910111213141516171819var levelOrder = function (root) &#123; if(!root) return [] const q = [[root,0]] //æŠŠé¡¶å±‚åŠ å…¥æ ˆä¸­ const res = [] while(q.length &gt; 0)&#123; //æ¨å‡ºæ¯ä¸€ä¸ªæ ˆä¸­é¡¶å±‚èŠ‚ç‚¹ const [n,level]= q.shift() if(!res[level])&#123; res.push([n.val]) &#125;else&#123; res[level].push(n.val) &#125; //å¦‚æœå·¦å³èŠ‚ç‚¹éƒ½å­˜åœ¨åˆ™å±‚çº§+1 if(n.left) q.push([n.left,level+1]) if(n.right) q.push([n.right,level+1]) &#125; return res&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"æ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†","slug":"ç®—æ³•-æ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†","date":"2021-02-18T16:00:00.000Z","updated":"2021-02-20T15:27:38.000Z","comments":true,"path":"2021/02/19/ç®—æ³•-æ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†/","link":"","permalink":"http://mariogogogo.github.io/2021/02/19/%E7%AE%97%E6%B3%95-%E6%B7%B1%E5%BA%A6%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/","excerpt":"å…ˆæ¥å­¦ä¸€ä¸‹æ ‘çš„æ·±åº¦ä¸å¹¿åº¦ä¼˜å…ˆ","text":"å…ˆæ¥å­¦ä¸€ä¸‹æ ‘çš„æ·±åº¦ä¸å¹¿åº¦ä¼˜å…ˆ æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€1.è®¿é—®æ ¹èŠ‚ç‚¹ 2.å¯¹æ ¹èŠ‚ç‚¹chilidrenæŒ¨ä¸ªè¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†ï¼ˆé€’å½’ï¼‰ 1234567891011121314151617181920212223242526272829303132// dfs.jsconst root = &#123; val: &#x27;a&#x27;, children: [ &#123; val: &#x27;b&#x27;, children: [ &#123; val: &#x27;c&#x27;, children: [], &#125;, &#123; val: &#x27;d&#x27;, children: [], &#125;, ], &#125;, &#123; val: &#x27;e&#x27;, children: [ &#123; val: &#x27;f&#x27;, children: [], &#125;, &#123; val: &#x27;g&#x27;, children: [], &#125;, ], &#125;, ],&#125;; dfs123const dfs = (root)=&gt;&#123; root.chilidren.forEach(dfs)&#125; ä¸€è¡Œä»£ç  æ˜¯ä¸æ˜¯å¾ˆç®€å• å¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•å£è¯€ bfs123456789101112const bfs = (root)=&gt;&#123; //æ–°å»ºé˜Ÿåˆ— å…¥é˜Ÿ const q = [root] while(q.length &gt; 0)&#123; //æŠŠé˜Ÿå¤´å‡ºé˜Ÿå qå°±ç©ºäº† const n = q.shift() //è¿™é‡Œå¯ä»¥æ‹¿åˆ°n.val,ç»§ç»­éå†children n.children.forEach(child =&gt;&#123; q.push(child) &#125;) &#125;&#125; æ ‘çš„éå†æ–¹å¼æ€»ä½“åˆ†ä¸ºä¸¤ç±»ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ï¼› å¸¸è§çš„ DFS ï¼š å…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ï¼›å¸¸è§çš„ BFS ï¼š å±‚åºéå†ï¼ˆå³æŒ‰å±‚éå†ï¼‰ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•å…¥é—¨æŒ‡å—","slug":"ç®—æ³•å…¥é—¨","date":"2021-02-17T16:00:00.000Z","updated":"2021-02-20T09:26:04.465Z","comments":true,"path":"2021/02/18/ç®—æ³•å…¥é—¨/","link":"","permalink":"http://mariogogogo.github.io/2021/02/18/%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8/","excerpt":"æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„é¢„ç®—æ³•: æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨ã€äºŒå‰æ ‘ã€å †ã€è·³è¡¨ã€å›¾ã€Tire æ ‘ç®—æ³•ï¼š é€’å½’ã€æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢ã€å“ˆå¸Œç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€å›æº¯ç®—æ³•ã€åŠ¨æ€è§„åˆ’ã€å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•","text":"æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„é¢„ç®—æ³•: æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨ã€äºŒå‰æ ‘ã€å †ã€è·³è¡¨ã€å›¾ã€Tire æ ‘ç®—æ³•ï¼š é€’å½’ã€æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢ã€å“ˆå¸Œç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€å›æº¯ç®—æ³•ã€åŠ¨æ€è§„åˆ’ã€å­—ç¬¦ä¸²åŒ¹é…ç®—æ³• ç®—æ³•å¤æ‚åº¦å¤æ‚åº¦åˆ†ææ³•åˆ™1ï¼‰å•æ®µä»£ç çœ‹é«˜é¢‘ï¼šæ¯”å¦‚å¾ªç¯ã€‚2ï¼‰å¤šæ®µä»£ç å–æœ€å¤§ï¼šæ¯”å¦‚ä¸€æ®µä»£ç ä¸­æœ‰å•å¾ªç¯å’Œå¤šé‡å¾ªç¯ï¼Œé‚£ä¹ˆå–å¤šé‡å¾ªç¯çš„å¤æ‚åº¦ã€‚3ï¼‰åµŒå¥—ä»£ç æ±‚ä¹˜ç§¯ï¼šæ¯”å¦‚é€’å½’ã€å¤šé‡å¾ªç¯ç­‰4ï¼‰å¤šä¸ªè§„æ¨¡æ±‚åŠ æ³•ï¼šæ¯”å¦‚æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°æ§åˆ¶ä¸¤ä¸ªå¾ªç¯çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆè¿™æ—¶å°±å–äºŒè€…å¤æ‚åº¦ç›¸åŠ ã€‚ æ—¶é—´å¤æ‚åº¦O(1)123let i = 0;i += 1;//æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡ O(n)123for (let i = 1; i &lt; n; i++) &#123; console.log(i);&#125; O(n^2)12345for (let i = 1; i &lt; n; i++) &#123; for (let j = 1; j &lt; n; j++) &#123; console.log(i, j); &#125;&#125; O(logN)123456let i = 1while(i&lt; n)&#123; console.log(i) i*=2&#125;2çš„å¤šå°‘æ¬¡æ–¹ === N ç©ºé—´å¤æ‚åº¦ ç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦ 0(1)123let i = 0;i += 1;//å£°æ˜äº†å•ä¸ªå˜é‡ å ç”¨å†…å­˜å°±æ˜¯1 O(n)12345let res = [];for (let i = 1; i &lt; n; i++) &#123; res.push(i);&#125;//resçš„ç©ºé—´å ç”¨ å–å†³äº n O(n^2)12345678let res = [];for (let i = 1; i &lt; n; i++) &#123; res.push(i); for (let j = 1; j &lt; n; j++) &#123; res[i].push(j); &#125;&#125;ç±»ä¼¼äºä¸€ä¸ªçŸ©é˜µ---- - å¤šç»´æ•°ç»„; å…¶ä»–æ¦‚å¿µä»€ä¹ˆæ˜¯çº¿æ€§çº¿æ€§è¡¨: çº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„.æ¯ä¸ªç°è¡Œè¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘.å¸¸è§çš„çº¿æ€§è¡¨ç»“æ„ï¼šæ•°ç»„ï¼Œé“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆç­‰ã€‚ ä»€ä¹ˆæ˜¯éçº¿æ€§é€’å½’ï¼šæ¯”å¦‚äºŒå‰æ ‘éå†å°±æ˜¯å…¸å‹çš„éçº¿æ€§éå†ç»“æ„ åˆ·é¢˜æŒ‡å— æ•°æ®ç»“æ„æ˜¯å·¥å…·ï¼Œç®—æ³•æ˜¯é€šè¿‡åˆé€‚çš„å·¥å…·è§£å†³ç‰¹å®šé—®é¢˜çš„åŠæ³• å…ˆåˆ·äºŒå‰æ ‘ï¼Œå…ˆåˆ·äºŒå‰æ ‘ï¼Œå…ˆåˆ·äºŒå‰æ ‘ï¼Œ ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºäºŒå‰æ ‘æ˜¯æœ€å®¹æ˜“åŸ¹å…»æ¡†æ¶æ€ç»´çš„ï¼Œè€Œä¸”å¤§éƒ¨åˆ†å¸¸è€ƒç®—æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯æ ‘çš„éå†é—®é¢˜","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://mariogogogo.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Vue-nextTickåŸç†","slug":"Vue-nextTickåŸç†","date":"2020-12-14T16:00:00.000Z","updated":"2021-01-05T05:15:35.000Z","comments":true,"path":"2020/12/15/Vue-nextTickåŸç†/","link":"","permalink":"http://mariogogogo.github.io/2020/12/15/Vue-nextTick%E5%8E%9F%E7%90%86/","excerpt":"1.äº†è§£nextTickçš„å®ç°åŸç† 2.äº†è§£æ•°æ®å˜åŒ–åˆ°DOMçš„å˜åŒ–æ˜¯å¼‚æ­¥è¿‡ç¨‹","text":"1.äº†è§£nextTickçš„å®ç°åŸç† 2.äº†è§£æ•°æ®å˜åŒ–åˆ°DOMçš„å˜åŒ–æ˜¯å¼‚æ­¥è¿‡ç¨‹ å…ˆäº†è§£ä¸‹å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ å¸¸è§**å®ä»»åŠ¡** setTimeout setInterval setImmediate script MessageChannel å¸¸è§**å¾®ä»»åŠ¡** Promise MutationObserver Object.observe(åºŸå¼ƒ) process.nextTickï¼ˆnodeï¼‰ 12345Vue.nextTick = nextTick; //èµ‹å€¼ç»™å¤§Vueçš„é™æ€æ–¹æ³•//å…¨å±€æŒ‚è½½ Vue.prototype.$nextTick = function (fn) &#123; return nextTick(fn, this)&#125;; é¦–å…ˆæŸ¥çœ‹æ˜¯å¦æµè§ˆå™¨æ”¯æŒsetImmediateè¿˜æœ‰Promise 123456789101112131415161718192021222324252627282930313233343536373839if (typeof Promise !== &#x27;undefined&#x27; &amp;&amp; isNative(Promise)) &#123; var p = Promise.resolve(); timerFunc = function () &#123; p.then(flushCallbacks); if (isIOS) &#123; setTimeout(noop); &#125; &#125;; isUsingMicroTask = true;&#125; else if (!isIE &amp;&amp; typeof MutationObserver !== &#x27;undefined&#x27; &amp;&amp; ( isNative(MutationObserver) || // PhantomJS and iOS 7.x MutationObserver.toString() === &#x27;[object MutationObserverConstructor]&#x27;)) &#123; // Use MutationObserver where native Promise is not available, // e.g. PhantomJS, iOS7, Android 4.4 // (#6466 MutationObserver is unreliable in IE11) var counter = 1; var observer = new MutationObserver(flushCallbacks); var textNode = document.createTextNode(String(counter)); observer.observe(textNode, &#123; characterData: true &#125;); timerFunc = function () &#123; counter = (counter + 1) % 2; textNode.data = String(counter); &#125;; isUsingMicroTask = true;&#125; else if (typeof setImmediate !== &#x27;undefined&#x27; &amp;&amp; isNative(setImmediate)) &#123; // Fallback to setImmediate. // Technically it leverages the (macro) task queue, // but it is still a better choice than setTimeout. timerFunc = function () &#123; setImmediate(flushCallbacks); &#125;;&#125; else &#123; // Fallback to setTimeout. timerFunc = function () &#123; setTimeout(flushCallbacks, 0); &#125;;&#125; nextTick123456789101112131415161718192021222324 callbacks = [] //ç¼“å­˜è¿›æ•°ç»„function nextTick (cb, ctx) &#123; var _resolve; callbacks.push(function () &#123; if (cb) &#123; try &#123; cb.call(ctx); &#125; catch (e) &#123; handleError(e, ctx, &#x27;nextTick&#x27;); &#125; &#125; else if (_resolve) &#123; _resolve(ctx); &#125; &#125;); if (!pending) &#123; pending = true; timerFunc(); &#125; //å¦‚æœæ²¡æœ‰ä¼ cb åˆ™è¿”å›promise å¯ä»¥æ¥.thenï¼ˆï¼‰æ–¹æ³• if (!cb &amp;&amp; typeof Promise !== &#x27;undefined&#x27;) &#123; return new Promise(function (resolve) &#123; _resolve = resolve; &#125;) &#125; é€šè¿‡åˆ¤æ–­ pending æ¥ç¡®å®šæ˜¯å¦éœ€è¦æ³¨å†Œå®å¾®ä»»åŠ¡ ã€‚ å½“ç¬¬ä¸€æ¬¡æ³¨å†Œçš„æ—¶å€™ï¼ŒæŠŠ pending è®¾ç½®ä¸º trueï¼Œè¡¨ç¤ºä»»åŠ¡é˜Ÿåˆ—å·²ç»åœ¨å¼€å§‹äº†ï¼ŒåŒä¸€æ—¶æœŸå†…æ— éœ€æ³¨å†Œäº† ç„¶ååœ¨ ä»»åŠ¡é˜Ÿåˆ— æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†æŠŠ pending è®¾ç½®ä¸º falseï¼ˆåœ¨ flushCallbacks ä¸­ï¼‰ flushCallbacks1234567891011var callbacks = [];var pending = false;function flushCallbacks () &#123; pending = false; var copies = callbacks.slice(0); callbacks.length = 0; for (var i = 0; i &lt; copies.length; i++) &#123; copies[i](); &#125;&#125; å®ä»»åŠ¡å’Œ å¾®ä»»åŠ¡ çš„å›è°ƒï¼Œéƒ½æ˜¯æ‰§è¡Œè¿™ä¸ª flushCallbacksï¼Œè¿™ä¸ªæ–¹æ³•ä½œç”¨ï¼š 1ã€å¤åˆ¶ä¸€é callbacks 2ã€æŠŠ åŸæ¥ callbacks æ¸…ç©º 3ã€éå† å¤åˆ¶çš„ callbacks ï¼Œç„¶åé€ä¸ªæ‰§è¡Œ ä¸€ä¸ªæœ‰æ„æ€çš„å°æµ‹è¯•123456789101112131415161718192021222324252627data()&#123; retrun &#123; msg: &quot;This is NextTick Page&quot; &#125;&#125;change () &#123; this.msg = &quot;hello vue&quot; console.log(&#x27;sync:&#x27;,this.$refs.msg.innerText) // &#x27;This is NextTick Page&#x27; this.$nextTick(()=&gt;&#123; console.log(&#x27;nextTick&#x27;,this.$refs.msg.innerText) // &#x27;hello vue&#x27; &#125;) this.$nextTick().then(()=&gt;&#123; console.log(&#x27;promise&#x27;,this.$refs.msg.innerText) // &#x27;hello vue&#x27; &#125;) &#125;, change1 () &#123; this.$nextTick(()=&gt;&#123; console.log(&#x27;nextTick&#x27;,this.$refs.msg.innerText) // &#x27;This is NextTick Page&#x27; &#125;) this.msg = &quot;hello vue&quot; console.log(&#x27;sync:&#x27;,this.$refs.msg.innerText) // &#x27;This is NextTick Page&#x27; this.$nextTick().then(()=&gt;&#123; console.log(&#x27;promise&#x27;,this.$refs.msg.innerText) // &#x27;hello vue&#x27; &#125;) &#125;, ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Œå› ä¸ºcallbackå‡½æ•°ä¼šä¼˜å…ˆpushè¿›å»$nextTickçš„cbå‡½æ•°ï¼Œä½†è¿™æ—¶å€™this.msgæ‰å¼€å§‹é‡æ–°èµ‹å€¼åŠ å…¥flushSchedulerQueueå‡½æ•°ï¼Œé‡æ–°æ¸²æŸ“æ˜¯å†åé¢ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªnextTickæ‹¿åˆ°çš„è¿˜æ˜¯æ—§çš„å€¼ æ€»ç»“nextTickæ˜¯è¦æŠŠæ‰§è¡Œçš„ä»»åŠ¡æ¨å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå†ä¸‹ä¸€ä¸ªtickåŒæ­¥æ‰§è¡Œ æ•°æ®æ”¹å˜åè§¦å‘äº†æ¸²æŸ“watcherçš„updateï¼Œä½†æ˜¯watcherçš„flushæ˜¯å†nexttIckåï¼Œæ‰€ä»¥é‡æ–°æ¸²æŸ“æ˜¯å¼‚æ­¥çš„","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vue-æ•°ç»„åŠ«æŒç›‘å¬åŸç†","slug":"Vue-æ•°ç»„åŠ«æŒç›‘å¬åŸç†","date":"2020-12-10T16:00:00.000Z","updated":"2021-01-05T05:07:36.000Z","comments":true,"path":"2020/12/11/Vue-æ•°ç»„åŠ«æŒç›‘å¬åŸç†/","link":"","permalink":"http://mariogogogo.github.io/2020/12/11/Vue-%E6%95%B0%E7%BB%84%E5%8A%AB%E6%8C%81%E7%9B%91%E5%90%AC%E5%8E%9F%E7%90%86/","excerpt":"å“åº”å¼æ•°æ®ä¸­å¯¹äºå¯¹è±¡æ–°å¢åˆ é™¤å±æ€§åŠæ•°ç»„çš„ä¸‹æ ‡è®¿é—®ä¿®æ”¹æ ¸æ·»åŠ æ•°æ®ç­‰å˜åŒ–æ˜¯è§‚å¯Ÿä¸åˆ°çš„ é€šè¿‡Vue.setä»¥åŠæ•°ç»„çš„Apiå¯ä»¥è§£å†³è¿™äº›é—®é¢˜æœ¬è´¨ä¸Šä»–ä»¬å†…éƒ¨æ‰‹åŠ¨åšäº†ä¾èµ–æ›´æ–°çš„æ´¾å‘","text":"å“åº”å¼æ•°æ®ä¸­å¯¹äºå¯¹è±¡æ–°å¢åˆ é™¤å±æ€§åŠæ•°ç»„çš„ä¸‹æ ‡è®¿é—®ä¿®æ”¹æ ¸æ·»åŠ æ•°æ®ç­‰å˜åŒ–æ˜¯è§‚å¯Ÿä¸åˆ°çš„ é€šè¿‡Vue.setä»¥åŠæ•°ç»„çš„Apiå¯ä»¥è§£å†³è¿™äº›é—®é¢˜æœ¬è´¨ä¸Šä»–ä»¬å†…éƒ¨æ‰‹åŠ¨åšäº†ä¾èµ–æ›´æ–°çš„æ´¾å‘ ä¸ºä»€ä¹ˆç›‘å¬ä¸äº† ä»ä¸Šé¢ä»£ç é‡Œï¼Œé¦–å…ˆç›‘å¬äº†modelæ•°ç»„é‡Œæ‰€æœ‰çš„å±æ€§ï¼Œç„¶åé€šè¿‡å„ç§æ•°ç»„çš„æ–¹æ³•æ¥ä¿®æ”¹å½“å‰æ•°ç»„ï¼Œå¾—å‡ºä»¥ä¸‹å‡ ä¸ªç»“è®ºã€‚ 1ã€==ç›´æ¥ä¿®æ”¹æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ æ˜¯å¯ä»¥è¢«ç›‘å¬çš„==ã€‚ 2ã€æ•°ç»„çš„æ“ä½œæ–¹æ³•å¦‚æœæ˜¯æ“ä½œå·²ç»å­˜åœ¨çš„è¢«ç›‘å¬çš„å…ƒç´ ä¹Ÿæ˜¯å¯ä»¥è§¦å‘setterè¢«ç›‘å¬çš„ã€‚ 3ã€åªæœ‰pushã€lengthã€popä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•ç¡®å®ä¸èƒ½è§¦å‘setterï¼Œè¿™è·Ÿæ–¹æ³•çš„å†…éƒ¨å®ç°ä¸Object.definePropertyçš„setteré’©å­çš„è§¦å‘å®ç°æœ‰å…³ç³»ï¼Œæ˜¯è¯­è¨€å±‚é¢çš„åŸå› ã€‚ 4ã€==æ”¹å˜è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸‹æ ‡çš„å€¼æ—¶ï¼Œå€¼å˜åŒ–æ˜¯ä¸èƒ½ç›‘å¬åˆ°çš„==ã€‚è¿™ä¸ªå…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸å­˜åœ¨çš„å±æ€§å½“ç„¶æ˜¯ä¸èƒ½ç›‘å¬åˆ°ï¼Œå› ä¸ºç»‘å®šç›‘å¬æ“ä½œåœ¨ä¹‹å‰å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œåæ·»åŠ çš„å…ƒç´ å±æ€§åœ¨ç»‘å®šå½“æ—¶éƒ½è¿˜æ²¡æœ‰å­˜åœ¨ï¼Œå½“ç„¶æ²¡æœ‰åŠæ³•æå‰å»ç›‘å¬å®ƒäº†ã€‚ æ‰€ä»¥ç»¼ä¸Šï¼ŒObject.definePropertyä¸èƒ½ç›‘å¬åˆ°æ•°ç»„å†…çš„å€¼å˜åŒ–çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼ŒåŒæ—¶ä¹Ÿå¾—å‡ºäº†aé—®é¢˜çš„ç­”æ¡ˆï¼Œè¯­è¨€å±‚é¢ä¸æ”¯æŒç”¨Object.definePropertyç›‘å¬ä¸å­˜åœ¨çš„æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”é€šè¿‡ä¸€äº›èƒ½é€ æˆæ•°ç»„çš„æ–¹æ³•é€ æˆæ•°ç»„æ”¹å˜ä¹Ÿä¸èƒ½ç›‘å¬åˆ°ã€‚ Vueç›‘å¬Arrayä¸‰æ­¥æ›²ç¬¬ä¸€æ­¥ï¼šå…ˆè·å–åŸç”Ÿ Array çš„åŸå‹æ–¹æ³•ï¼Œå› ä¸ºæ‹¦æˆªåè¿˜æ˜¯éœ€è¦åŸç”Ÿçš„æ–¹æ³•å¸®æˆ‘ä»¬å®ç°æ•°ç»„çš„å˜åŒ–ã€‚ ç¬¬äºŒæ­¥ï¼šå¯¹ Array çš„åŸå‹æ–¹æ³•ä½¿ç”¨ Object.defineProperty åšä¸€äº›æ‹¦æˆªæ“ä½œã€‚ ç¬¬ä¸‰æ­¥ï¼š==æŠŠéœ€è¦è¢«æ‹¦æˆªçš„ Array ç±»å‹çš„æ•°æ®åŸå‹æŒ‡å‘æ”¹é€ ååŸå‹==ã€‚8888 123456789101112131415161718192021222324252627282930313233343536373839 const arrayProto = Array.prototype // è·å–Arrayçš„åŸå‹function def (obj, key) &#123; Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, value: function(...args) &#123; console.log(key); // æ§åˆ¶å°è¾“å‡º push console.log(args); // æ§åˆ¶å°è¾“å‡º [Array(2), 7, &quot;hello!&quot;] // è·å–åŸç”Ÿçš„æ–¹æ³• let original = arrayProto[key]; // å°†å¼€å‘è€…çš„å‚æ•°ä¼ ç»™åŸç”Ÿçš„æ–¹æ³•ï¼Œä¿è¯æ•°ç»„æŒ‰ç…§å¼€å‘è€…çš„æƒ³æ³•è¢«æ”¹å˜ const result = original.apply(this, args); // do something æ¯”å¦‚é€šçŸ¥Vueè§†å›¾è¿›è¡Œæ›´æ–° console.log(&#x27;æˆ‘çš„æ•°æ®è¢«æ”¹å˜äº†ï¼Œè§†å›¾è¯¥æ›´æ–°å•¦&#x27;); this.text = &#x27;hello Vue&#x27;; return result; &#125; &#125;);&#125;// æ–°çš„åŸå‹let obj = &#123; push() &#123;&#125;&#125;// é‡å†™èµ‹å€¼def(obj, &#x27;push&#x27;);let arr = [0];// åŸå‹çš„æŒ‡å‘é‡å†™arr.__proto__ = obj;// æ‰§è¡Œpusharr.push([1, 2], 7, &#x27;hello!&#x27;);console.log(arr); é‚£å¿…é¡»æƒ³ä¸ªåŠæ³•â€“æ‹¦æˆªå™¨è¦†ç›–Array.prototypeã€‚ é€šè¿‡Vue.setå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬è´¨ä¸Šå†…éƒ¨æ‰‹åŠ¨å»åšäº†==ä¾èµ–æ›´æ–°çš„æ´¾å‘== æ‹¦æˆªå™¨ Arrayåœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨æ‹¦æˆªå™¨ä¸­è§¦å‘ä¾èµ– æœ€åï¼Œæ›´æ–°åŠ«æŒæ•°ç»„å®ä¾‹çš„åŸå‹ï¼Œåœ¨ ES6 ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨ç§æœ‰å±æ€§ proto æŒ‡å®šåŸå‹ï¼Œä¹‹åï¼Œä¾¿å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1Object.setPrototypeOf(arr, injackingPrototype) æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå…¶ä¸‹æ ‡å®é™…ä¸Šå°±æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ˜¯å¯ä»¥é‡‡ç”¨ Object.defineProperty() æ–¹æ³•å¤„ç†æ•°ç»„å¯¹è±¡ã€‚ ä½†æ˜¯ Vue å¹¶æ²¡æœ‰é‡‡ç”¨ä¸Šè¿°æ–¹æ³•åŠ«æŒæ•°ç»„å¯¹è±¡ï¼Œç¬”è€…çŒœæµ‹ä¸»è¦ç”±äºä»¥ä¸‹ä¸¤ç‚¹ï¼šï¼ˆè¯»è€…æœ‰æ›´å¥½çš„è§è§£ï¼Œæ¬¢è¿ç•™è¨€ã€‚ï¼‰ 1ã€ç‰¹æ®Šçš„ length å±æ€§ æ•°ç»„å¯¹è±¡çš„ length å±æ€§çš„æè¿°ç¬¦å¤©ç”Ÿç‹¬ç‰¹ï¼š 12const arr = [1, 2, 3]Object.getOwnPropertyDescriptor(arr, &#x27;length&#x27;).configurable // false è¿™å°±æ„å‘³ç€æ— æ³•é€šè¿‡ Object.defineProperty() æ–¹æ³•åŠ«æŒ length å±æ€§çš„è¯»å–å’Œè®¾ç½®æ–¹æ³•ã€‚ ç›¸æ¯”è¾ƒå¯¹è±¡çš„å±æ€§ï¼Œæ•°ç»„ä¸‹æ ‡å˜åŒ–åœ°ç›¸å¯¹é¢‘ç¹ï¼Œå¹¶ä¸”æ”¹å˜æ•°ç»„é•¿åº¦çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒçµæ´»ï¼Œä¸€æ—¦æ•°ç»„çš„é•¿åº¦å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆåœ¨æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œå¼€å‘è€…åªèƒ½æ‰‹åŠ¨æ›´æ–°æ–°å¢çš„æ•°ç»„ä¸‹æ ‡ï¼Œè¿™å¯æ˜¯ä¸€ä¸ªå¾ˆç¹ççš„å·¥ä½œã€‚ 2ã€æ•°ç»„çš„æ“ä½œåœºæ™¯ æ•°ç»„ä¸»è¦çš„æ“ä½œåœºæ™¯è¿˜æ˜¯éå†ï¼Œè€Œå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ éƒ½æŒ‚è½½ä¸€ä¸ª get å’Œ set æ–¹æ³•ï¼Œææ€•ä¹Ÿæ˜¯ä¸å°çš„æ€§èƒ½è´Ÿæ‹…ã€‚ 3ã€æ•°ç»„æ–¹æ³•çš„åŠ«æŒ æœ€ç»ˆ Vue é€‰æ‹©åŠ«æŒä¸€äº›å¸¸ç”¨çš„æ•°ç»„æ“ä½œæ–¹æ³•ï¼Œä»è€ŒçŸ¥æ™“æ•°ç»„çš„å˜åŒ–æƒ…å†µï¼š 1const methods = [ &#x27;push&#x27;, &#x27;pop&#x27;, &#x27;shift&#x27;, &#x27;unshift&#x27;, &#x27;sort&#x27;, &#x27;reverse&#x27;, &#x27;splice&#x27;] æ•°ç»„æ–¹æ³•çš„åŠ«æŒæ¶‰åŠåˆ°åŸå‹ç›¸å…³çš„çŸ¥è¯†ï¼Œé¦–å…ˆæ•°ç»„å®ä¾‹å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯æ¥æºäº Array.prototype å¯¹è±¡ã€‚ ä½†æ˜¯è¿™é‡Œä¸èƒ½ç›´æ¥ç¯¡æ”¹ Array.prototype å¯¹è±¡ï¼Œè¿™æ ·ä¼šå½±å“æ‰€æœ‰çš„æ•°ç»„å®ä¾‹ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦é‡‡ç”¨åŸå‹ç»§æ‰¿å¾—åˆ°ä¸€ä¸ªæ–°çš„åŸå‹å¯¹è±¡ï¼š 1const arrayProto = Array.prototypeconst injackingPrototype = Object.create(arrayProto) æ‹¿åˆ°æ–°çš„åŸå‹å¯¹è±¡ä¹‹åï¼Œå†é‡å†™è¿™äº›å¸¸ç”¨çš„æ“ä½œæ–¹æ³•ï¼š 12345678910111213141516171819202122methods.forEach(method =&gt; &#123; const originArrayMethod = arrayProto[method] injackingPrototype[method] = function (...args) &#123; const result = originArrayMethod.apply(this, args) let inserted switch (method) &#123; case &#x27;push&#x27;: case &#x27;unshift&#x27;: inserted = args break case &#x27;splice&#x27;: inserted = args.slice(2) break &#125; if (inserted) &#123; // å¯¹äºæ–°å¢çš„å…ƒç´ ï¼Œç»§ç»­åŠ«æŒ // ob.observeArray(inserted) &#125; // é€šçŸ¥å˜åŒ– return result &#125;&#125;) æœ€åï¼Œæ›´æ–°åŠ«æŒæ•°ç»„å®ä¾‹çš„åŸå‹ï¼Œåœ¨ ES6 ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨ç§æœ‰å±æ€§ proto æŒ‡å®šåŸå‹ï¼Œä¹‹åï¼Œä¾¿å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1Object.setPrototypeOf(arr, injackingPrototype) é¡ºä¾¿æä¸€ä¸‹ï¼Œé‡‡ç”¨ Vue.set() æ–¹æ³•è®¾ç½®æ•°ç»„å…ƒç´ æ—¶ï¼ŒVue å†…éƒ¨å®é™…ä¸Šæ˜¯è°ƒç”¨åŠ«æŒåçš„ splice() æ–¹æ³•æ¥è§¦å‘æ›´æ–°ã€‚ 12345678910111213141516171819202122232425//api:æ•°ç»„setæ–¹å¼æ•°æ®æ”¹å˜function set (target, key, val) &#123; ............. //isValidArrayIndex åˆ¤æ–­æ•°ç»„æ˜¯æœ‰æ•ˆçš„ä¸‹æ ‡ if (Array.isArray(target) &amp;&amp; isValidArrayIndex(key)) &#123; target.length = Math.max(target.length, key); target.splice(key, 1, val); // debugger return val &#125; ............. var ob = (target).__ob__; if (target._isVue || (ob &amp;&amp; ob.vmCount)) &#123; return val &#125; if (!ob) &#123; target[key] = val; return val &#125; // å˜æˆå“åº”å¼å¯¹è±¡ defineReactive(ob.value, key, val); // é€šçŸ¥ä¾èµ–æ›´æ–° ob.dep.notify(); return val&#125; defineReactive123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051function defineReactive ( obj, key, val, customSetter, shallow) &#123; var dep = new Dep(); var property = Object.getOwnPropertyDescriptor(obj, key); if (property &amp;&amp; property.configurable === false) &#123; return &#125; var getter = property &amp;&amp; property.get; var setter = property &amp;&amp; property.set; if ((!getter || setter) &amp;&amp; arguments.length === 2) &#123; val = obj[key]; &#125; var childOb = !shallow &amp;&amp; observe(val); Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get: function reactiveGetter () &#123; var value = getter ? getter.call(obj) : val; if (Dep.target) &#123; dep.depend(); if (childOb) &#123; // debugger å¦‚æœä¸‹é¢æ²¡æœ‰ä¾èµ–æ”¶é›† åˆ™ä¹…ä¸ä¼šæ›´æ–° // â¤ï¸â¤ï¸â¤ï¸â¤ï¸å¾ˆå…³é”® ä¾èµ–æ”¶é›† childOb.dep.depend(); if (Array.isArray(value)) &#123; dependArray(value); &#125; &#125; &#125; return value &#125;, set: function reactiveSetter (newVal) &#123; var value = getter ? getter.call(obj) : val; if (setter) &#123; setter.call(obj, newVal); &#125; else &#123; val = newVal; &#125; childOb = !shallow &amp;&amp; observe(newVal); dep.notify(); &#125; &#125;);&#125; methodsToPatch1234567891011121314151617181920212223242526272829// è®°å½•åŸå§‹Arrayæœªé‡å†™ä¹‹å‰çš„APIåŸå‹æ–¹æ³•const arrayProto = Array.prototype// æ‹·è´ä¸€ä»½ä¸Šé¢çš„åŸå‹å‡ºæ¥const arrayMethods = Object.create(arrayProto)// å°†è¦é‡å†™çš„æ–¹æ³•const methodsToPatch = [ &#x27;push&#x27;, &#x27;pop&#x27;, &#x27;shift&#x27;, &#x27;unshift&#x27;, &#x27;splice&#x27;, &#x27;sort&#x27;, &#x27;reverse&#x27; ]methodsToPatch.forEach(function (method) &#123; def(arrayMethods, method, function mutator (...args) &#123; // åŸæœ‰çš„æ•°ç»„æ–¹æ³•è°ƒç”¨æ‰§è¡Œ const result = arrayProto[method].apply(this, args) const ob = this.__ob__ let inserted switch (method) &#123; case &#x27;push&#x27;: case &#x27;unshift&#x27;: inserted = args break case &#x27;splice&#x27;: inserted = args.slice(2) break &#125; // å¦‚æœæ˜¯æ’å…¥çš„æ•°æ®ï¼Œå°†å…¶å†æ¬¡ç›‘å¬èµ·æ¥ if (inserted) ob.observeArray(inserted) // è§¦å‘è®¢é˜…ï¼Œåƒé¡µé¢æ›´æ–°å“åº”å°±åœ¨è¿™é‡Œè§¦å‘ ob.dep.notify() return result &#125;)&#125;) æ‰‹åŠ¨è°ƒç”¨:star::star::star: 1ob.dep.notify(); ä¸ºä»€ä¹ˆæ•°ç»„å˜åŒ–å†…éƒ¨ç”¨splice å¤–éƒ¨å¯ä»¥ç”¨pushéƒ½å¯ä»¥æ”¹å˜ 12target.splice(key, 1, val);this.array.push(100) //æ•°ç»„çš„æ·»åŠ  æœ€åçœ‹çœ‹å°¤å¤§çš„å›ç­” 12æœˆæ›´æ–°â€“æ‰©å±•ä¸€ä¸‹Vue3.0çš„æ•°ç»„ç›‘å¬12345678910111213141516171819202122232425262728293031323334353637383940let model = &#123; name: &#x27;vue&#x27;, data: &#123; val: 1, &#125;, list: [1]&#125;function isObj (obj) &#123; return typeof obj === &#x27;object&#x27;;&#125;// ç›‘æ§å™¨function observe(data) &#123; // å°†å±æ€§éƒ½åšç›‘æ§ Object.keys(data).map(key =&gt; &#123; if (isObj(data[key])) &#123; // å¯¹è±¡ç±»å‹çš„ç»§ç»­ç›‘å¬å®ƒçš„å±æ€§ data[key] = observe(data[key]); &#125; &#125;) return defineProxy(data);&#125;// ç”ŸæˆProxyä»£ç†function defineProxy(obj) &#123; return new Proxy(obj, &#123; set(obj, key, val) &#123; console.log(`å±æ€§$&#123;key&#125;å˜åŒ–ä¸º$&#123;val&#125;`); compile(obj, key, val); return Reflect.set(...arguments); &#125; &#125;)&#125;// è§£æå™¨ï¼Œå“åº”é¡µé¢å˜åŒ–function compile(obj, id, val) &#123; if (Array.isArray(obj)) &#123; // æ•°ç»„å˜åŒ– document.querySelector(&#x27;#list&#x27;).value = model.list; &#125; else &#123; document.querySelector(`#$&#123;id&#125;`).value = val; &#125;&#125;model= observe(model);","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueâ€”WatchåŸç†","slug":"Vue-WatchåŸç†","date":"2020-12-08T16:00:00.000Z","updated":"2020-12-18T01:58:29.000Z","comments":true,"path":"2020/12/09/Vue-WatchåŸç†/","link":"","permalink":"http://mariogogogo.github.io/2020/12/09/Vue-Watch%E5%8E%9F%E7%90%86/","excerpt":"ä»Šå¤©åˆ†æä¸‹Watchçš„å†…éƒ¨åŸç†","text":"ä»Šå¤©åˆ†æä¸‹Watchçš„å†…éƒ¨åŸç† å¸¦ç€é—®é¢˜çœ‹æºç  1ã€ç›‘å¬çš„æ•°æ®æ”¹å˜çš„æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ 2ã€è®¾ç½® immediate æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ 3ã€è®¾ç½®äº† deep æ—¶ï¼Œwatch å¦‚ä½•å·¥ä½œ å¸¸è§çš„apiä½¿ç”¨æƒ…å†µ12345678910111213141516171819watch: &#123; //å‡½æ•° useless(newValue) &#123; console.log(&#x27;useless&#x27;,newValue) &#125;, //å¯¹è±¡ name:&#123; immediate:true, handler(newValue)&#123; console.log(&#x27;name&#x27;,newValue) &#125; &#125;, nestect:&#123; deep:true, handler(newValue)&#123; console.log(&#x27;nestect&#x27;,newValue) &#125; &#125; &#125;, ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–12345678function initState (vm) &#123; vm._watchers = []; var opts = vm.$options; .... if (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123; initWatch(vm, opts.watch); &#125;&#125; opts.watch !== nativeWatchçš„æ„æ€æ˜¯ä¸ç­‰äºæµè§ˆå™¨åŸç”Ÿçš„watchï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·å†™ï¼Ÿ å› ä¸ºFirefoxæµè§ˆå™¨ä¸­Object.prototypeä¸­æœ‰ä¸ªwatchæ–¹æ³•ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®watchï¼Œåˆ™opts.watch å°†æ˜¯Object.prototype.watch initWatch1234567891011121314function initWatch (vm, watch) &#123; for (var key in watch) &#123; //handler ç±»å‹æ˜¯ä¸ç¡®å®šçš„ å¯ä»¥æ˜¯ å¯¹è±¡ æ–¹æ³• å­—ç¬¦ä¸² æ•°ç»„ var handler = watch[key]; if (Array.isArray(handler)) &#123; //å¦‚æœæ˜¯æ•°ç»„éå†æ¯ä¸€é¡¹æ¥åˆ›å»ºwatcher for (var i = 0; i &lt; handler.length; i++) &#123; createWatcher(vm, key, handler[i]); &#125; &#125; else &#123; createWatcher(vm, key, handler); &#125; &#125;&#125; createWatcher123456789101112131415function createWatcher ( vm, //vueå®ä¾‹ expOrFn, //è¡¨è¾¾å¼ æˆ–è€… è®¡ç®—å±æ€§å‡½æ•° handler, //å›è°ƒå‡½æ•° æˆ–è€… å­—ç¬¦ä¸² options //ä¼ é€’ç»™vm.$watché€‰é¡¹å¯¹è±¡) &#123; if (isPlainObject(handler)) &#123; options = handler; handler = handler.handler; &#125; if (typeof handler === &#x27;string&#x27;) &#123; handler = vm[handler]; &#125; return vm.$watch(expOrFn, handler, options)&#125; watch åœ¨ä¸€å¼€å§‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼š è¯»å– ä¸€é ç›‘å¬çš„æ•°æ®çš„å€¼ï¼Œäºæ˜¯ï¼Œæ­¤æ—¶ é‚£ä¸ªæ•°æ®å°±æ”¶é›†åˆ° watch çš„ watcher äº† ç„¶å ä½ ç»™ watch è®¾ç½®çš„ handler ï¼Œwatch ä¼šæ”¾å…¥ watcher çš„æ›´æ–°å‡½æ•°ä¸­ å½“ æ•°æ®æ”¹å˜æ—¶ï¼Œé€šçŸ¥ watch çš„ watcher è¿›è¡Œæ›´æ–°ï¼Œäºæ˜¯ ä½ è®¾ç½®çš„ handler å°±è¢«è°ƒç”¨äº† $watch1234567891011121314151617181920212223 Vue.prototype.$watch = function ( expOrFn, cb, options ) &#123; var vm = this; if (isPlainObject(cb)) &#123; return createWatcher(vm, expOrFn, cb, options) &#125; options = options || &#123;&#125;; options.user = true; // ä»£è¡¨watcher ä¸º userWatcher //åˆ›å»ºwatcherå®ä¾‹ è¿™æ˜¯ä¸€ä¸ª user watcherï¼Œå› ä¸º options.user = true var watcher = new Watcher(vm, expOrFn, cb, options); //immediate = true åˆ™å‡½æ•°ç«‹å³æ‰§è¡Œ if (options.immediate) &#123; cb.call(vm, watcher.value); &#125; return function unwatchFn () &#123; //é”€æ¯watcherå‡½æ•° watcher.teardown(); &#125; &#125;;&#125; 1ã€åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œç›‘å¬å›è°ƒ å¦‚æœä½ è®¾ç½®äº† immediate çš„è¯ï¼Œè¡¨ç¤ºä¸ç”¨ç­‰æˆ‘æ•°æ®å˜åŒ–ï¼Œåˆå§‹åŒ–æ—¶é©¬ä¸Šæ‰§è¡Œä¸€éï¼Œæ‰§è¡Œçš„ä»£ç å°±æ˜¯ç›´æ¥è°ƒç”¨ å›è°ƒï¼Œç»‘å®šä¸Šä¸‹æ–‡ï¼Œä¼ å…¥ç›‘å¬å€¼ 2ã€æ¯ä¸ª watch é…å‘ watcher new Watcher123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051var Watcher = function Watcher ( vm, expOrFn, cb, options, isRenderWatcher) &#123; this.vm = vm; if (isRenderWatcher) &#123; vm._watcher = this; &#125; vm._watchers.push(this); // options if (options) &#123; this.deep = !!options.deep; this.user = !!options.user; this.computed = !!options.computed; this.sync = !!options.sync; this.before = options.before; &#125; else &#123; this.deep = this.user = this.computed = this.sync = false; &#125; this.cb = cb; this.id = ++uid$1; // uid for batching this.active = true; this.dirty = this.computed; // for computed watchers this.deps = []; this.newDeps = []; this.depIds = new _Set(); this.newDepIds = new _Set(); this.expression = process.env.NODE_ENV !== &#x27;production&#x27; ? expOrFn.toString() : &#x27;&#x27;; // parse expression for getter if (typeof expOrFn === &#x27;function&#x27;) &#123; this.getter = expOrFn; &#125; else &#123; this.getter = parsePath(expOrFn); if (!this.getter) &#123; this.getter = function () &#123;&#125;; ... &#125; &#125; if (this.computed) &#123; this.value = undefined; // ä¾èµ–æ”¶é›† this.dep = new Dep(); &#125; else &#123; this.value = this.get(); &#125;&#125;; this.getter çš„å‡½æ•°è¿›è¡Œç†è§£ï¼Œä»–çš„æœ¬è´¨æ˜¯ä¸ºäº†è·å–å¯¹è±¡çš„keyå€¼. å½“ watch.getter æ‰§è¡Œï¼Œè€Œè¯»å–äº† vm.name çš„æ—¶å€™ï¼Œ==nameçš„ä¾èµ–æ”¶é›†å™¨å°±ä¼šæ”¶é›†åˆ° watch-watcher== 1234567891011121314151617181920212223Watcher.prototype.get = function get () &#123; pushTarget(this); var value; var vm = this.vm; try &#123; value = this.getter.call(vm, vm); &#125; catch (e) &#123; if (this.user) &#123; handleError(e, vm, (&quot;getter for watcher \\&quot;&quot; + (this.expression) + &quot;\\&quot;&quot;)); &#125; else &#123; throw e &#125; &#125; finally &#123; // &quot;touch&quot; every property so they are all tracked as // dependencies for deep watching if (this.deep) &#123; traverse(value); &#125; popTarget(); this.cleanupDeps(); &#125; return value&#125;; Watch åœ¨ç»“å°¾ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ watcher.getï¼Œå…¶ä¸­ä¾¿ä¼šæ‰§è¡Œ getterï¼Œä¾¿ä¼šæ ¹æ®ä½ ç›‘å¬çš„keyï¼Œå»å®ä¾‹ä¸Šè¯»å–å¹¶è¿”å›ï¼Œå­˜æ”¾åœ¨ watcher.value ä¸Š deepæ·±åº¦ç›‘å¬12345678910111213141516171819202122232425262728293031323334 if (this.deep) &#123; traverse(value);&#125;function traverse (val) &#123; _traverse(val, seenObjects); seenObjects.clear();&#125;function _traverse (val, seen) &#123; var i, keys; var isA = Array.isArray(val); if ((!isA &amp;&amp; !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) &#123; return &#125; //åˆ¤æ–­å€¼æ˜¯å¦å·²ç»å“åº”å¼ if (val.__ob__) &#123; var depId = val.__ob__.dep.id; if (seen.has(depId)) &#123; return &#125; seen.add(depId); &#125; //æ˜¯å¦æ˜¯æ•°ç»„ if (isA) &#123; i = val.length; while (i--) &#123; _traverse(val[i], seen); &#125; &#125; else &#123; //é€’å½’éå†å¯¹è±¡ keys = Object.keys(val); i = keys.length; while (i--) &#123; _traverse(val[keys[i]], seen); &#125; &#125;&#125; å¦‚æœæ˜¯æ·±å±‚çº§çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„æ¯ä¸ªå±æ€§ä¹Ÿéƒ½æ˜¯å“åº”å¼çš„ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±çš„ä¾èµ–æ”¶é›†å™¨ é€šè¿‡ä¸æ–­æ·±å…¥çš„è¯»å–æ¯ä¸ªå±æ€§ï¼Œè¿™æ ·æ¯ä¸ªå±æ€§å°±éƒ½å¯ä»¥æ”¶é›†åˆ° watch-watcher äº† è¿™æ ·ä¸ç®¡å¯¹è±¡å†…å¤šæ·±çš„å±æ€§å˜åŒ–ï¼Œéƒ½ä¼šé€šçŸ¥åˆ° watch-watcher å›è°ƒæ›´æ–°123456789101112131415161718192021222324252627282930313233343536373839Watcher.prototype.update = function update () &#123; if()&#123;&#125; else if (this.sync) &#123; this.run(); //åŒæ­¥æ‰§è¡Œ &#125; else &#123; queueWatcher(this); //å…ˆæ‰§è¡Œè¿™é‡Œ &#125;&#125;Watcher.prototype.run = function run () &#123; if (this.active) &#123; this.getAndInvoke(this.cb); &#125;&#125;;//å¯¹æ¯”è®¡ç®—å±æ€§è¿”å›å€¼Watcher.prototype.getAndInvoke = function getAndInvoke (cb) &#123; var value = this.get(); if ( value !== this.value || isObject(value) || this.deep ) &#123; // set new value var oldValue = this.value; this.value = value; this.dirty = false; if (this.user) &#123; try &#123; //æ‰§è¡Œå›è°ƒå‡½æ•° cb.call(this.vm, value, oldValue); &#125; catch (e) &#123; handleError(e, this.vm, (&quot;callback for watcher \\&quot;&quot; + (this.expression) + &quot;\\&quot;&quot;)); &#125; &#125; else &#123; cb.call(this.vm, value, oldValue); &#125; &#125;&#125;; æ€»ç»“watcherå±æ€§æœ¬è´¨å°±æ˜¯user watcherï¼Œå®ƒè¿˜æ”¯æŒdeepï¼Œsyncï¼Œimmediateç­‰é…ç½®ï¼Œç›‘å¬å±æ€§é€‚åˆè§‚å¯ŸæŸä¸ªå€¼å¾—å˜åŒ–å»å®Œæˆä¸€æ®µå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚ å¦‚ä½•å®ç°watchç›‘å¬ï¼Ÿæ­£æ˜¯å› ä¸ºwatchå¯¹åº”keyæ˜¯è¢«æ•°æ®æ‹¦æˆªçš„å±æ€§ï¼Œåœ¨é€‰é¡¹watchä¸‹ï¼š æ¯ä¸€ä¸ªkeyéƒ½ä¼šå¯¹åº”ä¸€ä¸ªwatcherå¯¹è±¡ watcherå¯¹è±¡çš„getterå‡½æ•°å°±æ˜¯è·å–å½“å‰keyå¯¹åº”çš„å€¼ï¼Œä»è€Œå»ºç«‹keyå¯¹åº”Depå¯¹è±¡ä¸å½“å‰watcherå¯¹è±¡å»ºç«‹è”ç³» å½“keyæ”¹å˜æ—¶å°±ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä»è€Œæ‰§è¡Œkeyå¯¹åº”çš„å›è°ƒå‡½æ•°","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ","slug":"å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ","date":"2020-12-07T16:00:00.000Z","updated":"2020-12-08T07:01:08.000Z","comments":true,"path":"2020/12/08/å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://mariogogogo.github.io/2020/12/08/%E5%90%84%E7%A7%8D%E7%A7%BB%E5%8A%A8%E7%AB%AFBug%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"","text":"å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆæŒç»­æ›´æ–°å„ç§ç§»åŠ¨ç«¯Bugè§£å†³æ–¹æ¡ˆ","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Vueâ€”propsåŸç†","slug":"Vue-propsåŸç†","date":"2020-12-05T16:00:00.000Z","updated":"2020-12-17T06:42:26.000Z","comments":true,"path":"2020/12/06/Vue-propsåŸç†/","link":"","permalink":"http://mariogogogo.github.io/2020/12/06/Vue-props%E5%8E%9F%E7%90%86/","excerpt":"ä»Šå¤©åˆ†æä¸‹propsçš„å†…éƒ¨åŸç†","text":"ä»Šå¤©åˆ†æä¸‹propsçš„å†…éƒ¨åŸç† å¸¦ç€é—®é¢˜çœ‹æºç  1ã€çˆ¶ç»„ä»¶ æ€ä¹ˆä¼ å€¼ç»™ å­ç»„ä»¶çš„ props 2ã€å­ç»„ä»¶å¦‚ä½•è¯»å–props 3ã€çˆ¶ç»„ä»¶ data æ›´æ–°ï¼Œå­ç»„ä»¶çš„props å¦‚ä½•æ›´æ–° 123456789101112131415161718192021222324252627//parent.vue&lt;template&gt; &lt;div class=&quot;parent&quot;&gt; &lt;h1&gt;åˆ†æprops&lt;/h1&gt; &lt;hello-world :msg=&quot;parentMsg&quot;&gt;&lt;/hello-world&gt; &lt;/div&gt;&lt;/template&gt;//child.vue&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;HelloWorld&#x27;, props: &#123; msg:&#123; type:String, default:&#x27;&#x27; &#125; &#125;&#125;&lt;/script&gt; æ¨¡æ¿è§£æè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ ‡ç­¾çš„åå­—æ˜¯ç»„ä»¶åï¼Œè™šæ‹ŸDOMæ¸²æŸ“è¿‡ç¨‹ä¸­ä¼šå°†å­ç»„ä»¶å®ä¾‹åŒ–ï¼Œæ¨¡æ¿è§£ææ—¶å€™ä»æ ‡ç­¾å±æ€§ä¸Šè§£æå‡ºæ•°æ®å½“åšå‚æ•°ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå…¶ä¸­å°±åŒ…æ‹¬propsæ•°æ® 123456789//è§£æçˆ¶ç»„ä»¶(function() &#123; with(this)&#123; return _c(&#x27;div&#x27;,&#123;staticClass:&quot;parent&quot;&#125;,[ _c(&#x27;h1&#x27;,&#123;attrs:&#123;&#125;&#125;) _c(&#x27;hello-world&#x27;,&#123;attrs:&#123;&quot;msg&quot;:parentMsg&#125;&#125;) ],1) &#125;&#125;) withwith çš„ä½œç”¨æ˜¯ï¼Œç»‘å®šå¤§æ‹¬å·å†…ä»£ç çš„ å˜é‡è®¿é—®ä½œç”¨åŸŸ 1234function test()&#123; with(this)&#123; console.log(parentName) &#125;&#125;test.call(&#123;parentName:&quot;æµ‹è¯•åå­—&quot;&#125;) //æµ‹è¯•åå­— propsçš„å®ç°åŸç†ç®€å•çš„ç†è§£ï¼šçˆ¶ç»„ä»¶æä¾›æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡propså­—æ®µé€‰æ‹©ç»„ä»¶éœ€è¦å“ªäº›å†…å¦‚ï¼Œé€šè¿‡å­ç»„ä»¶propsé€‰é¡¹å°†éœ€è¦çš„æ•°æ®ç­›é€‰å‡ºæ¥æ·»åŠ åˆ°å­ç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸­ normalizePropsVue.component()æ³¨å†Œç»„ä»¶çš„æ—¶å€™ä¼šè°ƒç”¨Vue.extend()ç”Ÿæˆä¸€ä¸ªVueåŸºç¡€æ„é€ å™¨ï¼Œå†…éƒ¨ä¼šè°ƒç”¨mergeOptionså‡½æ•°åˆå¹¶å±æ€§ï¼Œ mergeOptionsåˆä¼šè°ƒç”¨normalizePropså¯¹propsçš„å±æ€§è¿›è¡Œä¸€äº›è§„èŒƒåŒ–çš„ä¿®é¥° 1234567891011121314151617181920212223242526272829303132function normalizeProps (options, vm) &#123; var props = options.props; if (!props) &#123; return &#125; var res = &#123;&#125;; var i, val, name; //å¦‚æœpropsæ˜¯ä¸ªæ•°ç»„ if (Array.isArray(props)) &#123; i = props.length; while (i--) &#123; val = props[i]; if (typeof val === &#x27;string&#x27;) &#123; name = camelize(val); //ä¿å­˜åˆ°resé‡Œé¢ ä¾‹å¦‚:&#123; msg: &#123;type: null&#125; &#125; res[name] = &#123; type: null &#125;; &#125; else if (process.env.NODE_ENV !== &#x27;production&#x27;) &#123; //...é”™è¯¯å¤„ç† &#125; &#125; //å¦‚æœpropsæ˜¯ä¸ªå¯¹è±¡ &#125; else if (isPlainObject(props)) &#123; for (var key in props) &#123; val = props[key]; name = camelize(key); res[name] = isPlainObject(val) ? val : &#123; type: val &#125;; &#125; &#125; else if (process.env.NODE_ENV !== &#x27;production&#x27;) &#123; //...é”™è¯¯å¤„ç† &#125; options.props = res;&#125; ç»è¿‡normalizePropsè§„èŒƒåï¼Œpropsè¢«ä¿®é¥°ä¸ºä¸€ä¸ªå¯¹è±¡æ ¼å¼ï¼Œä¾‹å­é‡Œçš„æ‰§è¡Œåˆ°è¿™é‡Œç­‰äº:&#123; msg: &#123;type: null&#125; &#125; åˆå§‹åŒ–123456789function Vue()&#123; initState(this)&#125;function initState(vm) &#123; var opts = vm.$options; if (opts.props) &#123; initProps(vm, opts.props); &#125;&#125; initPropsinitPropsæ¥å—2ä¸ªå‚ï¼švm propsOptionsã€‚ ç¬¬ä¸€ä¸ªå‚æ˜¯ vmå®ä¾‹ã€‚ ç¬¬äºŒä¸ªå‚æ˜¯ è§„æ ¼åŒ–åçš„propsé€‰é¡¹ã€‚ 12345678910111213141516171819202122232425262728293031function initProps (vm, propsOptions) &#123; var propsData = vm.$options.propsData || &#123;&#125;; var props = vm._props = &#123;&#125;; //ç¼“å­˜propsçš„key var keys = vm.$options._propKeys = []; var isRoot = !vm.$parent; //å¦‚æœä¸æ˜¯æ ¹ç»„ä»¶åˆ™å˜æˆå“åº”å¼ if (!isRoot) &#123; toggleObserving(false); &#125; var loop = function ( key ) &#123; keys.push(key); var value = validateProp(key, propsOptions, propsData, vm); /* istanbul ignore else */ if (process.env.NODE_ENV !== &#x27;production&#x27;) &#123; var hyphenatedKey = hyphenate(key); //...é”™è¯¯å¤„ç† defineReactive(props, key, value, function () &#123; //...é”™è¯¯å¤„ç† &#125; else &#123; defineReactive(props, key, value); &#125; if (!(key in vm)) &#123; //è®¾ç½®ä»£ç† æŠŠvm.x è®¿é—® vm._props.x proxy(vm, &quot;_props&quot;, key); &#125; &#125;; for (var key in propsOptions) loop( key ); toggleObserving(true);&#125; æ¯ä¸€ä¸ª å®ä¾‹éƒ½ä¼šæœ‰ ä¸€ä¸ª _props çš„åŒæ—¶ï¼Œä¹Ÿä¼šæŠŠå±æ€§ç›´æ¥æ”¾åœ¨ å®ä¾‹ä¸Šã€‚ propsData ä¿å­˜é€šè¿‡çˆ¶ç»„ä»¶ä¼ å…¥æˆ–è€…ç”¨æˆ·é€šè¿‡propsDataä¼ å…¥çš„propsæ•°æ® props æŒ‡å‘vm._propsæŒ‡é’ˆã€‚æ‰€æœ‰è®¾ç½®åˆ°propså˜é‡ä¸­çš„å±æ€§ä¿å­˜åˆ°vm.props keys æŒ‡å‘ vm.$options._propskeys isRoot åˆ¤æ–­æ˜¯å¦æ˜¯æ ¹ç»„ä»¶ 123function toggleObserving (value) &#123; shouldObserve = value;&#125; ä¸Šé¢çš„ä»£ç ä¸»è¦åšäº†ä¸‰ä»¶äº‹ 1ã€éå† props 2ã€ç»™ props è®¾ç½®å“åº”å¼ 3ã€ç»™ props è®¾ç½®ä»£ç† (æŠŠvm.x è®¿é—® vm._props.x) validatePropè°ƒç”¨è¿™ä¸ªå‡½æ•°å¾—åˆ°çš„propsæ•°æ®é€šè¿‡defineReactiveå‡½æ•°è®¾ç½®åˆ°vm._propsä¸­ï¼Œç›®çš„å°±æ˜¯æ ¡éªŒï¼Œå°±æ˜¯æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬ä¼ é€’çš„æ•°æ®æ˜¯å¦æ»¡è¶³ propçš„å®šä¹‰è§„èŒƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445//æ‰§è¡ŒvalidatePropæ£€æŸ¥propsDataé‡Œçš„keyå€¼æ˜¯å¦ç¬¦åˆpropsOptionsé‡Œå¯¹åº”çš„è¦æ±‚ï¼Œå¹¶å°†å€¼ä¿å­˜åˆ°valueé‡Œé¢function validateProp ( key, propOptions, propsData, vm) &#123; var prop = propOptions[key]; var absent = !hasOwn(propsData, key); var value = propsData[key]; // boolean casting var booleanIndex = getTypeIndex(Boolean, prop.type); if (booleanIndex &gt; -1) &#123; if (absent &amp;&amp; !hasOwn(prop, &#x27;default&#x27;)) &#123; value = false; &#125; else if (value === &#x27;&#x27; || value === hyphenate(key)) &#123; // only cast empty string / same name to boolean if // boolean has higher priority var stringIndex = getTypeIndex(String, prop.type); if (stringIndex &lt; 0 || booleanIndex &lt; stringIndex) &#123; value = true; &#125; &#125; &#125; //âœ…âœ…âœ…æ£€æµ‹å¦‚æœ prop æ²¡æœ‰å®šä¹‰ default å±æ€§ï¼Œé‚£ä¹ˆè¿”å› undefinedï¼Œé€šè¿‡è¿™å—é€»è¾‘æˆ‘ä»¬çŸ¥é“é™¤äº† Boolean ç±»å‹çš„æ•°æ®ï¼Œå…¶ä½™æ²¡æœ‰è®¾ç½® default å±æ€§çš„ prop é»˜è®¤å€¼éƒ½æ˜¯ undefinedã€‚ if (value === undefined) &#123; value = getPropDefaultValue(vm, prop, key); // since the default value is a fresh copy, // make sure to observe it. var prevShouldObserve = shouldObserve; toggleObserving(true); observe(value); toggleObserving(prevShouldObserve); &#125; if ( process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; // skip validation for weex recycle-list child component props !(false &amp;&amp; isObject(value) &amp;&amp; (&#x27;@binding&#x27; in value)) ) &#123; assertProp(prop, key, value, vm, absent); &#125; return value&#125; ä¸»è¦å°±åš 3 ä»¶äº‹æƒ…ï¼š å¤„ç† Boolean ç±»å‹çš„æ•°æ®ã€‚ å¤„ç†é»˜è®¤æ•°æ®ã€‚ prop æ–­è¨€ï¼Œå¹¶æœ€ç»ˆè¿”å› prop çš„å€¼ã€‚ proxyä»£ç†123456789101112function proxy( target, sourceKey, key) &#123; Object.defineProperty(target, key, &#123; get() &#123; return this[sourceKey][key] &#125;, set(val) &#123; this[sourceKey][key] = val; &#125; &#125;);&#125; è¿™æ®µä»£ç åšäº†2 ä¸ªäº‹ 1ã€ä½¿ç”¨ props åœ¨ vm ä¸Šå ä½ï¼Œä½¿å¾—å¯ä»¥é€šè¿‡ vm.xxx çš„å½¢å¼è®¿é—®åˆ° props 2ã€è®¾ç½® [Object.defineProperty] çš„ get å’Œ set ï¼Œé—´æ¥è·å–å’Œèµ‹å€¼ vm._props defineReactiveå“åº”å¼åœ¨ defineReactive çš„æ—¶å€™ä¼šæ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ setterï¼Œå½“æˆ‘ä»¬ç›´æ¥å¯¹ prop èµ‹å€¼çš„æ—¶å€™ä¼šè¾“å‡ºè­¦å‘Šã€‚ prop çš„å“åº”å¼æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯å½“ vm æ˜¯éæ ¹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œ toggleObserving(false)ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å“åº”å¼çš„ä¼˜åŒ– Props æ›´æ–° å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œæ˜¯è¿™ä¸ªæµç¨‹ çˆ¶ç»„ä»¶æ•°æ®æ”¹å˜ï¼Œåªä¼šæŠŠæ–°çš„æ•°æ®ä¼ ç»™å­ç»„ä»¶ å­ç»„ä»¶æ‹¿åˆ°æ–°æ•°æ®ï¼Œå°±ä¼šç›´æ¥æ›¿æ¢åˆ°åŸæ¥çš„ props æ›¿æ¢å°±æ˜¯ç›´æ¥ç­‰å“ˆï¼Œçœ‹ä¸‹æºç ï¼Œé‡è¦è¯­å¥æ ‡çº¢ 123456789101112131415function updateChildComponent( vm, propsData) &#123; if (propsData &amp;&amp; vm.$options.props) &#123; // ä¿å­˜ props çš„åœ°æ–¹ï¼Œç”¨äºè®¿é—®è½¬æ¥ï¼Œå…·ä½“çœ‹æ–‡ç« ä¸‹é¢ var props = vm._props; // æ‰€æœ‰å­ç»„ä»¶ä¸Šè®¾ç½®çš„ props çš„ key var propKeys = vm.$options._propKeys || []; for (var i = 0; i &lt; propKeys.length; i++) &#123; var key = propKeys[i]; props[key] = propsData[key] &#125; vm.$options.propsData = propsData; &#125;&#125; å¦‚æœæ˜¯å¯¹è±¡ï¼Œæ˜¯è¿™ä¸ªæµç¨‹ çˆ¶ç»„ä»¶ä¼  å¯¹è±¡ ç»™ å­ç»„ä»¶ï¼Œå¹¶ä¸”çˆ¶å­ç»„ä»¶ é¡µé¢éƒ½ä½¿ç”¨åˆ°äº†è¿™ä¸ªæ•°æ® ç»“æœé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ï¼Œä¼šæ”¶é›†åˆ° çˆ¶å­ç»„ä»¶çš„ watcher æ‰€ä»¥å½“ å¯¹è±¡å†…éƒ¨è¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œä¼šé€šçŸ¥åˆ° çˆ¶å’Œå­ æ›´æ–°ã€‚ æ€»ç»“1ã€çˆ¶ç»„ä»¶ data çš„å€¼ å’Œ å­ç»„ä»¶çš„ props æ²¡æœ‰ä»»ä½•è”ç³»ï¼Œæ›´æ”¹ props ä¸å½±å“çˆ¶ç»„ä»¶ data ï¼ˆå…¶å®ä¹Ÿå½±å“å¦‚æœdataæ˜¯ä¸ªå¯¹è±¡ï¼‰ 2ã€props ä¹Ÿæ˜¯å“åº”å¼çš„ï¼Œè·Ÿ data æœ¬è´¨ å·®ä¸å¤š 3ã€props ä¼šè®¿é—®è½¬æ¥ï¼Œèµ‹å€¼è½¬æ¥ ï¼Œå…¶å®æ“ä½œçš„æ˜¯ vm._props çš„å±æ€§","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueâ€”å“åº”å¼å¯¹è±¡","slug":"Vue-å“åº”å¼å¯¹è±¡","date":"2020-12-03T16:00:00.000Z","updated":"2020-12-17T02:22:36.000Z","comments":true,"path":"2020/12/04/Vue-å“åº”å¼å¯¹è±¡/","link":"","permalink":"http://mariogogogo.github.io/2020/12/04/Vue-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1/","excerpt":"è¢«Object.definePropertyç»‘å®šè¿‡çš„å¯¹è±¡ï¼Œä¼šå˜æˆã€Œå“åº”å¼ã€åŒ–ã€‚ä¹Ÿå°±æ˜¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ä¼šè§¦å‘getå’Œsetäº‹ä»¶ã€‚è¿›è€Œè§¦å‘ä¸€äº›è§†å›¾æ›´æ–°","text":"è¢«Object.definePropertyç»‘å®šè¿‡çš„å¯¹è±¡ï¼Œä¼šå˜æˆã€Œå“åº”å¼ã€åŒ–ã€‚ä¹Ÿå°±æ˜¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ä¼šè§¦å‘getå’Œsetäº‹ä»¶ã€‚è¿›è€Œè§¦å‘ä¸€äº›è§†å›¾æ›´æ–° å¸¦ç€é—®é¢˜çœ‹æºç  1ã€Vue æ˜¯æ€ä¹ˆçŸ¥é“æ•°æ®æ”¹å˜ï¼Ÿ 2ã€Vue åœ¨æ•°æ®æ”¹å˜æ—¶ï¼Œæ€ä¹ˆçŸ¥é“é€šçŸ¥å“ªäº›è§†å›¾æ›´æ–°ï¼Ÿ 3ã€Vue åœ¨æ•°æ®æ”¹å˜æ—¶ï¼Œè§†å›¾æ€ä¹ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™æ›´æ–°ï¼Ÿ Object.defineProperty123456789101112131415161718192021222324252627function defineReactive (obj, key, val) &#123; Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get: () =&gt; &#123; console.log(&#x27;æˆ‘è¢«è¯»äº†ï¼Œæˆ‘è¦ä¸è¦åšç‚¹ä»€ä¹ˆå¥½?&#x27;); return val; &#125;, set: newVal =&gt; &#123; if (val === newVal) &#123; return; &#125; val = newVal; console.log(&quot;æ•°æ®è¢«æ”¹å˜äº†ï¼Œæˆ‘è¦æŠŠæ–°çš„å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»!&quot;); &#125; &#125;)&#125;let data = &#123; text: &#x27;hello world&#x27;,&#125;;// å¯¹dataä¸Šçš„textå±æ€§è¿›è¡Œç»‘å®šdefineReactive(data, &#x27;text&#x27;, data.text);console.log(data.text); // æ§åˆ¶å°è¾“å‡º &lt;æˆ‘è¢«è¯»äº†ï¼Œæˆ‘è¦ä¸è¦åšç‚¹ä»€ä¹ˆå¥½?&gt;data.text = &#x27;hello Vue&#x27;; // æ§åˆ¶å°è¾“å‡º &lt;hello Vue &amp;&amp; æ•°æ®è¢«æ”¹å˜äº†ï¼Œæˆ‘è¦æŠŠæ–°çš„å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»!&gt; Observer ã€Œå“åº”å¼ã€Vueä¸­ç”¨Observerç±»æ¥ç®¡ç†ä¸Šè¿°å“åº”å¼åŒ–Object.definePropertyçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹ä»£ç æ¥æè¿°ï¼Œå°†this.dataä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨Vueä»£ç ä¸­å®šä¹‰çš„dataå±æ€§å…¨éƒ¨è¿›è¡Œã€Œå“åº”å¼ã€ç»‘å®šã€‚ 1234567891011121314class Observer &#123; constructor() &#123; // å“åº”å¼ç»‘å®šæ•°æ®é€šè¿‡æ–¹æ³• observe(this.data); &#125;&#125; export function observe (data) &#123; const keys = Object.keys(data); for (let i = 0; i &lt; keys.length; i++) &#123; // å°†dataä¸­æˆ‘ä»¬å®šä¹‰çš„æ¯ä¸ªå±æ€§è¿›è¡Œå“åº”å¼ç»‘å®š defineReactive(obj, keys[i]); &#125;&#125; æºç ä¸­1234567891011121314151617181920212223242526272829303132333435var shouldObserve = true;function toggleObserving (value) &#123; shouldObserve = value;&#125;/** * å°è¯•ä¸ºä¸€ä¸ªå€¼åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…å®ä¾‹ï¼› * å¦‚æœæˆåŠŸè§‚å¯Ÿåˆ°ï¼Œåˆ™è¿”å›æ–°è§‚å¯Ÿè€…ï¼› * å¦‚æœè¯¥å€¼å·²ç»å…·æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œåˆ™è¿”å›ç°æœ‰è§‚å¯Ÿè€…ã€‚ */function observe (value, asRootData) &#123; // valueæ˜¯ä¸æ˜¯object ä¸èƒ½æ˜¯vnodeå®ä¾‹ if (!isObject(value) || value instanceof VNode) &#123; return &#125; var ob; //åˆ¤æ–­å¸¦ä¸å¸¦ obæ ‡è¯† if (hasOwn(value, &#x27;__ob__&#x27;) &amp;&amp; value.__ob__ instanceof Observer) &#123; ob = value.__ob__; &#125; else if ( shouldObserve &amp;&amp; //å…¨å±€æ§åˆ¶ shouldObserve === false !isServerRendering() &amp;&amp; (Array.isArray(value) || isPlainObject(value)) &amp;&amp; Object.isExtensible(value) &amp;&amp; //å¯æ‰©å±•å±æ€§ !value._isVue //ä¸æ˜¯vueå®ä¾‹ ) &#123; ob = new Observer(value); &#125; if (asRootData &amp;&amp; ob) &#123; ob.vmCount++; &#125; return ob&#125; Observer1234567891011121314151617181920212223242526272829303132/** é™„åŠ åˆ°æ¯ä¸ªè§‚å¯Ÿå¯¹è±¡çš„è§‚å¯Ÿè€…ç±»ã€‚é™„åŠ åï¼Œ è§‚å¯Ÿè€…ä¼šå°†ç›®æ ‡å¯¹è±¡çš„å±æ€§é”®è½¬æ¢ä¸ºç”¨äºæ”¶é›†ä¾èµ–é¡¹å¹¶è°ƒåº¦æ›´æ–°çš„getter / setterã€‚ */var Observer = function Observer (value) &#123; this.value = value; this.dep = new Dep(); //åˆ›å»ºdepå®ä¾‹ åé¢å†è¯´å…ˆè·³è¿‡ this.vmCount = 0; //ç›®çš„ ä¸ºvaluæ·»åŠ obæ ‡è¯† å˜æˆå“åº”å¼ å¹¶ä¸”thisæŒ‡å‘å½“å‰å®ä¾‹ //ä¸‹ä¸€æ¬¡æ‰§è¡Œä¸Šé¢çš„hasOwn(value, &#x27;__ob__&#x27;) ç›´æ¥trueäº† def(value, &#x27;__ob__&#x27;, this); if (Array.isArray(value)) &#123; if (hasProto) &#123; protoAugment(value, arrayMethods); &#125; else &#123; copyAugment(value, arrayMethods, arrayKeys); &#125; this.observeArray(value); //éå†æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´  é€’å½’æŠŠä»–ä»¬éƒ½è§‚å¯Ÿèµ·æ¥ &#125; else &#123; this.walk(value);//éå†å¯¹è±¡æ¯ä¸€ä¸ªå±æ€§ &#125;&#125;; //enumerable æ˜¯ä¸å¯æšä¸¾ å¦‚æœä¸ä¼ åˆ™æ˜¯ undefinedfunction def (obj, key, val, enumerable) &#123; Object.defineProperty(obj, key, &#123; value: val, enumerable: !!enumerable, //false ä»£è¡¨ä¸å¯æšä¸¾ ä¸èƒ½åŠ å…¥forå¾ªç¯ writable: true, configurable: true &#125;);&#125; 123456789101112131415161718 /** * è§‚å¯Ÿæ•°ç»„é¡¹çš„åˆ—è¡¨ã€‚ */ Observer.prototype.observeArray = function observeArray (items) &#123; for (var i = 0, l = items.length; i &lt; l; i++) &#123; observe(items[i]); &#125; &#125;;/** * éå†æ‰€æœ‰å±æ€§å¹¶å°†å®ƒä»¬è½¬æ¢ä¸º* getter / setterã€‚ * ä»…å½“*å€¼ç±»å‹ä¸ºObjectæ—¶ï¼Œæ‰åº”è°ƒç”¨æ­¤æ–¹æ³•ã€‚ */ Observer.prototype.walk = function walk (obj) &#123; var keys = Object.keys(obj); for (var i = 0; i &lt; keys.length; i++) &#123; defineReactive$$1(obj, keys[i]); &#125; &#125;; defineReactive$$1å°±æ˜¯æŠŠå¯¹è±¡å˜æˆå“åº”å¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * Define a reactive property on an Object. */ function defineReactive$$1 ( obj, key, val, customSetter, shallow ) &#123; var dep = new Dep(); ... // å¦‚æœæœ‰childe åˆ™é€’å½’è°ƒç”¨observe var childOb = !shallow &amp;&amp; observe(val); Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get: function reactiveGetter () &#123; var value = getter ? getter.call(obj) : val; if (Dep.target) &#123; dep.depend(); //ä¾èµ–æ”¶é›† if (childOb) &#123; childOb.dep.depend(); if (Array.isArray(value)) &#123; dependArray(value); &#125; &#125; &#125; return value &#125;, set: function reactiveSetter (newVal) &#123; var value = getter ? getter.call(obj) : val; /* eslint-disable no-self-compare */ if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123; return &#125; /* eslint-enable no-self-compare */ if (customSetter) &#123; customSetter(); &#125; // #7981: for accessor properties without setter if (getter &amp;&amp; !setter) &#123; return &#125; if (setter) &#123; setter.call(obj, newVal); &#125; else &#123; val = newVal; &#125; childOb = !shallow &amp;&amp; observe(newVal); dep.notify(); //æ´¾å‘æ›´æ–° &#125; &#125;); &#125; å“åº”å¼å¯¹è±¡å°±æ˜¯ç»™å®ƒå¯¹è±¡ä¸Šçš„å±æ€§æ·»åŠ getter/setter,æ— è®ºè®¿é—®è¿˜æ˜¯ä¿®æ”¹å®ƒéƒ½æœ‰ä¸€å®šçš„é€»è¾‘éœ€è¦æ‰§è¡Œ æ€»ç»“1ã€data ä¸­æ¯ä¸ªå£°æ˜çš„å±æ€§ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª ä¸“å±çš„ä¾èµ–æ”¶é›†å™¨ subs 2ã€å½“é¡µé¢ä½¿ç”¨åˆ° æŸä¸ªå±æ€§æ—¶ï¼Œé¡µé¢çš„ watcher å°±ä¼šè¢« æ”¾åˆ° ä¾èµ–æ”¶é›†å™¨ subs ä¸­","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueâ€”DOMæŒ‚è½½æœºåˆ¶","slug":"Vue-DOMæŒ‚è½½æœºåˆ¶","date":"2020-12-02T16:00:00.000Z","updated":"2020-12-15T02:16:39.000Z","comments":true,"path":"2020/12/03/Vue-DOMæŒ‚è½½æœºåˆ¶/","link":"","permalink":"http://mariogogogo.github.io/2020/12/03/Vue-DOM%E6%8C%82%E8%BD%BD%E6%9C%BA%E5%88%B6/","excerpt":"Vue ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡ $mount å®ä¾‹æ–¹æ³•å»æŒ‚è½½ vm çš„","text":"Vue ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡ $mount å®ä¾‹æ–¹æ³•å»æŒ‚è½½ vm çš„ 123456789101112131415import Temp from &#x27;./Temp.vue&#x27;;window.vm = new Vue(&#123; // elæ˜¯å®ä¾‹æŒ‚è½½ç‚¹ï¼Œä¼šå°†æ ¹ç»„ä»¶æ›¿æ¢æ‰åŸæ–‡æ¡£ä¸­idä¸º app æ ‡ç­¾ el: &#x27;#app&#x27;, // é€šè¿‡renderå‡½æ•°æ¸²æŸ“ render: h =&gt; &#123; // è¿™é‡ŒAppæ˜¯æ ¹ç»„ä»¶ h(App) &#125;&#125;)//Temp.vue&lt;div&gt; è¿™æ˜¯æ¶ˆæ¯ï¼š&#123;&#123;message&#125;&#125;&lt;/div&gt; initMixin1234567891011121314151617181920212223242526function initMixin (Vue) &#123; Vue.prototype._init = function (options) &#123; var vm = this; // a uid vm._uid = uid$3++; // a flag to avoid this being observed vm._isVue = true; // expose real self åˆå§‹åŒ– vm._self = vm; /******************/ initLifecycle(vm); initEvents(vm); initRender(vm); callHook(vm, &#x27;beforeCreate&#x27;); initInjections(vm); // resolve injections before data/props initState(vm); initProvide(vm); // resolve provide after data/props /**************************/ callHook(vm, &#x27;created&#x27;); if (vm.$options.el) &#123; //è·³è½¬ 10976è¡Œ vm.$mount(vm.$options.el); &#125; &#125;; $mount12345678910111213141516171819202122232425Vue.prototype.$mount = function ( el, hydrating) &#123; el = el &amp;&amp; inBrowser ? query(el) : undefined; return mountComponent(this, el, hydrating)&#125;;var mount = Vue.prototype.$mount;Vue.prototype.$mount = function ( el, hydrating) &#123; el = el &amp;&amp; query(el); ... var options = this.$options; ... //å¦‚æœæ²¡æœ‰renderå‡½æ•°ï¼Œé‚£ä¹ˆè·å–æ¨¡æ¿å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•° if (!options.render) &#123; ... &#125; return mount.call(this, el, hydrating)&#125;; æˆ‘ä»¬å°†vueåŸå‹ä¸Šçš„$mountæ–¹æ³•ä¿å­˜åœ¨mountä¸­ã€‚ ç„¶åVueåŸå‹ä¸Š$mountæ–¹æ³•ä¸Šè¢«ä¸€ä¸ªæ–°çš„æ–¹æ³•è¦†ç›–äº†ã€‚æ–°æ–¹æ³•ä¼šè°ƒç”¨åŸå§‹çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸è¢«ç§°ä¸ºå‡½æ•°åŠ«æŒã€‚é€šå¸¸å‡½æ•°åŠ«æŒå¯ä»¥åœ¨åŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šæ–°å¢å…¶ä»–åŠŸèƒ½ 1234567891011121314function query () &#123; if (typeof el === &#x27;string&#x27;) &#123; var selected = document.querySelector(el); if (!selected) &#123; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( &#x27;Cannot find element: &#x27; + el ); return document.createElement(&#x27;div&#x27;) &#125; return selected &#125; else &#123; return el &#125;&#125; queryçš„ä¸»è¦ä½œç”¨æ˜¯è·å–DOMå…ƒç´  mountComponent$mountæ–¹æ³•å°†idè½¬æ¢ä¸ºdomå…ƒç´ åï¼Œä½¿ç”¨mountComponentå‡½æ•°å°†Vue.jså®ä¾‹æŒ‚è½½åˆ°DOMä¸Šã€‚ å®ä¾‹æŒ‚è½½åˆ°DOMä¸Šå®é™…å°±æ˜¯å°†æ¨¡æ¿æ¸²æŸ“åˆ°æŒ‡å®šDOMå…ƒç´ ä¸­ã€‚è€Œä¸”æ˜¯æŒç»­æ€§çš„ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥é‡æ–°è§¦å‘æ¸²æŸ“åˆ°æŒ‡å®šDOMå…ƒç´ ä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243function mountComponent ( vm, el, hydrating) &#123; vm.$el = el; if (!vm.$options.render) &#123; vm.$options.render = createEmptyVNode; if (process.env.NODE_ENV !== &#x27;production&#x27;) &#123; //å¼€å‘ç¯å¢ƒä¼šå‘å‡ºâš ï¸è­¦å‘Š &#125; &#125; // æ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeMountæ–¹æ³• callHook(vm, &#x27;beforeMount&#x27;); //å®šä¹‰æ–¹æ³• var updateComponent; if (process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; config.performance &amp;&amp; mark) &#123; ... &#125; else &#123; //æŒ‚è½½ updateComponent = function () &#123; //vm._render() ==&gt; ç”Ÿæˆvnode ä¼ å…¥update vm._update(vm._render(), hydrating); &#125;; &#125; new Watcher(vm, updateComponent, noop, &#123; before: function before () &#123; if (vm._isMounted) &#123; callHook(vm, &#x27;beforeUpdate&#x27;); &#125; &#125; &#125;, true /* isRenderWatcher */); hydrating = false; if (vm.$vnode == null) &#123; vm._isMounted = true; callHook(vm, &#x27;mounted&#x27;); &#125; return vm //è¿”å›vmå®ä¾‹&#125; vm._updateçš„ä½œç”¨è°ƒç”¨è™šæ‹ŸDOMä¸­patchæ–¹æ³•å»æ‰§è¡ŒèŠ‚ç‚¹å¯¹æ¯”ä¸æ¸²æŸ“æ“ä½œ vm._render()æ‰§è¡Œæ¸²æŸ“å‡½æ•°å¾—åˆ°ä¸€ä»½æœ€æ–°çš„VNodeèŠ‚ç‚¹æ ‘ ==å…ˆæ‰§è¡Œæ¸²æŸ“å‡½æ•°å¾—åˆ°ä¸€ä»½æœ€æ–°çš„nodeèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡_updateæ–¹æ³•å¯¹æœ€æ–°çš„Vnodeå’Œæ—§Vnodeè¿›è¡Œå¯¹æ¯”å¹¶æ›´æ–°domèŠ‚ç‚¹ã€‚== new Watcher1234567new Watcher(vm, updateComponent, noop, &#123; before: function before () &#123; if (vm._isMounted) &#123; callHook(vm, &#x27;beforeUpdate&#x27;); &#125; &#125;&#125;, true /* isRenderWatcher */); åœ¨new Watcherä¸­å¾ˆé‡è¦çš„ä¸€æ­¥å°±æ˜¯å°†updateComponent èµ‹å€¼ç»™watcher.getter 123456789101112131415var Watcher = function Watcher ( vm, expOrFn, cb, options, isRenderWatcher)&#123; if (typeof expOrFn === &#x27;function&#x27;) &#123; this.getter = expOrFn; &#125; else &#123; this.getter = parsePath(expOrFn); .....&#125; æŒ‚è½½æ˜¯æŒç»­æ€§çš„ï¼Œè¿™ä¸ªå…³é”®åœ¨äºç”¨new watcherï¼Œå½“å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°updateComponent æ”¯æŒå‡½æ•°ï¼Œå®ƒä¼šåŒæ—¶è§‚å¯Ÿå‡½æ•°ä¸­è¯»å–æ‰€æœ‰vueå®ä¾‹ä¸Šçš„å“åº”å¼æ•°æ® æŒ‚è½½å®Œæ¯•åè¿˜æœ‰æ‰§è¡Œmountedé’©å­å‡½æ•° æ€»ç»“","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vue-åˆå§‹åŒ–åŸç†","slug":"Vue-åˆå§‹åŒ–åŸç†","date":"2020-11-30T16:00:00.000Z","updated":"2020-12-15T02:12:32.000Z","comments":true,"path":"2020/12/01/Vue-åˆå§‹åŒ–åŸç†/","link":"","permalink":"http://mariogogogo.github.io/2020/12/01/Vue-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8E%9F%E7%90%86/","excerpt":"Vueçš„åˆå§‹åŒ–é€»è¾‘å†™çš„éå¸¸æ¸…æ¥šï¼ŒæŠŠä¸åŒçš„åŠŸèƒ½é€»è¾‘æ‹†æˆä¸€äº›å•ç‹¬çš„å‡½æ•°æ‰§è¡Œï¼Œè®©ä¸»çº¿é€»è¾‘ä¸€ç›®äº†ç„¶ï¼Œè¿™æ ·çš„ç¼–ç¨‹æ€æƒ³æ˜¯éå¸¸å€¼å¾—å€Ÿé‰´å’Œå­¦ä¹ çš„ã€‚","text":"Vueçš„åˆå§‹åŒ–é€»è¾‘å†™çš„éå¸¸æ¸…æ¥šï¼ŒæŠŠä¸åŒçš„åŠŸèƒ½é€»è¾‘æ‹†æˆä¸€äº›å•ç‹¬çš„å‡½æ•°æ‰§è¡Œï¼Œè®©ä¸»çº¿é€»è¾‘ä¸€ç›®äº†ç„¶ï¼Œè¿™æ ·çš„ç¼–ç¨‹æ€æƒ³æ˜¯éå¸¸å€¼å¾—å€Ÿé‰´å’Œå­¦ä¹ çš„ã€‚ 12345678910111213function Vue (options) &#123; if (process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; !(this instanceof Vue) ) &#123; warn(&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;); &#125; this._init(options);&#125;initMixin(Vue);stateMixin(Vue);eventsMixin(Vue);lifecycleMixin(Vue);renderMixin(Vue); æ„é€ å‡½æ•°ä¸­é¦–å…ˆè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œç„¶åè¿›è¡Œ_initåˆå§‹åŒ– _init1234567891011121314151617181920212223242526function initMixin (Vue) &#123; Vue.prototype._init = function (options) &#123; var vm = this; vm.$options = mergeOptions( resolveConstructorOptions(vm.constructor), options || &#123;&#125;, vm ... vm._self = vm; initLifecycle(vm); initEvents(vm); initRender(vm); callHook(vm, &#x27;beforeCreate&#x27;); initInjections(vm); // åœ¨æ•°æ®/é“å…·ä¹‹å‰è§£å†³æ³¨å…¥é—®é¢˜ initState(vm); initProvide(vm); // è§£å†³æä¾›æ•°æ®/é“å…·åçš„é—®é¢˜ callHook(vm, &#x27;created&#x27;); //å¦‚æœæ²¡æœ‰elé€‰é¡¹ï¼Œå®ƒå°±å¤„äºæœªæŒ‚è½½çŠ¶æ€ï¼Œæ²¡æœ‰å…³è”çš„domï¼Œ if (vm.$options.el) &#123; //è°ƒç”¨mountæŒ‚è½½vmï¼Œæ¸²æŸ“æˆçœŸå®dom vm.$mount(vm.$options.el); &#125; &#125;&#125; å½“å‡½æ•°initMixinè¢«è°ƒç”¨ï¼Œä¼šå‘vueæ„é€ å‡½æ•°çš„prototypeå±æ€§æ·»åŠ initæ–¹æ³•ï¼Œå½“æ‰§è¡Œnew Vue(),å°±ä¼šè°ƒç”¨_initæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®ç°ä¸€ç³»åˆ—åˆå§‹åŒ–æ“ä½œï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸï¼ŒåŠå“åº”å¼ç³»ç»Ÿæµç¨‹çš„å¯åŠ¨ç­‰ mergeOptionsè¿™ä¸ªå‡½æ•°çš„ç›®çš„å°†ç”¨æˆ·ä¼ é€’çš„options,ä¸å½“å‰æ„é€ å‡½æ•°çš„optionsåŠ==çˆ¶çº§å®ä¾‹==æ„é€ å‡½æ•°çš„optionsåˆå¹¶æˆä¸€ä¸ªæ–°çš„options èµ‹å€¼ç»™$optionså±æ€§ï¼Œ ä¸ºä»€ä¹ˆä¼šæœ‰çˆ¶çº§ï¼Ÿ å› ä¸ºvue.jså¯èƒ½æ˜¯ä¸€ä¸ªå­ç»„ä»¶ åˆå§‹åŒ–äº‹ä»¶ä¸å±æ€§åè§¦å‘ç”Ÿå‘½å‘¨æœŸbeforeCreateï¼Œ éšååˆå§‹åŒ–provide/injectå’Œstateåè§¦å‘created callHookå‡½æ•°åŸç†12345678910111213141516171819function callHook (vm, hook) &#123; // #7573 disable dep collection when invoking lifecycle hooks pushTarget(); var handlers = vm.$options[hook]; if (handlers) &#123; for (var i = 0, j = handlers.length; i &lt; j; i++) &#123; //æ•è·é’©å­å‡½æ•°å‘ç”Ÿçš„é”™è¯¯ jså•çº¿ç¨‹å¦‚æœé”™è¯¯äº†å°±ä¼šåœæ­¢å¾€ä¸‹æ‰§è¡Œ try &#123; handlers[i].call(vm); &#125; catch (e) &#123; handleError(e, vm, (hook + &quot; hook&quot;)); &#125; &#125; &#125; if (vm._hasHookEvent) &#123; vm.$emit(&#x27;hook:&#x27; + hook); &#125; popTarget();&#125; callHookçš„ä½œç”¨æ˜¯è§¦å‘ç”¨æˆ·è®¾ç½®ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè€Œç”¨æˆ·è®¾ç½®çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¼šåœ¨new Vueï¼ˆï¼‰é€šè¿‡å‚æ•°ä¼ é€’ç»™vueï¼Œå¯ä»¥é€šè¿‡optionså‚æ•°å¾—åˆ°ç”¨æˆ·è®¾ç½®çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆvm.$options.createdè·å–åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«é’©å­å‡½æ•°ï¼‰ ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­è½¬æ¢æˆæ•°ç»„ï¼Ÿæˆ‘ä»¬çŸ¥é“åœ¨Vue.mixinä¸­ä¹Ÿå¯ä»¥å†™å…¥ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¦‚æœä¸ä¸€ä¸ªç»„ä»¶ä¸€èµ·æ··ç”¨ï¼Œéœ€è¦åŒæ—¶è§¦å‘2ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè€Œè½¬æˆæ•°ç»„åï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­åˆ—è¡¨ä¸­ä¿å­˜å¤šä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ 123456789101112131415161718192021var mixin = &#123; created: function () &#123; console.log(&#x27;æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&#x27;) &#125;&#125;export default mixinimport mixin from &#x27;./mixin&#x27;export default &#123; mixins:[mixin], name:&quot;temp&quot;, data()&#123; return &#123; msg:&quot;hello vue&quot; &#125; &#125;, created() &#123; console.log(&#x27;created&#x27;) &#125;,&#125; æ€»ç»“ å„ç§åˆå§‹åŒ–é€»è¾‘æˆ‘ä»¬å…ˆä¸çœ‹ã€‚åœ¨åˆå§‹åŒ–çš„æœ€åï¼Œæ£€æµ‹åˆ°å¦‚æœæœ‰elå±æ€§ï¼Œåˆ™è°ƒç”¨vm.$mountæ–¹æ³•æŒ‚è½½vmï¼ŒæŒ‚è½½çš„ç›®æ ‡å°±æ˜¯==æŠŠæ¨¡æ¿æ¸²æŸ“æˆæœ€ç»ˆçš„ DOM==","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„","slug":"ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„","date":"2020-11-14T16:00:00.000Z","updated":"2020-12-09T05:37:59.000Z","comments":true,"path":"2020/11/15/ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„/","link":"","permalink":"http://mariogogogo.github.io/2020/11/15/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%9A%84%E6%9E%B6%E6%9E%84/","excerpt":"1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„ é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œæ¶æ„æ˜¯ä¸ºéœ€æ±‚æœåŠ¡çš„ã€‚","text":"1ã€ä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ªå¥½çš„æ¶æ„ é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œæ¶æ„æ˜¯ä¸ºéœ€æ±‚æœåŠ¡çš„ã€‚ å‰ç«¯æ¶æ„å­˜åœ¨çš„ç›®çš„ï¼Œå°±æˆ‘ä¸ªäººç†è§£æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š 1ã€æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä»£ç çš„å¯è¯»æ€§ä¸€å®šæ˜¯å¾ˆå¼ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªæ–°äººåŠ å…¥å›¢é˜Ÿï¼Œé‚£ä¹ˆä»–æ¥æ‰‹è¿™ä¸ªé¡¹ç›®ï¼Œä¸€å®šæ˜¯å®¹æ˜“ä¸Šæ‰‹çš„ï¼Œèƒ½ç®€å•è½»æ¾çš„äº†è§£æ•´ä¸ªå‰ç«¯éƒ¨åˆ†çš„ç›¸äº’å…³ç³»ï¼Œä»è€Œæ‰¾åˆ°è‡ªå·±éœ€è¦é‡ç‚¹å…³æ³¨çš„ç‚¹ã€‚è€Œä¸æ˜¯éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´å»ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®çš„å¾ˆå¤šç»†èŠ‚ï¼Œæ‰èƒ½å¼€å§‹ä¸Šæ‰‹åšä¸œè¥¿ã€‚å°±æ–‡ä»¶æ¥è¯´ï¼Œå¯ä»¥ä»æ–‡ä»¶åä¸Šï¼Œåˆ†æ¸…å“ªäº›æ˜¯é¡µé¢ã€å“ªäº›æ˜¯é€»è¾‘ã€å“ªäº›æ˜¯æ ·å¼ã€å“ªäº›æ˜¯å¯ä»¥å¤ç”¨çš„ç»„ä»¶ã€å“ªäº›æ˜¯å›¾æ ‡ç»„ã€åˆæœ‰å“ªäº›æ˜¯ç§»åŠ¨ç«¯æˆ–æ˜¯PCç«¯ä¸“äº«çš„æ ·å¼/é€»è¾‘ç­‰ã€‚å°±ä»£ç æ¥è¯´ï¼ŒåŒ…æ‹¬ç»Ÿä¸€çš„å‘½åé£æ ¼ï¼Œå°è£…åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œçš„ä»£ç çš„ç›¸å…³æ€§è¶³å¤Ÿå¼ºç­‰ã€‚ 2ã€æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä¸€å®šæ˜¯æ˜“äºç»´æŠ¤çš„ï¼Œä¾‹å¦‚åœ¨æ–°å¢éœ€æ±‚ã€æ›´æ”¹éœ€æ±‚ã€ä¿®æ­£bugï¼Œéƒ½ä¸ä¼šé€ æˆæ„æ–™ä¹‹å¤–çš„å˜åŒ–ï¼Œæ¯”å¦‚è¯´ä¿®æ”¹äº†ä¸€ä¸ªé¡µé¢ç»„ä»¶çš„å†…å®¹ï¼Œå´å¯¼è‡´å¦å¤–ä¸€ä¸ªé¡µé¢ç»„ä»¶å‘ç”Ÿå˜åŒ–ï¼ˆè¿™ä¹Ÿå¤ªå‘äº†ï¼‰ã€‚å› æ­¤ï¼Œè¦ä½è€¦åˆï¼Œé«˜å†…èšï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºæ˜¯å¯é¢„æœŸçš„ã€‚ 3ã€æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ã€‚ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Œä¸€å®šæ‰©å±•æ€§è¦å¼ºï¼Œä¸èƒ½å†™æ­»ã€‚éœ€æ±‚å˜æ›´å¤ªTMæ­£å¸¸äº†ï¼Œæ–°å¢éœ€æ±‚ä¹Ÿå¤ªTMæ­£å¸¸äº†ã€‚å› æ­¤å¥½çš„æ¶æ„ï¼Œå¿…é¡»è¦è€ƒè™‘åˆ°è¿™äº›æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºä»–ä»¬æ˜¯ä¸€å®šä¼šå‘ç”Ÿçš„ã€‚æ‰€ä»¥ï¼Œä¸€å®šè¦é¿å…æŠŠä»£ç å†™æ­»ã€‚æ¯”å¦‚é¡µé¢ç»„ä»¶Aé‡Œéœ€è¦æœ‰ä¸€ä¸ªæ—¥å†ç»„ä»¶ï¼Œè€Œè¿™ä¸ªæ—¥å†ç»„ä»¶å¼•ç”¨çš„æ˜¯åˆ«äººçš„ï¼ˆæ¯”å¦‚ä»githubä¸Šæ‰¾çš„ï¼‰ã€‚é‚£ä¹ˆå°½é‡ä¸è¦ç›´æ¥åœ¨é¡µé¢ç»„ä»¶Aé‡Œé¢ç›´æ¥å¼•ç”¨è¿™ä¸ªæ—¥å†ç»„ä»¶ï¼Œè€Œæ˜¯å°†å†™ä¸€ä¸ªæ—¥å†ç»„ä»¶Bï¼Œåœ¨è¿™ä¸ªæ—¥å†ç»„ä»¶Bé‡Œå°è£…ä½ å¼•ç”¨çš„æ—¥å†ç»„ä»¶Cï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ—¥å†ç»„ä»¶Bæ¥è¿›è¡Œæ“ä½œã€‚åŸå› å¾ˆç®€å•ï¼Œå‡å¦‚æŸå¤©äº§å“ç»ç†è¯´ï¼Œè¿™ä¸ªæ—¥å†ç»„ä»¶å¤ªä¸‘äº†ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªå§ã€‚å¦‚æœä½ ç›´æ¥åœ¨é¡µé¢ç»„ä»¶Aé‡Œå†…åµŒè¿™ä¸ªå¼•ç”¨çš„æ—¥å†ç»„ä»¶Cï¼Œä½ å¾ˆå¯èƒ½å°±è¦æ”¹å¾ˆå¤šä»£ç ï¼ˆå› ä¸ºä¸åŒæ—¥å†ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•å’Œæš´éœ²çš„æ¥å£å¯èƒ½ä¸åŒï¼‰ã€‚å‡å¦‚ä½ è¿˜åœ¨å…¶ä»–å¤šä¸ªåœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªæ—¥å†ç»„ä»¶ï¼Œé‚£å°±æ›´ç³Ÿç³•äº†ï¼æ¯ä¸ªåœ°æ–¹éƒ½è¦æ”¹ã€‚è€Œè‹¥æ˜¯å°†å¼•ç”¨çš„æ—¥å†ç»„ä»¶Cå°è£…åˆ°è‡ªå·±å†™çš„æ—¥å†ç»„ä»¶Bä¹‹ä¸­ï¼Œé‚£ä¹ˆä½ åªéœ€è¦æ”¹æ—¥å†ç»„ä»¶Bé‡Œçš„ç›¸åº”ä»£ç å³å¯ï¼Œè€Œå› ä¸ºæ—¥å†ç»„ä»¶Bæš´éœ²çš„æ¥å£æ˜¯ä¸å˜çš„ï¼Œé‚£ä¹ˆè‡ªç„¶ä¸ç”¨ä¿®æ”¹é¡µé¢ä¸­çš„ä»£ç äº†ã€‚ é™„å›¾ï¼Œä»¥æ—¥å†ç»„ä»¶ä¸ºä¾‹ï¼Œæ˜¯å¦è€ƒè™‘åˆ°æ‰©å±•æ€§çš„ç»“æœ æœªè€ƒè™‘åˆ°æ‰©å±•æ€§ è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼š 4ã€ä¾¿äºååŒã€‚åŒ…æ‹¬å‰ç«¯å’Œåç«¯çš„ååŒï¼Œå‰ç«¯å’Œå‰ç«¯ä¹‹é—´çš„ååŒã€‚å…·ä½“æ¥è¯´ï¼Œå‰åç«¯çš„ååŒé€šå¸¸æ˜¯ä»¥ajaxä¸ºäº¤äº’ï¼Œé‚£ä¹ˆåº”è‡³å°‘æœ‰ä¸€ä¸ªç”¨äºä¸“é—¨å°è£…äº†æ‰€æœ‰ajaxè¯·æ±‚çš„æ–‡ä»¶ï¼Œæ‰€æœ‰ajaxè¯·æ±‚éƒ½å°è£…åœ¨è¿™é‡Œã€‚åœ¨å¼€å‘æ—¶ï¼Œè¿™é‡Œå°è£…çš„æ–¹æ³•åº”è¯¥å¯ä»¥æ¨¡æ‹Ÿå‘é€å’Œæ¥æ”¶çº¦å®šå¥½çš„äº¤äº’å†…å®¹ï¼Œæ–¹ä¾¿å¼€å‘è”è°ƒã€‚è€Œå‰ç«¯å’Œå‰ç«¯çš„ååŒï¼Œä¸»è¦ä½“ç°åœ¨åŒæ—¶åœ¨æ›´æ”¹ä»£ç æ—¶ï¼Œä¸ä¼šå½±å“å¯¹æ–¹ä»£ç çš„æ­£å¸¸è¿è¡Œã€‚å› æ­¤è¦æ±‚å°è£…ã€è§£è€¦ä»¥åŠä½å¹²æ‰°åº¦æ˜¯å¿…é¡»çš„ã€‚ 5ã€è‡ªåŠ¨åŒ–è‡ªåŠ¨æ‰“åŒ…ï¼Œå‹ç¼©ï¼Œæ··æ·†ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå†åŠ ä¸Šè‡ªåŠ¨å•å…ƒæµ‹è¯•ã€‚ æ€»ç»“ï¼šæ€»ç»“æ¥è¯´ï¼Œä¸€ä¸ªå¥½çš„æ¶æ„çš„ç›®çš„æ˜¯ï¼Œè®©å‰ç«¯å†™ä»£ç å†™çš„èˆ’æœï¼Œè®©åç«¯è”è°ƒçš„èˆ’æœï¼Œè®©äº§å“ç»ç†æ”¹éœ€æ±‚æ”¹çš„èˆ’æœã€‚ 2ã€æˆ‘å¦‚ä½•è®¾è®¡æ¶æ„ æˆ‘ä¸æ•¢è¯´è‡ªå·±çš„æ¶æ„æ˜¯å¥½çš„æ¶æ„ï¼ˆæ˜¾ç„¶ä¸æ˜¯å•¦ï¼‰ï¼Œåªèƒ½åˆ†äº«è‡ªå·±æœ€è¿‘åšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œå®ƒçš„æ¶æ„çš„å¦‚ä½•åšçš„ã€‚ é¦–å…ˆï¼Œç¡®å®šéœ€æ±‚ï¼š 1ã€ä¸€ä¸ªä¸­å°å‹ç½‘ç«™ï¼ŒåŒæ—¶é¢å‘ç§»åŠ¨ç«¯å’ŒPCç«¯ï¼ˆå•ç«¯å¤§æ¦‚15ä¸ªé¡µé¢ï¼Œç®—ä¸Šå¼¹çª—å¤§çº¦20ä¸ªï¼‰ã€‚2ã€é¢„ç®—æœ‰é™ï¼ˆç»™çš„é’±å°‘ï¼‰ï¼Œå¼€å‘æ—¶é—´æœ‰é™ï¼ˆä¸€ä¸ªæœˆï¼‰ã€‚3ã€å¯èƒ½å­˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šçš„éœ€æ±‚å˜æ›´ï¼ˆæ¯”å¦‚å¢åŠ é¡µé¢æˆ–ä¿®æ”¹æŸäº›é¡µé¢å†…å®¹ï¼‰ã€‚4ã€å®¢æˆ·å¯èƒ½ä¸å¤ªåœ¨ä¹ä¼˜åŒ–ï¼ˆä½†æ˜¯æˆ‘è‡ªå·±åœ¨ä¹å•Šï¼ï¼‰5ã€è¦æ±‚å…¼å®¹IE9ä»¥ä¸Šã€‚ å…¶æ¬¡å¼€å§‹å†³å®šï¼š 1ã€å…¼å®¹IE9ä»¥ä¸Šè¯´æ˜å¯ä»¥ä½¿ç”¨ä¸»æµæ¡†æ¶ï¼Œè€Œæ— éœ€å¿…é¡»ä½¿ç”¨jqueryã€‚å› æ­¤æˆ‘é‡‡ç”¨äº†vueï¼Œç‰ˆæœ¬æ˜¯2.0ï¼›2ã€é¢„ç®—æœ‰é™ï¼Œæ—¶é—´æœ‰é™ï¼Œå› æ­¤PCç«¯å’Œç§»åŠ¨ç«¯å…±htmlå’Œjsï¼Œç‹¬ç«‹cssã€‚3ã€é¡µé¢æœ‰é™ï¼Œå› æ­¤æ— éœ€å°†æ¶æ„å±‚çº§åˆ’åˆ†çš„æ¯”è¾ƒç»†ï¼Œåªéœ€è¦æŒ‰å…¶ç±»å‹åˆ’åˆ†å³å¯ï¼›4ã€æ ¹æ®åŸå‹å›¾æ¥çœ‹ï¼Œé¡µé¢å¤æ‚ç¨‹åº¦æœ‰é™ï¼Œå¤ç”¨éƒ¨åˆ†ä¸æ˜¯å¾ˆå¤šï¼Œå› æ­¤å¯ä»¥ç¡®å®šå“ªäº›ä¸œè¥¿éœ€è¦å°è£…å¤ç”¨ï¼Œå“ªäº›æ¯”è¾ƒå¤æ‚éœ€è¦ç‹¬ç«‹å°è£…ï¼Œå“ªäº›æ¯”è¾ƒç®€å•ä¸ºäº†ç®€åŒ–å¼€å‘éš¾åº¦å¯ä»¥ç›´æ¥è€¦åˆã€‚5ã€è‡ªå·±æ¯”è¾ƒç†Ÿç»ƒå•é¡µé¢ç½‘ç«™ï¼Œå› æ­¤é‡‡ç”¨ä»¥å•é¡µé¢ä¸ºä¸»ï¼Œå¼‚æ­¥åŠ è½½å…¶ä»–é¡µé¢çš„å½¢å¼ã€‚ äºæ˜¯ä½¿ç”¨ç›¸å…³é…å¥—çš„ä¸œè¥¿ï¼Œæ¯”å¦‚webpackï¼Œvue-routerç­‰ï¼Œå¦å¤–ä¸ºäº†å¼€å‘å’Œç”Ÿäº§çš„æ–¹ä¾¿æ€§ï¼Œé‡‡ç”¨ä»¥ä¸‹æ¨¡å¼è¿›è¡Œå¼€å‘ã€‚ ç¬¬ä¸‰ï¼Œåˆ’åˆ†åŠŸèƒ½ã€‚ é¦–å…ˆæœ‰ä¸€ä¸ªæ ¹htmlï¼Œç”¨æˆ·éœ€è¦é€šè¿‡è®¿é—®å®ƒæ¥åŠ è½½æˆ‘ä»¬çš„jsé€»è¾‘ï¼Œå› æ­¤jsé€»è¾‘çš„ä»£ç è¢«å†™åœ¨main.jsä¹‹ä¸­ã€‚ åœ¨main.jsä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„å‰ç«¯ä»£ç å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š ç»„ä»¶æ ‘ï¼› åŠŸèƒ½æ¨¡å—ï¼› å„ç§èµ„æºï¼› å¦‚ä¸‹å›¾ï¼š åŠŸèƒ½åˆ’åˆ†å¥½ä¹‹åï¼Œç›¸åŒåŠŸèƒ½çš„æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå‘½åé£æ ¼åº”è¯¥ç±»ä¼¼ã€‚ å…·ä½“æ¥è¯´ï¼Œç»„ä»¶æ ‘ç›¸å…³çš„ä¸œè¥¿ï¼Œé€šå¸¸æ˜¯ä»¥.vueç»“å°¾ï¼Œæ”¾ç½®åœ¨componentsæ–‡ä»¶å¤¹ä¸‹ï¼›èµ„æºï¼Œæœ‰å›¾ç‰‡æˆ–è€…å›½é™…åŒ–èµ„æºç­‰ï¼Œä»¥.pngæˆ–è€….jsæˆ–.jsonç»“å°¾ï¼Œæ”¾ç½®åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹ï¼›è€ŒåŠŸèƒ½æ’ä»¶ã€æœåŠ¡ç­‰ï¼Œå› ä¸ºå¯èƒ½è¢«å¤šå¤„å¼•ç”¨ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿å¼•ç”¨ï¼Œæ”¾åœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶å¤¹æ˜¯componentsæ–‡ä»¶å¤¹å’Œresourcesæ–‡ä»¶å¤¹çš„ä¸Šçº§æ–‡ä»¶å¤¹ï¼› ç¬¬å››ã€ç»†åŒ–åŠŸèƒ½æ¨¡å— åŠŸèƒ½ã€ç»„ä»¶æ ‘ä»¥åŠèµ„æºï¼Œæˆ‘ä»¬å·²ç»æ˜ç¡®äº†æœ‰å“ªäº›ä¸œè¥¿ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ˜ç¡®è¿™äº›ä¸œè¥¿è¯¥å¦‚ä½•ä»¥æ–‡ä»¶çš„å½¢å¼æ¥åˆ’åˆ†ã€‚ å¦‚ä¸‹å›¾ï¼š 1ã€é¡¹ç›®æ„å»ºç›¸å…³ å› ä¸ºè¦ä½¿ç”¨vue.jsï¼Œä¹Ÿè¦ä½¿ç”¨es6è¯­æ³•ï¼Œå› æ­¤babelæ˜¯å¿…é¡»çš„ï¼›åˆå› ä¸ºè¦è‡ªåŠ¨åŒ–æ··æ·†æ‰“åŒ…ï¼Œå› æ­¤webpackä¹Ÿæ˜¯å¿…é¡»çš„ï¼›æœ€åå› ä¸ºè¦æ–¹ä¾¿å¤šäººååŒï¼Œå› æ­¤npmçš„package.jsonçš„é…ç½®ï¼Œæ–¹ä¾¿ä¸åŒäººå¯ä»¥å¿«é€Ÿè‡ªåŠ¨åŒ–é€šè¿‡npm installæ¥å®‰è£…ä¾èµ–ï¼Œä¹Ÿæ˜¯å¿…é¡»çš„ï¼› 2ã€CDNç›¸å…³ è€Œåˆå› ä¸ºæˆ‘ä»¬è¦é‡‡ç”¨å¤–éƒ¨å­—ä½“ï¼ˆéœ€æ±‚è¦æ±‚å¼•å…¥éå¸¸è§å­—ä½“ï¼‰ï¼Œå› æ­¤CDNåŠ é€Ÿæ˜¯å¿…é¡»çš„ï¼Œè¯¥å­—ä½“æ–‡ä»¶æ”¾åœ¨htmlä¸­æ¥é…ç½®å¼•ç”¨å³å¯ï¼› 3ã€é…ç½®å’Œæ’ä»¶ æˆ‘ä»¬éœ€è¦ç›´æ¥å¼•å…¥ä¸€äº›æ’ä»¶å’Œé…ç½®æ–‡ä»¶ï¼›ä¸ºäº†ä½¿ç”¨vueï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œé‚£ä¹ˆå°±æ˜¯App.vueï¼›ä½¿ç”¨vue-routerï¼Œæˆ‘ä»¬éœ€è¦é…ç½®è·¯ç”±æ–‡ä»¶ï¼Œå› æ­¤router-config.jsè¿™ä¸ªè·¯ç”±é…ç½®ä¹Ÿæ˜¯å¿…é¡»çš„ï¼›ç„¶åæˆ‘ä»¬è¿˜éœ€è¦ä»¥æ’ä»¶å½¢å¼å¼•å…¥ä¸€äº›åŠŸèƒ½å’ŒæœåŠ¡ï¼Œå› æ­¤æœ‰äº†Plugin-å¼€å¤´çš„è‹¥å¹²ä¸ªvueæ’ä»¶ï¼Œè¿™äº›éƒ½æ˜¯æ ¹æ®éœ€è¦å°è£…å¥½çš„ä½è€¦åˆé«˜å†…èšæ–¹æ³•ï¼› 4ã€éœ€è¦çš„npmä¾èµ– å½“ç„¶ï¼Œè¦ä½¿ç”¨vueè‚¯å®šè¦å¼•å…¥vue.jsï¼›ç±»ä¼¼çš„è¿˜æœ‰vue-router.jså’Œå„ç§å…¼å®¹æ€§polyfillå’Œå…¨å±€æ’ä»¶ï¼› 5ã€æŠ½ç¦»å‡ºçš„åŠŸèƒ½æ¨¡å— é™¤äº†ç›´æ¥å¼•ç”¨çš„è¿™äº›æ’ä»¶ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›å’Œé¡¹ç›®é«˜åº¦è€¦åˆçš„åŠŸèƒ½æœåŠ¡ï¼Œæˆ‘è®¤ä¸ºä¸èƒ½ä½œä¸ºæ’ä»¶ï¼Œä½†ä¾ç„¶éœ€è¦æŠ½ç¦»å‡ºæ¥å°è£…å¥½ï¼Œæ–¹ä¾¿ä½¿ç”¨å’Œä¿®æ”¹ï¼›å¦‚å°è£…ajaxè¯·æ±‚çš„ajax.jsï¼Œæ‰€æœ‰çš„ajaxè¯·æ±‚éƒ½æ”¾ç½®å…¶ä¸­ï¼Œåªå¯¹å¤–æš´éœ²æ¥å£ï¼Œæ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ï¼›åˆå¦‚å®æ—¶å›½é™…åŒ–åŠŸèƒ½çš„ç»„ä»¶LanguageManager.jsï¼Œä»–éœ€è¦å¼•å…¥å›½é™…åŒ–èµ„æºå’Œç®¡ç†å›½é™…åŒ–èµ„æºçš„åŠ è½½ï¼›åˆä¾‹å¦‚å®ç°è·¨ç»„ä»¶é€šä¿¡çš„event-bus.jsåˆæ¯”å¦‚ç®¡ç†ç”¨æˆ·ä¿¡æ¯çš„user.js 6ã€æ€»ç»“ è€Œè¿™äº›åˆ’åˆ†ï¼Œéƒ½ä½“ç°åœ¨ä¸Šå›¾ä¹‹ä¸­ã€‚è¿™å°±æ˜¯srcç›®å½•ä¸‹çš„åŠŸèƒ½æ¨¡å—æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦çš„ç»å¤§å¤šæ•°åŠŸèƒ½éƒ½å¯ä»¥åŒ…æ‹¬åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§å®é™…å¼€å‘ä¸­çš„éœ€è¦ï¼Œå°†å¯¹åº”çš„åŠŸèƒ½å†™å…¥åœ¨è¿™äº›æ–‡ä»¶ä¸­å¹¶å¼•ç”¨å³å¯ï¼› ç¬¬äº”ã€ç»„ä»¶æ ‘ ä¹‹å‰è°ˆäº†åŠŸèƒ½æ¨¡å—çš„åˆ’åˆ†ï¼Œæ¥ä¸‹æ¥æ˜¯ç»„ä»¶æ ‘ï¼› å› æ­¤æ˜¯ä¸­å°å‹é¡µé¢ï¼Œå› æ­¤ç»„ä»¶æ ‘çš„å±‚çº§æ— éœ€å¤ªæ·±ï¼Œä½†è¯¥æŠ½ç¦»å‡ºæ¥çš„ä¾ç„¶è¿˜æ˜¯è¦æŠ½ç¦»ï¼Œå°½é‡ä¿è¯æŠ½ç¦»å‡ºæ¥çš„ç»„ä»¶è§£è€¦ä»¥åŠä¸€ä¸ªé¡µé¢ç»„ä»¶çš„é€»è¾‘ä¸è¦å¤ªå¤šï¼› å¦‚ä¸‹å›¾ï¼š 0ã€æ ¹ç»„ä»¶ æ‰€æœ‰ç»„ä»¶æœ€ç»ˆå¾€ä¸Šæ‰¾ï¼Œéƒ½ä¼šæ‰¾åˆ°å…±åŒçš„æ ¹ç»„ä»¶App.vueï¼Œæ ¹ç»„ä»¶åªè´Ÿè´£ç®¡ç†ä»–çš„ç›´æ¥å­ç»„ä»¶ï¼›æ¯ä¸ªç»„ä»¶éƒ½åªè´Ÿè´£ç®¡ç†è‡ªå·±çš„ç›´æ¥å­ç»„ä»¶ï¼Œä¸è·¨çº§ç®¡ç†ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºè‡ªå·±çš„å­ç»„ä»¶ï¼ˆå¦åˆ™å¯èƒ½å› ä¸ºå­ç»„ä»¶çš„æœªåŠ è½½æˆ–é”™è¯¯è€Œå¯¼è‡´çˆ¶ç»„ä»¶é”™è¯¯ï¼‰ï¼Œåšåˆ°è§£è€¦å’Œå†…èšï¼› 1ã€å¼¹çª—dialogå’Œå¼¹çª—tips å› ä¸ºå¼¹çª—dialogå’Œå¼¹çª—æç¤ºtipså¯èƒ½åŒæ—¶å­˜åœ¨ï¼Œå› æ­¤å°†å…¶åˆ’åˆ†ä¸º2ä¸ªç»„ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†ï¼› 2ã€æœªç™»å½•é¡µé¢å’Œç™»å½•é¡µé¢ å› ä¸ºé¡µé¢å­˜åœ¨ç™»å½•å’Œæœªç™»å½•çŠ¶æ€ï¼Œè€Œä¸ºäº†åŠ è½½é€Ÿåº¦è€ƒè™‘ï¼Œå½“æœªç™»å½•æ—¶ï¼Œä¸åŠ è½½å·²ç™»å½•é¡µé¢ï¼Œå› æ­¤éœ€è¦åˆ’åˆ†å‡ºæ¥ï¼Œå¹¶è¿›è¡Œå¼‚æ­¥åŠ è½½å¤„ç†ï¼› 3ã€æœªç™»å½•é¡µé¢ æœªç™»å½•é¡µé¢åˆåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š1ã€åˆå§‹é¡µé¢ï¼šæ¯«æ— ç–‘é—®è¦ç›´æ¥åŠ è½½2ã€ç™»å½•å¼¹çª—ï¼šç‚¹å‡»ç™»å½•æ—¶åŠ è½½ï¼ˆå¼‚æ­¥ï¼‰3ã€æ³¨å†Œå¼¹çª—ï¼šç‚¹å‡»æ³¨å†Œæ—¶åŠ è½½ï¼ˆå¼‚æ­¥ï¼‰ä¹‹æ‰€ä»¥åˆ†æ‹†å¼€ï¼Œæ˜¯å› ä¸ºæ ¹æ®éœ€æ±‚ï¼Œå·²ç™»å½•ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥ç™»å½•åé¡µé¢ï¼Œå› æ­¤æ— éœ€ç™»å½•å’Œæ³¨å†Œï¼Œè¿™ç§å¤„ç†å¯ä»¥å‡å°‘æµé‡æ¶ˆè€—ï¼Œæå‡åŠ è½½é¡µé¢åŠ è½½é€Ÿåº¦ï¼ˆç‰¹åˆ«æ˜¯æ³¨å†Œå¼¹çª—éœ€è¦åŠ è½½çš„å†…å®¹è¿˜æ¯”è¾ƒå¤šï¼‰ï¼› 4ã€å·²ç™»å½•é¡µé¢ å·²ç™»å½•é¡µé¢æœ‰è¾ƒå¤šé¡µé¢ï¼Œé‡‡ç”¨é»˜è®¤åŠ è½½åˆå§‹é¡µï¼Œç„¶åå¼‚æ­¥åŠ è½½å…¶ä»–é¡µé¢ï¼ˆè®¿é—®æ—¶ï¼‰ï¼› 5ã€å¼¹çª—dialog ç”±äºé€»è¾‘è¾ƒå°‘ï¼Œä»£ç é‡ä¸å¤šï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œç»Ÿä¸€å°†å…¶åˆå¹¶åœ¨ä¸€ä¸ªvueæ–‡ä»¶ä¸­ï¼Œå…±åŒç›¸åŒçš„æ‰“å¼€é€»è¾‘ï¼Œæ ¹æ®ä¼ é€’çš„keyå†³å®šæ‰“å¼€å“ªä¸€ä¸ªã€‚è¿™æ ·åœ¨æ–°å¢å¼¹çª—æ—¶ï¼Œæ— éœ€å†å»å†™å¼¹çª—çš„æ‰“å¼€ã€å…³é—­é€»è¾‘ã€‚å‡å¦‚æœ‰è¾ƒå¤æ‚çš„å¼¹çª—ï¼Œå¯ä»¥ä»¥å­ç»„ä»¶çš„å½¢å¼å¼•å…¥åˆ°å½“å‰vueæ–‡ä»¶ä¸­ï¼Œå¦‚æ­¤ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼› 6ã€å›½é™…åŒ–ç®¡ç† å’Œé¡µé¢é«˜è€¦åˆï¼Œè´Ÿè´£åŠ è½½å¯¹åº”çš„å›½é™…åŒ–èµ„æºï¼Œå¹¶è¿›è¡Œåˆ‡æ¢ç®¡ç†ï¼› 7ã€é¡µé¢ç»„ä»¶ å¯èƒ½æœ‰å­é¡µé¢å’Œå¤ç”¨çš„ç»„ä»¶ï¼ŒæŒ‰ç…§æ­£å¸¸æ–¹å¼å¼•ç”¨å³å¯ã€‚ 8ã€æ ·å¼æ–‡ä»¶ å¯ä»¥ç‹¬ç«‹å†™ä¸º.cssæ–‡ä»¶ï¼Œä½†å› ä¸ºæˆ‘çš„å…¬å…±æ ·å¼æ–‡ä»¶æ¯”è¾ƒå°‘ï¼Œå› æ­¤æˆ‘è¿˜æ˜¯å°†å…¶æ”¾åœ¨ä¸€ä¸ª.vueæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨App.vueé‡Œæ¥å¼•ç”¨ 8ã€é¡µé¢ç»„ä»¶èµ·å é€šå¸¸ä»¥.vueä¸ºç»“å°¾ï¼Œé™¤äº†å›½é™…åŒ–LanguageManager.jså› ä¸ºé«˜è€¦åˆåº¦ï¼Œå› æ­¤ä»¥.jsç»“å°¾å¹¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„vueå®ä¾‹ï¼Œè¡¨ç¤ºä»–æ›´åƒæ˜¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªvueçš„é¡µé¢ç»„ä»¶ï¼› åŸºç¡€é¡µé¢ï¼Œå¦‚ç™»å½•å’Œæœªç™»å½•é¡µé¢ï¼Œå…¬å…±ç»„ä»¶ï¼ˆå¹¶ä¸”æ˜¯headerå’Œfooterè¿™ç§ï¼‰ï¼Œä»¥**base-**å¼€å¤´ï¼›å¼¹çª—ç»Ÿä¸€ä»¥**box-**ä¸ºå¼€å¤´;å¯å¤ç”¨çš„ç»„ä»¶ä»¥**extend-**å¼€å¤´ï¼›å¼•å…¥çš„å¤–éƒ¨ç»„ä»¶ä»¥**import-**å¼€å¤´ï¼›æ™®é€šé¡µé¢ç»„ä»¶ä»¥**page-**å¼€å¤´ï¼ˆè¿™äº›é¡µé¢å¾€å¾€æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡µé¢ï¼Œå¹¶ä¸”æŒ‚é åœ¨ç™»å½•æˆ–æœªç™»å½•é¡µé¢ä¸‹ï¼‰ï¼›æ³¨å†Œå¼¹çª—å› ä¸ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”åŒç±»è¾ƒå¤šï¼Œå› æ­¤ä»¥register-ä¸ºå¼€å¤´ï¼› é€šè¿‡ä»¥æ–‡ä»¶åæ¥åˆ’åˆ†ï¼Œä¸åŒçš„é¡µé¢ç»„ä»¶ä¹‹é—´çš„åŒºåˆ†å¯ä»¥è¯´æ˜¯ä¸€ç›®äº†ç„¶ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼› 3ã€è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹ æƒ³äº†æƒ³ï¼Œç›®å‰è¿˜æ²¡æœ‰è°ˆåˆ°çš„å†…å®¹æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š 1ã€è·¯ç”±ï¼šä»¥è·¯ç”±ä¸ºé©±åŠ¨æ¥å†™é¡µé¢ï¼Œä¼¼ä¹æ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼›å¥½å¤„æ˜¯åªéœ€è¦é€šè¿‡æŸ¥çœ‹è·¯ç”±çš„é…ç½®æ–‡ä»¶router-config.jsï¼Œå°±å¯ä»¥äº†è§£é¡µé¢ç»„ä»¶çš„æ¶æ„ï¼›ä¸è¿‡æˆ‘è‡ªå·±å…³äºvue-routerçš„å®è·µç»éªŒæ¯”è¾ƒå°‘ï¼Œå› æ­¤å°±ç•¥è¿‡ä¸è°ˆäº†ï¼› 2ã€å•å…ƒæµ‹è¯•ï¼šæŒ‰é“ç†è¯´ï¼Œå•å…ƒæµ‹è¯•æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå› æ­¤åœ¨è¿›è¡Œæ¶æ„è®¾è®¡æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼›ä¸è¿‡ä½œè€…æˆ‘ç›®å‰åœ¨çš„å…¬å¸å…³äºå‰ç«¯æ–¹é¢éƒ½ä¸å¤ªæ­£è§„ï¼Œå®åœ¨æ²¡è¿™æ–¹é¢çš„ç»éªŒï¼Œåˆå› ä¸ºä½œè€…æˆ‘æœ¬äººè½¬è¡Œåšå‰ç«¯çš„æ—¶é—´ä¹Ÿæ¯”è¾ƒçŸ­ï¼Œè™½ç„¶å‘¨å‘¨9.12.7ï¼Œä½†ä¹Ÿæ²¡æ¥å¾—åŠå­¦ä¹ è¿™æ–¹é¢çš„çŸ¥è¯†ï¼ˆæ²¡æœ‰éœ€æ±‚é©±åŠ¨ï¼Œè¿™æ–¹é¢åŠ¨åŠ›ä¸è¶³å“ˆå“ˆï¼‰ 3ã€è‡ªåŠ¨åŒ–é…ç½®ï¼šå…³äºwebpackçš„è‡ªåŠ¨åŒ–ï¼Œæ˜¯å‰ç«¯æ¶æ„çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤é…ç½®ä¹Ÿæ˜¯è›®é‡è¦çš„ï¼›ä¸è¿‡ä¸€æ˜¯è¿™æ–¹é¢éœ€è¦å¾ˆå¤šç¬”å¢¨çš„ï¼ŒäºŒæ˜¯ç½‘ä¸Šä¹Ÿæœ‰ä¸€äº›åˆ«äººåˆ†äº«çš„æ–‡ç« ï¼ˆè‚¯å®šæ¯”æˆ‘çš„å¥½ï¼‰ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼› 4ã€ä¸€äº›è‡ªåŠ¨åŒ–å·¥å…·ï¼šä¾ç„¶å°´å°¬ï¼Œæ²¡æœ‰å¤§å‚ç»éªŒï¼Œè·¯å­æ¯”è¾ƒé‡ï¼Œæ‰€ä»¥å¤§å‚ä¸“æœ‰çš„ä¸€äº›å·¥å…·æ˜¯æœ¨æœ‰çš„ï¼Œè€Œè‡ªå·±æ‰¾çš„è¯åˆå«Œéº»çƒ¦ï¼Œæ‰€ä»¥æ²¡æœ‰ä¼˜åŒ–åˆ°æè‡´ï¼Œåªåšåˆ°äº†åŸºæœ¬æ»¡è¶³ç›®å‰é¡¹ç›®éœ€æ±‚çš„ç¨‹åº¦ï¼Œè§è°…è§è°…ï¼›ç­‰ä»¥åæœ‰è¿™æ–¹é¢ç»éªŒçš„è¯æˆ‘å†å†™åšå®¢æ¥åˆ†äº«å§~","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"è®°ä¸€æ¬¡æœåŠ¡å™¨æ•°æ®è¢«é»‘ ğŸ˜‚","slug":"æ•°æ®Moogoseè¢«é»‘","date":"2020-09-16T07:13:48.000Z","updated":"2021-02-18T06:13:36.000Z","comments":true,"path":"2020/09/16/æ•°æ®Moogoseè¢«é»‘/","link":"","permalink":"http://mariogogogo.github.io/2020/09/16/%E6%95%B0%E6%8D%AEMoogose%E8%A2%AB%E9%BB%91/","excerpt":"å¹¸äºè¿™æ¬¡ä¸¢å¤±çš„æ•°æ®ä¸å¤šï¼Œä¹Ÿåªæ˜¯è‡ªå·±ä¸ªäººçš„æµ‹è¯•æ•°æ®ï¼Œå¦‚æœæ˜¯å…¬å¸çš„å•†ç”¨æ•°æ®åº“æ•°æ®ï¼Œé‚£è¢«å‹’ç´¢å¤šå°‘ BTC ä¹Ÿå¾—ç»™å•Š ğŸ˜","text":"å¹¸äºè¿™æ¬¡ä¸¢å¤±çš„æ•°æ®ä¸å¤šï¼Œä¹Ÿåªæ˜¯è‡ªå·±ä¸ªäººçš„æµ‹è¯•æ•°æ®ï¼Œå¦‚æœæ˜¯å…¬å¸çš„å•†ç”¨æ•°æ®åº“æ•°æ®ï¼Œé‚£è¢«å‹’ç´¢å¤šå°‘ BTC ä¹Ÿå¾—ç»™å•Š ğŸ˜ æœåŠ¡å™¨åˆä¸€æ¬¡è¢«æ¶æ„æ”»å‡»ï¼ŒMongoDB è¢«åˆ åº“ æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯12345678910mongo --versionMongoDB shell version v4.0.6git version: caa42a1f75a56c7643d0b68d3880444375ec42e3OpenSSL version: OpenSSL 1.0.1f 6 Jan 2014allocator: tcmallocmodules: nonebuild environment: distmod: ubuntu1404 distarch: x86_64 target_arch: x86_64 é‡æ–°å¸è½½1234567åœæ­¢æœåŠ¡ï¼šsudo service mongod stopåˆ é™¤è½¯ä»¶åŒ…ï¼šsudo yum erase $(rpm -qa | grep mongodb-org) åˆ é™¤æ•°æ®å’Œæ—¥å¿—ç›®å½•ï¼šsudo rm -r /var/log/mongodbï¼ˆæ—¥å¿—ï¼‰sudo rm -r /var/lib/mongoï¼ˆæ•°æ®ï¼‰ å®‰è£…é‡å¯æœåŠ¡1234567891011#å®‰è£…sudo apt-get install -y mongodb-org# å¼€å¯æœåŠ¡sudo service mongod start# åœæ­¢æœåŠ¡sudo service mognod stop# é‡å¯æœåŠ¡sudo service mongod restart è¿æ¥1mongo; é…ç½®æ–‡ä»¶ä¿¡æ¯123456dbPath=ã€‚ã€‚ã€‚ #æ•°æ®æ–‡ä»¶å­˜æ”¾ç›®å½•path=ã€‚ã€‚ã€‚ #æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•port=27017 #ç«¯å£å·fork=true #ä»¥å®ˆæŠ¤ç¨‹åºçš„æ–¹å¼å¯ç”¨,å³åœ¨åå°è¿è¡Œlogappend = true #æ—¥å¿—ä»¥è¿½åŠ çš„å½¢å¼æ·»åŠ bind_ip = 0.0.0.0 #å¯ä»¥è®¿é—®çš„åœ°å€. 127.0.0.1è¡¨ç¤ºè‡ªå·±è®¿é—®, 0.0.0.0 è¡¨ç¤ºæ‰€æœ‰äººéƒ½èƒ½è®¿é—® ä¿®æ”¹ç«¯å£1234567891011121314ä¿®æ”¹etc/mongod.confæ–‡ä»¶å†…çš„é…ç½®ä¿¡æ¯net: port: 12345 //ç«¯å£å· bindIp: 127.0.0.1,1**.16*.1**.18 //å†…ç½‘ # é‡å¯æœåŠ¡sudo service mongod restartæç¤ºmongod stop/waitingmongod start/running, process 19206//è¿æ¥MongoDBå¹¶æŒ‡å®šç«¯å£mongo 192.168.1.100:12345 é™åˆ¶ç«¯å£è®¿é—®æƒ³è¦å®ç°ï¼š é™åˆ¶å¤–ç½‘è®¿é—® mongoï¼Œåªå…è®¸ç‰¹å®šçš„ IP è¿›æ¥è®¿é—® mongo çš„è¯ï¼Œåˆ™ï¼š Mongo çš„é…ç½®ä¸­ï¼Œæ˜¯æ— æ³•å®ç°è¿™ä¸ªæ•ˆæœçš„ã€‚ åªèƒ½æ¢ç”¨å…¶ä»–åŠæ³•ï¼Œæ¯”å¦‚ï¼š é€šè¿‡è®¾ç½®é˜²ç«å¢™ï¼Œæ·»åŠ ï¼š åªå…è®¸æŸäº› IPï¼Œå…¥ç½‘æ–¹å‘ï¼Œèƒ½å¤Ÿè®¿é—® mongo çš„å¯¹åº”çš„ç«¯å£ ä»è€Œç¦æ­¢æ‰å…¶ä»–çš„ IP è®¿é—® mongo è€Œæ­¤å¤„çš„é˜¿é‡Œäº‘çš„ ECS æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å®‰å…¨ç»„ï¼Œå®ç°å’Œé˜²ç«å¢™ä¸€æ ·çš„æ•ˆæœã€‚ å…·ä½“è®¾ç½®åŠæ³•ï¼š è¿›å»é˜¿é‡Œäº‘æ§åˆ¶åå°-ã€‹äº‘æœåŠ¡å™¨ ECS-ã€‹å®‰å…¨ç»„-ã€‰ä½ çš„ ECS æœåŠ¡å™¨æ‰€åœ¨çš„åŒºåŸŸ-ã€‹å¯¹åº”çš„ ECS æœåŠ¡å™¨-ã€‰é…ç½®è§„åˆ™ï¼š å¢åŠ  2 ä¸ªè§„åˆ™ï¼š ï¼ˆ1ï¼‰è§„åˆ™ 1ï¼š å…è®¸ç‰¹å®šçš„ IPï¼ˆå•ä¸ª IPï¼ŒæŸä¸ª IP åœ°å€æ®µï¼ˆå†…çš„æ‰€æœ‰çš„ IPï¼‰ï¼ŒæŸå‡ ä¸ª IPï¼‰å…è®¸è®¿é—®æŸç«¯å£ ï¼ˆ2ï¼‰è§„åˆ™ 2ï¼šç¦æ­¢æ‰ï¼Œå…¶ä»–çš„ IP è®¿é—®è¯¥ç«¯å£ é…ç½®ç®¡ç†å‘˜è´¦å·12345678910111213141516171819202122232425# åˆ‡æ¢åˆ° admin æ•°æ®åº“use admin# åˆ›å»ºç”¨æˆ·db.createUser(&#123;user: &#x27;tanya&#x27;, pwd: &#x27;tanya&#x27;, roles: [&#123;role: &#x27;userAdminAnyDatabase&#x27;, db: &#x27;admin&#x27;&#125;]&#125;)# æˆæƒdb.auth(&#x27;tanya&#x27;, &#x27;tanya&#x27;)# åˆ‡æ¢åˆ°å…¶ä»–æ•°æ®åº“use dream-wall# åˆ›å»ºç”¨æˆ·db.createUser(&#123;user: &#x27;tanya_dream-wall_runner&#x27;, pwd: &#x27;tanya&#x27;, roles: [&#123;role: &#x27;readWrite&#x27;, db: &#x27;dream-wall&#x27;&#125;]&#125;)db.createUser(&#123;user: &#x27;tanya_dream-wall_wheel&#x27;, pwd: &#x27;tanya&#x27;, roles: [&#123;role: &#x27;read&#x27;, db: &#x27;dream-wall&#x27;&#125;]&#125;)# ä¿®æ”¹é…ç½®ï¼Œå¼€å¯æˆæƒsudo vi /etc/mongod.confsecurity: authorization: &#x27;enabled&#x27;# é‡å¯ mongo æœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆsudo service mongod restart éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ¯æ¬¡è¦è¿›è¡Œæ•°æ®åº“æ“ä½œéƒ½éœ€è¦å…ˆè¿›è¡Œæˆæƒ db.auth(â€˜tanyaâ€™, â€˜tanyaâ€™) 123456# ç™»å½•åˆ°æŒ‡å®šæ•°æ®åº“ï¼Œæ— éœ€æˆæƒmongo 127.0.0.1:xx/dream-wall -u tanya_dream-wall_runner -p tanya# éªŒè¯ä¸€ä¸‹show tablesdb.dreams.find() æ€»ç»“å®‰å…¨äº‹æ•…çŒ›äºè™è¿™é‡Œç»™å†æ¬¡ç»™è‡ªå·±ä¹Ÿç»™å¤§å®¶æä¸ªé†’ï¼Œå®‰å…¨äº‹æ•…çŒ›äºè™ï¼Œå®‰å…¨è´£ä»»é‡äºå±±ã€‚ ä¸€å®šä¸è¦ä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå°±å¿½ç•¥æŸäº›å®‰å…¨é…ç½®ï¼Œå¹³æ—¶åšä»€ä¹ˆéƒ½è¦æœ‰å®‰å…¨æ„è¯†ã€‚ é‡è¦æ•°æ®åŠæ—¶å¤‡ä»½ã€‚ æœåŠ¡å™¨è®¾ç½® IP é»‘ç™½åå•ï¼Œå…³é—­ä¸€åˆ‡å¯ä»¥å…³é—­çš„ç«¯å£ å¦‚æœè·Ÿæˆ‘ä¼¼çš„ï¼Œè®¿é—®æœåŠ¡çš„ ip ç»å¸¸å˜ï¼Œå¯ä»¥è€ƒè™‘ä¿®æ”¹ä¸€äº›æœåŠ¡çš„é»˜è®¤ç«¯å£ï¼Œå¢åŠ è¢«æ‰«åˆ°çš„æ¦‚ç‡ ä¸€å®šè¦è®¾ç½®å¯†ç ï¼Œä¸ºäº†é˜²æ­¢è¢«çˆ†ï¼Œæœ€å¥½æ˜¯æ— è§„åˆ™çš„å¼ºå¯†ç  å‚è€ƒhttps://blog.csdn.net/dandanfengyun/article/details/95497728 https://www.crifan.com/mongodb_add_restrict_ip_access/ https://www.bbsmax.com/A/x9J238pM56/ https://github.com/savoygu/blog/blob/master/åšå®¢/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ/Node.jsé¡¹ç›®çº¿ä¸ŠæœåŠ¡å™¨éƒ¨ç½²ä¸å‘å¸ƒ.md#52-ä¿®æ”¹-mongodb-é»˜è®¤ç«¯å£","categories":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/categories/NodeJs/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹Shell","slug":"å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹Shell","date":"2020-05-31T16:00:00.000Z","updated":"2020-12-08T07:00:49.000Z","comments":true,"path":"2020/06/01/å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹‹Shell/","link":"","permalink":"http://mariogogogo.github.io/2020/06/01/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B9%8BShell/","excerpt":"ä¼—æ‰€å‘¨çŸ¥å‰ç«¯æ˜¯ä¸€ä¸ªä¸å–„è¨€è¾å¹¶ä¸ä¼šä½¿ç”¨cmdçš„çš„ä¸€ç±»äººï¼Œå¼€ä¸ªç©ç¬‘ï¼ï¼ï¼","text":"ä¼—æ‰€å‘¨çŸ¥å‰ç«¯æ˜¯ä¸€ä¸ªä¸å–„è¨€è¾å¹¶ä¸ä¼šä½¿ç”¨cmdçš„çš„ä¸€ç±»äººï¼Œå¼€ä¸ªç©ç¬‘ï¼ï¼ï¼ å‰ç«¯é¡¹ç›®å‘å¸ƒæµç¨‹ å¼€å‘æ–°åŠŸèƒ½å•¦ -&gt; åˆ‡æ–°åˆ†æ”¯ git ck -b newBranch å¼€å‘å®Œæˆå -&gt; æäº¤ä»£ç  git add . git commit -m &#39;msg&#39; åˆå¹¶åˆ°å†…å¤–ä¾§åˆ†æ”¯ -&gt; åˆå¹¶åˆ° Rel å†…å¤–ä¾§åˆ†æ”¯ git marge rel å°±æ‹¿ Vue React é¡¹ç›®æ¥è¯´ï¼Œå‘å¸ƒæµ‹è¯•ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦å°†ä¹‹å‰ç”Ÿäº§çš„ä»£ç ç»™åˆ é™¤ï¼Œä¸ç„¶ä½“ç§¯ä¼šè¶Šæ¥è¶Šå¤§ rm -rf /linuxç›®å½•è·¯å¾„~å½“å‰é¡¹ç›®/* å‘å¸ƒå†…å¤–ä¾§ï¼ˆè¿˜æœ‰ä¸ªé¢„å‘å¸ƒï¼‰ï¼Œbuild - FileZilla | ZOC7 - ä¸Šä¼  ä¸ç®¡ä½ æ˜¯æ‹–æ‹½ï¼Œè¿˜æ˜¯linuxå‘½ä»¤éƒ½å¯ä»¥ï¼Œå¼€å¿ƒå°±å¥½å˜› ä¸Šé¢å°±æ˜¯å‘å¸ƒä¸€ä¸ªæ–°åŠŸèƒ½çš„æµç¨‹ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œä½ è®©æˆ‘ä¸€å¤©åšä¸€æ¬¡è¿˜èƒ½æ¥å—ï¼Œè¦æ˜¯éš”å‡ åˆ†é’Ÿæ¥ä¸€æ¬¡è°å—å¾—äº†ï¼Ÿå½“ç„¶ç°å®å°±æ˜¯è¿™æ ·çš„æ“ä½œéš”å‡ åˆ†é’Ÿå°±ä¼šæ¥ä¸€æ¬¡ï¼ï¼ï¼å¹¶ä¸”åŒæ—¶æ”¹å‡ ä¸ªé¡¹ç›®ä¹Ÿæ˜¯å­˜åœ¨çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ“ä½œè¦æŠŠäººæ•´ç¥â€¦ è¯´ä¸ªæ•…äº‹æœ‰ä¸€å¤©æˆ‘å¼€å‘äº†ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŒ‰ç…§ä¸Šé¢æµç¨‹æŠŠä»£ç å‘å¸ƒåˆ°äº†å†…å¤–ä¾§ï¼Œè¿™æ—¶å€™æµ‹è¯•å§å§æµ‹è¯•äº†ï¼Œå‘ç°æˆ‘æŠŠç™»å½•å†™æˆç™»é™†äº†ï¼Œé€šçŸ¥åˆ°æˆ‘ï¼Œä½ æœ‰ä¸€ä¸ªè¶…çº§ä¸¥é‡çš„bugï¼Œéœ€è¦ç°åœ¨æ”¹ï¼Œæ”¹å¥½å°±ä¼ ï¼Œæˆ‘æ”¶åˆ°è¿™æ¡æŒ‡ä»¤ï¼ŒèŠèŠ±ä¸ç”±å¾—ä¸€ç´§ï¼Œæˆ‘å½“æœºç«‹æ–­åˆ‡æ¢åˆ†æ”¯ï¼Œæ”¹èµ·æˆ‘çš„ä»£ç æ¥ï¼Œæ—¶é—´ä¸€åˆ†ä¸€ç§’è¿‡å»ï¼Œåœ¨ä¸€åˆ†é’Ÿçš„æ—¶é—´å†…æˆ‘å°±æ”¹å®Œbugï¼Œæ¯•ç«Ÿæ‹§èºä¸éå¸¸ç®€å•ã€‚ è¯¥ä¸Šä¼ ä»£ç äº†ï¼Œä¸Šä¼ æ“ä½œç”¨äº†æˆ‘10åˆ†é’Ÿï¼Œåœ¨æµ‹è¯•å§å§çœ‹æ¥ï¼Œæˆ‘ä¿®æ”¹è¿™ä¸ªä»£ç ç”¨äº†11åˆ†é’Ÿï¼Œæµ‹è¯•å§å§å¿ƒé‡Œè‚¯å®šå°±åœ¨æƒ³è¿™ä¸ªèœé€¼ï¼Œæ”¹ä¸ªå­—è¦è¿™ä¹ˆä¹…ï¼Ÿæˆ‘ç­‰ç€è¿™ä¹ˆçƒ¦ï¼Œåé¢ç»™ä»–æ‰“åˆ†å¾€ä½äº†æ‰“ï¼Œå“¼~~ï¼Œè®©æŸæŸå‰ç«¯å´½å„¿æ‹¿ä¸åˆ°å¥–é‡‘ã€‚ æˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Šï¼ï¼ï¼ Shellç¥å™¨å…¶å®æœ‰å¾ˆå¤šåç«¯åœ¨ç”¨çš„ä¸œè¥¿ï¼Œå‰ç«¯éƒ½èƒ½æ‹¿æ¥å‡å°‘è‡ªå·±å¹³æ—¶å¼€å‘çš„é‡å¤å·¥ä½œï¼ŒShellå°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚ å…³äºShellçŸ¥è¯†çš„è¯ï¼Œå¾ˆå¤šæ•™ç¨‹å•¦ï¼Œå»å­¦ä¹ å§ï¼Œæˆ‘æŠŠæˆ‘çš„è„šæœ¬æ‹¿å‡ºæ¥å’Œå¤§å®¶äº¤æµäº¤æµã€‚ æˆ‘çš„è‡ªåŠ¨åŒ–è„šæœ¬123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123#!/bin/bash# åœ¨&quot;set -e&quot;ä¹‹åå‡ºç°çš„ä»£ç ï¼Œä¸€æ—¦å‡ºç°äº†è¿”å›å€¼éé›¶ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šç«‹å³é€€å‡ºï¼Œé‚£ä¹ˆå°±å¯ä»¥é¿å…ä¸€äº›è„šæœ¬çš„å±é™©æ“ä½œã€‚set -eecho &quot;shellè„šæœ¬æœ¬èº«çš„åå­—: $0&quot;echo &quot;ä¼ ç»™shellçš„ç¬¬ä¸€ä¸ªå‚æ•°: $1&quot;echo &quot;ä¼ ç»™shellçš„ç¬¬äºŒä¸ªå‚æ•°: $2&quot;#è·å–å½“å‰åˆ†æ”¯branch=$(git symbolic-ref --short HEAD)#è·å–å½“å‰åˆ†æ”¯å®Œæ•´è·¯å¾„echo -e $(git symbolic-ref HEAD)# refs/heads/masterecho -e $(git symbolic-ref --short HEAD)# masterif [ &quot;$1&quot;x != &quot;devx&quot; ] &amp;&amp; [ &quot;$1&quot;x != &quot;testx&quot; ] &amp;&amp; [ &quot;$1&quot;x != &quot;prex&quot; ]&amp;&amp; [ &quot;$1&quot; != &quot;master&quot; ];then echo -e &quot;\\\\033[41;37m ä¸å­˜åœ¨ $1 ç¯å¢ƒ åªæœ‰ -&gt; dev(å†…æµ‹) test(å¤–ä¾§) pre(é¢„å‘å¸ƒ) \\\\033[0m&quot; exitfi# é“¾æ¥æœåŠ¡å™¨function devFn() &#123; ssh -p 22 root@120.27.2x0.xxx rm -rf /home/chan/koa2/* echo -e &quot;\\\\033[32m è¿æ¥æˆåŠŸï¼Œå¼€å§‹ä¸Šä¼ ä»£ç ....... \\\\033[0m&quot; #rsync ä¸‰ç§æ¨¡å¼ï¼šæœ¬åœ°æ¨¡å¼ã€ssh æ¨¡å¼ã€rsync æ¨¡å¼ã€‚ #rsync -e &quot;ssh -p 1876&quot; --exclude=storage -a /Users/lovewcc/Documents/04_Vue/easy-vue/dist/* root@120.27.220.173:/home/chan/koa2/ rsync -avz -e ssh /Users/lovewcc/Documents/04_Vue/easy-vue/dist/* root@120.27.220.173:/home/chan/koa2/ echo -e &quot;\\\\033[32m ä¸Šä¼ æˆåŠŸ,é¢„è§ˆè¯•è¯•å§ \\\\033[0m\\\\n&quot;&#125;function testFn() &#123; ssh -p ç«¯å£ root@ip rm -rf æœåŠ¡å™¨é¡¹ç›®è·¯å¾„/* echo -e &quot;\\\\033[32m è¿æ¥æˆåŠŸï¼Œä¸Šä¼ ä»£ç ä¸­... \\\\033[0m&quot; rsync -e &quot;ssh -p 873&quot; --exclude=storage -a æœ¬åœ°ä»£ç è·¯å¾„/dist/* root@ip:æœåŠ¡å™¨é¡¹ç›®è·¯å¾„/ echo -e &quot;\\\\033[32m å¤–ä¾§ä¸Šä¼ æˆåŠŸ \\\\033[0m\\\\n&quot;&#125;function preFn() &#123; echo &quot;æ‰§è¡Œé“¾æ¥é¢„å‘å¸ƒæœåŠ¡å™¨&quot;&#125;function build() &#123; # cd source if [ &quot;$1&quot; == &quot;master&quot; ];then echo -e &quot;\\\\033[32m&quot;$1&quot;æ”¯æ‰“åŒ…å¼€å§‹ \\\\033[0m&quot; yarn run build else [ &quot;$1&quot;x == &quot;testx&quot; ] yarn run build:$1 fi echo -e &quot;\\\\033[32m æ‰“åŒ…å®Œæ¯• \\\\033[0m&quot; echo -e &quot;\\\\033[32m è¿æ¥ $1 æœåŠ¡å™¨ \\\\033[0m&quot; if [ &quot;$1&quot; == &quot;master&quot; ];then devFn elif [ &quot;$1&quot;x == &quot;devx&quot; ];then devFn elif [ &quot;$1&quot;x == &quot;testx&quot; ];then testFn elif [ &quot;$1&quot;x == &quot;prex&quot; ];then preFn else echo -e &quot;\\\\033[41;37m åº”è¯¥ä¸ä¼šèµ°åˆ°è¿™é‡Œæ¥å§... \\\\033[0m&quot; exit fi&#125;#åˆ¤æ–­æ˜¯å¦æ˜¯relåˆ†æ”¯if [ $&#123;branch&#125; == &quot;master&quot; ];then echo -e &quot;\\\\n\\\\033[32m å½“å‰åœ¨relåˆ†æ”¯\\\\n ä¸å‡ºæ„å¤–åº”è¯¥åˆšå‘å¸ƒè¿‡å†…æµ‹\\\\n æ‰€ä»¥æ— éœ€æ‰§è¡Œgitæ“ä½œ\\\\n æ‰€ä»¥æ˜¯å¦ç›´æ¥å‘å¸ƒ $1 ç¯å¢ƒ\\\\033[0m&quot; read -p $&#x27;\\\\n\\\\033[31mæ˜¯å¦ç›´æ¥æ‰“åŒ…ä¸Šä¼ ï¼Ÿy or n: \\\\033[0m&#x27; isbuild if [ &quot;$isbuild&quot; != &#x27;y&#x27; ];then exit fi build $1else #æ­¤shè„šæœ¬åªé€‚ç”¨äºå•å­å‘å¸ƒrelç¯å¢ƒ,æé†’ echo -e &quot;\\\\n\\\\033[31m dev(å†…æµ‹) test(å¤–ä¾§) pre(é¢„å‘å¸ƒ) \\\\033[0m&quot; echo -e &quot;\\\\033[31m å½“å‰éœ€è¦å‘å¸ƒ $1 ç¯å¢ƒ \\\\033[0m&quot; #è¯¢é—®æ˜¯å¦ç»§ç»­å‘å¸ƒå½“å‰ç¯å¢ƒ read -p $&#x27;\\\\n\\\\033[31mæ˜¯å¦ç»§ç»­æ“ä½œï¼Ÿy or n: \\\\033[0m&#x27; isVersion if [ &quot;$isVersion&quot; != &#x27;y&#x27; ];then exit fi echo -e &quot;\\\\n\\\\033[32m å·²ç¡®è®¤ç¯å¢ƒ \\\\033[0m\\\\n&quot; echo -e &quot;\\\\033[31m $1 ç¯å¢ƒï¼Œå½“å‰åˆ†æ”¯ä¸ºï¼š $&#123;branch&#125; \\\\033[0m&quot; #ç¡®è®¤å½“å‰åˆ†æ”¯ï¼Œæ˜¯å¦ç»§ç»­ read -p $&#x27;\\\\n\\\\033[31mè¯·ç¡®è®¤åˆ†æ”¯ï¼Œæ˜¯å¦ç»§ç»­æ“ä½œï¼Ÿy or n: \\\\033[0m&#x27; isContinue if [ &quot;$isContinue&quot; != &#x27;y&#x27; ];then exit fi echo -e &quot;\\\\n\\\\033[32m å·²ç¡®è®¤åˆ†æ”¯ï¼Œåˆ†æ”¯ä¸º -&gt; $&#123;branch&#125; \\\\033[0m\\\\n&quot; echo -e &quot;\\\\033[32m å¼€å§‹æäº¤ $&#123;branch&#125; åˆ†æ”¯ä»£ç ï¼Œæ‰§è¡Œ add commit \\\\033[0m\\\\n&quot; git add . read -p $&#x27;\\\\n\\\\033[31mè¯·è¾“å…¥æœ¬æ¬¡commitä¿¡æ¯ï¼š\\\\033[0m&#x27; commitInfo git commit -m $&#123;commitInfo&#125; echo -e &quot;\\\\033[32m å¼€å§‹åˆ‡æ¢åˆ†æ”¯ \\\\033[0m\\\\n&quot; git checkout rel echo -e &quot;\\\\033[32m å¼€å§‹æ‹‰å– rel origin \\\\033[0m\\\\n&quot; git pull origin rel echo -e &quot;\\\\033[32m å¼€å§‹ merge ä¿®æ”¹è‡³ rel \\\\033[0m\\\\n&quot; git merge $&#123;branch&#125; #åˆ¤æ–­mergeæ˜¯å¦æˆåŠŸ if [ $? == 0 ];then echo -e &quot;\\\\033[32m merge $&#123;branch&#125; -&gt; rel æˆåŠŸ \\\\033[0m\\\\n&quot; echo -e &quot;\\\\n\\\\033[32m å¼€å§‹æ¨é€ rel è‡³è¿œç«¯ origin \\\\033[0m\\\\n&quot; git push origin rel echo -e &quot;\\\\n\\\\033[32m æ¨é€ rel è‡³è¿œç«¯ origin æˆåŠŸ \\\\033[0m\\\\n&quot; echo -e &quot;\\\\n\\\\033[32m æ‰§è¡Œæ‰“åŒ… \\\\033[0m\\\\n&quot; build $1 else echo -e &quot;\\\\033[31m mergeå¤±è´¥ï¼Œè¯·æ£€æŸ¥ \\\\033[0m&quot; exit fifi ä½¿ç”¨1./shell.sh","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»","slug":"vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»","date":"2020-04-14T16:00:00.000Z","updated":"2020-12-09T07:59:10.000Z","comments":true,"path":"2020/04/15/vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»/","link":"","permalink":"http://mariogogogo.github.io/2020/04/15/vue%E4%B8%AD%E8%AE%BE%E7%BD%AE%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2%E6%97%B6%E7%9A%84%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB/","excerpt":"vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”»","text":"vueä¸­è®¾ç½®é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡åŠ¨ç”» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- é¡µé¢åˆ‡æ¢åŠ¨ç”»transitionName --&gt; &lt;transition :name=&quot;transitionName&quot;&gt; &lt;!-- ç¼“å­˜æ•°æ® &lt;router-view&gt; --&gt; &lt;keep-alive&gt; &lt;router-view v-if=&quot;$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt; &lt;/keep-alive&gt; &lt;/transition&gt; &lt;transition :name=&quot;transitionName&quot;&gt; &lt;router-view v-if=&quot;!$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt; &lt;/transition&gt; &lt;/div&gt;&lt;/template&gt; &lt;script&gt;export default &#123; name: &quot;App&quot;, data() &#123; return &#123; transitionName: &quot;&quot; &#125;; &#125;, create() &#123;&#125;, mounted() &#123; if (document.body.scrollHeight &gt;= document.documentElement.clientHeight) &#123; document.body.style.height = document.body.scrollHeight + &quot;px&quot;; &#125; else &#123; document.body.style.height = document.documentElement.clientHeight + &quot;px&quot;; &#125; &#125;, /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */ watch: &#123; //ä½¿ç”¨watch ç›‘å¬$routerçš„å˜åŒ– $route(to, from) &#123; //console.log(&quot;to=&quot; + to.meta.index, &quot;from=&quot; + from.meta.index); //(1) å¦‚æœtoçš„ç´¢å¼•å€¼ä¸º0ï¼Œä¸æ·»åŠ ä»»ä½•åŠ¨ç”»ï¼›å¦‚æœtoç´¢å¼•å¤§äºfromç´¢å¼•,åˆ¤æ–­ä¸ºå‰è¿›çŠ¶æ€,åä¹‹åˆ™ä¸ºåé€€çŠ¶æ€ if (to.meta.index &gt; 0) &#123; if (to.meta.index &lt; from.meta.index) &#123; this.transitionName = &quot;slide-right&quot;; &#125; else &#123; this.transitionName = &quot;slide-left&quot;; &#125; &#125; else if (to.meta.index == 0 &amp;&amp; from.meta.index &gt; 0) &#123; this.transitionName = &quot;&quot;; &#125; //(2) å½“ç„¶ï¼Œå¦‚æœä½ æ²¡æœ‰éœ€è¦è®¾ç½®ç´¢å¼•å€¼ä¸º0çš„é¡µé¢å¯ä»¥ç›´æ¥ç”¨ç€ä¸€æ®µ // if (to.meta.index &lt; from.meta.index) &#123; // this.transitionName = &quot;slide-right&quot;; // &#125; else &#123; // this.transitionName = &quot;slide-left&quot;; // &#125; &#125; &#125;, methods: &#123;&#125;&#125;;&lt;/script&gt; &lt;style&gt;* &#123; margin: 0; padding: 0;&#125; html,body &#123; height: 100%;&#125; #app &#123; height: 100%; width: 100%;&#125; /********é¡µé¢åˆ‡æ¢åŠ¨ç”» *********/.slide-right-enter-active,.slide-right-leave-active,.slide-left-enter-active,.slide-left-leave-active &#123; /* will-changeå±æ€§å¯ä»¥æå‰é€šçŸ¥æµè§ˆå™¨æˆ‘ä»¬è¦å¯¹å…ƒç´ åšä»€ä¹ˆåŠ¨ç”»ï¼Œè¿™æ ·æµè§ˆå™¨å¯ä»¥æå‰å‡†å¤‡åˆé€‚çš„ä¼˜åŒ–è®¾ç½® */ will-change: transform; transition: all ease 0.4s; -webkit-transition: all ease 0.4s; position: absolute; width: 100%; left: 0;&#125;.slide-right-enter &#123; transform: translateX(-100%); -webkit-transform: translateX(-100%);&#125;.slide-right-leave-active &#123; transform: translateX(100%); -webkit-transform: translateX(100%);&#125;.slide-left-enter &#123; transform: translateX(100%); -webkit-transform: translateX(100%);&#125;.slide-left-leave-active &#123; transform: translateX(-100%); -webkit-transform: translateX(-100%);&#125;/********é¡µé¢åˆ‡æ¢åŠ¨ç”» *********/...&lt;/style&gt; æœ‰ä¸ªbugå¦‚æœå­é¡µé¢æ²¡æœ‰é«˜åº¦ï¼Œè¿›å…¥å­é¡µé¢å†è¿”å›åº•éƒ¨å¯¼èˆªä¼šæœ‰æŠ–åŠ¨bug æ¯”å¦‚ åŠ ä¸Šä¸€å®šé«˜åº¦å 123456.promise &#123; box-sizing: border-box; height: 100vh; overflow: hidden; background: #f5f5f5;&#125;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueé˜…è¯»æºç å‡†å¤‡äº†ä»€ä¹ˆ","slug":"Vueé˜…è¯»æºç å‡†å¤‡äº†ä»€ä¹ˆ","date":"2020-03-14T16:00:00.000Z","updated":"2020-12-12T03:58:26.000Z","comments":true,"path":"2020/03/15/Vueé˜…è¯»æºç å‡†å¤‡äº†ä»€ä¹ˆ/","link":"","permalink":"http://mariogogogo.github.io/2020/03/15/Vue%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81%E5%87%86%E5%A4%87%E4%BA%86%E4%BB%80%E4%B9%88/","excerpt":"1ã€æŒæ¡ Vue æ‰€æœ‰APIâ€‹ æˆ‘æŠŠ Vue çš„æ‰€æœ‰ API éƒ½è¯¦ç»†ç ”ç©¶ä½¿ç”¨è¿‡äº†ä¸€éï¼Œè€Œä¸”å°½é‡åœ¨é¡¹ç›®ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œè®©è‡ªå·±æœ‰æ·±ä¸€ç‚¹çš„ä½“ä¼š â€‹ è€Œä¸”æˆ‘å¯¹ç€å®˜æ–¹æ–‡æ¡£ï¼Œä¸€ä¸ªä¸ªåšäº†è¯¦ç»†çš„ç¬”è®°ï¼Œè€Œä¸”è”æƒ³è¿‡äº†ä½¿ç”¨åœºæ™¯ã€‚","text":"1ã€æŒæ¡ Vue æ‰€æœ‰APIâ€‹ æˆ‘æŠŠ Vue çš„æ‰€æœ‰ API éƒ½è¯¦ç»†ç ”ç©¶ä½¿ç”¨è¿‡äº†ä¸€éï¼Œè€Œä¸”å°½é‡åœ¨é¡¹ç›®ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œè®©è‡ªå·±æœ‰æ·±ä¸€ç‚¹çš„ä½“ä¼š â€‹ è€Œä¸”æˆ‘å¯¹ç€å®˜æ–¹æ–‡æ¡£ï¼Œä¸€ä¸ªä¸ªåšäº†è¯¦ç»†çš„ç¬”è®°ï¼Œè€Œä¸”è”æƒ³è¿‡äº†ä½¿ç”¨åœºæ™¯ã€‚ 2ã€JavaScript æ‰å®åŸºç¡€â€‹ å¹¸å¥½è‡ªå·±ä¹‹å‰èŠ±äº†å¤§åŠ›æ°”å»ç»™è‡ªå·±æ‰“åŸºç¡€ï¼Œè®©è‡ªå·±ç°åœ¨çš„ JavaScript åŸºç¡€è¿˜ç®—ä¸é”™ã€‚ é€¼ç€è‡ªå·±æŠŠå¾ˆå¤šæœ¬ JavaScript ä¹¦éƒ½çœ‹å®Œäº†ï¼Œå¹¶ä¸”åšäº†è¯¦ç»†ç¬”è®°ã€‚åƒæ˜¯ã€ JavaScriptæ˜“ç»´æŠ¤ã€‘ã€JavaScriptæ€§èƒ½ ã€‘ï¼Œã€JavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‘ã€å·´è²ç‰¹ç»™è‚¡ä¸œçš„ä¿¡ã€‘çœ‹äº†ä¸¤éï¼Œè¯´ä¸ä¸Šç²¾é€šï¼Œä¹Ÿç®—æ˜¯è¿˜å¯ä»¥ï¼Ÿ 3ã€çœ‹å®Œ JavaScript è®¾è®¡æ¨¡å¼â€‹ å…‰æ˜¯ JavaScript è®¾è®¡æ¨¡å¼ è¿™æœ¬ä¹¦ æˆ‘å°±çœ‹äº†ä¸€å¹´åŠï¼Œä¸èƒ½è¯´è‡ªå·±æŠŠæ‰€æœ‰è®¾è®¡æ¨¡å¼éƒ½æŒæ¡äº†ï¼ŒæŒæ¡äº†å¤§éƒ¨åˆ†å§ï¼Œè®¾è®¡æ¨¡å¼æ¸¯çœŸçœŸçš„å¾ˆæœ‰è¶£ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸ä¼šå†³å¿ƒå­¦ â€‹ åœ¨è¿™é‡Œæ¨è å¼ å®¹é“­çš„ ã€JavaScriptè®¾è®¡æ¨¡å¼ã€‘ï¼Œä¹¦è®²å¾—éå¸¸é€å½»å’Œè¯¦ç»†ï¼Œæˆ‘æ˜¯ä»å®Œå…¨ä¸æ‡‚å¼€å§‹çœ‹çš„ â€‹ ä¹Ÿç»å¸¸ä½¿ç”¨ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä¸€ç›´ä»¥è®¾è®¡æ¨¡å¼ä¸ºæˆ‘çš„é¡¹ç›®åŸºæ„ã€‚å°±æ˜¯ èƒ½ç”¨è®¾è®¡æ¨¡å¼çš„åœ°æ–¹ï¼Œæˆ‘éƒ½å°½é‡ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚ â€‹ è®¾è®¡æ¨¡å¼çœ‹èµ·æ¥å°±åƒæ˜¯ å‰‘å®¢ çš„å‰‘è°±ï¼Œæœ‰æ‹›æœ‰å¼ï¼Œè¿äººå®¶æ­¦ä¾ å‰§å‘åŠŸçš„æ—¶å€™éƒ½çŸ¥é“ å–Šå‡º æ‹›å¼çš„åå­—â€¦ é™é¾™åå…«æŒï¼ï¼ï¼ï¼ â€‹ é‡è·¯å­éš¾ç™»å¤§é›…ä¹‹å ‚ï¼Œä¸»è¦æ˜¯ä¸å¥½çœ‹å•Šï¼Œä»£ç ä¸ºäº†å¥½ç»´æŠ¤ï¼Œæ˜“æ‰©å±• 4ã€å­¦ä¼šè°ƒè¯•â€‹ æˆ‘å¾ˆå¤§èƒ†åœ°è¯´ï¼Œå¦‚æœä½ ä¸ä¼šè°ƒè¯•ï¼Œä½ çœ‹ Vue æºç ï¼Œæˆ–è€…ä½ ä¼šæƒ³æ­»ï¼Œä½ ä¼šå‡ºç°è¿™ä¸ªåœºæ™¯â€¦ MMPï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ€ä¹ˆè·³åˆ° é‚£ä¸ªæ–¹æ³•çš„ï¼Œé‚£ä¸ªæ–¹æ³•å’Œ è¿™ä¸ªæ–¹æ³•åˆæ˜¯æ€ä¹ˆè”ç³»èµ·æ¥çš„ï¼Ÿ â€‹ ä¹Ÿè®¸ä½ å¯ä»¥æ…¢æ…¢ ä½¿ç”¨ å‡½æ•°åå­— å»å¯»æ‰¾ï¼Œä½†æ˜¯æ— ç–‘ä½ ä¼šå¤šæ¶ˆè€—å‡ å€æ—¶é—´ï¼Œè€Œä¸”ä½ ä¼šæ›´çƒ¦ â€‹ ä½¿ç”¨è°ƒè¯•çœŸçš„æ–¹ä¾¿ï¼Œä»¥å‰æˆ‘ä¹ŸçœŸçš„ä¸å–œæ¬¢è°ƒè¯•ï¼Œè§‰å¾—å¥½åƒå¾ˆéš¾ï¼Ÿï¼Ÿï¼Ÿ â€‹ æ›´å–œæ¬¢ä½¿ç”¨ console.log å»æ‰“å°ä¿¡æ¯â€¦.. â€‹ æ˜¯å•Šï¼Œæˆ‘è‡ªå·±å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä¼šä½¿ç”¨ console.log å»è°ƒè¯•â€¦â€¦. â€‹ é‚£æ˜¯å› ä¸ºæˆ‘è‡ªå·±ä»£ç ï¼Œæˆ‘çŸ¥é“æ€ä¹ˆè·‘ï¼Œä½  çœ‹åˆ«äººçš„ä»£ç ï¼Œè¿˜æ˜¯è¶…çº§æŠ½è±¡çš„æ¡†æ¶ï¼Œä½¿ç”¨ console.log çš„æ–¹å¼â€¦.. â€‹ æ”¾å¿ƒï¼Œç›¸ä¿¡æˆ‘ï¼Œä½ ä¼šæ‰å¾ˆå¤šå¤´å‘â€¦â€¦â€¦ â€‹ è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ VSCode å»è°ƒè¯•ï¼ŒçœŸçš„ç®€å•åˆæ–¹ä¾¿ï¼Œæˆ‘å½“æ—¶ä¹ŸçœŸçš„å¾ˆéš¾å»è®©è‡ªå·±åˆè¦å­¦ä¸€ä¸ªä¸œè¥¿ â€‹ ä½†æ˜¯æˆ‘å’¬å’¬ç‰™ï¼Œæˆ‘è¿˜æ˜¯å­¦äº†ï¼Œæ„Ÿè°¢è‡ªå·±â€¦â€¦ â€‹ æˆ‘å¯ä»¥ä¿è¯ï¼Œä½ ä»ä¸æ‡‚åˆ°æŒæ¡ï¼Œåªè¦ä¸åˆ°ååˆ†é’Ÿï¼Œç®€ç›´å°±æ˜¯ ç°å®ç‰ˆçš„ ååˆ†é’Ÿç²¾é€šåˆ°å…¥é—¨ â€‹ å¥½å§ï¼Œä¸‹é¢å¼€å§‹è¯´ï¼ŒVue çš„ç®€å•æ€»ç»“ã€‚ Vue æºç çš„ç®€çŸ­çš„æ€»ç»“ 1ã€å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„å‡½æ•°ï¼ä¸ºäº† å¤ç”¨ ä¸” æ˜“ç»´æŠ¤ å¸¸ç”¨çš„ç±»å‹åˆ¤æ–­ã€ ç±»å‹è½¬æ¢ ã€æ•°æ®æ ¼å¼è½¬æ¢ï¼ˆæ•°ç»„è½¬å¯¹è±¡ï¼‰â€¦.. ä¸¾äº›ä¾‹å­ 1234567891011121314151617function isObject(obj) &#123; return obj !== null &amp;&amp; typeof obj === &#x27;object&#x27;&#125;function isUndef(v) &#123; return v === undefined || v === null&#125;function isDef(v) &#123; return v !== undefined &amp;&amp; v !== null&#125;function toString(val) &#123; return val == null ? &#x27;&#x27; : typeof val === &#x27;object&#x27; ? JSON.stringify(val, null, 2) : String(val)&#125;function toObject(arr) &#123; var res = &#123;&#125;; for (var i = 0; i &lt; arr.length; i++) &#123; if (arr[i]) &#123; extend(res, arr[i]); &#125; &#125; return res&#125;.... â€‹ ä½ è¯´è¯´ä¸å®šè¿‡äº†å‡ å¹´ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸å†æ˜¯ ä»€ä¹ˆ typeof obj==â€objectâ€ â€‹ å¦‚æœæ²¡æœ‰å°è£…ï¼Œé‚£å²‚ä¸æ˜¯æ‰€æœ‰ä»£ç æ¶‰åŠåˆ°çš„éƒ½è¦æ”¹ä¸€éï¼Œä¸”ä¸è¯´å¦‚æœæœ‰å¾ˆå¤šä¸ªéƒ½å˜äº†â€¦..é‚£ä½ å°±å¤´å¤§äº† èŠ‚ç‚¹æ“ä½œå…¼å®¹å‡½æ•°addClass ,removeClassï¼ŒcreateElementï¼ŒappendChildï¼ŒremoveChild 1234567891011121314151617function addClass(el, cls) &#123; if (!cls || !(cls = cls.trim())) return if (el.classList) &#123; if (cls.indexOf(&#x27; &#x27;) &gt; -1) &#123; cls.split(/\\s+/).forEach(function(c) &#123; return el.classList.add(c); &#125;); &#125; else &#123; el.classList.add(cls); &#125; &#125; else &#123; var cur = &quot; &quot; + (el.getAttribute(&#x27;class&#x27;) || &#x27;&#x27;) + &quot; &quot;; if (cur.indexOf(&#x27; &#x27; + cls + &#x27; &#x27;) &lt; 0) &#123; el.setAttribute(&#x27;class&#x27;, (cur + cls).trim()); &#125; &#125;&#125;.... è¿™äº›å‡½æ•°éƒ½å¾ˆæœ‰ç”¨ï¼Œæ‰€ä»¥æˆ‘éƒ½è®°ä¸‹æ¥äº†ï¼Œæ¯•ç«Ÿæ˜¯ æ¡†æ¶å°è£…çš„ï¼Œè‚¯å®šæ˜¯æœ€å®Œå–„çš„ 2ã€çœŸçš„ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼å°±æˆ‘çœ‹åˆ°çš„è®¾è®¡æ¨¡å¼å°±æœ‰ Vueæ¶‰åŠçš„è®¾è®¡æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€èŠ‚æµæ¨¡å¼ã€å‚ä¸è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€å•ä¾‹æ¨¡å¼è£…é¥°è€…æ¨¡å¼ã€ç»„åˆç»§æ‰¿æ¨¡å¼ã€é“¾æ¨¡å¼â€¦â€¦â€¦ æˆ‘æ€€ç–‘ Vue æŠŠæ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½ç”¨å®Œäº†â€¦. çœŸçš„â€¦.. å¦‚æœä½ ä¸æ‡‚è®¾è®¡æ¨¡å¼ ä½ çœŸä¸ä¼šé¢†æ‚Ÿåˆ°ä»–è¿™ä¹ˆå†™çš„ç²¾é«“ æˆ‘å°±é€‰ Vue å¸¸ç”¨çš„ä¸€ä¸ªè®¾è®¡æ¨¡å¼æ¥è®² ã€å‚ä¸è€…æ¨¡å¼ã€‘ Vue å°è£…çš„å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç”¨äº† å‚ä¸è€…æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥å«åšæŸ¯é‡ŒåŒ– å…ˆæ¥ç®€å•è§£é‡Šä¸‹ å‚ä¸è€…æ¨¡å¼ 1ã€ä¿å­˜ç¬¬ä¸€æ¬¡è°ƒç”¨ ä¼ å…¥å‚æ•° 2ã€è¿”å›å®šåˆ¶å‡½æ•°ï¼Œå‡½æ•°å†…ä½¿ç”¨ å‚æ•° https://blog.csdn.net/Forever201295/article/details/104032369 ç®€å•å®ç°åƒè¿™æ · 123456function add(a)&#123; return function(b)&#123; return a+b &#125;&#125;// ä¸ºäº†å®šåˆ¶å‡½æ•°ï¼ŒæŠŠç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶çš„å‚æ•°é—­åŒ…ä¿å­˜add5 = add(5)var result = add5(9) çœ‹ä¸€ä¸‹ Vueå…¶ä¸­ä¸€ä¸ª ä½¿ç”¨æŸ¯é‡ŒåŒ– çš„å°è£…å‡½æ•° makeMap åˆ›å»º å¯¹è±¡ mapï¼Œè¿”å›å‡½æ•°ï¼Œç”¨äºåé¢æŸ¥æ‰¾ æŸä¸ªä¸œè¥¿æ˜¯å¦å­˜åœ¨ map ä¸­ 123456789101112131415161718function makeMap( str, expectsLowerCase ) &#123; var map = Object.create(null); var list = str.split(&#x27;,&#x27;); for (var i = 0; i &lt; list.length; i++) &#123; map[list[i]] = true; &#125; return expectsLowerCase ? function(val) &#123; return map[val.toLowerCase()]; &#125; : function(val) &#123; return map[val]; &#125;&#125; // åº”ç”¨var isUnaryTag = makeMap( &#x27;area,base,br,col,embed,frame,hr,img,input,isindex,keygen,&#x27; + &#x27;link,meta,param,source,track,wbr&#x27;); // æŸ¥æ‰¾ area æ ‡ç­¾æ˜¯å¦å­˜åœ¨ ä¸Šé¢ä¿å­˜è¿‡çš„ å­—ç¬¦ä¸²ä¸­isUnaryTag(&#x27;area&#x27;) **3ã€ä½¿ç”¨å¾ˆå¤šé—­åŒ…ï¼ æ®æˆ‘çœ‹è¿‡çš„åœ°æ–¹ 1ã€è§£æç»„ä»¶æ¨¡æ¿ ä½¿ç”¨äº†é—­åŒ…ä½œä¸ºç¼“å­˜ï¼Œä¸ºäº†é‡å¤è§£æ 2ã€cached å‡½æ•°ï¼Œä¸€ä¸ªä¸“é—¨ä½¿ç”¨é—­åŒ… ä¸ºç¼“å­˜çš„å‡½æ•° 3ã€ä¸Šé¢æ‰€è®²åˆ° çš„ æŸ¯é‡ŒåŒ–æ‰€æœ‰æ¶‰åŠçš„å‡½æ•°ï¼ŒmakeMap,parthPath, 4ã€createPatchFunction å½“å±ç¯‡å¹…æœ€å¤§çš„ä½¿ç”¨é—­åŒ…çš„å‡½æ•°äº†ï¼ŒæŠŠä¸€å †å‡½æ•°ä½œä¸ºé—­åŒ…ï¼Œç„¶åè¿”å› ä¸€ä¸ªå‡½æ•°ã€‚ä»–æœ€å¤§çš„ä½œç”¨æ˜¯ æ¯”è¾ƒæ›´æ–°DOM èŠ‚ç‚¹ 4ã€ä½¿ç”¨å¾ˆå¤šæ ‡å¿—ä½ Vue å¸¸ç”¨æ ‡å¿—ä½æ¥ 1ã€è¡¨æ˜æ˜¯å¦å·²ç»åšäº†æŸä»¶äº‹ _isMountedï¼šdom æ˜¯å¦å·²ç»æŒ‚è½½ _isDestroyed ï¼šç»„ä»¶æ˜¯å¦å·²ç»æ‘§æ¯ pendingï¼šè¡¨æ˜æ›´æ–°å›è°ƒçš„ setTimeout å·²ç»æ‰§è¡Œ waitingï¼šæ˜¯å¦å·²ç»åˆå§‹åŒ–æ›´æ–°é˜Ÿåˆ—ï¼Œåœ¨ç­‰å¾…æ–°çš„æˆå‘˜è¿›å…¥å¯¹å’ flushingï¼šæ›´æ–°é˜Ÿåˆ—æ˜¯å¦å·²ç»å¼€å§‹é€ä¸ªæ›´æ–°æˆå‘˜ â€¦â€¦ 2ã€æŒ‡æ˜å½“å‰ä¸œè¥¿çš„èº«ä»½ isStaticï¼šæ˜¯å¦æ˜¯é™æ€èŠ‚ç‚¹ isCommentï¼šæ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹ isClonedï¼šæ˜¯å¦æ˜¯å…‹éš†èŠ‚ç‚¹ isOnceï¼šæ˜¯å¦æœ‰v-once æŒ‡ä»¤ï¼ˆå¦‚æœæœ‰å½“å‰æŒ‡ä»¤ï¼Œä¼šè·³è¿‡ç¼–è¯‘ï¼‰ _isComponentï¼šæ˜¯å¦æ˜¯ç»„ä»¶ â€¦.. â€‹ å¤šç”¨æ ‡å¿—ä½ï¼Œæ§åˆ¶æµç¨‹ï¼Œæ›¿ä»£å¤šä½™çš„åˆ¤æ–­ï¼ˆç›´æ¥åˆ¤æ–­æ ‡å¿—ä½æ¥ç¡®è®¤èº«ä»½ï¼Œä¸ç”¨åšå¤ªå¤šçš„åˆ¤æ–­ï¼‰ï¼Œå‡å°‘å¼€é”€ â€‹ ä¸Šé¢é‚£äº›å˜é‡ï¼Œå¤§å®¶æ²¡çœ‹æºç ï¼Œå¯èƒ½æœ‰äº›æ‡µé€¼ï¼Œæ²¡å…³ç³»ï¼Œå°±å½“å…ˆçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿å°±å¥½äº† Vue æºç åˆ†å‡ æ­¥èµ°æˆ‘ç»™è‡ªå·±å®šçš„ä»»åŠ¡æ˜¯ åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ† Vue çš„ä¸»ä½“å†…å®¹ 1ã€Vueåˆå§‹åŒ–åˆå§‹åŒ–åŸç† 2ã€renderæ¸²æŸ“æœºåˆ¶ 3ã€ä¾èµ–æ”¶é›† 4ã€ä¾èµ–æ›´æ–° 5ã€Virtual DOM ï¼Œdom èŠ‚ç‚¹ ç”Ÿæˆè™šæ‹ŸVnode èŠ‚ç‚¹ 6ã€Diffã€Patchï¼Œ èŠ‚ç‚¹æ¯”è¾ƒæ›´æ–° 7ã€Compileï¼Œ æ¨¡æ¿ç¼–è¯‘ 8ã€NextTick ï¼Œå»¶è¿Ÿæ‰§è¡Œå›è°ƒ 9ã€LifeCircle ï¼Œç”Ÿå‘½å‘¨æœŸ 10ã€Model ï¼ŒåŒå‘ç»‘å®š 11ã€Event ï¼Œäº‹ä»¶æœºåˆ¶ Vue ç»„ä»¶é€‰é¡¹ 1ã€computed 2ã€filter 3ã€mixin 4ã€directive 5ã€slot 6ã€props 7ã€watch â€‹ æˆ‘å°±å¤§çº¦ä»¥è¿™äº›ä¸ºæˆ‘çš„å­¦ä¹ ç›®æ ‡è¿›è¡Œ æºç é˜…è¯»çš„ï¼Œæ¯ä¸€å—éƒ½æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„å†…å®¹ï¼Œæ¯ä¸€å—å†…å®¹éƒ½ä¸æ˜¯å‡ å¤©èƒ½çœ‹å®Œçš„ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦ä¸€ç‚¹çµæ„Ÿã€‚å½“ç„¶è¿˜æœ‰å¾ˆå¤šå†…å®¹ï¼Œä½†æ˜¯æˆ‘çš„ç›®æ ‡ä¹Ÿå¹¶ä¸æ˜¯å…¨éƒ¨ï¼Œä¸€å­—ä¸æ¼è¯»å®Œï¼Œæˆ‘è¦çš„æ˜¯ä»–çš„ç²¾é«“å³å¯ï¼Œæˆ–è®¸ç­‰æˆ‘æŒæ¡äº†è¿™äº›ï¼Œå†å»å¼€å‘å…¶ä»–çš„å†…å®¹ï¼Œè¿™æ ·æˆ–è®¸æ›´ç®€å• â€‹ åæ­£æˆ‘å§‹ç»ˆæé†’è‡ªå·±ä¸è¦ç„¦èºï¼Œå› ä¸ºè¿™ä¸ªä¸œè¥¿çœŸçš„æ˜¯æ€¥ä¸æ¥ï¼Œé•¿æœŸä»¥å¾€ï¼Œä¸è¦å¦„æƒ³ä¸€æ­¥ç™»å¤©ï¼Œä¸€å¼€å§‹æ€»ä¼šå¾ˆéš¾ï¼Œä½†æ˜¯ä¹…äº†ä¹Ÿä¸€æ ·å¾ˆéš¾ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ â€‹ å¦‚æœä½ æœ‰å…´è¶£ä¹Ÿè¯»æºç ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·è®¨è®ºå­¦ä¹ â€¦.","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"é˜¿é‡Œäº‘ http å‡çº§ https","slug":"é˜¿é‡Œäº‘httpå‡çº§https","date":"2020-03-12T16:00:00.000Z","updated":"2020-09-16T09:06:59.000Z","comments":true,"path":"2020/03/13/é˜¿é‡Œäº‘httpå‡çº§https/","link":"","permalink":"http://mariogogogo.github.io/2020/03/13/%E9%98%BF%E9%87%8C%E4%BA%91http%E5%8D%87%E7%BA%A7https/","excerpt":"HTTP åè®®ä»¥æ˜æ–‡æ–¹å¼å‘é€å†…å®¹ï¼Œä¸æä¾›ä»»ä½•æ–¹å¼çš„æ•°æ®åŠ å¯†ã€‚ä¸ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼ŒHTTPS åœ¨ HTTP çš„åŸºç¡€ä¸ŠåŠ å…¥äº† SSL åè®®ï¼ŒSSL ä¾é è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åŠ å¯†ã€‚","text":"HTTP åè®®ä»¥æ˜æ–‡æ–¹å¼å‘é€å†…å®¹ï¼Œä¸æä¾›ä»»ä½•æ–¹å¼çš„æ•°æ®åŠ å¯†ã€‚ä¸ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼ŒHTTPS åœ¨ HTTP çš„åŸºç¡€ä¸ŠåŠ å…¥äº† SSL åè®®ï¼ŒSSL ä¾é è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åŠ å¯†ã€‚ ç”³è¯·è¯ä¹¦ ç„¶ååœ¨ SSL è¯ä¹¦ä¸­ä¸‹è½½ç”³è¯·æ¥çš„è¯ä¹¦ æœ‰ 2 ä¸ªï¼š é…ç½®é˜¿é‡Œäº‘ nginx æˆ‘çš„é…ç½®æ–‡ä»¶åœ¨/ect/nginxï¼Œç°åœ¨æŠŠåˆšæ‰çš„ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶å¤åˆ¶è¿‡æ¥ï¼Œå¾…ä¼šç›´æ¥é…ç½®ä½¿ç”¨å°±è¡Œäº†ã€‚nginx çš„é…ç½®æ–‡ä»¶æ˜¯nginx.confï¼Œé‡Œé¢çš„é…ç½®å†…å®¹æœ‰ä»¥ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; #log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; # &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; # &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; server &#123; listen 80; server_name www.xxx.cn; # åœ¨è¿™é‡Œï¼Œæˆ‘åšäº†httpså…¨åŠ å¯†å¤„ç†ï¼Œåœ¨è®¿é—®httpçš„æ—¶å€™è‡ªåŠ¨è·³è½¬åˆ°https rewrite ^(.*) https://$host$1 permanent; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root /home/chan/www; index index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&#x27;s document root # concurs with nginx&#x27;s one # #location ~ /\\.ht &#123; # deny all; #&#125; &#125; # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; # HTTPS server é…ç½®httpså°±çœ‹è¿™é‡Œå•¦ # server &#123; listen 443; server_name www.xxx.cn; ssl on; #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½® root /home/chan/www; index index.html index.htm; ssl_certificate cert/ssl.pem; ssl_certificate_key cert/ssl.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; #location / &#123; #index index.html index.htm; # proxy_pass http://127.0.0.1:8081; #&#125; error_page 404 /404.html; &#125;&#125; ç„¶åæ‰§è¡Œ 1sudo nginx -s reload è¿è¡Œæµè§ˆå™¨","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"}]},{"title":"GitFlow å·¥ä½œæµ","slug":"GitFlowå·¥ä½œæµ","date":"2020-02-24T16:00:00.000Z","updated":"2020-09-16T09:07:20.000Z","comments":true,"path":"2020/02/25/GitFlowå·¥ä½œæµ/","link":"","permalink":"http://mariogogogo.github.io/2020/02/25/GitFlow%E5%B7%A5%E4%BD%9C%E6%B5%81/","excerpt":"GitFlow å·¥ä½œæµå®šä¹‰äº†ä¸€ä¸ªå›´ç»•é¡¹ç›®å‘å¸ƒçš„ä¸¥æ ¼åˆ†æ”¯æ¨¡å‹ã€‚è™½ç„¶æ¯”åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµå¤æ‚å‡ åˆ†ï¼Œä½†æä¾›äº†ç”¨äºä¸€ä¸ªå¥å£®çš„ç”¨äºç®¡ç†å¤§å‹é¡¹ç›®çš„æ¡†æ¶ã€‚","text":"GitFlow å·¥ä½œæµå®šä¹‰äº†ä¸€ä¸ªå›´ç»•é¡¹ç›®å‘å¸ƒçš„ä¸¥æ ¼åˆ†æ”¯æ¨¡å‹ã€‚è™½ç„¶æ¯”åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµå¤æ‚å‡ åˆ†ï¼Œä½†æä¾›äº†ç”¨äºä¸€ä¸ªå¥å£®çš„ç”¨äºç®¡ç†å¤§å‹é¡¹ç›®çš„æ¡†æ¶ã€‚ è§†é¢‘Git å·¥ä½œæµæŒ‡å— - GitFlow å·¥ä½œæµ æ¦‚è¿° GitFlow å·¥ä½œæµæ²¡æœ‰ç”¨è¶…å‡ºåŠŸèƒ½åˆ†æ”¯å·¥ä½œæµçš„æ¦‚å¿µå’Œå‘½ä»¤ï¼Œè€Œæ˜¯ä¸ºä¸åŒçš„åˆ†æ”¯åˆ†é…ä¸€ä¸ªå¾ˆæ˜ç¡®çš„è§’è‰²ï¼Œå¹¶å®šä¹‰åˆ†æ”¯ä¹‹é—´å¦‚ä½•å’Œä»€ä¹ˆæ—¶å€™è¿›è¡Œäº¤äº’ã€‚é™¤äº†ä½¿ç”¨åŠŸèƒ½åˆ†æ”¯ï¼Œåœ¨åšå‡†å¤‡ã€ç»´æŠ¤å’Œè®°å½•å‘å¸ƒä¹Ÿä½¿ç”¨å„è‡ªçš„åˆ†æ”¯ã€‚å½“ç„¶ä½ å¯ä»¥ç”¨ä¸ŠåŠŸèƒ½åˆ†æ”¯å·¥ä½œæµæ‰€æœ‰çš„å¥½å¤„ï¼šPull Requestsã€éš”ç¦»å®éªŒæ€§å¼€å‘å’Œæ›´é«˜æ•ˆçš„åä½œã€‚ å·¥ä½œæ–¹å¼GitFlow å·¥ä½œæµä»ç„¶ç”¨ä¸­å¤®ä»“åº“ä½œä¸ºæ‰€æœ‰å¼€å‘è€…çš„äº¤äº’ä¸­å¿ƒã€‚å’Œå…¶å®ƒçš„å·¥ä½œæµä¸€æ ·ï¼Œå¼€å‘è€…åœ¨æœ¬åœ°å·¥ä½œå¹¶ push åˆ†æ”¯åˆ°ä¸­å¤®ä»“åº“ä¸­ã€‚ å†å²åˆ†æ”¯ç›¸å¯¹ä½¿ç”¨ä»…æœ‰çš„ä¸€ä¸ª master åˆ†æ”¯ï¼ŒGitFlow å·¥ä½œæµä½¿ç”¨ 2 ä¸ªåˆ†æ”¯æ¥è®°å½•é¡¹ç›®çš„å†å²ã€‚master åˆ†æ”¯å­˜å‚¨äº†æ­£å¼å‘å¸ƒçš„å†å²ï¼Œè€Œ develop åˆ†æ”¯ä½œä¸ºåŠŸèƒ½çš„é›†æˆåˆ†æ”¯ã€‚è¿™æ ·ä¹Ÿæ–¹ä¾¿ master åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤åˆ†é…ä¸€ä¸ªç‰ˆæœ¬å·ã€‚ å‰©ä¸‹è¦è¯´æ˜çš„é—®é¢˜å›´ç»•ç€è¿™ 2 ä¸ªåˆ†æ”¯çš„åŒºåˆ«å±•å¼€ã€‚ åŠŸèƒ½åˆ†æ”¯æ¯ä¸ªæ–°åŠŸèƒ½ä½äºä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯ï¼Œè¿™æ ·å¯ä»¥ push åˆ°ä¸­å¤®ä»“åº“ä»¥å¤‡ä»½å’Œåä½œã€‚ä½†åŠŸèƒ½åˆ†æ”¯ä¸æ˜¯ä» master åˆ†æ”¯ä¸Šæ‹‰å‡ºæ–°åˆ†æ”¯ï¼Œè€Œæ˜¯ä½¿ç”¨ develop åˆ†æ”¯ä½œä¸ºçˆ¶åˆ†æ”¯ã€‚å½“æ–°åŠŸèƒ½å®Œæˆæ—¶ï¼Œåˆå¹¶å› develop åˆ†æ”¯ã€‚æ–°åŠŸèƒ½æäº¤åº”è¯¥ä»ä¸ç›´æ¥ä¸ master åˆ†æ”¯äº¤äº’ã€‚ æ³¨æ„ï¼Œä»å„ç§å«ä¹‰å’Œç›®çš„ä¸Šæ¥çœ‹ï¼ŒåŠŸèƒ½åˆ†æ”¯åŠ ä¸Š develop åˆ†æ”¯å°±æ˜¯åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµçš„ç”¨æ³•ã€‚ä½† GitFlow å·¥ä½œæµæ²¡æœ‰åœ¨è¿™é‡Œæ­¢æ­¥ã€‚ å‘å¸ƒåˆ†æ”¯ ä¸€æ—¦ develop åˆ†æ”¯ä¸Šæœ‰äº†åšä¸€æ¬¡å‘å¸ƒï¼ˆæˆ–è€…è¯´å¿«åˆ°äº†æ—¢å®šçš„å‘å¸ƒæ—¥ï¼‰çš„è¶³å¤ŸåŠŸèƒ½ï¼Œå°±ä» develop åˆ†æ”¯ä¸Š fork ä¸€ä¸ªå‘å¸ƒåˆ†æ”¯ã€‚æ–°å»ºçš„åˆ†æ”¯ç”¨äºå¼€å§‹å‘å¸ƒå¾ªç¯ï¼Œæ‰€ä»¥ä»è¿™ä¸ªæ—¶é—´ç‚¹å¼€å§‹ä¹‹åæ–°çš„åŠŸèƒ½ä¸èƒ½å†åŠ åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Š â€”â€” è¿™ä¸ªåˆ†æ”¯åªåº”è¯¥åš Bug ä¿®å¤ã€æ–‡æ¡£ç”Ÿæˆå’Œå…¶å®ƒé¢å‘å‘å¸ƒä»»åŠ¡ã€‚ä¸€æ—¦å¯¹å¤–å‘å¸ƒçš„å·¥ä½œéƒ½å®Œæˆäº†ï¼Œå‘å¸ƒåˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯å¹¶åˆ†é…ä¸€ä¸ªç‰ˆæœ¬å·æ‰“å¥½ Tagã€‚å¦å¤–ï¼Œè¿™äº›ä»æ–°å»ºå‘å¸ƒåˆ†æ”¯ä»¥æ¥çš„åšçš„ä¿®æ”¹è¦åˆå¹¶å› develop åˆ†æ”¯ã€‚ ä½¿ç”¨ä¸€ä¸ªç”¨äºå‘å¸ƒå‡†å¤‡çš„ä¸“é—¨åˆ†æ”¯ï¼Œä½¿å¾—ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥åœ¨å®Œå–„å½“å‰çš„å‘å¸ƒç‰ˆæœ¬çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥ç»§ç»­å¼€å‘ä¸‹ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½ã€‚è¿™ä¹Ÿæ‰“é€ å®šä¹‰è‰¯å¥½çš„å¼€å‘é˜¶æ®µï¼ˆæ¯”å¦‚ï¼Œå¯ä»¥å¾ˆè½»æ¾åœ°è¯´ï¼Œã€è¿™å‘¨æˆ‘ä»¬è¦åšå‡†å¤‡å‘å¸ƒç‰ˆæœ¬ 4.0ã€ï¼Œå¹¶ä¸”åœ¨ä»“åº“çš„ç›®å½•ç»“æ„ä¸­å¯ä»¥å®é™…çœ‹åˆ°ï¼‰ã€‚ å¸¸ç”¨çš„åˆ†æ”¯çº¦å®šï¼š ç”¨äºæ–°å»ºå‘å¸ƒåˆ†æ”¯çš„åˆ†æ”¯: develop ç”¨äºåˆå¹¶çš„åˆ†æ”¯: master åˆ†æ”¯å‘½å: release-_ æˆ– release/_ ç»´æŠ¤åˆ†æ”¯ ç»´æŠ¤åˆ†æ”¯æˆ–è¯´æ˜¯çƒ­ä¿®å¤ï¼ˆhotfixï¼‰åˆ†æ”¯ç”¨äºç”Ÿæˆå¿«é€Ÿç»™äº§å“å‘å¸ƒç‰ˆæœ¬ï¼ˆproduction releasesï¼‰æ‰“è¡¥ä¸ï¼Œè¿™æ˜¯å”¯ä¸€å¯ä»¥ç›´æ¥ä» master åˆ†æ”¯ fork å‡ºæ¥çš„åˆ†æ”¯ã€‚ä¿®å¤å®Œæˆï¼Œä¿®æ”¹åº”è¯¥é©¬ä¸Šåˆå¹¶å› master åˆ†æ”¯å’Œ develop åˆ†æ”¯ï¼ˆå½“å‰çš„å‘å¸ƒåˆ†æ”¯ï¼‰ï¼Œmaster åˆ†æ”¯åº”è¯¥ç”¨æ–°çš„ç‰ˆæœ¬å·æ‰“å¥½ Tagã€‚ ä¸º Bug ä¿®å¤ä½¿ç”¨ä¸“é—¨åˆ†æ”¯ï¼Œè®©å›¢é˜Ÿå¯ä»¥å¤„ç†æ‰é—®é¢˜è€Œä¸ç”¨æ‰“æ–­å…¶å®ƒå·¥ä½œæˆ–æ˜¯ç­‰å¾…ä¸‹ä¸€ä¸ªå‘å¸ƒå¾ªç¯ã€‚ä½ å¯ä»¥æŠŠç»´æŠ¤åˆ†æ”¯æƒ³æˆæ˜¯ä¸€ä¸ªç›´æ¥åœ¨ master åˆ†æ”¯ä¸Šå¤„ç†çš„ä¸´æ—¶å‘å¸ƒã€‚ ç¤ºä¾‹ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºæœ¬å·¥ä½œæµå¦‚ä½•ç”¨äºç®¡ç†å•ä¸ªå‘å¸ƒå¾ªç¯ã€‚å‡è®¾ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªä¸­å¤®ä»“åº“ã€‚ åˆ›å»ºå¼€å‘åˆ†æ”¯ ç¬¬ä¸€æ­¥ä¸º master åˆ†æ”¯é…å¥—ä¸€ä¸ª develop åˆ†æ”¯ã€‚ç®€å•æ¥åšå¯ä»¥æœ¬åœ°åˆ›å»ºä¸€ä¸ªç©ºçš„ develop åˆ†æ”¯ï¼Œpush åˆ°æœåŠ¡å™¨ä¸Šï¼š 12git branch developgit push -u origin develop ä»¥åè¿™ä¸ªåˆ†æ”¯å°†ä¼šåŒ…å«äº†é¡¹ç›®çš„å…¨éƒ¨å†å²ï¼Œè€Œ master åˆ†æ”¯å°†åªåŒ…å«äº†éƒ¨åˆ†å†å²ã€‚å…¶å®ƒå¼€å‘è€…è¿™æ—¶åº”è¯¥å…‹éš†ä¸­å¤®ä»“åº“ï¼Œå»ºå¥½ develop åˆ†æ”¯çš„è·Ÿè¸ªåˆ†æ”¯ï¼š 12git clone ssh://user@host/path/to/repo.gitgit checkout -b develop origin/develop ç°åœ¨æ¯ä¸ªå¼€å‘éƒ½æœ‰äº†è¿™äº›å†å²åˆ†æ”¯çš„æœ¬åœ°æ‹·è´ã€‚ å°çº¢å’Œå°æ˜å¼€å§‹å¼€å‘æ–°åŠŸèƒ½ è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå°çº¢å’Œå°æ˜å¼€å§‹å„è‡ªçš„åŠŸèƒ½å¼€å‘ã€‚ä»–ä»¬éœ€è¦ä¸ºå„è‡ªçš„åŠŸèƒ½åˆ›å»ºç›¸åº”çš„åˆ†æ”¯ã€‚æ–°åˆ†æ”¯ä¸æ˜¯åŸºäº master åˆ†æ”¯ï¼Œè€Œæ˜¯åº”è¯¥åŸºäº develop åˆ†æ”¯ï¼š 1git checkout -b some-feature develop ä»–ä»¬ç”¨è€å¥—è·¯æ·»åŠ æäº¤åˆ°å„è‡ªåŠŸèƒ½åˆ†æ”¯ä¸Šï¼šç¼–è¾‘ã€æš‚å­˜ã€æäº¤ï¼š 123git statusgit addgit commit å°çº¢å®ŒæˆåŠŸèƒ½å¼€å‘ æ·»åŠ äº†æäº¤åï¼Œå°çº¢è§‰å¾—å¥¹çš„åŠŸèƒ½ OK äº†ã€‚å¦‚æœå›¢é˜Ÿä½¿ç”¨ Pull Requestsï¼Œè¿™æ—¶å€™å¯ä»¥å‘èµ·ä¸€ä¸ªç”¨äºåˆå¹¶åˆ° develop åˆ†æ”¯ã€‚å¦åˆ™å¥¹å¯ä»¥ç›´æ¥åˆå¹¶åˆ°å¥¹æœ¬åœ°çš„ develop åˆ†æ”¯å push åˆ°ä¸­å¤®ä»“åº“ï¼š 12345git pull origin developgit checkout developgit merge some-featuregit pushgit branch -d some-feature ç¬¬ä¸€æ¡å‘½ä»¤åœ¨åˆå¹¶åŠŸèƒ½å‰ç¡®ä¿ develop åˆ†æ”¯æ˜¯æœ€æ–°çš„ã€‚æ³¨æ„ï¼ŒåŠŸèƒ½å†³ä¸åº”è¯¥ç›´æ¥åˆå¹¶åˆ° master åˆ†æ”¯ã€‚å†²çªè§£å†³æ–¹æ³•å’Œé›†ä¸­å¼å·¥ä½œæµä¸€æ ·ã€‚ å°çº¢å¼€å§‹å‡†å¤‡å‘å¸ƒ è¿™ä¸ªæ—¶å€™å°æ˜æ­£åœ¨å®ç°ä»–çš„åŠŸèƒ½ï¼Œå°çº¢å¼€å§‹å‡†å¤‡å¥¹çš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ­£å¼å‘å¸ƒã€‚åƒåŠŸèƒ½å¼€å‘ä¸€æ ·ï¼Œå¥¹ç”¨ä¸€ä¸ªæ–°çš„åˆ†æ”¯æ¥åšå‘å¸ƒå‡†å¤‡ã€‚è¿™ä¸€æ­¥ä¹Ÿç¡®å®šäº†å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼š 1git checkout -b release-0.1 develop è¿™ä¸ªåˆ†æ”¯æ˜¯æ¸…ç†å‘å¸ƒã€æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ã€æ›´æ–°æ–‡æ¡£å’Œå…¶å®ƒä¸ºä¸‹ä¸ªå‘å¸ƒåšå‡†å¤‡æ“ä½œçš„åœ°æ–¹ï¼Œåƒæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¹å–„å‘å¸ƒçš„åŠŸèƒ½åˆ†æ”¯ã€‚ åªè¦å°çº¢åˆ›å»ºè¿™ä¸ªåˆ†æ”¯å¹¶ push åˆ°ä¸­å¤®ä»“åº“ï¼Œè¿™ä¸ªå‘å¸ƒå°±æ˜¯åŠŸèƒ½å†»ç»“çš„ã€‚ä»»ä½•ä¸åœ¨ develop åˆ†æ”¯ä¸­çš„æ–°åŠŸèƒ½éƒ½æ¨åˆ°ä¸‹ä¸ªå‘å¸ƒå¾ªç¯ä¸­ã€‚ å°çº¢å®Œæˆå‘å¸ƒ ä¸€æ—¦å‡†å¤‡å¥½äº†å¯¹å¤–å‘å¸ƒï¼Œå°çº¢åˆå¹¶ä¿®æ”¹åˆ° master åˆ†æ”¯å’Œ develop åˆ†æ”¯ä¸Šï¼Œåˆ é™¤å‘å¸ƒåˆ†æ”¯ã€‚åˆå¹¶å› develop åˆ†æ”¯å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨å‘å¸ƒåˆ†æ”¯ä¸­å·²ç»æäº¤çš„æ›´æ–°éœ€è¦åœ¨åé¢çš„æ–°åŠŸèƒ½ä¸­ä¹Ÿè¦æ˜¯å¯ç”¨çš„ã€‚å¦å¤–ï¼Œå¦‚æœå°çº¢çš„å›¢é˜Ÿè¦æ±‚ Code Reviewï¼Œè¿™æ˜¯ä¸€ä¸ªå‘èµ· Pull Request çš„ç†æƒ³æ—¶æœºã€‚ 1234567git checkout mastergit merge release-0.1git pushgit checkout developgit merge release-0.1git pushgit branch -d release-0.1 å‘å¸ƒåˆ†æ”¯æ˜¯ä½œä¸ºåŠŸèƒ½å¼€å‘ï¼ˆdevelop åˆ†æ”¯ï¼‰å’Œå¯¹å¤–å‘å¸ƒï¼ˆmaster åˆ†æ”¯ï¼‰é—´çš„ç¼“å†²ã€‚åªè¦æœ‰åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œå°±åº”è¯¥æ‰“å¥½ Tag ä»¥æ–¹ä¾¿è·Ÿè¸ªã€‚ 12git tag -a 0.1 -m &quot;Initial public release&quot; mastergit push --tags Git æœ‰æä¾›å„ç§å‹¾å­ï¼ˆhookï¼‰ï¼Œå³ä»“åº“æœ‰äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘æ‰§è¡Œçš„è„šæœ¬ã€‚å¯ä»¥é…ç½®ä¸€ä¸ªå‹¾å­ï¼Œåœ¨ä½  push ä¸­å¤®ä»“åº“çš„ master åˆ†æ”¯æ—¶ï¼Œè‡ªåŠ¨æ„å»ºå¥½å¯¹å¤–å‘å¸ƒã€‚ æœ€ç»ˆç”¨æˆ·å‘ç° Bug å¯¹å¤–å‘å¸ƒåï¼Œå°çº¢å›å»å’Œå°æ˜ä¸€èµ·åšä¸‹ä¸ªå‘å¸ƒçš„æ–°åŠŸèƒ½å¼€å‘ï¼Œç›´åˆ°æœ‰æœ€ç»ˆç”¨æˆ·å¼€äº†ä¸€ä¸ª Issues æŠ±æ€¨å½“å‰ç‰ˆæœ¬çš„ä¸€ä¸ª Bugã€‚ä¸ºäº†å¤„ç† Bugï¼Œå°çº¢ï¼ˆæˆ–å°æ˜ï¼‰ä» master åˆ†æ”¯ä¸Šæ‹‰å‡ºäº†ä¸€ä¸ªç»´æŠ¤åˆ†æ”¯ï¼Œæäº¤ä¿®æ”¹ä»¥è§£å†³é—®é¢˜ï¼Œç„¶åç›´æ¥åˆå¹¶å› master åˆ†æ”¯ï¼š 12345git checkout -b issue-#001 master# Fix the buggit checkout mastergit merge issue-#001git push å°±åƒå‘å¸ƒåˆ†æ”¯ï¼Œç»´æŠ¤åˆ†æ”¯ä¸­æ–°åŠ è¿™äº›é‡è¦ä¿®æ”¹éœ€è¦åŒ…å«åˆ° develop åˆ†æ”¯ä¸­ï¼Œæ‰€ä»¥å°çº¢è¦æ‰§è¡Œä¸€ä¸ªåˆå¹¶æ“ä½œã€‚ç„¶åå°±å¯ä»¥å®‰å…¨åœ°åˆ é™¤è¿™ä¸ªåˆ†æ”¯äº†ï¼š 1234git checkout developgit merge issue-#001git pushgit branch -d issue-#001 æ€»ç»“åˆ°äº†è¿™é‡Œï¼Œ GitFlow å·¥ä½œæµå·²ç»æ„Ÿè§‰å¾ˆèˆ’é€‚äº†ã€‚ä½ åº”è¯¥ä¹Ÿç‰¢å›ºçš„æŒæ¡äº†æœ¬åœ°ä»“åº“çš„æ½œèƒ½ï¼Œpush/pull æ¨¡å¼å’Œ Git å¥å£®çš„åˆ†æ”¯å’Œåˆå¹¶æ¨¡å‹ã€‚ è®°ä½ï¼Œè¿™é‡Œæ¼”ç¤ºçš„å·¥ä½œæµåªæ˜¯å¯èƒ½ç”¨æ³•çš„ä¾‹å­ï¼Œè€Œä¸æ˜¯åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨ Git ä¸å¯è¿é€†çš„æ¡ä¾‹ã€‚æ‰€ä»¥ä¸è¦ç•æƒ§æŒ‰è‡ªå·±éœ€è¦å¯¹å·¥ä½œæµçš„ç”¨æ³•åšå–èˆã€‚ä¸å˜çš„ç›®æ ‡å°±æ˜¯è®© Git ä¸ºä½ æ‰€ç”¨ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://mariogogogo.github.io/tags/Git/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"koa2+mysql+router åå°å¼€å‘é¡¹ç›®","slug":"koa2+mysqlåå°å¼€å‘é¡¹ç›®","date":"2020-02-23T16:00:00.000Z","updated":"2020-09-16T09:07:38.000Z","comments":true,"path":"2020/02/24/koa2+mysqlåå°å¼€å‘é¡¹ç›®/","link":"","permalink":"http://mariogogogo.github.io/2020/02/24/koa2+mysql%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE/","excerpt":"koa2 ä¸ mysql åœ¨ä¸ªäººé¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°è®°å½•ä¸€ä¸‹","text":"koa2 ä¸ mysql åœ¨ä¸ªäººé¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°è®°å½•ä¸€ä¸‹ åˆ›å»ºé¡¹ç›®1.å»ºç«‹æ–‡ä»¶å¤¹åä¸º koa-decorator ç›®å½•å¦‚ä¸‹123456789101112131415â”œâ”€â”€ dist----------------------------------- ç¼–è¯‘åçš„â”œâ”€â”€ src ----------------------------------- é¡¹ç›®çš„æ‰€æœ‰ä»£ç â”‚ â”œâ”€â”€config ----------------------------- é…ç½®æ–‡ä»¶â”‚ â”œâ”€â”€controller ------------------------- æ§åˆ¶å™¨â”‚ â”œâ”€â”€lib -------------------------------- ä¸€äº›é¡¹ç›®çš„æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¦‚è·¯ç”±çš„è£…é¥°å™¨æ–‡ä»¶å°±åœ¨è¿™é‡Œï¼‰â”‚ â”œâ”€â”€logic ------------------------------ ä¸€äº›æ•°æ®æ ¡éªŒâ”‚ â”œâ”€â”€middleware ------------------------- ä¸­é—´ä»¶â”‚ â”œâ”€â”€models------------------------------ æ“ä½œæ•°æ®è¡¨ç›¸å…³é€»è¾‘ä»£ç (æ ¹æ®é¡¹ç›®å¤æ‚åº¦å¯ä»¥å†åˆ†Serviceå±‚)â”‚ â”œâ”€â”€util-------------------------------- ç›¸å…³çš„å·¥å…·æ–‡ä»¶â”‚ â”œâ”€â”€index.js---------------------------- é¡¹ç›®çš„å…¥å£æ–‡ä»¶â”œâ”€â”€ View --------------------------------- ä¸€äº›é™æ€æ–‡ä»¶(ä¸Šä¼ çš„å›¾ç‰‡)â”œâ”€â”€ .babelrc ------------------------------ babelrc çš„ç›¸å…³é…ç½®â”œâ”€â”€ .gitignore ---------------------------- git çš„å¿½ç•¥é…ç½®æ–‡ä»¶â”œâ”€â”€ dev.js -------------------------------- å¼€å‘ç¯å¢ƒçš„å¯åŠ¨æ–‡ä»¶â”œâ”€â”€ production.js ------------------------- ç”Ÿäº§ç¯å¢ƒçš„å¯åŠ¨æ–‡ä»¶ 2.å…¥å£æ–‡ä»¶ç¼–å†™å¼€å‘ç¯å¢ƒ dev.js å’Œ ç”Ÿäº§ç¯å¢ƒçš„ production.js çš„å¯åŠ¨æ–‡ä»¶ 1234567891. dev.jsrequire(&quot;babel-register&quot;);process.env.NODE_ENV = &quot;development&quot;;require(&quot;./src&quot;);2. production.jsprocess.env.NODE_ENV = &quot;production&quot;;require(&quot;./dist&quot;); 3.é…ç½® package.json1234567&quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;build&quot;: &quot;babel src --out-dir dist&quot;, &quot;dev&quot;: &quot;set NODE_ENV=development &amp;&amp; supervisor --watch src dev.js&quot;, &quot;start&quot;: &quot;npm run build &amp;&amp; set NODE_ENV=production &amp;&amp; supervisor --watch dist production.js&quot;, &quot;pm2&quot;: &quot;pm2 start production.js --name &amp;#39;wx-node&amp;#39; --env NODE_ENV=&amp;#39;production&amp;#39; --output ./logs/logs-out.log --error ./logs/logs-error.log --watch dist&quot; &#125;, è¿è¡Œ npm run build : æ˜¯ç”¨ babel ç›´æ¥å°† src ç›®å½•ç¼–è¯‘åœ¨ dist ç›®å½• è¿è¡Œ npm run dev ï¼š æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡ä¸º development å¹¶ä¸”ç›‘å¬ src ç›®å½•ï¼Œå¯åŠ¨ dev.js è¿è¡Œï¼Œä¸ºå¼€å‘ç¯å¢ƒ è¿è¡Œ npm run start : æ˜¯ è¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ npm run build å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡ä¸º production ç›‘å¬ dist ç›®å½•,å¯åŠ¨ production.js è¿è¡Œï¼Œä¸ºç”Ÿäº§æˆ–è€…æµ‹è¯•ç¯å¢ƒ è¿è¡Œ npm run pm2ï¼š è¿™æ˜¯ä½¿ç”¨ pm2 æ¥å®ˆæŠ¤é¡¹ç›®è¿›ç¨‹,å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡å’Œæ—¥å¿—è®° 4.nodejs å…¥å£æ–‡ä»¶åˆ›å»º server æ–‡ä»¶ä¸‹ index,js 1234567891011121314151617181920212223242526272829303132333435const Koa = require(&amp;#39;koa&amp;#39;);const &#123; resolve &#125; = require(&amp;#39;path&amp;#39;);const views = require(&amp;#39;koa-views&amp;#39;);const R = require(&amp;#39;ramda&amp;#39;);const MIDDLEWARES = [ &amp;#39;common&amp;#39;, &amp;#39;router&amp;#39; ];const useMiddlewares = (app) =&gt; &#123; R.map( R.compose(R.forEachObjIndexed((initWith) =&gt; initWith(app)), require, (name) =&gt; resolve(__dirname, `./middlewares/$&#123;name&#125;`) ) )(MIDDLEWARES);&#125;;(async () =&gt; &#123; //åˆ›å»ºå®ä¾‹ const app = new Koa(); //views app.use( views(resolve(__dirname, &amp;#39;../views&amp;#39;), &#123; extension : &amp;#39;html&amp;#39; &#125;) ); // error logger app.on(&amp;#39;error&amp;#39;, (err, ctx) =&gt; &#123; console.log(&amp;#39;error occured:&amp;#39;, err); &#125;); await useMiddlewares(app); // ç›‘å¬ç«¯å£ app.listen(4455, () =&gt; &#123; console.log(&amp;#39;http://127.0.0.1:4455 is runing&amp;#39;); &#125;);&#125;)(); 5.Router è·¯ç”±äºŒæ¬¡å°è£…é…ç½®åœ¨ lib æ–‡ä»¶ä¸­åˆ›å»º decorator.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155const Router = require(&quot;koa-router&quot;);const &#123; resolve &#125; = require(&quot;path&quot;);const _ = require(&quot;lodash&quot;);const glob = require(&quot;glob&quot;);const R = require(&quot;ramda&quot;);const symbolPrefix = Symbol(&quot;prefix&quot;);const routerMap = new Map();const isArray = c =&gt; (_.isArray(c) ? c : [c]);export class Route &#123; constructor(app, apiPath) &#123; this.app = app; this.apiPath = apiPath; this.router = new Router(); &#125; init() &#123; glob.sync(resolve(this.apiPath, &quot;./**/*.js&quot;)).forEach(require); for (let [conf, controller] of routerMap) &#123; const controllers = isArray(controller); let prefixPath = conf.target[symbolPrefix]; if (prefixPath) prefixPath = normalizePath(prefixPath); const routerPath = prefixPath + conf.path; this.router[conf.method](routerPath, ...controllers); &#125; this.app.use(this.router.routes()); this.app.use(this.router.allowedMethods()); &#125;&#125;const normalizePath = path =&gt; (path.startsWith(&quot;/&quot;) ? path : `/$&#123;path&#125;`);const router = conf =&gt; (target, key, descriptor) =&gt; &#123; conf.path = normalizePath(conf.path); routerMap.set( &#123; target: target, ...conf &#125;, target[key] );&#125;;export const controller = path =&gt; target =&gt; (target.prototype[symbolPrefix] = path);export const get = path =&gt; router(&#123; method: &quot;get&quot;, path: path &#125;);export const post = path =&gt; router(&#123; method: &quot;post&quot;, path: path &#125;);export const put = path =&gt; router(&#123; method: &quot;put&quot;, path: path &#125;);export const del = path =&gt; router(&#123; method: &quot;delete&quot;, path: path &#125;);export const use = path =&gt; router(&#123; method: &quot;use&quot;, path: path &#125;);export const all = path =&gt; router(&#123; method: &quot;all&quot;, path: path &#125;);const decorate = (args, middleware) =&gt; &#123; let [target, key, descriptor] = args; target[key] = isArray(target[key]); target[key].unshift(middleware); return descriptor;&#125;;const convert = middleware =&gt; (...args) =&gt; decorate(args, middleware);export const auth = convert(async (ctx, next) =&gt; &#123; console.log(&quot;ctx.session.user&quot;); console.log(ctx.session.user); if (!ctx.session.user) &#123; return (ctx.body = &#123; success: false, code: 401, err: &quot;ç™»å½•ä¿¡æ¯å¤±æ•ˆï¼Œé‡æ–°ç™»å½•&quot; &#125;); &#125; await next();&#125;);export const admin = roleExpected =&gt; convert(async (ctx, next) =&gt; &#123; try &#123; const &#123; role &#125; = ctx.session.user; console.log(&quot;admin session&quot;); console.log(ctx.session.user); if (!role || role !== roleExpected) &#123; return (ctx.body = &#123; success: false, code: 403, err: &quot;ä½ æ²¡æœ‰æƒé™ï¼Œæ¥é”™åœ°æ–¹äº†&quot; &#125;); &#125; await next(); &#125; catch (error) &#123; return (ctx.body = &#123; success: false, code: 505, err: &quot;Cannot destructure property `role` of &#x27;undefined&#x27; or &#x27;null&#x27;.&quot; &#125;); &#125; &#125;);export const required = rules =&gt; convert(async (ctx, next) =&gt; &#123; let errors = []; const checkRules = R.forEachObjIndexed((value, key) =&gt; &#123; errors = R.filter(i =&gt; !R.has(i, ctx, ctx.request[key]))(value); &#125;); checkRules(rules); if (errors.length) &#123; ctx.body = &#123; success: false, code: 412, err: `$&#123;errors.join(&quot;,&quot;)&#125; is required` &#125;; &#125; await next(); &#125;); middle æ–‡ä»¶å¤¹ä¸­åˆ›å»º route.js 123456789const &#123; Route &#125; = require(&quot;../lib/decorator&quot;);const &#123; resolve &#125; = require(&quot;path&quot;);export const router = app =&gt; &#123; const apiPath = resolve(__dirname, &quot;../routes&quot;); const router = new Route(app, apiPath); router.init();&#125;; åˆ›å»º routes æ–‡ä»¶å¤¹ä¸‹ user.js 123456789101112const &#123; controller, get, post, put &#125; = require(&quot;../lib/decorator&quot;);@controller(&quot;/api/v0/user&quot;)export class userController &#123; @get(&quot;/&quot;) async login(ctx, next) &#123; return (ctx.body = &#123; success: false, err: &quot;ç”¨æˆ·&quot; &#125;); &#125;&#125; 6.mysql é…ç½®åˆ›å»º config æ–‡ä»¶å¤¹â€“&gt;default.js 123456789101112//æœåŠ¡å™¨é…ç½®ä¿¡æ¯const config = &#123; port: 4455, database: &#123; DATABASE: &quot;order_test&quot;, USERNAME: &quot;root&quot;, PASSWORD: &quot;123456&quot;, PORT: &quot;3306&quot;, HOST: &quot;localhost&quot; &#125;&#125;;module.exports = config; åˆ›å»º lib æ–‡ä»¶å¤¹ä¸­ mysql.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798var mysql = require(&#x27;mysql&#x27;);var config = require(&#x27;../config/default.js&#x27;);var pool = mysql.createPool(&#123; host : config.database.HOST, user : config.database.USERNAME, password : config.database.PASSWORD, database : config.database.DATABASE, port : config.database.PORT&#125;);let query = (sql, values) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; // æ‰§è¡Œsqlè„šæœ¬å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™ pool.getConnection((err, connection) =&gt; &#123; if (err) &#123; reject(err); &#125; else &#123; connection.query(sql, values, (err, rows) =&gt; &#123; if (err) &#123; reject(err); &#125; else &#123; console.log(&#x27;æ•°æ®åº“è¿æ¥æ­£å¸¸&#x27;); resolve(rows); &#125; connection.release(); &#125;); &#125; &#125;); &#125;);&#125;;// æ•°æ®åº“è¡¨æ ¼åˆ›å»ºconst createTables = &#123; users : `CREATE TABLE IF NOT EXISTS user_info ( id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;, user_id VARCHAR ( 100 ) NOT NULL COMMENT &#x27;è´¦å·&#x27;, user_name VARCHAR ( 100 ) NOT NULL COMMENT &#x27;ç”¨æˆ·å&#x27;, user_pwd VARCHAR ( 100 ) NOT NULL COMMENT &#x27;å¯†ç &#x27;, user_head VARCHAR ( 225 ) COMMENT &#x27;å¤´åƒ&#x27;, user_mobile VARCHAR ( 20 ) COMMENT &#x27;æ‰‹æœº&#x27;, user_email VARCHAR ( 64 ) COMMENT &#x27;é‚®ç®±&#x27;, user_creatdata TIMESTAMP NOT NULL DEFAULT NOW( ) COMMENT &#x27;æ³¨å†Œæ—¥æœŸ&#x27;, user_login_time TIMESTAMP DEFAULT NOW( ) COMMENT &#x27;ç™»å½•æ—¶é—´&#x27;, user_count INT COMMENT &#x27;ç™»å½•æ¬¡æ•°&#x27; ) ENGINE = INNODB charset = utf8;`, role : `CREATE TABLE IF NOT EXISTS role_info ( id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;, role_name VARCHAR ( 20 ) NOT NULL COMMENT &#x27;è§’è‰²å&#x27;, role_description VARCHAR ( 255 ) DEFAULT NULL COMMENT &#x27;æè¿°&#x27; ) ENGINE = INNODB charset = utf8;`, permission : `CREATE TABLE IF NOT EXISTS permission_info ( id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;, permission_name VARCHAR ( 20 ) NOT NULL COMMENT &#x27;æƒé™å&#x27;, permission_description VARCHAR ( 255 ) DEFAULT NULL COMMENT &#x27;æè¿°&#x27; ) ENGINE = INNODB charset = utf8;`, userRole : `CREATE TABLE IF NOT EXISTS user_role ( id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;, user_id INT NOT NULL COMMENT &#x27;å…³è”ç”¨æˆ·&#x27;, role_id INT NOT NULL COMMENT &#x27;å…³è”è§’è‰²&#x27;, KEY fk_user_role_role_info_1 ( role_id ), KEY fk_user_role_user_info_1 ( user_id ), CONSTRAINT fk_user_role_role_info_1 FOREIGN KEY ( role_id ) REFERENCES role_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_user_role_user_info_1 FOREIGN KEY ( user_id ) REFERENCES user_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE ) ENGINE = INNODB charset = utf8;`, rolePermission : `CREATE TABLE IF NOT EXISTS role_permission ( id INT PRIMARY KEY NOT NULL AUTO_INCREMENT COMMENT &#x27;(è‡ªå¢é•¿)&#x27;, role_id INT NOT NULL COMMENT &#x27;å…³è”è§’è‰²&#x27;, permission_id INT NOT NULL COMMENT &#x27;å…³è”æƒé™&#x27;, KEY fk_role_permission_role_info_1 ( role_id ), KEY fk_role_permission_permission_info_1 ( permission_id ), CONSTRAINT fk_role_permission_role_info_1 FOREIGN KEY ( role_id ) REFERENCES role_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_role_permission_permission_info_1 FOREIGN KEY ( permission_id ) REFERENCES permission_info ( id ) ON DELETE CASCADE ON UPDATE CASCADE ) ENGINE = INNODB charset = utf8;`&#125;;let createTable = (sql) =&gt; &#123; return query(sql, []);&#125;;// å»ºè¡¨ ----åˆ›å»ºä¸€æ¬¡ä¹‹åå¯ä»¥æ³¨é‡Šä¸éœ€è¦createTable(createTables.users);createTable(createTables.role);createTable(createTables.permission);createTable(createTables.userRole);createTable(createTables.rolePermission);// é€šè¿‡åå­—æŸ¥æ‰¾ç”¨æˆ·const findDataByName = (name) =&gt; &#123; let _sql = `select * from user_info where user_name=&quot;$&#123;name&#125;&quot;;`; return query(_sql);&#125;;findDataByName(&#x27;jack&#x27;).then((res) =&gt; &#123; console.log(res);&#125;);....//å…¶ä»–æ–¹æ³•ç›¸ä¼¼ åœ¨è·¯ç”±æ–‡ä»¶ä¸­ router æ–‡ä»¶å¤¹ä¸‹â€“&gt;user.js 123456789101112131415161718const &#123; controller, get, post, put &#125; = require(&#x27;../lib/decorator&#x27;);const userModel = require(&#x27;../lib/mysql.js&#x27;);@controller(&#x27;/api/v0/user&#x27;)export class userController &#123; @get(&#x27;/&#x27;) async login(ctx, next) &#123; const result = await userModel.findDataByName(&#x27;jack&#x27;); console.log(result); return (ctx.body = &#123; success : false, data : result err : &#x27;ç”¨æˆ·&#x27; &#125;); &#125;&#125;.....//å…¶ä»–æ“ä½œç±»å‹ å‚è€ƒkoa2+vue+mysql å…¨æ ˆå¼€å‘è®°å½•","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"koa2 ä½¿ç”¨ es7 çš„è£…é¥°å™¨ decorator","slug":"koa2ä½¿ç”¨es7 çš„è£…é¥°å™¨decorator","date":"2020-02-22T16:00:00.000Z","updated":"2020-09-16T09:07:39.000Z","comments":true,"path":"2020/02/23/koa2ä½¿ç”¨es7 çš„è£…é¥°å™¨decorator/","link":"","permalink":"http://mariogogogo.github.io/2020/02/23/koa2%E4%BD%BF%E7%94%A8es7%20%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8decorator/","excerpt":"ç›®å‰ JavaScript å¯¹ decorator æ˜¯ä¸æ”¯æŒï¼Œä½†æ˜¯å¯ä»¥ç”¨ babel æ¥ç¼–è¯‘.","text":"ç›®å‰ JavaScript å¯¹ decorator æ˜¯ä¸æ”¯æŒï¼Œä½†æ˜¯å¯ä»¥ç”¨ babel æ¥ç¼–è¯‘. è£…é¥°å™¨é…ç½®12345678&quot;devDependencies&quot;: &#123; &quot;@babel/cli&quot;: &quot;^7.8.4&quot;, &quot;@babel/core&quot;: &quot;^7.8.4&quot;, &quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.8.3&quot;, &quot;@babel/plugin-proposal-decorators&quot;: &quot;^7.8.3&quot;, &quot;@babel/register&quot;: &quot;^7.8.3&quot;, &quot;babel-preset-env&quot;: &quot;^1.7.0&quot; //æ”¯æŒimport å¯¼å…¥ &#125;, babel é…ç½®æ–‡ä»¶ .babelrc 12345678910&#123; &quot;plugins&quot;: [ [&quot;@babel/plugin-proposal-decorators&quot;, &#123; &quot;legacy&quot;: true &#125;], [&quot;@babel/plugin-proposal-class-properties&quot;, &#123; &quot;loose&quot;: true &#125;] ]&#125; æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª js 1234567891011121314151617181920212223242526272829class Boy &#123; @speak(&quot;Chinese&quot;) run() &#123; console.log(&quot;====================================&quot;); console.log(&quot;i can run !&quot;); console.log(&quot;====================================&quot;); &#125;&#125;/** * @param &#123;any&#125; target | æŒ‡è£…é¥°çš„å¯¹è±¡ boy speakç´§è·Ÿçš„class * @param &#123;any&#125; key | ä¿®é¥°çš„æ–¹æ³• run * @param &#123;any&#125; descriptor | ç‰¹å®šçš„æè¿° */function speak(language) &#123; return function(target, key, descriptor) &#123; console.log(target); console.log(key); console.log(descriptor); target.language = language; return descriptor; &#125;;&#125;const luke = new Boy();luke.run(); å…¥å£æ–‡ä»¶ 1234// æ³¨å†Œrequire(&amp;#39;@babel/register&amp;#39;);// å¼•å…¥è¢«æ‰§è¡Œçš„æ–‡ä»¶require(&amp;#39;./server/index.js&amp;#39;); import æ”¯æŒnodejs ä»æœªæ”¯æŒ import/export è¯­æ³•ï¼Œéœ€è¦å®‰è£…å¿…è¦çš„ npm åŒ…â€“babelï¼Œä½¿ç”¨ babel å°† js æ–‡ä»¶ç¼–è¯‘æˆ node.js æ”¯æŒçš„ commonjs æ ¼å¼çš„ä»£ç ã€‚ 1yarn add babel-register babel-preset-env -D babel é…ç½®æ–‡ä»¶ .babelrc 12345&#123; &quot;plugins&quot;: [ &quot;transform-es2015-modules-commonjs&quot; ]&#125; åˆ›å»ºé¡¹ç›®### 1.å…¥å£æ–‡ä»¶ç¼–å†™å¼€å‘ç¯å¢ƒ dev.js å’Œ ç”Ÿäº§ç¯å¢ƒçš„ production.js çš„å¯åŠ¨æ–‡ä»¶ 1234567891. dev.jsrequire(&quot;babel-register&quot;);process.env.NODE_ENV = &quot;development&quot;;require(&quot;./src&quot;);2. production.jsprocess.env.NODE_ENV = &quot;production&quot;;require(&quot;./dist&quot;); 2.é…ç½® package.json1234567&quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;build&quot;: &quot;babel src --out-dir dist&quot;, &quot;dev&quot;: &quot;set NODE_ENV=development &amp;&amp; supervisor --watch src dev.js&quot;, &quot;start&quot;: &quot;npm run build &amp;&amp; set NODE_ENV=production &amp;&amp; supervisor --watch dist production.js&quot;, &quot;pm2&quot;: &quot;pm2 start production.js --name &#x27;wx-node&#x27; --env NODE_ENV=&#x27;production&#x27; --output ./logs/logs-out.log --error ./logs/logs-error.log --watch dist&quot; &#125;, è¿è¡Œ npm run build : æ˜¯ç”¨ babel ç›´æ¥å°† src ç›®å½•ç¼–è¯‘åœ¨ dist ç›®å½• è¿è¡Œ npm run dev ï¼š æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡ä¸º development å¹¶ä¸”ç›‘å¬ src ç›®å½•ï¼Œå¯åŠ¨ dev.js è¿è¡Œï¼Œä¸ºå¼€å‘ç¯å¢ƒ è¿è¡Œ npm run start : æ˜¯ è¿è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ npm run build å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡ä¸º production ç›‘å¬ dist ç›®å½•,å¯åŠ¨ production.js è¿è¡Œï¼Œä¸ºç”Ÿäº§æˆ–è€…æµ‹è¯•ç¯å¢ƒ è¿è¡Œ npm run pm2ï¼š è¿™æ˜¯ä½¿ç”¨ pm2 æ¥å®ˆæŠ¤é¡¹ç›®è¿›ç¨‹,å¹¶ä¸”è®¾ç½®ç¯å¢ƒå˜é‡å’Œæ—¥å¿—è®° å‚è€ƒkoa2 ä½¿ç”¨ es7 çš„è£…é¥°å™¨ decorator - å¤©é«˜ä»»é¸Ÿé£å§ - åšå®¢å›­","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"å¸¸ç”¨çš„ CSS å°æŠ€å·§","slug":"å¸¸ç”¨çš„CSSå°æŠ€å·§","date":"2020-02-01T16:00:00.000Z","updated":"2020-12-08T06:28:55.000Z","comments":true,"path":"2020/02/02/å¸¸ç”¨çš„CSSå°æŠ€å·§/","link":"","permalink":"http://mariogogogo.github.io/2020/02/02/%E5%B8%B8%E7%94%A8%E7%9A%84CSS%E5%B0%8F%E6%8A%80%E5%B7%A7/","excerpt":"css ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦123overflow: hidden;text-overflow: ellipsis;white-space: nowrap;","text":"css ä¸€è¡Œæ–‡æœ¬è¶…å‡ºâ€¦123overflow: hidden;text-overflow: ellipsis;white-space: nowrap; IOS æ‰‹æœºå®¹å™¨æ»šåŠ¨æ¡æ»‘åŠ¨ä¸æµç•…12overflow: auto;-webkit-overflow-scrolling: touch; ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼éšè— div å…ƒç´ çš„æ»šåŠ¨æ¡ 123div::-webkit-scrollbar &#123; display: none;&#125; æ°´å¹³å‚ç›´å±…ä¸­12345678910111213141516div &#123; width: 100px; height: 100px; position: absolute; top: 0; right: 0; bottom: 0; left: 0; margin: auto;&#125;//======å¦ä¸€ç§==========.parent &#123; display: flex; justify-content: center; align-items: center;&#125; calcè¿™æ˜¯ä¸€ä¸ª css å±æ€§ï¼Œæˆ‘ä¸€èˆ¬ç§°ä¹‹ä¸º css è¡¨è¾¾å¼ã€‚å¯ä»¥è®¡ç®— css çš„å€¼ã€‚æœ€æœ‰è¶£çš„æ˜¯ä»–å¯ä»¥è®¡ç®—ä¸åŒå•ä½çš„å·®å€¼ã€‚å¾ˆå¥½ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç¼ºç‚¹æ˜¯ä¸å®¹æ˜“é˜…è¯»ã€‚æ¥ç›˜ä¾ æ²¡åŠæ³•ä¸€çœ¼çœ‹å‡º 20px æ˜¯å•¥ã€‚ 123div &#123; width: calc(25% - 20px);&#125; å¤šè¡Œæ¢è¡Œ 12345overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical; æ¶ˆæ¯å°ä¸‰è§’ 12345678910&amp;::before &#123; content: &#x27;&#x27;; border-width: 22px 22px 22px 22px; border-style: solid; border-color: transparent #fff transparent transparent; /* å®šä½ */ position: absolute; left: -38px; top: 36px;&#125; CSS flex å¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„ N ç§æ–¹æ³•æˆ‘ä»¬å¸ƒå±€ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ space-between å’Œé—´éš™ 12345678910111213.container &#123; display: flex; flex-wrap: wrap;&#125;.list &#123; width: 24%; height: 100px; background-color: skyblue; margin-top: 15px;&#125;.list:not(:nth-child(4n)) &#123; margin-right: calc(4% / 3); //é—´éš™éš”å¼€&#125; é¦–å…ˆæœ€åä¸€è¡Œéœ€è¦å·¦å¯¹é½çš„å¸ƒå±€æ›´é€‚åˆä½¿ç”¨ CSS grid å¸ƒå±€å®ç°ï¼Œä½†æ˜¯ï¼Œrepeat()å‡½æ•°å…¼å®¹æ€§æœ‰äº›è¦æ±‚ï¼ŒIE æµè§ˆå™¨å¹¶ä¸æ”¯æŒã€‚å¦‚æœé¡¹ç›®éœ€è¦å…¼å®¹ IEï¼Œåˆ™æ­¤æ–¹æ³•éœ€è¦æ–Ÿé…Œã€‚ æ–¹æ³•äºŒï¼šæ ¹æ®ä¸ªæ•°æœ€åä¸€ä¸ªå…ƒç´ åŠ¨æ€ margin ä¾‹å¦‚ï¼Œå‡è®¾æ¯è¡Œ 4 ä¸ªå…ƒç´ ï¼Œç»“æœæœ€åä¸€è¡Œåªæœ‰ 3 ä¸ªå…ƒç´ ï¼Œåˆ™æœ€åä¸€ä¸ªå…ƒç´ çš„ margin-right å¤§å°æ˜¯â€œåˆ—è¡¨å®½åº¦+é—´éš™å¤§å°â€çš„è¯ï¼Œé‚£æœ€å 3 ä¸ªå…ƒç´ ä¹Ÿæ˜¯å¯ä»¥å®Œç¾å·¦å¯¹é½çš„ã€‚ .list:last-child:nth-child(4n - 1)è¯´æ˜æœ€åä¸€è¡Œï¼Œè¦ä¹ˆ 3 ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆ 7 ä¸ªå…ƒç´ â€¦â€¦ .list:last-child:nth-child(4n - 2)è¯´æ˜æœ€åä¸€è¡Œï¼Œè¦ä¹ˆ 2 ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆ 6 ä¸ªå…ƒç´ â€¦â€¦ 1234567891011121314151617181920.container &#123; display: flex; /* ä¸¤ç«¯å¯¹é½ */ justify-content: space-between; flex-wrap: wrap;&#125;.list &#123; width: 24%; height: 100px; background-color: skyblue; margin-top: 15px;&#125;/* å¦‚æœæœ€åä¸€è¡Œæ˜¯3ä¸ªå…ƒç´  */.list:last-child:nth-child(4n - 1) &#123; margin-right: calc(24% + 4% / 3);&#125;/* å¦‚æœæœ€åä¸€è¡Œæ˜¯2ä¸ªå…ƒç´  */.list:last-child:nth-child(4n - 2) &#123; margin-right: calc(48% + 8% / 3);&#125; flex é¡¹ä¸­å­å…ƒç´ æ–‡æœ¬æˆªæ–­ text-overflow:ellipsis å¤±æ•ˆè¿™ä¸ªå° â€œbugâ€æ —å­ ğŸŒ° æˆ‘ä»¬ä¸èƒ½ä¸º .item-con å…ƒç´ è®¾ç½®ä¸ªå®½åº¦ï¼Œè¿™æ ·å°±æ— æ³•é€‚åº”ä¸åŒå±å¹•å°ºå¯¸çš„ç»ˆç«¯è®¾å¤‡ã€‚ è§£å†³æ–¹æ¡ˆï¼šåœ¨ flex é¡¹ä¸­è®¾ç½® min-width: 0; 1234567891011121314151617181920212223.flex &#123; width: 320px; padding: 5px 10px; display: flex; border-bottom: 1px dashed #ccc;&#125;.flex .col1 &#123; margin-right: 6px; color: #999;&#125;.flex .col2 &#123; flex: 1; min-width: 0; /*è§£å†³æ–¹æ¡ˆ*/&#125;.flex .col2 .item-con &#123; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;&#125;.flex p &#123; font-size: 12px; color: #999;&#125; css ç«–å‘å­å…ƒç´ ä¸Šä¸‹å¹³å‡åˆ†é…ç©ºé—´","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"CSS","slug":"CSS","permalink":"http://mariogogogo.github.io/tags/CSS/"}]},{"title":"Axios æºç è§£æ","slug":"Axiosæºç è§£æ","date":"2020-01-21T16:00:00.000Z","updated":"2020-09-16T09:07:18.000Z","comments":true,"path":"2020/01/22/Axiosæºç è§£æ/","link":"","permalink":"http://mariogogogo.github.io/2020/01/22/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","excerpt":"é¦–å…ˆå¯¹ axios æå‡ºå‡ ä¸ªé—®é¢˜ ä¸ºä»€ä¹ˆ axios æ—¢å¯ä»¥å½“å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“å¯¹è±¡ä½¿ç”¨ï¼Œæ¯”å¦‚axios(&#123;url,method&#125;)ã€axios.getã€‚ ç®€è¿° axios è°ƒç”¨æµç¨‹ã€‚ æœ‰ç”¨è¿‡æ‹¦æˆªå™¨å—ï¼ŸåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ æœ‰ä½¿ç”¨ axios çš„å–æ¶ˆåŠŸèƒ½å—ï¼Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ ä¸ºä»€ä¹ˆæ”¯æŒæµè§ˆå™¨ä¸­å‘é€è¯·æ±‚ä¹Ÿæ”¯æŒ node å‘é€è¯·æ±‚ï¼Ÿ å¸¦ç€é—®é¢˜æˆ‘ä»¬è¿›å…¥æºç å»çœ‹çœ‹å§","text":"é¦–å…ˆå¯¹ axios æå‡ºå‡ ä¸ªé—®é¢˜ ä¸ºä»€ä¹ˆ axios æ—¢å¯ä»¥å½“å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“å¯¹è±¡ä½¿ç”¨ï¼Œæ¯”å¦‚axios(&#123;url,method&#125;)ã€axios.getã€‚ ç®€è¿° axios è°ƒç”¨æµç¨‹ã€‚ æœ‰ç”¨è¿‡æ‹¦æˆªå™¨å—ï¼ŸåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ æœ‰ä½¿ç”¨ axios çš„å–æ¶ˆåŠŸèƒ½å—ï¼Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ ä¸ºä»€ä¹ˆæ”¯æŒæµè§ˆå™¨ä¸­å‘é€è¯·æ±‚ä¹Ÿæ”¯æŒ node å‘é€è¯·æ±‚ï¼Ÿ å¸¦ç€é—®é¢˜æˆ‘ä»¬è¿›å…¥æºç å»çœ‹çœ‹å§ axios ç®€ä»‹axios æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ HTTP è¯·æ±‚åº“ï¼Œå³å¯ä»¥ç”¨äºå‰ç«¯æµè§ˆå™¨ä¹Ÿå¯ä»¥åœ¨åç«¯ node.js ä¸­ä½¿ç”¨ï¼Œåœ¨ github ä¸Šçš„ star æ•°å·²ç»æœ‰ 6w+ äº†ï¼Œå®ƒä¹Ÿæ˜¯ vue.js å®˜æ–¹æåŠ›æ¨èçš„ï¼Œå‰ç«¯ï¼ˆå…¨æ ˆï¼‰å¼€å‘å¿…ä¸å¯å°‘çš„åº“ï¼Œå®ƒçš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ åŸºäº Promise æ”¯æŒ å‰ç«¯æµè§ˆå™¨ç¯å¢ƒ å’Œ åç«¯ node.js ç¯å¢ƒ å¯æ·»åŠ æ‹¦æˆªå™¨è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ® æ”¯æŒè¯·æ±‚å–æ¶ˆ è‡ªåŠ¨è½¬æ¢ JSON æ•°æ® å®¢æˆ·ç«¯æ”¯æŒé˜²èŒƒ XSRF æ”¯æŒå„ä¸»æµæµè§ˆå™¨ä»¥åŠ IE8+ axios è¿”å›ä¿¡æ¯ çŸ¥è¯†è¦ç‚¹ XMLHttpRequest Promise å¼‚æ­¥ç¼–ç¨‹ å·¥å…·å‡½æ•°åº“ï¼šbindã€extendã€deepCopyã€deepMergeâ€¦â€¦ æ‹¦æˆªå™¨ï¼šInterceptor æ‹¦æˆªå™¨ç®¡ç†ï¼šInterceptorManager é€‚é…å™¨ï¼šAdaptor å·¥å‚å‡½æ•°ï¼šcreateInstance ä¸ºä»€ä¹ˆ axios æ”¯æŒå¯¹è±¡åˆæ”¯æŒå‡½æ•° axios æœ¬è´¨æ˜¯å‡½æ•°ï¼Œèµ‹å€¼äº†ä¸€äº›åˆ«åæ–¹æ³•ï¼Œæ¯”å¦‚ getã€post æ–¹æ³•ï¼Œå¯è¢«è°ƒç”¨ï¼Œæœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯ Axios.prototype.request å‡½æ•°ã€‚ axios ä¸ Axios çš„å…³ç³» ä»åŠŸèƒ½è¯´ axios æ˜¯ Axios çš„å®ä¾‹ (æ‹¥æœ‰åŠŸèƒ½,æœ‰å±æ€§) ä»è¯­æ³•è¯´ axios ä¸æ˜¯ Axios çš„å®ä¾‹ (æ˜¯ä¸ªå‡½æ•°) axios æ˜¯ Axios.prototype.request å‡½æ•° bind()è¿”å›çš„å‡½æ•° axios ä½œä¸ºå¯¹è±¡æœ‰ Axios åŸå‹ä¸Šçš„æ‰€æœ‰æ–¹æ³•.æœ‰ Axios å¯¹è±¡ä¸Šæ‰€æœ‰å±æ€§ instance ä¸ axios çš„åŒºåˆ«?ç›¸åŒ: éƒ½æ˜¯ä¸€ä¸ªèƒ½å‘ä»»æ„è¯·æ±‚çš„å‡½æ•°:request éƒ½æœ‰å‘ç‰¹å®šè¯·æ±‚çš„æ–¹æ³•:get post put delete éƒ½æœ‰é»˜è®¤é…ç½®å‚æ•°ä¸æ‹¦æˆªå™¨å±æ€§ ä¸åŒ: é»˜è®¤é…ç½®å¯èƒ½ä¸ä¸€æ · æ²¡æœ‰ create cancelToken all æ–¹æ³• åˆ©ç”¨ å·¥å‚å‡½æ•°åŒ…è£…é€šè¿‡å·¥å‚å‡½æ•°å¯¹å®ä¾‹åŒ–å¯¹è±¡è¿‡ç¨‹è¿›è¡ŒåŒ…è£… request æ–¹æ³•å¤„ç† å®ä¾‹æŒ‚è½½ this çš„å¤„ç† 1234567891011121314151617181920212223242526272829function createInstance(defaultConfig) &#123; /* åˆ›å»ºAxiosçš„å®ä¾‹ åŸå‹å¯¹è±¡ä¸Šæœ‰ä¸€äº›ç”¨æ¥å‘è¯·æ±‚çš„æ–¹æ³•: get()/post()/put()/delete()/request() è‡ªèº«ä¸Šæœ‰2ä¸ªé‡è¦å±æ€§: defaults/interceptors */ var context = new Axios(defaultConfig); // axioså’Œaxios.create()å¯¹åº”çš„å°±æ˜¯requestå‡½æ•° // ä¸‹é¢è¿™å¥è¯ç›¸å½“äº ===&gt; Axios.prototype.request.bind(context) var instance = bind(Axios.prototype.request, context); // è¿”å›æ–°å‡½æ•°,æ–°å‡½æ•°å†…éƒ¨è°ƒç”¨request,é‡Œé¢çš„this æŒ‡å‘ context ä¹Ÿå°±æ˜¯Axiosçš„å®ä¾‹ // å°†AxiosåŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•æ‹·è´åˆ°instanceä¸Š: request()/get()/post()/put()/delete() //===&gt; å°±å¯ä»¥ä½¿ç”¨axios.get() //===&gt; request() === axios.request(&#123;&#125;) === axios(&#123;&#125;) utils.extend(instance, Axios.prototype, context); // å°†Axioså®ä¾‹å¯¹è±¡ä¸Šçš„å±æ€§æ‹·è´åˆ°instanceä¸Š: defaultså’Œinterceptorså±æ€§ utils.extend(instance, context); return instance;&#125;...var axios = createInstance(defaults);...//æºç ä¸­å¯¼å‡ºmodule.exports = axios; Axios.prototype.request æ˜¯ä»€ä¹ˆå‘¢?æ˜¯ä¸ªå‡½æ•° 123456789101112131415161718192021222324//ç”¨äºå‘è¯·æ±‚çš„å‡½æ•°//æˆ‘ä»¬ä½¿ç”¨çš„axioså°±æ˜¯æ­¤å‡½æ•°bind()è¿”å›çš„å‡½æ•°Axios.prototype.request = function request(config) &#123; /*eslint no-param-reassign:0*/ // Allow for axios(&#x27;example/url&#x27;[, config]) a la fetch API if (typeof config === &#x27;string&#x27;) &#123; config = arguments[1] || &#123;&#125;; config.url = arguments[0]; &#125; else &#123; config = config || &#123;&#125;; &#125; .... // ç»™åŸå‹å¯¹è±¡æ·»åŠ  å››ä¸ªæ–¹æ³• utils.forEach([&#x27;delete&#x27;, &#x27;get&#x27;, &#x27;head&#x27;, &#x27;options&#x27;], function forEachMethodNoData(method) &#123; /*eslint func-names:0*/ Axios.prototype[method] = function(url, config) &#123; return this.request(utils.merge(config || &#123;&#125;, &#123; method: method, url: url &#125;)); &#125;; &#125;);...&#125; axios è°ƒç”¨æµç¨‹ å®é™…æ˜¯è°ƒç”¨çš„ Axios.prototype.request æ–¹æ³•ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ promise é“¾å¼è°ƒç”¨ï¼Œå®é™…è¯·æ±‚æ˜¯åœ¨ dispatchRequest ä¸­æ´¾å‘çš„ã€‚ å› ä¸º axios æ˜¯å¯¹å¼‚æ­¥ä»»åŠ¡çš„å°è£…ï¼Œæ‰€ä»¥å¿…ä¸å¯å°‘çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Promise æ¥è¿›è¡ŒåŒ…è£… 1234request(config) å°†è¯·æ±‚æ‹¦æˆªå™¨/dispatchRequest()/å“åº”æ‹¦æˆªå™¨ é€šè¿‡Promiseé“¾ä¸²èµ·æ¥,è¿”å›Promise dispatchRequest(config)è½¬æ¢è¯·æ±‚æ•°æ® ===&gt; è°ƒç”¨xhrAdapter()å‘è¯·æ±‚ ===&gt; è¯·æ±‚è¿”å›åè½¬åŒ–å“åº”æ•°æ®,è¿”å›Promise xhrAdapter(config)åˆ›å»ºXHRå¯¹è±¡,æ ¹æ®configè¿›è¡Œç›¸åº”è®¾ç½®,å‘é€ç‰¹å®šè¯·æ±‚,å¹¶æ¥å—å“åº”æ•°æ®,è¿”å›Promise request(config) ==&gt; dispatchRequest(config)==&gt; xhrAdapter(config) æ‹¦æˆªå™¨ - Interceptor åŸç† ç”¨ axios.interceptors.request.use æ·»åŠ è¯·æ±‚æˆåŠŸå’Œå¤±è´¥æ‹¦æˆªå™¨å‡½æ•°ï¼Œç”¨ axios.interceptors.response.use æ·»åŠ å“åº”æˆåŠŸå’Œå¤±è´¥æ‹¦æˆªå™¨å‡½æ•°ã€‚åœ¨ Axios.prototype.request å‡½æ•°ç»„æˆ promise é“¾å¼è°ƒç”¨æ—¶ï¼ŒInterceptors.protype.forEach éå†è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨æ·»åŠ åˆ°çœŸæ­£å‘é€è¯·æ±‚ dispatchRequest çš„ä¸¤ç«¯ï¼Œä»è€Œåšåˆ°è¯·æ±‚å‰æ‹¦æˆªå’Œå“åº”åæ‹¦æˆªã€‚æ‹¦æˆªå™¨ä¹Ÿæ”¯æŒç”¨ Interceptors.protype.eject æ–¹æ³•ç§»é™¤ã€‚ ç»™å®ä¾‹å¯¹è±¡æ·»åŠ  request å’Œ response æ‹¦æˆªå™¨ æ„é€ å‡½æ•° Axios 123456789function Axios(instanceConfig) &#123; // é»˜è®¤å‚æ•° this.defaults = instanceConfig; // æ‹¦æˆªå™¨ è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ this.interceptors = &#123; request: new InterceptorManager(), response: new InterceptorManager() &#125;;&#125; Interceptoræ‹¦æˆªå™¨å¯¹è±¡ï¼Œç”¨æ¥æ³¨å†Œå’Œç®¡ç†æ‹¦æˆªå™¨ 12345678910111213141516171819// æ·»åŠ è¯·æ±‚å‰æ‹¦æˆªå™¨axios.interceptors.request.use( function(config) &#123; return config; &#125;, function(error) &#123; return Promise.reject(error); &#125;);// æ·»åŠ è¯·æ±‚åæ‹¦æˆªå™¨axios.interceptors.response.use( function(response) &#123; return response; &#125;, function(error) &#123; return Promise.reject(error); &#125;); æ„é€ å‡½æ•°ä¸­ InterceptorManager çš„å®ç° 12345678910111213141516export default class InterceptorManager &#123; constructor() &#123; this.handlers = []; //æä¾›æ•°ç»„ &#125; /** * ç±»ä¼¼ä¸å›è°ƒå‡½æ•°1 å›è°ƒå‡½æ•°2 * @param resolvedHandler å›è°ƒå‡½æ•°1 * @param rejectedHandler å›è°ƒå‡½æ•°2 */ use(resolvedHandler, rejectedHandler) &#123; this.handlers.push(&#123; resolvedHandler, rejectedHandler &#125;); &#125;&#125; InterceptorManager.prototype.forEach éå†1234567891011121314151617181920212223/* åˆ›å»ºç”¨äºä¿å­˜è¯·æ±‚/å“åº”æ‹¦æˆªå‡½æ•°çš„æ•°ç»„ æ•°ç»„çš„ä¸­é—´æ”¾å‘é€è¯·æ±‚çš„å‡½æ•° æ•°ç»„çš„å·¦è¾¹æ”¾è¯·æ±‚æ‹¦æˆªå™¨å‡½æ•°(æˆåŠŸ/å¤±è´¥) æ•°ç»„çš„å³è¾¹æ”¾å“åº”æ‹¦æˆªå™¨å‡½æ•° */var chain = [dispatchRequest, undefined];var promise = Promise.resolve(config);// åæ·»åŠ çš„è¯·æ±‚æ‹¦æˆªå™¨ä¿å­˜åœ¨æ•°ç»„çš„å‰é¢this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) &#123; chain.unshift(interceptor.fulfilled, interceptor.rejected);&#125;);// åæ·»åŠ çš„å“åº”æ‹¦æˆªå™¨ä¿å­˜åœ¨æ•°ç»„çš„åé¢this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) &#123; chain.push(interceptor.fulfilled, interceptor.rejected);&#125;);// é€šè¿‡promiseçš„then()ä¸²è¿èµ·æ‰€æœ‰çš„è¯·æ±‚æ‹¦æˆªå™¨/è¯·æ±‚æ–¹æ³•/å“åº”æ‹¦æˆªå™¨while (chain.length) &#123; promise = promise.then(chain.shift(), chain.shift());&#125; è¾“å‡ºç»“æ„ å¼‚æ­¥ä»»åŠ¡é“¾æŠŠè¯·æ±‚åŒ…è£…åœ¨ Promise ä»»åŠ¡é“¾ä¸­ 1234567891011let promise = Promise.resolve(configs);this.interceptors.request.handlers.forEach(handler =&gt; &#123; promise = promise.then(handler.resolvedHandler, handler.rejectedHandler);&#125;);promise = promise.then(this.dispatch, undefined);this.interceptors.response.handlers.forEach(handler =&gt; &#123; promise = promise.then(handler.resolvedHandler, handler.rejectedHandler);&#125;); è¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªå™¨å¯ä»¥å†™ Promiseã€‚ å¦‚æœè®¾ç½®äº†å¤šä¸ªè¯·æ±‚å“åº”å™¨ï¼Œåè®¾ç½®çš„å…ˆæ‰§è¡Œã€‚ å¦‚æœè®¾ç½®äº†å¤šä¸ªå“åº”æ‹¦æˆªå™¨ï¼Œå…ˆè®¾ç½®çš„å…ˆæ‰§è¡Œã€‚ axios å¦‚ä½•å–æ¶ˆè¯·æ±‚? é€šè¿‡ä¼ é€’ config é…ç½® cancelToken çš„å½¢å¼ï¼Œæ¥å–æ¶ˆçš„ã€‚åˆ¤æ–­æœ‰ä¼  cancelTokenï¼Œåœ¨ promise é“¾å¼è°ƒç”¨çš„ dispatchRequest æŠ›å‡ºé”™è¯¯ï¼Œåœ¨ adapter ä¸­ request.abort()å–æ¶ˆè¯·æ±‚ï¼Œä½¿ promise èµ°å‘ rejectedï¼Œè¢«ç”¨æˆ·æ•è·å–æ¶ˆä¿¡æ¯ã€‚ 1234567891011121314151617181920let cancel; // ç”¨äºä¿å­˜å–æ¶ˆè¯·æ±‚çš„å‡½æ•°function getProducts1() &#123; axios(&#123; url: &quot;http://localhost:4000/products1&quot;, cancelToken: new axios.CancelToken(c =&gt; &#123; // cæ˜¯ç”¨äºå–æ¶ˆå½“å‰è¯·æ±‚çš„å‡½æ•° // ä¿å­˜å–æ¶ˆå‡½æ•°, ç”¨äºä¹‹åå¯èƒ½éœ€è¦å–æ¶ˆå½“å‰è¯·æ±‚ cancel = c; &#125;) &#125;).then( response =&gt; &#123; cancel = null; console.log(&quot;è¯·æ±‚1æˆåŠŸäº†&quot;, response.data); &#125;, error =&gt; &#123; cancel = null; console.log(&quot;è¯·æ±‚1å¤±è´¥äº†&quot;, error.message, error); &#125; );&#125; new axios.CancelToken åšäº†ä»€ä¹ˆå½“é…ç½®äº†cancelTokenå¯¹è±¡æ—¶ åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå°†æ¥å–æ¶ˆè¯·æ±‚çš„ cacelPromise å¹¶å®šä¹‰äº†ä¸€ä¸ªç”¨äºå–æ¶ˆè¯·æ±‚çš„ cancel å‡½æ•° å°† cancel å‡½æ•°ä¼ é€’å‡ºæ¥ å–æ¶ˆè¯·æ±‚ æ‰§è¡Œ cancel å‡½æ•°,ä¼ å…¥é”™è¯¯çš„ message å†…éƒ¨ä¼šè®© cancelPromise å˜æˆæˆåŠŸ,ä¸”æˆåŠŸçš„å€¼ä¸ºä¸€ä¸ª Cancel å¯¹è±¡ åœ¨ cancelPromise çš„æˆåŠŸå›è°ƒä¸­,ä¸­æ–­è¯·æ±‚,å¹¶è®©å‘è¯·æ±‚çš„ promise å¤±è´¥,å¤±è´¥çš„ reason ä¸º Cancel å¯¹è±¡ 1234567891011121314151617181920212223242526function CancelToken(executor) &#123; if (typeof executor !== &quot;function&quot;) &#123; throw new TypeError(&quot;executor must be a function.&quot;); &#125; // ä¸ºå°†æ¥å–æ¶ˆè¯·æ±‚å‡†å¤‡ä¸€ä¸ªpromiseå¯¹è±¡, å¹¶ä¿å­˜resolveå‡½æ•° var resolvePromise; this.promise = new Promise(function promiseExecutor(resolve) &#123; resolvePromise = resolve; &#125;); // ä¿å­˜å½“å‰tokenå¯¹è±¡ var token = this; // ç«‹å³æ‰§è¡Œæ¥æ”¶çš„æ‰§è¡Œå™¨å‡½æ•°, å¹¶ä¼ å…¥ç”¨äºå–æ¶ˆè¯·æ±‚çš„cancelå‡½æ•° executor(function cancel(message) &#123; // å¦‚æœtokenä¸­æœ‰reasonäº†, è¯´æ˜è¯·æ±‚å·²å–æ¶ˆ if (token.reason) &#123; // Cancellation has already been requested return; &#125; // å°†tokençš„reasonæŒ‡å®šä¸ºä¸€ä¸ªCancelå¯¹è±¡ token.reason = new Cancel(message); // å°†å–æ¶ˆè¯·æ±‚çš„promiseæŒ‡å®šä¸ºæˆåŠŸ, å€¼ä¸ºreason resolvePromise(token.reason); &#125;);&#125; Cancel å¯¹è±¡ 123456789101112function Cancel(message) &#123; this.message = message;&#125;Cancel.prototype.toString = function toString() &#123; return &quot;Cancel&quot; + (this.message ? &quot;: &quot; + this.message : &quot;&quot;);&#125;;// ç”¨äºæ ‡è¯†æ˜¯ä¸€ä¸ªå–æ¶ˆçš„errorCancel.prototype.__CANCEL__ = true;module.exports = Cancel; åœ¨ xhr.js ä¸­è°ƒç”¨ CancelToken å‡½æ•°ä¸­çš„ promise çš„ then 123456789101112131415// å¦‚æœé…ç½®äº†cancelToken if (config.cancelToken) &#123; // æŒ‡å®šç”¨äºä¸­æ–­è¯·æ±‚çš„å›è°ƒå‡½æ•° config.cancelToken.promise.then(function onCanceled(cancel) &#123; if (!request) &#123; return; &#125; // ä¸­æ–­è¯·æ±‚ request.abort(); // è®©è¯·æ±‚çš„promiseå¤±è´¥ reject(cancel); // Clean up request request = null; &#125;); &#125; å…¶ä¸­ cancel å¯¹è±¡å“ªé‡Œæ¥çš„å‘¢? 12token.reason = new Cancel(message);resolvePromise(token.reason); é€‚é…å™¨(æ”¯æŒæµè§ˆå™¨ä¹Ÿæ”¯æŒ node ç¯å¢ƒ) - Adapter axios.defaults.adapter é»˜è®¤é…ç½®ä¸­æ ¹æ®ç¯å¢ƒåˆ¤æ–­æ˜¯æµè§ˆå™¨è¿˜æ˜¯ node ç¯å¢ƒï¼Œä½¿ç”¨å¯¹åº”çš„é€‚é…å™¨ã€‚é€‚é…å™¨æ”¯æŒè‡ªå®šä¹‰ã€‚ browser : XMLHttpRequest / Fetch node : http / https æ•°æ®è½¬æ¢è¯·æ±‚æ•°æ®è½¬æ¢ : transformRequest å“åº”æ•°æ®è½¬æ¢ : transformResponse axios.defaults.transformResponse æ•°ç»„ä¸­é»˜è®¤å°±æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨ concat é“¾æ¥è‡ªå®šä¹‰çš„å‡½æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637export default &#123; baseURL: &quot;&quot;, url: &quot;&quot;, method: &quot;get&quot;, headers: &#123; &quot;content-type&quot;: &quot;application/json&quot; &#125;, transformResponse: function(data) &#123; //é…ç½®é¡¹å¯¹æ•°æ®å¤„ç† return data; &#125;&#125;;//ä½¿ç”¨var ISO_8601 = /(\\d&#123;4&#125;-\\d&#123;2&#125;-\\d&#123;2&#125;)T(\\d&#123;2&#125;:\\d&#123;2&#125;:\\d&#123;2&#125;)Z/;function formatDate(d) &#123; return d.getMonth() + 1 + &quot;/&quot; + d.getDate() + &quot;/&quot; + d.getFullYear();&#125;/** * æ‰©å±•é…ç½® å¯¹å“åº”æ•°æ®æ ¼å¼åŒ–è½¬æ¢ * @param data * @returns &#123;any&#125; */axios .get(&quot;https://api.github.com/users/mzabriskie&quot;, &#123; transformResponse: axios.defaults.transformResponse.concat(function(data, headers) &#123; Object.keys(data).forEach(function(k) &#123; if (ISO_8601.test(data[k])) &#123; data[k] = new Date(Date.parse(data[k])); &#125; &#125;); return data; &#125;) &#125;) .then(function(res) &#123; document.getElementById(&quot;created&quot;).innerHTML = formatDate(res.data.created_at); &#125;); å‡ ä¸ªå¥½ç”¨çš„å·¥å…·æ–¹æ³•- deepCopy å‡½æ•°åŸºäºä¸Šé¢è¯´çš„ï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ·±åº¦å…‹éš†å¯¹è±¡ 123456789101112131415let deepCopy = source =&gt; &#123; let target = Array.isArray(source) ? [] : &#123;&#125;; for (let key in source) &#123; if (source.hasOwnProperty(key)) &#123; if (typeof source[key] === &quot;object&quot; &amp;&amp; source !== null) &#123; //é€’å½’ target[key] = deepCopy(source[key]); &#125; else &#123; target[key] = source[key]; &#125; &#125; &#125; return target;&#125;; - configMerge å‡½æ•°å¯¹äºé…ç½®åˆå¹¶ï¼Œå¹¶ä¸èƒ½ç®€å•çš„è¿›è¡Œå¤„ç†ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒçš„é…ç½®è¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œæœ‰çš„æ˜¯è¦†ç›–ï¼Œæœ‰çš„åˆå¹¶ baseURLã€urlã€ method ç­‰æ˜¯ç›´æ¥è¦†ç›–çš„ headers æ˜¯éœ€è¦è¿›è¡Œåˆå¹¶å¤„ç†çš„ 12345678910111213141516171819let mergeConfig = (obj1, obj2) =&gt; &#123; let target = deepCopy(obj1); let source = deepCopy(obj2); Object.keys(source).reduce((t, k) =&gt; &#123; if ([&quot;url&quot;, &quot;method&quot;, &quot;baseURL&quot;].includes(k)) &#123; t[k] = source[k]; &#125; if ([&quot;headers&quot;].includes(k)) &#123; // console.log(&#x27;target&#x27;, target.headers); // console.log(&#x27;source&#x27;, source.headers); t[k] = Object.assign(target[k], source[k]); // console.log(&#x27;t&#x27;, t); &#125; return t; &#125;, target); return target;&#125;; æœ€åçœ‹ä¸‹æ•´ä¸ªæµç¨‹å›¾ å‚è€ƒå­¦ä¹  axios æºç æ•´ä½“æ¶æ„â€¦","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"Axioså°è£…","slug":"Axioså°è£…","date":"2020-01-21T16:00:00.000Z","updated":"2020-12-09T08:07:24.000Z","comments":true,"path":"2020/01/22/Axioså°è£…/","link":"","permalink":"http://mariogogogo.github.io/2020/01/22/Axios%E5%B0%81%E8%A3%85/","excerpt":"2020.11.14æ›´æ–°axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚è¿™é‡Œéå¸¸æ„Ÿè°¢è¯„è®ºé‡Œä¸€äº›å¾ˆä¸­è‚¯çš„å»ºè®®ï¼Œæˆ‘ä¹Ÿå¯¹æ­¤è¿›è¡Œäº†æ€è€ƒå’Œé’ˆå¯¹ä¸åŒéœ€æ±‚çš„æ”¹å–„ã€‚ä¸»è¦æœ‰ä»¥ä¸‹æ”¹å˜ï¼š 1.ä¼˜åŒ–axioså°è£…ï¼Œå»æ‰ä¹‹å‰çš„getå’Œpost 2.æ–­ç½‘æƒ…å†µå¤„ç† 3.æ›´åŠ æ¨¡å—åŒ–çš„apiç®¡ç† 4.æ¥å£åŸŸåæœ‰å¤šä¸ªçš„æƒ…å†µ 5.apiæŒ‚è½½åˆ°vue.prototypeä¸Šçœå»å¼•å…¥çš„æ­¥éª¤","text":"2020.11.14æ›´æ–°axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚è¿™é‡Œéå¸¸æ„Ÿè°¢è¯„è®ºé‡Œä¸€äº›å¾ˆä¸­è‚¯çš„å»ºè®®ï¼Œæˆ‘ä¹Ÿå¯¹æ­¤è¿›è¡Œäº†æ€è€ƒå’Œé’ˆå¯¹ä¸åŒéœ€æ±‚çš„æ”¹å–„ã€‚ä¸»è¦æœ‰ä»¥ä¸‹æ”¹å˜ï¼š 1.ä¼˜åŒ–axioså°è£…ï¼Œå»æ‰ä¹‹å‰çš„getå’Œpost 2.æ–­ç½‘æƒ…å†µå¤„ç† 3.æ›´åŠ æ¨¡å—åŒ–çš„apiç®¡ç† 4.æ¥å£åŸŸåæœ‰å¤šä¸ªçš„æƒ…å†µ 5.apiæŒ‚è½½åˆ°vue.prototypeä¸Šçœå»å¼•å…¥çš„æ­¥éª¤ base.js 1234567const base = &#123; sq: &#x27;https://alibaba.com/api/v1&#x27;, bd: &#x27;http://alibaba.com/api/test&#x27;&#125;export default base; articleApi.js 1234567891011121314151617181920212223import base from &#x27;./base&#x27;; // å¯¼å…¥æ¥å£åŸŸååˆ—è¡¨import axios from &#x27;./http&#x27;; // å¯¼å…¥httpä¸­åˆ›å»ºçš„axioså®ä¾‹import qs from &#x27;qs&#x27;; // æ ¹æ®éœ€æ±‚æ˜¯å¦å¯¼å…¥qsæ¨¡å—const article = &#123; // æ–°é—»åˆ—è¡¨ articleList () &#123; return axios.get(`$&#123;base.sq&#125;/topics`); &#125;, // æ–°é—»è¯¦æƒ…,æ¼”ç¤º articleDetail (id, params) &#123; return axios.get(`$&#123;base.sq&#125;/topic/$&#123;id&#125;`, &#123; params: params &#125;); &#125;, // postæäº¤ login (params) &#123; return axios.post(`$&#123;base.sq&#125;/accesstoken`, qs.stringify(params)); &#125; // å…¶ä»–æ¥å£â€¦â€¦â€¦â€¦&#125;export default article; http.jsä¸­axioså°è£…çš„ä¼˜åŒ–ï¼Œå…ˆç›´æ¥è´´ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108/** * axioså°è£… * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç† */import axios from &#x27;axios&#x27;;import router from &#x27;../router&#x27;;import store from &#x27;../store/index&#x27;;import &#123; Toast &#125; from &#x27;vant&#x27;;/** * æç¤ºå‡½æ•° * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­ */const tip = msg =&gt; &#123; Toast(&#123; message: msg, duration: 1000, forbidClick: true &#125;);&#125;/** * è·³è½¬ç™»å½•é¡µ * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢ */const toLogin = () =&gt; &#123; router.replace(&#123; path: &#x27;/login&#x27;, query: &#123; redirect: router.currentRoute.fullPath &#125; &#125;);&#125;/** * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† * @param &#123;Number&#125; status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç  */const errorHandle = (status, other) =&gt; &#123; // çŠ¶æ€ç åˆ¤æ–­ switch (status) &#123; // 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ case 401: toLogin(); break; // 403 tokenè¿‡æœŸ // æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ case 403: tip(&#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;); localStorage.removeItem(&#x27;token&#x27;); store.commit(&#x27;loginSuccess&#x27;, null); setTimeout(() =&gt; &#123; toLogin(); &#125;, 1000); break; // 404è¯·æ±‚ä¸å­˜åœ¨ case 404: tip(&#x27;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&#x27;); break; default: console.log(other); &#125;&#125;// åˆ›å»ºaxioså®ä¾‹var instance = axios.create(&#123; timeout: 1000 * 12&#125;);// è®¾ç½®postè¯·æ±‚å¤´instance.defaults.headers.post[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;/** * è¯·æ±‚æ‹¦æˆªå™¨ * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token */ instance.interceptors.request.use( config =&gt; &#123; // ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ // ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token // åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç  // è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚ const token = store.state.token; token &amp;&amp; (config.headers.Authorization = token); return config; &#125;, error =&gt; Promise.error(error))// å“åº”æ‹¦æˆªå™¨instance.interceptors.response.use( // è¯·æ±‚æˆåŠŸ res =&gt; res.status === 200 ? Promise.resolve(res) : Promise.reject(res), // è¯·æ±‚å¤±è´¥ error =&gt; &#123; const &#123; response &#125; = error; if (response) &#123; // è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ errorHandle(response.status, response.data.message); return Promise.reject(response); &#125; else &#123; // å¤„ç†æ–­ç½‘çš„æƒ…å†µ // eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€ // networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè— // å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜ if (!window.navigator.onLine) &#123; store.commit(&#x27;changeNetwork&#x27;, false); &#125; else &#123; return Promise.reject(error); &#125; &#125; &#125;);export default instance; Index.js 12345678import article from &#x27;./articleApi&#x27;;// å…¶ä»–æ¨¡å—çš„æ¥å£â€¦â€¦// å¯¼å‡ºæ¥å£export default &#123; article, // â€¦â€¦&#125; main.js 12import $api from &#x27;./utils/http&#x27;Vue.prototype.$api = $api é¡¹ç›®ä¸­ä½¿ç”¨ 1234567891011121314methods: &#123;onRefresh() &#123; this.$api.article.articleDetail(&#x27;id&#x27;, &#123; api: 123 &#125;).then(res=&gt; &#123; // æ‰§è¡ŒæŸäº›æ“ä½œ console.log(&#x27;res :&gt;&gt; &#x27;, res); &#125;) // setTimeout(() =&gt; &#123; // this.isLoading = false; // this.count++; // &#125;, 1000); &#125;,&#125; axioså–æ¶ˆæ¥å£è¯·æ±‚1.åº”ç”¨åœºæ™¯ï¼Œä¸ºä»€ä¹ˆè¦å–æ¶ˆè¯·æ±‚æˆ‘ç»™ä½ è¿™æ ·ä¸€ä¸ªåœºæ™¯ä½ å˜èƒ½ç†è§£ä¸ºä»€ä¹ˆéœ€è¦å–æ¶ˆè¯·æ±‚è¿™ç§éªšæ“ä½œäº†ï¼ˆéå¸¸å¸¸è§çš„åœºæ™¯ï¼Œè¿™é‡Œæ˜¯ç”¨vueå†™çš„ï¼‰ 1.å½“æˆ‘ç‚¹å‡»åŠ¨æ€æ çš„æ—¶å€™ï¼Œé€šè¿‡ajaxè·å–å½“å‚æ•°ä¸º2çš„æ—¶å€™çš„æ•°æ®ï¼Œç„¶ååœ¨å°†åŸæœ¬å‚æ•°ä¸º1çš„tabé¡µçš„æ•°æ®æ¸…ç©ºï¼ˆé»˜è®¤è¿›æ¥å±•ç¤ºçš„tab1ï¼‰ï¼Œ 2.æ¸²æŸ“tab2çš„é¡µé¢ï¼Œæˆ‘ä»¬çŸ¥é“ajaxæ˜¯å¼‚æ­¥æ“ä½œçš„ï¼Œè·å–çš„æ•°æ®è¿‡å¤šæˆ–è€…ç”¨æˆ·ç½‘é€Ÿè¾ƒå·®çš„æ—¶å€™ï¼Œè¿™ä¸ªè·å–æ•°æ®çš„ajaxæ“ä½œéœ€è¦ä¸€å®šçš„æ—¶é—´æ¥å°†æ•°æ®æ‹¿åˆ°å†æ¸²æŸ“åˆ°é¡µé¢ä¸Š 3.åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œå¦‚æœæˆ‘å†æ¬¡ç‚¹å‡»tab3ä¹Ÿå°±æ˜¯â€œç³»ç»Ÿå…¬å‘Šâ€çš„æ—¶å€™ï¼Œä»£ç åˆå°†id=3çš„å‚æ•°ä¼ ç»™åå°ï¼Œå»è·å–tab3çš„æ•°æ®ï¼Œè€Œid=2çš„æ—¶å€™çš„æ¥å£æ•°æ®æˆ–è®¸è¿˜åœ¨ä»æœåŠ¡å™¨å›åˆ°å‰å°çš„è·¯ä¸Š 4.å°±æƒ³ä»tab1åˆ°tab2ä¸€æ ·çš„æˆ‘ä»¬å»æ¸…ç©ºæ•°ç»„ä¸­ç››æ”¾çš„tab2çš„æ•°æ®ï¼Œæ¸…ç©ºçš„æ˜¯ä»€ä¹ˆï¼Ÿtab2çš„æ•°æ®è¿˜åœ¨è¿”å›æ¥çš„è·¯ä¸Šè¿˜æ²¡è¢«pushè¿›æ•°ç»„å‘¢ï¼æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æ¸…ç©ºäº†ä¸€æ¬¡ç©ºæ•°ç»„ï¼ï¼ï¼ 5.æ­¤æ—¶æˆ‘ä»¬é¡µé¢æ˜¯å¤„åœ¨tab3äº†ï¼Œé‡Œé¢çš„æ•°æ®å› ä¸ºæ˜¯è¢«pushè¿›å»æˆ‘ä»¬æœ¬åœ°ç”¨æ¥ç››æ”¾æ•°æ®çš„æ•°ç»„çš„ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶çš„æ•°æ®ä¼šæ˜¯id=2çš„æ•°æ® &amp;&amp; id=3çš„æ•°æ®ï¼Œè¿™æ ·ï¼Œé—®é¢˜å°±æš´éœ²å‡ºæ¥äº†ï¼ è§£å†³æ€è·¯ ç°åœ¨æˆ‘å¾—åˆ°çš„æ•°æ®å¤šä½™æˆ‘è¦çš„ &gt; å¤šå‡ºæ¥çš„æ•°æ®æ˜¯å› ä¸ºä¸Šä¸€ä¸ªtabé¡µè¯·æ±‚å»¶è¿Ÿé€ æˆçš„ &gt; é‚£æˆ‘å°±åœ¨å½“å‰é¡µè¯·æ±‚æ•°æ®çš„æ—¶å€™ææ–­ä¸Šä¸€ä¸ªé¡µé¢è¿˜æ²¡å®Œæˆçš„è¯·æ±‚å°±å¥½äº† åœ¨axiosä¸­å–æ¶ˆæ¥å£è¯·æ±‚æ“ä½œå¥½äº†ï¼Œæ¥ä¸‹æ¥æ‰æ˜¯æˆ‘ä»¬çš„ä¸»é¢˜ï¼ŒAxioså®˜æ–¹æä¾›äº†ä¸€ä¸ªå–æ¶ˆæ¥å£è¯·æ±‚çš„æ–¹æ³•ï¼Œä½†æ˜¯æ€ä¹ˆç”¨è¿™ä¸ªæ–¹æ³•å®˜ç½‘å†™çš„å¾ˆç®€ç•¥ï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ²¡æ‰¾å…¨çš„é—®é¢˜ï¼‰ï¼Œåæ­£å®˜ç½‘çš„axioså–æ¶ˆæ¥å£è¯·æ±‚ç´¯çš„åŠæ­»æ²¡çœ‹æ‡‚ï¼Œåæ¥æ˜¯æ‰’äº†å¾ˆå¤šå¤§ä½¬çš„åšå®¢ï¼Œæ‰è‡ªå·±ç†è§£å‡ºæ¥çš„ Axios æä¾›äº†ä¸€ä¸ª CancelTokençš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å–æ¶ˆæ¥å£è¯·æ±‚çš„ï¼Œè‡³äºæ€ä¹ˆç”¨ï¼Œçœ‹ä»£ç å§ï¼Œæˆ‘åœ¨ä»£ç ä¸­å†™äº† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;body&gt; &lt;div class=&quot;page&quot; id=&quot;app&quot;&gt; &lt;button @click=&quot;getMsg&quot; class=&quot;get-msg&quot;&gt;è·å–æ•°æ®&lt;/button&gt; &lt;button @click=&quot;cancelGetMsg&quot; class=&quot;cancel&quot;&gt;å–æ¶ˆè·å–&lt;/button&gt; &lt;ul&gt; &lt;li v-for=&quot;item in items&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;script&gt; var app = new Vue(&#123; el: &#x27;#app&#x27;, data: &#123; message: &#x27;Hello Vue!&#x27;, items: [], cancel: null &#125;, methods: &#123; getMsg () &#123; let CancelToken = axios.CancelToken let self = this axios.get(&#x27;http://jsonplaceholder.typicode.com/comments&#x27;, &#123; cancelToken: new CancelToken(function executor(c) &#123; self.cancel = c console.log(c) // è¿™ä¸ªå‚æ•° c å°±æ˜¯CancelTokenæ„é€ å‡½æ•°é‡Œé¢è‡ªå¸¦çš„å–æ¶ˆè¯·æ±‚çš„å‡½æ•°ï¼Œè¿™é‡ŒæŠŠè¯¥å‡½æ•°å½“å‚æ•°ç”¨ &#125;) &#125;).then(res =&gt; &#123; this.items = res.data &#125;).catch(err =&gt; &#123; console.log(err) &#125;) //æ‰‹é€Ÿå¤Ÿå¿«å°±ä¸ç”¨å†™è¿™ä¸ªå®šæ—¶å™¨äº†ï¼Œç‚¹å‡»å–æ¶ˆè·å–å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº† setTimeout(function () &#123; //åªè¦æˆ‘ä»¬å»è°ƒç”¨äº†è¿™ä¸ªcancel()æ–¹æ³•ï¼Œæ²¡æœ‰å®Œæˆè¯·æ±‚çš„æ¥å£ä¾¿ä¼šåœæ­¢è¯·æ±‚ self.cancel() &#125;, 100) &#125;, //cancelGetMsg æ–¹æ³•è·Ÿä¸Šé¢çš„setTimeoutå‡½æ•°æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œå› ä¸ºæ‰‹é€Ÿä¸å¤Ÿå¿«ï¼Œå“¦ä¸ï¼Œæ˜¯å› ä¸ºç½‘é€Ÿå¤ªå¿«ï¼Œå¯¼è‡´æˆ‘æ¥ä¸åŠç‚¹å–æ¶ˆè·å–æŒ‰é’®ï¼Œæ•°æ®å°±è·å–æˆåŠŸäº† cancelGetMsg () &#123; // åœ¨è¿™é‡Œå»åˆ¤æ–­ä½ çš„id 1 2 3ï¼Œä½ é»˜è®¤æ˜¯å±•ç¤ºçš„tab1ï¼Œç‚¹å‡»çš„æ—¶å€™ä¸ç®¡ä½ ä¸Šä¸€ä¸ªè¯·æ±‚æœ‰æ²¡æœ‰æ‰§è¡Œå®Œéƒ½å»è°ƒç”¨è¿™ä¸ªcancel()ï¼Œ this.cancel() &#125; &#125; &#125;) &lt;/script&gt;&lt;/body&gt; é‡å¤ç‚¹å‡»é—®é¢˜é‚£æˆ‘ä»¬ç»å¸¸å¼€å‘çš„æ—¶å€™ä¼šé‡åˆ°ä¸€ä¸ªé‡å¤ç‚¹å‡»çš„é—®é¢˜ï¼ŒçŸ­æ—¶é—´å†…å¤šæ¬¡ç‚¹å‡»åŒä¸€ä¸ªæŒ‰é’®å‘é€è¯·æ±‚ä¼šåŠ é‡æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œæ¶ˆè€—æµè§ˆå™¨çš„æ€§èƒ½ï¼Œå¤šä»¥ç»å¤§å¤šæ•°çš„æ—¶å€™æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªå–æ¶ˆé‡å¤ç‚¹å‡»çš„æ“ä½œ åœ¨vueå¼€å‘ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•ä¸€æ ·å®Œç¾è§£å†³è¿™ä¸€é—®é¢˜ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°è£…ä¸€éaxiosï¼Œè¿™é‡Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†æ­¤åŠŸèƒ½å°è£…åˆ°æ‹¦æˆªå™¨é‡Œé¢å» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 import axios from &#x27;axios&#x27;; axios.defaults.timeout = 5000; axios.defaults.baseURL =&#x27;&#x27;; let pending = []; //å£°æ˜ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªajaxè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œajaxæ ‡è¯† let cancelToken = axios.CancelToken; let removePending = (ever) =&gt; &#123; for(let p in pending)&#123; if(pending[p].u === ever.url + &#x27;&amp;&#x27; + ever.method) &#123; //å½“å½“å‰è¯·æ±‚åœ¨æ•°ç»„ä¸­å­˜åœ¨æ—¶æ‰§è¡Œå‡½æ•°ä½“ pending[p].f(); //æ‰§è¡Œå–æ¶ˆæ“ä½œ pending.splice(p, 1); //æŠŠè¿™æ¡è®°å½•ä»æ•°ç»„ä¸­ç§»é™¤ &#125; &#125; &#125; //http request æ‹¦æˆªå™¨ axios.interceptors.request.use( config =&gt; &#123; config.data = JSON.stringify(config.data); config.headers = &#123; &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27; &#125; // ------------------------------------------------------------------------------------ removePending(config); //åœ¨ä¸€ä¸ªajaxå‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ config.cancelToken = new cancelToken((c)=&gt;&#123; // è¿™é‡Œçš„ajaxæ ‡è¯†æˆ‘æ˜¯ç”¨è¯·æ±‚åœ°å€&amp;è¯·æ±‚æ–¹å¼æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œå½“ç„¶ä½ å¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¸€äº›æ–¹å¼ pending.push(&#123; u: config.url + &#x27;&amp;&#x27; + config.method, f: c &#125;); &#125;); // ----------------------------------------------------------------------------------------- return config; &#125;, error =&gt; &#123; return Promise.reject(err); &#125;);//http response æ‹¦æˆªå™¨axios.interceptors.response.use( response =&gt; &#123; // ------------------------------------------------------------------------------------------ removePending(res.config); //åœ¨ä¸€ä¸ªajaxå“åº”åå†æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œï¼ŒæŠŠå·²ç»å®Œæˆçš„è¯·æ±‚ä»pendingä¸­ç§»é™¤ // ------------------------------------------------------------------------------------------- if(response.data.errCode ==2)&#123; router.push(&#123; path:&quot;/login&quot;, querry:&#123;redirect:router.currentRoute.fullPath&#125;//ä»å“ªä¸ªé¡µé¢è·³è½¬ &#125;) &#125; return response; &#125;, error =&gt; &#123; return Promise.reject(error) &#125;) è¿™æ˜¯æˆ‘è‡ªå·±é¡¹ç›®ç”¨æ¥å°è£…axiosçš„ä»£ç ï¼Œé‡Œé¢åŠ å…¥äº†å–æ¶ˆé‡å¤ç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•ï¼ˆçµæ„Ÿæ¥æºäº å¤§ç”°è§’https://www.jianshu.com/p/4445595488e2ï¼‰ï¼Œä»¥åå†™é¡¹ç›®ä¸€åŠ³æ°¸é€¸å•¦ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ä»£ç é‡å¤è¯·æ±‚çš„é—®é¢˜å•¦ï¼ï¼ å®Œæ•´çš„ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148/** * axioså°è£… * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç† */import axios from &quot;axios&quot;;import router from &quot;../../router/index&quot;;import store from &quot;../../store/index&quot;;/** * æç¤ºå‡½æ•° * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­ */const tip = (msg) =&gt; &#123; Toast(&#123; message: msg, duration: 1000, forbidClick: true, &#125;);&#125;;/** * è·³è½¬ç™»å½•é¡µ * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢ */const toLogin = () =&gt; &#123; router.replace(&#123; path: &quot;/login&quot;, query: &#123; redirect: router.currentRoute.fullPath, &#125;, &#125;);&#125;;/** * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† * @param &#123;Number&#125; status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç  */const errorHandle = (status, other) =&gt; &#123; // çŠ¶æ€ç åˆ¤æ–­ switch (status) &#123; // 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ case 401: toLogin(); break; // 403 tokenè¿‡æœŸ // æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ case 403: tip(&quot;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&quot;); localStorage.removeItem(&quot;token&quot;); store.commit(&quot;loginSuccess&quot;, null); setTimeout(() =&gt; &#123; toLogin(); &#125;, 1000); break; // 404è¯·æ±‚ä¸å­˜åœ¨ case 404: tip(&quot;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&quot;); break; default: console.log(other); &#125;&#125;;//å£°æ˜ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œaxiosæ ‡è¯†let pending = [];let cancelToken = axios.CancelToken;let removePending = (config) =&gt; &#123; // å¦‚æœæˆªå–è¯·æ±‚è¿™æ ·çš„ï¼šhttp://jsonplaceholder.typicode.com/posts?userId=2 const nurl = config.url.split(&#x27;=&#x27;)[0] console.log(&#x27;å­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œaxiosæ ‡è¯† :&gt;&gt; &#x27;, pending); for (let p in pending) &#123; console.log(&#x27;p :&gt;&gt; &#x27;, p); //å½“å‰è¯·æ±‚åœ¨æ•°ç»„ä¸­å­˜åœ¨æ—¶æ‰§è¡Œå‡½æ•°ä½“ if (pending[p].u === nurl + &quot;&amp;&quot; + config.method) &#123; pending[p].f(); //æ‰§è¡Œå–æ¶ˆæ“ä½œ pending.splice(p, 1); &#125; &#125;&#125;;// åˆ›å»ºaxioså®ä¾‹var instance = axios.create(&#123; timeout: 1000 * 12 &#125;);// è®¾ç½®postè¯·æ±‚å¤´instance.defaults.headers.post[&quot;Content-Type&quot;] = &quot;application/x-www-form-urlencoded&quot;;/** * è¯·æ±‚æ‹¦æˆªå™¨ * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token */instance.interceptors.request.use( (config) =&gt; &#123; // ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ // ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token // åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç  // è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚ /**********å–æ¶ˆè¯·æ±‚*********/ removePending(config); //åœ¨ä¸€ä¸ªaxioså‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ console.log(&quot;åœ¨æ¯ä¸€ä¸ªaxioså‘é€å‰æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œ :&gt;&gt; &quot;); config.cancelToken = new cancelToken((c) =&gt; &#123; // è¿™é‡Œçš„axiosæ ‡è¯†æˆ‘æ˜¯ç”¨è¯·æ±‚åœ°å€&amp;è¯·æ±‚æ–¹å¼æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œå½“ç„¶ä½ å¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¸€äº›æ–¹å¼ console.log(&#x27;cå°±æ˜¯cancelå‡½æ•° :&gt;&gt; &#x27;, c); console.log(&#x27;config.method :&gt;&gt; &#x27;, config.method); console.log(&#x27;config.url :&gt;&gt; &#x27;, config.url); const nurl = config.url.split(&#x27;=&#x27;)[0] pending.push(&#123; u: nurl + &quot;&amp;&quot; + config.method, f: c &#125;); &#125;); /************************/ const token = store.state.token; token &amp;&amp; (config.headers.Authorization = token); return config; &#125;, (error) =&gt; Promise.error(error));// å“åº”æ‹¦æˆªå™¨instance.interceptors.response.use( // è¯·æ±‚æˆåŠŸ // (res) =&gt; (res.status === 200 ? Promise.resolve(res) : Promise.reject(res)), (res) =&gt; &#123; removePending(res.config); //åœ¨ä¸€ä¸ªaxioså“åº”åå†æ‰§è¡Œä¸€ä¸‹å–æ¶ˆæ“ä½œï¼ŒæŠŠå·²ç»å®Œæˆçš„è¯·æ±‚ä»pendingä¸­ç§»é™¤ return res.status === 200 ? Promise.resolve(res) : Promise.reject(res); &#125;, // è¯·æ±‚å¤±è´¥ (error) =&gt; &#123; console.log(&#x27;error :&gt;&gt; &#x27;, error); const &#123; response &#125; = error; if (response) &#123; // è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ console.log(&#x27;error :&gt;&gt; &#x27;, response); errorHandle(response.status, response.data.message); return Promise.reject(response); &#125; else &#123; // å¤„ç†æ–­ç½‘çš„æƒ…å†µ // eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€ // networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè— // å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜ if (!window.navigator.onLine) &#123; store.commit(&quot;changeNetwork&quot;, false); &#125; else &#123; return Promise.reject(error); &#125; &#125; &#125;);export default instance; è§£å†³ä¹‹åæ•ˆæœ å‚è€ƒæ˜é‡‘ vue axiosé‡å¤ç‚¹å‡»å–æ¶ˆä¸Šä¸€æ¬¡è¯·æ±‚å°è£…çš„æ–¹æ³•","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"å‰ç«¯é¢è¯•-åŸå‹åŠåŸå‹é“¾","slug":"å‰ç«¯é¢è¯•-åŸå‹åŠåŸå‹é“¾","date":"2020-01-01T16:00:00.000Z","updated":"2021-01-29T01:28:28.000Z","comments":true,"path":"2020/01/02/å‰ç«¯é¢è¯•-åŸå‹åŠåŸå‹é“¾/","link":"","permalink":"http://mariogogogo.github.io/2020/01/02/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E5%8E%9F%E5%9E%8B%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†","text":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç† 7å»ºå¯¹è±¡çš„å‡ ç§æ–¹æ³•é€šå¸¸ä¸‰ç§ 1234567891011//======1var a = &#123; name: &quot;jack&quot; &#125;;var a1 = new Object(&#123; name: &quot;jack&quot; &#125;);//======2var B = function() &#123; this.name = &quot;love&quot;;&#125;;var b1 = new B();//======3var c = &#123; name: &quot;petter&quot; &#125;;var c1 = Object.create(c); æ„é€ å‡½æ•°â€“ä½¿ç”¨ new è¿ç®—ç¬¦-&gt;ç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œåˆ›å»ºå‡½æ•°çš„æ—¶å€™ js è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™ä¸ªå±æ€§ä¼šåˆ›å»ºä¸€ä¸ª ç©ºå¯¹è±¡å°±æ˜¯åŸå‹å¯¹è±¡ã€‚åŸå‹å¯¹è±¡å¦‚ä½•åŒºåˆ†æˆ‘æ˜¯è¢«å“ªä¸ªæ„é€ å‡½æ•°æ‰€å¼•ç”¨ï¼ŒåŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª(æ„é€ å™¨)constructorä¼šé»˜è®¤ä½ å£°æ˜(æˆ–è€…æŒ‡å‘)çš„é‚£ä¸ªå‡½æ•°ã€‚ åŸå‹é“¾æˆ‘ä»æˆ‘çš„åŸå‹å¯¹è±¡å‘ä¸Šæ‰¾æ„é€ è¿™ä¸ªå®ä¾‹çš„ç›¸å…³è”çš„å¯¹è±¡ï¼›è¿™ä¸ªå…³è”çš„å¯¹è±¡å†å¾€ä¸Šæ‰¾å®ƒåˆæœ‰åˆ›é€ å®ƒçš„çš„åŸå‹å¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨ä¸€ç›´åˆ° Object.prototype ä¸ºæ­¢.åŸå‹é“¾çš„é¡¶ç«¯ Object.prototypeï¼Œ åŸå‹é“¾é ä»€ä¹ˆå‘ä¸Šæ‰¾çš„è¿‡ç¨‹ï¼šå‘ä¸Šæ‰¾ä¸»è¦é  prototype å’Œâ€”â€”proto-è¿™äºŒä¸ª åŸå‹å¯¹è±¡ä¸åŸå‹é“¾èµ·äº†ä»€ä¹ˆä½œä¸šå½“æˆ‘æ„é€ å‡½æ•°ä¸­æœ‰å¾ˆå¤šå±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘çš„å®ä¾‹å°±å¯ä»¥å…±ç”¨è¿™äº›ä¸œè¥¿å½“æˆ‘åˆ›å»ºå¾ˆå¤šå®ä¾‹ï¼Œè¦å»å…±ç”¨è¿™äº›æ–¹æ³•å’Œå±æ€§ã€‚æˆ‘ä¸èƒ½æ¯ä¸ªå®ä¾‹éƒ½æ‹·è´è¿™äº›å±æ€§å’Œæ–¹æ³•ï¼›ä»–ä»¬ä¹‹é—´å…¶å®å¯ä»¥å…±åŒå­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ˆåŸå‹å¯¹è±¡ï¼‰ ä»»ä½•ä¸€ä¸ªå®ä¾‹å¯¹è±¡é€šè¿‡åŸå‹é“¾æ‰¾åˆ°å®ƒä¸Šé¢çš„åŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•è¿™ä¸ªæ˜¯è¢«å®ä¾‹æ‰€å…±äº«çš„ï¼› ä¸€ä¸ªå®ä¾‹æ²¡æœ‰æ‰¾åˆ°å±æ€§æˆ–æ–¹æ³•å®ƒå°±å‘åŸå‹å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœä¸Šçº§åŸå‹å¯¹è±¡æ‰¾ä¸åˆ°åˆ™ä¼šæ ¹æ®åŸå‹å¯¹è±¡çš„â€”â€”proto-çš„åŸå‹å¯¹è±¡ä¸Šå»æ‰¾ æ³¨æ„ï¼š æ„é€ å‡½æ•°æ‰ä¼šæœ‰ prototypeï¼Œå¯¹è±¡æ²¡æœ‰ prototypeã€‚ å®ä¾‹å¯¹è±¡æ‰ä¼šæœ‰â€”â€”proto-ï¼Œå¦‚æœå‘ç°å‡½æ•°ä¹Ÿæœ‰-proto-ã€‚ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡, 1A._proto_ === Function.prototype; //true A çš„åŸå‹å¯¹è±¡å°±æ˜¯ Function çš„åŸå‹å¯¹è±¡ instanceof çš„åŸç†å®ä¾‹å¯¹è±¡çš„ï¼ˆ-proto-ï¼‰å’Œæ„é€ å‡½æ•°çš„ prototype æ˜¯ä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªåœ°å€a ç»§æ‰¿ bï¼Œb ç»§æ‰¿ ca ç»§æ‰¿çš„å¯¹è±¡ç”¨ instanceof åˆ¤æ–­ b æˆ–è€… c éƒ½è¿”å› trueï¼Œæ€ä¹ˆåŒºåˆ†æ˜¯ b çš„å®ä¾‹è¿˜æ˜¯ c çš„å®ä¾‹å‘¢ï¼Ÿè¿™å°±ç”¨åˆ° constructor çš„å±æ€§æ˜¯å“ªä¸ªæ„é€ å‡½æ•° new è¿ç®—ç¬¦èƒŒååŸç† new è¿ç®—ç¬¦åé¢è·Ÿçš„æ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ–°å¯¹è±¡è¢«åˆ›å»ºï¼Œç»§æ‰¿è¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡(foo.prototype) æ„é€ å‡½æ•° foo è¢«æ‰§è¡Œï¼Œæ‰§è¡Œçš„æ—¶å€™ç›¸åº”çš„ä¼ å‚ï¼ŒåŒæ—¶ä¸Šä¸‹æ–‡ this è¢«æŒ‡å®šè¿™ä¸ªæ–°å®ä¾‹ï¼Œnewfoo ç­‰åŒäº new foo();åªèƒ½ç”¨åœ¨ä¸ä¼ å‚çš„æƒ…å†µä¸‹ å¦‚æœæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªæ–°â€™å¯¹è±¡â€˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šå–ä»£ new å‡ºæ¥çš„ç»“æœï¼Œå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œé‚£ä¹ˆ new å‡ºæ¥çš„ç»“æœä¸ºæ­¥éª¤ 1 åˆ›å»ºçš„å¯¹è±¡ 123456789var new2 = function(func) &#123; var o = Object.create(func.prototype); var k = func.call(o); if (typeof k == &quot;object&quot;) &#123; return k; &#125; else &#123; return o; &#125;&#125;; ç»§æ‰¿è¯´åˆ°åŸå‹é“¾è¿˜å¯ä»¥è”ç³»åˆ°ç»§æ‰¿ é¢è¯•é¢˜ï¼šåŸå‹å¦‚ä½•å®ç°ç»§æ‰¿ï¼ŸClass å¦‚ä½•å®ç°ç»§æ‰¿ï¼ŸClass æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ ç»„åˆç»§æ‰¿å¯„ç”Ÿç»„åˆç»§æ‰¿","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","slug":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CJavascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"å‰ç«¯é¢è¯•-React","slug":"å‰ç«¯é¢è¯•-React","date":"2019-12-31T16:00:00.000Z","updated":"2020-09-16T09:07:10.000Z","comments":true,"path":"2020/01/01/å‰ç«¯é¢è¯•-React/","link":"","permalink":"http://mariogogogo.github.io/2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-React/","excerpt":"èƒ½åŠ›é‡åˆ°ç“¶é¢ˆï¼Œ2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†","text":"èƒ½åŠ›é‡åˆ°ç“¶é¢ˆï¼Œ2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç† VdomJsxçš„æœ¬è´¨æ˜¯ä»€ä¹ˆReact.createElement å³æ˜¯hå‡½æ•°ï¼Œè¿”å›vnode patch(el,vnode) å’Œ patch(vnode,newvnode)æ›´æ–° ç¬¬ä¸€ä¸ªå‚æ•°å¯èƒ½æ˜¯ç»„ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯html tag Reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Œ16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼ŸsetStateæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿæœ‰æ—¶å¼‚æ­¥ï¼ˆæ™®é€šä½¿ç”¨ï¼‰ æœ‰æ—¶åŒæ­¥ï¼ˆsettimeout è‡ªå·±å®šä¹‰çš„Domäº‹ä»¶ï¼‰ æœ‰æ—¶åˆå¹¶ï¼ˆå¯¹è±¡å½¢å¼ï¼‰ æœ‰æ—¶ä¸åˆå¹¶ï¼ˆå‡½æ•°å½¢å¼ï¼‰ åè€…æ¯”è¾ƒå¥½ç†è§£ï¼ˆåƒobject.assign) setStateä¸»æµç¨‹ æ¯”å¦‚å¯¹æ¯”ä¸‹åŒæ­¥å’Œå¼‚æ­¥ å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šåˆå§‹ä¸€ä¸ªisBatchingUpdateè¿™ä¸ªå€¼ä¸ºtrueï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œè®¾ç½®falseï¼Œsettimeoutå’Œè‡ªå®šä¹‰äº‹ä»¶æ‰§è¡Œååœ¨è§¦å‘setStateå‡½æ•°çš„æ—¶å€™å·²ç»æ˜¯falseäº†ï¼Œæ‰€ä»¥èµ°å³è¾¹çš„è·¯çº¿ batchUpdateæœºåˆ¶ ç”Ÿå‘½å‘¨æœŸå’Œå®ƒè°ƒç”¨çš„å‡½æ•° Reactæ³¨å†Œçš„äº‹ä»¶ Reactå¯ä»¥ç®¡ç†çš„å…¥å£ ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­å¤šæ¬¡ setStateåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼ŸReactå¦‚ä½•å®ç°è‡ªå·±çš„äº‹ä»¶æœºåˆ¶ï¼Ÿåˆæˆæœºåˆ¶ eventæ˜¯SyntheticEvent ï¼ˆç”Ÿæ•£é¢˜k-evntï¼‰æ¨¡æ‹ŸdomåŸç”Ÿäº‹ä»¶ event.nativeEventæ˜¯åŸç”Ÿäº‹ä»¶å¯¹è±¡ æ‰€æœ‰äº‹ä»¶éƒ½è¢«æŒ‚è½½åˆ°doucumentä¸Š å’Œdomäº‹ä»¶ä¸ä¸€æ ·ï¼Œå’Œvueäº‹ä»¶ä¹Ÿä¸ä¸€æ · é€šè¿‡åˆæˆäº‹ä»¶å»æ´¾å‘äº‹ä»¶ï¼ˆé€šè¿‡event.targetçŸ¥é“é‚£ä¸ªåŸç”Ÿè§¦å‘çš„ï¼Œæ‰¾åˆ°å¯¹åº”ç»„ä»¶ï¼Œç»„ä»¶ä¸­é‚£ä¸ªè§¦å‘onclikäº‹ä»¶ï¼‰ æŠŠeventä¼ ç»™å¯¹åº”è§¦å‘çš„äº‹ä»¶å‡½æ•° ä¸ºä»€ä¹ˆè¦ç”¨åˆæˆäº‹ä»¶æœºåˆ¶ï¼Ÿæ›´å¥½çš„å…¼å®¹æ€§å’Œè·¨å¹³å°ã€‚ï¼ˆæ‘†è„±domäº‹ä»¶é€»è¾‘ï¼‰ æŒ‚è½½åˆ°documentï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œé¿å…é¢‘ç¹è§£ç»‘ï¼Œï¼ˆæ»šåŠ¨æˆ–è€…ç€‘å¸ƒæµäº‹ä»¶ï¼ŒæŒ‚è½½åˆ°æœ€å¤–å±‚ï¼Œå½“ç»„ä»¶é”€æ¯æ—¶å€™å°±ä¸éœ€è¦å»è§£ç»‘domäº‹ä»¶ï¼‰ æ–¹ä¾¿äº‹ä»¶çš„ç»Ÿä¸€ç®¡ç†ï¼ˆäº‹åŠ¡æœºåˆ¶ï¼‰ ä¸ºä½• Reactäº‹ä»¶è¦è‡ªå·±ç»‘å®š thisï¼Ÿåœ¨ä¸Šé¢æåˆ°çš„äº‹ä»¶å¤„ç†æµç¨‹ä¸­ï¼Œ Reactåœ¨ documentä¸Šè¿›è¡Œç»Ÿä¸€çš„äº‹ä»¶åˆ†å‘ï¼Œ dispatchEventé€šè¿‡å¾ªç¯è°ƒç”¨æ‰€æœ‰å±‚çº§çš„äº‹ä»¶æ¥æ¨¡æ‹Ÿäº‹ä»¶å†’æ³¡å’Œæ•è·ã€‚ åœ¨ Reactæºç ä¸­ï¼Œå½“å…·ä½“åˆ°æŸä¸€äº‹ä»¶å¤„ç†å‡½æ•°å°†è¦è°ƒç”¨æ—¶ï¼Œå°†è°ƒç”¨ invokeGuardedCallbackæ–¹æ³•ã€‚ å¯è§ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ç›´æ¥è°ƒç”¨çš„ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šè°ƒç”¨çš„ç»„ä»¶ï¼Œæ‰€ä»¥ä¸è¿›è¡Œæ‰‹åŠ¨ç»‘å®šçš„æƒ…å†µä¸‹ç›´æ¥è·å–åˆ°çš„ thisæ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å½“å‰ç»„ä»¶ç»‘å®šåˆ° thisä¸Šã€‚ åŸç”Ÿäº‹ä»¶å’Œ Reactäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ React äº‹ä»¶ä½¿ç”¨é©¼å³°å‘½åï¼Œè€Œä¸æ˜¯å…¨éƒ¨å°å†™ã€‚ é€šè¿‡ JSX , ä½ ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ åœ¨ React ä¸­ä½ ä¸èƒ½é€šè¿‡è¿”å› false æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚å¿…é¡»æ˜ç¡®è°ƒç”¨ preventDefaultã€‚ Reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥æ··ç”¨å—ï¼ŸReactçš„æ‰€æœ‰äº‹ä»¶éƒ½é€šè¿‡ documentè¿›è¡Œç»Ÿä¸€åˆ†å‘ã€‚å½“çœŸå® Domè§¦å‘äº‹ä»¶åå†’æ³¡åˆ° documentåæ‰ä¼šå¯¹ Reactäº‹ä»¶è¿›è¡Œå¤„ç†ã€‚ æ‰€ä»¥åŸç”Ÿçš„äº‹ä»¶ä¼šå…ˆæ‰§è¡Œï¼Œç„¶åæ‰§è¡Œ Reactåˆæˆäº‹ä»¶ï¼Œæœ€åæ‰§è¡ŒçœŸæ­£åœ¨ documentä¸ŠæŒ‚è½½çš„äº‹ä»¶ Reactäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶æœ€å¥½ä¸è¦æ··ç”¨ã€‚åŸç”Ÿäº‹ä»¶ä¸­å¦‚æœæ‰§è¡Œäº† stopPropagationæ–¹æ³•ï¼Œåˆ™ä¼šå¯¼è‡´å…¶ä»– Reactäº‹ä»¶å¤±æ•ˆã€‚å› ä¸ºæ‰€æœ‰å…ƒç´ çš„äº‹ä»¶å°†æ— æ³•å†’æ³¡åˆ° documentä¸Šï¼Œå¯¼è‡´æ‰€æœ‰çš„ Reactäº‹ä»¶éƒ½å°†æ— æ³•è¢«è§¦å‘ã€‚ã€‚ Reactç»„ä»¶çš„æ¸²æŸ“æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ ä½¿ç”¨ React.createElementæˆ– JSXç¼–å†™ Reactç»„ä»¶ï¼Œå®é™…ä¸Šæ‰€æœ‰çš„ JSXä»£ç æœ€åéƒ½ä¼šè½¬æ¢æˆ React.createElement(...)ï¼Œ Babelå¸®åŠ©æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹ã€‚ createElementå‡½æ•°å¯¹ keyå’Œ refç­‰ç‰¹æ®Šçš„ propsè¿›è¡Œå¤„ç†ï¼Œå¹¶è·å– defaultPropså¯¹é»˜è®¤ propsè¿›è¡Œèµ‹å€¼ï¼Œå¹¶ä¸”å¯¹ä¼ å…¥çš„å­©å­èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆæ„é€ æˆä¸€ä¸ª ReactElementå¯¹è±¡ï¼ˆæ‰€è°“çš„è™šæ‹Ÿ DOMï¼‰ã€‚ ReactDOM.renderå°†ç”Ÿæˆå¥½çš„è™šæ‹ŸDOMæ¸²æŸ“åˆ°æŒ‡å®šå®¹å™¨ä¸Šï¼Œå…¶ä¸­é‡‡ç”¨äº†æ‰¹å¤„ç†ã€äº‹åŠ¡ç­‰æœºåˆ¶å¹¶ä¸”å¯¹ç‰¹å®šæµè§ˆå™¨è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œæœ€ç»ˆè½¬æ¢ä¸ºçœŸå®DOM`ã€‚ Reactæ›´æ–°è¿‡ç¨‹æ€ä¹ˆæ ·é¦–å…ˆprops stateæ›´æ–° â€”&gt; dirComponents(å¯èƒ½æ˜¯å­ç»„ä»¶) render()ç”Ÿæˆnewvnode patch(el,vnode) æ›´æ–°åˆ†2ä¸ªèŠ‚ç‚¹ ï¼š reconciliationï¼ˆå’Œè§£ï¼‰é˜¶æ®µï¼ˆæ‰§è¡Œdiff jsè®¡ç®—ï¼‰ å’Œ commité˜¶æ®µ å½“ç»„ä»¶è¶³å¤Ÿå¤æ‚ï¼Œç»„ä»¶æ›´æ–°æ—¶è®¡ç®—å’Œæ¸²æŸ“å‹åŠ›å¤§ï¼ŒåŒæ—¶å†æœ‰domæ“ä½œåŠ¨ç”»æˆ–é¼ æ ‡éœ€æ±‚å°†å¡é¡¿ è§£å†³æ–¹æ¡ˆfiber å°†reconciliationé˜¶æ®µè¿›è¡Œä»»åŠ¡æ‹†åˆ†ï¼ˆcommitæ— æ³•æ‹†åˆ†ï¼‰ æµè§ˆå™¨éœ€è¦æ”¯æŒrequestIdleCallbackã€‚ è™šæ‹ŸDomæ˜¯ä»€ä¹ˆï¼Ÿè€Œ Reactä¼šå…ˆå°†ä½ çš„jsxä»£ç è½¬æ¢æˆä¸€ä¸ª JavaScriptå¯¹è±¡ï¼Œç„¶åè¿™ä¸ª JavaScriptå¯¹è±¡å†è½¬æ¢æˆçœŸå® DOMã€‚è¿™ä¸ª JavaScriptå¯¹è±¡å°±æ˜¯æ‰€è°“çš„è™šæ‹Ÿ DOM è™šæ‹ŸDomæ¯” æ™®é€šDomæ›´å¿«å—ï¼Ÿé¦–æ¬¡æ¸²æŸ“ï¼Œ VitrualDomä¸å…·æœ‰ä»»ä½•ä¼˜åŠ¿ï¼Œç”šè‡³å®ƒè¦è¿›è¡Œæ›´å¤šçš„è®¡ç®—ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚ VitrualDomçš„ä¼˜åŠ¿åœ¨äº Reactçš„ Diffç®—æ³•å’Œæ‰¹å¤„ç†ç­–ç•¥ï¼Œ Reactåœ¨é¡µé¢æ›´æ–°ä¹‹å‰ï¼Œæå‰è®¡ç®—å¥½äº†å¦‚ä½•è¿›è¡Œæ›´æ–°å’Œæ¸²æŸ“ DOMã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹æˆ‘ä»¬åœ¨ç›´æ¥æ“ä½œ DOMæ—¶ï¼Œä¹Ÿæ˜¯å¯ä»¥è‡ªå·±åˆ¤æ–­å’Œå®ç°çš„ï¼Œä½†æ˜¯ä¸€å®šä¼šè€—è´¹éå¸¸å¤šçš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œè€Œä¸”å¾€å¾€æˆ‘ä»¬è‡ªå·±åšçš„æ˜¯ä¸å¦‚ Reactå¥½çš„ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ Reactå¸®åŠ©æˆ‘ä»¬â€æå‡äº†æ€§èƒ½â€ã€‚ è™šæ‹ŸDomä¸­çš„ $$typeofå±æ€§çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ä¸ºä»€ä¹ˆä»£ç ä¸­ä¸€å®šè¦å¼•å…¥ Reactï¼ŸJSXåªæ˜¯ä¸º React.createElement(component,props,...children)æ–¹æ³•æä¾›çš„è¯­æ³•ç³–ã€‚ æ‰€æœ‰çš„ JSXä»£ç æœ€åéƒ½ä¼šè½¬æ¢æˆ React.createElement(...)ï¼Œ Babelå¸®åŠ©æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹ã€‚ æ‰€ä»¥ä½¿ç”¨äº† JSXçš„ä»£ç éƒ½å¿…é¡»å¼•å…¥ Reactã€‚ ä¸ºä»€ä¹ˆ Reactç»„ä»¶é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Ÿbabelåœ¨ç¼–è¯‘æ—¶ä¼šåˆ¤æ–­ JSXä¸­ç»„ä»¶çš„é¦–å­—æ¯ï¼Œå½“é¦–å­—æ¯ä¸ºå°å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºåŸç”Ÿ DOMæ ‡ç­¾ï¼Œ createElementçš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå­—ç¬¦ä¸²ï¼›å½“é¦–å­—æ¯ä¸ºå¤§å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œ createElementçš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå¯¹è±¡ï¼› Reactåœ¨æ¸²æŸ“ çœŸå®Domæ—¶åšäº†å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ HOCåœ¨ä¸šåŠ¡åœºæ™¯ä¸­æœ‰å“ªäº›å®é™…åº”ç”¨åœºæ™¯ï¼Ÿ é«˜é˜¶ç»„ä»¶( HOC)å’Œ Mixinçš„å¼‚åŒç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ Hookæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ å¼‚æ­¥ç»„ä»¶æŒ‰éœ€åŠ è½½ Reloadableåº“ ï¼ˆimport â€˜xx.pageâ€™).then","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","slug":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CJavascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"å‰ç«¯é¢è¯•-JS äº‹ä»¶å¾ªç¯ EventLoop","slug":"å‰ç«¯é¢è¯•-äº‹ä»¶å¾ªç¯","date":"2019-12-31T16:00:00.000Z","updated":"2020-09-16T09:07:09.000Z","comments":true,"path":"2020/01/01/å‰ç«¯é¢è¯•-äº‹ä»¶å¾ªç¯/","link":"","permalink":"http://mariogogogo.github.io/2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/","excerpt":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†","text":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç† JS è¿è¡Œæœºåˆ¶æ¨è 2 åˆ†é’Ÿè§†é¢‘è®²çš„çœŸä¸é”™ äº‹ä»¶å¾ªç¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å°±æˆ‘ä»¬æ‰€çŸ¥ï¼Œæµè§ˆå™¨çš„ js æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šä¹Ÿåªæœ‰ä¸€ä¸ªä»£ç æ®µåœ¨æ‰§è¡Œï¼Œå¯æ˜¯æµè§ˆå™¨åˆèƒ½å¾ˆå¥½çš„å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…³äºæ‰§è¡Œä¸­çš„çº¿ç¨‹ï¼š ä¸»çº¿ç¨‹ï¼šä¹Ÿå°±æ˜¯ js å¼•æ“æ‰§è¡Œçš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œé¡µé¢æ¸²æŸ“ã€å‡½æ•°å¤„ç†éƒ½åœ¨è¿™ä¸ªä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚å·¥ä½œçº¿ç¨‹ï¼šä¹Ÿç§°å¹•åçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹å¯èƒ½å­˜åœ¨äºæµè§ˆå™¨æˆ– js å¼•æ“å†…ï¼Œä¸ä¸»çº¿ç¨‹æ˜¯åˆ†å¼€çš„ï¼Œå¤„ç†æ–‡ä»¶è¯»å–ã€ç½‘ç»œè¯·æ±‚ç­‰å¼‚æ­¥äº‹ä»¶ã€‚ äº†è§£ä¸‹é˜»å¡è¿˜æ˜¯éé˜»å¡å…³äº js é˜»å¡è¿˜æ˜¯éé˜»å¡çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸å¤Ÿåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†è§£ä¸‹åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡è¿˜æ˜¯éé˜»å¡çš„è§£é‡Šï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€æ®µæè¿°çš„éå¸¸å¥½ï¼Œå¼•ç”¨ä¸‹ åŒæ­¥é˜»å¡ï¼šå°æ˜ä¸€ç›´ç›¯ç€ä¸‹è½½è¿›åº¦æ¡ï¼Œåˆ° 100% çš„æ—¶å€™å°±å®Œæˆã€‚åŒæ­¥éé˜»å¡ï¼šå°æ˜æäº¤ä¸‹è½½ä»»åŠ¡åå°±å»å¹²åˆ«çš„ï¼Œæ¯è¿‡ä¸€æ®µæ—¶é—´å°±å»ç„ä¸€çœ¼è¿›åº¦æ¡ï¼Œçœ‹åˆ° 100% å°±å®Œæˆã€‚ï¼ˆè½®è¯¢ï¼‰å¼‚æ­¥é˜»å¡ï¼šå°æ˜æ¢äº†ä¸ªæœ‰ä¸‹è½½å®Œæˆé€šçŸ¥åŠŸèƒ½çš„è½¯ä»¶ï¼Œä¸‹è½½å®Œæˆå°±â€œå®â€ä¸€å£°ã€‚ä¸è¿‡å°æ˜ä»ç„¶ä¸€ç›´ç­‰å¾…â€œå®â€çš„å£°éŸ³ï¼ˆçœ‹èµ·æ¥å¾ˆå‚»ï¼Œä¸æ˜¯å—æœ€è ¢ï¼‰å¼‚æ­¥éé˜»å¡ï¼šä»ç„¶æ˜¯é‚£ä¸ªä¼šâ€œå®â€ä¸€å£°çš„ä¸‹è½½è½¯ä»¶ï¼Œå°æ˜æäº¤ä¸‹è½½ä»»åŠ¡åå°±å»å¹²åˆ«çš„ï¼Œå¬åˆ°â€œå®â€çš„ä¸€å£°å°±çŸ¥é“å®Œæˆäº†ã€‚ï¼ˆæœ€æœºæ™ºï¼‰ ä»»åŠ¡é˜Ÿåˆ—åŒæ­¥ä»»åŠ¡ä¼˜å…ˆäºå¼‚æ­¥ä»»åŠ¡ã€‚ åœ¨åŒæ­¥é˜Ÿåˆ—è¢«æ‰§è¡Œå®Œä¹‹å‰ï¼Œä»»ä½•å¼‚æ­¥çš„æ“ä½œéƒ½ä¸ä¼šè¢«æ‰§è¡Œ åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ è¿è¡Œæœºåˆ¶1234for(vari=0;i&lt;4;i++)&lt;setTimeout(function () [console.log(i);), 1000); æ¶‰åŠå¼‚æ­¥é˜Ÿåˆ—æ¶‰åŠçš„æ—¶é—´ï¼Œæµè§ˆå™¨å‘ç° settimeout ä¸ä¼šé©¬ä¸Šæ”¾åˆ°è¿è¡Œæ ˆé‡Œå»ï¼Œfor å¾ªç¯ä½“æ‰§è¡Œå®Œæ‰å»æ‰§è¡Œå¼‚æ­¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥é˜Ÿåˆ—æ²¡æœ‰åˆ°æ—¶é—´å»æ”¶ç¼– settimeoutï¼Œå†ç­‰å¾…äº‹ä»¶å¾ªç¯é‡Œå¤„ç† Event Loop äº‹ä»¶å¾ªç¯ è¿è¡Œæ ˆè¿è¡Œçš„æ˜¯åŒæ­¥ä»»åŠ¡ã€‚ æµè§ˆå™¨è¯†åˆ«äº†äº‹ä»¶æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä»–ä¸ä¼šæŠŠä»–æ”¾åœ¨è¿è¡Œæ ˆé‡Œï¼Œè€Œæ˜¯æ‹¿èµ°ã€‚ æ‹¿èµ°äº†ä¹‹åä¹Ÿä¸æ˜¯ç«‹é©¬æ”¾åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä»¥åï¼Œå†æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ã€‚ è¿è¡Œæ ˆé‡Œæ²¡æœ‰ä»»åŠ¡äº†ï¼Œå°±å¼€å§‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚ æ‰§è¡Œå®Œåå¦‚æœè¿è¡Œæ ˆé‡Œæ²¡æœ‰ä»»åŠ¡äº†ï¼Œå†ç›‘å¬å¼‚æ­¥é˜Ÿåˆ—ã€‚ è¿™ä¸ªå¾ªç¯çš„è¿‡ç¨‹å°±æ˜¯ EventLoop å¼‚æ­¥ä»»åŠ¡setTimeout å’Œ setIntervalDOM äº‹ä»¶Promise 12345678910for (var i = 0; i &lt; 4; i++) &#123; setTimeout(function() &#123; console.log(i); &#125;, 1000); console.log(&quot;one:&quot; + i); setTimeout(function() &#123; console.log(i + 1); &#125;, 0); console.log(&quot;two:&quot; + (i + 1));&#125; async/await åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ ï¼Ÿasync/awaitï¼š è¿™å“¥ä¿©ä¸ªå…¶å®æ˜¯ Promise å’Œ Generator çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒä»¬è½¬æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ Promise 12345678910async function async1() &#123; console.log(&quot;async1 start&quot;); await async2(); console.log(&quot;async1 end&quot;);&#125;// ç­‰åŒäºä¸‹é¢async function async1() &#123; console.log(&quot;async1 start&quot;); Promise.resolve(async2()).then(() =&gt; console.log(&quot;async1 end&quot;));&#125; åˆ†æä¸€é“é¢˜123456789101112131415161718192021222324252627282930313233343536373839404142const p = new Promise((reslove, reject) =&gt; &#123; console.log(&quot;4&quot;); reslove(&quot;5&quot;);&#125;);function fun1() &#123; console.log(&quot;1&quot;);&#125;function fun2() &#123; setTimeout(() =&gt; &#123; console.log(&quot;2&quot;); &#125;, 0); fun1(); console.log(&quot;3&quot;); p.then((res) =&gt; &#123; fun3(); console.log(res); &#125;).then(() =&gt; &#123; console.log(&quot;6&quot;); &#125;);&#125;async function fun3() &#123; console.log(&quot;7&quot;); await fun4(); console.log(&quot;9&quot;);&#125;function fun4() &#123; setTimeout(() =&gt; &#123; console.log(&quot;8&quot;); &#125;, 3000); console.log(&quot;10&quot;);&#125;setTimeout(() =&gt; &#123; fun2();&#125;, 1000);console.log(&quot;0&quot;);// 4 0 1 3 7 10 5 9 6 2 8 åˆ†æå¦‚ä¸‹æ‰§è¡Œç¬¬ä¸€æ¡è¯­å¥ new Promise å‡½æ•°ä¸»åŠ¨è§¦å‘æ‰“å°â€™4â€™ èµ°åˆ°åº•éƒ¨çš„ setTimeout é‡åˆ° fn2()æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ‰§è¡Œâ€™0â€™ è°ƒç”¨æ ˆæ¸…ç©ºï¼Œæ‰§è¡Œ fn2()å‡½æ•°ï¼Œé‡åˆ° etTimeout ç»§ç»­æŠŠé‡Œé¢çš„å‡½æ•°æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ— æ‰§è¡Œ fun1()ï¼Œæ‰“å°â€™1â€™ï¼Œå¼¹å‡º fun1 æ‰§è¡Œâ€™3â€™ 6.é‡åˆ° then()æ”¾åˆ°å¾®ä»»åŠ¡ä¸­å»ï¼Œ è°ƒç”¨æ ˆåˆæ¸…ç©ºäº†ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ä¸­çš„é˜Ÿåˆ—ï¼Œfun3()æ‰§è¡Œï¼Œæ‰“å°â€™7â€™ é‡åˆ° awai ä»»åŠ¡è¿›å»æ‰§è¡Œï¼Œåˆé‡åˆ° setTimeoutï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ’é˜Ÿâ€™8â€™, æ‰§è¡Œâ€™10â€˜ å›åˆ°åˆšæ‰çš„åœ°æ–¹æ‰§è¡Œ console.log(res)ï¼Œæ‰“å°â€™5â€˜ æ‰§è¡Œâ€™9â€™,ç»§ç»­æ‰§è¡Œç¬¬äºŒä¸ª then æ‰“å°â€˜6â€™ 11.è°ƒç”¨æ ˆæ¸…ç©ºï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ¸…ç©ºï¼Œæœ€åæ‰§è¡Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„â€˜2â€™ï¼Œâ€˜8â€™ ä¸ºä»€ä¹ˆ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Ÿå•çº¿ç¨‹æ„æ€å°±æ˜¯è¯´åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚é‚£è¿™æ ·çš„è¯æ•ˆç‡ä¸æ˜¯å¾ˆä½ï¼Ÿä¹Ÿæ²¡æœ‰å•¦ï¼Œå…¶å® javascript çš„å•çº¿ç¨‹ç‰¹ç‚¹æ˜¯è·Ÿä»–çš„ç”¨é€”æœ‰å…³çš„ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScript çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œ DOMã€‚å‡å¦‚ä¸æ˜¯å•çº¿ç¨‹çš„è¯ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹å½“æˆ‘ä»¬åœ¨ç»™æŸä¸ª DOM èŠ‚ç‚¹å¢åŠ å†…å®¹çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨åˆ é™¤è¿™ä¸ª DOM èŠ‚ç‚¹çš„å†…å®¹ï¼Œé‚£è¿˜å¾—äº†ï¼Œé‚£ä¸æ˜¯ä¹±å¥—äº†å—ã€‚æ‰€ä»¥ javascript åªèƒ½æ˜¯å•çº¿ç¨‹æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚ æ€»ç»“ï¼š ç†è§£ js å•çº¿ç¨‹çš„æ¦‚å¿µ ä¸€ä¸ªæ—¶é—´åªèƒ½å¹²ä¸€ä»¶äº‹ç†è§£ä»»åŠ¡é˜Ÿåˆ—EventLoopå“ªäº›ä¼šè¢«æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—çš„æ—¶æœº","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","slug":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CJavascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"å‰ç«¯é¢è¯•-ç®—æ³•","slug":"å‰ç«¯é¢è¯•-ç®—æ³•","date":"2019-12-31T16:00:00.000Z","updated":"2020-09-16T09:07:10.000Z","comments":true,"path":"2020/01/01/å‰ç«¯é¢è¯•-ç®—æ³•/","link":"","permalink":"http://mariogogogo.github.io/2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-%E7%AE%97%E6%B3%95/","excerpt":"æƒ³å­¦å¥½å‰ç«¯ï¼Œå…ˆç»ƒå¥½å†…åŠŸï¼Œåªæœ‰å†…åŠŸæ·±åšè€…ï¼Œå‰ç«¯ä¹‹è·¯æ‰ä¼šèµ°å¾—æ›´è¿œã€‚","text":"æƒ³å­¦å¥½å‰ç«¯ï¼Œå…ˆç»ƒå¥½å†…åŠŸï¼Œåªæœ‰å†…åŠŸæ·±åšè€…ï¼Œå‰ç«¯ä¹‹è·¯æ‰ä¼šèµ°å¾—æ›´è¿œã€‚ é€‰æ‹©æ’åºåŸºæœ¬æ€æƒ³1.é»˜è®¤ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€å°å€¼ï¼Œ 2.å†…å¾ªç¯ä»ç¬¬äºŒä¸ªï¼ˆi+1ï¼‰å…ƒç´ å¼€å§‹éå†æ‰¾åˆ°æ¯”ç¬¬ä¸€ä¸ªå…ƒç´ å°çš„ï¼Œè°ƒæ¢ä½ç½® 3.ç»§ç»­å¾ªç¯ ç‰¹ç‚¹å°±æ˜¯æœ€å¿«æ‰¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼ ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839/** * åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ * @param &#123;*&#125; array */function checkArray(array) &#123; return Array.isArray(array);&#125;/** * ä½ç½®äº¤æ¢ * @param &#123;*&#125; array * @param &#123;*&#125; left * @param &#123;*&#125; right */function swap(array, left, right) &#123; if (left &gt; array.length - 1 || right &gt; array.length - 1) &#123; return array; &#125; [ array[left], array[right] ] = [ array[right], array[left] ];&#125;/** * é€‰æ‹©æ’åº * ä¸æ–­çš„ä»å·¦è¾¹ä½ç½®åæ‰¾æœ€å°å€¼ * ç‰¹ç‚¹ç¬¬ä¸€è½®æ’åºå°±å·²ç»æ‰¾åˆ°äº†æœ€å°å€¼ */function selection(arr) &#123; if (!checkArray(arr)) return; for (let i = 0; i &lt; arr.length - 1; i++) &#123; //åˆå§‹æœ€å°å€¼ æœ€å°å€¼å¾€å·¦æ’ï¼Œ let miniIndex = i; // æ¯æ¬¡æ’ä½ä¸€ä¸ª i+1ä½ç½®ç»§ç»­æ’åˆ— for (let j = i + 1; j &lt; arr.length; j++) &#123; minIndex = arr[j] &lt; arr[minIndex] ? j : minIndex; &#125; swap(arr, i, miniIndex); &#125; return arr;&#125;console.log(selection([ 2, 5, 6, 10, 2, 8 ])); å†’æ³¡æ’åºåŸºæœ¬æ€æƒ³1.ä¾æ¬¡æ¯”è¾ƒå·¦å³ç›¸é‚»2ä¸ªä½ç½®å¤§å°ï¼Œ 2.å¦‚æœå¤§å°±æ¢ä¸ªä½ç½®ç»§ç»­æ¯”è¾ƒã€‚ 3.å¤–å¾ªç¯æ¯”è¾ƒiæ˜¯æ•°ç»„é•¿åº¦ é€’å‡â€“ï¼Œè¿™æ ·å†…å¾ªç¯æ¯æ¬¡å°±ç¼©å°æ¯”è¾ƒèŒƒå›´ èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼š1.æŸ¥æ‰¾æ•°ç»„é—´æœ€å¤§å·®å€¼ 2ã€‚å¥‡å¶æ’åº è®¾ç½®2ä¸ªæ¸¸æ ‡ åˆ†åˆ«æŒ‡å‘å¥‡ å¶æ¸¸æ ‡ ä»£ç å®ç°123456789101112131415161718/** * å†’æ³¡æ’åº * ç‰¹ç‚¹ç¬¬ä¸€è½®æ’åºå°±èƒ½æ‰¾åˆ°æœ€å³è¾¹çš„æœ€å¤§å€¼ */let a = [ 5, 4, 2, 1 ];function bubble(arr) &#123; if (!checkArray(arr)) return; for (let i = arr.length - 1; i &gt; 0; i--) &#123; // ä¸‹é¢çš„iæ˜¯ä½ ä¸‹æ¬¡è¦éå†çš„æœ€å¤§è¾¹ç•Œ for (let j = 0; j &lt; i; j++) &#123; if (arr[j] &gt; arr[j + 1]) &#123; swap(arr, j, j + 1); &#125; &#125; &#125; return arr;&#125;console.log(bubble(a)); æ’å…¥æ’åºåŸºæœ¬æ€æƒ³1.æ’åºé»˜è®¤ä»ç¬¬äºŒä¸ªå¼€å§‹éå† 2.æ¯ä¸€æ¬¡éå†åºå·ä¹‹å‰çš„å…ƒç´ å…¨éƒ¨éå†ä¸€éï¼Œæ¯”è¾ƒå¤§å°ï¼Œäº¤æ¢ä½ç½® ä»£ç å®ç°1234567891011121314151617181920212223242526272829/** * æ’å…¥æ’åº * é€‚åˆå°å‹æ•°ç»„ ç®—æ³•æ¯”é€‰æ‹©å’Œå†’æ³¡æ€§èƒ½å¥½ * @param &#123;*&#125; array */function insertionSort(array) &#123; const &#123; length &#125; = array; let temp; //æ³¨æ„æ˜¯ä»ç¬¬äºŒä¸ªä½ç½®å¼€å§‹ for (let i = 1; i &lt; length; i++) &#123; let j = i; temp = array[i]; //å‚¨å­˜ä¸€ä¸ªä¸´æ—¶å˜é‡ //æ¯ä¸€æ¬¡éƒ½æ¯”è¾ƒå½“å‰ç´¢å¼•ä¹‹å‰çš„åºåˆ—å…¨éƒ½æ¯”è¾ƒä¸€é //æ¯”å¦‚ã€3ï¼Œ2ï¼Œ1ï¼Œ5ã€‘ï¼Œå½“å‰1 è¦è·Ÿ 2 3éƒ½æ¯”è¾ƒä¸€é ä¸‹ä¸€æ¬¡5 è·Ÿ 3ï¼Œ2ï¼Œ1 éƒ½æ¯”è¾ƒä¸€é //array[j - 1] æ˜¯å‰é¢ä¸€ä¸ªæ•° tempåé¢ä¸€ä¸ªæ•° while (j &gt; 0 &amp;&amp; array[j - 1] &gt; temp) &#123; array[j] = array[j - 1]; j--; &#125; array[j] = temp; &#125; return array;&#125;const array = [ 3, 5, 1, 4, 2 ];console.log(insertionSort(array)); å †æ’åºåŸºæœ¬æ€æƒ³æ„é€ ä¸€ä¸ªå¤§é¡¶å †ï¼Œå–å †é¡¶ä¹Ÿå°±æ˜¯æœ€å¤§å€¼ å†å°†å‰©ä¸‹çš„æ•°å­—æ„å»ºä¸€ä¸ªå¤§é¡¶å †ï¼Œå–å †é¡¶æ•°å­— é‡å¤ä»¥ä¸Šæ“ä½œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªä»å¤§åˆ°å°çš„æ•°ç»„ ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637const array = [4, 6, 8, 5, 9, 1, 2, 5, 3, 2];// å †æ’åºfunction heapSort(array)&#123; console.time(&#x27;å †æ’åºè€—æ—¶&#x27;); // åˆå§‹åŒ–å¤§é¡¶å †ï¼Œä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹ for (let i = Math.floor(array.length / 2 - 1); i &gt;= 0; i--) &#123; heapify(array, i, array.length); &#125; // æ’åºï¼Œæ¯ä¸€æ¬¡ for å¾ªç¯æ‰¾å‡ºä¸€ä¸ªå½“å‰æœ€å¤§å€¼ï¼Œæ•°ç»„é•¿åº¦å‡ä¸€ for (let i = Math.floor(array.length - 1); i &gt; 0; i--) &#123; // æ ¹èŠ‚ç‚¹ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢ swap(array, 0, i); // ä»æ ¹èŠ‚ç‚¹å¼€å§‹è°ƒæ•´ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªç»“ç‚¹å·²ç»ä¸ºå½“å‰æœ€å¤§å€¼ï¼Œä¸éœ€è¦å†å‚ä¸æ¯”è¾ƒï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º iï¼Œå³æ¯”è¾ƒåˆ°æœ€åä¸€ä¸ªç»“ç‚¹å‰ä¸€ä¸ªå³å¯ heapify(array, 0, i); &#125; console.timeEnd(&#x27;å †æ’åºè€—æ—¶&#x27;); return array;&#125;;//åˆ›å»ºä¸€ä¸ªå¤§é¡¶å †const heapify = (array, i, length) =&gt; &#123; let temp = array[i]; // å½“å‰çˆ¶èŠ‚ç‚¹ // j &lt; length çš„ç›®çš„æ˜¯å¯¹ç»“ç‚¹ i ä»¥ä¸‹çš„ç»“ç‚¹å…¨éƒ¨åšé¡ºåºè°ƒæ•´ for (let j = 2 * i + 1; j &lt; length; j = 2 * j + 1) &#123; temp = array[i]; // å°† array[i] å–å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹ç›¸å½“äºæ‰¾åˆ° array[i] åº”å¤„äºçš„ä½ç½® if (j + 1 &lt; length &amp;&amp; array[j] &lt; array[j + 1]) &#123; j++; // æ‰¾åˆ°ä¸¤ä¸ªå­©å­ä¸­è¾ƒå¤§çš„ä¸€ä¸ªï¼Œå†ä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒ &#125; if (temp &lt; array[j]) &#123; swap(array, i, j); // å¦‚æœçˆ¶èŠ‚ç‚¹å°äºå­èŠ‚ç‚¹:äº¤æ¢ï¼›å¦åˆ™è·³å‡º i = j; // äº¤æ¢åï¼Œtemp çš„ä¸‹æ ‡å˜ä¸º j &#125; else &#123; break; &#125; &#125;&#125;;console.log(heapSort(array)); å¸Œå°”æ’åºåŸºæœ¬æ€æƒ³ å¸Œå°”æ’åºæ˜¯å¯¹ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¼˜åŒ–å’Œå‡çº§ å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—ã€‚ åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ å¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•åŸºæœ¬æœ‰åºæ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ ä»£ç å®ç°12345678910111213141516171819202122let arr = [ 98, 42, 25, 54, 15, 3, 25, 72, 41, 10, 121 ];function shellSort(array) &#123; //åˆå§‹åŒ–æ­¥é•¿ arré•¿åº¦çš„ä¸€åŠ let gap = Math.floor(array.length / 2); while (1 &lt;= gap) &#123; // æŠŠè·ç¦»ä¸º gap çš„å…ƒç´ ç¼–ä¸ºä¸€ä¸ªç»„ï¼Œæ‰«ææ‰€æœ‰ç»„ for (let i = gap; i &lt; array.length; i++) &#123; let j = 0; let temp = array[i]; //ä¾æ¬¡3, 25, 72, 41, 10, 121 // å¯¹è·ç¦»ä¸º gap çš„å…ƒç´ ç»„è¿›è¡Œæ’åº for (j = i - gap; j &gt;= 0 &amp;&amp; temp &lt; array[j]; j -= gap) &#123; //å¦‚æœå³è¾¹æ¯”å·¦è¾¹å°åˆ™äº¤æ¢ä½ç½® swap(array, j, j + gap); &#125; &#125; gap = Math.floor(gap / 2); // å‡å°å¢é‡ &#125; return array;&#125;console.log(shellSort(arr)); å½’å¹¶æ’åºåŸºæœ¬æ€æƒ³ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536/** * å½’å¹¶æ’åº * æ€æƒ³å°†åºåˆ—ä¸­å¸¦åºå·æ•°å­—åˆ†æˆè‹¥å¹²ç»„ï¼Œæ¯ä¸ªæ•°å­—åˆ†ä¸€ç»„ * å°†è‹¥å¹²ç»„22 åˆå¹¶ åˆå¹¶åä¿è¯æœ‰åº * é‡å¤ç¬¬äºŒæ­¥ç›´åˆ°åªå‰©ä¸€ç»„ æ’åºå®Œæˆ */const arr = [ 19, 97, 09, 17, 01, 08, 02 ];function mergeSort(array) &#123; // åˆ¤æ–­æ•°ç»„é•¿åº¦1 è¡¨ç¤ºå·²ç»åˆ†ç»„ if (array.length &gt; 1) &#123; const &#123; length &#125; = array; //æ‰¾ä¸­é—´å…ƒç´  const middle = Math.floor(length / 2); //åˆ†å·¦å³äºŒç»„ const left = mergeSort(array.slice(0, middle)); const right = mergeSort(array.slice(middle, length)); array = merge(left, right); &#125; return array;&#125;function merge(left, right) &#123; let i = 0; let j = 0; const result = []; while (i &lt; left.length &amp;&amp; j &lt; right.length) &#123; //åˆ¤æ–­æ¯ä¸€ä¸ªæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ å·¦è¾¹å¤§è¿˜æ˜¯å³è¾¹å¤§ æ¯”å¦‚ [3,4,5] [1,2] //æ¯”è¾ƒåæŠŠé‚£ä¸ªå¤§çš„æ•°ç»„åé¢çš„æ•°å­—ä¹Ÿä¸€åŒåŠ å…¥æ–°æ•°ç»„ä¸­ result.push(left[i] &lt; right[j] ? left[i++] : right[j++]); &#125; return result.concat(i &lt; left.length ? left.slice(i) : right.slice(j));&#125;console.log(mergeSort(arr)); å¿«é€Ÿæ’åºåŸºæœ¬æ€æƒ³ ä»ä¸­é—´æ•°ç»„æ‰¾ä¸€ä¸ªå€¼ è®¾è®¡2ä¸ªåŒæŒ‡é’ˆå·¦å³å„ä¸€ä¸ª å·¦è¾¹æ‰¾æ¯”ä¸­é—´å€¼å°çš„å…ƒç´ ï¼Œå³è¾¹æ‰¾æ¯”å®ƒå¤§çš„å…ƒç´  äº¤æ¢ä»–ä»¬ å·¦è¾¹è¶…è¿‡å³è¾¹åˆ™åœæ­¢æ¯”è¾ƒ ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * å¿«é€Ÿæ’åº * ä»ä¸­é—´æ•°ç»„æ‰¾ä¸€ä¸ªå€¼ * è®¾è®¡2ä¸ªåŒæŒ‡é’ˆå·¦å³å„ä¸€ä¸ª * å·¦è¾¹æ‰¾æ¯”ä¸­é—´å€¼å°çš„å…ƒç´ ï¼Œå³è¾¹æ‰¾æ¯”å®ƒå¤§çš„å…ƒç´  äº¤æ¢ä»–ä»¬ * ç›´åˆ°å·¦è¶…è¿‡äº†å³è¾¹ */function quickSort(array) &#123; //ä¼ æ•°ç»„çš„ä¸‹æ ‡ return quick(array, 0, array.length - 1);&#125;function quick(array, left, right) &#123; let index; if (array.length &gt; 1) &#123; index = partition(array, left, right); if (left &lt; index - 1) &#123; quick(array, left, index - 1); //[3,5,1,2,4] &#125; if (index &lt; right) &#123; quick(array, index, right); &#125; &#125; return array;&#125;function partition(array, left, right) &#123; // æ‰¾åˆ°ä¸­å¿ƒè½´çš„æ•°å­— const pivot = array[Math.floor((right + left) / 2)]; // åŒæŒ‡é’ˆ let i = left; let j = right; // æ»¡è¶³åŒæŒ‡é’ˆé‡åˆå°±åœæ­¢ while (i &lt;= j) &#123; // æ‰¾åˆ°æ¯”ä¸­å¿ƒè½´å°çš„æ•°å­—åˆ™æ”¾å·¦è¾¹ï¼Œç»§ç»­++ while (array[i] &lt; pivot) &#123; i++; &#125; // æ‰¾åˆ°æ¯”ä¸­å¿ƒè½´å¤§çš„æ•°å­—åˆ™æ”¾å³è¾¹ï¼Œç»§ç»­-- while (array[j] &gt; pivot) &#123; j--; &#125; if (i &lt;= j) &#123; swap(array, i, j); i++; j--; &#125; &#125; return i;&#125;console.log(quickSort([ 3, 5, 1, 6, 4, 7, 2 ])); æ¡¶æ’åºåŸºæœ¬æ€æƒ³ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * æ¡¶æ’åº */function bucketSort(array, bucketSize = 5) &#123; if (array.length &lt; 2) return array; const bucket = createBuckets(array, bucketSize); return sortBuckets(buckets);&#125;function createBuckets(array, bucketSize) &#123; //åˆå§‹åŒ–æœ€å¤§å€¼æœ€å°å€¼ let miniValue = array[0], maxValue = array[0]; // å¯»æ‰¾æœ€å¤§å€¼æœ€å°å€¼; for (let i = 0; i &lt; array.length; i++) &#123; if (array[i] &lt; miniValue) &#123; miniValue = array[i]; &#125; else if (array[i] &gt; maxValue) &#123; maxValue = array[i]; &#125; &#125; //åˆ†é…æ¯ä¸€ä¸ªæ¡¶çš„å®¹é‡å¤§å° const bucketCount = Math.floor((maxValue - miniValue) / bucketSize + 1); const buckets = []; //åˆ†é…æ¡¶ for (let i = 0; i &lt; bucketCount; i++) &#123; buckets[i] = []; &#125; // æŠŠæ•°ç»„ä¸­çš„å€¼æ”¾å…¥ç›¸åº”çš„æ¡¶ä¸­ for (let i = 0; i &lt; array.length; i++) &#123; //è®¡ç®—å°†å…ƒç´ æ”¾åˆ°å“ªä¸ªæ¡¶ä¸­ const bucketIndex = Math.floor((array[i] - miniValue) / bucketSize); buckets[bucketIndex].push(array[i]); &#125; return buckets;&#125;/** * æ¯ä¸€ä¸ªæ¡¶æ’åº * @param &#123;*&#125; buckets */function sortBuckets(buckets) &#123; //åˆå§‹åŒ–ä¸€ä¸ªæ–°æ•°ç»„ const sortedArray = []; for (let i = 0; i &lt; buckets.length; i++) &#123; if (buckets[i] != null) &#123; //æ’å…¥æ’åº insertionSort(buckets[i]); //åŠ å…¥æ–°æ•°ç»„ sortedArray.push(...buckets[i]); &#125; &#125; return sortedArray;&#125; è®¡æ•°æ’åºåŸºæœ¬æ€æƒ³ æ±‚æœ€å¤§å€¼å°±çŸ¥é“éœ€è¦çš„æ•°ç»„æœ‰å¤šé•¿ï¼ˆéå¸¸æ¶ˆè€—å†…å­˜ï¼Œå¼€è¾Ÿæ•°ç»„åœ¨å†…å­˜ç©ºé—´å¤§å°ï¼‰ æŠŠæ¯ä¸€ä¸ªå€¼ä½œä¸ºä¸‹æ ‡æ”¾å…¥å¯¹åº”countsæ•°ç»„ä¸­ï¼Œå‡ºç°çš„æ¬¡æ•°ä½œä¸ºå€¼,æ¬¡æ•°è¶Šå¤šå€¼è¶Šå¤§ å¾ªç¯countsæŠŠä¸‹æ ‡æŠŠå€¼éƒ½æ”¾å…¥arrayæ•°ç»„ä¸­ï¼Œè¿”å›arrayå°±æ˜¯æ’å¥½åºçš„æ•°ç»„ ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * è®¡æ•°æ’åº */function findMaxValue(array) &#123; let max = array[0]; for (let i = 0; i &lt; array.length; i++) &#123; if (array[i] &gt; max) &#123; max = array[i]; &#125; &#125; return max;&#125;function countingSort(array) &#123; if (array.length &lt; 2) &#123; return array; &#125; const maxValue = findMaxValue(array); //åˆ›å»ºè®¡æ•°æ•°ç»„ æ•°ç»„ä»0å¼€å§‹ æ‰€ä»¥è¦+1 const counts = new Array(maxValue + 1); array.forEach((item) =&gt; &#123; //itemæ˜¯ä¸‹æ ‡å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆå§‹ä¸º0 if (!counts[item]) &#123; counts[item] = 0; &#125; //æ¥ç€+1 æ¬¡ counts[item]++; &#125;); // ç´¢å¼• let sortedIndex = 0; counts.forEach((item, i) =&gt; &#123; //itemæ˜¯å‡ºç°çš„æ¬¡æ•°ç›´åˆ°å‰ªåˆ°0æ¬¡ å¦‚ã€1ï¼Œ2ï¼Œ2ã€‘ while (item &gt; 0) &#123; array[sortedIndex++] = i; item--; &#125; &#125;); return array;&#125;console.log(countingSort([ 4, 3, 2, 1 ])); åŸºæ•°æ’åºåŸºæœ¬æ€æƒ³å…¶å®å°±æ˜¯æ¡¶æ€æƒ³çš„ä¸€ç§ å…ˆæ’ä¸ªä½æ•°ï¼Œåä½æ•° ç™¾ä½æ•° åƒä½æ•°ã€‚ã€‚æ”¾å…¥æ¡¶é‡Œ å¦‚ä½•å»åˆ¤æ–­ä¸ªä½æ•° åä½æ•° ç™¾ä½æ•° æ¯”å¦‚ 421 ä¸ªä½æ•°æ˜¯1 ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å–æ¨¡ï¼Œ 421 /1 = 42 ä½™æ•°å°±æ˜¯1ï¼Œåä½æ•° 421 /10 ä½™æ•°æ˜¯ 2 ç™¾ä½æ•° 421 /100 ä½™æ•°æ˜¯4 ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485const array = [ 19, 240, 100, 532, 305, 430, 124 ];function findMinValue(array) &#123; ... return min;&#125;function findMaxValue(array) &#123; ... return max;&#125;/** * åˆ†å¸ƒå¼æ’åºç®—æ³• * æ ¹æ®è¿›åˆ¶å»é€‰æ‹© * @param &#123;&#x27;*&#x27;&#125; array * @param &#123;*&#125; radixBase 10è¿›åˆ¶ å°±å‚æ•°10 8è¿›åˆ¶å°±é€‰8 */function radixSort(array, radixBase = 10) &#123; if (array.length &lt; 2) &#123; return array; &#125; const minValue = findMinValue(array); const maxValue = findMaxValue(array); //ä»æœ€åä¸€ä½å¼€å§‹æ’åºæ‰€æœ‰æ•° let significantDigit = 1; // åç»­è¿›è¡Œç¬¬äºŒä¸ªæœ‰æ•ˆä½æ•°æ’åº ç¬¬ä¸‰ä¸ªæœ‰æ•ˆä½æ•°æ’åº ç›´åˆ°æ²¡æœ‰å¾…æ’åºçš„æœ‰æ•ˆä½ // æ¯”å¦‚ ï¼ˆ999 - 900ï¼‰ /1 /10 /100 ï¼ˆ99-19ï¼‰ /1 /10 ä½†æ˜¯/100å°±ä¸è¡Œäº† while ((maxValue - minValue) / significantDigit &gt;= 1) &#123; //è·å–æ¯ä¸€æ¬¡æœ‰æ•ˆä½åæ’å¥½çš„æ•°ç»„ï¼Œç›´åˆ°æœ€åæ²¡æœ‰æœ‰æ•ˆä½ array = countingSortForRadix(array, radixBase, significantDigit, minValue); significantDigit *= radixBase; &#125; return array;&#125;function countingSortForRadix(array, radixBase, significantDigit, minValue) &#123; let bucketsIndex; // åŸºæ•°åˆå§‹åŒ–æ¡¶ const buckets = []; // åˆ›å»ºä¸´æ—¶æ•°ç»„ ä½œç”¨ï¼šå¸®åŠ©åé¢ç§»å€¼åˆ°åŸå§‹æ•°ç»„ä¸­ const tmp = []; for (let i = 0; i &lt; radixBase; i++) &#123; buckets[i] = 0; &#125; //[ 421, 240, 100, 532, 305, 430, 124 ] //ç¬¬äºŒæ¬¡ ã€240,100,430,421,532,124,305ã€‘ for (let i = 0; i &lt; array.length; i++) &#123; //è®¡ç®—æœ‰æ•ˆä½è¿›è¡Œè®¡æ•°æ’åº bucketsIndex = Math.floor(((array[i] - minValue) / significantDigit) % radixBase); //ç´¯è®¡å‡ºç°çš„æ¬¡æ•° buckets[bucketsIndex]++; // ==== 0 1 2 3 4 5.... // 1æ¬¡ 2æ¬¡ 0æ¬¡ã€‚ã€‚ã€‚ &#125; // ç¬¬ä¸€æ¬¡å¾ªç¯ä¸ªä½æ•°å‡ºç°çš„æ¬¡æ•° // 0:3 // 1:1 // 2:1 // 3:0 // 4:1 // 5:1 // 6:0 // 7:0 // 8:0 // 9:0 // ç´¯ç§¯ç»“æœå¾—åˆ°è®¡æ•°å€¼ for (let i = 1; i &lt; radixBase; i++) &#123; buckets[i] += buckets[i - 1]; &#125; console.log(&#x27;ç´¯ç§¯ç»“æœå¾—åˆ°è®¡æ•°å€¼&#x27;, buckets); // å€’å™é‡æ–°æ”¾å…¥ä¸´æ—¶æ•°ç»„; for (let i = array.length - 1; i &gt;= 0; i--) &#123; //è®¡ç®—æœ‰æ•ˆä½è¿›è¡Œè®¡æ•°æ’åº bucketsIndex = Math.floor(((array[i] - minValue) / significantDigit) % radixBase); //æ‰¾bucketsä¸­æœ‰æ•ˆä½å¯¹åº”çš„ä¸‹æ ‡ tmp[--buckets[bucketsIndex]] = array[i]; &#125; // æŠŠä¸´æ—¶æ•°ç»„æ–°æ’å¥½ç»™array return tmp;&#125;console.log(radixSort(array)); å‚è€ƒç®—æ³•ä¹‹ç¾ JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ç¬¬ä¸‰ç‰ˆ bilibiliç½‘ä¸Šæ•™ç¨‹","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","slug":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CJavascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"å‰ç«¯é¢è¯•-CSS ç›¸å…³","slug":"å‰ç«¯é¢è¯•-CSSç›¸å…³","date":"2019-12-31T16:00:00.000Z","updated":"2020-09-16T09:07:10.000Z","comments":true,"path":"2020/01/01/å‰ç«¯é¢è¯•-CSSç›¸å…³/","link":"","permalink":"http://mariogogogo.github.io/2020/01/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95-CSS%E7%9B%B8%E5%85%B3/","excerpt":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç†","text":"2020 æƒ³è·³æ§½ä¸€ä¸‹ï¼Œç›¸å…³é¢è¯•ç³»åˆ—æ–‡ç« æ¢³ç† CSS ç›’æ¨¡å‹æ ‡å‡†æ¨¡å‹å’Œ IE æ¨¡å‹ åŒºåˆ«æ ‡å‡†ç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹çš„å®½åº¦ï¼ˆcontentï¼‰+ border + padding + marginä½ç‰ˆæœ¬ IE ç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹å®½åº¦ï¼ˆcontent+border+paddingï¼‰+ margin css å¦‚ä½•è®¾ç½®è¿™ 2 ç§æ¨¡å‹box-sizingï¼šcontent-box æ ‡å‡†æ¨¡å‹ ï¼ˆé»˜è®¤ï¼‰box-sizingï¼šborder-box ie æ¨¡å‹ æ¯”å¦‚ï¼šå¯¹æ¯” CSS é€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼ŸCSS é€‰æ‹©ç¬¦ï¼š id é€‰æ‹©å™¨(#myid) ç±»é€‰æ‹©å™¨(.myclassname) æ ‡ç­¾é€‰æ‹©å™¨(div, h1, p) ç›¸é‚»é€‰æ‹©å™¨(h1 + p) å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰ åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰ é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰ å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel=â€externalâ€]ï¼‰ ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰ å¯ç»§æ‰¿çš„å±æ€§ï¼šfont-size, font-family, color ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼šborder, padding, margin, width, height ä¼˜å…ˆçº§ï¼ˆå°±è¿‘åŸåˆ™ï¼‰ï¼š!important &gt; [ id &gt; class &gt; tag ] !important æ¯”å†…è”ä¼˜å…ˆçº§é«˜ CSS3 æ–°å¢ä¼ªç±»æœ‰é‚£äº›?p:first-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ªå…ƒç´ p:last-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€åå…ƒç´ p:only-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„å…ƒç´ p:only-child é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ p:nth-child(2) é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ :enabled :disabled è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚:checked å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚ display æœ‰å“ªäº›å€¼ï¼Ÿ position çš„å€¼ï¼Ÿinlineï¼ˆé»˜è®¤ï¼‰â€“å†…è”noneâ€“éšè—blockâ€“å—æ˜¾ç¤ºtableâ€“è¡¨æ ¼æ˜¾ç¤ºlist-itemâ€“é¡¹ç›®åˆ—è¡¨inline-block staticï¼ˆé»˜è®¤ï¼‰ï¼šæŒ‰ç…§æ­£å¸¸æ–‡æ¡£æµè¿›è¡Œæ’åˆ—ï¼›relativeï¼ˆç›¸å¯¹å®šä½ï¼‰ï¼šä¸è„±ç¦»æ–‡æ¡£æµï¼Œå‚è€ƒè‡ªèº«é™æ€ä½ç½®é€šè¿‡ top, bottom, left, right å®šä½ï¼›absolute(ç»å¯¹å®šä½)ï¼šå‚è€ƒè·å…¶æœ€è¿‘ä¸€ä¸ªä¸ä¸º static çš„çˆ¶çº§å…ƒç´ é€šè¿‡ top, bottom, left, right å®šä½ï¼›fixed(å›ºå®šå®šä½)ï¼šæ‰€å›ºå®šçš„å‚ç…§å¯¹åƒæ˜¯å¯è§†çª—å£ã€‚ display:none ä¸ visibilityï¼šhidden çš„åŒºåˆ«ï¼Ÿdisplayï¼šnone ä¸æ˜¾ç¤ºå¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†åˆ†é…ç©ºé—´ï¼ˆå›æµ+é‡ç»˜ï¼‰ visibilityï¼šhidden éšè—å¯¹åº”å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ï¼ˆé‡ç»˜ï¼‰ position:fixed;åœ¨ android ä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ1234&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;/&gt; å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘ç‡æ˜¯ 60Hzï¼Œå³ 1 ç§’åˆ·æ–° 60 æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º 1/60ï¼Š1000ms ï¼ 16.7msã€‚ CSS å±æ€§ overflow å±æ€§å®šä¹‰æº¢å‡ºå…ƒç´ å†…å®¹åŒºçš„å†…å®¹ä¼šå¦‚ä½•å¤„ç†?å‚æ•°æ˜¯ scroll æ—¶å€™ï¼Œå¿…ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚å‚æ•°æ˜¯ auto æ—¶å€™ï¼Œå­å…ƒç´ å†…å®¹å¤§äºçˆ¶å…ƒç´ æ—¶å‡ºç°æ»šåŠ¨æ¡ã€‚å‚æ•°æ˜¯ visible æ—¶å€™ï¼Œæº¢å‡ºçš„å†…å®¹å‡ºç°åœ¨çˆ¶å…ƒç´ ä¹‹å¤–ã€‚å‚æ•°æ˜¯ hidden æ—¶å€™ï¼Œæº¢å‡ºéš JS å¦‚ä½•è·å–ç›’æ¨¡å‹çš„å®½å’Œé«˜dom.style.widht/height (åªé™å†…è”æ ·å¼çš„å®½å’Œé«˜ï¼‰ å¦‚æœä¸æ˜¯å†…è”å…ƒç´ å°±å–ä¸åˆ°å¯¹åº”çš„å€¼ ç„¶åæˆ‘ä»¬è¯•è¯•è¿™ä¸ªdom.currentStyle.width/height (æ¸²æŸ“ä»¥åå¾—åˆ°çš„å®½å’Œé«˜ï¼‰ åªæœ‰ ie æ”¯æŒwindow.getComputedStyle(dom).width/height è°·æ­Œç«ç‹æ”¯æŒ dom.getBoundClientRect().width/height éå¸¸é‡è¦ è®¡ç®—å…ƒç´ çš„ç»å¯¹ä½ç½® ï¼ˆè§†çª—å·¦ä¸Šè§’ç›¸å¯¹å…ƒç´ çš„ä½ç½®ï¼‰ æ€è€ƒä¸€ä¸ªé—®é¢˜ ä¸ºä»€ä¹ˆ bottom ä¸ left çš„å€¼ä¸ä¸€æ ·ï¼Ÿï¼Ÿ ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å  BFC è¾¹è·é‡å è§£å†³æ–¹æ¡ˆæ¦‚å¿µï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ è¾¹ç•Œé‡å æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªç›’å­(å¯èƒ½ç›¸é‚»ä¹Ÿå¯èƒ½åµŒå¥—)çš„ç›¸é‚»è¾¹ç•Œ(å…¶é—´æ²¡æœ‰ä»»ä½•éç©ºå†…å®¹ã€è¡¥ç™½ã€è¾¹æ¡†)é‡åˆåœ¨ä¸€èµ·è€Œå½¢æˆä¸€ä¸ªå•ä¸€è¾¹ç•Œã€‚ä¸¤ä¸ªæˆ–å¤šä¸ªå—çº§ç›’å­çš„å‚ç›´ç›¸é‚»è¾¹ç•Œä¼šé‡åˆï¼Œå®ƒä»¬çš„è¾¹ç•Œå®½åº¦æ˜¯ç›¸é‚»è¾¹ç•Œå®½åº¦ä¸­çš„æœ€å¤§å€¼ã€‚æ³¨æ„æ°´å¹³è¾¹ç•Œæ˜¯ä¸ä¼šé‡åˆçš„ã€‚ å…„å¼Ÿå…ƒç´ é‡å  å–æœ€å¤§å€¼ï¼ˆä¸Šä¸‹ï¼‰ç©ºå…ƒç´  è¾¹è·é‡å  åŸç† bfc è¿™ä¸ªå…ƒç´ çš„å‚ç›´æ–¹å‘çš„è¾¹è·ä¼šå‘ç”Ÿé‡å  bfc çš„åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨å…ƒç´ çš„åŒºåŸŸé‡å  ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰ bfc çš„é¡µé¢æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ å¤–é¢çš„å…ƒç´ ä¸ä¼šå½±å“é‡Œé¢çš„å…ƒç´  è®¡ç®— bfc é«˜åº¦çš„æ—¶å€™ æµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®— åˆ›å»º BFCfloat å€¼ä¸ä¸º none åªè¦åˆ›å»ºäº†æµ®åŠ¨å°±åˆ›å»ºäº† BFCoverflowï¼šhiddenposition ä¸æ˜¯ realtive æˆ–è€…display table flex BFC çš„ä½¿ç”¨åœºæ™¯ä¸€ç§æƒ…å†µ 123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;title&gt;&lt;/title&gt; &lt;style&gt; * &#123; margin: 0; padding: 0; &#125; #wrapper &#123; background: lightpink; overflow: hidden; &#125; #wrapper &gt; p &#123; margin: 5px auto 25px; background: green; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;wrapper&quot;&gt; &lt;p&gt;1&lt;/p&gt; &lt;div style=&quot;overflow: hidden;&quot;&gt; &lt;p&gt;2&lt;/p&gt; &lt;/div&gt; &lt;p&gt;3&lt;/p&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ç»™å­å…ƒç´ çš„å¢åŠ ä¸€ä¸ªçˆ¶çº§ï¼Œçˆ¶çº§è®¾ç½®overflow: hiddenå¯ä»¥è§£å†³è¿™ä¸ªä¸Šä¸‹è¾¹è·é‡å çš„é—®é¢˜ å¦ä¸€ç§æƒ…å†µ 1234567891011121314151617181920&lt;section class=&quot;float&quot;&gt; &lt;style&gt; .float &#123; background: red; &#125; .left &#123; float: left; width: 100px; height: 100px; background: #008000; &#125; .right &#123; height: 110px; background: peru; overflow: auto; &#125; &lt;/style&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt;&lt;/section&gt; åˆ›å»º bfc ä¹‹åçš„æ•ˆæœ ç¬¬ä¸‰ç§åœºæ™¯ 12345678910111213&lt;section class=&quot;float&quot;&gt; &lt;style&gt; .float &#123; background: hotpink; &#125; .left &#123; float: left; font-size: 22px; background: #008000; &#125; &lt;/style&gt; &lt;div class=&quot;left&quot;&gt;æµ®åŠ¨&lt;/div&gt;&lt;/section&gt; BFC å­å…ƒç´ æ—¢æ˜¯ float å…ƒç´ ä¹Ÿä¼šå‚ä¸é«˜åº¦è®¡ç®— å¦‚å›¾ï¼š æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­ æ°´å¹³å±…ä¸­1.1 è¡Œå†…å…ƒç´ 123.parent &#123; text-align: center;&#125; 1.2 å—çº§å…ƒç´ 1.2.1 å—çº§å…ƒç´ ä¸€èˆ¬å±…ä¸­æ–¹æ³•123.son &#123; margin: 0 auto;&#125; 1.2.2 å­å…ƒç´ å« floatfit-contentä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹çš„è¾ƒå¤§å€¼: 1.å›ºæœ‰çš„æœ€å°å®½åº¦ 2.å›ºæœ‰é¦–é€‰å®½åº¦ï¼ˆmax-contentï¼‰å’Œå¯ç”¨å®½åº¦ï¼ˆavailableï¼‰çš„è¾ƒå°å€¼ 12345678.parent &#123; width: fit-content; margin: 0 auto;&#125;.son &#123; foat: left;&#125; 1.2.3 Flex å¼¹æ€§ç›’å­1ï¼‰ flex 2012 ç‰ˆ 1234.parent &#123; display: flex; justify-content: center;&#125; 1.2.4 ç»å¯¹å®šä½1ï¼‰transform 12345.son &#123; position: absolute; left: 50%; transform: translate(-50%, 0);&#125; 2ï¼‰left: 50% 123456.son &#123; position: absolute; width: å®½åº¦; left: 50%; margin-left: -0.5*å®½åº¦&#125; 3ï¼‰left/right: 0 1234567.son &#123; position: absolute; width: å®½åº¦; left: 0; right: 0; margin: 0 auto;&#125; äºŒã€å‚ç›´å±…ä¸­2.1 è¡Œå†…å…ƒç´ 1234567.parent &#123; height: é«˜åº¦;&#125;.son &#123; line-height: é«˜åº¦;&#125; æ³¨ï¼šâ‘  å­å…ƒç´  line-height å€¼ä¸ºçˆ¶å…ƒç´  height å€¼ã€‚â‘¡ å•è¡Œæ–‡æœ¬ã€‚ 2.2 å—çº§å…ƒç´ 2.2.1 è¡Œå†…å—çº§å…ƒç´ 12345678.parent::after, .son&#123; display:inline-block; vertical-align:middle;&#125;.parent::after&#123; content:&#x27;&#x27;; height:100%;&#125; é€‚åº” IE7ã€‚ 2.2.2 table1234567.parent &#123; display: table;&#125;.son &#123; display: table-cell; vertical-align: middle;&#125; ä¼˜ç‚¹ å…ƒç´ é«˜åº¦å¯ä»¥åŠ¨æ€æ”¹å˜, ä¸éœ€å† CSS ä¸­å®šä¹‰, å¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰è¶³å¤Ÿç©ºé—´æ—¶, è¯¥å…ƒç´ å†…å®¹ä¹Ÿä¸ä¼šè¢«æˆªæ–­ã€‚ ç¼ºç‚¹ IE6~7, ç”šè‡³ IE8 beta ä¸­æ— æ•ˆã€‚ 2.2.3 Flex å¼¹æ€§ç›’å­1ï¼‰flex 2012 ç‰ˆ 123456.parent &#123; display: flex; align-items: center;&#125; ä¼˜ç‚¹ å†…å®¹å—çš„å®½é«˜ä»»æ„, ä¼˜é›…çš„æº¢å‡ºã€‚ å¯ç”¨äºæ›´å¤æ‚é«˜çº§çš„å¸ƒå±€æŠ€æœ¯ä¸­ã€‚ ç¼ºç‚¹ IE8/IE9 ä¸æ”¯æŒã€‚ éœ€è¦æµè§ˆå™¨å‚å•†å‰ç¼€ã€‚ æ¸²æŸ“ä¸Šå¯èƒ½ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚ 2.2.4 ç»å¯¹å®šä½1ï¼‰transform 12345.son &#123; position: absolute; top: 50%; transform: translate( 0, -50%);&#125; ä¼˜ç‚¹ ä»£ç å°‘ã€‚ ç¼ºç‚¹ IE8 ä¸æ”¯æŒ, å±æ€§éœ€è¦è¿½åŠ æµè§ˆå™¨å‚å•†å‰ç¼€, å¯èƒ½å¹²æ‰°å…¶ä»– transform æ•ˆæœ, æŸäº›æƒ…å½¢ä¸‹ä¼šå‡ºç°æ–‡æœ¬æˆ–å…ƒç´ è¾¹ç•Œæ¸²æŸ“æ¨¡ç³Šçš„ç°è±¡ã€‚ 2ï¼‰top: 50% 12345678.son &#123; position: absolute; top: 50%; height: é«˜åº¦; margin-top: -0.5é«˜åº¦;&#125; ä¼˜ç‚¹ é€‚ç”¨äºæ‰€æœ‰æµè§ˆå™¨ã€‚ ç¼ºç‚¹ çˆ¶å…ƒç´ ç©ºé—´ä¸å¤Ÿæ—¶, å­å…ƒç´ å¯èƒ½ä¸å¯è§ (å½“æµè§ˆå™¨çª—å£ç¼©å°æ—¶, æ»šåŠ¨æ¡ä¸å‡ºç°æ—¶). å¦‚æœå­å…ƒç´ è®¾ç½®äº† overflow:auto, åˆ™é«˜åº¦ä¸å¤Ÿæ—¶, ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚ 3ï¼‰top/bottom: 0; 123456.son &#123; position: absolute; top: 0; bottom: 0; margin: auto 0;&#125; ä¼˜ç‚¹ ç®€å•ã€‚ ç¼ºç‚¹ æ²¡æœ‰è¶³å¤Ÿç©ºé—´æ—¶, å­å…ƒç´ ä¼šè¢«æˆªæ–­, ä½†ä¸ä¼šæœ‰æ»šåŠ¨æ¡ã€‚ ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•å·²çŸ¥é«˜åº¦, å·¦å³è·ç¦»å›ºå®š, ä¸­é—´è‡ªé€‚åº”ä¸‰æ å¸ƒå±€åœ¨ html å¾ˆå¸¸è§ï¼ŒåŸºç¡€çŸ¥è¯†å›é¡¾ åŒé£ç¿¼å¸ƒå±€ä¸åœ£æ¯å¸ƒå±€çš„ä¸åŒä¹‹å¤„ï¼Œåœ£æ¯å¸ƒå±€çš„çš„å·¦ä¸­å³ä¸‰åˆ—å®¹å™¨ï¼Œä¸­é—´ middle å¤šäº†ä¸€ä¸ªå­å®¹å™¨å­˜åœ¨ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ã€‚ æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•å…³é”®ç‚¹ åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left ä¸ left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½® åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ éœ€è¦è®¾ç½® padding åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„ æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•å…³é”®ç‚¹ åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ ä¸éœ€è¦è®¾ç½® padding åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„ æµ®åŠ¨å¸ƒå±€æ–¹æ³•-12345678910111213141516171819202122232425262728&lt;section class=&quot;layout float&quot;&gt; &lt;style&gt; .layout.float .left &#123; float: left; width: 300px; background: red; &#125; .layout.float .right &#123; float: right; width: 300px; background: blue; &#125; .layout.float .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;æµ®åŠ¨è§£å†³æ–¹æ¡ˆ&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;/article&gt;&lt;/section&gt; table-cell å¸ƒå±€æ–¹æ³•-123456789101112131415161718192021222324252627282930313233343536&lt;section class=&quot;layout table&quot;&gt; &lt;style&gt; .layout.table .left-mid-right &#123; width: 100%; display: table; height: 100px; &#125; .layout.table .left-mid-right &gt; div &#123; display: table-cell; &#125; .layout.table .left &#123; width: 300px; background: red; &#125; .layout.table .right &#123; width: 300px; background: blue; &#125; .layout.table .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexboxå¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; flex å¸ƒå±€æ–¹æ³•-1234567891011121314151617181920212223242526272829303132333435&lt;section class=&quot;layout flexbox&quot;&gt; &lt;style&gt; .layout.flexbox &#123; margin-top: 130px; &#125; .layout.flexbox .left-mid-right &#123; display: flex; &#125; .layout.flexbox .left &#123; width: 300px; background: red; &#125; .layout.flexbox .right &#123; width: 300px; background: blue; &#125; .layout.flexbox .mid &#123; flex: 1; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexboxå¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; å®šä½å¸ƒå±€æ–¹æ³•-12345678910111213141516171819202122232425262728293031323334&lt;section class=&quot;layout absolute&quot;&gt; &lt;style&gt; .layout.absolute .left-mid-right &gt; div &#123; position: absolute; &#125; .layout.absolute .left &#123; left: 0; width: 300px; background: red; &#125; .layout.absolute .right &#123; right: 0; width: 300px; background: blue; &#125; .layout.absolute .mid &#123; left: 300px; right: 300px; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;ç»å¯¹å®šä½&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; grid å¸ƒå±€æ–¹æ³•-1234567891011121314151617181920212223242526272829303132&lt;section class=&quot;layout grid&quot;&gt; &lt;style&gt; .layout.grid .left-mid-right &#123; display: grid; width: 100%; height: 100px; grid-template-rows: 100px; grid-template-columns: 300px auto 300px; &#125; .layout.grid .left &#123; background: red; &#125; .layout.grid .right &#123; background: blue; &#125; .layout.grid .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;ç½‘æ ¼å¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; æ‰©å±•é—®é¢˜ æ‰©å±•æ¯ä¸ªå¸ƒå±€çš„ä¼˜ç¼ºç‚¹æµ®åŠ¨ï¼šè„±ç¦»æ–‡æ¡£æµï¼ˆå¿…é¡»æ¸…æµ®åŠ¨ï¼‰ ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ¯”è¾ƒå¥½å®šä½ï¼šè„±ç¦»æ–‡æ¡£æµ ä½ åé¢çš„å­å…ƒç´ ä¹Ÿå¿…é¡»è„±ç¦»æ–‡æ¡£æµï¼Œæ•ˆæœæ¯”è¾ƒå·® ä¼˜ç‚¹ï¼šå¿«æ·ã€flexï¼šcss3 ä¸­å‡ºç°è§£å†³ä¸Šè¿° 2 ç§å¸ƒå±€çš„ç¼ºç‚¹ï¼›è¡¨æ ¼ï¼šä¼˜ç‚¹ï¼šåœ¨ä¸€å®šçš„åœºæ™¯ä¸‹å…¼å®¹æ€§è¿˜ä¸é”™ï¼Œç¼ºç‚¹å¦‚æœæŸä¸€åˆ—çš„é«˜åº¦å¢åŠ äº†åˆ™å…¶ä»– 2 åˆ—çš„é«˜åº¦ä¹Ÿä¼šåŒæ ·å¢åŠ ç½‘æ ¼ï¼šæ–°æŠ€æœ¯ï¼Œç½‘æ ¼å¸ƒå±€ ä¼˜ç¼ºç‚¹. ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ grid é«˜åº¦å»æ‰ä¹‹å å“ªä¸ªæ–¹æ¡ˆå°±ä¸é€‚ç”¨äº†æµ®åŠ¨ x æ‰©å±•ç‚¹ï¼š æµ®åŠ¨å¦‚ä½•æ¸…é™¤ BFC æ˜¯ä»€ä¹ˆå®šä½ xflex âœ”ï¸è¡¨æ ¼ âœ”ï¸grid x å…¼å®¹æ€§å“ªä¸ªæ¯”è¾ƒå¥½ï¼Œé¡¹ç›®ä¸­ç”¨å“ªä¸ªæœ€å¥½ï¼Ÿ å†™é¡µé¢çš„æ—¶å€™è¿˜éœ€è¦æ³¨æ„è¯­ä¹‰åŒ–ï¼šsection ç«  ï¼Œarticle å®¹å™¨ ä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”å®šä½å¸ƒå±€ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;section class=&quot;layout abosult&quot;&gt; &lt;style&gt; .layout.abosult .top-mid-bottom &#123; position: relative; height: 100vh; width: 100vw; background: #14e014; &#125; .layout.abosult .top &#123; position: absolute; top: 0; left: 0; width: 100vw; height: 300px; background: red; &#125; .layout.abosult .bottom &#123; position: absolute; bottom: 0; left: 0; width: 100vh; height: 300px; background: blue; &#125; .layout.abosult .mid &#123; position: absolute; width: 100vw; top: 300px; bottom: 300px; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;top-mid-bottom&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;å®šä½è§£å†³æ–¹æ¡ˆ&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; flex å¸ƒå±€ 1234567891011121314151617181920212223242526272829303132333435363738&lt;section class=&quot;layout flex&quot;&gt; &lt;style&gt; .layout.flex .top-mid-bottom &#123; display: flex; flex-direction: column; height: 100vh; width: 100vw; background: #14e014; &#125; .layout.flex .top &#123; width: 100vw; height: 300px; background: red; &#125; .layout.flex .bottom &#123; width: 100vh; height: 300px; background: blue; &#125; .layout.flex .mid &#123; flex: 1; width: 100vw; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;top-mid-bottom&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexè§£å†³æ–¹æ¡ˆ&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; table å¸ƒå±€ 1234567891011121314151617181920212223242526272829&lt;section class=&quot;table-top-center-bottom&quot;&gt; &lt;style type=&quot;text/css&quot;&gt; .table-top-center-bottom &#123; width: 100vw; height: 100vh; display: table; &#125; .table-top &#123; display: table-row; height: 300px; width: 100%; background: yellow; &#125; .table-center &#123; display: table-row; width: 100%; background: #ff3c4a; &#125; .table-bottom &#123; display: table-row; height: 300px; width: 100%; background: #49a094; &#125; &lt;/style&gt; &lt;div class=&quot;table-top&quot;&gt;ä¸Š&lt;/div&gt; &lt;div class=&quot;table-center&quot;&gt;table-å¸ƒå±€ -ä¸­&lt;/div&gt; &lt;div class=&quot;table-bottom&quot;&gt;ä¸‹&lt;/div&gt;&lt;/section&gt; grid å¸ƒå±€ 123456789101112131415161718192021222324252627282930313233&lt;section class=&quot;layout grid&quot;&gt; &lt;style&gt; .layout.grid .top-mid-bottom &#123; display: grid; grid-template-row: 300px auto 300px; height: 100vh; background: #14e014; &#125; .layout.grid .top &#123; width: 100vw; background: red; &#125; .layout.grid .bottom &#123; width: 100vh; background: blue; &#125; .layout.grid .mid &#123; width: 100vw; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;top-mid-bottom&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexè§£å†³æ–¹æ¡ˆ&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; å‚è€ƒã€Š50é“CSSåŸºç¡€é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰ã€‹ä¸­çš„ç­”æ¡ˆçœŸçš„å°±åªæ˜¯ç­”æ¡ˆå—ï¼Ÿ","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://mariogogogo.github.io/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","slug":"é¢è¯•ï¼ŒJavascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CJavascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"Docker åˆä½“éªŒæ‰“é€ è¶…æºœçš„å‰ç«¯ç¯å¢ƒ","slug":"Dockeråˆä½“éªŒ","date":"2019-12-30T16:00:00.000Z","updated":"2020-09-16T09:07:18.000Z","comments":true,"path":"2019/12/31/Dockeråˆä½“éªŒ/","link":"","permalink":"http://mariogogogo.github.io/2019/12/31/Docker%E5%88%9D%E4%BD%93%E9%AA%8C/","excerpt":"æ€»ç»“ä¸€ä¸‹æœ‰å¦‚ä¸‹é—®é¢˜ï¼šæ‰‹åŠ¨éƒ¨ç½²æˆæœ¬å¤ªé«˜ï¼Œæ”¹é”™åˆ«å­—éƒ½å¾ˆéº»çƒ¦ä¸€å°æœåŠ¡å™¨ç”±äºæ—¶é—´ç´¯ç§¯å¯¼è‡´ç¯å¢ƒå˜å¾—â€œè„ä¹±å·®â€é‡è£…ç³»ç»Ÿæˆæœ¬å¤ªé«˜ï¼Œéš¾ä»¥è¿ç§»","text":"æ€»ç»“ä¸€ä¸‹æœ‰å¦‚ä¸‹é—®é¢˜ï¼šæ‰‹åŠ¨éƒ¨ç½²æˆæœ¬å¤ªé«˜ï¼Œæ”¹é”™åˆ«å­—éƒ½å¾ˆéº»çƒ¦ä¸€å°æœåŠ¡å™¨ç”±äºæ—¶é—´ç´¯ç§¯å¯¼è‡´ç¯å¢ƒå˜å¾—â€œè„ä¹±å·®â€é‡è£…ç³»ç»Ÿæˆæœ¬å¤ªé«˜ï¼Œéš¾ä»¥è¿ç§» è€Œ Dockerï¼Œæ­£æ˜¯æˆ‘è§£å†³æ‰€æœ‰é—®é¢˜ SCP-500 ä¸‡èƒ½è¯ï¼é‚£ä¹ˆ Docker æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿé•œåƒä¸å®¹å™¨Docker ä¸­æœ‰ä¸¤ä¸ªé‡è¦æ¦‚å¿µã€‚ä¸€ä¸ªæ˜¯å®¹å™¨ï¼ˆContainerï¼‰ï¼šå®¹å™¨ç‰¹åˆ«åƒä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­è¿è¡Œç€ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å¯ä»¥åœ¨å®¹å™¨ä¸­è£… Nodejsï¼Œå¯ä»¥æ‰§è¡Œ npm installï¼Œå¯ä»¥åšä¸€åˆ‡ä½ å½“å‰æ“ä½œç³»ç»Ÿèƒ½åšçš„äº‹æƒ…å¦ä¸€ä¸ªæ˜¯é•œåƒï¼ˆImageï¼‰ï¼šé•œåƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæ˜¯ç”¨æ¥åˆ›å»ºå®¹å™¨çš„ã€‚å¦‚æœä½ æœ‰è£…è¿‡ Windows æ“ä½œç³»ç»Ÿï¼Œé‚£ä¹ˆ Docker é•œåƒç‰¹åˆ«åƒâ€œWin7 çº¯å‡€ç‰ˆ.rarâ€æ–‡ä»¶ä¸Šè¾¹å°±æ˜¯ä½ æ‰€éœ€è¦äº†è§£çš„ Docker å…¨éƒ¨åŸºç¡€çŸ¥è¯†ã€‚å°±è¿™ä¹ˆç®€å•é¡ºä¾¿ä¸€æï¼Œåœ¨ Docker ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä½ å½“å‰ä½¿ç”¨çš„çœŸå®æ“ä½œç³»ç»Ÿä¸ºâ€œå®¿ä¸»æœºâ€(Host) å†™ä¸ª vue+node çš„æ¡ˆä¾‹å®æˆ˜ä¸‹ç›®å½•ç»“æ„ 12345678910111213141516171819202122232425262728293031323334â”œâ”€â”€ vue_docker //vueé¡¹ç›®â”‚ â”œâ”€â”€ Dockerfileâ”‚ â”œâ”€â”€ README.mdâ”‚ â”œâ”€â”€ babel.config.jsâ”‚ â”œâ”€â”€ distâ”‚ â”‚ â”œâ”€â”€ cssâ”‚ â”‚ â”œâ”€â”€ favicon.icoâ”‚ â”‚ â”œâ”€â”€ imgâ”‚ â”‚ â”œâ”€â”€ index.htmlâ”‚ â”‚ â””â”€â”€ jsâ”‚ â”œâ”€â”€ docker-compose.debug.ymlâ”‚ â”œâ”€â”€ docker-compose.ymlâ”‚ â”œâ”€â”€ nginx //nginxé…ç½®ä¿¡æ¯â”‚ â”‚ â””â”€â”€ default.confâ”‚ â”œâ”€â”€ package.jsonâ”‚ â”œâ”€â”€ publicâ”‚ â”‚ â”œâ”€â”€ favicon.icoâ”‚ â”‚ â””â”€â”€ index.htmlâ”‚ â”œâ”€â”€ srcâ”‚ â”‚ â”œâ”€â”€ App.vueâ”‚ â”‚ â”œâ”€â”€ assetsâ”‚ â”‚ â”œâ”€â”€ componentsâ”‚ â”‚ â”œâ”€â”€ main.jsâ”‚ â”‚ â”œâ”€â”€ routerâ”‚ â”‚ â””â”€â”€ viewsâ”‚ â””â”€â”€ yarn.lockâ””â”€â”€ vue_docker_server //nodeé¡¹ç›® â”œâ”€â”€ Dockerfile â”œâ”€â”€ docker-compose.debug.yml â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ package.json â”œâ”€â”€ server.js â”œâ”€â”€ test.txt â””â”€â”€ yarn.lock éƒ¨ç½² vueè¿‡ç¨‹çœç•¥äº†å†™è¿‡ vue çš„éƒ½çŸ¥é“â€¦ 1yarn build éƒ¨ç½² nodeåˆ›å»º server.js 12345678910111213141516171819const Koa = require(&quot;koa&quot;);const app = new Koa();const router = require(&quot;koa-router&quot;)();const bodyParser = require(&quot;koa-bodyparser&quot;);app.use(bodyParser());app.use(router.routes());router.get(&quot;/&quot;, async (ctx, next) =&gt; &#123; ctx.response.body = &quot;hello,word&quot;;&#125;);router.get(&quot;/api/json&quot;, async (ctx, next) =&gt; &#123; ctx.body = &#123; code: 0, data: &quot;This is message from node container&quot; &#125;;&#125;);app.listen(8000);console.log(&quot;http://localhost:8000&quot;); éƒ¨ç½² nginx config é…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536//è·¯å¾„:/nginx/default.conf/server &#123; listen 80; server_name localhost; #charset koi8-r; access_log /var/log/nginx/host.access.log main; error_log /var/log/nginx/error.log error; location / &#123; # è¿™ä¸ªæ˜¯nginxçš„é»˜è®¤æ–‡ä»¶è·¯å¾„ # root /usr/share/nginx/html; # è‡ªå®šä¹‰çš„nginxæ˜¾ç¤ºè·¯å¾„ root /home/web/app; index index.html index.htm; &#125; # ä»£ç†ä»¥ api ä¸ºå‰ç¼€çš„è¯·æ±‚ location ~^/api &#123; proxy_pass http://192.168.8.93:8000; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; # root /usr/share/nginx/html; root /home/web/app; &#125;&#125; docker äºŒç§å¯åŠ¨æ¨¡å¼Dockerfile å¯åŠ¨åœ¨ vue é¡¹ç›®æ ¹ç›®å½•åˆ›å»º Dockerfile æ–‡ä»¶é…ç½®å¦‚ä¸‹ 123FROM nginxCOPY dist/ /usr/share/nginx/html/COPY nginx/default.conf /etc/nginx/conf.d/default.conf è‡ªå®šä¹‰æ„å»ºé•œåƒçš„æ—¶å€™åŸºäºDockerfileæ¥æ„å»ºã€‚ FROM nginx å‘½ä»¤çš„æ„æ€è¯¥é•œåƒæ˜¯åŸºäº nginx:latest é•œåƒè€Œæ„å»ºçš„ã€‚ COPY dist/ /usr/share/nginx/html/ å‘½ä»¤çš„æ„æ€æ˜¯å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ /usr/share/nginx/html/ ç›®å½•ä¸‹ã€‚ COPY nginx/default.conf /etc/nginx/conf.d/default.conf å‘½ä»¤çš„æ„æ€æ˜¯å°† nginx ç›®å½•ä¸‹çš„ default.conf å¤åˆ¶åˆ° etc/nginx/conf.d/default.confï¼Œç”¨æœ¬åœ°çš„ default.conf é…ç½®æ¥æ›¿æ¢ nginx é•œåƒé‡Œçš„é»˜è®¤é…ç½®ã€‚ æ‰§è¡Œå‘½ä»¤ 1docker build -t vuenginxcontainer . -t æ˜¯ç»™é•œåƒå‘½å .æ˜¯åŸºäºå½“å‰ç›®å½•çš„ Dockerfile æ¥æ„å»ºé•œåƒ 1docker image ls | grep vuenginxcontainer åˆ°æ­¤æ—¶æˆ‘ä»¬çš„ vue åº”ç”¨é•œåƒ vuenginxcontainer å·²ç»æˆåŠŸåˆ›å»ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŸºäºè¯¥é•œåƒå¯åŠ¨ä¸€ä¸ª docker å®¹å™¨ã€‚ åŸºäº vuenginxcontainer é•œåƒå¯åŠ¨å®¹å™¨ï¼Œè¿è¡Œå‘½ä»¤ï¼š 1234docker run \\-p 3000:80 \\-d --name vueApp \\vuenginxcontainer docker run åŸºäºé•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ -p 3000:80 ç«¯å£æ˜ å°„ï¼Œå°†å®¿ä¸»çš„ 3000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ -d åå°æ–¹å¼è¿è¡Œ --name å®¹å™¨å æŸ¥çœ‹ docker è¿›ç¨‹ docker pså¯ä»¥å‘ç°åä¸º vueApp çš„å®¹å™¨å·²ç»è¿è¡Œèµ·æ¥ã€‚æ­¤æ—¶è®¿é—® http://localhost:3000 åº”è¯¥å°±èƒ½è®¿é—®åˆ°è¯¥ vue åº”ç”¨ node_docker éƒ¨ç½²123456789101112FROM nodeWORKDIR /usr/src/appCOPY package*.json ./RUN npm installCOPY . .EXPOSE 8080CMD [ &quot;npm&quot;, &quot;start&quot; ] æ‰§è¡Œ 1docker build -t nodewebserver . å¯åŠ¨ 1234docker run \\-p 5000:8080 \\-d --name nodeserver \\nodewebserver docker-compose å¯åŠ¨vue é¡¹ç›® docker-compose é…ç½®1234567891011121314151617version: &quot;2&quot;services: # æœåŠ¡åç§° nginx: # é•œåƒ:ç‰ˆæœ¬ image: nginx # æ˜ å°„å®¹å™¨80ç«¯å£åˆ°æœ¬åœ°80ç«¯å£ ports: - &quot;3000:80&quot; # æ•°æ®å· æ˜ å°„æœ¬åœ°æ–‡ä»¶åˆ°å®¹å™¨ volumes: # æ˜ å°„nginx.confæ–‡ä»¶åˆ°å®¹å™¨çš„/etc/nginx/conf.dç›®å½•å¹¶è¦†ç›–default.confæ–‡ä»¶ - ./nginx/default.conf:/etc/nginx/conf.d/default.conf # æ˜ å°„buildæ–‡ä»¶å¤¹åˆ°å®¹å™¨çš„/usr/share/nginx/htmlæ–‡ä»¶å¤¹ä¸configä¸­çš„rootè·¯å¾„ä¸€è‡´ - ./dist:/home/web/app # è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚ command: /bin/bash -c &quot;nginx -g &#x27;daemon off;&#x27;&quot; å¯åŠ¨ 1234docker-compose up -d//å…³é—­docker-compose down node é¡¹ç›® docker-compose é…ç½®12345678910111213version: &quot;3&quot;services: web: image: node:10.13-alpine user: node working_dir: /home/node/app environment: - PORT=8000 volumes: - ./:/home/node/app # å°†æœ¬åœ°ç›®å½•æ˜ å°„åˆ°å®¹å™¨å†… command: [&quot;node&quot;, &quot;server.js&quot;] # è¿è¡Œå‘½ä»¤ ports: - 8000:8000 # æœ¬åœ°ç«¯å£:å®¹å™¨ç«¯å£ å¯åŠ¨ 1234docker-compose up -d//å…³é—­docker-compose down è·¨åŸŸè½¬å‘æƒ³è¦å°† vueApp å®¹å™¨ ä¸Šçš„è¯·æ±‚è½¬å‘åˆ° nodeserver å®¹å™¨ä¸Šã€‚é¦–å…ˆéœ€è¦çŸ¥é“ nodeserver å®¹å™¨çš„ ip åœ°å€å’Œç«¯å£ï¼Œç›®å‰å·²çŸ¥ nodeserver å®¹å™¨å†…éƒ¨æœåŠ¡ç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œè¿˜éœ€è¦çŸ¥é“ ip å³å¯ã€‚ å¦‚ä½•æŸ¥çœ‹å®¹å™¨åœ°å€? docker inspect 02277acc3efc 1234567# ä»£ç†ä»¥ api ä¸ºå‰ç¼€çš„è¯·æ±‚ location ~^/api &#123; proxy_pass http://192.168.8.93:8000; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; &#125; docker-compose.yml é…ç½®è¯¦è§£æ¯ä¸ª docker-compose.yml å¿…é¡»å®šä¹‰ image æˆ–è€… build ä¸­çš„ä¸€ä¸ªï¼Œå…¶å®ƒçš„æ˜¯å¯é€‰çš„ã€‚ imageæŒ‡å®šé•œåƒ tag æˆ–è€… IDã€‚ç¤ºä¾‹ï¼š 12345image: redis æˆ–è€… node æˆ–è€… nginximage: ubuntu:14.04image: tutum/influxdbimage: example-registry.com:4000/postgresqlimage: a4bc65fd è„šæœ¬æ‰§è¡Œå†…å®¹åªæ˜¯æŠŠä»¥ä¸Šå‘½ä»¤æ•´åˆåˆ°ä¸€èµ·æ‰§è¡Œï¼š 12345678910111213141516171819202122232425262728293031323334353637# å¤‡ä»½åŸä»£ç tar -zcvf gentle-vue.tar ./gentle-vue# åˆ é™¤åŸä»£ç æ–‡ä»¶å¤¹rm -rf gentle-vue# æ‹‰å–ä»£ç git clone https://gitee.com/FJ_WoMenDeShiJie/gentle-vue.gitecho -e &quot;\\033[32m\\nä»£ç æ‹‰å–\\n\\033[0m&quot;# æ‹·è´ node_modulescp ./node.tar ./gentle-vue# build æ‰“åŒ… vue é¡¹ç›®ï¼Œç”Ÿæˆ dist æ–‡ä»¶å¤¹cd ./gentle-vuetar -zxvf node.tarnpm run buildecho -e &quot;\\033[32m\\nvueé¡¹ç›®æ‰“åŒ…å®Œæˆ\\n\\033[0m&quot;# åˆ é™¤åŸé•œåƒdocker rmi gentle-vue &amp;&gt; /dev/nullecho -e &quot;\\033[32m\\nåˆ é™¤åŸé•œåƒæ–‡ä»¶\\n\\033[0m&quot;# æ‹·è´ dockerfile åˆ°å·¥ç¨‹ç›®å½•ä¸‹cp ../dockerfile ./# æ„å»ºé•œåƒdocker build -t gentle-vue .echo -e &quot;\\033[32m\\næ–°é•œåƒæ„å»ºæˆåŠŸ\\n\\033[0m&quot;# åˆ é™¤åŸå®¹å™¨docker rm -f gentle-vue# å¯åŠ¨å®¹å™¨docker run -p 3000:80 -d --name gentle-vue gentle-vueecho -e &quot;\\033[32m\\nå‰ç«¯å·¥ç¨‹éƒ¨ç½²å®Œæˆ\\n\\033[0m&quot;è¿™æ ·éƒ¨ç½²å°±æ–¹ä¾¿å¤šäº†ã€‚ Docker çš„å¸¸ç”¨å‘½ä»¤é•œåƒå¸¸ç”¨å‘½ä»¤123456789docker pull [é•œåƒåç§°:ç‰ˆæœ¬] æ‹‰å–é•œåƒdocker images é•œåƒåˆ—è¡¨docker rmi [é•œåƒåç§°:ç‰ˆæœ¬] åˆ é™¤é•œåƒdocker history [é•œåƒåç§°] é•œåƒæ“ä½œè®°å½•docker tag [é•œåƒåç§°:ç‰ˆæœ¬][æ–°é•œåƒåç§°:æ–°ç‰ˆæœ¬]docker inspect [é•œåƒåç§°:ç‰ˆæœ¬] æŸ¥çœ‹é•œåƒè¯¦ç»†docker search [å…³é”®å­—] æœç´¢é•œåƒdocker login é•œåƒç™»é™† å®¹å™¨å¸¸ç”¨å‘½ä»¤12345678910111213docker ps -a å®¹å™¨åˆ—è¡¨(æ‰€æœ‰å®¹å™¨)docker ps æŸ¥çœ‹æ‰€æœ‰(è¿è¡Œçš„)å®¹å™¨docker exec -ti &lt;id&gt; bash ä»¥ bash å‘½ä»¤è¿›å…¥å®¹å™¨å†…docker run -ti --name [å®¹å™¨åç§°][é•œåƒåç§°:ç‰ˆæœ¬] bash å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥docker logs æŸ¥çœ‹å®¹å™¨æ—¥å¿—docker top &lt;container_id&gt; æŸ¥çœ‹å®¹å™¨æœ€è¿‘çš„ä¸€ä¸ªè¿›ç¨‹docker run -ti --name [å®¹å™¨åç§°] -p 8080:80 [é•œåƒåç§°:ç‰ˆæœ¬] bash ç«¯å£æ˜ å°„docker rm &lt;container_id&gt; åˆ é™¤å®¹å™¨docker stop &lt;container_id&gt; åœæ­¢å®¹å™¨docker start &lt;container_id&gt; å¼€å¯å®¹å™¨docker restart &lt;container_id&gt; é‡å¯å®¹å™¨docker inspect &lt;container_id&gt; æŸ¥çœ‹å®¹å™¨è¯¦æƒ…docker commit [å®¹å™¨åç§°] my_image:v1.0 å®¹å™¨æäº¤ä¸ºæ–°çš„é•œåƒ å‚è€ƒå‰ç«¯å·¥ç¨‹å¸ˆå­¦ Docker ï¼Ÿ çœ‹è¿™ç¯‡å°±å¤Ÿäº† Docker æ­å»ºä½ çš„ç¬¬ä¸€ä¸ª Node é¡¹ç›®åˆ°æœåŠ¡å™¨ Docker æ‰“é€ è¶…æºœçš„å‰ç«¯ç¯å¢ƒ ä½¿ç”¨ docker-compose æ›¿ä»£ docker run å®˜æ–¹æ–‡æ¡£","categories":[{"name":"Docker","slug":"Docker","permalink":"http://mariogogogo.github.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"http://mariogogogo.github.io/tags/Docker/"}]},{"title":"å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°","slug":"å‰ç«¯è·¯ç”±çš„åŸç†è§£æä¸å®ç°","date":"2019-12-14T16:00:00.000Z","updated":"2020-09-16T09:07:09.000Z","comments":true,"path":"2019/12/15/å‰ç«¯è·¯ç”±çš„åŸç†è§£æä¸å®ç°/","link":"","permalink":"http://mariogogogo.github.io/2019/12/15/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E7%8E%B0/","excerpt":"åœ¨å•é¡µåº”ç”¨å¦‚æ­¤æµè¡Œçš„ä»Šå¤©ï¼Œæ›¾ç»ä»¤äººæƒŠå¹çš„å‰ç«¯è·¯ç”±å·²ç»æˆä¸ºå„å¤§æ¡†æ¶çš„åŸºç¡€æ ‡é…ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æä¾›äº†å¼ºå¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æƒ³è¦ææ‡‚è·¯ç”±å†…éƒ¨å®ç°è¿˜æ˜¯æœ‰äº›å›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœåªæƒ³äº†è§£è·¯ç”±å®ç°åŸºæœ¬åŸç†è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æœ¬æ–‡é’ˆå¯¹å‰ç«¯è·¯ç”±ä¸»æµçš„å®ç°æ–¹å¼ hash å’Œ historyï¼Œæä¾›äº†åŸç”Ÿ JS/React/Vue å…±è®¡å…­ä¸ªç‰ˆæœ¬ä¾›å‚è€ƒï¼Œæ¯ä¸ªç‰ˆæœ¬çš„å®ç°ä»£ç çº¦ 25~40 è¡Œå·¦å³ï¼ˆå«ç©ºè¡Œï¼‰ã€‚","text":"åœ¨å•é¡µåº”ç”¨å¦‚æ­¤æµè¡Œçš„ä»Šå¤©ï¼Œæ›¾ç»ä»¤äººæƒŠå¹çš„å‰ç«¯è·¯ç”±å·²ç»æˆä¸ºå„å¤§æ¡†æ¶çš„åŸºç¡€æ ‡é…ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æä¾›äº†å¼ºå¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æƒ³è¦ææ‡‚è·¯ç”±å†…éƒ¨å®ç°è¿˜æ˜¯æœ‰äº›å›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœåªæƒ³äº†è§£è·¯ç”±å®ç°åŸºæœ¬åŸç†è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æœ¬æ–‡é’ˆå¯¹å‰ç«¯è·¯ç”±ä¸»æµçš„å®ç°æ–¹å¼ hash å’Œ historyï¼Œæä¾›äº†åŸç”Ÿ JS/React/Vue å…±è®¡å…­ä¸ªç‰ˆæœ¬ä¾›å‚è€ƒï¼Œæ¯ä¸ªç‰ˆæœ¬çš„å®ç°ä»£ç çº¦ 25~40 è¡Œå·¦å³ï¼ˆå«ç©ºè¡Œï¼‰ã€‚ ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿè·¯ç”±çš„æ¦‚å¿µæ¥æºäºæœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯ä¸­è·¯ç”±æè¿°çš„æ˜¯ URL ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ åœ¨ Web å‰ç«¯å•é¡µåº”ç”¨ SPA(Single Page Application)ä¸­ï¼Œè·¯ç”±æè¿°çš„æ˜¯ URL ä¸ UI ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè¿™ç§æ˜ å°„æ˜¯å•å‘çš„ï¼Œå³ URL å˜åŒ–å¼•èµ· UI æ›´æ–°ï¼ˆæ— éœ€åˆ·æ–°é¡µé¢ï¼‰ã€‚ å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿè¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒï¼š â­ å¦‚ä½•æ”¹å˜ URL å´ä¸å¼•èµ·é¡µé¢åˆ·æ–°ï¼Ÿ â­ å¦‚ä½•æ£€æµ‹ URL å˜åŒ–äº†ï¼Ÿ ä¸‹é¢åˆ†åˆ«ä½¿ç”¨ hash å’Œ history ä¸¤ç§å®ç°æ–¹å¼å›ç­”ä¸Šé¢çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚ hash å®ç°hash æ˜¯ URL ä¸­ hash (#) åŠåé¢çš„é‚£éƒ¨åˆ†ï¼Œå¸¸ç”¨ä½œé”šç‚¹åœ¨é¡µé¢å†…è¿›è¡Œå¯¼èˆªï¼Œæ”¹å˜ URL ä¸­çš„ hash éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°é€šè¿‡ hashchange äº‹ä»¶ç›‘å¬ URL çš„å˜åŒ–ï¼Œæ”¹å˜ URL çš„æ–¹å¼åªæœ‰è¿™å‡ ç§ï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URLã€é€šè¿‡æ ‡ç­¾æ”¹å˜ URLã€é€šè¿‡ window.location æ”¹å˜ URLï¼Œè¿™å‡ ç§æƒ…å†µæ”¹å˜ URL éƒ½ä¼šè§¦å‘ hashchange äº‹ä»¶ history å®ç°history æä¾›äº† pushState å’Œ replaceState ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ”¹å˜ URL çš„ path éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–° history æä¾›ç±»ä¼¼ hashchange äº‹ä»¶çš„ popstate äº‹ä»¶ï¼Œä½† popstate äº‹ä»¶æœ‰äº›ä¸åŒï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URL æ—¶ä¼šè§¦å‘ popstate äº‹ä»¶ï¼Œé€šè¿‡ pushState/replaceState æˆ–æ ‡ç­¾æ”¹å˜ URL ä¸ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚å¥½åœ¨æˆ‘ä»¬å¯ä»¥æ‹¦æˆª pushState/replaceState çš„è°ƒç”¨å’Œæ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶æ¥æ£€æµ‹ URL å˜åŒ–ï¼Œæ‰€ä»¥ç›‘å¬ URL å˜åŒ–å¯ä»¥å®ç°ï¼Œåªæ˜¯æ²¡æœ‰ hashchange é‚£ä¹ˆæ–¹ä¾¿ã€‚ åŸç”Ÿ JS ç‰ˆå‰ç«¯è·¯ç”±å®ç°åŸºäº hash å®ç° HTML éƒ¨åˆ†ï¼š 12345678910&lt;body&gt; &lt;ul&gt; &lt;!-- å®šä¹‰è·¯ç”± --&gt; &lt;li&gt;&lt;a href=&quot;#/home&quot;&gt;home&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#/about&quot;&gt;about&lt;/a&gt;&lt;/li&gt; &lt;!-- æ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI --&gt; &lt;div id=&quot;routeView&quot;&gt;&lt;/div&gt; &lt;/ul&gt;&lt;/body&gt; JavaScript éƒ¨åˆ†ï¼š 123456789101112131415161718192021222324252627// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶window.addEventListener(&quot;DOMContentLoaded&quot;, onLoad);// ç›‘å¬è·¯ç”±å˜åŒ–window.addEventListener(&quot;hashchange&quot;, onHashChange);// è·¯ç”±è§†å›¾let routerView = null;function onLoad() &#123; routerView = document.querySelector(&quot;#routeView&quot;); onHashChange();&#125;// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UIfunction onHashChange() &#123; console.log(&quot;location.hash&quot;, location.hash); switch (location.hash) &#123; case &quot;#/home&quot;: routerView.innerHTML = &quot;Home&quot;; return; case &quot;#/about&quot;: routerView.innerHTML = &quot;About&quot;; return; default: return; &#125;&#125; è¡¥å……: DOMContentLoaded é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•ã€‚é‚£ä»€ä¹ˆæ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•å‘¢ï¼Ÿæˆ‘ä»¬ä»æ‰“å¼€ä¸€ä¸ªç½‘é¡µè¯´èµ·ã€‚å½“è¾“å…¥ä¸€ä¸ª URLï¼Œé¡µé¢çš„å±•ç¤ºé¦–å…ˆæ˜¯ç©ºç™½çš„ï¼Œç„¶åè¿‡ä¸€ä¼šï¼Œé¡µé¢ä¼šå±•ç¤ºå‡ºå†…å®¹ï¼Œä½†æ˜¯é¡µé¢çš„æœ‰äº›èµ„æºæ¯”å¦‚è¯´å›¾ç‰‡èµ„æºè¿˜æ— æ³•çœ‹åˆ°ï¼Œæ­¤æ—¶é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸çš„äº¤äº’ï¼Œè¿‡ä¸€æ®µæ—¶é—´åï¼Œå›¾ç‰‡æ‰å®Œæˆæ˜¾ç¤ºåœ¨é¡µé¢ã€‚ä»é¡µé¢ç©ºç™½åˆ°å±•ç¤ºå‡ºé¡µé¢å†…å®¹ï¼Œä¼šè§¦å‘ DOMContentLoaded äº‹ä»¶ã€‚è€Œè¿™æ®µæ—¶é—´å°±æ˜¯ HTML æ–‡æ¡£è¢«åŠ è½½å’Œè§£æå®Œæˆã€‚å‚è€ƒDOMContentLoaded ä¸ load çš„åŒºåˆ« åŸºäº history å®ç° html éƒ¨åˆ†: 12345678&lt;body&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;/home&quot;&gt;home&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;/about&quot;&gt;about&lt;/a&gt;&lt;/li&gt; &lt;div id=&quot;routeView&quot;&gt;&lt;/div&gt; &lt;/ul&gt;&lt;/body&gt; js éƒ¨åˆ†: 12345678910111213141516171819202122232425262728293031323334353637383940// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶window.addEventListener(&quot;DOMContentLoaded&quot;, onLoad);// ç›‘å¬è·¯ç”±å˜åŒ–window.addEventListener(&quot;popstate&quot;, onPopState);// è·¯ç”±è§†å›¾var routerView = null;function onLoad() &#123; routerView = document.querySelector(&quot;#routeView&quot;); onPopState(); // ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸæ‹¦æˆª &lt;a/&gt; æ ‡ç­¾ç‚¹å‡»äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼Œ ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UIï¼Œä»è€Œå®ç°ç‚¹å‡»é“¾æ¥æ›´æ–° URL å’Œ UI çš„æ•ˆæœã€‚ var linkList = document.querySelectorAll(&quot;a[href]&quot;); linkList.forEach(el =&gt; el.addEventListener(&quot;click&quot;, function(e) &#123; //é˜»æ­¢é»˜è®¤äº‹ä»¶ e.preventDefault(); //historyç³»ç»Ÿè‡ªå¸¦å±æ€§ history.pushState(&quot;è¿™é‡Œæ˜¯å¦å¯ä»¥æ·»åŠ stateçŠ¶æ€&quot;, &quot;&quot;, el.getAttribute(&quot;href&quot;)); //el.getAttribute(&#x27;href&#x27;) ---&gt; ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UI/home æˆ–è€… /about onPopState(); &#125;) );&#125;// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UIfunction onPopState() &#123; console.log(&quot;location.pathname&quot;, location.pathname); // location.pathname /home switch (location.pathname) &#123; case &quot;/home&quot;: routerView.innerHTML = &quot;Home&quot;; return; case &quot;/about&quot;: routerView.innerHTML = &quot;About&quot;; return; default: return; &#125;&#125; React ç‰ˆå‰ç«¯è·¯ç”±å®ç°åŸºäº hash å®ç°html éƒ¨åˆ†: 12345678910111213&lt;BrowserRouter&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to=&quot;/home&quot;&gt;home&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to=&quot;/about&quot;&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;Route path=&quot;/home&quot; render=&#123;() =&gt; &lt;h2&gt;Home&lt;/h2&gt;&#125; /&gt; &lt;Route path=&quot;/about&quot; render=&#123;() =&gt; &lt;h2&gt;About&lt;/h2&gt;&#125; /&gt; &lt;/BrowserRouter&gt; js éƒ¨åˆ† 1234567891011121314151617181920212223242526272829export default class BrowserRouter extends React.Component &#123; state = &#123; currentPath: utils.extractHashPath(window.location.href) &#125;; onHashChange = e =&gt; &#123; const currentPath = utils.extractHashPath(e.newURL); console.log(&quot;onHashChange:&quot;, currentPath); this.setState(&#123; currentPath &#125;); &#125;; componentDidMount() &#123; window.addEventListener(&quot;hashchange&quot;, this.onHashChange); &#125; componentWillUnmount() &#123; window.removeEventListener(&quot;hashchange&quot;, this.onHashChange); &#125; render() &#123; // window.location.href http://localhost:3000/#/home //onPopState undefined return ( &lt;RouteContext.Provider value=&#123;&#123; currentPath: this.state.currentPath &#125;&#125;&gt; &#123;this.props.children&#125; &lt;/RouteContext.Provider&gt; ); &#125;&#125; Route å®ç°123export default (&#123; path, render &#125;) =&gt; ( &lt;RouteContext.Consumer&gt;&#123;(&#123; currentPath &#125;) =&gt; currentPath === path &amp;&amp; render()&#125;&lt;/RouteContext.Consumer&gt;); Link å®ç°1export default (&#123; to, ...props &#125;) =&gt; &lt;a &#123;...props&#125; href=&#123;&quot;#&quot; + to&#125; /&gt;; åŸºäº history å®ç°ä½¿ç”¨æ–¹å¼å’Œ react-router ç±»ä¼¼ï¼š 12345678910111213&lt;HistoryRouter&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to=&quot;/home&quot;&gt;home&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to=&quot;/about&quot;&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;Route path=&quot;/home&quot; render=&#123;() =&gt; &lt;h2&gt;Home&lt;/h2&gt;&#125; /&gt; &lt;Route path=&quot;/about&quot; render=&#123;() =&gt; &lt;h2&gt;About&lt;/h2&gt;&#125; /&gt;&lt;/HistoryRouter&gt; HistoryRouter å®ç°123456789101112131415161718192021222324252627export default class HistoryRouter extends React.Component &#123; state = &#123; currentPath: utils.extractUrlPath(window.location.href) &#125;; onPopState = e =&gt; &#123; const currentPath = utils.extractUrlPath(window.location.href); console.log(&quot;onPopState:&quot;, currentPath); this.setState(&#123; currentPath &#125;); &#125;; componentDidMount() &#123; window.addEventListener(&quot;popstate&quot;, this.onPopState); &#125; componentWillUnmount() &#123; window.removeEventListener(&quot;popstate&quot;, this.onPopState); &#125; render() &#123; return ( &lt;RouteContext.Provider value=&#123;&#123; currentPath: this.state.currentPath, onPopState: this.onPopState &#125;&#125;&gt; &#123;this.props.children&#125; &lt;/RouteContext.Provider&gt; ); &#125;&#125; Route å®ç°123export default (&#123; path, render &#125;) =&gt; ( &lt;RouteContext.Consumer&gt;&#123;(&#123; currentPath &#125;) =&gt; currentPath === path &amp;&amp; render()&#125;&lt;/RouteContext.Consumer&gt;); Link å®ç° (åŒºåˆ«åœ¨è¿™é‡Œ)1234567891011121314151617export default (&#123; to, ...props &#125;) =&gt; ( &lt;RouteContext.Consumer&gt; &#123;(&#123; onPopState &#125;) =&gt; ( &lt;a href=&quot;&quot; &#123;...props&#125; onClick=&#123;e =&gt; &#123; //é˜»æ­¢é»˜è®¤äº‹ä»¶ e.preventDefault(); //æ”¹å˜æµè§ˆå™¨çš„è·¯å¾„ window.history.pushState(null, &quot;&quot;, to); onPopState(); &#125;&#125; /&gt; )&#125; &lt;/RouteContext.Consumer&gt;); å°ç»“å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒå®ç°åŸç†å¾ˆç®€å•ï¼Œä½†æ˜¯ç»“åˆå…·ä½“æ¡†æ¶åï¼Œæ¡†æ¶å¢åŠ äº†å¾ˆå¤šç‰¹æ€§ï¼Œå¦‚åŠ¨æ€è·¯ç”±ã€è·¯ç”±å‚æ•°ã€è·¯ç”±åŠ¨ç”»ç­‰ç­‰ï¼Œè¿™äº›å¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æœ¬æ–‡å»ç²—å–ç²¾åªé’ˆå¯¹å‰ç«¯è·¯ç”±æœ€æ ¸å¿ƒéƒ¨åˆ†çš„å®ç°è¿›è¡Œåˆ†æï¼Œå¹¶åŸºäº hash å’Œ history ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«æä¾›åŸç”Ÿ JS/React ä¸‰ç§å®ç°ï¼Œå…±è®¡å››ä¸ªå®ç°ç‰ˆæœ¬ä¾›å‚è€ƒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ å‚è€ƒ[ã€ç¬¬ 1611 æœŸã€‘å‰ç«¯è·¯ç”±åŸç†è§£æ](","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reduxæºç æ¢ç´¢-applyMiddleware","slug":"Reduxæºç æ¢ç´¢-applyMiddleware","date":"2019-12-02T16:00:00.000Z","updated":"2020-09-16T09:07:51.000Z","comments":true,"path":"2019/12/03/Reduxæºç æ¢ç´¢-applyMiddleware/","link":"","permalink":"http://mariogogogo.github.io/2019/12/03/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-applyMiddleware/","excerpt":"é¡¾åæ€ä¹‰ï¼ŒapplyMiddleware å°±æ˜¯ä¸­é—´ä»¶çš„æ„æ€ã€‚applyMiddleware æ¥æ”¶ä¸­é—´ä»¶ä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥createStoreä¸ºå‚æ•°çš„å‡½æ•°ï¼›","text":"é¡¾åæ€ä¹‰ï¼ŒapplyMiddleware å°±æ˜¯ä¸­é—´ä»¶çš„æ„æ€ã€‚applyMiddleware æ¥æ”¶ä¸­é—´ä»¶ä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥createStoreä¸ºå‚æ•°çš„å‡½æ•°ï¼› 123456789101112131415161718192021222324252627/ applyMiddleware.jsexport default function applyMiddleware(...middlewares) &#123; return createStore =&gt; (...args) =&gt; &#123; const store = createStore(...args) let dispatch = () =&gt; &#123; throw new Error( &#x27;Dispatching while constructing your middleware is not allowed. &#x27; + &#x27;Other middleware would not be applied to this dispatch.&#x27; ) &#125; const middlewareAPI = &#123; getState: store.getState, dispatch: (...args) =&gt; dispatch(...args) &#125; // middlewareAPI ä½œä¸ºå‚æ•°æ‰§è¡Œä¸€éæ‰€æœ‰çš„ä¸­é—´ä»¶ const chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)) // æ ¹æ® compose ç”Ÿäº§çš„å…¶å®æ˜¯ç±»ä¼¼ mid1(mid2(mid3(store.dispatch))) // æ‰€ä»¥åœ¨æ•°ç»„æœ€åçš„ middleware å…¶å®æ˜¯ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„ dispatch = compose(...chain)(store.dispatch) return &#123; ...store, dispatch &#125; &#125;&#125; è¿™é‡Œè¦ç»“åˆå®é™…çš„ä¸­é—´ä»¶æ¥ç†è§£ï¼Œä¸‹é¢æ˜¯ logger ä¸­é—´ä»¶çš„ç¤ºä¾‹ä»£ç : å¯ä»¥çœ‹åˆ°ä¸­é—´ä»¶ logger å…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸º dispatch å’Œ getStateï¼Œè¿™ä¸ªå¯¹åº”ä¸Šé¢çš„ middlewareAPI. middleware(middlewareAPI) æ‰§è¡Œåå¾—åˆ°çš„è¿˜æ˜¯ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ nextï¼Œçœ‹ä¸Šé¢çš„ compose, è¿™ä¸ª next å…¶å®å°±æ˜¯ store.dispatchï¼Œè¿”å›çš„æ˜¯æ–°çš„ dispatch. å‡å¦‚æ˜¯ newDispatch,æ ¹æ®ä¸Šé¢çš„ composeï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ª newDispatch æ˜¯ä½œä¸ºä¸­é—´ä»¶é“¾çš„ä¸‹ä¸€ä¸ª middleware çš„å‚æ•°å€¼ï¼ˆå°±æ˜¯ nextï¼‰è¿™æ ·ä¸€ç¯æ‰£ä¸€ç¯ï¼Œå¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„ dispatch åœ¨å®é™…è°ƒç”¨æœ€ç»ˆçš„ dispatch æ—¶ï¼Œä½ ä¼šå‘ç°ï¼Œmiddleware çš„æ‰§è¡Œé¡ºåºåˆå˜æˆæ˜¯ä»å·¦å¾€å³äº†ï¼ˆå› ä¸ºæœ€ç»ˆè¿”å›çš„ dispatch æ˜¯ç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„å‡½æ•°ï¼‰ æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ° next(action)ï¼Œè¿™æ—¶å€™å…¶å®å°±æ˜¯å³è¾¹ä¸€ä¸ª middleware çš„è¿”å›çš„ dispatchï¼Œæ§åˆ¶æƒå°±è½¬åˆ°è¿™ä¸ª middleware äº†ï¼Œ è¿™æ ·æ‰§è¡Œåˆ°æœ€åï¼Œæ§åˆ¶æƒè¿”å›ï¼Œå†æ‰§è¡Œ next åé¢çš„ä»£ç  æœ€ç»ˆå°±æ˜¯å½¢æˆäº†ä¸­é—´ä»¶çš„æ´‹è‘±æ¨¡å‹ï¼Œçœ‹ä¸‹é¢çš„ç¤ºæ„å›¾ 1234567// logger ä¸­é—´ä»¶çš„ç¤ºä¾‹ä»£ç const logger = (&#123; getState, dispatch &#125;) =&gt; next =&gt; action =&gt; &#123; console.log(&quot;dispatching&quot;, action); let result = next(action); console.log(&quot;next state&quot;, store.getState()); return result;&#125;; 1234567891011121314// æ´‹è‘±æ¨¡å‹ç¤ºæ„å›¾+-------------------------------------------------------------+| mid21 || +---------------------------------------------+ || | mid2 +-----------------------------+ | || | | mid2 +-------------+ | | || | | | | | | |-&gt; next() -&gt; next() -&gt;next() -&gt; dispatch() -&gt; -&gt; -&gt; -&gt;| | | | | | | || | | +-------------+ | | || | +-----------------------------+ | || +---------------------------------------------+ |+-------------------------------------------------------------+ æ¯”å¦‚è¿™ä¸ª logger ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºä¼šæ˜¯ æ‰“å° dispatching -&gt; ç­‰å¾… next æ‰§è¡Œè¿”å› -&gt; æ‰“å° next state æ€»ç»“é€šè¿‡ç†Ÿæ‚‰ redux çš„æºç ï¼Œæˆ‘ä»¬ä¹Ÿå¯¹ redux çš„ä»£ç ç»“æ„æœ¬èº«æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ redux çš„æ•´ä¸ªå·¥ä½œæµç¨‹ï¼š è®¾è®¡å…¨å±€ state çš„æ•°æ®ç»“æ„çŠ¶æ€æ ‘ è®¾è®¡æ›´æ”¹ state æ•°æ®ã€çŠ¶æ€çš„ actionType å¸¸é‡ æ ¹æ® actionTypeï¼Œç¼–å†™ actionCreator æ ¹æ®å„ä¸ª actionCreator çš„è¿”å›å€¼ï¼Œç”¨ reducer åšæ•°æ®å¤„ç† æœ‰ä¸ª reducer ä¹‹åï¼Œæˆ‘ä»¬ç”¨ createStore æ¥å¾—åˆ°å…¨å±€å”¯ä¸€çš„ storeï¼Œæ¥ç®¡ç† state ç”¨ bindActionCreator å‡½æ•°å°† actionCreator å’Œ store.dispatch ç»‘å®šèµ·æ¥ï¼Œå¾—åˆ°ä¸€ç»„èƒ½æ›´æ”¹ state çš„å‡½æ•° åˆ†å‘ä½¿ç”¨å„ä¸ªçŠ¶æ€ä¿®æ”¹å‡½æ•°ï¼ˆdispatchï¼‰","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Redux","slug":"Redux","permalink":"http://mariogogogo.github.io/tags/Redux/"}]},{"title":"Reduxæºç æ¢ç´¢-bindActionCreators","slug":"Reduxæºç æ¢ç´¢-bindActionCreators","date":"2019-12-01T16:00:00.000Z","updated":"2020-09-16T09:07:51.000Z","comments":true,"path":"2019/12/02/Reduxæºç æ¢ç´¢-bindActionCreators/","link":"","permalink":"http://mariogogogo.github.io/2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-bindActionCreators/","excerpt":"bindActionCreators çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å°† actionCreator å’Œ dispatch è”ç»“åœ¨ä¸€èµ·ã€‚","text":"bindActionCreators çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å°† actionCreator å’Œ dispatch è”ç»“åœ¨ä¸€èµ·ã€‚ å¯¹äºå¤šä¸ª actionCreatorï¼Œæˆ‘ä»¬å¯ä»¥åƒ reducers ä¸€æ ·ï¼Œç»„ç»‡æˆä¸€ä¸ª key/action çš„ç»„åˆã€‚ç”±äºå¾ˆå¤šæƒ…å†µä¸‹ï¼Œaction æ˜¯ actionCreator è¿”å›çš„ï¼Œå®é™…ä¸Šè¦è¿™æ ·è°ƒç”¨ store.dispatch(actionCreator(...args))ï¼Œå¾ˆéº»çƒ¦æ˜¯å§ï¼Ÿåªèƒ½å†å°è£…ä¸€å±‚å‘—ï¼Œè¿™å°±æ˜¯å‡½æ•°å¼æ€æƒ³çš„ä½“ç°ï¼Œé€šè¿‡åå¤ç»„åˆï¼Œå°†åµŒå¥—å‡½æ•°åˆ†ç¦»ã€‚ï¼ˆåœ¨è¿™é‡Œï¼Œæˆ‘ä¸å¾—ä¸å†å¤¸ä¸€æ¬¡ redux çš„ä½œè€…ï¼‰ 123456789// bindActionCreators.js éƒ¨åˆ†ä»£ç // è¿™ä¸ªæ–¹æ³•çš„åšç”¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å†™çš„è°ƒç”¨æ–¹æ³•ï¼Œæ–¹ä¾¿ä½¿ç”¨// ç»“æœå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°: `dispatch(actionCreator(xxx))`function bindActionCreator(actionCreator, dispatch) &#123; return function() &#123; return dispatch(actionCreator.apply(this, arguments)); &#125;;&#125; compose.jscompose çš„ä»£ç ä¸éš¾ç†è§£ï¼Œå®ƒè°ƒç”¨äº† ES5 çš„ Array.prototype.reduce æ–¹æ³•ï¼Œå°†å½¢å¦‚ fn(arg1)(arg2)(arg3)â€¦çš„æŸ¯é‡ŒåŒ–å‡½æ•°æŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚ 1234567891011export default function compose(...funcs) &#123; if (funcs.length === 0) &#123; return arg =&gt; arg; &#125; if (funcs.length === 1) &#123; return funcs[0]; &#125; return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)));&#125;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Redux","slug":"Redux","permalink":"http://mariogogogo.github.io/tags/Redux/"}]},{"title":"Reduxæºç æ¢ç´¢-combineReducers","slug":"Reduxæºç æ¢ç´¢-combineReducers","date":"2019-12-01T16:00:00.000Z","updated":"2020-09-16T09:07:52.000Z","comments":true,"path":"2019/12/02/Reduxæºç æ¢ç´¢-combineReducers/","link":"","permalink":"http://mariogogogo.github.io/2019/12/02/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-combineReducers/","excerpt":"è¿™ä¸ªå‡½æ•°å¯ä»¥ç»„åˆä¸€ç»„ reducersï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ reducerã€‚","text":"è¿™ä¸ªå‡½æ•°å¯ä»¥ç»„åˆä¸€ç»„ reducersï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ reducerã€‚ ç”±äº redux åªç»´æŠ¤å”¯ä¸€çš„ stateï¼Œéšç€æ•´ä¸ªé¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œstate çŠ¶æ€æ ‘ä¹Ÿä¼šè¶Šæ¥è¶Šåºå¤§ï¼Œstate çš„å±‚çº§ä¹Ÿä¼šè¶Šæ¥è¶Šæ·±ï¼Œå½“æŸä¸ª action.type æ‰€å¯¹åº”çš„ case åªæ˜¯è¦ä¿®æ”¹ state.a.b.c.d.e.f è¿™ä¸ªå±æ€§æ—¶ï¼Œæˆ‘çš„ handleCase å‡½æ•°å†™èµ·æ¥å°±éå¸¸éš¾çœ‹ï¼Œæˆ‘å¿…é¡»åœ¨è¿™ä¸ªå‡½æ•°çš„å¤´éƒ¨éªŒè¯ state å¯¹è±¡æœ‰æ²¡æœ‰é‚£ä¸ªå±æ€§ã€‚è¿™æ˜¯è®©å¼€å‘è€…éå¸¸å¤´ç–¼çš„ä¸€ä»¶äº‹ã€‚ 1234567891011121314151617181920212223242526// è¿”å›ä¸€ä¸ªåˆå¹¶åçš„ reducer å‡½æ•°, state é»˜è®¤å€¼ä¸ºç©ºå¯¹è±¡return function combination(state = &#123;&#125;, action) &#123; if (shapeAssertionError) &#123; throw shapeAssertionError; &#125; //..... let hasChanged = false; const nextState = &#123;&#125;; // å¾ªç¯æ‰§è¡Œ reducerï¼Œè¿™éƒ¨åˆ†å†™çš„å¾ˆæ¸…æ™° for (let i = 0; i &lt; finalReducerKeys.length; i++) &#123; const key = finalReducerKeys[i]; const reducer = finalReducers[key]; const previousStateForKey = state[key]; const nextStateForKey = reducer(previousStateForKey, action); // è¿™é‡ŒéªŒè¯æ˜¯å¦ä¼šæ²¡æœ‰ state è¿”å› if (typeof nextStateForKey === &quot;undefined&quot;) &#123; const errorMessage = getUndefinedStateErrorMessage(key, action); throw new Error(errorMessage); &#125; nextState[key] = nextStateForKey; hasChanged = hasChanged || nextStateForKey !== previousStateForKey; &#125; // state æœ‰æ”¹å˜è¿”å›ä¸‹ä¸€ä¸ª stateï¼Œå¦åˆ™è¿”å›åŸæ¥çš„ state return hasChanged ? nextState : state;&#125;; combineReducerså®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œå®ƒéå†ä¼ å…¥çš„ reducersï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ reducerï¼Œè¿™ä¸ªæ–°å¯¹è±¡çš„ key è·Ÿä¼ å…¥çš„ reducers ä¸€æ ·ï¼Œå®ƒçš„ value åˆ™æ˜¯ä¼ å…¥çš„ reducers çš„ä¸åŒ key å¯¹åº”çš„ value å±•å¼€çš„{ key: value }ã€‚è²Œä¼¼è®²çš„æœ‰ç‚¹ç»•å•Š~ï¼Œä¸¾ä¸ªä¾‹å­å¥½è®²æ˜ç™½ï¼š 123456789var reducers = &#123; todos: (state, action) &#123; // æ­¤å¤„çš„ state å‚æ•°æ˜¯å…¨å±€ state.todoså±æ€§ switch (action.type) &#123;...&#125; // è¿”å›çš„ new state æ›´æ–°åˆ°å…¨å±€ state.todos å±æ€§ä¸­ &#125;, activeFilter: (state, action) &#123; // æ‹¿åˆ° state.activeFilter ä½œä¸ºæ­¤å¤„çš„ state switch (action.type) &#123;...&#125; // new state æ›´æ–°åˆ°å…¨å±€ state.activeFilter å±æ€§ä¸­ &#125;&#125;var rootReducer = combineReducers(reducers) ä¸è¶³combineReducersæ˜¯æœ‰ç¼ºé™·çš„ï¼Œæºç ä¸­ mapValues åªæ˜¯ä¸€çº§æ·±åº¦çš„æ˜ å°„ï¼Œç›®å‰ redux å¹¶æ²¡æœ‰æä¾›ç®€ä¾¿çš„æ˜ å°„åˆ° state.a.b ä¸€çº§ä»¥ä¸Šæ·±åº¦çš„ state çš„æ–¹æ³•ã€‚è¿™æ˜¯å®ƒç›®å‰çš„ä¸è¶³ä¹‹å¤„ã€‚æˆ‘ä»¬åœ¨ä¸æ”¹æºç çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡åµŒå¥— combineReducers æ¥è¾¾åˆ°ç›®çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344var todosReducers = &#123; active: (state, action) =&gt; &#123; //æ‹¿åˆ°å…¨å±€ state.todos.active switch (action.type) &#123; case A: //å¤„ç† A åœºæ™¯ return handleA(state); case B: //å¤„ç† B åœºæ™¯ return handleB(state); default: return state; &#125; &#125;, completed: (state, action) =&gt; &#123; //æ‹¿åˆ°å…¨å±€ state.todos.completed switch (action.type) &#123; case C: //å¤„ç† C åœºæ™¯ return handleC(state); default: return state; &#125; &#125;&#125;;var todosRootReducer = combineReducers(todosReducers);var reducers = &#123; todos: (state, action) =&gt; &#123; //æ‹¿åˆ°å…¨å±€ state.todos switch (action.type) &#123; case A: case B: case C: // A B C åœºæ™¯éƒ½ä¼ é€’ç»™ todosRootReducer return todosRootReducer(state, action); case D: //...handle state default: return state; &#125; &#125;&#125;;//rootReducer(state, action) è¿™é‡Œçš„ state æ˜¯çœŸæ­£çš„å…¨å±€ statevar rootReducer = combineReducers(reducers); å‚è€ƒredux æºç åˆ†æä¸è®¾è®¡æ€è·¯å‰–æ Redux æºç è§£è¯»","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Redux","slug":"Redux","permalink":"http://mariogogogo.github.io/tags/Redux/"}]},{"title":"Reduxæºç æ¢ç´¢-createStore","slug":"Reduxæºç æ¢ç´¢-createStore","date":"2019-11-30T16:00:00.000Z","updated":"2020-09-16T09:07:52.000Z","comments":true,"path":"2019/12/01/Reduxæºç æ¢ç´¢-createStore/","link":"","permalink":"http://mariogogogo.github.io/2019/12/01/Redux%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2-createStore/","excerpt":"redux çš„æºç éå¸¸çš„ç®€æ´ï¼Œæ€»å…±åŠ èµ·æ¥å°±å‡ ç™¾è¡Œï¼Œæ‰€ä»¥ä¸éš¾ç†è§£ï¼›å»ºè®®å…ˆå»ç†Ÿæ‚‰ redux çš„ API å’Œç”¨æ³•å†æ¥çœ‹æœ¬æ–‡ï¼Œä¼šæ›´å¾—å¿ƒåº”æ‰‹ã€‚","text":"redux çš„æºç éå¸¸çš„ç®€æ´ï¼Œæ€»å…±åŠ èµ·æ¥å°±å‡ ç™¾è¡Œï¼Œæ‰€ä»¥ä¸éš¾ç†è§£ï¼›å»ºè®®å…ˆå»ç†Ÿæ‚‰ redux çš„ API å’Œç”¨æ³•å†æ¥çœ‹æœ¬æ–‡ï¼Œä¼šæ›´å¾—å¿ƒåº”æ‰‹ã€‚ å¤§å®¶çœ‹ç›®å½•ç»“æ„ï¼Œä¸€å…±æœ‰ 6 ä¸ªé—®ä»¶ã€‚å…ˆè¯´ä¸‹å„ä¸ªæ–‡ä»¶å¤§æ¦‚åŠŸèƒ½ã€‚ 12345678srcâ”œâ”€â”€ utils #å·¥å…·å‡½æ•° åŒ…æ‹¬æ§åˆ¶å°è¾“å‡ºä¸€ä¸ªè­¦å‘Šï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨çœ‹â”œâ”€â”€ applyMiddleware.js #ä½¿ç”¨è‡ªå®šä¹‰çš„ middleware æ¥æ‰©å±• Reduxâ”œâ”€â”€ bindActionCreators.js #æŠŠ action creators è½¬æˆæ‹¥æœ‰åŒå keys çš„å¯¹è±¡,ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨â”œâ”€â”€ combineReducers.js #ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åº”ç”¨ï¼Œéœ€è¦å¯¹ reducer å‡½æ•° è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† state çš„ä¸€éƒ¨åˆ†â”œâ”€â”€ compose.js #ä»å³åˆ°å·¦æ¥ç»„åˆå¤šä¸ªå‡½æ•°ï¼Œå‡½æ•°ç¼–ç¨‹ä¸­å¸¸ç”¨åˆ°â”œâ”€â”€ createStore.js #åˆ›å»ºä¸€ä¸ª Redux Store æ¥æ”¾æ‰€æœ‰çš„stateâ””â”€â”€ index.js #å…¥å£ js createStore æ˜¯ redux éå¸¸é‡è¦çš„ä¸€ä¸ª APIï¼ŒcreateStore ä¼šç”Ÿæˆä¸€ä¸ª storeï¼Œç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ stateã€‚store ä½œä¸ºä¸€ä¸ªå¯¹è±¡,æä¾›äº†ç›´æ¥è·å–å¯¹è±¡é¡µé¢æ•°æ®getStateæ–¹æ³•,è§¦å‘æ›´æ–°äº† store çš„dispatchæ–¹æ³•,ä»¥åŠè®¢é˜… store çŠ¶æ€å˜åŒ–çš„subscribeæ–¹æ³• 123456const store = &#123; dispatch, getState, subscribe, replaceReducer&#125;; æ€è€ƒå¦‚ä½•å®ç° store?åˆ›å»º store ä»createStoreå‡½æ•°å…¥æ‰‹,ä¸€èˆ¬ç®€å•éœ€è¦æ¥å—reducerå‡½æ•°ä½œä¸ºå‚æ•°. 1234import &#123; createStore &#125; from &quot;redux&quot;;import reduce from &quot;./reduce&quot;;const store = createStore(reduce);export default store; createStore è¿”å›ä¸€ä¸ªå®Œæ•´çš„ store å¯¹è±¡,æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª getState,dispatch å’Œ subscribe æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657export default function createStore(reducer, preloadedState, enhancer) &#123; // åˆ¤æ–­æ¥å—çš„å‚æ•°ä¸ªæ•°ï¼Œæ¥æŒ‡å®š reducer ã€ preloadedState å’Œ enhancer if (typeof preloadedState === &#x27;function&#x27; &amp;&amp; typeof enhancer === &#x27;undefined&#x27;) &#123; enhancer = preloadedState preloadedState = undefined &#125; // å¦‚æœ enhancer å­˜åœ¨å¹¶ä¸”é€‚åˆåˆæ³•çš„å‡½æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨ enhancerï¼Œå¹¶ä¸”ç»ˆæ­¢å½“å‰å‡½æ•°æ‰§è¡Œ if (typeof enhancer !== &#x27;undefined&#x27;) &#123; if (typeof enhancer !== &#x27;function&#x27;) &#123; throw new Error(&#x27;Expected the enhancer to be a function.&#x27;) &#125; return enhancer(createStore)(reducer, preloadedState) &#125; if (typeof reducer !== &#x27;function&#x27;) &#123; throw new Error(&#x27;Expected the reducer to be a function.&#x27;) &#125; // å‚¨å­˜å½“å‰çš„ currentReducer var currentReducer = reducer // å‚¨å­˜å½“å‰çš„çŠ¶æ€ var currentState = preloadedState // å‚¨å­˜å½“å‰çš„ç›‘å¬å‡½æ•°åˆ—è¡¨ var currentListeners = [] // å‚¨å­˜ä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨ var nextListeners = currentListeners var isDispatching = false // è¿™ä¸ªå‡½æ•°å¯ä»¥æ ¹æ®å½“å‰ç›‘å¬å‡½æ•°çš„åˆ—è¡¨ç”Ÿæˆæ–°çš„ä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨å¼•ç”¨ function ensureCanMutateNextListeners() &#123; if (nextListeners === currentListeners) &#123; nextListeners = currentListeners.slice() &#125; &#125; ... getState ... ... subscribe ... ... dispatch ... ... replaceReducer ... ... observable ... dispatch(&#123; type: ActionTypes.INIT &#125;) return &#123; dispatch, subscribe, getState, replaceReducer, [$$observable]: observable &#125;&#125; è¿™å°±æ˜¯ createStore çš„åŸºæœ¬é›å½¢,å®é™…ä¸Šå°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ ä»¥ä¸Šåªæ˜¯æœ¬äººç®€å•çš„åˆ†æä¸æºç ä¸­è¿˜æ˜¯æœ‰ä¸€äº›å‡ºå…¥. æºç ä¸­ createStore æ¥å— 3 ä¸ªå‚æ•°ï¼šreducer, preloadedState, enhancerï¼›ç¬¬ä¸€ä¸ªå‚æ•° reducer å’Œç¬¬ä¸‰ä¸ªå‚æ•° enhancer æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šå…·ä½“ä»‹ç»ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯preloadedStateï¼Œå®ƒæ˜¯ state çš„åˆå§‹å€¼ã€‚ createStore çš„è¿”å›å€¼æ˜¯ dispatchï¼Œsubscribeï¼ŒgetStateï¼ŒreplaceReducerï¼Œ[$$observable]: observableï¼Œå…±åŒç»„æˆäº†ä¸€ä¸ª storeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¹Ÿä¼šè®²åˆ°è®²è¿™äº›æ–¹æ³•ã€‚ 12345678//æºç ä¸­æœ€åreturnreturn &#123; dispatch, subscribe, getState, replaceReducer, [$$observable]: observable&#125;; 1. actionaction ä»£è¡¨çš„æ˜¯ç”¨æˆ·çš„æ“ä½œã€‚redux è§„å®š action ä¸€å®šè¦åŒ…å«ä¸€ä¸ª type å±æ€§ï¼Œä¸” type å±æ€§ä¹Ÿè¦å”¯ä¸€ï¼Œç›¸åŒçš„ typeï¼Œredux è§†ä¸ºåŒä¸€ç§æ“ä½œï¼Œå› ä¸ºå¤„ç† action çš„å‡½æ•° reducer åªåˆ¤æ–­ action ä¸­çš„ type å±æ€§ã€‚ 2. reducerreducer æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œstate ä»¥åŠ action å‡½æ•°è¿”å›çš„ action å¯¹è±¡ï¼Œå¹¶è¿”å›æœ€æ–°çš„ stateï¼Œå¦‚ä¸‹ reducer çš„ demo 123456789101112export default (state, action) =&gt; &#123; switch (action.type) &#123; case A: return handleA(state); case B: return handleB(state); case C: return handleC(state); default: return state; // å¦‚æœæ²¡æœ‰åŒ¹é…ä¸Šå°±ç›´æ¥è¿”å›åŸ state &#125;&#125;; reducer åªæ˜¯ä¸€ä¸ªæ¨¡å¼åŒ¹é…çš„ä¸œè¥¿ï¼ŒçœŸæ­£å¤„ç†æ•°æ®çš„å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯é¢å¤–åœ¨åˆ«çš„åœ°æ–¹å†™çš„ï¼ˆå½“ç„¶ç›´æ¥å†™åœ¨ reducer ä¸­ä¹Ÿæ²¡é—®é¢˜ï¼Œåªæ˜¯ä¸åˆ©äºåæœŸç»´æŠ¤ï¼‰ï¼Œåœ¨ reducer ä¸­è°ƒç”¨ç½¢äº†ã€‚ reducer ä¸ºä»€ä¹ˆå« reducer å‘¢ï¼Ÿå› ä¸º action å¯¹è±¡å„ç§å„æ ·ï¼Œæ¯ç§å¯¹åº”æŸä¸ª case ï¼Œä½†æœ€åéƒ½æ±‡æ€»åˆ° state å¯¹è±¡ä¸­ï¼Œä»å¤šåˆ°ä¸€ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡å°‘( reduce )çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹çš„å‡½æ•°å« reducerã€‚ 3 getState123function getState() &#123; return currentState;&#125; æ•´ä¸ªé¡¹ç›®çš„currentState æ˜¯å¤„äºä¸€ä¸ªé—­åŒ…ä¹‹ä¸­ï¼Œæ‰€ä»¥èƒ½ä¸€ç›´å­˜åœ¨ï¼ŒgetState ä¼šè¿”å›å½“å‰æœ€æ–°çš„ stateã€‚ 4 subscribe123456789101112131415161718192021222324252627282930function subscribe(listener) &#123; //... // æ ‡è®°è®¢é˜…çŠ¶æ€ï¼Œå–æ¶ˆè®¢é˜…æ—¶é¿å…é‡å¤å–æ¶ˆè®¢é˜…çš„é€»è¾‘æ‰§è¡Œï¼Œé€ æˆçš„æ€§èƒ½æŸè€— let isSubscribed = true; // æ·»åŠ  listener ä¹‹å‰ï¼Œç¡®ä¿ä¸æ”¹åŠ¨ currentListenersï¼Œè€Œæ˜¯ currentListeners çš„å¤åˆ¶å‡ºæ¥çš„ nextListeners ensureCanMutateNextListeners(); // æ·»åŠ å›è°ƒå‡½æ•° listener åˆ° nextListeners nextListeners.push(listener); // ğŸŒŸğŸŒŸè®¢é˜…çš„è¿”å›å€¼æ˜¯ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªè¿”å›å€¼æ¥å–æ¶ˆè®¢é˜…ï¼ˆç±»ä¼¼äº setTimeout çš„è¿”å›å€¼å¯ä»¥ç”¨æ¥å–æ¶ˆå®šæ—¶å™¨ï¼‰ return function unsubscribe() &#123; if (!isSubscribed) &#123; return; &#125; // reducer æ‰§è¡Œæ—¶ä¸èƒ½å–æ¶ˆè®¢é˜… if (isDispatching) &#123; throw new Error( &quot;You may not unsubscribe from a store listener while the reducer is executing. &quot; + &quot;See https://redux.js.org/api-reference/store#subscribe(listener) for more details.&quot; ); &#125; // æ ‡è®°ä¸ºæœªè®¢é˜… isSubscribed = false; // è¿™é‡Œä¼šå†æ¬¡ç¡®è®¤ nextListeners å’Œ currentListeners æ—¶ï¼Œæµ…å¤åˆ¶ä¸€ä»½æ–°çš„ nextListeners å‡ºæ¥ ensureCanMutateNextListeners(); // æ‰¾åˆ°éœ€è¦å–æ¶ˆè®¢é˜…çš„ listenerï¼Œé€šè¿‡ splice ä»æ•°ç»„ä¸­åˆ é™¤ï¼Œå˜åŒ–ä½“ç°åœ¨ nextListeners æ•°ç»„ä¸­ const index = nextListeners.indexOf(listener); nextListeners.splice(index, 1); &#125;;&#125; subscribe æ¥æ”¶ä¸€ä¸ª listenerï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™ store æ·»åŠ ç›‘å¬å‡½æ•°ã€‚nextListeners å‚¨å­˜äº†æ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨ã€‚ subscribe çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª unsubscribeï¼Œæ˜¯ä¸€ä¸ªè§£ç»‘å‡½æ•°ï¼Œè°ƒç”¨è¯¥è§£ç»‘å‡½æ•°ï¼Œä¼šå°†å·²ç»æ·»åŠ çš„ç›‘å¬å‡½æ•°åˆ é™¤ï¼Œè¯¥ç›‘å¬å‡½æ•°å¤„äºä¸€ä¸ªé—­åŒ…ä¹‹ä¸­ï¼Œä¼šä¸€ç›´å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨è§£ç»‘å‡½æ•°ä¸­èƒ½åˆ é™¤è¯¥ç›‘å¬å‡½æ•°ã€‚ï¼ˆç”±æ­¤å¯è§ redux æºç è®¾è®¡çš„ç²¾å·§ï¼Œå¤šå¤„åœ°æ–¹å·§ç”¨é—­åŒ…ï¼Œç²¾ç®€äº†è®¸å¤šä»£ç ã€‚ï¼‰ è¿™é‡Œæ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•° ensureCanMutateNextListenersï¼Œæ˜¯å¹²å˜›ç”¨çš„å‘¢ï¼Ÿ 123456// createStore.jsfunction ensureCanMutateNextListeners() &#123; if (nextListeners === currentListeners) &#123; nextListeners = currentListeners.slice(); &#125;&#125; è€ƒè™‘ä¸‹é¢è¿™ç§åœºæ™¯ï¼š dispatch è¿‡ç¨‹ä¸­ï¼Œç›‘å¬å›è°ƒ listener æ•°ç»„ [ a, b, c ,d ] åœ¨å¾ªç¯æ‰§è¡Œï¼Œä½†æ˜¯åˆšæ‰§è¡Œå®Œ aï¼Œa è¢«å–æ¶ˆç›‘å¬äº†ï¼Œè¿™æ—¶å€™æ•°ç»„å°±ä¼šå˜æˆ [ b, c ,d ]ï¼Œc æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹äº†ã€‚åŸæœ¬è¦æ‰§è¡Œç¬¬äºŒé¡¹çš„ b å°±è¢«è·³è¿‡äº†ï¼Œè€Œå»æ‰§è¡Œ c å»äº†ã€‚ è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä¸ºäº†ä¿è¯åœ¨ dispatch è¿‡ç¨‹ä¸­ï¼Œæ–°å¢æˆ–è€…å–æ¶ˆè®¢é˜…ä¸ä¼šå½±å“åˆ°å½“å‰çš„ dispatchï¼Œé¿å…ç±»ä¼¼è¿™ç§åœºæ™¯ä¸‹ bug çš„äº§ç”Ÿã€‚ æµ…å¤åˆ¶ä¸€ä»½ currentListenersï¼Œä¿è¯å½“å‰çš„ dispatch çš„ä¸å˜ï¼Œæ–°å¢æˆ–è€…å–æ¶ˆçš„ä¼šåœ¨ nextListeners ä¸­ä½“ç°ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ¬¡ dispatch æ—¶ã€‚ (subscribe çš„æ³¨é‡Šé‡Œä¹Ÿæœ‰è¯´æ˜) 5 dispatch123456789101112131415161718192021222324function dispatch(action) &#123; // ... try &#123; // å¼€å§‹æ‰§è¡Œ reducer isDispatching = true; // reducer çš„å‚æ•°æ˜¯å½“å‰çš„ state å’ŒæŒ‡å®šçš„ actionï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„ state, æ‰€ä»¥è¦ä¿è¯ reducer ä¸€å®šè¦æœ‰ state è¿”å› currentState = currentReducer(currentState, action); &#125; finally &#123; // reducer æ‰§è¡Œå®Œæˆ isDispatching = false; &#125; /** * è¿™é‡Œè·å–æœ€æ–°çš„å›è°ƒå‡½æ•°æ•°ç»„, ç„¶åå¾ªç¯é€ä¸ªæ‰§è¡Œ. * è¿™é‡Œè®© currentListeners = nextListeners, å¦‚æœè¿™æ—¶å€™å‡ºç°æ–°å¢æˆ–è€…å–æ¶ˆè®¢é˜…, ä¹‹å‰çš„ ensureCanMutateNextListeners å°±èµ·ä½œç”¨äº†, * æ”¹åŠ¨ä¸ä¼šå½±å“å½“å‰æ‰§è¡Œçš„æ•°ç»„, ä¸‹æ¬¡æ‰§è¡Œ dispatch æ‰ä¼šæ‹¿åˆ°æ”¹è¿‡åçš„æ•°ç»„ */ const listeners = (currentListeners = nextListeners); for (let i = 0; i &lt; listeners.length; i++) &#123; const listener = listeners[i]; listener(); &#125; return action;&#125; dispatch æ¥æ”¶ä¸€ä¸ªå‚æ•° actionã€‚ä»£ç ä¼šå…ˆè°ƒç”¨ createStore ä¼ å…¥çš„å‚æ•° reducer æ–¹æ³•ï¼Œreducer æ¥å—å½“å‰ state å’Œ actionï¼Œé€šè¿‡åˆ¤æ–­ actionTypeï¼Œæ¥åšå¯¹åº”çš„æ“ä½œï¼Œå¹¶è¿”å›æœ€æ–°çš„ currentStateã€‚dispatch è¿˜ä¼šè§¦å‘æ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨ï¼Œæ‰€ä»¥æœ€åæ•´ä¸ªç›‘å¬å‡½æ•°åˆ—è¡¨éƒ½ä¼šæŒ‰é¡ºåºæ‰§è¡Œä¸€éã€‚dispatchè¿”å›å€¼å°±æ˜¯ä¼ å…¥çš„actionã€‚ 6 replaceReducer12345678function replaceReducer(nextReducer) &#123; if (typeof nextReducer !== &quot;function&quot;) &#123; throw new Error(&quot;Expected the nextReducer to be a function.&quot;); &#125; currentReducer = nextReducer; dispatch(&#123; type: ActionTypes.INIT &#125;);&#125; replaceReduceræ˜¯æ›¿æ¢å½“å‰çš„ reducer çš„å‡½æ•°ï¼ŒreplaceReducer æ¥å—ä¸€ä¸ªæ–°çš„reducerï¼Œæ›¿æ¢å®Œæˆä¹‹åï¼Œä¼šæ‰§è¡Œ dispatch({ type: ActionTypes.INIT }) ï¼Œç”¨æ¥åˆå§‹åŒ– store çš„çŠ¶æ€ã€‚å®˜æ–¹ä¸¾å‡ºäº†ä¸‰ç§ replaceReducer çš„ä½¿ç”¨åœºæ™¯ï¼Œåˆ†åˆ«æ˜¯ï¼š å½“ä½ çš„ç¨‹åºè¦è¿›è¡Œä»£ç åˆ†å‰²çš„æ—¶å€™ å½“ä½ è¦åŠ¨æ€çš„åŠ è½½ä¸åŒçš„ reducer çš„æ—¶å€™ å½“ä½ è¦å®ç°ä¸€ä¸ªå®æ—¶ reloading æœºåˆ¶çš„æ—¶å€™ 7 observableè¿™ä¸ª API å¹¶ä¸æ˜¯æš´éœ²ç»™ä½¿ç”¨è€…çš„ï¼Œè¿™ä¸ªæ˜¯ redux å†…éƒ¨ç”¨çš„ï¼Œå¤§å®¶ä¸ç”¨æ·±ç©¶ï¼ˆåƒä¸‡ä¸è¦æ­»è„‘ç­‹å•Š~~~ï¼‰ã€‚ä»€ä¹ˆï¼Œä½ ä¸ä¿¡ï¼Ÿå¥½å§ï¼Œå®è¯å‘Šè¯‰ä½ ï¼Œå°±æ˜¯å†…éƒ¨ç”¨çš„ï¼Œåœ¨æµ‹è¯•ä»£ç ä¸­ä¼šç”¨åˆ°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å» test ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ä»Šå¤©å°±å…ˆåˆ†æåˆ°è¿™é‡Œâ€¦..æ‹œé‡Œä¸ªæ‹œ~ğŸ’¤ å‚è€ƒredux æºç åˆ†æä¸è®¾è®¡æ€è·¯å‰–æ Redux æºç è§£è¯»","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Redux","slug":"Redux","permalink":"http://mariogogogo.github.io/tags/Redux/"}]},{"title":"React2019 å¹´æœ€åŠ²çˆ†çš„æ–°ç‰¹æ€§ React-Hooks","slug":"Reactä»Šå¹´æœ€åŠ²çˆ†çš„æ–°ç‰¹æ€§React Hooks","date":"2019-11-27T16:00:00.000Z","updated":"2020-09-16T09:07:45.000Z","comments":true,"path":"2019/11/28/Reactä»Šå¹´æœ€åŠ²çˆ†çš„æ–°ç‰¹æ€§React Hooks/","link":"","permalink":"http://mariogogogo.github.io/2019/11/28/React%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%8A%B2%E7%88%86%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7React%20Hooks/","excerpt":"React åœ¨ v16.8 çš„ç‰ˆæœ¬ä¸­æ¨å‡ºäº† React Hooks æ–°ç‰¹æ€§ï¼Œè™½ç„¶ç¤¾åŒºè¿˜æ²¡æœ‰æœ€ä½³å®è·µå¦‚ä½•åŸºäº React Hooks æ¥æ‰“é€ å¤æ‚åº”ç”¨(è‡³å°‘æˆ‘è¿˜æ²¡æœ‰)ï¼Œå‡­å€Ÿç€é˜…è¯»ç¤¾åŒºä¸­å¤§é‡çš„å…³äºè¿™æ–¹é¢çš„æ–‡ç« ï¼Œä¸‹é¢æˆ‘å°†é€šè¿‡åä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ è®¤è¯†ç†è§£å¹¶å¯ä»¥ç†Ÿç»ƒè¿ç”¨ React Hooks å¤§éƒ¨åˆ†ç‰¹æ€§ã€‚","text":"React åœ¨ v16.8 çš„ç‰ˆæœ¬ä¸­æ¨å‡ºäº† React Hooks æ–°ç‰¹æ€§ï¼Œè™½ç„¶ç¤¾åŒºè¿˜æ²¡æœ‰æœ€ä½³å®è·µå¦‚ä½•åŸºäº React Hooks æ¥æ‰“é€ å¤æ‚åº”ç”¨(è‡³å°‘æˆ‘è¿˜æ²¡æœ‰)ï¼Œå‡­å€Ÿç€é˜…è¯»ç¤¾åŒºä¸­å¤§é‡çš„å…³äºè¿™æ–¹é¢çš„æ–‡ç« ï¼Œä¸‹é¢æˆ‘å°†é€šè¿‡åä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ è®¤è¯†ç†è§£å¹¶å¯ä»¥ç†Ÿç»ƒè¿ç”¨ React Hooks å¤§éƒ¨åˆ†ç‰¹æ€§ã€‚ ä¸ºä»€ä¹ˆ React è¦æä¸€ä¸ª Hooksï¼Ÿ æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼ react éƒ½æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œå°†ä¸€ä¸ªé¡µé¢æ‹†æˆä¸€å †ç‹¬ç«‹çš„ï¼Œå¯å¤ç”¨çš„ç»„ä»¶ï¼Œå¹¶ä¸”ç”¨è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµçš„å½¢å¼å°†è¿™äº›ç»„ä»¶ä¸²è”èµ·æ¥ã€‚ä½†å‡å¦‚ä½ åœ¨å¤§å‹çš„å·¥ä½œé¡¹ç›®ä¸­ç”¨ reactï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ä¸­å®é™…ä¸Šå¾ˆå¤š react ç»„ä»¶å†—é•¿ä¸”éš¾ä»¥å¤ç”¨ã€‚å°¤å…¶æ˜¯é‚£äº›å†™æˆ class çš„ç»„ä»¶ï¼Œå®ƒä»¬æœ¬èº«åŒ…å«äº†çŠ¶æ€ï¼ˆstateï¼‰ï¼Œæ‰€ä»¥å¤ç”¨è¿™ç±»ç»„ä»¶å°±å˜å¾—å¾ˆéº»çƒ¦ã€‚é‚£ä¹‹å‰ï¼Œå®˜æ–¹æ¨èæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæ¸²æŸ“å±æ€§ï¼ˆRender Propsï¼‰å’Œé«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä¸¾ä¾‹è¿™ä¸¤ç§æ¨¡å¼ã€‚ Render Propsæ¸²æŸ“å±æ€§æŒ‡çš„æ˜¯ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop æ¥ä¼ é€’éœ€è¦åŠ¨æ€æ¸²æŸ“çš„ nodes æˆ–ç»„ä»¶ã€‚å¦‚ä¸‹é¢çš„ä»£ç å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ DataProvider ç»„ä»¶åŒ…å«äº†æ‰€æœ‰è·ŸçŠ¶æ€ç›¸å…³çš„ä»£ç ï¼Œè€Œ Cat ç»„ä»¶åˆ™å¯ä»¥æ˜¯ä¸€ä¸ªå•çº¯çš„å±•ç¤ºå‹ç»„ä»¶ï¼Œè¿™æ ·ä¸€æ¥ DataProvider å°±å¯ä»¥å•ç‹¬å¤ç”¨äº†ã€‚ 123456789101112131415161718192021222324import Cat from &#x27;components/cat&#x27;class DataProvider extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; target: &#x27;Zac&#x27; &#125;; &#125; render() &#123; return ( &lt;div&gt; &#123;this.props.render(this.state)&#125; &lt;/div&gt; ) &#125;&#125;&lt;DataProvider render=&#123;data =&gt; ( &lt;Cat target=&#123;data.target&#125; /&gt;)&#125;/&gt;============æ”¹å†™ä¸‹=======&lt;DataProvider&gt; &#123;data =&gt; ( &lt;Cat target=&#123;data.target&#125; /&gt; )&#125;&lt;/DataProvider&gt; Higher-Order Componentsé«˜é˜¶ç»„ä»¶è¿™ä¸ªæ¦‚å¿µå°±æ›´å¥½ç†è§£äº†ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œç»è¿‡ä¸€ç³»åˆ—åŠ å·¥åï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚çœ‹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼ŒwithUser å‡½æ•°å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å…·æœ‰äº†å®ƒæä¾›çš„è·å–ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½ã€‚ 1234567891011const withUser = WrappedComponent =&gt; &#123; const user = sessionStorage.getItem(&quot;user&quot;); return props =&gt; &lt;WrappedComponent user=&#123;user&#125; &#123;...props&#125; /&gt;;&#125;;const UserPage = props =&gt; ( //å¤ç”¨æ¯ä¸€ä¸ªç»„ä»¶éƒ½éœ€è¦è·å–userå‚æ•° &lt;div class=&quot;user-container&quot;&gt; &lt;p&gt;My name is &#123;props.user&#125;!&lt;/p&gt; &lt;/div&gt;);export default withUser(UserPage); å¾ˆå¤šåº“ä¹Ÿè¿ç”¨äº†è¿™ç§æ¨¡å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ React Routerã€‚ä½†æˆ‘ä»¬ä»”ç»†çœ‹è¿™ä¸¤ç§æ¨¡å¼ï¼Œä¼šå‘ç°å®ƒä»¬ä¼šå¢åŠ æˆ‘ä»¬ä»£ç çš„å±‚çº§å…³ç³»ã€‚æœ€ç›´è§‚çš„ä½“ç°ï¼Œæ‰“å¼€ devtool çœ‹çœ‹ä½ çš„ç»„ä»¶å±‚çº§åµŒå¥—æ˜¯ä¸æ˜¯å¾ˆå¤¸å¼ å§ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„é€»è¾‘å¤ªæ··ä¹±æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ componentDidMount ä¸­å‘èµ· ajax è¯·æ±‚è·å–æ•°æ®ï¼Œç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬ç­‰ç­‰ã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åœ¨ componentDidUpdate åšä¸€éåŒæ ·çš„äº‹æƒ…ã€‚å½“é¡¹ç›®å˜å¤æ‚åï¼Œè¿™ä¸€å—çš„ä»£ç ä¹Ÿå˜å¾—ä¸é‚£ä¹ˆç›´è§‚ã€‚ 12345678910111213componentDidMount() &#123;//æ³¨å†Œ this.timer = setInterval(()=&gt;&#123; this.setState(&#123; count: this.state.count+1 &#125;) &#125;,1000) &#125; componentWillMount() &#123; //é”€æ¯ clearInterval(this.timer) &#125; class ä¸­çš„ this ç»‘å®šç”¨ class æ¥åˆ›å»º react ç»„ä»¶æ—¶ï¼Œè¿˜æœ‰ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå°±æ˜¯ this çš„æŒ‡å‘é—®é¢˜ 1&lt;button onClick=&#123;() =&gt; this.handleClick(e)&#125;&gt; éœ€æ±‚å˜æ›´é¡¹ç›®ä¸­éœ€æ±‚å˜æ›´æ˜¯éå¸¸å¸¸è§çš„é—®é¢˜,ä¹‹å‰ç»„ä»¶å†™æˆæ— çŠ¶æ€ç»„ä»¶çš„å½¢å¼ï¼Œå› ä¸ºå®ƒä»¬æ›´æ–¹ä¾¿å¤ç”¨ï¼Œå¯ç‹¬ç«‹æµ‹è¯•ã€‚ç„¶è€Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ function å†™äº†ä¸€ä¸ªç®€æ´å®Œç¾çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåæ¥å› ä¸ºéœ€æ±‚å˜åŠ¨è¿™ä¸ªç»„ä»¶å¿…é¡»å¾—æœ‰è‡ªå·±çš„ stateï¼Œæˆ‘ä»¬åˆå¾—å¾ˆéº»çƒ¦çš„æŠŠ function æ”¹æˆ classã€‚ åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒHooks ä¾¿æ¨ªç©ºå‡ºä¸–äº†ï¼ å…ˆä»ç®€å•çš„ Hooks è¯´èµ·â€“useStateæˆ‘ä»¬çœ‹ä¸€ä¸‹åŸæ¥ç®€å•çš„æœ‰çŠ¶æ€ç»„ä»¶ 123456789101112131415161718class Example extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; count: 0 &#125;; &#125; render() &#123; return ( &lt;div&gt; //æ ¹æ®stateçš„æ”¹å˜é‡æ–°æ¸²æŸ“ &lt;p&gt;You clicked &#123;this.state.count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;Click me&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; ä½¿ç”¨ hooks ä¹‹å 123456789101112131415import &#123; useState &#125; from &#x27;react&#x27;;function Example() &#123; const [count, setCount] = useState(0);&#125;========æˆ–è€…==========//åˆå§‹åŒ–çŠ¶æ€const [state, setState] = useState(()=&gt;&#123; //é»˜è®¤åªæ‰§è¡Œä¸€æ¬¡console.log(&#x27;åªæ‰§è¡Œåˆå§‹åŒ–ä¸€æ¬¡&#x27;); const initialState = someExpensiveComputation(props) return initialState&#125;)//ä½¿ç”¨setState((preState)=&gt;&#123; return &#123;...prevState, ...updatedValues&#125;;&#125;) ç‰¹ç‚¹: setState ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ä¸ä¼šå˜åŒ–ï¼ŒuseState è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ state state å¦‚æœæ˜¯å¯¹è±¡ï¼Œå½“åªæ›´æ–°å¯¹è±¡éƒ¨åˆ†å±æ€§æ—¶ï¼Œstate æ›´æ–°ä¸ä¼šåˆå¹¶å¯¹è±¡ å¦‚æœ state ä¸å‘ç”Ÿå˜åŒ–ï¼Œè°ƒç”¨ setState å°†è·³è¿‡æ›´æ–° å»ºè®®ï¼šå°†åŒä¸€æ—¶é—´æ®µæ›´æ–°çš„ stateï¼Œ ç»„åˆåˆå§‹åŒ–åœ¨ä¸€èµ· è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ 123456function add(n) &#123; const result = 0; return result + 1;&#125;add(1); //1add(1); //1 æ™®é€šå‡½æ•°æ˜¯è®°å¿†ä¸ä½resultçš„å˜é‡çš„. ä¸ºä»€ä¹ˆ useState å¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼ŸuseState æ¥æ”¶çš„åˆå§‹å€¼æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯ string/number/boolean è¿™ç§ç®€å•æ•°æ®ç±»å‹ï¼Œå®ƒå®Œå…¨å¯ä»¥æ¥æ”¶å¯¹è±¡æˆ–è€…æ•°ç»„ä½œä¸ºå‚æ•°ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œä¹‹å‰æˆ‘ä»¬çš„ this.setState åšçš„æ˜¯åˆå¹¶çŠ¶æ€åè¿”å›ä¸€ä¸ªæ–°çŠ¶æ€ï¼Œè€Œ useState æ˜¯ç›´æ¥æ›¿æ¢è€çŠ¶æ€åè¿”å›æ–°çŠ¶æ€ã€‚ 1234function ExampleWithManyStates() &#123; const [age, setAge] = useState(42); const [fruit, setFruit] = useState(&#x27;banana&#x27;); const [todos, setTodos] = useState([&#123; text: &#x27;Learn Hooks&#x27; &#125;]); useState æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚ä¸åŒç»„ä»¶è°ƒç”¨åŒä¸€ä¸ª hook ä¹Ÿèƒ½ä¿è¯å„è‡ªçŠ¶æ€çš„ç‹¬ç«‹æ€§ã€‚react æ˜¯æ€ä¹ˆä¿è¯å¤šä¸ª useState çš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ 123456789//ç¬¬ä¸€æ¬¡æ¸²æŸ“useState(42); //å°†ageåˆå§‹åŒ–ä¸º42useState(&quot;banana&quot;); //å°†fruitåˆå§‹åŒ–ä¸ºbananauseState([&#123; text: &quot;Learn Hooks&quot; &#125;]); //...//ç¬¬äºŒæ¬¡æ¸²æŸ“useState(42); //è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰useState(&quot;banana&quot;); //è¯»å–çŠ¶æ€å˜é‡fruitçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°bananaç›´æ¥è¢«å¿½ç•¥ï¼‰useState([&#123; text: &quot;Learn Hooks&quot; &#125;]); //... å‡å¦‚æˆ‘ä»¬æ”¹ä¸€ä¸‹ä»£ç ï¼š 1234567891011let showFruit = true;function ExampleWithManyStates() &#123; const [age, setAge] = useState(42); if (showFruit) &#123; const [fruit, setFruit] = useState(&quot;banana&quot;); showFruit = false; &#125; const [todos, setTodos] = useState([&#123; text: &quot;Learn Hooks&quot; &#125;]);&#125; react æ˜¯æ ¹æ® useState å‡ºç°çš„é¡ºåºæ¥å®šçš„ 123456789//ç¬¬ä¸€æ¬¡æ¸²æŸ“useState(42); //å°†ageåˆå§‹åŒ–ä¸º42useState(&quot;banana&quot;); //å°†fruitåˆå§‹åŒ–ä¸ºbananauseState([&#123; text: &quot;Learn Hooks&quot; &#125;]); //...//ç¬¬äºŒæ¬¡æ¸²æŸ“useState(42); //è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰// useState(&#x27;banana&#x27;);useState([&#123; text: &quot;Learn Hooks&quot; &#125;]); //è¯»å–åˆ°çš„å´æ˜¯çŠ¶æ€å˜é‡fruitçš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™ ä»€ä¹ˆæ˜¯ Effect Hooks?useEffect ç»„ä»¶æ¸²æŸ“ä¹‹åå¼‚æ­¥æ‰§è¡Œå›è°ƒï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰æ‰§è¡ŒuseLayoutEffect ç»„ä»¶æ¸²æŸ“ä¹‹ååŒæ­¥æ‰§è¡Œå›è°ƒæ¯”å¦‚: 123useEffect(callback); //ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆ useEffectuseEffect(callback, [ä¾èµ–å‚æ•°]); //ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ä¹‹åï¼Œæ ¹æ®ä¾èµ–å‚æ•°åˆ¤æ–­æ˜¯å¦é‡æ–°ç”Ÿæˆ useEffectuseEffect(callback, []); // åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€ æˆ‘ä»¬å†™çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ· ajax è¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹ dom ç­‰ç­‰ã€‚æˆ‘ä»¬ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚ componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmountã€‚è€Œç°åœ¨çš„ useEffect å°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚å®ƒä»¥ä¸€æŠµä¸‰ã€‚ 1234567891011121314151617import &#123; useState, useEffect &#125; from &quot;react&quot;;function Example() &#123; const [count, setCount] = useState(0); // ç±»ä¼¼äºcomponentDidMount å’Œ componentDidUpdate: useEffect(() =&gt; &#123; // æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜ document.title = `You clicked $&#123;count&#125; times`; &#125;); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;Click me&lt;/button&gt; &lt;/div&gt; );&#125; useEffect Hook å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼š componentDidMount componentDidUpdate componentWillUnmount å†æ¢³ç†ä¸€éä¸‹é¢ä»£ç çš„é€»è¾‘ï¼š æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªçŠ¶æ€å˜é‡ countï¼Œå°†å®ƒçš„åˆå§‹å€¼è®¾ä¸º 0ã€‚ ç„¶åæˆ‘ä»¬å‘Šè¯‰ reactï¼Œæˆ‘ä»¬çš„è¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ã€‚æˆ‘ä»¬ç»™ useEffecthook ä¼ äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨ã€‚ åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬çš„å‰¯ä½œç”¨æ˜¯è°ƒç”¨ browser API æ¥ä¿®æ”¹æ–‡æ¡£æ ‡é¢˜ã€‚ å½“ react è¦æ¸²æŸ“æˆ‘ä»¬çš„ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå…ˆè®°ä½æˆ‘ä»¬ç”¨åˆ°çš„å‰¯ä½œç”¨ã€‚ç­‰ react æ›´æ–°äº† DOM ä¹‹åï¼Œå®ƒå†ä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°ã€‚ è¿™é‡Œè¦æ³¨æ„å‡ ç‚¹ï¼š ç¬¬ä¸€ï¼Œreact é¦–æ¬¡æ¸²æŸ“å’Œä¹‹åçš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€éä¼ ç»™ useEffect çš„å‡½æ•°ã€‚è€Œä¹‹å‰æˆ‘ä»¬è¦ç”¨ä¸¤ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°æ¥åˆ†åˆ«è¡¨ç¤ºé¦–æ¬¡æ¸²æŸ“ï¼ˆcomponentDidMountï¼‰ï¼Œå’Œä¹‹åçš„æ›´æ–°å¯¼è‡´çš„é‡æ–°æ¸²æŸ“ï¼ˆcomponentDidUpdateï¼‰ç¬¬äºŒï¼ŒuseEffect ä¸­å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè€Œä¹‹å‰çš„ componentDidMount æˆ– componentDidUpdate ä¸­çš„ä»£ç åˆ™æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚è¿™ç§å®‰æ’å¯¹å¤§å¤šæ•°å‰¯ä½œç”¨è¯´éƒ½æ˜¯åˆç†çš„ useEffect æ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨è¿™ç§åœºæ™¯å¾ˆå¸¸è§ï¼Œå½“æˆ‘ä»¬åœ¨ componentDidMount é‡Œæ·»åŠ äº†ä¸€ä¸ªæ³¨å†Œï¼Œæˆ‘ä»¬å¾—é©¬ä¸Šåœ¨ componentWillUnmount ä¸­ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶è¢«æ³¨é”€ä¹‹å‰æ¸…é™¤æ‰æˆ‘ä»¬æ·»åŠ çš„æ³¨å†Œï¼Œå¦åˆ™å†…å­˜æ³„æ¼çš„é—®é¢˜å°±å‡ºç°äº†ã€‚ æ€ä¹ˆæ¸…é™¤å‘¢ï¼Ÿè®©æˆ‘ä»¬ä¼ ç»™ useEffect çš„å‰¯ä½œç”¨å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å³å¯ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°å°†ä¼šåœ¨ç»„ä»¶ä¸‹ä¸€æ¬¡é‡æ–°æ¸²æŸ“ä¹‹åæ‰§è¡Œã€‚è¿™ç§æ¨¡å¼åœ¨ä¸€äº› pubsub æ¨¡å¼çš„å®ç°ä¸­å¾ˆå¸¸è§ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 123456789101112131415161718192021import &#123; useState, useEffect &#125; from &quot;react&quot;;function FriendStatus(props) &#123; const [isOnline, setIsOnline] = useState(null); function handleStatusChange(status) &#123; setIsOnline(status.isOnline); &#125; useEffect(() =&gt; &#123; ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange); // ä¸€å®šæ³¨æ„ä¸‹è¿™ä¸ªé¡ºåºï¼šå‘Šè¯‰reactåœ¨ä¸‹æ¬¡é‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹åï¼ŒåŒæ—¶æ˜¯ä¸‹æ¬¡è°ƒç”¨ChatAPI.subscribeToFriendStatusä¹‹å‰æ‰§è¡Œcleanup return function cleanup() &#123; ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange); &#125;; &#125;); if (isOnline === null) &#123; return &quot;Loading...&quot;; &#125; return isOnline ? &quot;Online&quot; : &quot;Offline&quot;;&#125; å†ä¸¾ä¸ªå°æå­ 12345678//æ¸…ç†äº‹ä»¶ç»‘å®šuseEffect(() =&gt; &#123; document.querySelector(&quot;#size&quot;).addEventListener(&quot;click&quot;, changeName, false); //æ¸…ç†äº‹ä»¶ç»‘å®š return () =&gt; &#123; document.querySelector(&quot;#size&quot;).removeEventListener(&quot;click&quot;, changeName, false); &#125;;&#125;); è¿™ç§è§£ç»‘çš„æ¨¡å¼ä¸ componentWillUnmount åŒºåˆ«?componentWillUnmount åªä¼šåœ¨ç»„ä»¶è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡è€Œå·²ï¼Œè€Œ useEffect é‡Œçš„å‡½æ•°ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒåŒ…æ‹¬å‰¯ä½œç”¨å‡½æ•°è¿”å›çš„è¿™ä¸ªæ¸…ç†å‡½æ•°ä¹Ÿä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªé—®é¢˜ã€‚ ä¸ºä»€ä¹ˆè¦è®©å‰¯ä½œç”¨å‡½æ•°æ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½æ‰§è¡Œä¸€éï¼Ÿæˆ‘ä»¬åœ¨ componentDidMount æ³¨å†Œï¼Œå†åœ¨ componentWillUnmount æ¸…é™¤æ³¨å†Œã€‚ä½†å‡å¦‚è¿™æ—¶å€™ props.friend.id å˜äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¸å¾—ä¸å†æ·»åŠ ä¸€ä¸ª componentDidUpdate æ¥å¤„ç†è¿™ç§æƒ…å†µï¼šåŸæ¥çš„åšæ³•: 1234567891011121314151617181920212223242526componentDidMount() &#123; ChatAPI.subscribeToFriendStatus( this.props.friend.id, this.handleStatusChange ); &#125; //å¢åŠ ä¸€æ­¥åŠ¨æ€æ”¹å˜id componentDidUpdate(prevProps) &#123; // å…ˆæŠŠä¸Šä¸€ä¸ªfriend.idè§£ç»‘ ChatAPI.unsubscribeFromFriendStatus( prevProps.friend.id, this.handleStatusChange ); // å†é‡æ–°æ³¨å†Œæ–°ä½†friend.id ChatAPI.subscribeToFriendStatus( this.props.friend.id, this.handleStatusChange ); &#125; componentWillUnmount() &#123; ChatAPI.unsubscribeFromFriendStatus( this.props.friend.id, this.handleStatusChange ); &#125; çœ‹åˆ°äº†å—ï¼Ÿå¾ˆç¹çï¼Œè€Œæˆ‘ä»¬ä½† useEffect åˆ™æ²¡è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°åéƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ‰€ä»¥ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š 1.é¡µé¢é¦–æ¬¡æ¸²æŸ“ 2.æ›¿ friend.id=1 çš„æœ‹å‹æ³¨å†Œ 3.çªç„¶ friend.id å˜æˆäº† 2 4.é¡µé¢é‡æ–°æ¸²æŸ“ 5.æ¸…é™¤ friend.id=1 çš„ç»‘å®š 6.æ›¿ friend.id=2 çš„æœ‹å‹æ³¨å†Œâ€¦ æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°æˆ‘ä»¬åªéœ€è¦ç»™ useEffect ä¼ ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰ react åªæœ‰å½“è¿™ä¸ªå‚æ•°çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘ä»¬ä¼ çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ 123useEffect(() =&gt; &#123; document.title = `You clicked $&#123;count&#125; times`;&#125;, [count]); // åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€å¥ å½“æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ªç©ºæ•°ç»„[]æ—¶ï¼Œå…¶å®å°±ç›¸å½“äºåªåœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯ componentDidMount åŠ  componentWillUnmount çš„æ¨¡å¼ã€‚ä¸è¿‡è¿™ç§ç”¨æ³•å¯èƒ½å¸¦æ¥ bugï¼Œå°‘ç”¨ã€‚ æ€ä¹ˆå†™è‡ªå®šä¹‰çš„ Effect Hooks?ä¸ºä»€ä¹ˆè¦è‡ªå·±å»å†™ä¸€ä¸ª Effect Hooks? è¿™æ ·æˆ‘ä»¬æ‰èƒ½æŠŠå¯ä»¥å¤ç”¨çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå¯ä»¥éšæ„æ’æ‹”çš„â€œæ’é”€â€ï¼Œå“ªä¸ªç»„ä»¶è¦ç”¨æ¥ï¼Œæˆ‘å°±æ’è¿›å“ªä¸ªç»„ä»¶é‡Œï¼Œso easyï¼çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œä½ å°±æ˜ç™½äº†ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢å†™çš„ FriendStatus ç»„ä»¶ä¸­åˆ¤æ–­æœ‹å‹æ˜¯å¦åœ¨çº¿çš„åŠŸèƒ½æŠ½å‡ºæ¥ï¼Œæ–°å»ºä¸€ä¸ª useFriendStatus çš„ hook ä¸“é—¨ç”¨æ¥åˆ¤æ–­æŸä¸ª id æ˜¯å¦åœ¨çº¿ã€‚ 12345678910111213141516171819202122232425import &#123; useState, useEffect &#125; from &#x27;react&#x27;;function useFriendStatus(friendID) &#123; const [isOnline, setIsOnline] = useState(null); function handleStatusChange(status) &#123; setIsOnline(status.isOnline); &#125; useEffect(() =&gt; &#123; ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange); return () =&gt; &#123; ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange); &#125;; &#125;); return isOnline;&#125;============è¿™æ—¶å€™FriendStatusç»„ä»¶å°±å¯ä»¥ç®€å†™ä¸ºï¼šfunction FriendStatus(props) &#123; const isOnline = useFriendStatus(props.friend.id); if (isOnline === null) &#123; return &#x27;Loading...&#x27;; &#125; return isOnline ? &#x27;Online&#x27; : &#x27;Offline&#x27;;&#125; å‡å¦‚åˆ«çš„ç»„ä»¶éœ€è¦ä¸€ä¸ªæœ‹å‹åˆ—è¡¨ä¹Ÿéœ€è¦æ˜¾ç¤ºæ˜¯å¦åœ¨çº¿çš„ä¿¡æ¯ï¼š 123456function FriendListItem(props) &#123; //å¼•å…¥æ–¹æ³• const isOnline = useFriendStatus(props.friend.id); return &lt;li style=&#123;&#123; color: isOnline ? &quot;green&quot; : &quot;black&quot; &#125;&#125;&gt;&#123;props.friend.name&#125;&lt;/li&gt;;&#125; ä»€ä¹ˆæ˜¯ useContextç”¨æ¥å¤„ç†å¤šå±‚çº§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œåœ¨ä»¥å‰ç»„ä»¶æ ‘ç§ï¼Œè·¨å±‚çº§ç¥–å…ˆç»„ä»¶æƒ³è¦ç»™å­™å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œé™¤äº†ä¸€å±‚å±‚ props å¾€ä¸‹é€ä¼ ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ React Context API æ¥å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹ 123456789101112131415161718192021import React, &#123; useState &#125; from &quot;react&quot;;const &#123; Provider, Consumer &#125; = React.createContext(null);function Bar() &#123; return &lt;Consumer&gt;&#123;color =&gt; &lt;div&gt;&#123;color&#125;&lt;/div&gt;&#125;&lt;/Consumer&gt;;&#125;function Foo() &#123; return &lt;Bar /&gt;;&#125;function App() &#123; return ( &lt;Provider value=&#123;&quot;grey&quot;&#125;&gt; &lt;Foo /&gt; &lt;/Provider&gt; );&#125;export default App; React Hooks ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useContext è¿›è¡Œæ”¹é€  1234567891011121314151617181920212223import React, &#123; useState, useContext &#125; from &quot;react&quot;;function Bar() &#123; //æ¥å—è¿™ä¸ªå˜é‡ const color = useContext(colorContext); return &lt;div&gt;&#123;color&#125;&lt;/div&gt;;&#125;function Foo() &#123; return &lt;Bar /&gt;;&#125;//é¦–å…ˆå£°æ˜ä¸€ä¸ªå˜é‡const colorContext = React.createContext(&quot;gray&quot;);function App() &#123; return ( &lt;colorContext.Provider value=&#123;&quot;red&quot;&#125;&gt; &lt;Foo /&gt; &lt;/colorContext.Provider&gt; );&#125;export default App; ä¼ é€’ç»™ useContext çš„æ˜¯ context è€Œä¸æ˜¯ consumerï¼Œè¿”å›å€¼å³æ˜¯æƒ³è¦é€ä¼ çš„æ•°æ®äº†ã€‚ç”¨æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ useContext å¯ä»¥è§£å†³ Consumer å¤šçŠ¶æ€åµŒå¥—çš„é—®é¢˜ã€‚ åŸæœ¬åµŒå¥—çš„æ–¹æ³•å±‚çº§å¤ªå¤š 1234567891011121314function HeaderBar() &#123; return ( &lt;CurrentUser.Consumer&gt; &#123;user =&gt; &lt;Notifications.Consumer&gt; &#123;notifications =&gt; &lt;header&gt; Welcome back, &#123;user.name&#125;! You have &#123;notifications.length&#125; notifications. &lt;/header&gt; &#125; &#125; &lt;/CurrentUser.Consumer&gt; );&#125; ç°åœ¨ç”¨ useContext 12345678910function HeaderBar() &#123; //æƒ³è¦ä¼ è¿‡æ¥çš„å€¼ç›´æ¥ç”¨useContextè¯»å–å³å¯,å¯è¯»æ€§å¤§å¤§å¢åŠ  const user = useContext(CurrentUser); const notifications = useContext(Notifications); return ( &lt;header&gt; Welcome back, &#123;user.name&#125;! You have &#123;notifications.length&#125; notifications. &lt;/header&gt; );&#125; ä»€ä¹ˆæ˜¯ useReducerè¿™ä¸ª Hooks åœ¨ä½¿ç”¨ä¸Šå‡ ä¹è·Ÿ Redux/React-Redux ä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€ç¼ºå°‘çš„å°±æ˜¯æ— æ³•ä½¿ç”¨ redux æä¾›çš„ä¸­é—´ä»¶ã€‚ 12345678910111213141516171819202122232425262728293031import React, &#123; useReducer &#125; from &quot;react&quot;;//åˆå§‹åŒ–ä¸€ä¸ªå€¼const initData = &#123; count: 0&#125;;function reducer(state, action) &#123; switch (action.type) &#123; case &quot;add&quot;: return &#123; count: state.count + action.payload &#125;; break; case &quot;remove&quot;: return &#123; count: state.count - action.payload &#125;; break; default: throw new Error(&quot;é”™è¯¯&quot;); &#125;&#125;function App() &#123; //åˆå§‹åŒ– const [state, dispatch] = useReducer(reducer, initData); return ( &lt;&gt; &lt;h1&gt;Count:&#123;state.count&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &quot;add&quot;, payload: 5 &#125;)&#125;&gt;å¢åŠ &lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &quot;remove&quot;, payload: 1 &#125;)&#125;&gt;å‡å°‘&lt;/button&gt; &lt;/&gt; );&#125;export default App; ç”¨æ³•è·Ÿ Redux åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œç®—æ˜¯æä¾›ä¸€ä¸ª mini çš„ Redux ç‰ˆæœ¬ã€‚ ä»€ä¹ˆæ˜¯ useCallbackå››ä¸ªå­—:è®°å¿†å‡½æ•°åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çŠ¯ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š 1234567891011121314class App &#123; render() &#123; return ( &lt;div&gt; &lt;SomeComponent style=&#123;&#123; fontSize: 14 &#125;&#125; doSomething=&#123;() =&gt; &#123; console.log(&quot;do something&quot;); &#125;&#125; /&gt; &lt;/div&gt; ); &#125;&#125; è¿™æ ·å†™æœ‰ä»€ä¹ˆåå¤„å‘¢ï¼Ÿä¸€æ—¦ App ç»„ä»¶çš„ props æˆ–è€…çŠ¶æ€æ”¹å˜äº†å°±ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå³ä½¿è·Ÿ SomeComponent ç»„ä»¶ä¸ç›¸å…³ï¼Œç”±äºæ¯æ¬¡ render éƒ½ä¼šäº§ç”Ÿæ–°çš„ style å’Œ doSomethingï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ SomeComponent é‡æ–°æ¸²æŸ“ï¼Œå€˜è‹¥ SomeComponent æ˜¯ä¸€ä¸ªå¤§å‹çš„ç»„ä»¶æ ‘ï¼Œè¿™æ ·çš„ Virtual Dom çš„æ¯”è¾ƒæ˜¾ç„¶æ˜¯å¾ˆæµªè´¹çš„ï¼Œè§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°†å‚æ•°æŠ½ç¦»æˆå˜é‡ã€‚ 1234567891011121314const fontSizeStyle = &#123; fontSize: 14 &#125;;class App &#123; doSomething = () =&gt; &#123; console.log(&quot;do something&quot;); &#125;; render() &#123; return ( &lt;div&gt; &lt;SomeComponent style=&#123;fontSizeStyle&#125; doSomething=&#123;this.doSomething&#125; /&gt; &lt;/div&gt; ); &#125;&#125; åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ this è¿™ä¸ªå¯¹è±¡æ¥å­˜å‚¨å‡½æ•°ï¼Œè€Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ²¡åŠæ³•è¿›è¡ŒæŒ‚è½½äº†ã€‚æ‰€ä»¥å‡½æ•°ç»„ä»¶åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™å¦‚æœæœ‰ä¼ é€’å‡½æ•°çš„è¯éƒ½ä¼šé‡æ¸²æŸ“å­ç»„ä»¶ã€‚ è€Œæœ‰äº† useCallback å°±ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥é€šè¿‡ useCallback è·å¾—ä¸€ä¸ªè®°å¿†åçš„å‡½æ•°ã€‚ 1234567891011121314function App() &#123; const [count, setCount] = useState(0); const memoizedHandleClick = useCallback(() =&gt; &#123; console.log(&quot;Click happened&quot;); setCount(count + 1); &#125;, []); // ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜ return ( &lt;div&gt; Count:&#123;count&#125; &lt;SomeComponent doSomething=&#123;memoizedHandleClick&#125;&gt;Click Me&lt;/SomeComponent&gt; &lt;/div&gt; );&#125; è€è§„çŸ©ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¸€æ—¦å€¼æˆ–è€…å¼•ç”¨å‘ç”Ÿæ”¹å˜ï¼ŒuseCallback å°±ä¼šé‡æ–°è¿”å›ä¸€ä¸ªæ–°çš„è®°å¿†å‡½æ•°æä¾›ç»™åé¢è¿›è¡Œæ¸²æŸ“ã€‚ è¿™æ ·åªè¦å­ç»„ä»¶ç»§æ‰¿äº† PureComponent æˆ–è€…ä½¿ç”¨ React.memo å°±å¯ä»¥æœ‰æ•ˆé¿å…ä¸å¿…è¦çš„ VDOM æ¸²æŸ“ã€‚è¿˜æœ‰ä¸€äº›æ³¨æ„çš„äº‹æƒ…å¦‚æœæ­¤æ—¶å­ç»„ä»¶å†ä¼ å…¥å…¶ä»–çš„å‚æ•° 123456789101112131415function App() &#123; const [count, setCount] = useState(0); const memoizedHandleClick = useCallback(() =&gt; &#123; console.log(&quot;Click happened&quot;); setCount(count + 1); &#125;, []); // ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜ return ( &lt;div&gt; Count:&#123;count&#125; &lt;SomeComponent doSomething=&#123;memoizedHandleClick&#125; count=&#123;count&#125;&gt; Click Me &lt;/SomeComponent&gt; &lt;/div&gt; );&#125; åªæ‰§è¡Œä¸€æ¬¡å› ä¸ºæ•°ç»„ä¸ºç©ºä»£è¡¨åªæ‰§è¡Œä¸€æ¬¡ ä»€ä¹ˆæ˜¯ useMemouseCallback çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ç”± useMemo æ‰€å–ä»£ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ä½¿ç”¨ useMemo è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚ 12345678910const [count, setCount] = useState(0);const memoizedHandleClick = useMemo( () =&gt; () =&gt; &#123; console.log(&quot;Click happened&quot;); if (count &lt; 3) &#123; setCount(count + 1); &#125; &#125;, [count]); // ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜ å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼š useCallback ä¸ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ï¼Œè€Œæ˜¯å°†å®ƒè¿”å›ç»™ä½ ï¼Œ useMemo ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°å¹¶ä¸”å°†å‡½æ•°æ‰§è¡Œç»“æœè¿”å›ç»™ä½ ã€‚æ‰€ä»¥åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥è¿”å› handleClick æ¥è¾¾åˆ°å­˜å‚¨å‡½æ•°çš„ç›®çš„ã€‚ useCallback å¸¸ç”¨è®°å¿†äº‹ä»¶å‡½æ•°ï¼Œç”Ÿæˆè®°å¿†åçš„äº‹ä»¶å‡½æ•°å¹¶ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚ useMemo æ›´é€‚åˆç»è¿‡å‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæ¯”å¦‚è®°å¿†ç»„ä»¶ã€‚ 123456789101112function Parent(&#123; a, b &#125;) &#123; // Only re-rendered if `a` changes: const child1 = useMemo(() =&gt; &lt;Child1 a=&#123;a&#125; /&gt;, [a]); // Only re-rendered if `b` changes: const child2 = useMemo(() =&gt; &lt;Child2 b=&#123;b&#125; /&gt;, [b]); return ( &lt;&gt; &#123;child1&#125; &#123;child2&#125; &lt;/&gt; );&#125; å½“ a/b æ”¹å˜æ—¶ï¼Œchild1/child2 æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚ä»ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œåªæœ‰åœ¨ç¬¬äºŒä¸ªå‚æ•°æ•°ç»„çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ã€‚ ä»€ä¹ˆæ˜¯ useRefuseRef è·Ÿ createRef ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆå¯¹ DOM å¯¹è±¡çš„å¼•ç”¨ 1234567891011121314151617181920212223import React, &#123; useState, useRef &#125; from &quot;react&quot;;function App() &#123; let [name, setName] = useState(&quot;Nate&quot;); let nameRef = useRef(); const submitButton = () =&gt; &#123; setName(nameRef.current.value); nameRef.current.value = &quot;&quot;; &#125;; return ( &lt;div className=&quot;App&quot;&gt; &lt;p&gt;&#123;name&#125;&lt;/p&gt; &lt;div&gt; &lt;input ref=&#123;nameRef&#125; type=&quot;text&quot; /&gt; &lt;button type=&quot;button&quot; onClick=&#123;submitButton&#125;&gt; Submit &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; );&#125;export default App; useRef è¿”å›çš„å€¼ä¼ é€’ç»™ç»„ä»¶æˆ–è€… DOM çš„ ref å±æ€§ï¼Œå°±å¯ä»¥é€šè¿‡ ref.current å€¼è®¿é—®ç»„ä»¶æˆ–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥å¯¹ DOM è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚ å½“ç„¶ useRef è¿œæ¯”ä½ æƒ³è±¡ä¸­çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒuseRef çš„åŠŸèƒ½æœ‰ç‚¹åƒç±»å±æ€§ï¼Œæˆ–è€…è¯´æ‚¨æƒ³è¦åœ¨ç»„ä»¶ä¸­è®°å½•ä¸€äº›å€¼ï¼Œå¹¶ä¸”è¿™äº›å€¼åœ¨ç¨åå¯ä»¥æ›´æ”¹ã€‚ åˆ©ç”¨ useRef å°±å¯ä»¥ç»•è¿‡ Capture Value çš„ç‰¹æ€§ã€‚å¯ä»¥è®¤ä¸º ref åœ¨æ‰€æœ‰ Render è¿‡ç¨‹ä¸­ä¿æŒç€å”¯ä¸€å¼•ç”¨ï¼Œå› æ­¤æ‰€æœ‰å¯¹ ref çš„èµ‹å€¼æˆ–å–å€¼ï¼Œæ‹¿åˆ°çš„éƒ½åªæœ‰ä¸€ä¸ªæœ€ç»ˆçŠ¶æ€ï¼Œè€Œä¸ä¼šåœ¨æ¯ä¸ª Render é—´å­˜åœ¨éš”ç¦»ã€‚å‚è€ƒä¾‹å­ï¼šç²¾è¯»ã€ŠFunction VS Class ç»„ä»¶ã€‹ ä»€ä¹ˆæ˜¯ React Hooks ä¸­å­˜åœ¨ Capture Value çš„ç‰¹æ€§12345678910111213141516171819202122function MessageThread() &#123; const [message, setMessage] = useState(&quot;&quot;); const showMessage = () =&gt; &#123; alert(&quot;You said: &quot; + message); &#125;; const handleSendClick = () =&gt; &#123; setTimeout(showMessage, 3000); &#125;; const handleMessageChange = e =&gt; &#123; setMessage(e.target.value); &#125;; return ( &lt;&gt; &lt;input value=&#123;message&#125; onChange=&#123;handleMessageChange&#125; /&gt; &lt;button onClick=&#123;handleSendClick&#125;&gt;Send&lt;/button&gt; &lt;/&gt; );&#125; åœ¨ç‚¹å‡» Send æŒ‰é’®å,å†æ¬¡ä¿®æ”¹è¾“å…¥æ¡†çš„å€¼ï¼Œ3 ç§’åçš„è¾“å‡ºä¾ç„¶æ˜¯ç‚¹å‡»å‰è¾“å…¥æ¡†çš„å€¼ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ capture value çš„ç‰¹æ€§ã€‚è€Œåœ¨ç±»ç»„ä»¶ä¸­ 3 ç§’åè¾“å‡ºçš„å°±æ˜¯ä¿®æ”¹åçš„å€¼ï¼Œå› ä¸ºè¿™æ—¶å€™ message æ˜¯æŒ‚è½½åœ¨ this å˜é‡ä¸Šï¼Œå®ƒä¿ç•™çš„æ˜¯ä¸€ä¸ªå¼•ç”¨å€¼ï¼Œå¯¹ this å±æ€§çš„è®¿é—®éƒ½ä¼šè·å–åˆ°æœ€æ–°çš„å€¼ã€‚è®²åˆ°è¿™é‡Œä½ åº”è¯¥å°±æ˜ç™½äº†ï¼ŒuseRef åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå°±å¯ä»¥æœ‰æ•ˆè§„é¿ React Hooks ä¸­ Capture Value ç‰¹æ€§,refæ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„å€¼. 12345678910111213141516171819202122function MessageThread() &#123; const latestMessage = useRef(&quot;&quot;); const showMessage = () =&gt; &#123; alert(&quot;You said: &quot; + latestMessage.current); &#125;; const handleSendClick = () =&gt; &#123; setTimeout(showMessage, 3000); &#125;; const handleMessageChange = e =&gt; &#123; latestMessage.current = e.target.value; &#125;; return ( &lt;&gt; &lt;input value=&#123;latestMessage.current.value&#125; onChange=&#123;handleMessageChange&#125; /&gt; &lt;button onClick=&#123;handleSendClick&#125;&gt;Send&lt;/button&gt; &lt;/&gt; );&#125; åªè¦å°†èµ‹å€¼ä¸å–å€¼çš„å¯¹è±¡å˜æˆ useRefï¼Œè€Œä¸æ˜¯ useStateï¼Œå°±å¯ä»¥èº²è¿‡ capture value ç‰¹æ€§ï¼Œåœ¨ 3 ç§’åå¾—åˆ°æœ€æ–°çš„å€¼ã€‚ ä»€ä¹ˆæ˜¯ useImperativeMethodsé€šè¿‡ useImperativeHandle ç”¨äºè®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…çš„ç´¢ ä»€ä¹ˆæ˜¯ useMutationEffectä»€ä¹ˆæ˜¯ useLayoutEffectuseLayoutEffect åŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ useEffect å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŒæ­¥è°ƒç”¨ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¯¹ DOM çš„æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526import React, &#123; useState, useEffect, useLayoutEffect &#125; from &quot;react&quot;;function App() &#123; const [width, setWidth] = useState(0); useEffect(() =&gt; &#123; console.log(&quot;useEffect&quot;); &#125;); useLayoutEffect(() =&gt; &#123; const title = document.querySelector(&quot;#title&quot;); const titleWidth = title.getBoundingClientRect().width; console.log(&quot;useLayoutEffect&quot;, width, titleWidth, title.getBoundingClientRect()); if (width !== titleWidth) &#123; setTimeout(() =&gt; &#123; setWidth(titleWidth); &#125;, 2000); &#125; &#125;); return ( &lt;div&gt; &lt;h1 id=&quot;title&quot;&gt;hello&lt;/h1&gt; &lt;h2&gt;&#123;width&#125;&lt;/h2&gt; &lt;/div&gt; );&#125;export default App; åŠ å…¥å®šæ—¶å™¨åå†çœ‹çœ‹æ‰§è¡Œé¡ºåº React Hooks ä¸è¶³å°½ç®¡æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä¾‹å­çœ‹åˆ° React Hooks çš„å¼ºå¤§ä¹‹å¤„ï¼Œä¼¼ä¹ç±»ç»„ä»¶å®Œå…¨éƒ½å¯ä»¥ä½¿ç”¨ React Hooks é‡å†™ã€‚ä½†æ˜¯å½“ä¸‹ v16.8 çš„ç‰ˆæœ¬ä¸­ï¼Œè¿˜æ— æ³•å®ç° getSnapshotBeforeUpdate å’Œ componentDidCatch è¿™ä¸¤ä¸ªåœ¨ç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å®˜æ–¹ä¹Ÿè®¡åˆ’åœ¨ä¸ä¹…çš„å°†æ¥åœ¨ React Hooks è¿›è¡Œå®ç°,æœŸå¾…å§!ğŸ˜„ğŸ’ªğŸ»","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Redux å¼‚æ­¥æ–¹æ¡ˆé€‰å‹","slug":"Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹","date":"2019-10-26T16:00:00.000Z","updated":"2020-09-16T09:07:51.000Z","comments":true,"path":"2019/10/27/Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹/","link":"","permalink":"http://mariogogogo.github.io/2019/10/27/Redux%E5%BC%82%E6%AD%A5%E6%96%B9%E6%A1%88%E9%80%89%E5%9E%8B/","excerpt":"æœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„ Redux å¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚","text":"æœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„ Redux å¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚ ç”±äº Redux çš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚ redux-thunkï¼šæŒ‡è·¯å…ˆé©± Redux æœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„ Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„ actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€š Actionï¼Œä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰ Redux çš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚ ç¼ºç‚¹:å°±æ˜¯é‡å¤çš„æ¨¡æ¿ä»£ç å¤ªå¤šï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768import React, &#123;Component&#125; from &#x27;react&#x27;;import &#123;connect&#125; from &#x27;react-redux&#x27;import &#123;Button, Progress,Loading&#125; from &#x27;element-react&#x27;;import &#x27;./App.css&#x27;import &#123; onGetData, onGetDataSuccess, onGetDataFAILED,&#125; from &#x27;./actions&#x27;class App extends Component &#123; render() &#123; const &#123; value, onAdd, data, loaddingVisible, &#125; = this.props return ( &lt;div className=&quot;counter_wrap&quot;&gt; ... &lt;Button type=&quot;primary&quot; onClick=&#123;onAsyncGetData&#125;&gt;å¼‚æ­¥åŠ è½½&lt;/Button&gt; &lt;Loading text=&quot;æ‹¼å‘½åŠ è½½ä¸­&quot; loading=&#123;!!loaddingVisible&#125;&gt; &#123; data.length === 0 ? &lt;h1&gt;åŠ è½½ä¹‹åå¯è§&lt;/h1&gt; : &lt;div&gt;&#123;data[0].name&#125;&lt;/div&gt; &#125; &lt;/Loading&gt; &lt;/div&gt; ); &#125;&#125;const mapStateToProps = state =&gt; &#123; const &#123;value,loaddingVisible,data&#125; = state; return &#123; value:value, data:data, loaddingVisible:loaddingVisible &#125;&#125;const mapDispatchToProps = dispatch =&gt; &#123; return &#123; ... onAsyncGetData:()=&gt;&#123; dispatch(onGetData()) fetch(&#x27;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&#x27;, &#123; method: &#x27;POST&#x27;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;) &#125;).then(res =&gt; res.json()) .then(data=&gt;&#123; console.log(data) const &#123;success,results&#125; = data; setTimeout(()=&gt;&#123; dispatch(onGetDataSuccess(results)) &#125;,2000) &#125;) .catch(error=&gt;&#123; console.log(error) dispatch(onGetDataFAILED()) &#125;) &#125; &#125;&#125;export default connect(mapStateToProps, mapDispatchToProps)(App) è¿™å·²ç»æ˜¯æœ€ç®€å•çš„åœºæ™¯äº†ï¼Œè¯·æ³¨æ„ï¼šæˆ‘ä»¬ç”šè‡³è¿˜æ²¡å†™ä¸€è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æœæ¯ä¸ªå¼‚æ­¥å¤„ç†éƒ½åƒè¿™æ ·ï¼Œé‡å¤ä¸”æ— æ„ä¹‰çš„å·¥ä½œä¼šå˜æˆæ˜æ˜¾çš„é˜»ç¢ã€‚ å¦ä¸€æ–¹é¢ï¼ŒåƒGET_DATA_SUCCESSã€GET_DATA_FAILEDè¿™æ ·çš„å­—ç¬¦ä¸²å£°æ˜ä¹Ÿéå¸¸æ— è¶£ä¸”æ˜“é”™ã€‚å¦‚æœä¸€ä¸ªå¼‚æ­¥éœ€è¦é‚£ä¹ˆå¤šçŠ¶æ€,é‚£ä¹ˆ 5,6 ä¸ªå¼‚æ­¥éƒ½éœ€è¦é‚£ä¹ˆå¤šçŠ¶æ€.å¤ªç¹çäº† redux-actionsï¼šç®€åŒ– redux çš„ä½¿ç”¨Redux è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯é‡Œé¢è¿˜æ˜¯æœ‰äº›é‡å¤ä»£ç ï¼Œæ‰€ä»¥æœ‰äº† redux-actions æ¥ç®€åŒ–é‚£äº›é‡å¤ä»£ç ã€‚ è¿™éƒ¨åˆ†ç®€åŒ–å·¥ä½œä¸»è¦é›†ä¸­åœ¨æ„é€  action å’Œå¤„ç† reducers æ–¹é¢ã€‚ å…ˆæ¥çœ‹çœ‹åŸå…ˆçš„ actions 123456789101112131415161718192021222324252627import axios from &quot;axios&quot;;import * as T from &quot;./actionTypes&quot;;export const changeBtnText = text =&gt; &#123; return &#123; type: T.CHANGE_BTN_TEXT, payload: text &#125;;&#125;;export const changeBtnTextAsync = () =&gt; &#123; return (dispatch, getState) =&gt; &#123; if (!getState().isLoading) &#123; dispatch(changeBtnText(&quot;æ­£åœ¨åŠ è½½ä¸­&quot;)); &#125; axios .get(&quot;http://test.com&quot;) .then(() =&gt; &#123; if (getState().isLoading) &#123; dispatch(changeBtnText(&quot;åŠ è½½å®Œæ¯•&quot;)); &#125; &#125;) .catch(() =&gt; &#123; dispatch(changeBtnText(&quot;åŠ è½½æœ‰è¯¯&quot;)); &#125;); &#125;;&#125;; ç„¶åå†æ¥çœ‹çœ‹ä¿®æ”¹åçš„ï¼šè¿™é‡Œæ³¨æ„åˆ°ï¼Œå¼‚æ­¥çš„ action å°±ä¸è¦ç”¨ createActionï¼Œå› ä¸ºè¿™ä¸ª createAction è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå¯¼è‡´ redux-thunk çš„ä»£ç æ²¡æœ‰èµ·åˆ°ä½œç”¨ã€‚ è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ createActions è¿™ä¸ªå‡½æ•°åŒæ—¶åˆ›å»ºå¤šä¸ª actionï¼Œä½†æ˜¯è®²é“ç†ï¼Œè¿™ä¸ªè¯­æ³•å¾ˆå¥‡æ€ªï¼Œç”¨ createAction å°±å¥½ã€‚ åŒæ · redux-actions å¯¹ reducer çš„éƒ¨åˆ†ä¹Ÿè¿›è¡Œäº†å¤„ç†ï¼Œæ¯”å¦‚ handleAction ä»¥åŠ handelActionsã€‚ 123456789101112131415161718192021222324import axios from &quot;axios&quot;;import * as T from &quot;./actionTypes&quot;;import &#123; createAction &#125; from &quot;redux-actions&quot;;//æ™®é€šactionä¼ å€¼export const changeBtnText = createAction(T.CHANGE_BTN_TEXT, text =&gt; text);export const changeBtnTextAsync = () =&gt; &#123; return (dispatch, getState) =&gt; &#123; if (!getState().isLoading) &#123; dispatch(changeBtnText(&quot;æ­£åœ¨åŠ è½½ä¸­&quot;)); &#125; axios .get(&quot;http://test.com&quot;) .then(() =&gt; &#123; if (getState().isLoading) &#123; dispatch(changeBtnText(&quot;åŠ è½½å®Œæ¯•&quot;)); &#125; &#125;) .catch(() =&gt; &#123; dispatch(changeBtnText(&quot;åŠ è½½æœ‰è¯¯&quot;)); &#125;); &#125;;&#125;; çœ‹çš„å‡ºæ¥actionsçš„ä»£ç é‡ä¹Ÿæ²¡æœ‰å‘ç”Ÿå˜åŒ–,å†çœ‹çœ‹reducers 12345678910111213141516171819202122232425import &#123; handleActions &#125; from &quot;redux-actions&quot;;import * as T from &quot;./actionTypes&quot;;const initialState = &#123; btnText: &quot;æˆ‘æ˜¯æŒ‰é’®&quot;&#125;;const pageMainReducer = handleActions( &#123; [T.CHANGE_BTN_TEXT]: &#123; next(state, action) &#123; return &#123; ...state, btnText: action.payload &#125;; &#125;, throw(state) &#123; return state; &#125; &#125; &#125;, initialState);export default pageMainReducer; redux-promiseï¼šredux-actions çš„å¥½åŸºå‹ï¼Œè½»æ¾åˆ›å»ºå’Œå¤„ç†å¼‚æ­¥ actionç”±äº redux-thunk å†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚redux-promiseåˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚ å®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ª middlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰ action çš„ payload å±æ€§æ˜¯ Promise å¯¹è±¡æ—¶ï¼Œå°±ä¼šï¼š è‹¥ resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤ action çš„æ‹·è´ï¼Œä½† payload ä¸º promise çš„ valueï¼Œå¹¶è®¾ status å±æ€§ä¸ºâ€successâ€ è‹¥ rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤ action çš„æ‹·è´ï¼Œä½† payload ä¸º promise çš„ reasonï¼Œå¹¶è®¾ status å±æ€§ä¸ºâ€errorâ€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475import React, &#123;Component&#125; from &#x27;react&#x27;;import &#123;connect&#125; from &#x27;react-redux&#x27;import &#123;Button, Progress,Loading&#125; from &#x27;element-react&#x27;;import &#123;createAction&#125; from &#x27;redux-actions&#x27;import &#x27;./App.css&#x27;import &#123; onAddToPromise,&#125; from &#x27;./actions&#x27;class App extends Component &#123; render() &#123; const &#123; value, onAdd, data, error, loaddingVisible, onRemove, onAddIfOdd, onAsyncAddOne, onAsyncGetData, onPromise, &#125; = this.props return ( &lt;div className=&quot;counter_wrap&quot;&gt; ... &lt;Button type=&quot;primary&quot; onClick=&#123;onPromise&#125;&gt;Promiseå¼‚æ­¥åŠ è½½&lt;/Button&gt; &#123; error.length &gt; 0 &amp;&amp; &lt;h1&gt;&#123;error&#125;&lt;/h1&gt; &#125; &lt;h1&gt;&#123;data&#125;&lt;/h1&gt; &lt;/div&gt; ); &#125;&#125;const mapStateToProps = state =&gt; &#123; const &#123;value,loaddingVisible,data,error&#125; = state; return &#123; value:value, data:data, error:error, loaddingVisible:loaddingVisible &#125;&#125;const mapDispatchToProps = dispatch =&gt; &#123; return &#123; ... onPromise:()=&gt;&#123; dispatch(onGetData()) //createActionå‡½æ•°çš„ç¬¬ä¸€ä¸ªå°±æ˜¯typeå€¼ï¼Œåé¢æ¥å—ä¸€ä¸ªå‡½æ•°ã€‚ const promise = createAction(&#x27;ADD_PROMISE&#x27;,()=&gt;&#123; return new Promise((resolve, reject) =&gt;&#123; fetch(&#x27;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&#x27;, &#123; method: &#x27;POST&#x27;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;) &#125;).then(res =&gt; res.json()) .then(data =&gt; &#123; resolve(data) &#125;).catch(error=&gt;&#123; reject(error) &#125;) &#125;) &#125;) console.log(&#x27;promise&#x27;,promise()) dispatch(promise()) &#125; &#125;&#125;export default connect(mapStateToProps, mapDispatchToProps)(App) æˆ‘ä»¬å†çœ‹æ¥æ¥ reducer å¾—å†™æ³•handleActionsçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„ key å°±æ˜¯ action çš„ type çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åˆå§‹å€¼çš„è®¾ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132//reducers.jsimport &#123; handleActions &#125; from &quot;redux-actions&quot;;const initData = &#123; value: 0, data: [], loaddingVisible: false, error: &quot;&quot;&#125;;export default handleActions( &#123; ADD_PROMISE: &#123; //è¯·æ±‚æˆåŠŸå¤„ç† next(state, action) &#123; const &#123; results, success &#125; = action.payload; return &#123; ...state, data: results[0].name &#125;; &#125;, //é”™è¯¯å¤„ç† throw(state, action) &#123; return &#123; ...state, error: action.payload.toString() &#125;; &#125; &#125; &#125;, initData); é”™è¯¯å¾—æƒ…å†µä¸‹å¦‚ä½•è¿”å›å‘¢? redux å¤šä¸ªæ¥å£åŒæ—¶è°ƒç”¨å¹¶å‘æ±‚å€¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748export const onPromiseAction = createAction(&quot;ADD_PROMISE&quot;, () =&gt; &#123; return Promise.all([asyncGetMockTest(), asyncGetMockTest2()]) .then(data =&gt; &#123; console.log(&quot;data&quot;, data); return Promise.resolve(data); &#125;) .catch(error =&gt; &#123; return Promise.reject(error); &#125;);&#125;);const asyncGetMockTest = () =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; fetch(&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&quot;, &#123; method: &quot;POST&quot;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &quot;Content-Type&quot;: &quot;application/json&quot; &#125;) &#125;) .then(res =&gt; res.json()) .then(data =&gt; &#123; resolve(data); &#125;) .catch(error =&gt; &#123; reject(error); &#125;); &#125;);&#125;;const asyncGetMockTest2 = () =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; fetch(&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test2&quot;, &#123; method: &quot;POST&quot;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &quot;Content-Type&quot;: &quot;application/json&quot; &#125;) &#125;) .then(res =&gt; res.json()) .then(data =&gt; &#123; resolve(data); &#125;) .catch(error =&gt; &#123; reject(error); &#125;); &#125;);&#125;; å†çœ‹çœ‹ reducers ä¸­ 12345678910111213141516 ADD_PROMISE: &#123; next(state, action) &#123; console.log(&#x27;action&#x27;,action) // actionæ¥å—åˆ°æ•°ç»„å¯¹æ•°ç»„å±•å¼€æ±‚å€¼ return &#123; ...state, &#125;; &#125;, throw(state, action) &#123; return &#123; ...state, &#125; &#125;, &#125;,&#125;, initData); è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»å¦‚ä½•å¤„ç†æ ¹æ®è¯·æ±‚ 3 ä¹‹åå†è°ƒç”¨è¯·æ±‚ 4 12345678910111213141516171819202122232425262728293031323334353637383940414243export const onPromiseAction = createAction(&quot;ADD_PROMISE&quot;, async () =&gt; &#123; const test3 = await asyncGetMockTest3(); console.log(&quot;test3&quot;, test3); if (test3.success) &#123; const test4 = await asyncGetMockTest4(); return Promise.resolve(test4); &#125; return Promise.resolve(&quot;å¤±è´¥&quot;);&#125;);//test3const asyncGetMockTest3 = async () =&gt; &#123; return await fetch(&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test2&quot;, &#123; method: &quot;POST&quot;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &quot;Content-Type&quot;: &quot;application/json&quot; &#125;) &#125;) .then(res =&gt; res.json()) .then(data =&gt; &#123; return data; &#125;) .catch(error =&gt; &#123; return error; &#125;);&#125;;//test4const asyncGetMockTest4 = async () =&gt; &#123; return await fetch(&quot;http://mock.52react.cn/mock/5d886fc46cacdb72c1cb5ff2/v2.2/test&quot;, &#123; method: &quot;POST&quot;, // or &#x27;PUT&#x27; body: JSON.stringify(&#123;&#125;), // data can be `string` or &#123;object&#125;! headers: new Headers(&#123; &quot;Content-Type&quot;: &quot;application/json&quot; &#125;) &#125;) .then(res =&gt; res.json()) .then(data =&gt; &#123; return data; &#125;) .catch(error =&gt; &#123; return error; &#125;);&#125;; æ€»ç»“æ€»çš„æ¥è¯´ï¼š redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„çŠ¶æ€å®¹å™¨ï¼Œ react-redux æ˜¯å°† store å’Œ react ç»“åˆèµ·æ¥ï¼Œä½¿å¾—æ•°æ®å±•ç¤ºå’Œä¿®æ”¹å¯¹äº react é¡¹ç›®è€Œè¨€æ›´ç®€å• redux ä¸­é—´ä»¶å°±æ˜¯åœ¨ dispatch action å‰å¯¹ action åšä¸€äº›å¤„ç† redux-thunk ç”¨äºå¯¹å¼‚æ­¥åšæ“ä½œ redux-actions ç”¨äºç®€åŒ– redux æ“ä½œ redux-promise å¯ä»¥é…åˆ redux-actions ç”¨æ¥å¤„ç† Promise å¯¹è±¡ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œæ›´ç®€å• redux-saga å¯ä»¥èµ·åˆ°ä¸€ä¸ªæ§åˆ¶å™¨çš„ä½œç”¨ï¼Œé›†ä¸­å¤„ç†è¾¹é™…æ•ˆç”¨ï¼Œå¹¶ä½¿å¾—å¼‚æ­¥æ“ä½œçš„å†™æ³•æ›´ä¼˜é›…ã€‚ OKï¼Œè™½ç„¶è¯´ä¸æƒ³å†™é‚£ä¹ˆå¤šï¼Œç»“æœè¿˜æ˜¯å†™äº†ä¸€å¤§å †ã€‚","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€ç±»å‹æ¨æ–­","slug":"TypeScript ç³»åˆ—ç±»å‹æ¨æ–­","date":"2019-10-04T16:00:00.000Z","updated":"2020-09-16T09:07:53.000Z","comments":true,"path":"2019/10/05/TypeScript ç³»åˆ—ç±»å‹æ¨æ–­/","link":"","permalink":"http://mariogogogo.github.io/2019/10/05/TypeScript%20%E7%B3%BB%E5%88%97%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/","excerpt":"ç±»å‹æ˜¯åœ¨å“ªé‡Œå¦‚ä½•è¢«æ¨æ–­çš„?","text":"ç±»å‹æ˜¯åœ¨å“ªé‡Œå¦‚ä½•è¢«æ¨æ–­çš„? TypeScript é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ åŸºç¡€1let x = 3; å˜é‡xçš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚ è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å€¼å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚ é€šç”¨ç±»å‹1let x = [0, 1, null]; ä¸ºäº†æ¨æ–­ x çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚ è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©ï¼šnumberå’Œnullã€‚ è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚ 1let zoo = [new Rhino(), new Elephant(), new Snake()]; è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®©zooè¢«æ¨æ–­ä¸ºAnimal[]ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯Animalç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚ ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š 1let zoo: Animal[] = [new Rhino(), new Elephant(), new Snake()]; ä¸Šä¸‹æ–‡ç±»å‹è¿™ä¸ªä¾‹å­ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹é”™è¯¯ï¼ŒTypeScript ç±»å‹æ£€æŸ¥å™¨ä½¿ç”¨Window.onmousedownå‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚ å› æ­¤ï¼Œå°±èƒ½æ¨æ–­å‡ºeventå‚æ•°çš„ç±»å‹äº†ã€‚ å¦‚æœå‡½æ•°è¡¨è¾¾å¼ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡ç±»å‹çš„ä½ç½®ï¼Œeventå‚æ•°çš„ç±»å‹éœ€è¦æŒ‡å®šä¸ºanyï¼Œè¿™æ ·ä¹Ÿä¸ä¼šæŠ¥é”™äº†ã€‚ 123window.onmousedown = function(event) &#123; console.log(event.clickTime); //&lt;- Error&#125;; ä¿®æ”¹ 123window.onmousedown = function(mouseEvent: any) &#123; console.log(mouseEvent.button); //&lt;- Now, no error is given&#125;; ä¸Šä¸‹æ–‡å½’ç±»ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚ é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚ ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š 123456789101112class Animal &#123; public numLen: number;&#125;class Bee extends Animal &#123;&#125;class Lion extends Animal &#123;&#125;function createZoo(): Animal[] &#123; return [new Bee(), new Lion()];&#125;","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€æšä¸¾","slug":"TypeScriptç³»åˆ—æšä¸¾","date":"2019-09-23T16:00:00.000Z","updated":"2020-09-16T09:07:54.000Z","comments":true,"path":"2019/09/24/TypeScriptç³»åˆ—æšä¸¾/","link":"","permalink":"http://mariogogogo.github.io/2019/09/24/TypeScript%E7%B3%BB%E5%88%97%E6%9E%9A%E4%B8%BE/","excerpt":"ä»€ä¹ˆæ˜¯æšä¸¾å¦‚ TypeScript å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œæšä¸¾ç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹é›†çš„æ‰©å……ã€‚å¯¹äºç†Ÿæ‚‰ C# çš„å¼€å‘è€…æ¥è¯´ï¼Œæšä¸¾ç±»å‹å¹¶ä¸é™Œç”Ÿï¼Œå®ƒèƒ½å¤Ÿç»™ä¸€ç³»åˆ—æ•°å€¼é›†åˆæä¾›å‹å¥½çš„åç§°ï¼Œä¹Ÿå°±æ˜¯è¯´æšä¸¾è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå‘½åå…ƒç´ çš„é›†åˆï¼Œå› è€Œå®ƒèƒ½å¤Ÿä½¿æ‚¨çš„ç¨‹åºé¿å…å› ç¡¬ç¼–ç çš„å€¼è€Œæ˜¾æ‚ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚","text":"ä»€ä¹ˆæ˜¯æšä¸¾å¦‚ TypeScript å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œæšä¸¾ç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹é›†çš„æ‰©å……ã€‚å¯¹äºç†Ÿæ‚‰ C# çš„å¼€å‘è€…æ¥è¯´ï¼Œæšä¸¾ç±»å‹å¹¶ä¸é™Œç”Ÿï¼Œå®ƒèƒ½å¤Ÿç»™ä¸€ç³»åˆ—æ•°å€¼é›†åˆæä¾›å‹å¥½çš„åç§°ï¼Œä¹Ÿå°±æ˜¯è¯´æšä¸¾è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå‘½åå…ƒç´ çš„é›†åˆï¼Œå› è€Œå®ƒèƒ½å¤Ÿä½¿æ‚¨çš„ç¨‹åºé¿å…å› ç¡¬ç¼–ç çš„å€¼è€Œæ˜¾æ‚ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ ç®€å•è¯´èµ·é»˜è®¤æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯åŸºäº 0 çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªå€¼æ˜¯ 0ï¼Œåé¢çš„å€¼ä¾æ¬¡é€’å¢ã€‚ä¸è¦æ‹…å¿ƒï¼Œå½“ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æ˜¾å¼æŒ‡å®šï¼Œåªè¦ä¸å‡ºç°é‡å¤å³å¯ï¼Œæ²¡æœ‰è¢«æ˜¾å¼æŒ‡å®šçš„å€¼ï¼Œéƒ½ä¼šåœ¨å‰ä¸€ä¸ªå€¼çš„åŸºç¡€ä¸Šé€’å¢ã€‚ 123456enum Color &#123;Red, Green, Blue&#125;let c: Color = Color.Green; // 1 æˆ–è€… 12enum Color &#123;Red = 1, Green, Blue = 4&#125;let c: Color = Color.Green; // 2 æšä¸¾æœ‰ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç‰¹æ€§ï¼Œå°±æ˜¯æ‚¨ä¹Ÿå¯ä»¥å‘æšä¸¾ä¼ é€’ä¸€ä¸ªæ•°å€¼ï¼Œç„¶åè·å–å®ƒå¯¹åº”çš„åç§°å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼ 2ï¼Œä½†æ˜¯ä¸æ¸…æ¥šåœ¨ Color æšä¸¾ä¸­ä¸ä¹‹å¯¹åº”çš„åç§°æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ¥è¿›è¡Œæ£€ç´¢ï¼š åå‘æ˜ å°„é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§ååšä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡ä¹‹å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº† åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š 123enum Color &#123;Red = 1, Green, Blue&#125;let colorName: string = Color[2]; // 2å€¼çš„ä¸æ˜¯ä¸‹æ ‡ è€Œæ˜¯greençš„å€¼ &#x27;Green&#x27; ä½†æ˜¯åƒä¸Šé¢çš„è¿™ç§å†™æ³•ä¸æ˜¯å¤ªå¥½ï¼Œå› ä¸ºå¦‚æœæ‚¨ç»™å®šçš„æ•°å€¼æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„æšä¸¾é¡¹ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ undefinedã€‚æ‰€ä»¥ï¼Œå¦‚æœæ‚¨æƒ³è¦å¾—åˆ°æŒ‡å®šæšä¸¾é¡¹çš„å­—ç¬¦ä¸²åç§°ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„å†™æ³•ï¼š 1let colorName: string = Color[Color.Green]; // &#x27;Green&#x27; å­—ç¬¦ä¸²æšä¸¾å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„ è¿è¡Œæ—¶çš„å·®åˆ«ã€‚ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚ 123456enum Direction &#123; Up = &quot;UP&quot;, Down = &quot;DOWN&quot;, Left = &quot;LEFT&quot;, Right = &quot;RIGHT&quot;,&#125; ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–,å­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚ å¼‚æ„æšä¸¾(ä¸æ¨è)æšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜(æˆ‘ä»¬ä¸å»ºè®®ä½ æ€ä¹ˆåš) 1234enum BooleanLikeHeterogeneousEnum &#123; No = 0, Yes = &quot;YES&quot;,&#125; è¿è¡Œæ—¶çš„æšä¸¾æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡123enum E &#123; X, Y, Z&#125;ä½¿ç”¨123function f(obj: &#123; X: number &#125;) &#123; return obj.X;&#125; constæšä¸¾å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ constæšä¸¾ã€‚ å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ constä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚ 12345const enum Enum &#123; A = 1, B = A * 2&#125; å¤–éƒ¨æšä¸¾å¤–éƒ¨æšä¸¾ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚ 123456declare enum Enum &#123; A = 1, B, C = 2&#125; è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯ å¸¸é‡æˆ– è®¡ç®—å‡ºæ¥çš„. 1enum E &#123; X &#125; æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼åˆå§‹åŒ–ã€‚ å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ˜¯TypeScriptè¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚ å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰ ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰ å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼ ä¸€å…ƒè¿ç®—ç¬¦ +, -, ~å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼ å¸¸é‡æšä¸¾è¡¨è¾¾å¼åšä¸ºäºŒå…ƒè¿ç®—ç¬¦ +, -, *, /, %, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, &amp;, |, ^çš„æ“ä½œå¯¹è±¡ã€‚ è‹¥å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º NaNæˆ– Infinityï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚ 123456789enum FileAccess &#123; // constant members None, Read = 1 &lt;&lt; 1, Write = 1 &lt;&lt; 2, ReadWrite = Read | Write, // computed member G = &quot;123&quot;.length&#125; å‚è€ƒç®€ä¹¦-TypeScript æ•°æ®ç±»å‹â€”â€”æšä¸¾ (Enum)","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€æ³›å‹","slug":"TypeScriptç³»åˆ—æ³›å‹","date":"2019-09-11T16:00:00.000Z","updated":"2020-09-16T09:07:53.000Z","comments":true,"path":"2019/09/12/TypeScriptç³»åˆ—æ³›å‹/","link":"","permalink":"http://mariogogogo.github.io/2019/09/12/TypeScript%E7%B3%BB%E5%88%97%E6%B3%9B%E5%9E%8B/","excerpt":"ç»„ä»¶åœ¨æ„å»ºè¿‡ç¨‹ä¸ä»…è¦è€ƒè™‘å½“ä¸‹çš„æ•°æ®ç±»å‹,ä¹Ÿè¦è€ƒè™‘æœªæ¥çš„æ‰©å±•.è®©å…¶çµæ´» åœ¨åƒ C#å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚","text":"ç»„ä»¶åœ¨æ„å»ºè¿‡ç¨‹ä¸ä»…è¦è€ƒè™‘å½“ä¸‹çš„æ•°æ®ç±»å‹,ä¹Ÿè¦è€ƒè™‘æœªæ¥çš„æ‰©å±•.è®©å…¶çµæ´» åœ¨åƒ C#å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚ ä¸ç”¨æ³›å‹12345678function identity(arg: number): number &#123; return arg&#125;//æˆ–è€… æˆ‘ä»¬å¯ä»¥ç”¨anyfunction identity(arg: any): any &#123; return arg&#125; ä½†æ˜¯ any è¿™ç§ç±»å‹å¯ä»¥ç”¨ä»»ä½•ç±»å‹,è¿™æ ·å¯¼è‡´ä¼ å…¥çš„ç±»å‹å’Œè¿”å›çš„ç±»å‹å¯ä»¥ä¸ç»Ÿä¸€. å› æ­¤æˆ‘ä»¬éœ€è¦å»è§„å®šè¿”å›ç±»å‹ä¸ä¼ å…¥ç±»å‹çš„ç›¸åŒ,æˆ‘ä»¬åªç”¨è¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ ä½¿ç”¨æ³›å‹123function identity&lt;T&gt;(arg: T): T &#123; return arg&#125; æˆ‘ä»¬ç»™è¿™ä¸ªæ–¹æ³•ä¼ å…¥ç±»å‹å˜é‡T,è¿™ä¸ªTå¸®æˆ‘ä»¬è§„å®šä¼ å…¥çš„ç±»å‹(æ¯”å¦‚:number),ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹,ä¹‹åæˆ‘ä»¬å†æ¬¡ä½¿ç”¨è¿™ä¸ªTå½“è¿”å›å€¼ç±»å‹. ä¸åŒä¸ any,å®ƒä¸ä¼šä¸¢å¤±ä¸€äº›è§„åˆ™. æˆ‘ä»¬åœ¨å®šä¹‰äº†æ³›å‹å,å¯ä»¥ç”¨ 2 ç§æ–¹æ³•ä½¿ç”¨ 1.ä¼ å…¥æ‰€æœ‰çš„å‚æ•°,åŒ…å«ç±»å‹å‚æ•° 2.æ–¹æ³•æ›´æ™®é 1let output = identity &lt; string &gt; &#x27;myString&#x27; æˆ–è€… åˆ©ç”¨äº†ç±»å‹æ¨è®º 12//ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šTçš„ç±»å‹let output = identity(&#x27;myString&#x27;) ä½¿ç”¨æ³›å‹å˜é‡1234function loggingIdentity&lt;T&gt;(arg: T): T &#123; console.log(arg.length) // Error: T doesn&#x27;t have .length return arg&#125; ç¼–è¯‘å™¨ä¼šæŠ¥é”™è¯´æˆ‘ä»¬ä½¿ç”¨äº† arg çš„.length å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰åœ°æ–¹æŒ‡æ˜ arg å…·æœ‰è¿™ä¸ªå±æ€§ã€‚ è®°ä½ï¼Œè¿™äº›ç±»å‹å˜é‡ä»£è¡¨çš„æ˜¯ä»»æ„ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„äººå¯èƒ½ä¼ å…¥çš„æ˜¯ä¸ªæ•°å­—ï¼Œè€Œæ•°å­—æ˜¯æ²¡æœ‰.lengthå±æ€§çš„ 1234function loggingIdentity&lt;T&gt;(arg: T[]): T[] &#123; console.log(arg.length) // Array has a .length, so no more error return arg&#125; å¯ä»¥è¿™æ ·ç†è§£loggingIdentityçš„ç±»å‹ï¼šæ³›å‹å‡½æ•°loggingIdentityï¼Œæ¥æ”¶ç±»å‹å‚æ•° T å’Œå‚æ•°argï¼Œå®ƒæ˜¯ä¸ªå…ƒç´ ç±»å‹æ˜¯Tçš„æ•°ç»„ï¼Œå¹¶è¿”å›å…ƒç´ ç±»å‹æ˜¯ T çš„æ•°ç»„ã€‚ å¦‚æœæˆ‘ä»¬ä¼ å…¥æ•°å­—æ•°ç»„ï¼Œå°†è¿”å›ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œå› ä¸ºæ­¤æ—¶ T çš„çš„ç±»å‹ä¸ºnumberã€‚ è¿™å¯ä»¥è®©æˆ‘ä»¬æŠŠæ³›å‹å˜é‡ T å½“åšç±»å‹çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç±»å‹ï¼Œå¢åŠ äº†çµæ´»æ€§ æ³›å‹ç±»å‹æ³›å‹å‡½æ•°çš„ç±»å‹ä¸éæ³›å‹å‡½æ•°çš„ç±»å‹æ²¡ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯æœ‰ä¸€ä¸ªç±»å‹å‚æ•°åœ¨æœ€å‰é¢ï¼Œåƒå‡½æ•°å£°æ˜ä¸€æ · 1234567function identity&lt;T&gt;(arg: T): T &#123; return arg&#125;let myIdentity: &lt;T&gt;(arg: T) =&gt; T = identity//ä¹Ÿå¯ä»¥ç”¨ä¸åŒçš„æ³›å‹å‚æ•°ålet myIdentity: &lt;U&gt;(arg: U) =&gt; U = identity è¿˜å¯ä»¥å†™ä¸ªæ³›å‹æ¥å£ 123456789101112interface GenericIdentityFn &#123; &lt;T&gt;(arg: T): T;&#125;function identity&lt;T&gt;(arg: T): T &#123; return arg&#125;//ç±»ä¼¼äºè¿™æ ·//let myIdentity: &#123;&lt;T&gt;(arg:T):T&#125; = identity;let myIdentity: GenericIdentityFn = identity æ³›å‹ç±»12345678910111213141516class GenericNumber&lt;T&gt; &#123; zeroValue: T; add: (x: T, y: T) =&gt; T;&#125;let myGenericNumber = new GenericNumber&lt;number&gt;();myGenericNumber.zeroValue = 0;myGenericNumber.add = function(x, y) &#123; return x + y; &#125;;//æˆ–è€…let stringNumeric = new GenericNumber&lt;string&gt;();stringNumeric.zeroValue = &quot;&quot;;stringNumeric.add = function(x, y) &#123; return x + y; &#125;;alert(stringNumeric.add(stringNumeric.zeroValue, &quot;test&quot;)); ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚ æ³›å‹çº¦æŸä¹‹å‰çš„ä¾‹å­ 1234function loggingIdentity&lt;T&gt;(arg: T): T &#123; console.log(arg.length) // Error: T doesn&#x27;t have .length return arg&#125; å¦‚æœæˆ‘ä»¬å¯ä»¥çº¦æŸä¸‹ arg çš„æŸä¸€ç§ç±»å‹æ˜¯å¯ä»¥åˆ lenght å±æ€§çš„ 1234567891011interface Lengthwise &#123; length: number;&#125;function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123; console.log(arg.length); // Now we know it has a .length property, so no more error return arg;&#125;loggingIdentity(3); // Error, number doesn&#x27;t have a .length propertyloggingIdentity(&#123;length: 10, value: 3&#125;); åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹ä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³» 1234567891011121314151617181920212223242526class BeeKeeper &#123; hasMask: boolean;&#125;class ZooKeeper &#123; nametag: string;&#125;class Animal &#123; numLegs: number;&#125;class Bee extends Animal &#123; keeper: BeeKeeper;&#125;class Lion extends Animal &#123; keeper: ZooKeeper;&#125;function createInstance&lt;A extends Animal&gt;(c: &#123;new () =&gt; A&#125;): A &#123; return new c();&#125;createInstance(Lion).keeper.nametag;createInstance(Bee).keeper.hasMask;","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€å‡½æ•°","slug":"TypeScriptç³»åˆ—å‡½æ•°","date":"2019-09-08T16:00:00.000Z","updated":"2020-09-16T09:07:53.000Z","comments":true,"path":"2019/09/09/TypeScriptç³»åˆ—å‡½æ•°/","link":"","permalink":"http://mariogogogo.github.io/2019/09/09/TypeScript%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0/","excerpt":"åŠ ç­!åŠ ç­!åŠ ç­! åˆå¥½ä¹…æ²¡æ›´äº† ğŸ˜“","text":"åŠ ç­!åŠ ç­!åŠ ç­! åˆå¥½ä¹…æ²¡æ›´äº† ğŸ˜“ å‡½æ•°æ˜¯ JavaScript åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚ å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿç±»ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚ åœ¨ TypeScript é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰è¡Œä¸ºçš„åœ°æ–¹ã€‚ TypeScript ä¸º JavaScript å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ ç®€å•å‡½æ•°1234// thisfunction add1(x: any, y: any): number &#123; return x + y + 234;&#125; å‡½æ•°ç±»å‹åŒ…å«ä¸¤éƒ¨åˆ†ï¼š å‚æ•°ç±»å‹ è¿”å›å€¼ç±»å‹ã€‚ å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚ æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚ è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š 1234// å‡½æ•°ç±»å‹ == å‚æ•°ç±»å‹ + è¿”å›å€¼ç±»å‹const myAdd: (x: number, y: number) =&gt; number = function(x: number, y: number): number &#123; return x + y;&#125;; å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹å‰ä½¿ç”¨(=&gt;)ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸ºvoidè€Œä¸èƒ½ç•™ç©ºã€‚ æ¨æ–­ç±»å‹ä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ 1234567let myAdd = function(x: number, y: number): number &#123; return x + y;&#125;;let myAdd: (baseValue: number, increment: number) =&gt; number = function(x, y) &#123; return x + y;&#125;; å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°åœ¨ TypeScript é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°åæ—ä½¿ç”¨?å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è®© last æ˜¯å¯é€‰çš„ 12345function buildName2(first: string, last?: string) &#123; return first + &quot;,&quot; + last;&#125;const res3 = buildName2(&quot;jack&quot;); æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå‚æ•°æä¾›ä¸€ä¸ªé»˜è®¤å€¼å½“ç”¨æˆ·æ²¡æœ‰ä¼ é€’è¿™ä¸ªå‚æ•°æˆ–ä¼ é€’çš„å€¼æ˜¯ undefined æ—¶ã€‚ å®ƒä»¬å«åšæœ‰é»˜è®¤åˆå§‹åŒ–å€¼çš„å‚æ•°ã€‚ 1234// é»˜è®¤å‚æ•°function buildName3(first = &quot;jack&quot;, last?: string) &#123; return first + &quot;,&quot; + last;&#125; å‰©ä½™å‚æ•°æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ é€’è¿›æ¥ã€‚ åœ¨ JavaScript é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ arguments æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ TypeScript é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ,å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·ï¼ˆ...ï¼‰åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚ 12345678910111213function buildName(firstName: string, ...restOfName: string[]) &#123; return firstName + &quot; &quot; + restOfName.join(&quot; &quot;);&#125;let employeeName = buildName(&quot;Joseph&quot;, &quot;Samuel&quot;, &quot;Lucas&quot;, &quot;MacKinzie&quot;);//æˆ–è€…function buildName(firstName: string, ...restOfName: string[]) &#123; return firstName + &quot; &quot; + restOfName.join(&quot; &quot;);&#125;let buildNameFun: (fname: string, ...rest: string[]) =&gt; string = buildName; this å’Œç®­å¤´å‡½æ•°this çš„å€¼åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šæŒ‡å®šã€‚ è¿™æ˜¯ä¸ªæ—¢å¼ºå¤§åˆçµæ´»çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯ä½ éœ€è¦èŠ±ç‚¹æ—¶é—´å¼„æ¸…æ¥šå‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆã€‚ ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹ï¼Œå°¤å…¶æ˜¯åœ¨è¿”å›ä¸€ä¸ªå‡½æ•°æˆ–å°†å‡½æ•°å½“åšå‚æ•°ä¼ é€’çš„æ—¶å€™ã€‚ 1234567891011121314151617181920const deck = &#123; suits: [&quot;hearts&quot;, &quot;spades&quot;, &quot;clubs&quot;, &quot;diamonds&quot;], cards: Array(52), createCardPicker() &#123; return function() &#123; const pickerCard = Math.floor(Math.random() * 52); const pickedSuit = Math.floor(pickerCard / 13); return &#123; suit: this.suits[pickedSuit], // this=&gt;æŒ‡å‘å…¨å±€ global undefined card: pickerCard % 13 &#125;; &#125;; &#125;&#125;;const cardPicker = deck.createCardPicker();const pickerCard = cardPicker();console.log(&quot;card:&quot; + pickerCard.card); è¿”å›çš„å‡½æ•°é‡Œçš„thisè¢«è®¾ç½®æˆäº† window è€Œä¸æ˜¯ deck å¯¹è±¡ã€‚ this å‚æ•°123456789101112131415161718192021222324252627// é‡æ„ä¸Šé¢å‡½æ•°interface card &#123; suit: string card: number&#125;interface deck &#123; suits: string[] card: number[] createCardPicker(this: deck): () =&gt; card&#125;const deck1 = &#123; suits: [&#x27;hearts&#x27;, &#x27;spades&#x27;, &#x27;clubs&#x27;, &#x27;diamonds&#x27;], cards: Array(52), createCardPicker() &#123; console.log(&#x27;this&#x27;, this) return function(this: deck) &#123; const pickerCard = Math.floor(Math.random() * 52) const pickedSuit = Math.floor(pickerCard / 13) return &#123; suit: this.suits[pickedSuit], //this --&gt;deck card: pickerCard % 13, &#125; &#125; &#125;,&#125; å›è°ƒå‡½æ•°é‡Œçš„ this å‚æ•°å½“å›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œthiså°†ä¸ºundefinedã€‚ ç¨åšæ”¹åŠ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡ this å‚æ•°æ¥é¿å…é”™è¯¯ã€‚ 1234interface UIElement &#123; addClickListener(onclick: (this: void, e: Event) =&gt; void): void;&#125; this: voidæ„å‘³ç€addClickListeneræœŸæœ› onclick æ˜¯ä¸€ä¸ªå‡½æ•°ä¸”å®ƒä¸éœ€è¦ä¸€ä¸ª this ç±»å‹ã€‚ ç„¶åï¼Œä¸ºè°ƒç”¨ä»£ç é‡Œçš„ this æ·»åŠ ç±»å‹æ³¨è§£ï¼š 123456789class Handler &#123; info: string; onClickGood(this: void, e: Event) &#123; // can&#x27;t use this here because it&#x27;s of type void! console.log(&quot;clicked!&quot;); &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickGood); å› ä¸ºonClickGoodæŒ‡å®šäº†thisç±»å‹ä¸ºvoidï¼Œå› æ­¤ä¼ é€’ addClickListener æ˜¯åˆæ³•çš„ã€‚ å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸èƒ½ä½¿ç”¨this.info å¦‚æœä½ ä¸¤è€…éƒ½æƒ³è¦ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°äº†ï¼š 123456class Handler &#123; info: string; onClickGood = (e: Event) =&gt; &#123; this.info = e.message; &#125;;&#125; æ¯ä¸ªHandlerå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ–¹æ³•åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œæ·»åŠ åˆ° Handler çš„åŸå‹é“¾ä¸Šã€‚ å®ƒä»¬åœ¨ä¸åŒ Handler å¯¹è±¡é—´æ˜¯å…±äº«çš„ã€‚ é‡è½½JavaScript é‡Œå‡½æ•°æ ¹æ®ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®æ˜¯å¾ˆå¸¸è§çš„ã€‚ 123456789101112131415161718192021222324let suits = [&quot;hearts&quot;, &quot;spades&quot;, &quot;clubs&quot;, &quot;diamonds&quot;];&lt;!--å‚æ•°ä¸ºå¯¹è±¡ == è¿”å› æ•°å­—--&gt;function pickCard(x: &#123;suit: string; card: number; &#125;[]): number;&lt;!--å‚æ•°ä¸ºæ•°å­—== è¿”å›å¯¹è±¡ --&gt;function pickCard(x: number): &#123;suit: string; card: number; &#125;;function pickCard(x): any &#123; if (typeof x == &quot;object&quot;) &#123; let pickedCard = Math.floor(Math.random() * x.length); return pickedCard; &#125; else if (typeof x == &quot;number&quot;) &#123; let pickedSuit = Math.floor(x / 13); return &#123; suit: suits[pickedSuit], card: x % 13 &#125;; &#125;&#125;let myDeck = [&#123; suit: &quot;diamonds&quot;, card: 2 &#125;, &#123; suit: &quot;spades&quot;, card: 10 &#125;, &#123; suit: &quot;hearts&quot;, card: 4 &#125;];let pickedCard1 = myDeck[pickCard(myDeck)];alert(&quot;card: &quot; + pickedCard1.card + &quot; of &quot; + pickedCard1.suit);let pickedCard2 = pickCard(15);alert(&quot;card: &quot; + pickedCard2.card + &quot; of &quot; + pickedCard2.suit); æ³¨æ„ï¼Œfunction pickCard(x): any å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™é‡Œåªæœ‰ä¸¤ä¸ªé‡è½½","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€ç±»","slug":"TypeScriptç³»åˆ—ç±»","date":"2019-08-31T16:00:00.000Z","updated":"2020-09-16T09:07:54.000Z","comments":true,"path":"2019/09/01/TypeScriptç³»åˆ—ç±»/","link":"","permalink":"http://mariogogogo.github.io/2019/09/01/TypeScript%E7%B3%BB%E5%88%97%E7%B1%BB/","excerpt":"ECMAScript 2015ï¼Œä¹Ÿå°±æ˜¯ ECMAScript 6 å¼€å§‹ï¼ŒJavaScript ç¨‹åºå‘˜å°†èƒ½å¤Ÿä½¿ç”¨åŸºäºç±»çš„é¢å‘å¯¹è±¡çš„æ–¹å¼ã€‚ ä½¿ç”¨ TypeScriptï¼Œæˆ‘ä»¬å…è®¸å¼€å‘è€…ç°åœ¨å°±ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”ç¼–è¯‘åçš„ JavaScript å¯ä»¥åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œè€Œä¸éœ€è¦ç­‰åˆ°ä¸‹ä¸ª JavaScript ç‰ˆæœ¬ã€‚","text":"ECMAScript 2015ï¼Œä¹Ÿå°±æ˜¯ ECMAScript 6 å¼€å§‹ï¼ŒJavaScript ç¨‹åºå‘˜å°†èƒ½å¤Ÿä½¿ç”¨åŸºäºç±»çš„é¢å‘å¯¹è±¡çš„æ–¹å¼ã€‚ ä½¿ç”¨ TypeScriptï¼Œæˆ‘ä»¬å…è®¸å¼€å‘è€…ç°åœ¨å°±ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”ç¼–è¯‘åçš„ JavaScript å¯ä»¥åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œè€Œä¸éœ€è¦ç­‰åˆ°ä¸‹ä¸ª JavaScript ç‰ˆæœ¬ã€‚ ç”¨ ES6 åˆ›å»ºä¸€ä¸ªç®€å•ç±»1234567891011class Greeter &#123; greeting: string constructor(message: string) &#123; this.greeting = message &#125; greet() &#123; return &#x27;Hello, &#x27; + this.greeting &#125;&#125;let greeter = new Greeter(&#x27;world&#x27;) è¿™ä¸ªç±»æœ‰ 3 ä¸ªæˆå‘˜ï¼š ä¸€ä¸ªå«åš greeting çš„å±æ€§ï¼Œ ä¸€ä¸ªæ„é€ å‡½æ•° ä¸€ä¸ª greet æ–¹æ³•ã€‚ æˆ‘ä»¬åœ¨å¼•ç”¨ä»»ä½•ä¸€ä¸ªç±»æˆå‘˜çš„æ—¶å€™éƒ½ç”¨äº†thisã€‚å®ƒè¡¨ç¤ºæˆ‘ä»¬è®¿é—®çš„æ˜¯ç±»çš„æˆå‘˜ã€‚ ç»§æ‰¿12345678910111213141516class Animal &#123; move(distance: number = 0) &#123; console.log(`Animal moved $&#123;distance&#125;m.`) &#125;&#125;class Dog extends Animal &#123; bark() &#123; console.log(&#x27;Woof! Woof!&#x27;) &#125;&#125;const dog = new Dog()dog.bark()dog.move(10)dog.bark() å¤æ‚ç‰ˆç»§æ‰¿123456789101112131415161718192021222324252627282930313233343536class Animal &#123; name: string constructor(theName: string) &#123; this.name = theName &#125; move(distance: number = 0) &#123; console.log(`$&#123;this.name&#125; moved $&#123;distance&#125;m.`) &#125;&#125;class Snake extends Animal &#123; constructor(name: string) &#123; super(name) &#125; move(distanceInMeters = 5) &#123; console.log(&#x27;Slithering...&#x27;) super.move(distanceInMeters) &#125;&#125;class Horse extends Animal &#123; constructor(name: string) &#123; super(name) &#125; move(distanceInMeters = 45) &#123; console.log(&#x27;Galloping...&#x27;) super.move(distanceInMeters) &#125;&#125;let sam = new Snake(&#x27;Sammy the Python&#x27;)let tom: Animal = new Horse(&#x27;Tommy the Palomino&#x27;)sam.move()tom.move(34) ä¸å‰ä¸€ä¸ªä¾‹å­çš„ä¸åŒç‚¹æ˜¯ï¼Œæ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¿…é¡»è°ƒç”¨super()ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® this çš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€å®šè¦è°ƒç”¨ super()ã€‚ è¿™ä¸ªæ˜¯ TypeScript å¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚ é‡å†™moveä½¿å¾— move æ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼Œå³ä½¿ tom è¢«å£°æ˜ä¸º Animal ç±»å‹ï¼Œä½†å› ä¸ºå®ƒçš„å€¼æ˜¯ Horseï¼Œè°ƒç”¨ tom.move(34)æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ Horse é‡Œé‡å†™çš„æ–¹æ³•ï¼š å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦é»˜è®¤ä¸ºpublic 12345678class Animal &#123; public name: string; public constructor(theName: string) &#123; this.name = theName; &#125; public move(distanceInMeters: number) &#123; console.log(`$&#123;this.name&#125; moved $&#123;distanceInMeters&#125;m.`); &#125;&#125; ç†è§£private è¡¨ç¤ºä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—® 123456class Animal &#123; private name: string; constructor(theName: string) &#123; this.name = theName; &#125;&#125;new Animal(&quot;Cat&quot;).name; // é”™è¯¯: &#x27;name&#x27; æ˜¯ç§æœ‰çš„. ç†è§£protected protectedä¿®é¥°ç¬¦ä¸privateä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œprotectedæˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718192021class Person &#123; protected name: string; constructor(name: string) &#123; this.name = name; &#125;&#125;class Employee extends Person &#123; private department: string; constructor(name: string, department: string) &#123; super(name) this.department = department; &#125; public getElevatorPitch() &#123; return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.`; &#125;&#125;let howard = new Employee(&quot;Howard&quot;, &quot;Sales&quot;);console.log(howard.getElevatorPitch());console.log(howard.name); // é”™è¯¯ readonly ä¿®é¥°ç¬¦å¯ä»¥ä½¿ç”¨readonlyå…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ– 1234567891011// ===========ã€‹readonly åªè¯» ä¿®é¥°ç¬¦class PresonOnly &#123; public readonly name: string constructor(name: string) &#123; this.name = name &#125;&#125;let john = new PresonOnly(&#x27;jon&#x27;)john.name = &#x27;&#x27; //error ä¸èƒ½ä¿®æ”¹ å­˜å–å™¨TypeScript æ”¯æŒé€šè¿‡ getters/setters æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ 123456789101112131415161718192021222324let passcode = &quot;secret passcode&quot;;class Employee &#123; private _fullName: string; get fullName(): string &#123; return this._fullName; &#125; set fullName(newName: string) &#123; if (passcode &amp;&amp; passcode == &quot;secret passcode&quot;) &#123; this._fullName = newName; &#125; else &#123; console.log(&quot;Error: Unauthorized update of employee!&quot;); &#125; &#125;&#125;let employee = new Employee();employee.fullName = &quot;Bob Smith&quot;;if (employee.fullName) &#123; alert(employee.fullName);&#125; æ³¨æ„ç‚¹: é¦–å…ˆï¼Œå­˜å–å™¨è¦æ±‚ä½ å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡º ECMAScript 5 æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ° ECMAScript 3ã€‚ å…¶æ¬¡ï¼Œåªå¸¦æœ‰getä¸å¸¦æœ‰setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonly é™æ€å±æ€§å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§,æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š, æ¯ä¸ªå®ä¾‹æƒ³è¦è®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™ï¼Œéƒ½è¦åœ¨ origin å‰é¢åŠ ä¸Šç±»åã€‚ å¦‚åŒåœ¨å®ä¾‹å±æ€§ä¸Šä½¿ç”¨ this.å‰ç¼€æ¥è®¿é—®å±æ€§ä¸€æ · 1234567891011121314151617class Grid &#123; static origin = &#123;x: 0, y: 0&#125;; calculateDistanceFromOrigin(point: &#123;x: number; y: number;&#125;) &#123; //çœ‹è¿™é‡Œ â¬‡ï¸ let xDist = (point.x - Grid.origin.x); let yDist = (point.y - Grid.origin.y); return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale; &#125; constructor (public scale: number) &#123; &#125;&#125;let grid1 = new Grid(1.0); // 1x scalelet grid2 = new Grid(5.0); // 5x scaleconsole.log(grid1.calculateDistanceFromOrigin(&#123;x: 10, y: 10&#125;));console.log(grid2.calculateDistanceFromOrigin(&#123;x: 10, y: 10&#125;)); æŠ½è±¡ç±»abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334abstract class Department &#123; constructor(public name: string) &#123; &#125; printName(): void &#123; console.log(&#x27;Department name: &#x27; + this.name); &#125; abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°&#125;class AccountingDepartment extends Department &#123; constructor() &#123; super(&#x27;Accounting and Auditing&#x27;); // åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super() &#125; printMeeting(): void &#123; console.log(&#x27;The Accounting Department meets each Monday at 10am.&#x27;); &#125; generateReports(): void &#123; console.log(&#x27;Generating accounting reports...&#x27;); &#125;&#125;let department: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨department = new Department(); // é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹department = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼department.printName();department.printMeeting();department.generateReports(); // é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€æ¥å£","slug":"TypeScriptç³»åˆ—æ¥å£","date":"2019-08-29T16:00:00.000Z","updated":"2020-09-16T09:07:54.000Z","comments":true,"path":"2019/08/30/TypeScriptç³»åˆ—æ¥å£/","link":"","permalink":"http://mariogogogo.github.io/2019/08/30/TypeScript%E7%B3%BB%E5%88%97%E6%8E%A5%E5%8F%A3/","excerpt":"åœ¨ TypeScript é‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦","text":"åœ¨ TypeScript é‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦ ç®€å•çš„æ¥å£æˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡å‚æ•°å®é™…ä¸Šä¼šåŒ…å«å¾ˆå¤šå±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨åªä¼šæ£€æŸ¥é‚£äº›å¿…éœ€çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”å…¶ç±»å‹æ˜¯å¦åŒ¹é…ã€‚ ç„¶è€Œï¼Œæœ‰äº›æ—¶å€™ TypeScript å´å¹¶ä¸ä¼šè¿™ä¹ˆå®½æ¾ 123456789101112131415interface NameInfo &#123; firstname: string; lastname: string;&#125;const getFullName = (&#123; ...obj &#125;: NameInfo): string =&gt; &#123; return obj.firstname + obj.lastname;&#125;;console.log( getFullName(&#123; firstname: &quot;kac&quot;, lastname: &quot;123&quot; &#125;)); å¦‚æœæ–¹æ³•ä¸­å¤šæ·»åŠ å±æ€§åˆ™ä¼šæŠ¥é”™ å¯é€‰å±æ€§æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ã€‚ æœ‰äº›æ˜¯åªåœ¨æŸäº›æ¡ä»¶ä¸‹å­˜åœ¨ï¼Œæˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ã€‚ å¯é€‰å±æ€§åœ¨åº”ç”¨â€œoption bagsâ€æ¨¡å¼æ—¶å¾ˆå¸¸ç”¨ï¼Œå³ç»™å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸­åªæœ‰éƒ¨åˆ†å±æ€§èµ‹å€¼äº† 12345678910111213141516171819202122interface Vegetables &#123; color?: string; type: string; [prop: string]: any;&#125;const getVegetables = (&#123; color, type &#125;: Vegetables) =&gt; &#123; return color ? `color,+$&#123;color&#125;,$&#123;type&#125;` : &quot;æ²¡æœ‰ä¼ é¢œè‰²&quot;;&#125;;console.log( getVegetables(&#123; color: &quot;red&quot;, type: &quot;çœ‹å¯æ˜¯ä½ &quot; &#125;));console.log( getVegetables(&#123; type: &quot;123&quot; &#125;)); åªè¯»å±æ€§ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨readonlyæ¥æŒ‡å®šåªè¯»å±æ€§: 123456interface Point &#123; readonly x: number; readonly y: number;&#125;let p1: Point = &#123; x: 10, y: 20 &#125;;p1.x = 5; // error! readonly vs constæœ€ç®€å•åˆ¤æ–­è¯¥ç”¨readonlyè¿˜æ˜¯constçš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡ä½¿ç”¨è¿˜æ˜¯åšä¸ºä¸€ä¸ªå±æ€§ã€‚ åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨ constï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨ readonlyã€‚ æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å12345interface SquareConfig &#123; color?: string; width?: number; [propName: string]: any;&#125; è®²åˆ°ç´¢å¼•ç­¾åï¼Œä½†åœ¨è¿™æˆ‘ä»¬è¦è¡¨ç¤ºçš„æ˜¯ SquareConfig å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å±æ€§ï¼Œå¹¶ä¸”åªè¦å®ƒä»¬ä¸æ˜¯ color å’Œ widthï¼Œé‚£ä¹ˆå°±æ— æ‰€è°“å®ƒä»¬çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ã€TypeScript ç³»åˆ—ã€åŸºç¡€ç±»å‹","slug":"TypeScriptç³»åˆ—åŸºç¡€ç±»å‹","date":"2019-08-28T16:00:00.000Z","updated":"2020-09-16T09:07:53.000Z","comments":true,"path":"2019/08/29/TypeScriptç³»åˆ—åŸºç¡€ç±»å‹/","link":"","permalink":"http://mariogogogo.github.io/2019/08/29/TypeScript%E7%B3%BB%E5%88%97%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/","excerpt":"æœ€ç®€å•çš„æ•°æ®å•å…ƒï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œç»“æ„ä½“ï¼Œå¸ƒå°”å€¼ç­‰","text":"æœ€ç®€å•çš„æ•°æ®å•å…ƒï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œç»“æ„ä½“ï¼Œå¸ƒå°”å€¼ç­‰ å¸ƒå°”å€¼ç®€å•çš„ true/false å€¼ 1let isBack: boolean = false æ•°å­—å’Œ JavaScript ä¸€æ ·ï¼ŒTypeScript é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚ è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯numberã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼ŒTypeScriptè¿˜æ”¯æŒ ECMAScript 2015 ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚ 12345678910111213let decLiteral: number = 6let hexLiteral: number = 0xf00dlet binaryLiteral: number = 0b1010let octalLiteral: number = 0o744let x = [string, number]x = [&#x27;hje&#x27;, 10]//3.1ç‰ˆæœ¬ä¹‹åå°±ä¼šæŠ¥é”™ ç´¢å¼•è¶…è¿‡æœ€å¤§é•¿åº¦x[3] = 1 //errorx[6] = true // error è¶…è¿‡äº†2ç§ç±»å‹ å­—ç¬¦ä¸²æˆ‘ä»¬ä½¿ç”¨stringè¡¨ç¤ºæ–‡æœ¬æ•°æ®ç±»å‹,ç”¨æ³•ä¸ JavaScript æ— åŒºåˆ« 12345let name: string = &quot;bob&quot;;name = &quot;smith&quot;;I&#x27;ll be $&#123; age + 1 &#125; years old next month.`; æ•°ç»„æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰æ•°ç»„ã€‚ ç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š[]ï¼Œè¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼š 1let arr: number[] = [1, 2, 3] ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨æ•°ç»„æ³›å‹ï¼ŒArray&lt;å…ƒç´ ç±»å‹&gt; 1let arr: Array&lt;number&gt; = [1, 2, 3] å…ƒç»„ Tupleå…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º string å’Œ number ç±»å‹çš„å…ƒç»„ã€‚ 1234let x: [string, number]x = [&#x27;hello&#x27;, 10] // OKx = [10, &#x27;hello&#x27;] // Error å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š 12console.log(x[0].substr(1)) // OKconsole.log(x[1].substr(1)) // Error, &#x27;number&#x27; does not have &#x27;substr&#x27; å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ï¼š 12345x[3] = &#x27;world&#x27; // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹console.log(x[5].toString()) // OK, &#x27;string&#x27; å’Œ &#x27;number&#x27; éƒ½æœ‰ toString//ä½†æ˜¯ä¸èƒ½è¶Šç•Œx[6] = true // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹ æšä¸¾enumç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚ åƒ C#ç­‰å…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­— 12enum Color &#123;Red, Green, Blue&#125;let c: Color = Color.Green; ä»»æ„å€¼123let notSure: any = 4notSure = &#x27;maybe a string instead&#x27;notSure = false // okay, definitely a boolean å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®çš„ç±»å‹æ—¶ï¼Œanyç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚ æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸åŒçš„ç±»å‹çš„æ•°æ®ï¼š 123let arr: any[] = [1, true, &#x27;free&#x27;]arr[1] = 100 ç©ºå€¼æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoidç±»å‹åƒæ˜¯ä¸anyç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ void 123function error(): void &#123; console.log(&#x27;This is my warning message&#x27;)&#125; å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ undefined å’Œ nullï¼š 1let unusable: void = undefined Null å’Œ UndefinedTypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš undefined å’Œ nullã€‚ å’Œ void ç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼š 12let u: undefined = undefinedlet n: null = null é»˜è®¤æƒ…å†µä¸‹nullå’Œundefinedæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™numberç±»å‹çš„å˜é‡ã€‚ Neverneverç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ never çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ never ç±»å‹ï¼ˆé™¤äº† never æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ any ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ neverã€‚ 1234567891011121314// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never &#123; throw new Error(message)&#125;// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºneverfunction fail() &#123; return error(&#x27;Something failed&#x27;)&#125;// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never &#123; while (true) &#123;&#125;&#125; ç±»å‹æ–­è¨€ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ TypeScript ä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚ ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š 123let someValue: any = &quot;this is a string&quot;;let strLength: number = (&lt;string&gt;someValue).length; å¦ä¸€ä¸ªä¸ºasè¯­æ³•ï¼š 123let someValue: any = &quot;this is a string&quot;;let strLength: number = (someValue as string).length; Symbolsè‡ª ECMAScript 2015 èµ·ï¼Œsymbolæˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ symbolç±»å‹çš„å€¼æ˜¯é€šè¿‡ Symbolæ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚ 123let sym1 = Symbol()let sym2 = Symbol(&#x27;key&#x27;) // å¯é€‰çš„å­—ç¬¦ä¸²key Symbols æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„ 1234let sym2 = Symbol(&#x27;key&#x27;)let sym3 = Symbol(&#x27;key&#x27;)sym2 === sym3 // false, symbolsæ˜¯å”¯ä¸€çš„ åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols ä¹Ÿå¯ä»¥è¢«ç”¨åšå¯¹è±¡å±æ€§çš„é”®ã€‚ 1234567let prop2 = Symbol(&#x27;jack&#x27;)const info2 = &#123; [prop2]: &#x27;lison&#x27;, id: &#x27;1&#x27;, age: &#x27;99&#x27;&#125;console.table(info2) Symbols ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åå£°æ˜ç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚ 12345678910const getClassNameSymbol = Symbol()class C &#123; [getClassNameSymbol]() &#123; return &#x27;C&#x27; &#125;&#125;let c = new C()let className = c[getClassNameSymbol]() // &quot;C&quot; Symbol.for123456789//é™æ€æ–¹æ³•let name2 = Symbol.for(&#x27;jack&#x27;)let name3 = Symbol.for(&#x27;jack&#x27;) //å…¨å±€èŒƒå›´ä¿æŠ¤å½“å‰é¡µé¢ ï¼ˆifram serverWorkï¼‰ å®ƒä¼šå»æ‰¾ä¹‹å‰æœ‰æ²¡æœ‰åˆ›å»ºè¿‡symbol å¦‚æœæœ‰åˆ™ä¸ä¼šåˆ›å»ºæ–°çš„console.log(name2 === name3) //truelet name4 = Symbol.keyFor(name3) //æŸ¥è¯¢æ˜¯å¦å·²ç»åˆ›å»ºsysmbolå€¼console.log(name4) // è¿”å›å±æ€§å","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://mariogogogo.github.io/tags/TypeScript/"}]},{"title":"ä»é›¶å®ç° react ä¹‹å¼‚æ­¥çš„ setState","slug":"ä»é›¶å®ç°reactä¹‹å¼‚æ­¥çš„setState","date":"2019-08-19T16:00:00.000Z","updated":"2020-09-16T09:07:00.000Z","comments":true,"path":"2019/08/20/ä»é›¶å®ç°reactä¹‹å¼‚æ­¥çš„setState/","link":"","permalink":"http://mariogogogo.github.io/2019/08/20/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E5%BC%82%E6%AD%A5%E7%9A%84setState/","excerpt":"è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡æ˜ç¡®ï¼Œæˆ‘ä»¬è¦å®ç°ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š å¼‚æ­¥æ›´æ–° stateï¼Œå°†çŸ­æ—¶é—´å†…çš„å¤šä¸ª setState åˆå¹¶æˆä¸€ä¸ª ä¸ºäº†è§£å†³å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„é—®é¢˜ï¼Œå¢åŠ å¦ä¸€ç§å½¢å¼çš„ setStateï¼šæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåœ¨å‡½æ•°ä¸­å¯ä»¥å¾—åˆ°å‰ä¸€ä¸ªçŠ¶æ€å¹¶è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€","text":"è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡æ˜ç¡®ï¼Œæˆ‘ä»¬è¦å®ç°ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š å¼‚æ­¥æ›´æ–° stateï¼Œå°†çŸ­æ—¶é—´å†…çš„å¤šä¸ª setState åˆå¹¶æˆä¸€ä¸ª ä¸ºäº†è§£å†³å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„é—®é¢˜ï¼Œå¢åŠ å¦ä¸€ç§å½¢å¼çš„ setStateï¼šæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåœ¨å‡½æ•°ä¸­å¯ä»¥å¾—åˆ°å‰ä¸€ä¸ªçŠ¶æ€å¹¶è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ React ä¸­çš„ setState æ˜¯æ€ä¹ˆåšçš„? 123456789101112131415161718192021class Home extends Component &#123; constructor() &#123; super(); this.state = &#123; num: 0 &#125;; &#125; componentDidMount() &#123; for (let i = 0; i &lt; 10; i++) &#123; this.setState(&#123; num: this.state.num + 1 &#125;); console.log(this.state.num); // ä¼šè¾“å‡º0 &#125; &#125; render() &#123; return ( &lt;div className=&quot;App&quot;&gt; &lt;h1&gt;&#123;this.state.num&#125;&lt;/h1&gt; &lt;/div&gt; ); &#125;&#125; ç»“æœ: ç»„ä»¶æ¸²æŸ“çš„ç»“æœæ˜¯ 1ï¼Œå¹¶ä¸”åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº† 100 æ¬¡ 0ï¼Œè¯´æ˜æ¯ä¸ªå¾ªç¯ä¸­ï¼Œæ‹¿åˆ°çš„ state ä»ç„¶æ˜¯æ›´æ–°ä¹‹å‰çš„ è¿™æ˜¯ React çš„ä¼˜åŒ–æ‰‹æ®µï¼Œä½†æ˜¯æ˜¾ç„¶å®ƒä¹Ÿä¼šåœ¨å¯¼è‡´ä¸€äº›ä¸ç¬¦åˆç›´è§‰çš„é—®é¢˜ï¼ˆå°±å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼‰ï¼Œæ‰€ä»¥é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒReact ç»™å‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šsetState æ¥æ”¶çš„å‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯ä»¥æ‹¿å…ˆå‰çš„çŠ¶æ€ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥ä¿®æ­£ App ç»„ä»¶ï¼š 1234567891011componentDidMount() &#123; for ( let i = 0; i &lt; 100; i++ ) &#123; this.setState( prevState =&gt; &#123; console.log( prevState.num ); return &#123; num: prevState.num + 1 &#125; &#125; ); &#125; console.log(num ); // è¿˜æ˜¯0&#125; åˆå¹¶ setStateæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¹‹å‰çš„å†™æ³• 1234setState( stateChange ) &#123; Object.assign( this.state, stateChange ); renderComponent( this );&#125; æ¯æ¬¡è°ƒç”¨ setState éƒ½ä¼šæ›´æ–° state å¹¶é©¬ä¸Šæ¸²æŸ“ä¸€æ¬¡ã€‚ æ¨¡æ‹Ÿä¸€ä¸ª setState é˜Ÿåˆ—ä¸ºäº†åˆå¹¶ setStateï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜æ¯æ¬¡ setState çš„æ•°æ®ï¼Œç„¶ååœ¨ä¸€æ®µæ—¶é—´åï¼Œæ¸…ç©ºè¿™ä¸ªé˜Ÿåˆ—å¹¶æ¸²æŸ“ç»„ä»¶åˆ›å»ºset_state_quene.jsæ–‡ä»¶ 123456789101112const queue = []; //é˜Ÿåˆ—æ•°ç»„function enqueueSetState( stateChange, component ) &#123; queue.push( &#123; stateChange, component &#125; );&#125;//ä¿®æ”¹Component.jsä¸­çš„setStateæ–¹æ³•setState( stateChange ) &#123; enqueueSetState( stateChange, this ); //this-&gt;Componentå®ä¾‹&#125; æ¸…ç©ºé˜Ÿåˆ—æ¥ä¸‹å»æ€è€ƒå¦‚ä½•æ¸…ç©ºé˜Ÿåˆ— 123456789101112131415161718192021222324function flush() &#123; let item; //å–å‡ºæœ€åä¸€ä¸ªå€¼ while ((item = setStateQueue.shift())) &#123; /** * stateChange å¯ä»¥æ˜¯å‡½æ•° æˆ–è€… å¯¹è±¡ */ const &#123; stateChange, component &#125; = item; //ä¿å­˜ä¹‹å‰çš„çŠ¶æ€ if (!component.prevState) &#123; component.prevState = Object.assign(&#123;&#125;, component.state); &#125; //setstateæ˜¯ä¸ªæ–¹æ³• å›è°ƒå‡½æ•° if (typeof stateChange === &quot;function&quot;) &#123; console.log(&quot;stateChangeæ˜¯ä¸ªå‡½æ•°&quot;, stateChange); Object.assign(component.state, stateChange(component.prevState, component.props)); &#125; else &#123; // æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼ å…¥æ›´æ–° Object.assign(component.state, stateChange); &#125; // æ¯æ¬¡å¾ªç¯ ä¿å­˜å½“å‰ä¸€æ¬¡çš„stateä½œä¸ºå‰ä¸€æ¬¡çš„state component.prevState = component.state - 1; &#125;&#125; è¿™åªæ˜¯å®ç°äº† state çš„æ›´æ–°ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰æ¸²æŸ“ç»„ä»¶ã€‚æ¸²æŸ“ç»„ä»¶ä¸èƒ½åœ¨éå†é˜Ÿåˆ—æ—¶è¿›è¡Œï¼Œå› ä¸ºåŒä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šå¤šæ¬¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜æ‰€æœ‰ç»„ä»¶ï¼Œä¸åŒä¹‹å¤„æ˜¯ï¼Œè¿™ä¸ªé˜Ÿåˆ—å†…ä¸ä¼šæœ‰é‡å¤çš„ç»„ä»¶ã€‚ æˆ‘ä»¬åœ¨ enqueueSetState æ—¶ï¼Œå°±å¯ä»¥åšè¿™ä»¶äº‹ 12345678910111213141516export function enqueueSetState(stateChange, component) &#123; //å¦‚æœrenderQueue æ²¡æœ‰ åˆ™æ·»åŠ é˜Ÿåˆ— let r = renderQueue.some(item =&gt; &#123; return (item = component); &#125;); //rä¸å­˜åœ¨è¯æ˜æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ  if (!r) &#123; renderQueue.push(component); //æ·»åŠ ç»„ä»¶ &#125; // çŸ­æ—¶é—´åˆå¹¶å¤šä¸ªsetState setStateQueue.push(&#123; stateChange, component &#125;);&#125; åœ¨ flush æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éå† renderQueueï¼Œæ¥æ¸²æŸ“æ¯ä¸€ä¸ªç»„ä»¶ 12345678function flush() &#123; let item, component; ... while ((component = renderQueue.shift())) &#123; renderComponent(component); &#125;&#125; å¼‚æ­¥æ‰§è¡Œæˆ‘ä»¬éœ€è¦åˆå¹¶ä¸€æ®µæ—¶é—´å†…æ‰€æœ‰çš„ setStateï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€æ®µæ—¶é—´åæ‰æ‰§è¡Œ flush æ–¹æ³•æ¥æ¸…ç©ºé˜Ÿåˆ—ï¼Œè¿™å°±è¡¨ç¤ºéœ€è¦å¼‚æ­¥æ‰§è¡Œ,ä¼šæƒ³åˆ°ä»€ä¹ˆå‘¢? setTimeout,Promise ? å…ˆæ¥çœ‹è¿™æ ·ä¸€æ®µä»£ç ï¼š 1234567setTimeout(() =&gt; &#123; console.log(2);&#125;, 0);Promise.resolve().then(() =&gt; console.log(1));console.log(3);//æ‰§è¡Œç»“æœ 3 1 2 æˆ‘ä»¬å¯ä»¥åˆ©ç”¨äº‹ä»¶é˜Ÿåˆ—ï¼Œè®© flush åœ¨æ‰€æœ‰åŒæ­¥ä»»åŠ¡åæ‰§è¡Œ 12345678910111213function enqueueSetState(stateChange, component) &#123; // å¦‚æœqueueçš„é•¿åº¦æ˜¯0ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šæ¬¡flushæ‰§è¡Œä¹‹åç¬¬ä¸€æ¬¡å¾€é˜Ÿåˆ—é‡Œæ·»åŠ  if (queue.length === 0) &#123; defer(flush); &#125; queue.push(&#123; stateChange, component &#125;); if (!renderQueue.some(item =&gt; item === component)) &#123; renderQueue.push(component); &#125;&#125; åˆ›å»º defer æ–¹æ³•ï¼Œåˆ©ç”¨ Promise.resolve 123function defer(fn) &#123; return Promise.resolve().then(fn);&#125; è¿™æ ·åœ¨ä¸€æ¬¡â€œäº‹ä»¶å¾ªç¯â€œä¸­ï¼Œæœ€å¤šåªä¼šæ‰§è¡Œä¸€æ¬¡ flush äº†ï¼Œåœ¨è¿™ä¸ªâ€œäº‹ä»¶å¾ªç¯â€ä¸­ï¼Œæ‰€æœ‰çš„ setState éƒ½ä¼šè¢«åˆå¹¶ï¼Œå¹¶åªæ¸²æŸ“ä¸€æ¬¡ç»„ä»¶ã€‚","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä»é›¶å®ç° react ä¹‹ diff ç®—æ³•","slug":"ä»é›¶å®ç°reactä¹‹diffç®—æ³•","date":"2019-08-17T16:00:00.000Z","updated":"2020-09-16T09:07:00.000Z","comments":true,"path":"2019/08/18/ä»é›¶å®ç°reactä¹‹diffç®—æ³•/","link":"","permalink":"http://mariogogogo.github.io/2019/08/18/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8Bdiff%E7%AE%97%E6%B3%95/","excerpt":"è¿™ç¯‡æ–‡ç« æ˜¯é‡‡ç”¨ preact çš„åšæ³•ï¼Œå¯¹æ¯”çœŸå® dom å’Œè™šæ‹Ÿ domï¼Œå¹¶ä¸”åœ¨å¯¹æ¯”çš„è¿‡ç¨‹ä¸­ç›´æ¥æ›´æ–°çœŸå® dom","text":"è¿™ç¯‡æ–‡ç« æ˜¯é‡‡ç”¨ preact çš„åšæ³•ï¼Œå¯¹æ¯”çœŸå® dom å’Œè™šæ‹Ÿ domï¼Œå¹¶ä¸”åœ¨å¯¹æ¯”çš„è¿‡ç¨‹ä¸­ç›´æ¥æ›´æ–°çœŸå® dom diff ç®—æ³•diff ç®—æ³•?what?ä»€å¹ºç©æ„å¦‚ä½•æ¸›å°‘ DOM æ›´æ–°:æˆ‘å€‘éœ€è¦æ‰¾å‡ºè« æŸ“å‰åçœŸæ­£å¤‰åŒ–çš„éƒ¨åˆ†,åªæ›´æ–°è¿™ä¸€éƒ¨åˆ†.è€Œå¯¾æ¯”å¤‰åŒ–,æ‰¾å‡ºéœ€è¦æ›´æ–°éƒ¨åˆ†çš„ç®—æ³•ç§°ä¹‹ä¸ºdiffç®—æ³•å¯¾æ¯”ç­–ç•¥åœ¨å‰é¢æˆ‘å€‘å®ç°äº†render æ–¹æ³•,å®ƒèƒ½å°‡è™šä¼¼ DOM è£…æ›æˆçœŸæ­£çš„ DOMä½†æ˜¯æˆ‘å€‘éœ€è¦æ”¹è¿¸å®ƒ,ä¸è¦æ­¢å®ƒå„ªä¹ä¹åœ°é‡æ–°é€™æŸ“æ•´ä¸ª DOM æ‘,è€Œæ˜¯æ‰¾å‡ºçœŸæ­£å¤‰åŒ–çš„éƒ¨åˆ†è¿¸è¡Œæ›¿æ›.è¿™éƒ¨åˆ†å¾ˆå¤šç±» React æ¡†æ¶å®ç°æ–¹å¼éƒ½ä¸å¤ªä¸€æ ·ï¼Œæœ‰çš„æ¡†æ¶ä¼šè¿­æ‹ä¿å­˜ä¸Šæ¬¡è« æŸ“çš„è™šä¼¼ DOMï¼Œç„¶åå¯¾æ¯”è™šæ‰¹ DOM å‰åçš„å¤‰åŒ–ï¼Œå¾—åˆ°ä¸€ç³»åˆ—æ›´æ–°çš„æ•° æ®ï¼Œç„¶åå†å°‡é€‘äº›æ›´æ–°åˆ°çœŸæ­£çš„ DOMä¸Šã€‚ ä¸ç®¡æ˜¯ DOM è¿˜æ˜¯è™šæ‹Ÿ DOMï¼Œå®ƒä»¬çš„ç»“æ„éƒ½æ˜¯ä¸€æ£µæ ‘ï¼Œå®Œå…¨å¯¹æ¯”ä¸¤æ£µæ ‘å˜åŒ–çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^3)ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬å¾ˆå°‘ä¼šè·¨å±‚çº§ç§»åŠ¨ DOMï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¯¹æ¯”åŒä¸€å±‚çº§çš„å˜åŒ–ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„ diff ç®—æ³•æœ‰ä¸¤ä¸ªåŸåˆ™ï¼š å¯¹æ¯”å½“å‰çœŸå®çš„ DOM å’Œè™šæ‹Ÿ DOMï¼Œåœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­ç›´æ¥æ›´æ–°çœŸå® DOM åªå¯¹æ¯”åŒä¸€å±‚çº§çš„å˜åŒ– diff æ–¹æ³•æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª diff æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹æ¯”çœŸå® DOM å’Œè™šæ‹Ÿ DOMï¼Œæœ€åè¿”å›æ›´æ–°åçš„ DOM æˆ‘ä»¬å…ˆæ¥ç®€å•çœ‹ä¸€ä¸‹çš„ä¸‰ç§è™šæ‹Ÿ dom ç»“æ„ 1234567891011121314151617181920// åŸç”ŸDOMèŠ‚ç‚¹çš„vnode&#123; tag: &#x27;div&#x27;, attrs: &#123; className: &#x27;active&#x27; &#125;, children: []&#125;// æ–‡æœ¬èŠ‚ç‚¹çš„vnode&quot;hello,world&quot;// ç»„ä»¶çš„vnode&#123; tag: ComponentConstrucotr, attrs: &#123; className: &#x27;active&#x27; &#125;, children: []&#125; æˆ‘ä»¬é¦–å…ˆè¦æ”¹å˜renderæ–¹æ³• 123456//å¢åŠ domå‚æ•° åˆå§‹ä¸ºundefinedfunction render(vnode, container,dom) &#123; - const _vnode = _render(vnode); //è¿”å›jsèŠ‚ç‚¹å¯¹è±¡ + const _vnode = diff(dom,vnode,container) return container.appendChild(_vnode);&#125; æœ€ç®€å•çš„å®ç°æ˜¯å…ˆåˆ›å»ºä¸€ä¸ª diff æ–¹æ³• 123456789function diff(dom, vnode, container) &#123; //å¯¹æ¯”èŠ‚ç‚¹çš„å˜åŒ– const ret = diffNode(dom, vnode); if (container) &#123; container.appendChild(ret); &#125; return ret;&#125;function diffNode(dom, vnode) &#123;&#125; æ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­123456789101112131415161718192021222324function diffNode(dom, vnode) &#123; let out = dom; //åˆå§‹domä¸ºundefined //åˆ¤æ–­vnodeæ˜¯å¦ä¸ºç©º if (vnode === undefined || vnode === null) return; //å¦‚æœvnodeæ˜¯æ•°å­—ç±»å‹åˆ™å¼ºåˆ¶è½¬åŒ– stringç±»å‹ if (typeof vnode === &quot;number&quot;) vnode = String(vnode); //åˆ¤æ–­vnodeæ˜¯å¦ä¸ºå­—ç¬¦ä¸² if (typeof vnode === &quot;string&quot;) &#123; // å¦‚æœå½“å‰çš„DOMå°±æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥æ›´æ–°å†…å®¹ if (dom &amp;&amp; dom.nodeType === 3) &#123; if (dom.textContent !== vnode) &#123; dom.textContent = vnode; &#125; // å¦‚æœDOMä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œåˆ™æ–°å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹DOMï¼Œå¹¶ç§»é™¤æ‰åŸæ¥çš„ &#125; else &#123; out = document.createTextNode(vnode); if (dom &amp;&amp; dom.parentNode) &#123; dom.parentNode.replaceChild(out, dom); &#125; &#125; return out; &#125;&#125; å®ƒæ²¡æœ‰å±æ€§ï¼Œä¹Ÿæ²¡æœ‰å­å…ƒç´ ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœäº† éæ–‡æœ¬èŠ‚ç‚¹åˆ¤æ–­vnode è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªéæ–‡æœ¬çš„ DOM èŠ‚ç‚¹ï¼Œé‚£å°±è¦åˆ†ä¸¤ç§æƒ…å†µäº†ï¼šä¸€ï¼šå¦‚æœçœŸå® DOM ä¸å­˜åœ¨ï¼Œè¡¨ç¤ºæ­¤èŠ‚ç‚¹æ˜¯æ–°å¢çš„ï¼Œæˆ–è€…æ–°æ—§ä¸¤ä¸ªèŠ‚ç‚¹çš„ç±»å‹ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±æ–°å»ºä¸€ä¸ª DOM å…ƒç´ ï¼Œå¹¶å°†åŸæ¥çš„å­èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ç§»åŠ¨åˆ°æ–°å»ºçš„ DOM èŠ‚ç‚¹ä¸‹ã€‚ 1234if (!dom) &#123; out = document.createElement(vnode.tag); diffAttribute(out, vnode);&#125; diffAttribute å¯¹æ¯”å±æ€§12345678910111213141516171819202122232425262728293031323334/* * dom çœŸå®dom * vnode è™šæ‹Ÿdom */function diffAttribute(dom, vnode) &#123; //ä¿å­˜ä¹‹å‰çš„domæ‰€ä»¥å±æ€§ const oldAttrs = &#123;&#125;; //æ–°çš„å±æ€§å€¼ const newAttrs = vnode.attrs; console.log(&quot;newAttrs&quot;, newAttrs); // &#123; className: &quot;active&quot;, title: &quot;123&quot; &#125; // dom åŸæœ‰èŠ‚ç‚¹å¯¹è±¡ vnode è™šæ‹ŸèŠ‚ç‚¹ const domAttrs = dom.attributes; console.log(&quot;domAttrs&quot;, domAttrs); [...domAttrs].forEach(item =&gt; &#123; console.log(item); oldAttrs[item.name] = item.value; //&#123;id:root&#125; &#125;); //å¦‚æœåŸæ¥çš„å±æ€§ä¸åœ¨æ–°çš„å±æ€§å½“ä¸­ï¼Œåˆ™å°†å…¶ç§»é™¤æ‰ï¼ˆå±æ€§å€¼è®¾ä¸ºundefinedï¼‰ for (let key in newAttrs) &#123; if (!(key in oldAttrs)) &#123; //ç§»é™¤dom setAttribute(dom, key, undefined); &#125; &#125; //æ›´æ–°å¯¹åº”å±æ€§ class=&quot;abc&quot; ==&gt; class=&quot;cba&quot; for (let key in newAttrs) &#123; //å±æ€§å€¼ä¸ç›¸ç­‰çš„æƒ…å†µ if (oldAttrs[key] !== newAttrs[key]) &#123; //å¢åŠ dom setAttribute(dom, key, newAttrs[key]); &#125; &#125;&#125; äºŒï¼šå¦‚æœçœŸå® DOM å­˜åœ¨ï¼Œå¹¶ä¸”å’Œè™šæ‹Ÿ DOM æ˜¯åŒä¸€ç±»å‹çš„ï¼Œé‚£æˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦åšåˆ«çš„ï¼Œåªéœ€è¦ç­‰å¾…åé¢å¯¹æ¯”å±æ€§å’Œå¯¹æ¯”å­èŠ‚ç‚¹ã€‚ å¯¹æ¯”å­èŠ‚ç‚¹çš„åˆ¤æ–­è¿™é‡Œä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå‰é¢æˆ‘ä»¬å®ç°çš„ä¸åŒ diff æ–¹æ³•ï¼Œéƒ½æ˜¯æ˜ç¡®çŸ¥é“å“ªä¸€ä¸ªçœŸå® DOM å’Œè™šæ‹Ÿ DOM å¯¹æ¯”ï¼Œä½†æ˜¯å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»¬å¯èƒ½æ”¹å˜äº†é¡ºåºï¼Œæˆ–è€…æ•°é‡æœ‰æ‰€å˜åŒ–ï¼Œæˆ‘ä»¬å¾ˆéš¾ç¡®å®šè¦å’Œè™šæ‹ŸDOMå¯¹æ¯”çš„æ˜¯å“ªä¸€ä¸ªã€‚ä¸ºäº†ç®€åŒ–é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç”¨æˆ·æä¾›ä¸€äº›çº¿ç´¢ï¼šç»™èŠ‚ç‚¹è®¾ä¸€ä¸ª key å€¼ï¼Œé‡æ–°æ¸²æŸ“æ—¶å¯¹æ¯”keyå€¼ç›¸åŒçš„èŠ‚ç‚¹ 12345//æ¯”è¾ƒå­èŠ‚ç‚¹(domèŠ‚ç‚¹å’Œç»„ä»¶)if ((vnode.children &amp;&amp; vnode.children.length &gt; 0) || (out.childNodes &amp;&amp; out.childNodes.length &gt; 0)) &#123; //å¯¹æ¯”ç»„ä»¶å’Œ å­èŠ‚ç‚¹ diffChildren(out, vnode.children);&#125; diffChildrenä¸€å¼€å§‹ dom ä¸ºç©ºå€¼,åªå»åŠ è½½ vchildren,å¯¹ vchildren åšç›¸åº”æ“ä½œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273function diffChildren(dom, vchildren) &#123; const domChildren = dom.childNodes; const children = []; const keyed = &#123;&#125;; // å°†æœ‰keyçš„èŠ‚ç‚¹å’Œæ²¡æœ‰keyçš„èŠ‚ç‚¹åˆ†å¼€ if (domChildren.length &gt; 0) &#123; for (let i = 0; i &lt; domChildren.length; i++) &#123; const child = domChildren[i]; const key = child.key; if (key) &#123; keyed[key] = child; &#125; else &#123; children.push(child); &#125; &#125; &#125; //ä¸€å¼€å§‹å…ˆèµ°è¿™é‡Œ if (vchildren &amp;&amp; vchildren.length &gt; 0) &#123; let min = 0; let childrenLen = children.length; for (let i = 0; i &lt; vchildren.length; i++) &#123; const vchild = vchildren[i]; const key = vchild.key; let child; // å¦‚æœæœ‰keyï¼Œæ‰¾åˆ°å¯¹åº”keyå€¼çš„èŠ‚ç‚¹ if (key) &#123; if (keyed[key]) &#123; child = keyed[key]; keyed[key] = undefined; &#125; // å¦‚æœæ²¡æœ‰keyï¼Œåˆ™ä¼˜å…ˆæ‰¾ç±»å‹ç›¸åŒçš„èŠ‚ç‚¹ &#125; else if (min &lt; childrenLen) &#123; for (let j = min; j &lt; childrenLen; j++) &#123; let c = children[j]; if (c &amp;&amp; isSameNodeType(c, vchild)) &#123; child = c; children[j] = undefined; if (j === childrenLen - 1) childrenLen--; if (j === min) min++; break; &#125; &#125; &#125; // å¯¹æ¯” child = diff(child, vchild); // æ›´æ–°DOM const f = domChildren[i]; if (child &amp;&amp; child !== dom &amp;&amp; child !== f) &#123; // å¦‚æœæ›´æ–°å‰çš„å¯¹åº”ä½ç½®ä¸ºç©ºï¼Œè¯´æ˜æ­¤èŠ‚ç‚¹æ˜¯æ–°å¢çš„ if (!f) &#123; dom.appendChild(child); // å¦‚æœæ›´æ–°åçš„èŠ‚ç‚¹å’Œæ›´æ–°å‰å¯¹åº”ä½ç½®çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸€æ ·ï¼Œè¯´æ˜å½“å‰ä½ç½®çš„èŠ‚ç‚¹è¢«ç§»é™¤äº† &#125; else if (child === f.nextSibling) &#123; removeNode(f); // å°†æ›´æ–°åçš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æ­£ç¡®çš„ä½ç½® &#125; else &#123; // æ³¨æ„insertBeforeçš„ç”¨æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å·²å­˜åœ¨çš„èŠ‚ç‚¹ dom.insertBefore(child, f); &#125; &#125; &#125; &#125;&#125; åœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­æˆ‘ä»¬åœ¨ä¹‹å‰çš„createElementè¿”å›å€¼ä¸­å¢åŠ ä¸€ä¸ª key å€¼, 12345678910function createElement(tag,attrs,...childrens)&#123; + attrs = attrs || &#123;&#125; return &#123; tag, attrs, childrens, + key:attrs.key || null &#125;&#125; ç»„ä»¶çš„ diffå¦‚æœ vnode æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–¹æ³•: 1234//å¦‚æœæ˜¯ å‡½æ•°ç»„ä»¶if (typeof vnode.tag === &quot;function&quot;) &#123; return diffComponent(dom, vnode);&#125; diffComponent æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839function diffComponent(dom, vnode) &#123; let comp = dom &amp;&amp; dom._component; let oldDom = dom; // å¦‚æœç»„ä»¶ç±»å‹æ²¡æœ‰å˜åŒ–ï¼Œåˆ™é‡æ–°set props if (comp &amp;&amp; comp.constructor === vnode.tag) &#123; setComponentProps(comp, vnode.attrs); dom = comp.base; // å¦‚æœç»„ä»¶ç±»å‹å˜åŒ–ï¼Œåˆ™ç§»é™¤æ‰åŸæ¥ç»„ä»¶ï¼Œå¹¶æ¸²æŸ“æ–°çš„ç»„ä»¶ &#125; else &#123; if (comp) &#123; //å¸è½½ç»„ä»¶ unmountComponent(comp); oldDom = null; &#125; //åˆ›å»ºæ–°ç»„ä»¶ comp = createComponent(vnode.tag, vnode.attrs); //è®¾ç½®ç»„ä»¶å±æ€§ setComponentProps(comp, vnode.attrs); //æŒ‚è½½æ–°ç»„ä»¶ dom = comp.base; if (oldDom &amp;&amp; dom !== oldDom) &#123; oldDom._component = null; removeNode(oldDom); &#125; &#125; return dom;&#125;/** * å¸è½½ç»„ä»¶ * @param &#123;*&#125; component */function unmountComponent(component) &#123; if (component.componentWillUnmount) component.componentWillUnmount(); removeNode(component.base);&#125; é‡æ–°ä¿®æ”¹ renderComponentå½“ç„¶æˆ‘ä»¬è¿˜éœ€è¦å»æ”¹renderComponentæ–¹æ³• 123456789101112131415161718192021222324export function renderComponent(comp) &#123; let base; const render = comp.render(); //è¿”å›jsxå¯¹è±¡ if (comp.base &amp;&amp; comp.componentWillUpdate) &#123; comp.componentWillUpdate(); &#125; if (comp.base) &#123; //ä»£è¡¨ç»„ä»¶å·²ç»æŒ‚è½½äº† if (comp.componentDidUpdate) comp.componentDidUpdate(); &#125; else if (comp.componentDidMount) &#123; comp.componentDidMount(); &#125; - base = _render(render); //è¿”å›jsèŠ‚ç‚¹å¯¹è±¡ + base = diffNode(comp.base,render) console.log(&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;, base); //åŸå…ˆæ•´ä¸ªdomæ›¿æ¢çš„æ–¹æ¡ˆå°±è¢«å‰”é™¤ - if (comp.base &amp;&amp; comp.base.parentNode) &#123; - comp.base.parentNode.replaceChild(base, comp.base); - &#125; comp.base = base;&#125; ä½“éªŒä¸‹ diff ä¸æ²¡æœ‰ diff","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä»é›¶å®ç° react ä¹‹ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•","slug":"ä»é›¶å®ç°reactä¹‹ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•","date":"2019-08-14T16:00:00.000Z","updated":"2020-09-16T09:06:59.000Z","comments":true,"path":"2019/08/15/ä»é›¶å®ç°reactä¹‹ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•/","link":"","permalink":"http://mariogogogo.github.io/2019/08/15/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E6%96%B9%E6%B3%95/","excerpt":"React ç”Ÿå‘½å‘¨æœŸä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µã€è¿è¡Œä¸­é˜¶æ®µå’Œé”€æ¯é˜¶æ®µï¼Œåœ¨ React ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œä¼šä¾æ¬¡è§¦å‘ä¸åŒçš„é’©å­å‡½æ•°ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹ React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°","text":"React ç”Ÿå‘½å‘¨æœŸä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µã€è¿è¡Œä¸­é˜¶æ®µå’Œé”€æ¯é˜¶æ®µï¼Œåœ¨ React ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œä¼šä¾æ¬¡è§¦å‘ä¸åŒçš„é’©å­å‡½æ•°ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹ React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° çœ‹ä¸€ä¸‹æµç¨‹å›¾ 12345678910111213141516171819202122232425262728293031323334353637383940414243class Home extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; num: 0 &#125;; &#125; componentWillMount() &#123; console.log(&quot;ç»„ä»¶å°†è¦åŠ è½½&quot;); &#125; componentWillReceiveProps(nextProps) &#123; console.log(&quot;componentWillReceiveProps&quot;, nextProps); &#125; componentWillUpdate() &#123; console.log(&quot;ç»„ä»¶å³å°†æ›´æ–°&quot;); &#125; componentDidUpdate(prevProps, prevState) &#123; console.log(&quot;ç»„ä»¶æ›´æ–°å®Œæˆ&quot;); &#125; componentDidMount() &#123; console.log(&quot;ç»„ä»¶åŠ è½½å®Œæˆ&quot;); &#125; componentWillUnmount() &#123; console.log(&quot;ç»„ä»¶å¸è½½&quot;); &#125; add() &#123; this.setState(&#123; num: this.state.num + 1 &#125;); &#125; render() &#123; return ( &lt;div className=&quot;active&quot; title=&quot;123&quot;&gt; hello,&lt;span&gt;æˆ‘æ˜¯ç±»ç»„ä»¶react,&#123;this.state.num&#125;&lt;/span&gt; &lt;button onClick=&#123;this.add.bind(this)&#125;&gt;ç‚¹å‡»æˆ‘,æ›´æ–°&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; é¦–å…ˆæˆ‘ä»¬åœ¨è°ƒç”¨componentWillMountçš„æ—¶å€™ç»„ä»¶æ˜¯ä¸æ˜¯è¿˜æ²¡æœ‰è¢«æ¸²æŸ“,æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æ˜¯å¦åœ¨renderComponentæ–¹æ³•ä¹‹å‰æ‰§è¡Œæˆ‘ä»¬çš„å°†è¦æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• setComponentPropså¦‚ä½•åˆ¤æ–­ç»„ä»¶æ˜¯å¦å·²ç»æŒ‚è½½?å¯ä»¥ä½¿ç”¨comp.base 123456789101112131415function setComponentProps(comp, props) &#123; /** * å®ç°ç”Ÿå‘½å‘¨æœŸ */ if (!comp.base) &#123; if (comp.componentWillMount) comp.componentWillMount(); &#125; else if (comp.componentWillReceiveProps) &#123; comp.componentWillReceiveProps(); &#125; //æŒ‚è½½compä¸Šå±æ€§ comp.props = props; // æ¸²æŸ“ç»„ä»¶ renderComponent(comp);&#125; renderComponenté‚£ä¹ˆç»§ç»­è€ƒè™‘componentWillUpdate,componentDidUpdate,componentDidMountçš„ç”Ÿå‘½å‘¨æœŸåœ¨å“ªé‡Œå®ç°? åº”è¯¥åœ¨renderComponentæ–¹æ³•ä¸­ 12345678910111213141516171819202122232425export function renderComponent(comp) &#123; let base; const render = comp.render(); //è¿”å›jsxå¯¹è±¡ if (comp.base &amp;&amp; ) &#123; comp.componentWillUpdate(); &#125; if (comp.base) &#123; //ä»£è¡¨ç»„ä»¶å·²ç»æŒ‚è½½äº† if (comp.componentDidUpdate) comp.componentDidUpdate(); &#125; else if (comp.componentDidMount) &#123; comp.componentDidMount(); &#125; base = _render(render); //è¿”å›jsèŠ‚ç‚¹å¯¹è±¡ console.log(&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;, base); //æ›´æ”¹çŠ¶æ€ if (comp.base &amp;&amp; comp.base.parentNode) &#123; comp.base.parentNode.replaceChild(base, comp.base); &#125; comp.base = base; console.log(&quot;comp&quot;, comp);&#125; å½“ç„¶è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ˜¯æœ€ç®€å•çš„å®ç°,å¹¶æ²¡æœ‰è€ƒè™‘å¾ˆå¤šæƒ…å†µ,æ¯”å¦‚å­ç»„ä»¶æ›´æ–°å®Œæ‰èƒ½çˆ¶ç»„ä»¶æ›´æ–°â€¦","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä»é›¶å®ç° react ä¹‹ç»„ä»¶å®ç°","slug":"ä»é›¶å®ç°reactä¹‹ç»„ä»¶å®ç°","date":"2019-08-11T16:00:00.000Z","updated":"2020-09-16T09:07:00.000Z","comments":true,"path":"2019/08/12/ä»é›¶å®ç°reactä¹‹ç»„ä»¶å®ç°/","link":"","permalink":"http://mariogogogo.github.io/2019/08/12/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0/","excerpt":"ç»„ä»¶åˆ†ä¸ºå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶","text":"ç»„ä»¶åˆ†ä¸ºå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ å‡½æ•°ç»„ä»¶12345678910/** * å‡½æ•°å¼ç»„ä»¶ */function Home() &#123; return ( &lt;div className=&quot;active&quot; title=&quot;123&quot;&gt; hello,&lt;span&gt;æˆ‘æ˜¯å‡½æ•°react&lt;/span&gt; &lt;/div&gt; );&#125; ç±»ç»„ä»¶1234567891011121314151617class Home1 extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; name: &quot;jack&quot;, num: 0 &#125;; &#125; render() &#123; return ( &lt;div className=&quot;active&quot; title=&quot;123&quot;&gt; hello,&lt;span&gt;æˆ‘æ˜¯ç±»ç»„ä»¶react,&#123;this.state.num&#125;&lt;/span&gt; &lt;button onClick=&#123;this.add.bind(this)&#125;&gt;ç‚¹å‡»æˆ‘,æ›´æ–°&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; Componentç»„ä»¶åŸºç±» React.Component åŒ…å«äº†ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„å˜é‡å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥åœ°å®ç°å®ƒï¼šå…ˆå®šä¹‰ä¸€ä¸ª Component ç±»ï¼š 1234567class Component &#123; constructor(props = &#123;&#125;) &#123; this.props = props; this.state = &#123;&#125;; &#125;&#125;export default Component; é€šè¿‡å®šä¹‰ç»„ä»¶æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ state &amp; propså±æ€§,è¿›è¡Œåˆå§‹åŒ– setStateç»„ä»¶å†…éƒ¨è¿˜æœ‰ä¸ªsetStateæ–¹æ³•ä¿®æ”¹æ•°æ® 123456789import &#123; renderComponent &#125; from &#x27;../react-dom/render&#x27;...setState(stateChange) &#123; //æ›´æ–°æ•°æ® Object.assign(this.state,stateChange) //é‡æ–°æ¸²æŸ“ç»„ä»¶ thisæŒ‡å½“å‰ç»„ä»¶ console.log(&#x27;Component-this&#x27;, this); renderComponent(this) &#125; å½“ç„¶æˆ‘ä»¬çŸ¥é“ setState æ˜¯å¼‚æ­¥çš„,æˆ‘ä»¬åªæ˜¯å…ˆå®ç°ä¸€ä¸ªæœ€ç®€å•ç²—æš´çš„ setState.åé¢ä¼šç»§ç»­è¿­ä»£è¿™ä¸ªæ–¹æ³•. renderæˆ‘ä»¬ç»§ç»­åˆ†æä¸€ä¸‹renderæ–¹æ³•æˆ‘ä»¬ç»§ç»­å°† render æ–¹æ³•åšä¸€äº›æ”¹å˜,å°å°çš„å°è£…ä¸€ä¸‹,è®¾ç½®ä¸€ä¸ª_renderæ–¹æ³•è¿”å› jsx èŠ‚ç‚¹å¯¹è±¡ 1234function render(vnode, container) &#123; const _vnode = _render(vnode); //è¿”å›jsèŠ‚ç‚¹å¯¹è±¡ return container.appendChild(_vnode);&#125; react æ˜¯å¦‚ä½•åŒºåˆ†å¦‚ä½•åŒºåˆ†ä¸€ä¸ªç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶ é¦–å…ˆå‡½æ•°ç»„ä»¶å¯ä»¥ç›´æ¥ new å‡½æ•°ç»„ä»¶.é‚£ä¹ˆç±»ç»„ä»¶å¦‚ä½•åˆ¤æ–­? 1home.prototype &amp;&amp; home.prototype.render; _render123456789101112131415161718192021function _render(vnode) &#123; .... //åˆ¤æ–­ç»„ä»¶æ˜¯å‡½æ•° if (typeof vnode.tag === &quot;function&quot;) &#123; //åˆ›å»ºç»„ä»¶ const comp = createComponent(vnode.tag,vnode.attrs) console.log(&#x27;å‡½æ•°ç»„ä»¶&#x27;,comp); //è®¾ç½®ç»„ä»¶å±æ€§ setComponentProps(comp,vnode.attrs) //ç»„ä»¶æ¸²æŸ“èŠ‚ç‚¹ è¿”å›å¯¹è±¡ return comp.base &#125; // å°†è™šæ‹Ÿdomè½¬åŒ–æˆçœŸå®domæ‰“å°åˆ°é¡µé¢ä¸­ vnode.childrens.forEach(child =&gt; &#123; render(child, dom); &#125;); return dom;&#125; ç»„ä»¶çš„æ¸²æŸ“ç”¨åˆ°äº†createComponentå’ŒsetComponentPropsä¸¤ä¸ªæ–¹æ³•.æˆ‘ä»¬æ¥åˆ†æä¸‹ createComponentcreateComponentæ–¹æ³•ç”¨æ¥åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå¹¶ä¸”å°†å‡½æ•°å®šä¹‰ç»„ä»¶æ‰©å±•ä¸ºç±»å®šä¹‰ç»„ä»¶è¿›è¡Œå¤„ç†ï¼Œä»¥å…å…¶ä»–åœ°æ–¹éœ€è¦åŒºåˆ†ä¸åŒå®šä¹‰æ–¹å¼ã€‚ 1234567891011121314151617181920//åˆ›å»ºç»„ä»¶function createComponent(comp, props) &#123; let inst; // å¦‚æœæ˜¯ç±»å®šä¹‰ç»„ä»¶ï¼Œåˆ™ç›´æ¥è¿”å›å®ä¾‹ if (comp.prototype &amp;&amp; comp.prototype.render) &#123; //ç±»ç»„ä»¶ inst = new comp(props); &#125; else &#123; //å‡½æ•°ç»„ä»¶ æ‰©å±•æˆç±»ç»„ä»¶ æ„é€ ä¸€ä¸ªå®ä¾‹, ç»Ÿä¸€ç®¡ç† inst = new Component(props); // æ„é€ å‡½æ•°çš„æŒ‡å‘ inst.constructor = comp; //å®šä¹‰renderå‡½æ•° inst.render = function() &#123; return this.constructor(props); //==&gt; ç›¸å½“äºæ‰§è¡Œ ç±»ç»„ä»¶ä»² render()&#123;xxxxx&#125; æ–¹æ³• &#125;; &#125; return inst;&#125; setComponentPropssetComponentProps æ–¹æ³•ç”¨æ¥æ›´æ–°propsï¼Œåœ¨å…¶ä¸­å¯ä»¥å®ç°componentWillMountï¼ŒcomponentWillReceivePropsä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•(ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬ä¸‹æ¬¡å†è¯´) 12345function setComponentProps(comp, props) &#123; comp.props = props; // æ¸²æŸ“ç»„ä»¶ renderComponent(comp);&#125; renderComponent12345678function renderComponent(comp) &#123; let base; //åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ç”¨äºå­˜æ”¾èŠ‚ç‚¹å¯¹è±¡ const render = comp.render(); //è¿”å›jsxå¯¹è±¡ base = _render(render); //è¿”å›jsèŠ‚ç‚¹å¯¹è±¡ console.log(&quot;jsèŠ‚ç‚¹å¯¹è±¡&quot;, base); comp.base = base; console.log(&quot;comp&quot;, comp);&#125; ç°åœ¨å¤§éƒ¨åˆ†å·¥ä½œå·²ç»å®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ¸²æŸ“ç»„ä»¶äº†ã€‚","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä»é›¶å®ç° react ä¹‹ JSX å’Œè™šæ‹Ÿ DOM","slug":"ä»é›¶å®ç°reactä¹‹JSXå’Œè™šæ‹ŸDOM","date":"2019-08-10T16:00:00.000Z","updated":"2020-09-16T09:07:00.000Z","comments":true,"path":"2019/08/11/ä»é›¶å®ç°reactä¹‹JSXå’Œè™šæ‹ŸDOM/","link":"","permalink":"http://mariogogogo.github.io/2019/08/11/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8BJSX%E5%92%8C%E8%99%9A%E6%8B%9FDOM/","excerpt":"æˆ‘ä»¬å¯ä»¥ä»æœ€ç®€å•åˆ†æä¸€ä¸‹ 1ReactDOM.render(&quot;ele&quot;, document.getElementById(&quot;root&quot;));","text":"æˆ‘ä»¬å¯ä»¥ä»æœ€ç®€å•åˆ†æä¸€ä¸‹ 1ReactDOM.render(&quot;ele&quot;, document.getElementById(&quot;root&quot;)); ä»¥ä¸Šä»£ç çš„æ„æ€å°±æ˜¯è¯´ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡,å°†å­—ç¬¦ä¸²æŒ‚è½½åˆ°èŠ‚ç‚¹å¯¹è±¡ä¸­å¹¶æ˜¾ç¤ºåˆ°é¡µé¢ä¸­ é‚£ render çš„å«ä¹‰å…¶å®å°±æ˜¯æ¸²æŸ“ 123456789101112const ReactDOM = &#123; render&#125;;/** * * @param &#123;è™šæ‹Ÿdom/rootèŠ‚ç‚¹&#125; vnode * @param &#123;å®¹å™¨&#125; container */function render(vnode, container) &#123; return container.appendChild(dom);&#125; è¿™æ ·æˆ‘ä»¬çš„å…ƒç´ å°±æŒ‚è½½å®Œæˆ ä½† react è¿œè¿œä¸æ­¢é‚£ä¹ˆç®€å•å¯¹å§.æˆ‘ä»¬renderç¬¬ä¸€ä¸ªå‚æ•°ä¸­è¿˜å¯ä»¥ä¼ å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ jsx å¯¹è±¡1234567891011121314const ele = ( &lt;div className=&quot;active&quot; title=&quot;123&quot;&gt; hello,&lt;span&gt; react&lt;/span&gt; &lt;/div&gt;);/** æ¨¡æ‹Ÿå‡ºä»¥ä¸‹ä»£ç  var ele = React.createElement(&quot;div&quot;, &#123; cl: true, as: true, sName: &quot; active&quot;, title: &quot; 123 &quot;&#125;, &quot;hello, &quot;, React.createElement(&quot;span&quot;, null, &quot; react&quot;)); */ ç»è¿‡è½¬åŒ–,åº”è¯¥æ˜¯è¿™æ ·çš„ æˆ‘ä»¬æ¥çœ‹çœ‹ render å‡½æ•°æ˜¯å¦‚ä½•å®ç°? renderæ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†è™šæ‹Ÿ DOM æ¸²æŸ“æˆçœŸå®çš„ DOM æˆ‘ä»¬é¦–å…ˆè¦å°† ele ä¸­çš„ dom å¯¹è±¡è§£ææˆ jsx å¯¹è±¡ 123456789101112const React = &#123; createElement&#125;;function createElement(tag, attrs, ...childrens) &#123; return &#123; tag, attrs, childrens &#125;;&#125;export default React; å¦‚ä¸‹ä»£ç å®ç°ReactDOM.render 1234567//æœ€ç®€å•çš„å®ç°const ReactDOM = &#123; render&#125;;function render(vnode, container) &#123;&#125;export default ReactDOM; è™šæ‹ŸèŠ‚ç‚¹çš„æ ¡éªŒæ¥ä¸‹æ¥ç»§ç»­ç»†åŒ–æ¯ä¸€ä¸ªç»†èŠ‚,renderä¸­è¦æ ¡éªŒä¸€ä¸‹vnode 123456789101112131415161718function render(vnode, container) &#123; //åˆ¤æ–­vnodeæ˜¯å¦ä¸ºç©º if (vnode === undefined || vnode === null) return; //å¦‚æœvnodeæ˜¯æ•°å­—ç±»å‹åˆ™å¼ºåˆ¶è½¬åŒ– stringç±»å‹ if (typeof vnode === &quot;number&quot;) vnode = String(vnode); //åˆ¤æ–­vnodeæ˜¯å¦ä¸ºå­—ç¬¦ä¸² if (typeof vnode === &quot;string&quot;) &#123; //åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ const textNode = document.createTextNode(vnode); return container.appendChild(textNode); &#125; // å¦åˆ™å°±æ˜¯è™šæ‹Ÿdomå¯¹è±¡ const &#123; tag, attrs &#125; = vnode; //åˆ›å»ºèŠ‚ç‚¹å¯¹è±¡ const dom = document.createElement(tag); // &lt;div&gt;&lt;/div&gt; return container.appendChild(dom);&#125; æ–‡æœ¬èŠ‚ç‚¹æ¸²æŸ“ç»§ç»­æˆ‘ä»¬å¯ä»¥è€ƒè™‘&lt;div className=&quot;box&quot;,title=&quot;æ–‡æœ¬&quot;&gt;èŠ‚ç‚¹å¯¹è±¡ä¸Šçš„å±æ€§å¦‚ä½•æ·»åŠ å‘¢é¥¿? 12345678910...... const dom = document.createElement(tag); //åˆ¤æ–­å¦‚æœæœ‰å±æ€§å€¼if (attrs) &#123; Object.keys(attrs).forEach(key =&gt; &#123; const value = attrs[key]; //æ·»åŠ èŠ‚ç‚¹å±æ€§ setAttribute(dom, key, value); &#125;);&#125; æˆ‘ä»¬ç»§ç»­åˆ†æä¸€ä¸‹setAttributeæ·»åŠ å±æ€§çš„æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637// å¯¹domä¸­çš„æ ‡ç­¾è®¾ç½®å±æ€§å div class=&quot;root&quot; or div onclick=&quot;add()&quot;function setAttribute(dom, key, value) &#123; //åˆ¤æ–­classå±æ€§å if (key === &quot;className&quot;) &#123; key = &quot;class&quot;; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»äº‹ä»¶ if (/on\\w/.test(key)) &#123; key = key.toLocaleLowerCase(); //onClick -&gt; onclick dom[key] = value || &quot;&quot;; &#125; else if (key === &quot;style&quot;) &#123; //ä¾‹å¦‚ div style=&quot;xxxx:xxxx&quot; or stlye=&#123;&#123;&#125;&#125; if (!value || typeof value === &quot;string&quot;) &#123; dom.style.cssText = value || &quot;&quot;; &#125; else if (value &amp;&amp; typeof value === &quot;object&quot;) &#123; for (const k in value) &#123; // &#123;width:20&#125; if (typeof value[k] === &quot;number&quot;) &#123; dom.style[k] = value[k] + &quot;px&quot;; &#125; else &#123; dom.style[k] = value[k]; &#125; &#125; &#125; &#125; else &#123; //å…¶ä»–å±æ€§ if (key in dom) &#123; dom[key] = value || &quot;&quot;; &#125; //æ›´æ–°å€¼ if (value) &#123; dom.setAttribute(key, value); &#125; else &#123; dom.removeAttribute(key); &#125; &#125;&#125; å­èŠ‚ç‚¹æ¸²æŸ“æˆ‘ä»¬åœ¨createElementä¸­æœ‰childrenså±æ€§,ä»£è¡¨å…¶ä»–å­èŠ‚ç‚¹å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½æ˜¯æ•°ç»„ 1234567function createElement(tag, attrs, ...childrens) &#123; return &#123; tag, attrs, childrens //å…¶ä»–å­èŠ‚ç‚¹ &#125;;&#125; æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ©ç”¨é€’å½’ 12345678910/** æ¸²æŸ“å­èŠ‚ç‚¹ ç”¨é€’å½’ * &lt;div&gt;hello,&lt;span&gt;123&lt;/span&gt;&lt;/div&gt; */if (vnode.childrens) &#123; vnode.childrens.forEach(child =&gt; &#123; render(child, dom); &#125;);&#125;return container.appendChild(dom); åˆ°è¿™é‡Œæœ€ç®€å•çš„ jsx ä¸è™šæ‹Ÿ dom å°±åˆ†æåˆ°è¿™é‡Œ","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä»é›¶å®ç° react ä¹‹ä»‹ç»ä»¥åŠç›¸å…³é…ç½®","slug":"ä»é›¶å®ç°reactä¹‹ä»‹ç»ä»¥åŠç›¸å…³é…ç½®","date":"2019-08-08T16:00:00.000Z","updated":"2020-09-16T09:06:59.000Z","comments":true,"path":"2019/08/09/ä»é›¶å®ç°reactä¹‹ä»‹ç»ä»¥åŠç›¸å…³é…ç½®/","link":"","permalink":"http://mariogogogo.github.io/2019/08/09/%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0react%E4%B9%8B%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/","excerpt":"æˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªminiReactæ–‡ä»¶å¤¹,åˆå§‹åŒ–é…ç½® 1yarn init -y","text":"æˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªminiReactæ–‡ä»¶å¤¹,åˆå§‹åŒ–é…ç½® 1yarn init -y ä¸‹è½½ä¸€äº›ä¾èµ– 123yarn add -g parcel-bundleryarn add babel-core babel-preset-env babel-plugin-transform-react-jsx --dev parcel æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„é›¶é…ç½®æ‰“åŒ…å·¥å…· æ¥ä¸‹æ¥æ–°å»º index.js å’Œ index.htmlï¼Œåœ¨ index.html ä¸­å¼•å…¥ index.jsã€‚ æ³¨æ„ä¸€ä¸‹ babel çš„é…ç½® .babelrc 12345678&#123; &quot;presets&quot;: [&quot;env&quot;], &quot;plugins&quot;: [ [&quot;transform-react-jsx&quot;, &#123; &quot;pragma&quot;: &quot;React.createElement&quot; &#125;] ]&#125; è¿™ä¸ªtransform-react-jsxå°±æ˜¯å°†jsxè½¬æ¢æˆjsçš„ babel æ’ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸ª pragma é¡¹ï¼Œå¯ä»¥å®šä¹‰ jsx è½¬æ¢æ–¹æ³•çš„åç§°ï¼Œä½ ä¹Ÿå¯ä»¥å°†å®ƒæ”¹æˆ hï¼ˆè¿™æ˜¯å¾ˆå¤šç±» React æ¡†æ¶ä½¿ç”¨çš„åç§°) å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤ parcel index.html å°†å®ƒè·‘èµ·æ¥äº†ï¼Œå½“ç„¶ï¼Œç°åœ¨å®ƒè¿˜ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ æˆ‘ä»¬å†ä¸‹ä¸€æ¬¡ä»‹ç»å¦‚ä½•è§£æ jsx","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"VSCodeä¹¦å†™é¡¹ç›®é…ç½®eslint+prettier ç»Ÿä¸€ä»£ç é£æ ¼","slug":"VS Codeä¹¦å†™é¡¹ç›®é…ç½® eslint+prettier ç»Ÿä¸€ä»£ç é£æ ¼","date":"2019-08-07T16:00:00.000Z","updated":"2020-09-16T09:07:55.000Z","comments":true,"path":"2019/08/08/VS Codeä¹¦å†™é¡¹ç›®é…ç½® eslint+prettier ç»Ÿä¸€ä»£ç é£æ ¼/","link":"","permalink":"http://mariogogogo.github.io/2019/08/08/VS%20Code%E4%B9%A6%E5%86%99%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%20eslint+prettier%20%E7%BB%9F%E4%B8%80%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC/","excerpt":"é¡¹ç›®å†™çš„äººè¶Šæ¥è¶Šå¤šï¼Œç»Ÿä¸€ä»£ç è§„èŒƒçš„è¶‹åŠ¿è¶Šæ¥è¶Šé‡è¦ï¼Œç ”ç©¶ä¸‹eslintå§","text":"é¡¹ç›®å†™çš„äººè¶Šæ¥è¶Šå¤šï¼Œç»Ÿä¸€ä»£ç è§„èŒƒçš„è¶‹åŠ¿è¶Šæ¥è¶Šé‡è¦ï¼Œç ”ç©¶ä¸‹eslintå§ å…³äºeslintçš„å†å²è°·æ­Œå§ å®‰è£…1yarn global add eslint åˆå§‹åŒ–é¡¹ç›®12345mkdir eslint-democd eslint-demoeslint --init ç„¶åè¿›å…¥æ™ºèƒ½é—®ç­”æ—¶é—´O(âˆ©_âˆ©)O~~ 123456789101112? How would you like to configure ESLint? Answer questions about your style? Are you using ECMAScript 6 features? Yes? Are you using ES6 modules? Yes? Where will your code run? Browser? Do you use CommonJS? Yes? Do you use JSX? No? What style of indentation do you use? Tabs? What quotes do you use for strings? Single? What line endings do you use? Windows? Do you require semicolons? No? What format do you want your config file to be in? JavaScript å…¨éƒ¨å›ç­”ä¹‹åç”Ÿæˆä¸€ä¸ª.eslint.jsæ–‡ä»¶ï¼Œå†…å®¹é‡Œé¢å¾ˆå¤š 1234567891011121314151617181920212223242526272829module.exports = &#123; &quot;env&quot;: &#123; &quot;browser&quot;: true, &quot;commonjs&quot;: true, &quot;es6&quot;: true &#125;, &quot;extends&quot;: &quot;eslint:recommended&quot;, &quot;parserOptions&quot;: &#123; &quot;sourceType&quot;: &quot;module&quot; &#125;, &quot;rules&quot;: &#123; &quot;indent&quot;: [ &quot;error&quot;, &quot;tab&quot; ], &quot;linebreak-style&quot;: [ &quot;error&quot;, &quot;windows&quot; ], &quot;quotes&quot;: [ &quot;error&quot;, &quot;single&quot; ], &quot;semi&quot;: [ &quot;error&quot;, &quot;never&quot; ] &#125;&#125;; é‡Œé¢å¾ˆå¤šå‚æ•°ä¸€è„¸æ‡µé€¼ï¼Œæ²¡å…³ç³»å…¨åˆ äº†ï¼Œåªç•™ä¸‹ä¸€ä¸ª 123module.exports = &#123; &quot;extends&quot;: &quot;eslint:recommended&quot; &#125;; æµ‹è¯•æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„demo.js 1234567891011121314151617181920212223242526function merge() &#123; var ret = &#123;&#125; for (var i in arguments) &#123; var m = arguments[i] for (var j in m) ret[j] = m[j] &#125; return ret&#125;console.log(merge(&#123; a: 123 &#125;, &#123; b: 456 &#125;))var a = &#x27;123&#x27;, b = &#x27;23444&#x27;function add(a, b) &#123; return a &gt;= b&#125;add(a, b)let aaa = () =&gt; &#123; return true&#125;console.log(aaa()) ç„¶åç»ˆç«¯è¾“å…¥ 1eslint demo.js ç»“æœæ˜¾ç¤º è§£å†³no-undef:å‡ºé”™çš„åŸå› æ˜¯å› ä¸ºJavaScriptæœ‰å¾ˆå¤šç§è¿è¡Œç¯å¢ƒ,æ¯”å¦‚å¸¸è§çš„æœ‰æµè§ˆå™¨å’ŒNode.jsï¼Œå¦å¤–è¿˜æœ‰å¾ˆå¤šè½¯ä»¶ç³»ç»Ÿä½¿ç”¨JavaScriptä½œä¸ºå…¶è„šæœ¬å¼•æ“ï¼Œæ¯”å¦‚PostgreSQLå°±æ”¯æŒä½¿ç”¨JavaScriptæ¥ç¼–å†™å­˜å‚¨å¼•æ“ï¼Œè€Œè¿™äº›è¿è¡Œç¯å¢ƒå¯èƒ½å¹¶ä¸å­˜åœ¨consoleè¿™ä¸ªå¯¹è±¡ã€‚å¦å¤–åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ä¼šæœ‰windowå¯¹è±¡ï¼Œè€ŒNode.jsä¸‹æ²¡æœ‰ï¼›åœ¨Node.jsä¸‹ä¼šæœ‰processå¯¹è±¡ï¼Œè€Œæµè§ˆå™¨ç¯å¢ƒä¸‹æ²¡æœ‰ã€‚ 12345678910module.exports = &#123; extends: &#x27;eslint:recommended&#x27;, env: &#123; node: true, //ç¨‹åºçš„è¿è¡Œç¯å¢ƒ &#125;, rules: &#123; &#125;&#125;; å†è¿è¡Œ 1eslint demo.js å°±æ²¡æœ‰é”™è¯¯äº† å¸¸ç”¨å‚æ•°envå½“ç„¶envä¹Ÿå¯ä»¥åŠ å…¥å…¶ä»–ç¯å¢ƒ12345env: &#123; &#x27;browser&#x27;: true, &#x27;commonjs&#x27;: true, &#x27;es6&#x27;: true&#125;, ruluesè§„åˆ™é”™è¯¯ç­‰çº§æœ‰ä¸‰ç§12345670æˆ–â€™offâ€™ï¼šå…³é—­è§„åˆ™ã€‚ 1æˆ–â€™warnâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªè­¦å‘Šï¼ˆå¹¶ä¸ä¼šå¯¼è‡´æ£€æŸ¥ä¸é€šè¿‡ï¼‰ã€‚ 2æˆ–â€™errorâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªé”™è¯¯ (é€€å‡ºç ä¸º1ï¼Œæ£€æŸ¥ä¸é€šè¿‡)ã€‚å‚æ•°è¯´æ˜ï¼š å‚æ•°1 ï¼š é”™è¯¯ç­‰çº§ å‚æ•°2 ï¼š å¤„ç†æ–¹å¼ é…ç½®ä»£ç æ³¨é‡Šæ–¹å¼123456789å¿½ç•¥ no-undef æ£€æŸ¥ /* eslint-disable no-undef */å¿½ç•¥ no-new æ£€æŸ¥ /* eslint-disable no-new */è®¾ç½®æ£€æŸ¥ /*eslint eqeqeq: off*/ /*eslint eqeqeq: 0*/ é¡¹ç›®ä¸­é…ç½®eslintrc1234567891011121314module.exports = &#123; extends: &#x27;eslint:recommended&#x27;, env: &#123; node: true &#125;, parser: &#x27;babel-eslint&#x27;, rules: &#123; &#x27;no-console&#x27;: &#x27;off&#x27;, //å¼ºåˆ¶ä½¿ç”¨å•å¼•å· quotes: [&#x27;error&#x27;, &#x27;single&#x27;], //å¼ºåˆ¶ä¸ä½¿ç”¨åˆ†å·ç»“å°¾ semi: [&#x27;error&#x27;, &#x27;never&#x27;] &#125;&#125; vscodeä¸­å…¨å±€é…ç½®å¿…é¡»å®‰è£…é¡¹ç›®é…ç½®äº†ä½¿ç”¨eslintå¿…é¡»å®‰è£…Document Thisæ’ä»¶ 12345678910111213141516171819202122232425262728&quot;workbench.iconTheme&quot;: &quot;vscode-icons-mac&quot;,&quot;editor.renderIndentGuides&quot;: false,&quot;cSpell.ignoreWords&quot;: [&quot;antd&quot;],//ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹æ—¶è‡ªåŠ¨ä¿å­˜æ›´æ–°åçš„æ–‡ä»¶&quot;files.autoSave&quot;: &quot;onFocusChange&quot;,&quot;workbench.colorTheme&quot;: &quot;Monokai&quot;,&quot;git.confirmSync&quot;: false,&quot;window.title&quot;: &quot;$&#123;activeEditorLong&#125;$&#123;separator&#125;$&#123;rootName&#125;&quot;,&quot;window.zoomLevel&quot;: 0,&quot;editor.fontSize&quot;: 14,//ä¸ºäº†ç¬¦åˆeslintçš„ä¸¤ä¸ªç©ºæ ¼é—´éš”åŸåˆ™&quot;editor.tabSize&quot;: 2,// æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š&quot;fileheader.Author&quot;: &quot;Mario&quot;,&quot;fileheader.LastModifiedBy&quot;: &quot;mario&quot;,//å…³é—­ç¼–è¾‘å™¨é»˜è®¤ä»£ç æ£€æŸ¥,ä¸ºäº†ä¸è·Ÿeslinté…ç½®å†²çª&quot;editor.formatOnSave&quot;: false,&quot;javascript.format.enable&quot;: false,//eslint æ ¼å¼åŒ–æ’ä»¶ï¼Œä¿å­˜æ—¶åº”ç”¨eslintè§„åˆ™è‡ªåŠ¨æ ¼å¼åŒ–åä¿å­˜&quot;eslint.autoFixOnSave&quot;: true,&quot;prettier.eslintIntegration&quot;: true,// å»æ‰ä»£ç ç»“å°¾åˆ†å·&quot;prettier.semi&quot;: false,&quot;git.path&quot;: &quot;/usr/bin/git&quot;,&quot;editor.fontFamily&quot;: &quot;Microsoft YaHeiï¼ŒMenlo, Monaco, &#x27;Courier New&#x27;, monospace&quot;,&quot;editor.fontWeight&quot;: &quot;bold&quot;,&quot;javascript.updateImportsOnFileMove.enabled&quot;: &quot;never&quot;,&quot;explorer.confirmDragAndDrop&quot;: false","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"HTML è·å–å±å¹•&æµè§ˆå™¨&é¡µé¢çš„é«˜åº¦å®½åº¦","slug":"HTML è·å–å±å¹•&æµè§ˆå™¨&é¡µé¢çš„é«˜åº¦å®½åº¦","date":"2019-08-04T16:00:00.000Z","updated":"2020-12-08T06:36:55.000Z","comments":true,"path":"2019/08/05/HTML è·å–å±å¹•&æµè§ˆå™¨&é¡µé¢çš„é«˜åº¦å®½åº¦/","link":"","permalink":"http://mariogogogo.github.io/2019/08/05/HTML%20%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95&%E6%B5%8F%E8%A7%88%E5%99%A8&%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6/","excerpt":"æœ¬ç¯‡ä¸»è¦ä»‹ç»Webç¯å¢ƒä¸­å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢çš„é«˜åº¦ã€å®½åº¦ä¿¡æ¯ã€‚ ç›®å½•\\1. ä»‹ç»ï¼šä»‹ç»é¡µé¢çš„å®¹å™¨(å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢)ã€ç‰©ç†å°ºå¯¸ä¸åˆ†è¾¨ç‡ã€å±•ç¤ºç­‰å†…å®¹ã€‚ \\2. å±å¹•ä¿¡æ¯ï¼šä»‹ç»å±å¹•å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šå±å¹•ã€è½¯ä»¶å¯ç”¨ä»¥åŠä»»åŠ¡æ çš„é«˜åº¦å’Œå®½åº¦ã€‚ \\3. æµè§ˆå™¨ä¿¡æ¯ï¼šä»‹ç»æµè§ˆå™¨å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šæµè§ˆå™¨ã€å†…éƒ¨é¡µé¢ä»¥åŠå·¥å…·æ çš„é«˜åº¦å’Œå®½åº¦ã€‚ \\4. é¡µé¢ä¿¡æ¯ï¼šä»‹ç»HTMLé¡µé¢å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šbodyæ€»çš„ã€å±•ç¤ºçš„é«˜åº¦å’Œå®½åº¦ã€‚","text":"æœ¬ç¯‡ä¸»è¦ä»‹ç»Webç¯å¢ƒä¸­å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢çš„é«˜åº¦ã€å®½åº¦ä¿¡æ¯ã€‚ ç›®å½•\\1. ä»‹ç»ï¼šä»‹ç»é¡µé¢çš„å®¹å™¨(å±å¹•ã€æµè§ˆå™¨åŠé¡µé¢)ã€ç‰©ç†å°ºå¯¸ä¸åˆ†è¾¨ç‡ã€å±•ç¤ºç­‰å†…å®¹ã€‚ \\2. å±å¹•ä¿¡æ¯ï¼šä»‹ç»å±å¹•å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šå±å¹•ã€è½¯ä»¶å¯ç”¨ä»¥åŠä»»åŠ¡æ çš„é«˜åº¦å’Œå®½åº¦ã€‚ \\3. æµè§ˆå™¨ä¿¡æ¯ï¼šä»‹ç»æµè§ˆå™¨å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šæµè§ˆå™¨ã€å†…éƒ¨é¡µé¢ä»¥åŠå·¥å…·æ çš„é«˜åº¦å’Œå®½åº¦ã€‚ \\4. é¡µé¢ä¿¡æ¯ï¼šä»‹ç»HTMLé¡µé¢å°ºå¯¸ä¿¡æ¯ï¼›å¦‚ï¼šbodyæ€»çš„ã€å±•ç¤ºçš„é«˜åº¦å’Œå®½åº¦ã€‚ ä¸€ã€ä»‹ç»1. å®¹å™¨ä¸€ä¸ªé¡µé¢çš„å±•ç¤ºï¼Œä»å¤–åˆ°å†…çš„å®¹å™¨ä¸ºï¼šå±å¹•ã€æµè§ˆå™¨ä»¥åŠé¡µé¢æœ¬èº«ã€‚ HTMLå…ƒç´ å±•ç°åœ¨é¡µé¢å†…ï¼Œé¡µé¢å±•ç°åœ¨æµè§ˆå™¨å†…ï¼Œè€Œæµè§ˆå™¨å±•ç°åœ¨å±å¹•å†…ã€‚ é€šè¿‡Jsçš„ä¸€äº›å¯¹è±¡å¯ä»¥è·å–è¿™äº›å®¹å™¨çš„é«˜åº¦ã€å®½åº¦ã€‚ 2. ç‰©ç†å°ºå¯¸å’Œåˆ†è¾¨ç‡å®¹å™¨çš„å°ºå¯¸æ˜¯æŒ‡å½“å‰åˆ†è¾¨ç‡ä¸‹çš„é«˜åº¦ã€å®½åº¦ï¼Œè€Œä¸æ˜¯ç‰©ç†é«˜åº¦ã€å®½åº¦ã€‚ å¦‚ï¼šä¸€ä¸ª22å¯¸çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•åˆ†è¾¨ç‡ä¸º1366 * 768ï¼Œé‚£ä¹ˆè·å–åˆ°çš„å±å¹•é«˜åº¦ä¸º1366pxï¼Œå®½åº¦ä¸º768pxã€‚ 3. å±•ç¤ºå›¾ äºŒã€å±å¹•ä¿¡æ¯ screen.height ï¼šå±å¹•é«˜åº¦ã€‚ screen.width ï¼šå±å¹•å®½åº¦ã€‚ screen.availHeight ï¼šå±å¹•å¯ç”¨é«˜åº¦ã€‚å³å±å¹•é«˜åº¦å‡å»ä¸Šä¸‹ä»»åŠ¡æ åçš„é«˜åº¦ï¼Œå¯è¡¨ç¤ºä¸ºè½¯ä»¶æœ€å¤§åŒ–æ—¶çš„é«˜åº¦ã€‚ screen.availWidth ï¼šå±å¹•å¯ç”¨å®½åº¦ã€‚å³å±å¹•å®½åº¦å‡å»å·¦å³ä»»åŠ¡æ åçš„å®½åº¦ï¼Œå¯è¡¨ç¤ºä¸ºè½¯ä»¶æœ€å¤§åŒ–æ—¶çš„å®½åº¦ã€‚ ä»»åŠ¡æ é«˜/å®½åº¦ ï¼šå¯é€šè¿‡å±å¹•é«˜/å®½åº¦ å‡å» å±å¹•å¯ç”¨é«˜/å®½åº¦å¾—å‡ºã€‚å¦‚ï¼šä»»åŠ¡æ é«˜åº¦ = screen.height - screen.availHeight ã€‚ ä¸‰ã€æµè§ˆå™¨ä¿¡æ¯ window.outerHeight ï¼šæµè§ˆå™¨é«˜åº¦ã€‚ window.outerWidth ï¼šæµè§ˆå™¨å®½åº¦ã€‚ window.innerHeight ï¼šæµè§ˆå™¨å†…é¡µé¢å¯ç”¨é«˜åº¦ï¼›æ­¤é«˜åº¦åŒ…å«äº†æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦(è‹¥å­˜åœ¨)ã€‚å¯è¡¨ç¤ºä¸ºæµè§ˆå™¨å½“å‰é«˜åº¦å»é™¤æµè§ˆå™¨è¾¹æ¡†ã€å·¥å…·æ¡åçš„é«˜åº¦ã€‚ window.innerWidth ï¼šæµè§ˆå™¨å†…é¡µé¢å¯ç”¨å®½åº¦ï¼›æ­¤å®½åº¦åŒ…å«äº†å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦(è‹¥å­˜åœ¨)ã€‚å¯è¡¨ç¤ºä¸ºæµè§ˆå™¨å½“å‰å®½åº¦å»é™¤æµè§ˆå™¨è¾¹æ¡†åçš„å®½åº¦ã€‚ å·¥å…·æ é«˜/å®½åº¦ ï¼šåŒ…å«äº†åœ°å€æ ã€ä¹¦ç­¾æ ã€æµè§ˆå™¨è¾¹æ¡†ç­‰èŒƒå›´ã€‚å¦‚ï¼šé«˜åº¦ï¼Œå¯é€šè¿‡æµè§ˆå™¨é«˜åº¦ - é¡µé¢å¯ç”¨é«˜åº¦å¾—å‡ºï¼Œå³ï¼šwindow.outerHeight - window.innerHeightã€‚ å››ã€é¡µé¢ä¿¡æ¯ body.offsetHeight ï¼šbodyæ€»é«˜åº¦ã€‚ body.offsetWidth ï¼šbodyæ€»å®½åº¦ã€‚ body.clientHeight ï¼šbodyå±•ç¤ºçš„é«˜åº¦ï¼›è¡¨ç¤ºbodyåœ¨æµè§ˆå™¨å†…æ˜¾ç¤ºçš„åŒºåŸŸé«˜åº¦ã€‚ body.clientWidth ï¼šbodyå±•ç¤ºçš„å®½åº¦ï¼›è¡¨ç¤ºbodyåœ¨æµè§ˆå™¨å†…æ˜¾ç¤ºçš„åŒºåŸŸå®½åº¦ã€‚ æ»šåŠ¨æ¡é«˜åº¦/å®½åº¦ ï¼šå¦‚é«˜åº¦ï¼Œå¯é€šè¿‡æµè§ˆå™¨å†…é¡µé¢å¯ç”¨é«˜åº¦ - bodyå±•ç¤ºé«˜åº¦å¾—å‡ºï¼Œå³window.innerHeight - body.clientHeightã€‚","categories":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/categories/%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"}]},{"title":"ç†è§£SQL","slug":"ç†è§£SQL","date":"2019-08-03T16:00:00.000Z","updated":"2020-09-16T09:07:07.000Z","comments":true,"path":"2019/08/04/ç†è§£SQL/","link":"","permalink":"http://mariogogogo.github.io/2019/08/04/%E7%90%86%E8%A7%A3SQL/","excerpt":"å¦‚ä½•é«˜æ•ˆçš„å­˜å‚¨å’Œä½¿ç”¨è¿™äº›æ•°æ®ï¼Œè®©é¡µé¢å¯ä»¥çœ‹èµ·æ¥ä¸å¡","text":"å¦‚ä½•é«˜æ•ˆçš„å­˜å‚¨å’Œä½¿ç”¨è¿™äº›æ•°æ®ï¼Œè®©é¡µé¢å¯ä»¥çœ‹èµ·æ¥ä¸å¡ cookieä¸localStorage cookie localStorage é™åˆ¶4k é™åˆ¶æœ€å¤§5M â€” â€” æµè§ˆå™¨ å­˜æ”¾åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ å­—ç¬¦ä¸²æ–¹å¼å­˜å– webSQLä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Ÿç”±ä¸€å¼ å¼ äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“ ä»€ä¹ˆæ˜¯SQLå‘¢ï¼Ÿä¸€ç§æ“ä½œå…³ç³»å‹çš„DBè¯­è¨€ï¼Œæ”¯æŒåˆ›å»ºè¡¨ï¼Œæ’å…¥è¡¨ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æœ‰ï¼šMySQL,SQLite,SQLSever,Oracle åˆ›å»ºä¸€ä¸ªDB123456var db = window.openDatabase( &quot;order_test&quot;, &lt;----æ•°æ®åº“åç§° &quot;1.0&quot;, &lt;----ç‰ˆæœ¬ &quot;order map data&quot;,&lt;----æè¿° &quot;2*1024*1024&quot; &lt;----å¯ç”¨ç©ºé—´) è¿”å›ä¸€ä¸ªdbå¯¹è±¡ åˆ›å»ºè¡¨1create table if not exists order_data(order_id primary key,format_city,lat,lng,price,create_time) æ’å…¥æ•°æ®1insert into order_data values($&#123;order.orderId&#125;,&#x27;$&#123;order.format_city&#125;&#x27;,$&#123;order.lat&#125;,$&#123;order.lng&#125; ...); ä¸»é”®å”¯ä¸€çº¦æŸä¸€èˆ¬æˆ‘ä»¬è®¤ä¸ºä¸»é”®æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œmyslqå¯ä»¥æŒ‡å®šæŸä¸ªæ•´æ•°å­—æ®µä¸ºauto_increment;è€ŒwebSQLä¸èƒ½æŒ‡å®šï¼Œéœ€è¦åˆ›å»ºæŒ‡å®šå½“å‰å­—æ®µä¸ºinteger1create table student(id integer primary key,age,score) SelectæŸ¥è¯¢1select format_city as city,count(order_id) as &#x27;count&#x27;,sum(price) as amount from order_data by format_city order by date æˆ‘ä»¬ä¹Ÿå¯ä»¥æŸ¥è¯¢æŸä¸ªorderæ˜¯å¦å­˜åœ¨ï¼Œåˆ¤æ–­æ»¡è¶³åŠ¨æ€æ›´æ–°çš„éœ€æ±‚ 1select order_id from order_data where order_id = $&#123;order.orderId&#125; å»ºç«‹ç´¢å¼•ä¸ºä»€ä¹ˆè¦åˆ›å»ºç´¢å¼•ï¼Ÿä¸ºäº†æé«˜æœç´¢æ•ˆç‡ï¼Œå¦‚æœæ²¡æœ‰å»ºç«‹ç´¢å¼•æŸ¥è¯¢æŸä¸ªå­—æ®µæ˜¯å¦ç­‰äºæŸä¸ªå€¼çš„æ•°æ®éœ€è¦éå†æ‰€æœ‰çš„æ•°æ®ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦O(N),ä½†æ˜¯å¦‚æœå»ºç«‹ç´¢å¼•ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…å®ƒçš„å˜ç§ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦å˜O(logN),Mysqlä½¿ç”¨çš„B+æ ‘ï¼Œå¦å¤–å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å“ˆå¸Œå˜æ•°å­—ï¼Œå­—ç¬¦ä¸²æ‰€ä»¥è¦æ¯”æ•°å­—ä½æ•ˆå¾ˆå¤š å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹1.æ”¯æŒå¤æ‚çš„æŸ¥è¯¢ï¼Œå¯ä»¥è”è¡¨æŸ¥è¯¢ï¼Œè¡¨è¾¾å¼æŸ¥è¯¢ï¼ŒåµŒè¡¨æŸ¥è¯¢ ç¼ºç‚¹1.ä¸æ–¹ä¾¿æ¨ªå‘æ‰©å±•ï¼Œç»™æ•°æ®åº“æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¦‚æœæ•°æ®åº“è¾¾åˆ°äº¿çº§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œå¤æ‚æ€§å°±å¾ˆå·®äº†2.æµ·é‡æ•°æ®SQLè”è¡¨æŸ¥è¯¢ï¼Œæ€§èƒ½ä¼šéå¸¸å·®3.ä¸ºäº†ä¿æŒäº‹åŠ¡çš„ä¸€è‡´ç‰¹æ€§ï¼Œéš¾ä»¥åº”å¯¹é«˜å¹¶å‘ éå…³ç³»å‹æ•°æ®åº“ä¹Ÿå«NoSQLæ•°æ®åº“ç‰¹ç‚¹ï¼š å­˜å‚¨æ¯”è¾ƒçµæ´»ï¼ŒæŸ¥æ‰¾æ²¡æœ‰åƒå…³ç³»å‹æ•°æ®åº“é‚£ä¹ˆå¥½ç”¨ï¼Œé€‚ç”¨äºæ•°æ®é‡å¾ˆå¤§ï¼Œåªéœ€è¦å•è¡¨keyæŸ¥è¯¢ï¼Œä¸€è‡´æ€§ä¸å¾ˆé«˜çš„åœºæ™¯ IndexedDBä¸ºä»€ä¹ˆè¦å«IndexedDBæˆ–è€…ç´¢å¼•æ•°æ®åº“å‘¢ï¼Ÿå› ä¸ºå®ƒä¸»é¡µé€šè¿‡åˆ›å»ºç´¢å¼•æƒŠå–œæŸ¥è¯¢ IndexedDBå¯ä»¥æ”¯æŒæ’å…¥JSONæ ¼å¼çš„ä¸ä¸€æ ·çš„æ•°æ® éå…³ç³»å‹æ•°æ®åº“çš„æ¨ªå‘æ‰©å±•å› ä¸ºå¯ä»¥æ¯ä¸ªæ•°æ®çš„ç±»å‹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ·»åŠ å­—æ®µçš„é—®é¢˜ï¼Œè€Œç›¸åŒçš„ç±»å‹å¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œæé«˜æœç´¢æ•ˆç‡ï¼›ä½†æ˜¯ä¹Ÿåˆå°é—®é¢˜ï¼ŒNoSqlåšä¸äº†å¤æ‚æŸ¥è¯¢ï¼Œå¦‚æœè¦æ¯”å¦‚æŒ‰ç…§city/æ—¥æœŸå½’ç±»ï¼Œé‚£ä¹ˆéœ€è¦å¼€ä¸€ä¸ªæ¸¸æ ‡å¾ªç¯å¤„ç†ã€‚æ—¶é—´å’Œæ€§èƒ½å¼€é”€å¾ˆå¤§ï¼› å…¼å®¹æ€§ æ•°æ®åº“ä¸Promiseæˆ‘ä»¬éƒ½çŸ¥é“æ•°æ®åº“æ˜¯å¼‚æ­¥æ“ä½œï¼›å¦‚æœæˆ‘ä»¬å…ˆå‘ä¸€ä¸ªè¯·æ±‚è·å–æ•°æ®ï¼Œç„¶åæ’å…¥æ•°æ®ï¼Œé‡å¤Næ¬¡åï¼Œå†æŸ¥è¯¢æ•°æ®ã€‚å¦‚ä½•ä¿è¯æ¯æ¬¡éƒ½æˆåŠŸå†™å…¥æ•°æ®åº“å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Promiseæ¥è§£å†³ 123456789101112131415161718192021var promises = []for(let i=0 ; i&lt;orders.length;i++)&#123; var order = orders[i] var promise = new Promise((resolve,reject)=&gt;&#123; dataProcess.executeSql(&#x27;æ’å…¥sqlè¯­å¥&#x27;,(tx,results)=&gt;&#123; //æ•°æ®åº“è¿”å› if(results.rows.lengthï¼‰&#123; resolve() return &#125; //å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘æœåŠ¡å™¨ç»§ç»­è¯·æ±‚æŸ¥è¯¢ var order = orders[i] dataProcess.queryAdderss(order) &#125;ï¼‰ &#125;) //æ·»åŠ è¿›æ•°ç»„ promise.push(promise)&#125;//æ‰€æœ‰çš„Prmiseéƒ½è¿”å›äº†åˆ™è°ƒç”¨finishedå‡½æ•°Prmise.all(promises).then(dataPromcess.finished) SQLæ³¨å…¥æ”»å‡»æ¯”å¦‚ç½‘é¡µé“¾æ¥å­˜åœ¨å‚æ•°ä¼ é€’ï¼Œåå°å¹¶æ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´ç”¨æˆ·çš„è¾“å…¥ç›´æ¥è¢«SQLè§£é‡Šå™¨æ‰§è¡Œã€‚SQLæ³¨å…¥çš„äº§ç”Ÿæ¡ä»¶ï¼šè¾“å…¥ä¸€æ®µsqlç‰‡æ®µ æœ€ç»ˆæ‹¼æ¥æˆä¸€æ®µæ”»å‡»ä»£ç  é˜²å¾¡SQLæ³¨å…¥å½’æ ¹åˆ°åº•ï¼Œéœ€è¦å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå› ä¸ºåœ¨Webæ”»é˜²ä¸­ï¼Œæˆ‘ä»¬æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ 1ã€‚1.ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼Œç»‘å®šå˜é‡ã€‚2.ä½¿ç”¨å®‰å…¨çš„å­˜å‚¨è¿‡ç¨‹å¯¹æŠ—SQLæ³¨å…¥ã€‚3.æ£€æŸ¥æ•°æ®ç±»å‹ã€‚4.ä½¿ç”¨å®‰å…¨å‡½æ•°ã€‚ åˆ†å¸ƒå¼æ•°æ®åº“ç®€å•ä»‹ç»ä¸‹ï¼šå¦‚æœä¸€ä¸ªç½‘ç«™è¶Šæ¥è¶Šç«ğŸ”¥ï¼Œä¸€ä¸ªæ•°æ®åº“æœåŠ¡å¾ˆå¯èƒ½ä¼šæ‰›ä¸ä½ï¼Œéœ€è¦å¤šæå‡ å°æœåŠ¡å™¨ç¼“è§£å‹åŠ›ï¼Œè¿™æ—¶å€™éœ€è¦å‡ ä¸ªæ•°æ®åº“ä¸€è‡´æ€§ï¼Œè§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œæœ€ç®€å•çš„æ˜¯Mysqlçš„replicationï¼› ä¸»è¦å·¥ä½œåŸç†å‡å¦‚æœ‰ä¸‰å°æœåŠ¡å™¨ï¼Œä¸‰ä¸ªæ•°æ®åº“ï¼Œç”¨æˆ·ä¸€ä¸ªæ“ä½œå†™åˆ°äº†å…¶ä¸­ä¸€ä¸ªä¸»æœåŠ¡å™¨ï¼Œè¿™ä¸ªåº“å«masterï¼Œå…¶ä»–äºŒä¸ªåº“å«slaveï¼Œä¸»åº“ä¼šæŠŠæ•°æ®åº“è¿œç¨‹å¤åˆ¶åˆ°å¦å¤–äºŒä¸ªåº“ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"}]},{"title":"ç†è§£HTTPSè¿æ¥å‰å‡ æ¯«ç±³å‘ç”Ÿäº†ä»€ä¹ˆ","slug":"ç†è§£HTTPSè¿æ¥å‰å‡ æ¯«ç§’å‘ç”Ÿäº†ä»€ä¹ˆ","date":"2019-07-31T16:00:00.000Z","updated":"2020-09-16T09:07:07.000Z","comments":true,"path":"2019/08/01/ç†è§£HTTPSè¿æ¥å‰å‡ æ¯«ç§’å‘ç”Ÿäº†ä»€ä¹ˆ/","link":"","permalink":"http://mariogogogo.github.io/2019/08/01/%E7%90%86%E8%A7%A3HTTPS%E8%BF%9E%E6%8E%A5%E5%89%8D%E5%87%A0%E6%AF%AB%E7%A7%92%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/","excerpt":"1.ä¸ºä»€ä¹ˆè¯´HTTPSå®‰å…¨ï¼Œå®‰å…¨åœ¨å“ªé‡Œï¼Ÿ 2.HTTPSä½¿ç”¨è¯ä¹¦ä¿è¯å®ƒçš„å®‰å…¨å—ï¼Ÿ 3.ä¸ºä»€ä¹ˆè¯ä¹¦éœ€è¦è´­ä¹°ï¼Ÿ","text":"1.ä¸ºä»€ä¹ˆè¯´HTTPSå®‰å…¨ï¼Œå®‰å…¨åœ¨å“ªé‡Œï¼Ÿ 2.HTTPSä½¿ç”¨è¯ä¹¦ä¿è¯å®ƒçš„å®‰å…¨å—ï¼Ÿ 3.ä¸ºä»€ä¹ˆè¯ä¹¦éœ€è¦è´­ä¹°ï¼Ÿ HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸHTTPSè§£å†³äº†ä¸­é—´äººæ”»å‡» ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ä½ å’ŒæœåŠ¡å™¨ä¼ è¾“æ•°æ®ä¹‹é—´ç»è¿‡äº†ä¸€ä¸ªä¸­é—´äººï¼Œæ•°æ®éƒ½è¢«ä¸­é—´äººæ‹¦æˆªæˆ–è€…çº‚æ”¹ä½ æ ¹æœ¬ä¸çŸ¥é“ï¼Œä¸­é—´äººå¯¹ä½ æ¥è¯´æ˜¯é€æ˜çš„ ä¸­é—´äººæ”»å‡»æ–¹æ³•1.åŸŸåæ±¡æŸ“2.ARPæ¬ºéª— HTTPSæ˜¯åº”å¯¹ä¸­é—´äººæ”»å‡»çš„å”¯ä¸€æ–¹æ³•HTTPSè¿æ¥è¿‡ç¨‹ç®€å•æè¿°ï¼šHTTPSé“¾æ¥ï¼ŒæœåŠ¡å™¨å‘é€å®ƒçš„è¯ä¹¦ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç¡®è®¤è¯ä¹¦æ­£ç¡®ï¼Œå¹¶æ£€æŸ¥è¯ä¹¦ä¸­å¯¹åº”çš„ä¸»æœºåæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®åˆ™åŒæ–¹åŠ å¯†æ•°æ®åå‘é€ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹å†è¿›è¡Œè§£å¯†ï¼Œä¿è¯æ•°æ®æ˜¯ä¸é€æ˜çš„ã€‚ å®Œæ•´è¿æ¥å»ºç«‹è¿‡ç¨‹å®¢æˆ·ç«¯1.å»ºç«‹TCPè¿æ¥2.æ‰‹æœºç«¯å‘é€ä¸€ä¸ªhello ç»™æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬å†æŠ“åŒ…ä¸­è§‚å¯Ÿï¼Œå°†helloé‡Œé¢æ‰‹æœºç«¯å‘ç»™æœåŠ¡ç«¯çš„ä¿¡æ¯ç½—åˆ—å‡ºæ¥ï¼šA.ä½¿ç”¨äº†TLSç‰ˆæœ¬ä¸º1.2 å…¶ä»–ç‰ˆæœ¬æœ‰1.0 1.1 1.2ï¼ŒHTTPSåŠ å¯†é TLSå®‰å…¨ä¼ è¾“å±‚åè®®B.æ‰‹æœºç«¯å½“å‰çš„æ—¶é—´å’Œä¸€ä¸ªéšæœºå¯†ç ä¸²ï¼ŒC.SessionID ç¬¬ä¸€æ¬¡è¿æ¥ä¸º0ï¼Œå¦‚æœæœ‰SessionIDåˆ™å¯ä»¥æ¢å¤ä¼šè¯ï¼Œè€Œä¸ç”¨é‡å¤æ¡æ‰‹è¿‡ç¨‹ã€‚æœåŠ¡ç«¯ä¼šå‘ŠçŸ¥SessionIDï¼Œå†åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å°±ä¼šæŠŠè¿™ä¸ªSessionIDå¸¦ä¸ŠD.æµè§ˆå™¨æ”¯æŒåŠ å¯†ç»„åˆæ–¹å¼ã€‚æµè§ˆå™¨ä¸€å…±æ”¯æŒ22ç§åŠ å¯†ç»„åˆæ–¹å¼ï¼Œå‘é€ç»™æœåŠ¡å™¨è®©æœåŠ¡å™¨é€‰ä¸€ä¸ªE.æœåŠ¡å™¨æ ¹æ®åŸŸåå‘é€ç›¸åº”çš„è¯ä¹¦ã€‚HTTPS= HTTP + TLS TLSä¸SSLä»€ä¹ˆå…³ç³»ï¼Ÿ SSLæ˜¯TLSçš„å‰èº« æœåŠ¡ç«¯1.æ—¶é—´ éšæœºæ•°ç­‰ï¼Œæ³¨æ„æœåŠ¡å™¨è¿˜å‘é€ä¸€ä¸ªSessionIDç»™æµè§ˆå™¨2.æœåŠ¡å™¨åŠ å¯†æ–¹å¼ï¼ŒæœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯æä¾›çš„æ–¹å¼é‡Œé¢é€‰æ‹©äº†æŸç§æ–¹å¼ï¼Œ è¯ä¹¦æ¥ç€æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯ä¹¦çš„åŒ…è¿‡å»ç»™æ‰‹æœºç«¯ï¼ŒæœåŠ¡å™¨å¯èƒ½å‘ä¸‰ä¸ªåŒ…ï¼Œä¸‰ä¸ªè¯ä¹¦æ˜¯ç›¸äº’ä¾èµ–è¯ä¹¦é‡Œé¢æœ‰ä»€ä¹ˆå†…å®¹ï¼š1.ç­¾å2.æ¯ä¸ªè¯ä¹¦åŒ…å«ç­¾åçš„ç®—æ³•3.è¢«ç­¾åçš„è¯ä¹¦ è¯ä¹¦åŒ…æ‹¬ç”³è¯·è¯ä¹¦çš„å›½å®¶çœä»½åŸå¸‚ç»„ç»‡åç§°ï¼Œè¿˜æœ‰æœ‰æ•ˆæœŸï¼Œè¯ä¹¦çš„å…¬é’¥ è¯ä¹¦çš„å…¬é’¥æ˜¯ä¸€ä¸ª16è¿›åˆ¶çš„ä»£ç ï¼›å…¬é’¥ç”±N å’Œ eç»„æˆ ===&gt; publicKey = (N,e)ï¼›å…¶ä¸­Næ˜¯ä¸€ä¸ªå¤§æ•´æ•°ï¼Œç”±2ä¸ªè´¨æ•°ç›¸ä¹˜å¾—åˆ°ï¼š N = p * q ä½¿ç”¨çš„æŠ€æœ¯æ˜¯RSAåˆå¯ä»¥å«åšéå¯¹ç§°åŠ å¯†ç®—æ³• å½“æˆ‘è®¿é—®HTTPçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è·³è½¬åˆ°HTTPSï¼Ÿ è¿™æ˜¯å› ä¸ºåç«¯åšçš„é‡å®šå‘ï¼Œé€šè¿‡Nginxçš„rewriteæˆ–è€…returnè§„åˆ™åšçš„é‡å®šå‘ï¼Œè¿”å›3å¼€å¤´çš„çŠ¶æ€ç è®©æµè§ˆå™¨é‡å®šå‘ RSAä¸å¯†é’¥äº¤æ¢æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ RSAæ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œè€Œå¯†é’¥äº¤æ¢ç”¨çš„æ˜¯å¯¹ç§°åŠ å¯†ï¼Œåœ¨æŠ“åŒ…ä¸­æˆ‘ä»¬çœ‹åˆ°å®ƒä»¬ç”¨çš„æ˜¯è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼Œä¸ºäº†è®©äº¤æ¢ä¸å—ä¸­é—´äººæ”»å‡»ï¼ŒåŒæ–¹éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å³RSAå¯¹å¯†é’¥åŠ å¯†ã€‚åªæœ‰æ‹¥æœ‰æ­£ç¡®RSAå¯†é’¥çš„ä¸€æ–¹ï¼Œæ‰èƒ½çŸ¥é“äº¤äº’çš„å¯†é’¥æ˜¯ä»€ä¹ˆï¼Ÿ TLSæ˜¯ä¼ è¾“å±‚åè®®å—ï¼Ÿä¸€èˆ¬æŠŠTLSå½’ä¸ºå®‰å…¨ä¼ è¾“å±‚åè®® ä½¿ç”¨HTTPSçš„ä»£ä»·ä»æœ€å¼€å§‹çš„æ‰‹æœºç«¯hello ï¼Œ åˆ°æœ€åçš„åŒ…ï¼Œæ€»è€—æ—¶ä»4.99såˆ°5.299sï¼›è¿™ä¸ªå»ºç«‹HTPPSçš„è¿æ¥è¿‡ç¨‹ä¸º0.3sï¼›æ‰€ä»¥ä½¿ç”¨HTPPSçš„ä»£ä»·ï¼š1.å»ºç«‹HTTPSçš„èŠ±è´¹æ—¶é—´2.æ•°æ®éœ€è¦åŠ å¯†å’Œè§£å¯†ï¼Œå æ›´å¤šçš„CPU3.æ•°æ®åŠ å¯†åæ¯”åŸä¿¡æ¯æ›´å¤§ï¼Œå ç”¨æ›´å¤šçš„å¸¦å®½ æ€ä¹ˆç»•è¿‡HTTPSä½¿ç”¨ssltripï¼Œè¿™ä¸ªå·¥å…·çš„å®ç°åŸç†æ˜¯ä½¿ç”¨ARPæ¬ºéª—ä¸ç”¨æˆ·å»ºç«‹é“¾æ¥ï¼Œç„¶åå¼ºåˆ¶å°†ç”¨æˆ·è®¿é—®çš„HTTPSæ›¿æ¢æˆHTTPï¼Œè¿™æ ·ä¸­é—´äººå’Œç”¨æˆ·ä¹‹é—´ä½¿ç”¨HTTPï¼Œè€Œå’ŒæœåŠ¡ç«¯è¿˜æ˜¯ç”¨HTTPS","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"}]},{"title":"NodeJSä¸­é—´ä»¶åŸç†","slug":"Nodejsä¸­é—´ä»¶åŸç†","date":"2019-07-30T16:00:00.000Z","updated":"2020-09-16T09:07:43.000Z","comments":true,"path":"2019/07/31/Nodejsä¸­é—´ä»¶åŸç†/","link":"","permalink":"http://mariogogogo.github.io/2019/07/31/Nodejs%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8E%9F%E7%90%86/","excerpt":"åœ¨NodeJSä¸­ï¼Œä¸­é—´ä»¶ä¸»è¦æ˜¯æŒ‡å°è£…æ‰€æœ‰Httpè¯·æ±‚ç»†èŠ‚å¤„ç†çš„æ–¹æ³•ã€‚ä¸€æ¬¡Httpè¯·æ±‚é€šå¸¸åŒ…å«å¾ˆå¤šå·¥ä½œï¼Œå¦‚è®°å½•æ—¥å¿—ã€ipè¿‡æ»¤ã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€è¯·æ±‚ä½“è§£æã€Cookieå¤„ç†ã€æƒé™éªŒè¯ã€å‚æ•°éªŒè¯ã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œä½†å¯¹äºWebåº”ç”¨è€Œè¨€ï¼Œå¹¶ä¸å¸Œæœ›æ¥è§¦åˆ°è¿™ä¹ˆå¤šç»†èŠ‚æ€§çš„å¤„ç†ï¼Œå› æ­¤å¼•å…¥ä¸­é—´ä»¶æ¥ç®€åŒ–å’Œéš”ç¦»è¿™äº›åŸºç¡€è®¾æ–½ä¸ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ç»†èŠ‚ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå…³æ³¨åœ¨ä¸šåŠ¡çš„å¼€å‘ä¸Šï¼Œä»¥è¾¾åˆ°æå‡å¼€å‘æ•ˆç‡çš„ç›®çš„ã€‚","text":"åœ¨NodeJSä¸­ï¼Œä¸­é—´ä»¶ä¸»è¦æ˜¯æŒ‡å°è£…æ‰€æœ‰Httpè¯·æ±‚ç»†èŠ‚å¤„ç†çš„æ–¹æ³•ã€‚ä¸€æ¬¡Httpè¯·æ±‚é€šå¸¸åŒ…å«å¾ˆå¤šå·¥ä½œï¼Œå¦‚è®°å½•æ—¥å¿—ã€ipè¿‡æ»¤ã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€è¯·æ±‚ä½“è§£æã€Cookieå¤„ç†ã€æƒé™éªŒè¯ã€å‚æ•°éªŒè¯ã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œä½†å¯¹äºWebåº”ç”¨è€Œè¨€ï¼Œå¹¶ä¸å¸Œæœ›æ¥è§¦åˆ°è¿™ä¹ˆå¤šç»†èŠ‚æ€§çš„å¤„ç†ï¼Œå› æ­¤å¼•å…¥ä¸­é—´ä»¶æ¥ç®€åŒ–å’Œéš”ç¦»è¿™äº›åŸºç¡€è®¾æ–½ä¸ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ç»†èŠ‚ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå…³æ³¨åœ¨ä¸šåŠ¡çš„å¼€å‘ä¸Šï¼Œä»¥è¾¾åˆ°æå‡å¼€å‘æ•ˆç‡çš„ç›®çš„ã€‚ ä¸­é—´ä»¶çš„è¡Œä¸ºæ¯”è¾ƒç±»ä¼¼Javaä¸­è¿‡æ»¤å™¨çš„å·¥ä½œåŸç†ï¼Œå°±æ˜¯åœ¨è¿›å…¥å…·ä½“çš„ä¸šåŠ¡å¤„ç†ä¹‹å‰ï¼Œå…ˆè®©è¿‡æ»¤å™¨å¤„ç†ã€‚å®ƒçš„å·¥ä½œæ¨¡å‹ä¸‹å›¾æ‰€ç¤ºã€‚ åˆ†æ å®ç°åŸç†é¦–é¡µè®¾è®¡ä¸€ä¸ªç±»12345678910111213141516171819202122232425262728const http = require(&quot;http&quot;);const slice = Array.prototype.slice;class LikeExpress &#123; constructor() &#123; this.routes = &#123; all: [], get: [], post: [] &#125;; &#125; register(path) &#123; &#125; use() &#123; &#125; get() &#123; &#125; post() &#123; &#125; //ç›‘å¬ listen(...args) &#123; &#125;&#125;module.exports = () =&gt; &#123; return new LikeExpress();&#125;; å¡«å……registeræ–¹æ³•1234567891011121314151617181920/*path è·¯å¾„*/register(path) &#123; let info = &#123;&#125;; if (typeof path === &quot;string&quot;) &#123; info.path = path; info.stack = slice(argument, 1); //æ•°ç»„ &#125; else &#123; info.path = &quot;/&quot;; info.stack = slice(argument, 0); //æ•°ç»„ &#125; return info;&#125;//useæ–¹æ³•ä¸­è°ƒç”¨å°è£…å¥½çš„registeruse() &#123; const info = this.register.apply(this, arguments); //å­˜å…¥allæ•°ç»„ this.routes.all.push(info);&#125; æ·»åŠ listen123456//ç›‘å¬ listen(...args) &#123; //æ·»åŠ ä¸ªå›è°ƒå‡½æ•° const server = http.createServer(this.callback()); server.listen(...args); &#125; æ·»åŠ callback123456789101112131415callback() &#123; return (req, res) =&gt; &#123; res.json = data =&gt; &#123; res.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;); res.end(JSON.stringify(data)); &#125;; const url = req.url; const method = req.method.toLowerCase(); //åŒºåˆ†åŒ¹é…çš„è·¯å¾„ const resultList = this.match(method, url); //æ ¸å¿ƒ this.handle(req, res, resultList); &#125;;&#125; matchåŒ¹é…ä¸€ä¸ªä¸­é—´ä»¶åˆ—è¡¨ç¬¦åˆå“ªäº›è¯·æ±‚æ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œ1234567891011121314151617181920212223match(method, url) &#123; let stack = []; if (url === &quot;/favicon.ico&quot;) &#123; return stack; &#125; // è·å–routes let curRouters = []; curRouters = curRouters.concat(this.routes.all); curRouters = curRouters.concat(this.routes[method]); curRouters.forEach(item =&gt; &#123; if (url.indexOf(item.path) === 0) &#123; // url === &quot;/api/user&quot; &amp;&amp; item.path === &quot;/&quot; stack = stack.concat(item.stack); &#125; &#125;); return stack; &#125; æ ¸å¿ƒæ–¹æ³•å†™nextæ–¹æ³•1234567891011121314//æ ¸å¿ƒ handle(req, res, resultList) &#123; const next = () =&gt; &#123; //æ¯æ¬¡æ‰§è¡Œè·å–ç¬¬ä¸€ä¸ªä¸­é—´ä»¶ const middleware = resultList.shift(); if (middleware) &#123; //æ‰§è¡Œä¸­é—´ä»¶ middleware(req, res, next); &#125; &#125;; //ç«‹å³æ‰§è¡Œ next(); &#125; è§£æå›¾","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"ç†è§£WebSocketä¸TCP/IPğŸ”¥","slug":"ç†è§£WebSocketä¸TCP-IP","date":"2019-07-29T16:00:00.000Z","updated":"2020-09-16T09:07:07.000Z","comments":true,"path":"2019/07/30/ç†è§£WebSocketä¸TCP-IP/","link":"","permalink":"http://mariogogogo.github.io/2019/07/30/%E7%90%86%E8%A7%A3WebSocket%E4%B8%8ETCP-IP/","excerpt":"TCP/IPé¦–å…ˆä»‹ç»ä¸‹Macä¸‹æŠ“å–ç«¯å£åŒ…çš„å·¥å…·è§’tcpdumpå‘½ä»¤ï¼š1sudo tcpdump port 8080 -n","text":"TCP/IPé¦–å…ˆä»‹ç»ä¸‹Macä¸‹æŠ“å–ç«¯å£åŒ…çš„å·¥å…·è§’tcpdumpå‘½ä»¤ï¼š1sudo tcpdump port 8080 -n ä¸€ä¸ªå®Œæ•´çš„httpé“¾æ¥æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æŠ“åˆ°åŒ…çš„æ•°æ®åˆ†æ TCPçš„ä¸‰æ¬¡æ¡æ‰‹ æ‰‹æœºç«¯â€“&gt;æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªtcpåŒ…ï¼Œå¸¦ä¸Šäº†SYNæ ‡å¿—ä½ï¼Œè¡¨ç¤ºå»ºç«‹è¿æ¥ï¼Œå¹¶æŒ‡ååŒ…å¼€å§‹åºåˆ—å·seqï¼ˆå•ä½å­—èŠ‚ï¼‰ æœåŠ¡å™¨â€“&gt;æ‰‹æœºç«¯è¿›è¡Œå›å¤ï¼Œå‘é€äº†ä¸€ä¸ªSYN+ACKçš„æŠ¥æ–‡æ®µï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥ æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯å‘é€ä¸€ä¸ªACKï¼ŒåŒæ—¶æ”¹å˜æ¥å—çª—å£å¤§å°ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ TCPçš„ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯äºŒæ¬¡æˆ–è€…å››æ¬¡å‘¢ï¼Ÿ å¦‚æœé‡‡å–ä¸¤æ¬¡æ¡æ‰‹ï¼Œç›¸å½“äºç¬¬äºŒæ¬¡æ¡æ‰‹ç»“æŸä¾¿å»ºç«‹è¿æ¥ï¼Œå¦‚æœå‘é€SYNçš„ä¸€æ–¹ä¸æƒ³è¿æ¥äº†ï¼Œä¹Ÿä¸ä¼šæœ‰åé¦ˆï¼Œå¦ä¸€æ–¹å´ä¸€ç›´åœ¨ç­‰å¾…ï¼Œæµªè´¹äº†æ—¶é—´ã€‚å½“ç„¶å¯ä»¥é‡‡å–4æ¬¡ç”šè‡³Næ¬¡æ¡æ‰‹ï¼Œä½†æ˜¯æœ‰å¿…è¦å—ï¼Ÿå»ºç«‹è¿æ¥çš„æ—¶é—´å¤ªé•¿ï¼Œæ•ˆæœä¹Ÿä¼šå¤§æ‰“æŠ˜æ‰£ã€‚æ‰€ä»¥3æ¬¡åªæ˜¯æŠ˜ä¸­æ–¹æ¡ˆï¼Œä¿è¯äº†å¯é æ€§ï¼ŒåˆèŠ‚ä¿­äº†å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚ ä»€ä¹ˆæ˜¯æ¥æ”¶çª—å£å‘¢ï¼ŸtcpæŠ¥æ–‡å¤´ï¼Œçª—å£å¤§å°åªæœ‰2ä¸ªå­—èŠ‚16ä½ï¼Œæœ€å¤§åªèƒ½2^16-1 = 64kbå¤§å°ï¼Œå½“åˆè®¾è®¡tcpçš„äººæ²¡æœ‰æƒ³åˆ°ç°ä»£ç½‘é€Ÿé‚£ä¹ˆå¿«ï¼Œæ‰€ä»¥å¯é€‰é¡¹åŠ äº†ä¸€ä¸ªwscaleæŒ‡æ•°å­—æ®µï¼Œæœ€å¤§ä¸º14ï¼Œæœ€å¤§çª—å£å¤§å°ä¸º1G æ¥å—çª—å£ç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿå®ƒæ ¹æ®è‡ªèº«ç½‘ç»œæƒ…å†µè®¾ç½®ä¸åŒå¤§å°çš„å€¼ç”¨æ¥æ§åˆ¶å¯¹æ–¹å‘é€é€Ÿåº¦ï¼Œé¿å…å¯¹æ–¹å‘é€å¤ªå¿«ï¼Œå¯¼è‡´ç½‘ç»œæ‹¥å¡ å‘é€æ•°æ®å»ºç«‹å¥½tcpä¹‹å æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œå¸¦ä¸ŠPUSHæ ‡å¿—ä½ï¼šè¡¨ç¤ºä¸€ä¸ªæ¯”è¾ƒç´§æ€¥çš„æŠ¥æ–‡ï¼Œå‘Šè¯‰æœåŠ¡å™¨ç«‹å³æŠŠæ•°æ®ä»ç¼“å­˜é‡Œå‘é€ç»™ç¨‹åºï¼Œä¸èƒ½å†ç»§ç»­ç¼“å­˜äº† TCPçš„å››æ¬¡æŒ¥æ‰‹ä¸ºä»€ä¹ˆè¦æŒ¥æ‰‹å››æ¬¡ï¼Ÿå‰äºŒæ¬¡æŒ¥æ‰‹è®©è¿æ¥å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œæ­¤æ—¶æ‰‹æœºç«¯ä¸å¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œè€ŒæœåŠ¡å™¨å¯ä»¥ç»§ç»­å‘æ‰‹æœºç«¯å‘é€æ•°æ®ï¼Œæ‰€ä»¥å››æ¬¡çš„åŸå› æ˜¯å¯ä»¥æœ‰ä¸€ä¸ªå¤„äºåŠå…³é—­çš„çŠ¶æ€ æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯ å‘é€ä¸€ä¸ªFINï¼Œè¦ç­‰30sæ‰èƒ½å…³é—­ï¼Œä¸ºä»€ä¹ˆè¦ç­‰30ç§’?å› ä¸ºè¿™ä¸ªæ˜¯ç”±keep-aliveå­—æ®µå½±å“ï¼ŒåŒä¸€ä¸ªåŸŸå¯èƒ½è¦è¯·æ±‚å¤šä¸ªèµ„æºï¼Œä¸èƒ½ä¸€ä¸ªè¯·æ±‚å®Œäº†å°±é©¬ä¸Šå…³é—­ æœåŠ¡ç«¯â€“&gt;æ‰‹æœºç«¯ å‘é€ACK è¿™ä¸ªæ—¶å€™è¿æ¥å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œæ‰‹æœºç«¯ä¸èƒ½å†å‘é€æ•°æ®ç»™æœåŠ¡ç«¯ï¼Œä½†æœåŠ¡ç«¯å¯ä»¥å‘æ‰‹æœºç«¯å‘é€ æœåŠ¡ç«¯â€“&gt;æ‰‹æœºç«¯ æŠŠè¿æ¥å…³é—­äº† äºæ˜¯å‘æ‰‹æœºç«¯å‘é€FIN æ‰‹æœºç«¯â€“&gt;æœåŠ¡ç«¯ å‘é€äº†ä¸€ä¸ªACKï¼Œæ­¤æ—¶é“¾æ¥å®Œå…¨å…³é—­ï¼Œæ‰‹æœºç«¯å…³é—­äº†è¿›å…¥TIME_WAITçŠ¶æ€ ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸ç”¨è¿›å…¥TIME_WAITçŠ¶æ€? å› ä¸ºä¸€ä¸ªå®Œæ•´çš„å¥—æ¥å­—åŒ…æ‹¬å››ä¸ªå…ƒç´ ï¼šäº’è”åŒæ–¹çš„IP+ç«¯å£å·ï¼Œåªè¦ä¸€æ–¹è¢«ç ´åäº†å°±ä¸èƒ½æ„æˆç›¸åŒçš„å¥—æ¥å­—ã€‚é™åˆ¶æ‰‹æœºç«¯åº”è¯¥æ¯”è¾ƒåˆç†ï¼Œå› ä¸ºæœåŠ¡ç«¯å¯èƒ½è¿˜è¦ç»§ç»­ç›‘å¬é‚£ä¸ªç«¯å£ å‘é€çª—å£æ˜¯æ€ä¹ˆç®—çš„? wscaleæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æŒ‡æ•°ï¼Œwscale=5 è¡¨ç¤ºå·¦ç§»5ä½ === 2çš„5æ¬¡å¹‚ å››å±‚ç½‘ç»œåè®® å‡å¦‚è¦å‘é€ä¸€ä¸ªhttpæ–‡æœ¬ï¼Œæœ€åä¼šè¢«åŒ…è£…æˆç‰©ç†å¸§å¤´ | IPæŠ¥å¤´æ–‡ | TCPæŠ¥å¤´æ–‡ | HTTPæŠ¥å¤´æ–‡ | æ–‡æœ¬æ•°æ®1.ç‰©ç†åœ°å€æ¯ä¸ªç½‘å¡éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„ç‰©ç†åœ°å€ã€‚è·¯ç”±å™¨å‘å±€åŸŸç½‘æ‰€æœ‰ä¸»æœºå‘é€æ•°æ®ï¼Œç½‘å¡ä¼šæ¯”è¾ƒç‰©ç†åœ°å€æ˜¯å¦ä¸è‡ªå·±åœ°å€ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å°±æ¥å—ï¼Œå¦åˆ™ä¸¢å¼ƒã€‚ 2.ç½‘é™…å±‚ARPARPæ˜¯ä¸€ä¸ªåœ°å€è§£æåè®®ï¼Œå½“æˆ‘è®¿é—®10.2.200.140çš„æ—¶å€™æˆ‘éœ€è¦çŸ¥é“å®ƒçš„ç‰©ç†è·¯å¾„åœ°å€ï¼Œå¦‚æœæ˜¯ä¸ªå±€åŸŸç½‘æˆ‘å°±å±€åŸŸç½‘å¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚ï¼Œç„¶åå°±ä¼šå‘Šè¯‰æˆ‘ï¼Œç‰©ç†åœ°å€ 3.ç½‘é™…å±‚tracerouteå¯ä»¥è¿½è¸ªè·¯ç”±è·¯å¾„ï¼ŒåŸç†æ˜¯å‘ç›®æ ‡ä¸»æœºå‘é€ICMPæŠ¥æ–‡ï¼Œå‘é€ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ—¶ï¼Œè®¾ç½®TTL=0 æŠ¥æ–‡ç”Ÿå­˜æ—¶é—´ä¸º0ï¼Œä¸‹ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡åï¼Œä¸ä¼šç»§ç»­è½¬å‘äº†ï¼Œä¼šç»™åŸä¸»æœºå‘é€å‡ºé”™çš„æŠ¥æ–‡ã€‚å°±å¯çŸ¥é“ç¬¬ä¸€ä¸ªè·¯ç”±çš„ipåœ°å€ï¼ŒåŒé‡ŒTTLä¸º1 å°±å¯ä»¥çŸ¥é“ç¬¬äºŒä¸ªè·¯ç”±çš„IPåœ°å€ æ‹¥å¡æ§åˆ¶ä»€ä¹ˆé˜»å¡æ§åˆ¶ï¼Ÿ æ¯”å¦‚æˆ‘æƒ³ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶è§‚å¯ŸæŠ¥æ–‡çš„å‘é€æƒ…å†µï¼Œåœ¨0ï¼Œ7sçš„æ—¶é—´å†… å‘é€1448*9 = 17kbçš„æ•°æ®ï¼›è¿™ä¸ªæ—¶å€™ç½‘ç»œå¡é¡¿äº†ï¼Œåˆä¼šè¿™æ ·å‘¢ï¼Ÿåœ¨1.45sçš„æ—¶é—´å†…ï¼Œæ€»å…±å‘é€äº†9ä¸ªåŒ…===5kbæ•°æ® 1.æ¥å—çª—å£ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸æ–­è°ƒæ•´å®ƒæ¥å—çš„çª—å£å¤§å°2.æ‹¥å¡çª—å£æˆ‘æœ¬åœ°æœ‰è‡ªå·±çš„ä¸€ä¸ªæ‹¥å¡çª—å£cwnd å½“cwmd &gt; rwndçš„æ—¶å€™å¯¹æ–¹æ¥æ”¶èƒ½åŠ›é™åˆ¶äº†æˆ‘çš„å‘é€é€Ÿåº¦ï¼Œå½“rwnd &gt; cwndçš„æ—¶å€™ï¼Œæ˜¯æˆ‘çš„ç½‘ç»œæƒ…å†µé€ æˆå‘é€æ¯”è¾ƒæ…¢ æ…¢å¯åŠ¨ä¸é˜»å¡é¿å…å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªLinuxæœåŠ¡å™¨ï¼ŒæœåŠ¡åœ¨æ”¶åˆ°getè¯·æ±‚åè¿›è¡Œå“åº”ï¼Œç¬¬ä¸€æ¬¡åŒæ—¶åªå‘3ä¸ªåŒ…ï¼Œå¹¶ä¸”ä»æ—¶é—´é—´éš”ä¸Šçœ‹è‚¯å®šå®ƒæ˜¯æ•…æ„çš„ã€‚ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¼šæ˜¯3ä¸ªå‘¢ã€‚å› ä¸ºLinuxåˆå§‹åŒ–çª—å£å°±æ˜¯3MSSï¼Œè¯´æ˜ç¬¬ä¸€æ¬¡åªèƒ½å‘3ä¸ªåŒ… HTTPè¯·æ±‚å¤´å¤§å°é™åˆ¶1.è¯·æ±‚å¤´å¤§å°é™åˆ¶ Nginx Tomact 4k~8k 8k 2.URLé•¿åº¦é™åˆ¶ä¸€ä¸ªæ¯”è¾ƒå®‰å…¨çš„å€¼åº”è¯¥æ˜¯8Kï¼ŒåŒæ—¶æ³¨æ„getè¯·æ±‚å‚æ•°æ˜¯åœ¨URLé‡Œæ•°æ®ä¸èƒ½å¤ªå¤§ã€‚3.Cookieçš„é•¿åº¦é™åˆ¶ä¸€èˆ¬ä¸€ä¸ªdomainçš„cookieä¸èƒ½è¶…è¿‡4kbï¼Œ50ä¸ªcookieï¼Œä¸ç„¶æµè§ˆå™¨å¯èƒ½ä¸ä¼šæ”¯æŒã€‚ ç†è§£WebSocketæ€ä¹ˆå®ç°ä¸€ä¸ªHTTPçš„webå®æ—¶èŠå¤©ï¼Ÿæ€ä¹ˆçŸ¥é“å¯¹æ–¹æœ‰æ²¡æœ‰æ”¶åˆ°å‘é€æ¶ˆæ¯ç»™æˆ‘å‘¢ï¼Ÿ1.ä½¿ç”¨è½®è¯¢ï¼Œæ¯éš”2så‘ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡ç«¯æŸ¥è¯¢ï¼Œç¼ºç‚¹æµªè´¹èµ„æº2.ä½¿ç”¨Service Workerå®ç°æµè§ˆå™¨çš„Push è¿™ç§æ–¹æ³•è¦å…ˆæ³¨å†ŒFcmè´¦å·è·å–ä¸€ä¸ªidï¼Œç”¨ServiceWorkerç›‘å¬ï¼ŒæœåŠ¡å‘ Android.com/sendå‘é€æ¶ˆæ¯ï¼Œè°·æ­ŒæœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯å‘é‚£ä¸ªidå‘é€ä¸€ä¸ªæ¨é€ï¼Œå®ç°äº†æµè§ˆå™¨çš„pushï¼Œç¼ºç‚¹å…¼å®¹æ€§ä¸å¥½3.WebSocketå»ºç«‹é•¿è¿æ¥ ä»£ç ï¼š1234567var socket = new WebSocket(&quot;ws://192.168.8.88:8080&quot;)socket.open = ()=&gt;&#123; socket.send(&quot;é•¿æ±Ÿé•¿æ±Ÿï¼Œæˆ‘æ˜¯é»„æ²³&quot;)&#125;socket.onmessage = (event)=&gt;&#123; document.title = &quot;æ”¶åˆ°æ¥è‡ªé»„æ²³çš„æ¶ˆæ¯ï¼š&quot;+event.data&#125; è°ˆè°ˆWebSocketå’ŒWebRTCWebSocketå¯ä»¥å‘æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ï¼Œä¸ä¿è¯ä¼ é€çš„æ•ˆç‡å’Œè´¨é‡ã€‚WebRTCå¯ç”¨äºå¯é çš„ä¼ è¾“éŸ³é¢‘è§†é¢‘ï¼Œå»ºç«‹P2Pé“¾æ¥ï¼Œä¸éœ€è¦æœåŠ¡ç«¯è¿›è¡Œè½¬å‘æ•°æ®ï¼Œè™šæ‹Ÿç”µè¯ï¼Œåœ¨çº¿é¢è¯•ç­‰ç°åœ¨å¾ˆå¤šç”¨å®ƒå®ç°","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"}]},{"title":"NodeJsçš„MVCæ¨¡å‹","slug":"NodeJsçš„MVCæ¨¡å‹","date":"2019-07-25T16:00:00.000Z","updated":"2020-09-16T09:07:41.000Z","comments":true,"path":"2019/07/26/NodeJsçš„MVCæ¨¡å‹/","link":"","permalink":"http://mariogogogo.github.io/2019/07/26/NodeJs%E7%9A%84MVC%E6%A8%A1%E5%9E%8B/","excerpt":"MVCæ¨¡å‹ä¸»è¦çš„æ€æƒ³æ˜¯å°†ä¸šåŠ¡é€»è¾‘æŒ‰èŒèƒ½åˆ†ç¦» æ§åˆ¶å™¨â€”ä¸€ç»„è¡Œä¸ºçš„é›†åˆ æ¨¡å‹ â€”-æ•°æ®ç›¸å…³çš„æ“ä½œå’Œå°è£… è§†å›¾ â€”-è§†å›¾çš„æ¸²æŸ“ï¼ˆnodejsçš„åå°è™½ç„¶ä¸éœ€è¦è§†å›¾å¯ä»¥è§†ä¸ºæ¥å£çš„è¾“å‡ºå‚æ•°ï¼‰è¿™æ˜¯ç›®å‰æœ€ç»å…¸çš„åˆ†å±‚æ¨¡å¼ï¼Œå·¥ä½œæ¨¡å¼è¯´æ˜ è·¯ç”±è§£æurlå¯»æ‰¾å¯¹åº”æ§åˆ¶å™¨å’Œè¡Œä¸º è¡Œä¸ºè°ƒç”¨ç›¸å…³çš„æ¨¡å‹ï¼Œè¿›è¡Œæ•°æ®æ“ä½œ æ•°æ®æ“ä½œç»“æŸåï¼Œè°ƒç”¨è§†å›¾å’Œç›¸å…³æ•°æ®è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯","text":"MVCæ¨¡å‹ä¸»è¦çš„æ€æƒ³æ˜¯å°†ä¸šåŠ¡é€»è¾‘æŒ‰èŒèƒ½åˆ†ç¦» æ§åˆ¶å™¨â€”ä¸€ç»„è¡Œä¸ºçš„é›†åˆ æ¨¡å‹ â€”-æ•°æ®ç›¸å…³çš„æ“ä½œå’Œå°è£… è§†å›¾ â€”-è§†å›¾çš„æ¸²æŸ“ï¼ˆnodejsçš„åå°è™½ç„¶ä¸éœ€è¦è§†å›¾å¯ä»¥è§†ä¸ºæ¥å£çš„è¾“å‡ºå‚æ•°ï¼‰è¿™æ˜¯ç›®å‰æœ€ç»å…¸çš„åˆ†å±‚æ¨¡å¼ï¼Œå·¥ä½œæ¨¡å¼è¯´æ˜ è·¯ç”±è§£æurlå¯»æ‰¾å¯¹åº”æ§åˆ¶å™¨å’Œè¡Œä¸º è¡Œä¸ºè°ƒç”¨ç›¸å…³çš„æ¨¡å‹ï¼Œè¿›è¡Œæ•°æ®æ“ä½œ æ•°æ®æ“ä½œç»“æŸåï¼Œè°ƒç”¨è§†å›¾å’Œç›¸å…³æ•°æ®è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯ www.js12345678910const http = require(&#x27;http&#x27;)//å‚æ•°é…ç½®å±‚const serverHandle = require(&#x27;./app&#x27;)const PORT = 8080const server = http.createServer(serverHandle)server.listen(PORT,()=&gt;&#123; console.log(&#x27;é“¾æ¥ä¸Šäº†&#x27;+PORT);&#125;)app.js 1234567891011121314151617181920212223//æ ¹æ®ä¸åŒåŠŸèƒ½åˆ†ä¸åŒè·¯ç”±è·¯å¾„const querystring = require(&quot;querystring&quot;);const handleBlogRouter = require(&quot;./src/router/blog&quot;);const serverHandle = (req, res) =&gt; &#123; //è®¾ç½®è¿”å›æ ¼å¼ res.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;); const url = req.url; req.path = url.split(&quot;?&quot;)[0]; //å¦‚æœgetè§£æquery req.query = querystring.parse(url.split(&quot;?&quot;)[1]); const blogData = handleBlogRouter(req, res); res.end(JSON.stringify(blogData)); return; &#125; //å¤„ç†404 res.writeHead(404, &#123; &quot;Content-type&quot;: &quot;text/plain&quot; &#125;); res.write(&quot;404 Not Found\\n&quot;); res.end();module.exports = serverHandle; /router/blog.jsè·¯ç”±åŠŸèƒ½ 12345678910111213141516171819202122232425262728293031323334353637const &#123;getList,getDetail,createNewBlog&#125; = require(&#x27;../controller/blog&#x27;)const &#123;SuccessModal,ErrorModal&#125; = require(&#x27;../modal/resModal&#x27;)const handleBlogRouter = (req, res) =&gt; &#123; const method = req.method; //è·å–åšå®¢åˆ—è¡¨ if (method === &quot;GET&quot; &amp;&amp; req.path === &quot;/api/blog/list&quot;) &#123; const author = req.query.author || &#x27;&#x27; const keyword = req.query.keyword || &#x27;&#x27; const listData = getList(author,keyword) return new SuccessModal(listData) &#125; //è·å–åšå®¢è¯¦æƒ… if (method === &quot;GET&quot; &amp;&amp; req.path === &quot;/api/blog/detail&quot;) &#123; return &#123; msg: &quot;è·å–åšå®¢api&quot; &#125;; &#125; //æ–°å»ºä¸€ç¯‡åšå®¢ if (method === &quot;POST&quot; &amp;&amp; req.path === &quot;/api/blog/new&quot;) &#123; return &#123; msg: &quot;æ–°å»ºåšå®¢api&quot; &#125;; &#125; //æ›´æ–°ä¸€ç¯‡åšå®¢ if (method === &quot;POST&quot; &amp;&amp; req.path === &quot;/api/blog/update&quot;) &#123; return &#123; msg: &quot;æ›´æ–°åšå®¢api&quot; &#125;; &#125;&#125;;module.exports = handleBlogRouter modelå±‚æ“ä½œ 12345678910111213141516171819202122232425262728class BaseModal &#123; constructor(data, message) &#123; if (typeof data === &quot;string&quot;) &#123; this.message = data; data = null message = null &#125; if (data) &#123;this.data = data&#125; if (message) &#123;this.message = message&#125; &#125;&#125;class SuccessModal extends BaseModal &#123; constructor(data, message) &#123; super(data, message); this.errno = 0 &#125;&#125;class ErrorModal extends BaseModal &#123; constructor(data, message) &#123; super(data, message); this.errno = 1 &#125;&#125;module.exports = &#123; SuccessModal, ErrorModal &#125;; controllerå±‚æ“ä½œ12345678910111213const getDetail = (id) =&gt;&#123; //è¿”å›å‡æ•°æ®ï¼Œä»¥åè¿™é‡Œå¢åŠ æ•°æ®åº“æ“ä½œä»£ç  return &#123; id:1, title:&#x27;æ ‡é¢˜C&#x27;, content:&#x27;å†…å®¹C&#x27;, createTime:1564065988099, author:&#x27;å‘¨æ°ä¼¦&#x27; &#125;&#125;module.exports = &#123; getDetail&#125;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"Reactä¸­ä½¿ç”¨Mobx","slug":"Reactä¸­ä½¿ç”¨Mobx","date":"2019-06-22T16:00:00.000Z","updated":"2020-09-16T09:07:49.000Z","comments":true,"path":"2019/06/23/Reactä¸­ä½¿ç”¨Mobx/","link":"","permalink":"http://mariogogogo.github.io/2019/06/23/React%E4%B8%AD%E4%BD%BF%E7%94%A8Mobx/","excerpt":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx çŠ¶æ€ç®¡ç†åº“çš„åŒºåˆ«:ç½‘ä¸ŠæŸä½å¤§ç‰›çš„ ppt, é“¾æ¥æœ‰æœºä¼šå†è¡¥ä¸Šã€‚æ­¤å¤„çš„è‡ªå·±ä¸ºåº“çš„å¼€å‘è€…ï¼Œåˆ«äººæ˜¯æŒ‡åº“çš„ä½¿ç”¨è€…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç­‰ç å†œã€‚","text":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Mobx çŠ¶æ€ç®¡ç†åº“çš„åŒºåˆ«:ç½‘ä¸ŠæŸä½å¤§ç‰›çš„ ppt, é“¾æ¥æœ‰æœºä¼šå†è¡¥ä¸Šã€‚æ­¤å¤„çš„è‡ªå·±ä¸ºåº“çš„å¼€å‘è€…ï¼Œåˆ«äººæ˜¯æŒ‡åº“çš„ä½¿ç”¨è€…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç­‰ç å†œã€‚ MobXæ¶å¿ƒè‡ªå·±ï¼Œæˆå…¨åˆ«äºº Reduxæˆå…¨è‡ªå·±ï¼Œæ¶å¿ƒåˆ«äºº Rxjsæ¶å¿ƒè‡ªå·±ï¼Œä¹Ÿæ¶å¿ƒåˆ«äºº é¦–å…ˆå®‰è£…ä¿®é¥°å™¨åˆ›å»ºä¸€ä¸ªé¡¹ç›®12345create-react-app mobx-todo-list //åˆ›å»ºé¡¹ç›® yarn add mobx mobx-react //å®‰è£… mobx çš„ç›¸å…³ä¾èµ– npm run eject å®‰è£…å®‰è£… decorators1npm install --save-dev @babel/plugin-proposal-decorators ä¿®æ”¹package.jsonä¸­çš„babelé…ç½®12345678910111213&quot;babel&quot;: &#123; &quot;presets&quot;: [ &quot;react-app&quot; ], &quot;plugins&quot;: [ [ &quot;@babel/plugin-proposal-decorators&quot;, &#123; &quot;legacy&quot;: true &#125; ] ] &#125; å®Œæˆå, å°±å¯ä»¥ä½¿ç”¨è£…é¥°å™¨è¯­æ³•äº†. åœ¨Reactå¦‚ä½•ä½¿ç”¨å‘¢ Providerâ€”-Providerçš„ä½œç”¨ä¸react-reduxæä¾›çš„Providerç»„ä»¶æ˜¯ç›¸åŒçš„ inject â€”- ç”¨äºä»Provideræä¾›çš„stateä¸­é€‰å–æ•°æ®ä½œä¸ºpropsä¼ é€’ç»™ç›®æ ‡ç»„ä»¶ã€‚å¸¸ç”¨çš„æ–¹å¼ 12@inject(&quot;store1&quot;,&quot;store2&quot;) @observer MyComponent åˆ›å»ºAppStore12345678910111213141516171819202122import &#123; observable, computed, action &#125; from &#x27;mobx&#x27;;class AppStore &#123; @observable todos = []; //todosåˆ—è¡¨ @observable newtodo = &quot;232&quot;; //æ–°æ·»åŠ çš„todo @observable selectedRowKeys = []; //é€‰æ‹©è¡Œçš„key @observable loading = true; //Table-loading @observable _key = 0; //key @observable total = 0; //æ•°æ®é‡ //æ·»åŠ  æ³¨æ„thisçš„æ‰§è¡Œ å¿…é¡»ç”¨å‰ªå¤´å‡½æ•° @action AddTodo = () =&gt; &#123; this._key += 1; &#125;; //è®¡ç®—é•¿åº¦ æ¥å—ä¸€ä¸ªå‡½æ•° @computed get TodoListCount() &#123; return this._key; &#125;&#125;export default AppStore; è½½å…¥index.js12345678910111213141516import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import * as serviceWorker from &#x27;./serviceWorker&#x27;;import AppStore from &#x27;./stores/AppStore&#x27;;import App from &#x27;./components/App&#x27;;// åˆ›å»ºä¸€ä¸ªstoreå®ä¾‹const store = new AppStore();ReactDOM.render( &lt;App store=&#123;store&#125; /&gt;, document.getElementById(&#x27;root&#x27;));serviceWorker.unregister(); Mobxåœ¨reactä½¿ç”¨ä¸­çš„ä¼˜åŒ–å°½å¯èƒ½ä½¿ç”¨å°ç»„ä»¶before12345678910111213141516@observer class PostList extends Component&#123; render() &#123; const &#123;user,todos,homeStore&#125; = this.props return ( &lt;div&gt; &lt;h1&gt;PostListå…³äºç³»åˆ—&lt;/h1&gt; &lt;span&gt;&#123;homeStore.user&#125;&lt;/span&gt; &lt;ul&gt; &#123;todos.map(todo=&gt; (&lt;TodoView todo=&#123;todo&#125; key=&#123;todo.id&#125; /&gt;) )&#125; &lt;/ul&gt; &lt;button onClick=&#123;homeStore.setUser&#125;&gt;æ›´æ–°user&lt;/button&gt; &lt;/div&gt; ); å‡å°‘æ–°æ—§ç»„ä»¶çš„diffå¯¹æ¯”è¿‡ç¨‹ä¹Ÿæ˜¯æ¶ˆè€—æ€§èƒ½after123456789101112@observer class PostList extends Component&#123; render() &#123; const &#123;user,todos,homeStore&#125; = this.props return ( &lt;div&gt; &lt;h1&gt;PostListå…³äºç³»åˆ—&lt;/h1&gt; &lt;span&gt;&#123;homeStore.user&#125;&lt;/span&gt; &lt;TodoView todos=&#123;todos&#125;/&gt; &lt;button onClick=&#123;homeStore.setUser&#125;&gt;æ›´æ–°user&lt;/button&gt; &lt;/div&gt; ); å°½å¯èƒ½æ™šçš„å¼•ç”¨å¯¹è±¡å±æ€§before12345678910111213@observer class B extends Component&#123; render()&#123; const &#123;name&#125; = this.props; return &lt;div&gt;&#123;name&#125;&lt;/div&gt; &#125;&#125;class A extends Component&#123; render()&#123; const &#123;p&#125; = this.props; return &lt;B name=&#123;p.name&#125;&gt;&lt;/B&gt; &#125;&#125; ç»„ä»¶Bæ¸²æŸ“çš„æ¡ä»¶å¿…é¡»æ˜¯ç»„ä»¶Aé‡æ–°æ¸²æŸ“ï¼Œç„¶åä¼šè®©Bä¹Ÿæ¸²æŸ“.å¦‚æœpæ˜¯ä¸ªå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œåªéœ€é‡æ–°æ¸²æŸ“Bç»„ä»¶ï¼Œä¸éœ€è¦æ¸²æŸ“Aç»„ä»¶after12345678910111213@observer class B extends Component&#123; render()&#123; const &#123;p&#125; = this.props; return &lt;div&gt;&#123;p.name&#125;&lt;/div&gt; &#125;&#125;class A extends Component&#123; render()&#123; const &#123;p&#125; = this.props; return &lt;B p=&#123;p&#125;&gt;&lt;/B&gt; &#125;&#125; æå‰ç»‘å®šå‡½æ•°before1234567@observer class B extends Component&#123; render()&#123; const &#123;p&#125; = this.props; return &lt;div onClick=&#123;alert(&#x27;hi&#x27;)&#125;&gt;&#123;p.name&#125;&lt;/div&gt; &#125;&#125; Bä¸­çš„renderæ¯æ¬¡è°ƒç”¨ï¼Œonclickä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¯¼è‡´Cçš„renderæ–¹æ³•è¢«é‡æ–°è°ƒç”¨ï¼Œæ— è®ºå…¶ä»–å±æ€§å‘ç”Ÿå˜åŒ–after12345678910@observer class B extends Component&#123; handleClick=()=&gt;&#123; alert(&#x27;hi&#x27;) &#125; render()&#123; const &#123;p&#125; = this.props; return &lt;C onClick=&#123;this.handleClick&#125;&gt;&#123;p.name&#125;&lt;/C&gt; &#125;&#125;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€æ€§èƒ½ä¼˜åŒ–","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ€§èƒ½ä¼˜åŒ–","date":"2019-06-07T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/06/08/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"http://mariogogogo.github.io/2019/06/08/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","excerpt":"è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£å½“ webpack å‡çº§ä¼˜åŒ–ï¼Œç›¸å…³ node yarn npm åŒ…åº”è¯¥ä¹Ÿéœ€è¦å‡çº§å·²è·å¾—æ›´å¥½çš„ä¼˜åŒ–æ€§èƒ½","text":"è·Ÿä¸Šé€Ÿåº¦çš„è¿­ä»£å½“ webpack å‡çº§ä¼˜åŒ–ï¼Œç›¸å…³ node yarn npm åŒ…åº”è¯¥ä¹Ÿéœ€è¦å‡çº§å·²è·å¾—æ›´å¥½çš„ä¼˜åŒ–æ€§èƒ½ å‡å°‘ loader1234567module: &#123; rules: [&#123; test: /\\.jsx?$/, exclude: /node_modules/, // include: path.reslove(__dirname,&#x27;../src&#x27;), //æŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶è·¯å¾„ loader: &#x27;babel-loader&#x27;, &#125; excludeï¼šæ’é™¤æ–‡ä»¶å¤¹å†…æ–‡ä»¶ä½¿ç”¨babel-loadï¼Œé¿å…å†æ¬¡ç¼–è¯‘æ‰“åŒ…ï¼ŒåŠ å¿«æ‰“åŒ…é€Ÿåº¦æˆ–è€…å¯ä»¥ç”¨includeå‚æ•° ä¸Šé¢jsx?è¡¨ç¤ºçš„æ˜¯å¦‚æœ js æ–‡ä»¶å¯ä»¥èµ°babel-loadï¼Œå¦‚æœæ˜¯ jsx æ–‡ä»¶ä¹Ÿå¯ä»¥èµ°babel-loadæ–‡ä»¶ css æ–‡ä»¶å‹ç¼© 123optimization: &#123; minimizer: [new OptimizeCSSAssetsPlugin(&#123;&#125;)]&#125;, æ’ä»¶çš„é€‰æ‹©å°½é‡ä½¿ç”¨å®˜æ–¹è®¤å¯çš„æ’ä»¶ reslove åˆç†çš„é…ç½®æ–‡ä»¶åç¼€çš„ç®€å†™é…ç½®12import app from &quot;./src/app.js&quot;;import style from &quot;./src/style.css&quot;; å¦‚æœä¸å†™åç¼€ä¼šæŠ¥é”™ï¼Œå¦‚ä½•ç”¨ webpack é…ç½®å‘¢ï¼Ÿ 12345678module.exports=&#123; ... resolve:&#123; extensions:[&#x27;.js&#x27;,&#x27;.jsx&#x27;] &#125;, ...&#125; è¿™æ · webpack å°±ä¼šå»æ‰¾ js æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Ÿ åˆ™å»æ‰¾ jsx æ–‡ä»¶æ˜¯å¦å­˜åœ¨,ä½†æ˜¯ extensions ä¸å»ºè®®å­˜å¾ˆå¤šåç¼€å,å½±å“æ€§èƒ½ï¼Œå»ºè®®èµ„æºç±»æ–‡ä»¶è¿˜æ˜¯ä»£åç¼€ã€‚ ç®€å†™è·¯å¾„åä¸€å¦‚æœæˆ‘ä»¬æ¯æ¬¡è¿™æ ·å†™è·¯å¾„æ˜¯ä¸æ˜¯å¾ˆç¹çï¼Ÿ 1import list from &#x27;../src/common/listwarpper/list/item.jsx&#x27; webpack å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿå¢åŠ mainFileså‚æ•° 123456789module.exports=&#123; ... resolve:&#123; extensions:[&#x27;.js&#x27;,&#x27;.jsx&#x27;], mainFiles:[&#x27;common&#x27;,&#x27;image&#x27;] &#125;, ...&#125; mainFilesè¡¨ç¤º webpack å»æ ¹æ®æ•°ç»„é•¿åº¦å»æŸ¥æ‰¾å¯¹åº”æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å­˜æ”¾çš„æ–‡ä»¶å¤¹æ•°ç»„é•¿åº¦ä¸å¯ä»¥å¤ªé•¿ï¼Œå½±å“æ€§èƒ½ ç®€å†™è·¯å¾„åäºŒ12345678910module.exports=&#123; ... resolve:&#123; extensions:[&#x27;.js&#x27;,&#x27;.jsx&#x27;], alias:&#123; //åˆ«åçš„æ„æ€ listwarpper:path.resolve(__dirname,&#x27;../src/common/listwarpper&#x27;) &#125; &#125;, ...&#125; å½“ webpack çœ‹åˆ° listwarpper çš„è·¯å¾„åå°±è¡¨ç¤ºå»æŸ¥æ‰¾../src/common/listwarpper; ä½¿ç”¨ DllPlugin æé«˜æ‰“åŒ…é€Ÿåº¦æˆ‘ä»¬çŸ¥é“é¡¹ç›®ä¼šå¼•å…¥è¶Šæ¥è¶Šçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ‰“åŒ…é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ï¼Œæ¯ä¸€æ¬¡é‡æ–°æ‰“åŒ…é‡æ–°åˆ†æ loaderï¼Œpluginã€‚ 123import React, &#123; Component &#125; from &quot;react&quot;;import ReactDom from &quot;react-dom&quot;;import _ from &quot;lodash&quot;; æ‰“åŒ…æ—¶é—´ä¼šæ¯”è¾ƒå¤š å¯ä¸å¯ä»¥å•ç‹¬æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„æ—¶å€™åˆ†æè¿™äº›ä»£ç ï¼Œåé¢æ‰“åŒ…å°±ä¸éœ€è¦åˆ†æäº†ï¼Ÿ æˆ‘ä»¬å¾—å…ˆåˆ›å»ºä¸€ä¸ª[name].dll.jsæ–‡ä»¶ 12345678910111213141516const path = require(&quot;path&quot;);const webpack = require(&quot;webpack&quot;);module.exports = &#123; mode: &quot;production&quot;, entry: &#123; vendors: [&quot;lodash&quot;], //éœ€è¦ä½¿ç”¨å¾—ç¬¬ä¸‰æ–¹æ¨¡å—åˆ†åˆ«å†™åœ¨è¿™é‡Œ react: [&quot;react&quot;, &quot;react-dom&quot;], jquery: [&quot;jquery&quot;] &#125;, output: &#123; filename: &quot;[name].dll.js&quot;, path: path.resolve(__dirname, &quot;../dll&quot;), library: &quot;[name]&quot; //å…¨å±€å˜é‡ æš´éœ²å‡ºå» &#125;&#125;; ç„¶ååœ¨ webpack.json ç»§ç»­é…ç½® AddAssetHtmlWebpackPluginæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨ 12345678910111213141516171819const AddAssetHtmlWebpackPlugin = require(&quot;add-asset-html-webpack-plugin&quot;);const files = fs.readdirSync(path.resolve(__dirname, &quot;../dll&quot;));files.forEach(file =&gt; &#123; if (/.*\\.dll.js/.test(file)) &#123; plugins.push( new AddAssetHtmlWebpackPlugin(&#123; filepath: path.resolve(__dirname, &quot;../dll&quot;, file) &#125;) ); &#125; if (/.*\\.manifest.json/.test(file)) &#123; plugins.push( new webpack.DllReferencePlugin(&#123; manifest: path.resolve(__dirname, &quot;../dll&quot;, file) &#125;) ); &#125;&#125;); ç„¶åé…ç½® plugins,è®©ç¬¬ä¸‰æ–¹æ¨¡å—å»åšä¸€ä¸ªæ˜ å°„,æŠŠåº“æ–‡ä»¶å»åšåˆ†æä¸­å¾—åˆ†ææ¨¡å—æ˜ å°„å…³ç³»ç»“æœæ”¾åœ¨ json æ–‡ä»¶ä¸­ã€‚ 123456plugins: [ ...new webpack.DllPlugin(&#123; name: &quot;[name]&quot;, path: path.resolve(__dirname, &quot;../dll/[name].manifest.json&quot;) &#125;)]; ç„¶åæˆ‘ä»¬yarn run build-dllä¸€ä¸‹ä¼šå‘ç”Ÿç”Ÿæˆå¾ˆå¤šæ–‡ä»¶ æ§åˆ¶åŒ…å¾—å¤§å°å‰”é™¤æ— ç”¨æ’ä»¶æˆ‘ä»¬é¡¹ç›®ä¸­ç»å¸¸ä¼šå¼•ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¯æ˜¯æˆ‘ä»¬ç‰ˆæœ¬è¿­ä»£åˆä¸å»ç”¨äº†ï¼Œç„¶åå¿˜è®°åˆ é™¤ã€‚ç»§ç»­æ‰“åŒ…åŒ…å¾—ä½“ç§¯ä¼šæŠŠå¤šä½™å¾—åŒ…æ‰“åŒ…è¿›å»ï¼Œæ˜¯å¤šä½™å¾—ã€‚ åˆç†ä½¿ç”¨ sourceMap1234const prodConfig = &#123; mode: &quot;production&quot;, devtool: &quot;cheap-module-source-map&quot;&#125;;","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€ç”¨ HMR æé«˜æ•ˆç‡","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€ç”¨ HMR æé«˜æ•ˆç‡","date":"2019-06-06T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/06/07/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€ç”¨ HMR æé«˜æ•ˆç‡/","link":"","permalink":"http://mariogogogo.github.io/2019/06/07/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E7%94%A8%20HMR%20%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87/","excerpt":"HMR å…¨ç§°æ˜¯ Hot Module Replacementï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼ŒHMR æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡ã€‚","text":"HMR å…¨ç§°æ˜¯ Hot Module Replacementï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼ŒHMR æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡ã€‚ åŸºç¡€é…ç½®123plugins: [ new webpack.HotModuleReplacementPlugin() ], æ·»åŠ å…¶ä»– HotModuleReplacementPlugin æ’ä»¶é…åˆæ‰§è¡Œ 12345678910111213const webpack = require(&quot;webpack&quot;);module.exports = &#123; // ... devServer: &#123; hot: true // dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯ &#125;, plugins: [ // ... new webpack.NamedModulesPlugin(), // ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„ new webpack.HotModuleReplacementPlugin() // Hot Module Replacement çš„æ’ä»¶ ]&#125;; ä¸¾ä¸ªæ —å­webpack å¦‚ä½•ä¿è¯ HMR æ¥å£ä¸­çš„å¼•ç”¨æ˜¯æœ€æ–°çš„æ¨¡å—ä»£ç ï¼Ÿ 1234567891011import &quot;./index.css&quot;;import hello from &quot;./bar&quot;;hello();if (module.hot) &#123; module.hot.accept(&quot;./bar&quot;, () =&gt; &#123; // console.log(&#x27;Accepting the updated bar module!&#x27;) hello(); &#125;);&#125; å¦‚æœ bar æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œåé¢å¾—å›è°ƒå‡½æ•°é‡æ–°æ‰§è¡Œ hello","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€JS æˆ– CSS æ–‡ä»¶ä»£ç åˆ†å‰²","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€CSSæ–‡ä»¶ä»£ç åˆ†å‰²","date":"2019-06-05T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/06/06/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€CSSæ–‡ä»¶ä»£ç åˆ†å‰²/","link":"","permalink":"http://mariogogogo.github.io/2019/06/06/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FCSS%E6%96%87%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2/","excerpt":"ä¸ºä»€ä¹ˆè¦åˆ†ç¦»å…ˆç®€å•è§£é‡Šä¸€ä¸‹è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚","text":"ä¸ºä»€ä¹ˆè¦åˆ†ç¦»å…ˆç®€å•è§£é‡Šä¸€ä¸‹è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚ å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚ã€‚ js ä»£ç åˆ†å‰²12345678module.exports = &#123; // ... optimization: &#123; splitChunks: &#123; chunks: &quot;all&quot; // æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ &#125; &#125;&#125;; æ‹†åˆ†æ–‡ä»¶å¾—ç›®çš„æ˜¯ä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜,åˆ†ç¦»å…¬å…±ç±»åº“å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†è®©å¤šé¡µé¢åˆ©ç”¨ç¼“å­˜ï¼Œä»è€Œå‡å°‘ä¸‹è½½çš„ä»£ç é‡ï¼ŒåŒæ—¶ï¼Œä¹Ÿæœ‰ä»£ç å˜æ›´æ—¶å¯ä»¥åˆ©ç”¨ç¼“å­˜å‡å°‘ä¸‹è½½ä»£ç é‡çš„å¥½å¤„ åŸºç¡€é…ç½®å¯ä»¥ä½¿ç”¨MiniCssExtractPlugin,è®© css ä»£ç åˆ†å‰² 123456plugins: [ new MiniCssExtractPlugin(&#123; filename: &quot;[name].css&quot;, chunkFilename: &quot;[name].chunk.css&quot; &#125;)]; è¿™ä¸ªæ’ä»¶ç›®å‰è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä¸æ”¯æŒ HMRï¼Œå°±æ˜¯çƒ­æ›´æ–°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ”¹å˜æœ¬åœ° css æ— æ³•ç«‹å³æŸ¥çœ‹æ•ˆæœï¼Œæ‰€ä»¥å»ºè®®åªåœ¨çº¿ä¸Šç¯å¢ƒç”¨è¿™ä¸ªæ’ä»¶ å¸¸ç”¨é…ç½®æˆ‘ä»¬åœ¨ webpack.pro.js ä¸­é…ç½® 1234567891011121314151617181920212223242526272829module: &#123; rules:[&#123; test: /\\.scss$/, use: [ MiniCssExtractPlugin.loader, &#123; loader: &#x27;css-loader&#x27;, options: &#123; importLoaders: 2 &#125; &#125;, &#x27;sass-loader&#x27;, &#x27;postcss-loader&#x27; ] &#125;, &#123; test: /\\.css$/, use: [ MiniCssExtractPlugin.loader, &#x27;css-loader&#x27;, &#x27;postcss-loader&#x27; ] &#125;] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: &#x27;[name].css&#x27;, chunkFilename: &#x27;[name].chunk.css&#x27; &#125;) ] filenameè¡¨ç¤ºå¦‚æœé¡µé¢éœ€è¦ç›´æ¥åº”ç”¨çš„æ–‡ä»¶åˆ™ç›´æ¥ç”Ÿæˆ xxx.css å¦‚æœæ˜¯æŸä¸ªç»„ä»¶çš„ css æ ·å¼ï¼Œä¸æ˜¯ä¸»æ–‡ä»¶ css é‚£ä¹ˆå®ƒå°±ä¼šç¼–è¯‘æˆxxx.chunk.css","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€webpackDevServeræå‡æ•ˆç‡","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€webpackDevServeræå‡æ•ˆç‡","date":"2019-06-04T16:00:00.000Z","updated":"2020-09-16T09:06:52.000Z","comments":true,"path":"2019/06/05/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€webpackDevServeræå‡æ•ˆç‡/","link":"","permalink":"http://mariogogogo.github.io/2019/06/05/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FwebpackDevServer%E6%8F%90%E5%8D%87%E6%95%88%E7%8E%87/","excerpt":"é»˜è®¤æƒ…å†µä¸‹å¼€å¯äº†æœåŠ¡å™¨åï¼Œåªè¦å…¥å£æ–‡ä»¶æœ‰æ›´æ–°é‚£æ•´ä¸ªé¡µé¢å°±ä¼šé‡æ–°åˆ·æ–°ã€‚å¦‚æœé¡µé¢é‡Œå¼•å…¥çš„æ¨¡å—éå¸¸å¤šçš„æƒ…å†µä¸‹è®©æ•´ä¸ªé¡µé¢åˆ·æ–°å°±ä¼šå˜å¾—æœ‰äº›æ…¢ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥äº¤ç»™çƒ­æ›´æ–°å»è§£å†³ã€‚çƒ­æ›´æ–°çš„æ„æ€å°±æ˜¯åªæ›´æ–°æœ‰æ”¹åŠ¨çš„æ¨¡å—ï¼ˆåƒajaxä¸€æ ·å±€éƒ¨åˆ·æ–°ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå¹¶å®æ—¶åˆ·æ–°ä»£ç æˆ‘ä»¬éœ€è¦devserver","text":"é»˜è®¤æƒ…å†µä¸‹å¼€å¯äº†æœåŠ¡å™¨åï¼Œåªè¦å…¥å£æ–‡ä»¶æœ‰æ›´æ–°é‚£æ•´ä¸ªé¡µé¢å°±ä¼šé‡æ–°åˆ·æ–°ã€‚å¦‚æœé¡µé¢é‡Œå¼•å…¥çš„æ¨¡å—éå¸¸å¤šçš„æƒ…å†µä¸‹è®©æ•´ä¸ªé¡µé¢åˆ·æ–°å°±ä¼šå˜å¾—æœ‰äº›æ…¢ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥äº¤ç»™çƒ­æ›´æ–°å»è§£å†³ã€‚çƒ­æ›´æ–°çš„æ„æ€å°±æ˜¯åªæ›´æ–°æœ‰æ”¹åŠ¨çš„æ¨¡å—ï¼ˆåƒajaxä¸€æ ·å±€éƒ¨åˆ·æ–°ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå¹¶å®æ—¶åˆ·æ–°ä»£ç æˆ‘ä»¬éœ€è¦devserver 123456devServer: &#123; contentBase: &#x27;./dist&#x27;, open: true, port: 8080, hot: true&#125;, å‚æ•° è¯´æ˜ contentBase é™æ€æ–‡ä»¶è·¯å¾„ open æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ ç«¯å£å· è‡ªå®šä¹‰ï¼Œé»˜è®¤8080 hot çƒ­æ›´æ–° è·¨åŸŸè¯·æ±‚12345678910devServer: &#123; contentBase: &#x27;./dist&#x27;, open: true, port: 8080, hot: true, proxy:&#123; &#x27;/api&#x27;:&#x27;http://localhost:3000&#x27; &#125;&#125;, å‚æ•° è¯´æ˜ contentBase é™æ€æ–‡ä»¶å®¹å™¨ open æ˜¯å¦æ‰“å¼€æµè§ˆå™¨ port ç«¯å£ hot æ˜¯å¦è¦æ‰“å¼€çƒ­æ›´æ–° proxy è¯·æ±‚ä»£ç† é‡å†™apiå¦‚æœæœåŠ¡ç«¯ï¼Œå¤„ç†çš„apiä¸æ˜¯ä»¥/apiå¼€å¤´çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œéœ€è¦åœ¨webpackçš„proxyé‡å†™è¯·æ±‚api 12345678devServer:&#123; proxy:&#123; &#x27;/api&#x27;:&#123; target:&#x27;http://localhost:9000&#x27;, pathRewrite:&#123;&#x27;/api&#x27;:&#x27;&#x27;&#125; &#125; &#125;&#125;, å‚æ•° è¯´æ˜ target ä¸ºè¯·æ±‚åŸŸ pathRewrite å°†å¼€å‘æ¨¡å—ä¸­çš„ä»¥/apiè¯·æ±‚çš„æ¥å£ï¼Œå»æ‰/apiè¿›è¡Œä»£ç†è¯·æ±‚ å¼•å…¥Mockæ•°æ®123456789101112131415161718192021222324252627282930// å¼•å…¥mock.jsconst Mock = require(&#x27;./mock.js&#x27;);module.exports = &#123; devServer: &#123; port: 8080, host: &#x27;0.0.0.0&#x27;, headers: &#123; &#x27;X-foo&#x27;: &#x27;112233&#x27; &#125;, inline: true, overlay: true, stats: &#x27;errors-only&#x27;, before: function(app) &#123; console.log(app); //è¯¥å‡½æ•°ä¼šåˆ¤æ–­å½“å‰çš„ç¯å¢ƒæ˜¯å¦æ˜¯mockå‘½ä»¤ if (process.env.NODE_ENV === &#x27;mock&#x27;) &#123; Mock(app); &#125; &#125; &#125;, plugins: [ // è®¾ç½®ç¯å¢ƒå˜é‡ä¿¡æ¯ new webpack.DefinePlugin(&#123; &#x27;process.env&#x27;: &#123; NODE_ENV: JSON.stringify(process.env.NODE_ENV) &#125; &#125;) ]&#125; å¼•å…¥mock.js12345678910111213141516171819202122232425const getPower = require(&#x27;./json/parent_getPower.json&#x27;);const reConfig = require(&#x27;./json/parent_reConfig.json&#x27;);const reConList = require(&#x27;./json/parent_reconlist.json&#x27;);const reGroup = require(&#x27;./json/parent_reGroup.json&#x27;);function Mock(app) &#123; app.get(&#x27;/xxxx/yyy&#x27;, function(req, res) &#123; console.log(&#x27;getPower111&#x27;); res.json(getPower); &#125;); app.post(&#x27;/reconfig&#x27;, function(req, res) &#123; console.log(&#x27;reConfig111&#x27;); res.json(reConfig); &#125;); app.post(&#x27;/conlist&#x27;, function(req, res) &#123; console.log(&#x27;reConList111&#x27;); res.json(reConList); &#125;); app.post(&#x27;/regroup&#x27;, function(req, res) &#123; console.log(&#x27;reGroup111&#x27;); res.json(reGroup); &#125;);&#125;module.exports = Mock;","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·± Webpack ç³»åˆ—ã€SourceMap çš„é…ç½®","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€SourceMapçš„é…ç½®","date":"2019-06-03T16:00:00.000Z","updated":"2020-09-16T09:06:52.000Z","comments":true,"path":"2019/06/04/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€SourceMapçš„é…ç½®/","link":"","permalink":"http://mariogogogo.github.io/2019/06/04/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8FSourceMap%E7%9A%84%E9%85%8D%E7%BD%AE/","excerpt":"ä»€ä¹ˆæ˜¯ SourceMapå½“æˆ‘ä»¬å‘ç°æ‰“åŒ…åç¨‹åºå‡ºç°é”™è¯¯æ—¶å€™ä¼šä¸€èˆ¬ç”¨ chromse","text":"ä»€ä¹ˆæ˜¯ SourceMapå½“æˆ‘ä»¬å‘ç°æ‰“åŒ…åç¨‹åºå‡ºç°é”™è¯¯æ—¶å€™ä¼šä¸€èˆ¬ç”¨ chromse å½“ç‚¹å‡»ä¹‹åä»£ç ä¸­å‘ç°æ˜¯ 96 è¡Œï¼Œè¿™ä¸ª main.js æ˜¯æ‰“åŒ…çš„ æˆ‘å¸Œæœ›æ˜¯æˆ‘æ‰“åŒ…å‰é‚£ä¸ªæ–‡ä»¶çš„é‚£ä¸€è¡Œé”™è¯¯äº†ã€‚æˆ‘ä»¬å¦‚ä½•è®© webpack åšåˆ°å‘¢ï¼Ÿ æˆ‘ä»¬è¦ç”¨ sourceMap å®ƒæ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå®ƒçŸ¥é“ dist ç›®å½•ä¸‹ main.js96 è¡Œå°±æ˜¯ src ä¸­ index.js æ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œ åŠ å…¥é…ç½®12345678910111213const prodConfig = &#123; mode: &#x27;production&#x27;, devtool: &#x27;source-map&#x27;,&#125;å¦‚æœæˆ‘ä»¬åªæƒ³çŸ¥é“è¡Œ ä¸éœ€è¦å‘Šè¯‰æˆ‘ç¬¬å‡ åˆ—const prodConfig = &#123; mode: &#x27;production&#x27;, devtool: &#x27;cheap-module-source-map&#x27;,&#125; å‚æ•° è¯´æ˜ cheap-module-source-map åªæ˜¾ç¤ºè¡Œæ•°ï¼ˆæé«˜æ€§èƒ½ï¼‰ ç¬”è€…æ¨è å‚æ•° è¯´æ˜ dev æ¨¡å¼ cheap-module-eval-source-map production devtool ä¸éœ€è¦é…ç½®é»˜è®¤å³åˆ»æˆ–è€…(cheap-module-source-map) ä½œç”¨è§£å†³äº†å¦‚æœæ‰“åŒ…å‡ºé”™ï¼Œå¿«é€Ÿå®šä½é”™è¯¯æé«˜æ•ˆç‡","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€pluginså®è·µ","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€pluginså®è·µ","date":"2019-06-02T16:00:00.000Z","updated":"2020-09-16T09:06:52.000Z","comments":true,"path":"2019/06/03/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€pluginså®è·µ/","link":"","permalink":"http://mariogogogo.github.io/2019/06/03/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Fplugins%E5%AE%9E%E8%B7%B5/","excerpt":"æˆ‘ä»¬å¯ä»¥æŠŠplugin ç”¨äºå¤„ç†æ›´å¤šå…¶ä»–çš„ä¸€äº›æ„å»ºä»»åŠ¡è®©æ‰“åŒ…æ›´åŠ ä¾¿æ·ï¼Œä¹Ÿå¯ä»¥å«åšwebpackçš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼šè¦ä½¿ç”¨å‹ç¼© JS ä»£ç ","text":"æˆ‘ä»¬å¯ä»¥æŠŠplugin ç”¨äºå¤„ç†æ›´å¤šå…¶ä»–çš„ä¸€äº›æ„å»ºä»»åŠ¡è®©æ‰“åŒ…æ›´åŠ ä¾¿æ·ï¼Œä¹Ÿå¯ä»¥å«åšwebpackçš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼šè¦ä½¿ç”¨å‹ç¼© JS ä»£ç  ä¹‹å‰æˆ‘ä»¬æ²¡æœ‰é…ç½®å‰æˆ‘ä»¬è¦æ‰‹åŠ¨è¾“å…¥htmlé¡µé¢åˆ°distç›®å½•ç„¶åç”¨chromeè¿è¡Œ æˆ‘ä»¬è€ƒè™‘å¦‚ä½•è®©htmlè‡ªåŠ¨ç”Ÿæˆåˆ°distç›®å½•ä¸‹å‘¢ï¼Ÿ å®‰è£…1yarn add html-webpack-plugin clean-webpack-plugin å®ƒçš„ä½œç”¨æ‰“åŒ…ç»“æŸåè‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠjsè‡ªåŠ¨å¼•å…¥åˆ°htmlæ–‡ä»¶ï¼› 123456789101112131415161718192021const path = require(&quot;path&quot;);const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);module.exports = &#123; entry: &#123; main: &quot;./src/index.js&quot; &#125;, output: &#123; filename: &quot;[name].js&quot;, path: path.resolve(__dirname, &quot;../dist&quot;) &#125;, module: &#123; rules: [...] &#125;, plugins: [ new HtmlWebpackPlugin(&#123; template: &quot;src/index.html&quot; &#125;) ]&#125;; header 1 header 2 template å‚è€ƒsrcç›®å½•ä¸‹htmlæ¨¡æ¿ç”Ÿæˆ å¦‚æœæˆ‘ä»¬è¦æ¯æ¬¡buildå‰æ¸…é™¤distç›®å½•é‚£æˆ‘ä»¬è¿˜å¯ä»¥ 1234567891011const CleanWebpackPlugin = require(&quot;clean-webpack-plugin&quot;);...plugins: [ new HtmlWebpackPlugin(&#123; template: &quot;src/index.html&quot; &#125;), new CleanWebpackPlugin([&quot;dist&quot;], &#123; root: path.resolve(__dirname, &quot;../&quot;) &#125;) ]","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€loaderå®è·µ","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€loaderå®è·µ","date":"2019-06-01T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/06/02/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€loaderå®è·µ/","link":"","permalink":"http://mariogogogo.github.io/2019/06/02/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8Floader%E5%AE%9E%E8%B7%B5/","excerpt":"Webpack æœ¬èº«åªèƒ½å¤„ç† JavaScript æ¨¡å—ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå°±éœ€è¦ä½¿ç”¨ loader è¿›è¡Œè½¬æ¢ã€‚","text":"Webpack æœ¬èº«åªèƒ½å¤„ç† JavaScript æ¨¡å—ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå°±éœ€è¦ä½¿ç”¨ loader è¿›è¡Œè½¬æ¢ã€‚ å¦‚æœæˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®ä¸­åŠ å…¥äº†jpgæ–‡ä»¶12345678import avatar from &#x27;./avatar.jpg&#x27;;var img = new Image();img.src = avatar;var root = document.getElementById(&#x27;root&#x27;);root.append(img);ç„¶åä½¿ç”¨yarn run buildä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ ç¼–è¯‘å¤±è´¥å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½è¯†åˆ«jpgå›¾ç‰‡ï¼› æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸Šloaderäº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ loader ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè§£æå™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹(jsx vue css es6â€¦)è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚ å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ loader æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ module.rules å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ Babel æ¥å¤„ç† .js æ–‡ä»¶ é¦–å…ˆå®‰è£…1npm install file-loader style-loader åŸºç¡€é…ç½®12345678910111213141516171819module: &#123; // ... rules: [ &#123; test: /\\.jsx?/, // åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€ include: [ path.resolve(__dirname, &#x27;src&#x27;) // æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç† ], use: &#x27;babel-loader&#x27;, // æŒ‡å®šä½¿ç”¨çš„ loader &#125;, &#123; test: /\\.jpg$/, use: &#123; loader: &#x27;file-loader&#x27; &#125; &#125; ],&#125; å‚æ•° è¯´æ˜ rules è§„åˆ™ï¼ˆæ•°ç»„ï¼‰ test è¡¨ç¤ºæ–‡ä»¶åç¼€ï¼ˆæ­£åˆ™ï¼‰ include åŒ…å«ï¼ˆæ•°ç»„ï¼‰æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹æ‰å¤„ç† use æŒ‡å®šç”¨ä»€ä¹ˆloaderè§£æå™¨ï¼ˆå¯ä»¥æ•°ç»„ï¼‰ ç°åœ¨æ‰“åŒ…å°±æ²¡æœ‰é—®é¢˜äº† loaderè¿›é˜¶jpg lesså¤„ç†123456789101112131415161718192021222324252627282930313233343536373839404142module: &#123; rules: [&#123; test: /\\.js$/, exclude: /node_modules/, //æ’é™¤æŸä¸ªæ–‡ä»¶ loader: &#x27;babel-loader&#x27;, &#125;, &#123; test: /\\.(jpg|png|gif)$/, use: &#123; loader: &#x27;url-loader&#x27;, options: &#123; name: &#x27;[name]_[hash].[ext]&#x27;, outputPath: &#x27;images/&#x27;, limit: 10240 &#125; &#125; &#125;, &#123; test: /\\.(eot|ttf|svg)$/, use: &#123; loader: &#x27;file-loader&#x27; &#125; &#125;, &#123; test: /\\.less$/, use: [ &#x27;style-loader&#x27;, &#123; loader: &#x27;css-loader&#x27;, options: &#123; importLoaders: 2 &#125; &#125;, &#x27;less-loader&#x27;, &#x27;postcss-loader&#x27; ] &#125;, &#123; test: /\\.css$/, use: [ &#x27;style-loader&#x27;, &#x27;css-loader&#x27;, &#x27;postcss-loader&#x27; ] &#125;]&#125;, å‚æ•° è¯´æ˜ exclude æ’é™¤æŸä¸ªæ–‡ä»¶ importLoaders å¦‚æœå¤šå±‚åµŒå¥—å¼•å…¥lessæˆ–sassæ–‡ä»¶ 1234567//å¦‚æœindex.jsä¸­import less from &#x27;index.less&#x27;;//index.lessimport aa from &#x27;a.less&#x27;å…¶ä»–æ ·å¼ åœ¨importå¼•å…¥çš„lessæ–‡ä»¶ï¼Œåœ¨å¼•å…¥ä¹‹å‰ä¹Ÿé‡æ–°èµ°postcsså’Œless-loader æ ·å¼å†²çªå½“ç”²å’Œä¹™éƒ½å¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œéš¾å…ä¼šç¢°åˆ°ç±»ä¼¼ç»„ä»¶èµ·åŒä¸€ä¸ªåå­—çš„æƒ…å†µï¼Œæ¯”å¦‚åˆ—è¡¨ç»„ä»¶ï¼šlistWarpper,è¿™æ ·æ‰“åŒ…åä¼šæœ‰æ ·å¼å†²çªçš„é—®é¢˜ã€‚é‚£ä¹ˆwebpackå¦‚ä½•è§£å†³å‘¢ï¼Ÿ 12345678910111213141516&#123; test: /\\.scss$/, use: [ &quot;style-loader&quot;, &#123; loader: &quot;css-loader&quot;, options: &#123; importLoaders: 2, modules:true //å¼€å¯cssçš„æ¨¡å—åŒ–æ‰“åŒ… &#125; &#125;, &quot;sass-loader&quot;, &quot;postcss-loader&quot; ] &#125; å½“avatarç”¨style.avataræ¥ä»£æ›¿åï¼Œå†²çªå°±ä¸ä¼šå‘ç”Ÿäº†","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨","slug":"ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨","date":"2019-05-31T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/06/01/ã€ç”±æµ…å…¥æ·±Webpackç³»åˆ—ã€æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨/","link":"","permalink":"http://mariogogogo.github.io/2019/06/01/%E3%80%8E%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1Webpack%E7%B3%BB%E5%88%97%E3%80%8F%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/","excerpt":"ä¹‹å‰çš„å¯¹äºWebpackçŸ¥è¯†éƒ½å¾ˆé›¶æ•£å¸Œæœ›åšä¸€ä¸ªç³»åˆ—æ¢³ç†å·©å›ºä¸‹çŸ¥è¯†æ¡†æ¶ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹å§","text":"ä¹‹å‰çš„å¯¹äºWebpackçŸ¥è¯†éƒ½å¾ˆé›¶æ•£å¸Œæœ›åšä¸€ä¸ªç³»åˆ—æ¢³ç†å·©å›ºä¸‹çŸ¥è¯†æ¡†æ¶ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹å§ webpackæ˜¯ä¸€ä¸ªå‰ç«¯èµ„æºåŠ è½½/æ‰“åŒ…å·¥å…·ã€‚å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œç„¶åå°†è¿™äº›æ¨¡å—æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æºã€‚ å®‰è£…å’Œä½¿ç”¨1234567npm install webpack webpack-cli -g # æˆ–è€…yarn global add webpack webpack-cli# ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†webpack --help ç¡®ä¿ä½ çš„é¡¹ç›®ä¸­æœ‰ package.json æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä½¿ç”¨ yarn init -y æ¥åˆ›å»ºã€‚ 12345678910111213141516//package.json&#123; &quot;name&quot;: &quot;learncodewebpack&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;license&quot;: &quot;MIT&quot;, &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;webpack&quot;, &#125;, &quot;dependencies&quot;: &#123; &quot;webpack&quot;: &quot;^4.34.0&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;webpack-cli&quot;: &quot;^3.3.4&quot; &#125;&#125; ç„¶åæˆ‘ä»¬å†™ä¸ªæœ€ç®€å•çš„webpack.config.jsé…ç½®æ–‡ä»¶ 1234567891011const path = require(&#x27;path&#x27;);module.exports = &#123; entry:&quot;./src/index.js&quot;, output:&#123; filename:&quot;bundle.js&quot;, path:path.resolve(__dirname,&#x27;dist&#x27;) &#125; &#125; è¯´æ˜ä¸‹ï¼š å‚æ•° è¯´æ˜ entry å…¥å£æ–‡ä»¶è·¯å¾„ output Object(æ‰“åŒ…åçš„æ–‡ä»¶åï¼Œæ‰“åŒ…åçš„è·¯å¾„) ä¹‹åæ‰§è¡Œ npm run build æˆ–è€… yarn build å‘½ä»¤ï¼Œä½ å°±ä¼šå‘ç°æ–°å¢äº†ä¸€ä¸ª dist ç›®å½•ï¼Œé‡Œè¾¹å­˜æ”¾çš„æ˜¯ webpack æ„å»ºå¥½çš„bundle.js æ–‡ä»¶ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­å¢åŠ å‚æ•°1234module.exports = &#123; mode:&quot;development&quot;, //å¼€å‘è€…æ¨¡å¼ ä¸ä¼šå‹ç¼©js é»˜è®¤æ˜¯production entry: &#x27;./src/index.js&#x27; &#125; å¢åŠ å¤šä¸ªå…¥å£æ–‡ä»¶1234567module.exports = &#123; entry: &#123; foo: &#x27;./src/page-foo.js&#x27;, bar: &#x27;./src/page-bar.js&#x27;, // ... &#125;&#125; ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…12345678910//å¯ä»¥ç†è§£ä¸ºå¤šä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œwebpack ä¼šè§£æä¸¤ä¸ªæ–‡ä»¶çš„ä¾èµ–åè¿›è¡Œæ‰“åŒ…module.exports = &#123; entry: &#123; main: [ &#x27;./src/foo.js&#x27;, &#x27;./src/bar.js&#x27; ] &#125;&#125; Entryä¸Outputçš„è¿›é˜¶ æˆ‘ä»¬æœ‰éœ€æ±‚æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶éœ€è¦è‡ªå®šä¹‰ æˆ‘ä»¬æœ‰éœ€æ±‚æ‰“åŒ…å‡ºæ¥å¤šä¸ªæ–‡ä»¶main2.js,main2.js 1234567891011entry:&#123; main:&#x27;./src/index.js&#x27;, sub:&#x27;./src/index.js&#x27;&#125;output: &#123; publicPathï¼š&quot;https://cdn.xxx.com&quot; filename: &#x27;[name].js&#x27;, chunkFilename: &#x27;[name].chunk.js&#x27;, path: path.resolve(__dirname, &#x27;../dist&#x27;) &#125; å‚æ•° è¯´æ˜ publicPath è¿™ä¸ªæ˜¯cdnæŒ‚è½½çš„åŸŸåå¯ä»¥è´Ÿè½½å‡è¡¡ filename [name]æ‰€å¯¹åº”çš„å°±æ˜¯entry[key]å€¼ chunkFilename åŒä¸Š","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"å¦‚ä½•åœ¨ReactHooksä¸­è¯·æ±‚æ•°æ®","slug":"ReactHooksä¸­è¯·æ±‚æ•°æ®","date":"2019-05-28T16:00:00.000Z","updated":"2020-09-16T09:07:49.000Z","comments":true,"path":"2019/05/29/ReactHooksä¸­è¯·æ±‚æ•°æ®/","link":"","permalink":"http://mariogogogo.github.io/2019/05/29/ReactHooks%E4%B8%AD%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE/","excerpt":"ä¸€èµ·å­¦ä¹ ReactHooks","text":"ä¸€èµ·å­¦ä¹ ReactHooks å…ˆè¯´ä¸‹é”™è¯¯ä½¿ç”¨123456789101112131415161718192021222324252627282930import React, &#123; useState, useEffect &#125; from &#x27;react&#x27;;import axios from &#x27;axios&#x27;;function App() &#123; //åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³• const [data,setData] = useState(&#123;hits:[]&#125;); useEffect(()=&gt;&#123; async function axiosData() &#123; const response = await axios(&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;); console.log(&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;+response.data) //æ”¹å˜æ•°æ® setData(response.data) // dataï¼š&#123;hits:[xxxx]&#125; &#125; axiosData() &#125;,[]) return ( &lt;ul&gt; &#123;data.hits.map(item =&gt; ( &lt;li key=&#123;item.objectID&#125;&gt; &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; );&#125;export default App; ä½†è¿™æ ·ä¼šæœ‰é—®é¢˜ï¼Œè¯·æ±‚æ¬¡æ•°å¾ªç¯ å› ä¸ºeffect hookä¸ä»…åœ¨ç»„ä»¶æŒ‚è½½æ˜¯æ‰§è¡Œï¼Œåœ¨ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ‰§è¡Œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ¯ä¸€æ¬¡çš„æ•°æ®è·å–åéƒ½ä¼šé‡æ–°è®¾ç½®çŠ¶æ€ï¼Œè¿™æ—¶å€™ç»„ä»¶updateç„¶åeffect hookå°±ä¼šé‡æ–°è¿è¡Œä¸€éï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸€æ¬¡åˆä¸€æ¬¡çš„è·å– æˆ‘ä»¬åªæƒ³åœ¨ç»„ä»¶æŒ‚è½½é˜¶æ®µæ—¶è·å–æ•°æ®ã€‚è¿™å°±æ˜¯ä½ è¦ç»™effect hookçš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„çš„åŸå› ï¼Œè¿™æ ·åšå¯ä»¥é¿å…ç»„ä»¶æ›´æ–°é˜¶æ®µæ‰§è¡Œ effect hook ï¼Œä½†æ˜¯ä¾ç„¶ä¼šåœ¨æŒ‚è½½é˜¶æ®µæ‰§è¡Œå®ƒ 1234567891011121314function App() &#123; //åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³• const [data,setData] = useState(&#123;hits:[]&#125;); useEffect(()=&gt;&#123; async function axiosData() &#123; const response = await axios(&#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;); console.log(&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;+response.data) //æ”¹å˜æ•°æ® setData(response.data) // dataï¼š&#123;hits:[xxxx]&#125; &#125; axiosData() &#125;,[]) ä½†è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥å®šä¹‰hooksæ‰€ä¾èµ–çš„å…¨éƒ¨å˜é‡ï¼ˆå­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼‰ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ”¹å˜äº†ï¼Œeffect hookå°±ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªç©ºæ•°ç»„çš„è¯ï¼Œhookså°†ä¸ä¼šåœ¨ç»„ä»¶æ›´æ–°çš„æ—¶å€™æ‰§è¡Œï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç›‘å¬åˆ°ä»»ä½•çš„å˜é‡ã€‚ å¦‚ä½•è‡ªåŠ¨è§¦å‘ä¸€ä¸ª hookï¼Ÿæˆ‘ä»¬åœ¨ç»„ä»¶æŒ‚è½½åè·å–äº†ä¸€æ¬¡æ•°æ®ã€‚ä½†æ˜¯å¦‚ä½•ä½¿ç”¨è¾“å…¥å­—æ®µå‘Šè¯‰APIæˆ‘ä»¬æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Ÿâ€œReduxâ€åšä¸ºé»˜è®¤æŸ¥è¯¢ã€‚ä½†æ˜¯å¦‚æœæƒ³è¦æŸ¥è¯¢å…³äºâ€œReactâ€çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªinputå…ƒç´ ï¼Œå¯ä»¥è·å¾—â€œReduxâ€ä¹‹å¤–çš„è¯é¢˜ã€‚å› æ­¤ï¼Œå°±è¦ä¸ºinputå…ƒç´ å¼•å…¥ä¸€ä¸ªæ–°çš„stateã€‚ äºŒæ­¥æ“ä½œï¼š1.è¾“å…¥æ¡†è¾“å…¥çš„å€¼åŠ¨æ€æ”¹å˜ä¼ å…¥axiosè¯·æ±‚ä¸­2.å½“ä½ åœ¨inputä¸­è¾“å…¥ä¸€äº›å†…å®¹æ—¶ï¼Œåœ¨æŒ‚è½½åå°±ä¸ä¼šå†è·å–ä»»ä½•æ•°æ®äº†ï¼Œå› ä¸ºæˆ‘ä»¬æä¾›äº†[]ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç°åœ¨çš„effectåº”è¯¥ä¾èµ–queryï¼Œæ¯å½“queryæ”¹å˜çš„æ—¶å€™ï¼Œå°±åº”è¯¥é‡æ–°è·å–æ•°æ®ã€‚ 1234567891011121314151617181920212223function App() &#123; //åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³• const [data,setData] = useState(&#123;hits:[]&#125;); const [query, setQuery] = useState(&#x27;redux&#x27;); useEffect(()=&gt;&#123; async function axiosData() &#123; console.log(query) const response = await axios(`http://hn.algolia.com/api/v1/search?query=$&#123;query&#125;`); console.log(&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;+response.data) setData(response.data) // dataï¼š&#123;hits:[xxxx]&#125; &#125; axiosData() //æ”¹å˜æ•°æ® &#125;,[query]) //html &lt;input type=&quot;text&quot; value=&#123;query&#125; onChange=&#123;event =&gt; setQuery(event.target.value)&#125; /&gt; å¦‚ä½•æ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Ÿç°åœ¨inputçš„å€¼æ”¹å˜å°±ä¼šé‡æ–°è·å–æ•°æ®ã€‚ä½†æ˜¯åˆå‡ºç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ–°å­—ç¬¦ï¼Œå°±ä¼šè§¦å‘ effect è¿›è¡Œä¸€æ¬¡æ–°çš„è¯·æ±‚ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æä¾›ä¸€ä¸ªæŒ‰é’®æ¥æ‰‹åŠ¨è§¦å‘æ•°æ®è¯·æ±‚å‘¢ï¼Ÿ 12345678910111213141516171819202122function App() &#123; //åˆå§‹åŒ–data å’ŒsetDataæ–¹æ³• const [data,setData] = useState(&#123;hits:[]&#125;); const [query, setQuery] = useState(&#x27;redux&#x27;); const [search, setSearch] = useState(&#x27;&#x27;); useEffect(()=&gt;&#123; async function axiosData() &#123; const response = await axios(`http://hn.algolia.com/api/v1/search?query=$&#123;query&#125;`); console.log(&#x27;æ‰§è¡Œæ¬¡æ•°&#x27;+response.data) setData(response.data) // dataï¼š&#123;hits:[xxxx]&#125; &#125; axiosData() console.log(&#x27;search&#x27;,search) //æ”¹å˜æ•°æ® &#125;,[search]) //html &lt;button type=&quot;button&quot; onClick=&#123;() =&gt; setSearch(query)&#125;&gt; Search &lt;/button&gt; React Hooksä¸­çš„loadingä¸€æ—¦è°ƒç”¨äº†effectè·å–äº†æ•°æ®ï¼Œï¼ˆåœ¨ç»„ä»¶æŒ‚è½½é˜¶æ®µæˆ–URLçŠ¶æ€æ›´æ”¹æ—¶å‘ç”Ÿï¼‰ï¼Œåˆ™åŠ è½½çŠ¶æ€è®¾ç½®ä¸ºtrueã€‚è¯·æ±‚å®Œæˆåï¼ŒåŠ è½½çŠ¶æ€å†æ¬¡è®¾ç½®ä¸ºfalseã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import React, &#123; Fragment, useState, useEffect &#125; from &#x27;react&#x27;;import axios from &#x27;axios&#x27;;function App() &#123; const [data, setData] = useState(&#123; hits: [] &#125;); const [query, setQuery] = useState(&#x27;redux&#x27;); const [url, setUrl] = useState( &#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;, ); const [isLoading, setIsLoading] = useState(false); useEffect(() =&gt; &#123; const fetchData = async () =&gt; &#123; //loadingæ˜¾ç¤º setIsLoading(true); const result = await axios(url); setData(result.data); //loaddingéšè— setIsLoading(false); &#125;; fetchData(); &#125;, [url]); return ( &lt;Fragment&gt; &lt;input type=&quot;text&quot; value=&#123;query&#125; onChange=&#123;event =&gt; setQuery(event.target.value)&#125; /&gt; &lt;button type=&quot;button&quot; onClick=&#123;() =&gt; setUrl(`http://hn.algolia.com/api/v1/search?query=$&#123;query&#125;`) &#125; &gt; Search &lt;/button&gt; &#123;isLoading ? ( &lt;div&gt;Loading ...&lt;/div&gt; ) : ( &lt;ul&gt; &#123;data.hits.map(item =&gt; ( &lt;li key=&#123;item.objectID&#125;&gt; &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; )&#125; &lt;/Fragment&gt; );&#125;export default App; React Hooksä¸­çš„é”™è¯¯å¤„ç†ä½¿ç”¨async/awaitæ—¶ï¼Œé€šå¸¸ä½¿ç”¨try/catchå—è¿›è¡Œé”™è¯¯å¤„ç†ã€‚ä½ å¯ä»¥åœ¨effectå†…åšåˆ°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263function App() &#123; const [data, setData] = useState(&#123; hits: [] &#125;); const [query, setQuery] = useState(&#x27;redux&#x27;); const [url, setUrl] = useState( &#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;, ); const [isLoading, setIsLoading] = useState(false); const [isError, setIsError] = useState(false); useEffect(() =&gt; &#123; const fetchData = async () =&gt; &#123; setIsError(false); setIsLoading(true); try &#123; const result = await axios(url); setData(result.data); &#125; catch (error) &#123; setIsError(true); &#125; setIsLoading(false); &#125;; fetchData(); &#125;, [url]); return ( &lt;Fragment&gt; &lt;input type=&quot;text&quot; value=&#123;query&#125; onChange=&#123;event =&gt; setQuery(event.target.value)&#125; /&gt; &lt;button type=&quot;button&quot; onClick=&#123;() =&gt; setUrl(`http://hn.algolia.com/api/v2/search?query=$&#123;query&#125;`) &#125; &gt; Search &lt;/button&gt; &#123;isError &amp;&amp; &lt;div&gt;Something went wrong ...&lt;/div&gt;&#125; &#123;isLoading ? ( &lt;div&gt;Loading ...&lt;/div&gt; ) : ( &lt;ul&gt; &#123;data.hits.map(item =&gt; ( &lt;li key=&#123;item.objectID&#125;&gt; &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; )&#125; &lt;/Fragment&gt; );&#125;export default App; è‡ªå®šä¹‰ hook è·å–æ•°æ®æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„hookï¼Œæå–å‡ºæ‰€æœ‰ä¸æ•°æ®è¯·æ±‚ç›¸å…³çš„ä¸œè¥¿ï¼Œé™¤äº†è¾“å…¥æ¡†çš„ query stateï¼Œä»¥åŠ Loading çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€‚è¿˜è¦ç¡®ä¿è¿”å›ç»„ä»¶ä¸­éœ€è¦ç”¨åˆ°çš„å˜é‡ã€‚ ç†æƒ³ä»£ç 12345678910function App() &#123; const [query, setQuery] = useState(&#x27;redux&#x27;); const &#123; data, isLoading, isError, doFetch &#125; = useHackerNewsApi(); return ( &lt;Fragment&gt; ... &lt;/Fragment&gt; );&#125;å°è£…useHackerNewsApi 1234567891011121314151617181920212223242526272829303132333435const userHackerNewsApi = ()=&gt;&#123; //åˆå§‹åŒ–çŠ¶æ€ const [data, setData] = useState(&#123; hits: [] &#125;); const [url, setUrl] = useState( &#x27;http://hn.algolia.com/api/v1/search?query=redux&#x27;, ); const [isLoading, setIsLoading] = useState(false); const [isError, setIsError] = useState(false); useEffect(()=&gt;&#123; const fetchData = async ()=&gt;&#123; setIsError(false); setIsLoading(true); try &#123; const result = await axios(url); setData(result.data); &#125; catch (error) &#123; setIsError(true); &#125; setIsLoading(false); &#125;; //è°ƒç”¨è¯·æ±‚ fetchData() &#125;,[url]) const doFetch = (url)=&gt;&#123; setUrl(url) &#125; return &#123;data,isLoading,isError,doFetch&#125;&#125; å…³äºæ•°æ®è·å–çš„ Reducer Hookè®©æˆ‘ä»¬ç”¨reduceæŠŠä¸€äº›çŠ¶æ€è°ƒç”¨è¿æ¥èµ·æ¥ä½¿ç”¨ Reducer Hook è¿”å›ä¸€ä¸ª state å¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼ˆç”¨æ¥æ”¹å˜ state å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªå‡½æ•°è¢«ç§°ä¸ºåˆ†å‘å‡½æ•°ï¼ˆdispatch functionï¼‰ï¼Œå®ƒåˆ†å‘ä¸€ä¸ª actionï¼Œaction å…·æœ‰ type å’Œ payload ä¸¤ä¸ªå±æ€§ã€‚æ‰€æœ‰çš„è¿™äº›ä¿¡æ¯éƒ½åœ¨ reducer å‡½æ•°ä¸­è¢«æ¥æ”¶ï¼Œæ ¹æ®ä¹‹å‰çš„çŠ¶æ€æå–ä¸€ä¸ªæ–°çš„çŠ¶æ€ 1234567891011121314151617181920212223242526272829303132333435363738394041424344function App() &#123; const [query, setQuery] = useState(&#x27;redux&#x27;); const [&#123; data, isLoading, isError &#125;, doFetch] = useDataApi( `http://hn.algolia.com/api/v1/search?query=redux`, &#123; hits: [] &#125;, ); return ( &lt;Fragment&gt; &lt;form onSubmit=&#123;event =&gt; &#123; doFetch( `http://hn.algolia.com/api/v1/search?query=$&#123;query&#125;`, ); event.preventDefault(); &#125;&#125; &gt; &lt;input type=&quot;text&quot; value=&#123;query&#125; onChange=&#123;event =&gt; setQuery(event.target.value)&#125; /&gt; &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt; &lt;/form&gt; &#123;isError &amp;&amp; &lt;div&gt;Something went wrong ...&lt;/div&gt;&#125; &#123;isLoading ? ( &lt;div&gt;Loading ...&lt;/div&gt; ) : ( &lt;ul&gt; &#123;data.hits.map(item =&gt; ( &lt;li key=&#123;item.objectID&#125;&gt; &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;/a&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; )&#125; &lt;/Fragment&gt; );&#125;export default App; å¦‚ä½•è®¾è®¡useDataApiç°åœ¨ï¼Œåœ¨è·å–æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ dispatch å‡½æ•°å‘ reducer å‡½æ•°å‘é€ä¿¡æ¯ã€‚ä½¿ç”¨ dispatch å‡½æ•°å‘é€çš„å¯¹è±¡å…·æœ‰ä¸€ä¸ªå¿…å¡«çš„ type å±æ€§å’Œä¸€ä¸ªå¯é€‰çš„ payload å±æ€§ã€‚type å±æ€§å‘Šè¯‰ reducer å‡½æ•°éœ€è¦è½¬æ¢çš„ state æ˜¯å“ªä¸ªï¼Œè¿˜å¯ä»¥ä» payload ä¸­æå–æ–°çš„ stateã€‚åœ¨è¿™é‡Œåªæœ‰ä¸‰ä¸ªçŠ¶æ€è½¬æ¢ï¼šåˆå§‹åŒ–æ•°æ®è¿‡ç¨‹ï¼Œé€šçŸ¥æ•°æ®è¯·æ±‚æˆåŠŸçš„ç»“æœï¼Œä»¥åŠé€šçŸ¥æ•°æ®è¯·æ±‚å¤±è´¥çš„ç»“æœã€‚123456789101112131415161718192021222324252627const useDataApi = (initialUrl,initialData)=&gt;&#123; const [url,setUrl] = useState(initialUrl); const [state,dispatch] = useReducer(dataFetchReducer,&#123; isLoading:false, isError:false, data:initialData, &#125;) useEffect(()=&gt;&#123; const fetchData = async ()=&gt;&#123; dispatch(&#123;type:&quot;FETCH_INIT&quot;&#125;) try&#123; const result = await axios(url); dispatch(&#123;type:&quot;FETCH_SUCCESS&quot;,payload:result.data&#125;) &#125;catch (e) &#123; dispatch(&#123;type:&quot;FETCH_FAILURE&quot;,payload:e&#125;) &#125; &#125; fetchData(); &#125;,[url]) //åªè¿”å›stateä¸­åŒ…å«data isloading / setUrl return [state, setUrl];&#125; reducerå‡½æ•°çš„å®ç°å®ƒéœ€è¦å¤„ç†ä¸‰ä¸ªä¸åŒçš„çŠ¶æ€è½¬æ¢ï¼Œç§°ä¸ºFETCH_INITï¼ŒFETCH_SUCCESSå’ŒFETCH_FAILUREã€‚æ¯ä¸ªçŠ¶æ€è½¬æ¢éƒ½éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡123456789101112131415161718192021const dataFetchReducer = (state, action) =&gt; &#123; switch (action.type) &#123; case &#x27;FETCH_INIT&#x27;: return &#123; ...state, isLoading: true, isError: false &#125;; case &#x27;FETCH_SUCCESS&#x27;: return &#123; ...state, isLoading: false, isError: false, data: action.payload, &#125;; case &#x27;FETCH_FAILURE&#x27;: return &#123; ...state, isLoading: false, isError: true, &#125;; default: throw new Error(); &#125;&#125;; åœ¨ Hook ä¸­ä¸­æ–­æ•°æ®è¯·æ±‚ä¸‹æ¬¡å†æ›´æ–°12345``````javascript å‚è€ƒRobin Wieruch","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—Fiber","slug":"Reactæºç ç³»åˆ—Fiber","date":"2019-05-02T16:00:00.000Z","updated":"2020-09-16T09:07:49.000Z","comments":true,"path":"2019/05/03/Reactæºç ç³»åˆ—Fiber/","link":"","permalink":"http://mariogogogo.github.io/2019/05/03/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97Fiber/","excerpt":"ä»€ä¹ˆæ˜¯fiberæ‰€è°“fiberï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªreactä¸­çš„æ¶æ„ï¼Œä¸€ä¸ª fiber å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªworkå•ä½ï¼Œæ¯ä¸€ä¸ªReactElementéƒ½ä¼šå¯¹åº”ä¸€ä¸ªFiberå¯¹è±¡è®°å½•å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ ï¼ˆprops stateï¼‰é€šè¿‡fiber è®©èŠ‚ç‚¹è·å–å±æ€§å€¼ä¸²è”æ•´ä¸ªåº”ç”¨çš„æ ‘ç»“æ„","text":"ä»€ä¹ˆæ˜¯fiberæ‰€è°“fiberï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªreactä¸­çš„æ¶æ„ï¼Œä¸€ä¸ª fiber å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªworkå•ä½ï¼Œæ¯ä¸€ä¸ªReactElementéƒ½ä¼šå¯¹åº”ä¸€ä¸ªFiberå¯¹è±¡è®°å½•å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ ï¼ˆprops stateï¼‰é€šè¿‡fiber è®©èŠ‚ç‚¹è·å–å±æ€§å€¼ä¸²è”æ•´ä¸ªåº”ç”¨çš„æ ‘ç»“æ„ æœ€è¿‘æ›´æ–°2019å¹´6æœˆ14æ—¥ ä¸15çš„å˜åŒ–ä»15åˆ°16ï¼Œæºç ç»“æ„å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼šå†ä¹Ÿçœ‹ä¸åˆ°mountComponent/updateComponent()äº†ï¼Œè¢«æ‹†åˆ†é‡ç»„æˆäº†ï¼ˆbeginWork/completeWork/commitWork()ï¼‰ReactDOMComponentä¹Ÿè¢«å»æ‰äº†ï¼Œåœ¨Fiberä½“ç³»ä¸‹DOMèŠ‚ç‚¹æŠ½è±¡ç”¨ReactDOMFiberComponentè¡¨ç¤ºï¼Œç»„ä»¶ç”¨ReactFiberClassComponentè¡¨ç¤ºï¼Œä¹‹å‰æ˜¯ReactCompositeComponent Fiberä½“ç³»çš„æ ¸å¿ƒæœºåˆ¶æ˜¯è´Ÿè´£ä»»åŠ¡è°ƒåº¦çš„ReactFiberSchedulerï¼Œç›¸å½“äºä¹‹å‰çš„ReactReconciler vDOM treeå˜æˆfiber treeäº†ï¼Œä»¥å‰æ˜¯è‡ªä¸Šè€Œä¸‹çš„ç®€å•æ ‘ç»“æ„ï¼Œç°åœ¨æ˜¯åŸºäºå•é“¾è¡¨çš„æ ‘ç»“æ„ï¼Œç»´æŠ¤çš„èŠ‚ç‚¹å…³ç³»æ›´å¤šä¸€äº› ç‰¹ç‚¹ä¼˜åŒ–æ¸²æŸ“ä»»åŠ¡ï¼Œè®©ä¸€ä¸ªå¤§ç»„ä»¶ç»†åŒ–ï¼Œä»åŒæ­¥å˜æˆå¼‚æ­¥ï¼Œè®©æ¸²æŸ“ä»»åŠ¡æœ‰äº†ä¼˜å…ˆçº§ã€‚ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒç”¨ä¸å†æ˜¯åŒæ­¥çš„ï¼Œè®©ç”¨æˆ·èƒ½æ„ŸçŸ¥çš„æ€§èƒ½æé«˜äº†ã€‚fiberå¯ä»¥æŠŠå¾ˆå¤§çš„å·¥ä½œåˆ†æˆä¸€ä¸ªä¸ªå°å—ï¼ˆtrunkï¼‰ï¼Œtrunkä¹‹é—´æ˜¯å¼‚æ­¥çš„ï¼Œæ¯ä¸ªtrunkä¹‹é—´å¯ä»¥æ‰§è¡Œåˆ«çš„æ“ä½œã€‚ä»¥renderå‡½æ•°ä¸ºç•Œï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨renderä¹‹å‰æ”¹å˜ workInProgress treeï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¯”å¦‚componentWillMountï¼ŒcomponentWillReceivePropã€‚åœ¨renderå‡½æ•°ä¹‹åï¼Œæ‰§è¡ŒcomponentDidMountï¼Œ componentDidUpdateã€‚åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œå¯èƒ½è¢«ä¸­æ–­ã€‚ fiber treeæ¥å¼ å›¾æ„Ÿå—ä¸€ä¸‹ å‚è€ƒï¼šå®Œå…¨ç†è§£React Fiber","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—_ReactDom.render || hydrate","slug":" Reactæºç ç³»åˆ—_ReactDom.render || hydrate","date":"2019-04-26T16:00:00.000Z","updated":"2019-05-09T14:58:06.000Z","comments":true,"path":"2019/04/27/ Reactæºç ç³»åˆ—_ReactDom.render || hydrate/","link":"","permalink":"http://mariogogogo.github.io/2019/04/27/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactDom.render%20||%20hydrate/","excerpt":"è¿™ä¸€ç« é‡ç‚¹åˆ†æåˆ›å»ºåŠæ›´æ–°çš„è¿‡ç¨‹ï¼›","text":"è¿™ä¸€ç« é‡ç‚¹åˆ†æåˆ›å»ºåŠæ›´æ–°çš„è¿‡ç¨‹ï¼›reactæ›´æ–°çš„æ–¹æ³•ReactDom.render å®¢æˆ·ç«¯hydrate åˆæ¬¡æ¸²æŸ“ æœåŠ¡ç«¯setState ç”¨äºè®¾ç½®çŠ¶æ€å¯¹è±¡forceUpdate å¼ºåˆ¶æ›´æ–°replaceState()æ–¹æ³•ä¸setState()ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•åªä¼šä¿ç•™nextStateä¸­çŠ¶æ€ï¼ŒåŸstateä¸åœ¨nextStateä¸­çš„çŠ¶æ€éƒ½ä¼šè¢«åˆ é™¤ã€‚ï¼ˆå°†åœ¨ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬ä¸­åºŸé™¤ï¼‰ åˆ›å»ºrednerå¯¹è±¡12345678910111213141516ReactDOM = &#123; render( element: React$Element&lt;any&gt;,//èŠ‚ç‚¹å…ƒç´  react.createElementåè¿”å›çš„å¯¹è±¡ container: DOMContainer, //containerå°±æ˜¯æˆ‘ä»¬éœ€è¦æ¸²æŸ“åˆ°çš„å…ƒç´  callback: ?Function,//å›è°ƒ ) &#123; return legacyRenderSubtreeIntoContainer( null, element, container, false, callback, ) &#125;,&#125; è°ƒç”¨æ–¹æ³•legacyRenderSubtreeIntoContainerå‚æ•° ï¼š parentComponent: ?React$Component&lt;any, any&gt;, children: ReactNodeList, container: DOMContainer, forceHydrate: boolean, callback: ?Function, å…¶ä¸­ç¬¬ä¸€æ¬¡åŠ è½½ root == null;1let root: Root = (container._reactRootContainer: any);æ¥ç€çœ‹123456789101112131415161718192021222324252627282930313233343536function legacyRenderSubtreeIntoContainer( parentComponent: ?React$Component&lt;any, any&gt;, children: ReactNodeList, container: DOMContainer, forceHydrate: boolean, callback: ?Function,) &#123; // åˆ›å»ºäº†rootå¯¹è±¡ let root: Root = (container._reactRootContainer: any) if (!root) &#123; // åˆå§‹åŒ–æŒ‚è½½ root = container._reactRootContainer = legacyCreateRootFromDOMContainer( container, forceHydrate, ) //åˆ¤æ–­æ˜¯å¦æœ‰callback if (typeof callback === &#x27;function&#x27;) &#123; const originalCallback = callback callback = function() &#123; const instance = DOMRenderer.getPublicRootInstance(root._internalRoot) originalCallback.call(instance) &#125; &#125; // æ‰¹é‡æ›´æ–°æ“ä½œ DOMRenderer.unbatchedUpdates(() =&gt; &#123; if (parentComponent != null) &#123; // ä¸€èˆ¬ä¸ä¼šå‡ºç° &#125; else &#123; root.render(children, callback) &#125; &#125;) &#125; else &#123; // æœ‰rootçš„æƒ…å†µ &#125; return DOMRenderer.getPublicRootInstance(root._internalRoot)&#125; legacyCreateRootFromDOMContainerrenderä¸hydrateçš„åŒºåˆ«åœ¨äºè¿”å›ç¬¬å››ä¸ªå‚æ•°trueå’Œfalseã€‚æ˜¯å¦ä¼šè°ƒå’ŒåŸæ¥å­˜åœ¨äºcontaineré‡Œé¢çš„htmlèŠ‚ç‚¹ï¼Œæ˜¯å¦è¦å¤ç”¨è¿™äº›èŠ‚ç‚¹ï¼ŒhydrateåŸºæœ¬ç”¨äºæœåŠ¡ç«¯æ¸²æŸ“å› ä¸ºæœåŠ¡ç«¯ç¬¬ä¸€æ¬¡æ¸²æŸ“å’Œå®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡æ¸²æŸ“èŠ‚ç‚¹ç»“æ„åº”è¯¥æ˜¯ä¸€è‡´çš„å¦‚æœå¯ä»¥å¤ç”¨å°±å¯ä»¥èŠ‚çœä¸€å®šçš„æ€§èƒ½123456789101112131415161718192021222324252627hydrate( element: React$Node, container: DOMContainer, callback: ?Function) &#123; // TODO: throw or warn if we couldn&#x27;t hydrate? return legacyRenderSubtreeIntoContainer( null, element, container, true, callback, ); &#125;, render( element: React$Element&lt;any&gt;, container: DOMContainer, callback: ?Function, ) &#123; return legacyRenderSubtreeIntoContainer( null, element, container, false, callback, ); &#125;,shouldHydrateDueToLegacyHeuristicgetReactRootElementInContainer æ–¹æ³•é‡Œåˆ¤æ–­æˆ‘ä»¬çš„èŠ‚ç‚¹ä¸‹æœ‰æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­èŠ‚ç‚¹è°ƒå’ŒåŸæ¥çš„å­èŠ‚ç‚¹ã€‚ 12345678910function shouldHydrateDueToLegacyHeuristic(container) &#123; const rootElement = getReactRootElementInContainer(container); return !!( rootElement &amp;&amp; //åˆ¤æ–­æœ‰è¿™ä¸ªèŠ‚ç‚¹å’Œå±æ€§ rootElement.nodeType === ELEMENT_NODE &amp;&amp; rootElement.hasAttribute(ROOT_ATTRIBUTE_NAME) //æ ‡è¯†æœ‰æœåŠ¡ç«¯æ¸²æŸ“ //åˆå¹¶çš„è¿‡ç¨‹ );&#125; 1234567function legacyCreateRootFromDOMContainer()&#123;... const isConcurrent = false; åˆ›å»ºå®ŒFiberRootåç›´æ¥return return new ReactRoot(container, isConcurrent, shouldHydrate);&#125; åˆ›å»ºFiberRoot12345678910111213141516171819function ReactRoot( container: Container, isConcurrent: boolean, hydrate: boolean,) &#123; //ä¼ å…¥domèŠ‚ç‚¹ åˆ›å»ºFiberRoot const root = DOMRenderer.createContainer(container, isConcurrent, hydrate); //å†è¿›è¡Œèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ this._internalRoot = roo t;&#125;....export function createContainer( containerInfo: Container, isConcurrent: boolean, hydrate: boolean,): OpaqueRoot &#123; return createFiberRoot(containerInfo, isConcurrent, hydrate);&#125; åˆ›å»ºReactRootå¯¹è±¡çœ‹ä¸‹ReactRootä¸­çš„renderæ–¹æ³•12345678910111213141516171819202122232425function ReactRoot( container: Container, isConcurrent: boolean, hydrate: boolean,) &#123; //ä¼ å…¥domèŠ‚ç‚¹ const root = DOMRenderer.createContainer(container, isConcurrent, hydrate); this._internalRoot = root;&#125;ReactRoot.prototype.render = function( children: ReactNodeList, callback: ?() =&gt; mixed,): Work &#123; const root = this._internalRoot; const work = new ReactWork(); callback = callback === undefined ? null : callback; if (__DEV__) &#123; warnOnInvalidCallback(callback, &#x27;render&#x27;); &#125; if (callback !== null) &#123; work.then(callback); &#125; DOMRenderer.updateContainer(children, root, null, work._onCommit); return work;&#125;;è°ƒç”¨updateContainer 123456789101112131415161718export function updateContainer( element: ReactNodeList, container: OpaqueRoot, parentComponent: ?React$Component&lt;any, any&gt;, callback: ?Function,): ExpirationTime &#123; const current = container.current; const currentTime = requestCurrentTime(); //computeExpirationForFiberæ˜¯react16ä¹‹åè®©æˆ‘ä»¬ä½¿ç”¨ä»»åŠ¡æ›´æ–°ä¼˜å…ˆçº§è®¡ç®—æ–¹æ³• const expirationTime = computeExpirationForFiber(currentTime, current); return updateContainerAtExpirationTime( element, //åº”ç”¨å®é™…çš„èŠ‚ç‚¹ App container, //domèŠ‚ç‚¹ å¯¹åº”çš„root parentComponent, // null expirationTime, callback, //work._onCommit );&#125; è°ƒç”¨updateContainerAtExpirationTime 12345678910111213141516171819202122232425262728293031export function updateContainerAtExpirationTime( element: ReactNodeList, container: OpaqueRoot, parentComponent: ?React$Component&lt;any, any&gt;, expirationTime: ExpirationTime, callback: ?Function,) &#123; // TODO: If this is a nested container, this won&#x27;t be the root. const current = container.current; if (__DEV__) &#123; if (ReactFiberInstrumentation.debugTool) &#123; if (current.alternate === null) &#123; ReactFiberInstrumentation.debugTool.onMountContainer(container); &#125; else if (element === null) &#123; ReactFiberInstrumentation.debugTool.onUnmountContainer(container); &#125; else &#123; ReactFiberInstrumentation.debugTool.onUpdateContainer(container); &#125; &#125; //=========æš‚æ—¶ä¸ç®¡ï¼ˆcontext== nullï¼‰======== const context = getContextForSubtree(parentComponent); if (container.context === null) &#123; container.context = context; &#125; else &#123; container.pendingContext = context; &#125; //=========åˆ›å»ºæ›´æ–°======== return scheduleRootUpdate(current, element, expirationTime, callback); &#125; å¼€å§‹è°ƒåº¦é¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ªupdateï¼Œä¸ç®¡ä½ æ˜¯setStateè¿˜æ˜¯ReactDOM.renderé€ æˆçš„ React æ›´æ–°ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå«updateçš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šèµ‹å€¼ç»™Fiber.updateQueue åˆ›å»ºæ›´æ–°12345678910111213141516171819202122232425262728function scheduleRootUpdate( current: Fiber, element: ReactNodeList, expirationTime: ExpirationTime, callback: ?Function,) &#123; //åˆ›å»ºupdate const update = createUpdate(expirationTime) update.payload = &#123; element &#125; callback = callback === undefined ? null : callback if (callback !== null) &#123; warningWithoutStack( typeof callback === &#x27;function&#x27;, &#x27;render(...): Expected the last optional `callback` argument to be a &#x27; + &#x27;function. Instead received: %s.&#x27;, callback, ) update.callback = callback &#125; //updateåŠ å…¥åˆ°fiberå¯¹è±¡ä¸Šé¢å¯¹åº”çš„updateenqueueé‡Œé¢ //å› ä¸ºupdateå¯ä»¥æ˜¯æŸä¸€ä¸ªèŠ‚ç‚¹ä¸Šäº§ç”Ÿå¤šæ¬¡æ›´æ–° enqueueUpdate(current, update) //å‘Šè¯‰reactä»»åŠ¡å¼€å§‹è°ƒåº¦ æ›´æ–°äº§ç”Ÿäº† ä¼˜å…ˆçº§æ¦‚å¿µäº§ç”Ÿéœ€è¦åˆ†é…ä¼˜å…ˆçº§ä»»åŠ¡ scheduleWork(current, expirationTime) return expirationTime //è¿™æ¬¡æ›´æ–°çš„ è¶…æ—¶æ—¶é—´ã€‚&#125; æ¥ç€ä¼šæ‰§è¡ŒenqueueUpdateå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®å¤§æ¦‚çš„æ„æ€å°±æ˜¯å°†æ–°å»ºçš„updateå¯¹è±¡å’Œå½“å‰çš„FiberNodeå¯¹è±¡ä¼ å…¥ï¼Œç„¶åä¸ºcurrent$$1è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†updateQueueå¯¹è±¡ï¼Œé‡Œé¢ä¿å­˜ç€ç›¸å…³çš„ä¸€äº›ä»»åŠ¡ã€‚ ç„¶åå°±æ˜¯è°ƒç”¨scheduleWorkã€‚æ³¨æ„åˆ°è¿™é‡Œä¹‹å‰setStateå’ŒReactDOM.renderæ˜¯ä¸ä¸€æ ·ï¼Œä½†è¿›å…¥schedulerWorkä¹‹åï¼Œå°±æ˜¯ä»»åŠ¡è°ƒåº¦çš„äº‹æƒ…äº†ï¼Œè·Ÿä¹‹å‰ä½ æ˜¯æ€ä¹ˆè°ƒç”¨çš„æ²¡æœ‰ä»»ä½•å…³ç³» å°ç»“ é¦–å…ˆæˆ‘ä»¬è¦é€šè¿‡React.createElementå‡½æ•°æ¥å°†æˆ‘ä»¬å®šä¹‰å¥½çš„ç»„ä»¶è¿›è¡Œè½¬æ¢ä¸ºReactå…ƒç´  å°†åˆ›å»ºå¥½çš„Reactå…ƒç´ é€šè¿‡è°ƒç”¨ReactDom.renderæ¥è¿›è¡Œæ¸²æŸ“ ReactDom.renderè°ƒç”¨åå…ˆåˆ›å»ºæ ¹å¯¹è±¡rootï¼Œç„¶åè°ƒç”¨root.render ç„¶åç»è¿‡è‹¥å¹²å‡½æ•°è°ƒç”¨ï¼Œæ¥åˆ°workLoopå‡½æ•°ï¼Œå®ƒå°†éå†è™šæ‹ŸDOMæ ‘ï¼Œå°†ä¸‹ä¸€ä¸ªéœ€è¦å¤„ç†çš„è™šæ‹ŸDOMä¼ ç»™performUnitOfWorkï¼ŒperformUnitOfWorkå†å°†è™šæ‹ŸDOMä¼ ç»™beginWorkåï¼ŒbeginWorkæ ¹æ®è™šæ‹ŸDOMçš„ç±»å‹ä¸åŒè¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¹¶å¯¹å„¿å­è¿›è¡Œå¤„ç†ä¸ºFiberç±»å‹ï¼Œä¸ºFiberç±»å‹è™šæ‹ŸDOMæ·»åŠ çˆ¶èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ç­‰å¾…ç»†èŠ‚ï¼Œå·²æ–¹ä¾¿éå†æ ‘ã€‚ beginWorkå¤„ç†å®Œåè¿”å›éœ€è¦å¤„ç†çš„å­å…ƒç´ å†ç»§ç»­å¤„ç†ï¼Œç›´åˆ°æ²¡æœ‰å­å…ƒç´ ï¼ˆå³è¿”å›nullï¼‰ï¼Œæ­¤æ—¶performUnitOfWorkè°ƒç”¨completeUnitOfWorkå¤„ç†è¿™é¢—è™šæ‹ŸDOMå­æ ‘ï¼Œå°†å…¶è½¬æ¢ä¸ºçœŸå®DOMã€‚ æœ€åæ‰€æœ‰çš„è™šæ‹ŸDOMéƒ½å°†è½¬ä¸ºçœŸå®DOMã€‚ æ³¨æ„ï¼šå­ç»„ä»¶å†…ä¿®æ”¹propsæ˜¯æ²¡æœ‰æ•ˆæœçš„?_storeä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡validated(å¯å†™å…¥)ï¼Œelementå¯¹è±¡ä¸­æ·»åŠ äº†_selfå’Œ_sourceå±æ€§ï¼ˆåªè¯»ï¼‰ï¼Œæœ€åå†»ç»“äº†element.propså’Œelementã€‚ FiberRootç¤ºæ„å›¾","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—_createRef ä¸refè¿˜æœ‰forwardRef","slug":" Reactæºç ç³»åˆ—_createRef ä¸refè¿˜æœ‰forwardRef","date":"2019-04-25T16:00:00.000Z","updated":"2020-09-16T09:06:50.000Z","comments":true,"path":"2019/04/26/ Reactæºç ç³»åˆ—_createRef ä¸refè¿˜æœ‰forwardRef/","link":"","permalink":"http://mariogogogo.github.io/2019/04/26/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_createRef%20%E4%B8%8Eref%E8%BF%98%E6%9C%89forwardRef/","excerpt":"è¿™æ˜¯æœ€è¿‘å¢åŠ çš„ä¸€ç§æ–¹æ¡ˆã€‚Refs æ˜¯ä½¿ç”¨ React.createRef() æ–¹æ³•åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§æ·»åŠ åˆ° React å…ƒç´ ä¸Šã€‚ä¸ºäº†åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨refsï¼Œåªéœ€å°† ref åˆ†é…ç»™æ„é€ å‡½æ•°ä¸­çš„å®ä¾‹å±æ€§ã€‚","text":"è¿™æ˜¯æœ€è¿‘å¢åŠ çš„ä¸€ç§æ–¹æ¡ˆã€‚Refs æ˜¯ä½¿ç”¨ React.createRef() æ–¹æ³•åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§æ·»åŠ åˆ° React å…ƒç´ ä¸Šã€‚ä¸ºäº†åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨refsï¼Œåªéœ€å°† ref åˆ†é…ç»™æ„é€ å‡½æ•°ä¸­çš„å®ä¾‹å±æ€§ã€‚ 123456789class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.myRef = React.createRef() &#125; render() &#123; return &lt;div ref=&#123;this.myRef&#125; /&gt; &#125;&#125; ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ref å›è°ƒå‡½æ•°çš„æ–¹æ¡ˆï¼Œè€Œä¸ç”¨è€ƒè™‘ React ç‰ˆæœ¬ 123456789101112131415161718192021222324class SearchBar extends Component &#123; constructor(props) &#123; super(props); this.txtSearch = null; this.state = &#123; term: &#x27;&#x27; &#125;; this.setInputSearchRef = e =&gt; &#123; this.txtSearch = e; &#125; &#125; onInputChange(event) &#123; this.setState(&#123; term: this.txtSearch.value &#125;); &#125; render() &#123; return ( &lt;input value=&#123;this.state.term&#125; onChange=&#123;this.onInputChange.bind(this)&#125; ref=&#123;this.setInputSearchRef&#125; /&gt; ); &#125;&#125; è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯å†react16ä¹‹å‰ç”¨çš„æœ€å¤šçš„ä¸€ç§æ–¹æ³•ä½†æ˜¯å†ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬ä¸­å°†è¢«åºŸå¼ƒçš„ä¸€ç§æ–¹æ³• 1&lt;p ref=&quot;strRef&quot;&gt;è·å–ref&lt;p&gt; æºç ä¸­å¦‚ä½•å®ç° 123456export function createRef(): RefObject &#123; const refObject = &#123; current: null, &#125;; return refObject;&#125; ä½ æ²¡çœ‹é”™ï¼react.jsä¸­ä»£ç å°±åªæœ‰è¿™ä¹ˆä¸€ç‚¹ï¼Œä½†åæœŸå¦‚ä½•ä½¿ç”¨è¿™ä¸ªrefObjectæˆ‘ä»¬åœ¨åé¢è®²reactå¦‚ä½•æ¸²æŸ“è¿‡ç¨‹ä¸­å†è®²è§£è¿™ä¸ªæ­¥éª¤ã€‚ ä»€ä¹ˆæ˜¯ forward refs? Ref forwarding æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸ä¸€äº›ç»„ä»¶è·å–æ¥æ”¶åˆ° ref å¯¹è±¡å¹¶å°†å®ƒè¿›ä¸€æ­¥ä¼ é€’ç»™å­ç»„ä»¶ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹refå¯ä»¥è·å–classç»„ä»¶çš„å®ä¾‹ï¼Œè·å–ä¸åˆ°function ç»„ä»¶çš„å®ä¾‹æ¯”å¦‚è¿™æ ·1const Comp = ï¼ˆprops,ref)=&gt; &lt;input type=&quot;text&quot; ref=&#123;ref&#125;/&gt;è¿™ä¸ªä¹Ÿå¯ä»¥çœ‹åšPurComponentæ²¡æœ‰å®ä¾‹æ²¡æœ‰thisæ˜¯è·å–ä¸åˆ°refçš„ä½†æ˜¯ç¬¬ä¸‰æ–¹ç»„ä»¶å°è£…è¿‡ï¼Œè®©å…¶ä»–ç”¨æˆ·ä½¿ç”¨çš„æ—¶å€™ç”¨æˆ·ä¸ç¡®å®šä½ æ˜¯å¦æ˜¯PurComponentç»„ä»¶å¦‚æœä½¿ç”¨refå°±è·å–ä¸åˆ°ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±è¦ä½¿ç”¨forwardRef123456789const ButtonElement = React.forwardRef((props, ref) =&gt; ( &lt;button ref=&#123;ref&#125; className=&quot;CustomButton&quot;&gt; &#123;props.children&#125; &lt;/button&gt;));// Create ref to the DOM button:const ref = React.createRef();&lt;ButtonElement ref=&#123;ref&#125;&gt;&#123;&#x27;Forward Ref&#x27;&#125;&lt;/ButtonElement&gt; ç„¶åæˆ‘ä»¬çœ‹ä¸‹forwardRefçš„æºç ï¼š 123456789export default function forwardRef( render: (props: Props, ref: React$Ref&lt;ElementType&gt;) =&gt; React$Node,) &#123; //...å¿½ç•¥_DEV_... return &#123; $$typeof: REACT_FORWARD_REF_TYPE, render, //æŒ‡çš„å°±æ˜¯ä¼ è¿›æ¥çš„ function-Component &#125;;&#125; è¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡é‡Œçš„$$typeofä¸ReactElementä¸­è¿”å›çš„$$typeofä¸èƒ½æ··æ·†ã€‚ 123456&#123; $$typeof:xxx, props:&#123; $$typeof:xxx, &#125;&#125;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—_Componentåšäº†ä»€ä¹ˆ","slug":" Reactæºç ç³»åˆ—_Componentåšäº†ä»€ä¹ˆ","date":"2019-04-24T16:00:00.000Z","updated":"2021-02-13T13:24:23.000Z","comments":true,"path":"2019/04/25/ Reactæºç ç³»åˆ—_Componentåšäº†ä»€ä¹ˆ/","link":"","permalink":"http://mariogogogo.github.io/2019/04/25/%20React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_Component%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88/","excerpt":"æœ‰ä¸¤ç§å¯è¡Œçš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼š Function Components: è¿™æ˜¯åˆ›å»ºç»„ä»¶æœ€ç®€å•çš„æ–¹å¼ã€‚è¿™äº›æ˜¯çº¯ JavaScript å‡½æ•°ï¼Œæ¥å— props å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å› React å…ƒç´  Class Components: ä½ è¿˜å¯ä»¥ä½¿ç”¨ ES6 ç±»æ¥å®šä¹‰ç»„ä»¶","text":"æœ‰ä¸¤ç§å¯è¡Œçš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼š Function Components: è¿™æ˜¯åˆ›å»ºç»„ä»¶æœ€ç®€å•çš„æ–¹å¼ã€‚è¿™äº›æ˜¯çº¯ JavaScript å‡½æ•°ï¼Œæ¥å— props å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å› React å…ƒç´  Class Components: ä½ è¿˜å¯ä»¥ä½¿ç”¨ ES6 ç±»æ¥å®šä¹‰ç»„ä»¶ 12345678function Component(props, context, updater) &#123; this.props = props; this.context = context; this.refs = emptyObject; this.updater = updater || ReactNoopUpdateQueue;&#125; propscontextrefs æƒ³è¦è·å–çš„èŠ‚ç‚¹çš„å®ä¾‹æŒ‚è½½åˆ°refsä¸Šé¢ ç„¶åå†componentåŸå‹ä¸Šæœ‰ä¸€ä¸ªæ–¹æ³•setState123456789101112Component.prototype.setState = function(partialState, callback) &#123; //åˆ¤æ–­ç±»å‹æ˜¯å¦objectæˆ–è€…functionæˆ–è€…null invariant( typeof partialState === &#x27;object&#x27; || typeof partialState === &#x27;function&#x27; || partialState == null, &#x27;setState(...): takes an object of state variables to update or a &#x27; + &#x27;function which returns an object of state variables.&#x27;, ); //å½“updaterä¼ å…¥åæ‰§è¡ŒenqueueSetStateçš„æ–¹æ³•ï¼ˆåé¢ä¼šè®²ï¼‰ this.updater.enqueueSetState(this, partialState, callback, &#x27;setState&#x27;);&#125;;è¿™ä¸ªAPIå¼ºåˆ¶æˆ‘ä»¬çš„reactæ›´æ–°ï¼Œæ—¢æ˜¯stateæ²¡æœ‰æ”¹å˜123Component.prototype.forceUpdate = function(callback) &#123; this.updater.enqueueForceUpdate(this, callback, &#x27;forceUpdate&#x27;);&#125;; å¦ä¸€ä¸ªé‡ç‚¹ PureComponentReact.PureComponent ä¸ React.Component å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å®ƒä¸ºä½ å¤„ç†äº† shouldComponentUpdate() æ–¹æ³•ã€‚å½“å±æ€§æˆ–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒPureComponent å°†å¯¹å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæµ…æ¯”è¾ƒã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€èˆ¬çš„ç»„ä»¶ä¸ä¼šå°†å½“å‰çš„å±æ€§å’ŒçŠ¶æ€ä¸æ–°çš„å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å½“è°ƒç”¨ shouldComponentUpdate æ—¶ï¼Œé»˜è®¤è¿”å› trueï¼Œæ‰€ä»¥ç»„ä»¶éƒ½å°†é‡æ–°æ¸²æŸ“ã€‚æºç ä¸­æ˜¯å¦‚ä½•åšåˆ°çš„ï¼š123456789101112131415161718function ComponentDummy() &#123;&#125;ComponentDummy.prototype = Component.prototype;function PureComponent(props, context, updater) &#123; this.props = props; this.context = context; this.refs = emptyObject; this.updater = updater || ReactNoopUpdateQueue;&#125;const pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());pureComponentPrototype.constructor = PureComponent;Object.assign(pureComponentPrototype, Component.prototype);pureComponentPrototype.isPureReactComponent = true;export &#123;Component, PureComponent&#125;;æˆ‘ä»¬å¯ä»¥è®¤ä¸ºä»–æ˜¯ç»§æ‰¿Component é€šè¿‡new å®ç°äº†ä¸€ä¸ªComponentDummyç©ºçš„ç±»è®©Componentçš„åŸå‹å¯¹è±¡èµ‹å€¼ç»™ComponentDummyçš„åŸå‹å¯¹è±¡pureComponentPrototype.constructoræŒ‡å‘è‡ªå·±Component.prototypeä¸Šçš„å±æ€§æ‹·è´åˆ°pureComponentPrototypeä¸Š å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯isPureReactComponenté€šè¿‡ä¸€ä¸ªæ ‡è¯†è®©ç»§æ‰¿è‡ªè¿™ä¸ªç±»çš„ç»„ä»¶æ˜¯ä¸æ˜¯PureComponentã€‚ç„¶ååˆ¤æ–­propsæ˜¯å¦æ›´æ–°å†åˆ¤æ–­ç»„ä»¶æ˜¯å¦æ›´æ–°ã€‚ è¿™ä¸ªæ–¹æ³•ä¸­æ²¡æœ‰æ¶‰åŠåˆ°ç”Ÿå‘½å‘¨æœŸ å’Œ render ï¼Œè¿™æ˜¯å‡ºä¹æ„æ–™çš„","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"å¦‚ä½•åˆç†å¸ƒç½®React/Reduxçš„ç›®å½•ç»“æ„","slug":"React-Reduxå¦‚ä½•åˆç†å¸ƒç½®ç›®å½•ç»“æ„","date":"2019-04-24T16:00:00.000Z","updated":"2020-09-16T09:07:45.000Z","comments":true,"path":"2019/04/25/React-Reduxå¦‚ä½•åˆç†å¸ƒç½®ç›®å½•ç»“æ„/","link":"","permalink":"http://mariogogogo.github.io/2019/04/25/React-Redux%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E5%B8%83%E7%BD%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/","excerpt":"é¡¹ç›®çš„ç»“æ„æ”¹è¿‡å¾ˆå¤šæ¬¡ï¼Œæ¯æ¬¡æ ¹æ®éœ€æ±‚çš„å¤æ‚åº¦æ…¢æ…¢çš„ä¿®æ”¹ï¼Œæ ¹æ®å·¥ä½œä¸­çš„ç»éªŒæ€»ç»“ä¸‹å‡ ç§ç»“æ„çš„ç‰¹ç‚¹ã€‚","text":"é¡¹ç›®çš„ç»“æ„æ”¹è¿‡å¾ˆå¤šæ¬¡ï¼Œæ¯æ¬¡æ ¹æ®éœ€æ±‚çš„å¤æ‚åº¦æ…¢æ…¢çš„ä¿®æ”¹ï¼Œæ ¹æ®å·¥ä½œä¸­çš„ç»éªŒæ€»ç»“ä¸‹å‡ ç§ç»“æ„çš„ç‰¹ç‚¹ã€‚ æŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†ä¸æ˜¯å¾ˆå¤æ‚çš„é¡¹ç›®å¯ä»¥è¿™æ ·è§„åˆ’ã€‚ 123456789101112|â€”â€” actions |â€”â€” CommandActions.jsx â””â”€â”€ newAction.jsx &lt;- here|â€”â€” components |â€”â€” Command.jsx â””â”€â”€ newComponent.jsx &lt;- here|â€”â€” containers |â€”â€” Command.jsx â””â”€â”€ newContainers.jsx &lt;- hereâ””â”€â”€ reducers |â€”â€” command.jsx â””â”€â”€ newReducers.jsx &lt;- here ä¼˜ç‚¹ï¼šé¡¹ç›®ç®€å•ç»“æ„æ¸…æ™°ï¼Œactionsï¼Œreducersï¼Œcontainersä¸­æ”¾ç€æ¯ä¸ªæ¨¡å—çš„å¯¹åº”çš„ç»“æ„æ–‡ä»¶ã€‚ç¼ºç‚¹ï¼šå½“ä½ æ·»åŠ ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ä½ å°±éœ€è¦åœ¨3ä¸ªç›®å½•ä¸‹æ“ä½œï¼Œä»¥åŠè·¨æ–‡ä»¶çš„ç®¡ç†å¯¹åº”çš„æ–‡ä»¶ï¼Œæœ‰ç‚¹ä¸æ–¹ä¾¿ã€‚ æŒ‰ç…§ç»„ä»¶åˆ’åˆ†ä¸€ä¸ªç»„ä»¶åŒ…å«è‡ªèº«actionï¼Œreducersï¼Œstyleç­‰ç›¸å…³çš„æ–‡ä»¶ï¼Œè¿™æ ·åœ¨ä¿®æ”¹æŸäº›æ–‡ä»¶çš„æ—¶å€™å°±éå¸¸çš„å®¹æ˜“ã€‚å¯¹äºé¡¹ç›®ä¸å­˜åœ¨å¾ˆå¤æ‚çš„å¼‚æ­¥é€»è¾‘ç­‰å¯ä»¥å‚è€ƒè¿™æ ·çš„ç»“æ„ã€‚ 1234567891011121314|â€”â€” app |â€”â€” App.jsx |â€”â€” reducers.jsx |â€”â€” routes.jsx|â€”â€” home |â€”â€” index.jsx |â€”â€” Home.jsx |â€”â€” HomeActions.jsx â””â”€â”€ HomeReducer.jsx|â€”â€” product |â€”â€” index.jsx |â€”â€” ProductList.jsx |â€”â€” ProductActions.jsx â””â”€â”€ ProductReducer.jsx ç¼ºç‚¹ï¼šå¤§å‹é¡¹ç›®ä¸­å¦‚æœå­˜åœ¨å¤§é‡å¤ç”¨æ¨¡å—å¤„ç†èµ·æ¥éå¸¸éº»çƒ¦ å¤§å‹é¡¹ç›®çš„ç»„ç»‡1234567891011121314|â€”â€”app |â€”â€” component # è¿™é‡Œæ”¾çš„éƒ½æ˜¯å…¬å…±éƒ¨åˆ†çš„ç»„ä»¶ |â€”â€” Header # ä½¿ç”¨ styled-components æ¥å®šä¹‰åŸºç¡€ç»„ä»¶ â””â”€â”€ Fotter |â€”â€” containers # é¡µé¢å®¹å™¨ |â€”â€” HomePage |â€”â€” ... |â€”â€” index.js # ç»„ç»‡é¡µé¢çš„ç»“æ„, ç§æœ‰æ¨¡å—å’Œå…¬å…±æ¨¡å—æ„æˆ |â€”â€” reducer.js # Homeä¸‹çš„reduceré€»è¾‘ |â€”â€” component # ç§æœ‰æ¨¡å— |â€”â€” sagas.js # Homeä¸‹çš„å¼‚æ­¥æ•°æ® |â€”â€” action.js |â€”â€” ... â””â”€â”€ reducers.js # reducer componentä¸‹é¢åŒ…æ‹¬äº†å¤§é‡çš„é€šç”¨ç»„ä»¶ï¼Œä¸ç®¡æ˜¯é¡¹ç›®çš„å¹³å°ç§»æ¤ï¼Œæ¨¡å—å¤ç”¨éƒ½å¾ˆå¥½ç®¡ç†ã€‚containersä¸‹å¦‚HomePage/index.jsæœ‰å¤ç”¨çš„æ¨¡å—ä»¥åŠé¡µé¢åœºæ™¯ä¸‹ç‰¹æ®Šçš„æ¨¡å—æ„æˆï¼Œ åŒæ—¶index.jsè¿˜è´Ÿè´£æ¨¡å—è·Ÿredux storeæ•°æ®çš„é“¾æ¥ï¼Œå¯¹åº”çš„æ¯ä¸ªåœºæ™¯éƒ½æ‹¥æœ‰è‡ªèº«sagaï¼Œreducerç­‰ã€‚æ„å»ºå¤§å‹çš„é¡¹ç›®ç»“æ„å‚è€ƒè¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æ£’çš„ æœ€åä»‹ç»ä¸‹react-starter-kitè¿™ä¸ªé¡¹ç›®çš„ç»“æ„ä½¿ç”¨çš„æ˜¯ fractal(ä¸è§„åˆ™ç¢ç‰‡å½¢ï¼šé€‚åˆå¤§å‹é¡¹ç›®)*ï¼Œæ–¹æ³•çš„åˆ†ç»„ä¸»è¦æ˜¯ä¾ç…§ç‰¹æ€§è€Œä¸æ˜¯æ–‡ä»¶ç±»å‹ã€‚æ³¨æ„ï¼Œè¿™ä¸ªç›®å½•ç»“æ„åªæ˜¯ä¸€ä¸ªæŒ‡å¼•ï¼Œå¹¶ä¸ä¸€å®šè¦æŒ‰è¿™ä¸ªæ¥ã€‚è¿™ç§ç»“æ„è°åœ¨è®©ç¨‹åºæ›´å®¹æ˜“æ‰©å±• 123456789101112131415161718â”œâ”€â”€ src # ç¨‹åºæºæ–‡ä»¶â”‚ â”œâ”€â”€ main.js # ç¨‹åºå¯åŠ¨å’Œæ¸²æŸ“â”‚ â”œâ”€â”€ components # å…¨å±€å¯å¤ç”¨çš„è¡¨ç°ç»„ä»¶(Presentational Components)â”‚ â”œâ”€â”€ containers # å…¨å±€å¯å¤ç”¨çš„å®¹å™¨ç»„ä»¶â”‚ â”œâ”€â”€ layouts # ä¸»é¡µç»“æ„â”‚ â”œâ”€â”€ store # ReduxæŒ‡å®šå—â”‚ â”‚ â”œâ”€â”€ createStore.js # åˆ›å»ºå’Œä½¿ç”¨redux storeâ”‚ â”‚ â””â”€â”€ reducers.js # Reduceræ³¨å†Œå’Œæ³¨å…¥â”‚ â””â”€â”€ routes # ä¸»è·¯ç”±å’Œå¼‚æ­¥åˆ†å‰²ç‚¹â”‚ â”œâ”€â”€ index.js # ç”¨storeå¯åŠ¨ä¸»ç¨‹åºè·¯ç”±â”‚ â”œâ”€â”€ Root.js # ä¸ºä¸Šä¸‹æ–‡providersåŒ…ä½ç»„ä»¶â”‚ â””â”€â”€ Home # ä¸è§„åˆ™è·¯ç”±â”‚ â”œâ”€â”€ index.js # è·¯ç”±å®šä¹‰å’Œä»£ç å¼‚æ­¥åˆ†å‰²â”‚ â”œâ”€â”€ assets # ç»„ä»¶å¼•å…¥çš„é™æ€èµ„æºâ”‚ â”œâ”€â”€ components # ç›´è§‚Reactç»„ä»¶â”‚ â”œâ”€â”€ container # è¿æ¥actionså’Œstoreâ”‚ â”œâ”€â”€ modules # reducers/constants/actionsçš„é›†åˆâ”‚ â””â”€â”€ routes ** # ä¸è§„åˆ™å­è·¯ç”±(** å¯é€‰æ‹©çš„) routes ä½œä¸ºä¸»å…¥å£ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰è·¯ç”±å¯¹åº”çš„ç»„ä»¶ï¼Œassets, moduleså…¨éƒ¨éƒ½é›†ä¸­åœ¨äº†ä¸€èµ·,æ›´åƒmvcçš„å‘½åç»„ç»‡ã€‚reducerã€actionæ•´åˆä¸ºmodulesï¼Œ componentsä½œä¸ºviewï¼Œcontainerè¿æ¥actionså’Œstoreã€‚ 12345678910111213export const createRoutes = (store) =&gt; (&#123; path: &#x27;/&#x27;, component: CoreLayout, indexRoute: Home, childRoutes: [ CounterRoute(store), ZenRoute(store), ElapseRoute(store), RouteRoute(store), PageNotFound(), Redirect ]&#125;) ä¸€ä¸ªCounteræ¨¡å—åŒ…å«å¦‚ä¸‹ï¼š 12345Counter/ components/ # é¡µé¢çš„ç»„ä»¶ containers/ # view å’Œ modules æ•°æ®å¯¹æ¥ modules/ # åŒ…å«å¯¹åº”çš„ reducer, action index.js # é¡µé¢å…¥å£ï¼Œå®šä¹‰path index.js è‡ªåŠ¨çš„æ³¨å…¥reducer åˆ°storeï¼Œè¿™æ ·åœ¨é¡¶å±‚çš„storeå°±æ— éœ€è¦æ‰‹åŠ¨å»æ•´åˆæ¯ä¸ªæ¨¡å—è‡ªèº«çš„reducerã€‚ä»£ç å¦‚ä¸‹ï¼š 1234// å¯¼å…¥å¯¹åº”çš„redicerconst reducer = require(&#x27;./modules/counter&#x27;).default /* Add the reducer to the store on key &#x27;counter&#x27; */injectReducer(store, &#123; key: &#x27;counter&#x27;, reducer &#125;) å½“ç„¶é¡¹ç›®ç»“æ„è¿˜æ˜¯è¦æ ¹æ®ä¸ªäººæˆ–è€…é¡¹ç›®éœ€æ±‚è€Œå®šï¼Œä»¥ä¸Šæ–¹æ¡ˆåªåšå‚è€ƒã€‚è°¢è°¢ï¼ å‚è€ƒæ˜é‡‘Reudxå®˜ç½‘","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—_ReactElement","slug":"Reactæºç ç³»åˆ—_ReactElement","date":"2019-04-24T16:00:00.000Z","updated":"2020-09-16T09:07:48.000Z","comments":true,"path":"2019/04/25/Reactæºç ç³»åˆ—_ReactElement/","link":"","permalink":"http://mariogogogo.github.io/2019/04/25/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_ReactElement/","excerpt":"ä¸Šä¸€èŠ‚æˆ‘ä»¬çœ‹åˆ°äº†jsxè½¬ä¹‰åˆ°javascriptçš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ReactElementæ–¹æ³•ç°åœ¨æˆ‘ä»¬å°±æ¥æ¢ç´¢ä¸‹ReactElementåšäº†å†™ä»€ä¹ˆ","text":"ä¸Šä¸€èŠ‚æˆ‘ä»¬çœ‹åˆ°äº†jsxè½¬ä¹‰åˆ°javascriptçš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ReactElementæ–¹æ³•ç°åœ¨æˆ‘ä»¬å°±æ¥æ¢ç´¢ä¸‹ReactElementåšäº†å†™ä»€ä¹ˆ é¦–å…ˆçœ‹ä¸‹å®ƒçš„ä»£ç å¼•ç”¨123456 import &#123; createElement, createFactory, cloneElement, isValidElement,&#125; from &#x27;./ReactElement&#x27;; ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹createElementæ–¹æ³•å¦‚ä½•å®šä¹‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263export function createElement(type, config, children) &#123; let propName; const props = &#123;&#125;; let key = null; let ref = null; let self = null; let source = null; //åˆ¤æ–­æ˜¯å¦å­˜åœ¨config if (config != null) &#123; if (hasValidRef(config)) &#123; ref = config.ref; &#125; if (hasValidKey(config)) &#123; key = &#x27;&#x27; + config.key; &#125; ...... for (propName in config) &#123; if ( hasOwnProperty.call(config, propName) &amp;&amp; !RESERVED_PROPS.hasOwnProperty(propName) ) &#123; props[propName] = config[propName]; &#125; &#125; &#125; .... //argumentså‚æ•°ç¬¬ä¸‰ä¸ªå¼€å§‹ä½œä¸ºchildrenLength const childrenLength = arguments.length - 2; if (childrenLength === 1) &#123; props.children = children; &#125; else if (childrenLength &gt; 1) &#123; const childArray = Array(childrenLength); for (let i = 0; i &lt; childrenLength; i++) &#123; childArray[i] = arguments[i + 2]; &#125; .... props.children = childArray; &#125; //åˆ¤æ–­ç»„ä»¶æ²¡æœ‰ä¼ propsåˆ™å¯ä»¥ç”¨defaultPropsä½œä¸ºé»˜è®¤å‚æ•° if (type &amp;&amp; type.defaultProps) &#123; const defaultProps = type.defaultProps; for (propName in defaultProps) &#123; if (props[propName] === undefined) &#123; props[propName] = defaultProps[propName]; &#125; &#125; &#125; .... //è¿”å›ä¸€ä¸ªå¯¹è±¡ return ReactElement( type, key, ref, self, source, ReactCurrentOwner.current, props, );&#125; å‚æ•° ï¼š å­—ç¬¦ä¸²æ¯”å¦‚divï¼Œpä»£è¡¨åŸç”ŸDOMï¼Œç§°ä¸ºHostComponent Classç±»å‹æ˜¯æˆ‘ä»¬ç»§æ‰¿è‡ªComponentæˆ–è€…PureComponentçš„ç»„ä»¶ï¼Œç§°ä¸ºClassComponent æ–¹æ³•å°±æ˜¯functional Component åŸç”Ÿæä¾›çš„Fragmentã€AsyncModeç­‰æ˜¯Symbolï¼Œä¼šè¢«ç‰¹æ®Šå¤„ç† åœ¨å¤„ç†configçš„è¿‡ç¨‹ä¸­è¦å¤„ç†ä¸æ˜¯propså¯¹åº”çš„å±æ€§å€¼123456const RESERVED_PROPS = &#123; key: true, ref: true, __self: true, __source: true,&#125;;ä¹‹åå¤„ç†children çœ‹ä¸‹ReactElementæ–¹æ³•12345678910111213const ReactElement = function(type, key, ref, self, source, owner, props) &#123; const element = &#123; $$typeof: REACT_ELEMENT_TYPE, type: type, key: key, ref: ref, props: props, //è®°å½•è´Ÿè´£åˆ›å»ºæ­¤å…ƒç´ çš„ç»„ä»¶ _owner: owner, &#125;; return element;&#125;; ReactElementåªæ˜¯ä¸€ä¸ªç”¨æ¥æ‰¿è½½ä¿¡æ¯çš„å®¹å™¨ï¼Œä»–ä¼šå‘Šè¯‰åç»­çš„æ“ä½œè¿™ä¸ªèŠ‚ç‚¹çš„ä»¥ä¸‹ä¿¡æ¯ï¼š typeç±»å‹ï¼Œç”¨äºåˆ¤æ–­å¦‚ä½•åˆ›å»ºèŠ‚ç‚¹ keyå’Œrefè¿™äº›ç‰¹æ®Šä¿¡æ¯ propsæ–°çš„å±æ€§å†…å®¹ $$typeofç”¨äºç¡®å®šæ˜¯å¦å±äºReactElement $$typeofä¸typeçš„åŒºåˆ«ï¼Ÿ$$typeofç”¨äºç¡®å®šæ˜¯å¦å±äºReactElementï¼Œæˆ‘ä»¬åœ¨ç”¨jsxå†™ä»£ç çš„æ—¶å€™æ‰€æœ‰çš„æ ‡ç­¾éƒ½æ˜¯ReactElementåˆ›å»ºçš„ã€‚ç±»å‹$$typeof: REACT_ELEMENT_TYPE,typeæ˜¯è®°å½•æˆ‘ä»¬èŠ‚ç‚¹ç±»å‹çš„æ˜¯åŸç”Ÿç»„ä»¶è¿˜æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œè¿˜æ˜¯æ ‡ç­¾ç±»å‹ æµç¨‹å›¾å¤§è‡´å†…å®¹æ„Ÿè°¢yck æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹react.createElementè¿™ä¸ªå‡½æ•°é‡Œé¢ä¼šå¸®æˆ‘ä»¬åšä»€ä¹ˆäº‹æƒ…ã€‚ defineKeyPropWarningGetterå’ŒdefineRefPropWarningGetterä¸¤ä¸ªå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿè¿™ä¸¤ä¸ªå‡½æ•°ä»…ä»…åªæ˜¯å°†keyå’Œrefæ·»åŠ åˆ°å³å°†ä¼ å…¥ReactElementå‡½æ•°çš„propså¯¹è±¡ä¸­è€Œå·²ã€‚å¹¶ä¸”å¯¹getç»‘å®šäº†ä¸€ä¸ªå‡½æ•°ï¼Œå½“å°è¯•è·é€šè¿‡propsè·å–keyå’Œrefçš„æ—¶å€™ä¼šå‡ºç°è­¦å‘Šã€‚ä»€ä¹ˆæƒ…å†µä¸‹childrenLengthå¤§äº1ï¼Ÿå°†åŸæ¥çš„h1æ”¹æˆä¸€ä¸ªdivï¼Œå¹¶ä¸”åµŒå¥—2ä¸ªh1å…ƒç´ å°±å¯ä»¥å‘ç°childrenLengthå¤§äº1äº†ã€‚ReactElementæ˜¯å¹²å˜›çš„ï¼ŸåŒ…è£…åœ¨ä¸€ä¸ªelementå¯¹è±¡ å°ç»“ é¦–å…ˆä¼šåˆå§‹åŒ–ä¸€äº›åˆ—çš„å˜é‡ï¼Œä¹‹åä¼šåˆ¤æ–­æˆ‘ä»¬ä¼ å…¥çš„å…ƒç´ ä¸­æ˜¯å¦å¸¦æœ‰keyå’Œrefçš„å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§å¯¹äºreactæ˜¯æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼Œå¦‚æœæ£€æµ‹åˆ°æœ‰ä¼ å…¥key,ref,selfå’Œsourceè¿™4ä¸ªå±æ€§å€¼ï¼Œä¼šå°†å…¶ä¿å­˜èµ·æ¥ã€‚ ä¹‹åå¯¹ä¼ å…¥çš„configåšå¤„ç†ï¼Œå¾ªç¯configå¯¹è±¡ï¼Œå¹¶ä¸”å‰”é™¤æ‰4ä¸ªå†…ç½®å±æ€§å€¼ï¼ˆkey,ref,self,sourceï¼‰ï¼Œä¹‹åé‡æ–°ç»„è£…æ–°çš„configä¸ºpropsã€‚ ä¹‹åä¼šæ£€æµ‹ä¼ å…¥çš„å‚æ•°çš„é•¿åº¦ï¼Œå¦‚æœchildrenLengthç­‰äº1çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå°±ä»£è¡¨ç€å½“å‰createElementçš„å…ƒç´ æ²¡æœ‰å­å…ƒç´ ï¼Œåªæœ‰æ–‡å­—æˆ–è€…æ˜¯ç©ºï¼Œé‚£ä¹ˆå°†å†…å®¹èµ‹å€¼åˆ°props.childrenã€‚é‚£ä»€ä¹ˆæ—¶å€™childrenLengthä¼šå¤§äº1å‘¢ï¼Ÿé‚£å°±æ˜¯å½“ä½ çš„å…ƒç´ é‡Œé¢æ¶‰åŠåˆ°åµŒå¥—å­å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆchildrenå°†ä¼šæœ‰å¤šä¸ªä¼ å…¥åˆ°createElementå‡½æ•°ä¸­ï¼Œè¿™ä¸ªä¹‹åå†åšè¯¦è§£ï¼Œç°åœ¨åªé’ˆå¯¹æœ€ç®€å•çš„DEMOå»è¯´æ˜ã€‚ æ¥ç€å‡½æ•°å°†ä¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨defaultPropsè¿™ä¸ªå‚æ•°ï¼Œå› ä¸ºç°åœ¨çš„DEMOæ˜¯ä¸€ä¸ªæœ€ç®€å•çš„DEMOï¼Œè€Œä¸”ä¼ å…¥çš„åªæ˜¯åŸç”Ÿå…ƒç´ ï¼Œæ‰€ä»¥æ²¡æœ‰defaultPropsè¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å…ˆå¿½ç•¥ã€‚ æ£€æµ‹keyå’Œrefæ˜¯å¦æœ‰èµ‹å€¼ï¼Œå¦‚æœæœ‰å°†ä¼šæ‰§è¡ŒdefineKeyPropWarningGetterå’ŒdefineRefPropWarningGetterä¸¤ä¸ªå‡½æ•°ã€‚ æœ€åå°†ä¸€ç³»åˆ—ç»„è£…å¥½çš„æ•°æ®ä¼ å…¥ReactElementå‡½æ•°ä¸­ã€‚","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactæºç ç³»åˆ—_jsxè½¬javascript","slug":"Reactæºç ç³»åˆ—_jsxè½¬javascript","date":"2019-04-23T16:00:00.000Z","updated":"2020-09-16T09:07:48.000Z","comments":true,"path":"2019/04/24/Reactæºç ç³»åˆ—_jsxè½¬javascript/","link":"","permalink":"http://mariogogogo.github.io/2019/04/24/React%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97_jsx%E8%BD%ACjavascript/","excerpt":"è¿™æ˜¯ä¸‹åŠå¹´çš„å¯¹è‡ªå·±çš„æå‡ã€‚æ„Ÿè°¢jokcy","text":"è¿™æ˜¯ä¸‹åŠå¹´çš„å¯¹è‡ªå·±çš„æå‡ã€‚æ„Ÿè°¢jokcy React ä½¿ç”¨ JSX æ¥æ›¿ä»£å¸¸è§„çš„ JavaScriptã€‚JSX æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚æˆ‘ä»¬ä¸éœ€è¦ä¸€å®šä½¿ç”¨ JSXï¼Œä½†å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šJSX æ‰§è¡Œæ›´å¿«ï¼Œå› ä¸ºå®ƒåœ¨ç¼–è¯‘ä¸º JavaScript ä»£ç åè¿›è¡Œäº†ä¼˜åŒ–ã€‚å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±èƒ½å‘ç°é”™è¯¯ã€‚ä½¿ç”¨ JSX ç¼–å†™æ¨¡æ¿æ›´åŠ ç®€å•å¿«é€Ÿã€‚12345678910111213141516171819202122232425&lt;div style=&#123;&#123;color:red&#125;&#125; key=&quot;1&quot; ref=&quot;divRef&quot;&gt; &lt;h1&gt;content &lt;a&gt;lianjie&lt;/a&gt; &lt;/h1&gt;&lt;/div&gt;......è½¬ä¹‰ä¹‹åè¿™æ ·çš„..........&quot;use strict&quot;;React.createElement( &quot;div&quot;, &#123; style: &#123; color: red &#125;, key: &quot;1&quot;, ref: &quot;divRef&quot; &#125;, React.createElement( &quot;h1&quot;, null, &quot;content&quot;, React.createElement(&quot;a&quot;, null, &quot;lianjie&quot;) ));å¦‚æœæˆ‘ä»¬åŠ ä¸ªç»„ä»¶ä¼šå¦‚ä½•å‘¢ï¼Ÿ1234567891011121314151617181920212223242526272829function Comp()&#123; return &lt;h2&gt;i am Component&lt;/h2&gt;&#125;&lt;div style=&#123;&#123;color:red&#125;&#125; key=&quot;1&quot; ref=&quot;divRef&quot;&gt; &lt;h1&gt;content &lt;a&gt;lianjie&lt;/a&gt; &lt;Comp/&gt; &lt;/h1&gt;&lt;/div&gt;..........è½¬ä¹‰ä¹‹å........React.createElement( &quot;div&quot;, &#123; style: &#123; color: red &#125;, key: &quot;1&quot;, ref: &quot;divRef&quot; &#125;, React.createElement( &quot;h1&quot;, null, &quot;content&quot;, React.createElement(&quot;a&quot;, null, &quot;lianjie&quot;), React.createElement(Comp, null) ));åˆæˆ–è€…è¿™æ ·1234567891011121314151617181920212223242526function Comp()&#123; return &lt;h2&gt;i am Component&lt;/h2&gt;&#125;&lt;Comp style=&#123;&#123;color:red&#125;&#125; key=&quot;1&quot; ref=&quot;divRef&quot;&gt; &lt;h1&gt;content &lt;a&gt;lianjie&lt;/a&gt; &lt;/h1&gt;&lt;/Comp&gt;.......è½¬ä¹‰ä¹‹å..........React.createElement( Comp, //å˜é‡ä¸ºç»„ä»¶å &#123; style: &#123; color: red &#125;, key: &quot;1&quot;, ref: &quot;divRef&quot; &#125;, React.createElement( &quot;h1&quot;, null, &quot;content&quot;, React.createElement(&quot;a&quot;, null, &quot;lianjie&quot;) ));ç»„ä»¶ååƒä¸‡ä¸èƒ½å°å¿ƒä¸ç„¶ä¼šå‡ºç°è¿™æ ·123456789101112131415161718192021222324252627function comp()&#123; return &lt;h2&gt;i am Component&lt;/h2&gt;&#125;&lt;comp style=&#123;&#123;color:red&#125;&#125; key=&quot;1&quot; ref=&quot;divRef&quot;&gt; &lt;h1&gt;content &lt;a&gt;lianjie&lt;/a&gt; &lt;/h1&gt;&lt;/comp&gt;.......è½¬ä¹‰ä¹‹å..........React.createElement( &quot;comp&quot;, //å˜é‡ä¸ºå­—ç¬¦ä¸² ä¸æ˜¯æ­£ç¡®çš„åŸç”Ÿæ ‡ç­¾ä¼šå¯¼è‡´æŠ¥é”™ &#123; style: &#123; color: red &#125;, key: &quot;1&quot;, ref: &quot;divRef&quot; &#125;, React.createElement( &quot;h1&quot;, null, &quot;content&quot;, React.createElement(&quot;a&quot;, null, &quot;lianjie&quot;) )); ä¸‹ä¸€èŠ‚å­¦ä¹ ä¸‹createElementåˆ°åº•åšäº†äº›ä»€ä¹ˆ","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-åŠ¨æ€æ³¨å†Œç»„ä»¶","slug":"ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-åŠ¨æ€æ³¨å†Œç»„ä»¶","date":"2019-04-22T16:00:00.000Z","updated":"2020-09-16T09:06:50.000Z","comments":true,"path":"2019/04/23/ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-åŠ¨æ€æ³¨å†Œç»„ä»¶/","link":"","permalink":"http://mariogogogo.github.io/2019/04/23/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6/","excerpt":"æˆ‘ä»¬åœ¨åˆšå¼€å§‹å­¦vueçš„æ—¶å€™å†™ä¸€äº›å°ç»„ä»¶å¼•å…¥åˆ°å¤§ç»„ä»¶ä¸­éƒ½æ˜¯è¿™æ ·çš„ï¼š","text":"æˆ‘ä»¬åœ¨åˆšå¼€å§‹å­¦vueçš„æ—¶å€™å†™ä¸€äº›å°ç»„ä»¶å¼•å…¥åˆ°å¤§ç»„ä»¶ä¸­éƒ½æ˜¯è¿™æ ·çš„ï¼š12345678910111213import BaseButton from &#x27;./baseButton&#x27;import BaseIcon from &#x27;./baseIcon&#x27;import BaseInput from &#x27;./baseInput&#x27;export default &#123; components: &#123; BaseButton, BaseIcon, BaseInput &#125;&#125;&lt;BaseInput v-model=&quot;searchText&quot; @keydown.enter=&quot;search&quot; /&gt;&lt;BaseButton @click=&quot;search&quot;&gt; &lt;BaseIcon name=&quot;search&quot;/&gt;&lt;/BaseButton&gt;æ­¥éª¤ä¸€èˆ¬æœ‰ä¸‰æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼Œå¼•å…¥ã€ ç¬¬äºŒæ­¥æ³¨å†Œã€ ç¬¬ä¸‰æ­¥æ‰æ˜¯æ­£å¼çš„ä½¿ç”¨ï¼Œ è¿™ä¹Ÿæ˜¯æœ€å¸¸è§å’Œé€šç”¨çš„å†™æ³•ã€‚ä½†æ˜¯è¿™ç§å†™æ³•ç»å…¸å½’ç»å…¸ï¼Œå¥½å¤šç»„ä»¶ï¼Œè¦å¼•å…¥å¤šæ¬¡ï¼Œæ³¨å†Œå¤šæ¬¡ï¼Œæ„Ÿè§‰å¾ˆçƒ¦ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸‹webpackï¼Œä½¿ç”¨ require.context() æ–¹æ³•æ¥åˆ›å»ºè‡ªå·±çš„ï¼ˆæ¨¡å—ï¼‰ä¸Šä¸‹æ–‡ï¼Œä»è€Œå®ç°è‡ªåŠ¨åŠ¨æ€requireç»„ä»¶ã€‚ æ€è·¯æ˜¯ï¼šåœ¨srcæ–‡ä»¶å¤¹ä¸‹é¢main.jsä¸­ï¼Œå€ŸåŠ©webpackåŠ¨æ€å°†éœ€è¦çš„åŸºç¡€ç»„ä»¶ç»Ÿç»Ÿæ‰“åŒ…è¿›æ¥ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940import Vue from &#x27;vue&#x27;/** * é¦–å­—æ¯å¤§å†™ * @param str å­—ç¬¦ä¸² * @example heheHaha * @return &#123;string&#125; HeheHaha */function capitalizeFirstLetter(str) &#123; return str.charAt(0).toUpperCase() + str.slice(1)&#125;/** * å¯¹ç¬¦åˆ&#x27;xx/xx.vue&#x27;ç»„ä»¶æ ¼å¼çš„ç»„ä»¶å–ç»„ä»¶å * @param str fileName * @example abc/bcd/def/basicTable.vue * @return &#123;string&#125; BasicTable */function validateFileName(str) &#123; return /^\\S+\\.vue$/.test(str) &amp;&amp; str.replace(/^\\S+\\/(\\w+)\\.vue$/, (rs, $1) =&gt; capitalizeFirstLetter($1))&#125;const requireComponent = require.context(&#x27;./&#x27;, true, /\\.vue$/)console.log(&#x27;requireComponent&#x27;,requireComponent)// æ‰¾åˆ°ç»„ä»¶æ–‡ä»¶å¤¹ä¸‹ä»¥.vueå‘½åçš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶åä¸ºindexï¼Œé‚£ä¹ˆå–ç»„ä»¶ä¸­çš„nameä½œä¸ºæ³¨å†Œçš„ç»„ä»¶årequireComponent.keys().forEach(filePath =&gt; &#123; const componentConfig = requireComponent(filePath) const fileName = validateFileName(filePath) const componentName = fileName.toLowerCase() === &#x27;index&#x27; ? capitalizeFirstLetter(componentConfig.default.name) : fileName // å…¨å±€æ³¨å†Œç»„ä»¶ Vue.component( componentName, // å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ `export default` å¯¼å‡ºçš„ï¼Œ // é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ `.default`ï¼Œ // å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹ã€‚ componentConfig.default || componentConfig)&#125;) åœ¨main.jsä¸­å¼•å…¥123456789101112131415161718192021222324252627import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import router from &#x27;./router&#x27;import store from &#x27;./store&#x27;import ElementUI from &#x27;element-ui&#x27;import &#x27;element-ui/lib/theme-chalk/index.css&#x27;import &#x27;@/icons&#x27;// å…¨å±€æŒ‚è½½è¯·æ±‚import Global from &#x27;./global&#x27;;// å…¨å±€æ³¨å†Œç»„ä»¶import componentRegister from &#x27;./components/componentRegister&#x27;import Loading from &#x27;./components/loadding&#x27;// å…¨å±€è®¾ç½®èŠ‚æµ/é˜²æŠ–import Throttle from &#x27;./components/Throttle&#x27;Vue.component(&#x27;Throttle&#x27;, Throttle)Vue.use(Loading)Vue.use(Global) Vue.config.productionTip = falseconst vm = new Vue(&#123; router, store, componentRegister,//å¼•å…¥ render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;)BasicTable.js123456789&lt;template&gt; &lt;div&gt;æˆ‘æ˜¯BasicTableå°ç»„ä»¶&lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&quot;BasicTable&quot; &#125;&lt;/script&gt;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-è¯·æ±‚ç¯‡","slug":"ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-è¯·æ±‚ç¯‡","date":"2019-04-20T16:00:00.000Z","updated":"2020-09-16T09:06:51.000Z","comments":true,"path":"2019/04/21/ã€ŒVueå®æˆ˜ã€é€‚åˆä½ çš„ä¼˜åŒ–æŒ‡å—-è¯·æ±‚ç¯‡/","link":"","permalink":"http://mariogogogo.github.io/2019/04/21/%E3%80%8CVue%E5%AE%9E%E6%88%98%E3%80%8D%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97-%E8%AF%B7%E6%B1%82%E7%AF%87/","excerpt":"å…ˆçœ‹çœ‹ç›®å½•ä¸€èˆ¬é¡¹ç›®ä¸­å¤„ç†æ­å»ºç¯å¢ƒæˆ‘ä»¬æœ€å¸¸åšçš„å°±æ˜¯å°è£…è¯·æ±‚ï¼Œä»Šå¤©å°±æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å°è£…ä¸€ä¸ªå¥½ç”¨çš„è¯·æ±‚","text":"å…ˆçœ‹çœ‹ç›®å½•ä¸€èˆ¬é¡¹ç›®ä¸­å¤„ç†æ­å»ºç¯å¢ƒæˆ‘ä»¬æœ€å¸¸åšçš„å°±æ˜¯å°è£…è¯·æ±‚ï¼Œä»Šå¤©å°±æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å°è£…ä¸€ä¸ªå¥½ç”¨çš„è¯·æ±‚ æ¥å£æ¨¡å—å¤„ç†å¯¹axiosçš„äºŒæ¬¡å°è£…å¾ˆåŸºç¡€çš„éƒ¨åˆ†,è¿™é‡Œçš„å°è£…æ˜¯ä¾æ® JWTå‰æè¿˜éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯ router.history.current.path å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯ router.currentRoute.fullPath å‘Šè¯‰ä½ å½“å‰è·¯å¾„é“¾æ¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114import axios from &#x27;axios&#x27;import router from &#x27;../router&#x27;import &#123; MessageBox, Message &#125; from &#x27;element-ui&#x27;let loginUrl = &#x27;/login&#x27;// æ ¹æ®ç¯å¢ƒåˆ‡æ¢æ¥å£åœ°å€axios.defaults.baseURL = process.env.VUE_APP_APIaxios.defaults.headers = &#123; &#x27;Postman-Token&#x27;: &#x27;3deda212-00f1-44e5-8d92-18463283de1d&#x27;, &#x27;cache-control&#x27;: &#x27;no-cache&#x27;, &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;&#125;, axios.defaults.timeout = 60000// è¯·æ±‚æ‹¦æˆªaxios.interceptors.request.use( config =&gt; &#123; if (router.history.current.path !== loginUrl &amp;&amp; router.history.current.path != &quot;/about&quot;) &#123; let token = window.sessionStorage.getItem(&#x27;token&#x27;) if (token == null) &#123; router.replace(&#123; path: loginUrl, query: &#123; redirect: router.currentRoute.fullPath &#125; &#125;) return false &#125; else &#123; config.headers[&#x27;Authorization&#x27;] = &#x27;JWT&#x27; + token &#125; &#125; return config &#125;, error =&gt; &#123; Message.warning(error) return Promise.reject(error) &#125;)// å“åº”æ‹¦æˆª å¼‚å¸¸å¤„ç†axios.interceptors.response.use( response =&gt; &#123; return response.data &#125;, error =&gt; &#123; if (error.message !== undefined) &#123; switch (error.response.status) &#123; case 400: MessageBox.alert(error.response.data) break case 401: if (window.sessionStorage.getItem(&#x27;out&#x27;) === null) &#123; window.sessionStorage.setItem(&#x27;out&#x27;, 1) MessageBox.confirm(&#x27;ä¼šè¯å·²å¤±æ•ˆ! è¯·é‡æ–°ç™»å½•&#x27;, &#x27;æç¤º&#x27;, &#123; confirmButtonText: &#x27;é‡æ–°ç™»å½•&#x27;, cancelButtonText: &#x27;å–æ¶ˆ&#x27;, type: &#x27;warning&#x27; &#125;).then(() =&gt; &#123; router.replace(&#123; path: loginUrl, query: &#123; redirect: router.currentRoute.fullPath &#125; &#125;) &#125;) &#125; break case 402: MessageBox.confirm(&#x27;ç™»é™†è¶…æ—¶ ï¼&#x27;, &#x27;æç¤º&#x27;, &#123; confirmButtonText: &#x27;é‡æ–°ç™»å½•&#x27;, cancelButtonText: &#x27;å–æ¶ˆ&#x27;, type: &#x27;warning&#x27; &#125;).then(() =&gt; &#123; router.replace(&#123; path: loginUrl, query: &#123; redirect: router.currentRoute.fullPath &#125; &#125;) &#125;) break case 403: MessageBox.alert(&#x27;æ²¡æœ‰æƒé™&#x27;) break default: MessageBox.alert(`è¿æ¥é”™è¯¯$&#123;error.response.status&#125;`) &#125; &#125; &#125;)// å¯¼å‡ºåŸºç¡€çš„è¯·æ±‚ç±»å‹å°è£…export default &#123; // å…¶ä¸­ç»™ getè¯·æ±‚åŠ ä¸Šæ—¶é—´æˆ³å‚æ•°ï¼Œé¿å…ä»ç¼“å­˜ä¸­æ‹¿æ•°æ® get (url, param) &#123; if (param !== undefined) &#123; param = &#123; ...param, _t: (new Date()).getTime() &#125; &#125; else &#123; param = &#123; _t: (new Date()).getTime() &#125; &#125; return new Promise((resolve, reject) =&gt; &#123; axios(&#123; method: &#x27;GET&#x27;, url, param: param &#125;) .then(res =&gt; &#123; resolve(res) &#125;) &#125;) &#125;, getData (url, param) &#123; return new Promise((resolve, reject) =&gt; &#123; axios(&#123; method: &#x27;GET&#x27;, url, param: param &#125;) .then(res =&gt; &#123; if (res.code === 4000) &#123; resolve(res.data) &#125; else &#123; Message.warning(res.msg) &#125; &#125;) &#125;) &#125;, post (url, param, config) &#123; console.log(&#x27;router.history.current.path:å½“å‰è·¯å¾„&#x27;,router.history.current.path) console.log(&#x27;router.currentRoute.fullPath:&#x27;,router.currentRoute.fullPath) return new Promise((resolve, reject) =&gt; &#123; axios.post(url, param, config) .then(res =&gt; &#123; resolve(res) &#125;) &#125;) &#125;&#125; ç»Ÿä¸€è¯·æ±‚å…¥å£123456789 // è¯·æ±‚æŒ‰æ¨¡æ¿åˆå¹¶import http from &#x27;./request&#x27;import login from &#x27;./login&#x27;// const api = Object.assign(&#123;&#125;,http,login,å…¶ä»–apiæ¨¡æ¿)const api = Object.assign(&#123;&#125;, http, login)export default api å•ç‹¬è¯·æ±‚12345678910111213141516import http from &#x27;./request&#x27;// https://easy-mock.com/mock/5cbe83dd59a6ea65f79ad4f5/api/v1/loginconst baseUrl = &quot;https://easy-mock.com/mock/5cbe83dd59a6ea65f79ad4f5&quot;;export default &#123; login (param) &#123; return http.post(&#x27;http://rap2api.taobao.org/app/mock/6006/api/u/verify&#x27;, param) &#125;, out (param) &#123; return http.get(&#x27;/api/v1/out&#x27;, param) &#125;, register (param) &#123; return http.post(&#x27;/api/v1/register&#x27;, param) &#125;&#125; å…¨å±€å¯¼å…¥åœ¨main.js12345678910import &#x27;@/icons&#x27;// å…¨å±€æŒ‚è½½è¯·æ±‚import Global from &#x27;./global&#x27;;const vm = new Vue(&#123; router, store, render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;)console.log(vm) åŠ è½½å ä½¿ç”¨1234567891011121314151617181920212223&lt;script&gt; import &#123; MessageBox, Message, Button, &#125; from &#x27;element-ui&#x27; export default &#123; name: &#x27;about&#x27;, data () &#123; return &#123; val: 0 &#125; &#125;, methods: &#123; onClick ($ev, val) &#123; this.val += val &#125;, getData: async function () &#123; const res = await this.$http.login(&#123; &#x27;name&#x27;: &#x27;å“ˆå“ˆ&#x27; &#125;).then(res =&gt; &#123; return res &#125;) console.log(res) res.success ? Message.success(&#x27;ç™»å½•æˆåŠŸ&#x27;) : this.$message.warning(res.msg) &#125; &#125; &#125;&lt;/script&gt;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"ReactNativeç¦»çº¿æ¡†æ¶è®¾è®¡","slug":"ReactNativeç¦»çº¿æ¡†æ¶è®¾è®¡","date":"2019-04-12T16:00:00.000Z","updated":"2020-09-16T09:07:50.000Z","comments":true,"path":"2019/04/13/ReactNativeç¦»çº¿æ¡†æ¶è®¾è®¡/","link":"","permalink":"http://mariogogogo.github.io/2019/04/13/ReactNative%E7%A6%BB%E7%BA%BF%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/","excerpt":"å¥½ä¹…æ²¡æ›´æ–°ï¼Œæœ€è¿‘ä¸€ç›´èµ¶é¡¹ç›®ï¼Œç–²æ• - -ï¼ï¼ï¼","text":"å¥½ä¹…æ²¡æ›´æ–°ï¼Œæœ€è¿‘ä¸€ç›´èµ¶é¡¹ç›®ï¼Œç–²æ• - -ï¼ï¼ï¼æœ€è¿‘é¡¹ç›®å‡çº§2.0ï¼Œå¢åŠ äº†ä¸€ä¸ªç¦»çº¿ç¼“å­˜çš„åŠŸèƒ½ä¼˜åŒ–ã€‚è®°å½•ä¸€ä¸‹ï¼š AsyncStorageä»‹ç»AsyncStorage æ˜¯ä¸€ä¸ªç®€å•çš„ã€å¼‚æ­¥çš„ã€æŒä¹…åŒ–çš„ Key-Value å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯¹äº App æ¥è¯´æ˜¯å…¨å±€æ€§çš„ã€‚å®ƒç”¨æ¥ä»£æ›¿ LocalStorageã€‚ç”±äºå®ƒçš„æ“ä½œæ˜¯å…¨å±€çš„ï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬æœ€å¥½é’ˆå¯¹ AsyncStorage è¿›è¡Œä¸€ä¸‹æŠ½è±¡çš„å°è£…å†ä½¿ç”¨ï¼Œè€Œä¸”ä¸æ˜¯ç›´æ¥æ‹¿ AsyncStorage è¿›è¡Œä½¿ç”¨ã€‚AsyncStorage å­˜å‚¨çš„ä½ç½®æ ¹æ®ç³»ç»Ÿçš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚iOS ä¸­çš„å­˜å‚¨ç±»ä¼¼äº NSUserDefaultï¼Œé€šè¿‡ plist æ–‡ä»¶å­˜æ”¾åœ¨è®¾å¤‡ä¸­ã€‚Android ä¸­ä¼šå­˜å‚¨åœ¨ RocksDB æˆ–è€… SQLite ä¸­ï¼Œå–å†³äºä½ ä½¿ç”¨å“ªä¸ªã€‚ ç›¸å…³æ–¹æ³•ï¼ˆ1ï¼‰æ ¹æ®é”®æ¥è·å–å€¼ï¼Œè·å–çš„ç»“æœä¼šæ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚ static getItem(key: string, callback:(error, result)) ï¼ˆ2ï¼‰æ ¹æ®é”®æ¥è®¾ç½®å€¼ã€‚ static setItem(key: string, value: string, callback:(error)) ï¼ˆ3ï¼‰æ ¹æ®é”®æ¥ç§»é™¤é¡¹ã€‚ static removeItem(key: string, callback:(error)) ï¼ˆ4ï¼‰åˆå¹¶ç°æœ‰å€¼å’Œè¾“å…¥å€¼ã€‚ static mergeItem(key: string, value: string, callback:(error)) ï¼ˆ5ï¼‰æ¸…é™¤æ‰€æœ‰çš„é¡¹ç›® static clear(callback:(error)) ï¼ˆ6ï¼‰è·å–æ‰€æœ‰çš„é”® static getAllKeys(callback:(error, keys)) ï¼ˆ7ï¼‰æ¸…é™¤æ‰€æœ‰è¿›è¡Œä¸­çš„æŸ¥è¯¢æ“ä½œã€‚ static flushGetRequests() ï¼ˆ8ï¼‰è·å–å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™] static multiGet(keys, callback:(errors, result)) ï¼ˆ9ï¼‰è®¾ç½®å¤šé¡¹ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]] static multiSet(keyValuePairs, callback:(errors)) ï¼ˆ10ï¼‰åˆ é™¤å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™] static multiRemove(keys, callback:(errors)) ï¼ˆ11ï¼‰å¤šä¸ªé”®å€¼åˆå¹¶ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]] static multiMerge(keyValuePairs, callback:(errors)) è®¾è®¡ä¸ºä»€ä¹ˆè¦ç¦»çº¿ç¼“å­˜ï¼Ÿ æå‡ç”¨æˆ·ä½“éªŒ èŠ‚çœæµé‡ ç¼ºç‚¹åªèƒ½é’ˆå¯¹ä¸€äº›å¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„Appå¼€å‘ ç¦»çº¿ç¼“å­˜çš„ç­–ç•¥ï¼š é¦–å…ˆä¿å­˜æ•°æ®12345678910/** * ä¿å­˜æ•°æ® * @param url * @param data * @param callback */ saveData(url, data, callback) &#123; if (!data || !url) return; AsyncStorage.setItem(url, JSON.stringify(this._wrapData(data)), callback); &#125; æ³¨æ„AsyncStorageæ— æ³•ä¿å­˜ä¸ºobjectç±»å‹æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶åºåˆ—å·æˆjson è·å–æœ¬åœ°æ—¶é—´è®¾ç½®æœ‰æ•ˆæœŸã€‚æ¨èè®¾ç½®ä¸ºæœåŠ¡å™¨æ—¶é—´123_wrapData(data) &#123; return &#123;data: data, timestamp: new Date().getTime()&#125;; &#125; ç„¶åå…ˆè·å–æœ¬åœ°æ•°æ®12345678910111213141516171819202122/** * è·å–æœ¬åœ°æ•°æ® * @param url * @returns &#123;Promise&#125; */fetchLocalData(url) &#123; return new Promise((resolve, reject) =&gt; &#123; AsyncStorage.getItem(url, (error, result) =&gt; &#123; if (!error) &#123; try &#123; resolve(JSON.parse(result)); &#125; catch (e) &#123; reject(e); console.error(e); &#125; &#125; else &#123; reject(error); console.error(error); &#125; &#125;) &#125;)&#125; åªéœ€è¦urlå»æ¯”å¯¹æœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œä¿å­˜ç±»å‹ä¸ºå­—ç¬¦ä¸²stringç±»å‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒç”¨åç”¨è½¬æˆobjectä½¿ç”¨ è·å–ç½‘ç»œæ•°æ®1234567891011121314151617181920212223242526272829303132333435363738/** * è·å–ç½‘ç»œæ•°æ® * @param url * @param flag * @returns &#123;Promise&#125; */ fetchNetData(url, flag) &#123; return new Promise((resolve, reject) =&gt; &#123; if (flag !== FLAG_STORAGE.flag_trending) &#123; fetch(url) .then((response) =&gt; &#123; if (response.ok) &#123; return response.json(); &#125; throw new Error(&#x27;Network response was not ok.&#x27;); &#125;) .then((responseData) =&gt; &#123; this.saveData(url, responseData) resolve(responseData); &#125;) .catch((error) =&gt; &#123; reject(error); &#125;) &#125; else &#123; new Trending().fetchTrending(url) .then(items =&gt; &#123; if (!items) &#123; throw new Error(&#x27;responseData is null&#x27;); &#125; this.saveData(url, items); resolve(items); &#125;) .catch(error =&gt; &#123; reject(error); &#125;) &#125; &#125;) &#125; æœ€åæˆ‘ä»¬å°è£…fetchè¯·æ±‚123456789101112131415161718192021222324252627282930313233export default class DataStore &#123; /** * è·å–æ•°æ®ï¼Œä¼˜å…ˆè·å–æœ¬åœ°æ•°æ®ï¼Œå¦‚æœæ— æœ¬åœ°æ•°æ®æˆ–æœ¬åœ°æ•°æ®è¿‡æœŸåˆ™è·å–ç½‘ç»œæ•°æ® * @param url * @param flag * @returns &#123;Promise&#125; */ fetchData(url, flag) &#123; return new Promise((resolve, reject) =&gt; &#123; this.fetchLocalData(url).then((wrapData) =&gt; &#123; if (wrapData &amp;&amp; DataStore.checkTimestampValid(wrapData.timestamp)) &#123; console.log(&#x27;è¯»å–æœ¬åœ°ç¼“å­˜&#x27;,wrapData) resolve(wrapData); &#125; else &#123; //æœ¬åœ°æ²¡æœ‰å°±è·å–ç½‘ç»œè¯·æ±‚ console.log(&#x27;url&#x27;,url,&#x27;flag&#x27;,flag) this.fetchNetData(url, flag).then((data) =&gt; &#123; resolve(this._wrapData(data)); &#125;).catch((error) =&gt; &#123; reject(error); &#125;) &#125; &#125;).catch((error) =&gt; &#123; this.fetchNetData(url, flag).then((data) =&gt; &#123; resolve(this._wrapData(data)); &#125;).catch((error =&gt; &#123; reject(error); &#125;)) &#125;) &#125;) &#125;&#125; æ—¶é—´æœ‰æ•ˆæœŸçš„æ£€æµ‹12345678910111213141516 /** * æ£€æŸ¥timestampæ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†… * @param timestamp é¡¹ç›®æ›´æ–°æ—¶é—´ * @return &#123;boolean&#125; true ä¸éœ€è¦æ›´æ–°,falseéœ€è¦æ›´æ–° */ static checkTimestampValid(timestamp) &#123; const currentDate = new Date(); const targetDate = new Date(); targetDate.setTime(timestamp); if (currentDate.getMonth() !== targetDate.getMonth()) return false; if (currentDate.getDate() !== targetDate.getDate()) return false; if (currentDate.getHours() - targetDate.getHours() &gt; 4) return false;//æœ‰æ•ˆæœŸ4ä¸ªå°æ—¶ // if (currentDate.getMinutes() - targetDate.getMinutes() &gt; 1)return false; return true; &#125;&#125; å‚è€ƒè´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢å®˜ç½‘å‚è€ƒä¸€","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ReactNative ä¸­ä½¿ç”¨reduxå’Œlogger,thunk","slug":"ReactNative_redux","date":"2019-03-27T16:00:00.000Z","updated":"2020-09-16T09:07:50.000Z","comments":true,"path":"2019/03/28/ReactNative_redux/","link":"","permalink":"http://mariogogogo.github.io/2019/03/28/ReactNative_redux/","excerpt":"é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°reduxï¼Œä»Šå¤©å°±ç”¨åŠ ç­æ—¶é—´æ¥é‡æ–°å¤ä¹ ä¸‹å­¦ä¹ ä¸€ä¸‹ï¼›ä¹‹å‰å‘è¡¨è¿‡reactçš„reduxï¼›","text":"é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°reduxï¼Œä»Šå¤©å°±ç”¨åŠ ç­æ—¶é—´æ¥é‡æ–°å¤ä¹ ä¸‹å­¦ä¹ ä¸€ä¸‹ï¼›ä¹‹å‰å‘è¡¨è¿‡reactçš„reduxï¼› å…ˆçœ‹ä¸‹å…·ä½“æµç¨‹æˆ‘ä»¬ä¸€ä¸€ä»‹ç» äº†è§£ä¸‹reduxç‰¹æ€§ å•ä¸€æ•°æ®æºï¼š æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚ State æ˜¯åªè¯»çš„ï¼šå”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚ ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹ï¼šä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚ é¢„è§æ€§ï¼šæ‰€æœ‰çš„ç”¨æˆ·çš„è¡Œä¸ºéƒ½æ˜¯ä½ æå‰å®šä¹‰å¥½çš„ã€‚ ç»Ÿä¸€ç®¡ç†stateï¼šæ‰€æœ‰çš„çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªstoreä¸­åˆ†é…ç®¡ç†ã€‚ å·¥ä½œæµç¨‹ ç”¨æˆ·ï¼ˆæ“ä½œviewï¼‰å‘å‡ºactionï¼Œå‘å‡ºçš„æ–¹å¼ç”¨dispatchæ–¹æ³•ï¼› ç„¶åstoreè°ƒç”¨redurceï¼Œå¹¶ä¼ å…¥2ä¸ªå‚æ•°ï¼ˆä¸€ä¸ªå½“å‰stateï¼Œä¸€ä¸ªæ”¶åˆ°çš„actionï¼‰ï¼Œreducerä¼šè¿”å›æ–°çš„stateï¼Œå¦‚æœæœ‰middlewareï¼Œstoreä¼šå°†å½“å‰stateå’Œæ”¶åˆ°çš„actionä¼ é€’ç»™middlewareï¼Œmiddlewareä¼šè°ƒç”¨reducerï¼Œè¿”å›æ–°çš„stateï¼› stateä¸€æ—¦æœ‰å˜åŒ–ï¼Œstoreå°±ä¼šç›‘å¬åˆ°ï¼Œæ¥æ›´æ–°Viewï¼› Reduxä¸Fluxçš„åŒºåˆ«Reduxæ˜¯Fluxæ€æƒ³çš„ä¸€ç§å®ç°ï¼ŒåŒæ—¶åˆåœ¨å…¶åŸºç¡€ä¸Šåšäº†æ”¹è¿›ã€‚Reduxç§‰æ‰¿äº†Fluxå•å‘æ•°æ®æµã€Storeæ˜¯å”¯ä¸€çš„æ•°æ®æºçš„æ€æƒ³ã€‚ Reduxä¸­æ²¡æœ‰Dispatcher: å®ƒä½¿ç”¨Storeçš„Store.dispatch0æ–¹æ³•æ¥æŠŠactionä¼ ç»™Store, ç”±äºæ‰€æœ‰çš„actionå¤„ç†éƒ½ä¼šç»è¿‡è¿™ä¸ªStore.dispatch0æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨Reduxä¸­å¾ˆå®¹æ˜“å®ç°Middlewareæœºåˆ¶ã€‚ Middlewareå¯ä»¥è®©ä½ åœ¨reduceræ‰§è¡Œå‰ä¸æ‰§è¡Œåè¿›è¡Œæ‹¦æˆªå¹¶æ’å…¥ä»£ç ï¼Œæ¥è¾¾åˆ°æ“ä½œactionå’ŒStoreçš„ç›®çš„ï¼Œè¿™æ ·-æ¥å°±å¾ˆå®¹æ˜“å®ç°çµæ´»çš„æ—¥å¿—æ‰“å°ã€é”™è¯¯æ”¶é›†ã€APIè¯·æ±‚ã€è·¯ç”±ç­‰æ“ä½œã€‚ Reduxåªæœ‰ä¸€ä¸ªStore: Fluxä¸­å…è®¸æœ‰å¤šä¸ªStore, ä½†æ˜¯Reduxä¸­åªå…è®¸æœ‰- ä¸ªï¼Œç›¸è¾ƒäºå¤šä¸ªStoreçš„Flux,ä¸€ä¸ªStoreæ›´åŠ æ¸…æ™°ï¼Œäº•æ˜“äºç®¡ç†;Reduxæœ‰é‚£å‡ éƒ¨åˆ†æ„æˆ? action: actionå°±æ˜¯ä¸€ ä¸ªæè¿°å‘ç”Ÿä»€ä¹ˆçš„å¯¹è±¡; reducer: å½¢å¼ä¸º(state, action) =&gt; stateçš„çº¯å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯æ ¹æ®action ä¿®æ”¹stateå°†å…¶è½¬å˜æˆä¸‹ä¸€ä¸ªstate; store: ç”¨äºå­˜å‚¨state, ä½ å¯ä»¥æŠŠå®ƒçœ‹æˆ-ä¸ªå®¹å™¨ï¼Œæ•´ä¸ªåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªstoreå®æˆ˜éƒ¨åˆ†åˆ›å»ºstore 1234567891011121314151617import &#123; createStore, applyMiddleware, compose &#125; from &#x27;redux&#x27;;//å¼‚æ­¥æ“ä½œimport thunk from &#x27;redux-thunk&#x27;;import createLogger from &#x27;redux-logger&#x27;;import rootReducer from &#x27;../reducers&#x27;;function configureStore(initialState) &#123; return createStore( rootReducer, initialState, compose(applyMiddleware(thunk, createLogger)) );&#125;const store = configureStore();export default store; é¦–å…ˆæœ€å¤–å±‚å¯¼å…¥store éœ€è¦è¾…åŠ©å·¥å…·redux-logger(è¿™ä¸ªä¼šæ‰“å°ä½ çš„æ‰€æœ‰ stateå’Œ actionå˜åŒ– , å»ºè®®ä½¿ç”¨)redux-thunk(ä¸­é—´ä»¶, ç”¨äºå¼‚æ­¥æ“ä½œ)react-navigation(å¦‚æœä½ è¦åšå¤šä¸ªé¡µé¢è·³è½¬å°±install) é’ˆå¯¹ä¸åŒåŠŸèƒ½ç‚¹å¯ä»¥è®¾ç½®ä¸åŒçš„reducer, æ‹†åˆ† reducer å¯¹ä¸€ä¸ªä¸åŒçš„æ“ä½œ, ç„¶åç”¨combineReducers åˆå¹¶æ‰€æœ‰çš„ reducer åˆ° rootReducer ç”¨æˆ·è§¦å‘action123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import React, &#123; Component &#125; from &quot;react&quot;;import &#123; View, Text, TextInput, Image, TouchableOpacity &#125; from &quot;react-native&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;import &#123; bindActionCreators &#125; from &quot;redux&quot;;import * as loginAction from &quot;../actions/LoginActions&quot;;import * as themeAction from &quot;../actions/ThemeActions&quot;;import &#123; NavigationActions &#125; from &quot;react-navigation&quot;;import MainPage from &quot;./MainPage&quot;;class LoginPage extends Component &#123; static navigationOptions = &#123; title: &quot;LoginPage&quot; &#125;; shouldComponentUpdate(nextProps, nextState) &#123; if (nextProps.status === &quot;ç™»å½•æˆåŠŸ&quot; &amp;&amp; nextProps.isSuccess) &#123; this.props.navigation.push(&quot;Main&quot;, &#123; user: nextProps.user &#125;); &#125; return true; &#125; render() &#123; const &#123; LoginAction &#125; = this.props; console.log(this.props); return ( &lt;View style=&#123;&#123; flex: 1, backgroundColor: &quot;#fff&quot;, alignItems: &quot;center&quot; &#125;&#125;&gt; &lt;TouchableOpacity style=&#123;&#123; backgroundColor: &quot;#cdcdcd&quot;, marginTop: 200 &#125;&#125; onPress=&#123;() =&gt; &#123; this.props.dispatch(loginAction.requireLogin()); // LoginAction() &#125;&#125; &gt; ......// apStateToProps(state) æŠŠ reducer é‡Œæ”¹å˜è¿‡çš„ state é€šè¿‡ props ä¼ é€’è¿‡æ¥function mapStateToProps(state) &#123; return &#123; status: state.LoginReducer.data.status, isSuccess: state.LoginReducer.data.isSuccess, user: state.LoginReducer.data.user, color: state.themeReducer.color &#125;;&#125;// è‡ªåŠ¨ç»‘å®š action creatorsåˆ° dispatch() å‡½æ•° è¿™ä¸ªå‡½æ•°ä¸€æ · æŠŠä½ è¦ dispatch çš„ action å½“åš props ä¼ é€’è¿‡æ¥ å¦‚æœè¿™ä¹ˆå†™ ä¸Šé¢çš„è§¦å‘ action çš„æ—¶å€™å°±ä¸è¦ this.prop.dispatch(xxxAction) äº† , å¯ä»¥ç›´æ¥å†™ this,props.LoginActionfunction matchDispatchToProps(dispatch) &#123; return &#123; LoginAction: bindActionCreators(loginAction.requireLogin, dispatch) &#125;;&#125;// connect è¿æ¥ç»„ä»¶ä¸ store ,ä»»ä½•æ—¶å€™åªè¦ store å‘ç”Ÿæ”¹å˜, mapStateToProps éƒ½ä¼šè¢«è°ƒç”¨, å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°é‡Œæœ‰ä¸¤ä¸ªå‚æ•° åˆ†åˆ«æ˜¯mapStateToProps matchDispatchToPropsexport default connect(mapStateToProps)(LoginPage); æ‰§è¡Œactionæ–¹æ³•12345678910111213141516&#x27;use strict&#x27;;import * as types from &#x27;../constants/LoginTypes&#x27;;import &#123; loginRequest &#125; from &#x27;../API/loginRequest&#x27;;export function login_out(data) &#123; return &#123; type: types.LOGIN_IN_OUT, data &#125;&#125;// å¼‚æ­¥çš„Action éœ€è¦è¿”å›çš„æ˜¯ä¸€ä¸ª function åœ¨ createStore æ—¶ç”±middleWare åšå¤„ç† æ™®é€šçš„action ç›´æ¥è¿”å›çº¯å¯¹è±¡å³å¯export function requireLogin() &#123; return loginRequest();&#125; æ‰§è¡Œapiaction.jsä¸­çš„æ–¹æ³•ï¼Œstore-ã€‹reducer12345678910111213import *as loginActions from &#x27;../actions/LoginActions&#x27;;// å¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚æ–¹æ³• åœ¨è¿™é‡Œå†è¿›è¡Œ dispatch Actionexport function loginRequest(action) &#123; return dispatch =&gt; &#123; dispatch(loginActions.login_doing(doingData)); let result = fetch(url) .then(res =&gt; &#123; dispatch(loginActions.login_done(doneData)); &#125;).catch(err =&gt; &#123; dispatch(loginActions.login_err(errData)); &#125;); &#125;&#125; é€šè¿‡reducerè¿”å›æ–°çš„state12345678export default function loginIn(state = initialState, action) &#123; console.log(state.type,action); switch (action.type) &#123; case types.LOGIN_IN_DOING: return &#123; ...state, data: action.data &#125; æœ€åé‡æ–°æ ¹æ®storeä¸­çš„stateæ›´æ–°View12345678910111213141516171819202122232425262728293031323334353637383940414243import React, &#123; Component &#125; from &quot;react&quot;;import &#123; View, Text, TextInput, Image, TouchableOpacity &#125; from &quot;react-native&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;import &#123; bindActionCreators &#125; from &quot;redux&quot;;import * as loginAction from &quot;../actions/LoginActions&quot;;import * as themeAction from &quot;../actions/ThemeActions&quot;;import &#123; NavigationActions &#125; from &quot;react-navigation&quot;;import MainPage from &quot;./MainPage&quot;;class LoginPage extends Component &#123; static navigationOptions = &#123; title: &quot;LoginPage&quot; &#125;; shouldComponentUpdate(nextProps, nextState) &#123; if (nextProps.status === &quot;ç™»å½•æˆåŠŸ&quot; &amp;&amp; nextProps.isSuccess) &#123; this.props.navigation.push(&quot;Main&quot;, &#123; user: nextProps.user &#125;); &#125; return true; &#125; ... // è¿™ä¸ªå‡½æ•°æœ€æ­£ç¡®çš„åå­—åº”è¯¥å« mapStateToProps(state) æŠŠ reducer é‡Œæ”¹å˜è¿‡çš„ state é€šè¿‡ props ä¼ é€’è¿‡æ¥function mapStateToProps(state) &#123; return &#123; status: state.LoginReducer.data.status, isSuccess: state.LoginReducer.data.isSuccess, user: state.LoginReducer.data.user, color: state.themeReducer.color &#125;;&#125;// è‡ªåŠ¨ç»‘å®š action creatorsåˆ° dispatch() å‡½æ•° è¿™ä¸ªå‡½æ•°ä¸€æ · æŠŠä½ è¦ dispatch çš„ action å½“åš props ä¼ é€’è¿‡æ¥ å¦‚æœè¿™ä¹ˆå†™ ä¸Šé¢çš„è§¦å‘ action çš„æ—¶å€™å°±ä¸è¦ this.prop.dispatch(xxxAction) äº† , å¯ä»¥ç›´æ¥å†™ this,props.LoginActionfunction matchDispatchToProps(dispatch) &#123; return &#123; LoginAction: bindActionCreators(loginAction.requireLogin, dispatch) &#125;;&#125;// connect è¿æ¥ç»„ä»¶ä¸ store ,ä»»ä½•æ—¶å€™åªè¦ store å‘ç”Ÿæ”¹å˜, mapStateToProps éƒ½ä¼šè¢«è°ƒç”¨, å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°é‡Œæœ‰ä¸¤ä¸ªå‚æ•° åˆ†åˆ«æ˜¯mapStateToProps matchDispatchToPropsexport default connect(mapStateToProps)(LoginPage);//export default connect(select)(LoginPage) è®²å®Œå†é€ä¸€å¼ å›¾ç†è§£ä¸‹æ•´ä¸ªè¿‡ç¨‹ Githubé¡¹ç›®åœ°å€","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"å¤šç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ","slug":"å¤šç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ","date":"2019-03-07T16:00:00.000Z","updated":"2020-09-16T09:07:01.000Z","comments":true,"path":"2019/03/08/å¤šç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://mariogogogo.github.io/2019/03/08/%E5%A4%9A%E7%A7%8D%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"åŒæºç­–ç•¥ï¼Ÿå¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚","text":"åŒæºç­–ç•¥ï¼Ÿå¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚ ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸè¿™ä¸ªé—®é¢˜å‡ºç°å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥å¯¼è‡´äº†è·¨åŸŸï¼Œå°±æ˜¯æµè§ˆå™¨åœ¨æäº‹æƒ…æµè§ˆå™¨ä¸ºä»€ä¹ˆè¦æäº‹æƒ…ï¼Ÿå°±æ˜¯ä¸æƒ³ç»™å¥½æ—¥å­æˆ‘ä»¬è¿‡ï¼Ÿå¯¹äºè¿™æ ·çš„è´¨é—®ï¼Œæµè§ˆå™¨ç”©é”…é“ï¼šâ€œåŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚â€ cookie LocalStorageåªæ”¯æŒåŒæºä¸‹ Domå…ƒç´ ä¹ŸåŒæºç­–ç•¥ iframe ï¼ˆiframeé‡Œå¼„ä¸€ä¸ªç™¾åº¦è´¦å·ï¼‰ ajaxä¸æ”¯æŒè·¨åŸŸ å®ç°è·¨åŸŸå‰ç«¯æ”¾ä¸€ä¸ªæœåŠ¡å™¨ï¼Œåå°æ”¾ä¸€ä¸ªæœåŠ¡å™¨éœ€è¦é€šä¿¡è¦å®ç°è·¨åŸŸ jsonp ï¼ˆåªæ”¯æŒgetï¼‰ cors postMessage document.domain window.name location.hash http-proxy nginx websocket ä¸€ã€ é€šè¿‡jsonpè·¨åŸŸjsonp123456789&lt;script&gt; // ç™¾åº¦ï¼šhttps://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=h&amp;cb=show function show(data) &#123; console.log(data); &#125; &lt;!--show(&#123; q: &quot;h&quot;, p: false, s: [&quot;hahaæ–°æ­Œ&quot;, &quot;è™ç‰™&quot;, &quot;èŠ±ç“£&quot;, &quot;æµ·è´¼ç‹&quot;, &quot;è™ç‰™ç›´æ’­&quot;, &quot;åä¸º&quot;, &quot;è™æ‰‘&quot;, &quot;æ±‡ç‡&quot;, &quot;èŠ±ç“£ç½‘&quot;, &quot;åä¸ºå•†åŸ&quot;] &#125;);--&gt; &lt;/script&gt; //æˆ–è€… &lt;script src=&quot;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=h&amp;cb=show&quot;&gt;&lt;/script&gt; 1234567891011121314151617181920212223242526272829303132333435363738//ç®€å•å°è£…jsonp function jsonp(&#123; url, params, cb &#125;) &#123; return new Promise((resolve, reject) =&gt; &#123; let script = document.createElement(&#x27;script&#x27;); window[cb] = function (data) &#123; resolve(data) window.document.head.removeChild(script); &#125; params = &#123; ...params, cb &#125; //wd=h&amp;cb=show let arr = [] for (let key in params) &#123; arr.push(`$&#123;key&#125;=$&#123;params[key]&#125;`) &#125; script.src = `$&#123;url&#125;?$&#123;arr.join(&#x27;&amp;&#x27;)&#125;` console.log(script.src); window.document.head.appendChild(script); &#125;) &#125; //ç¼ºç‚¹åªèƒ½getï¼Œå¯ä»¥xssæ”»å‡» //è°ƒç”¨ jsonp(&#123; url: &#x27;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su&#x27;, params: &#123; wd: &#x27;h&#x27; &#125;, cb:&#x27;show&#x27; &#125;).then(data=&gt;&#123; console.log(data); &#125;) äºŒã€ è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰æ™®é€šè·¨åŸŸè¯·æ±‚ï¼šåªæœåŠ¡ç«¯è®¾ç½®Access-Control-Allow-Originå³å¯ï¼Œå‰ç«¯æ— é¡»è®¾ç½®ï¼Œè‹¥è¦å¸¦cookieè¯·æ±‚ï¼šå‰åç«¯éƒ½éœ€è¦è®¾ç½®ã€‚ éœ€æ³¨æ„çš„æ˜¯ï¼šç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæ‰€è¯»å–çš„cookieä¸ºè·¨åŸŸè¯·æ±‚æ¥å£æ‰€åœ¨åŸŸçš„cookieï¼Œè€Œéå½“å‰é¡µã€‚å¦‚æœæƒ³å®ç°å½“å‰é¡µcookieçš„å†™å…¥ï¼Œå¯å‚è€ƒä¸‹æ–‡ï¼šä¸ƒã€nginxåå‘ä»£ç†ä¸­è®¾ç½®proxy_cookie_domain å’Œ å…«ã€NodeJsä¸­é—´ä»¶ä»£ç†ä¸­cookieDomainRewriteå‚æ•°çš„è®¾ç½®ã€‚ ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½(IE8+ï¼šIE8/9éœ€è¦ä½¿ç”¨XDomainRequestå¯¹è±¡æ¥æ”¯æŒCORSï¼‰)ï¼ŒCORSä¹Ÿå·²ç»æˆä¸ºä¸»æµçš„è·¨åŸŸè§£å†³æ–¹æ¡ˆã€‚ å¦‚æœåªæ˜¯å•çº¯çš„3000ç«¯å£è¯·æ±‚4000ç«¯å£ 12345678910111213141516171819let express = require(&#x27;express&#x27;);let app = express();app.get(&#x27;/getData&#x27;,function(req,res) &#123; res.end(&#x27;you look 4000&#x27;)&#125;)app.listen(&#x27;4000&#x27;);console.log(&#x27;å¯åŠ¨4000&#x27;);//===============================let express = require(&#x27;express&#x27;);let app = express();app.use(express.static(__dirname))app.listen(&#x27;3000&#x27;);console.log(&#x27;å¯åŠ¨&#x27;); è¯·æ±‚å¤´çš„æ•°æ®è¯·æ±‚å‘è¿‡æ¥äº†è¢«æµè§ˆå™¨å±è”½äº†è§£å†³ï¼šserver2.js1234567891011//ç™½åå•let whitelist = [&#x27;http://localhost:3000&#x27;]app.use(function(req,res,next)&#123; let origin = req.headers.origin; if(whitelist.includes(origin))&#123; //è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘ res.setHeader(&quot;Access-Control-Allow-Origin&quot;, origin); &#125; next();&#125;)...å…¶ä»–è¯·æ±‚æ–¹å¼ 1res.setHeader(&#x27;Access-Control-Allow-Headers&#x27;,&#x27;name&#x27;); è¿˜å¯èƒ½å‡ºç°è¿™ä¸ªé—®é¢˜ 123456789//è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘ res.setHeader(&quot;Access-Control-Allow-Origin&quot;, origin); //è®¾ç½®è¯·æ±‚å¤´ res.setHeader(&#x27;Access-Control-Allow-Headers&#x27;,&#x27;name&#x27;); res.setHeader(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;PUT&#x27;); res.setHeader(&#x27;Access-Control-Max-Age&#x27;, 6); if (req.method === &quot;OPTIONS&quot;) &#123; res.end(); //PUTè¯·æ±‚ä¸åšä»»ä½•å¤„ç† &#125; å¯ä»¥æºå¸¦cookie è·å–æŸä¸ªå¤´ å®Œæ•´ä»£ç html12345678910111213141516 var xhr = new XMLHttpRequest(); // IE8/9éœ€ç”¨window.XDomainRequestå…¼å®¹ // å‰ç«¯è®¾ç½®æ˜¯å¦å¸¦cookie xhr.withCredentials = true; document.cookie = &quot;cook=chan&quot;; xhr.open(&#x27;get&#x27;, &#x27;http://localhost:4000/getData&#x27;, true); xhr.setRequestHeader(&#x27;name&#x27;,&#x27;chan&#x27;) // xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;); xhr.onreadystatechange = function () &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; console.log(xhr.responseText);console.log(xhr.getResponseHeader(&#x27;name&#x27;)); &#125; else if (xhr.readyState == 304) &#123; onsole.log(xhr.responseText); &#125; &#125;; xhr.send();server2.js1234567891011121314151617181920212223242526272829303132333435363738let express = require(&#x27;express&#x27;);let app = express();//ç™½åå•let whitelist = [&#x27;http://localhost:3000&#x27;]app.use(function(req,res,next)&#123; console.log(req.headers); let origin = req.headers.origin; if(whitelist.includes(origin))&#123; //è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘ // res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &#x27;*&#x27;); //ä»»åŠ¡æ¥å£ res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &#x27;*&#x27;); //ä»»åŠ¡æ¥å£ res.setHeader(&quot;Access-Control-Allow-Origin&quot;, origin); //è®¾ç½®å“ªä¸ªå¤´è®¿é—®æˆ‘ res.setHeader(&#x27;Access-Control-Allow-Headers&#x27;,&#x27;name&#x27;); //å…è®¸å“ªä¸ªæ–¹æ³•è®¿é—®æˆ‘ res.setHeader(&#x27;Access-Control-Allow-Methods&#x27;,&#x27;PUT&#x27;); // å…è®¸æºå¸¦cookie (å¦‚æœAllow-Originå¸¦*å·å°±ä¸èƒ½è®¾ç½®è¿™ä¸ª) res.setHeader(&#x27;Access-Control-Allow-Credentials&#x27;,true); // é¢„æ£€å­˜æ´»æ—¶é—´ res.setHeader(&#x27;Access-Control-Max-Age&#x27;, 6); // å…è®¸å‰ç«¯è·å–æŸä¸ªå¤´(è¿”å›çš„å¤´) res.setHeader(&#x27;Access-Control-Expose-Headers&#x27;, &#x27;name&#x27;); if (req.method === &quot;OPTIONS&quot;) &#123; res.end(); //PUTè¯·æ±‚ä¸åšä»»ä½•å¤„ç† &#125; &#125; next();&#125;)app.get(&#x27;/getData&#x27;, function (req, res) &#123; res.setHeader(&#x27;name&#x27;,&#x27;chan&#x27;) //è¿”å›æŸä¸ªå¤´ res.end(&#x27;you get 4000&#x27;)&#125;)app.put(&#x27;/getData&#x27;,function(req,res) &#123; res.end(&#x27;you look 4000&#x27;)&#125;)app.listen(&#x27;4000&#x27;);console.log(&#x27;å¯åŠ¨4000&#x27;); ä¸‰ã€ postMessageè·¨åŸŸpostMessageæ˜¯HTML5 XMLHttpRequest Level 2ä¸­çš„APIï¼Œä¸”æ˜¯ä¸ºæ•°ä¸å¤šå¯ä»¥è·¨åŸŸæ“ä½œçš„windowå±æ€§ä¹‹ä¸€ï¼Œå®ƒå¯ç”¨äºè§£å†³ä»¥ä¸‹æ–¹é¢çš„é—®é¢˜ï¼ša.ï¼‰ é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’b.ï¼‰ å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’c.ï¼‰ é¡µé¢ä¸åµŒå¥—çš„iframeæ¶ˆæ¯ä¼ é€’d.ï¼‰ ä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„è·¨åŸŸæ•°æ®ä¼ é€’ ç”¨æ³•ï¼špostMessage(data,origin)æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•° dataï¼š html5è§„èŒƒæ”¯æŒä»»æ„åŸºæœ¬ç±»å‹æˆ–å¯å¤åˆ¶çš„å¯¹è±¡ï¼Œä½†éƒ¨åˆ†æµè§ˆå™¨åªæ”¯æŒå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¼ å‚æ—¶æœ€å¥½ç”¨JSON.stringify()åºåˆ—åŒ–ã€‚ originï¼š åè®®+ä¸»æœº+ç«¯å£å·ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºâ€*â€ï¼Œè¡¨ç¤ºå¯ä»¥ä¼ é€’ç»™ä»»æ„çª—å£ï¼Œå¦‚æœè¦æŒ‡å®šå’Œå½“å‰çª—å£åŒæºçš„è¯è®¾ç½®ä¸ºâ€/â€œã€‚ a.html 12345678910&lt;iframe id=&quot;frame&quot; src=&quot;http://localhost:4000/b.html&quot; frameborder=&quot;0&quot; onload=&quot;sayb()&quot;&gt;&lt;/iframe&gt; &lt;script&gt; function sayb() &#123; let frame = document.getElementById(&quot;frame&quot;); frame.contentWindow.postMessage(&#x27;bé¡µé¢ä½ å¥½&#x27;, &#x27;http://localhost:4000&#x27;); window.onmessage = function (e) &#123; console.log(e.data); &#125; &#125; &lt;/script&gt; b.html 1234567&lt;script&gt; window.onmessage &#x3D; function(e) &#123; console.log(e.data); console.log(e); e.source.postMessage(&#39;a.htmlä½ &#39;,e.origin) &#125; &lt;&#x2F;script&gt; eçš„å‚æ•° å››ã€ document.domain+ iframeè·¨åŸŸæ­¤æ–¹æ¡ˆä»…é™ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„è·¨åŸŸåº”ç”¨åœºæ™¯ã€‚å®ç°åŸç†ï¼šä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡jså¼ºåˆ¶è®¾ç½®document.domainä¸ºåŸºç¡€ä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚åŸŸåä¸€çº§åŸŸå äºŒçº§åŸŸå www.baidu.com video.baidu.coma.html12345&lt;iframe id=&quot;iframe&quot; src=&quot;http://localhost:3000/b.html&quot;&gt;&lt;/iframe&gt;&lt;script&gt; document.domain = &#x27;domain.com&#x27;; var user = &#x27;admin&#x27;;&lt;/script&gt; b.html12345&lt;script&gt; document.domain = &#x27;domain.com&#x27;; // è·å–çˆ¶çª—å£ä¸­å˜é‡ alert(&#x27;get js data from parent ---&gt; &#x27; + window.parent.user);&lt;/script&gt; äº”ã€ WebSocketåè®®è·¨åŸŸWebSocket protocolæ˜¯HTML5ä¸€ç§æ–°çš„åè®®ã€‚å®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶å…è®¸è·¨åŸŸé€šè®¯ï¼Œæ˜¯server pushæŠ€æœ¯çš„ä¸€ç§å¾ˆå¥½çš„å®ç°ã€‚åŸç”ŸWebSocket APIä½¿ç”¨èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨Socket.ioï¼Œå®ƒå¾ˆå¥½åœ°å°è£…äº†webSocketæ¥å£ï¼Œæä¾›äº†æ›´ç®€å•ã€çµæ´»çš„æ¥å£ï¼Œä¹Ÿå¯¹ä¸æ”¯æŒwebSocketçš„æµè§ˆå™¨æä¾›äº†å‘ä¸‹å…¼å®¹ã€‚a.html12345678910// é«˜çº§api ä¸å…¼å®¹socket.io; // (ä¸€èˆ¬ä¸ä½¿ç”¨) let socket = new WebSocket(&#x27;ws://localhost:3000&#x27;); socket.onopen = function () &#123; socket.send(&#x27;æˆ‘æ¥è·¨åŸŸäº†&#x27;) &#125; socket.onmessage=function(e)&#123; console.log(e); console.log(e.data); &#125; server.js12345678910111213let express = require(&#x27;express&#x27;);let app = express();let WebSocket = require(&#x27;ws&#x27;);let wss = new WebSocket.Server(&#123;port:3000&#125;);wss.on(&#x27;connection&#x27;,function(ws) &#123; ws.on(&#x27;message&#x27;,function(data)&#123; console.log(data) //å‘é€ ws.send(&#x27;æ¥å—åˆ°æ¶ˆæ¯äº†å“ˆå“ˆ&#x27;) &#125;)&#125;) å…­ã€ location.hash + iframeè·¨åŸŸï¼ˆå¾ˆlowï¼‰å®ç°åŸç†ï¼š aæ¬²ä¸bè·¨åŸŸç›¸äº’é€šä¿¡ï¼Œé€šè¿‡ä¸­é—´é¡µcæ¥å®ç°ã€‚ ä¸‰ä¸ªé¡µé¢ï¼Œä¸åŒåŸŸä¹‹é—´åˆ©ç”¨iframeçš„location.hashä¼ å€¼ï¼Œç›¸åŒåŸŸä¹‹é—´ç›´æ¥jsè®¿é—®æ¥é€šä¿¡ã€‚aå’Œbæ˜¯åŒåŸŸ http://localhost:3000cæ˜¯ç‹¬ç«‹çš„åŸŸ http://localhost:4000å…·ä½“å®ç°ï¼šAåŸŸï¼ša.html -&gt; cåŸŸï¼šc.html -&gt; båŸŸï¼šb.htmlï¼Œaç»™cä¼ ä¸€ä¸ªhashå€¼ï¼Œcæ”¶åˆ°hashå€¼åï¼ŒcæŠŠhashå€¼ä¼ é€’ç»™bï¼Œbå°†ç»“æœæ”¾åˆ°açš„hashå€¼ä¸­ a.html123456&lt;iframe src=&quot;http://localhost:4000/c.html#abc&quot;&gt;&lt;/iframe&gt; &lt;script&gt; window.onhashchange = function() &#123; console.log(location.hash); &#125; &lt;/script&gt;c.html 123456&lt;script&gt; console.log(location.hash); //#abc let frame = document.createElement(&quot;iframe&quot;); frame.src = &quot;http://localhost:3000/b.html#youcanbb&quot; document.body.appendChild(frame) &lt;/script&gt; b.html 12345&lt;script&gt; //çˆ¸çˆ¸çš„çˆ¸çˆ¸ window.parent.parent.location.hash = location.hash; console.log(location.hash);&lt;/script&gt; ä¸ƒã€ window.name + iframeè·¨åŸŸwindow.nameå±æ€§çš„ç‹¬ç‰¹ä¹‹å¤„ï¼šnameå€¼åœ¨ä¸åŒçš„é¡µé¢ï¼ˆç”šè‡³ä¸åŒåŸŸåï¼‰åŠ è½½åä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒéå¸¸é•¿çš„ name å€¼ï¼ˆ2MBï¼‰ æ —å­aå’Œbæ˜¯åŒåŸŸ http://localhost:3000cæ˜¯ç‹¬ç«‹çš„åŸŸ http://localhost:4000 aè·å–cçš„æ•°æ®aå…ˆå¼•ç”¨c cæŠŠå€¼æ”¾åˆ°window.name,æŠŠaå¼•ç”¨çš„åœ°å€æ”¹åˆ°ba.html12345678910111213&lt;iframe id=&quot;frame&quot; src=&quot;http://localhost:4000/c.html&quot; frameborder=&quot;0&quot; onload=&quot;load()&quot;&gt;&lt;/iframe&gt; &lt;script&gt; let first = true; function load() &#123; if (first) &#123; let frame = document.getElementById(&quot;frame&quot;); frame.src = &quot;http://localhost:3000/b.html&quot; first = false; &#125; else &#123; console.log(frame.contentWindow.name); &#125; &#125; &lt;/script&gt;b.htmlç©ºc.html1234567891011121314&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; window.name=&quot;æˆ‘æ˜¯c&quot; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å…«ã€ nginxä»£ç†è·¨åŸŸ1ã€ nginxé…ç½®è§£å†³iconfontè·¨åŸŸæµè§ˆå™¨è·¨åŸŸè®¿é—®jsã€cssã€imgç­‰å¸¸è§„é™æ€èµ„æºè¢«åŒæºç­–ç•¥è®¸å¯ï¼Œä½†iconfontå­—ä½“æ–‡ä»¶(eot|otf|ttf|woff|svg)ä¾‹å¤–ï¼Œæ­¤æ—¶å¯åœ¨nginxçš„é™æ€èµ„æºæœåŠ¡å™¨ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ã€‚ 123location / &#123; add_header Access-Control-Allow-Origin *;&#125; 2ã€ nginxåå‘ä»£ç†æ¥å£è·¨åŸŸè·¨åŸŸåŸç†ï¼š åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œä¸æ˜¯HTTPåè®®çš„ä¸€éƒ¨åˆ†ã€‚æœåŠ¡å™¨ç«¯è°ƒç”¨HTTPæ¥å£åªæ˜¯ä½¿ç”¨HTTPåè®®ï¼Œä¸ä¼šæ‰§è¡ŒJSè„šæœ¬ï¼Œä¸éœ€è¦åŒæºç­–ç•¥ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è·¨è¶Šé—®é¢˜ã€‚ å®ç°æ€è·¯ï¼šé€šè¿‡nginxé…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼ˆåŸŸåä¸domain1ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰åšè·³æ¿æœºï¼Œåå‘ä»£ç†è®¿é—®domain2æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é¡ºä¾¿ä¿®æ”¹cookieä¸­domainä¿¡æ¯ï¼Œæ–¹ä¾¿å½“å‰åŸŸcookieå†™å…¥ï¼Œå®ç°è·¨åŸŸç™»å½•ã€‚ nginxå…·ä½“é…ç½®ï¼š 1234567891011121314#proxyæœåŠ¡å™¨server &#123; listen 81; server_name www.domain1.com; location / &#123; proxy_pass http://www.domain2.com:8080; #åå‘ä»£ç† proxy_cookie_domain www.domain2.com www.domain1.com; #ä¿®æ”¹cookieé‡ŒåŸŸå index index.html index.htm; # å½“ç”¨webpack-dev-serverç­‰ä¸­é—´ä»¶ä»£ç†æ¥å£è®¿é—®nignxæ—¶ï¼Œæ­¤æ—¶æ— æµè§ˆå™¨å‚ä¸ï¼Œæ•…æ²¡æœ‰åŒæºé™åˆ¶ï¼Œä¸‹é¢çš„è·¨åŸŸé…ç½®å¯ä¸å¯ç”¨ add_header Access-Control-Allow-Origin http://www.domain1.com; #å½“å‰ç«¯åªè·¨åŸŸä¸å¸¦cookieæ—¶ï¼Œå¯ä¸º* add_header Access-Control-Allow-Credentials true; &#125;&#125; å‰ç«¯ä»£ç ï¼š 12345678var xhr = new XMLHttpRequest();// å‰ç«¯å¼€å…³ï¼šæµè§ˆå™¨æ˜¯å¦è¯»å†™cookiexhr.withCredentials = true;// è®¿é—®nginxä¸­çš„ä»£ç†æœåŠ¡å™¨xhr.open(&#x27;get&#x27;, &#x27;http://www.domain1.com:81/?user=admin&#x27;, true);xhr.send(); Nodejsåå°ï¼š123456789101112131415161718var http = require(&#x27;http&#x27;);var server = http.createServer();var qs = require(&#x27;querystring&#x27;);server.on(&#x27;request&#x27;, function(req, res) &#123; var params = qs.parse(req.url.substring(2)); // å‘å‰å°å†™cookie res.writeHead(200, &#123; &#x27;Set-Cookie&#x27;: &#x27;l=a123456;Path=/;Domain=www.domain2.com;HttpOnly&#x27; // HttpOnly:è„šæœ¬æ— æ³•è¯»å– &#125;); res.write(JSON.stringify(params)); res.end();&#125;);server.listen(&#x27;8080&#x27;);console.log(&#x27;Server is running at port 8080...&#x27;); æ€»ç»“ä»Šå¤©å·¥ä½œä¸æ˜¯å¾ˆå¤šï¼Œç”¨äº†ä¸€å¤©æ—¶é—´æ€»ç»“äº†ä¸‹ã€‚åŠªåŠ›ï¼æœ€åç¥å¤©ä¸‹å¥³äººèŠ‚æ—¥å¿«ä¹O(âˆ©_âˆ©)Oå“ˆå“ˆ~","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"Vueä¸­çš„ç®€å•åŠ¨ç”»","slug":"Vueä¸­çš„ç®€å•åŠ¨ç”»","date":"2019-03-03T16:00:00.000Z","updated":"2020-09-16T09:07:56.000Z","comments":true,"path":"2019/03/04/Vueä¸­çš„ç®€å•åŠ¨ç”»/","link":"","permalink":"http://mariogogogo.github.io/2019/03/04/Vue%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E5%8A%A8%E7%94%BB/","excerpt":"ä¸€ä¸ªAppå¦‚æœæœ‰å¥½çš„åŠ¨ç”»æ•ˆæœå¯ä»¥ä¸ºç¨‹åºé”¦ä¸Šæ·»èŠ±ï¼Œç»™ç”¨æˆ·ç•™ä¸‹éå¸¸å¥½çš„å°è±¡ï¼›ä»Šå¤©æ¥å­¦ä¹ ä¸‹Vueçš„åŠ¨ç”»æˆ‘ä»¬å…ˆé‡å­¦transitionï¼›","text":"ä¸€ä¸ªAppå¦‚æœæœ‰å¥½çš„åŠ¨ç”»æ•ˆæœå¯ä»¥ä¸ºç¨‹åºé”¦ä¸Šæ·»èŠ±ï¼Œç»™ç”¨æˆ·ç•™ä¸‹éå¸¸å¥½çš„å°è±¡ï¼›ä»Šå¤©æ¥å­¦ä¹ ä¸‹Vueçš„åŠ¨ç”»æˆ‘ä»¬å…ˆé‡å­¦transitionï¼›é¦–å…ˆçœ‹ä¸‹animationä¸transitionçš„åŒºåˆ«ï¼šå…¶ä¸»è¦åŒºåˆ«åœ¨äºï¼štransitionéœ€è¦è§¦å‘ä¸€ä¸ªäº‹ä»¶æ‰ä¼šéšç€æ—¶é—´æ”¹å˜å…¶CSSå±æ€§ï¼›animationåœ¨ä¸éœ€è¦è§¦å‘ä»»ä½•äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼çš„éšæ—¶é—´å˜åŒ–æ¥æ”¹å˜å…ƒç´ CSSå±æ€§ï¼Œè¾¾åˆ°ä¸€ç§åŠ¨ç”»çš„æ•ˆæœ1ï¼‰åŠ¨ç”»ä¸éœ€è¦äº‹ä»¶è§¦å‘ï¼Œè¿‡æ¸¡éœ€è¦ã€‚2ï¼‰è¿‡æ¸¡åªæœ‰ä¸€ç»„ï¼ˆä¸¤ä¸ªï¼šå¼€å§‹-ç»“æŸï¼‰ å…³é”®å¸§ï¼ŒåŠ¨ç”»å¯ä»¥è®¾ç½®å¤šä¸ªã€‚ å…ˆæ¥çœ‹ä¸ªä¸¾ä¸ªç®€å•æ —å­1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;img width=&quot;25%&quot; src=&quot;./assets/logo.png&quot; /&gt; &lt;button @click=&quot;toggleShow&quot;&gt; &lt;span v-if=&quot;isShowing&quot;&gt;Hide child&lt;/span&gt; &lt;span v-else&gt;Show child&lt;/span&gt; &lt;/button&gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;Close&lt;/button&gt; &lt;/app-child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./components/child&quot;;export default &#123; name: &quot;App&quot;, components: &#123; appChild: Child &#125;, data() &#123; return &#123; isShowing: false &#125;; &#125;, methods: &#123; toggleShow() &#123; this.isShowing = !this.isShowing; &#125; &#125;&#125;;&lt;/script&gt; demoä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯ä»¥æ­£å¸¸å·¥ä½œä½†æ˜¯æ•ˆæœå¤ªåƒµç¡¬ Vueä¸­transitionVue æä¾›äº† transition çš„å°è£…ç»„ä»¶ï¼Œåœ¨ä¸‹åˆ—æƒ…å½¢ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥/ç¦»å¼€è¿‡æ¸¡ æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ v-if) æ¡ä»¶å±•ç¤º (ä½¿ç”¨ v-show) åŠ¨æ€ç»„ä»¶ ç»„ä»¶æ ¹èŠ‚ç‚¹ åœ¨Vueä¸­æœ‰ä¸€ä¸ª&lt;transition&gt;å…ƒç´ ä»£è¡¨ä¸€ä¸ªç›’å­ï¼Œåœ¨è¿™ä¸ªç›’å­é‡Œæˆ‘ä»¬å¤„ç†å…ƒç´ æˆ–è€…ç»„ä»¶ä¸Šçš„åŠ¨ç”»æ•ˆæœã€‚ &lt;transition&gt;æ˜¯Vueå·²ç»å°è£…å¥½çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥æˆ–ç¦»å¼€è¿‡æ¸¡æ•ˆæœã€‚12345 &lt;transition name=&quot;fade&quot;&gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;Close&lt;/button&gt; &lt;/app-child&gt;&lt;/transition&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°æˆçš„ &lt;transition&gt; ç»„ä»¶ã€‚è¿‡æ¸¡é’©å­ä¼šæ·»åŠ  v- å‰ç¼€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨ã€‚å…¶ä¸­ enter/leave å®šä¹‰åŠ¨ç”»å¼€å§‹ç¬¬ä¸€å¸§çš„ä½ç½®ï¼Œ enter-active/leave-active å®šä¹‰åŠ¨ç”»è¿è¡Œé˜¶æ®µâ€”â€” ä½ éœ€è¦æŠŠåŠ¨ç”»å±æ€§æ”¾åœ¨è¿™é‡Œ enter-to/leave-to æŒ‡å®šå…ƒç´ åœ¨æœ€åä¸€å¸§ä¸Šçš„ä½ç½®ã€‚ æˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨é»˜è®¤çš„v-å‰ç¼€ï¼Œæ­£å¦‚ä½ çœ‹åˆ°çš„æˆ‘ä½¿ç”¨çš„æ˜¯äº†ä¸€ä¸ª name å±æ€§: name=&quot;fade&quot; ã€‚å±æ€§åå¿…é¡»ä¸åŠ¨ç”»æ•ˆæœåç›¸è¿‘ã€‚ è®©æˆ‘ä»¬åˆ›å»ºä¸‹cssæ ·å¼ 1234567.fade-enter-active, .fade-leave-active &#123; transition: opacity 0.25s ease-out;&#125;.fade-enter, .fade-leave-to &#123; opacity: 0;&#125; æˆ‘å°† .fade-enterå’Œ .fade-leave-toå±æ€§è®¾ç½®ä¸º opacity: 0 ã€‚è¿™æ˜¯åŠ¨ç”»çš„åˆå§‹å’Œç»“æŸä½ç½®ï¼Œè½½å…¥æ—¶çš„åˆå§‹çŠ¶æ€ï¼Œå¸è½½æ—¶çš„ç»“æŸçŠ¶æ€ã€‚ä½ å¯èƒ½è®¤ä¸º .fade-enter-to å’Œ .fade-leave åº”è¯¥è®¾ç½® opacity: 1 ã€‚ä½†æ˜¯æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºå®ƒæ˜¯ç»„ä»¶çš„é»˜è®¤çŠ¶æ€ï¼Œæ‰€ä»¥è¿™å°†æ˜¯å¤šä½™çš„ã€‚CSS è¿‡æ¸¡å’ŒåŠ¨ç”»å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨é»˜è®¤çŠ¶æ€ã€‚ æˆ‘ä»¬å†ä¼˜åŒ–ä¸‹å¦‚æœç„¦ç‚¹éƒ½æ”¾åœ¨å¼¹çª—ä¸Šï¼Œåˆ™èƒŒæ™¯æ˜¯å¦éœ€è¦è™šåŒ–ï¼Œå¦‚æœæŠŠèƒŒæ™¯è™šåŒ–åˆ™ä¸èƒ½æ”¾åœ¨transitionç»„ä»¶ä¸Š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;div :class=&quot;[isShowing ? blurClass : &#x27;&#x27;, bkClass]&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt; &lt;span v-if=&quot;isShowing&quot;&gt;Hide child&lt;/span&gt; &lt;span v-else&gt;Show child&lt;/span&gt; &lt;/button&gt; &lt;/div&gt; &lt;transition name=&quot;fade&quot;&gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;Close&lt;/button&gt; &lt;/app-child&gt; &lt;/transition&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./components/child&quot;;export default &#123; name: &quot;App&quot;, components: &#123; appChild: Child &#125;, data() &#123; return &#123; isShowing: false, bkClass: &quot;bk&quot;, blurClass: &quot;blur&quot; &#125;; &#125;, methods: &#123; toggleShow() &#123; this.isShowing = !this.isShowing; &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;.fade-enter-active,.fade-leave-active &#123; transition: opacity 2s ease-out;&#125;.fade-enter,.fade-leave-to &#123; opacity: 0;&#125;.bk &#123; transition: all 2s ease-out;&#125;.blur &#123; filter: blur(2px); opacity: 0.4;&#125;&lt;/style&gt; éœ€è¦æ³¨æ„è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒVueåªèƒ½å¯¹ä¸­çš„ä¸€ä¸ªå…ƒç´ è¿›è¡ŒåŠ¨æ•ˆå¤„ç†ã€‚ç›¸åï¼Œåœ¨ä»»ä½•ç»™å®šçš„å®ä¾‹ä¸­ï¼Œåªèƒ½å°†&lt;transition&gt;ä¸­çš„ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°DOMä¸­ã€‚æ¯”å¦‚ä¸‹åŒè¿™ä¸ªç¤ºä¾‹ï¼Œåœ¨Vueä¸­æ— æ³•æ­£å¸¸çš„å·¥ä½œï¼š12345678910111213141516&lt;div id=&quot;app&quot;&gt; &lt;div :class=&quot;[isShowing ? blurClass : &#x27;&#x27;, bkClass]&quot;&gt; &lt;img width=&quot;25%&quot; src=&quot;./assets/logo.png&quot; /&gt; &lt;button @click=&quot;toggleShow&quot;&gt; &lt;span v-if=&quot;isShowing&quot;&gt;Hide child&lt;/span&gt; &lt;span v-else&gt;Show child&lt;/span&gt; &lt;/button&gt; &lt;/div&gt; &lt;transition name=&quot;fade&quot;&gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot; key=&quot;info&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;Close&lt;/button&gt; &lt;/app-child&gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot; key=&quot;error&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;Close&lt;/button&gt; &lt;/app-child&gt; &lt;/transition&gt; &lt;/div&gt; åœ¨Vueä¸­ä¸­æœ‰å¤šä¸ªå…ƒç´ éœ€è¦æœ‰åŠ¨æ•ˆæ•ˆæœæ—¶ï¼Œéœ€è¦ä½¿ç”¨æ¥æ›¿ä»£ï¼Œä¸ç„¶åœ¨Vueä¸­åˆ™ä¼šæŠ¥é”™ã€‚ å¦å¤–ï¼Œåœ¨ä¸­æœ‰ç›¸åŒæ ‡ç­¾åçš„å…ƒç´ åˆ‡æ¢æ—¶ï¼Œéœ€è¦é€šè¿‡ key ç‰¹æ€§è®¾ç½®å”¯ä¸€çš„å€¼æ¥æ ‡è®°ä»¥è®© Vue åŒºåˆ†å®ƒä»¬ï¼Œå¦åˆ™ Vue ä¸ºäº†æ•ˆç‡åªä¼šæ›¿æ¢ç›¸åŒæ ‡ç­¾å†…éƒ¨çš„å†…å®¹ã€‚å³ä½¿åœ¨æŠ€æœ¯ä¸Šæ²¡æœ‰å¿…è¦ï¼Œç»™åœ¨ ç»„ä»¶ä¸­çš„å¤šä¸ªå…ƒç´ è®¾ç½® key æ˜¯ä¸€ä¸ªæ›´å¥½çš„å®è·µã€‚ åœ¨Vueä¸­æä¾›äº†ä¸¤ç§è¿‡æ¸¡æ¨¡å¼æ¥è§£å†³ä¸€ä¸ªç¦»å¼€è¿‡æ¸¡çš„æ—¶å€™å¦ä¸€ä¸ªå¼€å§‹è¿›å…¥è¿‡æ¸¡ã€‚å…¶å®è¿™ä¹Ÿæ˜¯çš„é»˜è®¤è¡Œä¸ºï¼Œå³è¿›å…¥å’Œç¦»å¼€åŒæ—¶å‘ç”Ÿçš„é—®é¢˜ in-outï¼šæ–°å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡ï¼Œå®Œæˆä¹‹åå½“å‰å…ƒç´ è¿‡æ¸¡ç¦»å¼€ out-inï¼šå½“å‰å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡ï¼Œå®Œæˆä¹‹åæ–°å…ƒç´ è¿‡æ¸¡è¿›å…¥ 123456789101112131415&lt;transition name=&quot;fade&quot; mode=&quot;out-in&quot; appear appear-class=&quot;custom-appear-class&quot; appear-to-class=&quot;custom-appear-to-class&quot; appear-active-class=&quot;custom-appear-active-class&quot; &gt; &lt;app-child v-if=&quot;isShowing&quot; class=&quot;modal&quot; key=&quot;info&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;æ˜¾ç¤º&lt;/button&gt; &lt;/app-child&gt; &lt;app-child v-else=&quot;!isShowing&quot; class=&quot;modal&quot; key=&quot;error&quot;&gt; &lt;button @click=&quot;toggleShow&quot;&gt;ç¦»å¼€&lt;/button&gt; &lt;/app-child&gt; &lt;/transition&gt; cssæ ·å¼ 1234567.custom-appear-class &#123; opacity: 0; transform: translateX(100%); //è¿›åœºæ•ˆæœ&#125;.custom-appear-active-class &#123; transition: 2s;&#125; åˆ—è¡¨è¿‡æ¸¡123456789&lt;div id=&quot;list-demo&quot; class=&quot;demo&quot;&gt; &lt;button v-on:click=&quot;add&quot;&gt;Add&lt;/button&gt; &lt;button v-on:click=&quot;remove&quot;&gt;Remove&lt;/button&gt; &lt;transition-group name=&quot;list&quot; tag=&quot;p&quot;&gt; &lt;span v-for=&quot;item in items&quot; v-bind:key=&quot;item&quot; class=&quot;list-item&quot;&gt; &#123;&#123; item &#125;&#125; &lt;/span&gt; &lt;/transition-group&gt;&lt;/div&gt; 123456789101112131415161718new Vue(&#123; el: &#x27;#list-demo&#x27;, data: &#123; items: [1,2,3,4,5,6,7,8,9], nextNum: 10 &#125;, methods: &#123; randomIndex: function () &#123; return Math.floor(Math.random() * this.items.length) &#125;, add: function () &#123; this.items.splice(this.randomIndex(), 0, this.nextNum++) &#125;, remove: function () &#123; this.items.splice(this.randomIndex(), 1) &#125;, &#125;&#125;) 123456789101112.list-item &#123; display: inline-block; margin-right: 10px;&#125;.list-enter-active, .list-leave-active &#123; transition: all 1s;&#125;.list-enter, .list-leave-to/* .list-leave-active for below version 2.1.8 */ &#123; opacity: 0; transform: translateY(30px);&#125; å‚è€ƒå¤§æ¼ ","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueä¸­çš„vuex","slug":"Vueä¸­çš„vuex","date":"2019-03-02T16:00:00.000Z","updated":"2020-09-16T09:07:57.000Z","comments":true,"path":"2019/03/03/Vueä¸­çš„vuex/","link":"","permalink":"http://mariogogogo.github.io/2019/03/03/Vue%E4%B8%AD%E7%9A%84vuex/","excerpt":"å½“æˆ‘ä»¬ä½¿ç”¨ Vue.js æ¥å¼€å‘ä¸€ä¸ªå•é¡µåº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›ç»„ä»¶é—´å…±äº«çš„æ•°æ®æˆ–çŠ¶æ€ï¼Œæˆ–æ˜¯éœ€è¦é€šè¿‡ props æ·±å±‚ä¼ é€’çš„ä¸€äº›æ•°æ®ã€‚åœ¨åº”ç”¨è§„æ¨¡è¾ƒå°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ propsã€äº‹ä»¶ç­‰å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶çš„ç»„ä»¶é—´é€šä¿¡æ–¹æ³•ï¼Œæˆ–è€…æ˜¯é€šè¿‡äº‹ä»¶æ€»çº¿æ¥è¿›è¡Œä»»æ„ä¸¤ä¸ªç»„ä»¶çš„é€šä¿¡ã€‚ä½†æ˜¯å½“åº”ç”¨é€æ¸å¤æ‚åï¼Œé—®é¢˜å°±å¼€å§‹å‡ºç°äº†ï¼Œè¿™æ ·çš„é€šä¿¡æ–¹å¼ä¼šå¯¼è‡´æ•°æ®æµå¼‚å¸¸åœ°æ··ä¹±ã€‚","text":"å½“æˆ‘ä»¬ä½¿ç”¨ Vue.js æ¥å¼€å‘ä¸€ä¸ªå•é¡µåº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›ç»„ä»¶é—´å…±äº«çš„æ•°æ®æˆ–çŠ¶æ€ï¼Œæˆ–æ˜¯éœ€è¦é€šè¿‡ props æ·±å±‚ä¼ é€’çš„ä¸€äº›æ•°æ®ã€‚åœ¨åº”ç”¨è§„æ¨¡è¾ƒå°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ propsã€äº‹ä»¶ç­‰å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶çš„ç»„ä»¶é—´é€šä¿¡æ–¹æ³•ï¼Œæˆ–è€…æ˜¯é€šè¿‡äº‹ä»¶æ€»çº¿æ¥è¿›è¡Œä»»æ„ä¸¤ä¸ªç»„ä»¶çš„é€šä¿¡ã€‚ä½†æ˜¯å½“åº”ç”¨é€æ¸å¤æ‚åï¼Œé—®é¢˜å°±å¼€å§‹å‡ºç°äº†ï¼Œè¿™æ ·çš„é€šä¿¡æ–¹å¼ä¼šå¯¼è‡´æ•°æ®æµå¼‚å¸¸åœ°æ··ä¹±ã€‚ç„¶åå°±å‡ºç°äº†ä¸€ä¸ªç¥å™¨vuex ä»€ä¹ˆæ˜¯vuexå‘¢ï¼ŸVuex ç±»ä¼¼ Redux çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œç”¨æ¥ç®¡ç†Vueçš„æ‰€æœ‰ç»„ä»¶çŠ¶æ€ã€‚ å¤§ç™½è¯ï¼šå¤šä¸ªç»„ä»¶ä¹‹é—´å…±ç”¨ä¸€ä»½æ•°æ® vuexçš„æ ¸å¿ƒvuexç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š state mutations getters actions modules å¼€å§‹å†™æ¥ä¸ªæœ€ç®€å•çš„demostore.js12345678910111213141516171819202122232425262728import Vue from &quot;vue&quot;;import Vuex from &quot;vuex&quot;;Vue.use(Vuex);const state = &#123; count: 1&#125;;const mutations = &#123; increment(state) &#123; state.count++; &#125;, decrement(state) &#123; state.count--; &#125;&#125;;const actions = &#123; increment: (&#123; commit &#125;) =&gt; &#123; commit(&quot;increment&quot;); &#125;, decrement: (&#123; commit &#125;) =&gt; &#123; commit(&quot;decrement&quot;); &#125;&#125;;export default new Vuex.Store(&#123; state, mutations, actions &#125;);1.æ¯ä¸€ä¸ªVuexåº”ç”¨å°±æ˜¯ä¸€ä¸ªstoreï¼Œåœ¨storeä¸­åŒ…å«ç»„ä»¶ä¸­çš„å…±äº«çŠ¶æ€stateå’Œæ”¹å˜çŠ¶æ€çš„æ–¹æ³•mutationsã€‚æ³¨æ„ï¼šåªèƒ½é€šè¿‡mutationsæ”¹å˜storeçš„stateçš„çŠ¶æ€ï¼›2.ä½¿ç”¨commitæ–¹æ³•è§¦å‘mutationsæ”¹å˜state: å¯¼å…¥è·Ÿç»„ä»¶app.vue123456789import Vue from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import store from &quot;./store&quot;;Vue.config.productionTip = false;new Vue(&#123; store, //å¯¼å…¥å…¨å±€storeæ•°æ® render: h =&gt; h(App)&#125;).$mount(&quot;#app&quot;); Getters å¯ä»¥åœ¨æ¨¡æ¿ä¸­é™æ€çš„æ˜¾ç¤ºæ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œgetters å¯ä»¥è¯»å–æ•°æ®ï¼Œä½†ä¸èƒ½æ”¹å˜çŠ¶æ€ã€‚ Mutations å…è®¸æ›´æ–°çŠ¶æ€ï¼Œä½†æ°¸è¿œæ˜¯åŒæ­¥çš„ã€‚Mutations æ˜¯ store ä¸­æ”¹å˜çŠ¶æ€æ•°æ®çš„å”¯ä¸€æ–¹å¼ã€‚ Actions å…è®¸å¼‚æ­¥æ›´æ–°çŠ¶æ€ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ mutation ã€‚å¦‚æœä½ éœ€è¦ä»¥ç‰¹å®šçš„é¡ºåºåŒæ—¶æ‰§è¡Œä¸åŒçš„ mutations ä¼šéå¸¸æœ‰ç”¨ã€‚ ä½¿ç”¨vuexvuex.vue123456789101112131415&lt;template&gt; &lt;div&gt; vuex ,&#123;&#123; $store.state.count &#125;&#125; &lt;button type=&quot;button&quot; @click=&quot;increment&quot;&gt;+&lt;/button&gt; &lt;button type=&quot;button&quot; @click=&quot;decrement&quot;&gt;-&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; mapActions &#125; from &quot;vuex&quot;;export default &#123; name: &quot;vuex&quot;, methods: mapActions([&quot;increment&quot;, &quot;decrement&quot;])&#125;;&lt;/script&gt; è¿›é˜¶è®©æˆ‘ä»¬åœ¨æ·±å…¥ä¸€ç‚¹å¦‚æœæˆ‘ä»¬è¦å‘actionä¼ å…¥å‚æ•°æ€ä¹ˆåŠï¼Ÿ æœ€ååœ¨æ‹¿ä¸€ä¸ªé¡¹ç›®ä¸­çš„æ —å­æ¥è¯´è¯´æˆ‘å¯¹vuexçš„ä½¿ç”¨ å…ˆæ¥çœ‹ä¸‹å¦‚ä½•åˆç†çš„æ„å»ºstoreæ•°æ®ç»“æ„é¦–å…ˆåˆ›å»ºstate.jså¯¹éœ€è¦ç®¡ç†çš„æ•°æ®åˆå§‹åŒ–ä¸€äº›å€¼ï¼Œå¯¹åº”ä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ•°æ®è¿˜å¯ä»¥è°ƒç”¨æ–¹æ³•æ‰§è¡Œã€‚12345678910111213141516171819/** * å•ä¸€çŠ¶æ€æ ‘ * vuex æ“ä½œé¡ºåºï¼šstate.js -&gt; mutations-type.js -&gt; mutations.js -&gt; getters.js */import &#123; getPlayHistory &#125; from &quot;../utils/index&quot;;const playMode = &#123; sequence: 0, // é¡ºåºæ’­æ”¾ loop: 1, // å•æ›²å¾ªç¯ random: 2 // éšæœºæ’­æ”¾&#125;;const state = &#123; mode: playMode.sequence, playing: false, playlist: [&quot;å‘å¦‚é›ª&quot;, &quot;ä¸œé£ç ´&quot;, &quot;åŒèŠ‚æ£&quot;], song: &quot;å‘¨æ°ä¼¦&quot;, playHistory: getPlayHistory()&#125;;export default state;ç„¶ååˆ›å»ºmutation-type.jsï¼Œç”¨mutation å¸¸é‡ï¼Œæ³¨æ„ç›®çš„æ˜¯ä¸ºäº†ä»£ç è§„èŒƒï¼Œæ˜“äºå‡ºé”™æ’æŸ¥1234567//æ’­æ”¾æ¨¡å¼export const SET_MODE = &quot;SET_MODE&quot;;//æ’­æ”¾çŠ¶æ€export const SET_PLAYING_STATE = &quot;SET_PLAYING_STATE&quot;;//æ’­æ”¾åˆ—è¡¨export const SET_PLAYLIST = &quot;SET_PLAYLIST&quot;;æ¥ç€æˆ‘ä»¬åˆ›å»ºmutation.js12345678910111213import * as types from &quot;./mutations-type.js&quot;;const mutations = &#123; [types.SET_MODE](state, mode) &#123; state.mode = mode; &#125;, [types.SET_PLAYING_STATE](state, flag) &#123; state.playing = flag; &#125;, [types.SET_PLAYLIST](state, list) &#123; state.playlist = list; &#125;&#125;;export default mutations;éšååœ¨åˆ›å»ºactions.js,ç”¨äºæ•°æ®çš„stateçš„é€»è¾‘å¤„ç†ã€‚1234567891011121314151617181920212223// æ ¹çº§åˆ«çš„ actionimport * as types from &quot;./mutations-type&quot;;/**\\ * &#123;commit.state&#125; å†…ç½®çŠ¶æ€ * song ä¼ å…¥çš„å‚æ•° */export const insertSong = function(&#123; commit, state &#125;, song) &#123; let playlist = state.playlist.slice(0); playlist = [...playlist, &quot;çˆ¸æˆ‘å›æ¥äº†&quot;, &quot;ç‰›ä»”å¾ˆå¿™&quot;].concat(song); commit(types.SET_PLAYLIST, playlist); commit(types.SET_PLAYING_STATE, true); // commit(types.SET_MODE, 1);&#125;;export const removeSong = function(&#123; commit, state &#125;, song) &#123; let playlist = state.playlist.slice(0); playlist.slice(0, 1); commit(types.SET_PLAYLIST, playlist); commit(types.SET_PLAYING_STATE, false); commit(types.SET_MODE, 2);&#125;;åˆ«å¿˜è®°äº†setæœ‰äº† è¿˜éœ€è¦getè·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºgetters.js12345678// æ˜ å°„åŠè®¡ç®—export const playing = state =&gt; state.playing;export const playlist = state =&gt; state.playlist;export const mode = state =&gt; state.mode;export const song = state =&gt; state.song;æœ€åè®¾ç½®index.jsçš„å…¥å£æ–‡ä»¶12345678910111213141516171819202122// ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹import Vue from &quot;vue&quot;;import Vuex from &quot;vuex&quot;;import state from &quot;./state.js&quot;;import mutations from &quot;./mutations.js&quot;;import * as actions from &quot;./actions.js&quot;;import * as getters from &quot;./getters.js&quot;;import createLogger from &quot;vuex/dist/logger&quot;; // Vuex è‡ªå¸¦ä¸€ä¸ªæ—¥å¿—æ’ä»¶ç”¨äºä¸€èˆ¬çš„è°ƒè¯•Vue.use(Vuex);const debug = process.env.NODE_ENV !== &quot;production&quot;;export default new Vuex.Store(&#123; state, mutations, actions, getters, strict: debug, plugins: debug ? [createLogger()] : []&#125;);åˆ«å¿˜è®°appä¸­çš„å…¨å±€å¯¼å…¥storemain.js123456789import Vue from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import store from &quot;./store/index&quot;;Vue.config.productionTip = false;new Vue(&#123; render: h =&gt; h(App), store&#125;).$mount(&quot;#app&quot;); ä½¿ç”¨1234567891011121314151617181920212223&lt;script&gt;import &#123; mapMutations, mapActions, mapGetters &#125; from &quot;vuex&quot;; //å¯¼å…¥vuexæ¨¡å—æ–¹æ³•export default &#123; name: &quot;pagea&quot;, methods: &#123; ...mapMutations(&#123; setMode: &quot;SET_MODE&quot;, setPlayList: &quot;SET_PLAYLIST&quot; &#125;), ...mapActions([&quot;insertSong&quot;, &quot;removeSong&quot;]), add() &#123; this.setMode(1); this.insertSong(&quot;ä½ æ¯”ä»å‰å¿«ä¹&quot;); &#125; &#125;, computed: &#123; ...mapGetters([&quot;mode&quot;, &quot;song&quot;, &quot;playlist&quot;]), playstatus() &#123; return this.song; &#125; &#125;&#125;;&lt;/script&gt;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"PM2ä¸€é”®å‘å¸ƒç½‘ç«™é€‚åˆReact Vue Node","slug":"PM2ä¸€é”®å‘å¸ƒç½‘ç«™ï¼Œé€‚åˆReact Vue Node","date":"2019-03-01T16:00:00.000Z","updated":"2020-09-16T09:07:44.000Z","comments":true,"path":"2019/03/02/PM2ä¸€é”®å‘å¸ƒç½‘ç«™ï¼Œé€‚åˆReact Vue Node/","link":"","permalink":"http://mariogogogo.github.io/2019/03/02/PM2%E4%B8%80%E9%94%AE%E5%8F%91%E5%B8%83%E7%BD%91%E7%AB%99%EF%BC%8C%E9%80%82%E5%90%88React%20Vue%20Node/","excerpt":"ä¸ºä»€ä¹ˆè¦ç ”ç©¶Pm2ï¼Ÿ","text":"ä¸ºä»€ä¹ˆè¦ç ”ç©¶Pm2ï¼Ÿå½“ä½ çš„é¡¹ç›®æ¯æ¬¡éƒ½è¦æ”¹åŠ¨æ—¶ï¼Œæœ¬åœ°æ”¹å®Œï¼Œpushåˆ°ä»“åº“å†…ï¼Œå†ä»æœåŠ¡å™¨pullä¸‹æ¥ï¼Œé‡æ–°buildï¼Œå†é‡‡ç”¨å¦‚ä¸Šçš„å„ç§æ–¹æ³•ã€‚è¿™æ ·æ— å½¢ä¹‹ä¸­å°±åŠ å¤§äº†æ—¶é—´æˆæœ¬ï¼Œå› è€Œæˆ‘çš„è§£å†³æ–¹æ³•æ—¶é‡‡ç”¨pm2çš„è‡ªåŠ¨åŒ–éƒ¨ç½²æ–¹æ³•ï¼Œæ¥å®ç°æœ¬åœ°ä¸€é”®éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚ é¦–å…ˆä½ è¦ç¡®ä¿ä½ æœ¬åœ°/æœåŠ¡å™¨/Githubä¸Šå®ç°äº†æ— å¯†ç™»å½• å…·ä½“æµç¨‹12345678910111213141516171819//1.çœ‹ä½ æœ‰æ²¡æœ‰.sshçš„æ–‡ä»¶ã€‚cd ~/.ssh//2.æ²¡æœ‰åˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªã€‚mkdir ~/.ssh//3.ç”Ÿæˆä¸€ä¸ªè¯æ˜ï¼ˆé»˜è®¤ä¼šç”Ÿæˆid_rsaå’Œid_rsa.pubï¼Œå¦‚æœä½ ä¹‹å‰æœ‰ç”Ÿæˆè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç°åœ¨å°±ä¸éœ€è¦å†ç”Ÿæˆäº†ï¼Œå¯ä»¥å¤ç”¨çš„ï¼Œè€Œä¸”æ–°ç”Ÿæˆçš„id_rsaå’Œid_rsa.pubè¿˜ä¼šè¦†ç›–æ‰åŸæ¥çš„ï¼Œç‰¹åˆ«æ˜¯è¿ç€å…¬å¸çš„svnå’Œgitçš„ä¸€äº›ï¼Œæœ€å¥½ä¸è¦å†ç”Ÿæˆäº†ï¼‰ssh-keygen -t rsa//4.å°†è¯æ˜å¤åˆ¶åˆ°é˜¿é‡Œäº‘çš„è™šæ‹Ÿæœºé¦–å…ˆéœ€è¦è¿›å…¥åˆ°.sshç›®å½•cd ~/.sshscp id_rsa.pub chan@IPåœ°å€:~/.ssh/id_rsa.pub//5.å°†è¯ä¹¦å†™å…¥åˆ°authorized_keysï¼ˆè¿™æ ·å°±èƒ½ä¿è¯ä¸è¾“å…¥å¯†ç ç™»å…¥ï¼‰ç™»å…¥è‡ªå·±çš„è™šæ‹Ÿæœºssh root@IPåœ°å€cd ~/.sshcat id_rsa.pub &gt;&gt; authorized_keys//6.é”€æ¯ä¹‹å‰çš„è¯ä¹¦å°±è¡Œrm id_rsa.pubexit//å¥½äº†ï¼Œç°åœ¨ä½ å°±å¯ä»¥ä¸ç”¨è¾“å…¥å¯†ç å°±ç™»å…¥åˆ°ä½ çš„é˜¿é‡Œäº‘è™šæ‹Ÿæœºäº†ã€‚ é…ç½®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹æƒé™12345sudo mkdir /testcd /testsudo mkdir production#ä¿®æ”¹æƒé™,å…ˆåˆ‡æ¢åˆ°testsudo chmod 777 production é…ç½®ä½ çš„é¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ecosystem.json123456789101112131415161718192021222324252627&#123;&quot;apps&quot;:&#123; &quot;name&quot;:&quot;é¡¹ç›®åç§°&quot;, &quot;script&quot;:&quot;index.js&quot;, &quot;env&quot;:&#123; &quot;COMMON_VARIABLE&quot;:&quot;true&quot; &#125;, &quot;env_production&quot;:&#123; &quot;NODE_ENV&quot;:&quot;production&quot; &#125;&#125;,&quot;deploy&quot;:&#123; &quot;production&quot;:&#123; &quot;user&quot;:&quot;æœåŠ¡å™¨ç™»å½•è´¦å·ä¸è¦ç”¨root&quot;, //æœåŠ¡å™¨åç§° æ¯”å¦‚ chan &quot;host&quot;:[&quot;192.168.2.31&quot;], //æœåŠ¡å™¨ip &quot;port&quot;:&quot;22&quot; //æœåŠ¡å™¨ç«¯å£ &quot;ref&quot;:&quot;origin/master&quot;, &quot;repo&quot;:&quot;http://gitä»“åº“åœ°å€&quot;, &quot;path&quot;:&quot;/test/production&quot;, //é¡¹ç›®ç›®å½• &quot;ssh_options&quot;:&quot;StrictHostKeyChecking=no&quot;, &quot;post-deploy&quot;:&quot;yarn &amp;&amp; yarn build &amp;&amp; pm2 startOrRestart ecosystem.json --env production&quot;, //æ‰§è¡Œæ“ä½œ &quot;env&quot;:&#123; &quot;NODE_ENV&quot;:&quot;production&quot; &#125; &#125; &#125;&#125; æ³¨æ„è¸©è¿‡çš„å‘ï¼š ç„¶åè¾“å…¥ 1source ~/.bashrc ä»£ç  ç¬¬ä¸€æ¬¡éƒ¨ç½²åœ¨æœ¬åœ°itermä¸­è¾“å…¥ 12pm2 deploy ecosystem.json production setup//æ­¤æ—¶ä¼šåœ¨æœåŠ¡å™¨ /www/test/productionæ–°å»ºä¸‰ä¸ªç›®å½• ç¬¬äºŒæ¬¡ä»¥åå¯ä»¥è¾“å…¥1pm2 deploy ecosystem.json productionå³å‘å¸ƒæˆåŠŸã€‚ æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå°±å¯ä»¥å®ç°åˆ©ç”¨pm2æœ¬åœ°éƒ¨ç½²é¡¹ç›®åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·å°±çœæ‰äº†ç™»å…¥æœåŠ¡å™¨å–æ›´æ–°ä»£ç çš„æ­¥éª¤äº†ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Vueä¸­çš„slot","slug":"Vueä¸­çš„slot","date":"2019-03-01T16:00:00.000Z","updated":"2020-09-16T09:07:57.000Z","comments":true,"path":"2019/03/02/Vueä¸­çš„slot/","link":"","permalink":"http://mariogogogo.github.io/2019/03/02/Vue%E4%B8%AD%E7%9A%84slot/","excerpt":"åœ¨ 2.6.0 ä¸­ï¼Œæˆ‘ä»¬ä¸ºå…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç»Ÿä¸€çš„è¯­æ³• (å³ v-slot æŒ‡ä»¤)ã€‚å®ƒå–ä»£äº† slot å’Œ slot-scope è¿™ä¸¤ä¸ªç›®å‰å·²è¢«åºŸå¼ƒä½†æœªè¢«ç§»é™¤","text":"åœ¨ 2.6.0 ä¸­ï¼Œæˆ‘ä»¬ä¸ºå…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç»Ÿä¸€çš„è¯­æ³• (å³ v-slot æŒ‡ä»¤)ã€‚å®ƒå–ä»£äº† slot å’Œ slot-scope è¿™ä¸¤ä¸ªç›®å‰å·²è¢«åºŸå¼ƒä½†æœªè¢«ç§»é™¤ Slotçš„é€šä¿—ç†è§£æ˜¯â€œå å‘â€ï¼Œåœ¨ç»„ä»¶æ¨¡æ¿ä¸­å å¥½äº†ä½ç½®ï¼Œå½“ä½¿ç”¨è¯¥ç»„ä»¶æ ‡ç­¾æ—¶å€™ï¼Œç»„ä»¶æ ‡ç­¾é‡Œé¢çš„å†…å®¹å°±ä¼šè‡ªåŠ¨å¡«å‘ï¼ˆæ›¿æ¢ç»„ä»¶æ¨¡æ¿ä¸­ä½ç½®ï¼‰ï¼Œå½“æ’æ§½ä¹Ÿå°±æ˜¯å‘æœ‰å‘½åæ—¶ï¼Œç»„ä»¶æ ‡ç­¾ä¸­ä½¿ç”¨å±æ€§slot=â€mySlotâ€çš„å…ƒç´ å°±ä¼šæ›¿æ¢è¯¥å¯¹åº”ä½ç½®å†…å®¹ï¼› å•ä¸ªæ’æ§½çœ‹å•ä¸ªæ’æ§½ï¼Œå³æ²¡æœ‰åœ¨æ ‡ç­¾ä¸­æ˜¾å¼çš„è®¾ç½®nameå€¼ã€‚æ¯”å¦‚SlotDemoè¿™ä¸ªç»„ä»¶ï¼Œè€Œä¸”åœ¨slotæ ‡ç­¾ä¸­æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å†…å®¹ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¥ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡v-slot:defaultæ¥è°ƒç”¨æœªæ˜¾å¼è®¾ç½®nameçš„slotï¼šä¸€ä¸ªä¸å¸¦nameçš„å‡ºå£ä¼šå¸¦æœ‰éšå«çš„åå­—default slotdemo.js1234567891011&lt;template&gt; &lt;div class=&quot;slot-demo&quot;&gt;&lt;slot&gt;å•ä¸ªæ’æ§½&lt;/slot&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;// export default &#123;// name: &quot;slotdemo&quot;// &#125;;//&lt;/script&gt;helloword.vue 123456789101112131415&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;p&gt;Hello Vue in CodeSandbox!&lt;/p&gt; &lt;h3&gt;Learn slot&lt;/h3&gt; &lt;slot-demo&gt;&lt;/slot-demo&gt; &lt;p&gt;=============&lt;/p&gt; &lt;slot-demo&gt; &lt;template v-slot:default&gt; &lt;p&gt;v-slot:defatult çš„ä½¿ç”¨&lt;/p&gt; &lt;/template&gt; &lt;/slot-demo&gt; &lt;/div&gt;&lt;/template&gt; å…·åæ’æ§½layout.vue1234567891011121314151617&lt;div class=&quot;container&quot;&gt; &lt;header&gt; &lt;slot name=&quot;header&quot;&gt; &lt;p&gt;header&lt;/p&gt; &lt;/slot&gt; &lt;/header&gt; &lt;main&gt; &lt;slot&gt; &lt;p&gt;middler&lt;/p&gt; &lt;/slot&gt; &lt;/main&gt; &lt;footer&gt; &lt;slot name=&quot;footer&quot;&gt; &lt;p&gt;footer&lt;/p&gt; &lt;/slot&gt; &lt;/footer&gt;&lt;/div&gt;&lt;!--ä¸ç”¨å†™name--&gt;&lt;script&gt;// export default &#123;// name: &quot;layout&quot;// &#125;;&lt;/script&gt;helloword.vue 1234567891011121314151617181920212223242526&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;p&gt;Hello Vue in CodeSandbox!&lt;/p&gt; &lt;h3&gt;Learn slot&lt;/h3&gt; &lt;slot-demo&gt;&lt;/slot-demo&gt; &lt;p&gt;=============&lt;/p&gt; &lt;slot-demo&gt; &lt;template v-slot:default&gt; &lt;p&gt;v-slot:defatult çš„ä½¿ç”¨&lt;/p&gt; &lt;/template&gt; &lt;/slot-demo&gt; &lt;p&gt;=============&lt;/p&gt; &lt;slot-layout&gt; &lt;template v-slot:header&gt; &lt;h1&gt;è¿™é‡Œæœ‰å¤´éƒ¨&lt;/h1&gt; &lt;/template&gt; &lt;p&gt;A paragraph for the main content.&lt;/p&gt; &lt;p&gt;And another one.&lt;/p&gt; &lt;template v-slot:footer&gt; &lt;p&gt;è¿™é‡Œæ˜¯åº•éƒ¨&lt;/p&gt; &lt;/template&gt; &lt;/slot-layout&gt; &lt;/div&gt;&lt;/template&gt; æ³¨æ„ v-slot åªèƒ½æ·»åŠ åœ¨ä¸€ä¸ª&lt;template&gt; ä¸Š ä½œç”¨åŸŸæ’æ§½slotlist.vue 123456789101112131415161718&lt;template&gt; &lt;div class=&quot;list&quot;&gt; &lt;div class=&quot;item&quot; v-for=&quot;(item, index) in items&quot; :key=&quot;index&quot;&gt; &lt;slot v-bind:item=&quot;item&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/slot&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;list&quot;, props: &#123; items: &#123; type: Array &#125; &#125;&#125;;&lt;/script&gt; helloword.vue12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;p&gt;=============&lt;/p&gt; &lt;List :items=&quot;colors&quot; v-slot=&quot;color&quot;&gt; &lt;/List&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import SlotDemo from &quot;../slot/slotdemo.vue&quot;;import List from &quot;../slot/list.vue&quot;;export default &#123; name: &quot;HelloWorld&quot;, components: &#123; SlotDemo, List &#125;, data() &#123; return &#123; colors: [ &#123; name: &quot;Yellow&quot;, hex: &quot;#F4D03F&quot; &#125;, &#123; name: &quot;Green&quot;, hex: &quot;#229954&quot; &#125;, &#123; name: &quot;Purple&quot;, hex: &quot;#9B59B6&quot; &#125; ] &#125;; &#125;, props: &#123; msg: String &#125;&#125;;&lt;/script&gt;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Javascript è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼","date":"2019-02-28T16:00:00.000Z","updated":"2020-09-16T09:07:34.000Z","comments":true,"path":"2019/03/01/Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/03/01/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/","excerpt":"å¤‡å¿˜å½•æ¨¡å¼:åœ¨ä¸ç ´åå¯¹è±¡çš„å°è£…ç‰¹æ€§çš„å‰æä¸‹,åœ¨å¯¹è±¡ä¹‹å¤–æ•è·å¹¶ä¿å­˜è¯¥å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ä»¥ä¾¿æ—¥åå¯¹è±¡ä½¿ç”¨æˆ–è€…å¯¹è±¡æ¢å¤åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€","text":"å¤‡å¿˜å½•æ¨¡å¼:åœ¨ä¸ç ´åå¯¹è±¡çš„å°è£…ç‰¹æ€§çš„å‰æä¸‹,åœ¨å¯¹è±¡ä¹‹å¤–æ•è·å¹¶ä¿å­˜è¯¥å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ä»¥ä¾¿æ—¥åå¯¹è±¡ä½¿ç”¨æˆ–è€…å¯¹è±¡æ¢å¤åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€ æˆ‘ä»¬åœ¨åšåˆ—è¡¨é¡µè¯·æ±‚çš„æ—¶å€™è¿›è¡Œä¼šé‡åˆ°ä¸Šä¸€é¡µæ•°æ®ä¸ä¸‹ä¸€é¡µæ•°æ®ä¹‹é—´çš„äº¤äº’. 12345678910111213141516//ä¸‹ä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶$(&amp;#39;#next page&amp;#39;).click(function() &#123; //è·å–æ–°é—»å†…å®¹å…ƒç´  var $news = $(&amp;quot;#news content&amp;quot;)ï¼Œ //è·å–æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ® page = $news.data(&amp;#39;page&amp;#39;); //è·å–å¹¶æ˜¾ç¤ºæ–°é—» getPageData(page, function() &#123; //ä¿®æ­£æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ® $news.data(&amp;#39;page&amp;#39;, page + 1) &#125;)&#125;);//1ä¸Šä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶$(#pre page &amp;#39;).click (function() &#123;//æ˜¾ç¤ºä¸Šä¸€é¡µ&#125;) getPageData æ˜¯ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ 123456789101112131415function getPageData (page,fn)&#123; $.post(&amp;#39;./data/getNewsData.php&amp;#39;,&#123; page:page &#125;,function(res) &#123; if(res.errNo == 0 )&#123; showPage(page,res.data) fn &amp;&amp; fn() &#125; &#125;)&#125;//æ˜¾ç¤ºæŸé¡µé€»è¾‘function showPage(page,data) &#123; // body...&#125; è¿™ä¹ˆå¤„ç†çœ‹èµ·æ¥æ— å¯åšé,ä¸è¿‡å¯¹äºç”¨æˆ·ç‚¹å‡»ä¸‹ä¸€é¡µå,åˆç‚¹å‡»ä¸Šä¸€é¡µè¿™ç§æµè§ˆè¡Œä¸ºæ˜¯ä¸æ˜¯æ„Ÿè§‰ç¬¬äºŒæ¬¡è¯·æ±‚æ˜¯å¤šä½™çš„?å› ä¸ºç¬¬ä¸€æ¬¡ä½ å·²ç»è·å–äº†æ•°æ®,ä¸éœ€è¦å†å¤šå‘ä¸€æ¬¡è¯·æ±‚,å¦‚æœç”¨æˆ·ç½‘é€Ÿä¸å¥½,é‚£å¯¹äºç”¨æˆ·æ¥è¯´,ä½“éªŒæ˜¯ç³Ÿç³•çš„.æ‰‹æœºç«¯æµé‡ä¹Ÿæ˜¯ä¸€ç§æµªè´¹ ç¼“å­˜æ•°æ®123456789101112131415161718192021222324252627282930313233343536//pageå¤‡å¿˜å½•ç±»var Page = function() &#123; //ä¿¡æ¯ç¼“å­˜ var cache = &#123;&#125; /* ä¸»å‡½æ•° å‚æ•°pageé¡µç  */ return function(page, fn) &#123; //åˆ¤æ–­è¯¥é¡µæ•°æ®æ˜¯å¦åœ¨ç¼“å­˜ä¸­ if (cache[page]) &#123; //æ¢å¤åˆ°è¯¥é¡µçŠ¶æ€ï¼Œæ˜¾ç¤ºè¯¥é¡µå†…å®¹ showPage(page, cache[page]); //æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•° fn &amp;&amp; fn(); &#125; else &#123; //è‹¥ç¼“å­˜Cacheä¸­æ— è¯¥é¡µæ•°æ® $.post(&amp;#39;./data/getNewsData.php&amp;#39;, &#123; //è¯·æ±‚æºå¸¦æ•°æ®pageé¡µç  page: page &#125;ï¼Œfunction(res) &#123; // æˆåŠŸè¿”å› if (res.errNo == 0) &#123; //æ˜¾ç¤ºè¯¥é¡µæ•°æ® showPage(page, res.data); //å°†è¯¥é¡µæ•°æ®ç§å…¥ç¼“å­˜ä¸­ cache[page] = res.data; //æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•° fn &amp;&amp; fn(); &#125; else &#123; //å¤„ç†å¼‚å¸¸ &#125; &#125;) &#125; &#125;&#125; page ç¼“å­˜å™¨ä¸ getPageData æ–¹æ³•ä¸åŒä¹‹å¤„åœ¨ Page ç±»çš„å†…éƒ¨ç¼“å­˜äº†æ¯æ¬¡è¯·æ±‚å›æ¥çš„æ–°é—»æ•°æ®,ä»¥åç”¨æˆ·ä¼šçœ‹æŸé¡µé¢æ–°é—»æ•°æ®,å°±ä¸å¿…è¦é‡æ–°è¯·æ±‚äº†. 123456789101112//ä¸‹ä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶$(&amp;#39;#next page&amp;#39;).click(function() &#123; //Tè·å–æ–°é—»å†…å®¹å…ƒç´  var $news = $(&amp;quot;#news content&amp;quot;)ï¼Œ //è·å–æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ® page = $news.data(&amp;#39;page&amp;#39;); //è·å–å¹¶æ˜¾ç¤ºæ–°é—» Page(page, function() &#123; //ä¿®æ­£æ–°é—»å†…å®¹å…ƒç´ å½“å‰é¡µæ•°æ® $news.data(&amp;#39;page&amp;#39;, page + 1) &#125;)&#125;); æ€»ç»“å¤‡å¿˜å½•æ¨¡å¼æœ€ä¸»è¦çš„ä»»åŠ¡å°±æ˜¯å¯¹ç°æœ‰çš„æ•°æ®æˆ–è€…çŠ¶æ€åšç¼“å­˜,ä»è€Œé™ä½å¯¹æ•°æ®çš„è·å–æˆæœ¬","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Vueä¸­çš„Mixins","slug":"Vueä¸­çš„Mixins  ","date":"2019-02-28T16:00:00.000Z","updated":"2020-09-16T09:07:57.000Z","comments":true,"path":"2019/03/01/Vueä¸­çš„Mixins  /","link":"","permalink":"http://mariogogogo.github.io/2019/03/01/Vue%E4%B8%AD%E7%9A%84Mixins%20%20/","excerpt":"æ··å…¥ (mixins) æ˜¯ä¸€ç§åˆ†å‘ Vue ç»„ä»¶ä¸­å¯å¤ç”¨åŠŸèƒ½çš„éå¸¸çµæ´»çš„æ–¹å¼ã€‚æ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚","text":"æ··å…¥ (mixins) æ˜¯ä¸€ç§åˆ†å‘ Vue ç»„ä»¶ä¸­å¯å¤ç”¨åŠŸèƒ½çš„éå¸¸çµæ´»çš„æ–¹å¼ã€‚æ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚ å­¦äº†vueå‡ ä¸ªæœˆæ—¶é—´åšäº†å‡ ä¸ªå°é¡¹ç›®ï¼ŒmixinçœŸçš„å¾ˆå°‘ç”¨ï¼Œä½†æŒºé‡è¦çš„å¸Œæœ›åšç‚¹ç¬”è®°è®°å½•ä¸‹ åœ¨é¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œå¸¸ä¼šç¢°åˆ°è¿™æ ·çš„ä¸€ç§ç°è±¡ï¼šæœ‰ä¸¤ä¸ªç»„ä»¶éå¸¸ç›¸ä¼¼ï¼Œæ¯”å¦‚è¾ƒä¸ºç†Ÿæ‚‰çš„Modalã€Tooltipï¼Œå®ƒä»¬éƒ½å…·æœ‰åŒæ ·çš„åŸºæœ¬å‡½æ•°ï¼Œè€Œä¸”å®ƒä»¬ä¹‹å‰ä¹Ÿæœ‰è¶³å¤Ÿçš„ä¸åŒã€‚å¾ˆå¤šæ—¶å€™ï¼Œå°±è®©äººå¾ˆéš¾åšå‡ºé€‰æ‹©ï¼šæ˜¯æŠŠå®ƒä»¬æ‹†ä¼šæˆå¤šä¸ªä¸åŒçš„ç»„ä»¶å‘¢ï¼Ÿè¿˜æ˜¯åªä½¿ç”¨ä¸€ä¸ªç»„ä»¶ï¼Œåˆ›å»ºè¶³å¤Ÿçš„å±æ€§æ¥æ”¹å˜ä¸åŒçš„æƒ…å†µã€‚æ‰€æœ‰è¯·å‡ºäº†ä»Šå¤©æˆ‘ä»¬çš„çŒªè§’Minxins. mixinsä¸ºæˆ‘ä»¬æä¾›äº†åœ¨Vueç»„ä»¶ä¸­å…±ç”¨åŠŸèƒ½çš„æ–¹æ³•ã€‚ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œå°†å…±ç”¨çš„åŠŸèƒ½ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å…¥mixinsé€‰é¡¹ä¸­ã€‚å½“ç»„ä»¶ä½¿ç”¨mixinså¯¹è±¡æ—¶ï¼Œæ‰€æœ‰mixinså¯¹è±¡çš„é€‰é¡¹éƒ½å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ç›® å¦‚ä½•ä½¿ç”¨ï¼Ÿ1234567891011const myMinxin= &#123; created()&#123; console.log(`æˆ‘æ¥è‡ªminxin`) &#125;&#125;let app = new Vue(&#123; el:&quot;#app&quot;, mixins:[myMixin]&#125;) æ›´è§„èŒƒçš„ä½¿ç”¨åˆ›å»ºä¸€ä¸ªminxinçš„æ–‡ä»¶å¤¹ä¸­æ”¾minxins.jsæ–‡ä»¶ 123456789import &#123; myMixin &#125; from &quot;../mixin/mixins.js&quot;;export default &#123; mixins: [myMixin], name: &quot;HelloWorld&quot;, props: &#123; msg: String &#125;&#125;; è¿˜å¯ä»¥å¼•å…¥å¤šä¸ªminxinsï¼Œä¸€æ—¦å¼•å…¥éƒ½ä¼šè¢«ä½¿ç”¨123456789import &#123; myMixinï¼ŒmyMinxin2 &#125; from &quot;../mixin/mixins.js&quot;;export default &#123; mixins: [myMixin,myMinxin2], name: &quot;HelloWorld&quot;, props: &#123; msg: String &#125;&#125;; å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚ é»˜è®¤æ˜¯mixinsä¸Šä¼šé¦–å…ˆè¢«æ³¨å†Œï¼Œç»„ä»¶ä¸Šçš„æ¥ç€æ³¨å†Œï¼ åœ¨Vueä¸­mixinså¸¸è§çš„åˆå¹¶ä¸»è¦æœ‰ä¸‰ç§æƒ…å½¢ï¼šæ•°æ®dataã€ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­å‡½æ•°å’Œå€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ æ•°æ®åˆå¹¶123456789101112131415161718&lt;script&gt;import &#123; mixdata, mindataAnother &#125; from &quot;../mixin/mixins.js&quot;;export default &#123; mixins: [mixdata, mindataAnother], name: &quot;HelloWorld&quot;, data() &#123; return &#123; msg: &quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;, name: &quot;vue&quot;, age: &quot;22&quot; &#125;; &#125;, created() &#123; console.log(this.$data); &#125;&#125;;&lt;/script&gt; ç»“è®ºï¼šæ•°æ®å¯¹è±¡åœ¨å†…éƒ¨åˆ†è¿›è¡Œæµ…åˆå¹¶ï¼ˆä¸€å±‚å±æ€§æ·±åº¦ï¼‰ï¼Œåœ¨å’Œç»„ä»¶çš„æ•°æ®å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥ç»„ä»¶æ•°æ®ä¼˜å…ˆã€‚ é’©å­å‡½æ•°åˆå¹¶123456789101112131415export default &#123; mixins: [myMixin, myMixin2], name: &quot;HelloWorld&quot;, data() &#123; return &#123; msg: &quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;, name: &quot;vue&quot;, age: &quot;22&quot; &#125;; &#125;, created() &#123; console.log(&quot;æ¥è‡ªç»„ä»¶çš„æ–¹æ³•&quot;); &#125;&#125;; ç»“è®ºï¼šå½“ç»„ä»¶ä½¿ç”¨çš„mixinså¯¹è±¡æœ‰ç›¸åŒçš„é€‰é¡¹æ—¶ï¼Œæ¯”å¦‚é’©å­å‡½æ•°ï¼Œå°±ä¼šå…¨éƒ¨è¢«åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå› æ­¤éƒ½ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä¸”mixinså¯¹è±¡ä¸­çš„é’©å­ä¼šå…ˆè¢«æ‰§è¡Œã€‚ å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹åˆå¹¶123456789101112131415161718192021 export default &#123; mixins: [myMixin], name: &quot;HelloWorld&quot;, data() &#123; return &#123; msg: &quot;æ¥è‡ªç»„ä»¶è‡ªèº«&quot;, name: &quot;vue&quot;, age: &quot;22&quot; &#125;; &#125;, methods: &#123; message() &#123; console.log(this.msg); &#125; &#125;, created() &#123; console.log(&quot;æ¥è‡ªç»„ä»¶çš„æ–¹æ³•&quot;); // console.log(this.$data); &#125;&#125;; ç»“è®ºï¼šå½“mixinså¯¹è±¡å’Œç»„ä»¶ä¸­çš„é€‰é¡¹çš„å€¼ä¸ºå¯¹è±¡æ—¶ï¼Œæ¯”å¦‚methodsã€componentså’Œdirectivesï¼Œå°†è¢«æ··åˆä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚å½“ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œç»„ä»¶é€‰é¡¹ä¼˜å…ˆã€‚ å…¨å±€Mixinsä½¿ç”¨èµ·æ¥è¦éå¸¸å°å¿ƒï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ä¸è¦è½»æ˜“å»ä½¿ç”¨å®ƒï¼› 12345Vue.mixin(&#123; mounted() &#123; console.log(&#x27;hello from mixin!&#x27;) &#125; &#125;) new Vue(&#123; ... &#125;) æ€»ç»“ï¼š æ··åˆå¯¹äºå°è£…ä¸€å°æ®µæƒ³è¦å¤ç”¨çš„ä»£ç æ¥è®²æ˜¯æœ‰ç”¨çš„ã€‚","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼","date":"2019-02-27T16:00:00.000Z","updated":"2020-09-16T09:07:37.000Z","comments":true,"path":"2019/02/28/Javascriptè®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/28/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/","excerpt":"çŠ¶æ€æ¨¡å¼:è§£å†³ç¨‹åºä¸­ä¸€äº›è‡ƒè‚¿çš„åˆ†æ”¯åˆ¤æ–­è¯­å¥é—®é¢˜ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯è½¬åŒ–ä¸ºä¸€ç§ç‹¬ç«‹çš„çŠ¶æ€ï¼Œæ–¹ä¾¿æ¯ä¸€ç§çŠ¶æ€çš„ç®¡ç†ä¸è‡³äºæ¯æ¬¡åªéœ€éå†æ‰€æœ‰åˆ†æ”¯ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–åˆ†æ”¯åˆ¤æ–­æµç¨‹","text":"çŠ¶æ€æ¨¡å¼:è§£å†³ç¨‹åºä¸­ä¸€äº›è‡ƒè‚¿çš„åˆ†æ”¯åˆ¤æ–­è¯­å¥é—®é¢˜ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯è½¬åŒ–ä¸ºä¸€ç§ç‹¬ç«‹çš„çŠ¶æ€ï¼Œæ–¹ä¾¿æ¯ä¸€ç§çŠ¶æ€çš„ç®¡ç†ä¸è‡³äºæ¯æ¬¡åªéœ€éå†æ‰€æœ‰åˆ†æ”¯ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–åˆ†æ”¯åˆ¤æ–­æµç¨‹å¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚ï¼šæŠ•ç¥¨æœ€ç¾å›¾ç‰‡å¾é›†æ´»åŠ¨ï¼Œå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰å›¾ç‰‡çš„ç»“æœå±•ç¤ºä¸€éï¼Œå†…éƒ¨å…ä¸äº†æœ‰å¤šä¸ªåˆ†æ”¯åˆ¤æ–­ï¼š 123456//å±•ç¤ºç»“æœfunction showResult = (result)&#123;if(result === 0)&#123;console.log(&#x27;å¤„ç†ç»“æœ0&#x27;)&#125;ï¼Œelse if(result === 1)&#123;console.log(&#x27;å¤„ç†ç»“æœ1&#x27;)&#125;ï¼Œelse if(result === 2)&#123;console.log(&#x27;å¤„ç†ç»“æœ2&#x27;)&#125;ï¼Œelse if(result === 3)&#123;console.log(&#x27;å¤„ç†ç»“æœ3&#x27;)&#125;ï¼Œ å¦‚æœæŸå¤©éœ€æ±‚è¦å¢åŠ æˆ–å‡å°‘å¤„ç†å°±æ¯”è¾ƒéº»çƒ¦ çŠ¶æ€å¯¹è±¡çš„å®ç°å¦‚æœæˆ‘ä»¬å°†ä¸åŒçš„åˆ¤æ–­ç»“æœå°è£…åœ¨çŠ¶æ€å¯¹è±¡å†…ï¼Œç„¶åæ”¹çŠ¶æ€è¿”å›ä¸€ä¸ªå¯è¢«è°ƒç”¨çš„ç»“æ„æ–¹æ³•ï¼Œç”¨äºè°ƒç”¨çŠ¶æ€å¯¹è±¡å†…éƒ¨æŸç§æ–¹æ³•ã€‚ 12345678910111213141516171819202122//æŠ•ç¥¨ç»“æœçŠ¶æ€å¯¹è±¡var ResultState = function()&#123; var States = &#123; state0:function()&#123; console.log(&#x27;å¤„ç†ç»“æœ0&#x27;) &#125;, state1:function()&#123; console.log(&#x27;å¤„ç†ç»“æœ1&#x27;) &#125;, state2:function()&#123; console.log(&#x27;å¤„ç†ç»“æœ2&#x27;) &#125;, &#125; function show(result)&#123; //å¦‚æœæ–¹æ³•å­˜åœ¨åˆ™æ‰§è¡Œ States[&#x27;state&#x27;+result] &amp;&amp; States[&#x27;state&#x27;+result]() &#125; return &#123; //è¿”å›è°ƒç”¨çŠ¶æ€æ–¹æ³•æ¥å£ show:show &#125;&#125; ä½¿ç”¨ 1ResultState.show(3) çŠ¶æ€æ¨¡å¼çš„ç›®çš„ï¼šå°†æ¡ä»¶åˆ¤æ–­ä¸åŒçš„ç»“æœè½¬åŒ–ä¸ºçŠ¶æ€å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚æ—¢ç„¶æ˜¯å†…éƒ¨çŠ¶æ€ä¸€èˆ¬å°±æ˜¯ç§æœ‰å˜é‡ï¼Œç§æœ‰æ–¹æ³•ï¼Œä¾¿äºæˆ‘ä»¬å¢åˆ æ”¹æŸ¥ã€‚ çŠ¶æ€çš„ä¼˜åŒ–æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œå†…éƒ¨ä¿å­˜çŠ¶æ€å˜é‡ï¼Œå†…éƒ¨å°è£…å¥½æ¯ç§åŠ¨ä½œå¯¹åº”çš„çŠ¶æ€ï¼Œæœ€åçŠ¶æ€å¯¹è±¡è¿”å›ä¸€ä¸ªæ¥å£å¯¹è±¡1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//åˆ›å»ºä¸€ä¸ªæ¸¸æˆçŠ¶æ€ç±»var HeroState = function () &#123; //å†…éƒ¨çŠ¶æ€ç§æœ‰å˜é‡ var _currentState = &#123;&#125;; //åŠ¨ä½œä¸çŠ¶æ€æ–¹æ³•æ˜ å°„ var states = &#123; jump: function () &#123; console.log(&#x27;è·³è·ƒ&#x27;) &#125;, move: function () &#123; console.log(&#x27;ç§»åŠ¨&#x27;) &#125;, shoot: function () &#123; console.log(&#x27;å°„å‡»&#x27;) &#125;, squat: function () &#123; console.log(&#x27;è¹²ä¸‹&#x27;) &#125; &#125; //åŠ¨ä½œæ§åˆ¶ç±» var Action = &#123; //æ”¹å˜çŠ¶æ€æ–¹æ³• changeState: function () &#123; var arg = arguments; //é‡ç½®å†…éƒ¨çŠ¶æ€ _currentState = &#123;&#125;; if (arg.length) &#123; //éå†åŠ¨ä½œ for (var i = 0, len = arg.length; i &lt; len; i++) &#123; _currentState[arg[i]] = true; &#125; &#125; //è¿”å›åŠ¨ä½œæ§åˆ¶ç±» return this; &#125;, //æ‰§è¡ŒåŠ¨ä½œ goes: function () &#123; console.log(&#x27;è§¦å‘ä¸€æ¬¡åŠ¨ä½œ&#x27;); for (const key in _currentState) &#123; states[key] &amp;&amp; states[key]() &#125; return this; &#125; &#125; return &#123; change: Action.changeState, goes : Action.goes &#125;&#125;ä½¿ç”¨123//åˆ›å»ºä¸€ä¸ªè¶…çº§è§’è‰²var hero = new HeroState();hero.change(&#x27;jump&#x27;,&#x27;shoot&#x27;).goes().goes()","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼","date":"2019-02-21T16:00:00.000Z","updated":"2020-09-16T09:07:34.000Z","comments":true,"path":"2019/02/22/Javascriptè®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"è¿­ä»£å™¨æ¨¡å¼æ˜¯ ï¼šåœ¨ä¸æš´éœ²å†…éƒ¨ç»“æ„çš„åŒæ—¶ï¼Œå¯ä»¥é¡ºåˆ©çš„è®¿é—®èšåˆå¯¹è±¡å†…éƒ¨çš„å…ƒç´ ","text":"è¿­ä»£å™¨æ¨¡å¼æ˜¯ ï¼šåœ¨ä¸æš´éœ²å†…éƒ¨ç»“æ„çš„åŒæ—¶ï¼Œå¯ä»¥é¡ºåˆ©çš„è®¿é—®èšåˆå¯¹è±¡å†…éƒ¨çš„å…ƒç´  é¦–å…ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿­ä»£å™¨ï¼Ÿæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­çœ‹çœ‹ 12345678910111213141516171819//å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ç¢°åˆ°è¿™æ ·çš„å¾ªç¯æ•°æ®var array = [1, 2, 3]var nodeList = document.getElementsByTagName(&quot;p&quot;);var $p = $(&#x27;p&#x27;);//è¦å¯¹ä¸‰ä¸ªå˜é‡è¿›è¡Œéå†è¦å†™å†™ä¸‰ç§æ–¹æ³•array.forEach(function (item) &#123; console.log(item)&#125;)var i, len = nodeList.length;for (i = 0; i &lt; len; i++) &#123; console.log(nodeList[i])&#125;$p.each(function (key, p) &#123; console.log(key, p)&#125;) ç»“æœ å†™ä¸‰éçƒ¦ä¸çƒ¦ï¼Ÿ å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿä½¿ç”¨è¿­ä»£å™¨è¯•è¯•å§ï¼Ÿ å†™ä¸€ä¸ªè¿­ä»£å™¨æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637class Iterator &#123; constructor(container) &#123; this.list = container.list this.index = 0 &#125; next() &#123; if (this.hasNext()) &#123; return this.list[this.index++] &#125; //æ²¡æœ‰ä¸‹ä¸€é¡¹ return null &#125; hasNext() &#123; if (this.index &gt;=this.list.length) &#123; return false &#125; return true &#125;&#125;// å…¼å®¹es6ä¸­æ‰€æœ‰æœ‰åºæ•°æ®ç»“æ„class Container&#123; constructor(list)&#123; this.list = list &#125; //ç”Ÿæˆéå†å™¨ getIterator()&#123; return new Iterator(this) //ä¼ thisæŒ‡å‘Container &#125;&#125;let arr = [1,2,3];let container = new Container([1,2,3]);let iterator = container.getIterator();while (iterator.hasNext()) &#123; console.log(iterator.next())&#125; åœ¨jqueryä¸­çš„å¼•ç”¨åœº1234567891011function each(data) &#123; var $data = $(data); //ç”Ÿæˆè¿­ä»£å™¨ $data.each(function (key,p) &#123; console.log(key,p); &#125;)&#125;//testeach(arr)each(nodeList)each($p) for..ofçš„å†™æ³•ä¹Ÿå±äºè¿­ä»£å™¨çš„ä¸€ç§ 1234567891011121314151617181920// ================åœ¨iteratorä¸­çš„å¼•ç”¨åœºæ™¯=================// dataè¦å±äº[Symbol.iterator]å±æ€§function eachSyiter(data) &#123; for (const item of data) &#123; console.log(item); &#125;&#125;//ç­‰åŒäºä¸‹é¢çš„å†™æ³•function eachSyiter(params) &#123; //ç”Ÿæˆéå†å™¨ let iterator = data[Symbol.iterator]; let item = &#123;done:false&#125; while (!item.done) &#123; item = iterator.next() if(!item.done)&#123; console.log(item.value); &#125; &#125;&#125; æœ€åå†ä¸¾ä¸ªå°æ —å­ç”¨ä¸ªè¿­ä»£å™¨æ€æƒ³è§£å†³å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜ 1234567891011121314151617181920212223242526272829303132//è¿­ä»£å™¨var Iterator_mode = function (item, container) &#123; //è·å–çˆ¶å®¹å™¨ var container = container &amp;&amp; document.getElementById(container) || document; //è·å–å…ƒç´  var items = container.getElementsByTagName(items); //è·å–å…ƒç´ é•¿åº¦ var length = items.length; //å½“å‰å…ƒç´ ç´¢å¼• var index = 0; //ç¼“å­˜åŸæ¥æ•°ç»„çš„æ–¹æ³• === æµ…å¤åˆ¶ä¸€ä»½å‰¯æœ¬ var splice = items.splice(0); return &#123; //ç¬¬ä¸€ä¸ª first: function () &#123;&#125;, //æœ€åä¸ª last: function () &#123;&#125;, //å‰ä¸€ä¸ª prev: function () &#123;&#125;, //åä¸€ä¸ª next: function () &#123;&#125;, //è·å–æŸä¸€ä¸ªå…ƒç´  get: function () &#123;&#125;, //å¯¹æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡ŒæŸä¸€ä¸ªæ–¹æ³• dealEach: function () &#123;&#125;, //å¯¹æŸä¸€ä¸ªå…ƒç´ æ‰§è¡ŒæŸä¸€ä¸ªæ–¹æ³• dealItem: function () &#123;&#125;, //æ’å®ƒæ–¹å¼å¤„ç†æŸä¸€ä¸ªå…ƒç´  exclusive: function () &#123;&#125; &#125;&#125; ä½¿ç”¨123456789101112// ä½¿ç”¨var demo = new Iterator_mode(&quot;li&quot;, &#x27;container&#x27;);console.log(demo.first());console.log(demo.last());console.log(demo.next());console.log(demo.get(2000));//å¤„ç†æ‰€æœ‰å…ƒç´ demo.dealEach(function(text,color) &#123; this.innerHTML = text; this.style.background = color;&#125;,&#x27;test&#x27;,&#x27;pink&#x27;) è¿™ç§æ€æƒ³çš„å¥½å¤„ï¼šè¿­ä»£å™¨æä¾›çš„æ¥å£æ–¹æ³•å°±èƒ½è½»æ˜“çš„è®¿é—®èšåˆå¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”šè‡³ä¸éœ€è¦çŸ¥é“èšåˆå¯¹è±¡å†…éƒ¨çš„å…·ä½“ç»“æ„ å®ç°ä¸‹ä¸Šé¢è¿­ä»£å™¨çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼šfirst 1234first:function()&#123; index = 0; return items[index];&#125; last 1234last:function()&#123; index = length-1; return items[index];&#125; pre 12345678pre:function()&#123; if(--index&gt;0)&#123; return items[index] &#125;else&#123; index = 0 return null &#125;&#125; next12345678next:function()&#123; if(++index &lt; length)&#123; return items[index] &#125;else&#123; index = length -1 return null &#125;&#125;get12345get:function(num)&#123; //å¦‚æœnumå¤§äºç­‰äº0 å†è·å–æ­£å‘è·å–ï¼Œå¦åˆ™é€†å‘è·å– index = num &gt;= 0 ? num%length : num%length+length; return items[index];&#125;dealEach1 æ•°ç»„è¿­ä»£å™¨æ¯”å¦‚ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒeachæ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°æ•°ç»„è¿­ä»£å™¨ï¼Œå®ƒæŠŠå…ƒç´ çš„ç´¢å¼•å’Œç´¢å¼•å€¼ä¼ å…¥å›è°ƒå‡½æ•°ä¸­ 12345678910111213var eachArray = function(arr,fn)&#123; var i = 0, len = arr.length; //éå†æ•°ç»„ for (;i &lt; len;i++) &#123; //ä»¥æ­¤æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ³¨æ„å›è°ƒå‡½æ•°ä¸­ä¼ å…¥å‚æ•°ç¬¬ä¸€ä¸ªä¸ºç´¢å¼•, //ç¬¬äºŒä¸ªæ˜¯ç´¢å¼•å€¼ if(fn.call(arr[i],i,arr[i]) === false) &#123; break; &#125; &#125;&#125; å¯¹è±¡è¿­ä»£å™¨12345678var eachObject = function(obj,fn) &#123; for(var i in obj)&#123; if(fn.call(obj[i],i,obj[i]) === false)&#123; break; &#125; &#125;&#125; åŒæ­¥å˜é‡è¿­ä»£å™¨æˆ‘ä»¬åœ¨é¡µé¢åŒæ­¥å˜é‡å†…æŸäº›å±æ€§å€¼æ—¶ï¼Œæˆ‘ä»¬ä¸çŸ¥é“æœåŠ¡ç«¯å°†è¯¥å±æ€§æˆ–è€…è¯¥å±æ€§çš„ä¸Šé¡ºåºæ‰“å°åˆ°é¡µé¢ä¸Šï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ç‚¹è¯­æ³•æˆ–è€…[]è¯­æ³•ç›´æ¥å¯¼è‡´é”™è¯¯ï¼Œå› æ­¤éœ€è¦ä¸€å±‚ä¸€å±‚çš„å»å®‰å…¨æ ¡éªŒã€‚ 1234var a = &#123;&#125;var c = a &amp;&amp; a.b &amp;&amp; a.b.c; ä½¿ç”¨è¿­ä»£å™¨æ¥æ ¡éªŒä»£ç æ•°æ®12345678910111213141516171819202122bGetter = function(key) &#123; //å¦‚æœbä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›æœªå®šä¹‰ if(!b) return undefined; var result = b; //è·å–åŒæ­¥bçš„å¯¹è±¡ key = key.split(&#x27;.&#x27;); //è§£æå±æ€§çš„å±‚æ¬¡åºåˆ— //è¿­ä»£åŒæ­¥å˜é‡bå¯¹è±¡å±æ€§ for (let i = 0, len=key.length; i &lt; len; i++) &#123; if(result[key[i]] != undefined)&#123; result = result[key[i]] &#125;else&#123; return undefined &#125; &#125; //è¿”å›è·å–ç»“æœ return result;&#125;//è·å–ç”¨æˆ·ä¿¡æ¯console.log(bGetter(&quot;client.user.username&quot;)); //è½»èˆé£æ‰¬//è·å–æœ¬åœ°è¯­è¨€æ•°æ®console.log(bGetter(&quot;server.lang.local&quot;)); //undefinedå¦‚æœæœ‰æ—¶å€™ç”¨æˆ·æ•°æ®åœ¨ä¸»é¡µä¼šæ·»åŠ ä¸€äº›æˆ–ä¿®æ”¹ä¸€äº›æ•°æ® ä¹Ÿå¯ä»¥é€šè¿‡åŒæ­¥å˜é‡èµ‹å€¼å™¨æ¥å®ç° 1234567891011121314151617181920212223242526bSetter = function (key,val) &#123; //å¦‚æœbä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›æœªå®šä¹‰ if (!b) return undefined; var result = b; key = key.split(&#x27;.&#x27;); //è¿­ä»£åŒæ­¥å˜é‡bå¯¹è±¡å±æ€§ for (var i = 0, len = key.length; i &lt; len; i++) &#123; //å¦‚æœç¬¬iå±‚å±æ€§å¯¹åº”çš„å€¼ä¸å­˜åœ¨ï¼Œåˆ™å®šä¹‰ä¸ºå¯¹è±¡ if (result[key[i]] === undefined) &#123; result[key[i]] = &#123;&#125; &#125; //å¦‚æœç¬¬iå±‚å±æ€§å¯¹åº”çš„å€¼ä¸æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ if(!result[key[i]] instanceof Object)&#123; throw new Error(&#x27;b&#x27;+ key.splice(0,i+1).join(&quot;.&quot;)+&quot;is not object&quot;); return false &#125; //è¿­ä»£æ”¹å±‚çš„å±æ€§å€¼ result = result[key[i]] &#125; //è¿”å›è·å–ç»“æœ return result[key[i]] = val;&#125;//è·å–ç”¨æˆ·ä¿¡æ¯console.log(bSetter(&quot;client.module.news.sports&quot;,&quot;javascript&quot;)); //è½»èˆé£æ‰¬","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹é“¾æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹é“¾æ¨¡å¼","date":"2019-02-21T16:00:00.000Z","updated":"2020-09-16T09:07:36.000Z","comments":true,"path":"2019/02/22/Javascriptè®¾è®¡æ¨¡å¼ä¹‹é“¾æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%93%BE%E6%A8%A1%E5%BC%8F/","excerpt":"å¾ˆæ—©ä¹‹å‰ä¸€ç›´æƒ³è¯»ä¸€ä¸‹jqueryæˆ–è€…zeptoçš„æºç ï¼Œä½†è¯»æºç ä¹‹å‰è¿˜æ˜¯å¾—å…ˆäº†è§£ä¸‹ä¸Šé¢æ˜¯é“¾æ¨¡å¼ï¼›å› ä¸ºæºç çš„æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸ªé“¾æ¨¡å¼","text":"å¾ˆæ—©ä¹‹å‰ä¸€ç›´æƒ³è¯»ä¸€ä¸‹jqueryæˆ–è€…zeptoçš„æºç ï¼Œä½†è¯»æºç ä¹‹å‰è¿˜æ˜¯å¾—å…ˆäº†è§£ä¸‹ä¸Šé¢æ˜¯é“¾æ¨¡å¼ï¼›å› ä¸ºæºç çš„æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸ªé“¾æ¨¡å¼ é“¾æ¨¡å¼ï¼šé€šè¿‡å¯¹è±¡æ–¹æ³•ä¸­å°†å½“å‰å¯¹è±¡è¿”å›ï¼Œå®ç°åŒä¸€ä¸ªå¯¹è±¡å¤šä¸ªæ–¹æ³•çš„é“¾å¼è°ƒç”¨ï¼Œä»è€Œç®€åŒ–è¯¥å¯¹è±¡å¤šä¸ªæ–¹æ³•çš„å¤šæ¬¡è°ƒç”¨ï¼Œå¯¹è¯¥å¯¹è±¡çš„å¤šæ¬¡å¼•ç”¨ã€‚ è¯´ç™½äº†è¿™äº›éƒ½æ˜¯åŸºäºåŸå‹ç»§æ‰¿ 123456789var A = function()&#123;&#125;A.prototype = &#123; length:2, size:function()&#123; return this.length &#125;&#125; å¦‚æœæˆ‘ä»¬æƒ³è®¿é—®sizeæ–¹æ³•è¯¥å¦‚ä½•åšï¼Ÿ 123var a = new A();console.log(a.size()) //2 ä½†æœ‰æ²¡æœ‰æƒ³è¿‡å¦‚æœè¿™æ ·è®¿é—® 12console.log(A.size()) //æŠ¥é”™console.log(A().size()) //æŠ¥é”™ ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ ç¬¬ä¸€ç§å› ä¸ºsizeç»‘å®šåœ¨åŸå‹ä¸Šæ²¡æœ‰ç»‘å®šåœ¨è‡ªå·±èº«ä¸Š ç¬¬äºŒç§Aå‡½æ•°å¯¹åº”æ‰§è¡Œç»“æœæ²¡æœ‰è¿”å›å€¼æ‰¾ä¸åˆ°sizeæ–¹æ³• æ‰¾ä½å°åŠ©æ‰‹12345678910111213var A = function()&#123; return A.fn&#125;var A.fn = A.prototype = &#123; length:2, size:function()&#123; return this.length &#125;&#125;//testconsole.log(A.fn);console.log(A().size()); è·å–å…ƒç´ ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›A.fnèƒ½æä¾›è·å–å…ƒç´ æ–¹æ³•çš„initç„¶åå†Aä¸­è¿”å›123456789101112131415161718// a.fnæ–¹æ³•ä¸­æä¾›initç”¨æ¥è·å–å…ƒç´ ç„¶åè¿”å›var A = function (selector) &#123; return A.fn.init(selector)&#125;A.fn = A.prototype = &#123; length: 2, size : function () &#123; return this.length &#125;, init: function (selector) &#123; return document.getElementById(selector) &#125;&#125;//testconsole.log(A(&#x27;demo&#x27;)); è¿˜é‡åˆ°ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿”å›ç»“æœèƒ½å¤Ÿæ‹¥æœ‰A.fnä¸­çš„å¾ˆå¤šæ–¹æ³•å¦‚ä½•åŠåˆ°å‘¢ï¼Ÿ thiså¤§æ³•å¥½ï¼thisæŒ‡å‘çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åˆå¯ä»¥è®¾ç½®å±æ€§é‚£æˆ‘ä»¬æŠŠthiså¯¹è±¡è®¾ç½®æˆå½“å‰å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ä¸å°±å¯ä»¥äº†å˜›~~~O(âˆ©_âˆ©)O 12345678910111213141516171819202122232425// ä¸€ä¸ªé—®é¢˜å¦‚ä½•è®¿é—®å…ƒç´ çš„åŒæ—¶ï¼Œåˆèƒ½è®¿é—®å¯¹è±¡ä¸­çš„æ–¹æ³•var A = function (selector) &#123; return A.fn.init(selector)&#125;A.fn = A.prototype = &#123; length: 2, size : function () &#123; console.log(&#x27;sizefn &#x27;,this); return this.length &#125;, init: function (selector) &#123; console.log(&#x27;initfn &#x27;,this); //fn this[0] = document.getElementById(selector) this.length = 1; return this; //è¿”å›this &#125;&#125;//testvar demo = A(&#x27;demo&#x27;);console.log(demo);console.log(demo.size());//2 è¿˜æ˜¯ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜å¦‚æœè¢«è¦†ç›– 12var test = A(&#x27;test&#x27;)console.log(demo); åŸå› æ˜¯ï¼šAæ„é€ å‡½æ•°æ¯æ¬¡returnè¿”å›A.fn.initå¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼›æ‰€ä»¥é‚£æˆ‘ä»¬åŠ ä¸Šä¸€ä¸ªnew ä½†æ˜¯è¿˜æ˜¯ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜è°ƒç”¨sizeæ–¹æ³•å°±ä¼šæŠ¥é”™ 123456789101112//æ„é€ å‡½æ•°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡é€ æˆçš„var A = function (selector) &#123; return new A.fn.init(selector)&#125;var demo = A(&#x27;demo&#x27;);console.log(demo);var test = A(&#x27;test&#x27;)console.log(demo); console.log(&#x27;==============&#x27;);console.log(demo.size()); //ä¸ºä»€ä¹ˆæŠ¥é”™ newä¹‹å‰ newä¹‹å åŸå› ï¼šç”±äºnewå¯¹å¯¹è±¡å†…çš„å±æ€§è¿›è¡Œäº†å¤åˆ¶ï¼Œæ‰€ä»¥thisæŒ‡å‘ä¸åœ¨æ˜¯A.fnã€A.prototype è€Œæ˜¯A.fn.A.initå‘¢ï¼Ÿ åŸå‹æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•æ˜¯åœ¨æ„é€ å‡½æ•°newå…³é”®è¯æŒ‡å‘æ—¶æ‰èƒ½è¢«æ„é€ å‡½æ•°è·å–ï¼Œæ‰€ä»¥å¹³æ—¶æ„é€ å‡½æ•°æ˜¯è·å–ä¸åˆ°åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•çš„ é˜²æ­¢æ–¹æ³•ä¸¢å¤±new A.fn.init(selector)ä¸­çš„initä¸­çš„thisä¸ºä»€ä¹ˆæŒ‡å‘ A.fn.A.init???? 123456789101112131415161718192021222324252627282930//æ„é€ å‡½æ•°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡é€ æˆçš„var A = function (selector) &#123; return new A.fn.init(selector)&#125;A.fn = A.prototype = &#123; constructor: A, init : function (selector) &#123; console.log(this.constructor); /** Æ’(selector) &#123; return new A.fn.init(selector) &#125; */ &#125;, length: 2, size : function () &#123; return this.length &#125;, &#125;//è¿™å¥éå¸¸é‡è¦A.fn.init.prototype = A.fn; //testvar demo = A(&#x27;demo&#x27;);console.log(demo);console.log(&#x27;==============&#x27;);console.log(demo.size()); //2 åªè¦å°†æ„é€ å‡½æ•°çš„å¯¹è±¡æŒ‡å‘ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡å³å¯ æ•°ç»„ä¸å¯¹è±¡jqueryè¿”å›çš„æ˜¯æ•°ç»„Aæ¡†æ¶è¿”å›çš„æ˜¯å¯¹è±¡ åŸå› ï¼šæ•°ç»„ å¯¹è±¡ å‡½æ•°éƒ½è¢«çœ‹æˆå¯¹è±¡çš„å®ä¾‹ï¼Œjavascriptæ²¡æœ‰ä¸€ä¸ªçº¯ç²¹çš„æ•°ç»„ç±»å‹ï¼Œä¸€äº›æµè§ˆå™¨å¼•æ“åœ¨åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ•°ç»„ä¸ä»…ä»…åˆ¤æ–­æœ‰æ²¡æœ‰lengthé•¿åº¦ï¼Œè¿˜ä¼šåˆ¤æ–­æ˜¯å¦å…·æœ‰æ•°ç»„æ–¹æ³•æ¥ç¡®å®šæ˜¯å¦ç”¨æ•°ç»„å½¢å¼å±•å¼€ å¢åŠ å‡ ä¸ªæ•°ç»„æ–¹æ³•123456789101112131415161718A.fn = A.prototype = &#123; constructor: A, init : function (selector, context) &#123; //è·å–å…ƒç´ é•¿åº¦ this.length = 0; //........ //è¿”å›thiså¯¹è±¡ return this &#125;, push : [].push, sort : [].sort, splice: [].splice, length: 2, size : function () &#123; return this.length &#125;,&#125; æ–¹æ³•ä¸æ‰©å±•é€šè¿‡å¯¹jqueryçš„extendæ–¹æ³•å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†extendçš„2ä¸ªä½œç”¨ä¸€ä¸ªé˜Ÿå¤–éƒ¨å¯¹è±¡æ‰©å±•ï¼ŒäºŒæ˜¯å¯¹å†…éƒ¨å¯¹è±¡æ‰©å±• 12345678910111213141516171819202122232425262728293031323334A.extend = A.fn.extend = function() &#123; var i = 1, len = arguments.length, target = arguments[0], j; if(i === len)&#123; target = this; i--; &#125; //éå†å‚æ•°ä¸­çš„æ‰©å±•å¯¹è±¡ for(;i&lt;len;i++)&#123; //éå†æ‰©å±•å¯¹è±¡ä¸­çš„å±æ€§ for(j in arguments[i])&#123; //æ‰©å±•å¯¹è±¡ target[j] = arguments[i][j] &#125; &#125; console.log(&#x27;è¿”å›å¯¹è±¡&#x27;,target); return target&#125;var demo = A.extend(&#123;first:1&#125;,&#123;second:2&#125;,&#123;third:3&#125;,&#123;four:4&#125;,&#123;five:5&#125;)console.log(demo);var demo1 = A.extend(A.fn,&#123;version:&quot;1.0&quot;&#125;)console.log(demo1); A.fn.extend(&#123;getVersion:function() &#123; return this.version&#125;&#125;)console.log(A(&#x27;demo&#x27;).getVersion()); æ·»åŠ æ–¹æ³•","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼","date":"2019-02-20T16:00:00.000Z","updated":"2020-09-16T09:07:36.000Z","comments":true,"path":"2019/02/21/Javascriptè®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/","excerpt":"å¤–è§‚æ¨¡å¼(é—¨é¢æ¨¡å¼)ï¼Œæ˜¯ä¸€ç§ç›¸å¯¹ç®€å•è€Œåˆæ— å¤„ä¸åœ¨çš„æ¨¡å¼ã€‚å¤–è§‚æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—å®¢æˆ·ç«¯æˆ–å­ç³»ç»Ÿæ›´åŠ æ–¹ä¾¿è°ƒç”¨ã€‚","text":"å¤–è§‚æ¨¡å¼(é—¨é¢æ¨¡å¼)ï¼Œæ˜¯ä¸€ç§ç›¸å¯¹ç®€å•è€Œåˆæ— å¤„ä¸åœ¨çš„æ¨¡å¼ã€‚å¤–è§‚æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—å®¢æˆ·ç«¯æˆ–å­ç³»ç»Ÿæ›´åŠ æ–¹ä¾¿è°ƒç”¨ã€‚ è¿˜ä¸æ˜ç™½å°±çœ‹å›¾ï¼š 123456789101112//åœºæ™¯function bindEvent(elem,type,selector,fn) &#123; if(fn == null)&#123; fn = selector; selector = null; &#125; //dosomething.......&#125;//è°ƒç”¨bindEvent(elem,&#x27;click&#x27;,&quot;#div1&quot;,fn)bindEvent(elem,&quot;moveIn&quot;,fn) é¦–å…ˆçœ‹ä¸€ä¸ªæ¯”è¾ƒåˆçº§å°ç™½çš„å†™æ³•ï¼š 123456789101112//badå†™æ³•document.onclick = function(e) &#123; e.preventDefault(); if(e.target !== document.getElementById(&quot;myinput&quot;))&#123; hidePageAlert(); &#125;&#125;function hidePageAlert(params) &#123; console.log(&#x27;éšè—å¼¹çª—&#x27;); &#125; ç¼ºç‚¹ï¼š1.onclickçš„ç‚¹å‡»äº‹ä»¶åœ¨dom0çº§äº‹ä»¶å¤„ç†ï¼Œå¦‚æœå…¶ä»–å¼€å‘äººå‘˜ä¹Ÿç”¨è¿™ä¸ªç»‘å®šäº‹ä»¶å°±ä¼šè¦†ç›–è¿™ä¸ªç‚¹å‡»äº‹ä»¶2.ä½ç‰ˆæœ¬æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒe.preventDefaultå’Œe.targetä¹Ÿéœ€è¦å¤„ç†2.å¦‚æœç”¨dom2äº‹ä»¶å¤„ç†åº”è¯¥å¯¹è€ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹å¤„ç†attachEventï¼Œå¦‚æœä¸æ”¯æŒdom2 é‚£åªèƒ½ç”¨onclick ä»£ç å®ç°12345678910111213141516171819202122232425//å¤–è§‚æ¨¡å¼å®ç°function addEvent(dom,type,fn) &#123; //å¯¹äºdom2äº‹ä»¶çš„å¤„ç† if(dom.addEventListener)&#123; dom.addEventListener(type,fn,false); &#125;else if(dom.attachEvent)&#123; dom.attachEvent(&quot;on&quot;+type,fn) &#125;else&#123; //ä¸æ”¯æŒaddevnetæˆ–è€… attachEventçš„æ–¹æ³• dom[&#x27;on&#x27;+type] = fn &#125;&#125;//è·å–domå…ƒç´ var myInput = document.getElementById(&quot;myinput&quot;);addEvent(myInput,&quot;click&quot;,function() &#123; console.log(&#x27;ç»‘å®šç¬¬ä¸€ä¸ªäº‹ä»¶ä¸­&#x27;); &#125;)addEvent(myInput,&#x27;click&#x27;,function() &#123; console.log(&#x27;ç»‘å®šç¬¬äºŒä¸ªäº‹ä»¶ä¸­&#x27;);&#125;)addEvent(myInput, &#x27;click&#x27;, function () &#123; console.log(&#x27;ç»‘å®šç¬¬ä¸‰ä¸ªäº‹ä»¶ä¸­&#x27;);&#125;) å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„e.preventDefaultå’Œe.targetå¤„ç†12345678910111213141516171819//è·å–äº‹ä»¶å¯¹è±¡var getEvent = function(event) &#123; return event || window.event;&#125;//è·å–å…ƒç´ var getTarget = function(event) &#123; var event = getEvent(event) return event.target || event.srcElement&#125;//é˜»æ­¢é»˜è®¤äº‹ä»¶var preventDefault = function(event) &#123; var event = getEvent(event); if(event.preventDefault)&#123; event.preventDefault(); &#125;else&#123; event.returnValue = false; &#125;&#125; æœ€ååœ¨ä¼˜åŒ–ä¸€ä¸‹ä¹‹å‰çš„å°ç™½ä»£ç ï¼š 1234567//ä¼˜åŒ–document.onclick = function(e) &#123; preventDefault(e) if(getTarget(e) !== document.getElementById(&quot;myinput&quot;))&#123; hidePageAlert(); &#125;&#125; è®¸å¤šä»£ç å—ä¹Ÿé‡‡ç”¨å¤–è§‚æ¨¡å¼æ¥å°è£…å¤šä¸ªåŠŸèƒ½ï¼Œæ¥ç®€åŒ–åº•å±‚æ“ä½œæ–¹æ³•ï¼šæ¯”å¦‚æˆ‘ä»¬æ¥è·å–å…ƒç´ å±æ€§æ ·å¼çš„ç®€å•æ–¹æ³•åº“ 123456789101112131415161718192021222324252627282930313233//ç®€çº¦ç‰ˆæœ¬è·å–å…ƒç´ æ ·å¼æ–¹æ³•åº“let $ = &#123; //é€šè¿‡idè·å– g:function(id) &#123; return document.getElementById(&quot;id&quot;) &#125;, //è®¾ç½®å…ƒç´ csså±æ€§ css:function(id,key,val) &#123; document.getElementById(id).style[key] = val &#125;, //è®¾ç½®å…ƒç´ å±æ€§ attr:function(id,key,val) &#123; document.getElementById(id)[key] = val &#125;, html:function(id,html) &#123; document.getElementById(id).innerHTML = html &#125;, on:function(id,type,fn) &#123; document.getElementById(id)[&#x27;on&#x27;+type] = fn &#125;&#125;$.css(&#x27;book&#x27;,&#x27;background&#x27;,&#x27;red&#x27;);$.attr(&quot;book&quot;,&quot;className&quot;,&quot;box&quot;)$.html(&#x27;book&#x27;,&#x27;è¿™æ˜¯æ›´æ–°çš„æ¶ˆæ¯&#x27;)$.on(&quot;book&quot;,&quot;click&quot;,function() &#123; $.css(&#x27;book&#x27;, &#x27;width&#x27;, &#x27;150px&#x27;);&#125;)/*&lt;p id=&quot;book&quot; class=&quot;box&quot; style=&quot;background: red; width: 150px;&quot;&gt;è¿™æ˜¯æ›´æ–°çš„æ¶ˆæ¯&lt;/p&gt;*/","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼","date":"2019-02-19T16:00:00.000Z","updated":"2020-09-16T09:07:34.000Z","comments":true,"path":"2019/02/20/Javascriptè®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/","excerpt":"ç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™2ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨","text":"ç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™2ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨ ç™½è¯æ–‡ï¼šä»£ç†æ¨¡å¼çš„å®šä¹‰æ˜¯æŠŠå¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®, äº¤ç»™å¦ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ“ä½œ. 12345678910111213141516171819202122232425class RealImg &#123; constructor(filename) &#123; this.filename = filename; &#125; display() &#123; console.log(&#x27;display... &#x27; + this.filename) &#125; loadFromDisk() &#123; console.log(&#x27;loadding ...&#x27; + this.filename) &#125;&#125;class ProxyImg&#123; constructor(filename)&#123; this.realImg = new RealImg(&quot;filename&quot;) &#125; display()&#123; this.realImg.display(); &#125;&#125;let proxyImg = new ProxyImg(&quot;1.png&quot;);proxyImg.display(); //display... filename å†ä¸¾ä¸ªæ —å­ES6ä¸­çš„proxyéå¸¸å¥½çš„ä½¿ç”¨çš„ä»£ç†æ¨¡å¼çš„ç²¾é«“ let p = new Proxy(target, handler); å‚æ•° è¯´æ˜ target ç”¨ProxyåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚ handler ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚ æ˜æ˜Ÿä¸ç»çºªäººä¹‹é—´çš„å…³ç³» æŸä¸ªæ˜æ˜Ÿå¯¹è±¡ 123456//æŸä¸ªæ˜æ˜Ÿlet star = &#123; name : &quot;ç‹å¯Œè´µ&quot;, age : 18, phone: &#x27;13084920234&#x27;&#125; æ˜æ˜Ÿç»çºªäººå¯¹è±¡ 123456789101112131415161718192021222324252627282930//ç»çºªäººlet agent = new Proxy(star,&#123; get: function (target,key) &#123; if(key === &quot;phone&quot;)&#123; return &#x27;ç»çºªäººphoneï¼š1233423423&#x27; &#125; if(key === &quot;price&quot;)&#123; return &#x27;æ˜æ˜Ÿå‡ºåœºä»·ï¼š120000&#x27; &#125; return target[key] &#125;, set: function(target,key,val)&#123; if(key === &quot;customPrice&quot;)&#123; if(val &lt; 100000)&#123; //æœ€ä½10w throw new Error(&#x27;ä»·æ ¼ä¸ä½äº10w&#x27;) &#125;else&#123; target[key] = val; return true &#125; &#125; &#125;&#125;)console.log(agent.phone); console.log(agent.price);console.log(agent.age);console.log(agent.name);agent.customPrice = 9000;console.log(agent.customPrice);","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼","date":"2019-02-17T16:00:00.000Z","updated":"2020-09-16T09:07:35.000Z","comments":true,"path":"2019/02/18/Javascriptè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2019/02/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰ï¼šåœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰äº†ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚","text":"è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰ï¼šåœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰äº†ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚ å…¶å®æˆ‘ä»¬ç»å¸¸æ¥è§¦çš„çš„domäº‹ä»¶. ä¹Ÿæ˜¯jså’Œdomä¹‹é—´å®ç°çš„ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ åªè¦è®¢é˜…äº†divçš„clickäº‹ä»¶. å½“ç‚¹å‡»divçš„æ—¶å€™, function clickå°±ä¼šè¢«è§¦å‘. åœºæ™¯ï¼šä¸‰ä¸ªå·¥ç¨‹å¸ˆåˆ†åˆ«å†™äº†ä¸‰ä¸ªç‹¬ç«‹çš„æ¨¡å—:ç•™è¨€æ¨¡å—ï¼Œç”¨æˆ·ä¿¡æ¯æ¨¡å—ï¼Œæäº¤ç•™è¨€æ¨¡å—ï¼Œå¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªäººæƒ³æ·»åŠ åˆ«çš„åŠŸèƒ½åˆä¸èƒ½å½±å“å…¶ä»–åŠŸèƒ½ï¼Œä¸æƒ³è‡ªå·±å†™çš„æ¨¡å—ä¸åˆ«äººå†™çš„æ¨¡å—ä¸¥é‡è€¦åˆåœ¨ä¸€èµ·ï¼Œå°±éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼ ç®€å•çš„ç†è§£å¯ä»¥æ˜¯è¿™æ ·çš„ï¼šä¸€ä¸ªå¯¹è±¡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå‘å¸ƒè€…å‘å¸ƒä¿¡æ¯ï¼Œè®¢é˜…è€…è·å–ä¿¡æ¯ï¼Œè®¢é˜…äº†å°±èƒ½æ”¶åˆ°ä¿¡æ¯ï¼Œæ²¡è®¢é˜…å°±æ”¶ä¸åˆ°ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940var Observer = (function () &#123; //æ¶ˆæ¯é˜Ÿåˆ—é˜²æ­¢é˜Ÿåˆ—æš´éœ²è¢«ä¿®æ”¹ï¼Œä½œä¸ºç§æœ‰å˜é‡ä¿å­˜ var _message = &#123;&#125; return &#123; //æ³¨å†Œä¿¡æ¯æ¥å£ regist: function (type, fn) &#123; if (typeof _message[type] === &#x27;undefined&#x27;) &#123; _message[type] = [fn]; &#125; else &#123; _message[type].push(fn) &#125; &#125;, //å‘å¸ƒä¿¡æ¯æ¥å£ fire: function (type, args) &#123; if (!_message[type]) &#123; return; &#125; var events = &#123; type: type, args: args || &#123;&#125; &#125;, i = 0, len = _message[type].length; for (; i &lt; len; i++) &#123; _message[type][i].call(this, events); &#125; &#125;, //ç§»é™¤ä¿¡æ¯æ¥å£ remove: function (type, fn) &#123; if (_message[type] instanceof Array) &#123; var i = _message[type].length - 1; for (; i &gt; 0; i--) &#123; _message[type][i] === fn &amp;&amp; _message[type].splice(i, 1) &#125; &#125; &#125; &#125;&#125;)() å·¥ç¨‹å¸ˆA 123456789101112131415161718192021/**å·¥ç¨‹å¸ˆaå†™è¿½åŠ è¯„è®ºåŠŸèƒ½ */(function () &#123; function addMsgItem(e) &#123; var text = e.args.text, ul = $$(&#x27;msg&#x27;), li = document.createElement(&quot;li&quot;); span = document.createElement(&quot;span&quot;); span.innerHTML = text; span.onclick = function () &#123; ul.removeChild(li) //å‘å¸ƒè€…åˆ é™¤ç•™è¨€ Observer.fire(&#x27;removeCommentMessage&#x27;, &#123; num: -1 &#125;); &#125; li.appendChild(span) ul.appendChild(li) &#125; Observer.regist(&quot;addCommentMessage&quot;, addMsgItem);&#125;)() å·¥ç¨‹å¸ˆB12345678910111213/**Bå·¥ç¨‹å¸ˆå¤åˆ¶é€’å¢ç”¨æˆ·ä¿¡æ¯åŠŸèƒ½æ¨¡å— */(function () &#123; function changeMsgNum(e) &#123; var num = e.args.num; var numtext = $$(&#x27;msg_num&#x27;) console.log(numtext, num); numtext.innerHTML = parseInt(numtext.innerHTML) + num; &#125; Observer.regist(&quot;addCommentMessage&quot;, changeMsgNum); Observer.regist(&quot;removeCommentMessage&quot;, changeMsgNum);&#125;)()å·¥ç¨‹å¸ˆC1234567891011121314151617/** cå·¥ç¨‹å¸ˆè´Ÿè´£ æäº¤ä¿¡æ¯æ¨¡å—å¼€å‘ */(function()&#123; $$(&#x27;user_submit&#x27;).onclick = function() &#123; var text = $$(&#x27;user_input&#x27;); if(text.value === &quot;&quot;)&#123; alert(&#x27;ä¸èƒ½ç©º&#x27;) return &#125; //å‘å¸ƒæ¶ˆæ¯ Observer.fire(&#x27;addCommentMessage&#x27;,&#123; text: text.value, num : 1 &#125;) text.value = &quot;&quot; &#125;&#125;)() è¿˜å¯ä»¥å¯¹è±¡é—´çš„è§£è€¦12345678910111213141516171819202122232425262728293031323334353637383940414243var Student = function(result) &#123; var that = this; that.result = result; that.say = function()&#123; console.log(that.result); &#125;&#125;//å›ç­”Student.prototype.answer = function(question) &#123; //æ³¨å†Œå‚æ•°é—®é¢˜ Observer.regist(question,this.say)&#125;//ç¡è§‰Student.prototype.sleep = function(question)&#123; //å–æ¶ˆç›‘å¬ Observer.remove(question,this.say)&#125;var Teacher = function() &#123;&#125;Teacher.prototype.ask = function(question) &#123; console.log(&#x27;è€å¸ˆçš„é—®é¢˜æ˜¯ï¼š &#x27;+ question); Observer.fire(question)&#125;var student1 = new Student(&#x27;å­¦ç”Ÿ1å›ç­”é—®é¢˜&#x27;)var student2 = new Student(&#x27;å­¦ç”Ÿ2å›ç­”é—®é¢˜&#x27;)var student3 = new Student(&#x27;å­¦ç”Ÿ3å›ç­”é—®é¢˜&#x27;)student1.answer(&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;);student1.answer(&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;);student2.answer(&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;)student3.answer(&#x27;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&#x27;)student3.answer(&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;);student3.sleep(&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;);var teacher = new Teacher();teacher.ask(&quot;ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼&quot;);teacher.ask(&#x27;è§£é‡Šè§‚å¯Ÿè€…æ¨¡å¼&#x27;); åœ¨å®é™…å¼€å‘ä¸­ä¸€ä¸ªå·¥ç¨‹å¸ˆå¾ˆéš¾åšåˆ°é¡¹ç›®ä¸­æ¯ä¸€ä¸ªæ¨¡å—ç†Ÿæ‚‰ï¼Œæ¨¡å—é—´ä¿¡æ¯çš„ä¼ é€’ä¸å¿…è¦ç›¸äº’å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œåªéœ€è¦é€šè¿‡è§‚å¯Ÿè€…æ³¨å†Œæˆ–å‘å¸ƒæ¶ˆæ¯ï¼› å…¶ä»–ä½¿ç”¨åœºæ™¯åœ¨reactä¸­ä¹Ÿç”¨åˆ°çš„è¿™ä¸ªæœºåˆ¶è¿›è¡Œè·¨ç»„ä»¶é€šä¿¡ä¸¾ä¸ªåœºæ™¯ä¾‹å­ï¼šé¡µé¢é¡¶éƒ¨çš„æœç´¢æ¡†ï¼ˆSearchï¼‰æ ¹æ®ä¸‹é¢åŠ è½½çš„å†…å®¹ï¼ˆContentï¼‰é¡µé¢ä¸åŒï¼Œæ˜¾ç¤ºä¸åŒçš„é»˜è®¤å†…å®¹ã€‚ä¹Ÿå°±æ˜¯ Content ç»„ä»¶éœ€è¦å‘é€æ•°æ®ç»™ Search ç»„ä»¶ã€‚","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-ä¸€èˆ¬æŒ‡ä»¤","slug":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-ä¸€èˆ¬æŒ‡ä»¤","date":"2019-02-17T16:00:00.000Z","updated":"2020-09-16T09:07:55.000Z","comments":true,"path":"2019/02/18/Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-ä¸€èˆ¬æŒ‡ä»¤/","link":"","permalink":"http://mariogogogo.github.io/2019/02/18/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%B8%80%E8%88%AC%E6%8C%87%E4%BB%A4/","excerpt":"","text":"å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„v-text/v-htmlæŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä¸€èˆ¬æŒ‡ä»¤è§£æ123&lt;p v-text=&quot;msg&quot;&gt;&lt;/p&gt;&lt;p v-html=&quot;msg&quot;&gt;&lt;/p&gt;&lt;p v-class=&quot;msg&quot;&gt;&lt;/p&gt; åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæŒ‡ä»¤1234567// äº‹ä»¶æŒ‡ä»¤ expè¡¨è¾¾å¼ ä¹Ÿå°±æ˜¯ æ–¹æ³•åif (me.isEventDirective(dir)) &#123; compileUtil.eventHandler(node, me.$vm, exp, dir); // æ™®é€šæŒ‡ä»¤&#125; else &#123; compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);&#125; 1234567891011121314var compileUtil = &#123; // è§£ætext text: function(node, vm, exp) &#123; this.bind(node, vm, exp, &#x27;text&#x27;); &#125;, html: function(node, vm, exp) &#123; this.bind(node, vm, exp, &#x27;html&#x27;); &#125;, class: function(node, vm, exp) &#123; this.bind(node, vm, exp, &#x27;class&#x27;); &#125;, æœ€åä½¿ç”¨æ›´æ–°å™¨æŠŠèŠ‚ç‚¹èµ‹å€¼è¿›å»1234567891011121314151617181920212223// æ›´æ–°å™¨ æ›´æ–°èŠ‚ç‚¹ ç»™èŠ‚ç‚¹èµ‹å€¼var updater = &#123; textUpdater: function(node, value) &#123; // textContentå°±æ˜¯ &#123;&#123;word&#125;&#125; node.textContent = typeof value == &#x27;undefined&#x27; ? &#x27;&#x27; : value; &#125;, htmlUpdater: function(node, value) &#123; node.innerHTML = typeof value == &#x27;undefined&#x27; ? &#x27;&#x27; : value; &#125;, classUpdater: function(node, value, oldValue) &#123; var className = node.className; className = className.replace(oldValue, &#x27;&#x27;).replace(/\\s$/, &#x27;&#x27;); //åˆ¤æ–­ class=&quot;a b&quot; è¿˜æ˜¯ class=â€œbâ€ æ˜¯å¦éœ€è¦ç©ºæ ¼ï¼Ÿ var space = className &amp;&amp; String(value) ? &#x27; &#x27; : &#x27;&#x27;; node.className = className + space + value; &#125;, modelUpdater: function(node, value, oldValue) &#123; node.value = typeof value == &#x27;undefined&#x27; ? &#x27;&#x27; : value; &#125; å°ç»“1) å¾—åˆ°æŒ‡ä»¤åå’ŒæŒ‡ä»¤å€¼(è¡¨è¾¾å¼) text/html/class msg/myClass2) ä» data ä¸­æ ¹æ®è¡¨è¾¾å¼å¾—åˆ°å¯¹åº”çš„å€¼3) æ ¹æ®æŒ‡ä»¤åç¡®å®šéœ€è¦æ“ä½œå…ƒç´ èŠ‚ç‚¹çš„ä»€ä¹ˆå±æ€§ v-textâ€”textContent å±æ€§ v-htmlâ€”innerHTML å±æ€§ v-classâ€“className å±æ€§4) å°†å¾—åˆ°çš„è¡¨è¾¾å¼çš„å€¼è®¾ç½®åˆ°å¯¹åº”çš„å±æ€§ä¸Š5) ç§»é™¤å…ƒç´ çš„æŒ‡ä»¤å±æ€§","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-äº‹ä»¶æŒ‡ä»¤","slug":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-äº‹ä»¶æŒ‡ä»¤","date":"2019-02-16T16:00:00.000Z","updated":"2020-09-16T09:07:55.000Z","comments":true,"path":"2019/02/17/Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-äº‹ä»¶æŒ‡ä»¤/","link":"","permalink":"http://mariogogogo.github.io/2019/02/17/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90-%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/","excerpt":"å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„@clickæŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ","text":"å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„@clickæŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿäº‹ä»¶æŒ‡ä»¤è§£æ1&lt;button v-on:click=&quot;button&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/button&gt; é¦–å…ˆè¿˜æ˜¯åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹123456//åˆ¤æ–­æ˜¯å¦å…ƒç´ èŠ‚ç‚¹if (me.isElementNode(node)) &#123; // ç¼–è¯‘æŒ‡ä»¤ me.compile(node); // åˆ¤æ–­æ˜¯å¦æ˜¯å¤§æ‹¬å·çš„æ–‡æœ¬èŠ‚ç‚¹&#125; ç„¶åè¿›å…¥compileç¼–è¯‘1234567891011121314151617181920var nodeAttrs = node.attributes, me = this;//[].slice.call(nodeAttrs) ---&gt;ä¼ªæ•°ç»„ è½¬æˆæ•°ç»„[].slice.call(nodeAttrs).forEach(function(attr) &#123; //attrname = â€œv-on = &quot;click&quot;&quot; var attrName = attr.name; if (me.isDirective(attrName)) &#123; var exp = attr.value; var dir = attrName.substring(2); // &quot;on:click&quot; // äº‹ä»¶æŒ‡ä»¤ if (me.isEventDirective(dir)) &#123; compileUtil.eventHandler(node, me.$vm, exp, dir); // æ™®é€šæŒ‡ä»¤ &#125; else &#123; compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp); &#125; node.removeAttribute(attrName); &#125;&#125;); å¦‚ä½•ç»‘å®šäº‹ä»¶12345678910111213// äº‹ä»¶å¤„ç† äº‹ä»¶buttonç»‘å®šäº‹ä»¶ç›‘å¬ äº‹ä»¶åå’Œå›è°ƒå‡½æ•°eventHandler: function(node, vm, exp, dir) &#123; // å¾—åˆ°äº‹ä»¶ç±»å‹å :click var eventType = dir.split(&#x27;:&#x27;)[1], //ä»methodsä¸­å¾—åˆ°è¡¨è¾¾å¼æ‰€å¯¹åº”çš„å‡½æ•°ï¼ˆäº‹ä»¶å›è°ƒå‡½æ•°ï¼‰ fn = vm.$options.methods &amp;&amp; vm.$options.methods[exp]; //å–åˆ°äº‹ä»¶çš„å‡½æ•° //å¦‚æœéƒ½å­˜åœ¨ if (eventType &amp;&amp; fn) &#123; //ç»‘å®šäº‹ä»¶ç›‘å¬ fn.bind(vm) //è®©äº‹ä»¶ä¸­ this.name --&gt;æŒ‡å‘vm // ç»™èŠ‚ç‚¹ç»‘å®šäº‹ä»¶åå’Œå›è°ƒå‡½æ•°domäº‹ä»¶ç›‘å¬ node.addEventListener(eventType, fn.bind(vm), false); &#125;&#125;, ä½†æˆ‘ä»¬åœ¨é¡µé¢ä¸­çœ‹ä¸åˆ°å¦‚ä½•æŒ‡ä»¤ï¼Œå› ä¸º12//ç§»é™¤æŒ‡ä»¤å±æ€§node.removeAttribute(attrName); å°ç»“ï¼šæ¨¡æ¿è§£æ(2): äº‹ä»¶æŒ‡ä»¤è§£æ1) ä»æŒ‡ä»¤åä¸­å–å‡ºäº‹ä»¶å2) æ ¹æ®æŒ‡ä»¤çš„å€¼(è¡¨è¾¾å¼)ä» methods ä¸­å¾—åˆ°å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°å¯¹è±¡3) ç»™å½“å‰å…ƒç´ èŠ‚ç‚¹ç»‘å®šæŒ‡å®šäº‹ä»¶åå’Œå›è°ƒå‡½æ•°çš„ dom äº‹ä»¶ç›‘å¬4) æŒ‡ä»¤è§£æå®Œå, ç§»é™¤æ­¤æŒ‡ä»¤å±æ€§","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ-è¡¨è¾¾å¼","slug":"Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ","date":"2019-02-15T16:00:00.000Z","updated":"2020-09-16T09:07:56.000Z","comments":true,"path":"2019/02/16/Vueæºç åˆ†æä¹‹æ¨¡æ¿è§£æ/","link":"","permalink":"http://mariogogogo.github.io/2019/02/16/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90/","excerpt":"å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„æŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ","text":"å¸¦ç€é—®é¢˜å»æ¢ç´¢ï¼Ÿvueä¸­çš„æŒ‡ä»¤æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ æ¨¡æ¿è§£æä¸»è¦åˆ†ï¼šå¤§æ‹¬å·è§£æ 1&lt;p&gt;&#123;&#123;name&#125;&#125;&lt;/p&gt; å°† el çš„æ‰€æœ‰å­èŠ‚ç‚¹å–å‡º, æ·»åŠ åˆ°ä¸€ä¸ªæ–°å»ºçš„æ–‡æ¡£ fragment å¯¹è±¡ä¸­å¯¹ fragment ä¸­çš„æ‰€æœ‰å±‚æ¬¡å­èŠ‚ç‚¹é€’å½’è¿›è¡Œç¼–è¯‘è§£æå¤„ç† å¯¹å¤§æ‹¬å·è¡¨è¾¾å¼æ–‡æœ¬èŠ‚ç‚¹è¿›è¡Œè§£æ å¯¹å…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤å±æ€§è¿›è¡Œè§£æ äº‹ä»¶æŒ‡ä»¤è§£æ ä¸€èˆ¬æŒ‡ä»¤è§£æ å°†è§£æåçš„ fragment æ·»åŠ åˆ° el ä¸­æ˜¾ç¤º 12// åˆ›å»ºä¸€ä¸ªç¼–è¯‘çš„å¯¹è±¡ ç¼–è¯‘è§£ææˆ‘ä»¬çš„æ¨¡æ¿this.$compile = new Compile(options.el || document.body, this) ç®€å•åˆ†æç¼–è¯‘è¿‡ç¨‹1234567891011121314function Compile(el, vm) &#123; // ä¿å­˜vmå¯¹è±¡åˆ°compileä¸­ this.$vm = vm; this.$el = this.isElementNode(el) ? el : document.querySelector(el); // å¦‚æœæœ‰elå…ƒç´ æ‰æ‰§è¡Œ if (this.$el) &#123; // å–å‡ºelå…ƒç´ ä¸­æ‰€æœ‰å­èŠ‚ç‚¹ä¿å­˜åˆ°fragmentä¸­ this.$fragment = this.node2Fragment(this.$el); // ç¼–è¯‘æ‰€æœ‰å±‚æ¬¡çš„å­èŠ‚ç‚¹ this.init(); //ç¼–è¯‘å¥½çš„elå…ƒç´ æ·»åŠ åˆ°é¡µé¢elå…ƒç´ ä¸­ this.$el.appendChild(this.$fragment); &#125;&#125;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Compile.prototype = &#123;...compileElement: function (el) &#123; // å–å‡ºæœ€å¤–å±‚çš„å­èŠ‚ç‚¹ var childNodes = el.childNodes, me = this; //this-&gt; compileå®ä¾‹ [].slice.call(childNodes).forEach(function (node) &#123; var text = node.textContent; var reg = /\\&#123;\\&#123;(.*)\\&#125;\\&#125;/; // åŒ¹é…&#123;&#123;name&#125;&#125; åŠ å°æ‹¬å·æ˜¯ä¸ºäº†$1 ==name if (me.isElementNode(node)) &#123; // ç¼–è¯‘äº‹ä»¶æŒ‡ä»¤ me.compile(node); //æ˜¯å¦æœ‰æŒ‡ä»¤å±æ€§ // æ˜¯æ–‡æœ¬èŠ‚ç‚¹å— æœ‰&#123;&#123;&#125;&#125; å— &#125; else if (me.isTextNode(node) &amp;&amp; reg.test(text)) &#123; me.compileText(node, RegExp.$1); &#125; // æ˜¯å¦æœ‰å­èŠ‚ç‚¹ if (node.childNodes &amp;&amp; node.childNodes.length) &#123; me.compileElement(node); &#125; &#125;); &#125;,&#125;... // æŒ‡ä»¤å¤„ç†é›†åˆvar compileUtil = &#123; text: function (node, vm, exp) &#123; this.bind(node, vm, exp, &#x27;text&#x27;); &#125;, bind: function (node, vm, exp, dir) &#123; // å¾—åˆ°æ›´æ–°èŠ‚ç‚¹å‡½æ•° var updaterFn = updater[dir + &#x27;Updater&#x27;]; // è°ƒç”¨æ›´æ–°èŠ‚ç‚¹ updaterFn &amp;&amp; updaterFn(node, this._getVMVal(vm, exp)); new Watcher(vm, exp, function (value, oldValue) &#123; updaterFn &amp;&amp; updaterFn(node, value, oldValue); &#125;); &#125;, &#125; // åŒ…å«å¤šä¸ªæ›´æ–°èŠ‚ç‚¹æ–¹æ³•çš„å·¥å…·å¯¹è±¡var updater = &#123; textUpdater: function (node, value) &#123; node.textContent = typeof value == &#x27;undefined&#x27; ? &#x27;&#x27; : value; &#125;, &#125; å°ç»“ï¼š1) æ ¹æ®æ­£åˆ™å¯¹è±¡å¾—åˆ°åŒ¹é…å‡ºçš„è¡¨è¾¾å¼å­—ç¬¦ä¸²: å­åŒ¹é…/RegExp.$1 name2) ä» data ä¸­å–å‡ºè¡¨è¾¾å¼å¯¹åº”çš„å±æ€§å€¼3) å°†å±æ€§å€¼è®¾ç½®ä¸ºæ–‡æœ¬èŠ‚ç‚¹çš„ textContent","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueæºç åˆ†ææ•°æ®ä»£ç†","slug":"Vueæºç åˆ†æä¹‹æ•°æ®ä»£ç†","date":"2019-02-14T16:00:00.000Z","updated":"2020-09-16T09:07:56.000Z","comments":true,"path":"2019/02/15/Vueæºç åˆ†æä¹‹æ•°æ®ä»£ç†/","link":"","permalink":"http://mariogogogo.github.io/2019/02/15/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86/","excerpt":"æ€ä¹ˆå®ç° this._test æ”¹å˜è€Œä¸æ˜¯ this._data.test æ”¹å˜è§¦å‘æ›´æ–°ï¼Ÿ","text":"æ€ä¹ˆå®ç° this._test æ”¹å˜è€Œä¸æ˜¯ this._data.test æ”¹å˜è§¦å‘æ›´æ–°ï¼Ÿ æ•°æ®ä»£ç†: é€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡(åœ¨å‰ä¸€ä¸ªå¯¹è±¡å†…éƒ¨)ä¸­å±æ€§çš„æ“ä½œ(è¯»/å†™) vue æ•°æ®ä»£ç†: é€šè¿‡ vm å¯¹è±¡æ¥ä»£ç† data å¯¹è±¡ä¸­æ‰€æœ‰å±æ€§çš„æ“ä½œ å¥½å¤„: æ›´æ–¹ä¾¿çš„æ“ä½œ data ä¸­çš„æ•°æ® åŸºæœ¬å®ç°æµç¨‹ a. é€šè¿‡ Object.defineProperty()ç»™ vm æ·»åŠ ä¸ data å¯¹è±¡çš„å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ b. æ‰€æœ‰æ·»åŠ çš„å±æ€§éƒ½åŒ…å« getter/setter c. getter/setter å†…éƒ¨å»æ“ä½œ data ä¸­å¯¹åº”çš„å±æ€§æ•°æ® 123456789101112131415161718192021222324252627282930313233function MVVM(options) &#123; this.$options = options; var data = this._data = this.$options.data; var me = this; // æ•°æ®ä»£ç† // å®ç° vm.xxx -&gt; vm._data.xxx Object.keys(data).forEach(function(key) &#123; me._proxy(key); &#125;); observe(data, this); this.$compile = new Compile(options.el || document.body, this)&#125;/*ä»£ç†*/_proxy(options.data);function _proxy (data) &#123; const that = this; Object.keys(data).forEach(key =&gt; &#123; Object.defineProperty(that, key, &#123; configurable: true, enumerable: true, get: function proxyGetter () &#123; return that._data[key]; &#125;, set: function proxySetter (val) &#123; that._data[key] = val; &#125; &#125;) &#125;);&#125;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"Vueæºç åˆ†æå‰æœŸçŸ¥è¯†ç‚¹","slug":"Vueæºç åˆ†æå‰æœŸçŸ¥è¯†ç‚¹","date":"2019-02-13T16:00:00.000Z","updated":"2020-09-16T09:07:55.000Z","comments":true,"path":"2019/02/14/Vueæºç åˆ†æå‰æœŸçŸ¥è¯†ç‚¹/","link":"","permalink":"http://mariogogogo.github.io/2019/02/14/Vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%89%8D%E6%9C%9F%E7%9F%A5%E8%AF%86%E7%82%B9/","excerpt":"å½’ç±»äº†ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•","text":"å½’ç±»äº†ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³• 12345678&lt;div id=&quot;test&quot;&gt; &lt;ul&gt; &lt;li&gt;vue&lt;/li&gt; &lt;li&gt;react&lt;/li&gt; &lt;li&gt;jQuery&lt;/li&gt; &lt;li&gt;angle&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; [].slice.call(lis): å°†ä¼ªæ•°ç»„è½¬æ¢ä¸ºçœŸæ•°ç»„1234const lis = document.getElementsByTagName(&quot;li&quot;); console.log(lis instanceof Array, lis[1].innerHTML, lis.forEach); const lis2 = Array.prototype.slice.call(lis); console.log(lis2 instanceof Array, lis2[1].innerHTML, lis2.forEach); node.nodeType: å¾—åˆ°èŠ‚ç‚¹ç±»å‹ doucment element attr textèŠ‚ç‚¹ 1234const ele = document.getElementById(&quot;test&quot;); const attrNode = ele.getAttributeNode(&quot;id&quot;); const textNode = ele.firstChild; console.log(ele.nodeType, attrNode.nodeType, textNode.nodeType); Object.defineProperty(obj, propertyName, {}): ç»™å¯¹è±¡æ·»åŠ /ä¿®æ”¹å±æ€§(æŒ‡å®šæè¿°ç¬¦)1234567891011121314151617181920const obj = &#123; firstName: &quot;A&quot;, lastName: &quot;B&quot; &#125; Object.defineProperty(obj, &quot;fullname&quot;, &#123; get() &#123; return this.firstName + &quot;-&quot; + this.lastName; &#125;, set(value) &#123; const name = value.split(&quot;-&quot;); this.firstName = name[0]; this.lastName = name[1]; &#125; &#125;) console.log(obj.fullname); obj.firstName = &quot;C&quot; obj.lastName = &quot;D&quot; console.log(obj.fullname); obj.fullname = &quot;E-F&quot;; console.log(obj.firstName, obj.lastName); Object.keys(obj): å¾—åˆ°å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§åçš„æ•°ç»„123const objNames = Object.keys(obj)console.log(objNames); obj.hasOwnProperty(prop): åˆ¤æ–­propæ˜¯å¦æ˜¯objè‡ªèº«çš„å±æ€§1console.log(obj.hasOwnProperty(&quot;fullname&quot;), obj.hasOwnProperty(&quot;toString&quot;)); DocumentFragment: æ–‡æ¡£ç¢ç‰‡(é«˜æ•ˆæ‰¹é‡æ›´æ–°å¤šä¸ªèŠ‚ç‚¹)123456789101112131415161718192021// åˆ›å»ºfragment const ul = ele.getElementsByTagName(&quot;ul&quot;)[0]; const fragment = document.createDocumentFragment(); // å–å‡ºulä¸­æ‰€æœ‰å­èŠ‚ç‚¹åŒ…æ‹¬ç©ºæ ¼ æ¢è¡Œç¬¦ let child; console.log(ul.firstChild); while (child = ul.firstChild) &#123; fragment.appendChild(child) //å…ˆç§»é™¤ulä¸­åˆ é™¤ æ·»åŠ åˆ°fragment &#125; // æ›´æ–°fragmentä¸­çš„liæ–‡æœ¬ console.log(Array.prototype.slice.call(fragment.childNodes)); Array.prototype.slice.call(fragment.childNodes).forEach(node =&gt; &#123; if (node.nodeType === 1) //å…ƒç´ èŠ‚ç‚¹ &#123; node.textContent = &quot;æ”¹å˜ä¹‹å&quot; &#125; &#125;) // æ’å…¥ulä¸­æ›´æ–° ul.appendChild(fragment);","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"ReactNativeä¹‹å±å¹•é€‚é…","slug":"ReactNativeä¹‹å±å¹•é€‚é…","date":"2019-02-12T16:00:00.000Z","updated":"2020-09-16T09:07:50.000Z","comments":true,"path":"2019/02/13/ReactNativeä¹‹å±å¹•é€‚é…/","link":"","permalink":"http://mariogogogo.github.io/2019/02/13/ReactNative%E4%B9%8B%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/","excerpt":"RNä¸­å•ä½æ˜¯dpï¼Œè¿™ä¸ªè·ŸAndroidä¸­çš„å•ä½æ˜¯ä¸€è‡´çš„","text":"RNä¸­å•ä½æ˜¯dpï¼Œè¿™ä¸ªè·ŸAndroidä¸­çš„å•ä½æ˜¯ä¸€è‡´çš„è¯´åˆ°è¿™é‡Œï¼Œä¸å¦¨æŠŠæ¶‰åŠåˆ°çš„ä¸€äº›æ¦‚å¿µæ¢³ç†ä¸€ä¸‹ï¼š dpï¼ˆdipï¼‰ï¼ˆDensity-independent pixelsï¼‰ä¸€ç§åŸºäºå±å¹•å¯†åº¦çš„æŠ½è±¡å•ä½ï¼Œåƒç´ æ— å…³å¯†åº¦ã€‚åœ¨æ¯è‹±å¯¸160ç‚¹çš„æ˜¾ç¤ºå™¨ä¸Šï¼Œ1dp = 1pxã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„dpæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç®€å•çš„è¯´1dpåœ¨ä¸åŒçš„å±å¹•æˆ–è€…ä¸åŒçš„ppiä¸‹å±•ç¤ºå‡ºæ¥çš„â€œç‰©ç†é•¿åº¦â€å¯èƒ½ä¸ä¸€è‡´ã€‚ px åƒç´ ç‚¹ã€‚ä¹Ÿæ˜¯ç›¸å¯¹é•¿åº¦ pt ä¸­æ–‡å«ç£…ï¼Œç­‰äº1/72è‹±å¯¸ã€‚ç‰©ç†é•¿åº¦ spï¼ˆä¸åˆ»åº¦æ— å…³çš„åƒç´ ï¼‰ï¼šä¸dpç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®ç”¨æˆ·çš„å­—ä½“å¤§å°é¦–é€‰é¡¹è¿›è¡Œç¼©æ”¾ï¼ŒAndroidè®¾ç½®å­—ä½“çš„æ—¶å€™ä½¿ç”¨ã€‚ density å¯†åº¦ã€‚è¿™ä¸ªå¯ä»¥å‚è€ƒä¸Šè¾¹è¯´çš„ï¼Œè·ŸpixelRatioç›¸è¿‘ï¼Œçº¦ç­‰äºDPI/160ã€‚ pixelRatio è®¾å¤‡åƒç´ æ¯”ã€‚é€šè¿‡PixelRatio.get()è·å¾— PPI (pixels per inch) å›¾åƒåˆ†è¾¨ç‡ ï¼ˆæ¯è‹±å¯¸æ‰€åŒ…å«çš„åƒç´ æ•°ï¼ŒæŒ‡å¯¹è§’çº¿ï¼‰ DPIï¼ˆdots per inchï¼‰æ‰“å°ç²¾åº¦ ï¼ˆæ¯è‹±å¯¸æ‰€èƒ½æ‰“å°çš„ç‚¹æ•°ï¼ŒæŒ‡å®½é«˜ï¼‰ åˆ†è¾¨ç‡ ï¼š æ¨ªçºµ2ä¸ªæ–¹å‘çš„åƒç´ ç‚¹çš„æ•°é‡ï¼Œå¸¸è§å–å€¼ 480X800 ï¼Œ750X1334 å±å¹•å°ºå¯¸ï¼š å±å¹•å¯¹è§’çº¿çš„é•¿åº¦ï¼ˆè‹±å¯¸ï¼‰ã€‚ç”µè„‘ç”µè§†åŒç†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š 1dp=ï¼ˆ1 * densityï¼‰ pxï¼Œç›¸å1px=ï¼ˆ1/densityï¼‰dp é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨RNä¸­è®¾ç½®å®½åº¦ä¸º1pxçš„åˆ†å‰²çº¿å‘¢ï¼Ÿ 1width: 1 / PixelRatio.get() è¿™æ ·å°±å¯ä»¥äº†ï¼ å¦å¤–ï¼Œä¸€ä¸ªè®¾å¤‡çš„å®½é«˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è·å¾—ï¼š 12width: Dimensions.get(&#x27;window&#x27;).width,height: Dimensions.get(&#x27;window&#x27;).height, é‚£ä¹ˆè¿™ä¸ªå¾—åˆ°çš„å®½é«˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ¥ï¼Œæ¯”å¦‚iPhone6sï¼Œè¿™ä¸ªå€¼æ‰“å°å‡ºæ¥æ˜¯widthï¼š375ï¼Œheightï¼š667ï¼Œå› ä¸º6sçš„densityæ˜¯2ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå¾—åˆ°çš„å®½é«˜æ˜¯dpã€‚ é€‚é…æ–¹æ¡ˆ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182/** * å±å¹•å·¥å…·ç±» ä»¥åŠä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å°è£… * uiè®¾è®¡åŸºå‡†,iphone 6 2å€å›¾ * width:750px * height:1334px * @2x *//* è®¾å¤‡çš„åƒç´ å¯†åº¦ï¼Œä¾‹å¦‚ï¼š PixelRatio.get() === 1 mdpi Android è®¾å¤‡ (160 dpi) PixelRatio.get() === 1.5 hdpi Android è®¾å¤‡ (240 dpi) PixelRatio.get() === 2 iPhone 4, 4S,iPhone 5, 5c, 5s,iPhone 6,xhdpi Android è®¾å¤‡ (320 dpi) PixelRatio.get() === 3 iPhone 6 plus , xxhdpi Android è®¾å¤‡ (480 dpi) PixelRatio.get() === 3.5 Nexus 6 */import &#123; PixelRatio, Dimensions, Platform, AsyncStorage&#125; from &#x27;react-native&#x27;;export let sW = Dimensions.get(&#x27;window&#x27;).width;export let sH = Dimensions.get(&#x27;window&#x27;).height;// è¿”å›å­—ä½“å¤§å°çš„ç¼©æ”¾å› å­const fontScale= PixelRatio.getFontScale();export let pixelRatio = PixelRatio.get();//é»˜è®¤åƒç´ å¯†åº¦export const DEFAULT_DENSITY = 2;//pxè½¬æ¢æˆdp//ä»¥iphone6ä¸ºåŸºå‡†,å¦‚æœä»¥å…¶ä»–å°ºå¯¸ä¸ºåŸºå‡†çš„è¯,è¯·ä¿®æ”¹ä¸‹é¢çš„defaultWidthå’ŒdefaultHeightä¸ºå¯¹åº”å°ºå¯¸å³å¯. ä»¥ä¸‹ä¸º1å€å›¾æ—¶const defaultWidth = 375; //ptconst defaultHeight = 667; //pt//ç¼©æ”¾æ¯”ä¾‹const _scaleWidth = sW / defaultWidth;const _scaleHeight = sH / defaultHeight;console.log(&#x27;ç¼©æ”¾æ¯”ä¾‹&#x27;,sW,sH,fontScale,_scaleWidth,_scaleHeight)/** * è®¾ç½®å®½åº¦ * @param size è¾“å…¥pxå•ä½ * @returns &#123;number&#125; */export function px2dpw(size:Number) &#123; return size * _scaleWidth;&#125;/** * è®¾ç½®é«˜åº¦ * @param size è¾“å…¥pxå•ä½ * height ,paddingVertical ,paddingTop ,paddingBottom ,marginVertical ,marginTop ,marginBottom * @returns &#123;number&#125; */export function px2dph(size: Number) &#123; return size * _scaleHeight;&#125;/** * è®¾ç½®å­—ä½“ * @param size è¾“å…¥pxå•ä½ * @returns &#123;number&#125; */export function px2dpf(size: Number, allowFontScaling = false) &#123; const scale = Math.min(_scaleWidth, _scaleHeight); const fontSize = allowFontScaling ? 1 : fontScale; return size * scale / fontSize;&#125;// iPhoneXconst X_WIDTH = 375;const X_HEIGHT = 812;/** * åˆ¤æ–­æ˜¯å¦ä¸ºiphoneX * @returns &#123;boolean&#125; */export function isIphoneX() &#123; return ( Platform.OS === &#x27;ios&#x27; &amp;&amp; ((screenH === X_HEIGHT &amp;&amp; screenW === X_WIDTH) || (screenH === X_WIDTH &amp;&amp; screenW === X_HEIGHT)) )&#125; ä½¿ç”¨123456&lt;Text style=&#123;&#123;fontSize: ScreenUtil.px2dpf(30)&#125;&#125;&gt;å·²é€‚é…&lt;/Text&gt;&lt;View style=&#123;&#123; height: ScreenUtil.px2dph(60), width: ScreenUtil.px2dpw(300), backgroundColor: &#x27;blue&#x27; &#125;&#125;&gt;&lt;/View&gt;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"mongooseè”è¡¨æŸ¥è¯¢æ–¹å¼","slug":"mongooseè”è¡¨æŸ¥è¯¢","date":"2019-02-07T16:00:00.000Z","updated":"2020-09-16T09:07:40.000Z","comments":true,"path":"2019/02/08/mongooseè”è¡¨æŸ¥è¯¢/","link":"","permalink":"http://mariogogogo.github.io/2019/02/08/mongoose%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2/","excerpt":"mongooseçš„ä¸€äº›é«˜çº§ç”¨æ³•ï¼š","text":"mongooseçš„ä¸€äº›é«˜çº§ç”¨æ³•ï¼šè§£å†³å¦‚ä¸‹å›¾ç‰‡é—®é¢˜åœ¨å…³ç³»å‹æ•°æ®åº“å¦‚mysqlä¸­æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è§£å†³ 1SELECT student.name,student.age,class.name FROM student,class WHERE student.classId = class.id modelsä¸­çš„é…ç½®123456789101112131415161718192021222324var mongoose = require(&#x27;mongoose&#x27;);var Schema = mongoose.Schema;/*å®šä¹‰æ•°æ®æ¨¡å¼*/var OrderSchema = new mongoose.Schema(&#123; uid: &#123; type: mongoose.Schema.ObjectId, //å…³é”®ç‚¹ ä¸»é”®ç±»å‹ ref : &#x27;user&#x27; &#125;, amount: &#123; type : Number, required: true &#125;, oType: &#123; type : Number, required: true &#125;, // è®¢å•ç±»å‹ status: &#123; type : Number, required: true &#125;, // è®¢å•çš„çŠ¶æ€:1å®Œæˆ 2æœªå®Œæˆ 3å¤±æ•ˆ&#125;)module.exports = mongoose.model(&#x27;order&#x27;, OrderSchema, &quot;order&quot;)//è§£å†³mongoseä¸­æ•°æ®åº“è¡¨å+sçš„é—®é¢˜ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ç¬¬ä¸€ä¸ªå‚æ•°åå¿…é¡»ç›¸åŒ ç¬¬ä¸€ç§æ–¹å¼populate12345678910111213141516171819202122232425262728293031router.get(&#x27;/getOrder&#x27;, async function (ctx) &#123; const res = await Order.find().populate(&#123; path : &#x27;uid&#x27;, model : User, select: &#x27;_id phone status&#x27; &#125;).exec() ctx.body = &#123; code: 0, data: res &#125;&#125;)/*&#123; &quot;code&quot;: 0, &quot;data&quot;: [ &#123; &quot;_id&quot;: &quot;5c5da7407852d511cc3a82fd&quot;, &quot;uid&quot;: &#123; &quot;_id&quot;: &quot;5c5da6347852d511cc3a82f6&quot;, &quot;phone&quot;: &quot;001&quot;, &quot;status&quot;: &quot;0&quot; &#125;, &quot;amount&quot;: 0, &quot;oType&quot;: 1, &quot;status&quot;: 0, &quot;__v&quot;: 0 &#125; ] &#125;*/ ç¬¬äºŒç§æ–¹å¼$lookup ä¸‹é¢æˆ‘ç®€å•ä»‹ç»ä¸€äº›$lookupä¸­çš„å‚æ•°ï¼š fromï¼š éœ€è¦å…³è”çš„è¡¨ã€ ordersã€‘ localField: ã€productã€‘ è¡¨éœ€è¦å…³è”çš„é”®ã€‚ foreignFieldï¼šã€ ordersã€‘ çš„matching keyã€‚ asï¼š å¯¹åº”çš„å¤–é”®é›†åˆçš„æ•°æ®ï¼Œã€ å› ä¸ºå¯èƒ½æ˜¯ä¸€å¯¹å¤šçš„ï¼Œ å¯¹å§ã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940router.get(&#x27;/getOrder&#x27;, async function (ctx) &#123; const res = await Order.aggregate([&#123; $lookup: &#123; from : &#x27;user&#x27;, localField : &#x27;uid&#x27;, foreignField: &#x27;_id&#x27;, as : &quot;user_docs&quot; &#125; &#125;]) ctx.body = &#123; code: 0, data: res &#125;&#125;)/*&#123; &quot;code&quot;: 0, &quot;data&quot;: [ &#123; &quot;_id&quot;: &quot;5c5da7407852d511cc3a82fd&quot;, &quot;uid&quot;: &quot;5c5da6347852d511cc3a82f6&quot;, &quot;amount&quot;: 0, &quot;oType&quot;: 1, &quot;status&quot;: 0, &quot;__v&quot;: 0, &quot;user_docs&quot;: [ &#123; &quot;_id&quot;: &quot;5c5da6347852d511cc3a82f6&quot;, &quot;meta&quot;: &#123; &quot;createAt&quot;: &quot;2019-02-08T15:50:51.864Z&quot;, &quot;updateAt&quot;: &quot;2019-02-08T15:50:51.864Z&quot; &#125;, &quot;phone&quot;: &quot;001&quot;, &quot;status&quot;: &quot;0&quot;, &quot;__v&quot;: 0 &#125; ] &#125; ]*/ é™„åŠ ä¸€ä¸ªæ¨¡ç³ŠæŸ¥è¯¢ 1234567891011121314151617181920//ä»URLä¸­ä¼ æ¥çš„ keywordå‚æ•°const keyword = this.params.keyword //ä¸åŒºåˆ†å¤§å°å†™const reg = new RegExp(keyword, &#x27;i&#x27;) const result = await User.find( &#123; $or : [ //å¤šæ¡ä»¶ï¼Œæ•°ç»„ &#123;nick : &#123;$regex : reg&#125;&#125;, &#123;email : &#123;$regex : reg&#125;&#125; ] &#125;, &#123; password : 0 // è¿”å›ç»“æœä¸åŒ…å«å¯†ç å­—æ®µ &#125;, &#123; sort : &#123; _id : -1 &#125;,// æŒ‰ç…§ _idå€’åºæ’åˆ— limit : 100 // æŸ¥è¯¢100æ¡ &#125;)","categories":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/categories/NodeJs/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"Vueä¸­çš„ç”Ÿå‘½å‘¨æœŸ","slug":"Vueä¸­çš„ç”Ÿå‘½å‘¨æœŸ","date":"2019-01-21T16:00:00.000Z","updated":"2020-09-16T09:07:56.000Z","comments":true,"path":"2019/01/22/Vueä¸­çš„ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"http://mariogogogo.github.io/2019/01/22/Vue%E4%B8%AD%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","excerpt":"Vueå®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domã€æ¸²æŸ“â†’æ›´æ–°â†’æ¸²æŸ“ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯Vueçš„ç”Ÿå‘½å‘¨æœŸã€‚","text":"Vueå®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domã€æ¸²æŸ“â†’æ›´æ–°â†’æ¸²æŸ“ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯Vueçš„ç”Ÿå‘½å‘¨æœŸã€‚ é€šä¿—è¯´å°±æ˜¯Vueå®ä¾‹ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚ æ–‡å­—è¯´æ˜ ç”Ÿå‘½å‘¨æœŸ è¯´æ˜ beforeCreate åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ï¼ˆData Observerï¼‰å’Œevent/watcheräº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ create å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®(Data Observer)ã€å±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/eventäº‹ä»¶å›è°ƒã€‚ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$elå±æ€§ç›®å‰ä¸å¯è§ beforeMount åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ mounted elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨è¯¥é’©å­ã€‚å¦‚æœrootå®ä¾‹æŒ‚è½½äº†ä¸€ä¸ªæ–‡æ¡£å†…å…ƒç´ ï¼Œå½“mountedè¢«è°ƒç”¨æ—¶vm.$elä¹Ÿåœ¨æ–‡æ¡£å†… beforeUpdate æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰.ä½ å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œè¿™ä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹ updated ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶DOMå·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ beforeDestroy å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ destroyed Vueå®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVueå®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ å°ç»“ä¸€ä¸‹ï¼š beforeCreateå’Œcreatedï¼šåˆ›å»ºVueå®ä¾‹ beforeMountå’Œmountedï¼šæŒ‚è½½ç›®æ ‡å…ƒç´  beforeUpdateå’Œupdatedï¼šæ”¹å˜åé‡æ–°æ¸²æŸ“ beforeDestroyå’Œdestroyedï¼šé”€æ¯Vueå®ä¾‹ æ³¨æ„ ä¸è¦åœ¨é€‰é¡¹å±æ€§æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ created: () =&gt; console.log(this.a) æˆ– vm.$watch(â€˜aâ€™, newValue =&gt; this.myMethod())ã€‚å› ä¸ºç®­å¤´å‡½æ•°æ˜¯å’Œçˆ¶çº§ä¸Šä¸‹æ–‡ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œthis ä¸ä¼šæ˜¯å¦‚ä½ æ‰€é¢„æœŸçš„ Vue å®ä¾‹ï¼Œç»å¸¸å¯¼è‡´ Uncaught TypeError: Cannot read property of undefined æˆ– Uncaught TypeError: this.myMethod is not a function ä¹‹ç±»çš„é”™è¯¯ã€‚ ä»£ç è¯´æ˜123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899let vm = new Vue(&#123; el: &quot;#app&quot;, data() &#123; return &#123; name: &quot;é©¬é‡Œå¥¥&quot; &#125;; &#125;, beforeCreate: function() &#123; console.log(&quot;===== åˆ›å»ºå‰ =====&quot;); console.log(this.name);// undefined console.log(this.$el);// undefined &#125;, created: function() &#123; // åœ¨å®ä¾‹åˆ›å»ºä¹‹ååŒæ­¥è°ƒç”¨ // æ­¤æ—¶å®ä¾‹å·²ç»“æŸè§£æé€‰é¡¹ // è¿™æ„å‘³ç€å·²å»ºç«‹ï¼šæ•°æ®ç»‘å®šï¼Œè®¡ç®—å±æ€§,æ–¹æ³•ï¼Œwatcher/äº‹ä»¶å›è°ƒ // ä½†æ˜¯è¿˜æ²¡æœ‰å¼€å§‹DOMç¼–è¯‘ï¼Œ$elè¿˜ä¸å­˜åœ¨ï¼Œä½†æ˜¯å®ä¾‹å­˜åœ¨ï¼Œå³this.nameå­˜åœ¨ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥ //åœ¨è¿™é‡Œå¯ä»¥åœ¨æ¸²æŸ“å‰å€’æ•°ç¬¬äºŒæ¬¡æ›´æ”¹æ•°æ®çš„æœºä¼šï¼Œä¸ä¼šè§¦å‘å…¶ä»–çš„é’©å­å‡½æ•°ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¿™é‡Œåšåˆå§‹æ•°æ®çš„è·å– console.log(&quot;===== å·²åˆ›å»º =====&quot;); console.log(this.name); // &quot;é©¬é‡Œå¥¥&quot; console.log(this.$el); // undefined &#125;, beforeCompile: function() &#123; console.log(&quot;===== æœªå¼€å§‹ç¼–è¯‘ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, compiled: function() &#123; // åœ¨ç¼–è¯‘ç»“æŸä¹‹åè°ƒç”¨ // æ­¤æ—¶æ‰€æœ‰çš„æŒ‡ä»¤å·²ç”Ÿæ•ˆï¼Œå› è€Œæ•°æ®çš„å˜åŒ–å°†è§¦å‘DOMæ›´æ–° // ä½†æ˜¯ä¸æ‹…ä¿$elå·²æ’å…¥æ–‡æ¡£ console.log(&quot;===== ç¼–è¯‘å®Œæˆ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, beforeMount: function() &#123; //æ³¨æ„domè¿˜æ²¡æœ‰ç”Ÿæˆhtmlé¡µé¢ä¸Šå» console.log(&quot;===== Mountä¹‹å‰ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, mounted: function() &#123; //æŒ‚åœ¨å®Œæˆ ä¹Ÿå°±æ˜¯æ¨¡æ¿ä¸­çš„htmlæ¸²æŸ“åˆ°äº†é¡µé¢ä¸­ //ä¸€èˆ¬è¿™é‡Œåšä¸€äº›ajaxæ“ä½œ //åªæ‰§è¡Œä¸€æ¬¡ console.log(&quot;===== Mountå®Œæˆ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, beforeUpdate: function() &#123; console.log(&quot;===== æ›´æ–°å‰ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, updated: function() &#123; //è¿™é‡Œä¸èƒ½æ›´æ”¹æ•°æ®ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ console.log(&quot;===== æ›´æ–°å®Œæˆ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, ready: function() &#123; // åœ¨ç¼–è¯‘ç»“æŸå’Œ$el ç¬¬ä¸€æ¬¡æ’å…¥æ–‡æ¡£ä¹‹åè°ƒç”¨ï¼Œå¦‚æœåœ¨ç¬¬ä¸€æ¬¡attachedé’©å­ä¹‹åè°ƒç”¨ // æ³¨æ„ï¼Œå¿…é¡»æ˜¯ç”±Vueæ’å…¥ï¼Œæ¯”å¦‚ vm.$appendTo()ç­‰æ–¹æ³•æˆ–æŒ‡ä»¤æ›´æ–°ï¼Œæ‰ä¼šè§¦å‘ready é’©å­ console.log(&quot;===== ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº† =====&quot;); console.log(this.name); console.log(this.$el); &#125;, attached: function() &#123; // app.$appendTo(&#x27;#app2&#x27;)æš‚æ—¶è§¦å‘ä¸äº†ï¼Œä¸çŸ¥é“æ€ä¹ˆè§£å†³ // åœ¨ vm.$elæ’å…¥DOMæ—¶è°ƒç”¨ã€‚å¿…é¡»æ˜¯ç”±æŒ‡ä»¤æˆ–å®ä¾‹æ–¹æ³•ï¼Œæ¯”å¦‚$appendTo()æ’å…¥ï¼Œç›´æ¥æ“ä½œvm.$elä¸ä¼šè§¦å‘è¿™ä¸ªé’©å­ console.log(&quot;===== æ’å…¥DOMæˆåŠŸ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, detached: function() &#123; // è§¦å‘äº‹ä»¶ app.$destroy(true)ï¼Œå…¶ä¸­å‚æ•°trueæ§åˆ¶æ˜¯å¦åˆ é™¤DOMèŠ‚ç‚¹æˆ–è€…app.$remove() // åœ¨vm.$el ä»DOMä¸­åˆ é™¤æ—¶è°ƒç”¨ã€‚å¿…é¡»æ˜¯ç”±æŒ‡ä»¤æˆ–å®ä¾‹æ–¹æ³•åˆ é™¤ï¼Œç›´æ¥æ“ä½œvm.$elä¸ä¼šè§¦å‘è¿™ä¸ªé’©å­ console.log(&quot;===== åˆ é™¤DOMæˆåŠŸ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, beforeDestroy: function() &#123; // è§¦å‘æ–¹å¼ï¼Œåœ¨consoleé‡Œé¢æ‰“å°app.$destroy() // åœ¨å¼€å§‹é”€æ¯å®ä¾‹æ—¶è°ƒç”¨ã€‚æ­¤æ—¶å®ä¾‹ä»ç„¶æœ‰åŠŸèƒ½ console.log(&quot;===== é”€æ¯å‰ =====&quot;); console.log(this.name); console.log(this.$el); &#125;, destroyed: function() &#123; // è§¦å‘æ–¹å¼ï¼Œåœ¨consoleé‡Œé¢æ‰“app.$destroy() // å…¶ä¸­app.$destroy(true)æ˜¯åˆ é™¤DOMèŠ‚ç‚¹ï¼Œä¼šè§¦å‘detachedå‡½æ•°ï¼Œä½†æ˜¯å®ä¾‹ä»ç„¶å­˜åœ¨ // åœ¨å®ä¾‹è¢«é”€æ¯ä¹‹åè°ƒç”¨ã€‚æ­¤æ—¶æ‰€æœ‰çš„ç»‘å®šå’Œå®ä¾‹çš„æŒ‡ä»¤å·²ç»è§£ç»‘ // æ³¨æ„æ˜¯è§£ç»‘ä¸æ˜¯é”€æ¯ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿå·²ç»è¢«é”€æ¯ console.log(&quot;===== å·²é”€æ¯ =====&quot;); console.log(this.name); console.log(this.$el); &#125;&#125;); é¡µé¢åˆå§‹åŒ–åªæ‰§è¡Œè¿™äº›å‡½æ•°ç‚¹å‡»è¾“å…¥æ¡†æ›´æ”¹æ‰§è¡Œé”€æ¯æ“ä½œ ç»“åˆå®˜æ–¹æ–‡æ¡£ç®€å•æ€»ç»“äº†ä¸€ä¸‹å¦‚å›¾æ˜¾ç¤º å‚è€ƒå¤§æ¼ ","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æŠ€å·§ç¯‡","slug":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æŠ€å·§ç¯‡","date":"2019-01-20T07:13:48.000Z","updated":"2020-09-16T09:07:01.000Z","comments":true,"path":"2019/01/20/é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æŠ€å·§ç¯‡/","link":"","permalink":"http://mariogogogo.github.io/2019/01/20/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE-%E6%8A%80%E5%B7%A7%E7%AF%87/","excerpt":"ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç° ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç° è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°(â­ï¸â­ï¸â­ï¸)","text":"ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç° ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç° è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç°(â­ï¸â­ï¸â­ï¸) ä¾§è¾¹æ å¸é¡¶æ•ˆæœçš„å®ç° 1234567891011&lt;div class=&quot;goods&quot;&gt; &lt;div class = &quot;headtitle&quot; v-if = &quot;fixedTitle&quot; ref = &quot;fixed&quot; &gt;&#123;&#123;fixedTitle&#125;&#125;&lt;/div&gt; &lt;div class = &quot;menu-wrapper&quot; ref = &quot;menuWrapper&quot; &gt; &lt;/div&gt; é€»è¾‘å¤„ç† 12345678910fixedTitle() &#123; //å½“scrollyå¤§äº -æ ‡é¢˜é«˜åº¦çš„æ—¶å€™ä¸æ˜¾ç¤º console.log(&quot;ç°åœ¨çš„y&quot; + this.scrollY); if (this.scrollY &lt;= 0) &#123; return &quot;&quot;; &#125; return this.goods[this.itemIndex] ? this.goods[this.itemIndex].name: &quot;&quot;;&#125;, ä¾§è¾¹æ ç‚¹èœæ•°é‡çš„å®ç° 12345678910111213141516171819202122232425&lt;divclass = &quot;menu-wrapper&quot;ref = &quot;menuWrapper&quot;&gt;&lt;ul&gt; &lt;li v-for = &quot;(item, index) in goods&quot; :key = &quot;index&quot; class = &quot;menu-item&quot; :class = &quot;&#123;&#x27;current&#x27;:currentIndex===index&#125;&quot; @click = &quot;selectMenu(index,$event)&quot; ref = &quot;menuList&quot; &gt; &lt;span class = &quot;num&quot; v-show = &quot;barTxts &amp;&amp; barTxts[index].count &gt;0&quot; &gt;&#123;&#123;barTxts[index].count&#125;&#125;&lt;/span&gt; &lt;span class=&quot;text border-1px&quot;&gt; &#123;&#123;item.name&#125;&#125; &lt;/span&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; åœ¨æ·»åŠ æŒ‰é’®ç»„ä»¶ä¸­setä¸€ä¸ªäº‹ä»¶æ”¹å˜å¢åŠ äº†foodä¸­ä¸€ä¸ªå±æ€§ 12345678910111213141516171819 barTxts() &#123; let ret = []; //åˆå§‹åŒ–æ•°ç»„ this.goods.forEach(good =&gt; &#123; const &#123; type, name, foods &#125; = good; let count = 0; //åˆ¤æ–­foodä¸­æ¯ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰æ–°å¢çš„countå±æ€§å¹¶è·å–æ•°é‡ foods.forEach(food =&gt; &#123; count += food.count || 0; &#125;); ret.push(&#123; type, name, count &#125;); &#125;); console.log(ret); return ret;&#125; è´­ç‰©è½¦æŠ›ç‰©çº¿çš„å®ç° ä¸»è¦å®ç°è¿‡ç¨‹çœ‹å›¾ï¼š 1.cartcontrol.vueï¼Œæ·»åŠ å•†å“æ—¶ï¼Œæ´¾å‘ä¸€ä¸ªäº‹ä»¶ç»™goods.vueï¼Œè·å–å½“å‰DOMï¼Œæ–¹ä¾¿è®¡ç®—å°çƒä¸‹è½ä½ç½® 1234567891011121314151617addCart(event) &#123; if(!event._constructed) &#123;//éè‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶çš„æƒ…å†µä¸‹returnæ‰ï¼Œè¿™æ ·pcç«¯å°±ä¸ä¼šæ£€æµ‹åˆ°ä¸¤æ¬¡ç‚¹å‡»äº‹ä»¶ã€‚ return; &#125; // console.log(this.food.count); if(!this.food.count)&#123; Vue.set(this.food,&#x27;count&#x27;,1); //ç»™å¯¹è±¡æ·»åŠ ä»–ä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œè¿™æ ·çš„æ–¹å¼æ˜¯ä¸è¡Œçš„ã€‚éœ€è¦ç”¨Vueçš„Vue.set() // this.food.count=1; &#125;else&#123; this.food.count++; &#125; this.$emit(&#x27;cart-add&#x27;,event.target);//æ·»åŠ å•†å“æ—¶ï¼Œæ´¾å‘ä¸€ä¸ªäº‹ä»¶ï¼Œå°†å½“å‰DOMä¼ é€’ç»™goods.vue&#125; 2.goods.vueæ¥æ”¶ 1234&lt;div class=&quot;cartcontrol-wrapper&quot;&gt; &lt;cartcontrol :food=&#x27;food&#x27; @cart-add=&quot;cartAdd&quot;&gt;&lt;/cartcontrol&gt;&lt;/div&gt; é€»è¾‘å¤„ç†1234567cartAdd(el) &#123; //ä½“éªŒä¼˜åŒ–ï¼Œå¼‚æ­¥æ‰§è¡Œä¸‹è½åŠ¨ç”»ï¼Œç”»é¢ä¸å®¹æ˜“å¡é¡¿ã€‚ this.$nextTick(() =&gt; &#123; this.$refs.shopcart.drop(el); &#125;);&#125;,3.goods.vueä¸­è°ƒç”¨å­ç»„ä»¶shopcart.vueçš„drop()æ–¹æ³• 1234567891011121314drop(el) &#123; // console.log(el); //éå†å°çƒï¼Œæ‰¾åˆ°showä¸ºfalseçš„å°çƒ for(let i=0;i&lt;this.balls.length;i++)&#123; let ball = this.balls[i]; if(!ball.show) &#123; ball.show = true; ball.el = el;//ç”¨å°çƒçš„elå¯¹è±¡ä¿ç•™è¿™ä¸ªelement this.dropBalls.push(ball); return; &#125; &#125;&#125;, shopcart.vue123456789&lt;div class=&quot;ball-container&quot;&gt; &lt;transition-group name=&quot;drop&quot; v-on:before-enter=&quot;beforeEnter&quot; v-on:enter=&quot;enter&quot; v-on:after-enter=&quot;afterEnter&quot;&gt; &lt;div class=&quot;ball&quot; v-for=&quot;(ball,index) in balls&quot; v-show=&quot;ball.show&quot; :key=&quot;index&quot;&gt; &lt;div class=&quot;inner inner-hook&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/transition-group&gt;&lt;/div&gt;é€»è¾‘å¤„ç†è°ƒç”¨vueçš„javascripté’©å­å‡½æ•° åŸºç¡€äº†è§£ï¼šå‘å³è¡¨ç¤ºXè½´çš„æ­£æ–¹å‘ï¼Œå‘ä¸‹è¡¨ç¤ºYè½´çš„æ­£æ–¹å‘ 123456789101112131415161718192021222324252627282930313233343536373839beforeEnter: function (el) &#123; /*elæ˜¯å°çƒ; éå†æ‰€æœ‰showä¸ºtrueçš„å°çƒ*/ let count = this.balls.length; while(count--) &#123; let ball = this.balls[count]; if(ball.show) &#123; let rect = ball.el.getBoundingClientRect();//è·å¾—è¯¥å…ƒç´ ï¼ˆåŠ å·ï¼‰ç›¸å¯¹äºè§†å£çš„ä½ç½®çš„åç§»ï¼ˆleft,topï¼‰ let x = rect.left-32; //ä¸ºä»€ä¹ˆyæ˜¯è´Ÿå€¼ï¼Œå› ä¸ºèµ·å§‹ä½ç½®åœ¨è´­ç‰©è½¦å›¾æ ‡ä½ç½®è¦æŒªåˆ°+å·ä½ç½®è¿›å…¥åŠ¨ç”» let y = -(window.innerHeight-rect.top-22); el.style.display = &#x27;&#x27;; el.style.webkitTransform = `translate3d(0,$&#123;y&#125;px,0)`;//å¤–å±‚åšçºµå‘è¿åŠ¨ el.style.transform = `translate3d(0,$&#123;y&#125;px,0)`; let inner = el.getElementsByClassName(&#x27;inner-hook&#x27;)[0]; inner.style.webkitTransform = `translate3d($&#123;x&#125;px,0,0)`; inner.style.transform = `translate3d($&#123;x&#125;px,0,0)`; &#125; &#125;&#125;,enter: function (el) &#123; let rf = el.offsetHeight;//å¿…é¡»é‡ç»˜ï¼Œå†è¿›è¡Œtransformæ‰æœ‰ç”¨ this.$nextTick(() =&gt; &#123; el.style.webkitTransform = &#x27;translate3d(0,0,0)&#x27;;//å¤–å±‚åšçºµå‘è¿åŠ¨ el.style.transform = &#x27;translate3d(0,0,0)&#x27;; let inner = el.getElementsByClassName(&#x27;inner-hook&#x27;)[0]; inner.style.webkitTransform = &#x27;translate3d(0,0,0)&#x27;; inner.style.transform = &#x27;translate3d(0,0,0)&#x27;; &#125;);&#125;,afterEnter: function (el) &#123; //çŠ¶æ€é‡ç½® let ball = this.dropBalls.shift(); if(ball) &#123; ball.show = false; el.style.display = &#x27;none&#x27;; &#125;&#125; åŠ¨ç”»æ ·å¼é‡‡ç”¨cubicæ›²çº¿123456789101112131415161718192021222324.ball-container &#123; .ball &#123; position: fixed; left: 32px; bottom: 22px; width: 16px; heigth: 16px; z-index: 200; .inner &#123; width: 16px; height: 16px; border-radius: 50%; background: rgb(0,160,220); &#125; &amp;.drop-enter-active,&amp;.drop-leave-active &#123; transition: all 0.4s cubic-bezier(0.49,-0.29,0.75,0.41); .inner &#123; transition: all 0.4s linear; &#125; &#125; &#125;&#125;","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"}]},{"title":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-åŠ¨ç”»ç¯‡","slug":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾åŠ¨ç”»ç¯‡","date":"2019-01-19T07:13:48.000Z","updated":"2020-09-16T09:07:02.000Z","comments":true,"path":"2019/01/19/é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾åŠ¨ç”»ç¯‡/","link":"","permalink":"http://mariogogogo.github.io/2019/01/19/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E5%8A%A8%E7%94%BB%E7%AF%87/","excerpt":"åŠ¨ç”»æ•ˆæœå†…å®¹çš„ä¸€äº›æ•´ç†è®°å½•","text":"åŠ¨ç”»æ•ˆæœå†…å®¹çš„ä¸€äº›æ•´ç†è®°å½• 123456&lt;transition name=&quot;fade&quot;&gt; &lt;div v-show=&quot;detailShow&quot; class=&quot;detail&quot;&gt; ... &lt;/div&gt; &lt;/transition&gt; é¦–å…ˆäº†è§£ä¸‹è¿‡åº¦åŠ¨ç”»åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚ v-enterï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚ v-enter-activeï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚ v-enter-to: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-enter è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚ v-leave: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚ v-leave-activeï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚ v-leave-to: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-leave è¢«åˆ é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚ 12345678910111213141516.detail position: fixed z-index: 100 top: 0 left: 0 width: 100% height: 100% overflow: auto backdrop-filter: blur(10px) opacity: 1 background: rgba(7, 17, 27, 0.8) &amp;.fade-enter-active, &amp;.fade-leave-active transition: all 0.5s &amp;.fade-enter, &amp;.fade-leave-active opacity: 0 background: rgba(7, 17, 27, 0) å¼¹çª— 12345678910&lt;!-- è´­ç‰©è½¦å¼¹çª—å¸ƒå±€å¼€å§‹ --&gt; &lt;transition name=&quot;fold&quot;&gt; &lt;div class = &quot;shopcart-list&quot; v-show = &quot;listShow&quot; &gt; &lt;/div&gt; &lt;/transition&gt; &lt;!-- è´­ç‰©è½¦å¼¹çª—å¸ƒå±€ç»“æŸ --&gt; css 1234567891011.shopcart-list position absolute left 0 top 0 z-index -1 width 100% transform translate3d(0, -100%, 0) &amp;.fold-enter-active, &amp;.fold-leave-active transition all 0.5s &amp;.fold-enter, &amp;.fold-leave-active transform translate3d(0, 0, 0) é®ç½©å±‚çš„å¤„ç† 123456789&lt;!-- é®ç½©å±‚å¸ƒå±€å¼€å§‹ --&gt; &lt;transition name=&quot;fade&quot;&gt; &lt;div class = &quot;list-mask&quot; @click = &quot;hideList&quot; v-show = &quot;listShow&quot; &gt;&lt;/div&gt; &lt;/transition&gt; &lt;!-- é®ç½©å±‚å¸ƒå±€ç»“æŸ --&gt; cssæ ·å¼12345678910111213141516.list-mask position fixed top 0 left 0 width 100% height 100% z-index 40 backdrop-filter blur(10px) opacity 1 background rgba(7, 17, 27, 0.6) &amp;.fade-enter-active, &amp;.fade-leave-active transition all 0.5s &amp;.fade-enter, &amp;.fade-leave-active opacity 0 background rgba(7, 17, 27, 0)ä¾§æ»‘ 1234&lt;transition name=&quot;move&quot;&gt;......&lt;/transition&gt; cssæ ·å¼1234567891011121314.food position fixed left 0 top 0 bottom 48px z-index 30 width 100% background #fff transform translate3d(0, 0, 0) &amp;.move-enter-active, &amp;.move-leave-active transition all 0.2s linear &amp;.move-enter, &amp;.move-leave-active transform translate3d(100%, 0, 0)å°çƒæ»šåŠ¨åŠ¨ç”» ä»£ç å¦‚ä¸‹ 1234567891011121314151617&lt;transition name=&quot;move&quot;&gt; &lt;div class = &quot;cart-decrease&quot; v-show = &quot;food.count&gt;0&quot; @click.stop = &quot;decrease&quot; &gt; &lt;span class=&quot;inner icon-remove_circle_outline&quot;&gt;&lt;/span&gt; &lt;/div&gt; &lt;/transition&gt; &lt;div class = &quot;cart-count&quot; v-show = &quot;food.count&gt;0&quot; &gt;&#123;&#123;food.count&#125;&#125;&lt;/div&gt; &lt;div class = &quot;cart-add icon-add_circle&quot; @click.stop = &quot;add&quot; &gt;&lt;/div&gt; æ ·å¼ 123456789101112131415161718192021.cartcontrol font-size 0 .cart-decrease display inline-block padding 6px opacity 1 transform translate3d(0, 0, 0) .inner display inline-block line-height 24px font-size 24px color rgb(0, 160, 220) transition all 0.4s linear transform rotate(0) &amp;.move-enter-active, &amp;.move-leave-active transition all 0.4s linear &amp;.move-enter, &amp;.move-leave-active opacity 0 transform translate3d(24px, 0, 0) .inner transform rotate(180deg)","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"},{"name":"CSS","slug":"CSS","permalink":"http://mariogogogo.github.io/tags/CSS/"}]},{"title":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾-æ ·å¼ç¯‡","slug":"é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾æ ·å¼ç¯‡","date":"2019-01-18T07:13:48.000Z","updated":"2020-09-16T09:07:02.000Z","comments":true,"path":"2019/01/18/é¥¿äº†ä¹ˆwebAppé¡¹ç›®å›é¡¾æ ·å¼ç¯‡/","link":"","permalink":"http://mariogogogo.github.io/2019/01/18/%E9%A5%BF%E4%BA%86%E4%B9%88webApp%E9%A1%B9%E7%9B%AE%E5%9B%9E%E9%A1%BE%E6%A0%B7%E5%BC%8F%E7%AF%87/","excerpt":"æ ·å¼å†…å®¹çš„ä¸€äº›æ•´ç†è®°å½•","text":"æ ·å¼å†…å®¹çš„ä¸€äº›æ•´ç†è®°å½• è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†é—®é¢˜å…¶å®è¿™ä¸ªåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºcssä¸­çš„1pxå¹¶ä¸ç­‰äºç§»åŠ¨è®¾å¤‡çš„1pxï¼Œè¿™äº›ç”±äºä¸åŒçš„æ‰‹æœºæœ‰ä¸åŒçš„åƒç´ å¯†åº¦ã€‚åœ¨windowå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªdevicePixelRatioå±æ€§ï¼Œä»–å¯ä»¥ååº”cssä¸­çš„åƒç´ ä¸è®¾å¤‡çš„åƒç´ æ¯”ã€‚è§£å†³çš„æ–¹å¼ä¼ªå…ƒç´ +transform æ„å»º1ä¸ªä¼ªå…ƒç´ , borderä¸º1px, å†ä»¥transformç¼©æ”¾åˆ°50%ã€‚123456789101112131415161718192021222324border-1px($color) position: relative &amp;:after display: block position: absolute left: 0 bottom: 0 width: 100% border-top: 1px solid $color content: &#x27; &#x27; /*æ ¹æ®æ‰‹æœºä¸åŒåˆ†è¾¨ç‡ä¸‹çš„dpi*/@media (-webkit-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5) .border-1px &amp;::after -webkit-transform: scaleY(0.7) transform: scaleY(0.7)@media (-webkit-min-device-pixel-ratio: 2),(min-device-pixel-ratio: 2) .border-1px &amp;::after -webkit-transform: scaleY(0.5) transform: scaleY(0.5) flexå¼¹æ€§å¸ƒå±€éœ€è¦äº†è§£ flex: flex-grow flex-shrink flex-basis|auto|initial|inherit;flex-basis é¡¹ç›®çš„é•¿åº¦ã€‚åˆæ³•å€¼ï¼šâ€autoâ€ã€â€inheritâ€ æˆ–ä¸€ä¸ªåè·Ÿ â€œ%â€ã€â€pxâ€ã€â€emâ€ æˆ–ä»»ä½•å…¶ä»–é•¿åº¦å•ä½çš„æ•°å­—ã€‚ 123456789101112.goods display: flex position: absolute top: 174px bottom: 46px width: 100% overflow: hidden .menu-wrapper flex: 0 0 80px width: 80px background: #f3f5f7 ä¾§è¾¹èœå•æ å¤šè¡Œå±…ä¸­æ˜¾ç¤ºæ•ˆæœç”¨åˆ°displayï¼štable-cell ä¸ va-middle 12345678910111213141516171819.menu-item display: table height: 54px width: 56px padding: 0 12px line-height: 14px &amp;.current position: relative z-index: 10 margin-top: -1px background: #fff font-weight: 700 .text display: table-cell width: 56px vertical-align: middle border-1px(rgba(7, 17, 27, 0.1)) font-size: 12px Sticky+footerå¸ƒå±€é—®é¢˜ï¼šæ€ä¹ˆæ ·è®©ä¸€ä¸ªåŒºå—å§‹ç»ˆåœ¨é¡µé¢åº•éƒ¨ï¼Œæ— è®ºå®ƒå‰é¢çš„å†…å®¹åªæœ‰å‡ è¡Œæˆ–è€…å¤šåˆ°é¡µé¢å‡ºç°æ»šåŠ¨æ¡ï¼Œè¯¥åŒºå—å§‹ç»ˆå‡ºç°åœ¨é¡µé¢åº•éƒ¨ 1234567891011&lt;div v-show=&quot;detailShow&quot; class=&quot;detail&quot;&gt;&lt;div class=&quot;detail-wrapper clearfix&quot;&gt; &lt;div class=&quot;detail-main&quot;&gt; &lt;h1 class=&quot;name&quot;&gt;&#123;&#123;seller.name&#125;&#125;&lt;/h1&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;detail-close&quot; @click=&quot;closeDetail&quot;&gt; &lt;i class=&quot;icon-close&quot;&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt; csså¸ƒå±€ 12345678910111213141516171819202122232425.detail-wrapper width: 100% min-height: 100% .detail-main margin-top: 64px padding-bottom: 64px .clearfix display: inline-block &amp;:after display: block content: &#x27;&#x27; height: 0 line-height: 0 clear: both visibility: hidden.detail-close position: relative width: 32px height: 32px margin: -64px auto 0 auto clear: both font-size: 32px å¦‚ä½•å®ç°ï¼š å®ƒè¿™ä¸ªå¸ƒå±€å®ç°çš„åŸç†å°±æ˜¯ç»™å®ƒçš„ä¼ªç±»afteræ·»åŠ ä¸€ä¸ªå†…å®¹ï¼Œè®¾ç½®displayå¿…é¡»ä¸ºblockæˆ–è€…inline-blockï¼Œè®©å®ƒä¼ªç±»çš„å†…å®¹å ä¸€è¡Œï¼Œç„¶åè®¾ç½®heightè·Ÿline-heightéƒ½ä¸º0ï¼Œå°†å®ƒçš„visibilityè®¾ç½®ä¸ºhidden(è¿™é‡Œè¿˜æ˜¯ä¼šå æ®ç©ºé—´)ï¼Œè®©ä¼ªç±»ä¸€ç›´å æ®ä¸€è¡Œç„¶åå°†ä¸‹é¢çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚ä¸€ç›´åœ¨åº•éƒ¨çš„åŒºå—æŒ¤ä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†sticky footerå¸ƒå±€ã€‚margin: -64px auto 0 autoåœ¨è¿™é‡Œå°±æ˜¯è¿™ä¸ªmargin-top:-64pxå†³å®šä½ çš„è¿™ä¸ªå…ƒç´ è¦å¾€ä¸Šé¢å¢åŠ å¤šå°‘ æ¨ªçº¿æ¡ç©¿è¿‡å­—ç¬¦ä¸²çš„ä¼˜åŒ– 123456&lt;div class=&quot;title&quot;&gt; &lt;div class=&quot;line&quot;&gt;&lt;/div&gt; &lt;div class=&quot;text&quot;&gt;ä¼˜æƒ ä¿¡æ¯&lt;/div&gt; &lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;/div&gt; 1234567891011121314.titledisplay: flexwidth: 80%margin: 28px auto 24px auto.lineflex: 1position: relativetop: -6pxborder-bottom: 1px solid rgba(255, 255, 255, 0.2).textpadding: 0 12pxfont-weight: 700font-size: 14px å¡«å……å›¾ç‰‡å ä½ç”±äºå›¾ç‰‡å¼‚æ­¥åŠ è½½å¦‚æœä¸è®¾ç½®å›¾ç‰‡é«˜åº¦ä¼šå‡ºç°é—ªåŠ¨çš„bugæ‰€ä»¥éœ€è¦cssåšäº›å¤„ç† 123456789101112&lt;div class=&quot;image-header&quot;&gt; &lt;img :src = &quot;food.icon&quot; alt = &quot;meitu&quot; &gt; &lt;div class = &quot;back&quot; @click = &quot;hide&quot; &gt; &lt;i class=&quot;icon-arrow_lift&quot;&gt;&lt;/i&gt; &lt;/div&gt; padding-bottomè®¾ç½®å¤šå°‘æ ¹æ®å®é™…éœ€è¦å®½é«˜æ¯”æ¥ç®—123456789101112.image-header position relative width 100% height 0 padding-bottom 100% img position absolute top 0 left 0 width 100% height 100%","categories":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://mariogogogo.github.io/tags/Vue/"},{"name":"CSS","slug":"CSS","permalink":"http://mariogogogo.github.io/tags/CSS/"}]},{"title":"è®¤è¯†ä¸‹position:sticky","slug":"è®¤è¯†ä¸‹positionsticky","date":"2019-01-14T16:00:00.000Z","updated":"2020-09-16T09:07:11.000Z","comments":true,"path":"2019/01/15/è®¤è¯†ä¸‹positionsticky/","link":"","permalink":"http://mariogogogo.github.io/2019/01/15/%E8%AE%A4%E8%AF%86%E4%B8%8Bpositionsticky/","excerpt":"ä»€ä¹ˆæ˜¯position:stickyï¼Ÿ","text":"ä»€ä¹ˆæ˜¯position:stickyï¼Ÿstickyçš„ä¸­æ–‡æ„æ€æ˜¯â€œç²˜æ€§çš„â€ï¼Œposition:stickyè¡¨ç°ä¹Ÿç¬¦åˆè¿™ä¸ªç²˜æ€§çš„è¡¨ç°ã€‚åŸºæœ¬ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ˜¯position:relativeå’Œposition:fixedçš„ç»“åˆä½“â€”â€”å½“å…ƒç´ åœ¨å±å¹•å†…ï¼Œè¡¨ç°ä¸ºrelativeï¼Œå°±è¦æ»šå‡ºæ˜¾ç¤ºå™¨å±å¹•çš„æ—¶å€™ï¼Œè¡¨ç°ä¸ºfixedã€‚ å…¶ä»–ç‰¹æ€§position:stickyæœ‰ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œé‚£å°±æ˜¯stickyå…ƒç´ æ•ˆæœå®Œå…¨å—åˆ¶äºçˆ¶çº§å…ƒç´ ä»¬ã€‚ è¿™å’Œposition:fixedå®šä½æœ‰ç€æ ¹æœ¬æ€§çš„ä¸åŒï¼Œfixedå…ƒç´ ç›´æŠµé¡µé¢æ ¹å…ƒç´ ï¼Œå…¶ä»–çˆ¶å…ƒç´ å¯¹å…¶left/topå®šä½æ— æ³•é™åˆ¶ã€‚ æ ¹æ®æˆ‘ç®€å•çš„æµ‹è¯•ï¼Œå‘ç°äº†stickyå…ƒç´ ä»¥ä¸‹ä¸€äº›ç‰¹æ€§è¡¨ç°ï¼š çˆ¶çº§å…ƒç´ ä¸èƒ½æœ‰ä»»ä½•overflow:visibleä»¥ä¸ºçš„overflowè®¾ç½®ï¼Œå¦åˆ™æ²¡æœ‰ç²˜æ»æ•ˆæœã€‚å› ä¸ºæ”¹å˜äº†æ»šåŠ¨å®¹å™¨ï¼ˆå³ä½¿æ²¡æœ‰å‡ºç°æ»šåŠ¨æ¡ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„position:stickyæ— æ•ˆï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æŸä¸€ä¸ªç¥–å…ˆå…ƒç´ è®¾ç½®äº†overflow:hiddenï¼Œç§»é™¤ä¹‹å³å¯ã€‚åŒä¸€ä¸ªçˆ¶å®¹å™¨ä¸­çš„stickyå…ƒç´ ï¼Œå¦‚æœå®šä½å€¼ç›¸ç­‰ï¼Œåˆ™ä¼šé‡å ï¼›å¦‚æœå±äºä¸åŒçˆ¶å…ƒç´ ï¼Œåˆ™ä¼šé¸ å é¹Šå·¢ï¼ŒæŒ¤å¼€åŸæ¥çš„å…ƒç´ ï¼Œå½¢æˆä¾æ¬¡å ä½çš„æ•ˆæœã€‚stickyå®šä½ï¼Œä¸ä»…å¯ä»¥è®¾ç½®topï¼ŒåŸºäºæ»šåŠ¨å®¹å™¨ä¸Šè¾¹ç¼˜å®šä½ï¼›è¿˜å¯ä»¥è®¾ç½®bottomï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹åº•éƒ¨ç²˜æ»ã€‚å¦‚æœæ˜¯æ°´å¹³æ»šåŠ¨ï¼Œä¹Ÿå¯ä»¥è®¾ç½®leftå’Œrightå€¼ã€‚ 12345h4 &#123; position: -webkit-sticky; position: sticky; top: 0;&#125; demoå¦‚ä¸‹ï¼š","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://mariogogogo.github.io/tags/CSS/"}]},{"title":"è¯•è¯•ä½¿ç”¨CSSå®ç°æŠ›ç‰©çº¿è¿åŠ¨æ•ˆæœ","slug":"è¯•è¯•ä½¿ç”¨CSSå®ç°æŠ›ç‰©çº¿è¿åŠ¨æ•ˆæœ","date":"2019-01-12T16:00:00.000Z","updated":"2020-09-16T09:07:12.000Z","comments":true,"path":"2019/01/13/è¯•è¯•ä½¿ç”¨CSSå®ç°æŠ›ç‰©çº¿è¿åŠ¨æ•ˆæœ/","link":"","permalink":"http://mariogogogo.github.io/2019/01/13/%E8%AF%95%E8%AF%95%E4%BD%BF%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E6%8A%9B%E7%89%A9%E7%BA%BF%E8%BF%90%E5%8A%A8%E6%95%88%E6%9E%9C/","excerpt":"ä»Šå¤©å‚è€ƒå¼ é‘«æ—­ç©ºé—´çš„å¦ä¸€ç¯‡æ–‡ä»¶","text":"ä»Šå¤©å‚è€ƒå¼ é‘«æ—­ç©ºé—´çš„å¦ä¸€ç¯‡æ–‡ä»¶â€”&gt; ç‚¹å‡»é“¾æ¥ æ•ˆæœå›¾ å®ç°çš„åŸç†åˆ†æ æŠ›ç‰©çº¿è¿åŠ¨å…ƒç´ ä½¿ç”¨è‡³å°‘å†…å¤–ä¸¤å±‚æ ‡ç­¾,æŠ›ç‰©çº¿å…ƒç´ å†…å¤–ä¸¤æ¬¡æ ‡ç­¾ä¸€ä¸ªè´Ÿè´£æ°´å¹³æ–¹å‘çš„translateç§»åŠ¨ï¼Œ ä¸€ä¸ªè´Ÿè´£å‚ç›´æ–¹å‘çš„translateç§»åŠ¨ï¼Œ ç„¶åä½¿ç”¨ä¸åŒçš„ç¼“åŠ¨å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ä¸åŒçš„timing-functionï¼Œ åœ¨CSS3 animationåŠ¨ç”»æ•ˆæœä¸­æ˜¯animation-timing-functionå±æ€§ CSS3 transition-timing-function å±æ€§transition-timing-function:å±æ€§è§„å®šè¿‡æ¸¡æ•ˆæœçš„é€Ÿåº¦æ›²çº¿ã€‚è¯¥å±æ€§å…è®¸è¿‡æ¸¡æ•ˆæœéšç€æ—¶é—´æ¥æ”¹å˜å…¶é€Ÿåº¦ã€‚ transition-timing-function: linear|ease|ease-in|ease-out|ease-in-out|cubic-bezier(n,n,n,n); å€¼ æè¿° linear è§„å®šä»¥ç›¸åŒé€Ÿåº¦å¼€å§‹è‡³ç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0,0,1,1)ï¼‰ã€‚ ease è§„å®šæ…¢é€Ÿå¼€å§‹ï¼Œç„¶åå˜å¿«ï¼Œç„¶åæ…¢é€Ÿç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆcubic-bezier(0.25,0.1,0.25,1)ï¼‰ã€‚ ease-in è§„å®šä»¥æ…¢é€Ÿå¼€å§‹çš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0.42,0,1,1)ï¼‰ã€‚ ease-out è§„å®šä»¥æ…¢é€Ÿç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0,0,0.58,1)ï¼‰ã€‚ ease-in-out è§„å®šä»¥æ…¢é€Ÿå¼€å§‹å’Œç»“æŸçš„è¿‡æ¸¡æ•ˆæœï¼ˆç­‰äº cubic-bezier(0.42,0,0.58,1)ï¼‰ã€‚ cubic-bezier(n,n,n,n) åœ¨ cubic-bezier å‡½æ•°ä¸­å®šä¹‰è‡ªå·±çš„å€¼ã€‚å¯èƒ½çš„å€¼æ˜¯ 0 è‡³ 1 ä¹‹é—´çš„æ•°å€¼ã€‚ 123456789.fly-item &#123; /* æ°´å¹³ç§»åŠ¨ï¼Œçº¿æ€§åŒ€é€Ÿ */ transition-timing-function: linear;&#125;.fly-item &gt; img &#123; /* å‚ç›´ç§»åŠ¨ï¼Œå…ˆæ…¢åå¿« */ transition-timing-function: cubic-bezier(.96,.16,.99,.97);&#125; å…¶ä¸­cubic-bezier(.96,.16,.99,.97);æˆ‘ä»¬å¯ä»¥å€ŸåŠ©cubic-bezier.comå·¥å…· 12.ball-x &#123; animation-timing-function: linear; &#125;.ball-y &#123; animation-timing-function: cubic-bezier(.55, 0, .85, .36); &#125; è´´ä¸Šä»£ç css123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354*&#123;margin: 0;padding: 0;&#125;.image-x&#123;position: relative;padding: 100px 200px;&#125; .btn-cart &#123;position: absolute;display: block;width: 100px;height: 30px;left: 15.84%;top: 84.8392%;background: #0088CC;color: #fff;text-decoration: none;&#125;.fly-item,.fly-item&gt;img &#123;position: absolute;width: 50px;height: 50px;transition: transform .5s;&#125;.fly-item &#123;display: none;/* margin: -25px 0 0 -25px; */transition-timing-function: linear;opacity: .5;&#125;.fly-item &gt; img &#123;transition-timing-function:cubic-bezier(.96,.16,.99,.97);outline: 1px solid rgb(221, 46, 59);&#125;.shop-cart &#123;width: 283px;height: 25px;line-height: 25px;padding-top: 8px;background:red;font-family: &#x27;microsoft yahei&#x27;;font-size: 12px;text-indent: 34px;color: #000;position: fixed;right: 10px;bottom: 0;&#125;html123456&lt;div class=&quot;image-x&quot;&gt;&lt;a href=&quot;javascript:&quot; id=&quot;btnCart&quot; class=&quot;btn-cart&quot;&gt;æ·»åŠ åˆ°è´­ç‰©è½¦&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;shopCart&quot; class=&quot;shop-cart&quot;&gt;è´­ç‰©è½¦ &lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div id=&quot;flyItem&quot; class=&quot;fly-item&quot;&gt;&lt;img src=&quot;img/book.jpg&quot;&gt;&lt;/div&gt; javascript1234567891011121314151617181920212223242526272829303132333435363738394041var eleBtn = document.getElementById(&#x27;btnCart&#x27;);var eleFlyItem = document.getElementById(&quot;flyItem&quot;);var eleFlyImg = eleFlyItem.querySelector(&quot;img&quot;);var eleCart = document.querySelector(&quot;#shopCart&quot;);var isRuning = false;eleBtn.addEventListener(&quot;click&quot;, function() &#123;// ç°åœ¨æŒ‰é’®è·ç¦»è´­ç‰©è½¦çš„è·ç¦»var boundBtn = eleBtn.getBoundingClientRect();var boundCart = eleCart.getBoundingClientRect();console.log(boundBtn, boundCart);//ä¸­å¿ƒç‚¹çš„æ°´å¹³è·ç¦»var offsetX = boundCart.left + boundCart.width / 2 - (boundBtn.left + boundBtn.width / 2);var offsetY = boundCart.top + boundCart.height / 2 - (boundBtn.top + boundBtn.height / 2);//é¡µé¢æ»šåŠ¨è·ç¦»var scrollTop = document.documentElement.scrollTop || document.body.scrollTop || 0;var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft || 0;console.log(scrollTop, scrollLeft);if (!isRuning) &#123; eleFlyItem.style.display = &quot;block&quot;; //æ˜¾ç¤ºæŠ›ç‰©ä½“ eleFlyItem.style.left = (boundBtn.left + scrollLeft + this.clientWidth / 2) + &#x27;px&#x27;; eleFlyItem.style.top = (boundBtn.top + scrollTop + this.clientHeight / 2) + &#x27;px&#x27;; //å¼€å§‹åŠ¨ç”»eleFlyItem.style.transform = &#x27;translateX(&#x27;+ offsetX +&#x27;px)&#x27;;eleFlyImg.style.transform = &#x27;translateY(&#x27;+ offsetY +&#x27;px)&#x27;; console.log(offsetX, offsetY); isRuning = true; setTimeout(function() &#123; eleFlyItem.style.display = &quot;&quot;; eleFlyItem.style.transform = &quot;translateX(0)&quot;; eleFlyImg.style.transform = &quot;translateY(0)&quot;; isRuning = false; eleCart.querySelector(&quot;span&quot;).innerHTML = eleCart.querySelector(&quot;span&quot;).innerHTML * 1 + 1 &#125;, 500)&#125;&#125;)","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"è´­ç‰©ç‰©å“æŠ›ç‰©çº¿åˆ°è´­ç‰©è½¦","slug":"è´­ç‰©ç‰©å“æŠ›ç‰©çº¿åˆ°è´­ç‰©è½¦","date":"2019-01-11T16:00:00.000Z","updated":"2020-09-16T09:07:04.000Z","comments":true,"path":"2019/01/12/è´­ç‰©ç‰©å“æŠ›ç‰©çº¿åˆ°è´­ç‰©è½¦/","link":"","permalink":"http://mariogogogo.github.io/2019/01/12/%E8%B4%AD%E7%89%A9%E7%89%A9%E5%93%81%E6%8A%9B%E7%89%A9%E7%BA%BF%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6/","excerpt":"ä»Šå¤©å†™ç‚¹å¤–å–çœ‹åˆ°elmè¿™ä¸ªæ•ˆæœéå¸¸å¥½ï¼Œçªå‘å¥‡æƒ³å®ç°ä¸‹è¯•è¯•ï¼Œäºæ˜¯å†™äº†å‡ ä¸ªéå¸¸ä¸ç†æƒ³ï¼Œç„¶åå„ç§è°·æ­Œï¼Œæœ€åæœ‰ä¸€äº›å°çš„æ”¶è·åˆ†äº«","text":"ä»Šå¤©å†™ç‚¹å¤–å–çœ‹åˆ°elmè¿™ä¸ªæ•ˆæœéå¸¸å¥½ï¼Œçªå‘å¥‡æƒ³å®ç°ä¸‹è¯•è¯•ï¼Œäºæ˜¯å†™äº†å‡ ä¸ªéå¸¸ä¸ç†æƒ³ï¼Œç„¶åå„ç§è°·æ­Œï¼Œæœ€åæœ‰ä¸€äº›å°çš„æ”¶è·åˆ†äº«æ•ˆæœ1 æ•ˆæœ2 1ã€åŸç†åŠåˆ†æä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘è¿˜åœ¨å›¾ä¸ŠèŠ±äº†ä¸€äº›å®ç°è´­ç‰©è½¦çš„åŸç†ï¼Œä½†æ˜¯å¾ˆå¿«å‘ç°ä¸è¡Œï¼Œæ‰€ä»¥è¡¥äº†ä¸€ä¸‹è´­ç‰©è½¦çš„çŸ¥è¯†ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å…¬å¼ y=axx + b*x+c ä¸‹é¢çš„å®ç°å°±å¾ˆç®€å•äº†ï¼š æ‰¾åˆ°ä¸‰ä¸ªç‚¹ï¼ˆx1,y1ï¼‰,ï¼ˆx2,y2ï¼‰,ï¼ˆx3,y3ï¼‰ ç¬¬ä¸€ä¸ªç‚¹å–ï¼šæŠ›ç‰©çº¿å¼€å§‹çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»è´­ç‰©çš„æŒ‰é’®çš„åœ°æ–¹ï¼ˆx1,y1ï¼‰ ç¬¬äºŒä¸ªç‚¹å–ï¼šæŠ›ç‰©çº¿ç»“æŸçš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯è´­ç‰©è½¦çš„ä½ç½®ï¼ˆx3,y3ï¼‰ ç¬¬ä¸‰ä¸ªç‚¹å–ï¼šå…¶å®ç»“æŸçš„ç‚¹å¾€å·¦ä¸€ç‚¹å–å°±å¯ä»¥äº†ï¼Œå¯ä»¥æ˜¯ç»“æŸçš„ç‚¹ï¼ˆx3-10,y3-8ï¼‰,è¿™é‡Œå¯ä»¥é€šè¿‡å‡çš„å€¼è°ƒæ•´æŠ›ç‰©çº¿çš„å¼§åº¦ æ€è·¯æˆ‘å†æ‹ä¸€æ‹ï¼ŒæŠ›ç‰©çº¿å‡½æ•°y = a*x*x + b*x + c ,å…¶ä¸­aä¸ç­‰äº0ï¼Œaã€bã€cä¸ºå¸¸æ•°ã€‚xã€yä¸ºæŠ›ç‰©çº¿ç»è¿‡çš„åæ ‡ï¼›aå†³å®šæŠ›ç‰©çº¿çš„å¼€å£æ–¹å‘ï¼Œa&gt;0å¼€å£å‘ä¸Šï¼Œa&lt;0å¼€å£å‘ä¸‹ã€‚å¾ˆæ˜æ˜¾å¤©çŒ«çš„æŠ›ç‰©çº¿å¼€å£å‘ä¸‹ï¼Œaè¿˜å†³å®šå¼€å£çš„å¤§å°ï¼Œå€¼è¶Šå°å¼€å£è¶Šå¤§ï¼ŒæŠ›ç‰©çº¿è¶Šå¹³é¡ºï¼Œåä¹‹æŠ›ç‰©çº¿è¶Šé™¡ã€‚æ‰€ä»¥açš„å€¼å¯ä»¥è‡ªå®šä¹‰ï¼Œç­‰äºæ˜¯å·²çŸ¥ä¸¤ä¸ªåæ ‡ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹åï¼Œå³å…ƒç´ leftã€topå€¼ï¼‰ï¼Œæ±‚ä¸¤ä¸ªæœªçŸ¥æ•°ï¼Œåˆä¸­çš„æ•°å­¦å°±å­¦è¿‡ï¼ŒäºŒå…ƒäºŒæ¬¡æ–¹ç¨‹ã€‚ 12y1 ï¼ a*x1*x1 + b*x1 + cy2 = a*x2*x2 + b*x2 + c aå·²çŸ¥ï¼Œä»£å…¥ä¸¤ä¸ªå·²çŸ¥åæ ‡ï¼»x1, y1ï¼½[x2, y2]å¯ä»¥å¾—å‡ºbã€cçš„å€¼ï¼Œxå’Œyçš„å¯¹åº”å…³ç³»æœ‰äº†ã€‚ ä¸ç®¡æŠ›ç‰©çº¿å¼€å£å‘ä¸Šè¿˜æ˜¯å‘ä¸‹ï¼Œå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šç§»åŠ¨çš„é€Ÿåº¦ä¸å˜ï¼Œå³leftå€¼åŒ€é€Ÿæ”¹å˜ï¼Œå¯ä»¥è®¾å®šæŠ›ç‰©çº¿è¿åŠ¨æ—¶é—´tï¼Œå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„é€Ÿåº¦ä¸ºspeedx =ï¼ˆx2 - x1ï¼‰/tï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯30msæ‰§è¡Œä¸€æ¬¡ï¼Œleftå€¼åœ¨æ¯æ¬¡å®šæ—¶å™¨æ‰§è¡Œåçš„å€¼ä¸ºå½“å‰çš„x ï¼ speedx å®šæ—¶å™¨å·²æ‰§è¡Œæ—¶é•¿ï¼Œå†ä»£å…¥å‡½æ•°y ï¼ axx + bx + cå¾—åˆ°topå€¼ï¼Œç”±äºè¿™ä¸€åˆ‡çš„è®¡ç®—éƒ½å»ºç«‹åœ¨èµ·ç‚¹åæ ‡å¹³ç§»åˆ°åŸç‚¹ï¼ˆç»ˆç‚¹ä¹Ÿéšä¹‹å¹³ç§»ï¼‰çš„åŸºç¡€ä¸Šï¼Œæ‰€ä»¥æœ€ç»ˆè®¾ç½®è¿åŠ¨å…ƒç´ çš„leftï¼topå€¼çš„æ—¶å€™å¿…é¡»å°†èµ·ç‚¹å…ƒç´ çš„åˆå§‹leftï¼topå€¼åŠ ä¸Šã€‚ ä»£ç å¦‚ä¸‹ï¼š","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Object.definePropertyäº†è§£ä¸‹","slug":"Object.definePropertyäº†è§£ä¸‹","date":"2019-01-07T16:00:00.000Z","updated":"2020-09-16T09:07:44.000Z","comments":true,"path":"2019/01/08/Object.definePropertyäº†è§£ä¸‹/","link":"","permalink":"http://mariogogogo.github.io/2019/01/08/Object.defineProperty%E4%BA%86%E8%A7%A3%E4%B8%8B/","excerpt":"æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚","text":"æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ å‚æ•° å‚æ•°å è¯´æ˜ obj ç›®æ ‡å¯¹è±¡ prop éœ€è¦å®šä¹‰çš„å±æ€§æˆ–æ–¹æ³•çš„åå­—ã€‚ descriptor ç›®æ ‡å±æ€§æ‰€æ‹¥æœ‰çš„ç‰¹æ€§ã€‚ ç‰¹æ€§ ç‰¹æ€§å è¯´æ˜ value å±æ€§çš„å€¼ writable å¦‚æœä¸ºfalseï¼Œå±æ€§çš„å€¼å°±ä¸èƒ½è¢«é‡å†™ã€‚ get ä¸€æ—¦ç›®æ ‡å±æ€§è¢«è®¿é—®å°±ä¼šè°ƒå›æ­¤æ–¹æ³•ï¼Œå¹¶å°†æ­¤æ–¹æ³•çš„è¿ç®—ç»“æœè¿”å›ç”¨æˆ·ã€‚ set ä¸€æ—¦ç›®æ ‡å±æ€§è¢«èµ‹å€¼ï¼Œå°±ä¼šè°ƒå›æ­¤æ–¹æ³•ã€‚ configurable å¦‚æœä¸ºfalseï¼Œåˆ™ä»»ä½•å°è¯•åˆ é™¤ç›®æ ‡å±æ€§æˆ–ä¿®æ”¹å±æ€§ä»¥ä¸‹ç‰¹æ€§ï¼ˆwritable, configurable, enumerableï¼‰çš„è¡Œä¸ºå°†è¢«æ— æ•ˆåŒ–ã€‚ enumerable æ˜¯å¦èƒ½åœ¨forâ€¦inå¾ªç¯ä¸­éå†å‡ºæ¥æˆ–åœ¨Object.keysä¸­åˆ—ä¸¾å‡ºæ¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172 try &#123; var a = &#123;&#125;Object.defineProperty(a, &quot;p&quot;, &#123; value:&quot;è¿™æ˜¯ä¸€ä¸ªä¸å¯å˜çš„é»˜è®¤å€¼&quot;,writable:false&#125;);console.log(a.p);a.p=&quot;æ”¹å†™&quot;;console.log(a.p);&#125; catch (e) &#123;console.log(&#x27;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ&#x27;)&#125;try &#123;var obj = &#123; foo: &quot;test&quot;&#125;;console.log(JSON.stringify(Object.getOwnPropertyDescriptor(obj, &quot;foo&quot;)));&#125; catch (e) &#123;console.log(&quot;ä½ çš„æ¸¸è§ˆå™¨ä¸æ”¯æŒObject.definePropertyæˆ– Object.getOwnPropertyDescriptor&quot;)&#125; &quot;use strict&quot;; try&#123; var o = &#123;&#125;; Object.defineProperty( o, &quot;attr&quot;, &#123; value: &quot;è¿™æ˜¯åˆ©ç”¨defindPropertyæ·»åŠ çš„æ–°å±æ€§&quot;, writable: false, //ä¸å¯é‡å†™ enumerable: true, //å¯æšä¸¾ configurable: true //å¯åˆ é™¤è¯¥å±æ€§ &#125;); (function()&#123; var name = &quot;å¸…å“¥ä½ å¥½&quot;; //è¯»å†™å™¨ Object.defineProperty( o, &quot;name&quot;, &#123; get: function()&#123; return name; &#125;, set: function(value)&#123; name = value+&quot;!!!&quot;; &#125; &#125;); &#125;)(); console.log( o.attr ) // è¿™æ˜¯åˆ©ç”¨defindPropertyæ·»åŠ çš„æ–°å±æ€§ console.log( o.name ); // å¸…å“¥ä½ å¥½ o.name = &quot;javascript&quot;; console.log( o.name ); // javascript console.log( Object.keys(o))//attr try&#123; o.attr = &quot;è¯•å›¾é‡å†™è¯¥å±æ€§&quot;; &#125;catch(ee)&#123; console.log(&quot;ä¸writable: falseå†²çª&quot;); &#125; Object.defineProperty( o, &quot;attr&quot;, &#123; writable: true, configurable: false &#125;); o.attr = &quot;å†è¯•å°è¯•é‡å†™è¯¥å±æ€§&quot;; console.log( o.attr ); console.log(delete o.attr); //false ä¸writable: falseå†²çª &#125;catch(e)&#123; console.log(&quot;ä½ çš„æ¸¸è§ˆå™¨ä¸æ”¯æŒObject.defineProperty &quot;) &#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"swift4åŸºæœ¬è¿ç®—ç¬¦","slug":"swift4åŸºæœ¬è¿ç®—ç¬¦","date":"2019-01-01T16:00:00.000Z","updated":"2020-09-16T09:07:52.000Z","comments":true,"path":"2019/01/02/swift4åŸºæœ¬è¿ç®—ç¬¦/","link":"","permalink":"http://mariogogogo.github.io/2019/01/02/swift4%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/","excerpt":"å¤§å¤šæ•°æ–¹æ³•ä¸javascriptç±»å‹ä¸åšè¿‡å¤šæè¿°ä¸€ä¸ªä¾‹å­å¸¦è¿‡","text":"å¤§å¤šæ•°æ–¹æ³•ä¸javascriptç±»å‹ä¸åšè¿‡å¤šæè¿°ä¸€ä¸ªä¾‹å­å¸¦è¿‡ 3.1èµ‹å€¼è¿ç®—ç¬¦12345678let b = 10var a = 5;a = b;print(a) // 10let (x,y) = (1,2)print(x) //1print(y) //2 3.2ç®—æ•°è¿ç®—ç¬¦åŠ å‡ä¹˜é™¤12let a = 9 ,b =4print(&quot;å–ä½™\\(a%b)&quot;) //1 3.3ç»„åˆèµ‹å€¼è¿ç®—ç¬¦123var a = 1a +=2print(a) //3 3.4æ¯”è¾ƒè¿ç®—ç¬¦ == = &gt; &lt; 3.5ä¸‰ç›®è¿ç®—ç¬¦1å®å‘å¥–é‡‘ = å¥–é‡‘ ï¼Ÿ åŸºæœ¬å·¥èµ„+5000 ï¼šåŸºæœ¬å·¥èµ„+ 300 3.6ç©ºåˆè¿ç®—ç¬¦ç©ºåˆè¿ç®— a??b ç±»ä¼¼ a != nil ? a! : b è¡¨è¾¾å¼aå¿…é¡»æ˜¯ä¸ªå¯é€‰ç±»å‹ é»˜è®¤å€¼bçš„ç±»å‹ä¸açš„å‚¨å­˜å€¼ä¿æŒä¸€è‡´ å¦‚æœaæ˜¯éç©º åˆ™bå°±ä¸ä¼šè¢«ä¼°å€¼ 1234567let default = &quot;red&quot;var userName : String?var name = userName ?? default 3.7åŒºé—´è¿ç®—ç¬¦é—­åŒºé—´ aâ€¦b åŠå¼€é—´ a..&lt;b 1234567891011for index in 1...5&#123; print(index)&#125;let count = names.countfor i in 0..&lt;count&#123; print(i)&#125; 3.8é€»è¾‘è¿ç®—ç¬¦!a a&amp;&amp;b a||b","categories":[{"name":"Swift","slug":"Swift","permalink":"http://mariogogogo.github.io/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://mariogogogo.github.io/tags/Swift/"}]},{"title":"swift4è¯­æ³•åŸºç¡€","slug":"swift4è¯­æ³•åŸºç¡€","date":"2018-12-31T16:00:00.000Z","updated":"2020-09-16T09:07:52.000Z","comments":true,"path":"2019/01/01/swift4è¯­æ³•åŸºç¡€/","link":"","permalink":"http://mariogogogo.github.io/2019/01/01/swift4%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/","excerpt":"ä»‹ç»ä¸‹å˜é‡å’Œå¸¸é‡","text":"ä»‹ç»ä¸‹å˜é‡å’Œå¸¸é‡ 2.1å˜é‡ä¸å¸¸é‡letä»£è¡¨å¸¸é‡ 1let MAX_VALUE = 25 varä»£è¡¨å˜é‡ 1var currentCount = 100 æ³¨æ„ï¼šä¸€æ—¦å¸¸é‡æˆ–å˜é‡ç¡®å®šç±»å‹ï¼Œå°±ä¸èƒ½ä½¿ç”¨ç›¸åŒåç§°å†æ¬¡å£°æ˜æˆ–æ”¹å˜å®ƒçš„ç±»å‹ï¼ŒåŒæ—¶å¸¸é‡ä¸å˜é‡ä¸èƒ½ç›¸äº’è½¬æ¢ 2.2æ³¨é‡Š//ä»£è¡¨å•è¡Œæ³¨é‡Š/+ä»£è¡¨å¤šè¡Œæ³¨é‡Š*+**/ 2.3åˆ†å·åŸºæœ¬ä¸Šä¸éœ€è¦åˆ†å·é™¤éï¼š1let sun = &quot;â˜€ï¸&quot;ï¼›print(sun) 2.4æ•´æ•°æ•´æ•°è¡¨ç¤ºï¼šæ­£æ•°ï¼Œè´Ÿæ•°ï¼Œé›¶ 2.5æµ®ç‚¹æ•°æµ®åŠ¨æ•°Doubleï¼ŒFloat 2.6ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­å¦‚æœæˆ‘ä»¬çš„ä»£ç éœ€è¦ä¸€ä¸ªstringç±»å‹çš„å€¼ï¼Œå°±ç»å¯¹ä¸ä¼šä¼ è¿‡å»ä¸€ä¸ªIntç±»å‹çš„å€¼ï¼Œæœ‰äº†ç±»å‹æ¨æ–­ï¼Œç¼–è¯‘å™¨æ ¹æ®æˆ‘ä»¬ç»™çš„ç›¸å…³å˜é‡ï¼Œå¸¸é‡ï¼Œæˆ–ç±»æµ‹å±æ€§å¤åˆ¶ï¼Œåœ¨ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­è¡¨è¾¾å¼çš„ç±»å‹ï¼Œåªè¦æˆ‘ä»¬å£°æ˜å¸¸é‡æˆ–å˜é‡èµ‹äºˆå®ƒä¸€ä¸ªâ€å­—é¢é‡â€œå°±ä¼šè§¦å‘ç±»å‹æ¨æ–­ 12345let age= 23let name = &quot;jack&quot;let pi = 3.1415926let é¢ç§¯ = pi * pow(3,2) 2.7æ•°å€¼å‹å­—é¢é‡12345let Interger = 17let twojinzhi = 0b0001let bajinzhi = 0o21let shiliujinzhi = 0x11 2.8æ•°å€¼ç±»å‹è½¬æ¢æ•´æ•°ä¸æµ®åŠ¨æ•°ç›¸äº’è½¬åŒ– 12345678//int -&gt; dlet three = 3;let point = 0.14159;let pis = Double(three) + point;//d -&gt; intlet intPi = Int(pis) ç±»å‹åˆ«åï¼šå°±æ˜¯ç»™ç°æœ‰çš„ç±»å‹å®šä¹‰å¦ä¸€ä¸ªåå­—ï¼Œå¯ä»¥ä½¿typealiaså…³é”®è¯å®šä¹‰ç±»å‹åˆ«å 1typealias AudioSample = UInt16 2.9å¸ƒå°”å€¼1234567let hasKey = trueif(hasKey)&#123; print(&#x27;kaimen&#x27;)&#125;else&#123; print(&#x27;guanmen&#x27;)&#125; 2.10å…ƒç»„å…ƒç»„çš„å®šä¹‰ï¼šä¸´æ—¶æŠŠä»»æ„æ•°æ®çš„å¤šä¸ªå€¼ç»„åˆèµ·æ¥çš„ä¸€ä¸ªå¤åˆç±»å‹ï¼Œé€‚ç”¨æ‰‹æœºå®¢æˆ·ç«¯webapiè¯·æ±‚è¿”å›çš„æ•°æ®é›†åˆ 12345var http404Error = (404,&quot;æ²¡æ‰¾åˆ°é¡µé¢&quot;)//é€šè¿‡ä¸‹æ ‡æ¥æ‰¾var code = http404Error.0var msg = http404Error.1 2.11å¯é€‰ç±»å‹å¯é€‰ç±»å‹å®šä¹‰ï¼šç”¨æ¥å¤„ç†å¯èƒ½ç¼ºå¤±å€¼å¾—ç±»å‹ 12345678910111213let number = &#x27;1234&#x27;let isNumber = Int(number)if(isNumber != nil)&#123; print(&quot;is number:\\(isNumber)&quot;)&#125;else&#123; print(&quot;not number:\\(isNumber)&quot;) // Optional(1234) print(&quot;not number:\\(isNumber!)&quot;) // 1234&#125; å¢åŠ isNumber!æ‹†åŒ… æˆ‘ä»¬åªèƒ½ç»™å¯é€‰ç±»å‹çš„å˜é‡èµ‹äºˆnilå€¼ï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰å€¼ã€‚ å»ºè®®å£°æ˜å˜é‡æ—¶å€™è®¾ç½®ä¸ºå¯é€‰å˜é‡ï¼Œä»–ä»¬ä¼šè‡ªåŠ¨è®¾ç½®é»˜è®¤å€¼nil 123var emptyString :String?print(emptyString) // nil å¦‚æœç¡®å®šæœ‰é»˜è®¤å€¼åˆ™ 123var rewardï¼šInt! = 8_000print(reward) // 8000 2.12é”™è¯¯å¤„ç†å½“å‡½æ•°é‡åˆ°ä¸€ä¸ªé”™è¯¯æƒ…å†µæ—¶ï¼Œå®ƒå°±ä¼šå‡ºç°throwä¸€ä¸ªé”™è¯¯ 123456789101112func hasError() throws&#123; print (&#x27;å¤„ç†æŠ›å‡ºé”™è¯¯&#x27;)&#125;try hasError()do&#123; try &lt;# throwing expression #&gt;&#125; catch &lt;#pattenrn#&gt;&#123; &lt;#statements#&gt;&#125; 2.13æ–­è¨€æ–­è¨€ï¼šä¸»è¦ç”¨äºè¿è¡Œæ—¶è°ƒè¯• 12345let andAge = 16assert(andAge &gt; 16,&quot;andyde å¹´é¾„æ²¡æœ‰åˆ°16å²&quot;) //æ‰§è¡Œè¿™å¥","categories":[{"name":"Swift","slug":"Swift","permalink":"http://mariogogogo.github.io/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://mariogogogo.github.io/tags/Swift/"}]},{"title":"2018 å¹´æ€»ç»“","slug":"2018æ€»ç»“","date":"2018-12-29T16:00:00.000Z","updated":"2020-09-16T09:06:53.000Z","comments":true,"path":"2018/12/30/2018æ€»ç»“/","link":"","permalink":"http://mariogogogo.github.io/2018/12/30/2018%E6%80%BB%E7%BB%93/","excerpt":"2018 å¹´æˆé•¿çš„è¿˜æ˜¯å¤ªæ…¢ï¼Œå†™äº† NET å†™äº† RN å†™äº† ANDROID","text":"2018 å¹´æˆé•¿çš„è¿˜æ˜¯å¤ªæ…¢ï¼Œå†™äº† NET å†™äº† RN å†™äº† ANDROID 2019 å¹´æƒ³æ‰©å±•è‡ªå·±çš„æŠ€èƒ½å­¦ä¸€é—¨åˆ«çš„è¯­è¨€-Swiftï¼Œç»™è‡ªå·± 4 ä¸ªæœˆçš„ä¸‹ç­æ—¶é—´ï¼ŒåŠ æ²¹ â›½ï¸ï¼Œ2019 å¹´æœ€é‡è¦çš„è¿˜æœ‰æ¶¨å·¥èµ„å•Š","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/tags/Web/"}]},{"title":"Reactç³»åˆ—_redux-Immutable","slug":"Reactç³»åˆ—_redux-Immutable ","date":"2018-12-15T16:00:00.000Z","updated":"2020-09-16T09:07:47.000Z","comments":true,"path":"2018/12/16/Reactç³»åˆ—_redux-Immutable /","link":"","permalink":"http://mariogogogo.github.io/2018/12/16/React%E7%B3%BB%E5%88%97_redux-Immutable%20/","excerpt":"Immutable æ˜¯ä»€ä¹ˆï¼Ÿ ç®€è€Œè¨€ä¹‹ï¼ŒImmutableæ•°æ®å°±æ˜¯ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½æ›´æ”¹çš„æ•°æ®ã€‚æ¯å½“å¯¹Immutableå¯¹è±¡è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„Immutableå¯¹è±¡ï¼Œä»¥æ­¤æ¥ä¿è¯æ•°æ®çš„ä¸å¯å˜","text":"Immutable æ˜¯ä»€ä¹ˆï¼Ÿ ç®€è€Œè¨€ä¹‹ï¼ŒImmutableæ•°æ®å°±æ˜¯ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½æ›´æ”¹çš„æ•°æ®ã€‚æ¯å½“å¯¹Immutableå¯¹è±¡è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„Immutableå¯¹è±¡ï¼Œä»¥æ­¤æ¥ä¿è¯æ•°æ®çš„ä¸å¯å˜ é¦–å…ˆç†Ÿæ‚‰ä¸€äº›å¸¸ç”¨apiçš„ç”¨æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798const immutable = require(&#x27;immutable&#x27;);let &#123; Map, List, is &#125; = immutable;let a = Map(&#123; select: &#x27;users&#x27;, filter: Map(&#123; name: &#x27;Cam&#x27; &#125;),&#125;);let b = a.set(&#x27;select&#x27;, &#x27;people&#x27;);console.log(a === b);console.log(a.get(&#x27;filter&#x27;) === b.get(&#x27;filter&#x27;));const map = Map(&#123; a: 1, b: 2 &#125;);const list = List([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);console.log(map.get(&#x27;c&#x27;));console.log(list.get(21));immutable.fromJS(&#123; a: &#x27;123&#x27;, b: &#x27;234&#x27; &#125;, function(key, value, path) &#123; console.log(key, value, path);&#125;);//================================const map1 = Map(&#123; a: 1, b: 1, c: 1 &#125;);const map2 = Map(&#123; a: 1, b: 1, c: 1 &#125;);console.log(map1 === map2); //falseconsole.log(Object.is(map1, map2)); // falseconsole.log(is(map1, map2)); // true//=================================List.isList([]); // falseislist1 = List.isList(List([1, 2, 3, 4, 5])); // trueconsole.log(islist1);console.log(List([1, 2, 3, 4, 5]).push(2222222222));List([0, 1, 2, 3, 4]).insert(6, 5);//List [ 0, 1, 2, 3, 4, 5 ]List([1, 2, 3, 4]).push(5);// List [ 1, 2, 3, 4, 5 ]List([1, 2, 3, 4]).pop();// List[ 1, 2, 3 ]List([2, 3, 4]).unshift(1);// List [ 1, 2, 3, 4 ]List([0, 1, 2, 3, 4]).shift();// List [ 1, 2, 3, 4 ]console.log(List([1, 2, 3, 4, 5]).size);Map.isMap(&#123;&#125;); // falseismap1 = Map.isMap(Map()); // trueconsole.log(ismap1);//=================set==============const setlist = List([0]);console.log(&#x27;set &#x27; + setlist);const setlist2 = setlist.set(2, &#x27;abc&#x27;);console.log(&#x27;set &#x27; + setlist2);const setmap = Map();const setmap2 = setmap.set(&#x27;key&#x27;, &#x27;value&#x27;);console.log(setmap2);const setmap3 = setmap2.set(&#x27;k&#x27;, &#x27;hello value&#x27;, &#x27;b&#x27;, &#x27;ima&#x27;);console.log(setmap3);const deepmap = Map(&#123; subObject: Map(&#123; key: &#x27;hello react&#x27;, object: Map(&#123; key: &#x27;hello word&#x27;, &#125;), &#125;),&#125;);const newMap = deepmap.setIn([&#x27;subObject&#x27;, &#x27;key&#x27;], &#x27;update helo&#x27;);console.log(newMap);const secondMap = deepmap.setIn([&#x27;subObject&#x27;, &#x27;object&#x27;, &#x27;key&#x27;], &#x27;ğŸ˜update word!&#x27;);console.log(secondMap);//=================delete==============const del = List([0, 1, 2, 3, 4]).delete(0);console.log(&#x27;åˆ é™¤åçš„æ•°ç»„ï¼š &#x27; + del);const originalMap = Map(&#123; key: &#x27;value&#x27;, otherKey: &#x27;other value&#x27;,&#125;);const del2 = originalMap.delete(&#x27;otherKey&#x27;);console.log(&#x27;åˆ é™¤åçš„å¯¹è±¡&#x27; + del2);//==============merge============const Map1 = Immutable.fromJS(&#123;a:111,b:222,c:&#123;d:333,e:444&#125;&#125;); const Map2 = Immutable.fromJS(&#123;a:111,b:222,c:&#123;e:444,f:555&#125;&#125;); const Map3 = Map1.merge(Map2); //Map &#123;a:111,b:222,c:&#123;e:444,f:555&#125;&#125; const Map4 = Map1.mergeDeep(Map2); //Map &#123;a:111,b:222,c:&#123;d:333,e:444,f:555&#125;&#125; const Map5 = Map1.mergeWith((oldData,newData,key)=&gt;&#123; if(key === &#x27;a&#x27;)&#123; return 666; &#125;else&#123; return newData &#125; &#125;,Map2); //Map &#123;a:666,b:222,c:&#123;e:444,f:555&#125;&#125; é¡¹ç›®ä¸­å¦‚ä½•ç”¨å‘¢ï¼Ÿé¦–å…ˆä¿®æ”¹redurce.js123456789101112131415161718192021import &#123; fromJS &#125; from &#x27;immutable&#x27;;//æ™®é€šå¯¹è±¡è½¬æ¢æˆ immutableç±»å‹å¯¹è±¡const defaultState = fromJS(&#123; focused: false, mouseIn: false, list: [], page: 1, //å½“å‰é¡µ totalPage: 1, //æ€»é¡µæ•°&#125;);....switch (action.type) &#123; case constants.SEARCH_FOCUS: //é€»è¾‘ imæ ¹æ®ä¹‹å‰çš„æ•°æ®ï¼Œè¿”å›æ–°çš„æ•°æ® return state.set(&#x27;focused&#x27;, true); case constants.CHANGE_LIST: // mergeå¤šç»„å¯¹è±¡ä¸­ä½¿ç”¨ return state.merge(&#123; list: action.data, totalPage: action.totalPage, &#125;); index.jsè·å–æ•°æ®1234567891011const mapStateToProps = state =&gt; &#123; return &#123; //getin[å“ªä¸ªåˆ†æ”¯reducerï¼Œåˆ†æ”¯ä¸Šçš„æ•°æ®å­—æ®µ] focused: state.getIn([&#x27;header&#x27;, &#x27;focused&#x27;]), list: state.getIn([&#x27;header&#x27;, &#x27;list&#x27;]), page: state.getIn([&#x27;header&#x27;, &#x27;page&#x27;]), totalPage: state.getIn([&#x27;header&#x27;, &#x27;totalPage&#x27;]), mouseIn: state.getIn([&#x27;header&#x27;, &#x27;mouseIn&#x27;]), login: state.getIn([&#x27;login&#x27;, &#x27;isLogin&#x27;]), &#125;;&#125;;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_combineReducers","slug":"Reactç³»åˆ—_combineReducers","date":"2018-12-14T16:00:00.000Z","updated":"2020-09-16T09:07:46.000Z","comments":true,"path":"2018/12/15/Reactç³»åˆ—_combineReducers/","link":"","permalink":"http://mariogogogo.github.io/2018/12/15/React%E7%B3%BB%E5%88%97_combineReducers/","excerpt":"éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œéœ€è¦å¯¹ reducer å‡½æ•° è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† state çš„ä¸€éƒ¨åˆ†ã€‚","text":"éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œéœ€è¦å¯¹ reducer å‡½æ•° è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† state çš„ä¸€éƒ¨åˆ†ã€‚combineReducers è¾…åŠ©å‡½æ•°çš„ä½œç”¨æ˜¯ï¼ŒæŠŠä¸€ä¸ªç”±å¤šä¸ªä¸åŒ reducer å‡½æ•°ä½œä¸º value çš„ objectï¼Œåˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„ reducer å‡½æ•°ï¼Œç„¶åå°±å¯ä»¥å¯¹è¿™ä¸ª reducer è°ƒç”¨ createStoreã€‚åˆå¹¶åçš„ reducer å¯ä»¥è°ƒç”¨å„ä¸ªå­ reducerï¼Œå¹¶æŠŠå®ƒä»¬çš„ç»“æœåˆå¹¶æˆä¸€ä¸ª state å¯¹è±¡ã€‚state å¯¹è±¡çš„ç»“æ„ç”±ä¼ å…¥çš„å¤šä¸ª reducer çš„ key å†³å®šã€‚ å…ˆçœ‹ä¸‹demoç»“æ„ åˆ›å»ºstoresrc/store/index.js12345678910import &#123; createStore, compose, applyMiddleware &#125; from &#x27;redux&#x27;;import thunk from &#x27;redux-thunk&#x27;;import reducer from &#x27;./reducer&#x27;;const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;const store = createStore(reducer, composeEnhancers( applyMiddleware(thunk)));export default store;src/store/redurcer.js 1234567891011121314import &#123; combineReducers &#125; from &#x27;redux-immutable&#x27;;import &#123; reducer as headerReducer &#125; from &#x27;../common/header/store&#x27;;import &#123; reducer as homeReducer &#125; from &#x27;../pages/home/store&#x27;;import &#123; reducer as detailReducer &#125; from &#x27;../pages/detail/store&#x27;;import &#123; reducer as loginReducer &#125; from &#x27;../pages/login/store&#x27;;const reducer = combineReducers(&#123; header: headerReducer, //keyå€¼ ï¼š valueå€¼ home: homeReducer, detail: detailReducer, login: loginReducer,&#125;);export default reducer; /src/page/header/index.js 12345import reducer from &#x27;./reducer&#x27;;import * as actionCreators from &#x27;./actionCreators&#x27;;import * as constants from &#x27;./constants&#x27;;export &#123; reducer, actionCreators, constants &#125;; è¿™æ ·å†™çš„å¥½å¤„æ˜¯src/store/redurcer.jsä¸‹çš„å¼•ç”¨åˆ†æ”¯redurceç›®å½•ç»“æ„å°‘å†™2å±‚ã€‚æ˜“è¯» 1234567891011121314151617181920import &#123; fromJS &#125; from &#x27;immutable&#x27;;import * as constants from &#x27;./constants&#x27;;const defaultState = fromJS(&#123; title: &#x27;&#x27;, content: &#x27;&#x27;&#125;);export default (state = defaultState, action) =&gt; &#123; switch(action.type) &#123; case constants.CHANGE_DETAIL: // é€»è¾‘å¤„ç†è¿”å›çº¯å‡½æ•° return state.merge(&#123; title: action.title, content: action.content &#125;) default: return state; &#125;&#125; åŒæ—¶ä»£ç ä¸­å¼•ç”¨reducerä¸­ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼š 1234567891011121314151617181920212223242526272829303132333435363738import React, &#123; PureComponent &#125; from &#x27;react&#x27;;import &#123; connect &#125; from &#x27;react-redux&#x27;;import &#123; withRouter &#125; from &#x27;react-router-dom&#x27;;import &#123; DetailWrapper, Header, Content &#125; from &#x27;./style&#x27;;import &#123; actionCreators &#125; from &#x27;./store&#x27;;class Detail extends PureComponent &#123; render() &#123; return ( &lt;DetailWrapper&gt; &lt;Header&gt;&#123;this.props.title&#125;&lt;/Header&gt; &lt;Content // htmlæ ‡ç­¾çš„è½¬ä¹‰ç”¨dangerouslySetInnerHTML dangerouslySetInnerHTML=&#123;&#123;__html: this.props.content&#125;&#125; /&gt; &lt;/DetailWrapper&gt; ) &#125; componentDidMount() &#123; this.props.getDetail(this.props.match.params.id); &#125;&#125;const mapState = (state) =&gt; (&#123; title: state.getIn([&#x27;detail&#x27;, &#x27;title&#x27;]), content: state.getIn([&#x27;detail&#x27;, &#x27;content&#x27;])&#125;);const mapDispatch = (dispatch) =&gt; (&#123; getDetail(id) &#123; dispatch(actionCreators.getDetail(id)); &#125;&#125;);export default connect(mapState, mapDispatch)(withRouter(Detail));// ä»–çš„æ„æ€æ˜¯æˆ‘è®©detailæœ‰èƒ½åŠ›è·å–routerä¸­çš„ä¸€äº›å‚æ•°","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_react-redux","slug":"Reactç³»åˆ—_react-redux","date":"2018-12-14T16:00:00.000Z","updated":"2020-09-16T09:07:47.000Z","comments":true,"path":"2018/12/15/Reactç³»åˆ—_react-redux/","link":"","permalink":"http://mariogogogo.github.io/2018/12/15/React%E7%B3%BB%E5%88%97_react-redux/","excerpt":"é¦–å…ˆä¸‹è½½ 1yarn add react-redux","text":"é¦–å…ˆä¸‹è½½ 1yarn add react-redux åˆ›å»ºä¸€ä¸ªstore123456import &#123; createStore &#125; from &#x27;redux&#x27;;import reducer from &#x27;./reducer&#x27;;const store = createStore(reducer);export default store;å…¥å£æ–‡ä»¶.js12345678910111213import store from &#x27;./store&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;class App extends Component &#123; render() &#123; return ( &lt;Provider store=&#123;store&#125;&gt; &lt;TodoList /&gt; &lt;/Provider&gt; ); &#125;&#125;ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;));index.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import React, &#123; Component &#125; from &#x27;react&#x27;;import &#123; connect &#125; from &#x27;react-redux&#x27;;import &#123; getInputChange, addItem, deleteItem, GetItem &#125; from &#x27;./store/actionCreators&#x27;;class todoList extends Component &#123; render() &#123; return ( &lt;div&gt; &lt;div&gt; &lt;input type=&quot;text&quot; value=&#123;this.props.inputValue&#125; onChange=&#123;this.props.changeInputValue&#125; /&gt; &lt;button onClick=&#123;this.props.handleBtnClcik&#125;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;Dall&lt;/li&gt; &#123;this.props.list.map((item, index) =&gt; ( &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt; ))&#125; &lt;/ul&gt; &lt;/div&gt; ); &#125;&#125;const mapStateToProps = state =&gt; &#123; return &#123; inputValue: state.inputValue, list: state.list, &#125;;&#125;;const mapDispathchToProps = dispatch =&gt; &#123; return &#123; changeInputValue(e) &#123; console.log(e.target.value); const action = getInputChange(e.target.value); dispatch(action); &#125;, handleBtnClcik() &#123; console.log(&#x27;æäº¤&#x27;); const action = addItem(); dispatch(action); &#125;, &#125;;&#125;;export default connect( mapStateToProps, mapDispathchToProps)(todoList); åˆ›å»ºreducer.js 12345678910111213141516171819202122import &#123; CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM, INIT_TODO_ITEM &#125; from &#x27;./actionTypes&#x27;;const defaultState = &#123; inputValue: &#x27;&#x27;, list: [],&#125;;export default (state = defaultState, action) =&gt; &#123; console.log(state, action); const newState = JSON.parse(JSON.stringify(state)); //æ·±æ‹·è´ if (action.type === CHANGE_INPUT_VALUE) &#123; newState.inputValue = action.value; return newState; &#125; if (action.type === ADD_TODO_ITEM) &#123; newState.list = [...newState.list, newState.inputValue]; newState.inputValue = &#x27;&#x27;; return newState; &#125; return state;&#125;;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_redux-saga","slug":"Reactç³»åˆ—_redux-thunk","date":"2018-12-13T16:00:00.000Z","updated":"2020-09-16T09:07:48.000Z","comments":true,"path":"2018/12/14/Reactç³»åˆ—_redux-thunk/","link":"","permalink":"http://mariogogogo.github.io/2018/12/14/React%E7%B3%BB%E5%88%97_redux-thunk/","excerpt":"reduxå¦‚ä½•ä½¿ç”¨å¼‚æ­¥è¯·æ±‚","text":"reduxå¦‚ä½•ä½¿ç”¨å¼‚æ­¥è¯·æ±‚é¦–å…ˆçœ‹ä¸‹ç®€å•çš„ä½¿ç”¨è¯·æ±‚ 123456789componentDidMount = () =&gt; &#123; axios.get(&#x27;http://rap2api.taobao.org/app/mock/8651/api/tuangou&#x27;).then(res =&gt; &#123; console.log(res); const data = res.data; const action = initData(data); store.dispatch(action); &#125;); &#125;; actionCreator.js 12345export const initData = data =&gt; (&#123; type: INIT_TODO_ITEM, data: data,&#125;); redurce.js 1234if (action.type === INIT_TODO_ITEM) &#123; newState.list = action.data.data; return newState;&#125; å¦‚æœå¼‚æ­¥è¯·æ±‚æ–¹æ³•è¿‡å¤šï¼Œä»£ç çœ‹èµ·æ¥å°±æ¯”è¾ƒè‡ƒè‚¿æ‰€æœ‰å¿…é¡»æå–å‡ºæ¥ç»Ÿä¸€ç®¡ç† é¦–å…ˆå®‰è£… 1yarn add redux-saga é‡æ–°é…ç½®stroe 1234567891011121314151617import &#123; createStore, applyMiddleware &#125; from &#x27;redux&#x27;;+ import createSagaMiddleware from &#x27;redux-saga&#x27;;import reducer from &#x27;./reducer&#x27;;+ import mySaga from &#x27;./sagas&#x27;;/** * å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ® */// create the saga middleware+ const sagaMiddleware = createSagaMiddleware();// mount it on the Storeconst store = createStore(reducer, applyMiddleware(sagaMiddleware));// then run the sagasagaMiddleware.run(mySaga);export default store; //æš´éœ² é¦–å…ˆä¸»æ–‡ä»¶index.js 1234567import &#123; getInputChange, addItem, deleteItem, GetItem &#125; from &#x27;./store/actionCreators&#x27;;//å‘é€actioncomponentDidMount = () =&gt; &#123; const action = GetItem(); store.dispatch(action); &#125;; actionCreator.js 123456789&#x2F;&#x2F;å¼‚æ­¥è¯·æ±‚çš„action ----&gt;sagaå»æ¥æ”¶export const GetItem &#x3D; () &#x3D;&gt; (&#123; type: ANSYNC_INIT_ITEM,&#125;);&#x2F;&#x2F;è¯·æ±‚ä¹‹åè·å–action ---&gt;redurcerå»æ¥æ”¶export const initData &#x3D; data &#x3D;&gt; (&#123; type: INIT_TODO_ITEM, data: data,&#125;); saga.js 123456789101112131415161718192021import &#123;call,fork, put, takeEvery &#125; from &#x27;redux-saga/effects&#x27;;import axios from &#x27;axios&#x27;;import &#123; ANSYNC_INIT_ITEM &#125; from &#x27;./actionTypes&#x27;;import &#123; initData &#125; from &#x27;./actionCreators&#x27;;function* getInitList() &#123; try &#123; const res = yield axios.get(&#x27;http://rap2api.taobao.org/app/mock/8651/api/tuangou&#x27;); console.log(res); // yield put(&#123; type: INIT_TODO_ITEM, data: res.data &#125;); //å‘é€action--&gt; yield put(initData(res.data)); &#125; catch (e) &#123; throw new Error(&#x27;ç½‘ç»œè¯·æ±‚è¿”å›é”™è¯¯&#x27; + e); &#125;&#125;function* mySaga() &#123; yield takeEvery(ANSYNC_INIT_ITEM, getInitList);&#125;export default mySaga; redurcer.js 12345if (action.type === INIT_TODO_ITEM) &#123; newState.list = action.data.data; return newState; &#125; sagaAPIç®€å•ä»‹ç»ï¼šEffectå‡½æ•°æœ‰å¾ˆå¤šä¸ªï¼Œåœ¨redux-saga/effectsæä¾›ï¼Œä¸»è¦åŒ…æ‹¬callï¼Œforkï¼Œputï¼Œtakeï¼Œselectç­‰ï¼Œå®ƒä»¬éƒ½ä¸middlewareä¸­çš„æ“ä½œä¸€ä¸€å¯¹åº”ã€‚ call å’Œ forkcallå’Œforkè¡¨ç¤ºå¼‚æ­¥è°ƒç”¨ï¼Œå…¶ä¸­callè¡¨ç¤ºçš„æ˜¯é˜»å¡è°ƒç”¨ï¼Œforkè¡¨ç¤ºçš„æ˜¯éé˜»å¡è°ƒç”¨ã€‚ putå’Œselectputå¯¹åº”çš„æ˜¯middlewareä¸­çš„dispatchæ–¹æ³•ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªplain objectï¼Œä¸€èˆ¬åœ¨å¼‚æ­¥è°ƒç”¨è¿”å›ç»“æœåï¼Œæ¥ç€æ‰§è¡Œputã€‚selectç›¸å½“äºgetStateï¼Œç”¨äºè·å–storeä¸­çš„ç›¸åº”éƒ¨åˆ†çš„stateã€‚ takeã€takeEveryã€takeLatestredux-sagaä¸­å¦‚æœåœ¨éé˜»å¡è°ƒç”¨ä¸‹ï¼ˆforkï¼‰,é‚£ä¹ˆéµå¾ªçš„æ˜¯worker/watcheræ¨¡å¼ï¼Œé€šè¿‡takeå¯ä»¥ç›‘å¬æŸä¸ªactionæ˜¯å¦è¢«å‘èµ·ï¼Œæ­¤å¤–é€šè¿‡takeç»“åˆforkï¼Œå¯ä»¥å®ç°takeEveryå’ŒtakeLatestçš„æ•ˆæœã€‚ å¦‚æœä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„actionè¢«å‘èµ·å¤šæ¬¡ï¼ŒtakeEveryä¼šæ‰§è¡Œå¤šæ¬¡actionï¼Œè€ŒtakeLateståªä¼šæ‰§è¡Œæœ€è¿‘çš„ä¸€æ¬¡ã€‚ redux-sagaçš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š ï¼ˆ1ï¼‰é›†ä¸­å¤„ç†äº†æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ¥å£éƒ¨åˆ†ä¸€ç›®äº†ç„¶ ï¼ˆ2ï¼‰actionæ˜¯æ™®é€šå¯¹è±¡ï¼Œè¿™è·ŸreduxåŒæ­¥çš„actionä¸€æ¨¡ä¸€æ · ï¼ˆ3ï¼‰é€šè¿‡Effectï¼Œæ–¹ä¾¿å¼‚æ­¥æ¥å£çš„æµ‹è¯• ï¼ˆ4ï¼‰é€šè¿‡worker å’Œwatcherå¯ä»¥å®ç°éé˜»å¡å¼‚æ­¥è°ƒç”¨ï¼Œå¹¶ä¸”åŒæ—¶å¯ä»¥å® ç°éé˜»å¡è°ƒç”¨ä¸‹çš„äº‹ä»¶ç›‘å¬ ï¼ˆ5ï¼‰ å¼‚æ­¥æ“ä½œçš„æµç¨‹æ˜¯å¯ä»¥æ§åˆ¶çš„ï¼Œå¯ä»¥éšæ—¶å–æ¶ˆç›¸åº”çš„å¼‚æ­¥æ“ä½œã€‚ ç¼ºç‚¹ï¼šå¤ªå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_redux","slug":"ç®€å•ä½¿ç”¨redux","date":"2018-12-12T16:00:00.000Z","updated":"2020-09-16T09:07:06.000Z","comments":true,"path":"2018/12/13/ç®€å•ä½¿ç”¨redux/","link":"","permalink":"http://mariogogogo.github.io/2018/12/13/%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8redux/","excerpt":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ reduxï¼Ÿ","text":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ reduxï¼Ÿ å½“ä½ å»å¼€å‘å¤æ‚çš„å•é¡µåº”ç”¨çš„æ—¶å€™ä½ éœ€è¦ç®¡ç†å„ç§å¤æ‚çš„åº”ç”¨çŠ¶æ€ï¼Œè¿™é‹çŠ¶æ€å¯èƒ½æ˜¯æœåŠ¡å™¨è¿”å›çš„çŠ¶ï¼Œæ€ï¼Œæœ¬åœ°çš„æ•°æ® url redux å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† åªç»´æŠ¤æ•°æ® çœ‹å›¾ï¼š redux æµç¨‹ é¦–å…ˆåˆ›å»º Store /src/store/index 1234567import &#123; createStore &#125; from &#x27;redux&#x27;;/** * å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ® */const store = createStore();export default store; //æš´éœ² index.js ä¸­å¼•å…¥ store 12345678910import React, &#123; Component &#125; from &#x27;react&#x27;;import store from &#x27;./store&#x27;; //å¼•å…¥storeä¸­çš„æ•°æ®class Todolist extends Component &#123; constructor(props) &#123; super(props); console.log(store.getState()); this.state = store.getState(); .... ä½†æ­¤æ—¶ store å¹¶æ— æ•°æ®æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª redurce /src/store/reducer 123456789101112131415161718/** * state ç›¸å½“äºæ•´ä¸ªé¡¹ç›®å­˜çš„æ•°æ® * action ç›¸å½“äº */const defaultState = &#123; inputValue: &#x27;&#x27;, list: [&#x27;a&#x27;, &#x27;b&#x27;],&#125;;export default (state = defaultState, action) =&gt; &#123; /** * state æ˜¯å‰ä¸€æ¬¡çš„æ•°æ® */ console.log(state, action); //reducer æ¥å—åˆ° storeä¼ è¿‡æ¥çš„action return state;&#125;; ç„¶åå†å›åˆ° store ä¸­æŠŠ reducer å¯¼å…¥ 123456789import &#123; createStore &#125; from &#x27;redux&#x27;;+ import reduce from &#x27;./reducer&#x27;;/** * å¼•å…¥reduceå storeå°±å­˜åœ¨äº† inputvalueå’Œlistçš„æ•°æ® */+ const store = createStore(reduce);export default store; //æš´éœ² æ´¾å‘ action 123456789101112131415161718192021222324252627282930render() &#123; return ( &lt;div&gt; &lt;input type=&quot;text&quot; placeholder=&quot;è¾“å…¥&quot; value=&#123;this.state.inputValue&#125; onChange=&#123;this.handleInputChange&#125; /&gt; &lt;button onClick=&#123;this.onSumbit&#125;&gt;æäº¤&lt;/button&gt; &lt;ul&gt; &#123;this.state.list.map((item, index) =&gt; ( &lt;li onClick=&#123;this.handleItemDelete.bind(this, index)&#125; key=&#123;index&#125;&gt; &#123;item&#125; &lt;/li&gt; ))&#125; &lt;/ul&gt; &lt;/div&gt; ); &#125; handleInputChange(e) &#123; const action = &#123; type: &#x27;changeText&#x27;, value: e.target.value, &#125;; store.dispatch(action); //ä¼ ç»™store &#125; onSumbit() &#123; const action = &#123; type: &#x27;addList&#x27;, &#125;; store.dispatch(action); &#125; action â€“&gt; store â€“&gt; reducer ä¸­æ‰¾åˆ°æ›´æ–° state çš„æ–¹æ³• redurce.js 123456789101112export default (state = defaultState, action) =&gt; &#123; /** * state æ˜¯å‰ä¸€æ¬¡çš„æ•°æ® */ console.log(state, action); //reducer æ¥å—åˆ° storeä¼ è¿‡æ¥çš„action const newState = JSON.parse(JSON.stringify(state)); //æ·±æ‹·è´ if (action.type === &#x27;changeText&#x27;) &#123; newState.inputValue = action.value; return newState; &#125; ........ redurce â€“&gt; è¿”å›æ–° state åˆ° Store ä¸­,åªæœ‰ stroe æ”¹å˜è‡ªå·±çš„å†…å®¹â€”&gt;è¿”å›ç»™ç»„ä»¶è§¦å‘ç»„ä»¶æ›´æ–° ç›‘å¬ redurce è¿”å›çš„æ–° state 1234567891011121314constructor(props) &#123; super(props); this.state = store.getState(); this.handleStoreChange = this.handleStoreChange.bind(this); store.subscribe(this.handleStoreChange); //ç›‘å¬storeçš„å˜åŒ– &#125; .... handleStoreChange() &#123; console.log(&#x27;storechange&#x27;); this.setState(store.getState()); &#125; .... æ•´ä¸€ä¸ªæµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„ æˆ‘ä»¬è¿˜å¯ä»¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ è§„èŒƒåŒ– reduxï¼šActionTypes çš„æ‹†åˆ†å½“æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ª action çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ª action æ–¹æ³•åæ‹¼å†™å­—ç¬¦ä¸²é”™è¯¯å¯¼è‡´ï¼Œæ˜¯å¾ˆéš¾è¢«å‘ç°çš„ï¼Œå¦‚æœæ˜¯å˜é‡å‘ç°å¼‚å¸¸å°±å¾ˆå®¹æ˜“å®šä½åˆ°é”™è¯¯ï¼Œæ‰€æœ‰æˆ‘ä»¬è¦å¼•å…¥ ActionTypes.js src/store/actionTypes.js 123export const CHANGE_INPUT_VALUE &#x3D;change_input_value &#39; ;export const ADD_TODO_ITEM &#x3D;add_todo_item&#39; ;export const DELETE_TODO_ITEM &#x3D;&#39;delete_todo_item&#39; ; index.js 12345678910111213import &#123;DELETE_TODO_ITEM&#125; = from &#x27;./store/actionTypes&#x27;...handleItemDelete(index) &#123; const action = &#123; type: DELETE_TODO_ITEM, //å¼•å…¥ index: index, &#125;; const bool = window.confirm(`ä½ ç¡®å®šåˆ é™¤ç¬¬$&#123;index&#125;ä¸ªæ•°å—?`); if (bool) &#123; store.dispatch(action); &#125; åŒæ—¶è¿˜è¦æ”¹å˜ reducer 123456import &#123;DELETE_TODO_ITEM&#125; = from &#x27;./actionTypes&#x27;if (action.type === DELETE_TODO_ITEM) &#123; newState.list.splice(action.index, 1); return newState; &#125; ä½¿ç”¨ actionCreator ç»Ÿä¸€ç®¡ç† action123456789101112131415import &#123; CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM &#125; from &#x27;./actionTypes&#x27;;export const getInputChange = value =&gt; (&#123; type: CHANGE_INPUT_VALUE, value,&#125;);export const addItem = () =&gt; (&#123; type: ADD_TODO_ITEM,&#125;);export const deleteItem = index =&gt; (&#123; type: DELETE_TODO_ITEM, index: index,&#125;); å¼•å…¥ index.js 1234567import &#123; getInputChange, addItem, deleteItem &#125; from &#x27;./store/actionCreators&#x27;; ... handleInputChange(e) &#123; const action = getInputChange(e.target.value); store.dispatch(action); //ä¼ ç»™store &#125;","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_ref","slug":"Reactç³»åˆ—_ref","date":"2018-12-11T16:00:00.000Z","updated":"2020-09-16T09:07:48.000Z","comments":true,"path":"2018/12/12/Reactç³»åˆ—_ref/","link":"","permalink":"http://mariogogogo.github.io/2018/12/12/React%E7%B3%BB%E5%88%97_ref/","excerpt":"åœ¨Reactä¸­æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§refï¼Œç”¨æ¥å¼•ç”¨Reactç»„ä»¶æˆ–Domå…ƒç´ çš„å®ä¾‹ï¼›å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨è¡¨å•å…ƒç´ å®šä¹‰refå±æ€§è·å–å…ƒç´ çš„å€¼ï¼›","text":"åœ¨Reactä¸­æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§refï¼Œç”¨æ¥å¼•ç”¨Reactç»„ä»¶æˆ–Domå…ƒç´ çš„å®ä¾‹ï¼›å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨è¡¨å•å…ƒç´ å®šä¹‰refå±æ€§è·å–å…ƒç´ çš„å€¼ï¼› ä¾‹å¦‚ï¼š 12345678910111213141516171819202122export default class Ref extends Component &#123; constructor(props) &#123; super(props); this.handleSubmit = this.handleSubmit.bind(this); &#125; handleSubmit(event) &#123; // é€šè¿‡this.inputè·å–valueå€¼; alert(&#x27;this title you submitted was&#x27; + this.input.value); event.preventDefault(); &#125; render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;label&gt; title: &lt;input type=&quot;text&quot; ref=&#123;input =&gt; (this.input = input)&#125; /&gt; &lt;/label&gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt; &lt;/form&gt; ); &#125;&#125; refçš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥å—å½“å‰å…ƒç´ ä½œä¸ºå‚æ•°ä¸Šé¢çš„ä¾‹å­ä¸­å¦‚æœæ˜¯éå—æ§ç»„ä»¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡defaultValueå±æ€§è®¾ç½®é»˜è®¤å€¼ï¼›æ¯”å¦‚ï¼š 123&lt;input type=&quot;text&quot; defaultValue=&quot;è¯·è¾“å…¥æœ‰æ•ˆå­—ç¬¦ğŸ˜&quot; ref=&#123;input =&gt; (this.input = input)&#125; /&gt; ä½†æ˜¯ æˆ‘ä»¬åŸºæœ¬ä¸Šå¾ˆå°‘é‚£ä¹ˆåšè¿™ç§æ–¹å¼ç ´åäº†Reactç»„ä»¶çŠ¶æ€ç®¡ç†çš„ä¸€è‡´æ€§ï¼Œä¸å»ºè®®å¤§å®¶ä½¿ç”¨ï¼› æ¥ä¸‹æ¥æˆ‘ä»¬å½’çº³å‡ ä¸ªä½¿ç”¨refçš„åœºæ™¯åœ¨Domä¸­ä½¿ç”¨refè·Ÿä¹‹å‰ä¾‹å­ç›¸ä¼¼ 123456789101112131415161718export default class Ref extends Component &#123; constructor(props) &#123; super(props); this.handleSubmit = this.handleSubmit.bind(this); &#125; componentDidMount = () =&gt; &#123; this.input.focus(); //è‡ªåŠ¨è·å–ç„¦ç‚¹ &#125;; render() &#123; return ( &lt;div&gt; &lt;input type=&quot;text&quot; ref=&#123;input =&gt; (this.input = input)&#125; /&gt; &lt;/div&gt; ); &#125;&#125; åœ¨ç»„ä»¶ä¸Šä½¿ç”¨refæ­¤æ—¶refçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼›è¿™æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶å¤–éƒ¨æ“ä½œç»„ä»¶çš„æ–¹å¼ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class A extends Component &#123; constructor(props) &#123; super(props); this.blur = this.blur.bind(this); &#125; componentDidMount = () =&gt; &#123; this.input.focus(); //è‡ªåŠ¨è·å–ç„¦ç‚¹ &#125;; //å¤±å»ç„¦ç‚¹ blur() &#123; this.input.blur(); alert(&#x27;æˆ‘å¤±å»ç„¦ç‚¹å‰çš„å€¼ï¼š&#x27; + this.input.value); &#125; render() &#123; return ( &lt;div&gt; &lt;input type=&quot;text&quot; ref=&#123;input =&gt; (this.input = input)&#125; /&gt; &lt;/div&gt; ); &#125;&#125;class B extends Component &#123; constructor(props) &#123; super(props); this.handleClick = this.handleClick.bind(this); &#125; handleClick() &#123; console.log(this.inputInstance); console.log(this.inputInstance.input.value); this.inputInstance.blur(); &#125; render() &#123; return ( &lt;div&gt; &lt;A ref=&#123;input =&gt; (this.inputInstance = input)&#125; /&gt; &lt;button onClick=&#123;this.handleClick&#125;&gt;å¤±å»ç„¦ç‚¹&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;export default B; é€šè¿‡ä¸Šè¿°ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºrefè·å–äº†Aç»„ä»¶çš„å®ä¾‹ï¼Œå¹¶æŠŠå®ƒå¤åˆ¶ç»™Bç»„ä»¶çš„inputInstanceå±æ€§ï¼Œç›´æ¥è°ƒç”¨Aç»„ä»¶ä¸­çš„æ–¹æ³• æ³¨æ„ï¼šåªèƒ½ä½¿ç”¨ç±»ç»„ä»¶å®šä¹‰refå±æ€§ï¼Œè€Œä¸èƒ½ä½¿ç”¨å‡½æ•°ç»„ä»¶å®šä¹‰ref çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶DomèŠ‚ç‚¹ï¼ˆæš‚æ—¶æœ‰ç‚¹éš¾ç†è§£æ…¢æ…¢æ¶ˆåŒ–ï¼‰åœ¨ä¸€äº›åœºæ™¯ä¸­æˆ‘ä»¬å¯èƒ½åœ¨çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æŸä¸ªå…ƒç´ ï¼Œä¾‹å­çˆ¶ç»„ä»¶æƒ³çŸ¥é“è¿™ä¸ªdomçš„å°ºå¯¸æˆ–è€…ä¿¡æ¯ï¼Œç›´æ¥ç”¨refæ˜¯æ— æ³•å®ç°çš„ï¼Œå› ä¸ºrefåªèƒ½è·å–å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œä¸èƒ½è·å–å­ç»„ä»¶ä¸­çš„æŸä¸ªDomå…ƒç´  12345678910111213141516171819202122function Children(props) &#123; //å­ç»„ä»¶ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„inputRefï¼Œä¸ºinputçš„refèµ‹å€¼ console.log(props.inputRef); return ( &lt;div&gt; è¿™é‡Œè¾“å…¥æ–‡å­—ï¼š &lt;input type=&quot;text&quot; ref=&#123;props.inputRef&#125; /&gt; &lt;/div&gt; );&#125;class Parent extends Component &#123; inputElement(el) &#123; console.log(el); &#125; render() &#123; return &lt;Children inputRef=&#123;el =&gt; (this.inputElement = el)&#125; /&gt;; &#125;&#125;export default Parent; refçš„å€¼æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ä¸€ä¸ªå›è°ƒå‡½æ•° å›è°ƒå‡½æ•°é€šè¿‡è‡ªå®šä¹‰å±æ€§ä¼ é€’ ä¾‹å­ä¸­çš„inputRef çˆ¶ç»„ä»¶çš„å›è°ƒå‡½æ•°ä¸­è·å–è¿™ä¸ªDomå…ƒç´  çˆ¶ç»„ä»¶çš„inputElementæŒ‡å‘çš„å­ç»„ä»¶çš„input å…ƒç´ ","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_é«˜é˜¶ç»„ä»¶","slug":"Reactç³»åˆ—_é«˜é˜¶ç»„ä»¶","date":"2018-12-11T16:00:00.000Z","updated":"2020-09-16T09:07:46.000Z","comments":true,"path":"2018/12/12/Reactç³»åˆ—_é«˜é˜¶ç»„ä»¶/","link":"","permalink":"http://mariogogogo.github.io/2018/12/12/React%E7%B3%BB%E5%88%97_%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/","excerpt":"é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶","text":"é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶çœ‹ä¸€å¼ å›¾ï¼š ä¸ºä»€ä¹ˆéœ€è¦é«˜é˜¶ç»„ä»¶ï¼Ÿå¤šä¸ªç»„ä»¶éƒ½éœ€è¦æŸä¸ªç›¸åŒçš„åŠŸèƒ½ï¼Œä½¿ç”¨é«˜é˜¶ç»„ä»¶å¯ä»¥å‡å°‘é‡å¤çš„å®ç° é«˜é˜¶ç»„ä»¶çš„åº”ç”¨ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ è¿”å›çš„æ–°ç»„ä»¶ç±»ç›´æ¥ç»§æ‰¿è‡ªReact.Componentç±»,æ–°ç»„ä»¶æ‰®æ¼”çš„è§’è‰²ä¼ å…¥å‚ï¼Œæ•°ç»„ä»¶çš„ä¸€ä¸ªä»£ç†,åœ¨æ–°ç»„ä»¶çš„renderå‡½æ•°ä¸­,å°†è¢«åŒ…è£¹ç»„ä»¶æ¸²æŸ“å‡ºæ¥,é™¤äº†é«˜é˜¶ç»„ä»¶è‡ªå·±è¦åšå¾—å·¥ä½œ,å…¶ä½™åŠŸèƒ½å…¨éƒ½è½¬æ‰‹ç»™äº†è¢«åŒ…è£¹çš„ç»„ä»¶ åˆ†ä¸ºï¼š æ“çºµProps æŠ½å–çŠ¶æ€ è®¿é—®ref åŒ…è£…ç»„ä»¶ 123456789101112131415161718192021222324252627import React, &#123; Component &#125; from &#x27;react&#x27;;import &#x27;../app.css&#x27;;function A(WrapperComponent) &#123; return class A extends Component &#123; render() &#123; // é€šè¿‡propsé«˜é˜¶ç»„ä»¶åˆ é™¤å±æ€§ const &#123; age, ...otherProps &#125; = this.props; return ( &lt;div className=&quot;container&quot;&gt; &lt;div className=&quot;header&quot;&gt; &lt;span&gt;æç¤º&lt;/span&gt; &lt;span&gt;X&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &#123;/* é«˜é˜¶ç»„ä»¶çš„ä¼ å…¥å‚æ•° */&#125; &lt;WrapperComponent sex=&#123;&#x27;ç”·&#x27;&#125; &#123;...otherProps&#125; /&gt; &lt;/div&gt; &lt;/div&gt; ); &#125; &#125;;&#125;export default A; ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ é‡‡ç”¨ç»§æ‰¿å…³è”ä½œä¸ºå‚æ•°çš„ç»„ä»¶å’Œè¿”å›çš„ç»„ä»¶,å‡å¦‚ä¼ å…¥çš„ç»„ä»¶å‚æ•°æ˜¯WrappedComponent ,é‚£ä¹ˆè¿”å›çš„ç»„ä»¶å°±ç›´æ¥ç»§æ‰¿è‡ªWrappedComponent 1234567891011121314151617import React from &#x27;react&#x27;;const modifyPropsHOC = WrappedComponent =&gt; class newComponent extends WrappedComponent &#123; render() &#123; const element = super.render(); const newStyle = &#123; color: element.type === &#x27;div&#x27; ? &#x27;red&#x27; : &#x27;green&#x27;, &#125;; console.log(element.type); const newProps = &#123; ...this.props, style: newStyle &#125;; return React.cloneElement(element, newProps, element.props.children); &#125; &#125;;export default modifyPropsHOC; DemoGitHubä¾‹å­","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"èŠèŠã€Œä¸Šä¼ ã€è¿™ä»¶äº‹æƒ…","slug":"èŠèŠã€Œä¸Šä¼ ã€è¿™ä»¶äº‹æƒ…","date":"2018-12-09T16:00:00.000Z","updated":"2020-09-16T09:07:07.000Z","comments":true,"path":"2018/12/10/èŠèŠã€Œä¸Šä¼ ã€è¿™ä»¶äº‹æƒ…/","link":"","permalink":"http://mariogogogo.github.io/2018/12/10/%E8%81%8A%E8%81%8A%E3%80%8C%E4%B8%8A%E4%BC%A0%E3%80%8D%E8%BF%99%E4%BB%B6%E4%BA%8B%E6%83%85/","excerpt":"å‰ç«¯è¦å®ç°ä¸Šä¼ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹æ³•è§¦å‘ï¼š é€šè¿‡input type=â€œfileâ€é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼› é€šè¿‡æ‹–æ‹½æ–¹å¼æŠŠæ–‡ä»¶æ‹–è¿‡æ¥ï¼› åœ¨ç¼–è¾‘æ¡†é‡Œé¢å¤åˆ¶é»è´´","text":"å‰ç«¯è¦å®ç°ä¸Šä¼ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹æ³•è§¦å‘ï¼š é€šè¿‡input type=â€œfileâ€é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼› é€šè¿‡æ‹–æ‹½æ–¹å¼æŠŠæ–‡ä»¶æ‹–è¿‡æ¥ï¼› åœ¨ç¼–è¾‘æ¡†é‡Œé¢å¤åˆ¶é»è´´ å…ˆæ¥è®²è®²ç¬¬ä¸€ç§å®ç°12345678&lt;h1&gt;ç‚¹å‡»é€‰æ‹©&lt;/h1&gt;&lt;form&gt;&lt;input type=&quot;file&quot; id=&quot;file-input&quot; name=&quot;filecontent&quot; /&gt;&lt;/form&gt;&lt;h1&gt;æ‹–æ‹½&lt;/h1&gt;&lt;div class=&quot;img-container&quot;&gt;drop you image here&lt;/div&gt;&lt;h1&gt;é»è´´&lt;/h1&gt;&lt;div class=&quot;img-paste&quot; contenteditable=&quot;true&quot;&gt;hello,paste you image here&lt;/div&gt; ç”¨FormDataæ¥è·å–æ•´ä¸ªè¡¨å•çš„å†…å®¹ï¼›1234567$(&#x27;#file-input&#x27;).on(&#x27;change&#x27;, function() &#123; console.log(`file name is + $&#123;this.value&#125;`); console.log(this.form); let formData = new FormData(this.form); formData.append(&#x27;filename&#x27;, this.value); console.log(formData);&#125;); ä½¿ç”¨formData è·å–çš„this.valueæ˜¯ä¸€ä¸ªå‡çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨æ— æ³•è·å–æ–‡ä»¶çš„çœŸå®å­˜åœ¨åœ°å€ï¼ŒformDataä¹Ÿæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½†å†…å®¹ä¸æ˜¯ç©ºçš„åªæ˜¯å¯¹æˆ‘ä»¬æ¥è¯´çœ‹ä¸è§è€Œå·²ï¼Œåªèƒ½é€šè¿‡appendå»æ·»åŠ å­—æ®µ ä½¿ç”¨FileReader12345678910111213141516$(&#x27;#file-input&#x27;).on(&#x27;change&#x27;, function() &#123;let fileReader = new FileReader();let fileType = this.files[0].type;console.log(fileType);fileReader.onload = function() &#123; if (/^image/.test(fileType)) &#123; $(`&lt;img src=&quot;$&#123;this.result&#125;&quot; /&gt;`).appendTo(&#x27;body&#x27;); &#125;&#125;;console.log(this.files[0]);//æŒ‰base64æ–¹å¼è¯»å–fileReader.readAsDataURL(this.files[0]);//äºŒè¿›åˆ¶æ–¹å¼è¯»å– è¯»å–ç»“æœç›´æ¥è½¬æˆæ•°ç»„fileReader.readAsArrayBuffer(this.files[0]);&#125;); é€šè¿‡å®ä¾‹åŒ–fileReaderå¯ä»¥çœ‹è§ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œæ–‡ä»¶åï¼Œæ–‡ä»¶çš„å¤§å°ï¼Œæ–‡ä»¶çš„ç±»å‹ æ‹–æ‹½å›¾ç‰‡è·å–å›¾ç‰‡è·¯å¾„123456789101112131415$(&#x27;.img-container&#x27;).on(&#x27;dragover&#x27;, function(event) &#123; event.preventDefault();&#125;).on(&#x27;drop&#x27;, function(event) &#123; event.stopPropagation(); event.preventDefault(); let fileReader = new FileReader(); let file = event.originalEvent.dataTransfer.files[0]; fileReader.readAsDataURL(file); let formData = new FormData(); console.log(file); formData.append(&#x27;filecontent&#x27;, file); console.log(formData); //è¯»ä¸å‡ºçš„&#125;); é€šè¿‡å¤åˆ¶æ¥è·å–å›¾ç‰‡è·¯å¾„1234567$(&#x27;.img-paste&#x27;).on(&#x27;paste&#x27;, function(event) &#123;event.stopPropagation();event.preventDefault();//é»è´´çš„æ•°æ®åœ¨event.clipboardData.filesä¸­let file = event.originalEvent.clipboardData.files[0];console.log(file);&#125;); ç»§ç»­å†™ä¸Šä¼ ä»€ä¹ˆæ˜¯blobï¼Ÿå¦‚ä½•è¯»å–blob? å¤šæ–‡ä»¶ä¸Šä¼ input å±æ€§ä¸­å¢åŠ  mulitple å¦‚ä½•å®ç°æ–­ç‚¹ç»­ä¼ ï¼Ÿæœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨blobåˆ†å‰²å¤§æ–‡ä»¶ä¸Šä¼ æ¯”å¦‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"ç§»åŠ¨ç«¯çš„é‚£äº›äº‹","slug":"ç§»åŠ¨ç«¯çš„é‚£äº›äº‹","date":"2018-11-30T16:00:00.000Z","updated":"2020-09-16T09:07:15.000Z","comments":true,"path":"2018/12/01/ç§»åŠ¨ç«¯çš„é‚£äº›äº‹/","link":"","permalink":"http://mariogogogo.github.io/2018/12/01/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/","excerpt":"åœ¨ç°å¦‚ä»Šçš„å‰ç«¯å¼€å‘ä¸­ç§»åŠ¨ç«¯å¼€å‘çš„ä»½é¢å·²å¤§å¤§è¶…è¿‡äº†PCç«¯å¼€å‘ï¼ŒæŒæ¡ç§»åŠ¨ç«¯å¼€å‘æŠ€å·§å¯¹å‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´çœŸçš„éå¸¸æœ‰å¿…è¦","text":"åœ¨ç°å¦‚ä»Šçš„å‰ç«¯å¼€å‘ä¸­ç§»åŠ¨ç«¯å¼€å‘çš„ä»½é¢å·²å¤§å¤§è¶…è¿‡äº†PCç«¯å¼€å‘ï¼ŒæŒæ¡ç§»åŠ¨ç«¯å¼€å‘æŠ€å·§å¯¹å‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´çœŸçš„éå¸¸æœ‰å¿…è¦ viewport è§†å£(å¯è§†åŒºçª—å£) é»˜è®¤ä¸è®¾ç½®viewportä¸€èˆ¬å¯è§†åŒºå®½åº¦åœ¨ç§»åŠ¨ç«¯æ˜¯980 width å¯è§†åŒºçš„å®½åº¦ (number||device-width) user-scalable æ˜¯å¦å…è®¸ç”¨æˆ·ç¼©æ”¾ (yes||no) iOS10æ— æ•ˆ (æˆ‘ä»¬æ”¾åœ¨äº‹ä»¶ç« èŠ‚è§£å†³) initial-scale åˆå§‹ç¼©æ”¾æ¯”ä¾‹ minimum-scale æœ€å°ç¼©æ”¾æ¯”ä¾‹ maximum-scale æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ 12345678910111213var pixRatio = 1 / window.devicePixelRatio;console.log(&#x27;åƒç´ æ¯”ï¼š&#x27; + pixRatio, window.devicePixelRatio);var html = document.documentElement;document.write( &#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=&#x27; + pixRatio + &#x27;,minimum-scale=&#x27; + pixRatio + &#x27;,maximum-scale=&#x27; + pixRatio + &#x27;&quot;&gt;&#x27;);html.style.fontSize = html.clientWidth / 25 + &#x27;px&#x27;; åƒç´ æ¯”æŠŠä¸€ä¸ªåƒç´  æ”¾å¤§è‡³ Nä¸ªåƒç´ å»æ˜¾ç¤º è®¾è®¡å›¾æœ€å°‘750 å…¶ä»–å¦å¤–çš„è®¾ç½® 123&lt;a href=&quot;tel:18888888888&quot;&gt;è¯·æ‹¨æ‰“ç”µè¯18888888888&lt;/a&gt;&lt;a href=&quot;mailto:motao@motao.com&quot;&gt;è¯·å‘é€é‚®ä»¶&lt;/a&gt; æŒ‰é’®åœ†è§’çš„æ¸…é™¤1234567891011a, input, button&#123; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&#125;input, button &#123; -webkit-appearance: none; border-radius: 0;&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Reactç³»åˆ—_ç”Ÿå‘½å‘¨æœŸ","slug":"Reactç³»åˆ—_ç”Ÿå‘½å‘¨æœŸ","date":"2018-11-15T16:00:00.000Z","updated":"2020-09-16T09:07:46.000Z","comments":true,"path":"2018/11/16/Reactç³»åˆ—_ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"http://mariogogogo.github.io/2018/11/16/React%E7%B3%BB%E5%88%97_%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","excerpt":"React ç”Ÿå‘½å‘¨æœŸä¼šç»å†ä¸‰ä¸ªè¿‡ç¨‹ï¼Ÿ æŒ‚è½½è¿‡ç¨‹ è¿è¡Œæ—¶è¿‡ç¨‹ å¸è½½è¿‡ç¨‹ é”™è¯¯å¤„ç† errorHandingï¼ˆåªå‘ç”Ÿåœ¨ render é˜¶æ®µï¼‰","text":"React ç”Ÿå‘½å‘¨æœŸä¼šç»å†ä¸‰ä¸ªè¿‡ç¨‹ï¼Ÿ æŒ‚è½½è¿‡ç¨‹ è¿è¡Œæ—¶è¿‡ç¨‹ å¸è½½è¿‡ç¨‹ é”™è¯¯å¤„ç† errorHandingï¼ˆåªå‘ç”Ÿåœ¨ render é˜¶æ®µï¼‰ å…ˆæ¥çœ‹ä¸‹è£…è½½è¿‡ç¨‹ constructor componentWillMont render componentDidMont æ³¨æ„ï¼š render è°ƒç”¨åï¼ŒcomponentDidMont å‡½æ•°ä¸ä¼šé©¬ä¸Šè¢«è°ƒç”¨ï¼Œrender å‡½æ•°è¿”å›çš„ä¸œè¥¿(jsx è¡¨ç¤ºçš„å¯¹è±¡)å·²ç»åœ¨æ¸²æŸ“ï¼Œç»„ä»¶å·²ç»è¢«è£…è½½åˆ°äº† Dom æ ‘ä¸Š å¦‚æœæœ‰ä¸‰ä¸ªç»„ä»¶ A,B,C è¦ä¸‰ä¸ªç»„ä»¶å…¨éƒ¨ render ä»¥åæ‰èƒ½è°ƒç”¨ componentDidMont æ–¹æ³•ï¼Œå› ä¸º react è‚¯å®šè¦æŠŠæ‰€æœ‰ç»„ä»¶å…¨éƒ¨è¿”å›ç»“æœç»¼åˆèµ·æ¥æ‰çŸ¥é“å¦‚ä½•æ¸²æŸ“ cwm ä¸ cdm è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼šcwm å¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–æµè§ˆå™¨ç«¯è°ƒç”¨ï¼ŒcomponentDidMont åªèƒ½åœ¨æµè§ˆå™¨ç«¯è°ƒç”¨ï¼› æ›´æ–°è¿‡æœŸ componentWillReceiveProps shouldComponentUpdate componentWillUpdate render componentDidUpdate å¦‚æœ 1234shouldComponentUpdate () &#123; console.log(&#x27;List+shouldComponentUpdate&#x27;); return false &#125; componentWillReceivePropsè¡¨ç¤ºè¿™ä¸ªåªåœ¨ props å¼•èµ·çš„ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ‰ä¼šè¢«è°ƒç”¨ï¼Œstate çš„æ›´æ–°ä¸ä¼šè¢«è§¦å‘ï¼Œå‚æ•° nextProps æ˜¯çˆ¶ç»„ä»¶ä¼ é€’åˆ°å½“å‰ç»„ä»¶çš„æ–° propsï¼Œéœ€è¦æ¯”è¾ƒ nextprops ä¸å½“å‰ props æ˜¯å¦ç›¸ç­‰ï¼Œæ‰å†³å®šæ˜¯å¦æ‰§è¡Œ props å˜åŒ–åçš„é€»è¾‘ï¼Œæ¯”å¦‚æ›´æ–°æ–°çš„ props è°ƒç”¨ this.setState è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ æ³¨æ„ï¼šåœ¨æ­¤æ–¹æ³•ä¸­è°ƒç”¨ renderï¼Œåªæœ‰åœ¨ç»„ä»¶ render åŠå…¶åçš„æ–¹æ³•ä¸­ï¼Œthis.state æ‰æŒ‡å‘æ›´æ–°åçš„ stateï¼Œåœ¨ render ä¹‹å‰çš„æ–¹æ³• shouldComponentUpdateï¼ŒcomponentWillUpdate ä¸­ï¼Œthis.state ä¾ç„¶æŒ‡å‘çš„æ›´æ–°å‰çš„ state å¤§éƒ¨åˆ†æƒ…å†µä¸‹ componentWillReceiveProps ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯æ²¡ç”¨çš„ï¼Œå³å¯ä»¥ç•¥å»ä¸å†™ï¼Œ ä½†æ˜¯åœ¨ constructor å‡½æ•°ä¸­åˆå§‹åŒ–äº†æŸä¸ª stateï¼Œå¿…é¡»ç”¨ componentWillReceiveProps æ¥æ›´æ–° stateï¼Œä¸å¯çœå»ï¼Œå¦åˆ™ render ä¸­çš„ state å°†å¾—ä¸åˆ°æ›´æ–°ã€‚åŒæ—¶å¦‚æœæ‚¨æƒ³åœ¨å­ç»„ä»¶ç›‘å¬ watch å€¼å˜åŒ–åšå¤„ç†ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ° componentWillReceiveProps ä½¿ç”¨ componentWillReceiveProps çš„æ—¶å€™ï¼Œä¸è¦å»å‘ä¸Šåˆ†å‘ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶çš„ç›¸å…³ setState æ–¹æ³•ï¼Œå¦åˆ™ä¼šæˆä¸ºæ­»å¾ªç¯ shouldComponentUpdateè¡¨ç¤ºæ˜¯å¦ç»§ç»­æ‰§è¡Œæ›´æ–°çš„è¿‡ç¨‹ï¼Œå½“è¿”å› trueï¼ˆé»˜è®¤è¿”å›å€¼ï¼‰ç»„ä»¶ä¼šç»§ç»­æ›´æ–°ï¼Œå½“è¿”å› false åˆ™ç»„ä»¶æ›´æ–°åœæ­¢ï¼Œåç»­çš„ cwillupdate å’Œ render å’Œ cdidupdate éƒ½ä¸ä¼šè¢«è°ƒç”¨ï¼Œå‚æ•° nextPropsã€‚nextState ä¸ç»„ä»¶å½“å‰çš„ props å’Œ state æ¯”è¾ƒï¼Œå‡å°‘ç»„ä»¶çš„æ¸²æŸ“ï¼Œä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½,ä½†ä¸€èˆ¬ä¸å»ºè®®è¿™ä¹ˆåšï¼šåŸå› æ˜¯ ç»„ä»¶åœ¨ render ä¸­è¿˜æ˜¯ä¼š diff æ¯”è¾ƒç»„ä»¶ä¹‹é—´çš„ä¸åŒ componentWillUpdateè¡¨ç¤ºåœ¨ render è°ƒç”¨å‰æ‰§è¡Œï¼Œå¯ä»¥ä½œä¸ºç»„ä»¶æ›´æ–°å‘ç”Ÿå‰æ‰§è¡ŒæŸäº›å·¥ä½œçš„åœ°æ–¹ï¼Œï¼ˆå¾ˆå°‘ç”¨åˆ°ï¼‰ componentDidUpdateè¡¨ç¤ºç»„ä»¶æ›´æ–°åè¢«è°ƒç”¨ï¼Œæœ‰ 2 ä¸ªå‚æ•° prevProps preState è¡¨ç¤ºæ›´æ–°å‰çš„çŠ¶æ€å€¼ï¼Œå¯ä»¥ç”¨æ¥æ“ä½œæ›´æ–°åçš„ Dom åœ°æ–¹ï¼Œ å¸è½½è¿‡æœŸcomponentWillUnmountåœ¨ cwu ä¸­ç”¨é react æ–¹æ³•åˆ›é€ çš„ dom å…ƒç´ ï¼Œå¦‚æœæ’’æ‰‹ä¸ç®¡çš„è¯ï¼Œå¾ˆå¯èƒ½é€ æˆå†…å­˜æ³„éœ²ï¼Œå¿…é¡»åœ¨ cwu ä¸­æŠŠè¿™äº› dom å…ƒç´ æ¸…ç†æ‰ï¼›æ¯”å¦‚æ¸…é™¤ä¸€äº›ä¸å¿…è¦çš„å®šæ—¶å™¨ï¼Œæ¸…é™¤ componentWillMont æ‰‹åŠ¨åˆ›å»ºçš„ Dom å…ƒç´ é¿å…å†…å­˜æ³„éœ² æ³¨æ„ï¼šåªæœ‰ç±»ç»„ä»¶æ‰æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•° ç”Ÿå‘½å‘¨æœŸ è°ƒç”¨æ¬¡æ•° getDefaultProps è°ƒç”¨ 1 æ¬¡ getInitialState è°ƒç”¨ 1 æ¬¡ componentWillMount è°ƒç”¨ 1 æ¬¡ render è°ƒç”¨&gt;=1 æ¬¡ componentDidMount ä»…å®¢æˆ·ç«¯ï¼Œè°ƒç”¨ 1 æ¬¡ componentWillReceiveProps è°ƒç”¨&gt;=0 æ¬¡ ShouldComponentUpdate è°ƒç”¨&gt;=0 æ¬¡ componentWillUpdate è°ƒç”¨&gt;=0 æ¬¡ render è°ƒç”¨&gt;=1 æ¬¡ componentDidUpdate è°ƒç”¨&gt;=0 æ¬¡ componentWillUnmount è°ƒç”¨ 1 æ¬¡ æ›´æ–° react16.3 ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸreact16.3 æ–°å¢äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š getDerivedStateFromProps getSnapshotBeforeUpdate åŒæ—¶ FB å£°æ˜åœ¨ react17 å°†åˆ é™¤ï¼š componentWillMountã€ componentWillReceivePropsã€ componentWillUpdate åœ¨ 16.3 çš„ç‰ˆæœ¬ä¸­å°†ä¿ç•™è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œå¹¶æ·»åŠ äº†åˆ«åï¼š UNSAFE_componentWillMount UNSAFE_componentWillReceiveProps UNSAFE_componentWillUpdate åœ¨æ­¤æˆ‘ä»¬ä¸»è¦ä»‹ç» getDerivedStateFromProps getSnapshotBeforeUpdate getDerivedStateFromProps(nextProps, prevState)ï¼šä» props æ´¾ç”Ÿå‡º state æ‰§è¡Œæ¬¡æ•°ï¼šå¤šæ¬¡ è§¦å‘æ¡ä»¶ï¼šç»„ä»¶å®ä¾‹åŒ–åŠæ¥æ”¶æ–° props åè°ƒç”¨ æ›¿ä»£ï¼šæ›¿ä»£åŸæ¥çš„ componentWillReceivePropsï¼Œå¹¶ä¸”åŠ è½½ç¬¬ä¸€æ¬¡æ—¶ä¹Ÿè°ƒç”¨åˆå§‹åŒ–çš„æ—¶å€™ 123456789101112class todoList extends Component &#123; constructor(props)&#123; console.log(&#x27;constructor&#x27;); super(props) this.state=&#123;&#125; &#125; static getDerivedStateFromProps (props, state)&#123; console.log(&#x27;getDerivedStateFromProps&#x27;); console.log(props); console.log(state); return null; &#125; ä¸ºä»€ä¹ˆè¦ç”¨staticï¼Ÿstatic æ˜¯ ES6 çš„å†™æ³•ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¸º static æ—¶ï¼Œå°±æ„å‘³ç€æ— æ³•é€šè¿‡ this è°ƒç”¨æˆ‘ä»¬åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼ˆåŸç†å’Œ js ä¸­åŸå‹é“¾ç»§æ‰¿ç›¸å…³ï¼Œå…·ä½“æˆ‘å°±ä¸è¯´äº†ï¼Œå¯è‡ªè¡Œæœç´¢ï¼‰ã€‚ ä¸è¶³ä¹‹å¤„ï¼šåœ¨getDerivedStateFromPropsä¸­ï¼Œåœ¨æ¡ä»¶é™åˆ¶ä¸‹(if/else)è°ƒç”¨ setStateã€‚å¦‚æœä¸è®¾ä»»ä½•æ¡ä»¶ setStateï¼Œè¿™ä¸ªå‡½æ•°è¶…é«˜çš„è°ƒç”¨é¢‘ç‡ï¼Œä¸åœçš„ setStateï¼Œä¼šå¯¼è‡´é¢‘ç¹çš„é‡ç»˜ï¼Œæ—¢æœ‰å¯èƒ½äº§ç”Ÿæ€§èƒ½é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå®¹æ˜“äº§ç”Ÿ bugã€‚ getSnapshotBeforeUpdate(nextProps, prevState)ï¼šä» props æ´¾ç”Ÿå‡º state æ‰§è¡Œæ¬¡æ•°ï¼šå¤šæ¬¡ è§¦å‘æ¡ä»¶ï¼šç»„ä»¶ render æ—¶è°ƒç”¨ è¿”å›å€¼ï¼šè¿”å›å€¼ä¼ é€’ç»™ componentDidUpdate(prevProps, prevState, snapshot) æ›¿ä»£ï¼šæ›¿ä»£åŸæ¥çš„ componentWillupdate 123456getSnapshotBeforeUpdate (prevProps, prevState) &#123; console.log(&#x27;getSnapshotBeforeUpdate&#x27;); console.log(prevProps); console.log(prevState); return null &#125; getSnapshotBeforeUpdate æ˜¯åœ¨ render ä¹‹åè§¦å‘ï¼Œå®ƒçš„è¦ç‚¹åœ¨äºè§¦å‘æ—¶ï¼ŒDom è¿˜æ²¡æœ‰æ›´æ–°ï¼Œå¼€å‘è€…å¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œè¿”å›å€¼ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™æ¥ä¸‹æ¥å°†è¦è§¦å‘çš„ componentDidUpdateã€‚ ä½œä¸ºä¸€ä¸ªä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒgetSnapshotBeforeUpdate React 16 ç»™çš„å»ºè®®å½“ç„¶è¿˜æ˜¯ï¼šèƒ½ä¸ç”¨å°±å°½é‡ä¸è¦ç”¨ã€‚ - - ï¼ï¼ï¼ æœ€åå°ç»“ï¼šåˆ°ç›®å‰ä¸ºæ­¢(React 16.4)ï¼ŒReact çš„æ¸²æŸ“æœºåˆ¶éµå¾ªåŒæ­¥æ¸²æŸ“: é¦–æ¬¡æ¸²æŸ“: willMount &gt; render &gt; didMountï¼Œ props æ›´æ–°æ—¶: receiveProps &gt; shouldUpdate &gt; willUpdate &gt; render &gt; didUpdate state æ›´æ–°æ—¶: shouldUpdate &gt; willUpdate &gt; render &gt; didUpdate å¸è½½æ—¶: willUnmount å‚è€ƒReact v15 åˆ° v16.3, v16.4 æ–°ç”Ÿå‘½å‘¨æœŸæ€»ç»“ä»¥åŠä½¿ç”¨åœºæ™¯ React ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºè¯¦è§£","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_propä¸state","slug":"Reactç³»åˆ—_propä¸state","date":"2018-11-14T16:00:00.000Z","updated":"2020-09-16T09:07:47.000Z","comments":true,"path":"2018/11/15/Reactç³»åˆ—_propä¸state/","link":"","permalink":"http://mariogogogo.github.io/2018/11/15/React%E7%B3%BB%E5%88%97_prop%E4%B8%8Estate/","excerpt":"ä»€ä¹ˆæ˜¯Propï¼Ÿåœ¨Reactä¸­ï¼Œä»å¤–éƒ¨ä¼ é€’ç»™ç»„ä»¶çš„æ•°æ®ï¼Œä¸€ä¸ªreactç»„ä»¶é€šè¿‡å®šä¹‰è‡ªå·±èƒ½æ¥å—çš„propå°±å®šä¹‰äº†è‡ªå·±çš„å¯¹å¤–å…¬å…±æ¥å£ï¼›","text":"ä»€ä¹ˆæ˜¯Propï¼Ÿåœ¨Reactä¸­ï¼Œä»å¤–éƒ¨ä¼ é€’ç»™ç»„ä»¶çš„æ•°æ®ï¼Œä¸€ä¸ªreactç»„ä»¶é€šè¿‡å®šä¹‰è‡ªå·±èƒ½æ¥å—çš„propå°±å®šä¹‰äº†è‡ªå·±çš„å¯¹å¤–å…¬å…±æ¥å£ï¼› propå¾ˆåƒHTMLä¸­çš„å±æ€§ï¼›å½“propç±»å‹ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¿…é¡»ç”¨èŠ±æ‹¬å·&#123;&#125;æŠŠpropåŒ…ä½ï¼Œstyleçš„å€¼è¦2å±‚èŠ±æ‹¬å·ï¼Œå¤–å±‚èŠ±æ‹¬å·ä»£è¡¨jsxè¯­æ³•ï¼Œå†…å±‚èŠ±æ‹¬å·ä»£è¡¨ä¸€ä¸ªå¯¹è±¡å¸¸é‡ ä¼ å€¼12345678910class A extends Component&#123; render()&#123; return ( &lt;div&gt; &lt;Counter caption=&quot;First&quot; initValue=&#123;0&#125; /&gt; &lt;/div&gt; ) &#125;&#125; è¯»å–1234567891011121314151617class Counter extends Component&#123; constructor(props)&#123; super(props) &#125; this.state=&#123; count:props.initValue || 0 &#125; render()&#123; const &#123;caption&#125; = this.props; //ES6è§£æ„èµ‹å€¼ renturn( ...... ) &#125;&#125; æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰super(props)æ˜¯ä¸èƒ½ä½¿ç”¨this.propsèµ‹å€¼çš„ï¼Œå› ä¸ºç±»å®ä¾‹æ— æ³•è®¿é—®çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„props ä»€ä¹ˆæ˜¯stateï¼Ÿstateæ˜¯ç»„ä»¶å†…éƒ¨çŠ¶æ€æ¯”å¦‚ï¼š 123this.state=&#123; count:props.initValue || 0 &#125; å¯ä»¥ä½¿ç”¨defaultPropsæ¥åˆå§‹åŒ–å†…éƒ¨çŠ¶æ€ 1234Counter.defaultProps=&#123; initValue:0&#125; è¯»å–å’Œæ›´æ–°å†…éƒ¨çŠ¶æ€123456let newCount = this.state.count;this.setstate(&#123; count:newCount,&#125;) æ³¨æ„setstateæ˜¯ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œåé¢å¯ä»¥è·Ÿä¸€ä¸ªå›è°ƒå‡½æ•°æ¯”å¦‚: 12345678let newCount = this.state.count;this.setstate(&#123; count:newCount,&#125;,function()&#123; //è¯·æ±‚æ”¹å˜æ•°æ®&#125;) propsä¸reactçš„ç®€å•å¯¹æ¯” propå®šä¹‰å¤–éƒ¨æ¥å£ï¼Œstateæ˜¯è®°å½•å†…éƒ¨çŠ¶æ€ï¼› propçš„èµ‹å€¼åœ¨å¤–éƒ¨ä¸–ç•Œä½¿ç”¨ç»„ä»¶æ—¶ï¼Œstateçš„èµ‹å€¼åœ¨ç»„ä»¶å†…éƒ¨ï¼› ç»„ä»¶ä¸åº”è¯¥æ”¹å˜propçš„å€¼ï¼Œè€Œstateå­˜åœ¨çš„ç›®çš„æ˜¯è®©ç»„ä»¶æ¥æ”¹å˜ï¼›","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"Reactç³»åˆ—_JSX","slug":"Reactç³»åˆ—_JSX","date":"2018-11-13T16:00:00.000Z","updated":"2020-09-16T09:07:47.000Z","comments":true,"path":"2018/11/14/Reactç³»åˆ—_JSX/","link":"","permalink":"http://mariogogogo.github.io/2018/11/14/React%E7%B3%BB%E5%88%97_JSX/","excerpt":"ä»€ä¹ˆæ˜¯JSX?12const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;;","text":"ä»€ä¹ˆæ˜¯JSX?12const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;; jsxä»£ç çœ‹èµ·æ¥å’ŒHTMLä»£ç ä¸€æ¨¡ä¸€æ ·,ä½†2è€…æœ‰ä¸åŒä¹‹å¤„ jsxå…ƒç´ ä¸å±€é™htmlå…ƒç´  å¯ä»¥ä»»ä½•ä¸€ä¸ªreactç»„ä»¶ Reactåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯htmlè¿˜æ˜¯reactç»„ä»¶çœ‹ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯å¦å¤§å†™ JSXè¯­å¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªè¿ç”¨HTMLæ ‡ç­¾ç»“æ„å´å®ç°äº†javascriptè¯­æ³•çš„å¯¹è±¡ï¼Œä¸€å¥è¯ï¼Œç®€ç›´é£èµ· jsxç”¨æ³•ï¼šåœ¨JSXä¸­å¯ä»¥åŠ å…¥è¡¨è¾¾å¼ 1234567891011121314151617181920const use = &quot;abc&quot;;const user = &#123; firstName: &#x27;tm7&#x27;, lastName: &#x27;jxy&#x27;&#125;;function formatName(user) &#123; return user.firstName + &#x27; &#x27; + user.lastName;&#125;const t1 = 1, t2 = 2;const a = &lt;div&gt;&#123;&#x27;abc&#x27;&#125;&lt;/div&gt;;const a = &lt;div&gt;&#123;use&#125;&lt;/div&gt;;const b = &lt;div&gt;&#123;user.firstName&#125;&lt;/div&gt;;const c = &lt;div&gt;&#123;formatName(user)&#125;&lt;/div&gt;;const d = &lt;div&gt;&#123;1+1+1&#125;&lt;/div&gt;;const e = &lt;div&gt;&#123;t1 &amp;&amp; t2&#125;&lt;/div&gt;;const f = &lt;div&gt;&#123;t1 &gt; t2&#125;&lt;/div&gt;;const g = &lt;div&gt;&#123;t1 &lt; t2 ? &#x27;abc&#x27;:&#x27;ccc&#x27;&#125;&lt;/div&gt;;const h = &lt;div&gt;&#123;function()&#123;return &#x27;abc&#x27;;&#125;()&#125;&lt;/div&gt;;const i = &lt;div&gt;&#123;&lt;div&gt;iii&lt;/div&gt;&#125;&lt;/div&gt;; å¯ä»¥åŠ å…¥è‡ªå®šä¹‰å±æ€§ä¾‹å¦‚ 12const el = &lt;div data-fff=&quot;abc&quot;&gt;&lt;/div&gt;; //å¿…é¡»åŠ data- 12const el = &lt;div className=&quot;abc&quot;&gt;&lt;/div&gt;;const el = &lt;div className=&#123;&#x27;abc&#x27;&#125;&gt;&lt;/div&gt;; æœ€åçœ‹ä¸€ä¸‹JSX æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç»è¿‡ babel è½¬æ¢ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å‘ç°å®é™…ä¸Šè½¬åŒ–æˆ React.createElement() çš„å½¢å¼ï¼šæ¯ä¸€ä¸ªå‚æ•°åˆ†åˆ«å¯¹åº”[æ ‡ç­¾åï¼Œå±æ€§ï¼Œå­©å­èŠ‚ç‚¹]123456789101112131415161718192021const el = ( &lt;h1 className=&quot;greeting&quot;&gt; Hello, &lt;span className=&quot;text&quot;&gt; world!&lt;/span&gt; &lt;/h1&gt;);//==========babelç¼–è¯‘å==============&quot;use strict&quot;;var el = React.createElement( &quot;h1&quot;, &#123; className: &quot;greeting&quot; &#125;, &quot;Hello,&quot;, React.createElement( &quot;span&quot;, &#123; className: &quot;text&quot; &#125;, &quot; world!&quot; ));å› æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šJSX è¯­æ³•ç³–ç»è¿‡ Babel ç¼–è¯‘åè½¬æ¢æˆä¸€ç§å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å³æ‰€è°“çš„è™šæ‹Ÿ DOMï¼Œä½¿ç”¨è™šæ‹Ÿ DOM èƒ½è®©é¡µé¢è¿›è¡Œæ›´ä¸ºé«˜æ•ˆçš„æ¸²æŸ“ã€‚ è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOMå°†è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOM æ˜¯ä½¿ç”¨ ReactDOM.render å®ç°çš„ 1234ReactDOM.render( element, // ä¸Šæ–‡çš„ elementï¼Œå³è™šæ‹Ÿ dom document.getElementById(&#x27;root&#x27;)) æ€»ç»“JSX ç»è¿‡ babel ç¼–è¯‘ä¸º React.createElement() çš„å½¢å¼ï¼Œå…¶è¿”å›ç»“æœå°±æ˜¯ Virtual DOMï¼Œæœ€åé€šè¿‡ ReactDOM.render() å°† Virtual DOM è½¬åŒ–ä¸ºçœŸå®çš„ DOM å±•ç°åœ¨ç•Œé¢ä¸Šã€‚æµç¨‹å›¾å¦‚ä¸‹ï¼š â€¦..æš‚æ—¶æƒ³åˆ°è¿™å‡ ç‚¹ä¸å…¨é¢,è¿˜ä¼šä¸æ–­è¡¥å……","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ç®€å•å®ç°ä¸‹Promiseçš„åŸç†","slug":"ç®€å•å®ç°ä¸‹Promiseçš„åŸç†","date":"2018-11-13T04:39:04.000Z","updated":"2020-09-16T09:07:05.000Z","comments":true,"path":"2018/11/13/ç®€å•å®ç°ä¸‹Promiseçš„åŸç†/","link":"","permalink":"http://mariogogogo.github.io/2018/11/13/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%8BPromise%E7%9A%84%E5%8E%9F%E7%90%86/","excerpt":"æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚","text":"æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ promiseçš„ç®€å•ä½¿ç”¨12345678var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log(&#x27;æ‰§è¡Œå®Œæˆ&#x27;); resolve(&#x27;éšä¾¿ä»€ä¹ˆæ•°æ®&#x27;); &#125;, 2000);&#125;); ä¸€æ­¥ä¸€æ­¥å®ç°æ•ˆæœ12345678910111213141516171819202122232425262728293031323334353637;(function() &#123; let status = &#123; pending:0, fulfilled:1, rejected:2 &#125; class CustomePromise&#123; //æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥ constructor(func)&#123; this._status = status.pending; this._handler(func); &#125; //æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•° _handler(func)&#123; func((value)=&gt;&#123; console.log(value); &#125;,(error)=&gt;&#123; console.log(error); &#125;) &#125; //æ‰§è¡ŒæˆåŠŸ _resolve()&#123; &#125; //æ‰§è¡Œå¤±è´¥ _reject()&#123; &#125; &#125; //æŒ‚è½½åˆ°windows window.CustomePromise = CustomePromise;&#125;)(); å¯¹æ‰§è¡Œæ¬¡æ•°çš„é™åˆ¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445(function() &#123; let status = &#123; pending: 0, fulfilled: 1, rejected: 2, &#125;; class CustomePromise &#123; //æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥ constructor(func) &#123; this._status = status.pending; this._handler(func); &#125; //æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•° _handler(func) &#123; let done = false; func( value =&gt; &#123; if (done) true; // åªæ‰§è¡Œä¸€æ¬¡ done = true; console.log(value); this._resolve(value); &#125;, () =&gt; &#123; if (done) true; done = true; this._reject(value); &#125; ); &#125; //æˆåŠŸ _resolve(value) &#123; this._status = status.fulfilled; &#125; //å¤±è´¥ _reject() &#123; this._status = status.rejected; &#125; &#125; //æŒ‚è½½åˆ°windows window.CustomePromise = CustomePromise;&#125;)(); æ”¶é›†å¤±è´¥æˆ–æˆåŠŸçš„æ‰§è¡Œå‡½æ•°å¹¶æ‰§è¡Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283(function() &#123; ....... class CustomePromise &#123; //æ¥å—ä¸€ä¸ªå‡½æ•°è¿›æ¥ constructor(func) &#123; //åˆå§‹çŠ¶æ€ this._status = status.pending; this._handler(func); // æ”¶é›†æˆåŠŸçŠ¶æ€æˆ–å¤±è´¥çŠ¶æ€è¦æ‰§è¡Œçš„å‡½æ•° this.resolvedArr = []; this.rejectArr = []; this._value = null; //è®°å½•å‚æ•° this._error = null; &#125; //æ¥å—å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° è°ƒç”¨å¤–éƒ¨çš„å‡½æ•° _handler(func) &#123; let done = false; func( value =&gt; &#123; if (done) true; done = true; console.log(value); this._resolve(value); &#125;, error =&gt; &#123; if (done) true; done = true; this._reject(error); &#125; ); &#125; //æˆåŠŸ _resolve(value) &#123; // åªæ‰§è¡Œä¸€æ¬¡ this._status = status.fulfilled; this._value = value; //æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ this.resolvedArr.forEach(item =&gt; item(this._value)) &#125; //å¤±è´¥ _reject(error) &#123; this._status = status.rejected; this._error = error; //æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ this.rejectArr.forEach(item =&gt; item(this._error)) &#125; // æ”¶é›†çš„æ—¶æœº:pendingçŠ¶æ€æ”¶é›† _done(resolvedFunc, rejectedFunc) &#123; resolvedFunc = typeof resolvedFunc === &#x27;function&#x27; ? resolvedFunc : null; rejectedFunc = typeof rejectedFunc === &#x27;function&#x27; ? rejectedFunc : null; if (this._status === 0) &#123; if (rejectedFunc) &#123; this.resolvedArr.push(resolvedFunc); &#125; if (rejectedFunc) &#123; this.rejectArr.push(rejectedFunc); &#125; &#125; else if (his._status === 1 &amp;&amp; rejectedFunc) &#123; resolvedFunc(this._value); &#125; else if (his._status === 2 &amp;&amp; rejectedFunc) &#123; rejectedFunc(this._error); &#125; &#125; //æ”¶é›†æ³¨å†ŒæˆåŠŸçŠ¶æ€æˆ–è€…å¤±è´¥çŠ¶æ€ then(resolvedFunc, rejectedFunc) &#123; this._done(resolvedFunc, rejectedFunc); &#125; &#125; .......&#125;)(); æ¨¡æ‹Ÿå®ç°å¼‚æ­¥æ•ˆæœ1234567891011121314151617181920212223242526......//æˆåŠŸ _resolve(value) &#123; //æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ setTimeout(() =&gt; &#123; // åªæ‰§è¡Œä¸€æ¬¡ this._status = status.fulfilled; this._value = value; //æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ this.resolvedArr.forEach(item =&gt; item(this._value)); &#125;, 2000); &#125; //å¤±è´¥ _reject(error) &#123; setTimeout(() =&gt; &#123; this._status = status.rejected; this._error = error; //æ”¶é›†å®Œæ‰§è¡Œä»»åŠ¡å æ‰§è¡Œ this.rejectArr.forEach(item =&gt; item(this._error)); &#125;, 2000); &#125;...... æœŸå¾…ä¸‹æ¬¡æ›´æ–°ç»§ç»­â€¦â€¦â€¦â€¦..","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"å®šæ—¶å™¨","slug":"å®šæ—¶å™¨","date":"2018-11-11T16:00:00.000Z","updated":"2020-09-16T09:07:01.000Z","comments":true,"path":"2018/11/12/å®šæ—¶å™¨/","link":"","permalink":"http://mariogogogo.github.io/2018/11/12/%E5%AE%9A%E6%97%B6%E5%99%A8/","excerpt":"æ€ä¹ˆå®ç°ä¸€ä¸ªjsç‰ˆæœ¬sleepå‡½æ•°?","text":"æ€ä¹ˆå®ç°ä¸€ä¸ªjsç‰ˆæœ¬sleepå‡½æ•°? åœ¨å…¶ä»–è¯­è¨€ä¸­éƒ½å¯èƒ½æœ‰sleepå‡½æ•° ä»æœ€ç®€å•çš„å¼€å§‹è®²:123456function sleep(time,callback)&#123; setTimeout(callback,time);&#125;sleep(2000,()=&gt;&#123;console.log(&#x27;sleep recover&#x27;)&#125;) æ”¹è¿›ä½†æ˜¯è¿™æ ·å†™å¾ˆä¸ä¼˜é›…,éƒ½ä»€ä¹ˆå¹´ä»£äº†,è¿˜ä¸å¿«ç”¨Promise 1234567function sleep(time)&#123; return new Promise(resolve =&gt; setTimeout(resolve,time)) &#125;sleep(2000).then(()=&gt; console.log(&#x27;sleep recover&#x27;)); ä¼˜åŒ–ES7æä¾›äº†æ›´åŠ æ–¹ä¾¿çš„async/awaitæ–¹æ³• 123456789101112131415161718function sleep(time)&#123; return new Promise(resolve =&gt; setTimeout(resolve,time)) &#125;async init()&#123; await sleep(2000); //åªæœ‰sleepæ‰§è¡Œå®Œæˆæ‰èƒ½ç»§ç»­ä¸‹é¢çš„è¯­å¥ console.log(&#x27;sleep recover&#x27;) &#125;init();//æ‰§è¡Œinit().then(()=&gt; console.log(&#x27;init finish&#x27;)) å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è¯é¢˜:setTimeoutä¸setIntervalçš„åŒºåˆ« setTimeout å½“å‰æ‰§è¡Œå•å…ƒéƒ½æ‰§è¡Œå®Œæˆåæ‰å¼€å§‹æ‰§è¡Œ, setInterval åœ¨è®¾å®šå®Œè®¡æ—¶å™¨åç«‹é©¬è®¡æ—¶ 123456789101112131415161718192021222324252627282930313233 let scriptBegin = Date.now(); fun1(); fun2(); function act(params) &#123; console.log(params,Date.now() - scriptBegin); let begin = Date.now(); while (Date.now()-begin&lt;20); &#125; function fun1() &#123; let fun3 = ()=&gt; act(&#x27;fun3&#x27;); setTimeout(fun3, 0); //å†å›åˆ°å¼‚æ­¥å®Œæˆåå¼€å§‹æ‰§è¡Œ act(&#x27;fun1&#x27;) //è·³è¿‡ä¸Šé¢çš„å¼‚æ­¥ å…ˆæ‰§è¡Œè¿™å¥ &#125; function fun2() &#123; act(&#x27;fun2-1&#x27;); //å†æ‰§è¡Œè¿™å¥ let fun4 = ()=&gt; act(&#x27;fun4&#x27;); setInterval(fun4, 20); //æœ€åå›å¼€å§‹æ‰§è¡Œ act(&#x27;fun2-2&#x27;) //è·³è¿‡ä¸Šé¢çš„å¼‚æ­¥ å…ˆæ‰§è¡Œè¿™å¥ &#125; //ç»“æœ fun1 0 fun2-1 22 fun2-2 42 fun3 64 fun4 84fun4 104fun4 124fun4 144fun4 164","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"å‡½æ•°èŠ‚æµ throttling","slug":"å‡½æ•°èŠ‚æµ throttling","date":"2018-11-10T16:00:00.000Z","updated":"2020-09-16T09:07:04.000Z","comments":true,"path":"2018/11/11/å‡½æ•°èŠ‚æµ throttling/","link":"","permalink":"http://mariogogogo.github.io/2018/11/11/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%20throttling/","excerpt":"èŠ‚æµæ˜¯ä»€ä¹ˆ? æµè§ˆå™¨çš„DOMæ“ä½œæ¯”èµ·éDOMäº¤äº’éœ€è¦æ›´å¤šçš„å†…å­˜å’Œcpuæ—¶é—´ï¼Œè¿ç»­è¿‡å¤šçš„DOMæ“ä½œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æŒ‚èµ·ç”šè‡³å´©æºƒã€‚æ¯”å¦‚ä½¿ç”¨onresizeï¼Œonscrollè¿™äº›å¯èƒ½ä¼šè¢«è¿ç»­è§¦å‘çš„äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿›è¡Œäº†è¿‡å¤šåœ°DOMæ“ä½œï¼Œå¯èƒ½å°±ä¼šä½¿å¾—æµè§ˆå™¨å´©æºƒã€‚è€Œä¸ºäº†ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½å°±éœ€è¦ä½¿ç”¨åˆ°å‡½æ•°èŠ‚æµã€‚","text":"èŠ‚æµæ˜¯ä»€ä¹ˆ? æµè§ˆå™¨çš„DOMæ“ä½œæ¯”èµ·éDOMäº¤äº’éœ€è¦æ›´å¤šçš„å†…å­˜å’Œcpuæ—¶é—´ï¼Œè¿ç»­è¿‡å¤šçš„DOMæ“ä½œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æŒ‚èµ·ç”šè‡³å´©æºƒã€‚æ¯”å¦‚ä½¿ç”¨onresizeï¼Œonscrollè¿™äº›å¯èƒ½ä¼šè¢«è¿ç»­è§¦å‘çš„äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿›è¡Œäº†è¿‡å¤šåœ°DOMæ“ä½œï¼Œå¯èƒ½å°±ä¼šä½¿å¾—æµè§ˆå™¨å´©æºƒã€‚è€Œä¸ºäº†ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½å°±éœ€è¦ä½¿ç”¨åˆ°å‡½æ•°èŠ‚æµã€‚ é˜²æ­¢ä¸€ä¸ªäº‹ä»¶è§¦å‘æ‰§è¡Œçš„å¤ªå¿«,æ¯”å¦‚: ç›‘å¬inputè§¦å‘æœç´¢ ç›‘å¬resizeåšå“åº”è°ƒæ•´ ç›‘å¬mousemoveè°ƒæ•´ä½ç½® æ€ä¹ˆæ ·å®ç°ä¸€ä¸ªèŠ‚æµ?1234567891011function fun()&#123; console.log(&#x27;onresize&#x27;)&#125;function throttle(method,context)&#123; clearTimeout(method.timer); method.timer=setTimeout(function()&#123; method.call(context); &#125;,500);&#125;window.onresize = ()=&gt;throttle(fun,window) ä½†ä¸Šè¿°ä»£ç æœ‰ä¸€ä¸ªé—®é¢˜,å°±æ˜¯è¿™ä¸ªå‡½æ•°å¯èƒ½æ°¸è¿œä¸ä¼šæ‰§è¡Œ,å› ä¸ºä»–ä¸€ç›´åœ¨è§¦å‘,ä¸€ç›´åœ¨æ¸…é™¤id.åœ¨çª—å£æ‹–æ‹½è¿‡ç¨‹ä¸­ä¸ä¼šæ‰§è¡Œ,åªæœ‰æœ€åä¸€æ¬¡åœä¸‹ä¹‹åæ‰æ‰§è¡Œè¿™ç§å®ç°åº”è¯¥å«é˜²æŠ–; æˆ‘ä»¬ç»§ç»­æ”¹è¿›ä¸‹ä»£ç 12345678910111213141516function fun()&#123; console.log(&#x27;onresize&#x27;)&#125;function throttle(method,context)&#123; if(method.timer)&#123; return; &#125; clearTimeout(method.timer); method.timer = setTimeout(function()&#123; method.call(context) method.id=0; &#125;,100)&#125;window.onresize = ()=&gt;throttle(fun,window) æˆ‘ä»¬æŠŠsetTimeouté‡Œçš„idè®¾ç½®æˆäº†0;é‚£ä¹ˆä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™å°±ä¼šè§¦å‘ä¹Ÿæœ‰ä¸€ä¸ªå°é—®é¢˜:å°±æ˜¯æ¯æ¬¡æ‰§è¡Œè¦å»¶è¿Ÿ100ms æœ‰æ—¶å€™ç”¨æˆ·å¯èƒ½å°±æ˜¯æœ€å¤§åŒ–çª—å£,åªè§¦å‘äº†ä¸€æ¬¡,ä½†è¿˜æ˜¯å»¶è¿Ÿ100msæ‰èƒ½æ‰§è¡Œ,å‡è®¾ä½ è®¾ç½®500msé‚£ä¹ˆå»¶è¿Ÿå°±æ˜¯åŠç§’; è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡è§¦å‘,å¦‚æœæ˜¯çš„è¯ç«‹å³æ‰§è¡Œ 123456789101112131415function throttle(method,context)&#123; if(typeof method.timer === &quot;undefined&quot;)&#123; method.call(context) &#125; if(method.timer)&#123; return; &#125; clearTimeout(method.timer); method.timer = setTimeout(function()&#123; method.call(context) method.id=0; &#125;,100)&#125; ä½†è¿˜æ˜¯æœ‰é—®é¢˜ å¦‚æœç”¨æˆ·æœ€å¤§åŒ–ä¹‹å,éš”äº†ä¸€ä¼šåˆå–æ¶ˆæœ€å¤§åŒ–äº†å°±åˆæœ‰å»¶è¿Ÿäº†,å¹¶ä¸”ç¬¬ä¸€æ¬¡è§¦å‘æ‰§è¡Œ2æ¬¡ 1234567891011function fun()&#123; console.log(&#x27;onresize&#x27;)&#125;function throttle(method,context)&#123; if(!method.timer)&#123; method.call(context) method.timer = 1 setTimeout(()=&gt; method.timer=0,500) &#125;&#125;window.onresize = ()=&gt;throttle(fun,window) èŠ‚æµä¼šå¤±å»çµæ•åº¦,å¦‚æœåšä¸€ä¸ªæ‹–æ‹½ä¸€æ ·çš„åº”ç”¨,ä¼šå˜æˆä¸€å¡ä¸€å¡,æ˜¯ä¸å¯å–çš„. é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ« é˜²æŠ–æ˜¯æ‰§è¡Œé‡å¤æ“ä½œçš„æœ€åä¸€æ¬¡;è€ŒèŠ‚æµæ˜¯æ¯å¤šå°‘å•ä½æ—¶é—´å†…æ‰§è¡Œä¸€æ¬¡;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"ç†è§£ javascript ä¸­çš„æŸ¯é‡ŒåŒ–","slug":"ç†è§£javascriptä¸­çš„æŸ¯é‡ŒåŒ–","date":"2018-11-09T16:00:00.000Z","updated":"2020-09-16T09:07:07.000Z","comments":true,"path":"2018/11/10/ç†è§£javascriptä¸­çš„æŸ¯é‡ŒåŒ–/","link":"","permalink":"http://mariogogogo.github.io/2018/11/10/%E7%90%86%E8%A7%A3javascript%E4%B8%AD%E7%9A%84%E6%9F%AF%E9%87%8C%E5%8C%96/","excerpt":"ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–? å°±æ˜¯å‡½æ•°ä¸å‚æ•°å€¼çš„ç»“åˆäº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°","text":"ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–? å°±æ˜¯å‡½æ•°ä¸å‚æ•°å€¼çš„ç»“åˆäº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•° ç®€å•çš„ä¾‹å­1234567function add(a, b) &#123; return a + b;&#125;let add1 = add.curry(1);console.log(add1(5)); //6console.log(add1(2)); //3 å¦‚ä½•å®ç°(ä¸å®Œæ•´å®ç°)1234567Function.prototype.curry = function() &#123; let defautlArgs = arguments; let that = this; return function() &#123; return that.apply(this, defaultArgs.concat(arguments)); &#125;;&#125;; ç”±äºå‚æ•°ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæ•°ç»„,æ²¡æœ‰ concat å‡½æ•°,æ‰€ä»¥è¦æŠŠä¼ªæ•°ç»„è½¬æˆä¸€ä¸ªæ•°ç»„ 1const arr = Array.prototype.slice; 12345678Function.prototype.curry = function() &#123; const arr = Array.prototype.slice; let defautlArgs = arr.call(arguments); let that = this; return function() &#123; return that.apply(this, defaultArgs.concat(slice.call(arguments))); &#125;;&#125;; æŸ¯é‡ŒåŒ–æœ‰ç”¨å—?â‘  æ¡ˆä¾‹ 12345678910111213141516171819202122232425var currying = function(fn) &#123; // fn æŒ‡å®˜å‘˜æ¶ˆåŒ–è€å©†çš„æ‰‹æ®µ var args = [].slice.call(arguments, 1); // args æŒ‡çš„æ˜¯é‚£ä¸ªåˆæ³•è€å©† return function() &#123; // å·²ç»æœ‰çš„è€å©†å’Œæ–°æå®šçš„è€å©†ä»¬åˆæˆä¸€ä½“ï¼Œæ–¹ä¾¿æ§åˆ¶ var newArgs = args.concat([].slice.call(arguments)); // è¿™äº›è€å©†ä»¬ç”¨ fn è¿™ä¸ªæ‰‹æ®µæ¶ˆåŒ–åˆ©ç”¨ï¼Œå®ŒæˆéŸ¦å°å®å‰è¾ˆçš„å£®ä¸¾å¹¶è¿”å› return fn.apply(null, newArgs); &#125;;&#125;;// ä¸‹ä¸ºå®˜å‘˜å¦‚ä½•æå®š7ä¸ªè€å©†çš„æµ‹è¯•// è·å¾—åˆæ³•è€å©†var getWife = currying(function() &#123; var allWife = [].slice.call(arguments); // allwife å°±æ˜¯æ‰€æœ‰çš„è€å©†çš„ï¼ŒåŒ…æ‹¬æš—æ¸¡é™ˆä»“è¿›æ¥çš„è€å©† console.log(allWife.join(&quot;;&quot;));&#125;, &quot;åˆæ³•è€å©†&quot;);// è·å¾—å…¶ä»–6ä¸ªè€å©†getWife(&quot;å¤§è€å©†&quot;, &quot;å°è€å©†&quot;, &quot;ä¿è€å©†&quot;, &quot;åˆè›®è€å©†&quot;, &quot;ä¹–è€å©†&quot;, &quot;é€ä¸Šé—¨è€å©†&quot;);// æ¢ä¸€æ‰¹è€å©†getWife(&quot;è¶…è¶ŠéŸ¦å°å®çš„è€å©†&quot;); â‘¡ æ¡ˆä¾‹ä¸¾ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªå•†åº— ğŸ ï¼Œä½ æƒ³ç»™ä½ çš„é¡¾å®¢ 10% çš„æŠ˜æ‰£ï¼š 123function discount(price, discount) &#123; return price * discount;&#125; å½“ä¸€ä¸ªæœ‰ä»·å€¼çš„å®¢æˆ·ä¹°äº†ä¸€ä»¶\\$500 çš„å•†å“ï¼Œä½ ä¼šç»™ä»–ï¼š 1234567891011121314const price = discount(500, 0.1); // $50// $500 - $50 = $450//ä½ ä¼šå‘ç°ä»é•¿è¿œæ¥çœ‹ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½è‡ªå·±è®¡ç®—10%çš„æŠ˜æ‰£ã€‚const price = discount(1500, 0.1); // $150// $1,500 - $150 = $1,350const price = discount(2000, 0.1); // $200// $2,000 - $200 = $1,800const price = discount(50, 0.1); // $5// $50 - $5 = $45const price = discount(5000, 0.1); // $500// $5,000 - $500 = $4,500const price = discount(300, 0.1); // $30// $300 - $30 = $270 æˆ‘ä»¬å¯ä»¥æŸ¯é‡ŒåŒ–è¿™ä¸ªæŠ˜æ‰£å‡½æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯å¤©éƒ½æ·»åŠ  0.10 è¿™ä¸ªæŠ˜æ‰£å€¼ï¼š 123456789function discount(discount) &#123; return price =&gt; &#123; return price * discount; &#125;;&#125;const tenPercentDiscount = discount(0.1);//ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ä½ æœ‰ä»·å€¼çš„å®¢æˆ·è´­ä¹°çš„å•†å“ä»·æ ¼æ¥è¿›è¡Œè®¡ç®—äº†ï¼štenPercentDiscount(500); // $50// $500 - $50 = $450 å†ä¸€æ¬¡ï¼Œå‘ç”Ÿäº†è¿™æ ·çš„æƒ…å†µï¼Œæœ‰ä¸€äº›æœ‰ä»·å€¼çš„å®¢æˆ·æ¯”å¦ä¸€äº›æœ‰ä»·å€¼çš„å®¢æˆ·æ›´é‡è¦ â€“ æˆ‘ä»¬å«ä»–ä»¬è¶…çº§ä»·å€¼å®¢æˆ·ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³ç»™è¶…çº§ä»·å€¼å®¢æˆ· 20%çš„æŠ˜æ‰£ã€‚ è¿”å›çš„å‡½æ•°twentyPercentDiscountå°†è¢«ç”¨äºè®¡ç®—è¶…çº§ä»·å€¼å®¢æˆ·çš„æŠ˜æ‰£ï¼š 123456twentyPercentDiscount(500); // 100// $500 - $100 = $400twentyPercentDiscount(5000); // 1000// $5,000 - $1,000 = $4,000twentyPercentDiscount(1000000); // 200000// $1,000,000 - $200,000 = $600,000 é¿å…é¢‘ç¹è°ƒç”¨å…·æœ‰ç›¸åŒå‚æ•°çš„å‡½æ•° ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—åœ†æŸ±ä½“çš„ä½“ç§¯ï¼š 123456function volume(l, w, h) &#123; return l * w * h;&#125;volume(200, 30, 100); // 2003000lvolume(32, 45, 100); //144000lvolume(2322, 232, 100); // 53870400l ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æŸ¯é‡ŒåŒ–è¿™ä¸ªè®¡ç®—ä½“ç§¯çš„å‡½æ•°ï¼ˆåƒæˆ‘ä»¬ä¹‹å‰åšçš„ä¸€æ ·ï¼‰ï¼š 1234567function volume(h) &#123; return w =&gt; &#123; return l =&gt; &#123; return l * w * h; &#125;; &#125;;&#125; æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºè®¡ç®—ç‰¹å®šçš„åœ†æŸ±ä½“é«˜åº¦ï¼š 123const hCylinderHeight = volume(100);hCylinderHeight(200)(30); // 600,000lhCylinderHeight(2322)(232); // 53,870,400l â‘¢ æ¡ˆä¾‹ 12let data = [1, 5, 2, 10, 8, 0];data.sort((a, b) =&gt; b - a); //[10,8,5,2,1,0]; å¦‚æœæ“ä½œçš„æ•°é‡æ¯”è¾ƒå¤š,æ¯ä¸€æ¬¡éƒ½éœ€è¦å†™ä¸€ä¸ªå‡½æ•°å‚æ•°.å› æ­¤å¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–æŠŠå‚æ•°å›ºå®šèµ·æ¥; 1234Array.prototype.sortDescending = Array.prototype.sort.curry((a, b) =&gt; b - a);let data = [1, 5, 2, 10, 8, 0];data.sortDescending(); //[10,8,5,2,1,0]; æœ€åå¼•ç”¨å¤§ä½¬çš„è¯å…¶å®è¿™äº›æ¨¡å¼åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä½¿ç”¨è¿‡ï¼Œå½“çœ‹åˆ°â€œæ¨¡å¼â€æ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šçŒ›ç„¶æƒŠèµ·ï¼šâ€œå“¦ï¼ŒåŸæ¥è¿™ä¸ªå°±å«åšâ€˜è§‚å¯Ÿè€…æ¨¡å¼â€™ç­‰â€ã€‚ç°åœ¨è¦è®¨è®ºçš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰å¿…è¦æŠŠè¿™äº›â€œæ¨¡å¼â€éƒ½è®°ä½å‘¢ï¼Œéƒ½ç†è§£å…¶å¯¹åº”çš„æ ¸å¿ƒå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜ç±»ä¼¼äºï¼Œæˆ‘å¯ä»¥çœ‹æ‡‚ NBA çš„ç¯®çƒæ¯”èµ›ï¼Œé‚£æˆ‘æœ‰æ²¡æœ‰å¿…è¦æŠŠå„ä¸ªçƒé˜Ÿä»¥åŠçƒé˜Ÿçš„é˜Ÿå‘˜éƒ½è®°ä½å‘¢ï¼Ÿ å¦‚æœæƒ³æˆä¸º JS å¤§ç¥ï¼Œä»è¿™ä¸ªç›®æ ‡æ¥çœ‹ï¼Œè¿™æ˜¯éœ€è¦çš„ï¼›å¥½æ¯”ä¼˜ç§€çš„ç¯®çƒè§£è¯´å‘˜å¿…é¡»è¦çŸ¥é“æ¯ä¸ªçƒé˜Ÿçš„åå­—ã€çƒå‘˜ç”šè‡³å‘¨è¾¹å…«å¦ã€‚ä½†æ˜¯ï¼Œç°å®å¾ˆé‡è¦ã€‚å¦‚æœè¿ JS å‡½æ•°ç›¸å…³çš„åŸºæœ¬ä¸œè¥¿éƒ½é©¾é©­ä¸å¥½ï¼Œæ˜¾ç„¶ï¼Œç¡¬æ˜¯å•ƒè¿™äº›ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µåªä¼šé€ æˆæ··ä¹±ã€‚å¦‚æœä½ è§‰å¾—å¯ä»¥æ›´è¿‘ä¸€æ­¥ï¼Œå…ˆé€šé€å‡ ä¸ªè‡ªå·±ä¹ æƒ¯çš„ç†Ÿæ‚‰çš„ä½¿ç”¨æ¨¡å¼ï¼Œè¶³å¤Ÿåº”ä»˜å®é™…é¡¹ç›®ï¼›å…¶ä»–ä¸€äº›æ¦‚å¿µä»€ä¹ˆçš„ï¼Œæ›´å¤šçš„åªæ˜¯å™±å¤´ï¼Œå®ç”¨æ€§å…¶å®å¹¶ä¸å¤§ã€‚æ­£å¦‚æœ¬æ–‡çš„æŸ¯é‡ŒåŒ–ï¼Œçœ‹ä¸Šå»å¾ˆé«˜çº§ï¼Œä¼¼ä¹ä¹Ÿæœ‰ç‚¹ç”¨å¤„ï¼Œç„¶è€Œ JS çš„çµæ´»æ€§ä½¿å¾—å¾ˆå¤šå®ç°å®Œå…¨æ‘†è„±â€œæŸ¯é‡ŒåŒ–â€è¿™ä¸ªæ¦‚å¿µçš„æŸç¼šï¼Œä»¥æ›´é€šä¿—æ˜“æ‡‚çš„æ–¹å¼å®ç°ã€‚ ç„¶è€Œï¼Œå³ä½¿å®ç”¨æ€§ä¸é«˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æœ‰æ‰€äº†è§£ï¼Œå› ä¸ºï¼Œä½ ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°å®ƒã€‚æ¯”æ–¹è¯´ CSS ä¸­çš„display:table;æŸäº›æƒ…å†µä¸‹å¯ä»¥è§£å†³ä¸€äº›æ£˜æ‰‹é—®é¢˜(secret!). å‚è€ƒJS ä¸­çš„æŸ¯é‡ŒåŒ–(currying) ã€Œè¯‘ã€ç†è§£ JavaScript çš„æŸ¯é‡ŒåŒ–","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Ubuntu14.04å®‰è£…MySQL5.5å›¾è§£å®‰è£…æµç¨‹ï¼","slug":"Ubuntu14.04å®‰è£…MySQL5.5å›¾è§£å®‰è£…æµç¨‹ï¼","date":"2018-11-07T16:00:00.000Z","updated":"2020-09-16T09:07:54.000Z","comments":true,"path":"2018/11/08/Ubuntu14.04å®‰è£…MySQL5.5å›¾è§£å®‰è£…æµç¨‹ï¼/","link":"","permalink":"http://mariogogogo.github.io/2018/11/08/Ubuntu14.04%E5%AE%89%E8%A3%85MySQL5.5%E5%9B%BE%E8%A7%A3%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%81/","excerpt":"åˆ é™¤mysqlçš„æ•°æ®æ–‡ä»¶1sudo rm /var/lib/mysql/ -R åˆ é™¤mysqlçš„é…ç½®æ–‡ä»¶1sudo rm /etc/mysql/ -R è‡ªåŠ¨å¸è½½mysqlï¼ˆåŒ…æ‹¬serverå’Œclientï¼‰12sudo apt-get autoremove mysql* --purge sudo apt-get remove apparmor æ£€æŸ¥æ˜¯å¦å¸è½½å¹²å‡€1dpkg -l | grep mysql # è‹¥æ²¡æœ‰è¿”å›ï¼Œè¯´æ˜å·²å®Œæˆå¸è½½ æ¥ä¸‹æ¥å®‰è£…å°±æ˜¯ä»¶ç®€å•çš„äº‹æƒ…é»˜è®¤å®‰è£…5.5ç‰ˆæœ¬1sudo apt-get install mysql-server mysql-clientæŸ¥çœ‹mysqlç‰ˆæœ¬ï¼š1sudo mysqladmin -u root -p version è®°å½•ä¸‹å®‰è£…æ­¥éª¤","text":"åˆ é™¤mysqlçš„æ•°æ®æ–‡ä»¶1sudo rm /var/lib/mysql/ -R åˆ é™¤mysqlçš„é…ç½®æ–‡ä»¶1sudo rm /etc/mysql/ -R è‡ªåŠ¨å¸è½½mysqlï¼ˆåŒ…æ‹¬serverå’Œclientï¼‰12sudo apt-get autoremove mysql* --purge sudo apt-get remove apparmor æ£€æŸ¥æ˜¯å¦å¸è½½å¹²å‡€1dpkg -l | grep mysql # è‹¥æ²¡æœ‰è¿”å›ï¼Œè¯´æ˜å·²å®Œæˆå¸è½½ æ¥ä¸‹æ¥å®‰è£…å°±æ˜¯ä»¶ç®€å•çš„äº‹æƒ…é»˜è®¤å®‰è£…5.5ç‰ˆæœ¬1sudo apt-get install mysql-server mysql-clientæŸ¥çœ‹mysqlç‰ˆæœ¬ï¼š1sudo mysqladmin -u root -p version è®°å½•ä¸‹å®‰è£…æ­¥éª¤ å®‰è£…msyql12345678910111213apt-get update//è¯´æ˜æ²¡æœ‰ä½ ä¸æ˜¯rootç”¨æˆ·ï¼Œåˆ™éœ€è¦ç”¨sudoå‘½ä»¤sudo apt-get updateapt-get install MySQL-client-core-5.6apt-get install mysql-client-5.6apt-get install mysql-server-5.6 æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨12æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨ps -ef | grep mysql æŸ¥çœ‹msyql ç›‘å¬ç«¯å£12æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨netstat -tap | grep mysql Mysql æœåŠ¡è¿œç¨‹è®¿é—®ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šsudo gedit /etc/mysql/conf.cnf é‡å¯msyql1service mysql restart åˆ†é…æ‰€æœ‰è®¿é—®æƒé™,å¦‚æœå·²åˆ†é…è¿‡ï¼Œè¯¥æ­¥éª¤å¯è·³è¿‡123mysql -u root -p//è¾“å…¥å¯†ç mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;rootå¯†ç &#x27; WITH GRANT OPTION;å¼ºåˆ¶åˆ·æ–°æƒé™1mysql&gt; flush privileges;å†æ¬¡æŸ¥çœ‹ç”¨æˆ·è¡¨,rootç”¨æˆ·çš„hostå˜æˆ%ï¼Œå³å…è®¸æ‰€æœ‰çš„ipè¿œç¨‹è®¿é—®ï¼Œå¦‚æœéœ€è¦æŒ‡å®šå…·ä½“çš„ipï¼Œå°±å†™ä¸Šå…·ä½“çš„ipå³å¯ 123# netstat -an|grep 3306tcp 0 0 127.0.0.1:3306 0.0.0.0:* LISTEN é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™ç™»å½•é˜¿é‡Œäº‘è¿›å…¥æ§åˆ¶å°ï¼Œä¾æ¬¡è®¿é—®ç½‘ç»œå’Œå®‰å…¨-&gt;å®‰å…¨ç»„-&gt;é…ç½®è§„åˆ™ï¼Œåœ¨å…¥æ–¹å‘ä¸Šå¼€æ”¾MySQLç›‘å¬ç«¯å£3306å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º é˜¿é‡Œäº‘æœåŠ¡å™¨çš„MYSQLæ•°æ®åº“è¿œç¨‹è®¿é—®å¼€å¯æˆåŠŸï¼Œä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥æˆåŠŸã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://mariogogogo.github.io/tags/mysql/"}]},{"title":"React+é˜¿é‡Œäº‘éƒ¨ç½²é™æ€ç½‘é¡µ","slug":"React+é˜¿é‡Œäº‘éƒ¨ç½²é™æ€ç½‘é¡µ","date":"2018-10-30T16:00:00.000Z","updated":"2020-09-16T09:07:45.000Z","comments":true,"path":"2018/10/31/React+é˜¿é‡Œäº‘éƒ¨ç½²é™æ€ç½‘é¡µ/","link":"","permalink":"http://mariogogogo.github.io/2018/10/31/React+%E9%98%BF%E9%87%8C%E4%BA%91%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5/","excerpt":"éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„é™æ€é¡µé¢å…¶å®å¾ˆç®€å•åªæ˜¯åšä¸ªç®€å•çš„è®°å½•,å®‰å…¨åŠæ€§èƒ½ç›¸å…³é—®é¢˜æš‚ä¸è€ƒè™‘å¤ªå¤š;","text":"éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„é™æ€é¡µé¢å…¶å®å¾ˆç®€å•åªæ˜¯åšä¸ªç®€å•çš„è®°å½•,å®‰å…¨åŠæ€§èƒ½ç›¸å…³é—®é¢˜æš‚ä¸è€ƒè™‘å¤ªå¤š; ä¸€ã€è¿œç¨‹ç™»å½•æœåŠ¡å™¨1.1 ssh è¿œç¨‹ç™»å½•æœåŠ¡å™¨123456789101112# ssh ç™»å½•ssh root@47.xx.xx.xx# æ¥ç€ï¼Œè¾“å…¥å¯†ç ï¼ˆè´­ä¹°æœåŠ¡å™¨æ—¶çš„å¯†ç ï¼‰******# ç„¶åï¼Œå¯ä»¥åšä½ æƒ³åšçš„äº‹æƒ…ï¼Œç®€å•ç‚¹ï¼š# æŸ¥çœ‹ç¡¬ç›˜fdisk -l# æŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µdf -h 1.2 é…ç½® root åŠåº”ç”¨è´¦å·æƒé™123456789101112# å¢åŠ ç”¨æˆ·adduser chan # chan ä¸ºç”¨æˆ·åï¼Œç„¶åè¾“å…¥å¯†ç ï¼Œåˆ›å»ºå®Œæˆ# ç”¨æˆ·æˆæƒgpasswd -a chan sudo # æ·»åŠ ç”¨æˆ·åˆ° sudo ç»„ä¸­sudo visudo # æ¥ç€ï¼Œä¸ºç”¨æˆ·æˆæƒchan ALL=(ALL:ALL) ALL# é‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼Œå°±å¯ä»¥ä»¥ tanya çš„èº«ä»½ç™»å½•å•¦ssh chan@47.xx.xx.xx # ç„¶åè¾“å…¥å¯†ç ï¼Œå³å¯ç™»å½•æˆåŠŸ 1.3 ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç™»å½•ç«¯å£1234567891011121314# ç¼–è¾‘æ–‡ä»¶sudo vi /etc/ssh/sshd_config# ä¿®æ”¹ Port é¡¹ï¼Œç«¯å£èŒƒå›´ 0 ~ 65536Port xx# åœ¨æœ«å°¾æ·»åŠ AllowUsers tanya# é‡å¯æœåŠ¡sudo service ssh restart# é‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼šssh -p ç«¯å£ tanya@47.xx.xx.xxssh -p xx tanya@47.xx.xx.xx ä¸‰ã€æ­å»º Nodejs ç”Ÿäº§ç¯å¢ƒ3.1 æ­å»ºæœåŠ¡å™¨çš„ Nodejs ç¯å¢ƒ 1234567891011121314151617181920212223242526# æ›´æ–°æœåŠ¡å™¨sudo apt-get update# å®‰è£…å·¥å…·sudo apt-get install vim openssl build-essential libssl-dev wget curl git# å®‰è£… nvm (node ç‰ˆæœ¬ç®¡ç†å·¥å…·) https://github.com/creationix/nvmwget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.7/install.sh | bash# å®‰è£… Node.js (æœ€æ–°ç¨³å®šç‰ˆ) https://nodejs.org/en/nvm install v9.6.3# æŒ‡å®š Node.js ç‰ˆæœ¬nvm use v9.6.3# å®‰è£… npmnpm --registry=https://registry.npm.taobao.org install -g npm# å¦‚æœæœ‰å¤šä¸ª Node.js ç‰ˆæœ¬ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æŒ‡å®šé»˜è®¤ç‰ˆæœ¬nvm alias default v9.6.3# å¢åŠ ç³»ç»Ÿæ–‡ä»¶ç›‘æ§æ•°ç›®echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p# å®‰è£…ä¸€äº›å¸¸ç”¨æ¨¡å—npm install yarn pm2 webpack -g 3.2 å€ŸåŠ© pm2 è®© Node.js æœåŠ¡å¸¸é©» 1234567891011# å¯åŠ¨æœåŠ¡pm2 start app.js# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡pm2 list# æŸ¥çœ‹åº”ç”¨pm2 show app# æŸ¥çœ‹æ—¥å¿—pm2 logs å››ã€é…ç½® Nginx å®ç°åå‘ä»£ç†é…ç½® Nginx åå‘ä»£ç† Nodejs ç«¯å£å®‰è£… nginx 1sudo apt-get install nginx nginx é…ç½®è§„åˆ™ï¼šå¯ä»¥é€šè¿‡ http://47.xx.xx.xx è®¿é—®æœåŠ¡å™¨ http://127.0.0.1:8081 ç«¯å£çš„æœåŠ¡ é…ç½® Nginxï¼ŒLinux æœåŠ¡å™¨æ˜¯è¿›å…¥åˆ°ï¼š 1cd / etc / nginx / sites - enabled; ç„¶åä»¥ç®¡ç†å‘˜èº«ä»½ï¼Œæ–°å»ºä¸€ä¸ªä½ çš„ react é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼šreact-demo.confï¼Œç„¶åï¼Œç¼–è¾‘æ–‡ä»¶ 123456789101112131415161718upstream gusaifei &#123; server 127.0.0.1:8081;&#125;server &#123; listen 80; server_name 47.xx.xx.xx; location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forward-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Nginx-Proxy true; proxy_pass http://gusaifei; proxy_redirect off; &#125;&#125; æˆ–è€… è·¯å¾„åœ°å€ cd /etc/nginx/conf.d 1234567891011server&#123; listen 80; server_name mall.52react.cn; root /root/www/firstweb/dist2; index index.html; #location / &#123; # proxy_pass http://admintest.happymmall.com; # &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445server &#123; listen 80; #é…ç½®ç›‘å¬ç«¯å£ server_name first.52react.cn; #charset koi8-r; #access_log /var/log/nginx/host.access.log main; location / &#123; root /root/www/firstweb/dist; #æœåŠ¡é»˜è®¤å¯åŠ¨ç›®å½• index index.html index.htm; #é»˜è®¤è®¿é—®æ–‡ä»¶ &#125; #error_page 404 /404.html; # é…ç½®404é¡µé¢ # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; #é”™è¯¯çŠ¶æ€ç çš„æ˜¾ç¤ºé¡µé¢ï¼Œé…ç½®åéœ€è¦é‡å¯ location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&#x27;s document root # concurs with nginx&#x27;s one # #location ~ /\\.ht &#123; # deny all; #&#125;&#125; éƒ¨ç½²ä¸€ä¸ªé™æ€èµ„æ–™æ–‡ä»¶123456789101112131415161718192021222324252627282930313233server&#123; listen 80; server_name mall.52react.cn; root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;; #å¤šå…¥å£æ–‡ä»¶è·¯å¾„View å•å…¥å£æ–‡ä»¶è·¯å¾„ dist&#x2F; index index.html; #å¦‚æœcsså’Œjsæ— æ³•åŠ è½½å‡ºæ¥å¯èƒ½éœ€è¦é…ç½®ä»¥ä¸‹ä¿¡æ¯ location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf|css|js|eot|svg|ttf|woff|woff2|properties|json)$ &#123; root &#x2F;root&#x2F;product&#x2F;mall_shop; #è·¯å¾„åˆ°é¡¹ç›®æ ¹ç›®å½• if (-f $request_filename) &#123; expires 1d; break; &#125; &#125; #é»˜è®¤åŠ è½½é¦–é¡µ location &#x3D; &#x2F; &#123; root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;; index index.html; &#125; location ~ .*\\.html$ &#123; root &#x2F;root&#x2F;product&#x2F;mall_shop&#x2F;dist&#x2F;view&#x2F;; index index.html; &#125; #è¯·æ±‚åå‘ä»£ç†ç”¨åˆ«çš„å€Ÿå£ location ~ .*\\.do$ &#123; proxy_pass http:&#x2F;&#x2F;test.happymmall.com; &#125; #é”™è¯¯é¡µé¢è·³è½¬å›é¦–é¡µ location &#x2F; &#123; try_files $uri $uri&#x2F; &#x2F;index.html; &#125;&#125; æ³¨æ„ webpakc è¾“å‡ºè·¯å¾„é…ç½®123456output: &#123; path: path.resolve(__dirname, &#x27;dist&#x27;), publicPath: &#x27;/dist/&#x27;, filename: &#x27;js/[name].js&#x27;, //å¿…é¡»[name] ä¸ç„¶å†²çªæ–‡ä»¶åä¸€æ ·&#125;, é‡å¯ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ£€æµ‹ä¸€ä¸‹é…ç½®è§„åˆ™12345sudo nginx -t//é‡å¯sudo nginx -s reload Nginx å®‰è£…è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå†æ¬¡ä¸åœ¨èµ˜è¿°ã€‚æ–‡ç« ä»å‡ºæ¥ Nginx çš„é»˜è®¤é¡µé¢ä¹‹åï¼Œéƒ¨ç½²è‡ªå·±çš„ç½‘ç«™å¼€å§‹ã€‚æœ€æ–°ç‰ˆæœ¬ nginx é…ç½®æ˜¯ç”± 4 ä¸ªæ–‡ä»¶æ„æˆï¼Œåœ¨ Ubuntu ä¸­ï¼Œè¿™å‡ ä¸ªæ–‡ä»¶çš„è·¯å¾„åœ¨ï¼š/etc/nginx ä¸‹ï¼š conf.dï¼šç”¨æˆ·è‡ªå·±å®šä¹‰çš„ conf é…ç½®æ–‡ä»¶ sites-availableï¼šç³»ç»Ÿé»˜è®¤è®¾ç½®çš„é…ç½®æ–‡ä»¶ sites-availableï¼šç³»ç»Ÿé»˜è®¤è®¾ç½®çš„é…ç½®æ–‡ä»¶ sites-enabledï¼šç”± sites-available ä¸­çš„é…ç½®æ–‡ä»¶è½¬æ¢ç”Ÿæˆ sites-enabledï¼šç”± sites-available ä¸­çš„é…ç½®æ–‡ä»¶è½¬æ¢ç”Ÿæˆ nginx.confï¼šæ±‡æ€»ä»¥ä¸Šä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼ŒåŒæ—¶é…ç½®æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•° nginx.confï¼šæ±‡æ€»ä»¥ä¸Šä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼ŒåŒæ—¶é…ç½®æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•°åœ¨éƒ¨ç½²éœ€è¦çš„ web æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹·è´ sites-enabled ä¸­çš„ default æ–‡ä»¶åˆ° conf.d å¹¶ä¸”ä¿®æ”¹åå­—ä¸º **.conf ,ç„¶åè¿›è¡Œé…ç½®ï¼š å¦‚æœ nginx è¿˜æ˜¯æ— æ³•è®¿é—®è¿˜éœ€è¦è¯¥ä¸€ä¸ªåœ°æ–¹(ä¹‹å‰å‘äº†æˆ‘ä¸€å¤©)","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"äº†è§£ä¸‹css3è‡ªé€‚åº”å¸ƒå±€å•ä½vw,vh","slug":"äº†è§£ä¸‹css3è‡ªé€‚åº”å¸ƒå±€å•ä½vw,vh","date":"2018-10-29T16:00:00.000Z","updated":"2020-09-16T09:07:06.000Z","comments":true,"path":"2018/10/30/äº†è§£ä¸‹css3è‡ªé€‚åº”å¸ƒå±€å•ä½vw,vh/","link":"","permalink":"http://mariogogogo.github.io/2018/10/30/%E4%BA%86%E8%A7%A3%E4%B8%8Bcss3%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E5%8D%95%E4%BD%8Dvw,vh/","excerpt":"è§†å£å•ä½(Viewport units) ä»€ä¹ˆæ˜¯è§†å£ï¼Ÿ åœ¨æ¡Œé¢ç«¯ï¼Œè§†å£æŒ‡çš„æ˜¯åœ¨æ¡Œé¢ç«¯ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›è€Œåœ¨ç§»åŠ¨ç«¯ï¼Œå®ƒæ¶‰åŠ3ä¸ªè§†å£ï¼šLayout Viewportï¼ˆå¸ƒå±€è§†å£ï¼‰ï¼ŒVisual Viewportï¼ˆè§†è§‰è§†å£ï¼‰ï¼ŒIdeal Viewportï¼ˆç†æƒ³è§†å£ï¼‰ã€‚","text":"è§†å£å•ä½(Viewport units) ä»€ä¹ˆæ˜¯è§†å£ï¼Ÿ åœ¨æ¡Œé¢ç«¯ï¼Œè§†å£æŒ‡çš„æ˜¯åœ¨æ¡Œé¢ç«¯ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›è€Œåœ¨ç§»åŠ¨ç«¯ï¼Œå®ƒæ¶‰åŠ3ä¸ªè§†å£ï¼šLayout Viewportï¼ˆå¸ƒå±€è§†å£ï¼‰ï¼ŒVisual Viewportï¼ˆè§†è§‰è§†å£ï¼‰ï¼ŒIdeal Viewportï¼ˆç†æƒ³è§†å£ï¼‰ã€‚è§†å£å•ä½ä¸­çš„â€œè§†å£â€ï¼Œæ¡Œé¢ç«¯æŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›ç§»åŠ¨ç«¯æŒ‡çš„å°±æ˜¯Viewportä¸­çš„Layout Viewportã€‚ æ ¹æ®CSS3è§„èŒƒï¼Œè§†å£å•ä½ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹4ä¸ªï¼š 1.vwï¼š1vwç­‰äºè§†å£å®½åº¦çš„1%ã€‚ 2.vhï¼š1vhç­‰äºè§†å£é«˜åº¦çš„1%ã€‚ 3.vminï¼šé€‰å–vwå’Œvhä¸­æœ€å°çš„é‚£ä¸ªã€‚ 4.vmaxï¼šé€‰å–vwå’Œvhä¸­æœ€å¤§çš„é‚£ä¸ªã€‚ vh and vwï¼šç›¸å¯¹äºè§†å£çš„é«˜åº¦å’Œå®½åº¦ï¼Œè€Œä¸æ˜¯çˆ¶å…ƒç´ çš„ï¼ˆCSSç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æœ€è¿‘çš„çˆ¶å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦ï¼‰ã€‚1vh ç­‰äº1/100çš„è§†å£é«˜åº¦ï¼Œ1vw ç­‰äº1/100çš„è§†å£å®½åº¦ã€‚ æ¯”å¦‚ï¼šæµè§ˆå™¨é«˜åº¦950pxï¼Œå®½åº¦ä¸º1920px, 1 vh = 950px/100 = 9.5 pxï¼Œ1vw = 1920px/100 =19.2 pxã€‚ vmaxç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå¤§çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å¤§çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vmaxã€‚ vminç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å°çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vminã€‚ vh/vwä¸%åŒºåˆ« å…¼å®¹æ€§é—®é¢˜(åœ¨ç§»åŠ¨ç«¯ iOS 8 ä»¥ä¸Šä»¥åŠ Android 4.4 ä»¥ä¸Šè·å¾—æ”¯æŒï¼Œå¹¶ä¸”åœ¨å¾®ä¿¡ x5 å†…æ ¸ä¸­ä¹Ÿå¾—åˆ°å®Œç¾çš„å…¨é¢æ”¯æŒ)","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"css","slug":"css","permalink":"http://mariogogogo.github.io/tags/css/"}]},{"title":"ğŸš€å»ºé€ å°é£æœºåœºğŸšğŸšğŸš","slug":"ğŸš€å»ºé€ å°é£æœºåœºğŸšğŸšğŸš","date":"2018-10-29T16:00:00.000Z","updated":"2020-09-16T09:06:52.000Z","comments":true,"path":"2018/10/30/ğŸš€å»ºé€ å°é£æœºåœºğŸšğŸšğŸš/","link":"","permalink":"http://mariogogogo.github.io/2018/10/30/%F0%9F%9A%80%E5%BB%BA%E9%80%A0%E5%B0%8F%E9%A3%9E%E6%9C%BA%E5%9C%BA%F0%9F%9A%81%F0%9F%9A%81%F0%9F%9A%81/","excerpt":"æ¯å¤©çœ‹çœ‹å¢™å¤–,ç¥æ¸…æ°”çˆ½,ä¸ä¼šè¢«æŸäº›ç»„ç»‡è’™è”½åŒçœ¼","text":"æ¯å¤©çœ‹çœ‹å¢™å¤–,ç¥æ¸…æ°”çˆ½,ä¸ä¼šè¢«æŸäº›ç»„ç»‡è’™è”½åŒçœ¼ Debian/Ubuntu/CentOS6 ç³»ç»Ÿ ShadowsocksR ä¸€é”®å®‰è£…è„šæœ¬ (é›†æˆé”é€Ÿ) ä½¿ç”¨æ­¤æ•™ç¨‹ï¼Œå¯ä»¥å®Œå…¨ä¸è¿‡è„‘å­çš„æ­å»ºå¥½ SSRï¼Œä¸”é€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ– æ³¨æ„ 1ï¼š KVM/VMWARE/XEN æ‰æœ‰ç”¨ï¼Œé”é€Ÿä¸æ”¯æŒ openVZ ï¼ æ³¨æ„ 2ï¼šè„šæœ¬ä¼šä¸æ–­æ›´æ–°ï¼ˆç›®å‰æ—¶é—´ 2016.11.27ï¼‰ï¼Œè¯·å…³æ³¨é€—æ¯”æ ¹æ®åœ°åŸæ–‡ 12wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh ä½¿ç”¨è¯´æ˜è¿è¡Œè„šæœ¬ 1bash ssr.sh è¾“å…¥å¯¹åº”çš„æ•°å­—æ¥æ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚ 12345678910111213141516171.å®‰è£…ShadowsocksRæœåŠ¡ç«¯2.å®‰è£…libsodium(chacha20åŠ å¯†æ–¹å¼)3.æŸ¥çœ‹è´¦å·ä¿¡æ¯4.ä¿®æ”¹è´¦å·ä¿¡æ¯5.æ‰‹åŠ¨ä¿®æ”¹è´¦å·ä¿¡æ¯6.å¸è½½ShadowsocksRæœåŠ¡ç«¯7.æ›´æ–°ShadowsocksRæœåŠ¡ç«¯â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”8.å¯åŠ¨ShadowsocksR9.åœæ­¢ShadowsocksR10.é‡å¯ShadowsocksRâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”11.å®‰è£…é”é€Ÿï¼ˆServerSpeederï¼‰12.æŸ¥çœ‹é”é€ŸçŠ¶æ€13.åœæ­¢é”é€Ÿ14.é‡å¯é”é€Ÿ15.å¸è½½é”é€Ÿ å®‰è£…æ­¥éª¤ è¾“å…¥ 1 ï¼Œå°±ä¼šå¼€å§‹å®‰è£… ShadowsocksR æœåŠ¡ç«¯ï¼Œå¹¶ä¸”ä¼šæç¤ºä½ è¾“å…¥ Shadowsocks çš„ ç«¯å£/å¯†ç /åŠ å¯†æ–¹å¼/åè®®/æ··æ·† ç­‰å‚æ•°ã€‚ 123456789101112131415Please input port for shadowsocksR [1-65535]:(Default port: 2333):Please input password for ShadowsocksR:(Default password: dou-bi.co):Please input method for ShadowsocksR:(Default method: aes-256-cfb):Please input protocol for ShadowsocksR:(Default protocol: auth_sha1_v4):Please input obfs for ShadowsocksR:(Default obfs: tls1.2_ticket_auth): åŒæ—¶æœ€åä¹Ÿä¼šæç¤ºæ˜¯å¦è®¾ç½® åè®®å’Œæ··æ·† å…¼å®¹åŸç‰ˆï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨åŸç‰ˆ SS ä¹Ÿèƒ½é“¾æ¥ï¼‰ï¼Œä¸æ‡‚ ç›´æ¥å›è½¦ æˆ– è¾“å…¥ y ã€‚ å¦‚æœå®‰è£…è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆæœ€åå°±ä¼šæç¤ºï¼š12345678910111213141516171819202122############################################################ Your ShadowsocksR info : Server IP: VPS_IP Server Port: 2333 Password: dou-bi.co Method: aes-256-cfb Protocol: auth_sha1_v4_compatible Obfs: tls1.2_ticket_auth_compatible SS url: ss://XXXXXXXXXXXXXXXXXXXXX QR code: http://pan.baidu.com/share/qrcode?w=300&amp;h=300&amp;url=ss://XXXXXXXXXXXXXXXXXXXXX Tip: Open the link above will be able to see two-dimensional code picture.Tip: The protocol and obfs last [ _compatible ] refer to the compatible original.############################################################ShadowsocksR install completed!https://www.dou-bi.co############################################################ SS url æ˜¯ SS é“¾æ¥ï¼ˆæ ¼å¼ï¼š ss://XXXXXXX ï¼Œå¾ˆé•¿ï¼‰ï¼Œå¯ä»¥ä»å‰ªè¾‘ç‰ˆå¯¼å…¥ Shadowsocks å®¢æˆ·ç«¯ï¼Œä¸æ‡‚çš„è¯çœ‹ä¸‹é¢äºŒç»´ç ã€‚ QR code æ˜¯äºŒç»´ç ï¼Œå¤åˆ¶åé¢çš„é“¾æ¥åœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œå°±ä¼šæ˜¾ç¤ºä¸€ä¸ªäºŒç»´ç çš„å›¾ç‰‡ï¼Œå¯ä»¥ç”¨ Shadowsocks å®¢æˆ·ç«¯æ‰«æäºŒç»´ç æ¥æ·»åŠ ã€‚ ä¹‹åå›åˆ°èœå•ç•Œé¢ æŒ‰14ä¸€é”®å®‰è£…é€Ÿé” å…¶ä»–è¯´æ˜é»˜è®¤å·²ç»æ·»åŠ å¼€æœºå¯åŠ¨ã€‚ ShadowsocksR é»˜è®¤æ”¯æŒ UDP è½¬å‘ã€‚ æœ¬è„šæœ¬å·²ç»é›†æˆäº† å®‰è£… / å¸è½½ é”é€Ÿ (ServerSpeeder) å¼€å¿ƒç‰ˆï¼Œä½†æ˜¯æ˜¯å¦æ”¯æŒè¯·æŸ¥çœ‹ Linux æ”¯æŒå†…æ ¸åˆ—è¡¨ ã€‚ï¼ˆé”é€Ÿä¸æ”¯æŒ OpenVZï¼‰ å¤šç«¯å£é…ç½®çš„è¯ï¼Œè„šæœ¬å®ç°å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä¸ä¼šåŠ å…¥è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦çš„äººè¿˜æ˜¯æ‰‹åŠ¨æ›´æ”¹ä¸ºå¤šç«¯å£å§ï¼šShadowsocksR å¤šç«¯å£é…ç½® ShadowsocksR ç›®å‰æ”¯æŒçš„åè®®å’Œæ··æ·†ï¼š åè®®ï¼ˆProtocolï¼‰ï¼šoriginï¼Œverify_sha1ï¼Œauth_sha1_v2ï¼Œauth_sha1_v4ï¼Œauth_aes128_md5ï¼Œauth_aes128_sha1æ··æ·†ï¼ˆObfsï¼‰ï¼šplainï¼Œhttp_simpleï¼Œhttp_postï¼Œrandom_headï¼Œtls1.2_ticket_authorigin å’Œ plain æ˜¯åŸç‰ˆï¼ŒåŠ ç²—çš„æ˜¯æ¨èä½¿ç”¨çš„ï¼Œå‡æ”¯æŒ å…¼å®¹åŸç‰ˆï¼ˆä¹Ÿå°±æ˜¯åŠ åç¼€ _compatibleï¼‰ã€‚ å¦‚ä½•ä¿®æ”¹CentOS6å†…æ ¸æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸ åœ¨é”é€ŸServerSpeederæ— é™å¸¦å®½ç‰ˆLinuxä¸€é”®è‡ªåŠ¨å®‰è£…åŒ…æ–‡ç« ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ä¸€é”®åŒ…å®‰è£…é”é€Ÿï¼Œä¼˜åŒ–æœåŠ¡å™¨ç½‘ç»œé€Ÿåº¦ã€‚å…¶å®è¦æƒ³åœ¨è‡ªå·±çš„VPSå®‰è£…é”é€Ÿï¼Œé¦–å…ˆå†…æ ¸å¿…é¡»è¦åŒ¹é…é”é€Ÿç‰ˆæœ¬ã€‚å¦‚æœå†…æ ¸ä¸æ”¯æŒå®‰è£…é”é€Ÿï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å†…æ ¸ä¸ºæ”¯æŒå®‰è£…é”é€Ÿç‰ˆæœ¬ï¼Œä¸è¿‡OpenVZè™šæ‹ŸæŠ€æœ¯æ¶è®¾çš„VPSæ˜¯æ— æ³•æ˜¯æ— æ³•æ›´æ¢å†…æ ¸ï¼Œå¦å¤–å¹¶ä¸æ˜¯æ‰€æœ‰çš„XENå’ŒKVMè™šæ‹ŸæŠ€æœ¯æ¶è®¾çš„VPSéƒ½æ”¯æŒæ›´æ¢å†…æ ¸ï¼ŒåƒLinode VPSå°±ä¸æ”¯æŒä»¥ä¸‹æ–¹æ³•ä¿®æ”¹ï¼Œéœ€åœ¨VPSç®¡ç†é¡µé¢ä¿®æ”¹ï¼ˆLinode VPSå¦‚ä½•åœ¨ç®¡ç†é¡µé¢æ›´æ¢å†…æ ¸ï¼‰ã€‚ CentOS 6æ”¯æŒå®‰è£…é”é€Ÿçš„å†…æ ¸ï¼š2.6.32-504.3.3.el6.x86_64 1ã€é¦–å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤ä¸ºè‡ªå·±çš„VPSä¸‹è½½å®‰è£…å†…æ ¸ã€‚1234uname -r #æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬rpm -ivh http://xz.wn789.com/CentOSkernel/kernel-firmware-2.6.32-504.3.3.el6.noarch.rpmrpm -ivh http://xz.wn789.com/CentOSkernel/kernel-2.6.32-504.3.3.el6.x86_64.rpm --force 2ã€æ‰§è¡Œå‘½ä»¤â€œrpm -qa | grep kernelâ€ï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦å®‰è£…æˆåŠŸã€‚å¦‚æœæ˜¾ç¤ºä½ å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚12rpm -qa | grep kernel 3ã€é‡å¯VPSï¼ŒæŸ¥çœ‹å†…æ ¸æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚123reboot #é‡å¯VPSuname -r #å½“å‰ä½¿ç”¨å†…æ ¸ç‰ˆæœ¬ æœ€å","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"å°é£æœº","slug":"å°é£æœº","permalink":"http://mariogogogo.github.io/tags/%E5%B0%8F%E9%A3%9E%E6%9C%BA/"}]},{"title":"webpack4.0 å‡çº§","slug":"webpack4.0 å‡çº§","date":"2018-10-25T16:00:00.000Z","updated":"2020-09-16T09:07:58.000Z","comments":true,"path":"2018/10/26/webpack4.0 å‡çº§/","link":"","permalink":"http://mariogogogo.github.io/2018/10/26/webpack4.0%20%E5%8D%87%E7%BA%A7/","excerpt":"webpack3.0â€”â€“&gt;4.0çš„å‡çº§","text":"webpack3.0â€”â€“&gt;4.0çš„å‡çº§packjson.js webpack.js","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"Reactå¦‚ä½•æ¸²æŸ“å¤§æ•°æ®é‡çš„åˆ—è¡¨","slug":"Reactå¦‚ä½•æ¸²æŸ“å¤§æ•°æ®é‡çš„åˆ—è¡¨","date":"2018-10-24T16:00:00.000Z","updated":"2020-09-16T09:07:45.000Z","comments":true,"path":"2018/10/25/Reactå¦‚ä½•æ¸²æŸ“å¤§æ•°æ®é‡çš„åˆ—è¡¨/","link":"","permalink":"http://mariogogogo.github.io/2018/10/25/React%E5%A6%82%E4%BD%95%E6%B8%B2%E6%9F%93%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E7%9A%84%E5%88%97%E8%A1%A8/","excerpt":"æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™ç§éœ€æ±‚ï¼Œæ ¹æ®æ•°æ®å±•ç¤ºåˆ—è¡¨ã€‚è¿™ç§ä»£ç ä¼°è®¡ä½ å·²ç»æ’¸è¿‡æˆç™¾ä¸Šåƒæ¬¡äº†ã€‚ ä½†å¦‚æœä½ éœ€è¦åŒæ—¶å±•ç¤ºæˆåƒä¸Šä¸‡æ¡æ•°æ®å‘¢ï¼Œå¿…ç„¶ä¼šé€ æˆæµè§ˆå™¨å¡é¡¿ï¼Œä¸¢å¸§ï¼Œç”šè‡³å¡æ­»çš„é—®é¢˜ã€‚ç°åœ¨ä»‹ç»åˆ©ç”¨react-virtualizedæ¥é«˜æ•ˆæ¸²æŸ“å¤§æ•°æ®é‡åˆ—è¡¨ã€‚","text":"æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™ç§éœ€æ±‚ï¼Œæ ¹æ®æ•°æ®å±•ç¤ºåˆ—è¡¨ã€‚è¿™ç§ä»£ç ä¼°è®¡ä½ å·²ç»æ’¸è¿‡æˆç™¾ä¸Šåƒæ¬¡äº†ã€‚ ä½†å¦‚æœä½ éœ€è¦åŒæ—¶å±•ç¤ºæˆåƒä¸Šä¸‡æ¡æ•°æ®å‘¢ï¼Œå¿…ç„¶ä¼šé€ æˆæµè§ˆå™¨å¡é¡¿ï¼Œä¸¢å¸§ï¼Œç”šè‡³å¡æ­»çš„é—®é¢˜ã€‚ç°åœ¨ä»‹ç»åˆ©ç”¨react-virtualizedæ¥é«˜æ•ˆæ¸²æŸ“å¤§æ•°æ®é‡åˆ—è¡¨ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªReact åº”ç”¨12345678create-react-app virtualizationcd virtualizationnpm install --save lorem-ipsum //å¼•å…¥ç¬¬ä¸‰æ–¹åº“lorem-ipsumæ¥ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼šimport loremIpsum from &#x27;lorem-ipsum&#x27;; æ¥ä¸‹æ¥åˆ›é€ ä¸€ä¸ª1000æ¡æ•°æ®çš„æ•°ç»„ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051const rowCount = 1000;class App extends Component &#123; constructor() &#123; super(); this.list = Array(rowCount).fill().map((val, idx) =&gt; &#123; return &#123; id: idx, name: &#x27;John Doe&#x27;, image: &#x27;http://via.placeholder.com/40&#x27;, text: loremIpsum(&#123; count: 1, units: &#x27;sentences&#x27;, sentenceLowerBound: 4, sentenceUpperBound: 8 &#125;) &#125; &#125;); &#125; render() &#123; return ( &lt;div className=&quot;App&quot;&gt; &lt;header className=&quot;App-header&quot;&gt; &lt;img src=&#123;logo&#125; className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt; &lt;h1 className=&quot;App-title&quot;&gt;Welcome to React&lt;/h1&gt; &lt;/header&gt; &lt;div className=&quot;list&quot;&gt; &#123;this.list.map(this.renderRow.bind(this))&#125; &lt;/div&gt; &lt;/div&gt; );&#125;renderRow(item) &#123; return ( &lt;div key=&#123;item.id&#125; className=&quot;row&quot;&gt; &lt;div className=&quot;image&quot;&gt; &lt;img src=&#123;item.image&#125; alt=&quot;&quot; /&gt; &lt;/div&gt; &lt;div className=&quot;content&quot;&gt; &lt;div&gt;&#123;item.name&#125;&lt;/div&gt; &lt;div&gt;&#123;item.text&#125;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; );&#125;&#125; åœ¨ src/App.css ä¸­åŠ ç‚¹æ ·å¼ï¼š1234567891011121314151617181920.list &#123; padding: 10px;&#125;.row &#123; border-bottom: 1px solid #ebeced; text-align: left; margin: 5px 0; display: flex; align-items: center;&#125;.image &#123; margin-right: 10px;&#125;.content &#123; padding: 10px;&#125; ä¸‹é¢æˆ‘ä»¬ç”¨Chromeï¼Œåªéœ€å‡ æ­¥ï¼Œå¿«é€Ÿæµ‹è¯•æ€§èƒ½ï¼š æ‰“å¼€å¼€å‘è€…å·¥å…· æŒ‰Command+Shift+P (Mac) or Control+Shift+P (Windows, Linux) æ¥æ‰“å¼€å‘½ä»¤èœå• è¾“å…¥ renderï¼Œä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© Show Renderingã€‚ ç‚¹å‡» render é¡µç­¾ï¼ŒFPS Meter å‰æ‰“é’©ã€‚ æ»šåŠ¨åˆ—è¡¨ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æ»šåŠ¨æ¡æ»šåŠ¨çš„æ—¶å€™ï¼Œå¸§ç‡ä»60æ‰åˆ°äº†38å·¦å³ã€‚è¿™è¿˜æ˜¯åªæœ‰1000æ¡æ•°æ®æƒ…å†µï¼Œå¦‚æœå†å¢å¤§æ•°æ®ï¼Œæµè§ˆå™¨ä¼šå‡ºç°å¡é¡¿ï¼Œç”šè‡³å¡æ­»ã€‚ æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹react-virtualizedæ˜¯å¦‚ä½•æé«˜æ€§èƒ½çš„ï¼Ÿ react-virtualizedåŸç†æ ¸å¿ƒåŸç†ï¼šåªæ¸²æŸ“ä½ æ‰€è§çš„ã€‚ä¸Šé¢çš„åº”ç”¨æ¸²æŸ“äº†1000æ¡è¯„è®ºï¼Œä½†å±å¹•åªä¸ºä½ å±•ç¤ºäº†10æ¥æ¡æ•°æ®ï¼Œé‚£å¦å¤–990æ¡çš„æ¸²æŸ“å°±æ˜¯æµªè´¹çš„ã€‚å¦‚æœæˆ‘ä»¬åªæ¸²æŸ“å¯è§çš„è¯„è®ºï¼Œå½“é¼ æ ‡æ»šåŠ¨æŸ¥çœ‹æ›´å¤šçš„æ—¶å€™ï¼Œå°†æ–°çš„èŠ‚ç‚¹æ›¿æ¢æ—§çš„èŠ‚ç‚¹ã€‚è¿™æ ·å°±å®Œç¾è§£å†³äº†æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ã€‚ ä¿®æ”¹app.js12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364import React, &#123; Component &#125; from &quot;react&quot;;import loremIpsum from &quot;lorem-ipsum&quot;;import &#123; List &#125; from &quot;react-virtualized&quot;;const rowCount = 1000; //æ€»æ¡æ•°const listHeight = 1000;const rowHeight = 100;const rowWidth = 800;class App extends Component &#123; constructor() &#123; super(); this.list = Array(rowCount) .fill() .map((val, idx) =&gt; &#123; return &#123; id: idx, name: &quot;John Doe&quot;, image: &quot;http://via.placeholder.com/40&quot;, text: loremIpsum(&#123; count: 1, units: &quot;sentences&quot;, sentenceLowerBound: 4, sentenceUpperBound: 8 &#125;) &#125;; &#125;); &#125; render() &#123; return ( &lt;div className=&quot;list&quot;&gt; &lt;div className=&quot;list&quot;&gt; &lt;List width=&#123;rowWidth&#125; height=&#123;listHeight&#125; rowHeight=&#123;rowHeight&#125; rowRenderer=&#123;this.renderRow.bind(this)&#125; rowCount=&#123;this.list.length&#125; /&gt; &lt;/div&gt; &lt;/div&gt; ); &#125; renderRow(&#123; index, key, style &#125;) &#123; return ( &lt;div key=&#123;key&#125; style=&#123;style&#125; className=&quot;row&quot;&gt; &lt;div className=&quot;image&quot;&gt; &lt;img src=&#123;this.list[index].image&#125; alt=&quot;&quot; /&gt; &lt;/div&gt; &lt;div className=&quot;content&quot;&gt; &lt;div&gt;&#123;this.list[index].name&#125;&lt;/div&gt; &lt;div&gt;&#123;this.list[index].text&#125;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ); &#125;&#125;export default App; æ€§èƒ½æ˜æ˜¾æå‡ğŸ’ªğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"}]},{"title":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆå››ï¼‰","slug":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆå››ï¼‰","date":"2018-10-23T16:00:00.000Z","updated":"2020-09-16T09:07:15.000Z","comments":true,"path":"2018/10/24/ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆå››ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/10/24/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!%EF%BC%88%E5%9B%9B%EF%BC%89/","excerpt":"å†™ä¸ªæœ€ç®€å•çš„APIå§","text":"å†™ä¸ªæœ€ç®€å•çš„APIå§ å…ˆå†™ä¸ªapp.js å†å†™routes.js æœ€åå†è°ƒç”¨user.js 1node app.js","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"androidçŠ¶æ€æ ä¸èƒŒæ™¯å›¾ç‰‡çš„èåˆ","slug":"AndroidçŠ¶æ€æ ä¸èƒŒæ™¯å›¾ç‰‡çš„èåˆ","date":"2018-10-19T16:00:00.000Z","updated":"2020-09-16T09:07:17.000Z","comments":true,"path":"2018/10/20/AndroidçŠ¶æ€æ ä¸èƒŒæ™¯å›¾ç‰‡çš„èåˆ/","link":"","permalink":"http://mariogogogo.github.io/2018/10/20/Android%E7%8A%B6%E6%80%81%E6%A0%8F%E4%B8%8E%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E7%9A%84%E8%9E%8D%E5%90%88/","excerpt":"çŠ¶æ€æ èåˆ","text":"çŠ¶æ€æ èåˆ ä¼˜åŒ–å‰æ•ˆæœ 12345678910/** * å®ç°èƒŒæ™¯ä¸çŠ¶æ€æ èåˆåœ¨ä¸€èµ· androidå¤§äº5.0æ”¯æŒ */if (Build.VERSION.SDK_INT &gt;= 21) &#123; View decorView = getWindow().getDecorView(); int option = View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION ; decorView.setSystemUiVisibility(option); getWindow().setStatusBarColor(Color.TRANSPARENT);//è®¾ç½®çŠ¶æ€æ é€æ˜&#125; ä¼˜åŒ–åæ•ˆæœ å¢åŠ çŠ¶æ€æ é«˜åº¦","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"RecyclerViewâœŒï¸è¿›é˜¶","slug":"RecyclerViewâœŒï¸è¿›é˜¶","date":"2018-10-11T16:00:00.000Z","updated":"2020-09-16T09:07:50.000Z","comments":true,"path":"2018/10/12/RecyclerViewâœŒï¸è¿›é˜¶/","link":"","permalink":"http://mariogogogo.github.io/2018/10/12/RecyclerView%E2%9C%8C%EF%B8%8F%E8%BF%9B%E9%98%B6/","excerpt":"ç°åœ¨åšé¡¹ç›®90%è¦ç”¨åˆ°recyclerView","text":"ç°åœ¨åšé¡¹ç›®90%è¦ç”¨åˆ°recyclerView 1 å¼•å…¥recyclerViewåœ¨moudleä¸­çš„build.gradleæ–‡ä»¶é‡Œï¼Œæ‰¾åˆ°dependenciesï¼Œæ·»åŠ å…³äºrecyclerViewçš„å¼•ç”¨ï¼š 1compile &#x27;com.android.support:recyclerview-v7:24.2.0&#x27; å…¶å®designåŒ…ä¸­å«æœ‰Material Designç›¸å…³çš„å¾ˆå¤šæ§ä»¶ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†recyclerViewçš„ä»£ç ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥é€šè¿‡å¼•ç”¨designåŒ…æ¥ä½¿ç”¨recyclerViewï¼š 1compile &#x27;com.android.support:design:23.2.0&#x27; 2 åœ¨xmlä¸­å†™ä¸€ä¸ªrecyclerViewåœ¨MainActivityä¸­æ·»åŠ ä¸€ä¸ªRecyclerViewè¿›è¡Œå±•ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š 123456... &lt;android.support.v7.widget.RecyclerView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:id=&quot;@+id/recyclerView&quot;/&gt;... 3 åœ¨javaä¸­ç»™recyclerViewè®¾ç½®æ•°æ®åœ¨MainActivityä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); initView(); initData();&#125;private void initData() &#123; ArrayList&lt;String&gt; datas = new ArrayList&lt;&gt;(); for(char i =&#x27;A&#x27;;i&lt;=&#x27;Z&#x27;;i++)&#123; datas.add(i+&quot;&quot;); &#125; mRecyclerView.setAdapter(new MyAdapter(getApplicationContext(),datas));&#125;private void initView() &#123; mRecyclerView = (RecyclerView) findViewById(R.id.recyclerView); //å¿…é¡»è¦æŒ‡å®šå±•ç¤ºçš„æ•ˆæœï¼Œè®¾ç½®ä¸€ä¸ªLayoutManagerï¼Œä¸ç„¶è¿˜æ˜¯ä¼šä¸€ç‰‡ç©ºç™½ LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getApplicationContext()); mRecyclerView.setLayoutManager(linearLayoutManager);&#125; åœ¨MyAdapterä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class MyAdapter extends RecyclerView.Adapter &#123; private ArrayList&lt;String&gt; datas; private Context mContext; public MyAdapter(Context applicationContext, ArrayList&lt;String&gt; datas) &#123; this.datas = datas; this.mContext = applicationContext; &#125; //RecyclerViewçš„Adapterå·²ç»é›†æˆäº†ViewHolder //getViewä¸­çš„ä¸¤æ®µé€»è¾‘ 1 åˆ›å»ºviewå¯¹è±¡ï¼ˆå°†xmlè½¬ä¸ºviewï¼‰ 2 æ‰¾åˆ°viewå¯¹è±¡é‡Œé¢çš„ä¸€äº›æ§ä»¶ï¼Œå¯¹å…¶è¿›è¡Œä¸€äº›å±•ç¤ºçš„è®¾ç½® //onCreateViewHolder ä¸­æ‰§è¡Œç¬¬ä¸€æ®µé€»è¾‘ï¼Œåˆ›å»ºå‡ºviewï¼Œè®¾ç½®åˆ°ä¸€ä¸ªViewHolderä¸­ï¼Œå†å°†holderè¿”å› @Override public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123; //ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºfalseï¼Œå¦‚æœä¸ºtrueçš„è¯ï¼Œç”Ÿæˆçš„è¿™ä¸ªviewå…¶å®å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°æŒ‡å‘çš„parentï¼Œä¼šé€ æˆæŠ¥é”™çš„ View view = LayoutInflater.from(mContext).inflate(R.layout.item_recyclerview, parent,false); MyViewHolder holder = new MyViewHolder(view); return holder; &#125; //ç»™holderé‡Œçš„æ§ä»¶è®¾ç½®æ•°æ® @Override public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) &#123; ((MyViewHolder)holder) .mTextView.setText(datas.get(position)); &#125; //Count æ§åˆ¶æ§ä»¶æœ‰å¤šå°‘ä¸ªitem @Override public int getItemCount() &#123; return datas.size(); &#125;&#125;class MyViewHolder extends RecyclerView.ViewHolder&#123; public TextView mTextView; public MyViewHolder(View itemView) &#123; super(itemView); mTextView = (TextView) itemView.findViewById(R.id.tv_item); &#125;&#125; 4 ç»™recyclerViewè®¾ç½®ä¸åŒçš„å±•ç¤ºæ•ˆæœè®¾ç½®èœå•æ¥æä¾›å¤šä¸ªç‚¹å‡»äº‹ä»¶ã€‚é¦–å…ˆç»™res/menu/menu_main.xmlä¿®æ”¹ä¸ºä»¥ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; tools:context=&quot;com.a520it.recyclerview.MainActivity&quot;&gt; &lt;item android:id=&quot;@+id/action_listview&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;listView&quot; app:showAsAction=&quot;never&quot;/&gt; &lt;item android:id=&quot;@+id/action_gridview&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;gridView&quot; app:showAsAction=&quot;never&quot;/&gt; &lt;item android:id=&quot;@+id/action_hor_gridview&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;æ¨ªå‘çš„gridView&quot; app:showAsAction=&quot;never&quot;/&gt; &lt;item android:id=&quot;@+id/action_stagger&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;äº¤é”™çš„ç€‘å¸ƒæµ&quot; app:showAsAction=&quot;never&quot;/&gt;&lt;/menu&gt; ç„¶ååœ¨MainActivityä¸­ï¼Œä¿®æ”¹èœå•ä»£ç ï¼š 123456789101112131415161718192021222324252627@Overridepublic boolean onOptionsItemSelected(MenuItem item) &#123; int id = item.getItemId(); if (id == R.id.action_listview) &#123; Toast.makeText(MainActivity.this, &quot;listview&quot;, Toast.LENGTH_SHORT).show(); return true; &#125;else if(id == R.id.action_gridview) &#123; GridLayoutManager gridLayoutManager = new GridLayoutManager(getApplicationContext(), 3); mRecyclerView.setLayoutManager(gridLayoutManager); Toast.makeText(MainActivity.this, &quot;gridview&quot;, Toast.LENGTH_SHORT).show(); return true; &#125;else if(id == R.id.action_hor_gridview) &#123; GridLayoutManager gridLayoutManager = new GridLayoutManager(getApplicationContext(), 3,GridLayoutManager.HORIZONTAL,true); mRecyclerView.setLayoutManager(gridLayoutManager); Toast.makeText(MainActivity.this, &quot;æ¨ªå‘çš„gridview&quot;, Toast.LENGTH_SHORT).show(); return true; &#125;else if(id == R.id.action_stagger) &#123; StaggeredGridLayoutManager staggeredGridLayoutManager = new StaggeredGridLayoutManager(3, StaggeredGridLayoutManager.HORIZONTAL); mRecyclerView.setLayoutManager(staggeredGridLayoutManager); Toast.makeText(MainActivity.this, &quot;äº¤é”™çš„ç€‘å¸ƒæµ&quot;, Toast.LENGTH_SHORT).show(); return true; &#125; return super.onOptionsItemSelected(item);&#125; å…¶å®å°±æ˜¯è®¾ç½®äº†ä¸åŒçš„LayoutManagerç»™RecyclerViewè€Œå·²ã€‚ 5 ç»™RecyclerViewæ·»åŠ ç‚¹å‡»æ•ˆæœRecyclerViewæ²¡æœ‰æä¾›OnItemClickç›¸å…³çš„itemç‚¹å‡»æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å»å®ç°ã€‚è¿™é‡Œæ˜¯é€šè¿‡åœ¨Adapterä¸­å»å®ç°çš„ã€‚åœ¨Adapterä¸­å…ˆè‡ªå®šä¹‰ä¸€ä¸ªOnItemClickListenerï¼Œç„¶ååœ¨Adapterä¸­çš„onBindViewHolderæ–¹æ³•ä¸­ï¼Œç»™holder.itemViewè®¾ç½®OnClickListenerï¼Œå¹¶åœ¨OnClickListenerçš„ç‚¹å‡»æ–¹æ³•ä¸­ï¼Œè°ƒç”¨è‡ªå®šä¹‰çš„OnItemClickListenerã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223 //ç»™holderé‡Œçš„æ§ä»¶è®¾ç½®æ•°æ® @Override public void onBindViewHolder(final RecyclerView.ViewHolder holder, final int position) &#123; ((MyViewHolder)holder) .mTextView.setText(datas.get(position)); //ç»™itemæ·»åŠ ä¸€ä¸ªç‚¹å‡» holder.itemView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123;// Toast.makeText(mContext, &quot;ç‚¹å‡»äº†item&quot;+position, Toast.LENGTH_SHORT).show(); mOnItemClickListener.onItemClick(position,holder.itemView); &#125; &#125;); &#125; public void setOnItemClickListener(OnItemClickListener onItemClickListener)&#123; this.mOnItemClickListener = onItemClickListener; &#125; private OnItemClickListener mOnItemClickListener = null; public interface OnItemClickListener&#123; void onItemClick(int position,View itemView); &#125; ç„¶ååœ¨MainActivityä¸­è®¾ç½®è‡ªå®šä¹‰çš„OnItemClickListenerå³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789private void initData() &#123; .... myAdapter.setOnItemClickListener(new MyAdapter.OnItemClickListener() &#123; @Override public void onItemClick(int position, View itemView) &#123; Toast.makeText(MainActivity.this, &quot;position: &quot;+position, Toast.LENGTH_SHORT).show(); &#125; &#125;);&#125; 6 ç»™RecyclerViewè®¾ç½®åŠ¨ç”»æ•ˆæœç»™èœå•å†æ·»åŠ ä¸¤ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ—¶å°±æ’å…¥ã€åˆ é™¤æ•°æ®ã€‚ä¿®æ”¹menu_main.xmlä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; tools:context=&quot;com.a520it.recyclerview.MainActivity&quot;&gt; ... &lt;item android:id=&quot;@+id/action_add&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;add&quot; android:icon=&quot;@drawable/ic_menu_add&quot; app:showAsAction=&quot;always&quot;/&gt; &lt;item android:id=&quot;@+id/action_delete&quot; android:orderInCategory=&quot;100&quot; android:title=&quot;delete&quot; android:icon=&quot;@drawable/ic_menu_delete&quot; app:showAsAction=&quot;always&quot;/&gt;&lt;/menu&gt; åœ¨MainActivityä¸­è®¾ç½®onOptionsItemSelectedæ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314@Overridepublic boolean onOptionsItemSelected(MenuItem item) &#123; int id = item.getItemId(); ....else if(id == R.id.action_add) &#123; mMyAdapter.addItem(1,&quot;B&quot;); Toast.makeText(MainActivity.this, &quot;add&quot;, Toast.LENGTH_SHORT).show(); return true; &#125;else if(id == R.id.action_delete) &#123; mMyAdapter.deleteItem(3); Toast.makeText(MainActivity.this, &quot;delete&quot;, Toast.LENGTH_SHORT).show(); return true; &#125; return super.onOptionsItemSelected(item);&#125; æ’å…¥ã€åˆ é™¤æ•°æ®çš„ä»£ç å†™åœ¨MyAdapteré‡Œï¼š 1234567891011 public void addItem(int position,String str)&#123; datas.add(position,str);// notifyDataSetChanged(); notifyItemInserted(position); &#125; public void deleteItem(int position)&#123; datas.remove(position);// notifyDataSetChanged(); notifyItemRemoved(position); &#125; 7 ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿RecyclerViewä¸åƒListViewï¼Œå®ƒæ²¡æœ‰å·²è®¾ç½®å¥½çš„åˆ†å‰²çº¿ï¼Œéœ€è¦è‡ªå·±å¤„ç†ã€‚ç»™RecyclerViewè®¾ç½®åˆ†å‰²çº¿éœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š 12345678910111213141516mRecyclerView.addItemDecoration(new RecyclerView.ItemDecoration() &#123; String str = &quot;æˆ‘æ˜¯åˆ†å‰²çº¿&quot;; @Override public void onDraw(Canvas c, RecyclerView parent, RecyclerView.State state) &#123; .... c.drawText(str,left,top,paint); &#125; &#125; @Override public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) &#123; //é€šè¿‡outRectè®¾ç½®å„ä¸ªitemä¹‹é—´çš„ä½ç§»é—´è· outRect.set(0,0,0,getStringHeight(paint)); &#125; &#125;);","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²","slug":"RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²","date":"2018-10-10T16:00:00.000Z","updated":"2020-09-16T09:07:51.000Z","comments":true,"path":"2018/10/11/RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²/","link":"","permalink":"http://mariogogogo.github.io/2018/10/11/RecyclerView%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%F0%9F%98%B2/","excerpt":"RecyclerViewç®€å•ä½¿ç”¨ğŸ˜²","text":"RecyclerViewç®€å•ä½¿ç”¨ğŸ˜² åŸºæœ¬ä½¿ç”¨ï¼š1.ä½¿ç”¨å‰éœ€è¦åœ¨åœ¨gradleä¸­æ·»åŠ ä¾èµ–1implementation &#x27;com.android.support:recyclerview-v7:27.0.2&#x27;2.ç¼–å†™ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨Xmlä¸­å†™RecyclerViewçš„å¸ƒå±€ï¼Œ12345&lt;android.support.v7.widget.RecyclerView android:id=&quot;@+id/recyclerView&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;/&gt;3.ç„¶ååœ¨activityä¸­è·å–RecyclerViewï¼Œå¹¶è®¾ç½®LayoutManagerä»¥åŠadapter1234567891011//é€šè¿‡findViewByIdæ‹¿åˆ°RecyclerViewå®ä¾‹mRecyclerView = findViewById(R.id.recyclerView);//è®¾ç½®RecyclerViewç®¡ç†å™¨mRecyclerView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false));//åˆå§‹åŒ–é€‚é…å™¨mAdapter = new MyRecyclerViewAdapter(list); //è®¾ç½®æ·»åŠ æˆ–åˆ é™¤itemæ—¶çš„åŠ¨ç”»ï¼Œè¿™é‡Œä½¿ç”¨é»˜è®¤åŠ¨ç”»mRecyclerView.setItemAnimator(new DefaultItemAnimator());//è®¾ç½®é€‚é…å™¨mRecyclerView.setAdapter(mAdapter);ä¸‹é¢æ˜¯MyRecyclerViewAdapterçš„ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.sharejoys.recyclerviewdemo.actvity; import android.support.v7.widget.RecyclerView;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.TextView; import com.sharejoys.recyclerviewdemo.R; import java.util.List; public class MyRecyclerViewAdapterextends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; &#123; private List&lt;String&gt; list; public MyAdapter(List&lt;String&gt; list) &#123; this.list = list; &#125; @Override public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123; View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_base_use, parent, false); MyAdapter.ViewHolder viewHolder = new MyAdapter.ViewHolder(view); return viewHolder; &#125; @Override public void onBindViewHolder(MyAdapter.ViewHolder holder, int position) &#123; holder.mText.setText(list.get(position)); &#125; @Override public int getItemCount() &#123; return list.size(); &#125; class ViewHolder extends RecyclerView.ViewHolder &#123; TextView mText; ViewHolder(View itemView) &#123; super(itemView); mText = itemView.findViewById(R.id.item_tx); &#125; &#125;&#125; è®¾ç½®æ¨ªå‘å¸ƒå±€ï¼š12mRecyclerView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false));","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"è§£å†³ScrollViewåº•éƒ¨æœ‰å¸ƒå±€ä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜","slug":"è§£å†³ScrollViewåº•éƒ¨æœ‰å¸ƒå±€ä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜","date":"2018-10-09T16:00:00.000Z","updated":"2020-09-16T09:07:06.000Z","comments":true,"path":"2018/10/10/è§£å†³ScrollViewåº•éƒ¨æœ‰å¸ƒå±€ä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜/","link":"","permalink":"http://mariogogogo.github.io/2018/10/10/%E8%A7%A3%E5%86%B3ScrollView%E5%BA%95%E9%83%A8%E6%9C%89%E5%B8%83%E5%B1%80%E4%B8%8D%E8%83%BD%E6%BB%91%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"ä»Šå¤©åœ¨åšé¡¹ç›®æ—¶ç”¨åˆ°ScrollView,æˆ‘å‘ç°å¦‚æœåœ¨ScrollViewæ§ä»¶ä¹‹åæ²¡æœ‰åˆ«çš„å¸ƒå±€æ—¶å®ƒèƒ½æ­£å¸¸æ»‘åŠ¨.ä½†æ˜¯å¦‚æœåº•éƒ¨æœ‰åŠŸèƒ½æŒ‰é’®,æ¯”å¦‚ä¸‹å›¾è¿™æ ·å°±ä¸èƒ½æ˜¾ç¤ºå®Œå…¨.","text":"ä»Šå¤©åœ¨åšé¡¹ç›®æ—¶ç”¨åˆ°ScrollView,æˆ‘å‘ç°å¦‚æœåœ¨ScrollViewæ§ä»¶ä¹‹åæ²¡æœ‰åˆ«çš„å¸ƒå±€æ—¶å®ƒèƒ½æ­£å¸¸æ»‘åŠ¨.ä½†æ˜¯å¦‚æœåº•éƒ¨æœ‰åŠŸèƒ½æŒ‰é’®,æ¯”å¦‚ä¸‹å›¾è¿™æ ·å°±ä¸èƒ½æ˜¾ç¤ºå®Œå…¨. è§£å†³åŠæ³•å¿…é¡»çŸ¥é“åº•éƒ¨èœå•çš„é«˜åº¦ ç„¶åå°± ä»£ç å¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;!--å¤´éƒ¨--&gt; &lt;RelativeLayout android:id=&quot;@+id/layout_me_header&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;#008cc9&quot;&gt; &lt;Button android:id=&quot;@+id/login_btn&quot; android:layout_width=&quot;66dp&quot; android:layout_height=&quot;66dp&quot; android:background=&quot;@mipmap/login_btn&quot; android:layout_centerHorizontal=&quot;true&quot;/&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;horizontal&quot; android:layout_below=&quot;@+id/login_btn&quot; android:layout_marginBottom=&quot;10dp&quot; &gt; &lt;LinearLayout android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;vertical&quot; android:layout_weight=&quot;1&quot; android:gravity=&quot;center&quot;&gt; &lt;ImageView android:layout_width=&quot;30dp&quot; android:layout_height=&quot;30dp&quot; android:src=&quot;@mipmap/me_menu_yh&quot;/&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;æ”¶è—&quot;/&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:layout_weight=&quot;1&quot; android:gravity=&quot;center&quot; android:orientation=&quot;vertical&quot;&gt; &lt;ImageView android:layout_width=&quot;30dp&quot; android:layout_height=&quot;30dp&quot; android:src=&quot;@mipmap/me_menu_go&quot;/&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;è´­ç‰©åˆ¸&quot;/&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;vertical&quot; android:layout_weight=&quot;1&quot; android:gravity=&quot;center&quot;&gt; &lt;ImageView android:layout_width=&quot;30dp&quot; android:layout_height=&quot;30dp&quot; android:src=&quot;@mipmap/me_menu_sail&quot;/&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;ä¼˜æƒ åˆ¸&quot;/&gt; &lt;/LinearLayout&gt; &lt;/LinearLayout&gt; &lt;/RelativeLayout&gt; &lt;!--ç©ºç™½å ä½ç¬¦--&gt; &lt;RelativeLayout android:id=&quot;@+id/layout_me_bottom&quot; android:layout_width=&quot;match_parent&quot; android:layout_alignParentBottom=&quot;true&quot; android:layout_height=&quot;70dp&quot;&gt; &lt;/RelativeLayout&gt; &lt;!--æ»šåŠ¨åˆ—è¡¨ åŠŸèƒ½åŒº--&gt; &lt;ScrollView android:layout_below=&quot;@+id/layout_me_header&quot; android:layout_above=&quot;@+id/layout_me_bottom&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; &gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;#fff&quot; android:paddingTop=&quot;6dp&quot; &gt; &lt;ImageView android:layout_width=&quot;40dp&quot; android:layout_height=&quot;40dp&quot; android:src=&quot;@mipmap/list_save&quot; android:layout_gravity=&quot;center_vertical&quot; android:layout_marginLeft=&quot;10dp&quot; android:layout_marginRight=&quot;10dp&quot;/&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;TextView android:id=&quot;@+id/text_my_save&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;æˆ‘çš„æ”¶è—&quot; android:textSize=&quot;28sp&quot; /&gt; &lt;View android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;1dp&quot; android:background=&quot;#ccc&quot; android:layout_below=&quot;@+id/text_my_save&quot; android:paddingTop=&quot;8dp&quot; android:layout_marginRight=&quot;10dp&quot; /&gt; &lt;/RelativeLayout&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;#fff&quot; android:paddingTop=&quot;6dp&quot; &gt; &lt;ImageView android:layout_width=&quot;40dp&quot; android:layout_height=&quot;40dp&quot; android:src=&quot;@mipmap/list_pwd&quot; android:layout_gravity=&quot;center_vertical&quot; android:layout_marginLeft=&quot;10dp&quot; android:layout_marginRight=&quot;10dp&quot;/&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;TextView android:id=&quot;@+id/text_my_pwd&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;æˆ‘çš„å£ä»¤&quot; android:textSize=&quot;28sp&quot; /&gt; &lt;View android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;1dp&quot; android:background=&quot;#ccc&quot; android:layout_below=&quot;@+id/text_my_pwd&quot; android:paddingTop=&quot;10dp&quot; android:layout_marginRight=&quot;10dp&quot; /&gt; &lt;/RelativeLayout&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;#fff&quot; android:paddingTop=&quot;6dp&quot; android:paddingBottom=&quot;6dp&quot; &gt; &lt;ImageView android:layout_width=&quot;40dp&quot; android:layout_height=&quot;40dp&quot; android:src=&quot;@mipmap/list_safe_center&quot; android:layout_gravity=&quot;center_vertical&quot; android:layout_marginLeft=&quot;10dp&quot; android:layout_marginRight=&quot;10dp&quot;/&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;TextView android:id=&quot;@+id/text_my_safecenter&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;æˆ‘çš„é”¦å›Š&quot; android:textSize=&quot;28sp&quot; /&gt; &lt;/RelativeLayout&gt; &lt;/LinearLayout&gt; &lt;/LinearLayout&gt; &lt;/ScrollView&gt;&lt;/RelativeLayout&gt;","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"ListViewçš„ä½¿ç”¨","slug":"Androidé¢œè‰²è®¾ç½®çš„å‡ ç§æ–¹æ³•","date":"2018-10-03T16:00:00.000Z","updated":"2020-09-16T09:07:17.000Z","comments":true,"path":"2018/10/04/Androidé¢œè‰²è®¾ç½®çš„å‡ ç§æ–¹æ³•/","link":"","permalink":"http://mariogogogo.github.io/2018/10/04/Android%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/","excerpt":"classä¸­è®¾ç½® ä»Šå¤©ä¸»è¦è®°å½•è¿™ä¸ª","text":"classä¸­è®¾ç½® ä»Šå¤©ä¸»è¦è®°å½•è¿™ä¸ªåˆ©ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é¢œè‰²ç±»tx.setTextColor(android.graphics.Color.RED);åˆ©ç”¨æ•°å­—è®¾ç½®tx.setTextColor(0xffff00f);åˆ©ç”¨xmlä¸­å·²ç»å®šä¹‰å¥½çš„é¢œè‰²ä»£ç tx.setTextColor(getResources().getColor(R.color.red));åˆ©ç”¨16è¿›åˆ¶ å­—ç¬¦ä¸²tx.setTextColor(Color.parseColor(â€œ#FFFFFFâ€)); é™„ä¸Šä¸€æ®µé¢œè‰²ä»£ç ã€‚ä»¥ä¾›å‚è€ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;resources&gt; &lt;color name=&quot;white&quot;&gt;#FFFFFF&lt;/color&gt; &lt;!--ç™½è‰² --&gt; &lt;color name=&quot;ivory&quot;&gt;#FFFFF0&lt;/color&gt; &lt;!--è±¡ç‰™è‰² --&gt; &lt;color name=&quot;lightyellow&quot;&gt;#FFFFE0&lt;/color&gt; &lt;!--äº®é»„è‰² --&gt; &lt;color name=&quot;yellow&quot;&gt;#FFFF00&lt;/color&gt; &lt;!--é»„è‰² --&gt; &lt;color name=&quot;snow&quot;&gt;#FFFAFA&lt;/color&gt; &lt;!--é›ªç™½è‰² --&gt; &lt;color name=&quot;floralwhite&quot;&gt;#FFFAF0&lt;/color&gt; &lt;!--èŠ±ç™½è‰² --&gt; &lt;color name=&quot;lemonchiffon&quot;&gt;#FFFACD&lt;/color&gt; &lt;!--æŸ æª¬ç»¸è‰² --&gt; &lt;color name=&quot;cornsilk&quot;&gt;#FFF8DC&lt;/color&gt; &lt;!--ç±³ç»¸è‰² --&gt; &lt;color name=&quot;seashell&quot;&gt;#FFF5EE&lt;/color&gt; &lt;!--æµ·è´è‰² --&gt; &lt;color name=&quot;lavenderblush&quot;&gt;#FFF0F5&lt;/color&gt; &lt;!--æ·¡ç´«çº¢ --&gt; &lt;color name=&quot;papayawhip&quot;&gt;#FFEFD5&lt;/color&gt; &lt;!--ç•ªæœ¨è‰² --&gt; &lt;color name=&quot;blanchedalmond&quot;&gt;#FFEBCD&lt;/color&gt; &lt;!--ç™½æè‰² --&gt; &lt;color name=&quot;mistyrose&quot;&gt;#FFE4E1&lt;/color&gt; &lt;!--æµ…ç«ç‘°è‰² --&gt; &lt;color name=&quot;bisque&quot;&gt;#FFE4C4&lt;/color&gt; &lt;!--æ¡”é»„è‰² --&gt; &lt;color name=&quot;moccasin&quot;&gt;#FFE4B5&lt;/color&gt; &lt;!--é¹¿çš®è‰² --&gt; &lt;color name=&quot;navajowhite&quot;&gt;#FFDEAD&lt;/color&gt; &lt;!--çº³ç“¦ç™½ --&gt; &lt;color name=&quot;peachpuff&quot;&gt;#FFDAB9&lt;/color&gt; &lt;!--æ¡ƒè‰² --&gt; &lt;color name=&quot;gold&quot;&gt;#FFD700&lt;/color&gt; &lt;!--é‡‘è‰² --&gt; &lt;color name=&quot;pink&quot;&gt;#FFC0CB&lt;/color&gt; &lt;!--ç²‰çº¢è‰² --&gt; &lt;color name=&quot;lightpink&quot;&gt;#FFB6C1&lt;/color&gt; &lt;!--äº®ç²‰çº¢è‰² --&gt; &lt;color name=&quot;orange&quot;&gt;#FFA500&lt;/color&gt; &lt;!--æ©™è‰² --&gt; &lt;color name=&quot;lightsalmon&quot;&gt;#FFA07A&lt;/color&gt; &lt;!--äº®è‚‰è‰² --&gt; &lt;color name=&quot;darkorange&quot;&gt;#FF8C00&lt;/color&gt; &lt;!--æš—æ¡”é»„è‰² --&gt; &lt;color name=&quot;coral&quot;&gt;#FF7F50&lt;/color&gt; &lt;!--çŠç‘šè‰² --&gt; &lt;color name=&quot;hotpink&quot;&gt;#FF69B4&lt;/color&gt; &lt;!--çƒ­ç²‰çº¢è‰² --&gt; &lt;color name=&quot;tomato&quot;&gt;#FF6347&lt;/color&gt; &lt;!--è¥¿çº¢æŸ¿è‰² --&gt; &lt;color name=&quot;orangered&quot;&gt;#FF4500&lt;/color&gt; &lt;!--çº¢æ©™è‰² --&gt; &lt;color name=&quot;deeppink&quot;&gt;#FF1493&lt;/color&gt; &lt;!--æ·±ç²‰çº¢è‰² --&gt; &lt;color name=&quot;fuchsia&quot;&gt;#FF00FF&lt;/color&gt; &lt;!--ç´«çº¢è‰² --&gt; &lt;color name=&quot;magenta&quot;&gt;#FF00FF&lt;/color&gt; &lt;!--çº¢ç´«è‰² --&gt; &lt;color name=&quot;red&quot;&gt;#FF0000&lt;/color&gt; &lt;!--çº¢è‰² --&gt; &lt;color name=&quot;oldlace&quot;&gt;#FDF5E6&lt;/color&gt; &lt;!--è€èŠ±è‰² --&gt; &lt;color name=&quot;lightgoldenrodyellow&quot;&gt;#FAFAD2&lt;/color&gt; &lt;!--äº®é‡‘é»„è‰² --&gt; &lt;color name=&quot;linen&quot;&gt;#FAF0E6&lt;/color&gt; &lt;!--äºšéº»è‰² --&gt; &lt;color name=&quot;antiquewhite&quot;&gt;#FAEBD7&lt;/color&gt; &lt;!--å¤è‘£ç™½ --&gt; &lt;color name=&quot;salmon&quot;&gt;#FA8072&lt;/color&gt; &lt;!--é²œè‚‰è‰² --&gt; &lt;color name=&quot;ghostwhite&quot;&gt;#F8F8FF&lt;/color&gt; &lt;!--å¹½çµç™½ --&gt; &lt;color name=&quot;mintcream&quot;&gt;#F5FFFA&lt;/color&gt; &lt;!--è–„è·è‰² --&gt; &lt;color name=&quot;whitesmoke&quot;&gt;#F5F5F5&lt;/color&gt; &lt;!--çƒŸç™½è‰² --&gt; &lt;color name=&quot;beige&quot;&gt;#F5F5DC&lt;/color&gt; &lt;!--ç±³è‰² --&gt; &lt;color name=&quot;wheat&quot;&gt;#F5DEB3&lt;/color&gt; &lt;!--æµ…é»„è‰² --&gt; &lt;color name=&quot;sandybrown&quot;&gt;#F4A460&lt;/color&gt; &lt;!--æ²™è¤è‰² --&gt; &lt;color name=&quot;azure&quot;&gt;#F0FFFF&lt;/color&gt; &lt;!--å¤©è“è‰² --&gt; &lt;color name=&quot;honeydew&quot;&gt;#F0FFF0&lt;/color&gt; &lt;!--èœœè‰² --&gt; &lt;color name=&quot;aliceblue&quot;&gt;#F0F8FF&lt;/color&gt; &lt;!--è‰¾åˆ©æ–¯å…° --&gt; &lt;color name=&quot;khaki&quot;&gt;#F0E68C&lt;/color&gt; &lt;!--é»„è¤è‰² --&gt; &lt;color name=&quot;lightcoral&quot;&gt;#F08080&lt;/color&gt; &lt;!--äº®çŠç‘šè‰² --&gt; &lt;color name=&quot;palegoldenrod&quot;&gt;#EEE8AA&lt;/color&gt; &lt;!--è‹éº’éºŸè‰² --&gt; &lt;color name=&quot;violet&quot;&gt;#EE82EE&lt;/color&gt; &lt;!--ç´«ç½—å…°è‰² --&gt; &lt;color name=&quot;darksalmon&quot;&gt;#E9967A&lt;/color&gt; &lt;!--æš—è‚‰è‰² --&gt; &lt;color name=&quot;lavender&quot;&gt;#E6E6FA&lt;/color&gt; &lt;!--æ·¡ç´«è‰² --&gt; &lt;color name=&quot;lightcyan&quot;&gt;#E0FFFF&lt;/color&gt; &lt;!--äº®é’è‰² --&gt; &lt;color name=&quot;burlywood&quot;&gt;#DEB887&lt;/color&gt; &lt;!--å®æœ¨è‰² --&gt; &lt;color name=&quot;plum&quot;&gt;#DDA0DD&lt;/color&gt; &lt;!--æ´‹æè‰² --&gt; &lt;color name=&quot;gainsboro&quot;&gt;#DCDCDC&lt;/color&gt; &lt;!--æ·¡ç°è‰² --&gt; &lt;color name=&quot;crimson&quot;&gt;#DC143C&lt;/color&gt; &lt;!--æš—æ·±çº¢è‰² --&gt; &lt;color name=&quot;palevioletred&quot;&gt;#DB7093&lt;/color&gt; &lt;!--è‹ç´«ç½—å…°è‰² --&gt; &lt;color name=&quot;goldenrod&quot;&gt;#DAA520&lt;/color&gt; &lt;!--é‡‘éº’éºŸè‰² --&gt; &lt;color name=&quot;orchid&quot;&gt;#DA70D6&lt;/color&gt; &lt;!--æ·¡ç´«è‰² --&gt; &lt;color name=&quot;thistle&quot;&gt;#D8BFD8&lt;/color&gt; &lt;!--è“Ÿè‰² --&gt; &lt;color name=&quot;lightgray&quot;&gt;#D3D3D3&lt;/color&gt; &lt;!--äº®ç°è‰² --&gt; &lt;color name=&quot;lightgrey&quot;&gt;#D3D3D3&lt;/color&gt; &lt;!--äº®ç°è‰² --&gt; &lt;color name=&quot;tan&quot;&gt;#D2B48C&lt;/color&gt; &lt;!--èŒ¶è‰² --&gt; &lt;color name=&quot;chocolate&quot;&gt;#D2691E&lt;/color&gt; &lt;!--å·§å¯åŠ›è‰² --&gt; &lt;color name=&quot;peru&quot;&gt;#CD853F&lt;/color&gt; &lt;!--ç§˜é²è‰² --&gt; &lt;color name=&quot;indianred&quot;&gt;#CD5C5C&lt;/color&gt; &lt;!--å°ç¬¬å®‰çº¢ --&gt; &lt;color name=&quot;mediumvioletred&quot;&gt;#C71585&lt;/color&gt; &lt;!--ä¸­ç´«ç½—å…°è‰² --&gt; &lt;color name=&quot;silver&quot;&gt;#C0C0C0&lt;/color&gt; &lt;!--é“¶è‰² --&gt; &lt;color name=&quot;darkkhaki&quot;&gt;#BDB76B&lt;/color&gt; &lt;!--æš—é»„è¤è‰²--&gt; &lt;color name=&quot;rosybrown&quot;&gt;#BC8F8F&lt;/color&gt; &lt;!--è¤ç«ç‘°çº¢ --&gt; &lt;color name=&quot;mediumorchid&quot;&gt;#BA55D3&lt;/color&gt; &lt;!--ä¸­ç²‰ç´«è‰² --&gt; &lt;color name=&quot;darkgoldenrod&quot;&gt;#B8860B&lt;/color&gt; &lt;!--æš—é‡‘é»„è‰² --&gt; &lt;color name=&quot;firebrick&quot;&gt;#B22222&lt;/color&gt; &lt;!--ç«ç –è‰² --&gt; &lt;color name=&quot;powderblue&quot;&gt;#B0E0E6&lt;/color&gt; &lt;!--ç²‰è“è‰² --&gt; &lt;color name=&quot;lightsteelblue&quot;&gt;#B0C4DE&lt;/color&gt; &lt;!--äº®é’¢å…°è‰²--&gt; &lt;color name=&quot;paleturquoise&quot;&gt;#AFEEEE&lt;/color&gt; &lt;!--è‹å®çŸ³ç»¿ --&gt; &lt;color name=&quot;greenyellow&quot;&gt;#ADFF2F&lt;/color&gt; &lt;!--é»„ç»¿è‰² --&gt; &lt;color name=&quot;lightblue&quot;&gt;#ADD8E6&lt;/color&gt; &lt;!--äº®è“è‰² --&gt; &lt;color name=&quot;darkgray&quot;&gt;#A9A9A9&lt;/color&gt; &lt;!--æš—ç°è‰² --&gt; &lt;color name=&quot;darkgrey&quot;&gt;#A9A9A9&lt;/color&gt; &lt;!--æš—ç°è‰² --&gt; &lt;color name=&quot;brown&quot;&gt;#A52A2A&lt;/color&gt; &lt;!--è¤è‰² --&gt; &lt;color name=&quot;sienna&quot;&gt;#A0522D&lt;/color&gt; &lt;!--èµ­è‰² --&gt; &lt;color name=&quot;darkorchid&quot;&gt;#9932CC&lt;/color&gt; &lt;!--æš—ç´«è‰² --&gt; &lt;color name=&quot;palegreen&quot;&gt;#98FB98&lt;/color&gt; &lt;!--è‹ç»¿è‰² --&gt; &lt;color name=&quot;darkviolet&quot;&gt;#9400D3&lt;/color&gt; &lt;!--æš—ç´«ç½—å…°è‰² --&gt; &lt;color name=&quot;mediumpurple&quot;&gt;#9370DB&lt;/color&gt; &lt;!--ä¸­ç´«è‰² --&gt; &lt;color name=&quot;lightgreen&quot;&gt;#90EE90&lt;/color&gt; &lt;!--äº®ç»¿è‰² --&gt; &lt;color name=&quot;darkseagreen&quot;&gt;#8FBC8F&lt;/color&gt; &lt;!--æš—æµ·å…°è‰² --&gt; &lt;color name=&quot;saddlebrown&quot;&gt;#8B4513&lt;/color&gt; &lt;!--é‡è¤è‰² --&gt; &lt;color name=&quot;darkmagenta&quot;&gt;#8B008B&lt;/color&gt; &lt;!--æš—æ´‹çº¢ --&gt; &lt;color name=&quot;darkred&quot;&gt;#8B0000&lt;/color&gt; &lt;!--æš—çº¢è‰² --&gt; &lt;color name=&quot;blueviolet&quot;&gt;#8A2BE2&lt;/color&gt; &lt;!--ç´«ç½—å…°è“è‰² --&gt; &lt;color name=&quot;lightskyblue&quot;&gt;#87CEFA&lt;/color&gt; &lt;!--äº®å¤©è“è‰² --&gt; &lt;color name=&quot;skyblue&quot;&gt;#87CEEB&lt;/color&gt; &lt;!--å¤©è“è‰² --&gt; &lt;color name=&quot;gray&quot;&gt;#808080&lt;/color&gt; &lt;!--ç°è‰² --&gt; &lt;color name=&quot;grey&quot;&gt;#808080&lt;/color&gt; &lt;!--ç°è‰² --&gt; &lt;color name=&quot;olive&quot;&gt;#808000&lt;/color&gt; &lt;!--æ©„æ¦„è‰² --&gt; &lt;color name=&quot;purple&quot;&gt;#800080&lt;/color&gt; &lt;!--ç´«è‰² --&gt; &lt;color name=&quot;maroon&quot;&gt;#800000&lt;/color&gt; &lt;!--ç²Ÿè‰² --&gt; &lt;color name=&quot;aquamarine&quot;&gt;#7FFFD4&lt;/color&gt; &lt;!--ç¢§ç»¿è‰² --&gt; &lt;color name=&quot;chartreuse&quot;&gt;#7FFF00&lt;/color&gt; &lt;!--é»„ç»¿è‰² --&gt; &lt;color name=&quot;lawngreen&quot;&gt;#7CFC00&lt;/color&gt; &lt;!--è‰ç»¿è‰² --&gt; &lt;color name=&quot;mediumslateblue&quot;&gt;#7B68EE&lt;/color&gt; &lt;!--ä¸­æš—è“è‰² --&gt; &lt;color name=&quot;lightslategray&quot;&gt;#778899&lt;/color&gt; &lt;!--äº®è“ç° --&gt; &lt;color name=&quot;lightslategrey&quot;&gt;#778899&lt;/color&gt; &lt;!--äº®è“ç° --&gt; &lt;color name=&quot;slategray&quot;&gt;#708090&lt;/color&gt; &lt;!--ç°çŸ³è‰² --&gt; &lt;color name=&quot;slategrey&quot;&gt;#708090&lt;/color&gt; &lt;!--ç°çŸ³è‰² --&gt; &lt;color name=&quot;olivedrab&quot;&gt;#6B8E23&lt;/color&gt; &lt;!--æ·±ç»¿è¤è‰² --&gt; &lt;color name=&quot;slateblue&quot;&gt;#6A5ACD&lt;/color&gt; &lt;!--çŸ³è“è‰² --&gt; &lt;color name=&quot;dimgray&quot;&gt;#696969&lt;/color&gt; &lt;!--æš—ç°è‰² --&gt; &lt;color name=&quot;dimgrey&quot;&gt;#696969&lt;/color&gt; &lt;!--æš—ç°è‰² --&gt; &lt;color name=&quot;mediumaquamarine&quot;&gt;#66CDAA&lt;/color&gt; &lt;!--ä¸­ç»¿è‰² --&gt; &lt;color name=&quot;cornflowerblue&quot;&gt;#6495ED&lt;/color&gt; &lt;!--èŠå…°è‰² --&gt; &lt;color name=&quot;cadetblue&quot;&gt;#5F9EA0&lt;/color&gt; &lt;!--å†›å…°è‰² --&gt; &lt;color name=&quot;darkolivegreen&quot;&gt;#556B2F&lt;/color&gt; &lt;!--æš—æ©„æ¦„ç»¿--&gt; &lt;color name=&quot;indigo&quot;&gt;#4B0082&lt;/color&gt; &lt;!--é›é’è‰² --&gt; &lt;color name=&quot;mediumturquoise&quot;&gt;#48D1CC&lt;/color&gt; &lt;!--ä¸­ç»¿å®çŸ³ --&gt; &lt;color name=&quot;darkslateblue&quot;&gt;#483D8B&lt;/color&gt; &lt;!--æš—ç°è“è‰² --&gt; &lt;color name=&quot;steelblue&quot;&gt;#4682B4&lt;/color&gt; &lt;!--é’¢å…°è‰² --&gt; &lt;color name=&quot;royalblue&quot;&gt;#4169E1&lt;/color&gt; &lt;!--çš‡å®¶è“ --&gt; &lt;color name=&quot;turquoise&quot;&gt;#40E0D0&lt;/color&gt; &lt;!--é’ç»¿è‰² --&gt; &lt;color name=&quot;mediumseagreen&quot;&gt;#3CB371&lt;/color&gt; &lt;!--ä¸­æµ·è“ --&gt; &lt;color name=&quot;limegreen&quot;&gt;#32CD32&lt;/color&gt; &lt;!--æ©™ç»¿è‰² --&gt; &lt;color name=&quot;darkslategray&quot;&gt;#2F4F4F&lt;/color&gt; &lt;!--æš—ç“¦ç°è‰² --&gt; &lt;color name=&quot;darkslategrey&quot;&gt;#2F4F4F&lt;/color&gt; &lt;!--æš—ç“¦ç°è‰² --&gt; &lt;color name=&quot;seagreen&quot;&gt;#2E8B57&lt;/color&gt; &lt;!--æµ·ç»¿è‰² --&gt; &lt;color name=&quot;forestgreen&quot;&gt;#228B22&lt;/color&gt; &lt;!--æ£®æ—ç»¿ --&gt; &lt;color name=&quot;lightseagreen&quot;&gt;#20B2AA&lt;/color&gt; &lt;!--äº®æµ·è“è‰² --&gt; &lt;color name=&quot;dodgerblue&quot;&gt;#1E90FF&lt;/color&gt; &lt;!--é—ªå…°è‰² --&gt; &lt;color name=&quot;midnightblue&quot;&gt;#191970&lt;/color&gt; &lt;!--ä¸­ç°å…°è‰² --&gt; &lt;color name=&quot;aqua&quot;&gt;#00FFFF&lt;/color&gt; &lt;!--æµ…ç»¿è‰² --&gt; &lt;color name=&quot;cyan&quot;&gt;#00FFFF&lt;/color&gt; &lt;!--é’è‰² --&gt; &lt;color name=&quot;springgreen&quot;&gt;#00FF7F&lt;/color&gt; &lt;!--æ˜¥ç»¿è‰² --&gt; &lt;color name=&quot;lime&quot;&gt;#00FF00&lt;/color&gt; &lt;!--é…¸æ©™è‰² --&gt; &lt;color name=&quot;mediumspringgreen&quot;&gt;#00FA9A&lt;/color&gt; &lt;!--ä¸­æ˜¥ç»¿è‰² --&gt; &lt;color name=&quot;darkturquoise&quot;&gt;#00CED1&lt;/color&gt; &lt;!--æš—å®çŸ³ç»¿ --&gt; &lt;color name=&quot;deepskyblue&quot;&gt;#00BFFF&lt;/color&gt; &lt;!--æ·±å¤©è“è‰² --&gt; &lt;color name=&quot;darkcyan&quot;&gt;#008B8B&lt;/color&gt; &lt;!--æš—é’è‰² --&gt; &lt;color name=&quot;teal&quot;&gt;#008080&lt;/color&gt; &lt;!--æ°´é¸­è‰² --&gt; &lt;color name=&quot;green&quot;&gt;#008000&lt;/color&gt; &lt;!--ç»¿è‰² --&gt; &lt;color name=&quot;darkgreen&quot;&gt;#006400&lt;/color&gt; &lt;!--æš—ç»¿è‰² --&gt; &lt;color name=&quot;blue&quot;&gt;#0000FF&lt;/color&gt; &lt;!--è“è‰² --&gt; &lt;color name=&quot;mediumblue&quot;&gt;#0000CD&lt;/color&gt; &lt;!--ä¸­å…°è‰² --&gt; &lt;color name=&quot;darkblue&quot;&gt;#00008B&lt;/color&gt; &lt;!--æš—è“è‰² --&gt; &lt;color name=&quot;navy&quot;&gt;#000080&lt;/color&gt; &lt;!--æµ·å†›è‰² --&gt; &lt;color name=&quot;black&quot;&gt;#000000&lt;/color&gt; &lt;!--é»‘è‰² --&gt;&lt;/resources&gt;","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"Logå°è£…","slug":"Logå°è£…","date":"2018-10-02T16:00:00.000Z","updated":"2020-09-16T09:07:39.000Z","comments":true,"path":"2018/10/03/Logå°è£…/","link":"","permalink":"http://mariogogogo.github.io/2018/10/03/Log%E5%B0%81%E8%A3%85/","excerpt":"åœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ç”¨Android Logç±»ã€‚","text":"åœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ç”¨Android Logç±»ã€‚android.util.Logå¸¸ç”¨çš„æ–¹æ³•æœ‰ä»¥ä¸‹5ä¸ªï¼šLog.v() Log.d() Log.i() Log.w() ä»¥åŠ Log.e() ã€‚æ ¹æ®é¦–å­—æ¯å¯¹åº”VERBOSEï¼ŒDEBUG,INFO, WARNï¼ŒERRORã€‚ Log.v çš„è°ƒè¯•é¢œè‰²ä¸ºé»‘è‰²çš„ï¼Œä»»ä½•æ¶ˆæ¯éƒ½ä¼šè¾“å‡ºï¼Œè¿™é‡Œçš„vä»£è¡¨verboseå•°å—¦çš„æ„æ€ï¼Œå¹³æ—¶ä½¿ç”¨å°±æ˜¯Log.v(â€œâ€,â€â€); Log.dçš„è¾“å‡ºé¢œè‰²æ˜¯è“è‰²çš„ï¼Œä»…è¾“å‡ºdebugè°ƒè¯•çš„æ„æ€ï¼Œä½†ä»–ä¼šè¾“å‡ºä¸Šå±‚çš„ä¿¡æ¯ï¼Œè¿‡æ»¤èµ·æ¥å¯ä»¥é€šè¿‡DDMSçš„Logcatæ ‡ç­¾æ¥é€‰æ‹©. Log.içš„è¾“å‡ºä¸ºç»¿è‰²ï¼Œä¸€èˆ¬æç¤ºæ€§çš„æ¶ˆæ¯informationï¼Œå®ƒä¸ä¼šè¾“å‡ºLog.vå’ŒLog.dçš„ä¿¡æ¯ï¼Œä½†ä¼šæ˜¾ç¤ºiã€wå’Œeçš„ä¿¡æ¯ Log.wçš„æ„æ€ä¸ºæ©™è‰²ï¼Œå¯ä»¥çœ‹ä½œä¸ºwarningè­¦å‘Šï¼Œä¸€èˆ¬éœ€è¦æˆ‘ä»¬æ³¨æ„ä¼˜åŒ–Androidä»£ç ï¼ŒåŒæ—¶é€‰æ‹©å®ƒåè¿˜ä¼šè¾“å‡ºLog.eçš„ä¿¡æ¯ã€‚ Log.eä¸ºçº¢è‰²ï¼Œå¯ä»¥æƒ³åˆ°erroré”™è¯¯ï¼Œè¿™é‡Œä»…æ˜¾ç¤ºçº¢è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™äº›é”™è¯¯å°±éœ€è¦æˆ‘ä»¬è®¤çœŸçš„åˆ†æï¼ŒæŸ¥çœ‹æ ˆçš„ä¿¡æ¯äº†ã€‚ æ³¨æ„ï¼šä¸åŒçš„æ‰“å°æ–¹æ³•åœ¨ä½¿ç”¨æ—¶éƒ½æ˜¯æŸä¸ªæ–¹æ³•å¸¦ä¸Š(String tag, String msg)å‚æ•°ï¼Œtagè¡¨ç¤ºçš„æ˜¯æ‰“å°ä¿¡æ¯çš„æ ‡ç­¾ï¼Œmsgè¡¨ç¤ºçš„æ˜¯éœ€è¦æ‰“å°çš„ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536public class LogUtil &#123; public static final int VERBOSE =1; public static final int DEBUG =2; public static final int INFO =3; public static final int WARN =4; public static final int ERROR =5; public static final int NOTHING =6; public static final int level =VERBOSE; public static void v(String tag,String msg)&#123; if(level &lt;= VERBOSE)&#123; Log.v(tag,msg); &#125; &#125; public static void d(String tag,String msg)&#123; if(level &lt;= VERBOSE)&#123; Log.d(tag,msg); &#125; &#125; public static void i(String tag,String msg)&#123; if(level &lt;= VERBOSE)&#123; Log.i(tag,msg); &#125; &#125; public static void w(String tag,String msg)&#123; if(level &lt;= VERBOSE)&#123; Log.w(tag,msg); &#125; &#125; public static void e(String tag,String msg)&#123; if(level &lt;= VERBOSE)&#123; Log.e(tag,msg); &#125; &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"å†™ä¸ªSplashé—ªå±é¡µ","slug":"å†™ä¸ªSplashé—ªå±é¡µ","date":"2018-10-01T16:00:00.000Z","updated":"2020-09-16T09:07:14.000Z","comments":true,"path":"2018/10/02/å†™ä¸ªSplashé—ªå±é¡µ/","link":"","permalink":"http://mariogogogo.github.io/2018/10/02/%E5%86%99%E4%B8%AASplash%E9%97%AA%E5%B1%8F%E9%A1%B5/","excerpt":"çŸ¥è¯†ç‚¹ å€’è®¡æ—¶å¦‚ä½•å†™ï¼Ÿ ç‚¹å‡»è·³è½¬ æ›´æ–°UI è·³è½¬ä¹‹åçš„handleå¤„ç†","text":"çŸ¥è¯†ç‚¹ å€’è®¡æ—¶å¦‚ä½•å†™ï¼Ÿ ç‚¹å‡»è·³è½¬ æ›´æ–°UI è·³è½¬ä¹‹åçš„handleå¤„ç† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129package com.imooc.book;import android.app.Activity;import android.os.Handler;import android.os.Message;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.widget.TextView;import android.widget.Toast;import com.loopj.android.http.AsyncHttpClient;import com.loopj.android.http.AsyncHttpResponseHandler;import java.lang.ref.WeakReference;import cz.msebera.android.httpclient.Header;public class SpashActivity extends Activity &#123; public static final int CODE = 1001; public static final int TOTAL_TIME = 3000; //æ€»å…±ä¸‰ç§’ public static final int INTERVAL_TIME = 1000; //é—´éš”æ—¶é—´ private TextView mTextView; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_spash); mTextView = (TextView) findViewById(R.id.time_text_view); final MyHandler handler = new MyHandler(this);// è€ŒHandlerä¸­obtainMessageä¸new Messageçš„å·®åˆ«ï¼š// obtainmessageï¼ˆï¼‰æ˜¯ä»æ¶ˆæ¯æ± ä¸­æ‹¿æ¥ä¸€ä¸ªmsg ä¸é¡»è¦å¦å¼€è¾Ÿç©ºé—´new// newé¡»è¦åˆä¸€æ¬¡ç”³è¯·ï¼Œæ•ˆç‡ä½ï¼Œobtianmessageèƒ½å¤Ÿå¾ªç¯åˆ©ç”¨ã€‚// Message message = new Message(); Message message = Message.obtain(); message.what = CODE; message.arg1 = TOTAL_TIME; handler.sendMessage(message);// mTextView.setOnClickListener(this); mTextView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; //ç‚¹å‡»è·³è¿‡ BookListActivity.start(SpashActivity.this); SpashActivity.this.finish(); //å¿…é¡»å…³é—­handlerä¸­çš„æœåŠ¡ handler.removeMessages(CODE); &#125; &#125;); AsyncHttpClient client = new AsyncHttpClient(); client.get(&quot;https://www.google.com&quot;, new AsyncHttpResponseHandler() &#123; @Override public void onStart() &#123; // called before request is started &#125; @Override public void onSuccess(int statusCode, Header[] headers, byte[] response) &#123; // called when response HTTP status is &quot;200 OK&quot; &#125; @Override public void onFailure(int statusCode, Header[] headers, byte[] errorResponse, Throwable e) &#123; // called when response HTTP status is &quot;4XX&quot; (eg. 401, 403, 404) &#125; @Override public void onRetry(int retryNo) &#123; // called when request is retried &#125; &#125;); &#125;// @Override// public void onClick(View v) &#123;// switch (v.getId())&#123;// case R.id.time_text_view:// //ç‚¹å‡»è·³è¿‡// BookListActivity.start(SpashActivity.this);// SpashActivity.this.finish();// break;// &#125;// &#125; public static class MyHandler extends Handler&#123; public final WeakReference&lt;SpashActivity&gt; mWwakReference; public MyHandler(SpashActivity activity)&#123; mWwakReference = new WeakReference&lt;&gt;(activity); &#125; @Override public void handleMessage(Message msg)&#123; super.handleMessage(msg); SpashActivity activity = mWwakReference.get(); if(msg.what == CODE)&#123; if(activity != null)&#123; //è®¾ç½®textview æ›´æ–°UI int time = msg.arg1; //ç¬¬ä¸€æ¬¡å°±æ˜¯ä¸‰ç§’ activity.mTextView.setText(time/INTERVAL_TIME + &quot;ç§’ï¼Œç‚¹å‡»è·³è¿‡&quot;); //å†å‘é€å€’è®¡æ—¶ Message message = Message.obtain(); message.what = CODE; message.arg1 = time-INTERVAL_TIME; if(time&gt;0)&#123; //å€’è®¡æ—¶ç»§ç»­ sendMessageDelayed(message,INTERVAL_TIME); &#125;else&#123; //TODO:è·³è½¬é¡µé¢ Toast.makeText(activity,&quot;è·³è½¬åˆ°åˆ—è¡¨&quot;,Toast.LENGTH_SHORT).show(); BookListActivity.start(activity); activity.finish(); &#125; &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"æ³›å‹çŸ¥è¯†ç‚¹","slug":"æ³›å‹çŸ¥è¯†ç‚¹","date":"2018-09-30T16:00:00.000Z","updated":"2020-09-16T09:07:02.000Z","comments":true,"path":"2018/10/01/æ³›å‹çŸ¥è¯†ç‚¹/","link":"","permalink":"http://mariogogogo.github.io/2018/10/01/%E6%B3%9B%E5%9E%8B%E7%9F%A5%E8%AF%86%E7%82%B9/","excerpt":"","text":"ç‚¹å‡»æˆ‘ä¼ é€è¿‡å»çœ‹çœ‹å§","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"ListViewçš„ä½¿ç”¨","slug":"ListViewçš„ä½¿ç”¨","date":"2018-09-12T16:00:00.000Z","updated":"2020-09-16T09:07:39.000Z","comments":true,"path":"2018/09/13/ListViewçš„ä½¿ç”¨/","link":"","permalink":"http://mariogogogo.github.io/2018/09/13/ListView%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"ListView ç®€ä»‹ä¸€ã€ListView æ˜¯ android ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶,é€šå¸¸æ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºæ•°æ®,å¹¶ä¸”å½“åŠ è½½çš„æ•°æ®è¿‡å¤šçš„æ—¶å€™å¯ä»¥åˆ†é¡µåŠ è½½,åŠ¨æ€æ˜¾ç¤ºæ•°æ®,é€šå¸¸æ˜¯æ¨ªå‘æ˜¾ç¤ºæ•°æ®ã€‚","text":"ListView ç®€ä»‹ä¸€ã€ListView æ˜¯ android ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶,é€šå¸¸æ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºæ•°æ®,å¹¶ä¸”å½“åŠ è½½çš„æ•°æ®è¿‡å¤šçš„æ—¶å€™å¯ä»¥åˆ†é¡µåŠ è½½,åŠ¨æ€æ˜¾ç¤ºæ•°æ®,é€šå¸¸æ˜¯æ¨ªå‘æ˜¾ç¤ºæ•°æ®ã€‚ Adapterä¸€èˆ¬æœ‰ä»¥ä¸‹çš„å‡ ç§å®ç°ç±»:ArrayAdapterï¼ŒSimpleAdapterï¼ŒSimpleCursorAdapter,BaseAdapter ArrayAdapterçš„æ¯ä¸€ä¸ªåˆ—è¡¨åªèƒ½æ˜¯ä¸€ä¸ªTextViewï¼ŒArrayAdapterçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹: ArrayAdapter adapter=new ArrayAdapter(Context,ä¸€ä¸ªTextViewå¸ƒå±€,String æ•°ç»„); äºŒã€ListView å®ç°æ•°æ®åŠ è½½çš„æ­¥éª¤:ListView é€‚åˆâ€œè‡ªåº•å‘ä¸Šâ€çš„å¼€å‘æ¨¡å¼å³ä»æ¯ä¸ªæ¡ç›®çš„æ˜¾ç¤ºç»„ä»¶åˆ°å¯¹å…¶è¿›è¡Œ æ§åˆ¶çš„æ•°æ®ç»“æ„æœ€åé€šè¿‡ Activity ç­‰è¿›è¡Œä½¿ç”¨ã€‚aï¼‰é¦–å…ˆæ˜¯ item ç»„ä»¶,å³ç”¨äºæ¯é¡¹å¸ƒå±€è¾“å‡ºçš„ xml æ–‡ä»¶ã€‚ Android SDK ä¸­æœ‰ simple_list_item_1ã€simple_list_item_2 å¯ç”¨ å½“éœ€è¦æ¯”è¾ƒä¸°å¯Œçš„æ˜¾ç¤ºæ•ˆæœæ—¶, ä¸€èˆ¬é€šè¿‡è‡ªå®šä¹‰ xml å®ç°ã€‚bï¼‰å…¶æ¬¡æ˜¯çˆ¶å¯¹è±¡ layout æ–‡ä»¶,å³ç”¨äº Activity æˆ–è€… Fragment çš„å¸ƒå±€è¾“å‡ºæ–‡ä»¶,ä¸€ èˆ¬åœ¨æ­¤è¾“å‡ºæ–‡ä»¶ä¸­åŒ…å« ListViewã€‚ å½“ç„¶,å¦‚æœé‡‡ç”¨ ListFragment æˆ– ListActivity, å¹¶ä¸éœ€è¦å†æ˜¾ç¤ºçš„å®šä¹‰ ListView ç»„ä»¶ cï¼‰å®šä¹‰æ•°æ®ç»“æ„(å®¹å™¨),å³ç”¨äºæŒæœ‰å•ä¸ª Item çš„æ•°æ®,å¯ä»¥æ˜¯ç®€å•çš„ String,ä¹Ÿ å¯ä»¥é€šè¿‡æŠ½è±¡ Items æ‰€éœ€å­—æ®µç»„æˆä¸€ä¸ªç±»,æŠ½è±¡çš„åŸåˆ™æ˜¯ä¸ Item ä¸­çš„ç»„ä»¶å¯¹åº”ã€‚ æœ¬æ–‡ä¸­ä¸Šå›¾æ¶‰åŠå¤šä¸ªå­—æ®µ,å› æ­¤é€šè¿‡æŠ½è±¡ç»„ä»¶å½¢æˆ BBSTopicItem ç±»ã€‚ dï¼‰åˆ—è¡¨é€‚é…å™¨ã€‚å†³å®šæ¯è¡Œ Item ä¸­å…·ä½“æ˜¾ç¤ºä»€ä¹ˆå†…å®¹,ä»¥æ€æ ·çš„æ ·å¼æ˜¾ç¤ºç­‰,é€šå¸¸é€š è¿‡ç»§æ‰¿ ArrayAdapterã€SimpleAdapter ç­‰å®ç°ã€‚æœ¬æ–‡å®šä¹‰ BBSTopicAdapter, ç»§æ‰¿äº ArrayAdapterã€‚ eï¼‰æœ€å,éœ€è¦å®šä¹‰ä¸€ä¸ª Activity æˆ– Fragment æ¥ä½¿ç”¨ä¸Šè¿°æ¨¡å—ã€‚ ListViewçš„ç®€å•ç”¨æ³•å®ç°æ­¥éª¤ï¼šé¦–å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œ å¹¶è®©ADT è‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½æ´»åŠ¨ã€‚ç„¶åä¿®æ”¹activity_main.xml ä¸­çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;ListView android:id=&quot;@+id/list_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt;&lt;/ListView&gt;&lt;/LinearLayout&gt; åœ¨MainActivity ä¸­é¦–é¡µ 123//1.åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ListView listView = (ListView)findViewById(R.id.list_view); ç„¶å123456789101112131415161718192021222324252627//2.åˆ›å»ºä¸€äº›æ•°æ® initFruits(); private void initFruits() &#123; for (int i = 0; i &lt; 12; i++) &#123; Fruit apple = new Fruit(&quot;Apple&quot;, R.drawable.apple_pic); fruitList.add(apple); Fruit banana = new Fruit(&quot;Banana&quot;, R.drawable.banana_pic); fruitList.add(banana); Fruit orange = new Fruit(&quot;Orange&quot;, R.drawable.orange_pic); fruitList.add(orange); Fruit watermelon = new Fruit(&quot;Watermelon&quot;, R.drawable.watermelon_pic); fruitList.add(watermelon); Fruit pear = new Fruit(&quot;Pear&quot;, R.drawable.pear_pic); fruitList.add(pear); Fruit grape = new Fruit(&quot;Grape&quot;, R.drawable.grape_pic); fruitList.add(grape); Fruit pineapple = new Fruit(&quot;Pineapple&quot;, R.drawable.pineapple_pic); fruitList.add(pineapple); Fruit strawberry = new Fruit(&quot;Strawberry&quot;, R.drawable.strawberry_pic); fruitList.add(strawberry); Fruit cherry = new Fruit(&quot;Cherry&quot;, R.drawable.cherry_pic); fruitList.add(cherry); Fruit mango = new Fruit(&quot;Mango&quot;, R.drawable.mango_pic); fruitList.add(mango); &#125; &#125;ç„¶å1234//3 å°†æ•°æ®å¯¼å…¥ListView// åˆ›å»ºå®ä¾‹åŒ–ä¸€ä¸ªadapter å°†æ•°æ®ä¼ å…¥å…¶ä¸­NewFuritAdapter adapter = new NewFuritAdapter(fruitList);æœ€å12listView.setAdapter(adapter);åˆ›å»ºAdapter 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class FuritAdapter extends ArrayAdapter&lt;Fruit&gt; &#123; private int resourceId; /** * é‡å†™çˆ¶ç±»çš„æ„é€ å‡½æ•° * @param context ä¸Šä¸‹æ–‡å¯¹è±¡ * @param textViewResourceId å­é¡¹å¸ƒå±€çš„ID * @param objects æ•°æ®æº */ public FuritAdapter(Context context, int textViewResourceId, List&lt;Fruit&gt; objects)&#123; super(context,textViewResourceId,objects); resourceId = textViewResourceId; &#125; /** *è¿™ä¸ªæ–¹æ³•å†å­é¡¹ç›®æ»šåŠ¨åˆ°å±å¹•å†…çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œ * @param position * @param convertView ç¼“å­˜æ•°æ®çš„å‚æ•° * @param parent * @return */ @Override public View getView(int position, View convertView, ViewGroup parent)&#123; //è·å–å½“å‰fruitçš„å®ä¾‹ Fruit fruit = getItem(position); //é»˜è®¤åˆå§‹åŒ–viewHolderç±» ViewHolder viewHolder; if(convertView == null)&#123; convertView = LayoutInflater.from(getContext()).inflate(resourceId,parent,false); //å½“convertViewåˆšåˆ›å»ºçš„æ—¶å€™ å­˜å‚¨viewholderå­æ§ä»¶ viewHolder = new ViewHolder(); viewHolder.fruitImage = (ImageView)view.findViewById(R.id.fruit_image); viewHolder.fruitName = (TextView)view.findViewById(R.id.fruit_name) ; //viewä¸setTagç»‘å®š å½“å¾€ä¸‹æ»‘åŠ¨ä¼šè°ƒç”¨getViewçš„æ–¹æ³• convertView.setTag(viewHolder); &#125;else&#123; viewHolder = (ViewHolder)convertView.getTag(); &#125; viewHolder.fruitImage.setImageResource(fruit.getImageId()); viewHolder.fruitName.setText(fruit.getName()); return convertView; &#125; class ViewHolder&#123; ImageView fruitImage; TextView fruitName; &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"Android studioæ–­ç‚¹è°ƒè¯•","slug":"Android studioæ–­ç‚¹è°ƒè¯•","date":"2018-09-11T16:00:00.000Z","updated":"2020-09-16T09:07:17.000Z","comments":true,"path":"2018/09/12/Android studioæ–­ç‚¹è°ƒè¯•/","link":"","permalink":"http://mariogogogo.github.io/2018/09/12/Android%20studio%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/","excerpt":"å·¥å…·å¦‚ä½•ä½¿ç”¨","text":"å·¥å…·å¦‚ä½•ä½¿ç”¨ è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»çº¢ç‚¹ä½ç½®æ·»åŠ æˆ–å–æ¶ˆæ–­ç‚¹ï¼‰ ç‚¹å‡»debugæ¨¡å¼è¿è¡Œ ä¸€ã€ç®€å•è°ƒè¯•1. step overï¼šä¸€æ­¥æ­¥å¾€ä¸‹èµ° å½“å‰ç¨‹åºè¿è¡Œçš„ä½ç½®ï¼Œæˆ‘ä»¬çœ‹åˆ°içš„å€¼å·²ç»åœ¨ç¨‹åºä»£ç ä¸­å±•ç¤ºå‡ºæ¥äº†ï¼Œé»„è‰²çš„ä»£ç å¤„ï¼Œè¿™ä¸ªæ˜¯ASçš„åŠŸèƒ½ï¼Œå¯¹äºæˆ‘ä»¬è°ƒè¯•æ¥è®²ï¼Œè¿™ç®€ç›´æ˜¯éå¸¸å¤§çš„ç¦åˆ©äº†ã€‚ è¿™æ—¶æˆ‘ä»¬ç»§ç»­F8ï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°logcatæŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘æ‰“å°å‡ºçš„içš„å€¼æ˜¯0 2. step intoï¼šçœ‹åˆ°æ–¹æ³•å¾€é‡Œèµ° æ¯”å¦‚æˆ‘ä»¬çš„forå¾ªç¯å½“ä¸­è°ƒç”¨äº†ä¸€ä¸ªstepNext(int i)æ–¹æ³•ï¼Œå½“æˆ‘ä»¬èµ°åˆ°è¿™é‡Œæƒ³çœ‹çœ‹è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„è¿è¡Œè¿‡ç¨‹çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼Œå½“èµ°åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹F7,æˆ–è€…å¦‚ä¸‹å›¾çš„å›¾æ ‡ã€‚ è¿™æ—¶å°±èµ°åˆ°äº†stepNextæ–¹æ³•å½“ä¸­ã€‚åœ¨è¿™é‡Œæ‰“å°äº†ä¸€ä¸ªlogï¼Œæˆ‘ä»¬å†æŒ‰ä¸€ä¸‹F8æˆ‘ä»¬æ¥çœ‹çœ‹Logcat, è¿™é‡Œæˆ‘æ‰“å°çš„logéƒ½æ˜¯ä¸ºäº†åšæ•™ç¨‹ç”¨ï¼Œè°ƒè¯•æˆ‘ä»¬å°±ä¸ç”¨æ‰“logäº†ç›´æ¥çœ‹æ˜¾ç¤ºé¢æ¿å°±OKäº† 4. step out ï¼šæœ‰æ–­ç‚¹ä¸‹ä¸€ä¸ªï¼Œèµ°å®Œæ–­ç‚¹ç»§ç»­èµ° è¿™é‡Œå¦‚æœæˆ‘ä»¬çš„ä¸€ä¸ªæµç¨‹å½“ä¸­ï¼ŒåŒ…æ‹¬è°ƒç”¨çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰æ–­ç‚¹èµ°åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¦‚æœæ²¡æœ‰æ–­ç‚¹ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªè°ƒç”¨çš„æ–¹æ³•å½“ä¸­ï¼Œä¼šè·³å‡ºè¿™ä¸ªæ–¹æ³•ï¼Œç»§ç»­èµ°ã€‚ æˆ‘ç°åœ¨ç¨‹åºä½ç½®åœ¨ç¬¬ä¸€ä¸ªæ–­ç‚¹ä½ç½®ï¼ˆ24è¡Œï¼‰ï¼Œæˆ‘è°ƒç”¨çš„stepNextæ–¹æ³•ä¸­ä¹Ÿæœ‰ä¸€ä¸ªæ–­ç‚¹ï¼Œæ­¤æ—¶æˆ‘æŒ‰ä¸‹step outæŒ‰é’®ä¼šèµ°åˆ°stepNextä¸­çš„æ–­ç‚¹å¤„ï¼ˆ39è¡Œï¼‰æˆ‘æ­¤æ—¶å¦‚æœå†æŒ‰ä¸€ä¸‹step out ä¼šèµ°åˆ°stepNextæ–¹æ³•çš„è°ƒç”¨å‡ºçš„ä¸‹ä¸€ä¸ªå¯æ‰§è¡Œä»£ç ï¼ˆ30è¡Œï¼‰ 5. run to Cursor ï¼šä¸‹ä¸ªæ–­ç‚¹æˆ‘ä»¬è§ è¿™é‡Œçš„æ„æ€å°±æ˜¯è¯´ï¼Œä¼šå¾ˆå¿«æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹çš„ä½ç½®ï¼Œè€Œä¸”å¯ä»¥é™å¦‚ä»»ä½•è°ƒç”¨çš„æ–¹æ³• äºŒã€é«˜çº§è°ƒè¯•1. è·¨æ–­ç‚¹è°ƒè¯• å¦‚æœæˆ‘ä»¬è®¾ç½®äº†å¤šä¸ªæ–­ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œé‚£ä¹ˆç›´æ¥ç‚¹å‡»ä¸‹å›¾å°±å¯ä»¥äº† 2.è§‚å¯Ÿå˜é‡ å¦‚æœæˆ‘ä»¬æƒ³è§‚å¯Ÿ1ä¸ªæˆ–è€…å‡ ä¸ªå˜é‡çš„å€¼çš„å˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬åœ¨Variablesæ˜¾ç¤ºé¢ç‰ˆä¸­è§‚å¯Ÿå¦‚æœæˆ‘è¿™é‡Œæœ‰å¤ªå¤šå¤ªå¤šçš„è‡ªå®šä¹‰å˜é‡å’Œç³»ç»Ÿå˜é‡äº†ï¼Œé‚£ä¹ˆå°±éš¾è§‚å¯Ÿäº†ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹æ“ä½œ:ç‚¹å‡»Watches,ç‚¹å‡»ï¼‹å·ï¼Œç„¶åè¾“å…¥å˜é‡çš„åç§°å›è½¦å°±OKäº†ï¼Œè€Œä¸”ä¼šæœ‰å†å²è®°å½•å“¦ å¦‚æœå˜é‡åæ¯”è¾ƒé•¿æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼šé€‰æ‹©ï¼»Variablesï¼½ä¸­çš„å˜é‡åç„¶åç‚¹å‡»ï¼»å³é”®ï¼½ï¼Œé€‰æ‹©ï¼»Add to Watches],ç„¶åWatchesé¢æ¿ä¸­å°±æœ‰äº†","categories":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://mariogogogo.github.io/tags/Android/"}]},{"title":"æµ…è°ˆfetchä¸axiosä¸ajax","slug":"æµ…è°ˆfetchä¸axiosä¸ajax","date":"2018-05-31T16:00:00.000Z","updated":"2020-09-16T09:07:11.000Z","comments":true,"path":"2018/06/01/æµ…è°ˆfetchä¸axiosä¸ajax/","link":"","permalink":"http://mariogogogo.github.io/2018/06/01/%E6%B5%85%E8%B0%88fetch%E4%B8%8Eaxios%E4%B8%8Eajax/","excerpt":"1 JQuery ajaxè¿™ä¸ªæˆ‘å°±ä¸ç”¨å¤šè¨€äº†æŠŠï¼Œæ˜¯å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œé™¤æ­¤ä»¥å¤–è¿˜å¢æ·»äº†å¯¹JSONPçš„æ”¯æŒã€‚æœ‰ä¸€è¯´ä¸€çš„è¯´ä¸€å¥ï¼ŒJQuery ajaxç»è¿‡å¤šå¹´çš„æ›´æ–°ç»´æŠ¤ï¼ŒçœŸçš„å·²ç»æ˜¯éå¸¸çš„æ–¹ä¾¿äº†ï¼Œä¼˜ç‚¹æ— éœ€å¤šè¨€ï¼›å¦‚æœæ˜¯ç¡¬è¦ä¸¾å‡ºå‡ ä¸ªç¼ºç‚¹ï¼Œé‚£å¯èƒ½åªæœ‰","text":"1 JQuery ajaxè¿™ä¸ªæˆ‘å°±ä¸ç”¨å¤šè¨€äº†æŠŠï¼Œæ˜¯å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œé™¤æ­¤ä»¥å¤–è¿˜å¢æ·»äº†å¯¹JSONPçš„æ”¯æŒã€‚æœ‰ä¸€è¯´ä¸€çš„è¯´ä¸€å¥ï¼ŒJQuery ajaxç»è¿‡å¤šå¹´çš„æ›´æ–°ç»´æŠ¤ï¼ŒçœŸçš„å·²ç»æ˜¯éå¸¸çš„æ–¹ä¾¿äº†ï¼Œä¼˜ç‚¹æ— éœ€å¤šè¨€ï¼›å¦‚æœæ˜¯ç¡¬è¦ä¸¾å‡ºå‡ ä¸ªç¼ºç‚¹ï¼Œé‚£å¯èƒ½åªæœ‰123456789$.ajax(&#123; type: &#x27;POST&#x27;, url: url, data: data, dataType: dataType, success: function () &#123;&#125;, error: function () &#123;&#125;&#125;); æœ¬èº«æ˜¯é’ˆå¯¹MVCçš„ç¼–ç¨‹,ä¸ç¬¦åˆç°åœ¨å‰ç«¯MVVMçš„æµªæ½® åŸºäºåŸç”Ÿçš„XHRå¼€å‘ï¼ŒXHRæœ¬èº«çš„æ¶æ„ä¸æ¸…æ™°ï¼Œå·²ç»æœ‰äº†fetchçš„æ›¿ä»£æ–¹æ¡ˆ JQueryæ•´ä¸ªé¡¹ç›®å¤ªå¤§ï¼Œå•çº¯ä½¿ç”¨ajaxå´è¦å¼•å…¥æ•´ä¸ªJQueryéå¸¸çš„ä¸åˆç†ï¼ˆé‡‡å–ä¸ªæ€§åŒ–æ‰“åŒ…çš„æ–¹æ¡ˆåˆä¸èƒ½äº«å—CDNæœåŠ¡ï¼‰ å°½ç®¡JQueryå¯¹æˆ‘ä»¬å‰ç«¯çš„å¼€å‘å·¥ä½œæ›¾æœ‰ç€ï¼ˆç°åœ¨ä¹Ÿä»ç„¶æœ‰ç€ï¼‰æ·±è¿œçš„å½±å“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éšç€VUEï¼ŒREACTæ–°ä¸€ä»£æ¡†æ¶çš„å…´èµ·ï¼Œä»¥åŠESè§„èŒƒçš„å®Œå–„ï¼Œæ›´å¤šAPIçš„æ›´æ–°ï¼ŒJQueryè¿™ç§å¤§è€Œå…¨çš„JSåº“ï¼Œæœªæ¥çš„è·¯ä¼šè¶Šèµ°è¶Šçª„ã€‚ 2 Axios123456789101112131415axios(&#123; method: &#x27;post&#x27;, url: &#x27;/user/12345&#x27;, data: &#123; firstName: &#x27;Fred&#x27;, lastName: &#x27;Flintstone&#x27; &#125;&#125;).then(function (response) &#123; console.log(response);&#125;).catch(function (error) &#123; console.log(error);&#125;); Vue2.0ä¹‹åï¼Œå°¤é›¨æºªæ¨èå¤§å®¶ç”¨axiosæ›¿æ¢JQuery ajaxï¼Œæƒ³å¿…è®©Axiosè¿›å…¥äº†å¾ˆå¤šäººçš„ç›®å…‰ä¸­ã€‚Axiosæœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œåªä¸è¿‡å®ƒæ˜¯Promiseçš„å®ç°ç‰ˆæœ¬ï¼Œç¬¦åˆæœ€æ–°çš„ESè§„èŒƒï¼Œä»å®ƒçš„å®˜ç½‘ä¸Šå¯ä»¥çœ‹åˆ°å®ƒæœ‰ä»¥ä¸‹å‡ æ¡ç‰¹æ€§ï¼š ä» node.js åˆ›å»º http è¯·æ±‚ æ”¯æŒ Promise API å®¢æˆ·ç«¯æ”¯æŒé˜²æ­¢CSRF æä¾›äº†ä¸€äº›å¹¶å‘è¯·æ±‚çš„æ¥å£ï¼ˆé‡è¦ï¼Œæ–¹ä¾¿äº†å¾ˆå¤šçš„æ“ä½œï¼‰ è¿™ä¸ªæ”¯æŒé˜²æ­¢CSRFå…¶å®æŒºå¥½ç©çš„ï¼Œæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Œå°±æ˜¯è®©ä½ çš„æ¯ä¸ªè¯·æ±‚éƒ½å¸¦ä¸€ä¸ªä»cookieä¸­æ‹¿åˆ°çš„key, æ ¹æ®æµè§ˆå™¨åŒæºç­–ç•¥ï¼Œå‡å†’çš„ç½‘ç«™æ˜¯æ‹¿ä¸åˆ°ä½ cookieä¸­å¾—keyçš„ï¼Œè¿™æ ·ï¼Œåå°å°±å¯ä»¥è½»æ¾è¾¨åˆ«å‡ºè¿™ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯ç”¨æˆ·åœ¨å‡å†’ç½‘ç«™ä¸Šçš„è¯¯å¯¼è¾“å…¥ï¼Œä»è€Œé‡‡å–æ­£ç¡®çš„ç­–ç•¥ã€‚ Axiosæ—¢æä¾›äº†å¹¶å‘çš„å°è£…ï¼Œä¹Ÿæ²¡æœ‰ä¸‹æ–‡ä¼šæåˆ°çš„fetchçš„å„ç§é—®é¢˜ï¼Œè€Œä¸”ä½“ç§¯ä¹Ÿè¾ƒå°ï¼Œå½“ä¹‹æ— æ„§ç°åœ¨æœ€åº”è¯¥é€‰ç”¨çš„è¯·æ±‚çš„æ–¹å¼ã€‚- 3 Fetch1234567try &#123; let response = await fetch(url); let data = response.json(); console.log(data);&#125; catch(e) &#123; console.log(&quot;Oops, error&quot;, e);&#125; æˆ‘è®¤ä¸ºfetchçš„ä¼˜åŠ¿ä¸»è¦ä¼˜åŠ¿å°±æ˜¯ï¼š æ›´åŠ åº•å±‚ï¼Œæä¾›çš„APIä¸°å¯Œï¼ˆrequest, responseï¼‰ è„±ç¦»äº†XHRï¼Œæ˜¯ESè§„èŒƒé‡Œæ–°çš„å®ç°æ–¹å¼å¤§å®¶éƒ½å–œæ¬¢æ–°çš„ä¸œè¥¿ï¼Œå¦ç™½è¯´ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨ä½¿ç”¨åŸç”ŸXHRçš„æ—¶å€™ï¼Œå°½ç®¡å¶å°”è§‰å¾—å†™çš„ä¸‘é™‹ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†JQueryå’Œaxiosä¹‹åï¼Œå·²ç»å¯¹è¿™ä¸€å—å®Œå…¨æ— æ‰€è°“äº†ã€‚å½“ç„¶ï¼Œå¦‚æœæ–°çš„fetchèƒ½åšçš„åŒæ ·å¥½ï¼Œæˆ‘ä¸ºäº†ä¸æ‰é˜Ÿä¹Ÿä¼šé€‰æ‹©ä½¿ç”¨fetchã€‚è¿™ä¸ªé“ç†å…¶å®å¾ˆå¥½ç†è§£ï¼šä½ æœ‰ä¸€æ¶æ­¼8ï¼Œé­”æ”¹äº†Næ¬¡ï¼Œæ€§èƒ½è¾¾åˆ°äº†æ­¼10çš„æ°´å‡†ï¼Œä½†æ˜¯è¦æ˜¯æœ‰ä¸ªäººç»™ä½ æ‹¿æ¥ä¸€æ¶æ–°çš„æ­¼10ï¼Œä½ ä¹Ÿä¼šæ¯«ä¸çŠ¹è±«çš„é€‰æ‹©æ–°çš„æ­¼10â€”â€”ä¸ä»…ä»…æ˜¯æ–°ï¼Œä¹Ÿä»£è¡¨äº†è¿˜æœ‰æ–°çš„é­”æ”¹æ½œåŠ›ã€‚ ä½†æ˜¯æˆ‘æœ€è¿‘åœ¨ä½¿ç”¨fetchçš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°äº†ä¸å°‘çš„é—®é¢˜ï¼š fetchæ˜¯ä¸€ä¸ªä½å±‚æ¬¡çš„APIï¼Œä½ å¯ä»¥æŠŠå®ƒè€ƒè™‘æˆåŸç”Ÿçš„XHRï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆèˆ’æœï¼Œéœ€è¦è¿›è¡Œå°è£…å¿…é¡»é‡è§†ä»¥ä¸‹å‡ ç‚¹ fetchåªå¯¹ç½‘ç»œè¯·æ±‚æŠ¥é”™ï¼Œå¯¹400ï¼Œ500éƒ½å½“åšæˆåŠŸçš„è¯·æ±‚ï¼Œéœ€è¦å°è£…å»å¤„ç† fetché»˜è®¤ä¸ä¼šå¸¦cookieï¼Œéœ€è¦æ·»åŠ é…ç½®é¡¹ fetchä¸æ”¯æŒabortï¼Œä¸æ”¯æŒè¶…æ—¶æ§åˆ¶ï¼Œä½¿ç”¨setTimeoutåŠPromise.rejectçš„å®ç°çš„è¶…æ—¶æ§åˆ¶å¹¶ä¸èƒ½é˜»æ­¢è¯·æ±‚è¿‡ç¨‹ç»§ç»­åœ¨åå°è¿è¡Œï¼Œé€ æˆäº†æµé‡çš„æµªè´¹ fetchæ²¡æœ‰åŠæ³•åŸç”Ÿç›‘æµ‹è¯·æ±‚çš„è¿›åº¦ï¼Œè€ŒXHRå¯ä»¥ çœ‹åˆ°è¿™é‡Œï¼Œä½ å¿ƒé‡Œä¸€å®šæœ‰ä¸ªç–‘é—®ï¼Œè¿™é¬¼ä¸œè¥¿å°±æ˜¯ä¸ªåŠæ‹‰å­å·¥ç¨‹å˜›ï¼Œæˆ‘è¿˜æ˜¯å›å»ç”¨Jqueryæˆ–è€…Axiosç®—äº†â€”â€”å…¶å®æˆ‘å°±æ˜¯è¿™ä¹ˆæ‰“ç®—çš„ã€‚ä½†æ˜¯ï¼Œå¿…é¡»è¦æå‡ºçš„æ˜¯ï¼Œæˆ‘å‘ç°fetchåœ¨å‰ç«¯çš„åº”ç”¨ä¸Šæœ‰ä¸€é¡¹xhræ€ä¹ˆä¹Ÿæ¯”ä¸ä¸Šçš„èƒ½åŠ›ï¼šè·¨åŸŸçš„å¤„ç†ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“å› ä¸ºåŒæºç­–ç•¥çš„é—®é¢˜ï¼Œæµè§ˆå™¨çš„è¯·æ±‚æ˜¯å¯èƒ½éšä¾¿è·¨åŸŸçš„â€”â€”ä¸€å®šè¦æœ‰è·¨åŸŸå¤´æˆ–è€…å€ŸåŠ©JSONPï¼Œä½†æ˜¯ï¼Œfetchä¸­å¯ä»¥è®¾ç½®modeä¸ºâ€no-corsâ€ï¼ˆä¸è·¨åŸŸï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345fetch(&#x27;/users.json&#x27;, &#123; method: &#x27;post&#x27;, mode: &#x27;no-cors&#x27;, data: &#123;&#125;&#125;).then(function() &#123; /* handle response */ &#125;); è¿™æ ·ä¹‹åæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªtypeä¸ºâ€œopaqueâ€çš„è¿”å›ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯çœŸæ­£æŠµè¾¾è¿‡åå°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œä¿¡æ¯ä¸ŠæŠ¥ï¼Œåœ¨æˆ‘ä»¬ä¹‹å‰çš„image.srcæ–¹æ³•ä¸­å¤šå‡ºäº†ä¸€ç§é€‰æ‹©ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨networkä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªè¯·æ±‚åå°è®¾ç½®è·¨åŸŸå¤´ä¹‹åçš„å®é™…è¿”å›ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æå‰è°ƒè¯•æ¥å£ï¼ˆå½“ç„¶ï¼Œé€šè¿‡chromeæ’ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åšçš„åˆ°ï¼‰ã€‚æ€»ä¹‹ï¼Œfetchç°åœ¨è¿˜ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œæˆ‘å°è¯•è¿‡å‡ ä¸ªfetchå°è£…çš„åŒ…ï¼Œéƒ½è¿˜ä¸å°½å¦‚äººæ„ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆä¸‰ï¼‰","slug":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!(ä¸‰)","date":"2018-05-19T16:00:00.000Z","updated":"2020-09-16T09:07:15.000Z","comments":true,"path":"2018/05/20/ä¸€èµ·æ¥ç©ï¼ŒKoa2!(ä¸‰)/","link":"","permalink":"http://mariogogogo.github.io/2018/05/20/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%B8%89)/","excerpt":"å¸¸ç”¨æœåŠ¡1. é™æ€æ–‡ä»¶æœåŠ¡ä½¿ç”¨koa-static","text":"å¸¸ç”¨æœåŠ¡1. é™æ€æ–‡ä»¶æœåŠ¡ä½¿ç”¨koa-static12345678const Koa = require(&#x27;koa&#x27;);const app = new Koa();const serve = require(&quot;koa-static&quot;);app.use(server(_dirname+&quot;/static/html&quot;,&#123;extensions:[&#x27;html&#x27;]&#125;));app.listen(3000) 2. è·¯ç”±æœåŠ¡1234567891011121314151617181920212223242526272829303132const Koa = require(&#x27;koa&#x27;);const app = new Koa();const router = require(&quot;koa-router&quot;)();var bodyParser= require(&#x27;Koa-bodyparser&#x27;);app.use(bodyParser());app.use(router.routes());router.get(&#x27;/&#x27;,async(ctx,next)=&gt;&#123; ctx.response.body=&#x27;hello,word&#x27;&#125;)router.post(&#x27;/login&#x27;,async(ctx,next)=&gt;&#123; let name = ctx.request.body.name || &#x27;&#x27;; let pwd = ctx.request.body.password || &quot;&quot; if(name === &#x27;koa&#x27; &amp;&amp; pwd === &#x27;123&#x27;)&#123; ctx.body = &#x27;sucdess&#x27; &#125;else&#123; ctx.body = &#x27;false&#x27; &#125;&#125;)//è·¯ç”±ä¹Ÿå¯ä»¥è¿™æ ·router.post(&#x27;/del/blog/:blogId&#x27;,async(ctx,next)=&gt;&#123; await dbAPI.deletetblogID(ctx.params.blogId) await next();&#125;) 3. æ•°æ®å­˜å‚¨å®‰è£…mongoose1npm i mongoose --saveæ–°å»ºdb.js 12345678910var mongoose = require(&#x27;mongoose&#x27;);mongoose.connect(&#x27;mongodb://localhost/test&#x27;);var db = mongoose.connection;db.on(&#x27;error&#x27;,console.error.bind(console,&#x27;connection,error&#x27;));db.once(&#x27;open&#x27;,function(callback)&#123; //connected!!!!&#125;) æ¥ä¸‹å»åˆ›å»º2ç±»æ–‡ä»¶ schemaä¸€ç§æ–‡ä»¶å½¢å¼å­˜å‚¨çš„æ•°æ®åº“æ¨¡å‹éª¨æ¶ï¼Œä¸å…·å¤‡æ•°æ®åº“çš„æ“ä½œèƒ½åŠ› modelåˆschemaå‘å¸ƒç”Ÿæˆçš„æ¨¡å‹ï¼Œå…·å¤‡æŠ½è±¡å±æ€§å’Œè¡Œä¸ºçš„æ•°æ®åº“æ“ä½œå¯¹ ä¸‹é¢çœ‹æ —å­ï¼š 123456789101112131415161718192021const loginSchema = new mongoose.Schema(&#123; username:String, pwd:String&#125;)var login = db.model(&#x27;login&#x27;,loginSchema,&#x27;login&#x27;);var user1 = new login(&#123; username:&#x27;len&#x27;, pwd:&#x27;123&#x27;&#125;)user1.save(function(err)&#123; if(err) return handleError(err) //savee&#125;)//æŸ¥è¯¢var query = login.find(&#123;username:&#x27;len&#x27;&#125;);query.then(function(doc)&#123; console.log(doc)&#125;) 4. é¡µé¢æ¸²æŸ“ä½¿ç”¨ejs å‰ç«¯æ¸²æŸ“å’Œåç«¯æ¸²æŸ“ æœåŠ¡å™¨æ¸²æŸ“ä¼˜ç‚¹ï¼šé¦–å±åŠ è½½å¿«ï¼Œå¯¹seoæœ‰åˆ© ç¼ºç‚¹ï¼šå‰åç«¯è€¦åˆï¼Œä»£ç éš¾æ˜“ç»´æŠ¤ä¸”ä¸ç¾è§‚","categories":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/categories/Koa2/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆäºŒï¼‰","slug":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!(äºŒ)","date":"2018-05-18T16:00:00.000Z","updated":"2020-09-16T09:07:14.000Z","comments":true,"path":"2018/05/19/ä¸€èµ·æ¥ç©ï¼ŒKoa2!(äºŒ)/","link":"","permalink":"http://mariogogogo.github.io/2018/05/19/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!(%E4%BA%8C)/","excerpt":"ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ä¸­é—´ä»¶çš„æœ¬è´¨æ˜¯æ¥å—è¯·æ±‚å¹¶ä¸”åšå‡ºç›¸åº”åŠ¨ä½œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—reqå’Œres,åœ¨webåº”ç”¨ä¸­ï¼Œå®¢æˆ·ç«¯å‘èµ·çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œé¦–å…ˆè¦ç»è¿‡ä¸­é—´ä»¶å¤„ç†æ‰èƒ½ç»§ç»­å‘ä¸‹ã€‚","text":"ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ä¸­é—´ä»¶çš„æœ¬è´¨æ˜¯æ¥å—è¯·æ±‚å¹¶ä¸”åšå‡ºç›¸åº”åŠ¨ä½œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—reqå’Œres,åœ¨webåº”ç”¨ä¸­ï¼Œå®¢æˆ·ç«¯å‘èµ·çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œé¦–å…ˆè¦ç»è¿‡ä¸­é—´ä»¶å¤„ç†æ‰èƒ½ç»§ç»­å‘ä¸‹ã€‚ä¸­é—´ä»¶çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯next,å®ƒä»£è¡¨ä¸€ä¸ªæ–¹æ³•ï¼Œå³ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚ ä¸¾ä¸ªæ —å­ï¼š12345function md(req,res,next)&#123; console.log(&#x27;i am a middleware&#x27;); next();&#125; ä¸­é—´ä»¶çš„åŠŸèƒ½1.ä¿®æ”¹reqï¼Œreså¯¹è±¡2.ç»ˆç»“è¯·æ±‚ï¼Œå“åº”å¾ªç¯3.è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å¦‚æœæŸä¸€ä¸ªä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨nextæ–¹æ³•ï¼Œåˆ™ä»£è¡¨è¯·æ±‚å¤„ç†åˆ°æ­¤ä¸ºæ­¢ã€‚ ä¸­é—´ä»¶çš„åŠ è½½ä½¿ç”¨useï¼Œ 12var app = express()app.use(md); next()æ–¹æ³•å½“æˆ‘ä»¬è°ƒç”¨app.useæ–¹æ³•æ—¶ï¼Œåœ¨å†…éƒ¨å½¢æˆäº†ä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„ï¼Œåœ¨å†…éƒ¨ä¼šå°†æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ“ä½œæ”¾åœ¨nextæ–¹æ³•å†…éƒ¨ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œnextæ–¹æ³•å°±ä»£è¡¨æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œ ä¸­é—´ä»¶çš„ä¸²è¡Œè°ƒç”¨åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¸Œæœ›ä¸€äº›æ“ä½œèƒ½å¤Ÿä¸²è¡Œæ‰§è¡Œï¼Œæ¯”å¦‚ç­‰å¾…å†™å…¥æ—¥å¿—å®Œæˆåå†æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œæœ€åå†è¿›è¡Œè·¯ç”±å¤„ç†ï¼Œè¿™æ ·å°±éœ€è¦ä¸²è¡Œè°ƒç”¨æŸäº›å¼‚æ­¥ä¸­é—´ä»¶ ä¸¾ä¸ªExpressæ —å­ï¼š12345678910111213var app = require(&#x27;express&#x27;)();app.use(function(req,res,next)&#123; next() console.log(&#x27;i am middleware1&#x27;)&#125;)app.use(function(req,res,next)&#123; process.nextTick(function()&#123; console.log(&#x27;i am middleware1&#x27;) next() &#125;)&#125;)app.listen(3000) ç»“æœï¼š//i am middleware1//i am middleware2 åŸç†å°±æ˜¯ ç¬¬äºŒä¸ªä¸­é—´ä»¶è°ƒç”¨äº† process.nextTickæ˜¯ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œå› æ­¤é©¬ä¸Šè¿”å›åˆ°ç¬¬ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­æ‰§è¡Œ ä¸¾ä¸ªKoa2æ —å­ï¼š1234567891011121314var Koa = require(&#x27;Koa&#x27;)();var app = new Koa();app.use(async(ctx,next)&#123; await next() console.log(&#x27;i am middleware1&#x27;)&#125;)app.use(async(ctx,next)&#123; process.nextTick(function()&#123; console.log(&#x27;i am middleware1&#x27;) next() &#125;)&#125;)app.listen(3000) åŸç† ä½¿ç”¨äº† await ,çŸ¥é“nextå†…éƒ¨çš„å¼‚æ­¥æ–¹æ³•å®Œæˆä¹‹å‰ï¼Œmiddleware1éƒ½ä¸ä¼šå‘ä¸‹æ‰§è¡Œã€‚ å†ä¸¾ä¸€ä¸ªä¾‹å­-å¦‚ä½•å®ç°è¶…æ—¶å“åº”ä½¿ç”¨async å’Œ promise.raceæ–¹æ³•æ¥æ¯”è¾ƒsetimeoutå’Œä¹‹åçš„ä¸­é—´ä»¶å“ªä¸ªæ›´å¿«å®Œæˆã€‚ promise.raceæ–¹æ³•ï¼šå“ªä¸ªè¿”å›å¿«ï¼Œå°±è¿”å›å“ªä¸ªç»“æœï¼Œä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥ 123456789101112131415161718192021app.use(async(ctx,next)=&gt;&#123; var tmr = null const timeout = 5000 await Promise.race([ new Promise(function(resolve,reject)&#123; tmr = setTimeout(function()&#123; var e = new Error(&#x27;request timeout&#x27;) e.status = 408, reject(e) &#125;,timeout) &#125;), new Promise(function(resolve,reject)&#123; (async function()&#123; await next(); clearTimeout(tmr); resolve() &#125;)(); //æ‰§è¡Œåé¢åŠ è½½çš„ä¸­é—´ä»¶ &#125;) ])&#125;) åç»­å¦‚æœ‰æ›´æ·±çš„ä½“ä¼šå†è¡¥å……â€¦â€¦","categories":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/categories/Koa2/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!ï¼ˆä¸€ï¼‰","slug":"ä¸€èµ·æ¥ç©ï¼ŒKoa2!","date":"2018-05-17T16:00:00.000Z","updated":"2020-09-16T09:07:14.000Z","comments":true,"path":"2018/05/18/ä¸€èµ·æ¥ç©ï¼ŒKoa2!/","link":"","permalink":"http://mariogogogo.github.io/2018/05/18/%E4%B8%80%E8%B5%B7%E6%9D%A5%E7%8E%A9%EF%BC%8CKoa2!/","excerpt":"ä¸€ å†å²æ¸Šæºï¼šåœ¨è°ˆKoa2ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸‹Connect,è¯ç”Ÿäº2010å¹´ï¼Œå¯ä»¥å°†Connectç†è§£æˆnodeä¸­é—´ä»¶çš„è„šæ‰‹æ¶ï¼Œåªæä¾›åŸºæœ¬çš„è°ƒç”¨é€»è¾‘ï¼Œä¸å…·å¤‡å¤„ç†ä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›ã€‚","text":"ä¸€ å†å²æ¸Šæºï¼šåœ¨è°ˆKoa2ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸‹Connect,è¯ç”Ÿäº2010å¹´ï¼Œå¯ä»¥å°†Connectç†è§£æˆnodeä¸­é—´ä»¶çš„è„šæ‰‹æ¶ï¼Œåªæä¾›åŸºæœ¬çš„è°ƒç”¨é€»è¾‘ï¼Œä¸å…·å¤‡å¤„ç†ä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ ç”¨USE next Expressè¿™ä¸ªæ¡†æ¶å‡ºç°åœ¨2010å¹´ï¼Œç»§æ‰¿äº†Connectçš„å¤§éƒ¨åˆ†æ€æƒ³ï¼Œåœ¨æœ€æ–°çš„4.xç‰ˆæœ¬ï¼ŒExpressæ‹œæ‰˜äº†Connectçš„ä¾èµ–ï¼Œæ‘’å¼ƒäº†é™æ€æ–‡ä»¶æ¨¡å—ä¹‹å¤–çš„æ‰€æœ‰ä¸­é—´ä»¶ï¼Œåªä¿ç•™æ ¸å¿ƒè·¯ç”±å¤„ç†é€»è¾‘åŠä¸€äº›å…¶ä»–ä»£ç ã€‚ ä½†æ˜¯Expresså¾ˆå¤šåœºæ™¯ä»¥åŠå­˜åœ¨é—®é¢˜ï¼Œä¹‹åå°±æ¨å‡ºäº†Koa1.x Koa2.x.åˆè¡·æ˜¯å½»åº•è§£å†³Node webå¼€å‘å¼‚æ­¥é—®é¢˜ã€‚ äºŒ.åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„æœåŠ¡å™¨ 123456789const Koa = require(&#x27;Koa&#x27;);const app = new Koa;app.use(ctx =&gt;&#123; ctx.body=&#x27;hello,koa2!!!&#x27;&#125;)app.listen(3000); Nodeæä¾›äº†requestå’Œresponseè¿™2ä¸ªå¯¹è±¡ï¼ŒKoaæŠŠä»–å°è£…äº†èµ·æ¥ ctx æ˜¯ç¼©å†™ï¼›å¸¸ç”¨çš„requestï¼š ctx.header ctx,path ctx.query ctx,querystring ctx,get å¸¸ç”¨çš„response ctx.body ctx.status ctx.set() ctx.append() ä»‹ç»å¸¸ç”¨çš„ctx.state:å¯ä»¥å°†åç«¯ä¼ è¿‡æ¥çš„æ•°æ®åˆ°å‰ç«¯ã€‚ 12ctx.state.user = await User.find(id) å¤„ç†httpè¯·æ±‚ctxç›¸å½“ä¸ctx.requertæˆ–è€…ctx.response,åˆ¤æ–­httpæ–¹æ³•ç”¨ctx.method,getè¯·æ±‚ç”¨ctx.query 123456app.get(url,async(ctx,next)=&gt;&#123; console.log(ctx.method); console.log(ctx.query); await next();&#125;) getè¯·æ±‚ç›´è§‰æ‹¿ctx.reqå…ˆå¼•å…¥ bodyParserpostè¯·æ±‚ç”¨ctx.request.body.xxx 12345router.post(url,(ctx,next)=&gt;&#123; const name = ctx.request.body.name const password = ctx.request.body.password&#125;)","categories":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/categories/Koa2/"}],"tags":[{"name":"Koa2","slug":"Koa2","permalink":"http://mariogogogo.github.io/tags/Koa2/"}]},{"title":"Nodejsæ˜¯ä»€ä¹ˆ","slug":"ç¬¬ä¸€ç«  Nodejsæ˜¯ä»€ä¹ˆ","date":"2018-05-09T16:00:00.000Z","updated":"2020-09-16T09:07:00.000Z","comments":true,"path":"2018/05/10/ç¬¬ä¸€ç«  Nodejsæ˜¯ä»€ä¹ˆ/","link":"","permalink":"http://mariogogogo.github.io/2018/05/10/%E7%AC%AC%E4%B8%80%E7%AB%A0%20Nodejs%E6%98%AF%E4%BB%80%E4%B9%88/","excerpt":"1.ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­ æ‰€è°“è¿è¡Œæ—¶ï¼ˆruntime) å°±æƒ³è±¡æˆä¸€ç§ç¼–ç¨‹å‘˜çš„è¿è¡Œçš„ç¯å¢ƒ è¿™ä¸ªè¿è¡Œç¯å¢ƒåŒ…æ‹¬ä»£ç è¿è¡Œçš„ç¼–è¯‘å™¨ä»¥åŠæ“ä½œç³»ç»Ÿçš„åº•å±‚æ”¯æŒ","text":"1.ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶ï¼Ÿä¸¾ä¸€ä¸ªä¾‹å­ æ‰€è°“è¿è¡Œæ—¶ï¼ˆruntime) å°±æƒ³è±¡æˆä¸€ç§ç¼–ç¨‹å‘˜çš„è¿è¡Œçš„ç¯å¢ƒ è¿™ä¸ªè¿è¡Œç¯å¢ƒåŒ…æ‹¬ä»£ç è¿è¡Œçš„ç¼–è¯‘å™¨ä»¥åŠæ“ä½œç³»ç»Ÿçš„åº•å±‚æ”¯æŒ 2.ä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿå›è°ƒä¸å¼‚æ­¥è°ƒç”¨æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿå›è°ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½œä¸ºå‚æ•°çš„å‡½æ•°å¯ä»¥è¢«æ‰§è¡Œï¼Œ 1234[1,2,3].map(function(value)&#123; alert(value)&#125;) å›è°ƒå‡½æ•°æ—¢å¯ä»¥åŒæ­¥ï¼ˆmapï¼‰åˆå¯ä»¥å¼‚æ­¥ï¼ˆsetTimeOutï¼‰ ä¸å¼‚æ­¥è°ƒç”¨çš„å…³ç³»ï¼šåœ¨Nodeä¸­ å¦‚æœé‡åˆ°IOæ“ä½œæ¯”å¦‚ç£ç›˜å†™å…¥å†™å‡ºï¼Œä»£ç å‘èµ·ä¸€ä¸ªè°ƒç”¨åç»§ç»­å‘ä¸‹æ‰§è¡Œï¼ŒIoæ“ä½œå®Œæˆåï¼Œå†æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œè™½ç„¶ä»£ç åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå•ä¾é å¼‚æ­¥+å›è°ƒ å®ç°å¯¹é«˜å¹¶å‘çš„æ”¯æŒ 12345678910var fs = require(&#x27;fs&#x27;)var callback = function(err,data)&#123; if(err) return console.log(data.toString())&#125;fs.readerFile(&quot;foo.txt&quot;,callback)console.log(&#x27;çŒœçŒœè°æ˜¯ä¸æ˜¯å…ˆè¢«æ‰§è¡Œå•Šï¼Ÿ&#x27;) 3 ä»€ä¹ˆæ˜¯äº‹ä»¶åœ¨äº¤äº’çš„é¡µé¢ä¸Šï¼Œç”¨æˆ·å‘ç”Ÿä¸€ç³»åˆ—äº‹ä»¶ï¼šå•å‡»æŒ‰é’®ï¼Œæ‹–åŠ¨å…ƒç´  è¿™äº›äº‹ä»¶æŒ‰ç…§ä¸€å®šçš„é¡ºåºåŠ è½½åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­åŒºã€‚ 4å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ä¸¾ä¸€ä¸ªä¾‹å­ å¹¶å‘ï¼šç«è½¦ç«™å–ç¥¨ï¼Œ2æ’é˜Ÿä¼ åªæœ‰ä¸€ä¸ªå–ç¥¨æœºï¼Œåªèƒ½é˜Ÿåˆ—å¤´æ’çš„äººå»å–ç¥¨ åŒæ—¶å‘å‰ç§»åŠ¨ å¹¶è¡Œï¼šç«è½¦ç«™å–ç¥¨ 2ä¸ªé˜Ÿä¼ 2ä¸ªå–ç¥¨æœºï¼ŒåŒæ—¶å‘å‰ç§»åŠ¨ é€Ÿåº¦æ˜¯ä¸€ä¸ªçª—å£çš„2å€ä»¥ä¸Šã€‚å¹¶å‘æ˜¯å¸Œæœ›åšæ›´å¤šçš„äº‹æƒ…ï¼ˆå¤„ç†å¤šä¸ªé˜Ÿåˆ—ï¼‰å¹¶è¡Œæ˜¯å¸Œæœ›æ›´å¿«çš„å®Œæˆä»»åŠ¡ è”ç³»ï¼š å¹¶å‘ä¸­å¯ä»¥å­˜åœ¨å¹¶è¡Œ 5.åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«åŒæ­¥å¼‚æ­¥æ˜¯æè¿°è¿›ç¨‹/çº¿ç¨‹çš„è°ƒç”¨æ–¹å¼ é˜»å¡éé˜»å¡æ˜¯é’ˆå¯¹IoçŠ¶æ€è€Œè¨€ï¼Œå…³æ³¨ç¨‹åºåœ¨ç­‰å¾…IOè°ƒç”¨è¿”å›è¿™æ®µäº‹ä»¶çš„çŠ¶æ€ ä»–ä»¬ä¹‹é—´æ²¡æœ‰å¿…ç„¶çš„è”ç³» é˜»å¡ ä¸ç­‰äº åŒæ­¥ éé˜»å¡ ä¸ç­‰äº å¼‚æ­¥ ä¸ºä»€ä¹ˆå®˜ç½‘ Nodeæ²¡æœ‰ æ ‡æ¦œè‡ªå·±æ˜¯å¼‚æ­¥io è€Œæ˜¯éé˜»å¡ioå‘¢ï¼Ÿå› ä¸ºéé˜»å¡æ˜¯å®æ‰“å®çš„ Nodeçš„å¼‚æ­¥Io æ˜¯é  Libuvæ¨¡æ‹Ÿå‡ºæ¥çš„ åŒæ­¥è°ƒç”¨ä¼šé€ æˆè¿›ç¨‹çš„Ioé˜»å¡ å¼‚æ­¥è°ƒç”¨ä¸ä¼šé€ æˆè¿›è¡Œçš„Ioé˜»å¡** 6.äº‹ä»¶å¾ªç¯çš„è¿è¡Œè¿‡ç¨‹æµè§ˆå™¨å¾ªç¯ï¼šAjaxä¸ºä¾‹ï¼Œå½“javascriptæ‰§è¡Œå¯¹åº”ä»£ç ï¼Œæ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼Œè¯·æ±‚åå°±æ‰§è¡Œå®Œæ¯•äº†ï¼Œåç»­æ“ä½œä¼šäº¤ç»™å›è°ƒå‡½æ•°æ¥å¤„ç†ï¼Œæµè§ˆå™¨ä¼šåœ¨ä¸æ–­çš„éå†äº‹ä»¶é˜Ÿåˆ—ï¼Œajaxå®Œæˆä¹‹å‰ï¼Œäº‹ä»¶é˜Ÿåˆ—è¿˜æ˜¯ç©ºçš„ï¼ˆä¸æ˜¯è¯·æ±‚è¿™åŠ¨ä½œè¢«åŠ å…¥é˜Ÿåˆ—ï¼Œè€Œæ˜¯è¯·æ±‚å®Œæˆè¿™ä¸€äº‹ä»¶è¢«åŠ å…¥é˜Ÿåˆ—ï¼‰ï¼Œå½“ajaxå®Œæˆåè¿™ä¸ªé˜Ÿåˆ—å°±å¥½å¢åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶ç»‘å®šå›è°ƒï¼Œåˆ™å¾ªç¯å°±å»æ‰§è¡Œè¿™ä¸ªå›è°ƒ Nodeçš„å¾ªç¯ï¼šäº‹ä»¶å¾ªç¯ç”±libuvæ¥å®ç° timersï¼šå‡ºæ¥settimeout å’Œ setintervalçš„å›è°ƒ I/O callbacks é™¤äº†timers close setImmediateäº‹ä»¶å›è°ƒå¤–ï¼Œå¤§å¤šæ•°å›è°ƒåœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œ idle prepareï¼šå†…éƒ¨ä½¿ç”¨ï¼Œä¸ç®¡ä»– pollï¼šè½®è¯¢ ä¸æ–­æ£€æŸ¥æ˜¯å¦ç”±æ–°çš„ioäº‹ä»¶ï¼Œäº‹ä»¶å¾ªç¯å¯èƒ½ä¼šåœ¨è¿™é‡Œé˜»å¡ checkï¼š å¤„ç†setimmediateäº‹ä»¶çš„å›è°ƒ close callbacks å¤„ç†closeç›¸å…³çš„äº‹ä»¶ 7.nextTickçš„åŸç†æ˜¯ä»€ä¹ˆ å’Œ setImmaiteæœ‰ä»€ä¹ˆåŒºåˆ«process.nextTick æ˜¯ä¸€ä¸ªå¼‚æ­¥åŠ¨ä½œ åœ¨äº‹ä»¶å¾ªç¯å½“å‰é˜¶æ®µç»“æŸåæ‰§è¡Œ 123456process.nextTick(function()&#123; console.log(&#x27;first&#x27;)&#125;)console.log(&#x27;next&#x27;)//next//first ä½†æ˜¯ Nodeé™åˆ¶äº†nextTickQueueçš„å¤§å°ï¼Œå½“è¾¾åˆ°æœ€å¤§é™åˆ¶åå°±ä¼šæŠ¥é”™åŒºåˆ«ï¼šsetImmediate ä¸æ¥å—ä¸€ä¸ªæ—¶é—´ä½œä¸ºå‚æ•° åœ¨å½“å‰äº‹ä»¶å¾ªç¯ç»“å°¾è§¦å‘ï¼Œå¯¹åº”çš„å›è°ƒåœ¨å½“å‰äº‹ä»¶çš„å¾ªç¯å°¾æ‰§è¡Œprocess.nextTick ä¼šåœ¨å½“å‰æ“ä½œå®Œæˆåç«‹å³æ‰§è¡Œ ä¼šæ¯”setImmediate å…ˆæ‰§è¡Œ","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"lessçš„å¸¸ç”¨æ–¹æ³•","slug":"lessçš„å¸¸ç”¨æ–¹æ³•","date":"2018-05-08T16:00:00.000Z","updated":"2020-09-16T09:07:39.000Z","comments":true,"path":"2018/05/09/lessçš„å¸¸ç”¨æ–¹æ³•/","link":"","permalink":"http://mariogogogo.github.io/2018/05/09/less%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/","excerpt":"å¸¸å¸¸ç”¨lessè§£å†³ä¸€äº›é—®é¢˜ï¼Œä¸€äº›å¸¸ç”¨çš„å†è®°å½•ä¸‹","text":"å¸¸å¸¸ç”¨lessè§£å†³ä¸€äº›é—®é¢˜ï¼Œä¸€äº›å¸¸ç”¨çš„å†è®°å½•ä¸‹ &amp;ç›¸å½“äºçˆ¶å…ƒç´ é‡Œçš„è°12345678910111213141516171819202122@width:10;nav&#123; height: 50px; background-color: #738797; .content&#123; a&#123; color:#fff; &amp;:hover&#123; color: skyblue; &#125; &#125; .left&#123; float:left; &amp;.padding_left&#123; padding-left: @width*2px; &#125; ; &#125; .right&#123; float:right; &#125; &#125; å˜é‡12345678@height :document.documentElement.clientHeight;.content&#123; background: #738797; margin: 0; height: @height *1px;&#125; ; æ··åˆ1234567891011121314151617.classa&#123; border:1px solid #b7b7b7;&#125;.clearFix&#123; *zoom:1; &amp;:after&#123; content: &#x27;&#x27;; display: block; clear: both; &#125;&#125;.classb&#123; .classa; .clearFix;&#125; å¸¦å‚æ•°æ··åˆ1234567891011121314.border(@color)&#123; border:1px solid @color;&#125;.box1&#123; .border(#b7b7b7);&#125;.box2&#123; .border(#ff0000);&#125;.box3&#123; .border(#b7b7b7);&#125; å¤šä¸ªå‚æ•°çš„æ··åˆ123456789101112131415161718.border(@width,@style,@color)&#123; border:@width @style @color;&#125;.box1&#123; .border(1px,solid,#b7b7b7);&#125;.box2&#123; .border(1px,solid,#ff0000);&#125;.box3&#123; .border(2px,solid,#b7b7b7);&#125;.box4&#123; .border(1px,dotted,#b7b7b7);&#125;* å¸¦é»˜è®¤å€¼çš„å‚æ•°æ··åˆ1234567891011121314151617.border(@width:1px,@style:solid)&#123; border:@width @style #033333;&#125;.box1&#123; .border(1px,dotted);&#125;.box2&#123; .border();&#125;.box3&#123; .border(2px);&#125;.box4&#123; .border();&#125; æ¨¡å¼åŒ¹é…12345678910111213141516171819202122232425262728293031323334.border(top,@width:1px)&#123; border-top:@width solid #033333;&#125;.border(right,@width:1px)&#123; border-right:@width solid #033333;&#125;.border(bottom,@width:1px)&#123; border-bottom:@width solid #033333;&#125;.border(left,@width:1px)&#123; border-left:@width solid #033333;&#125;.border(@_,@width:1px)&#123; width:round(5.5)*1px;&#125;.box1&#123; .border(top,5px);&#125;.box2&#123; .border(right);&#125;.box3&#123; .border(bottom);&#125;.box4&#123; .border(left);&#125; @_è¡¨ç¤ºæ— è®ºåŒ¹é…è°æœ€åéƒ½è¿˜ä¼šæ‰§è¡Œä¸€æ¬¡è¿™ä¸ªæ–¹æ³•å¸¦ä¸Šé‡Œé¢çš„å±æ€§** å‘½åç©ºé—´123456789101112131415161718.blue&#123; .button&#123; background: blue; &#125;&#125;.red&#123; .button&#123; background: red; &#125;&#125;.box&#123; .blue &gt; .button&#125; é¿å…ç¼–è¯‘1234567.box&#123; width:@rem; //è½¬ä¹‰å­—ç¬¦ ç”¨äºŒè¾¹ç®—æ³•ç®—fontè¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ font:(12/@rem)~&#x27;/&#x27;(20/@rem) &#x27;å®‹ä½“&#x27;;&#125; 1234//è¿™ç§æ³¨é‡Šæ–¹æ³•ä¸ä¼šè¢«ç¼–è¯‘åˆ°cssæ–‡ä»¶é‡Œé¢å»ï¼ˆé€šå¸¸ç”¨äºç”Ÿäº§ç¯èŠ‚ï¼‰/* è¿™ç§æ³¨é‡Šä¼šè¢«è§£æåˆ°cssæ–‡ä»¶é‡Œé¢å»*/","categories":[{"name":"CSS","slug":"CSS","permalink":"http://mariogogogo.github.io/categories/CSS/"}],"tags":[{"name":"less","slug":"less","permalink":"http://mariogogogo.github.io/tags/less/"}]},{"title":"webpackåˆä½“éªŒ","slug":"webpackåˆä½“éªŒ","date":"2018-05-07T16:00:00.000Z","updated":"2020-09-16T09:07:58.000Z","comments":true,"path":"2018/05/08/webpackåˆä½“éªŒ/","link":"","permalink":"http://mariogogogo.github.io/2018/05/08/webpack%E5%88%9D%E4%BD%93%E9%AA%8C/","excerpt":"å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿç°åœ¨çš„å‰ç«¯ç½‘é¡µåŠŸèƒ½ä¸°å¯Œï¼Œç‰¹åˆ«æ˜¯SPAï¼ˆsingle page web application å•é¡µåº”ç”¨ï¼‰æŠ€æœ¯æµè¡Œåï¼ŒJavaScriptçš„å¤æ‚åº¦å¢åŠ å’Œéœ€è¦ä¸€å¤§å †ä¾èµ–åŒ…ï¼Œè¿˜éœ€è¦è§£å†³SCSSï¼ŒLessâ€¦â€¦æ–°å¢æ ·å¼çš„æ‰©å±•å†™æ³•çš„ç¼–è¯‘å·¥ä½œã€‚æ‰€ä»¥ç°ä»£åŒ–çš„å‰ç«¯å·²ç»å®Œå…¨ä¾èµ–äºWebPackçš„è¾…åŠ©äº†ã€‚","text":"å‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦WebPackï¼Ÿç°åœ¨çš„å‰ç«¯ç½‘é¡µåŠŸèƒ½ä¸°å¯Œï¼Œç‰¹åˆ«æ˜¯SPAï¼ˆsingle page web application å•é¡µåº”ç”¨ï¼‰æŠ€æœ¯æµè¡Œåï¼ŒJavaScriptçš„å¤æ‚åº¦å¢åŠ å’Œéœ€è¦ä¸€å¤§å †ä¾èµ–åŒ…ï¼Œè¿˜éœ€è¦è§£å†³SCSSï¼ŒLessâ€¦â€¦æ–°å¢æ ·å¼çš„æ‰©å±•å†™æ³•çš„ç¼–è¯‘å·¥ä½œã€‚æ‰€ä»¥ç°ä»£åŒ–çš„å‰ç«¯å·²ç»å®Œå…¨ä¾èµ–äºWebPackçš„è¾…åŠ©äº†ã€‚ ç°åœ¨æœ€æµè¡Œçš„ä¸‰ä¸ªå‰ç«¯æ¡†æ¶ï¼Œå¯ä»¥è¯´å’Œwebpackå·²ç»ç´§å¯†ç›¸è¿ï¼Œæ¡†æ¶å®˜æ–¹éƒ½æ¨å‡ºäº†å’Œè‡ªèº«æ¡†æ¶ä¾èµ–çš„webpackæ„å»ºå·¥å…·ã€‚ React.js+WebPack Vue.js+WebPack AngluarJS+WebPack ä»€ä¹ˆæ˜¯WebPackï¼Ÿ WebPackå¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºï¼šå®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆSassï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚åœ¨3.0å‡ºç°åï¼ŒWebpackè¿˜è‚©è´Ÿèµ·äº†ä¼˜åŒ–é¡¹ç›®çš„è´£ä»»ã€‚ è¿™æ®µè¯æœ‰ä¸‰ä¸ªé‡ç‚¹ï¼š æ‰“åŒ…ï¼šå¯ä»¥æŠŠå¤šä¸ªJavascriptæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›å’Œä¸‹è½½å¸¦å®½ã€‚ è½¬æ¢ï¼šæŠŠæ‹“å±•è¯­è¨€è½¬æ¢æˆä¸ºæ™®é€šçš„JavaScriptï¼Œè®©æµè§ˆå™¨é¡ºåˆ©è¿è¡Œã€‚ ä¼˜åŒ–ï¼šå‰ç«¯å˜çš„è¶Šæ¥è¶Šå¤æ‚åï¼Œæ€§èƒ½ä¹Ÿä¼šé‡åˆ°é—®é¢˜ï¼Œè€ŒWebPackä¹Ÿå¼€å§‹è‚©è´Ÿèµ·äº†ä¼˜åŒ–å’Œæå‡æ€§èƒ½çš„è´£ä»»ã€‚ å®‰è£…12345678//å…¨å±€å®‰è£…npm install -g webpacknpm initnpm install --save-dev webpack@3.10.0&lt;!--æŸ¥çœ‹webpackç‰ˆæœ¬--&gt;webpack -v ä¸»è¦é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&quot;use strict&quot;;const path = require(&quot;path&quot;);const HTMLPlugin = require(&quot;html-webpack-plugin&quot;);const webpack = require(&quot;webpack&quot;);const isDev = process.env.NODE_ENV === &quot;development&quot;;const config = &#123; entry: &#123; app: path.join(__dirname, &quot;../client/app.js&quot;) //å…¥å£æ–‡ä»¶ &#125;, output: &#123; filename: &quot;[name].[hash].js&quot;, path: path.resolve(__dirname, &quot;../dist&quot;), //æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶ publicPath: &quot;/public/&quot; &#125;, module: &#123; rules: [ &#123; test: /\\.jsx$/, use: &quot;babel-loader&quot; // ç¼–è¯‘æ–‡ä»¶ &#125;, &#123; test: /\\.js$/, use: &quot;babel-loader&quot;, exclude: [path.join(__dirname, &quot;../node_modules&quot;)] //æ’é™¤æ–‡ä»¶ &#125; ] &#125;, plugins: [ new HTMLPlugin(&#123; template: path.join(__dirname, &quot;../client/template.html&quot;) //distç”Ÿäº§çš„htmlä»¥ä»–ä¸ºæ¨¡æ¿ &#125;) ]&#125;;if (isDev) &#123; // å®¢æˆ·ç«¯çƒ­æ›´æ–°éœ€è¦çš„ config.entry = &#123; app: [&quot;react-hot-loader/patch&quot;, path.join(__dirname, &quot;../client/app.js&quot;)] &#125;; config.devServer = &#123; host: &quot;0.0.0.0&quot;, compress: true, port: &quot;3000&quot;, contentBase: path.join(__dirname, &quot;../dist&quot;), // é»˜è®¤ä¼šä»¥æ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œè¿™é‡ŒæŒ‡å®šæ–‡ä»¶å¤¹ hot: true, overlay: &#123; errors: true &#125;, publicPath: &quot;/public/&quot;, historyApiFallback: &#123; index: &quot;/public/index.html&quot; &#125; &#125;; //çƒ­æ›¿æ¢æ–¹æ³• æ¥è‡ªwebpackè‡ªå¸¦ config.plugins.push(new webpack.HotModuleReplacementPlugin());&#125;module.exports = config; package.jsonæ–‡ä»¶123456789&quot;scripts&quot;: &#123; &quot;build:client&quot;: &quot;webpack --config build/webpack.config.js&quot;, &quot;build:server&quot;: &quot;webpack --config build/webpack.server.js&quot;, &quot;clear&quot;: &quot;rimraf dist&quot;, &quot;build&quot;: &quot;npm run clear &amp;&amp; npm run build:client &amp;&amp; npm run build:server&quot;, &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;start&quot;: &quot;node server/server.js&quot;, &quot;dev:client&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server --config build/webpack.config.js&quot;&#125;, .babelrcæ–‡ä»¶12345678&#123; &quot;presets&quot;: [ [&quot;es2015&quot;, &#123; &quot;loose&quot;: true &#125;], &quot;react&quot; ], &quot;plugins&quot;: [&quot;react-hot-loader/babel&quot;] &#125; è¦çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶12345678910111213141516171819202122232425import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import App from &#x27;./views/App.jsx&#x27;;import &#123;AppContainer&#125; from &#x27;react-hot-loader&#x27;;const root = document.getElementById(&#x27;root&#x27;)const render = (Component) =&gt;&#123; const renderMethod = module.hot? ReactDOM.render : ReactDOM.hydrate renderMethod( &lt;AppContainer&gt; &lt;Component/&gt; &lt;/AppContainer&gt;, root )&#125;render(App);if(module.hot)&#123; module.hot.accept(&#x27;./views/App.jsx&#x27;,()=&gt;&#123; const NextApp = require(&#x27;./views/App.jsx&#x27;).default; render(NextApp) &#125;)&#125;","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"è¿™ä¸ªå«Puppeteerçš„å°çˆ¬è™«ï¼Œäº†è§£ä¸€ä¸‹ï¼","slug":"è¿™ä¸ªå«Puppeteerçš„å°çˆ¬è™«ï¼Œäº†è§£ä¸€ä¸‹ï¼","date":"2018-04-30T16:00:00.000Z","updated":"2020-09-16T09:07:16.000Z","comments":true,"path":"2018/05/01/è¿™ä¸ªå«Puppeteerçš„å°çˆ¬è™«ï¼Œäº†è§£ä¸€ä¸‹ï¼/","link":"","permalink":"http://mariogogogo.github.io/2018/05/01/%E8%BF%99%E4%B8%AA%E5%8F%ABPuppeteer%E7%9A%84%E5%B0%8F%E7%88%AC%E8%99%AB%EF%BC%8C%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%EF%BC%81/","excerpt":"ä½ è®²ä¼šå­¦åˆ°å¦‚ä½•ä½¿ç”¨JavaScriptè‡ªåŠ¨åŒ–æŠ“å–ç½‘é¡µé‡Œé¢æ„Ÿå…´è¶£çš„å†…å®¹ã€‚æˆ‘ä»¬å°†ä¼šä½¿ç”¨Puppeteerï¼ŒPuppeteeræ˜¯ä¸€ä¸ªNodeåº“ï¼Œæä¾›æ¥å£æ¥æ§åˆ¶headless Chromeã€‚Headless Chromeæ˜¯ä¸€ç§ä¸ä½¿ç”¨Chromeæ¥è¿è¡ŒChromeæµè§ˆå™¨çš„æ–¹å¼ã€‚ å¦‚æœä½ ä¸çŸ¥é“Puppeteerï¼Œä¹Ÿä¸äº†è§£headless Chromeï¼Œé‚£ä¹ˆä½ åªè¦çŸ¥é“æˆ‘ä»¬å°†è¦ç¼–å†™JavaScriptä»£ç æ¥è‡ªåŠ¨åŒ–æ§åˆ¶Chromeå°±è¡Œã€‚","text":"ä½ è®²ä¼šå­¦åˆ°å¦‚ä½•ä½¿ç”¨JavaScriptè‡ªåŠ¨åŒ–æŠ“å–ç½‘é¡µé‡Œé¢æ„Ÿå…´è¶£çš„å†…å®¹ã€‚æˆ‘ä»¬å°†ä¼šä½¿ç”¨Puppeteerï¼ŒPuppeteeræ˜¯ä¸€ä¸ªNodeåº“ï¼Œæä¾›æ¥å£æ¥æ§åˆ¶headless Chromeã€‚Headless Chromeæ˜¯ä¸€ç§ä¸ä½¿ç”¨Chromeæ¥è¿è¡ŒChromeæµè§ˆå™¨çš„æ–¹å¼ã€‚ å¦‚æœä½ ä¸çŸ¥é“Puppeteerï¼Œä¹Ÿä¸äº†è§£headless Chromeï¼Œé‚£ä¹ˆä½ åªè¦çŸ¥é“æˆ‘ä»¬å°†è¦ç¼–å†™JavaScriptä»£ç æ¥è‡ªåŠ¨åŒ–æ§åˆ¶Chromeå°±è¡Œã€‚ å®‰è£…12npm install â€“save puppeteer ä¸¾ä¾‹1 æˆªå±1234567891011121314const puppeteer = require(&#x27;puppeteer&#x27;);async function getPic() &#123; const browser = await puppeteer.launch(&#123;headless: false&#125;); const page = await browser.newPage(); await page.goto(&#x27;https://google.com&#x27;); await page.setViewport(&#123;width: 1000, height: 500&#125;) await page.screenshot(&#123;path: &#x27;google.png&#x27;&#125;); await browser.close();&#125;getPic(); ç¬¬1è¡Œï¼šå¼•å…¥æˆ‘ä»¬éœ€è¦çš„åº“Puppeteerï¼› ç¬¬3-10è¡Œï¼šä¸»å‡½æ•°getPic()åŒ…å«äº†æ‰€æœ‰çš„è‡ªåŠ¨åŒ–ä»£ç ï¼› ç¬¬12è¡Œï¼šè°ƒç”¨getPic()å‡½æ•°ã€‚ ç¬¬4è¡Œï¼šconst broswer = await puppeteer.launch();è¿™è¡Œä»£ç å¯åŠ¨puppeteerï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯åŠ¨äº†ä¸€ä¸ªChromeå®ä¾‹ï¼Œå¹¶ä¸”å’Œæˆ‘ä»¬å£°æ˜çš„browserå˜é‡ç»‘å®šèµ·æ¥ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†awaitå…³é”®å­—ï¼Œè¯¥å‡½æ•°ä¼šæš‚åœç›´åˆ°Promiseå®Œå…¨è¢«è§£æã€‚ä¹Ÿå°±æ˜¯è¯´æˆåŠŸåˆ›å»ºChromeå®ä¾‹æˆ–åˆ™æŠ¥é”™ã€‚ ç¬¬5è¡Œï¼šconst page = await browser.newPage();æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œé€šè¿‡ä½¿ç”¨awaitå…³é”®å­—æ¥ç­‰å¾…é¡µé¢æˆåŠŸåˆ›å»ºã€‚ ç¬¬6è¡Œï¼šawait page.goto(â€˜https://google.com&#39;);ä½¿ç”¨page.goto()æ‰“å¼€è°·æ­Œé¦–é¡µã€‚ ç¬¬7è¡Œï¼šawait page.screenshot({path: â€˜google.pngâ€™});è°ƒç”¨screenshot()å‡½æ•°å°†å½“å‰é¡µé¢æˆªå±ã€‚ ç¬¬9è¡Œï¼šawait browser.close();å°†æµè§ˆå™¨å…³é—­ã€‚ ä¸¾ä¾‹2 ç™¾åº¦å…³é”®å­—æœç´¢1234567891011121314151617181920212223242526272829303132333435363738394041424344// æ¼”ç¤ºè‡ªåŠ¨è®¿é—®ç™¾åº¦ç½‘ç«™å¹¶æŠ“å–ç›¸å…³æœç´¢å…³é”®è¯const puppeteer = require(&#x27;puppeteer&#x27;);(async () =&gt; &#123; const browser = await puppeteer.launch( &#123;headless: false&#125;); const page = await browser.newPage(); await page.goto(&#x27;https://www.baidu.com/&#x27;); // ç„¦ç‚¹åˆ°æœç´¢å…³é”®å­—è¾“å…¥æ¡† await page.focus(&#x27;#kw&#x27;); // è¾“å…¥å…³é”®å­— Chrome Headless await page.type(&#x27;#kw&#x27;, &#x27;Chrome Headless&#x27;, &#123;delay: 100&#125;); await page.click(&#x27;#su&#x27;); // ç‚¹å‡»â€œç™¾åº¦ä¸€ä¸‹â€æäº¤æŒ‰é’® const waitForElement = page.waitForSelector(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(5) &gt; a&#x27;, &#123;visible:true,timeout: 3000&#125;); // ç­‰å¾… 3 ç§’æˆ–è€…é¡µé¢æ˜¾ç¤ºå®Œæˆ æ³¨é‡Š1 try &#123;// æ­¤å¤„æ˜¯å¯èƒ½äº§ç”Ÿä¾‹å¤–çš„è¯­å¥ await waitForElement; var kw = []; // æ³¨é‡Š2 kw[0] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(1) &gt; a&#x27;, el =&gt; el.innerHTML); //æ³¨é‡Š3 kw[1] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(3) &gt; a&#x27;, el =&gt; el.innerHTML); kw[2] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; th:nth-child(5) &gt; a&#x27;, el =&gt; el.innerHTML); kw[3] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(1) &gt; a&#x27;, el =&gt; el.innerHTML); kw[4] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(3) &gt; a&#x27;, el =&gt; el.innerHTML); kw[5] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; th:nth-child(5) &gt; a&#x27;, el =&gt; el.innerHTML); kw[6] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(1) &gt; a&#x27;, el =&gt; el.innerHTML); kw[7] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(3) &gt; a&#x27;, el =&gt; el.innerHTML); kw[8] = await page.$eval(&#x27;#rs &gt; table &gt; tbody &gt; tr:nth-child(3) &gt; th:nth-child(5) &gt; a&#x27;, el =&gt; el.innerHTML); console.log(&#x27;ç›¸å…³æœç´¢å…³é”®è¯ï¼š&#x27;); //éå†ç›¸å…³æœç´¢å…³é”®è¯. for(var i=0;i&lt;kw.length;i++)&#123; console.log(kw[i]); &#125; &#125; catch (error) &#123; // æ­¤å¤„æ˜¯è´Ÿè´£ä¾‹å¤–å¤„ç†çš„è¯­å¥ console.log(&#x27;ç½‘é¡µä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æœç´¢&#x27;); &#125; finally &#123; // æ­¤å¤„æ˜¯å‡ºå£è¯­å¥ &#125; browser.close(); // å…³é—­é€€å‡ºã€‚å¯æ³¨é‡Šæ‰æ­¤è¡Œä»£ç ï¼Œä¾¿äºè§‚å¯Ÿæœ€åçš„ç»“æœ&#125;)(); ä¸¾ä¾‹3 æŠ“å–æ•°æ® é¦–å…ˆï¼Œäº†è§£ä¸€ä¸‹Puppeteerçš„APIã€‚æ–‡æ¡£æä¾›äº†éå¸¸ä¸°å¯Œçš„æ–¹æ³•ä¸ä»…æ”¯æŒåœ¨ç½‘é¡µä¸Šç‚¹å‡»ï¼Œè€Œä¸”å¯ä»¥å¡«å†™è¡¨å•ï¼Œè¯»å–æ•°æ®ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçˆ¬å–Books to Scrapeï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ªé€ çš„ç½‘ä¸Šä¹¦åº—ä¸“é—¨ç”¨æ¥ç»ƒä¹ çˆ¬å–æ•°æ®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889const puppeteer = require(&quot;puppeteer&quot;);const fs = require(&quot;fs&quot;);// å»¶æ—¶å™¨const sleep = time =&gt; new Promise(resolve =&gt; &#123; setTimeout(resolve, time); console.log(&quot;æ‰§è¡Œ&quot; + time + &quot;ç§’&quot;); &#125;);/** * One çˆ¬è™«ç±» */class OnePaChong &#123; constructor() &#123; // æœ€å¤§ç´¢å¼• this.maxIndex = 5; // åˆå§‹åŒ– this.init(); &#125; // åˆå§‹åŒ–å‡½æ•° async init() &#123; var arr = []; console.log(&quot;æ­£åœ¨å¯åŠ¨æµè§ˆå™¨...&quot;); this.browser = await puppeteer.launch(&#123; args: [&quot;--no-sandbox&quot;], dumpio: false, headless: false &#125;); console.log(&quot;æ­£åœ¨æ‰“å¼€æ–°é¡µé¢...&quot;); this.page = await this.browser.newPage(); // é¡ºåºçˆ¬å–é¡µé¢ await sleep(1000); for (let i = 1; i &lt; this.maxIndex; i++) &#123; await this.getPageInfo(i); &#125; this.closeBrowser(); &#125; // æŠ“å–é¡µé¢å†…å®¹ async getPageInfo(actPage) &#123; // å»¶æ—¶ 1000 æ¯«ç§’ await sleep(1000); console.log(&quot;ç°åœ¨è¿›å…¥ç¬¬&quot; + actPage + &quot;é¡µé¢&quot;); let page = this.page; await page.goto(`http://books.toscrape.com/catalogue/page-$&#123;actPage&#125;.html`,&#123; waitUntil:&#x27;networkidle2&#x27; &#125;); // è·å–ä¿¡æ¯ try &#123; // è·å–æ–‡æœ¬ const result = await page.evaluate(() =&gt; &#123; let elements = document.querySelectorAll(&quot;.product_pod&quot;); // è·å–æ‰€æœ‰ä¹¦ç±å…ƒç´  let data = []; // åˆå§‹åŒ–ç©ºæ•°ç»„æ¥å­˜å‚¨æ•°æ® for (var element of elements) &#123; // å¾ªç¯ let title = element.childNodes[5].innerText; // è·å–æ ‡é¢˜ let price = element.childNodes[7].children[0].innerText; // è·å–ä»·æ ¼ data.push(&#123; title, price &#125;); // å­˜å…¥æ•°ç»„ &#125; return data; &#125;); let arr = [...result] console.log(&#x27;-------------------------------------------- start&#x27;) console.log(&#x27;é¡µé¢é¡µç ï¼š&#x27;, actPage); console.log(&#x27;é‡‡é›†çŠ¶æ€ï¼š&#x27;, &#x27;æˆåŠŸ&#x27;); console.log(&#x27;é‡‡é›†æ•°æ®ï¼š&#x27;, result); console.log(&#x27;é‡‡é›†æ•°æ®ï¼š&#x27;, arr.length); console.log(&#x27;-------------------------------------------- end&#x27;) process.send(result) &#125; catch (error) &#123; console.log(&quot;-------------------------------------------- start&quot;); console.log(&quot;é¡µé¢é¡µç ï¼š&quot;, actPage); console.log(&quot;é‡‡é›†çŠ¶æ€ï¼š&quot;, &quot;å¤±è´¥&quot;); console.log(&quot;é”™è¯¯ä¿¡æ¯ï¼š&quot;, error); console.log(&quot;-------------------------------------------- end&quot;); &#125; &#125; // å…³é—­æµè§ˆå™¨ async closeBrowser() &#123; console.log(&quot;æ­£åœ¨å…³é—­æµè§ˆå™¨...&quot;); process.exit(0) await this.browser.close(); &#125;&#125;// å¯ç”¨çˆ¬è™«new OnePaChong(); TODO1.ç±»ä¼¼åˆ†é¡µæŠ“å–æ•°æ®å¦‚ä½•å®ç°å…¨éƒ¨æ•°æ®éƒ½æŠ“å–åˆ°ï¼ˆç°åœ¨åªèƒ½å®ç°ä¸€ä¸ªé¡µé¢çš„æŠ“å–ï¼‰ç„¶åä¼ ç»™æ•°æ®åº“ä¿å­˜","categories":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/categories/NodeJs/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://mariogogogo.github.io/tags/%E6%B5%8B%E8%AF%95/"}]},{"title":"Git ä¸ªäººå¸¸ç”¨å‘½ä»¤","slug":"Gitä¸ªäººå¸¸ç”¨å‘½ä»¤","date":"2018-04-25T16:00:00.000Z","updated":"2020-12-08T01:41:35.000Z","comments":true,"path":"2018/04/26/Gitä¸ªäººå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://mariogogogo.github.io/2018/04/26/Git%E4%B8%AA%E4%BA%BA%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"åˆšè¿›å…¥æ–°å…¬å¸ï¼Œè¢«å‘ŠçŸ¥å›¢é˜Ÿæ˜¯ç”¨ Git ç®¡ç†é¡¹ç›®ä»£ç çš„ï¼Œè€Œä½ å´ä»æ¥æ²¡ç”¨è¿‡ Gitã€‚çºµç„¶åŒäº‹å‘Šè¯‰ä½ ã€Œæ²¡äº‹ï¼Œå…ˆè‡ªå­¦ä¸€ä¸‹ã€ã€Œæœ‰é—®é¢˜å¯ä»¥é—®æˆ‘ã€ï¼Œä½†ä½ è‚¯å®šä¸æƒ³ä¸€è¿›å…¬å¸å°±èŠ±å¤ªå¤šæ—¶é—´åœ¨è‡ªæˆ‘å­¦ä¹ ä¸Šï¼Œä¹Ÿä¸æƒ³è¿‡å¤šåœ°æ‰“æ‰°è¿™äº›åˆšè®¤è¯†çš„åŒäº‹ã€‚æ€ä¹ˆåŠï¼Ÿ å¯¹ä½ æ¥è¯´ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå…ˆçŸ¥é“ Git æ€ä¹ˆç”¨ã€‚å…ˆæŠŠæœ€åŸºæœ¬çš„æŒæ¡äº†ï¼Œè‡³äºæ­£è§„å›¢é˜Ÿä½¿ç”¨ Git æœ‰ä»€ä¹ˆé¢å¤–è¦æ±‚ã€Git æœ‰ä»€ä¹ˆé«˜çº§ç”¨æ³•ã€Git çš„åŸç†è¿™äº›ï¼Œéƒ½å¯ä»¥æ”¾åœ¨è¿™ä¹‹åã€‚ä¸‡äº‹å¼€å¤´éš¾ï¼Œä½ å…ˆæŠŠ Git æœ€åŸºæœ¬çš„ä½¿ç”¨æŒæ¡äº†ï¼Œåé¢çš„å†ä¸€æ­¥ä¸€æ­¥æ¥ã€‚â€¦","text":"åˆšè¿›å…¥æ–°å…¬å¸ï¼Œè¢«å‘ŠçŸ¥å›¢é˜Ÿæ˜¯ç”¨ Git ç®¡ç†é¡¹ç›®ä»£ç çš„ï¼Œè€Œä½ å´ä»æ¥æ²¡ç”¨è¿‡ Gitã€‚çºµç„¶åŒäº‹å‘Šè¯‰ä½ ã€Œæ²¡äº‹ï¼Œå…ˆè‡ªå­¦ä¸€ä¸‹ã€ã€Œæœ‰é—®é¢˜å¯ä»¥é—®æˆ‘ã€ï¼Œä½†ä½ è‚¯å®šä¸æƒ³ä¸€è¿›å…¬å¸å°±èŠ±å¤ªå¤šæ—¶é—´åœ¨è‡ªæˆ‘å­¦ä¹ ä¸Šï¼Œä¹Ÿä¸æƒ³è¿‡å¤šåœ°æ‰“æ‰°è¿™äº›åˆšè®¤è¯†çš„åŒäº‹ã€‚æ€ä¹ˆåŠï¼Ÿ å¯¹ä½ æ¥è¯´ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå…ˆçŸ¥é“ Git æ€ä¹ˆç”¨ã€‚å…ˆæŠŠæœ€åŸºæœ¬çš„æŒæ¡äº†ï¼Œè‡³äºæ­£è§„å›¢é˜Ÿä½¿ç”¨ Git æœ‰ä»€ä¹ˆé¢å¤–è¦æ±‚ã€Git æœ‰ä»€ä¹ˆé«˜çº§ç”¨æ³•ã€Git çš„åŸç†è¿™äº›ï¼Œéƒ½å¯ä»¥æ”¾åœ¨è¿™ä¹‹åã€‚ä¸‡äº‹å¼€å¤´éš¾ï¼Œä½ å…ˆæŠŠ Git æœ€åŸºæœ¬çš„ä½¿ç”¨æŒæ¡äº†ï¼Œåé¢çš„å†ä¸€æ­¥ä¸€æ­¥æ¥ã€‚â€¦ æŠŠè¿œç¨‹ä»“åº“å–åˆ°æœ¬åœ°1git clone ä½ åˆšå¤åˆ¶çš„åœ°å€ å®ƒä¼šåˆ—å‡ºä½ çš„æäº¤å†å²1git log status æ˜¯ç”¨æ¥æŸ¥çœ‹å·¥ä½œç›®å½•å½“å‰çŠ¶æ€çš„æŒ‡ä»¤1git status ä½ åœ¨ master branch å½“å‰ branch æ²¡æœ‰è½åäº origin/master ä½ æœ‰ untracked files ï¼ˆæœªè¿½è¸ªçš„æ–‡ä»¶ï¼‰ï¼Œæ–‡ä»¶åæ˜¯ shopping list.txtã€‚ ä½ å¯ä»¥ä½¿ç”¨ git add æ¥å¼€å§‹è¿½è¸ªæ–‡ä»¶ã€‚â€¦ ä½ é€šè¿‡ add æŒ‡ä»¤æš‚å­˜çš„å†…å®¹ï¼Œéƒ½ä¼šè¢«å†™è¿›è¿™ä¸ªæ–‡ä»¶é‡Œ1git add . æäº¤çš„æ–¹å¼æ˜¯ç”¨ commit æŒ‡ä»¤1git commit æäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹‹åï¼ŒæŠŠæœ¬åœ°æäº¤ push åˆ°ä¸­å¤®ä»“åº“ï¼ˆgit pushï¼‰1git push ä½ æƒ³åˆ›å»ºä¸€ä¸ªå«åš â€œfeature1â€ çš„ branch åˆ†æ”¯12git branch feature1git checkout -b feature1 åˆ‡æ¢ branch1git checkout feature1 åˆ é™¤ branch1git branch -d feature1 åˆå¹¶åˆ†æ”¯1git merge feature1 æ€ç»´å¯¼å›¾åˆ†äº« å¸¸ç”¨ Git å‘½ä»¤æ€»ç»“ git config â€“global user.name â€œä½ çš„åå­—â€ è®©ä½ å…¨éƒ¨çš„ Git ä»“åº“ç»‘å®šä½ çš„åå­— git config â€“global user.email â€œä½ çš„é‚®ç®±â€ è®©ä½ å…¨éƒ¨çš„ Git ä»“åº“ç»‘å®šä½ çš„é‚®ç®± git init åˆå§‹åŒ–ä½ çš„ä»“åº“ git add . æŠŠå·¥ä½œåŒºçš„æ–‡ä»¶å…¨éƒ¨æäº¤åˆ°æš‚å­˜åŒº git add .// æŠŠå·¥ä½œåŒºçš„ &lt; file &gt; æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº git commit -m â€œxxxâ€ æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°ä»“åº“åŒºï¼Œæš‚å­˜åŒºç©ºç©ºè¡è¡ git remote add origin https://github.com/name/name_cangku.git æŠŠæœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿æ¥èµ·æ¥ git push -u origin master æŠŠä»“åº“åŒºçš„ä¸»åˆ†æ”¯ master æäº¤åˆ°è¿œç¨‹ä»“åº“é‡Œ git push -u origin &lt;å…¶ä»–åˆ†æ”¯&gt; æŠŠå…¶ä»–åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“ git status æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€ git diff æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çš„å…·ä½“å†…å®¹ git log æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤å†å² git clone + ä»“åº“åœ°å€ä¸‹è½½å…‹éš†æ–‡ä»¶ git reset â€“hard + ç‰ˆæœ¬å· å›æº¯ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·åœ¨ commit çš„æ—¶å€™ä¸ master è·Ÿéšåœ¨ä¸€èµ· git reflog æ˜¾ç¤ºå‘½ä»¤å†å² git checkout â€“ æ’¤é”€å‘½ä»¤ï¼Œç”¨ç‰ˆæœ¬åº“é‡Œçš„æ–‡ä»¶æ›¿æ¢æ‰å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚æˆ‘è§‰å¾—å°±åƒæ˜¯ Git ä¸–ç•Œçš„ ctrl + z git rm åˆ é™¤ç‰ˆæœ¬åº“çš„æ–‡ä»¶ git branch æŸ¥çœ‹å½“å‰æ‰€æœ‰åˆ†æ”¯ git branch &lt;åˆ†æ”¯åå­—&gt; åˆ›å»ºåˆ†æ”¯ git checkout &lt;åˆ†æ”¯åå­—&gt; åˆ‡æ¢åˆ°åˆ†æ”¯ git merge &lt;åˆ†æ”¯åå­—&gt; åˆå¹¶åˆ†æ”¯ git branch -d &lt;åˆ†æ”¯åå­—&gt; åˆ é™¤åˆ†æ”¯, æœ‰å¯èƒ½ä¼šåˆ é™¤å¤±è´¥ï¼Œå› ä¸º Git ä¼šä¿æŠ¤æ²¡æœ‰è¢«åˆå¹¶çš„åˆ†æ”¯ git branch -D + &lt;åˆ†æ”¯åå­—&gt; å¼ºè¡Œåˆ é™¤ï¼Œä¸¢å¼ƒæ²¡è¢«åˆå¹¶çš„åˆ†æ”¯ git log â€“graph æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾ git merge â€“no-ff &lt;åˆ†æ”¯åå­—&gt; åˆå¹¶åˆ†æ”¯çš„æ—¶å€™ç¦ç”¨ Fast forward æ¨¡å¼, å› ä¸ºè¿™ä¸ªæ¨¡å¼ä¼šä¸¢å¤±åˆ†æ”¯å†å²ä¿¡æ¯ git stash å½“æœ‰å…¶ä»–ä»»åŠ¡æ’è¿›æ¥æ—¶ï¼ŒæŠŠå½“å‰å·¥ä½œç°åœº â€œå­˜å‚¨â€ èµ·æ¥, ä»¥åæ¢å¤åç»§ç»­å·¥ä½œ git stash list æŸ¥çœ‹ä½ åˆšåˆš â€œå­˜æ”¾â€ èµ·æ¥çš„å·¥ä½œå»å“ªé‡Œäº† git stash apply æ¢å¤å´ä¸åˆ é™¤ stash å†…å®¹ git stash drop åˆ é™¤ stash å†…å®¹ git stash pop æ¢å¤çš„åŒæ—¶æŠŠ stash å†…å®¹ä¹Ÿåˆ äº† git remote æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œä¼šæ˜¾ç¤º originï¼Œè¿œç¨‹ä»“åº“é»˜è®¤åç§°ä¸º origin git remote -v æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ git pull æŠŠæœ€æ–°çš„æäº¤ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸‹æ¥ï¼Œåœ¨æœ¬åœ°åˆå¹¶, å’Œ git push ç›¸å git rebase æŠŠåˆ†å‰çš„æäº¤å†å² â€œæ•´ç†â€ æˆä¸€æ¡ç›´çº¿ï¼Œçœ‹ä¸Šå»æ›´ç›´è§‚ git tag æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼Œå¯ä»¥çŸ¥é“å†å²ç‰ˆæœ¬çš„ tag git tag æ‰“æ ‡ç­¾ï¼Œé»˜è®¤ä¸º HEADã€‚æ¯”å¦‚ git tag v1.0 git tag &lt; ç‰ˆæœ¬å· &gt; æŠŠç‰ˆæœ¬å·æ‰“ä¸Šæ ‡ç­¾ï¼Œç‰ˆæœ¬å·å°±æ˜¯ commit æ—¶ï¼Œè·Ÿåœ¨æ—è¾¹çš„ä¸€ä¸²å­—æ¯æ•°å­— git show æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ git tag -a -m â€œ&lt; è¯´æ˜ &gt;â€ åˆ›å»ºå¸¦è¯´æ˜çš„æ ‡ç­¾ã€‚-a æŒ‡å®šæ ‡ç­¾åï¼Œ-m æŒ‡å®šè¯´æ˜æ–‡å­— git tag -d åˆ é™¤æ ‡ç­¾ git push origin æ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ git push origin â€“tags ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ git push origin :refs/tags/ åˆ é™¤è¿œç¨‹æ ‡ç­¾ &lt; tagname&gt; git config â€“global color.ui true è®© Git æ˜¾ç¤ºé¢œè‰²ï¼Œä¼šè®©å‘½ä»¤è¾“å‡ºçœ‹èµ·æ¥æ›´é†’ç›® git add -f å¼ºåˆ¶æäº¤å·²å¿½ç•¥çš„çš„æ–‡ä»¶ git check-ignore -v æ£€æŸ¥ä¸ºä»€ä¹ˆ Git ä¼šå¿½ç•¥è¯¥æ–‡ä»¶","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://mariogogogo.github.io/tags/Git/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆä¸ªäººä¸­å¿ƒç»„ä»¶ï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆä¸ªäººä¸­å¿ƒç»„ä»¶ï¼‰","date":"2018-04-25T16:00:00.000Z","updated":"2020-09-16T09:07:03.000Z","comments":true,"path":"2018/04/26/ä»¿ç¾å›¢Appï¼ˆä¸ªäººä¸­å¿ƒç»„ä»¶ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/26/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%BB%84%E4%BB%B6%EF%BC%89/","excerpt":"å†™ä¸€ä¸ªä¸ªäººä¸­å¿ƒç»„ä»¶","text":"å†™ä¸€ä¸ªä¸ªäººä¸­å¿ƒç»„ä»¶ æ•ˆæœå›¾ è™šæ‹Ÿæ•°æ®123456789101112131415161718192021222324getDataList = () =&gt; &#123; return ( [ [ &#123;title: &#x27;æˆ‘çš„é’±åŒ…&#x27;, subtitle: &#x27;åŠä¿¡ç”¨å¡&#x27;, image: require(&#x27;../../img/mine/icon_mine_wallet.png&#x27;)&#125;, &#123;title: &#x27;ä½™é¢&#x27;, subtitle: &#x27;ï¿¥95872385&#x27;, image: require(&#x27;../../img/mine/icon_mine_balance.png&#x27;)&#125;, &#123;title: &#x27;æŠµç”¨åˆ¸&#x27;, subtitle: &#x27;63&#x27;, image: require(&#x27;../../img/mine/icon_mine_voucher.png&#x27;)&#125;, &#123;title: &#x27;ä¼šå‘˜å¡&#x27;, subtitle: &#x27;2&#x27;, image: require(&#x27;../../img/mine/icon_mine_membercard.png&#x27;)&#125; ], [ &#123;title: &#x27;å¥½å‹å»å“ª&#x27;, image: require(&#x27;../../img/mine/icon_mine_friends.png&#x27;)&#125;, &#123;title: &#x27;æˆ‘çš„è¯„ä»·&#x27;, image: require(&#x27;../../img/mine/icon_mine_comment.png&#x27;)&#125;, &#123;title: &#x27;æˆ‘çš„æ”¶è—&#x27;, image: require(&#x27;../../img/mine/icon_mine_collection.png&#x27;)&#125;, &#123;title: &#x27;ä¼šå‘˜ä¸­å¿ƒ&#x27;, subtitle: &#x27;v15&#x27;, image: require(&#x27;../../img/mine/icon_mine_membercenter.png&#x27;)&#125;, &#123;title: &#x27;ç§¯åˆ†å•†åŸ&#x27;, subtitle: &#x27;å¥½ç¤¼å·²ä¸Šçº¿&#x27;, image: require(&#x27;../../img/mine/icon_mine_member.png&#x27;)&#125; ], [ &#123;title: &#x27;å®¢æœä¸­å¿ƒ&#x27;, image: require(&#x27;../../img/mine/icon_mine_customerService.png&#x27;)&#125;, &#123;title: &#x27;å…³äºç¾å›¢&#x27;, subtitle: &#x27;æˆ‘è¦åˆä½œ&#x27;, image: require(&#x27;../../img/mine/icon_mine_aboutmeituan.png&#x27;)&#125; ] ] ) &#125; 12345678910111213141516171819renderHeader = () =&gt; &#123; return ( &lt;View style=&#123;styles.header&#125;&gt; &lt;Image style=&#123;styles.avatar&#125; source=&#123;require(&#x27;../../img/mine/avatar.png&#x27;)&#125; /&gt; &lt;View&gt; &lt;View style=&#123;&#123;flexDirection: &#x27;row&#x27;, alignItems: &#x27;center&#x27;&#125;&#125;&gt; &lt;Heading2 style=&#123;&#123;color: &#x27;white&#x27;&#125;&#125;&gt;å¤§ä¿å¥&lt;/Heading2&gt; &lt;Image source=&#123;require(&#x27;../../img/mine/beauty_technician_v15.png&#x27;)&#125; /&gt; &lt;/View&gt; &lt;Paragraph style=&#123;&#123;color: &#x27;white&#x27;, marginTop: 10&#125;&#125;&gt;ä¸ªäººä¿¡æ¯ &gt;&lt;/Paragraph&gt; &lt;/View&gt; &lt;/View&gt; ) &#125; index.js 123456789101112131415161718192021render() &#123; return ( &lt;View style=&#123;&#123;flex: 1, backgroundColor: color.paper&#125;&#125;&gt; &lt;View style=&#123;styles.headerBackground&#125; /&gt; &lt;ScrollView refreshControl=&#123; &lt;RefreshControl refreshing=&#123;this.state.isRefreshing&#125; onRefresh=&#123;this.onHeaderRefresh&#125; tintColor=&#x27;gray&#x27; /&gt; &#125; &gt; &#123;this.renderHeader()&#125; &lt;SpacingView /&gt; &#123;this.renderCells()&#125; &lt;/ScrollView&gt; &lt;/View&gt; )&#125; renderCellsæ–¹æ³• 2ä¸ªforå¾ªç¯ åˆ†è§£æˆä¸‰å—å†…å®¹æ˜¾ç¤º æ¯ä¸€å¿«çš„ç»„ä»¶DetailCell1234567891011121314151617181920212223242526272829renderCells = () =&gt; &#123; let cells = [] let dataList = this.getDataList() for (let i = 0; i &lt; dataList.length; i++) &#123; let sublist = dataList[i] for (let j = 0; j &lt; sublist.length; j++) &#123; let data = sublist[j] let cell = ( &lt;DetailCell key=&#123;data.title&#125; title=&#123;data.title&#125; subtitle=&#123;data.subtitle&#125; image=&#123;data.image&#125; /&gt; ) cells.push(cell) &#125; cells.push( &lt;SpacingView key=&#123;i&#125; /&gt; ) &#125; return ( &lt;View&gt; &#123;cells&#125; &lt;/View&gt; ) &#125; DetailCell.js1234567891011121314151617181920212223class DetailCell extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; &#125;; &#125; render() &#123; let &#123;image,title,subtitle,style&#125; = this.props; let iconElement = this.props.image &amp;&amp; ( &lt;Image style=&#123;styles.icon&#125; source=&#123;image&#125;/&gt; ) return ( &lt;TouchableOpacity &gt; &lt;View style=&#123;[styles.container,style]&#125;&gt; &#123;iconElement&#125; &lt;Heading3&gt;&#123;title&#125;&lt;/Heading3&gt; &lt;View style=&#123;&#123;flex:1&#125;&#125;/&gt; &lt;Paragraph style=&#123;&#123;color:&#x27;#999&#x27;&#125;&#125;&gt;&#123;subtitle&#125;&lt;/Paragraph&gt; &lt;Image style=&#123;styles.arrow&#125; source=&#123;require(&#x27;../img/public/cell_arrow.png&#x27;)&#125; /&gt; &lt;/View&gt; &lt;Separator/&gt; &lt;/TouchableOpacity&gt; )&#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆçŒœä½ å–œæ¬¢éƒ¨åˆ†ç»„ä»¶ï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆçŒœä½ å–œæ¬¢éƒ¨åˆ†ç»„ä»¶ï¼‰","date":"2018-04-24T16:00:00.000Z","updated":"2020-09-16T09:07:03.000Z","comments":true,"path":"2018/04/25/ä»¿ç¾å›¢Appï¼ˆçŒœä½ å–œæ¬¢éƒ¨åˆ†ç»„ä»¶ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/25/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/","excerpt":"å†™ä¸€ä¸ªçŒœä½ å–œæ¬¢ç»„ä»¶","text":"å†™ä¸€ä¸ªçŒœä½ å–œæ¬¢ç»„ä»¶ æ•ˆæœå›¾ index.js12345678910111213//ç‚¹å‡»è¯¦æƒ…è·³è½¬ onCellSelected(info) &#123; this.props.navigation.navigate(&quot;GroupPurchaseScene&quot;, &#123; info: info &#125;); &#125; renderItem = rowData =&gt; &#123; return ( &lt;GroupPurchaseCell onPress=&#123;this.onCellSelected.bind(this)&#125; info=&#123;rowData.item&#125; /&gt; ); &#125;; GroupPurchaseCell.js1234567891011121314151617181920212223242526272829class GroupPurchaseCell extends Component &#123; render() &#123; let &#123; info, onPress, waiting &#125; = this.props; let imageUrl = info.imageUrl.replace(&quot;w.h&quot;, &quot;160.0&quot;); return ( &lt;TouchableOpacity style=&#123;styles.container&#125; onPress=&#123;() =&gt; &#123; NoDoublePress.onPress(() =&gt; &#123; onPress(info); &#125;); &#125;&#125; &gt; &lt;Image style=&#123;styles.icon&#125; source=&#123;&#123; uri: imageUrl &#125;&#125; /&gt; &lt;View style=&#123;styles.rightContainer&#125;&gt; &lt;Heading2&gt;&#123;info.title&#125;&lt;/Heading2&gt; &lt;Paragraph numberOfLines=&#123;0&#125; style=&#123;&#123; marginTop: 8 &#125;&#125;&gt; &#123;info.subtitle&#125; &lt;/Paragraph&gt; &lt;View style=&#123;&#123; flex: 1, justifyContent: &quot;flex-end&quot; &#125;&#125;&gt; &lt;Heading2 style=&#123;styles.price&#125;&gt;&#123;info.price&#125;å…ƒ&lt;/Heading2&gt; &lt;/View&gt; &lt;/View&gt; &lt;/TouchableOpacity&gt; ); &#125;&#125; è¯¦æƒ…é¡µé¢æ•ˆæœå›¾ GroupPurchaseScene.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960class GroupPurchaseScene extends Component &#123; static navigationOptions = (&#123; navigation &#125;) =&gt; (&#123; headerTitle: &quot;å›¢è´­è¯¦æƒ…&quot;, headerRight: ( &lt;NavigationItem icon=&#123;require(&quot;../../img/public/icon_navigationItem_share.png&quot;)&#125; onPress=&#123;() =&gt; &#123; alert(&quot;share&quot;); &#125;&#125; /&gt; ), headerStyle:&#123; borderBottomWidth: 0, //å–æ¶ˆåº•éƒ¨é˜´å½± elevation: 0, &#125; &#125;); constructor(props) &#123; super(props); &#125; render() &#123; let &#123; info &#125; = this.props.navigation.state.params; let imageUrl = info.imageUrl.replace(&quot;w.h&quot;, &quot;480.0&quot;); return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;View&gt; &lt;Image source=&#123;&#123; uri: imageUrl &#125;&#125; style=&#123;styles.banner&#125; /&gt; &lt;View style=&#123;styles.topContainer&#125;&gt; &lt;Heading2 style=&#123;&#123; color: color.primary &#125;&#125;&gt;ï¿¥&lt;/Heading2&gt; &lt;Heading1 style=&#123;&#123; marginBottom: -8 &#125;&#125;&gt;&#123;info.price&#125;&lt;/Heading1&gt; &lt;Paragraph style=&#123;&#123; marginLeft: 10 &#125;&#125;&gt; é—¨å¸‚ä»·ï¼šï¿¥&#123;(info.price * 1.1).toFixed(0)&#125; &lt;/Paragraph&gt; &lt;View style=&#123;&#123; flex: 1 &#125;&#125; /&gt; &lt;Button title=&#x27;ç«‹å³æŠ¢è´­&#x27; titleStyle=&#123;&#123;color: &#x27;white&#x27;, fontSize: 18&#125;&#125; style=&#123;styles.buyButton&#125; /&gt; &lt;/View&gt; &lt;/View&gt; &lt;Separator /&gt; &lt;View style=&#123;styles.tagContainer&#125;&gt; &lt;Image style=&#123;&#123; width: 20, height: 20 &#125;&#125; source=&#123;require(&quot;../../img/home/icon_deal_anytime_refund.png&quot;)&#125; /&gt; &lt;Paragraph style=&#123;&#123; color: &quot;#89B24F&quot; &#125;&#125;&gt; éšæ—¶é€€&lt;/Paragraph&gt; &lt;View style=&#123;&#123; flex: 1 &#125;&#125; /&gt; &lt;Paragraph&gt;å·²å”®123&lt;/Paragraph&gt; &lt;/View&gt; &lt;/View&gt; ); &#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆå›¢è´­éƒ¨åˆ†ç»„ä»¶ï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆå›¢è´­éƒ¨åˆ†ç»„ä»¶ï¼‰","date":"2018-04-23T16:00:00.000Z","updated":"2020-09-16T09:07:04.000Z","comments":true,"path":"2018/04/24/ä»¿ç¾å›¢Appï¼ˆå›¢è´­éƒ¨åˆ†ç»„ä»¶ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/24/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%9B%A2%E8%B4%AD%E9%83%A8%E5%88%86%E7%BB%84%E4%BB%B6%EF%BC%89/","excerpt":"å†™ä¸€ä¸ªä¸­é—´å›¢è´­éƒ¨åˆ†ç»„ä»¶","text":"å†™ä¸€ä¸ªä¸­é—´å›¢è´­éƒ¨åˆ†ç»„ä»¶ index.js12345678910111213141516171819202122232425262728293031323334353637//è¯·æ±‚componentDidMount() &#123;this.requestData();&#125; requestData = async () =&gt; &#123;this.requestRecommend();//å›¢è´­åŠ è½½this.requestDiscount();&#125;; //å›¢è´­åŠ è½½requestDiscount = async () =&gt; &#123;try &#123; let response = await fetch(api.discount); let json = await response.json(); console.log(&quot;json&quot; + JSON.stringify(json)); this.setState(&#123; discounts: json.data &#125;);&#125; catch (error) &#123; alert(&quot;error &quot; + error);&#125;&#125;; onGridSelected = index =&gt; &#123;console.log(&quot;è¿›æ¥äº†&quot;);let url = &quot;http://www.baidu.com&quot;;this.props.navigation.navigate(&quot;WebScreen&quot;, &#123; url: url &#125;);&#125;;&lt;SpacingView /&gt; &lt;HomeGridView infos=&#123;this.state.discounts&#125; onGridSelected=&#123;this.onGridSelected&#125; /&gt;&lt;SpacingView /&gt; HomeGridVie.js12345678910111213141516171819class HomeGridView extends Component &#123; render() &#123; let &#123;infos, onGridSelected&#125; = this.props return ( &lt;View style=&#123;styles.container&#125;&gt; &#123;infos.map((info, index) =&gt; ( &lt;HomeGridItem key=&#123;index&#125; info=&#123;info&#125; onPress=&#123;() =&gt; &#123; onGridSelected(index) &#125;&#125; /&gt; ))&#125; &lt;/View&gt; ) &#125;&#125; HomeGridItem.js123456789101112131415161718192021222324252627282930class HomeGridItem extends Component&#123; render() &#123; let &#123;info, onPress&#125; = this.props let title = info.title; let subtitle = info.subtitle; let imageUrl = info.image let color = &#x27;red&#x27; // let title = info.maintitle // let color = info.typeface_color // let subtitle = info.deputytitle // let imageUrl = info.imageurl.replace(&#x27;w.h&#x27;, &#x27;120.0&#x27;) return ( &lt;TouchableOpacity style=&#123;styles.container&#125; onPress=&#123;onPress&#125;&gt; &lt;View&gt; &lt;Heading2 style=&#123;&#123;color: color, marginBottom: 10&#125;&#125;&gt;&#123;title&#125;&lt;/Heading2&gt; &lt;Heading3&gt;&#123;subtitle&#125;&lt;/Heading3&gt; &lt;/View&gt; &lt;Image style=&#123;styles.icon&#125; source=&#123;&#123;uri: imageUrl&#125;&#125; /&gt; &lt;/TouchableOpacity&gt; ) &#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆå¤´éƒ¨å¯¼èˆªï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆå¤´éƒ¨å¯¼èˆªï¼‰","date":"2018-04-21T16:00:00.000Z","updated":"2020-09-16T09:07:04.000Z","comments":true,"path":"2018/04/22/ä»¿ç¾å›¢Appï¼ˆå¤´éƒ¨å¯¼èˆªï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/22/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%A4%B4%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/","excerpt":"é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªå¤´éƒ¨å¯¼èˆªæŒ‰é’®","text":"é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªå¤´éƒ¨å¯¼èˆªæŒ‰é’® æ•ˆæœå›¾å¦‚ä¸‹ æ³¨æ„å®‰å“ç¯å¢ƒä¸‹é»˜è®¤çŠ¶æ€æ æ˜¯è¦å•ç‹¬è®¾ç½®çš„ 1&lt;StatusBar backgroundColor=&#123;color.primary&#125; barStyle=&quot;light-content&quot; /&gt; 12345678910111213141516171819202122static navigationOptions = (&#123; navigation &#125;) =&gt; (&#123; headerTitle: ( &lt;TouchableOpacity style=&#123;styles.searchBar&#125;&gt; &lt;Image source=&#123;require(&quot;../../img/home/search_icon.png&quot;)&#125; style=&#123;styles.searchIcon&#125; /&gt; &lt;Text&gt;æœç´¢&lt;/Text&gt; &lt;/TouchableOpacity&gt; ), headerLeft: &lt;NavigationItem title=&quot;å®šä½&quot; titleStyle=&#123;&#123; color: &quot;white&quot; &#125;&#125; /&gt;, headerRight: ( &lt;NavigationItem icon=&#123;require(&quot;../../img/mine/icon_navigationItem_message_white.png&quot;)&#125; onPress=&#123;() =&gt; &#123; navigation.navigate(&quot;WebScene&quot;); &#125;&#125; /&gt; ), headerStyle: &#123; backgroundColor: color.primary &#125; &#125;); NavigationItem.jsç»„ä»¶1234567891011121314151617181920class NavigationItem extends Component &#123; render() &#123; let titleElement = this.props.title &amp;&amp; ( &lt;Text style=&#123;[styles.title, this.props.titleStyle]&#125;&gt;&#123;this.props.title&#125;&lt;/Text&gt; ) let iconElement = this.props.icon &amp;&amp; ( &lt;Image style=&#123;[styles.icon, this.props.iconStyle]&#125; source=&#123;this.props.icon&#125; /&gt; ) return ( &lt;TouchableOpacity onPress=&#123;this.props.onPress&#125;&gt; &#123;iconElement&#125; &#123;titleElement&#125; &lt;/TouchableOpacity&gt; ) &#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆåº•éƒ¨å¯¼èˆªï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆåº•éƒ¨å¯¼èˆªï¼‰","date":"2018-04-20T16:00:00.000Z","updated":"2020-09-16T09:07:03.000Z","comments":true,"path":"2018/04/21/ä»¿ç¾å›¢Appï¼ˆåº•éƒ¨å¯¼èˆªï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%89/","excerpt":"é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªåº•éƒ¨å¯¼èˆªæŒ‰é’®","text":"é¦–å…ˆAppå¼€å§‹å†™ä¸€ä¸ªåº•éƒ¨å¯¼èˆªæŒ‰é’® æ•ˆæœå›¾å¦‚ä¸‹ æ³¨æ„ç‚¹ï¼šå®‰å“é»˜è®¤ä½ç½®TopiOSé»˜è®¤ä½ç½®æ˜¯ bottomç»„ä»¶åŒ–æ€æƒ³å°è£…çš„é‡è¦æ€§ react-navigation æ ‡é¢˜åœ¨å®‰å“ä¸Šä¸å±…ä¸­é—®é¢˜12345678headerTitleStyle:&#123; flex: 1, textAlign: &#x27;center&#x27;, &#125;, headerTintColor:&#x27;#000&#x27;, headerBackTitle:null, &#125; react-navigation å¯¼èˆªå»æ‰ä¸‹é¢è¾¹æ¡†ï¼Œé˜´å½±12345678static navigationOptions = &#123; headerStyle:&#123; borderBottomWidth: 0, elevation: 0, &#125; &#125; react-native é˜²æ­¢é‡å¤ç‚¹å‡»12345678910111213var NoDoublePress = &#123; lastPressTime: 1, onPress(callback)&#123; let curTime = new Date().getTime(); if (curTime - this.lastPressTime &gt; 1000) &#123; this.lastPressTime = curTime; callback(); &#125; &#125;,&#125;;module.exports = NoDoublePress; ä½¿ç”¨ 1234567891011&lt;MyButton onPress=&#123;() =&gt; &#123; NoDoublePress.onPress(() =&gt; &#123; this.onPressLogin(); &#125;); &#125;&#125;&gt; &lt;Text&gt; ç™» å½• &lt;/Text&gt;&lt;/MyButton&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101class RootScene extends Component&#123; render() &#123; return ( &lt;Navigation/&gt; ) &#125;&#125;const Tab = TabNavigator(&#123; Home: &#123; screen: HomeScene, navigationOptions: () =&gt; (&#123; tabBarLabel: &#x27;å›¢è´­&#x27;, tabBarIcon: (&#123;focused, tintColor&#125;) =&gt; ( &lt;TabBarItem tintColor=&#123;tintColor&#125; focused=&#123;focused&#125; normalImage=&#123;require(&#x27;./img/tabbar/tabbar_homepage.png&#x27;)&#125; selectedImage=&#123;require(&#x27;./img/tabbar/tabbar_homepage_selected.png&#x27;)&#125; /&gt; ) &#125;) &#125;, Nearby: &#123; screen: NearbyScene, navigationOptions: () =&gt; (&#123; tabBarLabel: &#x27;é™„è¿‘&#x27;, tabBarIcon: (&#123;focused, tintColor&#125;) =&gt; ( &lt;TabBarItem tintColor=&#123;tintColor&#125; focused=&#123;focused&#125; normalImage=&#123;require(&#x27;./img/tabbar/tabbar_merchant.png&#x27;)&#125; selectedImage=&#123;require(&#x27;./img/tabbar/tabbar_merchant_selected.png&#x27;)&#125; /&gt; ) &#125;) &#125;, Order: &#123; screen: OrderScene, navigationOptions: () =&gt; (&#123; tabBarLabel: &#x27;è®¢å•&#x27;, tabBarIcon: (&#123;focused, tintColor&#125;) =&gt; ( &lt;TabBarItem tintColor=&#123;tintColor&#125; focused=&#123;focused&#125; normalImage=&#123;require(&#x27;./img/tabbar/tabbar_order.png&#x27;)&#125; selectedImage=&#123;require(&#x27;./img/tabbar/tabbar_order_selected.png&#x27;)&#125; /&gt; ) &#125;) &#125;, Mine: &#123; screen: MineScene, navigationOptions: () =&gt; (&#123; tabBarLabel: &#x27;æˆ‘çš„&#x27;, tabBarIcon: (&#123;focused, tintColor&#125;) =&gt; ( &lt;TabBarItem tintColor=&#123;tintColor&#125; focused=&#123;focused&#125; normalImage=&#123;require(&#x27;./img/tabbar/tabbar_mine.png&#x27;)&#125; selectedImage=&#123;require(&#x27;./img/tabbar/tabbar_mine_selected.png&#x27;)&#125; /&gt; ) &#125;) &#125;&#125;, &#123; //ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨ tabBarComponent: TabBarBottom, //tabè¦ç”¨çš„ç»„ä»¶ tabBarPosition: &#x27;bottom&#x27;, //tabä½ç½®é€‰æ‹© lazy: true, // trueä»£è¡¨åªåŠ è½½å½“å‰ animationEnabled:false, //æ˜¯å¦æœ‰åŠ¨ç”» swipeEnabled:false, //åˆ‡æ¢åŠ¨ç”» tabBarOptions: &#123; activeTintColor:color.primary, //æ¿€æ´»å›¾æ ‡é¢œè‰² inactiveTintColor:color.gray, //éæ¿€æ´»çŠ¶æ€é¢œè‰² style: &#123;backgroundColor: &#x27;white&#x27;&#125; &#125; &#125;)const Navigation = StackNavigator(&#123; Tab:&#123;screen:Tab&#125;, WebScreen:&#123; screen:WebScreen &#125;, GroupPurchaseScene:&#123; screen:GroupPurchaseScene &#125; &#125;,&#123; navigationOptions:&#123; headerTintColor:&#x27;red&#x27;, &#125;&#125;)export default RootScene TabBarItem.js12345678910111213class TabBarItem extends Component &#123; render() &#123; let &#123;focused, selectedImage, normalImage, tintColor&#125; = this.props return ( &lt;Image source=&#123;focused ? selectedImage : normalImage&#125; style=&#123;&#123;tintColor: tintColor, width: 25, height: 25&#125;&#125; /&gt; ) &#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»¿ç¾å›¢Appï¼ˆè½®æ’­å¯¼èˆªç»„ä»¶ï¼‰","slug":"ä»¿ç¾å›¢Appï¼ˆè½®æ’­å¯¼èˆªç»„ä»¶ï¼‰","date":"2018-04-20T16:00:00.000Z","updated":"2020-09-16T09:07:03.000Z","comments":true,"path":"2018/04/21/ä»¿ç¾å›¢Appï¼ˆè½®æ’­å¯¼èˆªç»„ä»¶ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2018/04/21/%E4%BB%BF%E7%BE%8E%E5%9B%A2App%EF%BC%88%E8%BD%AE%E6%92%AD%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6%EF%BC%89/","excerpt":"å†™ä¸€ä¸ªå¤´éƒ¨è½®æ’­èœå•å¯¼èˆªç»„ä»¶","text":"å†™ä¸€ä¸ªå¤´éƒ¨è½®æ’­èœå•å¯¼èˆªç»„ä»¶ æ•ˆæœå›¾ æ³¨æ„å¾ªç¯äº‹ä»¶çš„è·å–ç‚¹å‡»äº‹ä»¶çš„è·å– index.js123456&lt;HomeMenuView menuInfos=&#123;api.menuInfos&#125; onMenuSelected=&#123;index =&gt; &#123; alert(&quot;test &quot; + index); &#125;&#125; /&gt; å°åœ†ç‚¹ç»„ä»¶import PageControl from â€˜react-native-page-controlâ€™ HomeMenuView.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475 class HomeMenuView extends Component&#123; constructor(props) &#123; super(props) this.state = &#123; currentPage: 0, &#125; &#125; //æ‰‹åŠ¿ç§»åŠ¨è®¡ç®—åç§»é‡ onScroll = (e) =&gt; &#123; let x = e.nativeEvent.contentOffset.x console.log(&#x27;x &#x27;+x) let currentPage = Math.round(x / screen.width) console.log(currentPage) if (this.state.currentPage != currentPage) &#123; this.setState(&#123;currentPage: currentPage&#125;) &#125; &#125; render() &#123; let &#123;menuInfos, onMenuSelected&#125; = this.props //æ ¹æ®è¯·æ±‚è¿‡æ¥çš„å›¾ç‰‡æ•°é‡åˆ†é¡µ let pageCount = Math.ceil(menuInfos.length / 10) //å›¾æ ‡ç»„ä»¶ let menuElements = menuInfos.map((info, index) =&gt; ( &lt;HomeMenuItem key=&#123;index&#125; title=&#123;info.title&#125; icon=&#123;info.icon&#125; onPress=&#123;() =&gt; &#123; onMenuSelected &amp;&amp; onMenuSelected(index) &#125;&#125; /&gt; )) let menuViews = [] //æ¯ä¸€é¡µéƒ½æœ‰å›¾æ ‡ å¾ªç¯å¾—åˆ° for (let i = 0; i &lt; pageCount; i++) &#123; let elementsPerPage = menuElements.slice(i * 10, i * 10 + 10) let menuView = ( &lt;View key=&#123;i&#125; style=&#123;styles.itemsView&#125;&gt; &#123;elementsPerPage&#125; &lt;/View&gt; ) menuViews.push(menuView) &#125; console.log(menuViews) return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;ScrollView horizontal pagingEnabled showsHorizontalScrollIndicator=&#123;false&#125; onScroll=&#123;this.onScroll&#125; &gt; &lt;View style=&#123;styles.menuContainer&#125;&gt; &#123;menuViews&#125; &lt;/View&gt; &lt;/ScrollView&gt; //å°åœ†ç‚¹ç»„ä»¶ &lt;PageControl style=&#123;styles.pageControl&#125; numberOfPages=&#123;pageCount&#125; currentPage=&#123;this.state.currentPage&#125; pageIndicatorTintColor=&#x27;gray&#x27; currentPageIndicatorTintColor=&#123;color.primary&#125; /&gt; &lt;/View&gt; ) &#125;&#125; HomeMenuItem.js12345678910111213class HomeMenuItem extends PureComponent&lt;Props, State&gt; &#123; render() &#123; let &#123;title, icon, onPress&#125; = this.props return ( &lt;TouchableOpacity onPress=&#123;onPress&#125; style=&#123;styles.container&#125;&gt; &lt;Image source=&#123;icon&#125; style=&#123;styles.icon&#125; /&gt; &lt;Text&gt;&#123;title&#125;&lt;/Text&gt; &lt;/TouchableOpacity&gt; ) &#125;&#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"å‡ åˆ†é’Ÿå¸¦ä½ å…¥é—¨-ES7å¼‚æ­¥ç¥å™¨async-await","slug":"å‡ åˆ†é’Ÿå¸¦ä½ å…¥é—¨-ES7å¼‚æ­¥ç¥å™¨async-awaitasync","date":"2018-04-11T16:00:00.000Z","updated":"2020-09-16T09:07:05.000Z","comments":true,"path":"2018/04/12/å‡ åˆ†é’Ÿå¸¦ä½ å…¥é—¨-ES7å¼‚æ­¥ç¥å™¨async-awaitasync/","link":"","permalink":"http://mariogogogo.github.io/2018/04/12/%E5%87%A0%E5%88%86%E9%92%9F%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8-ES7%E5%BC%82%E6%AD%A5%E7%A5%9E%E5%99%A8async-awaitasync/","excerpt":"å…³äºå¼‚æ­¥å¤„ç†ï¼ŒES5çš„å›è°ƒä½¿æˆ‘ä»¬é™·å…¥åœ°ç‹±ï¼ŒES6çš„Promiseä½¿æˆ‘ä»¬è„±ç¦»é­”éšœï¼Œç»ˆäºã€ES7çš„async-awaitå¸¦æˆ‘ä»¬èµ°å‘å…‰æ˜ã€‚â€”â€”â€”â€”-å“å§“å…‹å“å–‚ç‰¹","text":"å…³äºå¼‚æ­¥å¤„ç†ï¼ŒES5çš„å›è°ƒä½¿æˆ‘ä»¬é™·å…¥åœ°ç‹±ï¼ŒES6çš„Promiseä½¿æˆ‘ä»¬è„±ç¦»é­”éšœï¼Œç»ˆäºã€ES7çš„async-awaitå¸¦æˆ‘ä»¬èµ°å‘å…‰æ˜ã€‚â€”â€”â€”â€”-å“å§“å…‹å“å–‚ç‰¹ async-awaitå’ŒPromiseçš„å…³ç³»æœ€è¿‘æ›´æ–°2019-06-21ç»å¸¸ä¼šçœ‹åˆ°æœ‰äº† async-awaitã€promise è¿˜æœ‰å¿…è¦å­¦ä¹ å—ã€async awaitä¼˜äºpromiseçš„å‡ ä¸ªç‰¹ç‚¹ï¼Œæ¥æ”¶äº†è¿™äº›ä¿¡æ¯åï¼Œå°±è’™åœˆäº†ã€‚ç°åœ¨æ‰çŸ¥é“ï¼Œasync-awaitæ˜¯promiseå’Œgeneratorçš„è¯­æ³•ç³–ã€‚åªæ˜¯ä¸ºäº†è®©æˆ‘ä»¬ä¹¦å†™ä»£ç æ—¶æ›´åŠ æµç•…ï¼Œå½“ç„¶ä¹Ÿå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§ã€‚ç®€å•æ¥è¯´ï¼šasync-await æ˜¯å»ºç«‹åœ¨ promiseæœºåˆ¶ä¹‹ä¸Šçš„ï¼Œå¹¶ä¸èƒ½å–ä»£å…¶åœ°ä½ã€‚ åŸºæœ¬è¯­æ³• 1234567async function basicDemo() &#123; let result = await Math.random(); console.log(result); &#125; basicDemo(); 123456789101112131415161718192021222324var sleep = function(time) &#123; return new Promise(function(resolve, reject) &#123; setTimeout(function() &#123; console.log(resolve); console.log(reject); reject(&quot;è¿™é‡Œè¿”å›é”™è¯¯&quot;); // resolve(&#x27;è¿™é‡Œè¿”å›æ­£ç¡®&#x27;) &#125;, time); &#125;);&#125;;var start = async function() &#123; try &#123; // åœ¨è¿™é‡Œä½¿ç”¨èµ·æ¥å°±åƒåŒæ­¥ä»£ç é‚£æ ·ç›´è§‚ console.log(&quot;start&quot;); let res = await sleep(3000); console.log(&quot;end&quot;); console.log(&#x27;ok &#x27;+res); &#125; catch (error) &#123; console.log(&#x27;é”™è¯¯è¿”å› &#x27;+error); &#125;&#125;;start(); ä¸¾ä¾‹è¯´æ˜å•Šï¼Œ ä½ æœ‰ä¸‰ä¸ªè¯·æ±‚éœ€è¦å‘ç”Ÿï¼Œ ç¬¬ä¸‰ä¸ªè¯·æ±‚æ˜¯ä¾èµ–äºç¬¬äºŒä¸ªè¯·æ±‚çš„è§£æ„ç¬¬äºŒä¸ªè¯·æ±‚ä¾èµ–äºç¬¬ä¸€ä¸ªè¯·æ±‚çš„ç»“æœã€‚ è‹¥ç”¨ ES5å®ç°ä¼šæœ‰3å±‚çš„å›è°ƒï¼Œè‹¥ç”¨Promise å®ç°è‡³å°‘éœ€è¦3ä¸ªthenã€‚ ä¸€ä¸ªæ˜¯ä»£ç æ¨ªå‘å‘å±•ï¼Œå¦ä¸€ä¸ªæ˜¯çºµå‘å‘å±•ã€‚ä»Šå¤©æŒ‡ç»™å‡º async-await çš„å®ç°å“ˆ~ 123456789101112131415function sleep(second, param) &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(param); &#125;, second); &#125;);&#125;async function test() &#123; let result1 = await sleep(2000, &quot;req01&quot;); let result2 = await sleep(1000, &quot;req02&quot; + result1); let result3 = await sleep(500, &quot;req03&quot; + result2); console.log(` $&#123;result3&#125; $&#123;result2&#125; $&#123;result1&#125; `);&#125;test(); // req03req02req01 req02req01 req01 å°å¿ƒä½ çš„å¹¶è¡Œå¤„ç†!!!æˆ‘è¿™é‡Œä¸ºå•¥åŠ äº†ä¸‰ä¸ªæ„Ÿå¹å·å‘¢~ï¼Œå› ä¸ºå¯¹äºåˆå­¦è€…æ¥è¯´ä¸€ä¸å°å¿ƒå°±å°† ajax çš„å¹¶å‘è¯·æ±‚å‘æˆäº†é˜»å¡å¼åŒæ­¥çš„æ“ä½œäº†ï¼Œæˆ‘å°±çœŸçœŸåˆ‡åˆ‡çš„åœ¨å·¥ä½œä¸­å†™äº†è¿™æ ·çš„ä»£ç ã€‚await è‹¥ç­‰å¾…çš„æ˜¯ promise å°±ä¼šåœæ­¢ä¸‹æ¥ã€‚ä¸šåŠ¡æ˜¯è¿™æ ·çš„ï¼Œæˆ‘æœ‰ä¸‰ä¸ªå¼‚æ­¥è¯·æ±‚éœ€è¦å‘é€ï¼Œç›¸äº’æ²¡æœ‰å…³è”ï¼Œåªæ˜¯éœ€è¦å½“è¯·æ±‚éƒ½ç»“æŸåå°†ç•Œé¢çš„ loading æ¸…é™¤æ‰å³å¯ã€‚åˆšå­¦å®Œ async await å¼€å¿ƒå•Šï¼Œåˆ°å¤„ä¹±ç”¨~ // æ€»ç»“ promise.all çš„ç‰¹ç‚¹// 1ã€æ¥æ”¶ä¸€ä¸ª Promise å®ä¾‹çš„æ•°ç»„æˆ–å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œ // 2ã€å¦‚æœå…ƒç´ ä¸æ˜¯ Promise å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ Promise.resolve è½¬æˆ Promise å¯¹è±¡ // 3ã€å¦‚æœå…¨éƒ¨æˆåŠŸï¼ŒçŠ¶æ€å˜ä¸º resolvedï¼Œè¿”å›å€¼å°†ç»„æˆä¸€ä¸ªæ•°ç»„ä¼ ç»™å›è°ƒ // 4ã€åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼ŒçŠ¶æ€å°±å˜ä¸º rejectedï¼Œè¿”å›å€¼å°†ç›´æ¥ä¼ é€’ç»™å›è°ƒ// all() çš„è¿”å›å€¼ä¹Ÿæ˜¯æ–°çš„ Promise å¯¹è±¡ 12345678async function correctDemo() &#123; let p1 = sleep(1000); let p2 = sleep(1000); let p3 = sleep(1000); await Promise.all([p1, p2, p3]); console.log(&quot;clear the loading~&quot;);&#125;correctDemo(); // clear the loading~ await in for å¾ªç¯==awaitå¿…é¡»åœ¨asyncå‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­çš„== 1234567async function forDemo() &#123; let arr = [1, 2, 3, 4, 5]; for (let i = 0; i &lt; arr.length; i++) &#123; await arr[i]; &#125;&#125;forDemo() 2018-06-01æ›´æ–°å¼•å…¥bluebrid ä¸²è¡Œ12345678910111213141516171819202122232425262728293031323334353637383940async function getApi1() &#123; await bluebird.delay(1000) const url = &#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;; const response = await fetch(url,&#123;&#x27;id&#x27;:1111&#125;); if(response.status !== 200) &#123; throw new Error(response.statusText); &#125; return await response.json()&#125;async function getApi2()&#123; console.log(&#x27;ç­‰å¾…1ç§’å“¦&#x27;) await bluebird.delay(1000) const url = &#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;; const response = await fetch(url,&#123;&#x27;token&#x27;:111&#125;); if(response.status !== 200)&#123; throw new Error(response.statusText); &#125; return await response.json()&#125;const showGetInfo = async ()=&gt;&#123; try &#123; console.time(&#x27;æ—¶é—´&#x27;); const names = [&#x27;getApi1&#x27;,&#x27;getApi2&#x27;,&#x27;getApi3&#x27;,&#x27;getApi4&#x27;]; for (const name in names) &#123; if (names.hasOwnProperty(name)) &#123; const res = await getApi1(name) console.log(&#x27;bool1&#x27;,res.success); console.log(&#x27;bool2&#x27;,res.results); &#125; &#125; console.timeEnd(&#x27;æ—¶é—´&#x27;); &#125; catch (error) &#123; console.timeEnd(&#x27;æ—¶é—´&#x27;); console.error(&#x27;é”™è¯¯error:&#x27;+error); &#125;&#125;showGetInfo(); 2018-06-01æ›´æ–° å¼•å…¥bluebrid å¹¶è¡Œ12345678910111213141516171819202122232425262728293031323334353637383940414243const fetch = require(&quot;node-fetch&quot;);const bluebird = require(&quot;bluebird&quot;);async function getApi1(name) &#123; await bluebird.delay(2000); const url = &quot;https://easy-mock.com/mock/5d09c91f44339368a2ce4c22/myapi/name&quot;; const response = await fetch(url, &#123; method: &quot;POST&quot;, //postè¯·æ±‚ headers: &#123; Accept: &quot;application/json&quot;, &quot;Content-Type&quot;: &quot;application/json&quot; &#125;, body: JSON.stringify(&#123; //postè¯·æ±‚å‚æ•° name: name &#125;) &#125;); if (response.status !== 200) &#123; throw new Error(response.statusText); &#125; return await response.json();&#125;const showGetInfo = async () =&gt; &#123; try &#123; console.time(&quot;æ—¶é—´&quot;); //å‚æ•°è®¾ç½®æˆæ•°ç»„ const names = [&quot;jordan&quot;, &quot;james&quot;,&quot;kobe&quot;]; &lt;!--å…ˆè§¦å‘æ‰€æœ‰çš„è¯·æ±‚ï¼Œç»„æˆä¸€ä¸ªæ•°ç»„--&gt; const promisesArr = names.map(x =&gt; getApi1(x)); &lt;!--ç„¶åéå†è¿™ä¸ªæ•°ç»„ï¼Œç­‰å¾…ç»“æœå‡ºæ¥--&gt; for (const promise of promisesArr) &#123; const res = await promise; console.log(&quot;bool1&quot;, res.success, res.data.name); &#125; console.timeEnd(&quot;æ—¶é—´&quot;); &#125; catch (error) &#123; console.timeEnd(&quot;æ—¶é—´&quot;); console.error(&quot;é”™è¯¯error:&quot; + error); &#125;&#125;;showGetInfo(); 2018-06-01è¡¥å……async awaitçš„é”™è¯¯å¤„ç†ï¼ŒçŸ¥è¯†ç‚¹çš„è¡¥å…… 1234567891011121314151617181920212223const fetch = require(&#x27;node-fetch&#x27;)async function getApi() &#123; const url = &#x27;http://rap2api.taobao.org/app/mock/7551//changeroom&#x27;; const response = await fetch(url,&#123;&#x27;id&#x27;:1111&#125;); if(response.status !== 200) &#123; throw new Error(response.statusText); &#125; return await response.json()&#125;const showGetInfo = async ()=&gt;&#123; try &#123; const res = await getApi(); console.log(&#x27;bool&#x27;,res.success); console.log(&#x27;results&#x27;,res.results.length); &#125; catch (error) &#123; console.error(&#x27;é”™è¯¯error:&#x27;+error); &#125;&#125;showGetInfo(); å¤„ç†awaitçš„ä¸²è¡Œ1234567891011121314151617181920212223242526272829303132333435//ä¸²è¡Œasync function getApi1() &#123; const url = &#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;; const response = await fetch(url,&#123;&#x27;id&#x27;:1111&#125;); if(response.status !== 200) &#123; throw new Error(response.statusText); &#125; return await response.json()&#125;async function getApi2()&#123; const url = &#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;; const response = await fetch(url,&#123;&#x27;token&#x27;:111&#125;); if(response.status !== 200)&#123; throw new Error(response.statusText); &#125; console.log(&#x27;====================================&#x27;); console.log(response.json); console.log(&#x27;====================================&#x27;); return await response.json()&#125;const showGetInfo = async ()=&gt;&#123; try &#123; const res1 = await getApi1(); const res2 = await getApi2(); console.log(&#x27;bool1&#x27;,res1.success,&#x27;bool2&#x27;,res2.success); console.log(&#x27;results1&#x27;,res1.results.length,&#x27;results2&#x27;,res2.results); &#125; catch (error) &#123; console.error(&#x27;é”™è¯¯error:&#x27;+error); &#125;&#125;showGetInfo(); å¤„ç†awaitçš„å¹¶è¡Œ123456789101112131415161718192021222324252627282930313233343536373839404142434445//å¢åŠ ä¸€ä¸ªè¶…æ—¶const sleep = (timeout=2000) =&gt; new Promise(resolve =&gt;&#123; setTimeout(resolve,timeout);&#125;) async function getApi1() &#123; await sleep(); const url = &#x27;http://rap2api.taobao.org/app/mock/17194//list1&#x27;; const response = await fetch(url,&#123;&#x27;id&#x27;:1111&#125;); if(response.status !== 200) &#123; throw new Error(response.statusText); &#125; console.log(new Date().getTime()) return await response.json()&#125;async function getApi2()&#123; console.log(&#x27;ç­‰å¾…2ç§’å“¦&#x27;) await sleep(); const url = &#x27;http://rap2api.taobao.org/app/mock/17194/list2&#x27;; const response = await fetch(url,&#123;&#x27;token&#x27;:111&#125;); if(response.status !== 200)&#123; throw new Error(response.statusText); &#125; console.log(new Date().getTime()) return await response.json()&#125;const showGetInfo = async ()=&gt;&#123; try &#123; console.time(&#x27;æ—¶é—´&#x27;); const res1Promise = getApi1(); const res2Promise = getApi2(); const res1 = await res1Promise; const res2 = await res2Promise; console.log(&#x27;bool1&#x27;,res1.success,&#x27;results1&#x27;,res1.results.length,); console.log(&#x27;bool2&#x27;,res2.success,&#x27;results2&#x27;,res2.results); console.timeEnd(&#x27;æ—¶é—´&#x27;); &#125; catch (error) &#123; console.error(&#x27;é”™è¯¯error:&#x27;+error); &#125;&#125;showGetInfo(); Promise.allå¤„ç†awaitçš„å¹¶è¡Œ123456789101112131415const showGetInfo = async ()=&gt;&#123; try &#123; console.time(&#x27;æ—¶é—´&#x27;); const [res1,res2]= await Promise.all([ getApi1(),getApi2() ]) console.log(&#x27;bool1&#x27;,res1.success,&#x27;results1&#x27;,res1.results.length,); console.log(&#x27;bool2&#x27;,res2.success,&#x27;results2&#x27;,res2.results); console.timeEnd(&#x27;æ—¶é—´&#x27;); &#125; catch (error) &#123; console.error(&#x27;é”™è¯¯error:&#x27;+error); &#125;&#125;showGetInfo(); Promise.all å¤„ç† Rejection çš„æŠ€å·§ Promise.all è¿™ä¸ª API å…è®¸æˆ‘ä»¬åœ¨å¤šä¸ªæ“ä½œå®Œæˆä¹‹åç»§ç»­åšæŸäº›äº‹æƒ…ï¼Œé—æ†¾çš„æ˜¯ Promise.all åªä¼šåœ¨æ‰€æœ‰ä¼ ç»™ä»–çš„ Promise éƒ½ resolve äº†ä¹‹åæ‰ä¼š resolveï¼Œå¦‚æœå…¶ä¸­çš„ä¸€ä¸ª reject äº†ï¼Œé‚£ä¹ˆ Promise.all åé¢çš„ then å°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œcatch ä¼šè¢«æ‰§è¡Œ 123456789101112131415161718192021222324const fetch = require(&quot;node-fetch&quot;);const showGetInfo = async () =&gt; &#123; console.time(&quot;æ—¶é—´&quot;); Promise.all( [ Promise.resolve(1), new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(2), 2000)), Promise.resolve(3), new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(4), 3000)), Promise.resolve(2), new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(5), 4000)), Promise.resolve(4), new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(6), 1000)), Promise.resolve(5), new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(7), 1000)), ].map(p =&gt; p.catch(() =&gt; undefined)) ).then(data =&gt; &#123; console.timeEnd(&quot;æ—¶é—´&quot;); console.log(&quot;done!&quot;, data); &#125;);&#125;;showGetInfo();","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"ES7","slug":"ES7","permalink":"http://mariogogogo.github.io/tags/ES7/"}]},{"title":"React Nativeå¼€å‘å®ç”¨å°æŠ€å·§(æŒç»­æ›´æ–°)","slug":"React Nativeå¼€å‘å®ç”¨æŠ€å·§(æŒç»­æ›´æ–°)","date":"2018-04-09T16:00:00.000Z","updated":"2020-09-16T09:07:44.000Z","comments":true,"path":"2018/04/10/React Nativeå¼€å‘å®ç”¨æŠ€å·§(æŒç»­æ›´æ–°)/","link":"","permalink":"http://mariogogogo.github.io/2018/04/10/React%20Native%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/","excerpt":"ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿæˆ‘çš„å›ç­”æ˜¯ï¼š2ä¸ªç©ºæ ¼ã€‚è·Ÿä¸Šé¢ä¸€æ ·ï¼Œæˆ‘åˆšè½¬åˆ°JavaScriptçš„æ—¶å€™ï¼Œè§‰å¾—2ä¸ªç©ºæ ¼å¾ˆåäººç±»ï¼Œå¤ªæŒ¤äº†ã€‚æ‰€ä»¥ä¸€ç›´åšæŒ4ä¸ªç©ºæ ¼ã€‚ç›´åˆ°UIä»£ç æ…¢æ…¢å˜å¤šï¼ŒåµŒå¥—å˜æ·±ã€‚ã€‚ã€‚æˆ‘æ‰å¼€å§‹æ…¢æ…¢æ€€ç–‘è‡ªå·±ã€‚å‰å‡ å¤©ï¼Œæˆ‘æœç´¢äº†å¤šä¸ªçƒ­é—¨çš„JavaScriptå¼€æºé¡¹ç›®ï¼Œæ— ä¸€ä¾‹å¤–ä½¿ç”¨çš„æ˜¯2ä¸ªç©ºæ ¼ã€‚æ‰€ä»¥ï¼Œæˆ‘æœæ–­æŠŠä»£ç æ”¹æˆ2ä¸ªç©ºæ ¼ã€‚","text":"ä»£ç çš„ç¼©è¿›ï¼Œä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œè¿˜æ˜¯2ä¸ªç©ºæ ¼ï¼Ÿæˆ‘çš„å›ç­”æ˜¯ï¼š2ä¸ªç©ºæ ¼ã€‚è·Ÿä¸Šé¢ä¸€æ ·ï¼Œæˆ‘åˆšè½¬åˆ°JavaScriptçš„æ—¶å€™ï¼Œè§‰å¾—2ä¸ªç©ºæ ¼å¾ˆåäººç±»ï¼Œå¤ªæŒ¤äº†ã€‚æ‰€ä»¥ä¸€ç›´åšæŒ4ä¸ªç©ºæ ¼ã€‚ç›´åˆ°UIä»£ç æ…¢æ…¢å˜å¤šï¼ŒåµŒå¥—å˜æ·±ã€‚ã€‚ã€‚æˆ‘æ‰å¼€å§‹æ…¢æ…¢æ€€ç–‘è‡ªå·±ã€‚å‰å‡ å¤©ï¼Œæˆ‘æœç´¢äº†å¤šä¸ªçƒ­é—¨çš„JavaScriptå¼€æºé¡¹ç›®ï¼Œæ— ä¸€ä¾‹å¤–ä½¿ç”¨çš„æ˜¯2ä¸ªç©ºæ ¼ã€‚æ‰€ä»¥ï¼Œæˆ‘æœæ–­æŠŠä»£ç æ”¹æˆ2ä¸ªç©ºæ ¼ã€‚ å¦‚ä½•æ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹å¸ƒå±€ï¼Ÿç¾å·¥å‡ºæ ‡æ³¨å›¾çš„æ—¶å€™ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§å±å¹•å®½åº¦750å‡ºçš„ã€‚å¦‚æœéœ€æ±‚æ˜¯UIæ ¹æ®ä¸åŒå±å¹•å°ºå¯¸ï¼Œåšç­‰æ¯”ä¾‹çš„ç¼©æ”¾ã€‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå«px2dpçš„å…¬å…±æ–¹æ³• 1234567import &#123;Dimensions&#125; from &#x27;react-native&#x27;const basePixelWidth = 750const px2dp = (px: number): number =&gt; &#123; return px * Dimensions.get(&#x27;window&#x27;).width / basePixelWidth&#125; æ¯”å¦‚è¦è®¾ç½®Viewçš„å®½åº¦ä¸ºå±å¹•çš„ä¸€åŠã€‚å°±å¯ä»¥è¿™æ ·ï¼š1&lt;View style=&#123;&#123;width: px2dp(375)&#125;&#125; /&gt; å¦‚ä½•å¿«é€Ÿè·å–å±å¹•å®½é«˜ï¼Ÿ123456789101112import &#123;Dimensions, PixelRatio&#125; from &#x27;react-native&#x27;const screenWidth = Dimensions.get(&#x27;window&#x27;).widthconst screenHeight = Dimensions.get(&#x27;window&#x27;).heightlet screen = &#123; width: screenWidth, height: screenHeight,&#125;export default screen å¦‚ä½•åˆ¤æ–­è®¾å¤‡æ˜¯iPhoneXï¼Ÿæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¯¹iPhoneXçš„å¼‚å½¢å±åšä¸€äº›ç‰¹æ®Šçš„é€‚é…ï¼Œå°±éœ€è¦åˆ¤æ–­ä¸€ä¸ªè®¾å¤‡æ˜¯å¦æ˜¯iPhoneX12345678910111213141516171819202122232425import &#123;Platform, Dimensions&#125; from &#x27;react-native&#x27;const isIphoneX = () =&gt; &#123; let dimen = Dimensions.get(&#x27;window&#x27;) return ( Platform.OS === &#x27;ios&#x27; &amp;&amp; !Platform.isPad &amp;&amp; !Platform.isTVOS &amp;&amp; (dimen.height === 812 || dimen.width === 812) )&#125;// åˆ¤æ–­æ˜¯å¦æ˜¯iOSè®¾å¤‡const isIOS = () =&gt; &#123; return Platform.OS === &#x27;ios&#x27;&#125;// æ˜¯å¦æ˜¯Androidè®¾å¤‡const isAndroid = () =&gt; &#123; return Platform.OS === &#x27;android&#x27;&#125;// çŠ¶æ€æ çš„é«˜åº¦const statusBarHeight = () =&gt; (isIOS() ? (isIphoneX() ? 44 : 20) : 0) å¦‚ä½•ä¼˜é›…çš„ä¸ºæ¯ä¸ªé¡µé¢å¢åŠ Loadingé¡µã€é”™è¯¯é¡µï¼Ÿå¾ˆå¤šAppå¤§éƒ¨åˆ†é¡µé¢éƒ½éœ€è¦ç”¨åˆ°Loadingé¡µã€‚å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼Œè¿˜éœ€è¦æ˜¾ç¤ºé”™è¯¯é¡µï¼Œå‘Šè¯‰ç”¨æˆ·é”™è¯¯åŸå› ï¼Œå¹¶ä¸”è®©ç”¨æˆ·ç‚¹å‡»é‡è¯•ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ç»„ä»¶å«Sceneï¼Œç„¶ååœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®šä¹‰Loadingé¡µé¢å’Œé”™è¯¯é¡µã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨æˆ‘ä»¬çš„componentè¿™æ ·å®ç° 123456789101112render() &#123; let &#123;isLoading, error&#125; = this.state return ( &lt;Scene isLoading=&#123;isLoading&#125; error=&#123;error&#125; onRetry=&#123;this.requestData&#125; &gt; &lt;/Scene&gt; )&#125; å½“æˆ‘ä»¬éœ€è¦è¯·æ±‚ç½‘ç»œçš„æ—¶å€™ï¼ŒæŠŠisLoadingè®¾ç½®ä¸ºtrueã€‚è¿™æ ·Sceneç»„ä»¶å°±ä¼šä¸ºæˆ‘ä»¬å±•ç¤ºä¸€ä¸ªLoadingé¡µé¢ã€‚å½“ç½‘ç»œè¯·æ±‚å¤±è´¥çš„æ—¶å€™ï¼ŒæŠŠisLoadingè®¾ç½®ä¸ºfalseï¼Œerrorè®¾ç½®ä¸ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚Sceneç»„ä»¶å°±ä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯é¡µï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªâ€œé‡è¯•â€æŒ‰é’®ã€‚ç”¨æˆ·ç‚¹å‡»â€œé‡è¯•â€åï¼Œä¼šè°ƒç”¨onRetryå›è°ƒã€‚Sceneçš„ä»£ç ç®€åŒ–åï¼Œå¤§æ¦‚æ˜¯è¿™æ · 1234567891011121314151617181920type Props = &#123; isLoading?: boolean, error?: ?string, onRetry?: Function, children?: any, style?: Object,&#125;class Scene extends PureComponent&lt;Props&gt; &#123; render() &#123; let &#123;isLoading, style, error, children, onRetry&#125; = this.props return ( &lt;View style=&#123;[styles.container, style]&#125;&gt; &#123;!isLoading &amp;&amp; children&#125; &lt;ErrorView text=&#123;error&#125; onPress=&#123;onRetry&#125; /&gt; &lt;LoadingView isLoading=&#123;isLoading&#125; /&gt; &lt;/View&gt; ) &#125;&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒErrorViewã€LoadingViewéœ€è¦ä½¿ç”¨ä¸‹é¢è¿™ç§ç»å¯¹å¸ƒå±€ã€‚å¦åˆ™å¯èƒ½ä¼šè¢«é¡µé¢çš„å†…å®¹é¡¶åˆ°å±å¹•å¤–é¢ã€‚ 12345678&#123; position: &#x27;absolute&#x27;, top: 0, left: 0, right: 0, bottom: 0, &#125;","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"React Nativeé¢è¯•é¢˜åº“(æŒç»­æ›´æ–°)","slug":"React Nativeé¢è¯•é¢˜åº“(æŒç»­æ›´æ–°)","date":"2018-04-08T16:00:00.000Z","updated":"2020-09-16T09:07:44.000Z","comments":true,"path":"2018/04/09/React Nativeé¢è¯•é¢˜åº“(æŒç»­æ›´æ–°)/","link":"","permalink":"http://mariogogogo.github.io/2018/04/09/React%20Native%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/","excerpt":"æœ¬æ–‡åŸåˆ›é¦–å‘äºå…¬ä¼—å·ï¼šReactNativeå¼€å‘åœˆï¼Œè½¬è½½éœ€æ³¨æ˜å‡ºå¤„ã€‚ 1.React Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ1.æ€§èƒ½åª²ç¾åŸç”ŸAPP2.ä½¿ç”¨JavaScriptç¼–ç ï¼Œåªè¦å­¦ä¹ è¿™ä¸€ç§è¯­è¨€3.ç»å¤§éƒ¨åˆ†ä»£ç å®‰å“å’ŒIOSéƒ½èƒ½å…±ç”¨4.ç»„ä»¶å¼å¼€å‘ï¼Œä»£ç é‡ç”¨æ€§å¾ˆé«˜5.è·Ÿç¼–å†™ç½‘é¡µä¸€èˆ¬ï¼Œä¿®æ”¹ä»£ç åå³å¯è‡ªåŠ¨åˆ·æ–°ï¼Œä¸éœ€è¦æ…¢æ…¢ç¼–è¯‘ï¼ŒèŠ‚çœå¾ˆå¤šç¼–è¯‘ç­‰å¾…æ—¶é—´6.æ”¯æŒAPPçƒ­æ›´æ–°ï¼Œæ›´æ–°æ— éœ€é‡æ–°å®‰è£…APP","text":"æœ¬æ–‡åŸåˆ›é¦–å‘äºå…¬ä¼—å·ï¼šReactNativeå¼€å‘åœˆï¼Œè½¬è½½éœ€æ³¨æ˜å‡ºå¤„ã€‚ 1.React Nativeç›¸å¯¹äºåŸç”Ÿçš„ioså’ŒAndroidæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ1.æ€§èƒ½åª²ç¾åŸç”ŸAPP2.ä½¿ç”¨JavaScriptç¼–ç ï¼Œåªè¦å­¦ä¹ è¿™ä¸€ç§è¯­è¨€3.ç»å¤§éƒ¨åˆ†ä»£ç å®‰å“å’ŒIOSéƒ½èƒ½å…±ç”¨4.ç»„ä»¶å¼å¼€å‘ï¼Œä»£ç é‡ç”¨æ€§å¾ˆé«˜5.è·Ÿç¼–å†™ç½‘é¡µä¸€èˆ¬ï¼Œä¿®æ”¹ä»£ç åå³å¯è‡ªåŠ¨åˆ·æ–°ï¼Œä¸éœ€è¦æ…¢æ…¢ç¼–è¯‘ï¼ŒèŠ‚çœå¾ˆå¤šç¼–è¯‘ç­‰å¾…æ—¶é—´6.æ”¯æŒAPPçƒ­æ›´æ–°ï¼Œæ›´æ–°æ— éœ€é‡æ–°å®‰è£…APPç¼ºç‚¹ï¼šå†…å­˜å ç”¨ç›¸å¯¹è¾ƒé«˜ç‰ˆæœ¬è¿˜ä¸ç¨³å®šï¼Œä¸€ç›´åœ¨æ›´æ–°ï¼Œç°åœ¨è¿˜æ²¡æœ‰æ¨å‡ºç¨³å®šçš„1.0ç‰ˆæœ¬ 2.React Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ ç”Ÿå‘½å‘¨æœŸ è°ƒç”¨æ¬¡æ•° èƒ½å¦ä½¿ç”¨ setSate() å‘¨æœŸåç§°ä»¥åŠè°ƒç”¨æ¬¡æ•° èƒ½å¦ä½¿ç”¨ setSate() è¿˜æ²¡æƒ³å¥½ getDefaultProps 1(å…¨å±€è°ƒç”¨ä¸€æ¬¡) å¦ getInitialState 1 å¦ componentWillMount 1 æ˜¯ render &gt;=1 å¦ componentDidMount 1 æ˜¯ componentWillReceiveProps &gt;=0 æ˜¯ shouldComponentUpdate &gt;=0 å¦ componentWillUpdate &gt;=0 å¦ componentDidUpdate &gt;=0 å¦ componentWillUnmount å¦ 3.å½“ä½ è°ƒç”¨setStateçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿå½“è°ƒç”¨ setState æ—¶ï¼ŒReactä¼šåšçš„ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯å°†ä¼ é€’ç»™ setState çš„å¯¹è±¡åˆå¹¶åˆ°ç»„ä»¶çš„å½“å‰çŠ¶æ€ã€‚è¿™å°†å¯åŠ¨ä¸€ä¸ªç§°ä¸ºå’Œè§£ï¼ˆreconciliationï¼‰çš„è¿‡ç¨‹ã€‚å’Œè§£ï¼ˆreconciliationï¼‰çš„æœ€ç»ˆç›®æ ‡æ˜¯ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ ¹æ®è¿™ä¸ªæ–°çš„çŠ¶æ€æ¥æ›´æ–°UIã€‚ä¸ºæ­¤ï¼ŒReactå°†æ„å»ºä¸€ä¸ªæ–°çš„ React å…ƒç´ æ ‘ï¼ˆæ‚¨å¯ä»¥å°†å…¶è§†ä¸º UI çš„å¯¹è±¡è¡¨ç¤ºï¼‰ã€‚ä¸€æ—¦æœ‰äº†è¿™ä¸ªæ ‘ï¼Œä¸ºäº†å¼„æ¸… UI å¦‚ä½•å“åº”æ–°çš„çŠ¶æ€è€Œæ”¹å˜ï¼ŒReact ä¼šå°†è¿™ä¸ªæ–°æ ‘ä¸ä¸Šä¸€ä¸ªå…ƒç´ æ ‘ç›¸æ¯”è¾ƒï¼ˆ diff ï¼‰ã€‚é€šè¿‡è¿™æ ·åšï¼Œ React å°†ä¼šçŸ¥é“å‘ç”Ÿçš„ç¡®åˆ‡å˜åŒ–ï¼Œå¹¶ä¸”é€šè¿‡äº†è§£å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Œåªéœ€åœ¨ç»å¯¹å¿…è¦çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ–°å³å¯æœ€å°åŒ– UI çš„å ç”¨ç©ºé—´ã€‚ 4.propså’Œstateç›¸åŒç‚¹å’Œä¸åŒç‚¹1.ä¸ç®¡æ˜¯propsè¿˜æ˜¯stateçš„æ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘renderçš„é‡æ–°æ¸²æŸ“ã€‚2.éƒ½èƒ½ç”±è‡ªèº«ç»„ä»¶çš„ç›¸åº”åˆå§‹åŒ–å‡½æ•°è®¾å®šåˆå§‹å€¼ã€‚ ä¸åŒç‚¹1.åˆå§‹å€¼æ¥æºï¼šstateçš„åˆå§‹å€¼æ¥è‡ªäºè‡ªèº«çš„getInitalStateï¼ˆconstructorï¼‰å‡½æ•°ï¼›propsæ¥è‡ªäºçˆ¶ç»„ä»¶æˆ–è€…è‡ªèº«getDefaultPropsï¼ˆè‹¥keyç›¸åŒå‰è€…å¯è¦†ç›–åè€…ï¼‰ã€‚ 2.ä¿®æ”¹æ–¹å¼ï¼šstateåªèƒ½åœ¨è‡ªèº«ç»„ä»¶ä¸­setStateï¼Œä¸èƒ½ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼›propsåªèƒ½ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼Œä¸èƒ½åœ¨è‡ªèº«ç»„ä»¶ä¿®æ”¹ã€‚ 3.å¯¹å­ç»„ä»¶ï¼špropsæ˜¯ä¸€ä¸ªçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®æµï¼Œè¿™ä¸ªæ•°æ®æµå¯ä»¥ä¸€ç›´ä¼ é€’åˆ°å­å­™ç»„ä»¶ï¼›stateä»£è¡¨çš„æ˜¯ä¸€ä¸ªç»„ä»¶å†…éƒ¨è‡ªèº«çš„çŠ¶æ€ï¼Œåªèƒ½åœ¨è‡ªèº«ç»„ä»¶ä¸­å­˜åœ¨ã€‚ 5.shouldComponentUpdate åº”è¯¥åšä»€ä¹ˆå…¶å®è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯è·Ÿreconciliationæœ‰å…³ç³»ã€‚â€œå’Œè§£ï¼ˆ reconciliation ï¼‰çš„æœ€ç»ˆç›®æ ‡æ˜¯ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ ¹æ®æ–°çš„çŠ¶æ€æ›´æ–°ç”¨æˆ·ç•Œé¢â€ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬çš„ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„æŸä¸€éƒ¨åˆ†ä¸ä¼šæ”¹å˜ï¼Œé‚£ä¹ˆæ²¡æœ‰ç†ç”±è®© React å¾ˆéº»çƒ¦åœ°è¯•å›¾å»å¼„æ¸…æ¥šå®ƒæ˜¯å¦åº”è¯¥æ¸²æŸ“ã€‚é€šè¿‡ä» shouldComponentUpdate è¿”å› falseï¼ŒReact å°†å‡å®šå½“å‰ç»„ä»¶åŠå…¶æ‰€æœ‰å­ç»„ä»¶å°†ä¿æŒä¸å½“å‰ç»„ä»¶ç›¸åŒ 6.reactJSçš„props.children.mapå‡½æ•°æ¥éå†ä¼šæ”¶åˆ°å¼‚å¸¸æç¤ºï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•éå†ï¼Ÿthis.props.children çš„å€¼æœ‰ä¸‰ç§å¯èƒ½ï¼š 1.å½“å‰ç»„ä»¶æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå°±æ˜¯ undefined; 2.æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹æ˜¯ object ï¼› 3.æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹å°±æ˜¯ array ã€‚ç³»ç»Ÿæä¾›React.Children.map()æ–¹æ³•å®‰å…¨çš„éå†å­èŠ‚ç‚¹å¯¹è±¡ 7.reduxçŠ¶æ€ç®¡ç†çš„æµç¨‹actionæ˜¯ç”¨æˆ·è§¦å‘æˆ–ç¨‹åºè§¦å‘çš„ä¸€ä¸ªæ™®é€šå¯¹è±¡ã€‚reduceræ˜¯æ ¹æ®actionæ“ä½œæ¥åšå‡ºä¸åŒçš„æ•°æ®å“åº”ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„stateã€‚storeçš„æœ€ç»ˆå€¼å°±æ˜¯ç”±reducerçš„å€¼æ¥ç¡®å®šçš„ã€‚ï¼ˆä¸€ä¸ªstoreæ˜¯ä¸€ä¸ªå¯¹è±¡, reducerä¼šæ”¹å˜storeä¸­çš„æŸäº›å€¼ï¼‰action -&gt; reducer -&gt; æ–°store -&gt; åé¦ˆåˆ°UIä¸Šæœ‰æ‰€æ”¹å˜ã€‚ 8.åŠ è½½bundleçš„æœºåˆ¶è¦å®ç°RNçš„è„šæœ¬çƒ­æ›´æ–°ï¼Œæˆ‘ä»¬è¦ææ˜ç™½RNæ˜¯å¦‚ä½•å»åŠ è½½è„šæœ¬çš„ã€‚ åœ¨ç¼–å†™ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæœ‰è®¸å¤šä¸ªjsæ–‡ä»¶ï¼Œæ‰“åŒ…çš„æ—¶å€™RNä¼šå°†è¿™äº›ä¸ªjsæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå«index.android.bundle(iosçš„æ˜¯index.ios.bundle)çš„æ–‡ä»¶ï¼Œæ‰€æœ‰çš„jsä»£ç (åŒ…æ‹¬rnæºä»£ç ã€ç¬¬ä¸‰æ–¹åº“ã€ä¸šåŠ¡é€»è¾‘çš„ä»£ç )éƒ½åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¯åŠ¨Appæ—¶ä¼šç¬¬ä¸€æ—¶é—´åŠ è½½bundleæ–‡ä»¶ï¼Œæ‰€ä»¥è„šæœ¬çƒ­æ›´æ–°è¦åšçš„äº‹æƒ…å°±æ˜¯æ›¿æ¢æ‰è¿™ä¸ªbundleæ–‡ä»¶ã€‚ 9.Flexå¸ƒå±€é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex Containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚ å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åšmain startï¼Œç»“æŸä½ç½®å«åšmain endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸä½ç½®å«åšcross endã€‚ é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åšcross sizeã€‚ å®¹å™¨çš„å±æ€§ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚flex-direction å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘)ã€‚flex-wrap å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚flex-flow flex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ã€‚justify-content å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚align-items å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚align-content align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚ 10.è¯·ç®€è¿° code push çš„åŸç†code push è°ƒç”¨ react native çš„æ‰“åŒ…å‘½ä»¤ï¼Œå°†å½“å‰ç¯å¢ƒçš„é native ä»£ç å…¨é‡æ‰“åŒ…æˆä¸€ä¸ª bundle æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°å¾®è½¯äº‘æœåŠ¡å™¨ï¼ˆWindows Azureï¼‰ã€‚ åœ¨ app ä¸­å¯åŠ¨é¡µï¼ˆæˆ– splash é¡µï¼‰ç¼–å†™è¯·æ±‚æ›´æ–°çš„ä»£ç ï¼ˆè¯·æ±‚åŒ…å«äº†æœ¬åœ°ç‰ˆæœ¬ï¼ŒhashCodeã€appToken ç­‰ä¿¡æ¯ï¼‰ï¼Œå¾®è½¯æœåŠ¡ç«¯å¯¹æ¯”æœ¬åœ° js bundle ç‰ˆæœ¬å’Œå¾®è½¯æœåŠ¡å™¨çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ¬åœ°ç‰ˆæœ¬ä½ï¼Œå°±ä¸‹è½½æ–°çš„ js bundle ä¸‹æ¥åå®ç°æ›´æ–°(code push æ¡†æ¶å®ç°)ã€‚ 11.Reduxä¸­åŒæ­¥ action ä¸å¼‚æ­¥ action æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆåŒæ­¥åªè¿”å›ä¸€ä¸ªæ™®é€š action å¯¹è±¡ã€‚è€Œå¼‚æ­¥æ“ä½œä¸­é€”ä¼šè¿”å›ä¸€ä¸ª promise å‡½æ•°ã€‚å½“ç„¶åœ¨ promise å‡½æ•°å¤„ç†å®Œæ¯•åä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ™®é€š action å¯¹è±¡ã€‚thunk ä¸­é—´ä»¶å°±æ˜¯åˆ¤æ–­å¦‚æœè¿”å›çš„æ˜¯å‡½æ•°ï¼Œåˆ™ä¸ä¼ å¯¼ç»™ reducerï¼Œç›´åˆ°æ£€æµ‹åˆ°æ˜¯æ™®é€š action å¯¹è±¡ï¼Œæ‰äº¤ç”± reducer å¤„ç†ã€‚","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/categories/ReactNative/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"http://mariogogogo.github.io/tags/%E6%8A%80%E5%B7%A7/"},{"name":"ReactNative","slug":"ReactNative","permalink":"http://mariogogogo.github.io/tags/ReactNative/"}]},{"title":"ä»€ä¹ˆæ˜¯Redux","slug":"ä»€ä¹ˆæ˜¯Redux","date":"2018-02-01T07:13:48.000Z","updated":"2020-09-16T09:07:12.000Z","comments":true,"path":"2018/02/01/ä»€ä¹ˆæ˜¯Redux/","link":"","permalink":"http://mariogogogo.github.io/2018/02/01/%E4%BB%80%E4%B9%88%E6%98%AFRedux/","excerpt":"è®¤è¯†ä¸‹redux","text":"è®¤è¯†ä¸‹reduxä»€ä¹ˆæ˜¯reduxå½“ä½ å»å¼€å‘å¤æ‚çš„å•é¡µåº”ç”¨çš„æ—¶å€™ä½ éœ€è¦ç®¡ç†å„ç§å¤æ‚çš„åº”ç”¨çŠ¶æ€ï¼Œè¿™é‹çŠ¶æ€å¯èƒ½æ˜¯æœåŠ¡å™¨è¿”å›çš„çŠ¶ï¼Œæ€ï¼Œæœ¬åœ°çš„æ•°æ® url reduxå¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† åªç»´æŠ¤æ•°æ®ä¸€ä¸ªåº”ç”¨å¦‚ä½•å¤æ‚ åªæœ‰ä¸€ä¸ªstore æ•°æ®åªå­˜storeå¾—åˆ°storeæ•°æ® ç”¨ getstateï¼ˆï¼‰ä¸èƒ½ç›´æ¥ä¿®æ”¹store è€Œæ˜¯åº”è¯¥å‘èµ·ä¸€ä¸ªaction è¯·æ±‚ ç„¶å reducerä¼šå»æ›´æ”¹æ•°æ®ï¼Œå¦‚ä½•æ›´æ”¹ä½ ä¸ç”¨å…³å¿ƒ 1234567891011121314151617181920212223242526import &#123;createStore&#125; from &#x27;redux&#x27;;// reducerå”¯ä¸€ statefunction counter(state = 0, action) &#123; let &#123;type&#125; = action; switch (type) &#123; case &#x27;INCREMENT&#x27;: return++ state; default: return state; &#125;&#125;//è·å–æœ€æ–°çš„storeæ•°æ®let store = createStore(counter);$(document).click(ev =&gt; &#123; // å‘å¸ƒactionæ¥æ›´æ–°æ•°æ® store.dispatch(&#123;type: &#x27;INCREMENT&#x27;&#125;);&#125;);// ç›‘å¬stateçš„å˜åŒ–store.subscribe(() =&gt; &#123; //ä¸€æ—¦stateå˜åŒ–å°±å¯ä»¥å†å»æ›´æ–°Viewè§†å›¾ç›¸å…³ let state = store.getState(); console.log(state);&#125;); é”™è¯¯çš„æ›´æ–°state æ­£ç¡®çš„æ›´æ–°state actionå¯èƒ½éå¸¸å¤šï¼Œä¸€ä¸ªå¯ç»´æŠ¤çš„åº”ç”¨ä½ è¦æŠŠacionæ”¾å†ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æˆ–è€…è§†å›¾ç›¸å…³çš„actionæ”¾åœ¨æŸä¸ªæ¨¡å—é‡Œé¢ counterä¸èƒ½å‰¯ä½œç”¨ ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ å°±æ˜¯é‡Œé¢å¦‚æœajaxè¯·æ±‚ è·¯ç”±è·³è½¬ æˆ–è€… counter1 counter2 reactä¸reduxå¦‚ä½•ä¸€èµ·ç”¨","categories":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"Reactä¹‹ç®€ä¹¦ç•Œé¢demo","slug":"Reactä¹‹ç®€ä¹¦ç•Œé¢demo","date":"2018-01-31T07:13:48.000Z","updated":"2020-09-16T09:07:49.000Z","comments":true,"path":"2018/01/31/Reactä¹‹ç®€ä¹¦ç•Œé¢demo/","link":"","permalink":"http://mariogogogo.github.io/2018/01/31/React%E4%B9%8B%E7%AE%80%E4%B9%A6%E7%95%8C%E9%9D%A2demo/","excerpt":"åšä¸€äº›å°ç»ƒä¹ ","text":"åšä¸€äº›å°ç»ƒä¹ åˆ†æé¡¹ç›®ç•Œé¢","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"React","slug":"React","permalink":"http://mariogogogo.github.io/tags/React/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"æ‰‹å†™ä¸€ä¸ª reduce å®ç°","slug":"æ‰‹å†™ä¸€ä¸ªreduceçš„å®ç°","date":"2017-12-29T16:00:00.000Z","updated":"2020-09-16T09:07:14.000Z","comments":true,"path":"2017/12/30/æ‰‹å†™ä¸€ä¸ªreduceçš„å®ç°/","link":"","permalink":"http://mariogogogo.github.io/2017/12/30/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAreduce%E7%9A%84%E5%AE%9E%E7%8E%B0/","excerpt":"æˆ‘ä»¬çŸ¥é“ reduce æ–¹æ³•æ˜¯ ES5 å¼•å…¥çš„ï¼Œreduce è‹±æ–‡è§£é‡Šç¿»è¯‘è¿‡æ¥ä¸ºã€Œå‡å°‘ï¼Œç¼©å°ï¼Œä½¿è¿˜åŸï¼Œä½¿å˜å¼±ã€","text":"æˆ‘ä»¬çŸ¥é“ reduce æ–¹æ³•æ˜¯ ES5 å¼•å…¥çš„ï¼Œreduce è‹±æ–‡è§£é‡Šç¿»è¯‘è¿‡æ¥ä¸ºã€Œå‡å°‘ï¼Œç¼©å°ï¼Œä½¿è¿˜åŸï¼Œä½¿å˜å¼±ã€ å®ƒçš„ä½¿ç”¨è¯­æ³•ï¼š 1arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue]) è¿™é‡Œæˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚ reduce ç¬¬ä¸€ä¸ªå‚æ•° callback æ˜¯æ ¸å¿ƒï¼Œå®ƒå¯¹æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œã€Œå åŠ åŠ å·¥ã€ï¼Œå…¶æœ€åä¸€æ¬¡è¿”å›å€¼å°†ä½œä¸º reduce æ–¹æ³•çš„æœ€ç»ˆè¿”å›å€¼ã€‚ å®ƒåŒ…å« 4 ä¸ªå‚æ•°ï¼š previousValue è¡¨ç¤ºã€Œä¸Šä¸€æ¬¡ã€ callback å‡½æ•°çš„è¿”å›å€¼ currentValue æ•°ç»„éå†ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´  currentIndex å¯é€‰ï¼Œè¡¨ç¤º currentValue åœ¨æ•°ç»„ä¸­å¯¹åº”çš„ç´¢å¼•ã€‚å¦‚æœæä¾›äº† initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º 0ï¼Œå¦åˆ™ä¸º 1 array å¯é€‰ï¼Œè°ƒç”¨ reduce() çš„æ•°ç»„ initialValue å¯é€‰ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰æä¾› initialValueï¼Œé‚£ä¹ˆæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†ä½œä¸º callback çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ reduce å®ç° runPromiseInSequence æˆ‘ä»¬çœ‹å®ƒçš„ä¸€ä¸ªå…¸å‹åº”ç”¨ï¼ŒæŒ‰é¡ºåºè¿è¡Œ Promiseï¼š 12345678910111213141516171819202122const f1 = () =&gt; new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(&quot;p1 running&quot;); resolve(1); &#125;, 1000); &#125;);const f2 = () =&gt; new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(&quot;p2 running&quot;); resolve(2); &#125;, 1000); &#125;);const array = [f1, f2];const runPromiseInSequence = (array, value) =&gt; array.reduce((promiseChain, currentFunction) =&gt; promiseChain.then(currentFunction), Promise.resolve(value));runPromiseInSequence(array, &quot;init&quot;); å®ç°æ–¹æ¡ˆ â‘  1234567891011121314151617181920212223242526272829303132// â‘  å®šä¹‰åˆ° Array.prototype ä¸Šã€‚ å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°Array.prototype.myReduse = function(callback, init) &#123; // init æ˜¯å¯é€‰çš„ï¼Œ è¿™é‡Œçš„ this æ˜¯è°ƒç”¨çš„é‚£ä¸ªarrayã€‚ init = init || null; const array = this; // â‘¡ å®šä¹‰ prev ä¹‹å‰çš„ç»“æœ å’Œ å¾ªç¯èµ·å§‹ç‚¹ let prev, startIndex = 0; // â‘¢ æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; æ•°ç»„æ˜¯ç©º =&gt; æŠ¥é”™ if (!init &amp;&amp; array.length == 0) return console.log(&quot;ç©ºæ•°ç»„ï¼Œæ²¡æœ‰åˆå§‹å€¼&quot;); // æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; æ•°ç»„é•¿åº¦=1 =&gt; ç›´æ¥è¿”å›ç¬¬ä¸€é¡¹ï¼Œcallbackä¸æ‰§è¡Œ if (!init &amp;&amp; array.length == 1) return array[0]; // æ²¡æœ‰åˆå§‹å€¼ &amp;&amp; é•¿åº¦å¤§äº1 =&gt; ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼Œprev = ç¬¬ä¸€é¡¹çš„å€¼ if (!init &amp;&amp; array.length &gt; 1) &#123; prev = array[0]; startIndex = 1; &#125; // æœ‰åˆå§‹å€¼ &amp;&amp; é•¿åº¦å¤§äº1 =&gt; ä»ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œprev = init åˆå§‹å€¼ if (init &amp;&amp; array.length &gt; 1) &#123; prev = init; &#125; for (let index = startIndex; index &lt; array.length; index++) &#123; // prev å§‹ç»ˆæ˜¯å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œ // callback æŒ‰ç…§é¡ºåºä¼ å…¥å€¼ï¼š å‰é¢çš„ç»“æœï¼Œ å½“å‰é¡¹çš„å€¼ï¼Œ å½“å‰ç´¢å¼•ï¼ŒåŸæ•°ç»„ prev = callback(prev, array[index], index, array); &#125; // è¿”å›ä¹‹å‰é¡¹çš„ç»“æœã€‚ return prev;&#125;; æ–¹æ¡ˆ â‘¡ 1234567891011Array.prototype.reduce = Array.prototype.reduce || function(func, initialValue) &#123; var arr = this; var base = typeof initialValue === &quot;undefined&quot; ? arr[0] : initialValue; var startPoint = typeof initialValue === &quot;undefined&quot; ? 1 : 0; arr.slice(startPoint).forEach(function(val, index) &#123; base = func(base, val, index + startPoint, arr); &#125;); return base; &#125;; å‚è€ƒJS Array.prototype.reduce çš„ä¸€äº›ç†è§£ æ•°ç»„ reduce æ–¹æ³•çš„ç›¸å…³å®ç° æ•°ç»„ reduce ä¸€çœ‹ä¸€æ•´å¤©","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"æ‰‹å†™ä¸€ä¸ªcallæˆ– apply","slug":"æ‰‹å†™ä¸€ä¸ªcallæˆ– apply","date":"2017-12-24T16:00:00.000Z","updated":"2020-09-16T09:07:12.000Z","comments":true,"path":"2017/12/25/æ‰‹å†™ä¸€ä¸ªcallæˆ– apply/","link":"","permalink":"http://mariogogogo.github.io/2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcall%E6%88%96%20apply/","excerpt":"","text":"callè¯­æ³•ï¼š fun.call(thisArg,arg1,arg2,â€¦)ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œåˆ†åˆ«åœ°æä¾›çš„å‚æ•°(å‚æ•°çš„åˆ—è¡¨)ã€‚ ä½¿ç”¨ï¼š123456789101112function Product(name, price) &#123; this.name = name; this.price = price;&#125;function Food(name, price) &#123; Product.call(this, name, price); this.category = &#x27;food&#x27;;&#125;console.log(new Food(&#x27;cheese&#x27;, 5).name);//&quot;cheese&quot; ç®€å•è¯´ä¸‹å®ç°åŸç†ï¼š å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ æ‰§è¡Œ&amp;åˆ é™¤è¿™ä¸ªå‡½æ•° æŒ‡å®š thisåˆ°å‡½æ•°å¹¶ä¼ å…¥ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•° å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œé»˜è®¤æŒ‡å‘ä¸º window ä¹ä¸ç‰ˆæœ¬ï¼š ä»£ç ï¼šå¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªæ–°çš„newcallç†æƒ³çŠ¶æ€åº”è¯¥æ€ä¹ˆæ ·ï¼Ÿ 123456789101112Function.prototype.newcall = function (content = window) &#123; //thisæŒ‡çš„æ˜¯bar(name,age) content.fn = this; // å–å‡ºå‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•° ä¸å…¶ä»–å‚æ•° let args = [...arguments].slice(1); //content.fnå°±æ˜¯æŒ‡baræ–¹æ³• let result = content.fn(...args); //åˆ é™¤this delete content.fn; //è¿”å›æ–°å¯¹è±¡ return result;&#125; applyè¯­æ³•ï¼š func.apply(thisArg,[argsArray])ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼‰æä¾›çš„å‚æ•°ã€‚ 12345678910111213Function.prototype.newapply = function (content = window) &#123; content.fn = this; let result; //åˆ¤æ–­æ˜¯å¦æœ‰ç¬¬äºŒä¸ªå‚æ•° if(arguments[1])&#123; result = content.fn(...arguments[1]); &#125;else&#123; result = content.fn() &#125; delete content.fn; return result;&#125;bar.newapply(foo,[&quot;jack&quot;]) æ‰‹å†™ç³»åˆ— å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ å®ç°ä¸€ä¸ªJSON.stringify å®ç°ä¸€ä¸ªJSON.parse å®ç°ä¸€ä¸ªcallæˆ– apply å®ç°ä¸€ä¸ªFunction.bind å®ç°ä¸€ä¸ªç»§æ‰¿ å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ– æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ) æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling) æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´ å®ç°ä¸€ä¸ªinstanceOf","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"æ‰‹å†™ä¸€ä¸ªinstanceof","slug":"æ‰‹å†™ä¸€ä¸ªinstanceof","date":"2017-12-24T16:00:00.000Z","updated":"2020-09-16T09:07:13.000Z","comments":true,"path":"2017/12/25/æ‰‹å†™ä¸€ä¸ªinstanceof/","link":"","permalink":"http://mariogogogo.github.io/2017/12/25/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAinstanceof/","excerpt":"åœ¨ JavaScript ä¸­ï¼Œåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹å°å°ä¼šç”¨ typeof è¿ç®—ç¬¦ï¼Œåœ¨ä½¿ç”¨ typeof è¿ç®—ç¬¦æ—¶é‡‡ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨å€¼ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºå¼•ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œå®ƒéƒ½è¿”å› â€œobjectâ€ã€‚ECMAScript å¼•å…¥äº†å¦ä¸€ä¸ª Java è¿ç®—ç¬¦ instanceof æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚instanceof è¿ç®—ç¬¦ä¸ typeof è¿ç®—ç¬¦ç›¸ä¼¼ï¼Œç”¨äºè¯†åˆ«æ­£åœ¨å¤„ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¸ typeof æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œinstanceof æ–¹æ³•è¦æ±‚å¼€å‘è€…æ˜ç¡®åœ°ç¡®è®¤å¯¹è±¡ä¸ºæŸç‰¹å®šç±»å‹ã€‚","text":"åœ¨ JavaScript ä¸­ï¼Œåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹å°å°ä¼šç”¨ typeof è¿ç®—ç¬¦ï¼Œåœ¨ä½¿ç”¨ typeof è¿ç®—ç¬¦æ—¶é‡‡ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨å€¼ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºå¼•ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œå®ƒéƒ½è¿”å› â€œobjectâ€ã€‚ECMAScript å¼•å…¥äº†å¦ä¸€ä¸ª Java è¿ç®—ç¬¦ instanceof æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚instanceof è¿ç®—ç¬¦ä¸ typeof è¿ç®—ç¬¦ç›¸ä¼¼ï¼Œç”¨äºè¯†åˆ«æ­£åœ¨å¤„ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¸ typeof æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œinstanceof æ–¹æ³•è¦æ±‚å¼€å‘è€…æ˜ç¡®åœ°ç¡®è®¤å¯¹è±¡ä¸ºæŸç‰¹å®šç±»å‹ã€‚instanceof ç¤ºä¾‹1234567891011121314function F() &#123; this.name = name; get:()=&gt;&#123; console.log(&#x27;è¿™æ˜¯ä¸€ä¸ªè·å–æ–¹æ³•&#x27;,this) &#125; &#125; F.prototype.get_pro = function () &#123; console.log(&#x27;è¿™æ˜¯ä¸€ä¸ªåŸå‹å®ä¾‹ä¸Šçš„æ–¹æ³•&#x27;,this) &#125; let w = new F(); console.log(w instanceof F);//trueè¿™æ®µä»£ç é—®çš„æ˜¯â€œå˜é‡ w æ˜¯å¦ä¸º F å¯¹è±¡çš„å®ä¾‹ï¼Ÿâ€w çš„ç¡®æ˜¯ F å¯¹è±¡çš„å®ä¾‹ï¼Œå› æ­¤ç»“æœæ˜¯â€trueâ€ã€‚å°½ç®¡ä¸åƒ typeof æ–¹æ³•é‚£æ ·çµæ´»ï¼Œä½†æ˜¯åœ¨ typeof æ–¹æ³•è¿”å› â€œobjectâ€ çš„æƒ…å†µä¸‹ï¼Œinstanceof æ–¹æ³•è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å®ç°åŸç†ï¼š12345678910111213141516171819202122232425262728293031/** * å®ç°ä¸€ä¸ªinstanceof * instanceof è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹ constructor.prototype æ˜¯å¦å­˜åœ¨äºå‚æ•° object çš„åŸå‹é“¾ä¸Šã€‚ * @returns &#123;boolean&#125; */function newInstanceof(left,right) &#123; //è·å–å®ä¾‹çš„åŸå‹å¯¹è±¡ let proto = left.__proto__; //è·å–æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ let prototype = right.prototype; //é»˜è®¤åˆ¤æ–­true while (true)&#123; //å¦‚æœå®ä¾‹å¯¹è±¡ä¸ºç©º åˆ™ä¸ºfalse if(proto == null) return false //å¦‚æœåŸå‹å¯¹è±¡ === æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ åˆ™åˆ¤æ–­true if(proto == prototype) return true //å¦åˆ™ç»§ç»­æƒ³åŸå‹å¯¹è±¡çš„ä¸Šä¸€çº§å¯»æ‰¾åŸå‹å¯¹è±¡ï¼Œä¸€ç›´æ‰¾åˆ°Objectä¸ºæ­¢ proto = proto.__proto__; &#125; &#125; function W()&#123; get:()=&gt;&#123; console.log(this) &#125; console.log(&#x27;æˆ‘æ˜¯w&#x27;) &#125; console.log(newInstanceof(w,F)) console.log(newInstanceof(w,W)) console.log(newInstanceof(w,Object)) æ‰‹å†™ç³»åˆ— å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ å®ç°ä¸€ä¸ªJSON.stringify å®ç°ä¸€ä¸ªJSON.parse å®ç°ä¸€ä¸ªcallæˆ– apply å®ç°ä¸€ä¸ªFunction.bind å®ç°ä¸€ä¸ªç»§æ‰¿ å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ– æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ) æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling) æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´ å®ç°ä¸€ä¸ªinstanceOf","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"æ‰‹å†™ä¸€ä¸ªJSON.stringifyä¸JSON.parse","slug":"æ‰‹å†™ä¸€ä¸ªJSON.stringifyä¸JSON.parse","date":"2017-12-23T16:00:00.000Z","updated":"2020-09-16T09:07:13.000Z","comments":true,"path":"2017/12/24/æ‰‹å†™ä¸€ä¸ªJSON.stringifyä¸JSON.parse/","link":"","permalink":"http://mariogogogo.github.io/2017/12/24/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAJSON.stringify%E4%B8%8EJSON.parse/","excerpt":"","text":"JSON.stringify()æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON.stringify() æ–¹æ³•å°† JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ JSON.stringify(value[, replacer[, space]]) Boolean|Number|String ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚ undefinedã€ä»»æ„å‡½æ•°ä»¥åŠ symbolï¼Œä¼šè¢«å¿½ç•¥ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰ï¼Œæˆ–è€…è¢«è½¬æ¢æˆ nullï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚ ä¸å¯æšä¸¾çš„å±æ€§ä¼šè¢«å¿½ç•¥ å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼é€šè¿‡æŸç§é—´æ¥çš„æ–¹å¼æŒ‡å›è¯¥å¯¹è±¡æœ¬èº«ï¼Œå³å¾ªç¯å¼•ç”¨ï¼Œå±æ€§ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ 12345678910111213141516171819202122232425262728293031function jsonStringify(obj) &#123; let type = typeof obj; if (type !== &quot;object&quot; || type === null) &#123; if (/string|undefined|function/.test(type)) &#123; obj = &#x27;&quot;&#x27; + obj + &#x27;&quot;&#x27;; &#125; return String(obj) &#125; else &#123; let json = []; // typeof []ä¹Ÿæ˜¯object ç»§ç»­åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ arr = (obj &amp;&amp; obj.constructor === Array); // éå†å¯¹è±¡ for (let k in obj) &#123; let v = obj[k]; let type = typeof v; if (/string|undefined|function/.test(type)) &#123; v = &#x27;&quot;&#x27; + v + &#x27;&quot;&#x27;; &#125; else if (type === &quot;object&quot;) &#123; //åˆ¤æ–­å¦‚æœæ˜¯objectç»§ç»­é€’å½’ v = jsonStringify(type); &#125; json.push((arr ? &quot;&quot; : &#x27;&quot;&#x27;+ k + &#x27;&quot;:&#x27;)+String(v)) &#125; return (arr ? &quot;[&quot; : &quot;&#123;&quot;) + String(json)+(arr ? &quot;]&quot; : &quot;&#125;&quot;) &#125; &#125; console.log(jsonStringify(2)) console.log(jsonStringify(&#123;x: 5&#125;)) // &quot;&#123;&quot;x&quot;:5&#125;&quot; console.log(jsonStringify([1, &quot;false&quot;, false])) // &quot;[1,&quot;false&quot;,false]&quot; console.log(jsonStringify(&#123;b: undefined&#125;)) JSON.parse()æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON.parse() æ–¹æ³•å°†æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚ JSON.parse(text[, reviver]) ç”¨æ³•ï¼š 12var obj = JSON.parse(&#x27;&#123; &quot;name&quot;:&quot;runoob&quot;, &quot;alexa&quot;:10000, &quot;site&quot;:&quot;www.runoob.com&quot; &#125;&#x27;);document.getElementById(&quot;demo&quot;).innerHTML = obj.name + &quot;ï¼š&quot; + obj.site; ç¬¬ä¸€ç§å†™æ³•ï¼š12345function jsonParse(opt) &#123; return eval(&#x27;(&#x27; + opt + &#x27;)&#x27;); &#125; console.log(jsonParse(jsonStringify(&#123;x: 1, y: undefined, z: null&#125;)))ç¬¬äºŒç§å†™æ³•12345// ç”¨æ¥è§£æJSONå­—ç¬¦ä¸²ï¼Œæ„é€ ç”±å­—ç¬¦ä¸²æè¿°çš„JavaScriptå€¼æˆ–å¯¹è±¡ã€‚æä¾›å¯é€‰çš„reviverå‡½æ•°ç”¨ä»¥åœ¨è¿”å›ä¹‹å‰å¯¹æ‰€å¾—åˆ°çš„å¯¹è±¡æ‰§è¡Œå˜æ¢(æ“ä½œ)ã€‚let jsonStr = &#x27;&#123; &quot;age&quot;: 20, &quot;name&quot;: &quot;jack&quot; &#125;&#x27;let json = (new Function(&#x27;return&#x27;+jsonStr))();console.log(json)åŸå› æ˜¯ï¼šæ ¸å¿ƒï¼š Functionä¸ evalæœ‰ç›¸åŒçš„å­—ç¬¦ä¸²å‚æ•°ç‰¹æ€§ã€‚ let func=newFunction(arg1,arg2,â€¦,functionBody); æ‰‹å†™ç³»åˆ— å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ å®ç°ä¸€ä¸ªJSON.stringify å®ç°ä¸€ä¸ªJSON.parse å®ç°ä¸€ä¸ªcallæˆ– apply å®ç°ä¸€ä¸ªFunction.bind å®ç°ä¸€ä¸ªç»§æ‰¿ å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ– æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ) æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling) æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´ å®ç°ä¸€ä¸ªinstanceOf","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"ã€ç½®é¡¶ã€‘JavaScript ç¼–ç é£æ ¼æŒ‡å—","slug":"JavaScript ç¼–ç é£æ ¼æŒ‡å—","date":"2017-12-22T04:39:04.000Z","updated":"2020-09-16T09:07:33.000Z","comments":true,"path":"2017/12/22/JavaScript ç¼–ç é£æ ¼æŒ‡å—/","link":"","permalink":"http://mariogogogo.github.io/2017/12/22/JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97/","excerpt":"åºè¯­è¨€çš„ç¼–ç é£æ ¼æŒ‡å—å¯¹äºä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„è½¯ä»¶è€Œè¨€æ˜¯éå¸¸é‡è¦çš„ã€‚æœ¬æŒ‡å—æ˜¯åŸºäºâ€œJavaè¯­è¨€ç¼–ç è§„èŒƒâ€ï¼ˆCode Conventions fo the Java Programming Languageï¼‰å’ŒCrockfordçš„ï¼ˆJavaScriptï¼‰è§„èŒƒï¼ŒåŒæ—¶ç»“åˆäº†æˆ‘ä¸ªäººçš„ç»éªŒå’Œå–œå¥½åšäº†ä¸€äº›æ”¹åŠ¨ã€‚","text":"åºè¯­è¨€çš„ç¼–ç é£æ ¼æŒ‡å—å¯¹äºä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„è½¯ä»¶è€Œè¨€æ˜¯éå¸¸é‡è¦çš„ã€‚æœ¬æŒ‡å—æ˜¯åŸºäºâ€œJavaè¯­è¨€ç¼–ç è§„èŒƒâ€ï¼ˆCode Conventions fo the Java Programming Languageï¼‰å’ŒCrockfordçš„ï¼ˆJavaScriptï¼‰è§„èŒƒï¼ŒåŒæ—¶ç»“åˆäº†æˆ‘ä¸ªäººçš„ç»éªŒå’Œå–œå¥½åšäº†ä¸€äº›æ”¹åŠ¨ã€‚1.ç¼©è¿› æ¯ä¸€è¡Œçš„å±‚çº§ç”±å››ä¸ªç©ºæ ¼ç»„æˆï¼Œé¿å…ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰è¿›è¡Œç¼©è¿›ã€‚ 1234// å¥½çš„å†™æ³•if (true) &#123; doSomething();&#125; 2.è¡Œçš„é•¿åº¦ æ¯è¡Œé•¿åº¦ä¸åº”è¯¥è¶…è¿‡80ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸€è¡Œå¤šä½™80ä¸ªå­—ç¬¦ï¼Œåº”å½“åœ¨ä¸€ä¸ªè¿ç®—ç¬¦ï¼ˆé€—å·ï¼ŒåŠ å·ç­‰ï¼‰åæ¢è¡Œã€‚ä¸‹ä¸€è¡Œåº”å½“å¢åŠ ä¸¤æç¼©è¿›ï¼ˆ8ä¸ªå­—ç¬¦ï¼‰ï¼› 123456789// å¥½çš„å†™æ³•doSomething(argument1, argument2, argument3, argument4, argument5);// ä¸å¥½çš„å†™æ³•ï¼šç¬¬äºŒè¡Œåªæœ‰å››ä¸ªç©ºæ ¼çš„ç¼©è¿›doSomething(argument1, argument2, argument3, argument4, argument5);// ä¸å¥½çš„å†™æ³•ï¼šåœ¨è¿ç®—ç¬¦ä¹‹å‰æ¢è¡ŒdoSomething(argument1, argument2, argument3, argument4 ,argument5); 3.åŸå§‹å€¼ å­—ç¬¦ä¸²åº”å½“å§‹ç»ˆä½¿ç”¨å•å¼•å·(é¿å…ä½¿ç”¨åŒå¼•å·)ä¸”ä¿æŒä¸€è¡Œã€‚é¿å…åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨æ–œçº¿å¦èµ·ä¸€è¡Œã€‚ 123456789101112131415161718192021222324// å¥½çš„å†™æ³•var name = &#x27;Nicholas&#x27;;// ä¸å¥½çš„å†™æ³•ï¼š åŒå¼•å·var name = &quot;Nicholas&quot;;// ä¸å¥½çš„å†™æ³•ï¼šå­—ç¬¦ä¸²ç»“æŸä¹‹å‰æ¢è¡Œvar longString = &#x27;Here is the story, of a man \\named Brady.&#x27;;æ•°å­—åº”å½“ä½¿ç”¨åè¿›åˆ¶æ•´æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ•´æ•°ï¼Œåå…­è¿›åˆ¶æ•´æ•°ï¼Œæˆ–è€…åè¿›åˆ¶æµ®ç‚¹å°æ•°ï¼Œå°æ•°ç‚¹å‰ååº”å½“è‡³å°‘ä¿ç•™ä¸€ä½æ•°å­—ã€‚é¿å…ä½¿ç”¨å…«è¿›åˆ¶ç›´æ¥é‡ã€‚// å¥½çš„å†™æ³•var count = 10;// å¥½çš„å†™æ³•var price = 10.0;var price = 10.00;// å¥½çš„å†™æ³•var num = 0xA2;// å¥½çš„å†™æ³•var num = 1e23;// ä¸å¥½çš„å†™æ³•ï¼šåè¿›åˆ¶æ•°å­—ä»¥å°æ•°ç‚¹ç»“å°¾var price = 10.;// ä¸å¥½çš„å†™æ³•ï¼šåè¿›åˆ¶æ•°å­—ä»¥å°æ•°ç‚¹å¼€å¤´var price = .1;// ä¸å¥½çš„å†™æ³•ï¼šå…«è¿›åˆ¶ï¼ˆbase 8ï¼‰å†™æ³•å·²åºŸå¼ƒvar num = 010; ç‰¹æ®Šå€¼nullé™¤äº†ä¸‹è¿°æƒ…å†µä¸‹åº”å½“é¿å…ä½¿ç”¨ã€‚ ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯èƒ½è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ç”¨æ¥å’Œä¸€ä¸ªå·²ç»åˆå§‹åŒ–çš„å˜é‡æ¯”è¾ƒï¼Œè¿™ä¸ªå˜é‡å¯ä»¥æ˜¯ä¹Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚å½“å‡½æ•°çš„å‚æ•°æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œè¢«ç”¨ä½œå‚æ•°ä¼ å…¥ã€‚å½“å‡½æ•°çš„è¿”å›å€¼æœŸæœ›æ˜¯å¯¹è±¡æ—¶ï¼Œè¢«ç”¨ä½œè¿”å›å€¼ä¼ å‡ºã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718// å¥½çš„å†™æ³•var person = null;// å¥½çš„å†™æ³•function getPersion();if (persion != null) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šå’Œä¸€ä¸ªæœªè¢«åˆå§‹åŒ–çš„å˜é‡æ¯”è¾ƒvar persion;if (persion != null) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šfunction doSomething(arg1, arg2, arg3, arg4) &#123; if (arg4 != null) &#123; doSomething(Else); &#125;&#125; é¿å…ä½¿ç”¨ç‰¹æ®Šå€¼ undefinedã€‚åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦å®šä¹‰åº”å½“ä½¿ç”¨typeofæ“ä½œç¬¦ã€‚ 12345678// å¥½çš„å†™æ³•if (typeof variable == &#x27;undefined&#x27;) &#123; // do something&#125;// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨äº†undefinedç›´æ¥é‡if (variable == undefined) &#123; // do something;&#125; 4.è¿ç®—ç¬¦é—´è· äºŒå…ƒè¿ç®—ç¬¦å‰åå¿…é¡»ä½¿ç”¨ä¸€ä¸ªç©ºæ ¼æ¥ä¿æŒè¡¨è¾¾å¼çš„æ•´æ´ã€‚æ“ä½œç¬¦åŒ…æ‹¬èµ‹å€¼è¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦ã€‚ 1234567891011121314151617181920// å¥½çš„å†™æ³•var found = (values[i] === item);// å¥½çš„å†™æ³•if (found &amp;&amp; (count &gt; 10)) &#123; doSomething();&#125;// å¥½çš„å†™æ³•for (i = 0; i &lt; count; i++) &#123; process(i);&#125;// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼var found = (values[i]===item);// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼if (found&amp;&amp;(count&gt;10)) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šä¸¢å¤±ç©ºæ ¼for (i=0; i&lt;count; i++) &#123; process(i);&#125; 5.æ‹¬å·é—´è· å½“ä½¿ç”¨æ‹¬å·æ—¶ï¼Œç´§æ¥å·¦æ‹¬å·ä¹‹åå’Œç´§æ¥å³æ‹¬å·ä¹‹å‰ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚ 1234567891011121314151617181920// å¥½çš„å†™æ³•var found = (values[i] === item);// å¥½çš„å†™æ³•if (found &amp;&amp; (count &gt; 10)) &#123; doSomething();&#125;// å¥½çš„å†™æ³•for (i= 0; i &lt; count; i++) &#123; process(i);&#125;// ä¸å¥½çš„å†™æ³•ï¼šå·¦æ‹¬å·ä¹‹åæœ‰é¢å¤–çš„ç©ºæ ¼var found = ( values[i] === item);// ä¸å¥½çš„å†™æ³•ï¼šå³æ‹¬å·ä¹‹åæœ‰é¢å¤–çš„ç©ºæ ¼if (found &amp;&amp; (count &gt; 10) ) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šå‚æ•°ä¸¤è¾¹æœ‰é¢å¤–çš„ç©ºæ ¼for (i= 0; i &lt; count; i++) &#123; process( i );&#125; 6.å¯¹è±¡ç›´æ¥é‡ å¯¹è±¡ç›´æ¥é‡åº”å½“ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ã€‚ å…¶å®å·¦æ‹¬å·åº”å½“åŒè¡¨è¾¾å¼ä¿æŒåŒä¸€è¡Œã€‚æ¯ä¸ªå±æ€§çš„åå€¼å¯¹åº”å½“ä¿æŒä¸€ä¸ªç¼©è¿›ï¼Œç¬¬ä¸€ä¸ªå±æ€§åº”å½“åœ¨å·¦æ‹¬å·åå¦èµ·ä¸€è¡Œã€‚æ¯ä¸ªå±æ€§çš„åå€¼å¯¹åº”å½“ä½¿ç”¨ä¸ç”¨å¼•å·çš„å±æ€§åï¼Œå…¶åç´§è·Ÿä¸€ä¸ªå†’å·ï¼ˆä¹‹å‰ä¸å«ç©ºæ ¼ï¼‰,è€Œåæ˜¯å€¼ã€‚å€˜è‹¥å±æ€§å€¼æ˜¯å‡½æ•°ç±»å‹ï¼Œå‡½æ•°ä½“åº”å½“åœ¨å±æ€§åä¹‹ä¸‹å¦èµ·ä¸€è¡Œï¼Œè€Œä¸”å…¶åå‡åº”ä¿ç•™ä¸€ä¸ªç©ºè¡Œã€‚ä¸€ç»„ç›¸å…³çš„å±æ€§å‰åå¯ä»¥æ’å…¥ç©ºè¡Œä»¥æå‡ä»£ç çš„å¯è¯»æ€§ã€‚ç»“æŸçš„å³æ‹¬å·åº”å½“ç‹¬å ä¸€è¡Œã€‚ 12345678910111213141516171819202122// å¥½çš„å†™æ³•var object = &#123; key1: value1, key2: function() &#123; //åšäº›ä»€ä¹ˆ &#125;, key3: value3&#125;;// ä¸å¥½çš„å†™æ³•ï¼šä¸ä¸”å½“çš„ç¼©è¿›var object = &#123; key1: value1, key2: value2 &#125;;// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°ä½“å‘¨å›´ç¼ºå°‘ç©ºè¡Œvar object = &#123; key1: value1, key2: function() &#123; //åšäº›ä»€ä¹ˆ &#125;, key3: value3&#125;; å½“å¯¹è±¡å­—é¢é‡ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œå¦‚æœå€¼æ˜¯å˜é‡ï¼Œèµ·å§‹èŠ±æ‹¬å·åº”å½“åŒå‡½æ•°ååœ¨åŒä¸€è¡Œã€‚ æ‰€æœ‰å…¶ä½™å…ˆå‰åˆ—å‡ºçš„è§„åˆ™åŒæ ·ä½¿ç”¨ã€‚ 1234567// å¥½çš„å†™æ³•doSomething(&#123; key1: value1, key2: value2&#125;);// ä¸å¥½çš„å†™æ³•ï¼š æ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œä¸ŠdoSomething(&#123; key1: value1, key2: value2 &#125;); 7.æ³¨é‡Šé¢‘ç¹åœ°ä½¿ç”¨æ³¨é‡Šæœ‰åŠ©äºä»–äººç†è§£ä½ çš„ä»£ç ã€‚å¦‚ä¸‹æƒ…å†µåº”å½“ä½¿ç”¨æ³¨é‡Šã€‚ ä»£ç æ™¦æ¶©éš¾æ‡‚ã€‚å¯èƒ½è¢«è¯¯è®¤ä¸ºé”™è¯¯çš„ä»£ç ã€‚å¿…è¦ä½†ä¸æ˜æ˜¾çš„é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨çš„ä»£ç ã€‚å¯¹äºå¯¹è±¡ã€æ–¹æ³•æˆ–è€…å±æ€§ï¼Œç”Ÿæˆæ–‡æ¡£æ˜¯æœ‰å¿…è¦çš„ï¼ˆä½¿ç”¨ä¸”å½“çš„æ–‡æ¡£æ³¨é‡Šï¼‰ã€‚7.1 å•è¡Œæ³¨é‡Š å•è¡Œæ³¨é‡Šåº”å½“æ¥è¯´æ˜ä¸€è¡Œä»£ç æˆ–è€…ä¸€ç»„ç›¸å…³çš„ä»£ç ã€‚å•è¡Œæ³¨é‡Šå¯èƒ½æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚ ç‹¬å ä¸€è¡Œçš„æ³¨é‡Šï¼Œç”¨æ¥è§£é‡Šä¸‹ä¸€è¡Œä»£ç ã€‚ åœ¨ä»£ç è¡Œçš„å°¾éƒ¨æ³¨é‡Šï¼Œç”¨æ¥è§£é‡Šä¹‹å‰çš„ä»£ç ã€‚ å¤šè¡Œï¼Œç”¨æ¥æ³¨é‡Šæ‰ä¸€ä¸ªä»£ç å—ã€‚ è¿™é‡Œæœ‰ä¸€äº›ç¤ºä¾‹ä»£ç ã€‚ 1234567891011121314151617181920212223242526// å¥½çš„å†™æ³•if (condition) &#123; // å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šä¹‹å‰æ²¡æœ‰ç©ºè¡Œif (condition) &#123; // å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯çš„ç¼©è¿›if (condition) &#123;// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šè¿™é‡Œåº”å½“ç”¨å¤šè¡Œæ³¨é‡Š// æ¥ä¸‹æ¥çš„è¿™æ®µä»£ç éå¸¸éš¾ï¼Œé‚£ä¹ˆï¼Œè®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹// è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯é¦–å…ˆåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºçœŸ// åªæœ‰ä¸ºçœŸæ—¶æ‰æ‰§è¡Œã€‚è¿™é‡Œçš„æ¡ä»¶æ˜¯é€šè¿‡// å¤šä¸ªå‡½æ•°è®¡ç®—å‡ºæ¥çš„ï¼Œåœ¨æ•´ä¸ªä¼šè¯ç”Ÿå‘½æœŸå†…// è¿™ä¸ªå€¼æ˜¯å¯ä»¥ä¿®æ”¹çš„if (condition) &#123; // å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œåˆ™è¡¨æ˜é€šè¿‡äº†æ‰€æœ‰å®‰å…¨æ€§æ£€æŸ¥ allowed();&#125; å¯¹äºä»£ç å°¾å•è¡Œæ³¨é‡Šçš„æƒ…å†µï¼Œåº”ç¡®ä¿ä»£ç å°¾åŒæ³¨é‡Šä¹‹é—´è‡³å°‘ä¸€ä¸ªç¼©è¿›ã€‚123456789101112// å¥½çš„å†™æ³•var result = something + somethingElse; // somethingElse will never be null// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å’Œæ³¨é‡Šé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºæ ¼var result = something + somethingElse;// somethingElse will never be nullæ³¨é‡Šä¸€ä¸ªä»£ç å—æ—¶åœ¨è¿ç»­å¤šè¡Œä½¿ç”¨å•è¡Œæ³¨é‡Šæ˜¯å”¯ä¸€å¯ä»¥æ¥å—çš„æƒ…å†µã€‚å¤šè¡Œæ³¨é‡Šä¸åº”å½“åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ã€‚// å¥½çš„å†™æ³•// if (condition) &#123;// doSomething();// thenDoSomethingElse();// &#125; 7.2 å¤šè¡Œæ³¨é‡Šå¤šè¡Œæ³¨é‡Šåº”å½“åœ¨ä»£ç éœ€è¦æ›´å¤šæ–‡å­—å»è§£é‡Šçš„æ—¶å€™ä½¿ç”¨ã€‚æ¯ä¸ªå¤šè¡Œæ³¨é‡Šéƒ½è‡³å°‘æœ‰å¦‚ä¸‹ä¸‰è¡Œã€‚ é¦–è¡Œä»…ä»…åŒ…æ‹¬/*æ³¨é‡Šå¼€å§‹ã€‚è¯¥è¡Œä¸åº”å½“æœ‰å…¶ä»–æ–‡å­—ã€‚ æ¥ä¸‹æ¥çš„è¡Œä»¥*å¼€å¤´å¹¶ä¿æŒå·¦å¯¹é½ã€‚è¿™äº›è¡Œå¯ä»¥æœ‰æ–‡å­—æè¿°ã€‚ æœ€åä¸€è¡Œä»¥*/å¼€å¤´å¹¶åŒå…ˆå‰è¡Œä¿æŒå¯¹é½ã€‚ä¹Ÿä¸åº”è¯¥æœ‰å…¶ä»–æ–‡å­—ã€‚ å¤šè¡Œæ³¨é‡Šçš„æ‰‹è¡Œåº”å½“ä¿æŒåŒå®ƒæè¿°ä»£ç çš„ç›¸åŒå±‚æ¬¡ç¼©è¿›ã€‚åç»­çš„æ¯è¡Œåº”å½“æœ‰åŒæ ·å±‚æ¬¡çš„ç¼©è¿›å¹¶é™„åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆä¸ºäº†é€‚å½“ä¿æŒ*å­—ç¬¦çš„å¯¹é½ï¼‰ã€‚å¯¹æ¯ä¸€ä¸ªå¤šè¡Œä»£ç ä¹‹å‰åº”é¢„ç•™ä¸€ä¸ªç©ºæ ¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435// å¥½çš„å†™æ³•if (condition) &#123; /* * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹ */ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šä¹‹å‰æ— ç©ºè¡Œif (condition) &#123; /* * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹ */ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šæ˜Ÿå·åæ²¡æœ‰ç©ºæ ¼if (condition) &#123; /* *å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ *è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹ */ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯çš„ç¼©è¿›if (condition) &#123;/* * å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œ * è¯´æ˜é€šè¿‡äº†æ‰€æœ‰çš„å®‰å…¨æ£€æµ‹ */ allowed();&#125;// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å°¾éƒ¨æ³¨é‡Šä¸è¦ç”¨å¤šè¡Œæ³¨é‡Šæ ¼å¼var result = something + somethingElse; /* somethingElse will never be null */ 7.3 æ³¨é‡Šå£°æ˜æ³¨é‡Šæœ‰æ—¶å€™ä¹Ÿå¯ä»¥ç”¨æ¥ç»™ä¸€æ®µä»£ç å£°æ˜é¢å¤–çš„ä¿¡æ¯ã€‚è¿™äº›å£°æ˜çš„æ ¼å¼ä»¥å•ä¸ªå•è¯æ‰“å¤´å¹¶ç´§è·Ÿä¸€ä¸ªåŒå¼•å·ã€‚å¯ä½¿ç”¨çš„å£°æ˜å¦‚ä¸‹ã€‚ TODO è¯´æ˜ä»£ç è¿˜æœªå®Œæˆã€‚åº”å½“åŒ…å«ä¸‹ä¸€æ­¥è¦åšçš„äº‹æƒ…ã€‚ HACK è¡¨æ˜ä»£ç å®ç°èµ°äº†ä¸€ä¸ªæ·å¾„ã€‚åº”å½“åŒ…å«ä¸ºä½•ä½¿ç”¨hackçš„åŸå› ã€‚è¿™ä¹Ÿå¯èƒ½è¡¨æ˜è¯¥é—®é¢˜å¯èƒ½ä¼šæœ‰æ›´å¥½çš„è§£å†³åŠæ³•ã€‚ XXX è¯´æ˜ä»£ç æ˜¯æœ‰é—®é¢˜çš„å¹¶åº”å½“å°½å¿«ä¿®å¤ã€‚ FIXME è¯´æ˜ä»£ç æ˜¯æœ‰é—®é¢˜çš„å¹¶åº”å°½å¿«ä¿®å¤ã€‚é‡è¦è¡Œç•¥æ¬¡äºXXXã€‚ REVIEW è¯´æ˜ä»£ç ä»»ä½•å¯èƒ½çš„æ”¹åŠ¨éƒ½éœ€è¦è¯„å®¡ã€‚ è¿™äº›å£°æ˜å¯èƒ½åœ¨ä¸€è¡Œæˆ–å¤šè¡Œæ³¨é‡Šä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”åº”å½“éµå¾ªä¸€èˆ¬æ³¨é‡Šç±»å‹ç›¸åŒçš„æ ¼å¼è§„åˆ™ã€‚ ä¾‹å¦‚ï¼š1234567891011121314151617181920212223242526// å¥½çš„å†™æ³•// TODOï¼šæˆ‘å¸Œæœ›æ‰¾åˆ°ä¸€ç§æ›´å¿«æ·çš„æ–¹å¼doSomething();// å¥½çš„å†™æ³•/* * HACKï¼šä¸å¾—ä¸é’ˆå¯¹IEåšçš„ç‰¹æ®Šå¤„ç†ã€‚æˆ‘è®¡åˆ’åç»­æœ‰æ—¶é—´æ—¶ * é‡å†™è¿™éƒ¨åˆ†ã€‚è¿™äº›ä»£ç å¯èƒ½éœ€è¦åœ¨v1.2ç‰ˆæœ¬ä¹‹å‰æ›¿æ¢æ‰ */if (document.all) &#123; doSomething();&#125;// å¥½çš„å†™æ³•// REVIEWï¼šæœ‰æ›´å¥½çš„æ–¹æ³•å—ï¼Ÿif (document.all) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šæ³¨é‡Šå£°æ˜ç©ºæ ¼ä¸æ­£ç¡®// TODOï¼š æˆ‘å¸Œæœ›æ‰¾åˆ°ä¸€ç§æ›´å¿«æ·çš„æ–¹å¼doSomething();// ä¸å¥½çš„å†™æ³•ï¼šä»£ç å’Œæ³¨é‡Šåº”å½“ä¿æŒåŒæ ·çš„ç¼©è¿› // REVIEWï¼šæœ‰æ›´å¥½çš„æ–¹æ³•å—ï¼Ÿif (document.all) &#123; doSomething();&#125; 8.å£°æ˜å˜é‡æ‰€æœ‰çš„å˜é‡åœ¨ä½¿ç”¨å‰åº”å½“äº‹å…ˆå®šä¹‰ã€‚å˜é‡å®šä¹‰åº”å½“æ”¾åœ¨å‡½æ•°å¼€å¤´ï¼Œä½¿ç”¨ä¸€ä¸ªvarè¡¨è¾¾å¼æ¯è¡Œä¸€ä¸ªå˜é‡ã€‚é™¤äº†é¦–è¡Œï¼Œæ‰€æœ‰è¡Œéƒ½åº”å½“å¤šä¸€å±‚ç¼©è¿›ä»¥ä½¿å˜é‡åèƒ½å¤Ÿå‚ç›´æ–¹å‘å¯¹é½ã€‚å˜é‡å®šä¹‰æ—¶åº”å½“åˆå§‹åŒ–ï¼Œå¹¶èµ‹å€¼æ“ä½œç¬¦åº”å½“ä¿æŒä¸€ç›´çš„ç¼©è¿›ã€‚åˆå§‹åŒ–çš„å˜é‡åº”å½“åœ¨æœªåˆå§‹åŒ–å˜é‡ä¹‹å‰ã€‚ 1234567891011121314151617181920212223242526272829// å¥½çš„å†™æ³•var count = 10, name = &#x27;Nicholas&#x27;, found = false, empty;// ä¸å¥½çš„å†™æ³•ï¼šä¸æ°å½“çš„åˆå§‹åŒ–èµ‹å€¼var count = 10, name = &#x27;Nicholas&#x27;, found= false, empty;// ä¸å¥½çš„å†™æ³•ï¼šé”™è¯¯ç¼©è¿›var count = 10,name = &#x27;Nicholas&#x27;,found = false,empty;// ä¸å¥½çš„å†™æ³•ï¼šå¤šä¸ªå®šäºå†™åœ¨ä¸€è¡Œvar count = 10, name = &#x27;Nicholas&#x27;, found = false, empty;// ä¸å¥½çš„å†™æ³•ï¼šä¸ºåˆå§‹åŒ–çš„å˜é‡æ”¾åœ¨æœ€å‰è¾¹var empty, count = 10, name = &#x27;Nicholas&#x27;, found = false;// ä¸å¥½çš„å†™æ³•ï¼šå¤šä¸ªvarè¡¨è¾¾å¼var empty, count = 10;var name = &#x27;Nicholas&#x27;, found = false; 9.å‡½æ•°å£°æ˜å‡½æ•°åº”å½“åœ¨ä½¿ç”¨å‰æå‰å®šä¹‰ã€‚ä¸€ä¸ªä¸æ˜¯ä½œä¸ºæ–¹æ³•çš„å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼‰åº”å½“ä½¿ç”¨å‡½æ•°å®šä¹‰çš„æ ¼å¼ï¼ˆä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼å’ŒFunctionæ„é€ æ ¼å¼ï¼‰ã€‚å‡½æ•°åå’Œå¼€å§‹åœ†æ‹¬å·ä¹‹é—´ä¸åº”å½“æœ‰ç©ºæ ¼ã€‚ç»“æŸçš„åœ†æ‹¬å·å’Œå³è¾¹çš„èŠ±æ‹¬å·ä¹‹é—´åº”è¯¥ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å³ä¾§çš„èŠ±æ‹¬å·åº”å½“åŒfunctionå…³é”®å­—ä¿æŒåŒä¸€è¡Œã€‚å¼€å§‹å’Œç»“æŸæ‹¬å·ä¹‹é—´ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚å‚æ•°åä¹‹é—´åº”å½“åœ¨é€—å·ä¹‹åä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å‡½æ•°ä½“åº”å½“ä¿æŒä¸€çº§ç¼©è¿›ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// å¥½çš„å†™æ³•function doSomething(arg1, arg2) &#123; return arg1 + arg2;&#125;// ä¸å¥½çš„å†™æ³•ï¼šç¬¬ä¸€è¡Œä¸æ°å½“çš„ç©ºæ ¼function doSomething (arg1, arg2) &#123; return arg1 + arg2;&#125;// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°è¡¨è¾¾å¼var doSomething = function(arg1, arg2) &#123; return arg1 + arg2;&#125;// ä¸å¥½çš„å†™æ³•ï¼šå³ä¾§èŠ±æ‹¬å·ä¸å¯¹function doSomething(arg1, arg2)&#123; return arg1 + arg2;&#125;// é”™è¯¯çš„å†™æ³•ï¼šä½¿ç”¨äº†Functionæ„é€ å™¨var doSomething = new Function(&#x27;arg1&#x27;, &#x27;arg2&#x27;, return arg1 + arg2);å…¶ä»–å‡½æ•°å†…éƒ¨å®šä¹‰å‡½æ•°åº”å½“åœ¨varè¯­å¥åç«‹å³å®šä¹‰ã€‚// å¥½çš„å†™æ³•function outer() &#123; var count = 10, name = &#x27;Nicholas&#x27;, found = false, empty; function inner() &#123; // ä»£ç  &#125; // è°ƒç”¨inner()çš„ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šinnerå‡½æ•°çš„å®šä¹‰å…ˆäºå˜é‡function outer() &#123; function inner() &#123; // ä»£ç  &#125; var count = 10, name = &#x27;Nicholas&#x27;, found = false, empty; // è°ƒç”¨inner()çš„ä»£ç &#125; åŒ¿åå‡½æ•°å¯èƒ½ä½œä¸ºæ–¹æ³•èµ‹å€¼ç»™å¯¹è±¡ï¼Œæˆ–è€…ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°ã€‚functionå…³é”®å­—åŒå¼€å§‹æ‹¬å·ä¹‹é—´ä¸åº”æœ‰ç©ºæ ¼ã€‚ 1234567891011121314151617181920212223242526272829303132// å¥½çš„å†™æ³•object.method = function() &#123; // ä»£ç &#125;;// ä¸å¥½çš„å†™æ³•ï¼šä¸æ­£ç¡®çš„ç©ºæ ¼object.method = function () &#123; // ä»£ç &#125;;ç«‹å³è¢«è°ƒç”¨çš„å‡½æ•°åº”å½“åœ¨å‡½æ•°è°ƒç”¨çš„å¤–å±‚ç”¨åœ†æ‹¬å·åŒ…è£¹ã€‚// å¥½çš„å†™æ³•var value = (function() &#123; // å‡½æ•°ä½“ return &#123; message: &#x27;Hi&#x27; &#125;&#125;());// ä¸å¥½çš„å†™æ³•ï¼šå‡½æ•°è°ƒç”¨å¤–å±‚æ²¡æœ‰ç”¨åœ†æ‹¬å·åŒ…è£¹var value = function() &#123; // å‡½æ•°ä½“ return &#123; message: &#x27;Hi&#x27; &#125;&#125;();// ä¸å¥½çš„å†™æ³•ï¼šåœ†æ‹¬å·çš„ä½ç½®ä¸å½“var value = (function() &#123; // å‡½æ•°ä½“ return &#123; message: &#x27;Hi&#x27; &#125;&#125;)(); 10.å‘½åå˜é‡å’Œå‡½æ•°åœ¨å‘½åæ—¶åº”å½“å°å¿ƒã€‚å‘½ååº”ä»…é™ä¸æ•°å­—å­—æ¯å­—ç¬¦ï¼ŒæŸäº›æƒ…å†µä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚æœ€å¥½ä¸è¦åœ¨ä»»ä½•å‘½åä¸­ä½¿ç”¨ç¾å…ƒï¼ˆ$ï¼‰æˆ–åæ–œæ ï¼ˆ\\ï¼‰ã€‚ å˜é‡å‘½ååº”å½“é‡‡ç”¨é©¼å³°å‘½åæ ¼å¼ï¼Œé¦–å­—æ¯å°å†™ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ã€‚å˜é‡åçš„ç¬¬ä¸€ä¸ªå•è¯åº”æ˜¯ä¸€ä¸ªåè¯ï¼ˆè€ŒéåŠ¨è¯ï¼‰ï¼Œä»¥é¿å…åŒå‡½æ•°æ··æ·†ã€‚ä¸è¦åœ¨å˜é‡å‘½åä¸­ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142// å¥½çš„å†™æ³•var accountNumber = &#x27;8401-1&#x27;;// ä¸å¥½çš„å†™æ³•ï¼šå¤§äº›å­—æ¯å¼€å¤´var AccountNumber = &#x27;8401-1&#x27;;// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿var account_number = &#x27;8401-1&#x27;;å‡½æ•°å‘½åä¹Ÿåº”å½“é‡‡ç”¨é©¼å³°å‘½åæ ¼å¼ã€‚å‡½æ•°åçš„ç¬¬ä¸€ä¸ªå•è¯åº”å½“æ˜¯åŠ¨è¯ï¼ˆè€Œéåè¯ï¼‰æ¥é¿å…åŒå˜é‡æ··æ·†ã€‚å‡½æ•°åä¸­æœ€å¥½ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚// å¥½çš„å†™æ³•function doSomething() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šå¤§äº›å­—æ¯å¼€å¤´function DoSomething() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šåè¯å¼€å¤´function car() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿function do_something() &#123; // ä»£ç &#125;æ„é€ å‡½æ•°â€”â€”é€šè¿‡newè¿ç®—ç¬¦åˆ›å»ºæ–°å¯¹è±¡çš„å‡½æ•°â€”â€”ä¹Ÿåº”å½“ä»¥é©¼å³°æ ¼å¼å‘½åå¹¶ä¸”é¦–å­—æ¯å¤§å†™ã€‚æ„é€ å‡½æ•°åç§°åº”ä¸€éåŠ¨è¯å¼€å¤´ï¼Œå› ä¸ºnewä»£è¡¨è¿™åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„æ“ä½œã€‚// å¥½çš„å†™æ³•function MyObject() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šå°å­—æ¯å¼€å¤´function myObject() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨ä¸‹åˆ’çº¿function My_Object() &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šåŠ¨è¯å¼€å¤´function My_Object() &#123; // ä»£ç &#125; å¸¸é‡ï¼ˆå€¼ä¸ä¼šè¢«æ”¹å˜çš„å˜é‡ï¼‰çš„å‘½ååº”å½“æ˜¯æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œä¸åŒå•è¯ä¹‹é—´ç”¨å•ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚123456789101112131415// å¥½çš„å†™æ³•var TOTAL_COUNT = 10;// ä¸å¥½çš„å†™æ³•ï¼šé©¼å³°å½¢å¼var totalCount = 10;// ä¸å¥½çš„å†™æ³•ï¼šæ··åˆå½¢å¼var total_COUNT= 10;å¯¹è±¡çš„å±æ€§åŒå˜é‡çš„åŒå‘½åè§„åˆ™ç›¸åŒã€‚å¯¹è±¡çš„æ–¹æ³•åŒå‡½æ•°çš„å‘½åè§„åˆ™ç›¸åŒã€‚å¦‚æœå±æ€§æˆ–æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œåº”å½“åœ¨ä¹‹å‰åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ã€‚// å¥½çš„å†™æ³•var object = &#123; _count: 10, _getCount: function() &#123; return this._count; &#125;&#125;; 11.ä¸¥æ ¼æ¨¡å¼ä¸¥æ ¼æ¨¡å¼åº”å½“ä»…é™åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œåƒä¸‡ä¸è¦åœ¨å…¨å±€ä½¿ç”¨ã€‚ 12345678910// ä¸å¥½çš„å†™æ³•ï¼šå…¨å±€ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼&#x27;use strict&#x27;;function doSomething() &#123; // ä»£ç &#125;// å¥½çš„å†™æ³•function doSomething() &#123; &#x27;use strict&#x27;; // ä»£ç &#125; å¦‚æœä½ æœŸæœ›åœ¨å¤šä¸ªå‡½æ•°ä¸­ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼è€Œä¸éœ€è¦å¤šæ¬¡å£°æ˜â€œusestrictâ€ï¼Œå¯ä»¥ä½¿ç”¨ç«‹åˆ»è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ 12345678910// å¥½çš„å†™æ³•(function() &#123; &#x27;use strict&#x27;; function doSomething() &#123; // ä»£ç  &#125; function doSomethingElse() &#123; // ä»£ç  &#125;&#125;()); 12.èµ‹å€¼å½“ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œå¦‚æœå³ä¾§æ˜¯å«æœ‰æ¯”è¾ƒè¯­å¥çš„è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨æ‹¬å·åŒ…è£¹ã€‚ // å¥½çš„å†™æ³•var flag = (i &lt; count);// ä¸å¥½çš„å†™æ³•ï¼šé—æ¼æ‹¬å·var flag = i &lt; count; 13.ç­‰å·è¿ç®—ç¬¦ä½¿ç”¨===ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰å’Œï¼==ï¼ˆä¸¥æ ¼ä¸ç›¸ç­‰ï¼‰ä»£æ›¿==ï¼ˆç›¸ç­‰ï¼‰å’Œï¼=ï¼ˆä¸ç­‰ï¼‰æ¥é¿å…å¼±ç±»å‹è½¬æ¢é”™è¯¯ã€‚ 1234// å¥½çš„å†™æ³•var same =(a === b);// ä¸å¥½çš„å†™æ³•ï¼šä½¿ç”¨==var same =(a == b); 14.ä¸‰å…ƒæ“ä½œç¬¦ä¸‰å…ƒè¿ç®—åº”å½“ä»…ä»…ç”¨åœ¨æ¡ä»¶èµ‹å€¼è¯­å¥ä¸­ï¼Œè€Œä¸è¦ä½œä¸ºifè¯­å¥çš„æ›¿ä»£å“ã€‚ 1234// å¥½çš„æ–¹æ³•var value = condition ? value1 : value2;// ä¸å¥½çš„æ–¹æ³•var condition ? doSomething() : doSomethingElse(); 15.è¯­å¥ 15.1 ç®€å•è¯­å¥ æ¯ä¸€è¡Œæœ€å¤šåªåŒ…å«ä¸€æ¡è¯­å¥ã€‚æ‰€æœ‰ç®€å•è¯­å¥éƒ½åº”è¯¥ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“æŸã€‚ 12345// å¥½çš„å†™æ³•count++;a = b;// å¥½çš„å†™æ³•count++; a = b; 15.2 è¿”å›è¯­å¥è¿”å›è¯­å¥å½“è¿”å›ä¸€ä¸ªå€¼çš„æ—¶å€™ä¸åº”è¯¥ä½¿ç”¨åœ†æ‹¬å·åŒ…è£¹ï¼Œé™¤éåœ¨æŸäº›æƒ…å†µä¸‹è¿™ä¹ˆåšå¯ä»¥è®©è¿”å›å€¼æ›´å®¹æ˜“ç†è§£ã€‚ä¾‹å¦‚ï¼š 123return;return collection.size();return (size &gt; 0 ? size : defaultSize); 15.3 å¤åˆè¯­å¥å¤åˆè¯­å¥æ˜¯å¤§æ‹¬å·æ‹¬èµ·æ¥çš„è¯­å¥åˆ—è¡¨ã€‚ æ‹¬èµ·æ¥çš„è¯­å¥åº”å½“è¾ƒå¤åˆè¯­å¥å¤šç¼©è¿›ä¸€ä¸ªå±‚çº§ã€‚å¼€å§‹çš„å¤§æ‹¬å·åº”å½“åœ¨å¤åˆè¯­å¥æ‰€åœ¨è¡Œçš„æœ«å°¾ï¼›ç»“æŸçš„å¤§æ‹¬å·åº”å½“ç‹¬å ä¸€è¡Œä¸”åŒå¤åˆè¯­å¥çš„å¼€å§‹ä¿æŒåŒæ ·çš„ç¼©è¿›ã€‚å½“è¯­å¥æ˜¯æ§åˆ¶ç»“æ„çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œè¯¸å¦‚ifæˆ–è€…forè¯­å¥ï¼Œæ‰€æœ‰è¯­å¥éƒ½éœ€è¦ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¹ŸåŒ…æ‹¬å•ä¸ªå•è¯ã€‚zhè¿™ä¸ªçº¦å®šä½¿å¾—æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°æ·»åŠ è¯­å¥è€Œä¸ç”¨æ‹…å¿ƒå¿˜è®°åŠ æ‹¬å·è€Œå¼•èµ·bugã€‚åƒifä¸€æ ·çš„è¯­å¥å¼€å§‹çš„å…³é”®å­—ï¼Œå…¶ååº”è¯¥ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ï¼Œèµ·å§‹å¤§æ‹¬å·åº”å½“åœ¨ç©ºæ ¼ä¹‹åã€‚15.4 if è¯­å¥ ifè¯­å¥åº”å½“æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚ 123456789101112131415if (condition) &#123; statments&#125;if (condition) &#123; statments&#125; else &#123; statments&#125;if (condition) &#123; statments&#125; else if (condition) &#123; statments&#125; else &#123; statments&#125; ç»ä¸å…è®¸åœ¨ifè¯­å¥ä¸­çœç•¥èŠ±æ‹¬å· 123456789101112131415// å¥½çš„å†™æ³•if (condition) &#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šä¸ä¸”å½“çš„ç©ºæ ¼if(condition)&#123; doSomething();&#125;// ä¸å¥½çš„å†™æ³•ï¼šé—æ¼èŠ±æ‹¬å·if (condition) doSomething();// ä¸å¥½çš„å†™æ³•ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œif (condition) &#123; doSomething(); &#125;// ä¸å¥½çš„å†™æ³•ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸€è¡Œä¸”æ²¡æœ‰èŠ±æ‹¬å·if (condition) doSomething(); 15.5 for è¯­å¥ forç±»å‹çš„è¯­å¥åº”æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚ 12345678910111213141516171819202122for (initialization; condition; update) &#123; statments&#125;for (variable in object) &#123; statments&#125;forè¯­å¥çš„åˆå§‹åŒ–ä¸åº”å½“æœ‰å˜é‡å£°æ˜ã€‚// å¥½çš„å†™æ³•var i, len;for (i = 0, len = 10; i &lt; len; i++) &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šåˆå§‹åŒ–æ—¶å€™å£°æ˜å˜é‡for (var i = 0, len = 10; i &lt; len; i++) &#123; // ä»£ç &#125;// ä¸å¥½çš„å†™æ³•ï¼šåˆå§‹åŒ–çš„æ—¶å€™å£°æ˜å˜é‡for (var prop in object) &#123; // code&#125; å½“ä½¿ç”¨for-inè¯­å¥æ—¶ï¼Œè®°å¾—ä½¿ç”¨hasOwnProperty()è¿›è¡ŒåŒé‡æ£€æŸ¥æ¥è¿‡æ»¤å‡ºå¯¹è±¡çš„æˆå‘˜ã€‚ 15.6 while è¯­å¥ whileç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢çš„æ ¼å¼ã€‚ 123while (condition) &#123; statments&#125; 15.7 do è¯­å¥ doç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢æ ¼å¼ã€‚ 123do &#123; statments&#125; while (condition); 15.8 switch è¯­å¥ switchç±»çš„è¯­å¥åº”å½“æ˜¯ä¸‹é¢æ ¼å¼ã€‚ 123456switch (expression) &#123; case expression: statments defaul: statments&#125; switchä¸‹çš„æ¯ä¸€ä¸ªcaseéƒ½åº”å½“ä¿æŒä¸€ä¸ªç¼©è¿›ã€‚é™¤ç¬¬ä¸€ä¸ªä¹‹å¤–åŒ…æ‹¬defaultåœ¨å†…çš„æ¯ä¸€ä¸ªcaseéƒ½åº”å½“åœ¨ä¹‹å‰ä¿æŒä¸€ä¸ªç©ºè¡Œã€‚æ¯ä¸€ä¸ªè¯­å¥ï¼ˆé™¤äº†defaultï¼‰éƒ½åº”å½“ä»¥breakã€returnã€throwç»“å°¾ï¼Œæˆ–è€…ç”¨ä¸€è¡Œæ³¨é‡Šè¡¨ç¤ºè·³è¿‡ã€‚ 123456789101112// å¥½çš„å†™æ³•switch (value) &#123; case 1: /* falls through */ case 2: doSomething(); break; case 3: return true; defaul: throw new Error(&#x27;This should not happen&#x27;);&#125; å¦‚æœä¸€ä¸ªswitchè¯­å¥ä¸åŒ…å«defaultæƒ…å†µï¼Œåº”åº”ç”¨ä¸€è¡Œæ³¨é‡Šä»£æ›¿ã€‚ 1234567891011// å¥½çš„å†™æ³•switch (value) &#123; case 1: /* falls through */ case 2: doSomething(); break; case 3: return true; // æ²¡æœ‰default&#125; 15.9 ty è¯­å¥ tryç±»è¯­å¥åº”å½“æ ¼å¼å¦‚ä¸‹ã€‚ 123456789101112try &#123; statments&#125; catch (variable) &#123; statments&#125;try &#123; statments&#125; catch (variable) &#123; statments&#125; finally &#123; statments&#125; 16.ç•™ç™½åœ¨é€»è¾‘ç›¸å…³çš„ä»£ç ä¹‹é—´æ·»åŠ ç©ºè¡Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚ ä¸¤è¡Œç©ºè¡Œä»…é™åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚ åœ¨ä¸åŒçš„æºç æ–‡ä»¶ä¹‹é—´ã€‚åœ¨ç±»å’Œæ¥å£å®šä¹‰ä¹‹é—´ã€‚å•è¡Œç©ºè¡Œä»…é™åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚ æ–¹æ³•ä¹‹é—´ã€‚æ–¹æ³•ä¸­å±€éƒ¨å˜é‡å’Œç¬¬ä¸€è¡Œè¯­å¥ä¹‹é—´ã€‚å¤šè¡Œæˆ–è€…å•è¡Œæ³¨é‡Šä¹‹å‰ã€‚æ–¹æ³•ä¸­é€»è¾‘ä»£ç å—ä¹‹é—´ä»¥æå‡ä»£ç çš„å¯è¯»æ€§ã€‚ç©ºæ ¼åº”åœ¨å¦‚ä¸‹æƒ…å†µä¸­ä½¿ç”¨ã€‚ å…³é”®è¯åè·Ÿæ‹¬å·çš„æƒ…å†µåº”å½“ç”¨ç©ºæ ¼éš”å¼€ã€‚å‚æ•°åˆ—è¡¨ä¸­é€—å·ä¹‹ååº”å½“ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚æ‰€æœ‰çš„é™¤äº†ç‚¹ï¼ˆ.ï¼‰ä¹‹å¤–çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œå…¶æ“ä½œæ•°éƒ½åº”å½“ç”¨ç©ºæ ¼éš”å¼€ã€‚å•ç›®è¿ç®—ç¬¦çš„æ“ä½œæ•°ä¹‹é—´ä¸åº”è¯¥ç”¨ç©ºç™½éš”å¼€ï¼Œè¯¸å¦‚ä¸€å…ƒå‡å·ï¼Œé€’å¢ï¼ˆ++ï¼‰ï¼Œé€’å‡ï¼ˆâ€“ï¼‰ã€‚ forè¯­å¥ä¸­çš„è¡¨è¾¾æ–¹å¼ä¹‹é—´åº”å½“ç”¨ç©ºæ ¼å·éš”å¼€ã€‚ 17.éœ€è¦é¿å…çš„åˆ‡å‹¿ä½¿ç”¨åƒStringä¸€ç±»çš„åŸå§‹åŒ…è£…ç±»å‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚é¿å…ä½¿ç”¨evalï¼ˆï¼‰ã€‚é¿å…ä½¿ç”¨withè¯­å¥ã€‚è¯¥è¯­å¥åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ä¸å¤å­˜åœ¨ï¼Œå¯èƒ½åœ¨æœªæ¥çš„ECMAScriptæ ‡å‡†ä¸­ä¹Ÿå°†å»é™¤ã€‚æ•°å­—åº”å½“ä½¿ç”¨åè¿›åˆ¶æ•´æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ•´æ•°ï¼Œåå…­è¿›åˆ¶æ•´æ•°ï¼Œæˆ–è€…åè¿›åˆ¶æµ®ç‚¹å°æ•°ï¼Œå°æ•°ç‚¹å‰ååº”å½“è‡³å°‘ä¿ç•™ä¸€ä½æ•°å­—ã€‚é¿å…ä½¿ç”¨å…«è¿›åˆ¶ç›´æ¥é‡ã€‚ 18.ç¼–ç¨‹å®è·µä»€ä¹ˆæ˜¯æ¾è€¦åˆå¾ˆå¤šè®¾è®¡æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³ç´§è€¦åˆçš„é—®é¢˜ï¼Œå¦‚æœ2ä¸ªç»„ä»¶è€¦åˆå¤ªç´§ï¼Œåˆ™è¯´æ˜ä¸€ä¸ªç»„ä»¶å’Œå¦ä¸€ä¸ªç»„ä»¶çš„ç›´æ¥ç›¸å…³ï¼Œå¦‚æœä¿®æ”¹ä¸€ä¸ªç»„ä»¶çš„é€»è¾‘é‚£ä¹ˆå¦ä¸€ä¸ªç»„ä»¶é€»è¾‘ä¹Ÿéœ€ä¿®æ”¹ã€‚æ¯”å¦‚ä¸€ä¸ªåä¸ºerrorçš„cssç±»åï¼Œæœ‰ä¸€å¤©ä½ è§‰å¾—errorä¸åˆé€‚ï¼Œæƒ³æ¢warningé‚£ä¹ˆä¸ä»…è¦ä¿®æ”¹cssè¿˜è¦ä¿®æ”¹æ‰€æœ‰é¡µé¢classsNameçš„HTMLï¼Œã€‚å½“ä½ èƒ½å¤Ÿåšåˆ°ä¿®æ”¹ä¸ªä¸€ä¸ªç»„ä»¶ä¸éœ€è¦æ›´æ”¹å…¶ä»–ç»„ä»¶æ—¶å€™ï¼Œåšåˆ°äº†æ¾è€¦åˆã€‚ å°†javascriptä»cssä¸­æŠ½ç¦»12345//ä¸å¥½çš„å†™æ³•.box&#123; width:expression&#123;document.body.offsetWidth+&quot;px&quot;&#125;&#125; å°†cssä»javascriptä¸­æŠ½ç¦» 12345678910111213141516171819//ä¸å¥½çš„å†™æ³•element.style.color=&quot;red&quot;element.style.left=&quot;10px&quot;//å¥½çš„å†™æ³•cssä¸­åŠ å…¥.reveal&#123; color:red; left:10px; top:110px;&#125;element.className += &quot; reveal&quot;element.classList.add(&quot;reveal&quot;) å°†javascriptä»htmlä¸­æŠ½ç¦»12345678910//ä¸å¥½çš„å†™æ³•&lt;button onclick=&quot;doSomething()&quot; id=&quot;action-btn&quot;&gt;&lt;/button&gt;//å¥½çš„å†™æ³•function doSomething()&#123; //........&#125;var btn = ....btn.addEventListenter(&quot;click&quot;,doSomething,false); 19.äº‹ä»¶å¤„ç†20.é¿å…ç©ºæ¯”è¾ƒæœ€åä»£ç ä¼˜åŒ–çš„å»ºè®® SOLIDåŸåˆ™å°½é‡ä¿è¯SOLIDåŸåˆ™çš„å‰æä¸‹ï¼Œç”¨æœ€ç®€æ˜“çš„ä»£ç æ»¡è¶³éœ€æ±‚ï¼ˆå³ä¸è¦è€ƒè™‘å¤ªå¤šæœªæ¥çš„å¯èƒ½æ€§ï¼‰ æ–°éœ€æ±‚éœ€è¦ä¿®æ”¹ç°å­˜ä»£ç çš„æ—¶å€™ï¼Œå°½å¯èƒ½ä¿è¯SOLIDåŸåˆ™éœ€æ±‚ä¸è¶³ä»¥åšå‡ºç†æƒ³è®¾è®¡çš„æ—¶å€™ï¼Œ å…è®¸å­˜åœ¨è¿åSOLIDçš„ä»£ç å°½é‡ä¿è¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ä»£ç å¯è¯»æ€§é«˜äºä¸€åˆ‡ï¼Œ å°½é‡å†™è‡ªæ³¨é‡Šä»£ç ï¼ˆå³ä¸éœ€è¦é¢å¤–æ³¨é‡Šï¼Œé€šè¿‡å˜é‡/æ–¹æ³•å‘½åå°±èƒ½è¯»æ‡‚ï¼‰ ReSharper è½¬è½½è‡ªhttp://forsigner.com/2013/09/01/javascript-style-guide/","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://mariogogogo.github.io/tags/%E8%A7%84%E8%8C%83/"}]},{"title":"æ‰‹å†™ä¸€ä¸ªNewæ“ä½œç¬¦","slug":"æ‰‹å†™ä¸€ä¸ªNewæ“ä½œç¬¦","date":"2017-12-12T16:00:00.000Z","updated":"2020-09-16T09:07:13.000Z","comments":true,"path":"2017/12/13/æ‰‹å†™ä¸€ä¸ªNewæ“ä½œç¬¦/","link":"","permalink":"http://mariogogogo.github.io/2017/12/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AANew%E6%93%8D%E4%BD%9C%E7%AC%A6/","excerpt":"å®ç°ä¸€ä¸ªnew","text":"å®ç°ä¸€ä¸ªnew å®ƒåˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ å®ƒä¼šè¢«æ‰§è¡Œ [[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯ protoï¼‰é“¾æ¥ã€‚ å®ƒä½¿ thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ã€‚ é€šè¿‡ newåˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢« [[Prototype]]é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„ prototypeå¯¹è±¡ä¸Šã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹ Object(åŒ…å« Functoin,Array,Date,RegExg,Error)ï¼Œé‚£ä¹ˆ newè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨å°†è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ã€‚ ä»£ç 1234567891011121314function newF() &#123; // åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ let obj = &#123;&#125;; // å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±æ˜¯æˆ‘ä»¬å°†ä¼šä¼ å…¥çš„æ„é€ å‡½æ•°ï¼Œæ¯”å¦‚åœ¨è°ƒç”¨new(P)çš„æ—¶å€™ï¼ŒConstructorå°±æ˜¯Pæœ¬èº« // argumentsä¼šè¢«shiftå»é™¤ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå‰©ä½™çš„å°±æ˜¯æ„é€ å™¨Pçš„å‚æ•° let Constructor = [].shift.call(arguments); // å°†objçš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œæ­¤æ—¶objå¯ä»¥è®¿é—®æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§ obj.__proto__ = Constructor.prototype; // æ”¹å˜æ„é€ å‡½æ•°çš„thisçš„æŒ‡å‘ï¼Œä½¿å…¶æŒ‡å‘objï¼Œ æ­¤æ—¶objä¹Ÿå¯ä»¥è®¿é—®æ„é€ å‡½æ•°ä¸­çš„å±æ€§äº† let result = Constructor.apply(obj, arguments); // ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡ è¿”å›çš„å€¼æ˜¯ä»€ä¹ˆå°±returnä»€ä¹ˆ return typeof result === &#x27;object&#x27; ? result : obj &#125; ä½¿ç”¨1234567function A(name,a,b)&#123; this.name = name; console.log(this.name) console.log(a+b) &#125; console.log(newF(A,&#x27;å°ç±³&#x27;,1,2)) çŸ¥è¯†ç‚¹å¦‚ä½•ç»‘å®šthis, callã€applyä½¿ç”¨æ¯”å¦‚è¿™å¥ï¼š [].shift.call(arguments)çš„æ„æ€æ˜¯ï¼š[1,2,3,4] ====&gt; shift ==&gt; [2,3,4] å…¶ä¸­ Constructorå°±æ˜¯1, argumentsä½¿ç”¨è€Œåˆ°äº†è¿™å¥ Constructor.apply(obj, arguments) ä¸­ argumentså°±æ˜¯[2,3,4]ï¼Œæ„æ€æ˜¯objçš„thisæŒ‡å‘å…¨éƒ¨æŒ‡å‘returnæ–°å®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠå‚æ•°ä¼ å…¥ åŸå‹é“¾åŸºç¡€ æ‰‹å†™ç³»åˆ— å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ å®ç°ä¸€ä¸ªJSON.stringify å®ç°ä¸€ä¸ªJSON.parse å®ç°ä¸€ä¸ªcallæˆ– apply å®ç°ä¸€ä¸ªFunction.bind å®ç°ä¸€ä¸ªç»§æ‰¿ å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ– æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ) æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling) æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´ å®ç°ä¸€ä¸ªinstanceOf","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"ã€ç½®é¡¶ã€‘Webå‰ç«¯å¼€å‘è§„èŒƒæ‰‹å†Œ","slug":"Webå‰ç«¯å¼€å‘è§„èŒƒæ‰‹å†Œ","date":"2017-12-11T16:00:00.000Z","updated":"2020-09-16T09:07:57.000Z","comments":true,"path":"2017/12/12/Webå‰ç«¯å¼€å‘è§„èŒƒæ‰‹å†Œ/","link":"","permalink":"http://mariogogogo.github.io/2017/12/12/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E6%89%8B%E5%86%8C/","excerpt":"ä¸ºæé«˜å›¢é˜Ÿåä½œæ•ˆç‡, ä¾¿äºåå°äººå‘˜æ·»åŠ åŠŸèƒ½åŠå‰ç«¯åæœŸä¼˜åŒ–ç»´æŠ¤, è¾“å‡ºé«˜è´¨é‡çš„æ–‡æ¡£, ç‰¹åˆ¶è®¢æ­¤æ–‡æ¡£. æœ¬è§„èŒƒæ–‡æ¡£ä¸€ç»ç¡®è®¤, å‰ç«¯å¼€å‘äººå‘˜å¿…é¡»æŒ‰æœ¬æ–‡æ¡£è§„èŒƒè¿›è¡Œå‰å°é¡µé¢å¼€å‘. æœ¬æ–‡æ¡£å¦‚æœ‰ä¸å¯¹æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹è¯·åŠæ—¶æå‡º, ç»è®¨è®ºå†³å®šåå¯ä»¥æ›´æ”¹æ­¤æ–‡æ¡£.","text":"ä¸ºæé«˜å›¢é˜Ÿåä½œæ•ˆç‡, ä¾¿äºåå°äººå‘˜æ·»åŠ åŠŸèƒ½åŠå‰ç«¯åæœŸä¼˜åŒ–ç»´æŠ¤, è¾“å‡ºé«˜è´¨é‡çš„æ–‡æ¡£, ç‰¹åˆ¶è®¢æ­¤æ–‡æ¡£. æœ¬è§„èŒƒæ–‡æ¡£ä¸€ç»ç¡®è®¤, å‰ç«¯å¼€å‘äººå‘˜å¿…é¡»æŒ‰æœ¬æ–‡æ¡£è§„èŒƒè¿›è¡Œå‰å°é¡µé¢å¼€å‘. æœ¬æ–‡æ¡£å¦‚æœ‰ä¸å¯¹æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹è¯·åŠæ—¶æå‡º, ç»è®¨è®ºå†³å®šåå¯ä»¥æ›´æ”¹æ­¤æ–‡æ¡£. ä¸€ã€è§„èŒƒç›®çš„1.1 æ¦‚è¿° ä¸ºæé«˜å›¢é˜Ÿåä½œæ•ˆç‡, ä¾¿äºåå°äººå‘˜æ·»åŠ åŠŸèƒ½åŠå‰ç«¯åæœŸä¼˜åŒ–ç»´æŠ¤, è¾“å‡ºé«˜è´¨é‡çš„æ–‡æ¡£, ç‰¹åˆ¶è®¢æ­¤æ–‡æ¡£. æœ¬è§„èŒƒæ–‡æ¡£ä¸€ç»ç¡®è®¤, å‰ç«¯å¼€å‘äººå‘˜å¿…é¡»æŒ‰æœ¬æ–‡æ¡£è§„èŒƒè¿›è¡Œå‰å°é¡µé¢å¼€å‘. æœ¬æ–‡æ¡£å¦‚æœ‰ä¸å¯¹æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹è¯·åŠæ—¶æå‡º, ç»è®¨è®ºå†³å®šåå¯ä»¥æ›´æ”¹æ­¤æ–‡æ¡£. äºŒã€æ–‡ä»¶è§„èŒƒ 2.1 æ–‡ä»¶å‘½åè§„åˆ™ æ–‡ä»¶åç§°ç»Ÿä¸€ç”¨å°å†™çš„è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿çš„ç»„åˆï¼Œå…¶ä¸­ä¸å¾—åŒ…å«æ±‰å­—ã€ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦ï¼›å‘½ååŸåˆ™çš„æŒ‡å¯¼æ€æƒ³ä¸€æ˜¯ä½¿å¾—ä½ è‡ªå·±å’Œå·¥ä½œç»„çš„æ¯ä¸€ä¸ªæˆå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„ç†è§£æ¯ä¸€ä¸ªæ–‡ä»¶çš„æ„ä¹‰ï¼ŒäºŒæ˜¯å½“æˆ‘ä»¬åœ¨æ–‡ä»¶å¤¹ä¸­ä½¿ç”¨â€œæŒ‰åç§°æ’ä¾‹â€çš„å‘½ä»¤æ—¶ï¼ŒåŒä¸€ç§å¤§ç±»çš„æ–‡ä»¶èƒ½å¤Ÿæ’åˆ—åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿æˆ‘ä»¬æŸ¥æ‰¾ã€ä¿®æ”¹ã€æ›¿æ¢ã€è®¡ç®—è´Ÿè½½é‡ç­‰ç­‰æ“ä½œã€‚ a. HTMLçš„å‘½ååŸåˆ™å¼•æ–‡ä»¶ç»Ÿä¸€ä½¿ç”¨index.htm index.html index.aspæ–‡ä»¶åï¼ˆå°å†™ï¼‰å„å­é¡µå‘½åçš„åŸåˆ™é¦–å…ˆåº”è¯¥ä»¥æ ç›®åçš„è‹±è¯­ç¿»è¯‘å–å•ä¸€å•è¯ä¸ºåç§°ã€‚ä¾‹å¦‚ï¼šå…³äºæˆ‘ä»¬ \\ aboutusä¿¡æ¯åé¦ˆ \\ feedbackäº§ å“ \\ productå¦‚æœæ ç›®åç§°å¤šè€Œå¤æ‚å¹¶ä¸å¥½ä»¥è‹±æ–‡å•è¯å‘½åï¼Œåˆ™ç»Ÿä¸€ä½¿ç”¨è¯¥æ ç›®åç§°æ‹¼éŸ³æˆ–æ‹¼éŸ³çš„é¦–å­—æ¯è¡¨ç¤ºï¼›æ¯ä¸€ä¸ªç›®å½•ä¸­åº”è¯¥åŒ…å«ä¸€ä¸ªç¼ºçœçš„html æ–‡ä»¶ï¼Œæ–‡ä»¶åç»Ÿä¸€ç”¨index.htm index.html index.aspï¼› b. å›¾ç‰‡çš„å‘½ååŸåˆ™å›¾ç‰‡çš„åç§°åˆ†ä¸ºå¤´å°¾ä¸¤éƒ¨åˆ†ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€ï¼Œå¤´éƒ¨åˆ†è¡¨ç¤ºæ­¤å›¾ç‰‡çš„å¤§ç±»æ€§è´¨ä¾‹å¦‚ï¼šå¹¿å‘Šã€æ ‡å¿—ã€èœå•ã€æŒ‰é’®ç­‰ç­‰ã€‚æ”¾ç½®åœ¨é¡µé¢é¡¶éƒ¨çš„å¹¿å‘Šã€è£…é¥°å›¾æ¡ˆç­‰é•¿æ–¹å½¢çš„å›¾ç‰‡å–åï¼š banneræ ‡å¿—æ€§çš„å›¾ç‰‡å–åä¸ºï¼š logoåœ¨é¡µé¢ä¸Šä½ç½®ä¸å›ºå®šå¹¶ä¸”å¸¦æœ‰é“¾æ¥çš„å°å›¾ç‰‡æˆ‘ä»¬å–åä¸º buttonåœ¨é¡µé¢ä¸ŠæŸä¸€ä¸ªä½ç½®è¿ç»­å‡ºç°ï¼Œæ€§è´¨ç›¸åŒçš„é“¾æ¥æ ç›®çš„å›¾ç‰‡æˆ‘ä»¬å–åï¼š menuè£…é¥°ç”¨çš„ç…§ç‰‡æˆ‘ä»¬å–åï¼š picä¸å¸¦é“¾æ¥è¡¨ç¤ºæ ‡é¢˜çš„å›¾ç‰‡æˆ‘ä»¬å–åï¼š titleèŒƒä¾‹ï¼šbanner_sohu.gif banner_sina.gif menu_aboutus.gif menu_job.gif title_news.gif logo_police.gif logo_national.gif pic_people.jpgé¼ æ ‡æ„Ÿåº”æ•ˆæœå›¾ç‰‡å‘½åè§„èŒƒä¸ºâ€å›¾ç‰‡å+_+on/offâ€ã€‚ä¾‹å¦‚ï¼šmenu1_on.gif menu1_off.gif c. javascriptçš„å‘½ååŸåˆ™ä¾‹å¦‚ï¼šå¹¿å‘Šæ¡çš„javascriptæ–‡ä»¶åä¸º ad.js å¼¹å‡ºçª—å£çš„javascriptæ–‡ä»¶åä¸º pop.js d. åŠ¨æ€è¯­è¨€æ–‡ä»¶å‘½ååŸåˆ™ä»¥æ€§è´¨æè¿°ï¼Œæè¿°å¯ä»¥æœ‰å¤šä¸ªå•è¯ï¼Œç”¨â€œâ€éš”å¼€ï¼Œæ€§è´¨ä¸€èˆ¬æ˜¯è¯¥é¡µé¢å¾—æ¦‚è¦ã€‚èŒƒä¾‹ï¼šregister_form.asp register_post.asp topic_lock.asp 2.2 æ–‡ä»¶å­˜æ”¾ä½ç½®è§„èŒƒ _Root cn å­˜æ”¾ä¸­æ–‡HTMLæ–‡ä»¶ en å­˜æ”¾è‹±æ–‡HTMLæ–‡ä»¶ flash å­˜æ”¾Flashæ–‡ä»¶ images å­˜æ”¾å›¾ç‰‡æ–‡ä»¶ imagestudio å­˜æ”¾PSDæºæ–‡ä»¶ flashstudio å­˜æ”¾flashæºæ–‡ä»¶ inc å­˜æ”¾includeæ–‡ä»¶ library å­˜æ”¾DWåº“æ–‡ä»¶ media å­˜æ”¾å¤šåª’ä½“æ–‡ä»¶ project å­˜æ”¾å·¥ç¨‹é¡¹ç›®èµ„æ–™ temp å­˜æ”¾å®¢æˆ·åŸå§‹èµ„æ–™ js å­˜æ”¾JavaScriptè„šæœ¬ css å­˜æ”¾CSSæ–‡ä»¶ 2.3 CSS ä¹¦å†™è§„èŒƒ åŸºæœ¬åŸåˆ™ï¼š CSSæ ·å¼å¯ç»†åˆ†ä¸º3ç±»ï¼šè‡ªå®šä¹‰æ ·å¼ã€é‡æ–°å®šä¹‰HTMLæ ·å¼ã€é“¾æ¥çŠ¶æ€æ ·å¼ã€‚ æ ·å¼ä¸ºè®¾è®¡å¸ˆè‡ªå®šä¹‰çš„æ–° CSS æ ·å¼ï¼Œå½±å“è¢«ä½¿ç”¨æœ¬æ ·å¼çš„åŒºåŸŸï¼Œç”¨äºå®Œæˆç½‘é¡µä¸­å±€éƒ¨çš„æ ·å¼è®¾å®šã€‚æ ·å¼å â€œ.â€+â€œç›¸åº”æ ·å¼æ•ˆæœæè¿°çš„å•è¯æˆ–ç¼©å†™â€ä¾‹ï¼šâ€œ .shadow â€æ–‡å­—æ ·å¼æ ·å¼åâ€œ.noâ€+â€œå­—å·â€+â€œè¡Œè·â€+â€œé¢œè‰²ç¼©å†™â€ä¾‹ï¼šâ€œ .no12 â€ ã€â€œ .no12-24 â€ ä¹‰HTMLæ ·å¼ä¸ºè®¾è®¡å¸ˆé‡æ–°å®šä¹‰å·²æœ‰çš„HTMLæ ‡ç­¾æ ·å¼ï¼Œå½±å“å…¨éƒ¨çš„è¢«è®¾å®šæ ‡ç­¾æ ·å¼ï¼Œç”¨äºç»Ÿä¸€ç½‘é¡µä¸­æŸä¸€æ ‡ç­¾çš„æ ·å¼å®šä¹‰ã€‚æ ·å¼åâ€œHTMLæ ‡ç­¾â€ä¾‹ï¼šhr { border: 1px dotted #333333 } æ€æ ·å¼ä¸ºè®¾è®¡å¸ˆå¯¹é“¾æ¥ä¸åŒçŠ¶æ€è®¾å®šç‰¹æ®Šæ ·å¼ï¼Œå½±å“è¢«ä½¿ç”¨æœ¬æ ·å¼åŒºåŸŸä¸­çš„é“¾æ¥ã€‚è¯¥æ ·å¼å†™æ³•æœ‰2ç§ï¼š a.nav:link nav.a:link ç¬¬ä¸€ç§åªèƒ½ä¿®é¥°æ ‡ç­¾ä¸­ï¼›ç¬¬äºŒç§å¯ä»¥ä¿®é¥°æ‰€æœ‰åŒ…å«æœ‰æ ‡ç­¾çš„å…¶ä»–æ ‡ç­¾ã€‚é¡µé¢å†…çš„æ ·å¼åŠ è½½å¿…é¡»ç”¨é“¾æ¥æ–¹å¼ æ³¨æ„ç»†åˆ™ï¼š åä½œå¼€å‘åŠåˆ†å·¥: iä¼šæ ¹æ®å„ä¸ªæ¨¡å—, åŒæ—¶æ ¹æ®é¡µé¢ç›¸ä¼¼ç¨‹åº, äº‹å…ˆå†™å¥½å¤§ä½“æ¡†æ¶æ–‡ä»¶, åˆ†é…ç»™å‰ç«¯äººå‘˜å®ç°å†…éƒ¨ç»“æ„&amp;è¡¨ç°&amp;è¡Œä¸º; å…±ç”¨cssæ–‡ä»¶base.cssç”±iä¹¦å†™, åä½œå¼€å‘è¿‡ç¨‹ä¸­, æ¯ä¸ªé¡µé¢è¯·åŠ¡å¿…éƒ½è¦å¼•å…¥, æ­¤æ–‡ä»¶åŒ…å«resetåŠå¤´éƒ¨åº•éƒ¨æ ·å¼, æ­¤æ–‡ä»¶ä¸å¯éšæ„ä¿®æ”¹; classä¸idçš„ä½¿ç”¨: idæ˜¯å”¯ä¸€çš„å¹¶æ˜¯çˆ¶çº§çš„, classæ˜¯å¯ä»¥é‡å¤çš„å¹¶æ˜¯å­çº§çš„, æ‰€ä»¥idä»…ä½¿ç”¨åœ¨å¤§çš„æ¨¡å—ä¸Š, classå¯ç”¨åœ¨é‡å¤ä½¿ç”¨ç‡é«˜åŠå­çº§ä¸­; idåŸåˆ™ä¸Šéƒ½æ˜¯ç”±æˆ‘åˆ†å‘æ¡†æ¶æ–‡ä»¶æ—¶å‘½åçš„, ä¸ºJavaScripté¢„ç•™é’©å­çš„é™¤å¤–; ä¸ºJavaScripté¢„ç•™é’©å­çš„å‘½å, è¯·ä»¥ js_ èµ·å§‹, æ¯”å¦‚: js_hide, js_show; classä¸idå‘½å: å¤§çš„æ¡†æ¶å‘½åæ¯”å¦‚header/footer/wrapper/left/rightä¹‹ç±»çš„åœ¨2ä¸­ç”±iç»Ÿä¸€å‘½å.å…¶ä»–æ ·å¼åç§°ç”± å°å†™è‹±æ–‡ &amp; æ•°å­— &amp; _ æ¥ç»„åˆå‘½å, å¦‚i_comment, fontred, width200; é¿å…ä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³, å°½é‡ä½¿ç”¨ç®€æ˜“çš„å•è¯ç»„åˆ; æ€»ä¹‹, å‘½åè¦è¯­ä¹‰åŒ–, ç®€æ˜åŒ–. è§„é¿classä¸idå‘½å(æ­¤æ¡é‡è¦, è‹¥æœ‰ä¸æ˜ç™½è¯·åŠæ—¶ä¸iæ²Ÿé€š):a, é€šè¿‡ä»å±å†™æ³•è§„é¿, ç¤ºä¾‹è§d;b, å–çˆ¶çº§å…ƒç´ id/classå‘½åéƒ¨åˆ†å‘½å, ç¤ºä¾‹è§d;c, é‡å¤ä½¿ç”¨ç‡é«˜çš„å‘½å, è¯·ä»¥è‡ªå·±ä»£å·åŠ ä¸‹åˆ’çº¿èµ·å§‹, æ¯”å¦‚i_clear;d, a,bä¸¤æ¡, é€‚ç”¨äºåœ¨2ä¸­å·²å»ºå¥½æ¡†æ¶çš„é¡µé¢, å¦‚, è¦åœ¨2ä¸­å·²å»ºå¥½æ¡†æ¶çš„é¡µé¢ä»£ç ä¸­åŠ å…¥æ–°çš„divå…ƒç´ ,æŒ‰aå‘½åæ³•åˆ™: â€¦,æ ·å¼å†™æ³•: #mainnav .firstnav{â€¦â€¦.}æŒ‰bå‘½åæ³•åˆ™: â€¦,æ ·å¼å†™æ³•: .main_firstnav{â€¦â€¦.} csså±æ€§ä¹¦å†™é¡ºåº, å»ºè®®éµå¾ª å¸ƒå±€å®šä½å±æ€§â€“&gt;è‡ªèº«å±æ€§â€“&gt;æ–‡æœ¬å±æ€§â€“&gt;å…¶ä»–å±æ€§. æ­¤æ¡å¯æ ¹æ®è‡ªèº«ä¹ æƒ¯ä¹¦å†™, ä½†å°½é‡ä¿è¯åŒç±»å±æ€§å†™åœ¨ä¸€èµ·. å±æ€§åˆ—ä¸¾: å¸ƒå±€å®šä½å±æ€§ä¸»è¦åŒ…æ‹¬: marginã€paddingã€floatï¼ˆåŒ…æ‹¬clearï¼‰ã€positionï¼ˆç›¸åº”çš„ top,right,bottom,leftï¼‰ã€displayã€visibilityã€overflowç­‰ï¼›è‡ªèº«å±æ€§ä¸»è¦åŒ…æ‹¬: width &amp; height &amp; background &amp; border; æ–‡æœ¬å±æ€§ä¸»è¦åŒ…æ‹¬ï¼šfontã€colorã€text-alignã€text-decorationã€text-indentç­‰ï¼›å…¶ä»–å±æ€§åŒ…æ‹¬: list-style(åˆ—è¡¨æ ·å¼)ã€vertical-vlignã€cursorã€z-index(å±‚å é¡ºåº) ã€zoomç­‰.æˆ‘æ‰€åˆ—å‡ºçš„è¿™äº›å±æ€§åªæ˜¯æœ€å¸¸ç”¨åˆ°çš„, å¹¶ä¸ä»£è¡¨å…¨éƒ¨; ä¹¦å†™ä»£ç å‰, è€ƒè™‘å¹¶æé«˜æ ·å¼é‡å¤ä½¿ç”¨ç‡; å……åˆ†åˆ©ç”¨htmlè‡ªèº«å±æ€§åŠæ ·å¼ç»§æ‰¿åŸç†å‡å°‘ä»£ç é‡, æ¯”å¦‚:è¿™å„¿æ˜¯æ ‡é¢˜åˆ—è¡¨2010-09-15å®šä¹‰ul.list li{position:relative} ul.list li span{position:absolute; right:0}å³å¯å®ç°æ—¥æœŸå±…å³æ˜¾ç¤º æ ·å¼è¡¨ä¸­ä¸­æ–‡å­—ä½“å, è¯·åŠ¡å¿…è½¬ç æˆunicodeç , ä»¥é¿å…ç¼–ç é”™è¯¯æ—¶ä¹±ç ; èƒŒæ™¯å›¾ç‰‡è¯·å°½å¯èƒ½ä½¿ç”¨spriteæŠ€æœ¯, å‡å°httpè¯·æ±‚, è€ƒè™‘åˆ°å¤šäººåä½œå¼€å‘, spriteæŒ‰æ¨¡å—åˆ¶ä½œ; ä½¿ç”¨tableæ ‡ç­¾æ—¶(å°½é‡é¿å…ä½¿ç”¨tableæ ‡ç­¾), è¯·ä¸è¦ç”¨width/ height/cellspacing/cellpaddingç­‰tableå±æ€§ç›´æ¥å®šä¹‰è¡¨ç°, åº”å°½å¯èƒ½çš„åˆ©ç”¨tableè‡ªèº«ç§æœ‰å±æ€§åˆ†ç¦»ç»“æ„ä¸è¡¨ç°, å¦‚thead,tr,th,td,tbody,tfoot,colgroup,scope; (cellspaingåŠcellpaddingçš„cssæ§åˆ¶æ–¹æ³•: table{border:0;margin:0;border-collapse:collapse;} table th, table td{padding:0;} , base.cssæ–‡ä»¶ä¸­æˆ‘ä¼šåˆå§‹åŒ–è¡¨æ ¼æ ·å¼) æœç»ä½¿ç”¨ å…¼å®¹ie8; ç”¨pngå›¾ç‰‡åšå›¾ç‰‡æ—¶, è¦æ±‚å›¾ç‰‡æ ¼å¼ä¸ºpng-8æ ¼å¼,è‹¥png-8å®åœ¨å½±å“å›¾ç‰‡è´¨é‡æˆ–å…¶ä¸­æœ‰åŠé€æ˜æ•ˆæœ, è¯·ä¸ºie6å•ç‹¬å®šä¹‰èƒŒæ™¯:background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=crop, src=â€™img/bg.pngâ€™); é¿å…å…¼å®¹æ€§å±æ€§çš„ä½¿ç”¨, æ¯”å¦‚text-shadow || css3çš„ç›¸å…³å±æ€§; å‡å°‘ä½¿ç”¨å½±å“æ€§èƒ½çš„å±æ€§, æ¯”å¦‚position:absolute || float ; å¿…é¡»ä¸ºå¤§åŒºå—æ ·å¼æ·»åŠ æ³¨é‡Š, å°åŒºå—é€‚é‡æ³¨é‡Š; ä»£ç ç¼©è¿›ä¸æ ¼å¼: å»ºè®®å•è¡Œä¹¦å†™, å¯æ ¹æ®è‡ªèº«ä¹ æƒ¯, åæœŸä¼˜åŒ–iä¼šç»Ÿä¸€å¤„ç†; å‘½åè§„åˆ™ï¼š å¤´ï¼šheader å†…å®¹ï¼šcontent/container å°¾ï¼šfooter å¯¼èˆªï¼šnav ä¾§æ ï¼šsidebar æ ç›®ï¼šcolumn é¡µé¢å¤–å›´æ§åˆ¶æ•´ä½“å¸ƒå±€å®½åº¦ï¼šwrapper å·¦å³ä¸­ï¼šleft right center ç™»å½•æ¡ï¼šloginbar æ ‡å¿—ï¼šlogo å¹¿å‘Šï¼šbanner é¡µé¢ä¸»ä½“ï¼šmain çƒ­ç‚¹ï¼šhot æ–°é—»ï¼šnews ä¸‹è½½ï¼šdownload å­å¯¼èˆªï¼šsubnav èœå•ï¼šmenu å­èœå•ï¼šsubmenu æœç´¢ï¼šsearch å‹æƒ…é“¾æ¥ï¼šfriendlink é¡µè„šï¼šfooter ç‰ˆæƒï¼šcopyright æ»šåŠ¨ï¼šscroll å†…å®¹ï¼šcontent æ ‡ç­¾é¡µï¼štab æ–‡ç« åˆ—è¡¨ï¼šlist æç¤ºä¿¡æ¯ï¼šmsg å°æŠ€å·§ï¼štips æ ç›®æ ‡é¢˜ï¼štitle åŠ å…¥ï¼šjoinus æŒ‡å—ï¼šguild æœåŠ¡ï¼šservice æ³¨å†Œï¼šregsiter çŠ¶æ€ï¼šstatus æŠ•ç¥¨ï¼švote åˆä½œä¼™ä¼´ï¼špartner(äºŒ)æ³¨é‡Šçš„å†™æ³•:/ Footer /å†…å®¹åŒº/ End Footer /(ä¸‰)idçš„å‘½å:(1)é¡µé¢ç»“æ„ å®¹å™¨: container é¡µå¤´ï¼šheader å†…å®¹ï¼šcontent/container é¡µé¢ä¸»ä½“ï¼šmain é¡µå°¾ï¼šfooter å¯¼èˆªï¼šnav ä¾§æ ï¼šsidebar æ ç›®ï¼šcolumn é¡µé¢å¤–å›´æ§åˆ¶æ•´ä½“å¸ƒå±€å®½åº¦ï¼šwrapper å·¦å³ä¸­ï¼šleft right center (2)å¯¼èˆª å¯¼èˆªï¼šnav ä¸»å¯¼èˆªï¼šmainbav å­å¯¼èˆªï¼šsubnav é¡¶å¯¼èˆªï¼štopnav è¾¹å¯¼èˆªï¼šsidebar å·¦å¯¼èˆªï¼šleftsidebar å³å¯¼èˆªï¼šrightsidebar èœå•ï¼šmenu å­èœå•ï¼šsubmenu æ ‡é¢˜: title æ‘˜è¦: summary (3)åŠŸèƒ½ æ ‡å¿—ï¼šlogo å¹¿å‘Šï¼šbanner ç™»é™†ï¼šlogin ç™»å½•æ¡ï¼šloginbar æ³¨å†Œï¼šregsiter æœç´¢ï¼šsearch åŠŸèƒ½åŒºï¼šshop æ ‡é¢˜ï¼štitle åŠ å…¥ï¼šjoinus çŠ¶æ€ï¼šstatus æŒ‰é’®ï¼šbtn æ»šåŠ¨ï¼šscroll æ ‡ç­¾é¡µï¼štab æ–‡ç« åˆ—è¡¨ï¼šlist æç¤ºä¿¡æ¯ï¼šmsg å½“å‰çš„: current å°æŠ€å·§ï¼štips å›¾æ ‡: icon æ³¨é‡Šï¼šnote æŒ‡å—ï¼šguild æœåŠ¡ï¼šservice çƒ­ç‚¹ï¼šhot æ–°é—»ï¼šnews ä¸‹è½½ï¼šdownload æŠ•ç¥¨ï¼švote åˆä½œä¼™ä¼´ï¼špartner å‹æƒ…é“¾æ¥ï¼šlink ç‰ˆæƒï¼šcopyright\\","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://mariogogogo.github.io/tags/%E8%A7%84%E8%8C%83/"}]},{"title":"æ‰‹å†™ä¸€ä¸ª compose å®ç°","slug":"æ‰‹å†™ä¸€ä¸ªcomposeçš„å®ç°","date":"2017-11-13T16:00:00.000Z","updated":"2020-09-16T09:07:13.000Z","comments":true,"path":"2017/11/14/æ‰‹å†™ä¸€ä¸ªcomposeçš„å®ç°/","link":"","permalink":"http://mariogogogo.github.io/2017/11/14/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAcompose%E7%9A%84%E5%AE%9E%E7%8E%B0/","excerpt":"åˆ›å»ºä¸€ä¸ªå‡½æ•°,é€šè¿‡æŠŠä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºè¾“å…¥å‘é€ç»™å¦ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼æŠŠä¸¤ä¸ªå‡½æ•°ç»„åˆèµ·æ¥","text":"åˆ›å»ºä¸€ä¸ªå‡½æ•°,é€šè¿‡æŠŠä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºè¾“å…¥å‘é€ç»™å¦ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼æŠŠä¸¤ä¸ªå‡½æ•°ç»„åˆèµ·æ¥ å®ç°æ¯”å¦‚æˆ‘ä»¬è¦å®ç°è¾“å…¥ jackï¼Œsmith æˆ‘ä»¬å°±è¦æ‰“å°å‡ºæ¥ï¼Œâ€˜HELLOï¼ŒJACK SMITHâ€™ ã€‚ 1234var greeting = (firstName, lastName) =&gt; &quot;hello, &quot; + firstName + &quot; &quot; + lastName;var toUpper = str =&gt; str.toUpperCase();var fn = compose(toUpper, greeting);console.log(fn(&quot;jack&quot;, &quot;smith&quot;)); è¿™å°±æ˜¯ compose å¤§è‡´çš„ä½¿ç”¨ï¼Œæ€»ç»“ä¸‹æ¥è¦æ³¨æ„çš„æœ‰ä»¥ä¸‹å‡ ç‚¹ compose çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•° å› ä¸ºé™¤äº†ç¬¬ä¸€ä¸ªå‡½æ•°çš„æ¥å—å‚æ•°ï¼Œå…¶ä»–å‡½æ•°çš„æ¥å—å‚æ•°éƒ½æ˜¯ä¸Šä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥åˆå§‹å‡½æ•°çš„å‚æ•°æ˜¯å¤šå…ƒçš„ï¼Œè€Œå…¶ä»–å‡½æ•°çš„æ¥å—å€¼æ˜¯ä¸€å…ƒçš„ compsoe å‡½æ•°å¯ä»¥æ¥å—ä»»æ„çš„å‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯å‡½æ•°ï¼Œä¸”æ‰§è¡Œæ–¹å‘æ˜¯è‡ªå³å‘å·¦çš„ï¼Œåˆå§‹å‡½æ•°ä¸€å®šæ”¾åˆ°å‚æ•°çš„æœ€å³é¢ compose çš„å¥½å¤„æˆ‘ç®€å•æä¸€ä¸‹ï¼Œå¦‚æœè¿˜æƒ³å†åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œä¸éœ€è¦ä¿®æ”¹ fnï¼Œåªéœ€è¦åœ¨æ‰§è¡Œä¸€ä¸ª composeï¼Œæ¯”å¦‚æˆ‘ä»¬å†æƒ³åŠ ä¸€ä¸ª trimï¼Œåªéœ€è¦è¿™æ ·åš 123var trim = str =&gt; str.trim();var newFn = compose(trim, fn);console.log(newFn(&quot;jack&quot;, &quot;smith&quot;)); ç»´æŠ¤å’Œæ‰©å±•éƒ½ååˆ†çš„æ–¹ä¾¿ã€‚ ç®€å•å®ç°ä¾‹å­åˆ†æå®Œäº†ï¼Œæœ¬ç€ç©¶å…¶æ ¹æœ¬çš„åŸåˆ™ï¼Œè¿˜æ˜¯è¦æ¢ç©¶ä¸ä¸€ä¸‹ compose åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„,javascript å‡½æ•°å¼ç¼–ç¨‹çš„ä¸¤å¤§ç±»åº“ï¼Œlodash.js å’Œ ramda.js æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…¶ä¸­ ramda.js å®ç°çš„è¿‡ç¨‹éå¸¸å‡½æ•°å¼ã€‚ æˆ‘çš„æ€è·¯æ˜¯:compose è¿”å›ä¸€ä¸ªå‡½æ•°,ä¸ºäº†è®°å½•é€’å½’çš„æ‰§è¡Œæƒ…å†µï¼Œè¿˜è¦è®°å½•å‚æ•°çš„é•¿åº¦ len,è¿˜è¦ç»™è¿”å›çš„å‡½æ•°æ·»åŠ ä¸€ä¸ªåå­— f1ã€‚ 123456var compose = function(...args) &#123; var len = args.length; return function f1() &#123; //.... &#125;;&#125;; å‡½æ•°ä½“é‡Œé¢è¦åšçš„äº‹æƒ…å°±æ˜¯ä¸æ–­çš„æ‰§è¡Œargsä¸­çš„å‡½æ•°ï¼Œå°†ä¸Šä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœä½œä¸ºä¸‹ä¸€ä¸ªæ‰§è¡Œå‡½æ•°çš„è¾“å…¥å‚æ•°,éœ€è¦ä¸€ä¸ªæ¸¸æ ‡countæ¥è®°å½• args å‡½æ•°åˆ—è¡¨çš„æ‰§è¡Œæƒ…å†µ 12345678910111213141516171819202122232425var diy_compose = function(...args) &#123; var len = args.length; var count = len - 1; var result; return function f1(...args1) &#123; console.log(args1); // [0,100], [result:&#x27;100&#x27;] result = args[count].apply(this, args1); //åˆ¤æ–­å¦‚æœæ˜¯æœ€åä¸€ä¸ªåˆ™ç›´æ¥é€€å‡º if (count &lt;= 0) &#123; return result; &#125; else &#123; count--; //é€’å½’æ‰§è¡Œf1 return f1.call(null, result); &#125; &#125;;&#125;;const greeting = (x, y) =&gt; &quot;result : &quot; + (x + y);const toUpper = str =&gt; str.toUpperCase();let c = diy_compose(toUpper, greeting);console.log(c(0, 100)); //RESULT : 100 æ³¨æ„compose å‡½æ•°é¦–å…ˆå›æ‰§è¡Œ b,å¹¶å°† b çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™ a,è¯¥å‡½æ•°è°ƒç”¨çš„æ–¹å‘æ˜¯ä»å³å¾€å·¦(ä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œ b,å†æ‰§è¡Œ a) lodash å®ç°lodash çš„æ€è·¯åŒä¸Šï¼Œä¸è¿‡æ˜¯ç”¨è¿­ä»£å®ç°çš„ï¼Œæˆ‘å°±æŠŠå®ƒçš„æºä»£ç è´´è¿‡æ¥çœ‹ä¸€ä¸‹ 1234567891011121314151617181920212223242526var flow = function(funcs) &#123; //è·å–æ–¹æ³•å‚æ•°é•¿åº¦ var length = funcs.length; //è®°å½•é•¿åº¦å€¼ var index = length; //é€’å½’å‡å‡ while (index--) &#123; //å¦‚æœåˆ¤æ–­æŸä¸€ä¸ªä¸æ˜¯æ–¹æ³•åˆ™è¾“å‡ºè­¦å‘Šâš ï¸ if (typeof funcs[index] !== &quot;function&quot;) &#123; throw new TypeError(&quot;Expected a function&quot;); &#125; &#125; return function(...args) &#123; var index = 0; var result = length ? funcs[index].apply(this, args) : args[0]; while (++index &lt; length) &#123; result = funcs[index].call(this, result); &#125; return result; &#125;;&#125;;var flowRight = function(funcs) &#123; //æ–¹æ³•å‚æ•°åè½¬..[fn2,fn1] ===&gt; [fn1,fn2] return flow(funcs.reverse());&#125;; å¯ä»¥çœ‹å‡ºï¼Œlodash çš„æœ¬æ¥å®ç°æ˜¯ä»å·¦åˆ°å³çš„ï¼Œä½†ä¹Ÿæä¾›äº†ä»å³åˆ°å·¦çš„ flowRightï¼Œè¿˜å¤šäº†ä¸€å±‚å‡½æ•°çš„æ ¡éªŒï¼Œè€Œä¸”æ¥æ”¶çš„æ˜¯æ•°ç»„ï¼Œä¸æ˜¯å‚æ•°åºåˆ—,è€Œä¸”ä»è¿™è¡Œvar result = length ? funcs[index].apply(this, args) : args[0]å¯ä»¥çœ‹å‡ºå…è®¸æ•°ç»„ä¸ºç©ºï¼Œå¯ä»¥çœ‹å‡ºè¿˜æ˜¯éå¸¸ä¸¥è°¨çš„ã€‚æˆ‘å†™çš„å°±ç¼ºå°‘è¿™ç§ä¸¥è°¨çš„å¼‚å¸¸å¤„ç†ã€‚ å‚è€ƒcompose çš„å®ç°","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"æ‰‹å†™ä¸ª bind å®ç°","slug":"æ‰‹å†™ä¸€ä¸ªbindçš„å®ç°","date":"2017-11-12T16:00:00.000Z","updated":"2020-09-16T09:07:12.000Z","comments":true,"path":"2017/11/13/æ‰‹å†™ä¸€ä¸ªbindçš„å®ç°/","link":"","permalink":"http://mariogogogo.github.io/2017/11/13/%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAbind%E7%9A%84%E5%AE%9E%E7%8E%B0/","excerpt":"","text":"bind çš„ä»‹ç» bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚ é¦–å…ˆä»‹ç»ä¸‹åŒºåˆ« ç¬¬ä¸€ä¸ªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å®ç°123456789101112131415function func(...arg) &#123; console.log(this.a); console.log(arg);&#125;Function.prototype.customeBind = function(thisArg) &#123; let self = this; return function() &#123; self.apply(thisArg); &#125;;&#125;;let newFunc = func.customeBind(&#123; a: 1 &#125;);newFunc(); //---&gt; this.a // 1 ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°12345678910Function.prototype.customeBind = function(thisArg, ...list) &#123; let self = this; return function() &#123; self.apply(thisArg, [...list]); &#125;;&#125;;let newFunc2 = func.customeBind(&#123; a: 1 &#125;, 6, 5, 4, 3, 2, 1);newFunc2(); åŸå‹ç»§æ‰¿æ¨¡æ‹Ÿå®ç°123456789101112131415161718192021Function.prototype.customeBind = function(thisArg, ...list) &#123; let self = this; //ç›®æ ‡å‡½æ•° //å¦‚æœæŠŠè¿”å›å‡½æ•°å½“åšæ„é€ å‡½æ•° å°±æ˜¯æ‰¾ä¸åˆ°ç›®æ ‡å‡½æ•°ä¸Šçš„æ–¹æ³• //è§£å†³:æ–°å‡½æ•°ç»§æ‰¿ç›®æ ‡å‡½æ•°çš„åŸå‹ let NewBind = function() &#123; self.apply(thisArg, [...list]); &#125;; //åŸå‹ç»§æ‰¿: ä»¥æŸä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å‡ºæ¥ NewBind.prototype = Object.create(self.prototype); //æ„é€ å‡½æ•°ï¼ˆå³å¯¹è±¡å’Œæ•°ç»„æ–‡å­—ï¼‰çš„æƒ…å†µä¸‹åˆ›å»ºçš„å¯¹è±¡å°†å…·æœ‰constructoræŒ‡å‘è¯¥å¯¹è±¡çš„åŸºç¡€å¯¹è±¡æ„é€ å‡½æ•°ç±»å‹çš„å±æ€§ã€‚ NewBind.prototype.constructor = self; //è¿”å›æ–°å‡½æ•° return NewBind;&#125;;let newFunc2 = func.customeBind(&#123; a: 2 &#125;, 6, 5, 4, 3, 2, 1);newFunc2();let f2 = new newFunc2();console.log(f2); æ‰‹å†™ç³»åˆ— å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ å®ç°ä¸€ä¸ªJSON.stringify å®ç°ä¸€ä¸ªJSON.parse å®ç°ä¸€ä¸ªcallæˆ– apply å®ç°ä¸€ä¸ªFunction.bind å®ç°ä¸€ä¸ªç»§æ‰¿ å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ– æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ) æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling) æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´ å®ç°ä¸€ä¸ªinstanceOf å®ç°ä¸€ä¸ª bing","categories":[{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"http://mariogogogo.github.io/categories/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://mariogogogo.github.io/tags/JavaScript/"}]},{"title":"JAVASCRIPT è®¾è®¡æ¨¡å¼ä¹‹å¯„ç”Ÿå¼ç»§æ‰¿","slug":"å¯„ç”Ÿå¼ç»§æ‰¿","date":"2017-10-31T07:13:48.000Z","updated":"2020-12-08T05:57:08.000Z","comments":true,"path":"2017/10/31/å¯„ç”Ÿå¼ç»§æ‰¿/","link":"","permalink":"http://mariogogogo.github.io/2017/10/31/%E5%AF%84%E7%94%9F%E5%BC%8F%E7%BB%A7%E6%89%BF/","excerpt":"å¯„ç”Ÿå¼ç»§æ‰¿","text":"å¯„ç”Ÿå¼ç»§æ‰¿ 1234567891011121314151617181920212223242526272829function Car(color, price) &#123; var go = &#x27;æˆ‘æ˜¯ç§æœ‰çš„&#x27;; this.color = color; this.price = price; this.getGo = function () &#123; return go; &#125;;&#125;Car.prototype.getCar = function () &#123; console.log(&#x27;é¢œè‰²&#x27; + this.color);&#125;;function cruze(color, price) &#123; Car.call(this, color, price);&#125;//å¯„ç”Ÿå¼ç»§æ‰¿inherit(Car, cruze);cruze.prototype.test = function () &#123; console.log(&#x27;æˆ‘æ˜¯TEST&#x27; + this.color);&#125;;function inherit(father, son) &#123; var _prototype = Object.create(father.prototype); //åˆ›å»ºçˆ¹çš„å‰¯æœ¬ _prototype.construction = son; //æ›´æ”¹è‡ªå·±çš„æ„é€ å‡½æ•° son.prototype = _prototype; //å†ç»™è‡ªå·±&#125;//newä¸€ä¸‹æ‹¿åˆ«äººçš„å±æ€§ callä¸€ä¸‹æ‹¿åˆ«äººçš„å±æ€§æ–¹æ³•var _cruze = new cruze(&#x27;white&#x27;, &#x27;red&#x27;);console.log(_cruze);","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"webpack3.10.0ä½¿ç”¨","slug":"webpack3.10.0ä½¿ç”¨","date":"2017-10-25T16:00:00.000Z","updated":"2020-09-16T09:07:58.000Z","comments":true,"path":"2017/10/26/webpack3.10.0ä½¿ç”¨/","link":"","permalink":"http://mariogogogo.github.io/2017/10/26/webpack3.10.0%E4%BD%BF%E7%94%A8/","excerpt":"å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½","text":"å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½ åˆçº§å…¥é—¨ yarn add webpack@3.10.0 yarn add html-webpack-plugin@2.30.1 yarn add babel-core,babel-loader babel-preset-env yarn add less css-loader less-loader styke-loader extract-text-webpack-plugin yarn add url-loader file-loader file-laoderåœ¨æ–‡ä»¶å¤§å°ä½äºé™åˆ¶æ—¶,å¯ä»¥è¿”å›ä¸€ä¸ªDataURL åŸºç¡€é…ç½®ä»£ç å¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106/* * @Author: mikey.zhaopeng * @Date: 2018-10-28 23:44:17 * @Last Modified by: é©¬é‡Œå¥¥ * @Last Modified time: 2018-10-29 13:02:59 */const path = require(&quot;path&quot;);const webpack = require(&quot;webpack&quot;);const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);module.exports = &#123; entry: &quot;./src/app.js&quot;, output: &#123; path: path.resolve(__dirname, &quot;dist&quot;), //è§£æç›®å½• filename: &quot;js/app.js&quot; &#125;, module: &#123; rules: [ // react(jsx)è¯­æ³•çš„å¤„ç† &#123; test: /\\.js$/, exclude: /(node_modules)/, use: &#123; loader: &quot;babel-loader&quot;, options: &#123; presets: [&quot;env&quot;, &quot;react&quot;] //eev æ ¹æ®ç¯å¢ƒæ‰“åŒ… &#125; &#125; &#125;, // cssæ–‡ä»¶çš„å¤„ç† &#123; test: /\\.css$/, use: ExtractTextPlugin.extract(&#123; //æ‰€æœ‰å…¥å£css æå–å‡ºæ¥ fallback: &quot;style-loader&quot;, //å¿…é¡»ä¸‹style-loader use: &quot;css-loader&quot; &#125;) &#125;, // lessæ–‡ä»¶çš„å¤„ç† &#123; test: /\\.less$/, use: ExtractTextPlugin.extract(&#123; fallback: &quot;style-loader&quot;, use: [&quot;css-loader&quot;, &quot;less-loader&quot;] &#125;) &#125;, // å›¾ç‰‡çš„é…ç½® &#123; test: /\\.(png|jpg|gif)$/, use: [ &#123; loader: &#x27;url-loader?limit=8192&amp;name=images/[hash:8].[name].[ext]&#x27;, options: &#123; name: &#x27;./images&#x27;, &#125;, &#125;, ], &#125;, // å­—ä½“å›¾æ ‡çš„é…ç½® &#123; test: /\\.(eot|svg|ttf|woff|woff2|otf)$/, use: [ &#123; loader: &#x27;url-loader?limit=8192&amp;name=font/[hash:8].[name].[ext]&#x27;, options: &#123; name: &#x27;./font&#x27;, &#125;, &#125;, ], &#125;, &#125;, plugins: [ //å¤„ç†htmlæ–‡ä»¶ new HtmlWebpackPlugin(&#123; template: &quot;./src/index.html&quot; &#125;), // // ç‹¬ç«‹cssæ–‡ä»¶ new ExtractTextPlugin(&quot;css/[name].css&quot;), // æå‡ºå…¬å…±æ¨¡å— new webpack.optimize.CommonsChunkPlugin(&#123; name: &quot;common&quot;, filename: &quot;js/base.js&quot; &#125;) ], devServer: &#123; port: 8086, historyApiFallback: &#123; index: &quot;/dist/index.html&quot;, //404 æˆ–æ‹›ä¸åˆ°åˆ™è¿”å›é¦–é¡µ favicon: &#x27;./favicon.ico&#x27; //å¿…é¡»åœ¨æ›´ç›®å½•æ”¾ä¸€å¼ icoå›¾ç‰‡ &#125;, open: true, //è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ proxy: &#123; &quot;/manage&quot;: &#123; target: &quot;http://admintest.happymmall.com&quot;, //é€‰æ‹©è¯·æ±‚ä»£ç† changeOrigin: true &#125;, &quot;/user/logout.do&quot;: &#123; target: &quot;http://admintest.happymmall.com&quot;, changeOrigin: true &#125; &#125; &#125;&#125;; å›¾ç‰‡é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹çº æ­£ä¼šå‡ºç° http://xxx.xx.com/css/image/1.jpg; æ­£ç¡®çš„ç½‘å€ åº”è¯¥æ˜¯ http://xxx.xx.com/image/1.jpg; ä¸ºä»€ä¹ˆä¼šå¤šä¸€ä¸ªcsså¯èƒ½css-loadeè§£ææ—¶å€™æ²¡æœ‰é…ç½®è¾“å‡ºè·¯å¾„ è§£å†³:12345678910111213141516171819202122232425// å›¾ç‰‡çš„é…ç½® &#123; test: /\\.(png|jpg|gif)$/, use: [ &#123; loader: &quot;url-loader?limit=819200&amp;name=images/[hash:8].[name].[ext]&quot;, options: &#123; name: &quot;./images&quot; &#125; &#125; ] &#125;, // å­—ä½“å›¾æ ‡çš„é…ç½® &#123; test: /\\.(eot|svg|ttf|woff|woff2|otf)$/, use: [ &#123; loader: &quot;url-loader?limit=819200&amp;name=fonts/[hash:8].[name].[ext]&quot;, options: &#123; name: &quot;./fonts&quot; &#125; &#125; ] &#125; è¿›é˜¶","categories":[{"name":"Webpack","slug":"Webpack","permalink":"http://mariogogogo.github.io/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"http://mariogogogo.github.io/tags/webpack/"}]},{"title":"å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹","slug":"å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹","date":"2017-10-24T07:13:48.000Z","updated":"2020-09-16T09:07:16.000Z","comments":true,"path":"2017/10/24/å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹/","link":"","permalink":"http://mariogogogo.github.io/2017/10/24/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC%E7%B1%BB%E5%9E%8B/","excerpt":"æ¯ç§æ•°æ®ç±»å‹çš„å†…å­˜åˆ†é…","text":"æ¯ç§æ•°æ®ç±»å‹çš„å†…å­˜åˆ†é… å€¼ç±»å‹å†…å­˜åˆ†é… 123456function chainStore() &#123; var store1 = &quot;Nike China&quot;; var store2 = store1; store1 = &quot;Nike U.S.A.&quot;; alert(store2);&#125; 123456var str1; //è¿™ä¸ªæ—¶å€™ä¸è¿›è¡Œå†…å­˜åˆ†é…var str2 = &quot;ä¼ æ™ºæ’­å®¢&quot;; //åˆ†é…å†…å­˜var str3 = str2;console.log(str1);console.log(str2 == str3); //æ¯”è¾ƒçš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸­å­˜å‚¨çš„å€¼console.log(str2 === str3); //æ¯”è¾ƒçš„æ˜¯åœ°å€å’Œåœ°å€ä¸­å­˜å‚¨çš„å€¼ æŠŠä¸€ä¸ªå€¼ç±»å‹ï¼ˆä¹Ÿå¯ä»¥å«åŸºæœ¬ç±»å‹ï¼‰store2 ä¼ é€’ç»™å¦ä¸€ä¸ªå˜é‡ï¼ˆèµ‹å€¼ï¼‰æ—¶ï¼Œå…¶å®æ˜¯åˆ†é…äº†ä¸€å—æ–°çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤æ”¹å˜ store1 çš„å€¼å¯¹ store2 æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºå®ƒä¸åƒå¼•ç”¨ç±»å‹ï¼Œå˜é‡çš„äº¤æ¢å…¶å®æ˜¯äº¤æ¢äº†æŒ‡åƒåŒä¸€ä¸ªå†…å®¹çš„åœ°å€ã€‚ å¼•ç”¨ç±»å‹å†…å­˜åˆ†é…å‹ å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œèµ‹å€¼åªæ˜¯ç”Ÿæˆä¸€ä¸ªå†…å­˜ä¿å­˜åœ°å€è€Œå·²var y = x;å¦‚æœå˜é‡ x è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡.åˆ™é€šè¿‡èµ‹å€¼å,y ç”Ÿæˆä¸€ä¸ªå˜é‡,å˜é‡åŒ…å«ä¸€ä¸ªåœ°å€,åœ°å€æŒ‡å‘å¯¹è±¡ x.æ‰€ä»¥ä»æœ¬è´¨ä¸Šè€Œè¨€,ä¸ä¼šç”Ÿæˆæ–°çš„å˜é‡, x,y æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä½ç½®å½“ä½ é€šè¿‡ y æ”¹å˜å¯¹è±¡çš„å€¼ï¼Œè¿™ç§å˜åŒ–ä¹Ÿä¼šåæ˜ åˆ° x ä¸Šã€‚ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œstore2 åªè¿›è¡Œäº†ä¸€æ¬¡èµ‹å€¼ï¼Œç†è®ºä¸Šå®ƒçš„å€¼å·²å®šï¼Œä½†åé¢é€šè¿‡æ”¹å†™ store1 çš„å€¼ï¼Œå‘ç° store2 çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™æ­£æ˜¯å¼•ç”¨ç±»å‹çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¦æ³¨æ„çš„åœ°æ–¹ã€‚ å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹åŒºåˆ« å†…å­˜åˆ†é…æœºåˆ¶ä¸ä¸€æ · å¼•ç”¨ç±»å‹â€”åˆ›å»ºä¸€ä¸ªå˜é‡â€”å†…å­˜ä¸­ä¿å­˜çš„æ˜¯å˜é‡çœŸå®å…¥å£çš„åœ°å€ å€¼ç±»å‹ï¼šåˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå†…å­˜åˆ›å»ºä¸€ä¸ªåŒºåŸŸ è¯´ç™½äº†å°±æ˜¯å¼•ç”¨ç±»å‹ä¼šåˆ†é…ä¸¤ä¸ªåŒºåŸŸï¼šä¸€ä¸ªä¿å­˜åœ°å€ï¼Œä¸€ä¸ªä¿å­˜å†…å®¹ å˜é‡èµ‹å€¼æ˜¯å¦çš„åŒºåˆ« å°†ä¸€ä¸ªå€¼ç±»å‹èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œå®é™…ä¸Šæ–°åˆ›å»ºä¸€ä¸ªåŒºåŸŸ å¼•ç”¨ç±»å‹ï¼Œåªæ˜¯åˆ›å»ºä¸€ä¸ªåŒºåŸŸï¼Œä¿å­˜å¦ä¸€ä¸ªå˜é‡çš„å…¥å£åœ°å€ å€¼ç±»å‹èµ‹å€¼ï¼Œä¼šé‡æ–°åˆ†é…å†…å­˜ å¼•ç”¨ç±»å‹èµ‹å€¼å…¶å®èµ‹çš„æ˜¯æŒ‡é’ˆ","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"æ•°æ®ç±»å‹åˆ¤æ–­çš„å‡ ç§æ–¹å¼","slug":"æ•°æ®ç±»å‹åˆ¤æ–­çš„å‡ ç§æ–¹å¼","date":"2017-10-23T07:13:48.000Z","updated":"2020-09-16T09:07:14.000Z","comments":true,"path":"2017/10/23/æ•°æ®ç±»å‹åˆ¤æ–­çš„å‡ ç§æ–¹å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/10/23/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/","excerpt":"å¦‚ä½•åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿï¼ŸåŸºç¡€æ•°æ®ç±»å‹çš„åˆ¤æ–­å‡ ç§æ–¹å¼","text":"å¦‚ä½•åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿï¼ŸåŸºç¡€æ•°æ®ç±»å‹çš„åˆ¤æ–­å‡ ç§æ–¹å¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465var num = 1;var str = &quot;ä¼ æ™ºæ’­å®¢&quot;;var bool = false;var arr = [];var obj = &#123; name: &quot;ä¼ æ™ºæ’­å®¢&quot; &#125;;var date = new Date();var fn = function() &#123;&#125;;/****************************************************************************** æ•°æ®ç±»å‹åˆ¤æ–­ - typeof *******************************************************************************/console.log(&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - typeof&quot;);console.log(typeof undefined); //&#x27;undefined&#x27;console.log(typeof null); // well-known bugconsole.log(typeof true); //&#x27;boolean&#x27;console.log(typeof 123); //&#x27;number&#x27;console.log(typeof &quot;abc&quot;); //&#x27;string&#x27;console.log(typeof function() &#123;&#125;); //&#x27;function&#x27;var arr = [];console.log(typeof &#123;&#125;); //&#x27;object&#x27;console.log(typeof arr); //&#x27;object&#x27;console.log(typeof unknownVariable); //&#x27;undefined&#x27;// åœ¨ä½¿ç”¨ typeof è¿ç®—ç¬¦æ—¶é‡‡ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨å€¼ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œ// æ— è®ºå¼•ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œå®ƒéƒ½è¿”å› &quot;object&quot;ã€‚/****************************************************************************** æ•°æ®ç±»å‹åˆ¤æ–­ - toString.call é€šç”¨ä½†å¾ˆç¹ççš„æ–¹æ³•ï¼š prototype *******************************************************************************/console.log(&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - toString.call&quot;);console.log(toString.call(123)); //[object Number]console.log(toString.call(&quot;123&quot;)); //[object String]console.log(toString.call(undefined)); //[object Undefined]console.log(toString.call(true)); //[object Boolean]console.log(toString.call(&#123;&#125;)); //[object Object]console.log(toString.call([])); //[object Array]console.log(toString.call(function() &#123;&#125;)); //[object Function]console.log(Object.prototype.toString.call(str) === &quot;[object String]&quot;); //-------&gt; true;console.log(Object.prototype.toString.call(num) === &quot;[object Number]&quot;); //-------&gt; true;console.log(Object.prototype.toString.call(arr) === &quot;[object Array]&quot;); //-------&gt; true;console.log(Object.prototype.toString.call(date) === &quot;[object Date]&quot;); //-------&gt; true;console.log(Object.prototype.toString.call(fn) === &quot;[object Function]&quot;); //-------&gt; true;/****************************************************************************** æ•°æ®ç±»å‹åˆ¤æ–­ - instanceof *******************************************************************************/// åˆ¤æ–­å·²çŸ¥å¯¹è±¡ç±»å‹å®ä¾‹åŒ–çš„æ–¹æ³•ï¼š instanceofconsole.log(&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - instanceof&quot;);console.log(arr instanceof Array); //---------------&gt; trueconsole.log(date instanceof Date); //---------------&gt; trueconsole.log(fn instanceof Function); //------------&gt; true// alert(f instanceof function) //------------&gt; false// æ³¨æ„ï¼šinstanceof åé¢ä¸€å®šè¦æ˜¯å¯¹è±¡ç±»å‹ï¼Œå¹¶ä¸”å¤§å°å†™ä¸èƒ½é”™ï¼Œè¯¥æ–¹æ³•é€‚åˆä¸€äº›æ¡ä»¶é€‰æ‹©æˆ–åˆ†æ”¯ã€‚/****************************************************************************** æ•°æ®ç±»å‹åˆ¤æ–­ - æ ¹æ®å¯¹è±¡çš„constructoråˆ¤æ–­ï¼š constructor *******************************************************************************/// æ ¹æ®å¯¹è±¡çš„constructoråˆ¤æ–­ï¼š constructorvar arr = [];console.log(&quot;æ•°æ®ç±»å‹åˆ¤æ–­ - constructor&quot;);console.log(arr.constructor === Array); //----------&gt; trueconsole.log(date.constructor === Date); //-----------&gt; trueconsole.log(fn.constructor === Function); //-------&gt; true","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹åŸå‹ç»§æ‰¿","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹åŸå‹ç»§æ‰¿","date":"2017-09-22T07:13:48.000Z","updated":"2020-09-16T09:07:36.000Z","comments":true,"path":"2017/09/22/Javascriptè®¾è®¡æ¨¡å¼ä¹‹åŸå‹ç»§æ‰¿/","link":"","permalink":"http://mariogogogo.github.io/2017/09/22/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF/","excerpt":"æ¶‰åŠåˆ°å¤šä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹æ¨¡å¼æ¥å®ç°å¯¹æ–°å¯¹è±¡çš„åˆ›å»º","text":"æ¶‰åŠåˆ°å¤šä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹æ¨¡å¼æ¥å®ç°å¯¹æ–°å¯¹è±¡çš„åˆ›å»º ä»£ç 12345678910111213141516171819202122232425262728293031323334353637//æ¶‰åŠåˆ°å¤šä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹æ¨¡å¼æ¥å®ç°å¯¹æ–°å¯¹è±¡çš„åˆ›å»º function prototypeExtend() &#123; //ç¼“å­˜ç±» ä¸ºäº†å®ä¾‹åŒ–è¿”å›å¯¹è±¡ä¸´æ—¶åˆ›å»º è·Ÿä¸´æ—¶å˜é‡æ€§è´¨å·®ä¸å¤š var F = function() &#123;&#125;, args = arguments, i = 0, len = args.length; for (; i &lt; len; i++) &#123; //éå†æ¯ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ for (var j in args[i]) &#123; //å±æ€§ç¼“å­˜åœ¨ç¼“å­˜ç±»å‹ä¸­ F.prototype[j] = args[i][j]; &#125; &#125; //è¿”å›ä¸€ä¸ªå®ä¾‹ return new F(); &#125; var penguin = prototypeExtend(&#123; speed: 20, swim: function() &#123; console.log(&quot;é€Ÿåº¦&quot; + this.speed); &#125; &#125;, &#123; run: function(speed) &#123; console.log(&#x27;è·‘æ­¥é€Ÿåº¦&#x27; + speed); &#125; &#125;, &#123; jump: function() &#123; console.log(&#x27;è·³è·ƒåŠ¨ä½œ&#x27;); &#125; &#125;) penguin.swim(); penguin.run(10); penguin.jump();","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼","date":"2017-09-21T07:13:48.000Z","updated":"2020-09-16T09:07:36.000Z","comments":true,"path":"2017/09/21/Javascriptè®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/09/21/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","excerpt":"é¡¹ç›®ç»ç†è¦æ±‚ï¼šé¡µé¢ä¸­æœ‰å¾ˆå¤šç„¦ç‚¹å›¾ æ¯ä¸ªç„¦ç‚¹å›¾çš„å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œå·¦å³åˆ‡æ¢ ä¸Šä¸‹åˆ‡æ¢","text":"é¡¹ç›®ç»ç†è¦æ±‚ï¼šé¡µé¢ä¸­æœ‰å¾ˆå¤šç„¦ç‚¹å›¾ æ¯ä¸ªç„¦ç‚¹å›¾çš„å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œå·¦å³åˆ‡æ¢ ä¸Šä¸‹åˆ‡æ¢ ä¼ ç»Ÿå†™æ³•1234567891011121314151617181920212223242526272829var LoopImages = function(imgArr, container) &#123; this.imagesArray = imgArr; //è½®æ’­å›¾æ•°ç»„ this.container = container; //è½®æ’­å›¾å®¹å™¨ this.creatImage = function() &#123;&#125; //åˆ›å»ºè½®æ’­å›¾ç‰‡ this.changeImage = function() &#123;&#125; //å‚å®¶åˆ‡æ¢ä¸‹ä¸€å¼ å›¾ç‰‡ &#125; //å†™ä¸€ä¸ªä¸Šä¸‹åˆ‡æ¢çš„ç±» var SlidLoopImage = function(imgArr, container) &#123; LoopImages.call(this, imgArr, container); this.changeImage = function() &#123; console.log(&#x27;è¿™é‡Œæ˜¾ç¤ºçš„ä¸Šä¸‹åˆ‡æ¢æ•ˆæœ&#x27;); &#125; &#125; //æ¸éšæ¸æ˜¾å¾—åˆ‡æ¢ var FadeLoopImage = function(imgArr, container, arrow) &#123; LoopImages.call(this, imgArr, container); //åˆ‡æ¢ç®­å¤´çš„ç§æœ‰å˜é‡ this.arrow = arrow; this.changeImage = function() &#123; console.log(&#x27;è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ¸éšæ¸æ˜¾å¾—åˆ‡æ¢&#x27;); &#125; &#125; //ä¸€ä¸ªæ•°ç»„ ä¸€ä¸ªå®¹å™¨ ä¸€ä¸ªæ‡’ var fadeImage = new FadeLoopImage( [&#x27;1.jpg&#x27;, &#x27;2.jpg&#x27;, &#x27;3,jpg&#x27;], &#x27;slider&#x27;, [&#x27;left.jpg&#x27;, &#x27;right.jpg&#x27;] ); fadeImage.changeImage(); æ”¹è¿›å†™æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var LoopImages = function(imgArr, container) &#123; this.imagesArray = imgArr; //æ•°ç»„ this.container = container; //å®¹å™¨ &#125; LoopImages.prototype = &#123; creatImage: function() &#123; console.log(&#x27;è¿™é‡Œå­˜ç…§ç‰‡&#x27;); &#125;, changeImage: function() &#123; console.log(&#x27;è¿™é‡Œæ˜¾ç¤ºåˆ‡æ¢ä¸‹ä¸€å¼ ç…§ç‰‡&#x27;); &#125; &#125; //ä¸Šä¸‹åˆ‡æ¢ç±» var SlidLoopImage = function(imgArr, container) &#123; LoopImages.call(this, imgArr, container); &#125; SlidLoopImage.prototype = new LoopImages(); SlidLoopImage.prototype.changeImage = function() &#123; console.log(&#x27;è¿™é‡Œé‡å†™ç»§æ‰¿åˆ‡æ¢ä¸‹ä¸€å¼ å›¾ç‰‡æ–¹æ³•&#x27;); &#125; //å·¦å³åˆ‡æ¢ç±» var FadeLoopImage = function(imgArr, container, arrow) &#123; LoopImages.call(this, imgArr, container); this.arrow = arrow; &#125; FadeLoopImage.prototype = new LoopImages(); FadeLoopImage.prototype.changeImage = function() &#123; console.log(&#x27;è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯é‡å†™å·¦å³åˆ‡æ¢æ–¹æ³•&#x27;); &#125; //æµ‹è¯•ç”¨ä¾‹ console.log(fadeImage.container); fadeImage.changeImage(); //åŸå‹æ‰©å±• //åŸå‹å¯¹è±¡æ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡æˆ–è€…å­ç±»çš„ç»§æ‰¿ï¼›éƒ½æ˜¯å®ƒçš„ä¸€ä¸ªæŒ‡å‘ //ä»»ä½•æ—¶å€™å¯¹åŸºç±»ä¼™å­å­ç±»è¿›è¡Œæ–¹æ³•çš„æ‰©å±• LoopImages.prototype.getImageLength = function() &#123; return this.imagesArray.length; &#125; FadeLoopImage.prototype.getContainer = function() &#123; return this.container; &#125; console.log(fadeImage.getImageLength); //è·å–å®ƒçš„æ–°æ–¹æ³• console.log(fadeImage.getContainer);","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼","date":"2017-09-20T07:13:48.000Z","updated":"2020-09-16T09:07:35.000Z","comments":true,"path":"2017/09/20/Javascriptè®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/09/20/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"éœ€æ±‚åˆ†æï¼šå‘å¸ƒç®€å† ç§ç±»å¤šç›®çš„ä¸ºäº†åˆ›å»ºå¯¹è±¡ï¼Œæ›´å…³å¿ƒåˆ›é€ è¿™ä¸ªå¯¹è±¡çš„æ•´ä¸ªè¿‡ç¨‹","text":"éœ€æ±‚åˆ†æï¼šå‘å¸ƒç®€å† ç§ç±»å¤šç›®çš„ä¸ºäº†åˆ›å»ºå¯¹è±¡ï¼Œæ›´å…³å¿ƒåˆ›é€ è¿™ä¸ªå¯¹è±¡çš„æ•´ä¸ªè¿‡ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869var Human = function(param) &#123; this.skill = param &amp;&amp; param.skill || &#x27;ä¿å¯†&#x27;; this.hobby = param &amp;&amp; param.hobby || &#x27;ä¿å¯†&#x27;; &#125;; Human.prototype = &#123; getSkill: function() &#123; return this.skill; &#125;, getHobby: function() &#123; return this.hobby; &#125; &#125;; //æŠ½è±¡å‡ºå§“åè§£æç±» //å®ä¾‹åŒ–ä¸€ä¸ªå§“å var Name = function(name) &#123; var that = this; (function(name, that) &#123; that.wholeName = name; if (name.indexOf(&quot; &quot;) &gt; -1) &#123; that.FirstName = name.slice(0, name.indexOf(&quot; &quot;)); that.SecondName = name.slice(name.indexOf(&quot; &quot;)); &#125; &#125;)(name, that) &#125;; //æŠ½è±¡å‡ºæœŸæœ›èŒä½ç±» var Work = function(work) &#123; var that = this; (function(work, that) &#123; switch (work) &#123; case &#x27;code&#x27;: that.work = &#x27;å·¥ç¨‹å¸ˆ&#x27;; that.workDescript = &#x27;æ¯å¤©å–œæ¬¢ç¼–ç¨‹&#x27;; break; case &#x27;UI&#x27;: that.work = &#x27;è®¾è®¡å¸ˆ&#x27;; that.workDescript = &#x27;æ¯å¤©å–œæ¬¢è®¾è®¡&#x27;; break; case &#x27;teach&#x27;: that.work = &#x27;æ•™å¸ˆ&#x27;; that.workDescript = &#x27;æ¯å¤©å–œæ¬¢çœ‹ä¹¦&#x27;; break; default: that.work = work; that.workDescript = &#x27;å¯¹ä¸èµ·ï¼Œæˆ‘ä»¬ä¸æ¸…æ¥šä½ çš„èŒä¸š&#x27;; &#125; &#125;)(work, that) Work.prototype.changeWork = function(work) &#123; this.work = work; &#125; Work.prototype.changeDes = function(setence) &#123; this.workDescript = setence; &#125; &#125; /**** * å»ºé€ è€… * * ***/ var Person = function(name, work) &#123; var _person = new Human(); _person.name = new Name(name); _person.work = new Work(work); return _person; &#125; var person = new Person(&quot;jack chan&quot;, &quot;code&quot;); console.log(person.skill);","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹ç»™æˆ‘ä¸€å¼ åç‰‡å·¥å‚æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹ç»™æˆ‘ä¸€å¼ åç‰‡å·¥å‚æ¨¡å¼","date":"2017-09-19T07:13:48.000Z","updated":"2020-09-16T09:07:35.000Z","comments":true,"path":"2017/09/19/Javascriptè®¾è®¡æ¨¡å¼ä¹‹ç»™æˆ‘ä¸€å¼ åç‰‡å·¥å‚æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/09/19/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%99%E6%88%91%E4%B8%80%E5%BC%A0%E5%90%8D%E7%89%87%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","excerpt":"é¡¹ç›®ç»ç†è¦æ±‚å°ç™½åšä¸€ä¸ªéœ€æ±‚æŠ•æ”¾å„å¼å„æ ·çš„å¹¿å‘Šéœ€æ±‚æ€»åœ¨å˜å¦‚ä½•åº”å¯¹ï¼Ÿ","text":"é¡¹ç›®ç»ç†è¦æ±‚å°ç™½åšä¸€ä¸ªéœ€æ±‚æŠ•æ”¾å„å¼å„æ ·çš„å¹¿å‘Šéœ€æ±‚æ€»åœ¨å˜å¦‚ä½•åº”å¯¹ï¼Ÿ ä¼ ç»Ÿå†™æ³•1234567891011121314151617181920212223242526272829303132var Java = function(content) &#123; this.content = content; //é—­åŒ…æ‰§è¡Œ (function(content) &#123; var div = document.createElement(&quot;div&quot;); div.innerHTML = content; div.style.color = &quot;pink&quot;; document.getElementById(&#x27;container&#x27;).appendChild(div); &#125;)(content);&#125;var Php = function(content) &#123; this.content = content; //é—­åŒ…æ‰§è¡Œ (function(content) &#123; var div = document.createElement(&quot;div&quot;); div.innerHTML = content; div.style.color = &quot;yellow&quot;; document.getElementById(&#x27;container&#x27;).appendChild(div); &#125;)(content); &#125; //å·¥å‚æ¨¡å¼function JobFactory(type, content) &#123; switch (type) &#123; case &#x27;Java&#x27;: return new Java(content); break; case &#x27;Php&#x27;: return new Php(content); break; &#125;&#125; æ”¹è¿›å†™æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243var Factory = function(type, content) &#123; //è¿ç”¨å®‰å…¨æ¨¡å¼ åˆ¤æ–­æ˜¯å¦ä¸ºnewåˆ›å»ºçš„å¯¹è±¡ if (this instanceof Factory) &#123; var s = new this[type](content); return s; &#125; else &#123; return new Factory(type, content); &#125;&#125;Factory.prototype = &#123; Java: function(content) &#123; this.content = content; //é—­åŒ…æ‰§è¡Œ (function(content) &#123; var div = document.createElement(&quot;div&quot;); div.innerHTML = content; div.style.color = &quot;skyblue&quot;; document.getElementById(&#x27;container&#x27;).appendChild(div); &#125;)(content); &#125;, Php: function(content) &#123; this.content = content; //é—­åŒ…æ‰§è¡Œ (function(content) &#123; var div = document.createElement(&quot;div&quot;); div.innerHTML = content; div.style.color = &quot;red&quot;; document.getElementById(&#x27;container&#x27;).appendChild(div); &#125;)(content); &#125;&#125;;var data = [&#123; type: &#x27;Java&#x27;, content: &quot;Javaå¼€å‘å“ªå®¶å¼º&quot;&#125;, &#123; type: &#x27;Php&#x27;, content: &quot;Phpå¼€å‘å“ªå®¶å¼º&quot;&#125;];for (var i = 0; i &lt; data.length; i++) &#123; Factory(data[i].type, data[i].content);&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹ç®€å•å·¥å‚æ¨¡å¼","slug":"Javascriptè®¾è®¡æ¨¡å¼å‹ä¹‹ç®€å•å·¥å‚æ¨¡å¼","date":"2017-09-18T07:13:48.000Z","updated":"2020-09-16T09:07:33.000Z","comments":true,"path":"2017/09/18/Javascriptè®¾è®¡æ¨¡å¼å‹ä¹‹ç®€å•å·¥å‚æ¨¡å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/09/18/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9E%8B%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","excerpt":"éœ€æ±‚ç™»é™†æ¨¡å—ç”¨æˆ·è¾“å…¥æ¡†éœ€æ±‚ï¼šæœ‰å¤šç§æç¤ºæ¡†ï¼Œå¦‚ç¡®è®¤æ¡†ï¼Œè­¦å‘Šæ¡†ï¼Œè¾“å…¥æ¡†ï¼›","text":"éœ€æ±‚ç™»é™†æ¨¡å—ç”¨æˆ·è¾“å…¥æ¡†éœ€æ±‚ï¼šæœ‰å¤šç§æç¤ºæ¡†ï¼Œå¦‚ç¡®è®¤æ¡†ï¼Œè­¦å‘Šæ¡†ï¼Œè¾“å…¥æ¡†ï¼› ä¼ ç»Ÿå†™æ³•123456789101112131415161718192021//ä¼ ç»Ÿçš„å†™æ³•var LoginAlert = function(text) &#123; this.content = text;&#125;LoginAlert.prototype.show = function() &#123; //æ˜¾ç¤º&#125;var userNameAlert = new LoginAlert(&#x27;ç”¨æˆ·åä¸èƒ½å¤šäº16ä¸ªå­—æ¯æˆ–è€…æ•°å­—&#x27;)userNameAlert.show();var passwordAlert = new LoginAlert(&#x27;è¾“å…¥çš„å¯†ç ä¸æ­£ç¡®&#x27;);passwordAlert.show();//å¤šä¸€ä¸ªæŒ‰é’®çš„æç¤ºæ¡†var LoginPrompt = function(text) &#123; this.content = text;&#125;LoginPrompt.prototype.show = function() &#123; //æ˜¾ç¤º&#125;var userLoginPrompt = new LoginPrompt(&quot;ä»Šå¤©çš„å¿ƒæ°”æ˜¯&quot;);userLoginPrompt.show(); æ”¹è¿›å†™æ³•1234567891011121314151617181920212223242526function creatPop(type, text) &#123; var num; var o = new Object(); o.content = text; o.show = function() &#123; //æ˜¾ç¤º //æ˜¾ç¤ºé€šç”¨æ ·å¼ alert(num + text); &#125;; if (type == &quot;alert&quot;) &#123; num = 1; //åªæ˜¾ç¤ºä¸€ä¸ªæŒ‰é’® &#125; if (type == &quot;prompt&quot;) &#123; //æ·»åŠ å¤šä¸€ä¸ªè¾“å…¥æ¡† &#125; if (type == &quot;confirm&quot;) &#123; //æ·»åŠ å¤šä¸€ä¸ªè¾“å…¥æ¡†å’Œä¸€ä¸ªæŒ‰é’® &#125; return o; &#125; var userNameAlert = creatPop(&#x27;alert&#x27;, &quot;ç”¨æˆ·ååªèƒ½6ä¸ªå­—æ¯æˆ–æ•°å­—&quot;); userNameAlert.show(); var userNamePrompt= creatPop(&#x27;prompt&#x27;, &quot;ç”¨æˆ·åå§“å&quot;); userNamePrompt.show();","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹æ‰¾ä¸ªæ£€å¯Ÿé•¿","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹æ‰¾ä¸ªæ£€å¯Ÿé•¿","date":"2017-09-17T07:13:48.000Z","updated":"2020-09-16T09:07:37.000Z","comments":true,"path":"2017/09/17/Javascriptè®¾è®¡æ¨¡å¼ä¹‹æ‰¾ä¸ªæ£€å¯Ÿé•¿/","link":"","permalink":"http://mariogogogo.github.io/2017/09/17/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%89%BE%E4%B8%AA%E6%A3%80%E5%AF%9F%E9%95%BF/","excerpt":"newçš„å«ä¹‰newçš„ä½œç”¨å°±æ˜¯å¯¹å½“å‰å¯¹è±¡çš„thisçš„ä¸æ–­èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰newï¼Œå°±ä¼šæ‰§è¡Œå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œï¼Œæ‰€ä»¥thisæŒ‡å‘å¯¹è±¡è‡ªç„¶æ˜¯å…¨å±€å˜é‡ windowï¼›bookå˜é‡å¾—ä¸åˆ°Bookè¿™ä¸ªç±»æ‰§è¡Œï¼Œæ‰€ä»¥undefinedï¼›","text":"newçš„å«ä¹‰newçš„ä½œç”¨å°±æ˜¯å¯¹å½“å‰å¯¹è±¡çš„thisçš„ä¸æ–­èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰newï¼Œå°±ä¼šæ‰§è¡Œå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œï¼Œæ‰€ä»¥thisæŒ‡å‘å¯¹è±¡è‡ªç„¶æ˜¯å…¨å±€å˜é‡ windowï¼›bookå˜é‡å¾—ä¸åˆ°Bookè¿™ä¸ªç±»æ‰§è¡Œï¼Œæ‰€ä»¥undefinedï¼› ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//åˆ©ç”¨é—­åŒ…æ¥å®ç° var Book = (function() &#123; //é™æ€ç§æœ‰å˜é‡ var bookNum = 0; //é™æ€ç§æœ‰æ–¹æ³• å¤–éƒ¨ä¸å¯è®¿é—® function checkBook(name) &#123; alert(name) &#125;; //åˆ›å»ºç±» function _book(id, name, price) &#123; var name, price; //ç‰¹æƒæ–¹æ³• this.getName = function() &#123;&#125;; this.getPrice = function() &#123;&#125;; this.setName = function() &#123;&#125;; this.setPrice = function() &#123;&#125;; this.id = id; this.copy = function() &#123;&#125;; bookNum++; if (bookNum &gt; 100) &#123; throw new Error(&quot;å‡ºé”™äº†ï¼&quot;) &#125; this.setName(name); this.setPrice(price) &#125; _book.prototype = &#123; isJsBook: false, display: function() &#123;&#125; &#125; return _book; &#125;)() var b = new Book(11,&quot;javascript&quot;,40); console.log(b.bookNum); //--&gt;undefined console.log(b.isJsBook); //--&gt;false console.log(b.id); //--&gt;11// console.log(b.checkBook(&quot;jack&quot;)); //--&gt; b.checkBook is not a function var Book0 = function(title, time, type)&#123; this.title = title; this.time = time; this.type = type; &#125; var book0 = Book0(112, &quot;css&quot;, 40); console.log(book0); //--&gt;undefined æ²¡æœ‰newå®ä¾‹åŒ– console.log(window.title); //--&gt;112 //å»æ‰¾æ£€å¯Ÿé•¿åˆ¤å®šæ˜¯å¦å®ä¾‹åŒ– var Book1 = function(tit, time, type) &#123; if (this instanceof Book) &#123; this.tit = tit; this.time = time; this.type = type; &#125; else &#123; return new Book1(tit, time, type); &#125; &#125; var book1 = Book1(12, &quot;javascript&quot;, 40); console.log(book1); console.log(book1.tit); console.log(window.tit); //--&gt;undefined","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTè®¾è®¡æ¨¡å¼ä¹‹å°è£…æ˜æ˜Ÿ","slug":"Javascriptè®¾è®¡æ¨¡å¼ä¹‹å°è£…æ˜æ˜Ÿ","date":"2017-09-16T07:13:48.000Z","updated":"2020-09-16T09:07:35.000Z","comments":true,"path":"2017/09/16/Javascriptè®¾è®¡æ¨¡å¼ä¹‹å°è£…æ˜æ˜Ÿ/","link":"","permalink":"http://mariogogogo.github.io/2017/09/16/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B0%81%E8%A3%85%E6%98%8E%E6%98%9F/","excerpt":"é¢å‘å¯¹è±¡æ˜¯æ€æƒ³","text":"é¢å‘å¯¹è±¡æ˜¯æ€æƒ³ ä¸¾ä¸ªæ —å­1234567var Book = function(id, name, price)&#123; this.id =id; &#125; Book.prototype =&#123; display:function()&#123;&#125; &#125; é—®é¢˜ï¼šé€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•ä¸é€šè¿‡prototypeæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ é€šè¿‡thisæ·»åŠ æ—¶åœ¨å½“å‰å¯¹è±¡ä¸Šæ·»åŠ çš„ï¼Œæ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å®ƒéƒ½æœ‰ä¸€ä¸ªåŸå‹prototypeæŒ‡å‘å…¶ç»§æ‰¿çš„å±æ€§æ–¹æ³•ï¼Œè¿™æ ·é€šè¿‡prototypeç»§æ‰¿çš„æ–¹æ³•å¹¶ä¸æ˜¯è‡ªèº«ï¼Œthisçš„å±æ€§å’Œæ–¹æ³•æ˜¯è‡ªèº«æ‹¥æœ‰ï¼Œæ¯æ¬¡é€šè¿‡ç±»åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æŒ‡å‘è‡ªèº«å±æ€§å’Œæ–¹æ³•è€Œé€šè¿‡prototypeç»§æ‰¿é€šè¿‡ç±»åˆ›å»ºå±æ€§å’Œæ–¹æ³•ä¸ä¼šå†æ¬¡åˆ›å»º constructoræ˜¯ä»€ä¹ˆï¼Ÿåœ¨prototypeå¯¹è±¡ä¸­ä¼šå‡ºç°ä¸€ä¸ªå’Œå‡½æ•°åˆ›å»ºthisä¸€æ ·çš„ä¸€ä¸ªconstructorå±æ€§constructorå±æ€§æŒ‡å‘å°±æ˜¯æ‹¥æœ‰è¿™ä¸ªåŸå‹å¯¹è±¡çš„å‡½æ•°æˆ–å¯¹è±¡ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637var Book = function(id, name, price) &#123; //ç§æœ‰å±æ€§ä¸å¯é€šè¿‡å®ä¾‹åŒ–ç‚¹è¯­æ³•è®¿é—® var num = 1; function checkId() &#123;&#125;; this.getName = function() &#123;&#125;; this.getPrice = function() &#123;&#125;; this.setName = function () &#123;&#125;; this.setPrice = function () &#123;&#125;; //å…¬æœ‰å±æ€§ this.id = id; //å…¬æœ‰æ–¹æ³• this.copy = function() &#123;&#125;; this.setName(name); this.setPrice(price); &#125; //é™æ€å…¬æœ‰å±æ€§ Book.isChinese = true; //é™æ€å…¬æœ‰æ–¹æ³• Book.resetTime = function() &#123; console.log(&quot;new Time&quot;); &#125; //å…¬æœ‰å±æ€§ä¸æ–¹æ³• Book.prototype = &#123; isJsBook: false, display: function()&#123;&#125; &#125;; var b = new Book(11, &quot;javascript&quot;, 50); console.log(b.num); //--&gt; undefined console.log(b.isJsBook); //--&gt;false console.log(b.id); //--&gt;11 console.log(b.isChinese); //--&gt;undefined //ç±»çš„é™æ€å…¬æœ‰å±æ€§é€šè¿‡ç±»è‡ªèº«æ¥è®¿é—® console.log(Book.isChinese); //--&gt;true console.log(Book.resetTime()); // --&gt;new Time","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹æ•°ç»„å¯¹è±¡çŸ¥è¯†ç‚¹æ€»ç»“","slug":"JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹æ•°ç»„å¯¹è±¡çŸ¥è¯†ç‚¹æ€»ç»“","date":"2017-09-14T08:13:48.000Z","updated":"2020-09-16T09:07:37.000Z","comments":true,"path":"2017/09/14/JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹æ•°ç»„å¯¹è±¡çŸ¥è¯†ç‚¹æ€»ç»“/","link":"","permalink":"http://mariogogogo.github.io/2017/09/14/JAVASCRIPT%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/","excerpt":"æ•°ç»„å¯¹è±¡æ˜¯ä½¿ç”¨å•ç‹¬çš„å˜é‡åæ¥å­˜å‚¨ä¸€ç³»åˆ—çš„å€¼ï¼›æ•°ç»„å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡åå­˜å‚¨æ‰€æœ‰çš„å€¼ï¼Œå¹¶ä¸”å¯ä»¥ç”¨å˜é‡åè®¿é—®ä»»ä½•ä¸€ä¸ªå€¼ï¼›æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„çš„IDç´¢å¼•ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«è®¿é—®åˆ°â€¦â€¦","text":"æ•°ç»„å¯¹è±¡æ˜¯ä½¿ç”¨å•ç‹¬çš„å˜é‡åæ¥å­˜å‚¨ä¸€ç³»åˆ—çš„å€¼ï¼›æ•°ç»„å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡åå­˜å‚¨æ‰€æœ‰çš„å€¼ï¼Œå¹¶ä¸”å¯ä»¥ç”¨å˜é‡åè®¿é—®ä»»ä½•ä¸€ä¸ªå€¼ï¼›æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„çš„IDç´¢å¼•ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«è®¿é—®åˆ°â€¦â€¦JavaScriptæ•°ç»„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„å˜é‡ç±»å‹ã€‚æ•°ç»„å…ƒç´ å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯å¯¹è±¡å…ƒç´ ï¼Œå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¦ä¸€ä¸ªæ•°ç»„â€¦â€¦ JavaScript Arrayå¯¹è±¡å±æ€§æœ‰constructorï¼ˆå¼•ç”¨æ•°ç»„å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼‰ï¼Œlengthï¼ˆè¿”å›æ•°ç»„çš„é•¿åº¦ï¼‰ï¼Œprototype(å¢åŠ å±æ€§æˆ–æ–¹æ³•æ‰©å±•æ•°ç»„å®šä¹‰)ã€‚ 123456789101112131415161718192021&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;title&gt;æ•°ç»„å¯¹è±¡&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; var arr = [1,3,1,4,0,null,&quot;&quot;,undefined]; var arr2 = [1,2,null]; console.log(arr.toString()); //--&gt;&quot;1,3,1,4,0,,,&quot; console.log(arr.valueOf());//--&gt;Array [ 1, 3, 1, 4, 0, null, &quot;&quot;, undefined ] console.log(arr.concat(arr2));//--&gt;Array [ 1, 3, 1, 4, 0, null, &quot;&quot;, undefined, 1, 2, å¤šäº 1â€¦ ] console.log(arr.reverse())//--&gt;Array [ undefined, &quot;&quot;, null, 0, 4, 1, 3, 1 ] console.log(arr.splice(1,3));//--&gt;Array [ &quot;&quot;, null, 0 ] console.log(arr2.slice(1, 2));//--&gt;Array [ 2 ] &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"DOM","slug":"DOM","permalink":"http://mariogogogo.github.io/tags/DOM/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"Javascriptè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å‰è¦äº†è§£è¿™äº›","slug":"Javascriptè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å‰è¦äº†è§£è¿™äº›","date":"2017-09-14T07:13:48.000Z","updated":"2020-09-16T09:07:34.000Z","comments":true,"path":"2017/09/14/Javascriptè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å‰è¦äº†è§£è¿™äº›/","link":"","permalink":"http://mariogogogo.github.io/2017/09/14/Javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%89%8D%E8%A6%81%E4%BA%86%E8%A7%A3%E8%BF%99%E4%BA%9B/","excerpt":"","text":"æˆ‘ä»¬åˆšè¿›å…¥å…¬å¸éƒ½æ˜¯å°ç™½ï¼ŒæŸå¤©å…¬å¸é¡¹ç›®ç»ç†ç»™è®©åšä¸€ä¸ªè¡¨å•éªŒè¯ 90%çš„ä½ ä¼šåšè¿™æ ·çš„ä¼ ç»Ÿçš„é¢ç›¸è¿‡ç¨‹ç¼–ç¨‹12345678910111213//ä¼ ç»Ÿé¢ç›¸è¿‡ç¨‹ function checkName(argument) &#123; // body... &#125; function checkEmail(argument) &#123; // body... &#125; function checkPwd(argument) &#123; // body... &#125;ç¼ºç‚¹ï¼šè®¾ç½®äº†å¾ˆå¤šå…¨å±€å˜é‡ï¼Œä¸åˆ©äºå›¢é˜Ÿå¼€å‘ å› ä¸ºè¿™è·Ÿä¸‹é¢çš„å˜é‡åæå‰åœ¨functionæ²¡æœ‰åŒºåˆ«ï¼Ÿ 1234var checkName = function()&#123; //éªŒè¯å§“å&#125; å¦‚æœå›¢é˜Ÿä¸­æœ‰äººè·Ÿä½ ç”¨äº†åŒä¸€ä¸ªå˜é‡åå®šä¹‰äº†æ–¹æ³•é‚£ä½ çš„æ–¹æ³•å°±è¢«è¦†ç›–äº† æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä¼˜åŒ–ï¼šå…ˆçœ‹çœ‹ç”¨å¯¹è±¡æ”¶ç¼–å˜é‡çš„æ–¹æ³•è¯•è¯• 1234567var CheckObject = function () &#123;&#125;CheckObject.checkName = function() &#123; console.log(&#x27;æ£€æŸ¥å§“å&#x27;);&#125;var a = CheckObject.checkName();console.log(a); è¿™æ ·ä¹Ÿæœ‰ç¼ºç‚¹ï¼šå½“åˆ«äººæƒ³ç”¨ä½ ä»£ç çš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¸ªå¯¹è±¡ä¸èƒ½å¤åˆ¶ä¸€ä»½æˆ–è€…è¯´è¿™ä¸ªå¯¹è±¡newå‡ºæ¥çš„æ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡ä¸­æ²¡æœ‰ç»§æ‰¿è¿™äº›æ–°æ–¹æ³• 1234// è¢«newä¹‹åæ–¹æ³• æ–°å»ºå¯¹è±¡å†…éƒ¨æ²¡æœ‰æ–¹æ³•var b = new CheckObject();// console.log(b.checkName()); //index.js:18 Uncaught TypeError: b.checkName is not a function ç±»ä¹Ÿå¯ä»¥æ‰€ä»¥æˆ‘ä»¬åº”è¯¥æ·»åŠ thiså…³é”®å­— 12345678910111213var CheckObject = function () &#123; this.checkName = function()&#123; console.log(&#x27;newæ£€æŸ¥å§“å&#x27;); &#125; &#125; var a2 = new CheckObject();console.log(a2);//CheckObject &#123;checkName: Æ’&#125;// checkName: Æ’()// __proto__: Object console.log(a2.checkName()); ä½†è¿™ä¸ªè¿˜æ˜¯æœ‰ä¸€ç‚¹ç¼ºç‚¹ï¼šæˆ‘ä»¬æŠŠæ‰€æœ‰æ–¹æ³•éƒ½æ”¾åœ¨å‡½æ•°å†…éƒ¨ï¼Œé€šè¿‡thiså®šä¹‰ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡é€šè¿‡newå…³é”®è¯æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œthisä¸Šçš„å±æ€§è¿›è¡Œå¤åˆ¶ï¼Œç„¶è€Œæœ‰æ—¶å€™è¿™æ ·çš„æ–¹æ³•åˆ›å»ºé€ æˆçš„æ€§èƒ½æ¶ˆè€—æ˜¯å¾ˆå¥¢ä¾ˆçš„ 123456789101112131415161718192021/********************************* *//*************æ£€æŸ¥ */ var CheckObject = function() &#123;&#125; CheckObject.prototype = &#123; checkName:function()&#123; console.log(&#x27;æ£€æŸ¥å§“ånew&#x27;); &#125;, checkAge : function() &#123; console.log(&#x27;æ£€æŸ¥å¹´é¾„new&#x27;); &#125;, checkSex :function()&#123; console.log(&#x27;æ£€æŸ¥æ€§åˆ«new&#x27;); &#125; &#125; var c = new CheckObject(); c.checkName(); c.checkAge(); c.checkSex(); è¿™æ ·åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å®ä¾‹æ‰€æ‹¥æœ‰çš„æ–¹æ³•å°±åªæœ‰ä¸€ä¸ªäº†ï¼Œå› ä¸ºä»–ä»¬éƒ½è¦åœ¨prototypeåŸå‹ä¾æ¬¡å¯»æ‰¾ï¼Œæ‰¾åˆ°éƒ½æ˜¯åŒä¸€ä¸ª æ–¹æ³•è¿˜å¯ä»¥é“¾å¼è°ƒç”¨å¦‚æœå¯¹aå†™ä¸‰éè°ƒç”¨ä¹Ÿå¤ªéº»çƒ¦äº†æ‰€ä»¥æˆ‘ä»¬ç”¨thisåšè¿”å›ï¼Œå› ä¸ºthisæŒ‡å‘çš„å°±æ˜¯å½“å‰å¯¹è±¡ 1234567891011121314151617181920var CheckObject = function () &#123; &#125; CheckObject.prototype = &#123; checkName: function () &#123; console.log(&#x27;æ£€æŸ¥å§“ånew&#x27;); console.log(this); return this //è¿”å›å½“å‰å¯¹è±¡ &#125;, checkAge: function () &#123; console.log(&#x27;æ£€æŸ¥å¹´é¾„new&#x27;); return this; &#125;, checkSex: function () &#123; console.log(&#x27;æ£€æŸ¥æ€§åˆ«new&#x27;); return this; &#125;&#125;var d = new CheckObject();d.checkName().checkSex().checkSex(); å‡½æ•°çš„ç¥–å…ˆ12345Function.prototype.addMethod = function(name,fn)&#123; this[name] = fn; return this;&#125; æœ€åä¸¾ä¸€ä¸ªç®€å•æ —å­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;è¡¨å•éªŒè¯éœ€æ±‚&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; éœ€æ±‚è¯´æ˜ï¼šç»™è¡¨å•æäº¤å¡«å†™éªŒè¯ç æ ¡éªŒæ–¹æ³• &lt;/div&gt; ç”¨æˆ·åï¼š &lt;input type=&quot;text&quot; value=&quot;&quot; id=&quot;name&quot;&gt; é‚®ç®±ï¼š &lt;input type=&quot;email&quot; value=&quot;&quot;&gt; å¯†ç ï¼š &lt;input type=&quot;text&quot; value=&quot;&quot; maxlength=&quot;11&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;æäº¤&quot;&gt; &lt;script&gt; window.onload = function() &#123; var name = document.getElementsByTagName(&quot;input&quot;)[0]; var email = document.getElementsByTagName(&quot;input&quot;)[1]; var pwd = document.getElementsByTagName(&quot;input&quot;)[2]; var btn = document.getElementsByTagName(&quot;input&quot;)[3]; btn.onclick = function() &#123; //è¿è¡Œ var nameVal = name.value; console.log(nameVal); var emailVal = email.value; var pwdVal = pwd.value; method.checkName(nameVal).checkEmail(emailVal).checkPwd(pwdVal); &#125; &#125; //åŸå‹è¿ä¸Šæ·»åŠ æ–¹æ³• é¿å…å…¨å±€æ±¡æŸ“ Function.prototype.addMethod = function(name, fn) &#123; // body... this[name] = fn; &#125; var method = new Function(); method.addMethod(&quot;checkName&quot;, function(str) &#123; if (!str) &#123; alert(&#x27;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#x27;); &#125; else if (str.length &lt; 6) &#123; alert(&#x27;ç”¨æˆ·åé•¿åº¦å¤§äº6&#x27;); &#125; else &#123; return this; &#125; &#125;) method.addMethod(&quot;checkEmail&quot;, function(str) &#123; if (!str) &#123; alert(&#x27;è¿™æ˜¯éªŒè¯é‚®ç®±&#x27;); &#125; else &#123; return this; &#125; &#125;) method.addMethod(&quot;checkPwd&quot;, function(str) &#123; if (!str) &#123; alert(&#x27;è¿™æ˜¯è¾“å…¥éªŒè¯å¯†ç &#x27;); &#125; else if (str.length &lt; 6) &#123; alert(&#x27;è¿™æ˜¯å¤§äº6ä½éªŒè¯å¯†ç &#x27;); &#125; else &#123; return this; &#125; &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://mariogogogo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"JAVASCRIPTå­¦ä¹ ç¬”è®°ä¹‹DOMçŸ¥è¯†ç‚¹æ€»ç»“","slug":"Javascriptå­¦ä¹ ç¬”è®°ä¹‹DOMçŸ¥è¯†ç‚¹æ€»ç»“","date":"2017-09-13T07:13:48.000Z","updated":"2020-09-16T09:07:37.000Z","comments":true,"path":"2017/09/13/Javascriptå­¦ä¹ ç¬”è®°ä¹‹DOMçŸ¥è¯†ç‚¹æ€»ç»“/","link":"","permalink":"http://mariogogogo.github.io/2017/09/13/Javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BDOM%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/","excerpt":"JavaScriptçš„windowå¯¹è±¡å¯¹åº”ç€æµè§ˆå™¨çª—å£æœ¬èº«ï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ç»Ÿç§°ä¸ºBOMï¼ˆæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œå¦‚window.open(),window.locationç­‰ã€‚","text":"JavaScriptçš„windowå¯¹è±¡å¯¹åº”ç€æµè§ˆå™¨çª—å£æœ¬èº«ï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ç»Ÿç§°ä¸ºBOMï¼ˆæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œå¦‚window.open(),window.locationç­‰ã€‚ JavaScriptçš„documentå¯¹è±¡æ˜¯æŒ‡æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œä¸»è¦æ˜¯å¤„ç†ç½‘é¡µå†…å®¹ã€‚DOMï¼ˆDocument Object Modelï¼‰å³æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œæ˜¯é’ˆå¯¹ HTML å’Œ XML æ–‡æ¡£çš„ API ã€‚å­—æ¯DæŒ‡documentï¼ˆæ–‡æ¡£ï¼‰ï¼Œå­—æ¯OæŒ‡objectï¼ˆå¯¹è±¡ï¼‰ï¼Œå­—æ¯æŒ‡Modelï¼ˆæ¨¡å‹ï¼‰ã€‚DOM æç»˜äº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„èŠ‚ç‚¹æ ‘ã€‚èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªè¿æ¥ç‚¹ï¼Œæ–‡æ¡£æ˜¯ç”±èŠ‚ç‚¹æ„æˆçš„é›†åˆï¼ŒDOMçš„èŠ‚ç‚¹ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šå…ƒç´ èŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹ï¼ˆä¸æ˜¯æ–‡æœ¬å†…å®¹ï¼‰ã€å±æ€§èŠ‚ç‚¹ã€‚ è·å–èŠ‚ç‚¹çš„åç§°å’Œç±»å‹nodeNameå±æ€§ç”¨æ¥è·å–èŠ‚ç‚¹çš„åç§°ï¼Œæ–‡æœ¬èŠ‚ç‚¹è¿”å›#text,å…ƒç´ èŠ‚ç‚¹è¿”å›æ ‡ç­¾åç§°ï¼ˆæ­¤æ—¶ç­‰ä»·äºtagNameï¼‰ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.nodeName nodeTypeå±æ€§ç”¨æ¥è·å–èŠ‚ç‚¹çš„ç±»å‹ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼š1ï¼Œå±æ€§èŠ‚ç‚¹ï¼š2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ï¼š3ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.nodeTypenodeValueå±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®èŠ‚ç‚¹çš„å€¼ã€‚å…ƒç´ èŠ‚ç‚¹è¿”å› null ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.nodeValue è·å–å…ƒç´ èŠ‚ç‚¹çš„æ–¹å¼document.getElementById é€šè¿‡IDæŸ¥æ‰¾ï¼Œè¿”å›å”¯ä¸€å…ƒç´ èŠ‚ç‚¹ document.getElementsByName é€šè¿‡è¡¨å•å…ƒç´ nameå±æ€§æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„ document.getElementsByTagName é€šè¿‡æ ‡ç­¾åç§°æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„ä»¥ä¸‹ä¸‰ç§æ–¹æ³•å±äºHTML5 DOMï¼Œå¹¶éæ‰€æœ‰æµè§ˆå™¨æ”¯æŒï¼ˆå¦‚æŸäº›ä½ç‰ˆæœ¬IEå°±ä¸æ”¯æŒï¼‰ï¼Œå±äºé«˜çº§æ–¹æ³• document.getElementsByClassName é€šè¿‡classå±æ€§çš„ç±»åæŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ èŠ‚ç‚¹æ•°ç»„ document.querySelectoré€šè¿‡selectoræ¡ä»¶è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œåªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹document.querySelectorAllé€šè¿‡selectoræ¡ä»¶è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œè¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ èŠ‚ç‚¹æ•°ç»„ï¼Œå¤šæ¡ä»¶ä½¿ç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºè¦æŸ¥æ‰¾çš„å…ƒç´ å¿…é¡»ç¬¦åˆæ‰€æœ‰é€—å·åˆ†éš”çš„æ¡ä»¶ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ åªç¬¦åˆé€—å·åˆ†éš”çš„æ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼Œåˆ™ä¸ä¼šè¢«è¿”å› å°ç»“ï¼š getElementByIdå’ŒquerySelectoråªè¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œè€ŒgetElementsByNameã€getElementsByTagNameã€getElementsByClassNameã€querySelectorAllè¿”å›çš„æ˜¯å…ƒç´ èŠ‚ç‚¹(ç±»)æ•°ç»„ èŠ‚ç‚¹æŒ‡é’ˆchildNodeså±æ€§ç”¨æ¥è·å–å…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œè¿”å›èŠ‚ç‚¹æ•°ç»„ã€‚è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.childNodes; childrenå±æ€§å¯ä»¥ç”¨æ¥è·å–å¿½ç•¥äº†ç©ºç™½èŠ‚ç‚¹çš„æœ‰æ•ˆèŠ‚ç‚¹ï¼ˆåœ¨æŸäº›æµè§ˆå™¨ä¸Šï¼Œç©ºç™½ç¬¦æˆ–æ¢è¡Œç¬¦ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.children; firstChildå±æ€§å¯ä»¥ç”¨æ¥è·å–å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç­‰ä»·äº childNodes[0]ã€‚è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.firstChild; lastChildå±æ€§å¯ä»¥ç”¨æ¥è·å–å…ƒç´ çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç­‰ä»·äº childNodes[childNodes.length-1]ã€‚è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.lastChild; previousSiblingå±æ€§ç”¨æ¥è·å–ç›®æ ‡èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.previousSibling; nextSiblingå±æ€§ç”¨æ¥è·å–ç›®æ ‡èŠ‚ç‚¹çš„åä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.nextSibling; parentNodeå±æ€§ç”¨æ¥è·å–å·²çŸ¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šå­èŠ‚ç‚¹.parentNode; ownerDocumentå±æ€§ç”¨æ¥å½“å‰èŠ‚ç‚¹æ‰€åœ¨æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ï¼Œç­‰ä»·äºdocumentã€‚è¯­æ³•ï¼šç›®æ ‡èŠ‚ç‚¹.ownerDocument; èŠ‚ç‚¹çš„æ“ä½œcreateElementæ–¹æ³•ç”¨æ¥åˆ›å»ºå…ƒç´ èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createElement(â€˜å…ƒç´ æ ‡ç­¾åç§°â€™); createAttributeæ–¹æ³•ç”¨æ¥åˆ›å»ºå±æ€§èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createAttribute(â€˜å±æ€§åç§°â€™); createTextNodeæ–¹æ³•ç”¨æ¥åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šdocument.createTextNode(â€˜æ–‡æœ¬å†…å®¹â€™); appendChildæ–¹æ³•ç”¨æ¥åœ¨ç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆå¯ä»¥æ˜¯createElementåˆ›å»ºçš„å…ƒç´ èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯createTextNodeåˆ›å»ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚è¯­æ³•ï¼šparent.appendChild(è¦æ’å…¥çš„èŠ‚ç‚¹); insertBeforeæ–¹æ³•ç”¨æ¥åœ¨ç›®æ ‡å…ƒç´ çš„å‰é¢æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ èŠ‚ç‚¹ï¼Œæ­¤æ—¶çš„æŒ‡é’ˆåœ¨ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ä¸Šã€‚è¯­æ³•ï¼šparent.insertBefore(newElement,targetElement); DOMä¸­æ²¡æœ‰insertAfterè¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥æ¨¡æ‹ŸinsertAfter;/* newElement : è¦æ’å…¥çš„æ–°å…ƒç´  targetElement : ç›®æ ‡å…ƒç´ */ 12345678910111213141516function insertAfter(newElement,targetElement)&#123; var parent = targetElement.parentNode; if(parent.lastChild == targetElement)&#123; /* å¦‚æœç›®æ ‡å…ƒç´ æ˜¯parentçš„æœ€åä¸€ä¸ªå­å…ƒç´ ï¼Œåˆ™æŠŠæ–°å…ƒç´ è¿½åŠ åˆ°parentå…ƒç´ ä¸Šï¼Œ ä¹Ÿå°±æ˜¯åœ¨parentçš„å­å…ƒç´ çš„æœ«å°¾ä½ç½®æ·»åŠ æ–°å…ƒç´  */ parent.appendChild(newElement); &#125;else&#123; /* å¦åˆ™ï¼Œå°±æŠŠæ–°å…ƒç´ æ·»åŠ åˆ°ç›®æ ‡å…ƒç´ å’Œç›®æ ‡å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ä¹‹é—´ */ parent.insertBefore(newElement,targetElement.nextSibling); &#125;&#125; replaceChildæ–¹æ³•ç”¨æ¥æ›¿æ¢ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œæ­¤æ—¶çš„æŒ‡é’ˆåœ¨ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ä¸Šã€‚è¯­æ³•ï¼šparent.replaceChild(replaceElement,targetElement); cloneChildæ–¹æ³•ç”¨æ¥å…‹éš†ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œä¼ é€’ä¸€ä¸ªå¸ƒå°”å‚æ•°ï¼Œå‚æ•°ä¸ºtrueæ—¶è¡¨ç¤ºå¤åˆ¶å½“å‰èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå‚æ•°ä¸ºfalseæ—¶è¡¨ç¤ºæ”¯ä»˜è‡³å½“å‰èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .cloneChild(true|false); removeChildæ–¹æ³•ç”¨æ¥åˆ é™¤ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹ã€‚è¯­æ³•ï¼šremoveChild(è¦åˆ é™¤çš„èŠ‚ç‚¹); getAttributeæ–¹æ³•ç”¨æ¥è·å–ä¸€ä¸ªå±æ€§çš„å€¼ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .getAttribute(å…ƒç´ å±æ€§åç§°); setAttributeæ–¹æ³•ç”¨æ¥è®¾ç½®ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ²¡æœ‰è¯¥å±æ€§åˆ™åˆ›å»ºã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .setAttribute(å…ƒç´ å±æ€§åç§°,å±æ€§å€¼); removeAttributeæ–¹æ³•ç”¨æ¥åˆ é™¤ä¸€ä¸ªå±æ€§èŠ‚ç‚¹ã€‚è¯­æ³•ï¼šç›®æ ‡å…ƒç´ .removeAttribute(è¦åˆ é™¤çš„å±æ€§åç§°); DOMæ“ä½œå†…å®¹styleå±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®å…ƒç´ çš„è¡Œå†…æ ·å¼ã€‚è¯­æ³•ï¼šelement.style;styleå±æ€§åªèƒ½è·å–å’Œè®¾ç½®è¡Œå†…æ ·å¼ï¼Œå¯¹äºå¦‚font-sizeè¿™ç§æ ·å¼å±æ€§ï¼Œåº”è¯¥å»æ‰ - å¹¶ä¸”å°† - åé¢çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Œé©¼å³°æ³•æ¥è·å–å’Œè®¾ç½® å¦‚ï¼šelement.style.fontSize , element.style.backgroundColor getComputedStyleå…¨å±€æ–¹æ³•ç”¨æ¥è·å–è®¡ç®—åçš„æ ·å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç±»å‹ï¼Œå¦‚:hover,:activeç­‰ä¼ªç±»ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼  null ,æŸäº›IEç‰ˆæœ¬ä½¿ç”¨currentStyleå±æ€§æ¥è·å– box.currentStyleã€‚è¯­æ³•ï¼šwindow.getComputedStyle(å…ƒç´ ï¼Œç±»å‹) classNameå±æ€§ç”¨æ¥è·å–å’Œè®¾ç½®å…ƒç´ çš„æ ·å¼åç§°ã€‚è¯­æ³•ï¼šelement.classNameè‡ªå®šä¹‰çš„ addClass() | hasClass() | removeClass() æ–¹æ³• 123456789101112131415161718192021//å…ƒç´ æ˜¯å¦å«æœ‰æŸæ ·å¼function hasClass(element,className)&#123; return !!element.className.match(new RegExp(&#x27;(\\\\s|^)&#x27;+className+&#x27;(\\\\s|$)&#x27;));&#125;//å‘å…ƒç´ æ·»åŠ æ–°æ ·å¼function addClass(element,className)&#123; if(hasClass(element,className) == false)&#123; element.className += &#x27; &#x27;+className; &#125; &#125;//ç§»é™¤å…ƒç´ çš„æŒ‡å®šæ ·å¼function removeClass(element,className)&#123; var currentClass = element.className; if(hasClass(element,className))&#123; currentClass = currentClass.replace(new RegExp(&#x27;(\\\\s|^)&#x27;+className+&#x27;(\\\\s|$)&#x27;),&#x27; &#x27;); //å»é™¤ç©ºæ ¼ currentClass = currentClass.replace(/(^\\s*)|(\\s*$)/g,&#x27;&#x27;); element.className = currentClass; &#125;&#125; OMæ“ä½œä½ç½®å’Œå¤§å°clientWidthå±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…å®½åº¦ï¼Œè¯¥å€¼å—æ»šåŠ¨æ¡å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œborderä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.clientWidth; clientHeightå±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…é«˜åº¦ï¼Œè¯¥å€¼å—æ»šåŠ¨æ¡å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œborderä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.clientHeight; offsetWidthå±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…å®½åº¦ï¼Œè¯¥å€¼å—è¾¹æ¡†å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œæ»šåŠ¨æ¡ä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.offsetWidth; offsetHeightå±æ€§ç”¨æ¥è·å–å…ƒç´ çš„å®é™…é«˜åº¦ï¼Œè¯¥å€¼å—è¾¹æ¡†å’Œå†…è¾¹è·å½±å“ï¼Œå¤–è¾¹è·å’Œæ»šåŠ¨æ¡ä¸ä¼šå½±å“ã€‚è¯­æ³•ï¼šelement.offsetHeight; offsetTopå’ŒoffsetLeftå±æ€§ç”¨æ¥è·å–å…ƒç´ ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®ã€‚è¯¥å€¼å—å¤–è¾¹è·å½±å“ã€‚è¯­æ³•ï¼šelement.offsetTop || element.offsetLeft; scrollTopå’ŒscrollLeftå±æ€§ç”¨æ¥è·å–æ»šåŠ¨æ¡è¢«éšè—çš„åŒºåŸŸå¤§å°ï¼Œä¹Ÿå¯è®¾ç½®å®šä½åˆ°è¯¥åŒºåŸŸï¼ˆæ¯”å¦‚è¿”å›é¡¶éƒ¨ï¼‰ã€‚è¯­æ³•ï¼šelement.scrollTop || element.scrollLeft || element.scrollTop = 0; å¸¸ç”¨åˆ°çš„ç®€æ´å¿«é€Ÿçš„DOCUMENTå±æ€§å’Œæ–¹æ³•document.title ç”¨æ¥è·å–æ–‡æ¡£æ ‡é¢˜ document.domain ç”¨æ¥è·å–å½“å‰åŸŸå document.URL ç”¨æ¥è·å–å½“å‰urlè·¯å¾„ document.forms è·å–è¡¨å•é›†åˆ document.images è·å–å›¾ç‰‡é›†åˆ document.body è·å–bodyå…ƒç´ èŠ‚ç‚¹ document.compatMode è¯†åˆ«æ–‡æ¡£æ¨¡å¼ æœ¬æ–‡æ ‡é¢˜ï¼šJavaScriptå­¦ä¹ ç¬”è®°ä¹‹DomçŸ¥è¯†ç‚¹æ€»ç»“ æœ¬æ–‡é“¾æ¥ï¼šhttps://smohan.net/blog/vhikuj","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"DOM","slug":"DOM","permalink":"http://mariogogogo.github.io/tags/DOM/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"Nodejsæ­å»ºsocket.ioèŠå¤©å®¤","slug":"Nodejsæ­å»ºsocket.ioèŠå¤©å®¤","date":"2017-09-07T16:00:00.000Z","updated":"2020-09-16T09:07:41.000Z","comments":true,"path":"2017/09/08/Nodejsæ­å»ºsocket.ioèŠå¤©å®¤/","link":"","permalink":"http://mariogogogo.github.io/2017/09/08/Nodejs%E6%90%AD%E5%BB%BAsocket.io%E8%81%8A%E5%A4%A9%E5%AE%A4/","excerpt":"ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚","text":"ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚ åŸç†ä»httpè®²èµ·HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨åªä¼šå“åº”æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†æ˜¯å®ƒä¸å®¢æˆ·ç«¯ä¹‹é—´ä¸å…·å¤‡æŒç»­è¿æ¥ã€‚æˆ‘ä»¬å¯ä»¥éå¸¸è½»æ¾çš„æ•è·æµè§ˆå™¨ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†ç›’å­ï¼‰ï¼Œè¿™ä¸ªäº‹ä»¶å¯ä»¥è½»æ¾äº§ç”Ÿä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’ï¼ˆæ¯”å¦‚Ajaxï¼‰ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å´æ˜¯ä¸å¯èƒ½çš„ï¼šæœåŠ¡å™¨ç«¯å‘ç”Ÿäº†ä¸€ä¸ªäº‹ä»¶ï¼ŒæœåŠ¡å™¨æ— æ³•å°†è¿™ä¸ªäº‹ä»¶çš„ä¿¡æ¯å®æ—¶ä¸»åŠ¨é€šçŸ¥å®ƒçš„å®¢æˆ·ç«¯ã€‚åªæœ‰åœ¨å®¢æˆ·ç«¯æŸ¥è¯¢æœåŠ¡å™¨çš„å½“å‰çŠ¶æ€çš„æ—¶å€™ï¼Œæ‰€å‘ç”Ÿäº‹ä»¶çš„ä¿¡æ¯æ‰ä¼šä»æœåŠ¡å™¨ä¼ é€’åˆ°å®¢æˆ·ç«¯ã€‚ WebSocketåè®® æœ€æ–°çš„HTML5åè®®ï¼Œåˆ¶å®šäº†WebSocketåè®®æ ‡å‡†ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»¥å…¨åŒå·¥çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚WebSocketçš„åŸç†éå¸¸çš„ç®€å•ï¼šåˆ©ç”¨HTTPè¯·æ±‚äº§ç”Ÿæ¡æ‰‹ï¼Œæ¡æ‰‹ä¹‹åï¼ŒäºŒè€…è½¬ç”¨TCPåè®®è¿›è¡Œäº¤æµï¼ˆQQçš„åè®®ï¼‰ã€‚ä½¿ç”¨WebSocketåè®®ï¼Œéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ”¯æŒæ‰å¯ä»¥ä½¿ç”¨ã€‚ Socket.IO Node.jsä»è¯ç”Ÿä¹‹æ—¥èµ·ï¼Œå°±æ”¯æŒWebSocketåè®®ã€‚ä¸è¿‡ï¼Œä»åº•å±‚ä¸€æ­¥ä¸€æ­¥æ­å»ºä¸€ä¸ªSocketæœåŠ¡å™¨å¾ˆè´¹åŠ²ï¼ˆæƒ³è±¡ä¸€ä¸‹Nodeå†™ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡éƒ½é‚£ä¹ˆè´¹åŠ²ï¼‰ã€‚æ‰€ä»¥ï¼Œæœ‰å¤§ç¥å¸®æˆ‘ä»¬å†™äº†ä¸€ä¸ªåº“Socket.IOã€‚ Socket.IOæ˜¯ä¸šç•Œè‰¯å¿ƒï¼Œæ–°æ‰‹ç¦éŸ³ã€‚å®ƒå±è”½äº†æ‰€æœ‰åº•å±‚ç»†èŠ‚ï¼Œè®©é¡¶å±‚è°ƒç”¨éå¸¸ç®€å•ã€‚å¹¶ä¸”è¿˜ä¸ºä¸æ”¯æŒWebSocketåè®®çš„æµè§ˆå™¨ï¼Œæä¾›äº†é•¿è½®è¯¢çš„é€æ˜æ¨¡æ‹Ÿæœºåˆ¶ã€‚Nodeçš„å•çº¿ç¨‹ã€éé˜»å¡I/Oã€äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œä½¿å®ƒéå¸¸é€‚åˆSocketæœåŠ¡å™¨ã€‚ æœåŠ¡å™¨ç«¯çš„é…ç½®å½“serveråˆ›å»ºå‡ºæ¥ä¹‹åï¼Œè¯­å¥12var io = require(&#x27;socket.io&#x27;)(server);èƒ½å¤Ÿå®ä¾‹åŒ–ioå¯¹è±¡ï¼Œæ­¤æ—¶ç½‘å€/socket.io/socket.io.jså°†è¢«é»˜è®¤æä¾›ä¸€ä¸ªé™æ€jsæ–‡ä»¶æœåŠ¡ã€‚ç›‘å¬ï¼š123io.on(&quot;connection&quot;,function(socket)&#123;&#125;);socketå¯¹è±¡æœ‰emitæ–¹æ³•å’Œonæ–¹æ³•ã€‚emitæ–¹æ³•ç”¨äºå‘é€ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œonæ–¹æ³•ç”¨äºç›‘å¬æœåŠ¡å™¨å‘é€çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚ å®¢æˆ·ç«¯ç«¯çš„é…ç½®HTMLé¡µé¢å¿…é¡»è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œä¸èƒ½ä¸ºæœ¬åœ°ã€‚HTMLé¡µé¢éœ€è¦å¼•ç”¨/socket.io/socket.io.jsæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œio()å‡½æ•°ï¼Œå¹¶å¾—åˆ°socketå¯¹è±¡ã€‚socketå¯¹è±¡æœ‰emitæ–¹æ³•å’Œonæ–¹æ³•ã€‚emitæ–¹æ³•ç”¨äºå‘é€ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œonæ–¹æ³•ç”¨äºç›‘å¬æœåŠ¡å™¨å‘é€çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚ Expressä¸Socket.IOExpressæ¡†æ¶å¯ä»¥å’ŒSocket.IOæ­é…ä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½åƒé€šå¸¸çš„Expressç¨‹åºé‚£æ ·ï¼Œç”¨app.listenè¿›è¡Œç›‘å¬äº†ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç§å›ºå®šçš„æ¨¡å¼ï¼š 12345var express = require(&#x27;express&#x27;);var app = express();var http = require(&#x27;http&#x27;).Server(app);var io = require(&#x27;socket.io&#x27;)(http);http.listen(3000); ä»£ç ç™»é™†é¡µé¢12345678910&lt;body&gt; &lt;div&gt; &lt;form action=&quot;/check&quot; method=&quot;get&quot;&gt; è¾“å…¥æ˜µç§°ï¼š &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;å‘é€æ¶ˆæ¯&quot;&gt; &lt;/form&gt; &lt;/div&gt;&lt;/body&gt; 123456789101112131415161718192021222324252627282930&lt;h1&gt;socket.ioèŠå¤©å®¤ æ¬¢è¿ä¸»æ·«ï¼š&lt;span id=&quot;name&quot;&gt;&lt;%=name%&gt;&lt;/span&gt;&lt;/h1&gt; &lt;ul id=&quot;messages&quot;&gt;&lt;/ul&gt; &lt;div class=&quot;caozuo&quot;&gt; &lt;input id=&quot;m&quot; autocomplete=&quot;off&quot; /&gt;&lt;button&gt;Send&lt;/button&gt; &lt;/div&gt; &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://libs.baidu.com/jquery/1.11.3/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var socket = io(); $(&#x27;#m&#x27;).keydown(function(e) &#123; if (e.keyCode == 13) &#123; //ç‚¹å‡»å‘é€æŒ‰é’®ï¼Œæäº¤è¾“å…¥çš„ä¿¡æ¯ socket.emit(&#x27;message&#x27;, &#123; &quot;msg&quot;: $(&#x27;#m&#x27;).val(), &quot;name&quot;: $(&quot;#name&quot;).html() &#125;); console.log($(&quot;#m&quot;).val()); $(this).val(&#x27;&#x27;); // return false; //æ¥æ”¶åˆ°chat messageæ—¶ &#125; &#125;) //ç›‘å¬æœåŠ¡ç«¯ä¼ å›æ¥çš„æ•°æ® socket.on(&#x27;message&#x27;, function(msg) &#123; //å°†chat messageæ˜¾ç¤ºåœ¨é¡µé¢ console.log(msg); $(&#x27;#messages&#x27;).prepend(&quot;&lt;li&gt;&lt;b&gt;&quot; + msg.name + &quot;:&lt;/b&gt;&quot; + msg.msg + &quot;&lt;/li&gt;&quot;); &#125;); &lt;/script&gt; åå°ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980var express = require(&quot;express&quot;);var app = express();var http = require(&quot;http&quot;).Server(app);//åˆ›å»ºä¸€ä¸ªioå¯¹è±¡var io = require(&quot;socket.io&quot;)(http);//sessionä¿å­˜ç”¨æˆ·åvar session = require(&#x27;express-session&#x27;);//ä½¿ç”¨sessionapp.use(session(&#123; secret: &#x27;keyboard cat&#x27;, resave: false, saveUninitialized: true&#125;));app.set(&quot;view engine&quot;, &quot;ejs&quot;);//ä¸­é—´ä»¶ é¦–é¡µapp.get(&quot;/&quot;, function(req, res, next) &#123; res.render(&quot;roomLogin&quot;);&#125;)var allUser = [];//ç¡®è®¤ç™»é™†app.get(&quot;/check&quot;, function(req, res, next) &#123; console.log(req.query.name); var name = req.query.name; if (!name) &#123; res.send(&quot;å¿…é¡»å¡«å†™ç”¨æˆ·å&quot;); return; &#125; if (allUser.indexOf(name) != -1) &#123; res.send(&quot;ç”¨æˆ·åå·²ç»è¢«å ç”¨&quot;); return; &#125; allUser.push(name); //ä¿å­˜ç”¨æˆ·åç¼“å­˜ req.session.name = name; res.redirect(&quot;/chat&quot;);&#125;);app.get(&quot;/chat&quot;, function(req, res, next) &#123; if (!req.session.name) &#123; res.redirect(&quot;/&quot;); return; &#125; res.render(&quot;chat&quot;, &#123; name: req.session.name &#125;);&#125;)io.on(&quot;connection&quot;, function(socket) &#123; socket.on(&quot;message&quot;, function(msg) &#123; console.log(&#x27;msg:&#x27; + msg); //æŠŠå®¢æˆ·ç«¯ä¼ ç»™æˆ‘ä»¬çš„å€¼å†å¹¿æ’­å‘é€ç»™åˆ«äººå°±æ˜¯èŠå¤©å®¤ io.emit(&quot;message&quot;, msg); &#125;);&#125;);// var server = http.createServer(function(req, res) &#123;// if (req.url == &quot;/&quot;) &#123;// fs.readFile(&quot;./tellRoom.html&quot;, function(err, data) &#123;// res.end(data);// &#125;);// &#125;// &#125;);//ç›‘å¬é“¾æ¥äº‹ä»¶// io.on(&quot;connection&quot;, function(socket) &#123;// // console.log(&#x27;ä¸€ä¸ªå®¢æˆ·ç«¯è·å¾—è¿æ¥äº†&#x27;);// //æ¥æ”¶æ•°æ®// socket.on(&quot;question&quot;, function(msg) &#123;// console.log(&quot;æœ¬æœåŠ¡å™¨å¾—åˆ°æé—®&quot; + msg);// &#125;);// //å‘é€æ•°æ® å•å¯¹å•// // socket.emit(&quot;ans&quot;, &quot;åƒäº†&quot;);// //å¹¿æ’­ ä¸€å¯¹å¤š// io.emit(&quot;ans&quot;, &quot;åƒäº†&quot;);// &#125;);http.listen(3000, &quot;127.0.0.1&quot;); æ•ˆæœå›¾ï¼šç¨åä¸Šä¼ ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æ‡’ - -ï¼ï¼ï¼","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"JavaScript å¼€å‘è§„èŒƒ","slug":"JavaScript å¼€å‘è§„èŒƒ","date":"2017-08-20T16:00:00.000Z","updated":"2020-09-16T09:07:33.000Z","comments":true,"path":"2017/08/21/JavaScript å¼€å‘è§„èŒƒ/","link":"","permalink":"http://mariogogogo.github.io/2017/08/21/JavaScript%20%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/","excerpt":"","text":"åŸæ–‡é“¾æ¥ï¼šhttp://foreverz.cn/2017/08/23/JSå¼€å‘è§„èŒƒ/ ä»äº‹å‰ç«¯å¼€å‘ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸€ç›´åœ¨éµå¾ªç€è§„èŒƒåŒ–å¼€å‘ï¼Œä» js ä¹Ÿé€æ¸è½¬å‘äº† ts ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰äº†å¾ˆå¤šæ”¶è·ï¼Œåœ¨æ­¤æŠŠè‡ªå·±çš„å¼€å‘å¿ƒå¾—å†™ä¸‹æ¥ã€‚ æœ¬æ–‡å‚è€ƒäº†JavaScript å¼€å‘è§„èŒƒï¼Œå¹¶åšäº†è¡¥å……å’Œä¿®æ”¹ï¼ŒåŒæ—¶åˆ å»äº†æ¡†æ¶å¼€å‘ç›¸å…³çš„å†…å®¹(ä¾µåˆ )ã€‚ 1. å‘½åè§„èŒƒECMAScript è§„èŒƒä¸­æ ‡è¯†ç¬¦é‡‡ç”¨é©¼å³°å¤§å°å†™æ ¼å¼ï¼Œé©¼å³°å‘½åæ³•ç”±å°(å¤§)å†™å­—æ¯å¼€å§‹ï¼Œåç»­æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ã€‚æ ¹æ®é¦–å­—æ¯æ˜¯å¦å¤§å†™ï¼Œåˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š Pascal Case å¤§é©¼å³°å¼å‘½åæ³•ï¼šé¦–å­—æ¯å¤§å†™ã€‚egï¼šStudentInfoã€UserInfoã€ProductInfoCamel Case å°é©¼å³°å¼å‘½åæ³•ï¼šé¦–å­—æ¯å°å†™ã€‚egï¼šstudentInfoã€userInfoã€productInfoæ ‡è¯†ç¬¦ï¼Œåˆ™åŒ…æ‹¬å˜é‡ã€å‡½æ•°åã€ç±»åã€å±æ€§åå’Œå‡½æ•°æˆ–ç±»çš„å‚æ•°ï¼Œæ¯ä¸ªå‘½åæ–¹æ³•åˆç•¥æœ‰ä¸åŒï¼Œä¸‹é¢è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š 1.1 å˜é‡ å‘½åæ–¹æ³•ï¼šå°é©¼å³°å¼å‘½åæ³•ã€‚ å‘½åè§„èŒƒï¼šå‰ç¼€åº”å½“æ˜¯åè¯ã€‚(å‡½æ•°çš„åå­—å‰ç¼€ä¸ºåŠ¨è¯ï¼Œä»¥æ­¤åŒºåˆ†å˜é‡å’Œå‡½æ•°) å‘½åå»ºè®®ï¼šå°½é‡åœ¨å˜é‡åå­—ä¸­ä½“ç°æ‰€å±ç±»å‹ï¼Œå¦‚:lengthã€countç­‰è¡¨ç¤ºæ•°å­—ç±»å‹ï¼›è€ŒåŒ…å«nameã€titleè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚ 1234567// å¥½çš„å‘½åæ–¹å¼let maxCount = 10;let tableTitle = &#x27;LoginTable&#x27;;// ä¸å¥½çš„å‘½åæ–¹å¼let setCount = 10;let getTitle = &#x27;LoginTable&#x27;; 1.2 å¸¸é‡ å‘½åæ–¹æ³•ï¼šåç§°å…¨éƒ¨å¤§å†™ã€‚ å‘½åè§„èŒƒï¼šä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿æ¥ç»„åˆå‘½åï¼Œä¸‹åˆ’çº¿ç”¨ä»¥åˆ†å‰²å•è¯ã€‚ 123const MAX_COUNT = 10;const URL = &#x27;http://www.foreverz.com&#x27;; 1.3 å‡½æ•° å‘½åæ–¹æ³•ï¼šå°é©¼å³°å¼å‘½åæ³•ã€‚ å‘½åè§„èŒƒï¼šå‰ç¼€åº”å½“ä¸ºåŠ¨è¯ã€‚ å‘½åå»ºè®®ï¼šå¯ä½¿ç”¨å¸¸è§åŠ¨è¯çº¦å®š åŠ¨è¯ å«ä¹‰ è¿”å›å€¼ can åˆ¤æ–­æ˜¯å¦å¯æ‰§è¡ŒæŸä¸ªåŠ¨ä½œ(æƒé™) å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šå¯æ‰§è¡Œï¼›falseï¼šä¸å¯æ‰§è¡Œ has åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªå€¼ å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šå«æœ‰æ­¤å€¼ï¼›falseï¼šä¸å«æœ‰æ­¤å€¼ is åˆ¤æ–­æ˜¯å¦ä¸ºæŸä¸ªå€¼ å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueï¼šä¸ºæŸä¸ªå€¼ï¼›falseï¼šä¸ä¸ºæŸä¸ªå€¼ get è·å–æŸä¸ªå€¼ å‡½æ•°è¿”å›ä¸€ä¸ªéå¸ƒå°”å€¼ set è®¾ç½®æŸä¸ªå€¼ æ— è¿”å›å€¼ã€è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸæˆ–è€…è¿”å›é“¾å¼å¯¹è±¡ load åŠ è½½æŸäº›æ•°æ® æ— è¿”å›å€¼æˆ–è€…è¿”å›æ˜¯å¦åŠ è½½å®Œæˆçš„ç»“æœ render æ¸²æŸ“ç”ŸæˆæŸäº›æ•°æ® æ— è¿”å›å€¼æˆ–è€…è¿”å›æ˜¯å¦æ¸²æŸ“å®Œæˆ 12345678// æ˜¯å¦å¯é˜…è¯»function canRead(): boolean &#123; return true;&#125;// è·å–åç§°function getName(): string &#123; return this.name;&#125; 1.4 ç±» &amp; æ„é€ å‡½æ•° å‘½åæ–¹æ³•ï¼šå¤§é©¼å³°å¼å‘½åæ³•ï¼Œé¦–å­—æ¯å¤§å†™ã€‚ å‘½åè§„èŒƒï¼šå‰ç¼€ä¸ºåç§°ã€‚ 1234567class Person &#123; public name: string; constructor(name) &#123; this.name = name; &#125;&#125;const person = new Person(&#x27;mevyn&#x27;); 1.5 ç±»çš„æˆå‘˜ ç±»çš„æˆå‘˜åŒ…å«ï¼š å…¬å…±å±æ€§å’Œæ–¹æ³•ï¼šè·Ÿå˜é‡å’Œå‡½æ•°çš„å‘½åä¸€æ ·ã€‚ ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼šå‰ç¼€ä¸º_(ä¸‹åˆ’çº¿)ï¼Œåé¢è·Ÿå…¬å…±å±æ€§å’Œæ–¹æ³•ä¸€æ ·çš„å‘½åæ–¹å¼ã€‚ 12345678910111213141516class Person &#123; private _name: string; constructor() &#123; &#125; // å…¬å…±æ–¹æ³• getName() &#123; return this._name; &#125; // å…¬å…±æ–¹æ³• setName(name) &#123; this._name = name; &#125;&#125;const person = new Person();person.setName(&#x27;mervyn&#x27;);person.getName(); // -&gt;mervyn 2. æ³¨é‡Šè§„èŒƒjs æ”¯æŒä¸‰ç§ä¸åŒç±»å‹çš„æ³¨é‡Šï¼šè¡Œå†…æ³¨é‡Šã€å•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šï¼š 2.1 è¡Œå†…æ³¨é‡Š è¯´æ˜ï¼šè¡Œå†…æ³¨é‡Šä»¥ä¸¤ä¸ªæ–œçº¿å¼€å§‹ï¼Œä»¥è¡Œå°¾ç»“æŸã€‚ è¯­æ³•ï¼šcode // è¿™æ˜¯è¡Œå†…æ³¨é‡Š ä½¿ç”¨æ–¹å¼ï¼š//(åŒæ–œçº¿)ä¸ä»£ç ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œå¹¶ä¸”//(åŒæ–œçº¿)ä¸æ³¨é‡Šæ–‡å­—ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚ å‘½åå»ºè®®ï¼š 1234567// ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªè§£é‡Šçš„è¯„è®º// -&gt; ç”¨æ¥æ˜¾ç¤ºè¡¨è¾¾å¼çš„ç»“æœï¼Œ// &gt;ç”¨æ¥æ˜¾ç¤º console çš„è¾“å‡ºç»“æœï¼Œfunction test() &#123; // æµ‹è¯•å‡½æ•° console.log(&#x27;Hello World!&#x27;); // &gt;Hello World! return 3 + 2; // -&gt;5&#125; 2.2 å•è¡Œæ³¨é‡Š è¯´æ˜ï¼šå•è¡Œæ³¨é‡Šä»¥ä¸¤ä¸ªæ–œçº¿å¼€å§‹ï¼Œä»¥è¡Œå°¾ç»“æŸã€‚ è¯­æ³•ï¼š// è¿™æ˜¯å•è¡Œæ³¨é‡Š ä½¿ç”¨æ–¹å¼ï¼šå•ç‹¬ä¸€è¡Œï¼š//(åŒæ–œçº¿)ä¸æ³¨é‡Šæ–‡å­—ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚ egï¼š // è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼›1)å•ç‹¬åœ¨ä¸€è¡ŒsetTitle();2.3 å¤šè¡Œæ³¨é‡Š è¯´æ˜ï¼šä»¥ / å¼€å¤´ï¼Œ / ç»“å°¾ è¯­æ³•ï¼š/ æ³¨é‡Šè¯´æ˜ / ä½¿ç”¨æ–¹æ³•ï¼šè‹¥å¼€å§‹/å’Œç»“æŸ/éƒ½åœ¨ä¸€è¡Œï¼Œæ¨èé‡‡ç”¨å•è¡Œæ³¨é‡Šã€‚è‹¥è‡³å°‘ä¸‰è¡Œæ³¨é‡Šæ—¶ï¼Œç¬¬ä¸€è¡Œä¸º/ï¼Œæœ€åè¡Œä¸º/ï¼Œå…¶ä»–è¡Œä»¥å¼€å§‹ï¼Œå¹¶ä¸”æ³¨é‡Šæ–‡å­—ä¸ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚ 123456/** ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œåä¼šè°ƒç”¨setTitle()å‡½æ•°* setTitle()ï¼šè®¾ç½®titleçš„å€¼*/setTitle(); 2.4 å‡½æ•°(æ–¹æ³•)æ³¨é‡Š è¯´æ˜ï¼šå‡½æ•°(æ–¹æ³•)æ³¨é‡Šä¹Ÿæ˜¯å¤šè¡Œæ³¨é‡Šçš„ä¸€ç§ï¼Œä½†æ˜¯åŒ…å«äº†ç‰¹æ®Šçš„æ³¨é‡Šè¦æ±‚ï¼Œå‚ç…§JSDoc 123456/*** å‡½æ•°è¯´æ˜* @å…³é”®å­—*/å¸¸ç”¨æ³¨é‡Šå…³é”®å­—ï¼š(åªåˆ—å‡ºä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨) æ³¨é‡Šå è¯­æ³• å«ä¹‰ ç¤ºä¾‹@param @param å‚æ•°å {å‚æ•°ç±»å‹} æè¿°ä¿¡æ¯ æè¿°å‚æ•°çš„ä¿¡æ¯ @param name {String} ä¼ å…¥åç§°@return @return {è¿”å›ç±»å‹} æè¿°ä¿¡æ¯ æè¿°è¿”å›å€¼çš„ä¿¡æ¯ @return {Boolean} true:å¯æ‰§è¡Œ;false:ä¸å¯æ‰§è¡Œ@author @author ä½œè€…ä¿¡æ¯ [é™„å±ä¿¡æ¯ï¼šå¦‚é‚®ç®±ã€æ—¥æœŸ] æè¿°æ­¤å‡½æ•°ä½œè€…çš„ä¿¡æ¯ @author å¼ ä¸‰ 2015/07/21@version @version XX.XX.XX æè¿°æ­¤å‡½æ•°çš„ç‰ˆæœ¬å· @version 1.0.3@example @example ç¤ºä¾‹ä»£ç  æ¼”ç¤ºå‡½æ•°çš„ä½¿ç”¨ @example setTitle(â€˜æµ‹è¯•â€™)/** åˆå¹¶Gridçš„è¡Œ @param grid {Ext.Grid.Panel} éœ€è¦åˆå¹¶çš„Grid @param cols {Array} éœ€è¦åˆå¹¶åˆ—çš„Index(åºå·)æ•°ç»„ï¼›ä»0å¼€å§‹è®¡æ•°ï¼Œåºå·ä¹ŸåŒ…å«ã€‚ @param isAllSome {Boolean} ï¼šæ˜¯å¦2ä¸ªtrçš„colså¿…é¡»å®Œæˆä¸€æ ·æ‰èƒ½è¿›è¡Œåˆå¹¶ã€‚trueï¼šå®Œæˆä¸€æ ·ï¼›false(é»˜è®¤)ï¼šä¸å®Œå…¨ä¸€æ · @return void @author polk6 2015/07/21 @example | å¹´é¾„ | å§“å | | å¹´é¾„ | å§“å | â€”â€”â€”â€”â€”â€“ mergeCells(grid,[0]) â€”â€”â€”â€”â€”â€“ | 18 | å¼ ä¸‰ | =&gt; | | å¼ ä¸‰ | â€”â€”â€”â€”â€”â€“ - 18 â€”â€”â€” | 18 | ç‹äº” | | | ç‹äº” | / 1234function mergeCells(grid: Ext.Grid.Panel, cols: Number[], isAllSome: boolean = false) &#123; // Do Something&#125; è¿™é‡Œåªæ˜¯è¯¦ç»†è®²è§£äº† æ ‡è¯†ç¬¦å‘½åè§„èŒƒ å’Œ ä»£ç æ³¨é‡Šè§„èŒƒï¼Œè¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„è§„èŒƒæ²¡æ¥å¾—åŠå¡«å……ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹Airbnb JavaScript Style Guide å‚è€ƒä¹¦ç±å’Œæ–‡ç« ï¼šHTML/CSS/JSç¼–ç è§„èŒƒ JavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰ JavaScript å¼€å‘è§„èŒƒ","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://mariogogogo.github.io/tags/%E8%A7%84%E8%8C%83/"}]},{"title":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸‰ï¼‰","slug":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸‰ï¼‰","date":"2017-08-17T16:00:00.000Z","updated":"2020-09-16T09:07:08.000Z","comments":true,"path":"2017/08/18/é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸‰ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/08/18/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%89%EF%BC%89/","excerpt":"","text":"æ³¨æ„å®ç°åŠŸèƒ½ï¼š æŸ¥æ‰¾å½“å‰æ—¥æœŸå¹¶å®ç°ä¹‹å10å¤©å¯ç‚¹å‡»ï¼Œå…¶ä½™å¤©æ•°ä¸å¯ç‚¹å‡» ç‚¹å‡»å·¦å³æŒ‰é’®åˆ‡æ¢æœˆä»½ ç‚¹å‡»ç¬¦åˆè§„åˆ™çš„æ—¥æœŸæŠŠæ—¥æœŸåŠä»·æ ¼æ˜¾ç¤ºåœ¨å¯¹åº”è¾“å…¥æ¡†ä¸­ åˆ¤æ–­å½“æœ€åä¸€è¡Œæ²¡æœ‰æ—¥æœŸæ˜¾ç¤ºæ—¶å€™å¯¹åº”é«˜åº¦ä¸ä¸Šä¸€è¡Œæ˜¾ç¤ºæ—¥æœŸçš„é«˜åº¦ä¸€è‡´ æ•ˆæœå›¾ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334window.onload = function() &#123; var aInput = document.getElementsByTagName(&#x27;input&#x27;); var oDiv = document.getElementById(&#x27;div1&#x27;); var oNowTime = document.getElementById(&#x27;nowTime&#x27;); var oNextTime = document.getElementById(&#x27;nextTime&#x27;); //è·å–span var aNowSpan = oNowTime.getElementsByTagName(&quot;span&quot;); var aNextSpan = oNextTime.getElementsByTagName(&quot;span&quot;); //è·å–æ‰€ä»¥td var aTd = oDiv.getElementsByTagName(&quot;td&quot;); var bBtn = true; aInput[2].onclick = function() &#123; var oDate = new Date(); if(bBtn) &#123; oDiv.style.display = &quot;block&quot;; //åˆ¤æ–­æ˜¯å¦ä¸‹ä¸€å¹´ if(oDate.getMonth() + 1 == 12) &#123; //ä¼ ä½ç½® å¹´ æœˆ trueä»£è¡¨è¿™ä¸ªæœˆè¿˜æ˜¯ä¸‹ä¸€ä¸ªæœˆ showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + 1, true); showDate(oNextTime, oDate.getFullYear() + 1, 1); &#125; else &#123; showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + 1, true); showDate(oNextTime, oDate.getFullYear(), oDate.getMonth() + 2); &#125; //è°ƒç”¨æŸ¥æ‰¾æ—¥æœŸæ–¹æ³•æ‰¾åˆ°å½“å‰æ—¥æœŸæ‰€å¯¹åº”çš„td showColor(oDate.getDate()); showBtn(); showClick(); hideLastTr(); &#125; else &#123; oDiv.style.display = &quot;none&quot;; &#125; bBtn = !bBtn; &#125;; function showDate(obj, year, month, bBtn) &#123; var oDate = new Date(); //è®¾ç½®å¼€å…³é˜²æ­¢é‡æ–°ç”Ÿæˆ if(!obj.bBtn) &#123; //ç”Ÿæˆå‘¨è¡¨æ ¼table tableæœ‰ä¸ªç‰¹åˆ«åœ¨ieä¸‹ç”¨HTMLæ˜¯ä¸å…¼å®¹çš„ obj.oTitle = document.createElement(&#x27;div&#x27;); obj.oTitle.className = &#x27;title&#x27;; obj.appendChild(obj.oTitle); var oTable = document.createElement(&#x27;table&#x27;); var oThead = document.createElement(&#x27;thead&#x27;); var oTr = document.createElement(&#x27;tr&#x27;); var arr = [&#x27;å‘¨æ—¥&#x27;, &#x27;å‘¨ä¸€&#x27;, &#x27;å‘¨äºŒ&#x27;, &#x27;å‘¨ä¸‰&#x27;, &#x27;å‘¨å››&#x27;, &#x27;å‘¨äº”&#x27;, &#x27;å‘¨å…­&#x27;]; for(var i = 0; i &lt; 7; i++) &#123; var oTh = document.createElement(&#x27;th&#x27;); oTh.innerHTML = arr[i]; if(i == 0 || i == 6) &#123; oTh.className = &quot;red&quot;; &#125; oTr.appendChild(oTh); &#125; oThead.appendChild(oTr); oTable.appendChild(oThead); //ç”Ÿæˆæ—¥æœŸ ç”Ÿæˆ5ä¸ªè¡Œ 7ä¸ªåˆ— æ¯ä¸€è¡Œä¸ƒä¸ªåˆ— var oTbody = document.createElement(&#x27;tBody&#x27;); for(var i = 0; i &lt; 6; i++) &#123; var oTr = document.createElement(&quot;tr&quot;); for(var j = 0; j &lt; 7; j++) &#123; var oTd = document.createElement(&quot;td&quot;); oTr.appendChild(oTd); &#125; oTbody.appendChild(oTr); &#125; oTable.appendChild(oTbody); obj.appendChild(oTable); obj.bBtn = true; &#125; //æ ¹æ®bbtnåˆ¤æ–­å·¦è¾¹å³è¾¹çš„å¹´ä»½æ¢ä¸€ç§å†™æ³• if(bBtn) &#123; obj.oTitle.innerHTML = &#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27; + (month - 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;; &#125; else &#123; obj.oTitle.innerHTML = &#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27; + (month + 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;; &#125; //ç”Ÿæˆæ¯ä¸€ä¸ªæœˆçš„å¤©æ•° æ¯æ¬¡ç‚¹å‡»æœˆä»½æ¸…ç©º var aTd = obj.getElementsByTagName(&#x27;td&#x27;); for(var i = 0; i &lt; aTd.length; i++) &#123; aTd[i].innerHTML = &#x27;&#x27;; &#125; //åˆ¤æ–­æœˆä»½çš„å¤©æ•° if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12) &#123; dayNum = 31; &#125; else if(month == 4 || month == 6 || month == 9 || month == 11) &#123; dayNum = 30; &#125; else if(month == 2 &amp;&amp; isLeapYear(year)) &#123; dayNum = 29; &#125; else &#123; dayNum = 28; &#125; oDate.setFullYear(year); oDate.setMonth(month - 1); oDate.setDate(1); console.log(oDate.getDay()); //æ ¹æ®1å· å¯¹åº”çš„ getDayï¼ˆï¼‰æ˜¯å‘¨å‡ ï¼Ÿ switch(oDate.getDay()) &#123; case 0: //å‘¨æ—¥ ç¬¬ä¸€ä¸ªtdå¼€å§‹éå† for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i].innerHTML = i + 1; &#125; break; case 1: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 1].innerHTML = i + 1; &#125; break; case 2: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 2].innerHTML = i + 1; &#125; break; case 3: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 3].innerHTML = i + 1; &#125; break; case 4: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 4].innerHTML = i + 1; &#125; break; case 5: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 5].innerHTML = i + 1; &#125; break; case 6: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 6].innerHTML = i + 1; &#125; break; &#125; //ajaxè¯·æ±‚ ajax(&#x27;data.js?&#x27; + Math.random(), function(str) &#123; var j = eval(&#x27;(&#x27; + str + &#x27;)&#x27;); console.log(j) var now = 0; for(var i = 0; i &lt; aTd.length; i++) &#123; if(aTd[i].innerHTML == 1) &#123; now = i; &#125; &#125; if(j.code) &#123; //å¦‚æœè¿™ä¸ªæœˆçš„å¤©æ•°å°äºæ•°ç»„é•¿åº¦åˆ™é•¿åº¦æœ€å¤šä¸ºæ—¥æœŸå¤©æ•° for(var i = 0; i &lt; j.list.length; i++) &#123; if(j.list[i]) &#123; var oP = document.createElement(&#x27;p&#x27;); oP.innerHTML = j.list[i] + &#x27;å…ƒ&#x27;; aTd[i + now].appendChild(oP); &#125; &#125; &#125; &#125;); //åˆ¤æ–­å¦‚æœå·¦è¾¹æ˜¯1æœˆ åˆ™ æŒ‰é’®åº”è¯¥æ˜¯12æœˆä»½ if(month == 1 &amp;&amp; bBtn) &#123; obj.oTitle.getElementsByTagName(&#x27;span&#x27;)[0].innerHTML = 12; &#125; else if(month == 12 &amp;&amp; !bBtn) &#123; obj.oTitle.getElementsByTagName(&#x27;span&#x27;)[0].innerHTML = 1; &#125; &#125;; //åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´ function isLeapYear(year) &#123; if(year % 4 == 0 &amp;&amp; year % 100 != 0) &#123; return true; &#125; else &#123; if(year % 400 == 0) &#123; return true; &#125; else &#123; return false; &#125; &#125; &#125;; function showColor(date) &#123; var result = [] var oDate = new Date(); var bBtn = true; var reg = new RegExp(&#x27;&#x27; + date + &#x27;(&lt;p&gt;)*&#x27;); var index = 0; for(var i = 0, len = aTd.length; i &lt; len; i++) &#123; if(aTd[i].innerHTML != &quot;&quot;) &#123; result.push(aTd[i]); &#125; &#125; //åˆ¤æ–­å½“å‰æ—¥æœŸ if(aNowSpan[1].innerHTML == oDate.getFullYear() &amp;&amp; aNowSpan[2].innerHTML == oDate.getMonth() + 1) &#123; for(var i = 0; i &lt; result.length; i++) &#123; if(reg.test(result[i].innerHTML) &amp;&amp; bBtn) &#123; result[i].className = &quot;red&quot;; index = i; bBtn = false; &#125; &#125; //æ‰¾åˆ°å½“å¤©æ—¥æœŸæ˜¯tdç¬¬å‡ ä¸ªç„¶åä»ä»Šå¤©å¼€å§‹å¾€åå‡ ä¸ªéƒ½å¯ä»¥é€‰æ‹© for(len = index + 11; index + 1 &lt; len; index++) &#123; result[index + 1].className = &quot;blue&quot;; &#125; &#125; else &#123; //æ¸…ç©ºæ¯ä¸ªtdçš„é¢œè‰²å˜ç°è‰² for(var i = 0; i &lt; result.length; i++) &#123; result[i].className = &quot;&quot;; &#125; &#125; &#125; function showBtn() &#123; //è·å–å·¦å³2è¾¹çš„æœˆä»½åŠå¹´ var leftMonth = parseInt(aNowSpan[0].innerHTML); var leftYear = parseInt(aNowSpan[1].innerHTML); var rightMonth = parseInt(aNextSpan[0].innerHTML); var rightYear = parseInt(aNextSpan[1].innerHTML); aNowSpan[0].parentNode.onclick = function() &#123; if(leftMonth == 12) &#123; showDate(oNowTime, leftYear - 1, leftMonth, true); showDate(oNextTime, leftYear, 1); &#125; else &#123; showDate(oNowTime, leftYear, leftMonth, true); showDate(oNextTime, leftYear, leftMonth + 1); &#125; showBtn(); showColor(new Date().getDate()); &#125; aNextSpan[0].parentNode.onclick = function() &#123; if(rightMonth == 1) &#123; showDate(oNowTime, rightYear, 12, true); showDate(oNextTime, rightYear + 1, rightMonth); &#125; else &#123; showDate(oNowTime, rightYear, rightMonth - 1, true); showDate(oNextTime, rightYear, rightMonth); &#125; showBtn(); showColor(new Date().getDate()); &#125; &#125; //ç‚¹å‡»äº‹ä»¶æ˜¾ç¤ºæ—¥æœŸåœ¨è¾“å…¥æ¡† function showClick() &#123; var re = /(\\d+)((&lt;p&gt;)*)/; var oDate = new Date(); for(var i = 0; i &lt; aTd.length; i++) &#123; aTd[i].index = i; aTd[i].onclick = function() &#123; //åˆ¤æ–­å¯ä»¥ç‚¹å‡»çš„æ—¥æœŸ if(this.className == &quot;red&quot; || this.className == &quot;blue&quot;) &#123; //åˆ¤æ–­å·¦è¾¹æ—¥æœŸè¿˜æ˜¯å³è¾¹æ—¥æœŸ if(this.index &lt; aTd.length / 2) &#123; this.innerHTML.replace(re, function($0, $1) &#123; aInput[0].value = oDate.getFullYear() + &#x27;-&#x27; + (oDate.getMonth() + 1) + &#x27;-&#x27; + $1; &#125;); &#125; else &#123; if((oDate.getMonth() + 2) == 1) &#123; this.innerHTML.replace(re, function($0, $1) &#123; aInput[0].value = oDate.getFullYear() + 1 + &#x27;-&#x27; + (oDate.getMonth() + 2) + &#x27;-&#x27; + $1; &#125;); &#125; else &#123; this.innerHTML.replace(re, function($0, $1) &#123; aInput[0].value = oDate.getFullYear() + &#x27;-&#x27; + (oDate.getMonth() + 2) + &#x27;-&#x27; + $1; &#125;); &#125; &#125; //åˆ¤æ–­è¡¨æ ¼å†…æ˜¯å¦æœ‰ä»·æ ¼æ˜¾ç¤º if(this.getElementsByTagName(&#x27;p&#x27;)[0]) &#123; aInput[1].value = this.getElementsByTagName(&#x27;p&#x27;)[0].innerHTML; &#125; else &#123; aInput[1].value = &#x27;&#x27;; &#125; oDiv.style.display = &#x27;none&#x27;; bBtn = true; &#125; &#125; &#125; &#125; //éšè—å¤šä½™çš„tdè¡¨æ ¼æ¡† function hideLastTr() &#123; var bBtn = true; var bBtn2 = true; for(var i = 35; i &lt; 42; i++) &#123; if(aTd[i].innerHTML != &#x27;&#x27;) &#123; bBtn = false; &#125; &#125; if(bBtn) &#123; for(var i = 35; i &lt; 42; i++) &#123;// aTd[i].style.display = &#x27;none&#x27;; aTd[i].style.height = &#x27;42px&#x27;; &#125; &#125; else &#123; for(var i = 35; i &lt; 42; i++) &#123; aTd[i].style.height = &#x27;&#x27;; &#125; &#125; for(var i = 77; i &lt; 84; i++) &#123; if(aTd[i].innerHTML != &#x27;&#x27;) &#123; bBtn2 = false; &#125; &#125; if(bBtn2) &#123; for(var i = 77; i &lt; 84; i++) &#123; aTd[i].style.height = &#x27;42px&#x27;; &#125; &#125; else &#123; for(var i = 77; i &lt; 84; i++) &#123; aTd[i].style.height = &#x27;&#x27;; &#125; &#125; &#125;&#125;","categories":[{"name":"ç»ƒä¹ Demo","slug":"ç»ƒä¹ Demo","permalink":"http://mariogogogo.github.io/categories/%E7%BB%83%E4%B9%A0Demo/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"Demo","slug":"Demo","permalink":"http://mariogogogo.github.io/tags/Demo/"}]},{"title":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸€ï¼‰","slug":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸€ï¼‰","date":"2017-08-16T16:00:00.000Z","updated":"2020-09-16T09:07:09.000Z","comments":true,"path":"2017/08/17/é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"æ€è·¯ï¼šé¦–å…ˆè·å–å…ƒç´ èŠ‚ç‚¹å…ƒç´ â€”&gt;æ ¹æ®ç‚¹å‡»äº‹ä»¶éšè—æ˜¾ç¤ºå…ƒç´ â€”&gt;å»ºç«‹showdateæ–¹æ³•ï¼ˆåˆ¤æ–­12æœˆ åˆ™å³è¾¹å¹´ä»½+1ï¼Œæœˆä»½1 ï¼‰â€”&gt;è¿˜è¦è®¾ç½®btnå¼€å…³ é˜²æ­¢å¤šæ¬¡é‡å»ºâ€”&gt;æ ¹æ®å…ƒç´ æ¸…ç©º forå¾ªç¯åˆ— è¡Œã€æŠŠ th tr theadåŠ å…¥tableâ€”&gt;æ ¹æ®åˆ¤æ–­æ¯ä¸€æ¬¡ç‚¹å‡»è¿›å…¥æœˆä»½å¿…é¡»å…ˆæ¸…ç©ºä¸€æ¬¡tdåˆ¤æ–­æœˆä»½å¤§å°åŠé—°å¹´â€”&gt; switchå¾ªç¯åŠ å…¥æ—¥æœŸ å¸ƒå±€æ˜¯è¿™æ ·ç´«çš„ HTML123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687&lt;input type=&quot;text&quot; /&gt;&lt;input type=&quot;text&quot; /&gt;&lt;input type=&quot;button&quot; value=&quot;ç¡®å®š&quot; /&gt;&lt;div id=&quot;div1&quot;&gt; &lt;div id=&quot;nowTime&quot;&gt; &lt;div class=&quot;title&quot;&gt; &lt;div class=&quot;l&quot;&gt;&lt;span&gt;3&lt;/span&gt;æœˆ&lt;/div&gt; &lt;div class=&quot;c&quot;&gt;&lt;span&gt;2000&lt;/span&gt;å¹´&lt;span&gt;3&lt;/span&gt;æœˆ&lt;/div&gt; &lt;/div&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;å‘¨ä¸€&lt;/th&gt; &lt;th&gt;å‘¨äºŒ&lt;/th&gt; &lt;th&gt;å‘¨ä¸‰&lt;/th&gt; &lt;th&gt;å‘¨å››&lt;/th&gt; &lt;th&gt;å‘¨äº”&lt;/th&gt; &lt;th class=&quot;red&quot;&gt;å‘¨å…­&lt;/th&gt; &lt;th class=&quot;red&quot;&gt;å‘¨æ—¥&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt; 1 &lt;p&gt;200å…ƒ&lt;/p&gt; &lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;div id=&quot;nextTime&quot;&gt; &lt;div class=&quot;title&quot;&gt; &lt;div class=&quot;r&quot;&gt;&lt;span&gt;3&lt;/span&gt;æœˆ&lt;/div&gt; &lt;div class=&quot;c&quot;&gt;&lt;span&gt;2000&lt;/span&gt;å¹´&lt;span&gt;3&lt;/span&gt;æœˆ&lt;/div&gt; &lt;/div&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;å‘¨ä¸€&lt;/th&gt; &lt;th&gt;å‘¨äºŒ&lt;/th&gt; &lt;th&gt;å‘¨ä¸‰&lt;/th&gt; &lt;th&gt;å‘¨å››&lt;/th&gt; &lt;th&gt;å‘¨äº”&lt;/th&gt; &lt;th class=&quot;red&quot;&gt;å‘¨å…­&lt;/th&gt; &lt;th class=&quot;red&quot;&gt;å‘¨æ—¥&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt; 1 &lt;p&gt;200å…ƒ&lt;/p&gt; &lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt;&lt;/div&gt; CSS12345678910111213141516*&#123; margin:0; padding:0; font-size:12px;&#125;#div1&#123; margin:20px; position:absolute; top:25px; left:10px; display:block;&#125;#nowTime&#123; width:330px; float:left;&#125;#nextTime &#123; width:330px; float:left; margin:0 0 0 10px;&#125;.title&#123; width:100%; height:30px; background:red; color:#FFFFFF; position:relative;&#125;.title .c&#123; text-align:center; line-height:30px;&#125;.title .l&#123; position:absolute; top:6px; left:5px;&#125;.title .r&#123; position:absolute; top:6px; right:5px;&#125;table&#123; width:100%; background:#dee3e9; color:#9ea7ac;&#125;table tr&#123; background:#f9fafc;&#125;table th&#123; width:46px; padding:5px;&#125;table td&#123; padding:5px; text-align:center;&#125;.red&#123; color:#FF0000;&#125;.blue&#123; color:#0000FF;&#125;table td p&#123; color:#FF0000;&#125;input&#123; margin:20px;&#125;","categories":[{"name":"ç»ƒä¹ Demo","slug":"ç»ƒä¹ Demo","permalink":"http://mariogogogo.github.io/categories/%E7%BB%83%E4%B9%A0Demo/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"Demo","slug":"Demo","permalink":"http://mariogogogo.github.io/tags/Demo/"}]},{"title":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆäºŒï¼‰","slug":"é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆäºŒï¼‰","date":"2017-08-16T16:00:00.000Z","updated":"2020-09-16T09:07:08.000Z","comments":true,"path":"2017/08/17/é¢å‘è¿‡ç¨‹-æ—¥å†ï¼ˆäºŒï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/08/17/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B-%E6%97%A5%E5%8E%86%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"","text":"ç°åœ¨ç”¨é¢å‘è¿‡ç¨‹æ–¹å¼ ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºæˆ–éšè—æ—¥å† è®¾ç½®æ—¥æœŸå¯¹è±¡ é€šè¿‡showDateæ–¹æ³•ä¼ å¯¹åº”æ—¥æœŸè¿‡å» showDateæ–¹æ³•åŠ¨æ€ç”Ÿæˆtableæ—¥å†è¡¨æ ¼ æ ¹æ®æ—¥æœŸåˆ¤æ–­é—°å¹´ æ ¹æ®æœˆä»½åˆ¤æ–­å¤©æ•°éå†ä»æ¯æœˆ1å·å¯¹åº”å‘¨å‡ å¼€å§‹éå†ç¬¬å‡ ä¸ªtdå¼€å§‹** 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151window.onload = function() &#123; var aInput = document.getElementsByTagName(&#x27;input&#x27;); var oDiv = document.getElementById(&#x27;div1&#x27;); var oNowTime = document.getElementById(&#x27;nowTime&#x27;); var oNextTime = document.getElementById(&#x27;nextTime&#x27;); var bBtn = true; aInput[2].onclick = function() &#123; var oDate = new Date(); if(bBtn) &#123; oDiv.style.display = &quot;block&quot;; //åˆ¤æ–­æ˜¯å¦ä¸‹ä¸€å¹´ if(oDate.getMonth() + 1 == 12) &#123; //ä¼ ä½ç½® å¹´ æœˆ trueä»£è¡¨è¿™ä¸ªæœˆè¿˜æ˜¯ä¸‹ä¸€ä¸ªæœˆ showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + 1, true); showDate(oNextTime, oDate.getFullYear() + 1, 1); &#125; else &#123; showDate(oNowTime, oDate.getFullYear(), oDate.getMonth() + 1, true); showDate(oNextTime, oDate.getFullYear(), oDate.getMonth() + 2); &#125; &#125; else &#123; oDiv.style.display = &quot;none&quot;; &#125; bBtn = !bBtn; &#125;; function showDate(obj, year, month, bBtn) &#123; var oDate = new Date(); //è®¾ç½®å¼€å…³é˜²æ­¢é‡æ–°ç”Ÿæˆ if(!obj.bBtn) &#123; //ç”Ÿæˆå‘¨è¡¨æ ¼table tableæœ‰ä¸ªç‰¹åˆ«åœ¨ieä¸‹ç”¨HTMLæ˜¯ä¸å…¼å®¹çš„ obj.oTitle = document.createElement(&#x27;div&#x27;); obj.oTitle.className = &#x27;title&#x27;; obj.appendChild(obj.oTitle); var oTable = document.createElement(&#x27;table&#x27;); var oThead = document.createElement(&#x27;thead&#x27;); var oTr = document.createElement(&#x27;tr&#x27;); var arr = [&#x27;å‘¨ä¸€&#x27;, &#x27;å‘¨äºŒ&#x27;, &#x27;å‘¨ä¸‰&#x27;, &#x27;å‘¨å››&#x27;, &#x27;å‘¨äº”&#x27;, &#x27;å‘¨å…­&#x27;, &#x27;å‘¨æ—¥&#x27;]; for(var i = 0; i &lt; 7; i++) &#123; var oTh = document.createElement(&#x27;th&#x27;); oTh.innerHTML = arr[i]; if(i == 5 || i == 6) &#123; oTh.className = &quot;red&quot;; &#125; oTr.appendChild(oTh); &#125; oThead.appendChild(oTr); oTable.appendChild(oThead); //ç”Ÿæˆæ—¥æœŸ ç”Ÿæˆ6ä¸ªè¡Œ 7ä¸ªåˆ— æ¯ä¸€è¡Œä¸ƒä¸ªåˆ— var oTbody = document.createElement(&#x27;tBody&#x27;); for(var i = 0; i &lt; 6; i++) &#123; var oTr = document.createElement(&quot;tr&quot;); for(var j = 0; j &lt; 7; j++) &#123; var oTd = document.createElement(&quot;td&quot;); oTr.appendChild(oTd); &#125; oTbody.appendChild(oTr); &#125; oTable.appendChild(oTbody); obj.appendChild(oTable); obj.bBtn = true; &#125; // obj.oTitle.innerHTML = (bBtn ? &#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27; + (month - 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; : &#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27; + (month + 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;) + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;; //æ¢ä¸€ç§å†™æ³• if(bBtn) &#123; obj.oTitle.innerHTML = &#x27;&lt;div class=&quot;l&quot;&gt;&lt;span&gt;&#x27; + (month - 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;; &#125; else &#123; obj.oTitle.innerHTML = &#x27;&lt;div class=&quot;r&quot;&gt;&lt;span&gt;&#x27; + (month + 1) + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27; + &#x27;&lt;div class=&quot;c&quot;&gt;&lt;span&gt;&#x27; + year + &#x27;&lt;/span&gt;å¹´&lt;span&gt;&#x27; + month + &#x27;&lt;/span&gt;æœˆ&lt;/div&gt;&#x27;; &#125; //ç”Ÿæˆæ¯ä¸€ä¸ªæœˆçš„å¤©æ•° æ¯æ¬¡ç‚¹å‡»æœˆä»½æ¸…ç©º var aTd = obj.getElementsByTagName(&#x27;td&#x27;); for(var i = 0; i &lt; aTd.length; i++) &#123; aTd[i].innerHTML = &#x27;&#x27;; &#125; //åˆ¤æ–­æœˆä»½çš„å¤©æ•° if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12) &#123; dayNum = 31; &#125; else if(month == 4 || month == 6 || month == 9 || month == 11) &#123; dayNum = 30; &#125; else if(month == 2 &amp;&amp; isLeapYear(year)) &#123; dayNum = 29; &#125; else &#123; dayNum = 28; &#125; oDate.setFullYear(year); oDate.setMonth(month - 1); oDate.setDate(1); console.log(oDate.getDay()); //æ ¹æ®1å· å¯¹åº”çš„ getDayï¼ˆï¼‰æ˜¯å‘¨å‡ ï¼Ÿ switch(oDate.getDay()) &#123; case 0: //å‘¨æ—¥ ç¬¬ä¸ƒä¸ªtdå¼€å§‹éå† for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 6].innerHTML = i + 1; &#125; break; case 1: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i].innerHTML = i + 1; &#125; break; case 2: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 1].innerHTML = i + 1; &#125; break; case 3: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 2].innerHTML = i + 1; &#125; break; case 4: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 3].innerHTML = i + 1; &#125; break; case 5: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 4].innerHTML = i + 1; &#125; break; case 6: for(var i = 0; i &lt; dayNum; i++) &#123; aTd[i + 5].innerHTML = i + 1; &#125; break; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´ function isLeapYear(year) &#123; if(year % 4 == 0 &amp;&amp; year % 100 != 0) &#123; return true; &#125; else &#123; if(year % 400 == 0) &#123; return true; &#125; else &#123; return false; &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"ç»ƒä¹ Demo","slug":"ç»ƒä¹ Demo","permalink":"http://mariogogogo.github.io/categories/%E7%BB%83%E4%B9%A0Demo/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"Demo","slug":"Demo","permalink":"http://mariogogogo.github.io/tags/Demo/"}]},{"title":"ç»„ä»¶ç³»åˆ—_å¼¹çª—","slug":"ç»„ä»¶ç³»åˆ—_å¼¹çª—","date":"2017-08-15T16:00:00.000Z","updated":"2020-09-16T09:07:17.000Z","comments":true,"path":"2017/08/16/ç»„ä»¶ç³»åˆ—_å¼¹çª—/","link":"","permalink":"http://mariogogogo.github.io/2017/08/16/%E7%BB%84%E4%BB%B6%E7%B3%BB%E5%88%97_%E5%BC%B9%E7%AA%97/","excerpt":"æˆ‘ä»¬åœ¨å‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ˆå…¶å®ƒå¼€å‘ä¹Ÿä¸€æ ·ï¼‰ï¼Œæ€»æ˜¯ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä»¥å‰åšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚å¯¹è¯å¼¹çª—ã€ç™»é™†çª—ç­‰ç­‰ã€‚","text":"æˆ‘ä»¬åœ¨å‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ˆå…¶å®ƒå¼€å‘ä¹Ÿä¸€æ ·ï¼‰ï¼Œæ€»æ˜¯ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä»¥å‰åšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚å¯¹è¯å¼¹çª—ã€ç™»é™†çª—ç­‰ç­‰ã€‚ä¸€èˆ¬æˆ‘ä»¬å†™äº†ä¹‹åå°±å¾ˆå°‘å»ç®¡å®ƒäº†ï¼Œä½†æ˜¯åƒè¿™æ ·çš„ä¸€äº›ç»„ä»¶ï¼Œåœ¨ä¸åŒçš„é¡¹ç›®å¼€å‘è¿‡ç¨‹æ€»æ˜¯å¾ˆå¤šæ—¶å€™éœ€è¦å¤ç”¨èµ·æ¥çš„ã€‚è™½ç„¶ç°åœ¨ç½‘ä¸Šå¾ˆå¤šjsåº“éƒ½å°è£…äº†è¿™æ ·çš„ä¸€äº›ç»„ä»¶ï¼Œå¦‚æœä½ ä¸ºäº†å›¾å¿«ã€æ–¹ä¾¿çš„è¯ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨è¿™äº›åº“ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†ä»è¿™ä¸¤ä¸ªæ–¹é¢æ¥è¯´ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦æˆ‘ä»¬æŠŠæˆ‘ä»¬å†™è¿‡çš„è¿™äº›ç»„ä»¶åˆ†ç¦»å‡ºæ¥ä»è€Œä»¥åå¤ç”¨ï¼š1ã€å¦‚æœä½ ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“å¹¶ä¸æ˜¯åˆšå¥½å°è£…äº†ä½ è¦çš„é‚£ä¸ªç»„ä»¶è€Œå·²ï¼Œæ¯”å¦‚ä½ éœ€è¦ä¸€ä¸ªç™»é™†ç»„ä»¶ï¼Œé‚£ä¹ˆå¯èƒ½ç¬¬ä¸‰æ–¹åº“ç¡®å®å°è£…äº†è¿™ä¸ªç»„ä»¶ï¼Œä½†åŒæ—¶ä¹Ÿå°è£…äº†å¾ˆå¤šå…¶å®ƒç»„ä»¶ï¼Œæ‰€ä»¥ä½ å¦‚æœç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œé‚£ä¹ˆä½ å°±ä¼šä¸ºäº†ä¸€ä¸ªå°ç»„ä»¶å¼•å…¥ä¸€äº›åºå¤§çš„jsæ–‡ä»¶å’Œcssæ–‡ä»¶ä»¥åŠå›¾ç‰‡ï¼è¿™æ ·çš„åº“å¼•å…¥å¤šäº†çš„è¯ï¼Œé‚£ä¹ˆåæœŸä½ ä¸ä»…éœ€è¦æ›´å¤šåœ°ç»´æŠ¤å„ä¸ªåº“çš„å†²çªç­‰ç­‰é—®é¢˜ï¼Œè€Œä¸”ä½ çš„ç½‘ç«™å› æ­¤ä¹Ÿä¼šå“åº”è¶Šæ¥è¶Šæ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼2ã€å¦‚æœä½ è‡ªå·±æŠŠä½ å†™è¿‡çš„ç»„ä»¶å•ç‹¬åˆ†ç¦»å‡ºæ¥å¤ç”¨çš„è¯ï¼Œé¦–å…ˆæ¥è¯´ï¼Œä½ è‡ªå·±å†™è¿‡çš„ï¼Œé‚£ä¹ˆä½ ç”¨èµ·æ¥ä¹Ÿä¼šæ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¯¹ä¸ï¼Ÿè€Œä¸”ï¼Œè¿™æ ·çš„å·¥ä½œä½ åšå¤šäº†ä»¥åï¼Œæé«˜ä½ åŸºæœ¬åŠŸçš„åŒæ—¶ï¼Œä½ è¿˜ä¼šå‘ç°ä½ ç°åœ¨å°±æ˜¯åœ¨å†™ä¸€ä¸ªâ€œç¬¬ä¸‰æ–¹åº“â€äº†ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç‘•ç–µï¼Œä½†æ˜¯åŸç†å·®ä¸å¤šçš„ï¼ æ•ˆæœå›¾html1234567891011121314&lt;div class=&quot;sc-box sc-login-box&quot;&gt; &lt;div class=&quot;sc-login&quot; id=&quot;sc-login&quot;&gt; &lt;h2 class=&quot;text-ellipsis sc-login__title&quot;&gt;ç™»é™†&lt;/h2&gt; &lt;div class=&quot;sc-login__input&quot;&gt; &lt;label&gt;&lt;span class=&quot;label&quot;&gt;è´¦å·ï¼š&lt;/span&gt;&lt;input class=&quot;input&quot; type=&quot;text&quot; placeholder=&quot;è¯·å¡«å†™è´¦å·&quot;/&gt;&lt;/label&gt; &lt;label&gt;&lt;span class=&quot;label&quot;&gt;å¯†ç ï¼š&lt;/span&gt;&lt;input class=&quot;input&quot; type=&quot;password&quot; placeholder=&quot;è¯·å¡«å†™å¯†ç &quot;/&gt;&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;sc-login__btn&quot;&gt; &lt;a class=&quot;login_cancel btn&quot; href=&quot;javascript:void(0);&quot; title=&quot;#&quot;&gt;å–æ¶ˆ&lt;/a&gt; &lt;a class=&quot;login_ensure btn&quot; href=&quot;javascript:void(0);&quot; title=&quot;#&quot;&gt;ç¡®å®š&lt;/a&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; javascript123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;script type=&quot;text/javascript&quot;&gt; /** * * å‘å¤–æš´éœ²ä¸€ä¸ªæ¥å£Loginï¼Œä¸ºäº†å‡å°‘å‘½åå†²çªï¼Œç›¸å…³æ“ä½œåœ¨å…¶å®ä¾‹å±æ€§æˆ–è€…æ–¹æ³•ä¸Šæ‰§è¡Œ * **/ function Login()&#123; this.init.apply(this,arguments); &#125;; Login.prototype = &#123; /*** *idå‚æ•°ç”¨äºè·å–loginå¼¹çª— *configç”¨äºè®¾ç½®ç›¸å…³å›è°ƒå‚æ•°ç­‰ */ init:function(id,config)&#123; var login_dom = (typeof id === &#x27;string&#x27;)?document.getElementById(id):id; if(!login_dom)&#123; return; &#125;; //ç™»é™†æ¡†éšè—æ“ä½œ function hide()&#123; login_dom.style.display = &#x27;none&#x27;; &#125;; //ç‚¹å‡»å–æ¶ˆæŒ‰é’®æ“ä½œ login_dom.querySelector(&#x27;.login_cancel&#x27;).onclick = function()&#123; hide(); if(config.cancel)&#123; config.cancel(); &#125;; &#125;; //ç‚¹å‡»ç¡®å®šæŒ‰é’®æ“ä½œ login_dom.querySelector(&#x27;.login_ensure&#x27;).onclick = function()&#123; hide(); if(config.ensure)&#123; config.ensure(); &#125;; &#125;; &#125; &#125;; //æ³¨ï¼šå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®éœ€è¦å†™åœ¨window.onloadæˆ–jqueryçš„$å›è°ƒå‡½æ•°é‡Œé¢è°ƒç”¨ setTimeout(function()&#123; //è°ƒç”¨ new Login(&#x27;sc-login&#x27;,&#123; cancel:function()&#123; //ç‚¹å‡»å–æ¶ˆæŒ‰é’®è„šæœ¬ goes here console.log(&#x27;å–æ¶ˆ&#x27;); &#125;, ensure:function()&#123; //ç‚¹å‡»ç¡®å®šæŒ‰é’®è„šæœ¬ goes here console.log(&#x27;ç¡®å®š&#x27;); &#125; &#125;); &#125;,0);&lt;/script&gt;","categories":[{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"http://mariogogogo.github.io/categories/%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"},{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"http://mariogogogo.github.io/tags/%E7%BB%84%E4%BB%B6/"}]},{"title":"ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•","slug":"ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•","date":"2017-08-04T16:00:00.000Z","updated":"2020-09-16T09:07:11.000Z","comments":true,"path":"2017/08/05/ä¸‰æ å¸ƒå±€çš„äº”ç§å†™æ³•/","link":"","permalink":"http://mariogogogo.github.io/2017/08/05/%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80%E7%9A%84%E4%BA%94%E7%A7%8D%E5%86%99%E6%B3%95/","excerpt":"å·²çŸ¥é«˜åº¦ å·¦å³è·ç¦»å›ºå®š ä¸­é—´è‡ªé€‚åº”ä¸‰æ å¸ƒå±€åœ¨htmlå¾ˆå¸¸è§ï¼ŒåŸºç¡€çŸ¥è¯†å›é¡¾","text":"å·²çŸ¥é«˜åº¦ å·¦å³è·ç¦»å›ºå®š ä¸­é—´è‡ªé€‚åº”ä¸‰æ å¸ƒå±€åœ¨htmlå¾ˆå¸¸è§ï¼ŒåŸºç¡€çŸ¥è¯†å›é¡¾ åŒé£ç¿¼å¸ƒå±€ä¸åœ£æ¯å¸ƒå±€çš„ä¸åŒä¹‹å¤„ï¼Œåœ£æ¯å¸ƒå±€çš„çš„å·¦ä¸­å³ä¸‰åˆ—å®¹å™¨ï¼Œä¸­é—´middleå¤šäº†ä¸€ä¸ªå­å®¹å™¨å­˜åœ¨ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ã€‚ æœ€å¸¸è§çš„åœ£æ¯å¸ƒå±€å®ç°æ–¹æ³•å…³é”®ç‚¹ åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left ä¸ left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½® åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ éœ€è¦è®¾ç½® padding åœ£æ¯å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„ æœ€å¸¸è§çš„åŒé£ç¿¼å¸ƒå±€å®ç°æ–¹æ³•å…³é”®ç‚¹ åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹æ˜¯é€šè¿‡ margin-left å±æ€§å°†å·¦å³ä¸¤åˆ—æ”¾ç½®åˆ°å‡†ç¡®çš„ä½ç½®ï¼Œé€šè¿‡æ§åˆ¶ middle çš„å­å®¹å™¨çš„ margin æˆ–è€… padding ç©ºå‡ºå·¦å³ä¸¤åˆ—çš„å®½åº¦ åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹çˆ¶å…ƒç´ ä¸éœ€è¦è®¾ç½® padding åŒé£ç¿¼å¸ƒå±€çš„å…³é”®ç‚¹ margin-left å–å€¼ä¸ºç™¾åˆ†æ¯”æ—¶ï¼Œæ˜¯ä»¥å…¶çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºåŸºå‡†çš„ å…¶ä»–å¸ƒå±€æ–¹æ³•-12345678910111213141516171819202122232425&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; &lt;style&gt; body &#123; margin: 0; padding: 0; &#125; .layout &#123; margin: 10px 0px; &#125; .layout article div &#123; min-height: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; å…¶ä»–å¸ƒå±€æ–¹æ³•-1234567891011121314151617181920212223242526272829&lt;section class=&quot;layout float&quot;&gt; &lt;style&gt; .layout.float .left &#123; float: left; width: 300px; background: red; &#125; .layout.float .right &#123; float: right; width: 300px; background: blue; &#125; .layout.float .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;æµ®åŠ¨è§£å†³æ–¹æ¡ˆ&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;/article&gt;&lt;/section&gt; å…¶ä»–å¸ƒå±€æ–¹æ³•-123456789101112131415161718192021222324252627282930313233343536&lt;section class=&quot;layout table&quot;&gt; &lt;style&gt; .layout.table .left-mid-right &#123; width: 100%; display: table; height: 100px; &#125; .layout.table .left-mid-right&gt;div &#123; display: table-cell; &#125; .layout.table .left &#123; width: 300px; background: red; &#125; .layout.table .right &#123; width: 300px; background: blue; &#125; .layout.table .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexboxå¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt; &lt;/section&gt; å…¶ä»–å¸ƒå±€æ–¹æ³•-1234567891011121314151617181920212223242526272829303132333435&lt;section class=&quot;layout flexbox&quot;&gt; &lt;style&gt; .layout.flexbox &#123; margin-top: 130px; &#125; .layout.flexbox .left-mid-right &#123; display: flex; &#125; .layout.flexbox .left &#123; width: 300px; background: red; &#125; .layout.flexbox .right &#123; width: 300px; background: blue; &#125; .layout.flexbox .mid &#123; flex: 1; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;flexboxå¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt; &lt;/section&gt; å…¶ä»–å¸ƒå±€æ–¹æ³•-123456789101112131415161718192021222324252627282930313233343536&lt;section class=&quot;layout absolute&quot;&gt; &lt;style&gt; .layout.absolute .left-mid-right&gt;div &#123; position: absolute; &#125; .layout.absolute .left &#123; left: 0; width: 300px; background: red; &#125; .layout.absolute .right &#123; right: 0; width: 300px; background: blue; &#125; .layout.absolute .mid &#123; left: 300px; right: 300px; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;ç»å¯¹å®šä½&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt;&lt;/section&gt; å…¶ä»–å¸ƒå±€æ–¹æ³•-1234567891011121314151617181920212223242526272829303132&lt;section class=&quot;layout grid&quot;&gt; &lt;style&gt; .layout.grid .left-mid-right &#123; display: grid; width: 100%; height: 100px; grid-template-rows: 100px; grid-template-columns: 300px auto 300px; &#125; .layout.grid .left &#123; background: red; &#125; .layout.grid .right &#123; background: blue; &#125; .layout.grid .mid &#123; background: yellow; &#125; &lt;/style&gt; &lt;article class=&quot;left-mid-right&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt; &lt;h1&gt;ç½‘æ ¼å¸ƒå±€&lt;/h1&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;p&gt;è¿™æ˜¯ä¸‰æ å¸ƒå±€&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;/article&gt; &lt;/section&gt;","categories":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/categories/%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"HTML","slug":"HTML","permalink":"http://mariogogogo.github.io/tags/HTML/"}]},{"title":"Node.js çš„æœ¬è´¨","slug":"Node.js çš„æœ¬è´¨","date":"2017-08-02T16:00:00.000Z","updated":"2020-09-16T09:07:40.000Z","comments":true,"path":"2017/08/03/Node.js çš„æœ¬è´¨/","link":"","permalink":"http://mariogogogo.github.io/2017/08/03/Node.js%20%E7%9A%84%E6%9C%AC%E8%B4%A8/","excerpt":"ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚","text":"ä¸‹é¢æ˜¯ä¸€æ¡æ•°æ®çš„æ—…ç¨‹ï¼Œè¿™æ¡æ•°æ®æˆ‘ä»¬å«ä»–reqã€‚reqåœ¨æµè§ˆå™¨å¾ˆæ— èŠï¼Œé€šè¿‡ç½‘ç»œè·‘åˆ°äº†Node.jsæœåŠ¡å™¨ï¼Œå®ƒçš„ç›®çš„æ˜¯æƒ³è§åˆ°å›½ç‹server.jsï¼ˆä½ ç¼–å†™çš„ä»£ç ï¼‰ï¼Œreqæƒ³å’Œserver.jsè¦ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¯å®ƒè¿›å…¥æœåŠ¡å™¨æ—¶ï¼Œè¿æ¥å®ƒçš„æ˜¯ä¸ªå¤§è‡£ï¼Œå¤§è‡£å‘Šè¯‰ä»–ï¼Œserver.jsæ­£åœ¨æ¥å¾…å¦ä¸€ä¸ªreqï¼Œè¯·ä»–ç­‰0.1æ¯«ç§’ã€‚ç»ˆäºreqè§åˆ°äº†å›½ç‹ï¼Œå›½ç‹çš„ä¼šè®®å®¤æŒºæ¼‚äº®çš„ï¼Œä¸‹é¢æ˜¯ä¼šè®®å®¤çš„å¤§ä½“æ ·å­ï¼š 123server.on(â€œrequestâ€,function(req,res)&#123;&#125;) reqå’Œserver.jsè¦ä¸€ä¸ªhello.htmlçš„ç½‘é¡µæ–‡ä»¶ï¼Œè¿™æ—¶å€™å®ƒçœ‹åˆ°ä¼šè®®å®¤å¤–é¢è¿˜æœ‰å‡ ä¸ªreqåœ¨ç­‰å¾…ï¼Œserver.jså›½ç‹æŠŠä»»åŠ¡äº¤ç»™äº† fså¤§è‡£ï¼Œç„¶åé©¬ä¸Šå°±å»æ¥å¾…å¦ä¸€ä¸ªreqäº†ï¼Œreqå¿ƒé‡Œæƒ³å›½ç‹çš„æ•ˆç‡å¥½é«˜å•Šï¼Œéš¾é“è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„æ°¸ä¸é˜»å¡çš„ I/O å—ï¼Œè¿™æ—¶å€™fså¤§è‡£å¸®å®ƒæŠŠhello.htmlæ–‡ä»¶é€ä¸Šäº†è¿”ç¨‹çš„åˆ—è½¦resã€‚ 123server.on(â€œrequestâ€,function(req,res)&#123; fs.createReadStream(â€œhello.htmlâ€).pipe(res);&#125;) reqå›åˆ°æµè§ˆå™¨åï¼Œæ„Ÿæ…¨Node.js å›½å®¶åŠäº‹æ•ˆç‡ï¼Œå®ƒåœ¨æ—¥è®°ä¸­å†™ä¸‹ï¼š é€šè¿‡é›†æƒçš„ç¼–ç æ–¹å¼ï¼Œè®©ä»£ç æ›´åŠ å¥½ç®¡ç†ã€æ›´å¥½ç»´æŠ¤ï¼Œé¿å…å¤šçº¿ç¨‹å¸¦æ¥çš„æ­»é”ç­‰åé—ç—‡ã€‚é€šè¿‡éé˜»å¡å¼‚æ­¥ I/O çš„è°ƒç”¨ï¼ŒæŠŠè€—æ—¶çš„å·¥ä½œäº¤ç»™åº•ä¸‹äººå»åŠï¼Œè€Œä¸æ˜¯ç­‰å¾…I/Oå®Œæˆåå†è¿›è¡Œä¸‹ä¸€æ­¥çš„å·¥ä½œï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶æ¨¡å¼ï¼Œç›‘å¬å·¥ä½œè¿›åº¦ï¼Œè¿™æ®µæ—¶é—´é‡Œï¼ŒNode.jsè¿˜å¯ä»¥ä¸ é—´æ–­çš„å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ç­‰åˆ°I/Oå¤„ç†å®Œæ¯•åï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶ã€‚Node.jsæ˜¯ä»€ä¹ˆï¼Ÿ Nodeæä¾›ä¸€ç§ç®€å•çš„æ„å»ºå¯ä¼¸ç¼©ç½‘ç»œç¨‹åºçš„æ–¹æ³•ã€‚åœ¨ Java å’Œ PHP è¿™ç±»è¯­è¨€ä¸­ï¼Œæ¯ä¸ªè¿æ¥éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œæ¯ä¸ªæ–°çº¿ç¨‹å¯èƒ½éœ€è¦ 2 MB çš„é…å¥—å†…å­˜ã€‚åœ¨ä¸€ä¸ªæ‹¥æœ‰ 8 GB RAM çš„ç³»ç»Ÿä¸Šï¼Œç†è®ºä¸Šæœ€å¤§çš„å¹¶å‘è¿æ¥æ•°é‡æ˜¯ 4,000 ä¸ªç”¨æˆ·ã€‚éšç€æ‚¨çš„å®¢æˆ·ç¾¤çš„å¢é•¿ï¼Œå¦‚æœå¸Œæœ›æ‚¨çš„ Web åº”ç”¨ç¨‹åºæ”¯æŒæ›´å¤šç”¨æˆ·ï¼Œé‚£ä¹ˆï¼Œæ‚¨å¿…é¡»æ·»åŠ æ›´å¤šæœåŠ¡å™¨ã€‚ Nodeæ›´æ”¹äº†è¿æ¥åˆ°æœåŠ¡å™¨çš„æ–¹å¼ã€‚æ¯ä¸ªè¿æ¥å‘å°„ä¸€ä¸ªåœ¨ Node å¼•æ“çš„è¿›ç¨‹ä¸­è¿è¡Œçš„äº‹ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªè¿æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ OS çº¿ç¨‹ã€‚å®ƒç»ä¸ä¼šæ­»é”ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸å…è®¸ä½¿ç”¨é”ï¼Œå®ƒä¸ä¼šç›´æ¥é˜»å¡ I/O è°ƒç”¨ã€‚å®ƒçš„æœåŠ¡å™¨èƒ½æ”¯æŒæ•°ä¸‡ä¸ªå¹¶å‘è¿æ¥ã€‚ Node.jsèƒŒåçœŸæ­£çš„ä¼˜åŠ¿ Node.js æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œåœ¨æˆ‘çœ‹æ¥é™¤äº†é«˜æ€§èƒ½å¤–ï¼Œå®ƒç»Ÿä¸€äº†å‰åç«¯è¯­è¨€å’Œæ•°æ® (json)ï¼Œè¿™æ‰æ˜¯å®ƒæœ€å¤§ä¼˜åŠ¿ã€‚paypalå…¬å¸å…¨é¢è½¬è‡³Node.jsæŠ€æœ¯ï¼Œä¸»è¦åŸå› æ˜¯Node.jsæé«˜äº†å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¹ŸèŠ‚çœäº†æˆæœ¬ã€‚ éš¾å­¦å—ï¼Ÿ åªè¦ä¼šJavaScriptåŸºæœ¬çŸ¥è¯†å³å¯ï¼Œjavascriptçš„è¿è¡Œç¯å¢ƒé€šå¸¸æ˜¯æµè§ˆå™¨ï¼ŒNode.jsç»™äº†javascriptåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒä¸‹ï¼Œè¿˜é…å¤‡äº†ä¸€å¥—APIï¼ŒåŒ…æ‹¬I/Oã€ç½‘ç»œç­‰åŠŸèƒ½ã€‚ è½¬è‡ªï¼šhttp://www.html-js.cn/details/VkK2RAlG-.html","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"mongodbçš„äºŒç§å†™å…¥æ–¹å¼","slug":"mongodbçš„äºŒç§å†™å…¥æ–¹å¼","date":"2017-07-26T16:00:00.000Z","updated":"2020-09-16T09:07:40.000Z","comments":true,"path":"2017/07/27/mongodbçš„äºŒç§å†™å…¥æ–¹å¼/","link":"","permalink":"http://mariogogogo.github.io/2017/07/27/mongodb%E7%9A%84%E4%BA%8C%E7%A7%8D%E5%86%99%E5%85%A5%E6%96%B9%E5%BC%8F/","excerpt":"MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚","text":"MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚","categories":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/categories/NodeJs/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://mariogogogo.github.io/tags/%E6%B5%8B%E8%AF%95/"}]},{"title":"nodeJsæ¨¡å—formidableå®ç°å¤šæ–‡ä»¶ä¸Šä¼ ","slug":"nodeJsæ¨¡å—formidableå®ç°å¤šå›¾ä¸Šä¼ ","date":"2017-07-09T16:00:00.000Z","updated":"2020-09-16T09:07:42.000Z","comments":true,"path":"2017/07/10/nodeJsæ¨¡å—formidableå®ç°å¤šå›¾ä¸Šä¼ /","link":"","permalink":"http://mariogogogo.github.io/2017/07/10/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%9B%BE%E4%B8%8A%E4%BC%A0/","excerpt":"åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚","text":"åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚ é€šè¿‡ä¸€æ®µæ—¶é—´çš„æŸ¥é˜…èµ„æ–™ã€æ‘¸ç´¢ï¼Œæˆ‘å‘ç°å®ç°ä¸Šä¼ çš„æ–¹å¼æœ‰ï¼š1.expressä¸­é—´ä»¶multeræ¨¡å—ï¼ˆæ­¤æ•ˆç‡æœ€é«˜ï¼Œåœ¨express3.xåŸç”Ÿæ”¯æŒï¼Œåˆ°äº†express4.xç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—äº†ï¼‰ï¼Œ2.connect-multipartyæ¨¡å—ï¼ˆä½†ç°åœ¨å®˜æ–¹ä¸æ¨èï¼‰ï¼Œ3.ä½¿ç”¨multipartyæ¨¡å—å®ç°ï¼ˆæ­¤æ–¹æ³•æ¯”è¾ƒæ™®éï¼‰ï¼Œ4.ä½¿ç”¨formidableæ’ä»¶å®ç°ï¼ˆæ’ä»¶å‘¢ï¼Œå°±æ˜¯ç®€å•æ˜“æ‡‚ï¼‰; é¦–å…ˆçŸ¥é“enctypeè¿™ä¸ªå±æ€§ç®¡ç†çš„æ˜¯è¡¨å•çš„MIMEç¼–ç ã€‚å…±æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼š application/x-www-form-urlencoded multipart/form-data text/plain å…¶ä¸­application/x-www-form-urlencodedæ˜¯é»˜è®¤å€¼ï¼Œä½œç”¨æ˜¯è®¾ç½®è¡¨å•ä¼ è¾“çš„ç¼–ç ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨AJAXä¸­è§è¿‡xmlHttp.setRequestHeader(â€œContent-Typeâ€,â€application/x-www-form- urlencodedâ€);å¦‚æœä¸å†™ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯åœ¨htmlçš„formè¡¨å•é‡Œæ˜¯å¯ä»¥ä¸å†™enctype=application/x-www-form-urlencoded,å› ä¸ºé»˜è®¤çš„HTMLè¡¨å•å°±æ˜¯è¿™ç§ä¼ è¾“ç¼–ç ç±»å‹çš„ã€‚ è€Œmultipart/form-dataæ˜¯ç”¨æ¥åˆ¶å®šä¼ è¾“æ•°æ®çš„ç‰¹æ®Šç±»å‹çš„ï¼Œä¸»è¦å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„éæ–‡æœ¬çš„å†…å®¹ï¼Œæ¯”å¦‚å›¾ç‰‡æˆ–æ˜¯æ˜¯mp3ç­‰ç­‰ã€‚ text/plainæ˜¯çº¯æ–‡æœ¬ä¼ è¾“çš„æ„æ€ï¼Œåœ¨å‘é‚®ä»¶çš„æ—¶å€™è¦è®¾ç½®è¿™ç§ç¼–ç ç±»å‹ï¼Œå¦åˆ™ä¼šå‡ºç°æ¥æ”¶æ—¶ç¼–ç æ··ä¹±çš„é—®é¢˜ã€‚ç½‘ç»œä¸Šç»å¸¸æ‹¿text/plainå’Œ text/htmlåšæ¯”è¾ƒï¼Œå…¶å®è¿™ä¸¤ä¸ªå¾ˆå¥½åŒºåˆ†ï¼Œå‰è€…ç”¨æ¥ä¼ è¾“çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯ä¼ é€’htmlä»£ç çš„ç¼–ç ç±»å‹ï¼Œåœ¨å‘é€å¤´æ–‡ä»¶æ—¶æ‰ç”¨å¾—ä¸Šã€‚â‘ å’Œâ‘¢éƒ½ä¸èƒ½ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œåªæœ‰multipart/form-dataæ‰èƒ½å®Œæ•´çš„ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚ == formidableä¸Šä¼ æ’ä»¶ï¼Œä¹Ÿæ˜¯åœ¨githubä¸ŠåŒç±»åŠŸèƒ½äººæ°”æ¯”è¾ƒé«˜çš„ã€‚== ä¼˜ç‚¹ï¼š 1. é€Ÿåº¦å¿«ï¼ˆ~500M/sï¼‰,æ²¡æœ‰non-buffering multipartè§£æ 2.è‡ªåŠ¨å†™å…¥åˆ°ä¸Šä¼ æ–‡ä»¶ç£ç›˜ 3.å ç”¨å†…å­˜ä½ 4.ä¼˜é›…çš„é”™è¯¯å¤„ç† 5.éå¸¸é«˜çš„æµ‹è¯•è¦†ç›–ç‡ ç›´æ¥ä¸Šä»£ç 12345678&lt;h1&gt;&#123;&#123;title&#125;&#125;&#125;å¤šå¼ &lt;/h1&gt; &lt;p&gt;Welcome to &#123;&#123;title&#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123;image&#125;&#125;&lt;/p&gt; &lt;img src=&quot;&quot; alt=&quot;å›¾ç‰‡&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;image&quot; id=&quot;file_upload&quot; multiple&gt; &lt;input type=&quot;submit&quot; id=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758$(document).ready(function() &#123; var btn = $(&quot;#submit&quot;); btn.on(&#x27;click&#x27;, function() &#123; uploadByForm(); &#125;); &#125;); /** * ajax ä¸Šä¼ ã€‚ */ function uploadByForm() &#123; var xhr = new XMLHttpRequest(); //ç¬¬ä¸€æ­¥ //å®šä¹‰è¡¨å•å˜é‡ var file = document.getElementById(&#x27;file_upload&#x27;).files; //console.log(file.length); //æ–°å»ºä¸€ä¸ªFormDataå¯¹è±¡ var formData = new FormData(); //++++++++++ //è¿½åŠ æ–‡ä»¶æ•°æ® for (i = 0; i &lt; file.length; i++) &#123; formData.append(&quot;file[&quot; + i + &quot;]&quot;, file[i]); //++++++++++ &#125; console.log(formData); //formData.append(&quot;file&quot;, file[0]); //++++++++++ //postæ–¹å¼ xhr.open(&#x27;POST&#x27;, &#x27;/api/upload/data&#x27;); //ç¬¬äºŒæ­¥éª¤ //å‘é€è¯·æ±‚ xhr.send(formData); //ç¬¬ä¸‰æ­¥éª¤ //ajaxè¿”å› xhr.onreadystatechange = function() &#123; //ç¬¬å››æ­¥ if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; var data = JSON.parse(xhr.response); console.log(data) console.log(data.filesUrl); if(data.sucess != &quot;0&quot;) &#123; alert(&quot;ä¸Šä¼ æˆåŠŸï¼ï¼ï¼Œå…¶ä¸­&quot;+data.error+&quot;ä¸ªå¤±è´¥&quot;); &#125; else&#123; alert(&quot;ä¸Šä¼ å¤±è´¥ï¼ï¼&quot; + data.filesUrl); &#125; &#125; //è®¾ç½®è¶…æ—¶æ—¶é—´ xhr.timeout = 100000; xhr.ontimeout = function(event) &#123; alert(&#x27;è¯·æ±‚è¶…æ—¶ï¼&#x27;); &#125; &#125; &#125; function render(obj) &#123; //å¯¹è±¡è½¬æ•°ç»„ var html = &quot;&quot;; for (var i = 0; i &lt; obj.length; i++) &#123; html += &quot;&lt;li&gt; &lt;img src=&#x27;../&quot;+obj[i]+&quot;&#x27;&gt;&lt;/li&gt;&quot;; &#125; $(&quot;.box&quot;).append(html); &#125; åç«¯ä»£ç å¤„ç†1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768router.post(&quot;/upload/data&quot;, function(req, res) &#123; var form = new formidable.IncomingForm(); //åˆ›å»ºä¸Šä¼ è¡¨å• form.encoding = &#x27;utf-8&#x27;; //è®¾ç½®ç¼–è¾‘ form.uploadDir = &#x27;tmp/&#x27;; //è®¾ç½®ä¸Šä¼ ç›®å½• form.keepExtensions = true; //ä¿ç•™åç¼€ form.maxFieldsSize = 1 * 1024 * 1024; //æ–‡ä»¶å¤§å°; //å°†å¤šä¸ªå‚æ•°ç»„åˆæˆä¸€ä¸ª path /** /Users/lovewcc/Documents/æš´åŠ›ç†Šå›¢é˜Ÿ/nodeTest/uploads */ var targetDir = path.join(__dirname, &#x27;../uploads&#x27;); console.log(targetDir); //æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ ä¸å­˜åœ¨åˆ™åˆ›å»º fs.access(targetDir, function(err) &#123; if (err) &#123; fs.mkdirSync(targetDir); &#125; _fileParse(); //è°ƒç”¨å¤šå›¾ä¸Šä¼ æ–¹æ³• &#125;) function _fileParse() &#123; form.parse(req, function(err, fields, files) &#123; var obj = &#123;&#125;; var filesUrl = []; //æ•°ç»„ var errCount = 0; //é”™è¯¯é•¿åº¦ var keys = Object.keys(files); console.log(keys); keys.forEach(function(key) &#123; console.log(files[key].path); var filePath = files[key].path; var fileExt = filePath.substring(filePath.lastIndexOf(&#x27;.&#x27;)); //å›¾ç‰‡å¤§å° if (files[key].size &gt; form.maxFieldsSize) &#123; errCount += 1; //å›¾ç‰‡ç±»å‹ &#125; else if ((&#x27;.jpg.png&#x27;).indexOf(fileExt.toLowerCase()) === -1) &#123; errCount += 1; &#125; else &#123; //ä»¥å½“å‰æ—¶é—´æˆ³å¯¹ä¸Šä¼ æ–‡ä»¶è¿›è¡Œé‡å‘½å var fileName = new Date().getTime() + fileExt; console.log(fileName); var targetFile = path.join(targetDir, fileName); console.log(targetFile); //ç§»åŠ¨æ–‡ä»¶ å¼‚æ­¥ç»å¸¸æœ‰é—®é¢˜ æ”¹æˆåŒæ­¥Sync fs.renameSync(files[key].path, targetFile); filesUrl.push(&#x27;uploads/&#x27; + fileName); &#125; &#125;); res.json(&#123; success: keys.length - errCount, error: errCount, filesUrl: filesUrl &#125;); &#125;); &#125;&#125;)//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹var emptyDir = function(fileUrl) &#123; var files = fs.readdirSync(fileUrl); //è¯»å–è¯¥æ–‡ä»¶å¤¹ files.forEach(function(file) &#123; var stats = fs.statSync(fileUrl + &#x27;/&#x27; + file); if (stats.isDirectory()) &#123; emptyDir(fileUrl + &#x27;/&#x27; + file); &#125; else &#123; fs.unlinkSync(fileUrl + &#x27;/&#x27; + file); console.log(&quot;åˆ é™¤æ–‡ä»¶&quot; + fileUrl + &#x27;/&#x27; + file + &quot;æˆåŠŸ&quot;); &#125; &#125;);&#125;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"Macä¸‹å®‰è£…MongoDB åŠä½¿ç”¨æ•™ç¨‹","slug":"Macä¸‹å®‰è£…MongoDB åŠä½¿ç”¨æ•™ç¨‹","date":"2017-07-08T16:00:00.000Z","updated":"2020-09-16T09:07:40.000Z","comments":true,"path":"2017/07/09/Macä¸‹å®‰è£…MongoDB åŠä½¿ç”¨æ•™ç¨‹/","link":"","permalink":"http://mariogogogo.github.io/2017/07/09/Mac%E4%B8%8B%E5%AE%89%E8%A3%85MongoDB%20%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","excerpt":"MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚","text":"MongoDB æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§æ–¹ä¾¿ã€‚ MongoDB å·¥ä½œåœ¨æ”¶é›†å’Œæ–‡ä»¶çš„æ¦‚å¿µã€‚ ä»€ä¹ˆæ˜¯NoSqlï¼Ÿ NoSqlï¼Œå…¨ç§°æ˜¯ Not Only Sql,æŒ‡çš„æ˜¯éå…³ç³»å‹çš„æ•°æ®åº“ã€‚ä¸‹ä¸€ä»£æ•°æ®åº“ä¸»è¦è§£å†³å‡ ä¸ªè¦ç‚¹ï¼šéå…³ç³»å‹çš„ã€åˆ†å¸ƒå¼çš„ã€å¼€æºçš„ã€æ°´å¹³å¯æ‰©å±•çš„ã€‚åŸå§‹çš„ç›®çš„æ˜¯ä¸ºäº†å¤§è§„æ¨¡webåº”ç”¨ï¼Œè¿™åœºè¿åŠ¨å¼€å§‹äº2009å¹´åˆï¼Œé€šå¸¸ç‰¹æ€§åº”ç”¨å¦‚ï¼šæ¨¡å¼è‡ªç”±ã€æ”¯æŒç®€æ˜“å¤åˆ¶ã€ç®€å•çš„APIã€æœ€ç»ˆçš„ä¸€è‡´æ€§ï¼ˆéACIDï¼‰ã€å¤§å®¹é‡æ•°æ®ç­‰ã€‚NoSQLè¢«æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„å½“æ•°key-valueå­˜å‚¨ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–çš„æ–‡æ¡£å‹çš„ã€åˆ—å­˜å‚¨ã€å›¾å‹æ•°æ®åº“ã€xmlæ•°æ®åº“ç­‰ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MongoDB JSONé£æ ¼æ–‡ä»¶çš„å½¢å¼ï¼Œé¢å‘æ–‡æ¡£å­˜å‚¨ï¼šæ•°æ®å­˜å‚¨ å¯¹ä»»ä½•å±æ€§å¯ç´¢å¼• å¤åˆ¶å’Œé«˜å¯ç”¨æ€§ è‡ªåŠ¨åˆ†ç‰‡ ä¸°å¯Œçš„æŸ¥è¯¢ å¿«é€Ÿå°±åœ°æ›´æ–° MongoDBçš„ä¸“ä¸šæŠ€æœ¯æ”¯æŒ é¦–å…ˆå®‰è£…HomeBrew /usr/bin/ruby -e â€œ$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; ä¸‹è½½nodejs,ä¸€è·¯next å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ node -v æœ‰æ˜¾ç¤ºç‰ˆæœ¬å·å°±ä»£è¡¨å®‰è£…æˆåŠŸï¼Œå…¶ä»–å¼‚å¸¸æƒ…å†µæœ¬æ–‡ä¸ä½œä»‹ç»ï¼› ä¸‹è½½Mongodbåï¼Œå°†Mongodb-3.2.5.tar.gz å¤åˆ¶åˆ° /usr/local è·¯å¾„ä¸‹è§£å‹å¾—åˆ°mongodbè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œï¼ˆä¸‹å›¾ä¸­çš„æ˜¯æˆ‘è‡ªå·±æ”¹äº†åå­—åˆ æ‰äº†ç‰ˆæœ¬å·ï¼‰ *é»˜è®¤æƒ…å†µä¸‹åœ¨Finderä¸­æ˜¯çœ‹ä¸åˆ° /usr è¿™ä¸ªç›®å½•çš„ï¼ˆç»ˆç«¯ç”¨å¾—æºœçš„è¯·ç•¥è¿‡ï¼‰ï¼Œå¯ä»¥æ‰“å¼€FinderåæŒ‰shift + command +G è¾“å…¥ /usr/localåå›è½¦ä¾¿èƒ½çœ‹åˆ°è¿™ä¸ªéšè—çš„ç›®å½•äº† ä¸Šå›¾ä¸­å±•ç¤ºçš„å°±æ˜¯æˆ‘çš„æœ¬æœºçš„ç›®å½•ç»“æ„äº†ï¼Œåœ¨/usr/local/mongodb/binä¸‹å°±æ˜¯mongodbçš„æ‰§è¡Œæ–‡ä»¶äº† ç„¶ååœ¨æ ¹ç›®å½•ä¸‹æ–°å»º data æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å†å»ºä¸€ä¸ªdbæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯ä¸Šå›¾ä¸­é‚£ä¸ª usræ–‡ä»¶å¤¹ä¸Šé¢çš„ é‚£ä¸ªdataæ–‡ä»¶å¤¹ ï¼Œé‡Œé¢æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®åº“çš„ï¼Œ ç»ˆç«¯åˆ‡æ¢åˆ°/usr/local/mongodb/binç›®å½•ä¸‹ï¼Œ","categories":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/categories/NodeJs/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://mariogogogo.github.io/tags/%E6%B5%8B%E8%AF%95/"}]},{"title":"nodeJsæ¨¡å—formidableå®ç°å•æ–‡ä»¶ä¸Šä¼ ","slug":"nodeJsæ¨¡å—formidableå®ç°å•å›¾ä¸Šä¼ ","date":"2017-07-08T16:00:00.000Z","updated":"2020-09-16T09:07:42.000Z","comments":true,"path":"2017/07/09/nodeJsæ¨¡å—formidableå®ç°å•å›¾ä¸Šä¼ /","link":"","permalink":"http://mariogogogo.github.io/2017/07/09/nodeJs%E6%A8%A1%E5%9D%97formidable%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%9B%BE%E4%B8%8A%E4%BC%A0/","excerpt":"åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚","text":"åœ¨è¿›è¡Œnode webå¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸é‡åˆ°ä¸Šä¼ æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸€å—å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç»éªŒï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸‹é¢æˆ‘å°†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ–¹å¼ã€‚ é€šè¿‡ä¸€æ®µæ—¶é—´çš„æŸ¥é˜…èµ„æ–™ã€æ‘¸ç´¢ï¼Œæˆ‘å‘ç°å®ç°ä¸Šä¼ çš„æ–¹å¼æœ‰ï¼š1.expressä¸­é—´ä»¶multeræ¨¡å—ï¼ˆæ­¤æ•ˆç‡æœ€é«˜ï¼Œåœ¨express3.xåŸç”Ÿæ”¯æŒï¼Œåˆ°äº†express4.xç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—äº†ï¼‰ï¼Œ2.connect-multipartyæ¨¡å—ï¼ˆä½†ç°åœ¨å®˜æ–¹ä¸æ¨èï¼‰ï¼Œ3.ä½¿ç”¨multipartyæ¨¡å—å®ç°ï¼ˆæ­¤æ–¹æ³•æ¯”è¾ƒæ™®éï¼‰ï¼Œ4.ä½¿ç”¨formidableæ’ä»¶å®ç°ï¼ˆæ’ä»¶å‘¢ï¼Œå°±æ˜¯ç®€å•æ˜“æ‡‚ï¼‰; é¦–å…ˆçŸ¥é“enctypeè¿™ä¸ªå±æ€§ç®¡ç†çš„æ˜¯è¡¨å•çš„MIMEç¼–ç ã€‚å…±æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼š application/x-www-form-urlencoded multipart/form-data text/plain å…¶ä¸­application/x-www-form-urlencodedæ˜¯é»˜è®¤å€¼ï¼Œä½œç”¨æ˜¯è®¾ç½®è¡¨å•ä¼ è¾“çš„ç¼–ç ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨AJAXä¸­è§è¿‡xmlHttp.setRequestHeader(â€œContent-Typeâ€,â€application/x-www-form- urlencodedâ€);å¦‚æœä¸å†™ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯åœ¨htmlçš„formè¡¨å•é‡Œæ˜¯å¯ä»¥ä¸å†™enctype=application/x-www-form-urlencoded,å› ä¸ºé»˜è®¤çš„HTMLè¡¨å•å°±æ˜¯è¿™ç§ä¼ è¾“ç¼–ç ç±»å‹çš„ã€‚ è€Œmultipart/form-dataæ˜¯ç”¨æ¥åˆ¶å®šä¼ è¾“æ•°æ®çš„ç‰¹æ®Šç±»å‹çš„ï¼Œä¸»è¦å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„éæ–‡æœ¬çš„å†…å®¹ï¼Œæ¯”å¦‚å›¾ç‰‡æˆ–æ˜¯æ˜¯mp3ç­‰ç­‰ã€‚ text/plainæ˜¯çº¯æ–‡æœ¬ä¼ è¾“çš„æ„æ€ï¼Œåœ¨å‘é‚®ä»¶çš„æ—¶å€™è¦è®¾ç½®è¿™ç§ç¼–ç ç±»å‹ï¼Œå¦åˆ™ä¼šå‡ºç°æ¥æ”¶æ—¶ç¼–ç æ··ä¹±çš„é—®é¢˜ã€‚ç½‘ç»œä¸Šç»å¸¸æ‹¿text/plainå’Œ text/htmlåšæ¯”è¾ƒï¼Œå…¶å®è¿™ä¸¤ä¸ªå¾ˆå¥½åŒºåˆ†ï¼Œå‰è€…ç”¨æ¥ä¼ è¾“çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯ä¼ é€’htmlä»£ç çš„ç¼–ç ç±»å‹ï¼Œåœ¨å‘é€å¤´æ–‡ä»¶æ—¶æ‰ç”¨å¾—ä¸Šã€‚â‘ å’Œâ‘¢éƒ½ä¸èƒ½ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œåªæœ‰multipart/form-dataæ‰èƒ½å®Œæ•´çš„ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚ == formidableä¸Šä¼ æ’ä»¶ï¼Œä¹Ÿæ˜¯åœ¨githubä¸ŠåŒç±»åŠŸèƒ½äººæ°”æ¯”è¾ƒé«˜çš„ã€‚== ä¼˜ç‚¹ï¼š 1. é€Ÿåº¦å¿«ï¼ˆ~500M/sï¼‰,æ²¡æœ‰non-buffering multipartè§£æ 2.è‡ªåŠ¨å†™å…¥åˆ°ä¸Šä¼ æ–‡ä»¶ç£ç›˜ 3.å ç”¨å†…å­˜ä½ 4.ä¼˜é›…çš„é”™è¯¯å¤„ç† 5.éå¸¸é«˜çš„æµ‹è¯•è¦†ç›–ç‡ ç›´æ¥ä¸Šä»£ç 1234 &lt;form role=&quot;form&quot; id=&quot;myForm&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; style=&quot;opacity: 0&quot; &gt;&lt;input type=&quot;file&quot; multiple=&quot;multiple&quot; style=&quot;position: absolute; left: 50%; top: 50%;margin-left:-60px;margin-top:10px;height: 40px;width:100px;cursor:pointer&quot; name=&quot;fulAvatar&quot; id=&quot;file_upload&quot; value=&quot;&quot; class=&quot;form-control&quot; placeholder=&quot;å›¾ç‰‡åœ°å€&quot; onchange=&quot;uploadByForm();&quot;&gt;&lt;/form&gt; åç«¯ä»£ç å¤„ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103var express = require(&#x27;express&#x27;);var router = express.Router();var formidable = require(&#x27;formidable&#x27;);var fs = require(&quot;fs&quot;);var path = require(&#x27;path&#x27;);/** * å›¾ç‰‡ä¸Šä¼  * @type &#123;[type]&#125; */router.get(&#x27;/upload&#x27;, function(req, res, next) &#123; res.render(&quot;form&quot;, &#123; title: &#x27;EXpress&#x27; &#125;);&#125;);//è®¾ç½®å¤´åƒrouter.post(&quot;/upload/post&quot;, function(req, res) &#123; var form = new formidable.IncomingForm(); //åˆ›å»ºä¸Šä¼ è¡¨å• form.encoding = &#x27;utf-8&#x27;; //è®¾ç½®ç¼–è¾‘ form.uploadDir = &#x27;tmp/&#x27;; //form.uploadDir = path.join(__dirname, &#x27;tmp&#x27;); //æ–‡ä»¶ä¿å­˜çš„ä¸´æ—¶ç›®å½•ä¸ºå½“å‰é¡¹ç›®ä¸‹çš„tmpæ–‡ä»¶å¤¹ form.maxFieldsSize = 1 * 1024 * 1024; //ç”¨æˆ·å¤´åƒå¤§å°é™åˆ¶ä¸ºæœ€å¤§1M form.keepExtensions = true; //ä½¿ç”¨æ–‡ä»¶çš„åŸæ‰©å±•å form.parse(req, function(err, fields, files) &#123; // console.log(files); console.log(files.logo.path); // var filePath = &#x27;&#x27;; // if(file.logo)&#123; // filePath = file.logo.path; // &#125;else&#123; // for(var key in file)&#123; // if( file[key].path &amp;&amp; filePath===&#x27;&#x27; )&#123; // filePath = file[key].path; // break; // &#125; // &#125; // &#125; //æ–‡ä»¶ç§»åŠ¨çš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œä¸å­˜åœ¨æ—¶åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹ // var tagetDir = path.join(__dirname, &#x27;uploads&#x27;); // console.log(tagetDir); // if (!fs.existsSync(targetDir)) &#123; // fs.mkdir(targetDir); // &#125;; //æ–‡ä»¶ç±»å‹åˆ¤æ–­ var filePath = files.logo.path; var extName = filePath.substring(filePath.lastIndexOf(&#x27;.&#x27;)); if ((&#x27;.jpg.png&#x27;).indexOf(extName.toLowerCase()) === -1) &#123; res.code = 2; res.locals.error = &#x27;åªæ”¯æŒpngå’Œjpgæ ¼å¼å›¾ç‰‡&#x27;; emptyDir(form.uploadDir);//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹ res.json(&#123; &#x27;err&#x27;: res.locals.error, &quot;code&quot;: res.code &#125;); return; &#125; if (files.logo.size &gt; form.maxFieldsSize) &#123; res.code = 1; res.locals.error = &#x27;å›¾ç‰‡å¤§å°è¶…è¿‡1M&#x27;; emptyDir(form.uploadDir);//åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹ res.json(&#123; &#x27;err&#x27;: res.locals.error, &quot;code&quot;: res.code &#125;); return; &#125; //æ ¹æ®å†…å®¹ç¬¦åˆåˆ™è½¬ç§»æ–‡ä»¶å†…å®¹ var avatarName = Math.random() + &#x27;.&#x27; + extName; //å›¾ç‰‡è€åœ°å€å†™å…¥åœ°å€ï¼› var oldPath = form.uploadDir + avatarName; //å›¾ç‰‡æ–°åœ°å€å†™å…¥åœ°å€ï¼› var newPath = &#x27;uploads/&#x27; + avatarName; var showUrl = __dirname + &#x27;/&#x27; + newPath; fs.rename(files.logo.path, newPath, function(err) &#123; if (err) &#123; console.info(err); res.json(&#123; code: 3, message: &#x27;æ“ä½œå¤±è´¥&#x27; &#125;); &#125; else &#123; // ä¸Šä¼ æˆåŠŸï¼Œè¿”å›æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ //åˆ é™¤tmpä¸­æ‰€ä»¥ä¸´æ—¶æ–‡ä»¶ var rootFile = form.uploadDir;//è¦åˆ é™¤çš„æ–‡ä»¶å¤¹ url //åˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶(å°†æ‰€æœ‰æ–‡ä»¶å¤¹ç½®ç©º) emptyDir(form.uploadDir); res.json(&#123; &quot;code&quot;: 0, &quot;newPath&quot;: showUrl, &quot;imgurl&quot;: newPath &#125;); &#125; &#125;); &#125;);&#125;)var emptyDir = function(fileUrl)&#123; var files = fs.readdirSync(fileUrl);//è¯»å–è¯¥æ–‡ä»¶å¤¹ files.forEach(function(file)&#123; var stats = fs.statSync(fileUrl+&#x27;/&#x27;+file); if(stats.isDirectory())&#123; emptyDir(fileUrl+&#x27;/&#x27;+file); &#125;else&#123; fs.unlinkSync(fileUrl+&#x27;/&#x27;+file); console.log(&quot;åˆ é™¤æ–‡ä»¶&quot;+fileUrl+&#x27;/&#x27;+file+&quot;æˆåŠŸ&quot;); &#125; &#125;); &#125;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"nodejsçŸ¥å¤šå°‘","slug":"nodejsçŸ¥å¤šå°‘","date":"2017-07-03T16:00:00.000Z","updated":"2020-09-16T09:07:43.000Z","comments":true,"path":"2017/07/04/nodejsçŸ¥å¤šå°‘/","link":"","permalink":"http://mariogogogo.github.io/2017/07/04/nodejs%E7%9F%A5%E5%A4%9A%E5%B0%91/","excerpt":"ç»å¸¸é‡åˆ°çš„é—®é¢˜æ€»ç»“","text":"ç»å¸¸é‡åˆ°çš„é—®é¢˜æ€»ç»“ require ç”¨æ¥åŠ è½½ä»£ç ï¼Œè€Œ exports å’Œ module.exports åˆ™ç”¨æ¥å¯¼å‡ºä»£ç ã€‚å¾ˆå¤šæ–°æ‰‹å¯èƒ½ä¼šè¿·æƒ‘äº exports å’Œ module.exports çš„åŒºåˆ«ï¼Œä¸ºäº†æ›´å¥½çš„ç†è§£ exports å’Œ module.exports çš„å…³ç³»ï¼Œæˆ‘ä»¬å…ˆæ¥å·©å›ºä¸‹ js çš„åŸºç¡€ã€‚ æˆ‘ä»¬åªéœ€çŸ¥é“ä¸‰ç‚¹å°±çŸ¥é“ exports å’Œ module.exports çš„åŒºåˆ«äº†ï¼š module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {} exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨ require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exports æˆ‘ä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„å†™æ³•ï¼š 12exports = module.exports = &#123;...&#125; ç­‰ä»·äº 123module.exports = &#123;...&#125;exports = module.exports åŸç†å¾ˆç®€å•ï¼šmodule.exports æŒ‡å‘æ–°çš„å¯¹è±¡æ—¶ï¼Œexports æ–­å¼€äº†ä¸ module.exports çš„å¼•ç”¨ï¼Œé‚£ä¹ˆé€šè¿‡ exports = module.exports è®© exports é‡æ–°æŒ‡å‘ module.exportsã€‚ package.json å¯¹äº Node.js åº”ç”¨æ¥è¯´æ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº†è¯¥ Node.js åº”ç”¨çš„åå­—ã€ç‰ˆæœ¬ã€æè¿°ã€ä½œè€…ã€å…¥å£æ–‡ä»¶ã€è„šæœ¬ã€ç‰ˆæƒç­‰ç­‰ä¿¡æ¯ã€‚npm å®˜ç½‘æœ‰ package.json æ¯ä¸ªå­—æ®µçš„è¯¦ç»†ä»‹ç»ï¼š 12npm i express --save --save-exact (å®‰è£… expressï¼ŒåŒæ—¶å°† &quot;express&quot;: &quot;4.14.0&quot; å†™å…¥ dependencies ) åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç ä¿å­˜åï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨é‡å¯ç¨‹åºï¼Œæ‰èƒ½æŸ¥çœ‹æ”¹åŠ¨çš„æ•ˆæœã€‚ä½¿ç”¨ supervisor å¯ä»¥è§£å†³è¿™ä¸ªç¹ççš„é—®é¢˜ï¼Œå…¨å±€å®‰è£… supervisorï¼š 12npm install -g supervisor è¿è¡Œ supervisor â€“harmony index å¯åŠ¨ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š supervisor ä¼šç›‘å¬å½“å‰ç›®å½•ä¸‹ node å’Œ js åç¼€çš„æ–‡ä»¶ï¼Œå½“è¿™äº›æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶ï¼Œsupervisor ä¼šè‡ªåŠ¨é‡å¯ç¨‹åºã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"NodeJsä¹‹åšå®¢ï¼ˆå››ï¼‰","slug":"NodeJsä¹‹åšå®¢ï¼ˆå››ï¼‰","date":"2017-07-02T16:00:00.000Z","updated":"2020-09-16T09:07:43.000Z","comments":true,"path":"2017/07/03/NodeJsä¹‹åšå®¢ï¼ˆå››ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/07/03/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89/","excerpt":"ç”¨æˆ·æ³¨å†ŒåŠç™»å½•","text":"ç”¨æˆ·æ³¨å†ŒåŠç™»å½• login.js12345678910111213141516171819202122232425$(function() &#123; $(&quot;#btn&quot;).on(&quot;click&quot;, function() &#123; //é€šè¿‡ajaxæäº¤è¯·æ±‚ $.ajax(&#123; type: &#x27;post&#x27;, url: &#x27;/api/user/adminlogin&#x27;, data: &#123; username: $(&quot;#userName&quot;).val(), password: $(&quot;#password&quot;).val() &#125;, dataType: &#x27;json&#x27;, success: function(result) &#123; if (!result.code) &#123; window.location.reload(); &#125; else &#123; console.log(result.message); &#125; &#125; &#125;); &#125;);&#125;); æ³¨å†Œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172var express = require(&#x27;express&#x27;);var User = require(&#x27;../models/user&#x27;);var router = express.Router();var Content = require(&#x27;../models/content&#x27;);/** * å¢åŠ ç”¨æˆ·æ³¨å†Œè·¯ç”± * ç»Ÿä¸€è¿”å›æ ¼å¼ */var responseDate;router.use(function(rep, res, next) &#123; responseDate = &#123; code: 0, message: &#x27;&#x27; &#125;; next();&#125;);//æ³¨å†Œrouter.post(&#x27;/user/register&#x27;, function(req, res, next) &#123; var username = req.body.username; var password = req.body.password; var repassword = req.body.repassword; if (username === &quot;&quot;) &#123; responseDate.code = 1; responseDate.message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼&quot;; res.json(responseDate); return; &#125; if (password === &quot;&quot;) &#123; responseDate.code = 2; responseDate.message = &quot;å¯†ç ä¸èƒ½ä¸ºç©ºï¼&quot;; res.json(responseDate); return; &#125; if (password != repassword) &#123; responseDate.code = 3; responseDate.message = &quot;äºŒæ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´&quot;; res.json(responseDate); return; &#125; User.findOne(&#123; username: username &#125;).then(function(userInfo) &#123; if (userInfo) &#123; responseDate.code = 4; responseDate.message = &#x27;è¯¥ç”¨æˆ·åå·²æ³¨å†Œï¼&#x27;; res.json(responseDate); return; &#125;; //åˆ›å»ºæ–°å¯¹è±¡ var user = new User(&#123; username: username, password: password &#125;); //ä¿å­˜æ•°æ®åº“ return user.save(); &#125;).then(function(newUserInfo) &#123; responseDate.message = &quot;æ³¨å†ŒæˆåŠŸï¼&quot;; //å½“æ³¨å†ŒæˆåŠŸä¹‹åç›´æ¥ç™»å½•ç•Œé¢ ä¼ å€¼ç»™å‰å°é¡µé¢ responseDate.newUserInfo = &#123; _id: newUserInfo._id, username: newUserInfo.username &#125;; //ä¿å­˜è‡³cookieå‘é€åˆ°æµè§ˆå™¨ req.cookies.set(&#x27;userInfo&#x27;, JSON.stringify(&#123; _id: newUserInfo._id, username: newUserInfo.username &#125;)); res.json(responseDate); // console.log(newUserInfo); &#125;);&#125;); ç™»å½•1234567891011121314151617181920212223242526272829303132333435363738394041424344router.post(&#x27;/user/login&#x27;, function(req, res, next) &#123; //è·å–å‰å°ä¼ è¿‡æ¥çš„å€¼ var username = req.body.username; var password = req.body.password; if (username === &quot;&quot;) &#123; responseDate.code = 1; responseDate.message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼&quot;; res.json(responseDate); return; &#125; if (password === &quot;&quot;) &#123; responseDate.code = 2; responseDate.message = &quot;å¯†ç ä¸èƒ½ä¸ºç©ºï¼&quot;; res.json(responseDate); return; &#125; User.findOne(&#123; username: username, password: password &#125;).then(function(userInfo) &#123; if (!userInfo) &#123; responseDate.code = 3; responseDate.message = &quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;; res.json(responseDate); return; &#125; responseDate.message = &quot;ç™»å½•æˆåŠŸï¼&quot;; //ä¼ å€¼ç»™å‰å°é¡µé¢ responseDate.userInfo = &#123; _id: userInfo._id, username: userInfo.username &#125;; //ä¿å­˜è‡³cookieå‘é€åˆ°æµè§ˆå™¨ req.cookies.set(&#x27;userInfo&#x27;, JSON.stringify(&#123; _id: userInfo._id, username: userInfo.username &#125;)); res.json(responseDate); return; &#125;);&#125;); é€€å‡º1234567router.post(&#x27;/user/logout&#x27;, function(req, res, next) &#123; //æ¸…ç©ºcookie req.cookies.set(&quot;userInfo&quot;, &quot;&quot;); res.json(responseDate); return;&#125;);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"é‚®ç®±æ‹–æ‹½åŠåˆ é™¤","slug":"é‚®ç®±æ‹–æ‹½åŠåˆ é™¤","date":"2017-07-02T16:00:00.000Z","updated":"2020-09-16T09:07:16.000Z","comments":true,"path":"2017/07/03/é‚®ç®±æ‹–æ‹½åŠåˆ é™¤/","link":"","permalink":"http://mariogogogo.github.io/2017/07/03/%E9%82%AE%E7%AE%B1%E6%8B%96%E6%8B%BD%E5%8F%8A%E5%88%A0%E9%99%A4/","excerpt":"ç»ƒä¹ é‚®ç®±æ‹–æ‹½ï¼ŒåŠå…ƒç´ åˆ é™¤","text":"ç»ƒä¹ é‚®ç®±æ‹–æ‹½ï¼ŒåŠå…ƒç´ åˆ é™¤æ³¨æ„ç‚¹; jq move æ˜¯åœ¨$(doucment) ç«ç‹ä¸‹é˜»æ­¢æµè§ˆå™¨é»˜è®¤äº‹ä»¶ éœ€è¦ev.preventDefault();ev.stopPropagation(); ç‚¹å‡»å•é€‰æ¡†çš„æ—¶å€™ å¦‚æœé¼ æ ‡downäº‹ä»¶å­˜åœ¨ åˆ™è¦é˜»æ­¢å†’æ³¡ev.stopPropagation(); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131$(document).ready(function() &#123; var html = list.map(function(item) &#123; return `&lt;li data-id=$&#123;item.id&#125;&gt; &lt;input type=&quot;checkbox&quot;&gt; &lt;div&gt; &lt;span&gt;$&#123;item.caption&#125;&lt;/span&gt; &lt;span&gt;$&#123;item.time&#125;&lt;/span&gt; &lt;/div&gt; &lt;p&gt;$&#123;item.desc&#125;&lt;/p&gt; &lt;/li&gt;` &#125;).join(&quot; &quot;); var oUl = $(&quot;.emailListUl&quot;); oUl.html(html); //è·å–é€‰ä¸­ var checkedlen = $(&quot;.emailListUl li input&quot;); //å…¨é€‰æŒ‰é’® æˆ–è€… å…¨ä¸é€‰ var checkboxAll = $(&quot;.emailHead input&quot;); checkboxAll.on(&quot;click&quot;, function() &#123; var arrs = whoSelected(); console.log(arrs) $(&quot;.emailListUl li input&quot;).prop(&quot;checked&quot;, $(this).is(&#x27;:checked&#x27;)); if ($(this).is(&#x27;:checked&#x27;)) &#123; $(&quot;.emailListUl li&quot;).css(&quot;background&quot;, &quot;#f2f6f9&quot;); &#125; else &#123; $(&quot;.emailListUl li&quot;).css(&quot;background&quot;, &quot;&quot;); &#125; &#125;) //é€‰ä¸­çš„inputçš„ä¸ªæ•° åŠä¸‹æ ‡ $(&quot;.emailListUl li input&quot;).on(&#x27;click&#x27;, function() &#123; if (!($(this).is(&#x27;:checked&#x27;))) &#123; $(&quot;.emailHead input&quot;).prop(&quot;checked&quot;, false); $(this).parent().css(&quot;background&quot;, &quot;&quot;); &#125; else &#123; $(this).parent().css(&quot;background&quot;, &quot;#f2f6f9&quot;); &#125; var arr = whoSelected(); if (arr.length == checkedlen.length) &#123; $(&quot;.emailHead input&quot;).prop(&quot;checked&quot;, true); &#125; $(this).parent().mousedown(function(ev) &#123; /* Act on the event */ //æ¶ˆç­å†’æ³¡ ev.stopPropagation(); &#125;); &#125;); // ç”¨æ¥è·é€‰ä¸­çš„input function whoSelected() &#123; var arr = []; checkedlen.each(function() &#123; if ($(this).is(&quot;:checked&quot;)) &#123; arr.push($(this)); &#125; &#125;); return arr; &#125; //åˆ é™¤ var delet = $(&quot;#delet&quot;); delet.on(&#x27;click&#x27;, function() &#123; htmldelete(); &#125;); function htmldelete() &#123; //ç‚¹å‡»å¹¶è¿”å›é€‰æ‹©çš„ä¸ªæ•°ï¼› var selectArr = whoSelected(); console.log(selectArr) for (var i = 0; i &lt; selectArr.length; i++) &#123; selectArr[i].parent().remove(); // åˆ é™¤è¢«é€‰ä¸­inputçš„çˆ¶çº§li for (var j = 0; j &lt; list.length; j++) &#123; if (list[j].id == selectArr[i]) &#123; //è¿™é‡Œåº”è¯¥æ˜¯åç«¯è¿”å›ajaxä¼ é€æ•°æ®è¯·æ±‚æ•°æ®åº“åˆ é™¤ list.splice(i, 1); console.log(list); console.log(&#x27;åˆ é™¤æˆåŠŸ&#x27;) &#125; &#125;; &#125;; &#125; //åœ¨æŸä¸€ç‚¹ä¸Šlimousedownä¼šå‡ºç° tip var tip = $(&quot;#hint3&quot;); var lis = oUl.find(&quot;li&quot;); var beenDel = $(&quot;.beenDel&quot;); //åˆ é™¤ lis.mousedown(function(ev) &#123; var selectArr = whoSelected(); console.log(selectArr.length); if ($(this).find(&quot;input&quot;).is(&quot;:checked&quot;)) &#123; tip.show(); tip.css(&quot;left&quot;, ev.clientX + 4 + &quot;px&quot;); tip.css(&quot;top&quot;, ev.clientY + 4 + &quot;px&quot;); tip.html(&#x27;é€‰ä¸­&#x27; + selectArr.length + &#x27;å°é‚®ä»¶&#x27;); &#125; else &#123; return; &#125; //ç¢°æ’ é»˜è®¤æ²¡æœ‰ç¢°åˆ° var isCollision = false; //è·å–é€‰ä¸­äº†å‡ ä¸ª $(document).mousemove(function(ev) &#123; /* Act on the event */ tip.css(&quot;left&quot;, ev.clientX + &quot;px&quot;); tip.css(&quot;top&quot;, ev.clientY + &quot;px&quot;); ev.preventDefault(); //å–æ¶ˆé»˜è®¤è¡Œä¸º if (collision($(&quot;#hint3&quot;), $(&quot;.beenDel&quot;))) &#123; isCollision = true; &#125; &#125;); $(document).mouseup(function() &#123; /* Act on the event */ tip.hide(); if (isCollision) &#123; //åˆ é™¤èŠ‚ç‚¹ htmldelete(); &#125; document.mouseover = document.mouseup = null; &#125;); &#125;)&#125;); æ‹–æ‹½å°è£…jqueryè½¬jsdomå…ƒç´ éœ€è¦$(â€œidâ€)[0];1234567891011121314151617181920212223242526function getRect(obj)&#123; return obj[0].getBoundingClientRect(); &#125;function collision(obj1,obj2)&#123; var obj1Rect = getRect(obj1); var obj2Rect = getRect(obj2); //å¦‚æœobj1ç¢°ä¸Šäº†å“¦obj2è¿”å›trueï¼Œå¦åˆ™æ”¾å›false var obj1Left = obj1Rect.left; var obj1Right = obj1Rect.right; var obj1Top = obj1Rect.top; var obj1Bottom = obj1Rect.bottom; var obj2Left = obj2Rect.left; var obj2Right = obj2Rect.right; var obj2Top = obj2Rect.top; var obj2Bottom = obj2Rect.bottom; if( obj1Right &lt; obj2Left || obj1Left &gt; obj2Right || obj1Bottom &lt; obj2Top || obj1Top &gt; obj2Bottom )&#123; return false; &#125;else&#123; return true; &#125;&#125;","categories":[{"name":"ç»ƒä¹ Demo","slug":"ç»ƒä¹ Demo","permalink":"http://mariogogogo.github.io/categories/%E7%BB%83%E4%B9%A0Demo/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://mariogogogo.github.io/tags/javascript/"},{"name":"ç»ƒä¹ ","slug":"ç»ƒä¹ ","permalink":"http://mariogogogo.github.io/tags/%E7%BB%83%E4%B9%A0/"}]},{"title":"NodeJsä¹‹çŸ­ä¿¡å‘é€","slug":"Nodeå‘é€çŸ­ä¿¡éªŒè¯ç ","date":"2017-06-29T16:00:00.000Z","updated":"2020-09-16T09:07:41.000Z","comments":true,"path":"2017/06/30/Nodeå‘é€çŸ­ä¿¡éªŒè¯ç /","link":"","permalink":"http://mariogogogo.github.io/2017/06/30/Node%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/","excerpt":"æˆ‘ä»¬åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°åœ¨æ³¨å†Œçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œæˆ–è€…æ˜¯åœ¨ä¸€äº›å®‰å…¨æ€§æ ¡éªŒçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œ äºæ˜¯æ‰¾äº†å¾ˆå¤šçŸ­ä¿¡éªŒè¯ç å¹³å°ï¼Œä½†æ˜¯æ”¯æŒnodejsçš„å¹³å°å¾ˆå°‘ï¼Œä»Šå¤©å°±ä»‹ç»ä¸€ä¸ªå°‘æœ‰çš„æ”¯æŒnodeçš„çŸ­ä¿¡éªŒè¯å¹³å°","text":"æˆ‘ä»¬åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°åœ¨æ³¨å†Œçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œæˆ–è€…æ˜¯åœ¨ä¸€äº›å®‰å…¨æ€§æ ¡éªŒçš„æ—¶å€™è¦å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç ï¼Œ äºæ˜¯æ‰¾äº†å¾ˆå¤šçŸ­ä¿¡éªŒè¯ç å¹³å°ï¼Œä½†æ˜¯æ”¯æŒnodejsçš„å¹³å°å¾ˆå°‘ï¼Œä»Šå¤©å°±ä»‹ç»ä¸€ä¸ªå°‘æœ‰çš„æ”¯æŒnodeçš„çŸ­ä¿¡éªŒè¯å¹³å° å‰å°jséƒ¨åˆ†123456789101112$.ajax(&#123; type: &quot;POST&quot;, url: &quot;yunpian/sms&quot;, data: &#123; mobile: $(&quot;#mobile&quot;).val() &#125;, success: function(res) &#123; console.log(res); &#125;, error: function(res) &#123; console.log(res); &#125;&#125;); åå°jséƒ¨åˆ†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273// ä¿®æ”¹ä¸ºæ‚¨çš„apikey.å¯åœ¨å®˜ç½‘ï¼ˆhttps://www.yunpian.com)ç™»å½•åè·å–var express = require(&quot;express&quot;);var router = express.Router();var request = require(&quot;request&quot;);// ä¿®æ”¹ä¸ºæ‚¨è¦å‘é€çš„æ‰‹æœºå·ç ï¼Œå¤šä¸ªå·ç ç”¨é€—å·éš”å¼€// var mobile = &#x27;13083950500&#x27;;// ä¿®æ”¹ä¸ºæ‚¨è¦å‘é€çš„çŸ­ä¿¡å†…å®¹// var text = &#x27;ã€h5webå¼€å‘è€…ã€‘æ‚¨çš„éªŒè¯ç æ˜¯666666ã€‚å¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥æœ¬çŸ­ä¿¡&#x27;;// æŒ‡å®šå‘é€æ¨¡æ¿çš„å†…å®¹var tpl_value = &#123; &#x27;#code#&#x27;: &#x27;1234&#x27;, &#x27;#company#&#x27;: &#x27;yunpian&#x27; &#125;;// æ™ºèƒ½åŒ¹é…æ¨¡æ¿å‘é€httpsåœ°å€var sms_host = &#x27;sms.yunpian.com&#x27;;// ç»Ÿä¸€è¿”å›æ ¼å¼var responseData;router.use(function(req, res, next) &#123; responseData = &#123; code: 0, message: &#x27;&#x27; &#125;; next();&#125;);router.post(&quot;/sms&quot;, function(req, res,next) &#123; let apikey = &#x27;319c56f98891*******42a52836**0&#x27;; let mobile = req.body.mobile; let random = Math.ceil(Math.random()*1000000); let text = &#x27;ã€h5webå¼€å‘è€…ã€‘æ‚¨çš„éªŒè¯ç æ˜¯$&#123;random&#125;ã€‚å¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥æœ¬çŸ­ä¿¡&#x27;; console.log(&quot;é€šè¿‡post&quot;); let options = &#123; hostname: sms_host, port: 443, url: &#x27;https://sms.yunpian.com/v2/sms/single_send.json&#x27;, method: &#x27;POST&#x27;, headers: &#123; &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27; &#125;, form:&#123; apikey:apikey, mobile:mobile, text:text, &#125; &#125; request(options,function(error,response,body)&#123; console.log(&quot;response&quot;+response); console.log(&quot;body&quot;+body); if (!error &amp;&amp; response.statusCode == 200) &#123; res.send(&#123; status:true, message:body, checkCode:random &#125;) &#125;else if (!error &amp;&amp; response.statusCode != 200) &#123; res.send(&#123; status:false, message:body &#125;) &#125;else&#123; res.send(&#123; status:false, message:error &#125;) &#125; &#125;)&#125;)module.exports = router;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"NodeJsä¹‹é‚®ä»¶å‘é€","slug":"Nodeå‘é€é‚®ä»¶","date":"2017-06-29T16:00:00.000Z","updated":"2020-09-16T09:07:41.000Z","comments":true,"path":"2017/06/30/Nodeå‘é€é‚®ä»¶/","link":"","permalink":"http://mariogogogo.github.io/2017/06/30/Node%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/","excerpt":"ä½¿ç”¨Nodejsæ”¶å‘ç”µå­é‚®ä»¶ä¹Ÿéå¸¸ç®€å•ï¼ŒNodemaileråŒ…å°±å¯ä»¥å¸®åŠ©å¿«é€Ÿå®ç°å‘é‚®ä»¶çš„åŠŸèƒ½ã€‚","text":"ä½¿ç”¨Nodejsæ”¶å‘ç”µå­é‚®ä»¶ä¹Ÿéå¸¸ç®€å•ï¼ŒNodemaileråŒ…å°±å¯ä»¥å¸®åŠ©å¿«é€Ÿå®ç°å‘é‚®ä»¶çš„åŠŸèƒ½ã€‚ å‰è¨€ ç”µå­é‚®ä»¶ï¼Œæ˜¯äº’è”ç½‘åº”ç”¨æœ€å¹¿æ³›ä½¿ç”¨çš„æœåŠ¡ä¹‹ä¸€ï¼Œé€šè¿‡ç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¸–ç•Œä¸Šä»»ä½•ä¸€ä¸ªè§’è½çš„ç½‘ç»œç”¨æˆ·è¿›è¡Œè”ç³»ã€‚ å‰å°jséƒ¨åˆ†12node email.js åå°jséƒ¨åˆ†å®‰è£…==nodemailer==æ¨¡å—12npm install nodemailerå®‰è£…==smtpTransport==æ¨¡å— 12npm install nodemailer-smtp-transport 123456789101112131415161718192021222324252627282930313233343536373839404142var nodemailer = require(&quot;nodemailer&quot;);var smtpTransport = require(&#x27;nodemailer-smtp-transport&#x27;);/*é‚®ä»¶å‘é€*/// å¼€å¯ä¸€ä¸ª SMTP è¿æ¥æ± app.get(&#x27;/sendmail&#x27;, function(req, res) &#123; //ä¾èµ–çš„ä¸¤ä¸ªæ¨¡å— var nodemailer = require(&quot;nodemailer&quot;); var smtpTransport = require(&#x27;nodemailer-smtp-transport&#x27;); var to = &#x27;admin@xxx.com&#x27;; //å‘é€åœ°å€ // var to=&#x27;admin@xxx.com,editor@xxx.com&#x27;; //å‘é€ç»™å¤šä¸ªäººï¼Œè‹±æ–‡é€—å·éš”å¼€ var subject = &#x27;é‚®ä»¶æ ‡é¢˜&#x27;; //å‘é€çš„æ ‡é¢˜ var html = &#x27;&lt;div&gt;é‚®ä»¶å†…å®¹&lt;/div&gt;&#x27;; //å‘é€çš„å†…å®¹ var transport = nodemailer.createTransport(smtpTransport(&#123; host: &#x27;smtp.exmail.qq.com&#x27;, port: 465, secure: true, auth: &#123; user: &#x27;admin@xxx.com&#x27;, //ä½ çœŸå®çš„é‚®ç®± pass: &#x27;yyyy&#x27; //çœŸå®çš„å¯†ç  &#125; &#125;)); var mailOptions = &#123; from: &#x27;xxx &lt;no_reply@xxx.com&gt;&#x27;, to: to, subject: subject, html: html &#125;; transport.sendMail(mailOptions, function(error, info) &#123; if (error) &#123; res.send(error); &#125; else &#123; res.send(info.response); &#125; &#125;);&#125;);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"NodeJsä¹‹åšå®¢ï¼ˆä¸‰ï¼‰","slug":"NodeJsä¹‹åšå®¢ï¼ˆä¸‰ï¼‰","date":"2017-06-28T16:00:00.000Z","updated":"2020-09-16T09:07:42.000Z","comments":true,"path":"2017/06/29/NodeJsä¹‹åšå®¢ï¼ˆä¸‰ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/06/29/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89/","excerpt":"å¢åŠ ==cookie==ä¸æ•°æ®åº“==mongodb==","text":"å¢åŠ ==cookie==ä¸æ•°æ®åº“==mongodb== å¯åŠ¨æ•°æ®åº“ app.js1234567891011121314151617181920212223242526272829303132333435363738394041/**æ›´å¤šæ•°æ®*///åŠ è½½cookiesæ¨¡å—var Cookies = require(&#x27;cookies&#x27;);//åŠ è½½æ•°æ®åº“userè¡¨æ•°æ®var User = require(&#x27;./models/User&#x27;);//è®¾ç½®cookieapp.use( function(req, res, next) &#123; req.cookies = new Cookies(req, res); //è§£æç™»å½•ç”¨æˆ·çš„cookieä¿¡æ¯ req.userInfo = &#123;&#125;; if (req.cookies.get(&#x27;userInfo&#x27;)) &#123; try &#123; req.userInfo = JSON.parse(req.cookies.get(&#x27;userInfo&#x27;)); //è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ç±»å‹ï¼Œæ˜¯å¦æ˜¯ç®¡ç†å‘˜ User.findById(req.userInfo._id).then(function(userInfo) &#123; req.userInfo.isAdmin = Boolean(userInfo.isAdmin); next(); &#125;) &#125;catch(e)&#123; next(); &#125; &#125; else &#123; next(); &#125;&#125; );ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚//è¿æ¥æ•°æ®åº“mongoose.connect(&#x27;mongodb://localhost:27018/blog&#x27;, function(err) &#123; if (err) &#123; console.log(&#x27;æ•°æ®åº“è¿æ¥å¤±è´¥&#x27;); &#125; else &#123; console.log(&#x27;æ•°æ®åº“è¿æ¥æˆåŠŸ&#x27;); app.listen(8081); &#125;&#125;); users.js12345678910111213141516var mongoose = require(&#x27;mongoose&#x27;);//ç”¨æˆ·çš„è¡¨ç»“æ„module.exports = new mongoose.Schema(&#123; //ç”¨æˆ·å username: String, //å¯†ç  password: String, //æ˜¯å¦æ˜¯ç®¡ç†å‘˜ isAdmin: &#123; type: Boolean, default: false &#125;&#125;); åˆ›å»ºç”¨æˆ·ç™»å½•åŠæ³¨å†Œçš„æ•°æ®åº“è¡¨å®é™…æ“ä½œè¿‡ç¨‹ä¸­ä¸æ˜¯æ“ä½œè¡¨ç»“æ„è€Œæ˜¯æ“ä½œæ¨¡å‹ç±»æ‰€ä»¥è¿˜è¦åˆ›å»ºä¸€ä¸ªæ¨¡å‹ç±»æ•°æ®==model== 12345var mongoose = require(&#x27;mongoose&#x27;);var usersSchema = require(&#x27;../schemas/users&#x27;);//moudlueä¸‹åˆ›å»ºä¸€ä¸ªæ¨¡å‹module.exports = mongoose.model(&#x27;User&#x27;, usersSchema);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"NodeJsä¹‹åšå®¢ï¼ˆäºŒï¼‰","slug":"NodeJsä¹‹åšå®¢ï¼ˆäºŒï¼‰","date":"2017-06-27T16:00:00.000Z","updated":"2020-09-16T09:07:42.000Z","comments":true,"path":"2017/06/28/NodeJsä¹‹åšå®¢ï¼ˆäºŒï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/06/28/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"å¢åŠ ç¬¬ä¸‰æ–¹æ¨¡å—","text":"å¢åŠ ç¬¬ä¸‰æ–¹æ¨¡å— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * Created by æ¯… on 2016/7/30. * åº”ç”¨ç¨‹åºçš„å¯åŠ¨ï¼ˆå…¥å£ï¼‰æ–‡ä»¶ *///åŠ è½½expressæ¨¡å—var express = require(&#x27;express&#x27;);//åŠ è½½æ¨¡æ¿å¤„ç†æ¨¡å—var swig = require(&#x27;swig&#x27;);//åŠ è½½æ•°æ®åº“æ¨¡å—var mongoose = require(&#x27;mongoose&#x27;);//åŠ è½½body-parserï¼Œç”¨æ¥å¤„ç†postæäº¤è¿‡æ¥çš„æ•°æ®var bodyParser = require(&#x27;body-parser&#x27;);//åŠ è½½cookiesæ¨¡å—var Cookies = require(&#x27;cookies&#x27;);//åˆ›å»ºappåº”ç”¨ =&gt; NodeJS Http.createServer();var app = express();//è®¾ç½®é™æ€æ–‡ä»¶æ‰˜ç®¡ å¤„ç† js css//å½“ç”¨æˆ·è®¿é—®çš„urlä»¥/publicå¼€å§‹ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å¯¹åº”__dirname + &#x27;/public&#x27;ä¸‹çš„æ–‡ä»¶app.use( &#x27;/public&#x27;, express.static( __dirname + &#x27;/public&#x27;) );//é…ç½®åº”ç”¨æ¨¡æ¿//å®šä¹‰å½“å‰åº”ç”¨æ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ¨¡æ¿å¼•æ“çš„åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ¨¡æ¿æ–‡ä»¶çš„åç¼€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºç”¨äºè§£æå¤„ç†æ¨¡æ¿å†…å®¹çš„æ–¹æ³•app.engine(&#x27;html&#x27;, swig.renderFile);//è®¾ç½®æ¨¡æ¿æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯viewsï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç›®å½•app.set(&#x27;views&#x27;, &#x27;./views&#x27;);//æ³¨å†Œæ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ view engineï¼Œç¬¬äºŒä¸ªå‚æ•°å’Œapp.engineè¿™ä¸ªæ–¹æ³•ä¸­å®šä¹‰çš„æ¨¡æ¿å¼•æ“çš„åç§°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ˜¯ä¸€è‡´çš„app.set(&#x27;view engine&#x27;, &#x27;html&#x27;);//åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å–æ¶ˆæ¨¡æ¿ç¼“å­˜swig.setDefaults(&#123;cache: false&#125;);//bodyparserè®¾ç½® å»é™¤ç¼“å­˜app.use( bodyParser.urlencoded(&#123;extended: true&#125;) );/** æ ¹æ®ä¸åŒçš„åŠŸèƒ½åˆ’åˆ†æ¨¡å—* */app.use(&#x27;/admin&#x27;, require(&#x27;./routers/admin&#x27;));app.use(&#x27;/api&#x27;, require(&#x27;./routers/api&#x27;));app.use(&#x27;/&#x27;, require(&#x27;./routers/main&#x27;));//ç›‘å¬httpè¯·æ±‚app.listen(8081);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"NodeJsä¹‹åšå®¢ï¼ˆä¸€ï¼‰","slug":"NodeJsä¹‹åšå®¢ï¼ˆä¸€ï¼‰","date":"2017-06-26T16:00:00.000Z","updated":"2020-09-16T09:07:43.000Z","comments":true,"path":"2017/06/27/NodeJsä¹‹åšå®¢ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/06/27/NodeJs%E4%B9%8B%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"åšä¸€ä¸ªåšå®¢é¡¹ç›®å­¦ä¹ ä¸‹","text":"åšä¸€ä¸ªåšå®¢é¡¹ç›®å­¦ä¹ ä¸‹ ä»€ä¹ˆæ˜¯ï¼®odeJs JSæ˜¯è„šæœ¬è¯­è¨€ï¼Œè„šæœ¬è¯­è¨€éƒ½éœ€è¦ä¸€ä¸ªè§£æå™¨æ‰èƒ½è¿è¡Œã€‚å¯¹äºå†™åœ¨HTMLé¡µé¢é‡Œçš„JSï¼Œæµè§ˆå™¨å……å½“äº†è§£æå™¨çš„è§’è‰²ã€‚è€Œå¯¹äºéœ€è¦ç‹¬ç«‹è¿è¡Œçš„JSï¼ŒNodeJSå°±æ˜¯ä¸€ä¸ªè§£æå™¨ã€‚ æ¯ä¸€ç§è§£æå™¨éƒ½æ˜¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œä¸ä½†å…è®¸JSå®šä¹‰å„ç§æ•°æ®ç»“æ„ï¼Œè¿›è¡Œå„ç§è®¡ç®—ï¼Œè¿˜å…è®¸JSä½¿ç”¨è¿è¡Œç¯å¢ƒæä¾›çš„å†…ç½®å¯¹è±¡å’Œæ–¹æ³•åšä¸€äº›äº‹æƒ…ã€‚ä¾‹å¦‚è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„JSçš„ç”¨é€”æ˜¯æ“ä½œDOMï¼Œæµè§ˆå™¨å°±æä¾›äº†documentä¹‹ç±»çš„å†…ç½®å¯¹è±¡ã€‚è€Œè¿è¡Œåœ¨NodeJSä¸­çš„JSçš„ç”¨é€”æ˜¯æ“ä½œç£ç›˜æ–‡ä»¶æˆ–æ­å»ºHTTPæœåŠ¡å™¨ï¼ŒNodeJSå°±ç›¸åº”æä¾›äº†fsã€httpç­‰å†…ç½®å¯¹è±¡ã€‚ NodeJsæœ‰ä»€ä¹ˆç”¨å¤„ å½“æ—¶åœ¨å…¬å¸å­¦ä¹ nodeçš„æ—¶å€™ä¸€å¬è¯´å¯ä»¥ç›´æ¥è¿è¡ŒJsæ–‡ä»¶å°±è§‰å¾—å¾ˆç»™åŠ›ï¼Œä½†åœ¨æ¥è§¦æ–°çŸ¥è¯†æ—¶é¦–å…ˆå…³å¿ƒçš„æ˜¯æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œä»¥åŠèƒ½å¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼ NodeJSçš„ä½œè€…è¯´ï¼Œä»–åˆ›é€ NodeJSçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°é«˜æ€§èƒ½WebæœåŠ¡å™¨ï¼Œä»–é¦–å…ˆçœ‹é‡çš„æ˜¯äº‹ä»¶æœºåˆ¶å’Œå¼‚æ­¥IOæ¨¡å‹çš„ä¼˜è¶Šæ€§ï¼Œè€Œä¸æ˜¯JSã€‚ä½†æ˜¯ä»–éœ€è¦é€‰æ‹©ä¸€ç§ç¼–ç¨‹è¯­è¨€å®ç°ä»–çš„æƒ³æ³•ï¼Œè¿™ç§ç¼–ç¨‹è¯­è¨€ä¸èƒ½è‡ªå¸¦IOåŠŸèƒ½ï¼Œå¹¶ä¸”éœ€è¦èƒ½è‰¯å¥½æ”¯æŒäº‹ä»¶æœºåˆ¶ã€‚JSæ²¡æœ‰è‡ªå¸¦IOåŠŸèƒ½ï¼Œå¤©ç”Ÿå°±ç”¨äºå¤„ç†æµè§ˆå™¨ä¸­çš„DOMäº‹ä»¶ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸€å¤§ç¾¤ç¨‹åºå‘˜ï¼Œå› æ­¤å°±æˆä¸ºäº†å¤©ç„¶çš„é€‰æ‹©ã€‚ å¦‚ä»–æ‰€æ„¿ï¼ŒNodeJSåœ¨æœåŠ¡ç«¯æ´»è·ƒèµ·æ¥ï¼Œå‡ºç°äº†å¤§æ‰¹åŸºäºNodeJSçš„WebæœåŠ¡ã€‚è€Œå¦ä¸€æ–¹é¢ï¼ŒNodeJSè®©å‰ç«¯ä¼—å¦‚è·ç¥å™¨ï¼Œç»ˆäºå¯ä»¥è®©è‡ªå·±çš„èƒ½åŠ›è¦†ç›–èŒƒå›´è·³å‡ºæµè§ˆå™¨çª—å£ï¼Œæ›´å¤§æ‰¹çš„å‰ç«¯å·¥å…·å¦‚é›¨åæ˜¥ç¬‹ã€‚ å› æ­¤ï¼Œå¯¹äºå‰ç«¯è€Œè¨€ï¼Œè™½ç„¶ä¸æ˜¯äººäººéƒ½è¦æ‹¿NodeJSå†™ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºï¼Œä½†ç®€å•å¯è‡³ä½¿ç”¨å‘½ä»¤äº¤äº’æ¨¡å¼è°ƒè¯•JSä»£ç ç‰‡æ®µï¼Œå¤æ‚å¯è‡³ç¼–å†™å·¥å…·æå‡å·¥ä½œæ•ˆç‡ã€‚ NodeJSç”Ÿæ€åœˆæ­£æ¬£æ¬£å‘è£ã€‚ NodeJsç‰¹ç‚¹æ¨¡å— ç¼–å†™ç¨å¤§ä¸€ç‚¹çš„ç¨‹åºæ—¶ä¸€èˆ¬éƒ½ä¼šå°†ä»£ç æ¨¡å—åŒ–ã€‚åœ¨NodeJSä¸­ï¼Œä¸€èˆ¬å°†ä»£ç åˆç†æ‹†åˆ†åˆ°ä¸åŒçš„JSæ–‡ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè€Œæ–‡ä»¶è·¯å¾„å°±æ˜¯æ¨¡å—åã€‚åœ¨ç¼–å†™æ¯ä¸ªæ¨¡å—æ—¶ï¼Œéƒ½æœ‰requireã€exportsã€moduleä¸‰ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„å˜é‡å¯ä¾›ä½¿ç”¨ã€‚ requirerequireå‡½æ•°ç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚æ¨¡å—åå¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆä»¥./å¼€å¤´ï¼‰ï¼Œæˆ–è€…æ˜¯ç»å¯¹è·¯å¾„ï¼ˆä»¥/æˆ–C:ä¹‹ç±»çš„ç›˜ç¬¦å¼€å¤´ï¼‰ã€‚å¦å¤–ï¼Œæ¨¡å—åä¸­çš„.jsæ‰©å±•åå¯ä»¥çœç•¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ exportsexportså¯¹è±¡æ˜¯å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚åˆ«çš„æ¨¡å—é€šè¿‡requireå‡½æ•°ä½¿ç”¨å½“å‰æ¨¡å—æ—¶å¾—åˆ°çš„å°±æ˜¯å½“å‰æ¨¡å—çš„exportså¯¹è±¡ã€‚ä»¥ä¸‹ä¾‹å­ä¸­å¯¼å‡ºäº†ä¸€ä¸ªå…¬æœ‰æ–¹æ³•ã€‚ moduleé€šè¿‡moduleå¯¹è±¡å¯ä»¥è®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚ä¾‹å¦‚æ¨¡å—å¯¼å‡ºå¯¹è±¡é»˜è®¤æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¦‚æœæƒ³æ”¹æˆä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€‚ 1234567891011121314151617181920212223/** * åº”ç”¨ç¨‹åºçš„å¯åŠ¨ï¼ˆå…¥å£ï¼‰æ–‡ä»¶ *///åŠ è½½expressæ¨¡å—var express = require(&#x27;express&#x27;);//åŠ è½½æ¨¡æ¿å¤„ç†æ¨¡å—var swig = require(&#x27;swig&#x27;);//åŠ è½½æ•°æ®åº“æ¨¡å—var mongoose = require(&#x27;mongoose&#x27;);//åŠ è½½body-parserï¼Œç”¨æ¥å¤„ç†postæäº¤è¿‡æ¥çš„æ•°æ®var bodyParser = require(&#x27;body-parser&#x27;);//åˆ›å»ºappåº”ç”¨ =&gt; NodeJS Http.createServer();var app = express();app.get(&quot;/&quot;,function(req,res,next)&#123; res.send(&quot;&lt;h2&gt;æ¬¢è¿æ¥çš„æˆ‘çš„åšå®¢&lt;/h2&gt;&quot;)&#125;)//ç›‘å¬httpè¯·æ±‚app.listen(8081);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"å‘é€çŸ­ä¿¡éªŒè¯ï¼ŒåæŒ‰é’®å€’è®¡æ—¶ï¼Œé˜²æ­¢åˆ·æ–°å€’è®¡æ—¶å¤±æ•ˆ","slug":"å‘é€çŸ­ä¿¡éªŒè¯ï¼ŒåæŒ‰é’®å€’è®¡æ—¶ï¼Œé˜²æ­¢åˆ·æ–°å€’è®¡æ—¶å¤±æ•ˆ","date":"2017-06-25T16:00:00.000Z","updated":"2020-09-16T09:07:02.000Z","comments":true,"path":"2017/06/26/å‘é€çŸ­ä¿¡éªŒè¯ï¼ŒåæŒ‰é’®å€’è®¡æ—¶ï¼Œé˜²æ­¢åˆ·æ–°å€’è®¡æ—¶å¤±æ•ˆ/","link":"","permalink":"http://mariogogogo.github.io/2017/06/26/%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%EF%BC%8C%E5%90%8E%E6%8C%89%E9%92%AE%E5%80%92%E8%AE%A1%E6%97%B6%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%88%B7%E6%96%B0%E5%80%92%E8%AE%A1%E6%97%B6%E5%A4%B1%E6%95%88/","excerpt":"åœ¨å¼€å‘â€œå‘é€çŸ­ä¿¡éªŒè¯â€åŠŸèƒ½æ—¶å€™ï¼Œè¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œé˜²æ­¢æ¶æ„æˆ–é¢‘ç¹å‘é€çŸ­ä¿¡éªŒè¯ç é—®é¢˜ã€‚ä¸€èˆ¬åŸç†æ˜¯â€œå½“ç‚¹å‡»å‘é€æŒ‰é’®æ—¶ï¼Œå‘é€ajaxè¯·æ±‚åˆ°æœåŠ¡å™¨å‘é€çŸ­ä¿¡éªŒè¯ç ï¼ŒæˆåŠŸåˆ™æŠŠå‘é€æŒ‰é’®è®¾ç½®ä¸ºä¸å¯ç‚¹å‡»ï¼Œå¹¶ä¸”è°ƒç”¨å®šæ—¶å™¨ï¼ŒæŒ‰é’®æ˜¾ç¤ºå€’è®¡æ—¶â€ã€‚å¦‚æœå°±è¿™æ ·ä¸å¯¹å€’è®¡æ—¶å­˜å‚¨åšå¤„ç†ï¼Œé‚£ä¹ˆå½“åˆ·æ–°é¡µé¢ï¼Œä¼šå‡ºç°å€’è®¡æ—¶å¤±æ•ˆï¼ŒæŒ‰é’®å¯ç‚¹å‡»ã€‚æä¾›ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š åˆ©ç”¨cookieå­˜å‚¨å€’è®¡æ—¶ åˆ©ç”¨HTML5çš„localStorage å­˜å‚¨å€’è®¡æ—¶","text":"åœ¨å¼€å‘â€œå‘é€çŸ­ä¿¡éªŒè¯â€åŠŸèƒ½æ—¶å€™ï¼Œè¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œé˜²æ­¢æ¶æ„æˆ–é¢‘ç¹å‘é€çŸ­ä¿¡éªŒè¯ç é—®é¢˜ã€‚ä¸€èˆ¬åŸç†æ˜¯â€œå½“ç‚¹å‡»å‘é€æŒ‰é’®æ—¶ï¼Œå‘é€ajaxè¯·æ±‚åˆ°æœåŠ¡å™¨å‘é€çŸ­ä¿¡éªŒè¯ç ï¼ŒæˆåŠŸåˆ™æŠŠå‘é€æŒ‰é’®è®¾ç½®ä¸ºä¸å¯ç‚¹å‡»ï¼Œå¹¶ä¸”è°ƒç”¨å®šæ—¶å™¨ï¼ŒæŒ‰é’®æ˜¾ç¤ºå€’è®¡æ—¶â€ã€‚å¦‚æœå°±è¿™æ ·ä¸å¯¹å€’è®¡æ—¶å­˜å‚¨åšå¤„ç†ï¼Œé‚£ä¹ˆå½“åˆ·æ–°é¡µé¢ï¼Œä¼šå‡ºç°å€’è®¡æ—¶å¤±æ•ˆï¼ŒæŒ‰é’®å¯ç‚¹å‡»ã€‚æä¾›ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š åˆ©ç”¨cookieå­˜å‚¨å€’è®¡æ—¶ åˆ©ç”¨HTML5çš„localStorage å­˜å‚¨å€’è®¡æ—¶ ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142$(function() &#123; /*é˜²åˆ·æ–°ï¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨cookie*/ if ($.cookie(&quot;captcha&quot;)) &#123; var count = $.cookie(&quot;captcha&quot;); var btn = $(&#x27;#getting&#x27;); btn.val(count + &#x27;ç§’åå¯é‡æ–°è·å–&#x27;).attr(&#x27;disabled&#x27;, true).css(&#x27;cursor&#x27;, &#x27;not-allowed&#x27;); var resend = setInterval(function() &#123; count--; if (count &gt; 0) &#123; btn.val(count + &#x27;ç§’åå¯é‡æ–°è·å–&#x27;).attr(&#x27;disabled&#x27;, true).css(&#x27;cursor&#x27;, &#x27;not-allowed&#x27;); $.cookie(&quot;captcha&quot;, count, &#123; path: &#x27;/&#x27;, expires: (1 / 86400) * count &#125;); &#125; else &#123; clearInterval(resend); btn.val(&quot;è·å–éªŒè¯ç &quot;).removeClass(&#x27;disabled&#x27;).removeAttr(&#x27;disabled style&#x27;); &#125; &#125;, 1000); &#125; /*ç‚¹å‡»æ”¹å˜æŒ‰é’®çŠ¶æ€ï¼Œå·²ç»ç®€ç•¥æ‰ajaxå‘é€çŸ­ä¿¡éªŒè¯çš„ä»£ç */ // æˆ‘ä»¬æ¥è¯•è¯•è¿™ä¸ªæ•ˆæœçš„ $(&#x27;#getting&#x27;).click(function() &#123; var count = 10; var resend = setInterval(function() &#123; count--; if (count &gt; 0) &#123; $(this).val(count + &quot;ç§’åå¯é‡æ–°è·å–&quot;); $.cookie(&quot;captcha&quot;, count, &#123; path: &#x27;/&#x27;, expires: (1 / 86400) * count &#125;); &#125; else &#123; clearInterval(resend); $(this).val(&quot;è·å–éªŒè¯ç &quot;).removeAttr(&#x27;disabled&#x27;); &#125; &#125;, 1000); $(this).attr(&#x27;disabled&#x27;, true).css(&#x27;cursor&#x27;, &#x27;not-allowed&#x27;); &#125;);&#125;);","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Jquery","slug":"Jquery","permalink":"http://mariogogogo.github.io/tags/Jquery/"}]},{"title":"10 ä¸ªå¸¸è§çš„ Node.js é¢è¯•é¢˜","slug":"10ä¸ªå¸¸è§çš„Node.jsé¢è¯•é¢˜","date":"2017-06-18T16:00:00.000Z","updated":"2021-02-18T06:09:04.000Z","comments":true,"path":"2017/06/19/10ä¸ªå¸¸è§çš„Node.jsé¢è¯•é¢˜/","link":"","permalink":"http://mariogogogo.github.io/2017/06/19/10%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84Node.js%E9%9D%A2%E8%AF%95%E9%A2%98/","excerpt":"","text":"å¦‚æœä½ å¸Œæœ›æ‰¾ä¸€ä»½æœ‰å…³ Node.js çš„å·¥ä½œï¼Œä½†åˆä¸çŸ¥é“ä»å“ªé‡Œå…¥æ‰‹è¯„æµ‹è‡ªå·±å¯¹ node.js çš„æŒæ¡ç¨‹åº¦ã€‚ æœ¬æ–‡å°±ä¸ºä½ ç½—åˆ—äº† 10 ä¸ªå¸¸è§çš„ Node.js é¢è¯•é¢˜ï¼Œåˆ†åˆ«è€ƒå¯Ÿäº† Node.js ç¼–ç¨‹ç›¸å…³çš„å‡ ä¸ªä¸»è¦æ–¹é¢ã€‚ åœ¨è¿›å…¥æ­£æ–‡ä¹‹å‰ï¼Œéœ€è¦æå‰å£°æ˜ä¸¤ç‚¹ï¼š è¿™äº›é—®é¢˜åªæ˜¯Node.jsçŸ¥è¯†ä½“ç³»çš„ä¸€ä¸ªå±€éƒ¨ï¼Œå¹¶ä¸èƒ½å®Œå…¨è€ƒå¯Ÿè¢«é¢è¯•è€…çš„å®é™…å¼€å‘èƒ½åŠ›ã€‚ å¯¹ç°å®ä¸–ç•Œå¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œéœ€è¦çš„æ˜¯éšæœºåº”å˜ä¸å›¢é˜Ÿåˆä½œï¼Œæ‰€ä»¥ä½ å¯ä»¥å°è¯•ç»“å¯¹ç¼–ç¨‹ã€‚ Node.js é¢è¯•é¢˜åˆ—è¡¨ ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ å¦‚ä½•é¿å…å›è°ƒåœ°ç‹±ï¼Ÿ å¦‚ä½•ç”¨Nodeæ¥ç›‘å¬80ç«¯å£ï¼Ÿ ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿ å“ªäº›å·¥å…·å¯ä»¥ç”¨æ¥ä¿è¯ä¸€è‡´çš„ç¼–ç¨‹é£æ ¼ï¼Ÿ è¿ç®—é”™è¯¯ä¸ç¨‹åºå‘˜é”™è¯¯çš„åŒºåˆ«ï¼Ÿ ä½¿ç”¨NPMæœ‰å“ªäº›å¥½å¤„ï¼Ÿ ä»€ä¹ˆæ˜¯stubï¼Ÿä¸¾ä¸ªä½¿ç”¨åœºæ™¯ï¼Ÿ ä»€ä¹ˆæ˜¯æµ‹è¯•é‡‘å­—å¡”ï¼Ÿå¯¹äºHTTP APIï¼Œå¦‚ä½•åˆ©ç”¨æµ‹è¯•é‡‘å­—å¡”ï¼Ÿ ä½ æœ€å–œæ¬¢çš„HTTPæ¡†æ¶ï¼Œå¹¶è¯´æ˜åŸå› ï¼Ÿ ç°åœ¨ï¼Œæˆ‘ä»¬ä¾æ¬¡æ¥è§£ç­”è¿™äº›é—®é¢˜å§ã€‚ ä»€ä¹ˆæ˜¯é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼Ÿ é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ç”¨äºä¼ é€’é”™è¯¯å’Œæ•°æ®ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆåº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œ ç”¨äºæ£€æŸ¥ç¨‹åºæ˜¯å¦å‘ç”Ÿäº†é”™è¯¯ã€‚å…¶ä½™çš„å‚æ•°ç”¨äºä¼ é€’æ•°æ®ã€‚ä¾‹å¦‚ï¼š fs.readFile(filePath, function(err, data) {if (err) {//handle the error}// use the data object}); è§£æï¼šè¿™ä¸ªé¢˜ç›®çš„ä¸»è¦ä½œç”¨åœ¨äºæ£€æŸ¥è¢«é¢è¯•è€…å¯¹äº Node ä¸­å¼‚æ­¥æ“ä½œçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†çš„æŒæ¡ã€‚å¦‚ä½•é¿å…å›è°ƒåœ°ç‹± ä½ å¯ä»¥æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š æ¨¡å—åŒ–ï¼šå°†å›è°ƒå‡½æ•°åˆ†å‰²ä¸ºç‹¬ç«‹çš„å‡½æ•° ä½¿ç”¨Promises ä½¿ç”¨yieldæ¥è®¡ç®—ç”Ÿæˆå™¨æˆ–Promise è§£æï¼šè¿™ä¸ªé—®é¢˜æœ‰å¾ˆå¤šç§ç­”æ¡ˆï¼Œå–å†³ä½ ä½¿ç”¨çš„åœºæ™¯ï¼Œä¾‹å¦‚ ES6, ES7ï¼Œæˆ–è€…ä¸€äº›æ§åˆ¶æµåº“ã€‚å¦‚ä½•ç”¨ Node ç›‘å¬ 80 ç«¯å£ è¿™é¢˜æœ‰é™·é˜±ï¼åœ¨ç±» Unix ç³»ç»Ÿä¸­ä½ ä¸åº”è¯¥å°è¯•å»ç›‘å¬ 80 ç«¯å£ï¼Œå› ä¸ºè¿™éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚ å› æ­¤ä¸æ¨èè®©ä½ çš„åº”ç”¨ç›´æ¥ç›‘å¬è¿™ä¸ªç«¯å£ã€‚ ç›®å‰ï¼Œå¦‚æœä½ ä¸€å®šè¦è®©ä½ çš„åº”ç”¨ç›‘å¬ 80 ç«¯å£çš„è¯ï¼Œä½ å¯ä»¥æœ‰é€šè¿‡åœ¨ Node åº”ç”¨çš„å‰æ–¹å†å¢åŠ ä¸€å±‚åå‘ä»£ç† ï¼ˆä¾‹å¦‚ nginxï¼‰æ¥å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¦åˆ™ï¼Œå»ºè®®ä½ ç›´æ¥ç›‘å¬å¤§äº 1024 çš„ç«¯å£ã€‚ Reverse Proxy æ–¹å‘ä»£ç†æŒ‡çš„æ˜¯ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥æ”¶Internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œ å¹¶ä¸”å°†æœåŠ¡å™¨è¿”å›çš„ç»“æœå‘é€ç»™å®¢æˆ·ç«¯ã€‚ å…³äºåå‘ä»£ç†çš„æ›´å¤šå†…å®¹ï¼Œå»ºè®®ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚ å…³äºå¦‚ä½•åˆ©ç”¨ nginx æ¥ä¸º node é…ç½®æ–¹å‘ä»£ç†çš„å®è·µï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡åšæ–‡ã€‚ è§£é‡Šï¼šè¿™ä¸ªé—®é¢˜ç”¨äºæ£€æŸ¥è¢«é¢è¯•è€…æ˜¯å¦æœ‰å®é™…è¿è¡Œ Node åº”ç”¨çš„ç»éªŒã€‚ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ Node é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹çš„å¤„ç†æœºåˆ¶ï¼ˆæ‰€æœ‰çš„ I/O è¯·æ±‚éƒ½é‡‡ç”¨éé˜»å¡çš„å·¥ä½œæ–¹å¼ï¼‰ï¼Œè‡³å°‘ä» Node.js å¼€å‘è€…çš„è§’åº¦æ˜¯è¿™æ ·çš„ã€‚ è€Œåœ¨åº•å±‚ï¼ŒNode.js å€ŸåŠ© libuv æ¥ä½œä¸ºæŠ½è±¡å°è£…å±‚ï¼Œ ä»è€Œå±è”½ä¸åŒæ“ä½œç³»ç»Ÿçš„å·®å¼‚ï¼ŒNode å¯ä»¥å€ŸåŠ© livuv æ¥æ¥å®ç°å¤šçº¿ç¨‹ã€‚ä¸‹å›¾è¡¨ç¤ºäº† Node å’Œ libuv çš„å…³ç³»ã€‚ Libuv åº“è´Ÿè´£ Node API çš„æ‰§è¡Œã€‚å®ƒå°†ä¸åŒçš„ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹ï¼Œå½¢æˆä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œ ä»¥å¼‚æ­¥çš„æ–¹å¼å°†ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿”å›ç»™ V8 å¼•æ“ã€‚å¯ä»¥ç®€å•ç”¨ä¸‹é¢è¿™å¼ å›¾æ¥è¡¨ç¤ºã€‚ ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰ æ¯ä¸€ä¸ª I/O éƒ½éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°â€”â€”ä¸€æ—¦æ‰§è¡Œå®Œä¾¿æ¨åˆ°äº‹ä»¶å¾ªç¯ä¸Šç”¨äºæ‰§è¡Œã€‚ å¦‚æœä½ éœ€è¦æ›´å¤šè¯¦ç»†çš„è§£é‡Šï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªè§†é¢‘ã€‚ ä½ ä¹Ÿå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ è§£é‡Šï¼šè¿™ç”¨äºæ£€æŸ¥ Node.js çš„åº•å±‚çŸ¥è¯†ï¼Œä¾‹å¦‚ä»€ä¹ˆæ˜¯ libuvï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚å“ªäº›å·¥å…·å¯ä»¥ç”¨æ¥ä¿è¯ä¸€è‡´æ€§çš„ä»£ç é£æ ¼ ä½ å¯ä»¥é€‰æ‹©å¦‚ä¸‹çš„å·¥å…·ï¼š JSLint JSHint ESLint JSCS - æ¨è åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œè¿™äº›å·¥å…·å¯¹äºç¼–å†™ä»£ç éå¸¸çš„æœ‰å¸®åŠ©ï¼Œèƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿå¼€å‘è€…å¼ºåˆ¶æ‰§è¡Œè§„å®šçš„é£æ ¼æŒ‡å—ï¼Œ è¿˜èƒ½å¤Ÿé€šè¿‡é™æ€åˆ†ææ•è·å¸¸è§çš„é”™è¯¯ã€‚ è§£æï¼šç”¨äºæ£€æŸ¥è¢«é¢è¯•è€…æ˜¯å¦æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒã€‚è¿ç®—é”™è¯¯ä¸ç¨‹åºå‘˜é”™è¯¯çš„åŒºåˆ« è¿ç®—é”™è¯¯å¹¶ä¸æ˜¯ bugï¼Œè¿™æ˜¯å’Œç³»ç»Ÿç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚è¯·æ±‚è¶…æ—¶æˆ–è€…ç¡¬ä»¶æ•…éšœã€‚è€Œç¨‹åºå‘˜é”™è¯¯å°±æ˜¯æ‰€è°“çš„ bugã€‚ è§£æï¼šè¿™ä¸ªé¢˜ç›®å’Œ Node å…³ç³»å¹¶ä¸å¤§ï¼Œç”¨äºè€ƒå¯Ÿé¢è¯•è€…çš„åŸºç¡€çŸ¥è¯†ã€‚ä½¿ç”¨ NPM æœ‰å“ªäº›å¥½å¤„ï¼Ÿ é€šè¿‡ NPMï¼Œä½ å¯ä»¥å®‰è£…å’Œç®¡ç†é¡¹ç›®çš„ä¾èµ–ï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‡æ˜ä¾èµ–é¡¹çš„å…·ä½“ç‰ˆæœ¬å·ã€‚ å¯¹äº Node åº”ç”¨å¼€å‘è€Œè¨€ï¼Œä½ å¯ä»¥é€šè¿‡ package.json æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®ä¿¡æ¯ï¼Œé…ç½®è„šæœ¬ï¼Œ ä»¥åŠæŒ‡æ˜é¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬ã€‚ å…³äº NPM çš„æ›´å¤šä¿¡æ¯ï¼Œä½ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ è§£æï¼šå®ƒèƒ½è€ƒå¯Ÿé¢è¯•è€…ä½¿ç”¨ npm å‘½ä»¤çš„åŸºç¡€çŸ¥è¯†å’Œ Node.js å¼€å‘çš„å®é™…ç»éªŒã€‚ä»€ä¹ˆæ˜¯ Stubï¼Ÿä¸¾ä¸ªä½¿ç”¨åœºæ™¯ Stub æ˜¯ç”¨äºæ¨¡æ‹Ÿä¸€ä¸ªç»„ä»¶æˆ–æ¨¡å—çš„å‡½æ•°æˆ–ç¨‹åºã€‚åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œ ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç”¨ Stub å»æ¨¡æ‹Ÿä¸€ä¸ªæ–¹æ³•ï¼Œä»è€Œé¿å…è°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œ ä½¿ç”¨ Stub ä½ è¿˜å¯ä»¥è¿”å›è™šæ„çš„ç»“æœã€‚ä½ å¯ä»¥é…åˆæ–­è¨€ä½¿ç”¨ Stubã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„åœºæ™¯ä¸­ï¼Œå½“ä½ ä¸æƒ³è¯»å–ä¸€ä¸ªçœŸæ­£çš„æ–‡ä»¶æ—¶ï¼š var fs = require(â€˜fsâ€™); var readFileStub = sinon.stub(fs, â€˜readFileâ€™, function (path, cb) {return cb(null, â€˜filecontentâ€™);}); expect(readFileStub).to.be.called;readFileStub.restore(); åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼šStubæ˜¯å®Œå…¨æ¨¡æ‹Ÿä¸€ä¸ªå¤–éƒ¨ä¾èµ–ï¼Œè€ŒMockå¸¸ç”¨æ¥åˆ¤æ–­æµ‹è¯•é€šè¿‡è¿˜æ˜¯å¤±è´¥ã€‚ æœ‰å…³ Node.js çš„å•å…ƒæµ‹è¯•å°ç»“ï¼Œä½ å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ã€‚ è§£æï¼šç”¨äºæµ‹è¯•è¢«é¢è¯•è€…æ˜¯å¦æœ‰æµ‹è¯•çš„ç»éªŒã€‚å¦‚æœè¢«é¢è¯•è€…çŸ¥é“ä»€ä¹ˆæ˜¯ Stubï¼Œ é‚£ä¹ˆå¯ä»¥ç»§ç»­é—®ä»–æ˜¯å¦‚ä½•åšå•å…ƒæµ‹è¯•çš„ã€‚ä»€ä¹ˆæ˜¯æµ‹è¯•é‡‘å­—å¡”ï¼Ÿ æµ‹è¯•é‡‘å­—å¡”æŒ‡çš„æ˜¯ï¼š å½“æˆ‘ä»¬åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œåº•å±‚çš„å•å…ƒæµ‹è¯•åº”è¯¥è¿œæ¯”ä¸Šå±‚çš„ç«¯åˆ°ç«¯æµ‹è¯•è¦å¤šã€‚ å½“æˆ‘ä»¬è°ˆåˆ° HTTP API æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ¶‰åŠåˆ°ï¼š æœ‰å¾ˆå¤šé’ˆå¯¹æ¨¡å‹çš„åº•å±‚å•å…ƒæµ‹è¯• ä½†ä½ éœ€è¦æµ‹è¯•æ¨¡å‹é—´å¦‚ä½•äº¤äº’æ—¶ï¼Œéœ€è¦å‡å°‘é›†æˆæµ‹è¯• è§£æï¼šæœ¬æ–‡ä¸»è¦è€ƒå¯Ÿè¢«é¢è¯•è€…çš„åœ¨æµ‹è¯•æ–¹é¢çš„ç»éªŒã€‚ä½ æœ€å–œæ¬¢çš„ HTTP æ¡†æ¶ä»¥åŠåŸå›  è¿™é¢˜æ²¡æœ‰å”¯ä¸€çš„ç­”æ¡ˆã€‚æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿè¢«é¢è¯•è€…å¯¹äºä»–æ‰€ä½¿ç”¨çš„ Node æ¡†æ¶çš„ç†è§£ç¨‹åº¦ï¼Œ è€ƒå¯Ÿä»–æ˜¯å¦èƒ½å¤Ÿç»™å‡ºé€‰æ‹©è¯¥æ¡†æ¶çš„ç†ç”±ï¼Œä¼˜ç¼ºç‚¹ç­‰ã€‚å¸¸ç”¨çš„ HTTP æ¡†æ¶ä½ å¯ä»¥å‚è€ƒè¿™ä¸ªç½‘ç«™ã€‚","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"NodeJs","slug":"NodeJs","permalink":"http://mariogogogo.github.io/tags/NodeJs/"}]},{"title":"jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•","slug":"jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•","date":"2017-06-18T16:00:00.000Z","updated":"2020-09-16T09:07:38.000Z","comments":true,"path":"2017/06/19/jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•/","link":"","permalink":"http://mariogogogo.github.io/2017/06/19/jQuery%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF%E6%A1%86%E7%9A%84%E6%96%B9%E6%B3%95/","excerpt":"","text":"æ•ˆæœå›¾ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364$(document).ready(function() &#123;$(&#x27;.btn&#x27;).click(function() &#123; $(&#x27;.mask&#x27;).css(&#123; &#x27;display&#x27;: &#x27;block&#x27; &#125;); center($(&#x27;.mess&#x27;)); check($(this).parent(), $(&#x27;.btn1&#x27;), $(&#x27;.btn2&#x27;));&#125;);// å±…ä¸­function center(obj) &#123; var screenWidth = $(window).width(), screenHeight = $(window).height(); //å½“å‰æµè§ˆå™¨çª—å£çš„ å®½é«˜ var scrolltop = $(document).scrollTop(); //è·å–å½“å‰çª—å£è·ç¦»é¡µé¢é¡¶éƒ¨é«˜åº¦ var objLeft = (screenWidth - obj.width()) / 2; var objTop = (screenHeight - obj.height()) / 2 + scrolltop; console.log(scrolltop); obj.css(&#123; left: objLeft + &#x27;px&#x27;, top: objTop + &#x27;px&#x27;, &#x27;display&#x27;: &#x27;block&#x27; &#125;); //å½“çª—å£å¤§å°å‘ç”Ÿæ”¹å˜æµè§ˆå™¨çª—å£å¤§å°æ”¹å˜æ—¶ $(window).resize(function() &#123; screenWidth = $(window).width(); screenHeight = $(window).height(); scrolltop = $(document).scrollTop(); objLeft = (screenWidth - obj.width()) / 2; objTop = (screenHeight - obj.height()) / 2 + scrolltop; obj.css(&#123; left: objLeft + &#x27;px&#x27;, top: objTop + &#x27;px&#x27;, &#x27;display&#x27;: &#x27;block&#x27; &#125;); &#125;); //å½“æµè§ˆå™¨æœ‰æ»šåŠ¨æ¡æ—¶çš„æ“ä½œã€ $(window).scroll(function() &#123; screenWidth = $(window).width(); screenHeight = $(window).height(); scrolltop = $(document).scrollTop(); objLeft = (screenWidth - obj.width()) / 2; objTop = (screenHeight - obj.height()) / 2 + scrolltop; obj.css(&#123; left: objLeft + &#x27;px&#x27;, top: objTop + &#x27;px&#x27;, &#x27;display&#x27;: &#x27;block&#x27; &#125;); &#125;);&#125;//ç¡®å®šå–æ¶ˆçš„æ“ä½œfunction check(obj, obj1, obj2) &#123; obj1.click(function() &#123; obj.remove(); closed($(&#x27;.mask&#x27;), $(&#x27;.mess&#x27;)); &#125;); obj2.click(function() &#123; closed($(&#x27;.mask&#x27;), $(&#x27;.mess&#x27;)); &#125;);&#125;// éšè— çš„æ“ä½œfunction closed(obj1, obj2) &#123; obj1.hide(); obj2.hide();&#125;&#125;); 12345678910&lt;body style=&quot;height:2000px&quot;&gt;&lt;h2&gt;jQueryé¡µé¢åŠ è½½åå±…ä¸­æ˜¾ç¤ºæ¶ˆæ¯æ¡†çš„æ–¹æ³•&lt;/h2&gt;&lt;input type=&quot;button&quot; class=&quot;btn&quot; value=&quot;å•å‡»å¼¹å‡ºæ¶ˆæ¯æ¡†&quot; /&gt;&lt;div class=&quot;mask&quot;&gt;&lt;/div&gt;&lt;div class=&quot;mess&quot;&gt; &lt;p&gt;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&lt;/p&gt; &lt;p&gt;&lt;input type=&quot;button&quot; value=&quot;ç¡®å®š&quot; class=&quot;btn1&quot; /&gt; &lt;input type=&quot;button&quot; value=&quot;å–æ¶ˆ&quot; class=&quot;btn2&quot; /&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt; 1234567891011121314151617181920212223.mask &#123;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: #000;opacity: 0.5;filter: alpha(opacity=50);display: none;z-index: 99;&#125;.mess &#123;position: absolute;display: none;width: 250px;height: 100px;border: 1px solid #ccc;background: #ececec;text-align: center;z-index: 101;&#125;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"Jquery","slug":"Jquery","permalink":"http://mariogogogo.github.io/tags/Jquery/"}]},{"title":"è·¨åŸŸä¹‹ç™¾åº¦æœç´¢æ¡†","slug":"è·¨åŸŸä¹‹ç™¾åº¦æœç´¢æ¡†","date":"2017-06-15T16:00:00.000Z","updated":"2020-09-16T09:07:06.000Z","comments":true,"path":"2017/06/16/è·¨åŸŸä¹‹ç™¾åº¦æœç´¢æ¡†/","link":"","permalink":"http://mariogogogo.github.io/2017/06/16/%E8%B7%A8%E5%9F%9F%E4%B9%8B%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E6%A1%86/","excerpt":"","text":"è·¨åŸŸçš„é—®é¢˜ åŸŸï¼šåŸŸå è·¨åŸŸè¯·æ±‚ï¼ˆè®¿é—®ï¼‰ï¼šä¸€ä¸ªåŸŸåä¸‹çš„æ–‡ä»¶è¯·æ±‚å¦å¤–ä¸€ä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œå°±äº§ç”Ÿäº†è·¨åŸŸ è·¨åŸŸçš„è§£å†³:Jsonp : json padding æ ‡ç­¾srcçš„ä½œç”¨ ï¼š åŠ è½½ï¼ˆåŒ…å«æŒ‡å®šçš„å¤–éƒ¨æ–‡ä»¶ï¼‰å¯ä»¥è·¨åŸŸåŒ…å«è¢«åŒ…å«çš„èµ„æºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ–‡ä»¶(å¯ä»¥æ˜¯txt,phpç­‰)ä»–åªå…³æ³¨è¢«åŒ…å«çš„æ–‡ä»¶çš„å†…å®¹æ˜¯å¦æ˜¯åˆæ³•çš„JSåŸç†å®šä¹‰å‡½æ•°åŒ…å«å¤–éƒ¨æ–‡ä»¶ï¼Œåœ¨è¢«åŒ…å«çš„æ–‡ä»¶ä¸­æ‰§è¡Œè°ƒç”¨å®šä¹‰å¥½çš„å‡½æ•°å‚æ•°çš„ï¼ˆæ•°æ®ï¼‰çš„å®ç°é—®é¢˜ï¼šåŒ…å«å°±è°ƒç”¨ï¼Œé€šè¿‡åŠ¨æ€åˆ›å»ºå®ç°æŒ‰éœ€è°ƒç”¨é—®é¢˜ï¼šåŒ…å«åŠ¨æ€æ–‡ä»¶æ—¶å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¥å£å®ç°æŒ‰éœ€ç”Ÿæˆè°ƒç”¨å‡½æ•°åç§° æ•ˆæœå›¾ï¼š ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132function serch(data) &#123;var oul = $(&quot;#ul1&quot;);var html = &quot;&quot;;if (data.s.length) &#123; oul.show(); for (var i = 0; i &lt; data.s.length; i++) &#123; if (i &lt; 6) &#123; html += &#x27;&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://www.baidu.com/s?wd=&#x27; + data.s[i] + &#x27;&quot;&gt;&#x27; + data.s[i] + &#x27;&lt;/a&gt;&lt;/li&gt;&#x27;; &#125; &#125; oul.append(html);&#125; else &#123; oul.hide();&#125;&#125;;$(function() &#123;var oq = $(&quot;#q&quot;);var oul = $(&quot;#ul1&quot;);oq.on(&quot;keyup&quot;, function() &#123; oul.empty(); if (this.value != &quot;&quot;) &#123; var oScript = document.createElement(&quot;script&quot;); oScript.src = &quot;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&quot; + $(this).val() + &quot;&amp;cb=serch&quot;; document.body.appendChild(oScript); &#125; else &#123; oul.hide(); &#125;&#125;)&#125;) 123&lt;input type=&quot;text&quot; name=&quot;q&quot; id=&quot;q&quot; value=&quot;&quot;&gt;&lt;ul id=&quot;ul1&quot;&gt;&lt;/ul&gt; 12345678910111213141516171819202122232425262728#q &#123; width: 300px; height: 30px; padding: 5px; border: 1px solid #f90; font-size: 16px; &#125; #ul1 &#123; border: 1px solid #f90; width: 310px; margin: 0; padding: 0; display: none; &#125; li a &#123; line-height: 30px; padding: 5px; text-decoration: none; color: black; display: block; &#125; li a:hover &#123; background: #f90; color: white; &#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"ES6ï¼ˆå…­ï¼‰","slug":"ES6ï¼ˆå…­ï¼‰","date":"2017-05-23T16:00:00.000Z","updated":"2020-09-16T09:07:19.000Z","comments":true,"path":"2017/05/24/ES6ï¼ˆå…­ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/24/ES6%EF%BC%88%E5%85%AD%EF%BC%89/","excerpt":"","text":"classçš„çš„ç»§æ‰¿ 1234#canvas &#123; border: 1px solid black; &#125; 12&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113var num = 1.897;console.log(~~num); //1ï¼Œå»é™¤å°æ•°ç‚¹åé¢çš„æ•°å­—//ä¸‹é¢æ˜¯ç®€å•çš„è§£é‡Šï¼š// Math.random()å‡½æ•°è¿”å›çš„æ˜¯0åˆ°1ä¹‹é—´çš„éšæœºæ•°ã€‚ï¼ˆä¸åŒ…æ‹¬0å’Œ1æœ¬èº«ï¼‰ï¼Œç”¨è¯¥å‡½æ•°ä¹˜ä»¥ä½ è®¾å®šçš„maxå€¼å‡å»minå€¼æ‰€å¾—çš„å·®ï¼Œå³æ˜¯æŒ‰ç…§è‡ªå·±æŒ‡å®šçš„å€æ•°æ”¾å¤§è¿™ä¸ªrandomå€¼ã€‚\\// æ¥ç€ä¸ºäº†ä»minå€¼å¼€å§‹ï¼Œå¿…é¡»åœ¨Math.random()*(max - min)ä¹‹ååŠ ä¸Šminå€¼æœ¬èº«ã€‚ï¼ˆmaxå€¼è¡¨ç¤ºæœ€å¤§å€¼ï¼Œminå€¼è¡¨ç¤ºæœ€å°å€¼ï¼‰var arrs = [1, 10];console.log(Math.max(...arrs));//classç»§æ‰¿/** * class çš„ç»§æ‰¿ç­‰ç›¸å…³çŸ¥è¯† */// extendsã€ staticã€ superconst canvas = document.querySelector(&#x27;#canvas&#x27;);const ctx = canvas.getContext(&#x27;2d&#x27;);const w = canvas.width = 600;const h = canvas.height = 400;class Ball &#123; constructor(x, y, r) &#123; this.x = x; this.y = y; this.r = r; this.color = `rgb($&#123;~~Ball.rpFn([55, 255])&#125;, $&#123;~~Ball.rpFn([55, 255])&#125;, $&#123;~~Ball.rpFn([55, 255])&#125;)`; return this; &#125;; //æ¸²æŸ“æ–¹æ³• render(ctx) &#123; ctx.save(); ctx.translate(this.x, this.y); //å°çƒåæ ‡ ctx.fillStyle = this.color; //æŒ‡å®šé¢œè‰² ctx.beginPath(); //èµ·å§‹è·¯å¾„ ctx.arc(0, 0, this.r, 0, 2 * Math.PI); //ç»˜åˆ¶è·¯å¾„ ctx.fill(); //å¡«å……é¢œè‰² ctx.restore(); //æ¢å¤ç»˜å›¾ç¯å¢ƒ return this; &#125;; // æ€å¿’å¯ å…³é”®å­— ç”Ÿæˆé™æ€æ–¹æ³• æŒ‚è½½åˆ°ç±»å½“ä¸­çš„æ–¹æ³• static rpFn(arr) &#123; // Ball.rpFn([1, 10]) let max = Math.max(...arr), //æ‰©å±•è¿ç®—ç¬¦ min = Math.min(...arr); //éšæœºæ•°å‚æ•° return Math.random() * (max - min) + min; &#125;;&#125;// const ball1 = new Ball(100, 100, 30).render(ctx);//åˆ›å»ºä¸€ä¸ªæ–°ç±» extendå‡½æ•° å»ç»§æ‰¿ ballç±»class SuperBall extends Ball &#123; constructor(x, y, r) &#123; // Ball.call(this, x, y, r); // this.color = &#x27;red&#x27;; super(x, y, r); //super ä¹‹å‰ä½¿ç”¨ this å°†æŒ‡å®šundefined //å­ç±»ç»§æ‰¿çˆ¶ç±» åœ¨æ„é€ å‡½æ•°ä¸­å½“æˆä¸€ä¸ªå‡½æ•°å»ä½¿ç”¨ è°ƒç”¨ //ç»§æ‰¿å±æ€§ åŠ æ–¹æ³• this.vy = SuperBall.rpFn([2, 4]); this.g = SuperBall.rpFn([0.2, 0.4]); //é‡åŠ›åŠ é€Ÿåº¦ this.a = 0; return this; &#125;; move(ctx) &#123; // super(); // éæ„é€ å‡½æ•°ä¸­æŠ¥é”™ åªèƒ½åœ¨æ„é€ å‡½æ•°å½“ä½¿ç”¨ï¼Œå¹¶ä¸”è°ƒç”¨äº†superå°±ç›¸å½“äºä½¿ç”¨äº†çˆ¶ç±»çš„æ–¹æ³• this.y += this.vy; //yè½´åæ ‡ this.vy += this.g; //============é‡åŠ›å‡é€Ÿåå¼¹æ–¹æ³•============= let current = this.vy * -0.75; if (this.y + this.r &gt;= ctx.canvas.height) &#123; this.y = ctx.canvas.height - this.r; if (Math.abs(current - this.a) &lt; 0.05) return false; //============é‡åŠ›å‡é€Ÿåå¼¹æ–¹æ³•============= this.a = this.vy *= -0.75; &#125;; ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); super.render(ctx); //ç°åœ¨çš„superæ˜¯å¯¹è±¡ è€Œä¸æ˜¯å‡½æ•° æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œ è‡ªåŠ¨ç»‘å®šå­ç±»çš„this return true; &#125;&#125;;// const ball1 = new SuperBall(100, 100, 30).render(ctx);let ball, timer;canvas.onclick = function(e) &#123; let x = e.offsetX, y = e.offsetY; let r = ~~Ball.rpFn([15, 55]); //~~æ¸…é™¤å°æ•° //æ¯æ¬¡ç‚¹å‡»ä¹‹å‰æ¸…é™¤ä¹‹å‰çš„å°çƒ ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); ball = new SuperBall(x, y, r).render(ctx); ballMove(); //è°ƒç”¨åå¼¹è¿åŠ¨&#125;function ballMove() &#123; timer = window.requestAnimationFrame(ballMove); if (!ball.move(ctx)) &#123; window.cancelAnimationFrame(timer); &#125;&#125; çŸ¥è¯†ç‚¹ï¼šé‡åŠ›å‡é€Ÿ ï¼Œextendsã€ staticã€ superçš„ç»§æ‰¿çš„ä¸‰ä¸ªæ–¹æ³•","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ES6ï¼ˆäº”ï¼‰","slug":"ES6ï¼ˆäº”ï¼‰","date":"2017-05-22T16:00:00.000Z","updated":"2020-09-16T09:07:19.000Z","comments":true,"path":"2017/05/23/ES6ï¼ˆäº”ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/23/ES6%EF%BC%88%E4%BA%94%EF%BC%89/","excerpt":"classçš„åŸºæœ¬ä½¿ç”¨","text":"classçš„åŸºæœ¬ä½¿ç”¨ JSè¯­è¨€çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼Œå®šä¹‰å¹¶ç”Ÿæˆæ–°å¯¹è±¡ï¼Œæ˜¯ä¸€ç§åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡ç³»ç»Ÿã€‚è¿™ç§å†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„äººæ„Ÿåˆ°å›°æƒ‘ã€‚æ‰€ä»¥ï¼Œåœ¨ES6ä¸­æ–°å¢åŠ äº†ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿ç”¨ class å…³é”®å­—å£°æ˜ä¸€ä¸ªç±»ï¼Œä¹‹åä»¥è¿™ä¸ªç±»æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚12345678910111213// ä¼ ç»Ÿçš„æ„é€ å‡½æ•°æ¨¡å¼ const Miaov = function(a, b) &#123; this.a = a; this.b = b; return this; &#125; Miaov.prototype = &#123; constructor: Miaov, print: function() &#123; console.log(this.a + &quot;, &quot; + this.b); &#125; &#125; var str = new Miaov(&quot;hello&quot;, &quot;js&quot;).print(); 1234567891011121314151617181920212223242526class Miaov &#123;//æ„é€ å‡½æ•°å‚æ•° æŒ‡å®šæ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸éœ€è¦function es6è¯­æ³•constructor(a, b) &#123; this.a = a; this.b = b; return this;&#125;//å®šä¹‰ç±»çš„æ–¹æ³•ç›´æ¥æ–¹æ³•åä¸éœ€è¦function//ä¸éœ€è¦åŠ åˆ†å·åˆ†å‰²//ä¸éœ€è¦prototypeçš„æ–¹æ³•ä¸ŠåŠ æ–¹æ³•print() &#123;console.log(this.a + &quot;&quot; + this.b);&#125;&#125;//å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡const miaov = new Miaov(&quot;hello&quot;, &quot;word&quot;).print();console.log(typeof Miaov); //functionconsole.log(Miaov.prototype);//å®šä¹‰åœ¨ç±»ä¸­çš„æ–¹æ³• éƒ½ä¸æ˜¯å¯ä»¥è¢«æšä¸¾çš„console.log(Object.keys(Miaov.prototype));class P &#123;&#125;;var p = new P();//constructioré»˜è®¤æ·»åŠ console.log(p);p(); //ç›´æ¥è°ƒç”¨ä¼šæŠ¥é”™","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"Javascriptè‡ªå®šä¹‰äº‹ä»¶","slug":"Javascriptè‡ªå®šä¹‰äº‹ä»¶","date":"2017-05-17T07:13:48.000Z","updated":"2020-09-16T09:07:38.000Z","comments":true,"path":"2017/05/17/Javascriptè‡ªå®šä¹‰äº‹ä»¶/","link":"","permalink":"http://mariogogogo.github.io/2017/05/17/Javascript%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/","excerpt":"è‡ªå®šä¹‰äº‹ä»¶ : ä¸»è¦æ˜¯è·Ÿå‡½æ•°æœ‰å…³ç³»,å°±æ˜¯è®©å‡½æ•°èƒ½å¤Ÿå…·å¤‡äº‹ä»¶çš„æŸäº›ç‰¹æ€§","text":"è‡ªå®šä¹‰äº‹ä»¶ : ä¸»è¦æ˜¯è·Ÿå‡½æ•°æœ‰å…³ç³»,å°±æ˜¯è®©å‡½æ•°èƒ½å¤Ÿå…·å¤‡äº‹ä»¶çš„æŸäº›ç‰¹æ€§ 123&lt;div id=&quot;div1&quot;&gt;div&lt;/div&gt;&lt;span id=&quot;span1&quot;&gt;span&lt;/span&gt; 12345678910111213//è‡ªå®šä¹‰äº‹ä»¶åˆçº§ç‰ˆwindow.addEventListener(&#x27;show&#x27;, function() &#123; alert(1);&#125;, false);window.addEventListener(&#x27;show&#x27;, function() &#123; alert(2);&#125;, false);window.addEventListener(&#x27;show&#x27;, function() &#123; alert(3);&#125;, false);show(); //ä¸»åŠ¨è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ //=====================================// 1234567891011121314151617181920212223242526272829303132333435363738394041424344window.onload = function() &#123; var oDiv = document.getElementById(&quot;div1&quot;); var oSpan = document.getElementById(&quot;span1&quot;); //å°ç±³å¯¹divå°è£…çš„æ–¹æ³• bindEvent(oDiv, &quot;click&quot;, function() &#123; alert(1) &#125;); //åä¸ºå¯¹divå°è£…çš„æ–¹æ³• bindEvent(oDiv, &quot;click&quot;, function() &#123; alert(2) &#125;); //å°æœ¨å¯¹spanå°è£…çš„æ–¹æ³• bindEvent(oSpan, &quot;show&quot;, function() &#123; alert(3) &#125;); //è‹¹æœå¯¹spanå°è£…çš„æ–¹æ³• bindEvent(oSpan, &quot;show&quot;, function() &#123; alert(4) &#125;); //è°ƒç”¨å°æœ¨ å’Œè‹¹æœçš„æ–¹æ³• fireEvent(oSpan, &quot;show&quot;);&#125;;function bindEvent(obj, events, fn) &#123; //æ‰¾åˆ°objæ‰€å¯¹åº”çš„äº‹ä»¶ obj.listeners = obj.listeners || &#123;&#125;; obj.listeners[events] = obj.listeners[events] || []; obj.listeners[events].push(fn); console.log(obj.listeners[events]); if (obj.addEventListener) &#123; obj.addEventListener(events, fn, false); &#125; else &#123; obj.attachEvent(&#x27;on&#x27; + events, fn); &#125;&#125;;function fireEvent(obj, events) &#123; for (var i = 0; i &lt; obj.listeners[events].length; i++) &#123; obj.listeners[events][i](); &#125;&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"},{"name":"äº‹ä»¶","slug":"äº‹ä»¶","permalink":"http://mariogogogo.github.io/tags/%E4%BA%8B%E4%BB%B6/"}]},{"title":"é¢å‘å¯¹è±¡åŸºç¡€ï¼ˆä¸€ï¼‰","slug":"é¢å‘å¯¹è±¡åŸºç¡€ï¼ˆä¸€ï¼‰","date":"2017-05-12T07:13:48.000Z","updated":"2020-09-16T09:07:08.000Z","comments":true,"path":"2017/05/12/é¢å‘å¯¹è±¡åŸºç¡€ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/12/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"åŸºæœ¬æ–¹æ³•ç±»ä¼¼cssä¸­çš„styleå±æ€§é¢å‘å¯¹è±¡æ–¹æ³•cssä¸­çš„classå±æ€§","text":"åŸºæœ¬æ–¹æ³•ç±»ä¼¼cssä¸­çš„styleå±æ€§é¢å‘å¯¹è±¡æ–¹æ³•cssä¸­çš„classå±æ€§ Newçš„æ„ä¹‰12345678910111213141516171819202122//å½“newå»è°ƒç”¨ä¸€ä¸ªå‡½æ•° : è¿™ä¸ªæ—¶å€™å‡½æ•°ä¸­çš„thiså°±æ˜¯åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡,è€Œä¸”å‡½æ•°çš„çš„è¿”å›å€¼ç›´æ¥å°±æ˜¯thiså•¦(éšå¼è¿”å›)//newåé¢è°ƒç”¨çš„å‡½æ•° : å«åšæ„é€ å‡½æ•°function CreatePerson(name)&#123; this.name = name; &#125;CreatePerson.prototype.showName = function()&#123; alert( this.name );&#125;;var p1 = new CreatePerson(&#x27;å°æ˜&#x27;);//p1.showName();var p2 = new CreatePerson(&#x27;å°å¼º&#x27;);//p2.showName();alert( p1.showName == p2.showName ); //truevar arr = new Array();var date = new Date(); æ„é€ å‡½æ•°123456789function æ„é€ å‡½æ•°()&#123; this.å±æ€§&#125;æ„é€ å‡½æ•°.åŸå‹.æ–¹æ³• = function()&#123;&#125;;var å¯¹è±¡1 = new æ„é€ å‡½æ•°();å¯¹è±¡1.æ–¹æ³•(); æ —å­ï¼š å…ˆå˜å‹:å°½é‡ä¸è¦å‡ºç°å‡½æ•°åµŒå¥—å‡½æ•°å¯ä»¥æœ‰å…¨å±€å˜é‡æŠŠonloadä¸­ä¸æ˜¯èµ‹å€¼çš„è¯­å¥æ”¾åˆ°å•ç‹¬å‡½æ•°ä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/*window.onload = function()&#123; var oParent = document.getElementById(&#x27;div1&#x27;); var aInput = oParent.getElementsByTagName(&#x27;input&#x27;); var aDiv = oParent.getElementsByTagName(&#x27;div&#x27;); for(var i=0;i&lt;aInput.length;i++)&#123; aInput[i].index = i; aInput[i].onclick = function()&#123; for(var i=0;i&lt;aInput.length;i++)&#123; aInput[i].className = &#x27;&#x27;; aDiv[i].style.display = &#x27;none&#x27;; &#125; this.className = &#x27;active&#x27;; aDiv[this.index].style.display = &#x27;block&#x27;; &#125;; &#125; &#125;;*///å…ˆå˜å‹://å°½é‡ä¸è¦å‡ºç°å‡½æ•°åµŒå¥—å‡½æ•°//å¯ä»¥æœ‰å…¨å±€å˜é‡//æŠŠonloadä¸­ä¸æ˜¯èµ‹å€¼çš„è¯­å¥æ”¾åˆ°å•ç‹¬å‡½æ•°ä¸­var oParent = null;var aInput = null;var aDiv = null;window.onload = function()&#123; oParent = document.getElementById(&#x27;div1&#x27;); aInput = oParent.getElementsByTagName(&#x27;input&#x27;); aDiv = oParent.getElementsByTagName(&#x27;div&#x27;); init(); &#125;;function init()&#123; for(var i=0;i&lt;aInput.length;i++)&#123; aInput[i].index = i; aInput[i].onclick = change; &#125;&#125;function change()&#123; for(var i=0;i&lt;aInput.length;i++)&#123; aInput[i].className = &#x27;&#x27;; aDiv[i].style.display = &#x27;none&#x27;; &#125; this.className = &#x27;active&#x27;; aDiv[this.index].style.display = &#x27;block&#x27;;&#125; thisæŒ‡å‘å¤ä¹ ++æ”¹thisæŒ‡å‘é—®é¢˜ : äº‹ä»¶æˆ–è€…æ˜¯å®šæ—¶å™¨,å°½é‡è®©é¢å‘å¯¹è±¡ä¸­çš„thisæŒ‡å‘å¯¹è±¡++1234567891011121314151617oDiv.onclick = function()&#123; this : oDiv&#125;;oDiv.onclick = show;function show()&#123; this : oDiv&#125;oDiv.onclick = function()&#123; show();&#125;;function show()&#123; this : window&#125; è½¬åŒ–12345678910111213141516171819202122232425262728293031323334353637383940/*var arr = [4,7,1,3];arr.sort(); // 1 3 4 7var arr2 = [4,7,1,3];arr2.push(5);arr2.sort(); // 1 3 4 5 7*/window.onload = function()&#123; var t1 = new Tab(&#x27;div1&#x27;); t1.init();&#125;;function Tab(id)&#123; this.oParent = document.getElementById(id); this.aInput = this.oParent.getElementsByTagName(&#x27;input&#x27;); this.aDiv = this.oParent.getElementsByTagName(&#x27;div&#x27;); this.iNow = 0;&#125;Tab.prototype.init = function()&#123; var This = this; for(var i=0;i&lt;this.aInput.length;i++)&#123; this.aInput[i].index = i; this.aInput[i].onclick = function()&#123; This.change(this); &#125;; &#125;&#125;;Tab.prototype.change = function(obj)&#123; for(var i=0;i&lt;this.aInput.length;i++)&#123; this.aInput[i].className = &#x27;&#x27;; this.aDiv[i].style.display = &#x27;none&#x27;; &#125; obj.className = &#x27;active&#x27;; this.aDiv[obj.index].style.display = &#x27;block&#x27;;&#125;;","categories":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/categories/%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"OOP","slug":"OOP","permalink":"http://mariogogogo.github.io/tags/OOP/"}]},{"title":"ES6ï¼ˆå››ï¼‰","slug":"ES6ï¼ˆå››ï¼‰","date":"2017-05-11T16:00:00.000Z","updated":"2020-09-16T09:07:19.000Z","comments":true,"path":"2017/05/12/ES6ï¼ˆå››ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/12/ES6%EF%BC%88%E5%9B%9B%EF%BC%89/","excerpt":"map å‚¨å­˜ å­—å…¸ç»“æ„æ•°æ® é”®å€¼å¯¹å½¢å¼å­˜å‚¨","text":"map å‚¨å­˜ å­—å…¸ç»“æ„æ•°æ® é”®å€¼å¯¹å½¢å¼å­˜å‚¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;script&gt;var data1 = &#123;a: 1&#125;var data2 = &#123;b: 2&#125;;var obj = &#123;&#125;;obj[data1] = 1;obj[data2] = 2;console.log(obj);//objè½¬æˆå­—ç¬¦ä¸²æ¯”è¾ƒconsole.log(data1.toString() == data2.toString()); //true//========================================//åˆ›å»ºmapconst map = new Map([[&quot;a&quot;, 1],[&quot;b&quot;, 2]])console.log(map);//map æ–¹æ³•map.set(&quot;miaov&quot;, 100)console.log(map);//é‡å¤æ·»åŠ key ä¼šæ›¿æ¢æ‰ä¹‹å‰çš„å€¼map.set(&quot;miaov&quot;, 200)console.log(map);//mapã€‚getæ–¹æ³•console.log(map.get(&quot;miaov&quot;)); //200 å¦åˆ™undefinedï¼›// deleteæ–¹æ³•console.log(map.delete(&quot;a&quot;));// has(key)æ–¹æ³•console.log(map.has(&quot;a&quot;));console.log(map.keys());console.log(map.values());map.forEach(function(key, value, map) &#123;console.log(key + &quot;:&quot; + value);&#125;)//mapæ³¨æ„äº‹é¡¹map.set(NaN, 10).set(NaN, 10);//NaN æ˜¯åŒä¸€ä¸ªé”®map.set(&#123;&#125;, &quot;x&quot;).set(&#123;&#125;, &quot;y&quot;);//ç”±äºå†…å­˜åœ°å€ä¸åŒï¼Œmapè®¤ä¸ºæ˜¯äºŒä¸ªä¸åŒçš„é”®å€¼ã€‚ä¸ç”¨æ‹…å¿ƒåŸæ¥çš„å±æ€§é‡åï¼›&lt;/script&gt;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ES6ï¼ˆä¸‰ï¼‰","slug":"ES6ï¼ˆä¸‰ï¼‰","date":"2017-05-10T16:00:00.000Z","updated":"2020-09-16T09:07:19.000Z","comments":true,"path":"2017/05/11/ES6ï¼ˆä¸‰ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/11/ES6%EF%BC%88%E4%B8%89%EF%BC%89/","excerpt":"setæ•°æ®ç»“æ„é›†åˆ","text":"setæ•°æ®ç»“æ„é›†åˆ1234567891011121314151617181920212223242526272829&lt;script&gt;//å¦‚ä½•åˆ›å»ºsetconst s = new Set([1, 2, 3, [1, 2, 3], &#123; a: 1&#125;])console.log(s);//setå±æ€§console.log(s.size); //5//setæ–¹æ³•s.add(&quot;2&quot;).add(&quot;3&quot;);console.log(s);//setåˆ é™¤s.delete(&quot;3&quot;);console.log(s);//set clear//console.log(s.clear());//è¿”å›é”®å€¼å¯¹éå†å™¨console.log(s.entries())s.forEach(function(value, key, set) &#123; console.log(value + &quot;miaov&quot;)&#125;);//æœªæ”¹å˜æ•°æ®ç»“æ„console.log(s) //============= //å½“é‡æ–°æ·»åŠ ä¸€ä¸ªé‡å¤æ•°æ®s.add(1);console.log(s);//åˆ©ç”¨set æ–¹æ³• è§£å†³æ•°ç»„å»é‡&lt;/script&gt;","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ES6ï¼ˆäºŒï¼‰","slug":"ES6ï¼ˆäºŒï¼‰","date":"2017-05-09T16:00:00.000Z","updated":"2020-09-16T09:07:18.000Z","comments":true,"path":"2017/05/10/ES6ï¼ˆäºŒï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/10/ES6%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"","text":"åŸºæœ¬æ¦‚å¿µï¼šæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§==åŒ¹é…æ¨¡å¼==ï¼Œåªè¦ç­‰å·==ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒ==ï¼Œé‚£ä¹ˆå·¦è¾¹çš„å˜é‡å°±å¯ä»¥è¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ç»“æ„èµ‹å€¼ä¸»è¦åˆ†ä¸ºï¼šæ•°ç»„çš„è§£æ„èµ‹å€¼å¯¹è±¡çš„ç»“æ„èµ‹å€¼ åŸºæœ¬ç±»å‹çš„è§£æ„èµ‹å€¼ 1234567let a = 1;let b = 2;let c = 3;let [a, b, c] = [1, 2, 3];console.log(a, b, c); 1 æ•°ç»„çš„è§£æ„èµ‹å€¼ 123456789101112131415let [a, [[b], c]] = [1, [[2], 3]];console.log(a, b, c); // 1, 2, 3 let [, , c] = [1, 2, 3]; console.log(c); // 3let [x] = []; console.log(x); // let x; undefinedlet [y = 1] = []; console.log(y); // 1 2 å¯¹è±¡çš„è§£æ„èµ‹å€¼ 12345678let &#123;a, b&#125; = &#123;b: &#x27;bbb&#x27;, a: &#x27;aaa&#x27;&#125;;console.log(a, b);let &#123;a: b&#125; = &#123;a: 1&#125;;console.log(b); // 1console.log(a); // a is not defind 3 åŸºæœ¬ç±»å‹çš„è§£æ„èµ‹å€¼ 1234567let [a, b, c, d] = &#x27;1234&#x27;; console.log(a, b, c, d); // 1,2,3,4let &#123;length: len&#125; = &#x27;miaov&#x27;;console.log(len); //4","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ES6ï¼ˆä¸€ï¼‰","slug":"ES6ï¼ˆä¸€ï¼‰","date":"2017-05-09T07:13:48.000Z","updated":"2020-09-16T09:07:20.000Z","comments":true,"path":"2017/05/09/ES6ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://mariogogogo.github.io/2017/05/09/ES6%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"åŸºæœ¬è¯­æ³•letæ˜¯å—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨letå®šä¹‰åï¼Œå¯¹å‡½æ•°å¤–éƒ¨æ— å½±å“ã€‚1234567// é”™è¯¯å†™æ³• å˜é‡æå‡ä¸å¯ä»¥console.log(b);let b = 3;// é”™è¯¯å†™æ³• å˜é‡ä¸å¯é‡å¤èµ‹å€¼let a = 4;let a = 5console.log(a) 123456&lt;button type=&quot;1&quot;&gt;1&lt;/button&gt;&lt;button type=&quot;2&quot;&gt;2&lt;/button&gt;&lt;button type=&quot;3&quot;&gt;3&lt;/button&gt;&lt;button type=&quot;4&quot;&gt;4&lt;/button&gt;&lt;button type=&quot;5&quot;&gt;5&lt;/button&gt; 12345678910111213141516171819202122232425262728var btns = document.querySelectorAll(&quot;button&quot;); for (var i = 0; i &lt; btns.length; i++) &#123; btns[i].onclick = function() &#123; console.log(i) //æ°¸è¿œç­‰äºi=5 &#125; &#125; //æ”¹å˜ for (var i = 0; i &lt; btns.length; i++) &#123; btns[i].index = i; btns[i].onclick = function() &#123; console.log(this.index) &#125; &#125; //æ”¹å˜ for (var i = 0; i &lt; btns.length; i++) &#123; (function(i) &#123; btns[i].onclick = function() &#123; console.log(i) &#125; &#125;)(i); &#125; //æ”¹å˜ for (let i = 0; i &lt; btns.length; i++) &#123; btns[i].onclick = function() &#123; console.log(i) //letåˆ›å»ºå‡ºä½œç”¨åŸŸå— &#125; &#125; constå®šä¹‰çš„å˜é‡ä¸å¯ä»¥ä¿®æ”¹ï¼Œè€Œä¸”å¿…é¡»åˆå§‹åŒ–ã€‚1234567//åœ¨å¾ªç¯è¯­å¥ä¹‹å†…æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œåœ¨å¾ªç¯ä½“ä¸­æ˜¯ä¸€ä¸ªå­ä½œç”¨åŸŸ//ä¾‹å­ï¼šfor (let i = 0; i &lt; 3; i++) &#123;let i = 10;console.log(i);&#125;console.log(i)123456789101112//constå£°æ˜å±æ€§çš„æ—¶å€™å¿…é¡»èµ‹å€¼var a;let b;const c; //æŠ¥é”™//æ”¹å˜å¸¸é‡çš„æ•°æ®const a = 10;a = &#123;&#125;; //æµè§ˆå™¨ä¼šæŠ¥é”™ æ”¹å˜æ•°æ®const a = &#123;obj: 10&#125;;a.obj = 20; //ä¸ä¼šæŠ¥é”™ åªæ˜¯ä¿®æ”¹å¯¹è±¡æ•°æ® æ²¡æœ‰æ”¹å˜objçš„å¼•ç”¨","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ES6æ–°ç‰¹æ€§ä¸€è§ˆ","slug":"ES6æ–°ç‰¹æ€§ä¸€è§ˆ","date":"2017-05-07T16:00:00.000Z","updated":"2020-09-16T09:07:20.000Z","comments":true,"path":"2017/05/08/ES6æ–°ç‰¹æ€§ä¸€è§ˆ/","link":"","permalink":"http://mariogogogo.github.io/2017/05/08/ES6%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/","excerpt":"","text":"","categories":[{"name":"Web","slug":"Web","permalink":"http://mariogogogo.github.io/categories/Web/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://mariogogogo.github.io/tags/ES6/"}]},{"title":"ç”¨JSè·å–å°æ•°ç‚¹åä¸¤ä½æ•°å­—æ–¹æ³•","slug":"ç”¨JSè·å–å°æ•°ç‚¹åä¸¤ä½æ•°å­—æ–¹æ³•","date":"2017-05-07T07:13:48.000Z","updated":"2020-09-16T09:07:16.000Z","comments":true,"path":"2017/05/07/ç”¨JSè·å–å°æ•°ç‚¹åä¸¤ä½æ•°å­—æ–¹æ³•/","link":"","permalink":"http://mariogogogo.github.io/2017/05/07/%E7%94%A8JS%E8%8E%B7%E5%8F%96%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97%E6%96%B9%E6%B3%95/","excerpt":"ä¸Šå‘¨è€å¸ˆç•™ä¸‹çš„ä¸€ä¸ªå°é—®é¢˜ï¼Ÿç”¨Javascriptå–å°æ•°ç‚¹åä¸¤ä½ï¼Œä¾‹å–æˆ3.1415926,å¦‚ä½•åš3.15ï¼Ÿ","text":"ä¸Šå‘¨è€å¸ˆç•™ä¸‹çš„ä¸€ä¸ªå°é—®é¢˜ï¼Ÿç”¨Javascriptå–å°æ•°ç‚¹åä¸¤ä½ï¼Œä¾‹å–æˆ3.1415926,å¦‚ä½•åš3.15ï¼Ÿæˆªå–ï¼š [æˆ‘å°±æ€ä¹ˆå¹²çš„â€¦â€¦â€¦] 123456function get() &#123; var s = 22.127456 + &quot;&quot;; var str = s.substring(0,s.indexOf(&quot;.&quot;) + 3); alert(str); &#125; æ­£åˆ™è¡¨è¾¾å¼æ•ˆæœä¸é”™ 123456789&lt;script type=&quot;text/javascript&quot;&gt; onload = function()&#123; var a = &quot;23.456322&quot;; var aNew; var re = /([0-9]+/.[0-9]&#123;2&#125;)[0-9]*/; aNew = a.replace(re,&quot;$1&quot;); alert(aNew); &#125; &lt;script&gt; ä»–å°±æ¯”è¾ƒèªæ˜äº†â€¦.. 1234&lt;script&gt; var num=22.127456; alert( Math.round(num*100)/100); &lt;script&gt; ä¼šç”¨æ–°é²œä¸œè¥¿çš„æœ‹å‹â€¦â€¦. ä½†æ˜¯éœ€è¦ IE5.5+æ‰æ”¯æŒã€‚ 1234&lt;script&gt; var num=22.127456; alert( num.toFixed(2)); &lt;script&gt;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://mariogogogo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"è‡ªå®šä¹‰æ»šåŠ¨æ¡","slug":"è‡ªå®šä¹‰æ»šåŠ¨æ¡","date":"2017-03-31T16:00:00.000Z","updated":"2020-09-16T09:07:17.000Z","comments":true,"path":"2017/04/01/è‡ªå®šä¹‰æ»šåŠ¨æ¡/","link":"","permalink":"http://mariogogogo.github.io/2017/04/01/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%9A%E5%8A%A8%E6%9D%A1/","excerpt":"å›°æ‰°çš„é—®é¢˜ä¹‹ä¸€ clientHeightå’ŒoffsetHeightçš„å€¼ç”±ä»€ä¹ˆå†³å®šï¼Ÿå‡å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„DIVï¼Œä¸»è¦æ˜¾ç¤ºçš„æ–‡å­—ä¸ºâ€This is the main body of DIVâ€","text":"å›°æ‰°çš„é—®é¢˜ä¹‹ä¸€ clientHeightå’ŒoffsetHeightçš„å€¼ç”±ä»€ä¹ˆå†³å®šï¼Ÿå‡å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„DIVï¼Œä¸»è¦æ˜¾ç¤ºçš„æ–‡å­—ä¸ºâ€This is the main body of DIVâ€é¦–å…ˆäº†è§£ä¸€ä¸‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ clientHeightçš„å€¼ç”±DIVå†…å®¹çš„å®é™…é«˜åº¦å’ŒCSSä¸­çš„paddingå€¼å†³å®šï¼Œ offsetHeightçš„å€¼ç”±DIVå†…å®¹çš„å®é™…é«˜åº¦ï¼ŒCSSä¸­çš„paddingå€¼ï¼Œ scrollbarçš„é«˜åº¦å’ŒDIVçš„borderå€¼å†³å®šï¼›è‡³äºCSSä¸­çš„marginå€¼ï¼Œåˆ™ä¸ä¼šå½±å“clientHeightå’ŒoffsetHeightçš„å€¼ã€‚ æ•ˆæœå›¾ï¼š åˆ†æå›¾ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738&lt;style&gt; *&#123; margin:0; padding:0; &#125; body&#123; overflow:hidden; &#125; #box&#123; float:right; top:0; right:0px; width:20px; height: 500px; background:#ccc; position:relative; &#125; #drag&#123; position: absolute; top:0; left:0; width:20px; height: 20px; background:green; &#125; #content&#123; position:absolute; left: 0; width: 400px; height: 500px; border: 1px solid black; overflow: hidden; &#125; #text&#123; position:absolute; top: 0; &#125;&lt;/style&gt; 1234567891011121314151617&lt;body&gt; &lt;!--æ»šåŠ¨æ¡--&gt; &lt;div id=&quot;box&quot;&gt; &lt;div id=&quot;drag&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;!-- //å†…å®¹ä¸»å®¹å™¨--&gt; &lt;div id=&quot;content&quot;&gt; &lt;!--å†…å®¹å®¹å™¨--&gt; &lt;div id=&quot;text&quot; style=&quot;background:#ccc;width: 120px; &quot;&gt;Although many people talk about the super performance of quantum computing, such as one second to complete the current supercomputer computing tasks for several years, but so far did not create a true sense of the quantum computer, one of the very important reason is that, The state of particles used in quantum computation is not stable, and any electromagnetic or physical interference can easily disrupt its work. The state of the Mayola fermion is very stable, which makes it a perfect choice for making quantum computers. Six months ago in the laboratory of Shanghai Jiaotong University, Jia Jinfeng successfully captured it.Speaking of the scene, Jia Jinfeng said: &quot;In fact, I started to hear the Mayolana fermions, I think this thing may not be done 20 years out.Using a special material preparation method, Jia Jinfeng&#x27;s research team has grown topological insulators on the superconductors with thickness of 5 nanometers. The topological superconductor materials are prepared and finally the Mayolana fermions are found at the interface of the topological superconductors. The mysterious particles were captured 80 years, but also let Jia Jinfeng more firm with its confidence in the manufacture of quantum computers.Speaking of the future of the plan, Jia Jinfeng said: &quot;I hope to within a few years to do the topological quantum bit!&quot; (Before) the world has not, so if we cut into this from the point, we are the same with the world The starting line, for our country, this is able to catch up with the footsteps of quantum computing, a starting point. &lt;div&gt; &lt;/div&gt; &lt;/body&gt; jséƒ¨åˆ†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116&lt;script type=&quot;text/javascript&quot;&gt;window.onload=function()&#123; var oBox=document.getElementById(&#x27;box&#x27;); var oDrag=document.getElementById(&#x27;drag&#x27;); var content=document.getElementById(&#x27;content&#x27;);//å†…å®¹ä¸»å®¹å™¨ var oText = document.getElementById(&#x27;text&#x27;); var conHeight=content.clientHeight var textHeight = oText.clientHeight oDrag.onmousedown=function (ev)&#123; //é˜»æ­¢é»˜è®¤äº‹ä»¶ var e=ev||window.event; if (e.preventDefault) &#123; e.preventDefault(); &#125; else&#123; e.returnValue=false; &#125;; //e.clientYé¼ æ ‡å½“å‰åæ ‡ var downY=e.clientY-oDrag.offsetTop; //æ»‘å—æ»šåŠ¨æœ€å¤§è·ç¦» var maxTop = oBox.clientHeight-oDrag.clientHeight document.onmousemove=function (ev)&#123; var e=ev||window.event; var top=e.clientY-downY; if (top&lt;=0) &#123; top=0; &#125;; if (top&gt;=maxTop) &#123; top=maxTop; &#125;; var scale=top/maxTop; var contentY=scale*(conHeight-textHeight); oDrag.style.top=top+&#x27;px&#x27;; oText.style.top=contentY+&#x27;px&#x27;; &#125; document.onmouseup=function ()&#123; document.onmousemove=document.onmousemove=null; &#125; &#125; var str=window.navigator.userAgent.toLowerCase(); //ç«ç‹æµè§ˆå™¨ if (str.indexOf(&#x27;firefox&#x27;)!=-1)&#123; document.addEventListener(&#x27;DOMMouseScroll&#x27;,function (e)&#123; e.preventDefault();//é˜»æ­¢çª—å£é»˜è®¤çš„æ»šåŠ¨äº‹ä»¶ if (e.detail&lt;0) &#123; //å‘ä¸Šæ»šåŠ¨ divå‘ä¸‹æ»šåŠ¨ var scrollHei=oText.offsetTop+25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(textHeight-conHeight)) &#123; scrollHei=-(textHeight-conHeight); &#125;; var scale=scrollHei/(textHeight-conHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); oText.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125; if (e.detail&gt;0) &#123; //å‘ä¸‹æ»šåŠ¨ divå‘ä¸Šæ»šåŠ¨ var scrollHei=oText.offsetTop-25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(textHeight-conHeight)) &#123; scrollHei=-(textHeight-conHeight); &#125;; var scale=scrollHei/(textHeight-content.clientHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); oText.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; &#125;,false); &#125; else&#123;//éç«ç‹æµè§ˆå™¨ console.log(&quot;éç«ç‹æµè§ˆå™¨&quot;) document.onmousewheel=function (ev)&#123; var e=ev||window.event; if (e.preventDefault) &#123; e.preventDefault(); &#125; else&#123; e.returnValue=false; &#125;; if (e.wheelDelta&gt;0) &#123; //å‘ä¸Šæ»šåŠ¨ æ­¤æ—¶divå‘ä¸‹ç§»åŠ¨ var scrollHei=oText.offsetTop+25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(textHeight-conHeight)) &#123; scrollHei=-(textHeight-conHeight); &#125;; var scale=scrollHei/(textHeight-conHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); oText.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; if (e.wheelDelta&lt;0) &#123; //å‘ä¸‹ console.log(&quot;ä¸‹&quot;) var scrollHei=oText.offsetTop-25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(textHeight-conHeight)) &#123; scrollHei=-(textHeight-conHeight); &#125;; var scale=scrollHei/(textHeight-conHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); oText.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; &#125; &#125;&#125;&lt;/script&gt; å…¨å±æ¨¡å¼ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122&lt;script type=&quot;text/javascript&quot;&gt;window.onload=function()&#123; var oBox=document.getElementById(&#x27;box&#x27;); var oDrag=document.getElementById(&#x27;drag&#x27;); var content=document.getElementById(&#x27;content&#x27;); var viewHeight=document.documentElement.clientHeight; var conHeight=content.clientHeight oBox.style.height=viewHeight+&#x27;px&#x27;; oDrag.style.height=viewHeight/conHeight*viewHeight+&#x27;px&#x27;; window.onresize = function()&#123; viewHeight=document.documentElement.clientHeight; oBox.style.height=viewHeight+&#x27;px&#x27;; oDrag.style.height=viewHeight/conHeight*viewHeight+&#x27;px&#x27;; oDrag.style.top=-content.offsetTop/(content.clientHeight-viewHeight)*(oBox.clientHeight-oDrag.clientHeight)+&#x27;px&#x27;; &#125; oDrag.onmousedown=function (ev)&#123; //é˜»æ­¢é»˜è®¤äº‹ä»¶ var e=ev||window.event; if (e.preventDefault) &#123; e.preventDefault(); &#125; else&#123; e.returnValue=false; &#125;; //e.clientYé¼ æ ‡å½“å‰åæ ‡ var downY=e.clientY-oDrag.offsetTop; document.onmousemove=function (ev)&#123; var e=ev||window.event; var top=e.clientY-downY; if (top&lt;=0) &#123; top=0; &#125;; if (top&gt;=oBox.clientHeight-oDrag.clientHeight) &#123; top=oBox.clientHeight-oDrag.clientHeight; &#125;; var scale=top/(oBox.clientHeight-oDrag.clientHeight); var contentY=scale*(content.clientHeight-viewHeight); oDrag.style.top=top+&#x27;px&#x27;; content.style.top=-contentY+&#x27;px&#x27;; &#125; document.onmouseup=function ()&#123; document.onmousemove=null; &#125; &#125; var str=window.navigator.userAgent.toLowerCase(); //ç«ç‹æµè§ˆå™¨ if (str.indexOf(&#x27;firefox&#x27;)!=-1)&#123; document.addEventListener(&#x27;DOMMouseScroll&#x27;,function (e)&#123; e.preventDefault();//é˜»æ­¢çª—å£é»˜è®¤çš„æ»šåŠ¨äº‹ä»¶ if (e.detail&lt;0) &#123; var scrollHei=content.offsetTop+25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123; scrollHei=-(content.clientHeight-viewHeight); &#125;; var scale=scrollHei/(content.clientHeight-viewHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); content.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125; if (e.detail&gt;0) &#123; var scrollHei=content.offsetTop-25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123; scrollHei=-(content.clientHeight-viewHeight); &#125;; var scale=scrollHei/(content.clientHeight-viewHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); content.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; &#125;,false); &#125; else&#123;//éç«ç‹æµè§ˆå™¨ document.onmousewheel=function (ev)&#123; var e=ev||window.event; if (e.preventDefault) &#123; e.preventDefault(); &#125; else&#123; e.returnValue=false; &#125;; if (e.wheelDelta&gt;0) &#123; var scrollHei=content.offsetTop+25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123; scrollHei=-(content.clientHeight-viewHeight); &#125;; var scale=scrollHei/(content.clientHeight-viewHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); content.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; if (e.wheelDelta&lt;0) &#123; var scrollHei=content.offsetTop-25; if (scrollHei&gt;=0) &#123; scrollHei=0; &#125;; if (scrollHei&lt;=-(content.clientHeight-viewHeight)) &#123; scrollHei=-(content.clientHeight-viewHeight); &#125;; var scale=scrollHei/(content.clientHeight-viewHeight); var top=scale*(oBox.clientHeight-oDrag.clientHeight); content.style.top=scrollHei+&#x27;px&#x27;; oDrag.style.top=-top+&#x27;px&#x27;; &#125;; &#125; &#125;&#125;&lt;/script&gt;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/tags/Javascript/"}]},{"title":"Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹åˆæ¢ï¼ˆä¸€ï¼‰--- å°è£…","slug":"Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹åˆæ¢ï¼ˆä¸€ï¼‰--- å°è£…","date":"2016-06-07T16:00:00.000Z","updated":"2020-09-16T09:07:33.000Z","comments":true,"path":"2016/06/08/Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹åˆæ¢ï¼ˆä¸€ï¼‰--- å°è£…/","link":"","permalink":"http://mariogogogo.github.io/2016/06/08/Javascript%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%88%9D%E6%8E%A2%EF%BC%88%E4%B8%80%EF%BC%89---%20%E5%B0%81%E8%A3%85/","excerpt":"Javascriptæ˜¯ä¸€ç§åŸºäºå¯¹è±¡ï¼ˆobject-basedï¼‰çš„è¯­è¨€ï¼Œä½ é‡åˆ°çš„æ‰€æœ‰ä¸œè¥¿å‡ ä¹éƒ½æ˜¯å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå®ƒåˆä¸æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰è¯­è¨€ï¼Œå› ä¸ºå®ƒçš„è¯­æ³•ä¸­æ²¡æœ‰classï¼ˆç±»ï¼‰ã€‚","text":"Javascriptæ˜¯ä¸€ç§åŸºäºå¯¹è±¡ï¼ˆobject-basedï¼‰çš„è¯­è¨€ï¼Œä½ é‡åˆ°çš„æ‰€æœ‰ä¸œè¥¿å‡ ä¹éƒ½æ˜¯å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå®ƒåˆä¸æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰è¯­è¨€ï¼Œå› ä¸ºå®ƒçš„è¯­æ³•ä¸­æ²¡æœ‰classï¼ˆç±»ï¼‰ã€‚ ä¸€ã€ ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼å‡å®šæˆ‘ä»¬æŠŠçŒ«çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰â€åå­—â€å’Œâ€é¢œè‰²â€ä¸¤ä¸ªå±æ€§ã€‚ 12345var Cat = &#123; name : &#x27;&#x27;, color : &#x27;&#x27; &#125; ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿™ä¸ªåŸå‹å¯¹è±¡çš„è§„æ ¼ï¼ˆschemaï¼‰ï¼Œç”Ÿæˆä¸¤ä¸ªå®ä¾‹å¯¹è±¡ã€‚ 123456var cat1 = &#123;&#125;; // åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡cat1.name = &quot;å¤§æ¯›&quot;; // æŒ‰ç…§åŸå‹å¯¹è±¡çš„å±æ€§èµ‹å€¼cat1.color = &quot;é»„è‰²&quot;;var cat2 = &#123;&#125;;cat2.name = &quot;äºŒæ¯›&quot;;cat2.color = &quot;é»‘è‰²&quot;; å¥½äº†ï¼Œè¿™å°±æ˜¯æœ€ç®€å•çš„å°è£…äº†ï¼ŒæŠŠä¸¤ä¸ªå±æ€§å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„å†™æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯å¦‚æœå¤šç”Ÿæˆå‡ ä¸ªå®ä¾‹ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ï¼›äºŒæ˜¯å®ä¾‹ä¸åŸå‹ä¹‹é—´ï¼Œæ²¡æœ‰ä»»ä½•åŠæ³•ï¼Œå¯ä»¥çœ‹å‡ºæœ‰ä»€ä¹ˆè”ç³»ã€‚ äºŒã€ åŸå§‹æ¨¡å¼çš„æ”¹è¿›æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚ 1234567function Cat(name,color) &#123; return &#123; name:name, color:color &#125; &#125; ç„¶åç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œå°±ç­‰äºæ˜¯åœ¨è°ƒç”¨å‡½æ•°ï¼š 12var cat1 = Cat(&quot;å¤§æ¯›&quot;,&quot;é»„è‰²&quot;);var cat2 = Cat(&quot;äºŒæ¯›&quot;,&quot;é»‘è‰²&quot;); è¿™ç§æ–¹æ³•çš„é—®é¢˜ä¾ç„¶æ˜¯ï¼Œcat1å’Œcat2ä¹‹é—´æ²¡æœ‰å†…åœ¨çš„è”ç³»ï¼Œä¸èƒ½åæ˜ å‡ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡çš„å®ä¾‹ã€‚ ä¸‰ã€ æ„é€ å‡½æ•°æ¨¡å¼ä¸ºäº†è§£å†³ä»åŸå‹å¯¹è±¡ç”Ÿæˆå®ä¾‹çš„é—®é¢˜ï¼ŒJavascriptæä¾›äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰æ¨¡å¼ã€‚ æ‰€è°“â€æ„é€ å‡½æ•°â€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨ä½¿ç”¨äº†thiså˜é‡ã€‚å¯¹æ„é€ å‡½æ•°ä½¿ç”¨newè¿ç®—ç¬¦ï¼Œå°±èƒ½ç”Ÿæˆå®ä¾‹ï¼Œå¹¶ä¸”thiså˜é‡ä¼šç»‘å®šåœ¨å®ä¾‹å¯¹è±¡ä¸Šã€‚ æ¯”å¦‚ï¼ŒçŒ«çš„åŸå‹å¯¹è±¡ç°åœ¨å¯ä»¥è¿™æ ·å†™ï¼Œ 12345function Cat(name,color)&#123; this.name=name; this.color=color; &#125; æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ç”Ÿæˆå®ä¾‹å¯¹è±¡äº†ã€‚ 12345var cat1 = new Cat(&quot;å¤§æ¯›&quot;,&quot;é»„è‰²&quot;); var cat2 = new Cat(&quot;äºŒæ¯›&quot;,&quot;é»‘è‰²&quot;); alert(cat1.name); // å¤§æ¯› alert(cat1.color); // é»„è‰² è¿™æ—¶cat1å’Œcat2ä¼šè‡ªåŠ¨å«æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚ 12alert(cat1.constructor == Cat); //truealert(cat2.constructor == Cat); //true Javascriptè¿˜æä¾›äº†ä¸€ä¸ªinstanceofè¿ç®—ç¬¦ï¼ŒéªŒè¯åŸå‹å¯¹è±¡ä¸å®ä¾‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚ 12alert(cat1 instanceof Cat); //truealert(cat2 instanceof Cat); //true å››ã€æ„é€ å‡½æ•°æ¨¡å¼çš„é—®é¢˜ æ„é€ å‡½æ•°æ–¹æ³•å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªæµªè´¹å†…å­˜çš„é—®é¢˜ã€‚ è¯·çœ‹ï¼Œæˆ‘ä»¬ç°åœ¨ä¸ºCatå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸å˜çš„å±æ€§typeï¼ˆç§ç±»ï¼‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ–¹æ³•eatï¼ˆåƒï¼‰ã€‚é‚£ä¹ˆï¼ŒåŸå‹å¯¹è±¡Catå°±å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š 1234567function Cat(name,color)&#123; this.name = name; this.color = color; this.type = &quot;çŒ«ç§‘åŠ¨ç‰©&quot;; this.eat = function()&#123;alert(&quot;åƒè€é¼ &quot;);&#125;; &#125; è¿˜æ˜¯é‡‡ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œç”Ÿæˆå®ä¾‹ï¼š 1234var cat1 = new Cat(&quot;å¤§æ¯›&quot;,&quot;é»„è‰²&quot;); var cat2 = new Cat (&quot;äºŒæ¯›&quot;,&quot;é»‘è‰²&quot;); alert(cat1.type); // çŒ«ç§‘åŠ¨ç‰© cat1.eat(); // åƒè€é¼  è¡¨é¢ä¸Šå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™æ ·åšï¼Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ã€‚é‚£å°±æ˜¯å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œtypeå±æ€§å’Œeat()æ–¹æ³•éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæ¯ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œéƒ½å¿…é¡»ä¸ºé‡å¤çš„å†…å®¹ï¼Œå¤šå ç”¨ä¸€äº›å†…å­˜ã€‚è¿™æ ·æ—¢ä¸ç¯ä¿ï¼Œä¹Ÿç¼ºä¹æ•ˆç‡ã€‚ 1alert(cat1.eat == cat2.eat); //false èƒ½ä¸èƒ½è®©typeå±æ€§å’Œeat()æ–¹æ³•åœ¨å†…å­˜ä¸­åªç”Ÿæˆä¸€æ¬¡ï¼Œç„¶åæ‰€æœ‰å®ä¾‹éƒ½æŒ‡å‘é‚£ä¸ªå†…å­˜åœ°å€å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ã€‚ äº”ã€ Prototypeæ¨¡å¼Javascriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé‚£äº›ä¸å˜çš„å±æ€§å’Œæ–¹æ³•ï¼Œç›´æ¥å®šä¹‰åœ¨prototypeå¯¹è±¡ä¸Šã€‚ 123456function Cat(name,color)&#123; this.name = name; this.color = color; &#125; Cat.prototype.type = &quot;çŒ«ç§‘åŠ¨ç‰©&quot;; Cat.prototype.eat = function()&#123;alert(&quot;åƒè€é¼ &quot;)&#125;; ç„¶åï¼Œç”Ÿæˆå®ä¾‹ã€‚ 1234 var cat1 = new Cat(&quot;å¤§æ¯›&quot;,&quot;é»„è‰²&quot;); var cat2 = new Cat(&quot;äºŒæ¯›&quot;,&quot;é»‘è‰²&quot;); alert(cat1.type); // çŒ«ç§‘åŠ¨ç‰© cat1.eat(); // åƒè€é¼  è¿™æ—¶æ‰€æœ‰å®ä¾‹çš„typeå±æ€§å’Œeat()æ–¹æ³•ï¼Œå…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘prototypeå¯¹è±¡ï¼Œå› æ­¤å°±æé«˜äº†è¿è¡Œæ•ˆç‡ã€‚ 1alert(cat1.eat == cat2.eat); //true å…­ã€ Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•ä¸ºäº†é…åˆprototypeå±æ€§ï¼ŒJavascriptå®šä¹‰äº†ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚ 6.1 isPrototypeOf()è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªproptotypeå¯¹è±¡å’ŒæŸä¸ªå®ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚12 alert(cat1.hasOwnProperty(&quot;name&quot;)); // true alert(cat1.hasOwnProperty(&quot;type&quot;)); // false6.3 inè¿ç®—ç¬¦ inè¿ç®—ç¬¦å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªå®ä¾‹æ˜¯å¦å«æœ‰æŸä¸ªå±æ€§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æœ¬åœ°å±æ€§ã€‚ 12alert(&quot;name&quot; in cat1); // true alert(&quot;type&quot; in cat1); // true inè¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨æ¥éå†æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚ 123for(var prop in cat1) &#123; alert(&quot;cat1[&quot;+prop+&quot;]=&quot;+cat1[prop]); &#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"http://mariogogogo.github.io/categories/Javascript/"}],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"http://mariogogogo.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"http://mariogogogo.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"}]},{"title":"å‰ç«¯ä¹‹è·¯","slug":"å‰ç«¯ä¹‹è·¯","date":"2016-06-03T16:00:00.000Z","updated":"2020-09-16T09:07:11.000Z","comments":true,"path":"2016/06/04/å‰ç«¯ä¹‹è·¯/","link":"","permalink":"http://mariogogogo.github.io/2016/06/04/%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/","excerpt":"ç§ä¸€æ£µæ ‘æœ€å¥½çš„å¹´é¾„æ˜¯åå¹´å‰ï¼Œè€Œåæ˜¯ç°åœ¨ã€‚","text":"ç§ä¸€æ£µæ ‘æœ€å¥½çš„å¹´é¾„æ˜¯åå¹´å‰ï¼Œè€Œåæ˜¯ç°åœ¨ã€‚ å¯¹è‡ªå·±ç‹ ä¸€ç‚¹ï¼Œå¼€å§‹å†™ä½œå§æˆ‘æ—¶å¸¸ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰:è‡ªå·±å¿ƒé‡Œè§‰å¾—å¯¹ä¸€ä¸ªæŠ€æœ¯ç‚¹å·²ç»æŒæ¡äº†ï¼Œä½†æ˜¯å½“æˆ‘è¯•å›¾ç»™åˆ«äººè®²è¿°çš„æ—¶å€™ï¼Œå‘ç°å¹¶ä¸èƒ½è½»æ¾è‡ªå¦‚ã€æ·±å…¥æµ…å‡ºåœ°è®²å‡ºæ¥ã€‚è¿™å°±è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ :è‡ªè®¤ä¸ºæŒæ¡äº†ï¼Œå…¶å®å¹¶æ²¡æœ‰çœŸæ­£æŒæ¡ï¼Œå¤§è„‘åªæ˜¯å¯¹è¿™ä¸ªæŠ€æœ¯ç‚¹å»ºç«‹äº†ä¸€ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼Œåœ¨ä¸€äº›ç»†èŠ‚å¤„åšäº†æƒ³å½“ç„¶çš„å‡è®¾ï¼Œç­‰åˆ°ä½ ç”¨è¯­è¨€å†æ¥è¡¨è¾¾çš„æ—¶å€™å°±ä¼šå‘ç°ï¼ŒåŸæ¥è¿™ä¸ªå‡è®¾å¹¶ä¸å®Œå…¨æˆç«‹æ˜¯æœ‰é—®é¢˜çš„ã€‚ä¼°è®¡å¤§å®¶éƒ½æœ‰è¿™æ ·çš„ç»éªŒ:å¦‚æœä½ èƒ½æŠŠä¸€é—¨æŠ€æœ¯é€šä¿—æ˜“æ‡‚åœ°ç»™åˆ«äººè®²æ˜ç™½ï¼Œé‚£å°±è¯´æ˜ä½ å·²ç»æŒæ¡äº†ã€‚è¿™ç§â€œè½¬æ•™åˆ«äºº( Teach others )â€çš„åŠæ³•å±äºä¸»åŠ¨å­¦ä¹ ï¼Œæ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚ä½†æ˜¯åœ¨å·¥ä½œå’Œç”Ÿæ´»å½“ä¸­ï¼Œä½ æ˜¯å¾ˆå°‘æœ‰æœºä¼šå»ç»™åˆ«äººè®²æˆçš„ã€‚é‚£æ€ä¹ˆåŠ?é‚£å°±é€€è€Œæ±‚å…¶æ¬¡å§ï¼ŒæŠŠè‡ªå·±çš„ç†è§£å†™å‡ºæ¥ã€‚å½“ç„¶ä¸æ˜¯æ³›æ³›åœ°è®°æµæ°´è´¦ï¼Œæˆ–è€…æŠŠå‡ ä¸ªå­¤ç«‹çš„ç‚¹ç½—åˆ—åœ¨é‚£é‡Œï¼Œè€Œæ˜¯è¦æŠŠæ€è·¯å˜æ¸…æ¥šï¼Œå°¤å…¶è¦å†™å‡ºä¸ºä»€ä¹ˆè¦æœ‰è¿™é—¨æŠ€æœ¯ã€è¿™é—¨æŠ€æœ¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åæ‰æ˜¯è¿™é—¨æŠ€æœ¯æ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚å½“ä½ é€¼ç€è‡ªå·±å»å›ç­”è¿™äº›é—®é¢˜çš„æ—¶å€™ï¼Œå¾ˆå¿«å°±ä¼šå‘ç°ï¼Œè‡ªå·±çš„ç†è§£è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦æŸ¥æ‰¾æ›´å¤šçš„èµ„æ–™ã€‚ å¦‚ä½•å­¦ä¹ ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œä½ æ¥è§¦åˆ°ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹: JavaåŠ¨æ€ä»£ç†ã€‚ä½ ä¹Ÿçœ‹äº†ä¹¦æˆ–è§†é¢‘ä¸­çš„ä»£ç ï¼ŒçŸ¥é“äº†è¿™ä¸ªæŠ€æœ¯ç‚¹æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Œæ¥ä¸‹æ¥æƒ³è¦å†™ä¸€ç¯‡æ–‡ç« ï¼Œé¦–å…ˆè¦åŠªåŠ›é˜æ˜çš„é—®é¢˜å°±æ˜¯â€œä¸ºä»€ä¹ˆè¦ç”¨Java åŠ¨æ€ä»£ç†â€œã€‚è¿™ç©æ„å„¿åˆ°åº•è¦å¹²å—?æˆ‘å·²ç»çŸ¥é“äº†å®ƒèƒ½å¤Ÿå¯¹ä¸€ä¸ªç±»è¿›è¡Œå¢å¼ºï¼Œè¿˜æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œå¢å¼ºçš„ï¼Œä½†æ˜¯å¢å¼ºä¸€ä¸ªç±»æœ‰ä»€ä¹ˆç”¨å¤„?æˆ‘å®Œå…¨å¯ä»¥æ–°å†™ä¸€ä¸ªç±»å¯¹åŸæœ‰çš„ç±»è¿›è¡Œå¢å¼ºå•Š? ä¸ºä»€ä¹ˆè¦åœ¨è¿è¡Œæ—¶è¿›è¡Œå¢å¼ºå‘¢?å¦‚æœä½ é¡ºç€è¿™ä¸ªæ€è·¯æŒ–æ˜ä¸‹å»ï¼Œåˆ™ä¼šåœ¨é€šé“çš„å°½å¤´æ‰¾åˆ°ä¸€ä¸ªå®è´: AOPã€‚ å…·ä½“åˆ°æŠ€æœ¯å±‚é¢ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆJavaåŠ¨æ€ä»£ç†åªèƒ½å¯¹interface è¿›è¡Œæ“ä½œï¼Œè€Œä¸èƒ½å¯¹classè¿›è¡Œæ“ä½œ?è¿™ä¸ªé—®é¢˜å¦‚æœä¹Ÿæ·±æŒ–ä¸‹å»ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å¦ä¸€ä¸€ä¸ªå®è´:åŠ¨æ€å­—èŠ‚ç çš„ç”Ÿæˆã€‚ ç»§ç»­æ·±æŒ–å°±èƒ½çœ‹åˆ°ASMã€CGLibè¿™æ ·çš„ä¸œè¥¿ï¼Œçœ‹åˆ°å®ƒä»¬æ€ä¹ˆåœ¨å†…å­˜ä¸­æ“ä½œ.classæ–‡ä»¶çš„å­—èŠ‚ç ã€‚è‡³äºå­—èŠ‚ç çš„æ ¼å¼æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œåªå¥½å»çœ‹çœ‹Javaè™šæ‹Ÿæœºäº†ã€‚åˆ°äº†æœ€åï¼Œä½ ä¹Ÿè®¸ä¼šä½“ä¼šåˆ°ï¼ŒåŸæ¥Javaæ˜¯ä¸€é—¨é™æ€è¯­è¨€ï¼Œåœ¨è¿è¡Œæ—¶ä¸èƒ½å¯¹ç°æœ‰çš„æ–¹æ³•é€»è¾‘è¿›è¡Œä¿®æ”¹ï¼Œ ä¸èƒ½æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥å¿…é¡»ç”¨åˆ«çš„æ‰‹æ®µï¼Œå¦‚ASMã€ åŠ¨æ€ä»£ç†ç­‰åˆ›å»ºä¸€ ä¸ªæ–°ç±»æ¥åšä¸€ç‚¹â€œé¢å¤–â€çš„äº‹æƒ…ã€‚ æœ‰äººå¯èƒ½è¦é—®äº†:æˆ‘ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ€è·¯å»å­¦ä¹ ï¼Œä¸ºä»€ä¹ˆè¦å†™ä¸‹æ¥å‘¢?åŸå› å¾ˆç®€å•ï¼Œä¸å†™å‡ºæ¥ï¼Œå¾ˆå®¹æ˜“æ”¾å¼ƒæ·±åº¦æ€è€ƒã€‚ä½ ä¼šè§‰å¾—ï¼Œæˆ‘å·²ç»çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹å„¿äº†ä¸€-å…¶å® äº›å…³é”®çš„ç»†èŠ‚è¢«å¤§è„‘ç»™å¿½ç•¥äº†ã€‚ æˆ‘ä»¬å·²ç»è¿›å…¥äº†ä¸€ä¸ªç¢ç‰‡åŒ–çš„æ—¶ä»£ï¼Œæˆ‘ä»¬çš„å¤§è„‘å·²ç»å…»æˆäº†ç¢ç‰‡åŒ–çš„ä¹ æƒ¯ï¼Œ-å¤©ä¸çœ‹ ç¢ç‰‡åŒ–çš„ä¿¡æ¯å°±è§‰å¾—ä¸èˆ’æœï¼Œè¿™æ ·ä¸‹å»ä¼šæ…¢æ…¢åœ°ä¸§å¤±æ·±åº¦æ€è€ƒçš„èƒ½åŠ›ã€‚ å†™ä½œä¼šé€¼ç€ä½ å»æ€è€ƒï¼Œæ¢³ç†çŸ¥è¯†ä½“ç³»ï¼Œé˜²æ­¢è‡ªå·±è¢«ç¢ç‰‡æ‰€å¡«æ»¡ã€‚å…¶å®å¾ˆå¤šäººéƒ½çŸ¥é“å†™ä½œæ˜¯ä¸€ä»¶å¾ˆå¥½çš„äº‹æƒ…ï¼Œå°±æ˜¯çŠ¯æ‡’ï¼Œæ‰§è¡Œä¸ä¸‹å»ã€‚è¿˜æ˜¯è¡ŒåŠ¨èµ·æ¥å§!é€¼è‡ªå·±ä¸€æŠŠï¼Œå¯¹è‡ªå·±ç‹ ä¸€-ç‚¹!æœ‰è‡ªåˆ¶åŠ›çš„äººã€èƒ½å¤ŸåšæŒçš„äººæ‰æ›´æœ‰å¯èƒ½æˆåŠŸ! å‚è€ƒå¼•ç”¨ã€Šç å†œç¿»èº«ã€‹ç¬¬6ç« æœ€å2èŠ‚","categories":[{"name":"å¿ƒè·¯å†ç¨‹","slug":"å¿ƒè·¯å†ç¨‹","permalink":"http://mariogogogo.github.io/categories/%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B/"}],"tags":[{"name":"Javascriptï¼ŒåŸºç¡€","slug":"Javascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/Javascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]},{"title":"ã€è½¬è½½ã€ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢","slug":"[è½¬è½½]ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢","date":"2009-08-07T16:00:00.000Z","updated":"2020-09-16T09:06:50.000Z","comments":true,"path":"2009/08/08/[è½¬è½½]ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢/","link":"","permalink":"http://mariogogogo.github.io/2009/08/08/[%E8%BD%AC%E8%BD%BD]%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E5%BA%94%E8%AF%A5%EF%BC%88%E4%BB%8E%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B%E5%B0%B1%EF%BC%89%E5%86%99%E5%8D%9A%E5%AE%A2/","excerpt":"ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢ç”¨ä¸€å¥è¯æ¥è¯´å°±æ˜¯ï¼Œå†™ä¸€ä¸ªåšå®¢æœ‰å¾ˆå¤šå¥½å¤„ï¼Œå´æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„åå¤„ã€‚ï¼ˆé˜¿çµé¡¿çš„æƒ…å†µå±äºä¾‹å¤–ï¼Œè€Œéå¸¸æ€ï¼Œå°±åƒä¸èƒ½æ‹¿æŠ½çƒŸæ´»åˆ°ä¸€ç™¾å²çš„è‹±å›½è€å¤ªå¤ªçš„ä¸ªä¾‹æ¥åé©³æŠ½çƒŸå¯¹å¥åº·çš„æå¤§æŸä¼¤ä¸€æ ·)","text":"ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢ç”¨ä¸€å¥è¯æ¥è¯´å°±æ˜¯ï¼Œå†™ä¸€ä¸ªåšå®¢æœ‰å¾ˆå¤šå¥½å¤„ï¼Œå´æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„åå¤„ã€‚ï¼ˆé˜¿çµé¡¿çš„æƒ…å†µå±äºä¾‹å¤–ï¼Œè€Œéå¸¸æ€ï¼Œå°±åƒä¸èƒ½æ‹¿æŠ½çƒŸæ´»åˆ°ä¸€ç™¾å²çš„è‹±å›½è€å¤ªå¤ªçš„ä¸ªä¾‹æ¥åé©³æŠ½çƒŸå¯¹å¥åº·çš„æå¤§æŸä¼¤ä¸€æ ·) è®©æˆ‘è¯´å¾—æ›´æ˜ç¡®ä¸€ç‚¹ï¼šç”¨åšå®¢çš„å½¢å¼æ¥è®°å½•ä¸‹ä½ æœ‰ä»·å€¼çš„æ€è€ƒï¼Œä¼šå¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œå´æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„åå¤„ã€‚Noteï¼šç¢ç¢å¿µä¸ç®—æ€è€ƒã€å¿ƒæƒ…çè®°ä¸ç®—æ€è€ƒã€å” å” å¨å¨ä¹Ÿä¸ç®—æ€è€ƒã€æ²¡è¯æ‰¾è¯ä¹Ÿä¸ç®—æ€è€ƒï¼Œè¯·ä»¥æ­¤ç±»æ¨ã€‚ ä¸‹é¢æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºå†™ä¸€ä¸ªé•¿æœŸçš„ä»·å€¼åšå®¢çš„æœ€å¤§çš„å‡ ç‚¹å¥½å¤„ï¼š èƒ½å¤Ÿäº¤åˆ°å¾ˆå¤šå¿—åŒé“åˆçš„æœ‹å‹ã€‚æˆ‘è‡ªå·±æ—¢å†™åšå®¢ï¼Œä¹Ÿè¯»åˆ«äººçš„åšå®¢ï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œå¯¹äºç”Ÿæ´»ä¸­çš„ç»å¤§å¤šæ•°äººæ¥è¯´ï¼Œæ‹“å®½æœ‹å‹åœˆå­çš„é€”å¾„å‡ ä¹åªæœ‰ä¸€ä¸ªï¼Œé€šè¿‡ç½‘ç»œï¼Œè€Œå¦‚ä½•åœ¨ç½‘ç»œä¸­å¯»æ‰¾åˆ°æ°”å‘³ç›¸æŠ•çš„æœ‹å‹ï¼Œå¦‚ä½•åˆ¤æ–­åˆ«äººå’Œè‡ªå·±æ˜¯å¦æœ‰å…±åŒè¯­è¨€ï¼Ÿæ˜¾ç„¶ï¼Œé€šè¿‡å¤©å¤©åœ¨ SNS ä¸Šç¢ç¢å¿µçš„é‚£äº›æ—¥è®°æ˜¯éš¾ä»¥åšåˆ°çš„ã€‚æˆ‘ä½©æœçš„ä¸€äº›æœ‹å‹å‡ ä¹å…¨éƒ½æ˜¯é•¿æœŸç”¨åšå®¢è®°å½•æƒ³æ³•çš„äººï¼Œå› æ­¤ï¼Œå’Œä»–ä»¬å³ä¾¿ä¸æ‰“ç…§é¢ï¼Œä¹Ÿæ˜¯å¿ƒç…§ä¸å®£ã€‚å³ä¾¿ç´ æœªè°‹é¢ä¹Ÿèƒ½åä¸‹æ¥å°±èŠå¾—çƒ­ç«æœå¤©ã€‚ ä¸ºä»€ä¹ˆåšå®¢åœ¨ç»“äº¤å¿—åŒé“åˆçš„æœ‹å‹æ–¹é¢çš„æ½œåŠ›è¦è¿œèƒœäºåŸå§‹çš„äº¤è°ˆæ–¹å¼ï¼Ÿ å¾ˆç®€å•ï¼Œç¬¬ä¸€ï¼Œåšå®¢æ— åœ°åŸŸé™åˆ¶ï¼Œæ•´ä¸ªäº’è”ç½‘ä¸Šä» A åˆ° B åªæœ‰ä¸€ä¸ªç‚¹å‡»çš„è·ç¦»ï¼Œè€Œä¼ ç»Ÿçš„å»ºç«‹æœ‹å‹åœˆå­çš„æ–¹æ³•åˆ™å—åˆ°åœ°åŸŸé™åˆ¶ã€‚ ç¬¬äºŒï¼Œä¹Ÿæ˜¯æ›´é‡è¦çš„ä¸€ç‚¹ï¼Œå³å¦‚æœæŒ‰ç…§ä»¥å‰ç»“äº¤æœ‹å‹çš„æ–¹å¼ï¼Œéœ€è¦äº’ç›¸èŠå¤©ï¼Œäº¤æµè§‚ç‚¹ï¼Œç„¶åæ‰é€æ¸ç†Ÿæ‚‰èµ·æ¥ï¼Œè¿™éœ€è¦ä¸€ä¸ªè¾ƒé•¿çš„è¿‡ç¨‹ï¼Œè€Œä¸”æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå½“ä½ é‡åˆ°å¦ä¸€ä¸ªé™Œç”Ÿäººï¼Œåˆè¦æŠŠæ•´ä¸ªè¿‡ç¨‹é‡å¤ä¸€æ¬¡ï¼Œè¡¨è¾¾ä½ å·²ç»å¯¹è€å‹è¡¨è¾¾è¿‡çš„é‚£ç•ªæƒ³æ³•ã€‚å¯åšå®¢å´åšåˆ°äº†â€œä¸€æ¬¡è¡¨è¾¾ï¼Œæ— æ•°æ¬¡é˜…è¯»â€ï¼Œå½“æˆ‘çœ‹åˆ°ä¸€ä¸ªå†™äº†å¥½å‡ å¹´çš„åšå®¢ï¼Œçœ‹å®Œäº†ä¹‹åæˆ‘ä»¿ä½›å’Œè¿™ä¸ªäººäº¤è°ˆäº†å¾ˆä¹…ï¼Œç”¨ç¨‹åºå‘˜ä»¬å–œæ¬¢å¬çš„è¯æ¥è¯´å°±æ˜¯ï¼Œâ€œåšå®¢æå¤§åœ°å¢å¼ºäº†è¯è¯­çš„å¤ç”¨æ€§â€ã€‚ æˆ‘æ›¾åœ¨ CSDN ä¸Šå†™äº†è¿‘å…­å¹´çš„åšå®¢ï¼Œåœ¨ä¸€å¹´åŠå‰å»ºç«‹äº†ä¸€ä¸ª Google Groupsï¼ˆTopLanguageï¼‰ï¼Œç”±äºæˆ‘çš„åšå®¢çš„é•¿æœŸé˜…è¯»è€…éƒ½æ˜¯äº’ç›¸æœ‰å…±åŒè¯­è¨€çš„ï¼Œå› æ­¤è¿™ä¸ª Group ä¸€å¼€å§‹å°±çƒ­ç«æœå¤©ï¼Œè€Œé«˜è´¨é‡çš„æŠ€æœ¯è®¨è®ºåˆ™è¿›ä¸€æ­¥å¸å¼•äº†æ›´å¤šçš„ç‰›äººçš„å‚ä¸ï¼Œé›ªçƒæ»šèµ·æ¥ä¹‹åï¼Œå°±å¾ˆéš¾åœä¸‹æ¥äº†ï¼Œå°†è¿‘ä¸€å¹´åŠä¸‹æ¥ï¼Œä»è¿™ä¸ª Group çš„è®¨è®ºä¸­æˆ‘è·ç›Šè‰¯å¤š[1]ã€‚è€Œå¯¹äºéç¨‹åºå‘˜æœ‹å‹ï¼Œç§‘å­¦æ¾é¼ ä¼šåˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ ä¹¦å†™æ˜¯ä¸ºäº†æ›´å¥½çš„æ€è€ƒã€‚æˆ‘åœ¨ã€Šä¹¦å†™æ˜¯ä¸ºäº†æ›´å¥½çš„æ€è€ƒã€‹é‡Œé¢è¯¦ç»†æ€»ç»“äº†ä¹¦å†™çš„å¥½å¤„ï¼Œè¿™é‡Œå°±ä¸æ‹·è´ç²˜è´´äº†ã€‚æœ‰äº›æƒ³æ³•å¦‚æœä¸å†™ä¸‹æ¥ï¼Œä¹Ÿå°±å¿˜æ‰äº†ï¼Œæœ‰ä¸€ä¸ªå¹¿ä¸ºæµä¼ çš„ã€Šæ•°å­¦ç‰›äººä»¬çš„è½¶äº‹ã€‹ï¼ˆè£è€€å±äº ukimï¼‰é‡Œé¢è®²äº†å¸Œå°”ä¼¯ç‰¹çš„ä¸€ä¸ªæ•…äº‹ï¼šä¸€æ¬¡åœ¨ Hilbert çš„è®¨è®ºç­ä¸Šï¼Œä¸€ä¸ªå¹´è½»äººæŠ¥å‘Šï¼Œå…¶ä¸­ç”¨äº†ä¸€ä¸ªå¾ˆæ¼‚äº®çš„å®šç†ï¼ŒHilbert è¯´â€œè¿™çœŸæ˜¯ä¸€ä¸ªå¦™ä¸å¯è¨€ï¼ˆwunderbaschonï¼‰çš„å®šç†å‘€,æ˜¯è°å‘ç°çš„ï¼Ÿâ€é‚£ä¸ªå¹´è½»äººèŒ«ç„¶çš„ç«™äº†å¾ˆä¹…ï¼Œå¯¹ Hilbert è¯´ï¼šâ€œæ˜¯ä½ .â€¦â€¦â€ã€‚ â€œæ•™â€æ˜¯æœ€å¥½çš„â€œå­¦â€ã€‚å¦‚æœä¸€ä»¶äº‹æƒ…ä½ ä¸èƒ½è®²æ¸…æ¥šï¼Œåæœ‰å…«ä¹ä½ è¿˜æ²¡æœ‰å®Œå…¨ç†è§£ã€‚ç»å¤§å¤šæ•°äººåº”è¯¥éƒ½çŸ¥é“åœ¨ç¨‹åºå‘˜è¡Œä¸šé¢è¯•å®˜ç»å¸¸è¦æ±‚ä½ è®²è§£ä¸€ä¸ªä¸œè¥¿ç»™ä»–å¬ï¼Œä»–ä¼šè¯´ä»–ä¸æ‡‚è¿™ä¸ªä¸œè¥¿ï¼ˆä»–å¦‚æœçœŸçš„ä¸æ‡‚çš„è¯æ•ˆæœå…¶å®æ˜¯æœ€å¥½çš„ï¼‰ï¼Œè€Œä½ çš„ä»»åŠ¡åˆ™æ˜¯è¯´åˆ°è®©ä»–ç†è§£ä¸ºæ­¢ã€‚ ä¸ºäº†è®©ä¸€ä¸ªä¸æ˜ç™½çš„äººåšåˆ°æ˜ç™½ï¼Œä½ å¿…é¡»è¦çŸ¥é“ä»æ˜ç™½åˆ°ä¸æ˜ç™½ä»–ç©¶ç«Ÿéœ€è¦æŒæ¡å“ªäº›æ¦‚å¿µï¼Œè¿™å°±è¿«ä½¿æˆ‘ä»¬å¯¹æˆ‘ä»¬å¤§è„‘ä¸­æ•´ä¸ªçš„çŸ¥è¯†ä½“ç³»æ¥ä¸ªå¯»æ ¹ç©¶åº•ï¼ŒæŠŠè—åœ¨æ°´é¢ä¹‹ä¸‹çš„é‚£äº›ä¸œè¥¿ç»Ÿç»ŸæŒ–å‡ºæ¥ï¼ŒæŠŠå¤§è„‘ä¸­çš„é‚£äº›æˆ‘ä»¬çŸ¥é“ã€ä½†ä¸çŸ¥é“è‡ªå·±çŸ¥é“çš„æ½œåœ¨æ¦‚å¿µæˆ–å‡è®¾ï¼ˆassumptionsï¼‰éƒ½æŒ–å‡ºæ¥ï¼ŒæŠŠå®ƒä»¬ä»å†…éšè®°å¿†æ‹‰æ‰¯åˆ°å¤–æ˜¾è®°å¿†ä¸­ã€‚å› ä¸ºåªæœ‰å®Œå…¨çŸ¥é“ã€å¹¶çŸ¥é“è‡ªå·±çŸ¥é“ä¸€åˆ‡æ¥é¾™å»è„‰çš„äººï¼Œæ‰èƒ½çœŸæ­£æŠŠä¸€ä»¶äº‹æƒ…è®²å¾—é€šé€šé€é€ã€‚ ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¼šæ€€ç–‘ï¼Œé‚£é™¤äº†èƒ½å¤Ÿè®²æ¸…æ¥šä¹‹å¤–ï¼Œå¼„æ¸…è‡ªå·±åˆ°åº•çŸ¥é“å“ªäº›ä¸œè¥¿è¿˜æœ‰å…¶ä»–ä»€ä¹ˆå¥½å¤„å—ï¼Ÿå¦‚æœæ²¡æœ‰å…¶ä»–å¥½å¤„ï¼Œé‚£æˆ‘åˆä½•å¿…è´¹è¿™ä¸ªåŠ²å‘¢ï¼Ÿæˆ‘åˆä¸å½“è€å¸ˆã€‚ TopLanguage ä¸Šçš„ä¸€ä½æœ‹å‹ sagasw æ›¾ç»è®²äº†è¿™æ ·ä¸€ä¸ªå°æ•…äº‹ï¼šæ®è¯´åœ¨æŸä¸ªè‘—åè½¯ä»¶å…¬å¸é‡Œï¼Œå¼€å‘ç»„çš„æ¡Œä¸Šä¼šæ”¾ç€ä¸€åªå°ç†Šï¼Œå¤§å®¶äº’ç›¸é—®é—®é¢˜ä¹‹å‰ï¼Œå…ˆå¯¹ç€å°ç†ŠæŠŠé—®é¢˜è¯´ä¸€éï¼Œçœ‹èƒ½ä¸èƒ½æŠŠé—®é¢˜æè¿°çš„æ¸…æ™°ï¼ŒåŸºæœ¬ä¸Šè¯´çš„æ¯”è¾ƒæœ‰æ¡ç†ä»¥åï¼Œç­”æ¡ˆä¹Ÿå°±éšä¹‹è€Œæ¥äº†ã€‚å½“ç„¶ï¼Œä½ ä¸ä¸€å®šè¦å¯¹å°ç†Šè¯´ï¼Œä½ å¯ä»¥åœ¨å¤§è„‘ä¸­è™šæ„ä¸€ä¸ªå¬ä¼—ï¼Œä¸€ä¸ªä¸æ‡‚è¡Œçš„å¬ä¼—ï¼Œç„¶åä½ è¯´ç»™ä»–å¬ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œæˆ‘ç»å¸¸åœ¨è·¯ä¸Šç”¨ã€‚ä¸è¿‡å¦‚æœä½ èƒ½åä¸‹æ¥ï¼Œæˆ‘å»ºè®®ä½ è¿˜æ˜¯è¯´ç»™å®é™…çš„å¬ä¼—å¬â€”â€”å³å†™ä¸‹ä½ çš„æ€è€ƒï¼Œå› ä¸ºä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒã€‚ æˆ‘ä»¬çš„ç»å¤§å¤šæ•°çŸ¥è¯†åœ¨ç»å¤§å¤šæ•°æ—¶å€™éƒ½éšè—åœ¨æ½œæ„è¯†ä¸­ï¼Œå…¶å®æˆ‘ä»¬æ„è¯†çš„çª—å£å¾ˆå°ï¼Œæˆ‘ä»¬çš„å·¥ä½œè®°å¿†åªèƒ½å®¹çº³å¯¥å¯¥æ•°ä¸ªæ¡ç›®ï¼ˆè®°å¾—é‚£ä¸ªâ€œçœ‹ä½ èƒ½å¤Ÿè®°ä½å±å¹•ä¸ŠåŒæ—¶é—ªç°çš„å¤šå°‘ä¸ªæ•°å­—â€çš„ flash å°æ¸¸æˆå—ï¼Ÿï¼‰ï¼Œæˆ‘ä»¬å¹³æ—¶æ‰€ä½œçš„æ¨ç†è¿‡ç¨‹å¾ˆå¤§éƒ¨åˆ†éƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå‘ç”Ÿåœ¨æ½œæ„è¯†ä¸­ï¼Œè€Œæˆ‘ä»¬åªèƒ½æ„ŸçŸ¥åˆ°ä¸€äº›ä¸­é—´ç»“è®ºã€‚ä¸ä¿¡ä½ å›å¿†ä¸€ä¸‹ä½ åœ¨å’Œåˆ«äººè®¨è®ºé—®é¢˜çš„æ—¶å€™æœ‰å¤šå°‘æ¬¡è§‰å¾—â€œåæ­£å°±æ˜¯è¿™æ ·ï¼Œæˆ‘æ„Ÿè§‰å¾—åˆ°å®ƒæ˜¯å¯¹çš„ï¼Œä½†æ˜¯ä½ é—®æˆ‘ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸…åˆ°åº•æ€ä¹ˆå›äº‹â€ï¼Œå¯¹æ­¤ä½ ä¸è§‰å¾—å¾ˆå¥‡æ€ªå—ï¼Ÿå¦‚æœä½ éƒ½ä¸èƒ½ä»é€»è¾‘ä¸Šæ”¯æŒä½ çš„ç»“è®ºï¼Œä½ æ€ä¹ˆå°±èƒ½ç¡®ä¿¡å®ƒæ˜¯å¯¹çš„å‘¢ï¼Ÿä»…ä»…å› ä¸ºä½ çš„ç›´è§‰å¼ºçƒˆåœ°å‘Šè¯‰ä½ å®ƒæ˜¯å¯¹çš„ï¼Ÿé‚£å¦‚æœæ—è¾¹æœ‰å¦ä¸€ä¸ªäººï¼Œä»–å’Œä½ æŒç›¸åçš„è§‚å¿µï¼Œè€Œä»–çš„ç›´è§‰ä¹Ÿå¼ºçƒˆåœ°å‘Šè¯‰ä»–ä»–æ˜¯å¯¹çš„ã€‚è¿™æ—¶å€™ä½ åˆæ€ä¹ˆæƒ³ï¼Ÿâ€œä»–çš„ç›´è§‰é”™äº†ï¼Œæˆ‘çš„ç›´è§‰æ˜¯å¯¹çš„â€ï¼Ÿéš¾é“ä½ è¿™ä¹ˆè‡ªä¿¡ä½ çš„ç›´è§‰æ˜¯ä¸–ç•Œä¸Šæœ€å¯é çš„ï¼Ÿ æˆ‘è‡ªå·±åˆ™æ˜¯éå¸¸çæƒœç±»ä¼¼è¿™æ ·çš„æœºä¼šï¼Œå³å½“â€œæˆ‘å¼ºçƒˆåœ°è§‰å¾—å®ƒæ˜¯å¯¹çš„ï¼Œä½†æˆ‘å´è¯´ä¸å‡ºæ‰€ä»¥ç„¶æ¥â€ï¼Œè¿™æ—¶å€™å¾€å¾€æ˜¯åˆ°å¤§è„‘ä¸­ç¿»ç®±å€’æŸœçš„æ—¶å€™ï¼Œå¼„æ¸…æ¥é¾™å»è„‰çš„æ—¶å€™ï¼Œæ·±å…¥åæ€çš„æ—¶å€™ï¼Œçº æ­£ä¸€ç›´ä»¥æ¥é”™è¯¯çš„æ½œåœ¨å‰æå‡è®¾çš„æ—¶å€™ã€‚å¦ä¸€æ–¹é¢ï¼Œâ€œæˆ‘å¼ºçƒˆåœ°è§‰å¾—è¿™ä¸ªè¯´æ³•æœ‰é—®é¢˜ï¼Œä½†æˆ‘å´è¯´ä¸æ¸…å®ƒä¸ºä»€ä¹ˆæœ‰é—®é¢˜ï¼Œåˆ°åº•å“ªæœ‰é—®é¢˜â€ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªææœ‰æ„ä¹‰çš„ç¬é—´ï¼Œå®ƒå‡ ä¹æ€»æ˜¯æ„å‘³ç€ä½ å¯¹ä¸€ä¸ªé—®é¢˜çš„è®¤è¯†æœ‰æ½œåœ¨çš„åå·®ï¼Œè‚¯å®šæ˜¯åœ¨ä½ è‡ªå·±éƒ½æ²¡æœ‰è§‰çŸ¥åˆ°çš„åœ°æ–¹å¼•å…¥äº†ä¸€ä¸ªæ½œåœ¨çš„å‡è®¾ã€å·æ¢äº†ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œç­‰ç­‰ã€‚è€Œè¿™ç§æ—¶å€™å°±æ˜¯æ·±å…¥åæ€çš„æ—¶å€™ï¼Œå½“ä½ ç»ˆäºæ½œåˆ°é—®é¢˜çš„åº•å±‚ï¼Œè§¦æ‘¸åˆ°é—®é¢˜çš„å®è´¨ï¼ŒæŠŠæ°´é¢ä¹‹ä¸‹çš„å†°å±±æ•´ä½“çœ‹æ¸…äº†çš„æ—¶å€™ä½ ä¼šæœ‰ä¸€ç§é€šä½“èˆ’æ³°çš„æ„Ÿè§‰ã€‚ ä¸ºä»€ä¹ˆè¯´ä»¥ä¸Šè¿™äº›ï¼Ÿå› ä¸ºåˆšæ‰è¯´çš„æ˜¯ä½ å¿…é¡»ç­‰å¾…è¿™æ ·çš„åæ€æœºä¼šï¼Œä½†å¦‚æœä½ é€‰æ‹©ç»å¸¸æ€»ç»“è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œå¹¶è¯´å‡ºæ¥ç»™ä½ çš„è¯»è€…å¬ï¼Œä½ å°±ä¼šå‘ç°ä½ è‡ªå·±åˆ›é€ äº†è¿™æ ·çš„æœºä¼šã€‚å¦‚æœæˆ‘ä»¬å¹³æ—¶ä¸åæ€ï¼Œæˆ‘ä»¬è§‰å¾—å¾ˆå¤šäº‹æƒ…éƒ½æ˜¯å½“ç„¶çš„ï¼Œä½†ç»“æœå¦‚æœè¦ä½ ä¸€å¼€å£è¯´ç»™åˆ«äººå¬ï¼Œå¸¸å¸¸ä¼šå‘ç°äº‹æƒ…å°±å¼€å§‹å˜å¾—ä¸é‚£ä¹ˆæ˜æ˜¾äº†ï¼Œä½ è¯´ç€è¯´ç€ï¼Œå°±å¼€å§‹è«åå…¶å¦™åœ°å‘ç°è‡ªå·±éœ€è¦ç”¨åˆ°â€œåæ­£â€è¿™ä¸ªè¯äº†ã€‚ äºæ˜¯ï¼Œåæ€çš„æœºä¼šå°±æ¥äº†ã€‚ ä¸€æ—¦ä½ æŠŠè‡ªå·±æ½œæ„è¯†é‡Œé¢çš„ä¸œè¥¿ä»å¹•åæ‹‰å‡ºæ¥ï¼Œä½ å°±æœ‰äº†é¢å¯¹å¹¶åæ€å®ƒä»¬çš„å¯èƒ½ï¼Œè€Œä¸æ˜¯ä»»å®ƒä»¬åœ¨å¹•åé˜´é™©åœ°å·¦å³ä½ çš„æ€ç»´ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„æ€è·¯å‡ºäº†é—®é¢˜å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸ä¼šåæ€ï¼Œè€Œæ˜¯ä¸çŸ¥é“è‡ªå·±çš„æ€ç»´ä¸­æœ‰é‚£äº›éšå«çš„å‡è®¾ï¼ˆassumptionsï¼‰ï¼Œå¦‚æœä½ åªæ„Ÿè§‰åˆ°ç­”æ¡ˆï¼Œå´ä¸çŸ¥é“ä½ å¤§è„‘å¾—åˆ°è¿™ä¸ªç­”æ¡ˆä¹‹å‰åšäº†å“ªäº›æ¨ç†ï¼Œä½ åˆæ€ä¹ˆçŸ¥é“å“ªä¸€ç¯å¯èƒ½å‡ºäº†é—®é¢˜å‘¢ï¼Ÿå¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦ä½ å¼„æ¸…äº†è‡ªå·±åˆ°åº•æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œç¦»æ„è¯†åˆ°é—®é¢˜å°±ä¸è¿œäº†ï¼Œå¾ˆç®€å•çš„é“ç†â€”â€”å¦‚æœåˆ«äººå’Œä½ äº‰è¾©çš„æ—¶å€™æ€»æ˜¯åªæ‘†ç«‹åœºï¼Œä½ å°±å¾ˆéš¾å’Œä»–è¾©ï¼Œä½†å¦‚æœä»–æŠŠè‡ªå·±çš„æ¨ç†è¿‡ç¨‹åŸåŸæœ¬æœ¬æš´éœ²ç»™ä½ ï¼Œæ‰¹åˆ¤èµ·æ¥æ€»æ˜¯å®¹æ˜“å¾—å¤šçš„ã€‚ï¼ˆä¹Ÿæ­£å› ä¸ºè¿™ä¸ªåŸå› æœ‰å¾ˆå¤šäººæ€»æ˜¯æŠŠé€»è¾‘è—åœ¨èƒŒåï¼Œä¸æ•¢æš´éœ²å‡ºæ¥ï¼‰ ç»å¤§å¤šæ•°æ—¶å€™å…¶å®æˆ‘ä»¬éƒ½ä¼šä¸å‡æ€ç´¢åœ°å¾—å‡ºä¸€äº›ç»“è®ºï¼Œå°±åƒä¸Šäº†å‘æ¡çš„è‡ªåŠ¨æœºï¼Œä½†å…¶å®æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™äº›ç»“è®ºåˆ°åº•æ€ä¹ˆæ¥çš„ï¼Œåœ¨æ€ç»´çš„èƒŒååˆ°åº•å‘ç”Ÿäº†å“ªäº›äº‹æƒ…ï¼Œæ•…è€Œå½“æˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„ç»“è®ºé”™äº†çš„æ—¶å€™ï¼Œä¸€å¤´é›¾æ°´ï¼Œæ²¡æ³•ç€æ‰‹å¯»æ‰¾åˆ°åº•åœ¨å“ªé”™äº†ã€‚å¦‚æœä½ æ³¨æ„ä¸€ä¸‹å¾ˆå¤šäººçš„å‘è¨€ï¼ˆè®ºå›ã€åšå®¢ç­‰ç­‰ï¼‰ï¼Œå¦‚æœä½ æŠŠä»–ä»¬çš„å‘è¨€åˆ†ä¸ºâ€œå‰æâ€ã€â€œå‡è®¾â€ã€â€œé€»è¾‘â€ã€â€œç»“è®ºâ€è¿™å››ä¸ªéƒ¨åˆ†ï¼Œä½ ä¼šå‘ç°ä¸€å¤§å †äººåªä¼šä¸åœåœ°ä¸‹ç»“è®ºï¼Œæ‘†ç«‹åœºï¼Œå´è§ä¸åˆ°è¿™äº›ç»“è®ºæˆ–ç¦»åœºçš„å‰æã€å‡è®¾å’Œä¸ªä¸­é€»è¾‘ï¼Œå€’ä¹Ÿä¸æ˜¯ä»–ä»¬ä¸æ„¿æ„å†™å‡ºé€»è¾‘ï¼Œè€Œæ˜¯å› ä¸ºåæ€è‡ªå·±çš„æ€ç»´è¿‡ç¨‹å®åœ¨æ˜¯ä¸€ä»¶å›°éš¾éå¸¸çš„äº‹æƒ…ï¼Œæˆ‘ä»¬çš„æ¨ç†è¿‡ç¨‹å¾ˆå¤§ä¸€éƒ¨åˆ†å‘ç”Ÿåœ¨æ„è¯†çš„æ°´é¢ä¹‹ä¸‹ï¼Œåªæœ‰å½“æœ‰äº†é‡è¦ç»“è®ºçš„æ—¶å€™è¿™æ¡é€»è¾‘é“¾æ‰ä¼šæµ®å‡ºæ¥å†’ä¸€ä¸ªæ³¡ï¼Œè®©æˆ‘ä»¬çš„æ„è¯†æ•æ‰åˆ°ã€‚æ›´ä½•å†µç»å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ç”¨çš„å…¶å®å¹¶ä¸æ˜¯å®Œæ•´ä¸¥å¯†çš„é€»è¾‘æ€ç»´ï¼Œè€Œæ˜¯æ€ç»´æ·å¾„ã€‚ å»æ•™ä¸€ä¸ªå®Œå…¨ä¸æ‡‚çš„äººï¼Œåˆ™æ˜¯ä¸€ç§æœ€æœ€å¼ºå¤§å’Œå½»åº•çš„åæ€é€”å¾„â€”â€”å› ä¸ºä»–æ²¡æœ‰ä»»ä½•é¢„å¤‡çš„çŸ¥è¯†ï¼Œæ‰€ä»¥è¦è®©ä»–å¼„æ‡‚ä½ æ‰€çŸ¥é“çš„ï¼Œä½ å°±å¿…é¡»å½»åº•åæ€ä½ çš„çŸ¥è¯†ä½“ç³»ï¼Œå¼„æ¸…è¿™åº§å¤§å¦çš„æ ¹åŸºåœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œå¼„æ¸…å®ƒçš„éª¨æ¶åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œä¸€ç –ä¸€ç“¦åˆ°åº•æ˜¯æ€ä¹ˆå’èµ·æ¥çš„ï¼Œä½ ä¸èƒ½è‡ªå·±ç«™åœ¨ 11 å±‚ä¸Šï¼Œç„¶åå‡è®¾ä½ çš„è¯»è€…ç«™åœ¨ç¬¬ 10 å±‚ï¼ŒæŒ‡æœ›ç€åªè¦å‘Šè¯‰ä»–ç¬¬ 11 å±‚æœ‰é‚£äº›å†…å®¹å°±è®©ä»–æ˜ç™½ã€‚ä½ çš„è¯»è€…ç«™åœ¨ç¬¬ä¸€å±‚ï¼Œä½ å¿…é¡»çŸ¥é“ä½ è„šä¸‹è¸©ç€çš„å¦å¤– 10 å±‚åˆ°åº•æ˜¯æ€ä¹ˆæ„é€ çš„ã€‚è¿™å°±è¿«ä½¿ä½ å¯¹ä½ æ‰€æŒæ¡çš„ã€æˆ–ä¹‹å‰è®¤ä¸ºæ­£ç¡®çš„é‚£äº›ä¸œè¥¿ä½œå½»å½»åº•åº•çš„ã€æ·±åˆ»çš„åæ€ï¼Œä½ çš„å—ä¼—è¶Šæ˜¯ä¸æ‡‚ï¼Œä½ éœ€è¦åæ€å¾—å°±è¶Šæ·±åˆ»ã€‚ è®¨è®ºæ˜¯ç»ä½³çš„åæ€ã€‚å¦ä¸€æ–¹é¢ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯æœ‰æœºä¼šè¯´ç»™å®Œå…¨ä¸æ‡‚çš„äººå¬ï¼Œæ›´å¤§çš„å¯èƒ½æ€§æ˜¯è¯´ç»™åŒé¢†åŸŸæœ‰ä¸€å®šåŸºç¡€çš„äººå¬ï¼Œè¿™ä¸ªæ—¶å€™å¹¶ä¸ä»£è¡¨å°±ä¸èƒ½ä¿ƒä½¿åæ€äº†ï¼Œå®é™…ä¸Šï¼Œä½ ä¼šå‘ç°ï¼Œå¦‚æœä½ å…¬å¼€ä½ çš„æƒ³æ³•ï¼Œå‡ ä¹æ€»èƒ½çœ‹åˆ°ä¸ä½ æŒä¸åŒæ„è§çš„äººï¼Œç„¶åä½ é€šè¿‡æ¯”è¾ƒä½ å’Œä»–çš„è§‚å¿µä¹‹é—´çš„å·®åˆ«ï¼Œä¼šå‘ç°ä½ ä»¬åœ¨ä¸€å¼€å§‹çš„æ€è·¯ä¸Šå°±å­˜åœ¨å·®å¼‚ï¼Œå·®å¼‚ä»å“ªé‡Œæ¥çš„ï¼Ÿåœ¨è¿›ä¸€æ­¥è®¨è®ºä¸­ä½ ä»¬å°±ä¼šä¸æ–­åœ°è¿«ä½¿å¯¹æ–¹æ‹¿å‡ºæ›´æ·±å±‚æ¬¡çš„ç†ç”±ï¼Œè¿™åŒæ ·ä¹Ÿæ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆåœ°ä¿ƒä½¿è‡ªå·±åæ€çš„æ–¹æ³•ï¼Œåœ¨è®¨è®ºçš„è¿‡ç¨‹ä¸­åŒæ–¹çš„ç†ç”±è‡ªç„¶ä¼šå˜å¾—è¶Šæ¥è¶Šæ·±å…¥ï¼Œè¶Šæ¥è¶Šæ¥è¿‘é—®é¢˜çš„æœ¬è´¨ï¼Œä¸€äº›å¹³æ—¶éš¾ä»¥æ³¨æ„åˆ°çš„æ·±å±‚é¢çš„å·®å¼‚æ€§å°±ä¼šé€æ¸æµ®ç°å‡ºæ¥ï¼Œä½ ä¹Ÿå°±å¤šäº†ä¸€æ¬¡éš¾å¾—çš„æœºä¼šå»å®¡è§†è‡ªå·±çš„æ€ç»´ä¸­åˆ°åº•å­˜æ”¾äº†å“ªäº›é”™è¯¯çš„ä¿¡æ¯ã€‚ æ¿€åŠ±ä½ å»æŒç»­å­¦ä¹ å’Œæ€è€ƒã€‚å¦‚æœä½ æ²¡æœ‰æŒç»­å­¦ä¹ å’Œæ€è€ƒçš„ä¹ æƒ¯ï¼Œä½ çš„åšå®¢å¾ˆå¿«å°±ä¼šæ²¡æœ‰å†…å®¹å¯å†™ï¼Œå°±åªèƒ½æ•´ç‚¹ç¢ç¢å¿µæˆ–è€…è½¬è½½ï¼Œç„¶åä½ å°±ä¼šå¤±å»è¯»è€…ï¼Œç„¶åä½ å°±ä¼šå…³æ‰åšå®¢ï¼Œç„¶åä¸€æ—¦å…³æ‰åšå®¢ä¹‹åä½ ä¹Ÿå°±æ­»äº†å†™åšå®¢çš„å¿ƒï¼Œç„¶åå°±å°‘äº†ä¸€æ¡æ¿€åŠ±ä½ å»æ€è€ƒå’Œæ€»ç»“çš„é€”å¾„ï¼Œç„¶åä½ å˜å¾—æ›´ä¸é«˜å…´æ€»ç»“å’Œæ€è€ƒï¼Œç„¶åâ€¦ ä¸ºäº†æ‰“ç ´è¿™ä¸ªæ­»å¾ªç¯ï¼Œä¸è¦æ°¸ä¹…åœæ­¢æ›´æ–°ä½ çš„åšå®¢ï¼Œå°±ç®—ä½ ä¸¤ä¸ªæœˆï¼Œä¸‰ä¸ªæœˆéƒ½ä¸å†™ï¼Œåªè¦ä½ æ¯ç¯‡éƒ½æ˜¯å†™è‡ªå·±æ€è€ƒçš„äº§ç‰©ï¼Œå†™æœ‰ä»·å€¼çš„ä¸œè¥¿ï¼Œåœ¨äº’è”ç½‘ä¸Šï¼Œé‡‘å­çš„ç¡®æ€»æ˜¯ä¼šå‘å…‰çš„ï¼Œå› ä¸ºæœ‰æ— æ•°çš„ä¿¡æ¯èšåˆå¹³å°åœ¨æœŸå¾…è¿™äº›æœ‰ä»·å€¼çš„å†…å®¹ï¼Œæœ‰æœç´¢å¼•æ“ä¸ºä½ çš„å†…å®¹æä¾›æµ·é‡çš„æ½œåœ¨è¯»è€…ï¼Œæœ‰æµ·é‡çš„äººè‚‰åœ¨æ‰‹åŠ¨æŒ–æ˜å’Œè½¬è½½é‚£äº›æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚æˆ‘ä»¬æ‰€èƒ½åšçš„æœ€å·®çš„ä¸€ä¸ªå†³ç­–è«è¿‡äºåœæ­¢åšä¸€ä»¶æ²¡æœ‰ä»»ä½•åå¤„ï¼Œå´æœ‰ä¸€å¤§å †å¥½å¤„çš„äº‹æƒ…ã€‚ ä¸ºäº†è®©ä½ çš„åšå®¢æœ‰ä»·å€¼ï¼Œä½ å¿…é¡»ä¸æ–­æ€»ç»“è‡ªå·±å­¦ä¹ çš„ç»“æœï¼Œä½ å¿…é¡»ä¸æ–­æ€è€ƒï¼Œç»™å‡ºæ¯”åˆ«äººæ·±åˆ»ã€ç‹¬åˆ°çš„è§è§£ã€‚è¿™çœ‹èµ·æ¥æœ‰ç‚¹æœ¬æœ«å€’ç½®ï¼Œä½†å¾ˆå¿«æœ¬å’Œæœ«å°±ä¼šæ­£è¿‡æ¥ã€‚ å­¦ä¼šæŒä¹‹ä»¥æ’åœ°åšä¸€ä»¶äº‹æƒ…ã€‚å¾ˆå¤šäººåœ¨ç”Ÿæ´»ä¸­å®¹æ˜“è§‰å¾—è¿·å¤±ï¼Œä¸çŸ¥é“æƒ³è¦åšä»€ä¹ˆï¼Œæ˜¯å› ä¸ºæ²¡æœ‰ä¸€ä»¶èƒ½å¤ŸæŒç»­åœ°åšçš„äº‹æƒ…ï¼Œç”¨ä¿—è¯æ¥è¯´å°±æ˜¯æ²¡æœ‰ä¸»å¿ƒéª¨ã€‚ç”¨ç§¯æå¿ƒç†å­¦çš„è¯æ¥è¯´å°±æ˜¯æ²¡æœ‰ä¸€ä»¶èƒ½å¤Ÿåˆ›é€ æµä½“éªŒçš„äº‹æƒ…ï¼Œè€Œä¹¦å†™è‡ªå·±çš„æ€æƒ³åˆ™æ˜¯ä¸€ä»¶å®¹æ˜“äº§ç”Ÿæµä½“éªŒçš„äº‹æƒ…ï¼Œåœ¨ä¹¦å†™çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯ç†æ€§åœ°ä¹¦å†™çš„æ—¶å€™ï¼Œå¤§è„‘é€æ¸è¿›å…¥æ¨ç†åˆ†ææ¨¡å—ï¼Œä¸€åˆ‡ä¸æ„‰å¿«çš„æƒ…ç»ªï¼Œçƒ¦èºæ„Ÿéƒ½ä¼šé€æ¸æ¶ˆéšä¸‹å»ã€‚ä¸è¿‡å‰ææ˜¯ä½ å¾—å¼€å§‹ï¼Œå¹¶ä¸”åšæŒè¿‡ä¸€å¼€å§‹çš„å›°éš¾æœŸï¼Œä»¥åçš„ä¸€åˆ‡ä¾¿æˆäº†ä¹ æƒ¯æˆè‡ªç„¶ã€‚ ä¸€ä¸ªé•¿æœŸçš„ä»·å€¼åšå®¢æ˜¯ä¸€ä»½å¾ˆå¥½çš„ç®€å†ã€‚è¿™é‡Œçš„â€œç®€å†â€å¹¶éæ˜¯ç‹­ä¹‰ä¸Šçš„æ±‚èŒç®€å†ï¼Œæ¯•ç«Ÿç°åœ¨è¿˜æ²¡æœ‰åˆ°ä»·å€¼åšå®¢çš„æ—¶ä»£ï¼Œå¾ˆå¤šäººå†™åšå®¢éƒ½æ˜¯åˆ°å¤„è½¬è½½æˆ–è€…å¹²è„†ç¢ç¢å¿µï¼Œæ­£å› æ­¤é¢è¯•å®˜æœªå¿…æ‹¿ä¸ªäººåšå®¢å½“æˆäº†è§£ä¸€ä¸ªäººçš„æ›´å¯é çª—å£ã€‚è¿™é‡Œçš„â€œç®€å†â€æ˜¯æŒ‡ä¸€ä¸ªè®©åˆ«äººäº†è§£è‡ªå·±çš„çª—å£ï¼Œè™½ç„¶æˆ‘ä»¬æœªå¿…åšå¾—åˆ°åƒç½—æ°¸æµ©ã€Keso è¿™æ ·çš„åšå®¢ï¼Œä¸ªäººçš„å½±å“åŠ›å·²ç»è¶³ä»¥æ”¯æ’‘å‡ºä¸€ä»½äº‹ä¸šï¼ˆç‰›åšå’Œ 5gmeï¼‰ï¼Œä½†è‡³å°‘ä½ ä¼šå› æ­¤è€Œç»“è¯†æ›´å¤šçš„äººï¼Œä½ çš„åšå®¢ä»·å€¼è¶Šé«˜ï¼Œä½ ç»“è¯†çš„äººå°±è¶Šç‰›ï¼Œè·Ÿç‰›äººäº¤æµåˆä¼šè®©ä½ çš„çœ¼ç•Œå¾—åˆ°æå¤§çš„å¼€é˜”ï¼Œæ‰“å¼€ä¸€æ‰‡åˆä¸€æ‰‡ä½ åŸæœ¬ä¸çŸ¥é“çš„é—¨ï¼Œäºæ˜¯ä½ å°±å˜å¾—æ›´ç‰›â€¦ è¿™æ˜¯ä¸€ä¸ªè‰¯æ€§å¾ªç¯ã€‚ ï¼ˆäºŒï¼‰æ€ä¹ˆåšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢æ³¨æ„åˆ°æˆ‘å¹¶æ²¡æœ‰è¯´â€œæ€ä¹ˆåšåˆ°é•¿æœŸåšæŒå†™ä¸€ä¸ªä»·å€¼åšå®¢â€ï¼Œå› ä¸ºå½“æ€è€ƒå’Œæ€»ç»“æˆä¸ºä¹ æƒ¯ä¹‹åï¼Œè¯‰è¯¸æ–‡å­—ä»¥åŠå€ŸåŠ©ä¹¦å†™æ¥è¿›ä¸€æ­¥æ€è€ƒå°±å˜æˆäº†ä¸€ä»¶è‡ªç„¶è€Œç„¶çš„äº‹æƒ…ï¼Œå°±å˜æˆäº†ä¸€ä»¶â€œå› ä¸ºä½ åœ¨æ€è€ƒå’Œæ€»ç»“ä»è€Œå¿…é¡»ä¹¦å†™ä¸‹æ¥â€çš„äº‹æƒ…ï¼Œåšå®¢å°±å˜æˆäº†å‰¯äº§å“ã€‚ ä¸€å¼€å§‹çš„æ—¶å€™ä½ æ˜¯å› ä¸ºè¦å†™åšå®¢è€Œå»ä½¿åŠ²åœ°æ€è€ƒå’Œæ€»ç»“ï¼ŒæŒ‡æœ›ç»™å‡ºä»¤äººçœ¼ç›ä¸€äº®çš„ä¸œè¥¿ï¼Œåˆ°äº†åæ¥ï¼Œå°±å˜æˆäº†å› ä¸ºä½ ä¹ æƒ¯äº†æ€è€ƒå’Œæ€»ç»“ï¼Œå› ä¸ºä½ æ„è¯†åˆ°ä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒï¼Œä½ å°±å¿…é¡»ä½¿ä½ çš„æƒ³æ³•æˆä¸ºæ–‡å­—ã€‚è‡³æ­¤æœ¬å’Œæœ«å°±ä¼šå„å½’åŸä½ï¼Œä¸å†é¢ å€’ã€‚ æ€æ ·åšåˆ°é•¿æœŸå†™ä¸€ä¸ªä»·å€¼åšå®¢ï¼Ÿä¹Ÿè®¸æœ‰äººä¼šç»™å‡ºå¾ˆå¤šæœ‰è¶£æœ‰ç”¨çš„å°æŠ€å·§æ¥æä¾›åŠ¨æœºå’Œæ¿€åŠ±ï¼Œè­¬å¦‚å¦‚ä½•åš SEOï¼Œå¦‚ä½•é¼“åŠ±è¯»è€…ç•™è¨€ç­‰ç­‰ï¼Œä½†æ˜¯è¿™äº›æˆ‘éƒ½ä¸æƒ³è¯´ï¼Œæˆ‘åªæƒ³è¯´æœ€æœ€é‡è¦çš„ï¼Œé‚£å°±æ˜¯ï¼š è®©ä½ è‡ªå·±æˆä¸ºä¸€ä¸ªæŒç»­å­¦ä¹ å’Œæ€è€ƒçš„äººï¼Œå¹¶åªå†™ä½ çœŸæ­£æ€è€ƒå’Œæ€»ç»“ä¹‹åçš„äº§ç‰©ï¼Œå…¶ä»–ä¸€åˆ‡å°±ä¼šéšä¹‹è€Œæ¥ã€‚ å°±åƒé‚£å¥ç»å¸¸è¢«äººä¼ é˜…çš„è¯ï¼šåªåšä½ æœ€æ„Ÿå…´è¶£çš„äº‹æƒ…ï¼Œé’±ä¼šéšä¹‹è€Œæ¥[2]ã€‚ è¿™æ–¹é¢çš„å…·ä½“ä¾‹å­å¤§å®¶å¯ä»¥ç•™æ„ä¸€ä¸‹ï¼Œéšå¤„å¯è§ï¼Œå°±ä¸ä¸€ä¸€ä¸¾äº†ã€‚æˆ‘æƒ³å†é‡å¤ä¸€ä¸‹çš„æ˜¯ï¼Œåƒä¸‡ä¸è¦ç¢ç¢å¿µï¼Œæˆ‘èƒ½ç†è§£æ¯ä¸ªäººéƒ½æƒ³å¶å°”å‘å‘ç‰¢éªšçš„å†²åŠ¨ï¼Œä½†æ˜¯ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„çª—å£ï¼štwitterï¼Œæ‰€ä»¥ç«‹å³åœæ­¢åœ¨ä½ çš„åšå®¢ä¸Šç¢ç¢å¿µï¼Œé˜…è¯»åšå®¢çš„äººå¸Œæœ›å¾—åˆ°ä¿¡æ¯è€Œéå™ªéŸ³ã€‚å¦‚æœå®åœ¨å¿ä¸ä½æƒ³ç¢ç¢å¿µçš„è¯ä¸å¦¨æ¢ä¸€ä¸‹ä½ç½®ï¼Œè¿™ä¹ˆæ¥å‘Šè¯‰è‡ªå·±ï¼šå¦‚æœä½ çœ‹åˆ°åˆ«äººåšå®¢æ¥ä¸Šè¿™ä¹ˆä¸€æ®µï¼Œä½ ä¼šæœ‰å…´è¶£çœ‹å—ï¼Ÿ ï¼ˆä¸‰ï¼‰å¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜å³ä¾¿ä¸Šæ–‡ç»™å‡ºäº† N æ¡å†™åšå®¢çš„ç†ç”±ï¼Œä½†æœ‰æ—¶å€™åªè¦ä¸€æ¡ä¸å†™çš„ç†ç”±å°±ä¼šè®©äººåœæ­¢åšä¸€ä»¶äº‹æƒ…ã€‚æ‰€ä»¥æˆ‘ç‰¹åˆ«åŠ ä¸Šä¸€èŠ‚â€œå¯èƒ½å‡ºç°çš„é—®é¢˜ä»¥åŠæ€æ ·åº”ä»˜â€ï¼Œã€Šå½±å“åŠ› 2ã€‹[3]ç¬¬äº”ç« é›„è¾©åœ°è¯æ˜ï¼Œâ€œMuch of Will is Skillâ€ï¼Œæ„å¿—åŠ›å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥æºäºæœ‰æ­£ç¡®çš„æ–¹æ³•ï¼Œè€Œéå¤©ç”Ÿã€‚ æ‹…å¿ƒåˆ«äººè®¤ä¸ºæ²¡æœ‰ä»·å€¼ã€‚äº‹å®æ˜¯ï¼Œä½ é¢ä¸´è¿‡çš„é—®é¢˜æ€»ä¼šæœ‰äººé¢ä¸´è¿‡ï¼Œä½ ç‹¬ç«‹æ€è€ƒäº†ï¼Œåˆ«äººæ²¡æœ‰ï¼Œä½ çš„æ–‡ç« å¯¹ä»–ä»¬å°±ä¼šæœ‰ä»·å€¼ã€‚å½“ç„¶ï¼Œè‚¯å®šä¼šå¯¹æŸäº›äººæ²¡æœ‰ä»·å€¼ï¼Œä»–ä»¬æ—©å°±çŸ¥é“äº†ï¼Œä½†å°±ç®—ä½ å†å‰å®³ï¼Œä¹Ÿæ€»æ˜¯æœ‰äººæ¯”ä½ å‰å®³çš„ï¼Œä¸èƒ½è¯´å› ä¸ºè¿™äº›åŸå› å°±ä¸è®°å½•ä½ è‡ªå·±çš„æƒ³æ³•äº†ï¼Œä½ è‡ªå·±æ€è€ƒäº†ä¹‹åç†è§£å¾—æœ€æ·±åˆ»ï¼Œå°±ç®—æœ‰åˆ«äººæƒ³è¿‡äº†ï¼Œæ€»æœ‰äººæ²¡æœ‰æƒ³åˆ°çš„ã€‚å†µä¸”ï¼Œæ€è€ƒæˆäº†ä¹ æƒ¯ï¼Œä½ çš„æ€è€ƒèƒ½åŠ›ä¹Ÿä¼šè¶Šæ¥è¶Šå¼ºï¼Œä½ çš„æ–‡ç« ä¹Ÿä¼šè¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚é‡å¤ï¼Œæ— è®ºä½ é¢ä¸´ä»€ä¹ˆå›°æƒ‘ï¼Œæ€»ä¼šæœ‰å¾ˆå¤šäººåŒæ ·é¢ä¸´è¿‡ï¼Œäºæ˜¯ä½ è‹¦è‹¦æ€ç´¢ä¹‹åçš„ç»“æœï¼Œè‚¯å®šä¼šå¯¹å¾ˆå¤šäººæœ‰æ„ä¹‰ã€‚ æˆ–è€…ï¼Œä½ æƒ³é€šäº†ä¹‹åè§‰å¾—å…¶å®ä¹Ÿå¾ˆç®€å•äºæ˜¯ä¸æ„¿æ„æˆ–è€…ä¸å¥½æ„æ€å†™äº†ï¼Œä½†è¦çŸ¥é“ï¼Œé—®é¢˜åœ¨æƒ³é€šäº†ä¹‹åæ€»æ˜¯ç®€å•çš„ï¼Œé—®é¢˜çš„å›°éš¾ç¨‹åº¦ä¸åœ¨äºæƒ³é€šäº†ä¹‹åè¿˜è§‰å¾—æœ‰å¤šéš¾ï¼Œè€Œåœ¨äºä»ä½ è§‰å¾—å®ƒéš¾åˆ°ä½ è§‰å¾—å®ƒç®€å•éœ€è¦è€—è´¹å¤šå°‘æ€ç»´ä½“åŠ›ï¼Œä½ è€—è´¹çš„æ—¶é—´è¶Šé•¿ï¼Œè¯´æ˜æœ‰è¶Šå¤šçš„äººæœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰æƒ³æ˜ç™½ï¼ˆè·¯è¶Šé•¿èµ°åˆ°åº•çš„äººè¶Šå°‘ï¼‰ã€‚ æœ€åï¼Œè™½ç„¶æˆ‘ç°åœ¨çœ‹ä¸€å¹´å‰çš„æ–‡ç« è§‰å¾—æŒºä¸æˆç†Ÿï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰é‚£äº›ä¸æˆç†Ÿçš„æ€è€ƒï¼Œä¹Ÿä¸ä¼šæœ‰ç°åœ¨æ›´æˆç†Ÿçš„æ€è€ƒï¼Œæˆ‘å‡ å¹´åæ¥çœ‹ç°åœ¨å†™çš„ä¸œè¥¿ï¼Œè¿˜æ˜¯ä¼šè§‰å¾—ä¸æˆç†Ÿã€‚ æ‹…å¿ƒæƒ³æ³•å¤ªå¹¼ç¨šæˆ–æœ‰æ¼æ´ç­‰ç­‰è¢«åˆ«äººç¬‘è¯ã€‚äººéåœ£è´¤ã€‚æ­£æ˜¯å› ä¸ºå•ä¸ªäººçš„æƒ³æ³•æ€»æ˜¯æœ‰æ¼æ´ï¼Œæ‰å€¼å¾—æ‹¿å‡ºæ¥äº¤æµï¼ˆã€Šä¹¦å†™æ˜¯æ›´å¥½çš„æ€è€ƒã€‹ï¼Œè®¨è®ºæ˜¯ç»ä½³çš„åæ€ï¼‰ï¼Œè¢«åˆ«äººæŒ‡å‡ºé—®é¢˜æ­£æ˜¯æ”¹è¿›çš„ç©ºé—´ï¼Œè—ç€æ–ç€çš„æƒ³æ³•æ°¸è¿œä¸å¯èƒ½å˜å¾—æ›´æˆç†Ÿã€‚ Much of intelligence is knowledgeï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªéå¸¸å‘äººæ·±çœçš„ç»å…¸å¿ƒç†å­¦å®éªŒ[4]ï¼š å°†å­©å­ä»¬åˆ†æˆä¸¤ç»„ï¼Œé€šè¿‡ç»™ä»–ä»¬ä¸åŒçš„é˜…è¯»ææ–™è®©ä¸€ç»„ç›¸ä¿¡æ™ºåŠ›æ˜¯å¤©ç”Ÿçš„ï¼Œä¸å¯åœ¨åå¤©æ”¹å˜çš„ï¼Œå¦ä¸€ç»„åˆ™è®©ä»–ä»¬ç›¸ä¿¡æ™ºåŠ›å…¶å®åªæ˜¯çŸ¥è¯†å’ŒæŠ€èƒ½çš„ä»£åè¯ï¼Œå®Œå…¨æ˜¯åå¤©ä¹ å¾—çš„ã€‚æ¥ä¸‹æ¥è®©ä»–ä»¬åšä¸€ç»„ä»»åŠ¡ï¼Œé‚£äº›è¢«ç›¸ä¿¡æ™ºåŠ›å¤©ç”Ÿè¯´çš„å­©å­ï¼Œå€¾å‘äºå›é¿å›°éš¾çš„ä»»åŠ¡ï¼Œé€‰æ‹©è¾ƒå®¹æ˜“çš„ä»»åŠ¡ï¼Œè¿™é‡Œçš„é€»è¾‘æƒ³å¿…æ˜¯è¿™æ ·çš„ï¼šå¦‚æœåšå›°éš¾çš„ä»»åŠ¡ï¼Œå°±å¢å¤§äº†å¤±è´¥çš„å‡ ç‡ï¼Œå°±åœ¨é™ä½äº†è‡ªå·±åœ¨åˆ«äººå’Œè‡ªå·±å¿ƒç›®ä¸­çš„æ™ºåŠ›çš„å€¼ã€‚ä¸ºäº†ä¿æŠ¤è¿™ä¸ªæ™ºåŠ›çš„å€¼ä¸è¢«é™ä½ï¼Œåº”è¯¥é¿å…é‚£äº›æœ‰å¤±è´¥é£é™©çš„é¡¹ç›®ã€‚è€Œå¦ä¸€ç»„å­©å­åˆ™å¯¹äºæœ‰æŒ‘æˆ˜æ€§çš„äº‹æƒ…è·ƒè·ƒæ¬²è¯•ï¼Œå¹¶ä¸”åœ¨å¤±è´¥çš„æ—¶å€™æ˜æ˜¾æ²¡æœ‰å‰è€…æ²®ä¸§ï¼Œå› ä¸ºå¤±è´¥ä¹Ÿæ˜¯å­¦å¾—æ–°çš„ä¸œè¥¿ï¼Œä¸ç®¡æ€æ ·éƒ½æ˜¯â€œæ™ºåŠ›â€çš„æé«˜ã€‚ å†µä¸”ï¼Œåªä¼šæ‰¹åˆ¤ä¹ƒè‡³å˜²ç¬‘åˆ«äººçš„äººæ˜¯æœ€ä¸çŸ¥é“æ€ä¹ˆå»ºè®¾çš„äººï¼Œå¿½ç•¥ä»–ä»¬ã€‚ å¾—ä¸åˆ°æ¿€åŠ±ã€‚è¿™å…¶å®æ˜¯ä¸ªæœ€æ— èŠçš„é—®é¢˜äº†ï¼Œåªæœ‰å†™ç¢ç¢å¿µçš„åšå®¢æ‰ä¼šé¢å¯¹â€œæ¿€åŠ±â€çš„é—®é¢˜ã€‚å¦‚æœå†™è‡ªå·±çš„æ€»ç»“ï¼Œå†™è‡ªå·±ç‹¬ç«‹çš„æ€è€ƒï¼Œé‚£ä¹ˆä¹¦å†™ä¸‹æ¥ã€ç†è§£é€šé€ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæå¤§çš„æ¿€åŠ±ã€‚å°±ç®—æ”¾åœ¨è‡ªå·±çš„ç§å¯†ç¬”è®°æœ¬é‡Œé¢ä¹Ÿä¸€æ ·æœ‰æˆå°±æ„Ÿã€‚å†µä¸”ï¼Œå¦‚æœä½ çœŸåšåˆ°äº†ä¹¦å†™ä»·å€¼åšå®¢ï¼Œé‚£ä¹ˆç»å¯¹ä¸ç”¨æ‹…å¿ƒä½ çš„è§‚ç‚¹å¾—ä¸åˆ°ä¼ æ’­ï¼Œä¹Ÿè®¸ä¸€å¼€å§‹ä¼šè€—æ—¶é•¿ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™åœ¨ä»»ä½•äº‹æƒ…ä¸Šéƒ½æ˜¯å¿…è¦çš„åˆå§‹é˜¶æ®µï¼ŒGmail å°ç»„çš„æ ¸å¿ƒäººç‰©ã€FriendFeed åˆ›å§‹äºº Paul Buchheitï¼Œå’Œç¼–ç¨‹ç•Œååš Coding Horror çš„åšä¸» Jeff Atwood éƒ½æ›¾ç»æ„Ÿå¹è¿‡ï¼šOvernight success takes a long time ï¼ˆ(1)ï¼Œ(2)ï¼‰ï¼Œä¸è¿‡å¯¹äºä»·å€¼åšå®¢æ¥è¯´ï¼Œç°åœ¨ç½‘ç»œä¸Šçš„èšåˆç±»æœåŠ¡è¿™ä¹ˆå¤šï¼Œæœºå™¨çš„ã€äººè‚‰çš„ã€åŠäººè‚‰çš„éƒ½æœ‰ï¼Œæƒ…å†µåˆè¦å¥½å¾—å¤šäº†ï¼Œè€Œä¸”æˆ‘ç›¸ä¿¡æƒ…å†µè¿˜ä¼šè¶Šæ¥è¶Šå¥½ã€‚ å†™ä¸å‡ºæ¥ã€‚è¿™ä¸ªé—®é¢˜ä¹Ÿæ¯”è¾ƒæ— èŠï¼Œæ€è€ƒæœ¬ä¸æ˜¯ä¸€ä»¶æ€¥äºæ±‚æˆçš„äº‹æƒ…ã€‚é•¿æœŸè®¢é˜…æˆ‘çš„åšå®¢çš„æœ‹å‹çŸ¥é“æˆ‘ä¸€èˆ¬å‘æ–‡é¢‘ç‡åœ¨ä¸€ä¸ªæœˆä¸‰äº”ç¯‡ï¼Œå®é™…ä¸Šæœ‰ä¸å°‘æ¬¡æˆ‘ä¸ªæŠŠæœˆä¹Ÿä¸å‘å¸ƒæ–‡ç« ï¼ŒåŸå› å¾ˆç®€å•ï¼Œè¦ä¹ˆæ˜¯æœ‰æ‰‹å¤´çš„äº‹æƒ…è¦å¤„ç†æ€è€ƒçš„æ—¶é—´è¢«å‹ç¼©äº†ï¼Œè¦ä¹ˆæ˜¯é‡åˆ°æ¯”è¾ƒå¤§æˆ–è€…æ¯”è¾ƒå›°éš¾çš„é—®é¢˜éœ€è¦é•¿æ—¶é—´çš„æ€è€ƒå’Œç§¯æ·€ï¼Œæ²¡æœ‰å…³ç³»ï¼Œå¦‚æœæ²¡æœ‰æƒ³æ¸…æ¥šå°±å†æƒ³æƒ³ï¼Œçˆ±æ€è€ƒçš„äººå’Œä¸çˆ±æ€è€ƒçš„äººæœ‰ä¸€ä¸ªæœ¬è´¨çš„åŒºåˆ«ï¼Œå‰è€…åœ¨ç”Ÿæ´»ä¸­æ€»æ˜¯æŒ‚ç€å‡ ä¸ªé—®é¢˜åœ¨å¤§è„‘ä¸­ï¼Œå®ƒä»¬æ—¶å¸¸éƒ½ä¼šå†’å‡ºæ¥éªšæ‰°ä½ ä¸€ä¸‹ï¼Œè®©ä½ ç¢ç£¨ç¢ç£¨ï¼Œä¸çˆ±æ€è€ƒçš„åˆ™æ˜¯æ²¡äº‹ä¸ä¸»åŠ¨æƒ³é—®é¢˜ï¼Œé‡åˆ°é—®é¢˜è¿˜è¦å…ˆæƒ³æƒ³æ˜¯å¦èƒ½æ‰¾æ·å¾„ï¼ˆæ‰¾äººå¸®å¿™ï¼‰è§£å†³ã€‚ æ— è®ºå¦‚ä½•ï¼Œä¸ç”¨æ€¥äºæ±‚æˆï¼Œåœ¨ä¸€ä¸ªä¸»é¢˜ä¸Šæ·±å…¥ä¸‹å»æ€è€ƒï¼Œæ€»èƒ½æŒ–åˆ°åˆ«äººæŒ–ä¸åˆ°çš„è§’è½ã€‚ä½ èƒ½è®©ä¸€ä¸ªé—®é¢˜åœ¨å¤§è„‘ä¸­åœç•™çš„æ—¶é—´è¶Šé•¿ï¼Œå°±è¶Šæ˜¯èƒ½å¤Ÿå‘ç°æ–°çš„ä¸œè¥¿ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘è®¤ä¸ºæœ‰ä»·å€¼çš„é—®é¢˜æˆ‘ä¼šè®©ä»–åœ¨æ„è¯†æˆ–æ½œæ„è¯†ä¸­å¾…çŸ­åˆ™ä¸€ä¸ªæ˜ŸæœŸï¼Œé•¿åˆ™ä¸€ä¸ªæœˆï¼ˆè§†é—®é¢˜å¤§å°è€Œå®šï¼‰ï¼Œåˆ©ç”¨èµ°è·¯åƒé¥­çš„æ—¶é—´ç¢ç£¨ï¼ˆæˆ‘å‘ç°å¾ˆå¤šæˆ‘ä½©æœçš„äººä¹Ÿéƒ½æœ‰è¿™ä¸ªä¹ æƒ¯ï¼‰ï¼Œæœ‰æ—¶å³ä¾¿å·²ç»æƒ³é€šäº†å†™ä¸‹æ¥äº†å‘å‡ºå»äº†ï¼Œå¤§è„‘ä»ç„¶è¿˜æ˜¯ä¼šåœ¨å›å‘³é—®é¢˜ï¼Œè¿˜æ²¡æœ‰æŠŠå®ƒæ’¤å‡ºæ½œæ„è¯†ï¼Œç„¶åçœ‹åˆ°æŸç¯‡æ–‡ç« æˆ–æŸæœ¬ä¹¦çš„æ—¶å€™å¿½ç„¶åˆæœ‰æ‰€æ–°çš„æ„Ÿæ‚Ÿã€‚ èƒ½å¤ŸæŠŠé—®é¢˜é•¿æ—¶é—´åœé åœ¨æ½œæ„è¯†ä¸­æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œèƒ½å¤Ÿå¸¦æ¥å¾ˆå¤§çš„å¥½å¤„ï¼Œåœç•™å¾—è¶Šé•¿ä½ è¶Šç¢ç£¨å¾—é€å½»ï¼Œæ¯”åˆ«äººçœ‹åˆ°çš„å°±è¶Šå¤šã€‚æˆ‘ä»¬å¿…é¡»è¦å¸¦ç€é—®é¢˜çš„çœ¼é•œçœ‹å¾…äº‹ç‰©æ‰èƒ½å‘ç°æ–°çš„è§†è§’ï¼Œå¦åˆ™å°±ä¼šå‡ºç°è§†è€Œä¸è§æ•ˆåº”ï¼Œåˆ«çš„ä¸è¯´ï¼Œå¹¿ä¸ºäººçŸ¥çš„ä¾‹å­æ˜¯é˜¿åŸºç±³å¾·çš„â€œå°¤é‡Œå¡ï¼â€ï¼Œå¦‚æœä¸æ˜¯é•¿æ—¶é—´ç¢ç£¨ç€ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ç›´æŠŠå®ƒæ”¾åœ¨æ€ç»´ä¸­ï¼Œæ˜¯ä¸ä¼šä»æ´—æ¾¡é¢†æ‚Ÿåˆ°â€œæ’æ°´æµ‹ä½“ç§¯â€çš„ï¼Œå¦åˆ™ä»–æ´—äº†é‚£ä¹ˆå¤šå¹´æ¾¡æ€ä¹ˆä¸æ—©å‘ç°å‘¢ï¼Ÿ[5] æ‰€ä»¥ï¼Œå¦‚æœä½ ä¹ æƒ¯äº†æ€è€ƒé—®é¢˜ï¼Œå°±æ€»ä¼šæœ‰ä¸œè¥¿å†™ï¼Œå…ˆæœ‰æ€è€ƒï¼Œç„¶åæœ‰æ€»ç»“ï¼Œç„¶ååœ¨æ€»ç»“ä¸­è¿›ä¸€æ­¥æ€è€ƒã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¯•è¯•æŠŠä¸æˆç†Ÿçš„æƒ³æ³•å†™ä¸‹æ¥ï¼Œè¯•å›¾æ•´ç†æˆæ¡ç†æ¸…æ™°çš„æ–‡å­—ï¼Œç„¶åçœ‹çœ‹èƒ½å¦åœ¨æ•´ç†çš„è¿‡ç¨‹ä¸­èµ°å¾—æ›´è¿œã€‚è¿™å¾€å¾€æ˜¯å¯è¡Œçš„ã€‚æ¯”å¦‚è¿™ç¯‡æ–‡ç« åœ¨æˆ‘çš„ç®€è®°é‡Œé¢åŸæœ¬å…¶å®åªæœ‰ä¸‰è¡Œå­—ï¼ˆåŒ…å«å¤§çº¦åæ¥ä¸ªå¤‡å¿˜å…³é”®è¯ï¼‰ï¼Œè€Œæœ€åˆåœ¨æˆ‘çš„å¤§è„‘é‡Œé¢å…¶å®åªæœ‰ä¸€ä¸ªèµ°è·¯æ—¶å†’å‡ºæ¥çš„é—®é¢˜â€”â€”ä¸ºä»€ä¹ˆè¦å†™åšå®¢ï¼Ÿ â€” [1] ä½ å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘æ”¶è—çš„ä¸€äº›ç²¾å½©ä¸»é¢˜ã€‚ [2] å°½ç®¡æˆ‘å¹¶ä¸å®Œå…¨åŒæ„è¿™å¥è¯æœ¬èº«ï¼Œä½†å®ƒè¿™ç§è§£å†³é—®é¢˜é“¾ä¸Šæ›´åŸºæœ¬ç¯èŠ‚çš„é—®é¢˜çš„ç²¾ç¥æ˜¯æˆ‘èµåŒçš„ã€‚ [3] ã€Šå½±å“åŠ› 2ã€‹è¿™ä¸ªåå­—èµ·å¾—å¾ˆèªæ˜ï¼Œå…¶å®å®ƒå¹¶ä¸æ˜¯ã€Šå½±å“åŠ›ã€‹çš„ä½œè€…å†™çš„ã€‚ [4] æˆ‘å¿˜äº†è¿™åˆ™å®éªŒçš„å‡ºå¤„äº†ï¼Œä½†å®éªŒçš„ç²¾ç¥æ˜¯è®°å¿†çŠ¹æ–°çš„ï¼Œå“ªä½åŒå­¦è®°å¾—åŸå§‹å‡ºå¤„çš„éº»çƒ¦æé†’æˆ‘ä¸€ä¸‹ã€‚ [5] å¯¹äºé˜¿åŸºç±³å¾·è¿™ä¸ªæ•…äº‹çš„çœŸå®æ€§æ˜¯æœ‰äº‰è®®çš„ï¼Œæ¯•ç«Ÿå‡ åƒå¹´ä¹…è¿œçš„äº‹æƒ…è°å¼„å¾—æ¸…å‘¢ã€‚ä½†æ˜¯æ•…äº‹çš„é“ç†æ˜¯å¾ˆæœ¬è´¨çš„ï¼Œæˆ‘ä»¬å¹³æ—¶ä¹Ÿç»å¸¸æœ‰ç±»ä¼¼çš„ä½“éªŒï¼ŒåŠ ä¸Šé˜¿åŸºç±³å¾·çš„â€œå°¤é‡Œå¡â€å®åœ¨å¤ªå‡ºåäº†ï¼Œæ‰€ä»¥æˆ‘ç›¸ä¿¡ç”¨ç”¨æ— å¦¨ã€‚ å‚è€ƒä¸ºä»€ä¹ˆä½ åº”è¯¥ï¼ˆä»ç°åœ¨å¼€å§‹å°±ï¼‰å†™åšå®¢","categories":[{"name":"å¿ƒè·¯å†ç¨‹","slug":"å¿ƒè·¯å†ç¨‹","permalink":"http://mariogogogo.github.io/categories/%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B/"}],"tags":[{"name":"Javascriptï¼ŒåŸºç¡€","slug":"Javascriptï¼ŒåŸºç¡€","permalink":"http://mariogogogo.github.io/tags/Javascript%EF%BC%8C%E5%9F%BA%E7%A1%80/"}]}]}